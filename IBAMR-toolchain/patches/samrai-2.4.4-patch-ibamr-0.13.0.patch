diff --git a/config/SAMRAI_config.h.in b/config/SAMRAI_config.h.in
index 90be02a..9fc760b 100644
--- a/config/SAMRAI_config.h.in
+++ b/config/SAMRAI_config.h.in
@@ -1,4 +1,4 @@
-/* config/SAMRAI_config.h.in.  Generated from configure.in by autoheader.  */
+/* config/SAMRAI_config.h.in.  Generated from configure.ac by autoheader.  */
 
 
 
@@ -126,9 +126,6 @@
 /* HAVE_MEMBER_FUNCTION_SPECIALIZATION */
 #undef HAVE_MEMBER_FUNCTION_SPECIALIZATION
 
-/* Define to 1 if you have the <memory.h> header file. */
-#undef HAVE_MEMORY_H
-
 /* MPI library is present */
 #undef HAVE_MPI
 
@@ -159,6 +156,9 @@
 /* Define to 1 if you have the <stdint.h> header file. */
 #undef HAVE_STDINT_H
 
+/* Define to 1 if you have the <stdio.h> header file. */
+#undef HAVE_STDIO_H
+
 /* Define to 1 if you have the <stdlib.h> header file. */
 #undef HAVE_STDLIB_H
 
@@ -313,19 +313,19 @@
 #undef OSTRSTREAM_TYPE_IS_BROKEN
 
 /* Define to the address where bug reports for this package should be sent. */
-#undef PACKAGE_BUGREPORT
+/* #undef PACKAGE_BUGREPORT */
 
 /* Define to the full name of this package. */
-#undef PACKAGE_NAME
+/* #undef PACKAGE_NAME */
 
 /* Define to the full name and version of this package. */
-#undef PACKAGE_STRING
+/* #undef PACKAGE_STRING */
 
 /* Define to the one symbol short name of this package. */
-#undef PACKAGE_TARNAME
+/* #undef PACKAGE_TARNAME */
 
 /* Define to the version of this package. */
-#undef PACKAGE_VERSION
+/* #undef PACKAGE_VERSION */
 
 /* Define if restrict is not properly supported */
 #undef RESTRICT_IS_BROKEN
diff --git a/config/aclocal.m4 b/config/aclocal.m4
deleted file mode 100644
index 2fdf8e2..0000000
--- a/config/aclocal.m4
+++ /dev/null
@@ -1,5834 +0,0 @@
-# generated automatically by aclocal 1.9.6 -*- Autoconf -*-
-
-# Copyright (C) 1996, 1997, 1998, 1999, 2000, 2001, 2002, 2003, 2004,
-# 2005  Free Software Foundation, Inc.
-# This file is free software; the Free Software Foundation
-# gives unlimited permission to copy and/or distribute it,
-# with or without modifications, as long as this notice is preserved.
-
-# This program is distributed in the hope that it will be useful,
-# but WITHOUT ANY WARRANTY, to the extent permitted by law; without
-# even the implied warranty of MERCHANTABILITY or FITNESS FOR A
-# PARTICULAR PURPOSE.
-
-dnl File arg-with-environment.m4
-dnl Written by Brian T.N. Gunney
-dnl gunneyb@llnl.gov
-dnl $Id: arg-with-environment.m4 155 2007-05-14 22:09:31Z gunney $
-
-dnl IMPORTANT NOTE: This macro was originally written to
-dnl let configure macros check environments so that developers
-dnl can set up "make distcheck" to activate or deactivate
-dnl certain packages.  This is largely not needed anymore
-dnl because recent automake versions (1.5+, maybe?) allows
-dnl you to specify configure options for the distcheck rule.
-dnl
-dnl Therefore, you are encouraged to use the plain autoconf
-dnl macros (AC_ARC_WITH and AC_ARG_ENABLE).
-
-AC_DEFUN([BTNG_ARG_WITH_ENV_WRAPPER],[
-dnl This is a high-level macro similar to AC_ARG_WITH but it does
-dnl   a few extra things.
-dnl
-dnl It is meant for setting a shell variable using either the
-dnl   --with-feature configure flag or by setting a shell variable
-dnl   in the environment.  But its primary goal it to set or unset
-dnl   the shell variable (arg2).
-dnl
-dnl One of several things can happen to the shell variable
-dnl   when you use this macro, depending first on the configure
-dnl   option issued:
-dnl   |
-dnl   `-- no option given
-dnl   |   `-- leave shell variable alone, regardless of whether
-dnl   |       it is set (This is how you avoid
-dnl   |       having to use the configure option, such as in
-dnl   |       running the check rule by automake.)
-dnl   `-- with-feature=no or without-feature
-dnl   |   `-- unset shell variable, regardless of whether it is set
-dnl   `-- with-feature=string
-dnl   |   `-- set shell variable to the string
-dnl   `-- with-feature or with-feature=yes
-dnl       `-- if shell variable already set
-dnl       |   `-- leave it a lone
-dnl       `-- else if developer gave optional arg4
-dnl       |   `-- execute optional arg4 to set shell variable
-dnl       `-- else
-dnl           `-- set shell variable to blank
-dnl
-dnl One of two things can happen to the with_feature variable,
-dnl   assuming the developer does not change it using arg4.
-dnl   `-- no option given
-dnl       `-- with_feature is unset
-dnl   `-- one of the options referring to "feature" is given
-dnl       `-- with_feature is set
-dnl
-dnl In addition to running AC_ARG_WITH and caching the result, it:
-dnl   Allows the variable to be set by the environment.  This is
-dnl     for avoiding having to manually issue configure options
-dnl     or when manual configure options are not permissible, as
-dnl     in running "make check".  The environment variable is
-dnl     checked if the --with-something=something_else option
-dnl     is not given or given without the equal sign.
-dnl   Lets you specify command to run if --with-blah is issued
-dnl     without the equal sign or not issued at all.  In this
-dnl     case, the environment variable is consulted.  An unset
-dnl     environment variable is the same as --without-bla.  A set
-dnl     variable is the same as --with-blah=$value.  If $value is an
-dnl     empty string, runs optional command (arg5) to set it.
-dnl   Lets you specify command (arg4) to check the value chosen
-dnl     to make it is good, before caching it.
-dnl The arguments to this macro are:
-dnl   1: Name of what is being sought (the first argument in
-dnl     AC_ARG_WITH).
-dnl   2: Name of variable to set (also name of environment variable
-dnl      to look for if configure option is not issued).
-dnl   3(optional): Help message.  A generic message is provided if
-dnl     this argument is empty.
-dnl   4(optional): Commands to run if configure flag is not specific
-dnl     and environment variable is not set.  These commands are
-dnl     run if with_blah is "yes" or "".  They should set or unset
-dnl     the variable named in arg2, depending on what you want
-dnl     the default behavior to be in these cases.
-dnl   5(optional): Quality checking commands, to check if arg2 is good.
-dnl     This is run before caching result.  Generally, this would issue
-dnl     a warning or error as appropriate.  For example, if this macro
-dnl     is used to set the path to a program, you may want to check
-dnl     if that program exist and is executable.
-# Start macro BTNG_ARG_WITH_ENV_WRAPPER with args $1 and $2
-AC_CACHE_CHECK(for $1,btng_cv_prog_[]translit($1,-,_),[
-AC_ARG_WITH($1,
-ifelse($3,,[  --with-$1	Specify $1 (same as setting $2 in environment)],[$3]))
-# Set $2, using environment setting if available
-#   and if command line is ambiguous.
-case "$with_[]translit($1,-,_)" in
-  no[)]
-    # User explictly turned off $1.
-    # Ignore value of $2, even if set in the environment.
-    unset $2
-    ;;
-  yes|''[)]
-    # Flag unissued or ambiguously issued using --with-$1.
-    # Because the user did not explicitly turn if off,
-    # try to set $2.
-    # If environment variable $2 is available, use it.
-    # If not, try the user-supplied commands to set it.
-    if test -n "${$2}" ;  then
-      : Nothing to do here actually, because $2 is already in the environment.
-    else
-      ifelse($4,,:,$4)
-    fi
-    ;;
-  *)
-    # User issued a specific string using --with-$1=non-null-string.
-    # so that is used to set $2.
-    $2=$with_[]translit($1,-,_)
-    ;;
-esac
-dnl if test ! "${$2+set}" = set ; then
-dnl   # $2 is still unset, after processing --with-$1 flag,
-dnl   # and possibly using optional command to set it.
-dnl   # At this point, check to make sure it is not required.
-dnl   # if it is, then we have an error.
-dnl   case "$with_[]translit($1,-,_)" in
-dnl     no|'')
-dnl       : $2 is not set but it is ok because user did not
-dnl       : explicitly ask for it by issuing --with-$1=something.
-dnl       ;;
-dnl     *)
-dnl       # If user explicitly asked for $1 and we cannot find it[,]
-dnl       # that is an error
-dnl       AC_MSG_ERROR(cannot find appropriate value for $2)
-dnl       ;;
-dnl   esac
-dnl fi
-if test "${$2+set}" = set ; then
-  # This block executes the quality check commands, if any, for $2.
-  ifelse($5,,:,$5)
-fi
-# Cache the value if it was found.
-if test "${$2+set}" = set ; then
-  btng_cv_prog_[]translit($1,-,_)=${$2}
-fi
-])
-dnl This part runs if $2 should be set from cache.
-# Set $2 from cache.
-# $2 is not yet set if we grabbed it from cache.
-if test "${btng_cv_prog_[]translit($1,-,_)+set}" = set ; then
-  $2=$btng_cv_prog_[]translit($1,-,_)
-else
-  unset $2
-fi
-# End macro BTNG_ARG_WITH_ENV_WRAPPER with args $2 and $1
-])
-
-
-
-
-AC_DEFUN([BTNG_PATH_PROG],[
-dnl This is a high-level macro to find paths to certain programs.
-dnl In addition to (possibly) running AC_ARG_WITH and AC_PATH_PROG it:
-dnl   Allows the path to be set in an environment variable ($1),
-dnl     useful for setting configuration during "make check" and
-dnl     for avoiding manual configure options setting.
-dnl   Makes sure that the program is executable, if the user explicitly
-dnl     specified it.
-dnl The arguments are (similar to AC_PATH_PROG):
-dnl   1: Variable name to set to the path (used in BTNG_PATH_PROG).
-dnl   2: Name of program being sought (used in BTNG_PATH_PROG).
-dnl   3(optional): Commands to set $1 in case neither environment
-dnl      nor command line options are given.  Defaults to a call to
-dnl      AC_PATH_PROG($1,$2).
-dnl   4(optional): Quality check commands to make sure that a
-dnl      sufficiently good program is found.  Defaults to a simple
-dnl      check that the program is executable.
-BTNG_ARG_WITH_ENV_WRAPPER($2,$1,
-[[  --with-$2=PATH	Specify path to $2 program
-			(equivalent to setting $1 in environment)]]dnl
-,
-[
-dnl Commands to run if user was not specific.
-# Just set the variable to blank and check later.
-$1=
-],
-dnl Quality check commands.
-ifelse($4,,[
-  # if $1 is an absolute path, make sure it is executable.
-  if echo "${$1}" | grep '^/' > /dev/null && test ! -x "${$1}"; then
-    AC_MSG_WARN($2 program ${$1} is not executable.)
-  fi],$4)
-)dnl
-if test "${$1+set}" = set; then
-  ifelse($3,,[AC_PATH_PROG($1,$2)],$3)
-fi
-])
-
-
-
-
-AC_DEFUN([BTNG_ARG_WITH_PREFIX],[
-dnl This is a high-level macro to set the prefix for a
-dnl previously installed package.
-dnl The macro arguments are:
-dnl 1. package name
-dnl 2. variable to contain installation prefix.
-dnl 3(optional): Help message.  A generic message is provided if
-dnl   this argument is empty.
-dnl 4(optional): Commands to run if configure flag is not specific
-dnl   and environment variable is not set.  These commands are
-dnl   run if with_blah is "yes" or "".  They should set or unset
-dnl   the variable named in arg2, depending on what you want
-dnl   the defaul behavior to be in these cases.  The default is
-dnl   to exit with an error.
-# Start macro BTNG_ARG_WITH_PREFIX
-BTNG_ARG_WITH_ENV_WRAPPER($1,$2,
-ifelse([$3],,
-[[  --with-$1=PATH	Specify prefix where $1 is installed
-			(equivalent to setting $2 in the environment)]]
-,[[[$3]]]),
-ifelse([$4],,
-[[if test "${with_[]translit($1,-,_)}" = yes ; then
-  AC_MSG_ERROR([[If you specify --with-$1, you must give it the path as in --with-$1=/installation/path]])
-fi
-BTNG_AC_LOG(environment $2 not defined)
-]],[[[$4]]])
-)dnl
-# End macro BTNG_ARG_WITH_PREFIX
-])
-
-
-
-
-dnl $Id: compiler-id.m4 155 2007-05-14 22:09:31Z gunney $
-
-dnl Determines which compiler is being used.
-dnl This check uses the compiler behavior when possible.
-dnl For some compiler, we resort to a best guess,
-dnl because we do not know a foolproof way to get the info.
-
-dnl Much of the information used here came from the very
-dnl helpful predef project (http://predef.sourceforge.net/).
-
-
-
-
-dnl Simple wrappers to allow using BTNG_INFO_CXX_ID_NAMES and
-dnl BTNG_INFO_CC_ID_NAMES without arguments.
-dnl The names CC_ID and CC_VERSION are used for the C compiler id and version.
-dnl The names CXX_ID and CXX_VERSION are used for the C++ compiler id and version.
-AC_DEFUN([BTNG_INFO_CXX_ID],[
-  BTNG_INFO_CXX_ID_NAMES(CXX_ID,CXX_VERSION)
-])
-AC_DEFUN([BTNG_INFO_CC_ID],[
-  BTNG_INFO_CC_ID_NAMES(CC_ID,CC_VERSION)
-])
-AC_DEFUN([BTNG_INFO_CC_CXX_ID],[
-  AC_REQUIRE([BTNG_INFO_CC_ID])
-  AC_REQUIRE([BTNG_INFO_CXX_ID])
-])
-
-
-dnl BTNG_INFO_CXX_ID and BTNG_INFO_C_ID determine which C or C++ compiler
-dnl is being used.
-# Set the variables CXX_ID or C_ID as follows:
-# Gnu		-> gnu
-# SUNWspro	-> sunpro
-# Dec		-> dec
-# KCC		-> kai
-# Intel		-> intel
-# SGI		-> sgi
-# IBM xlc	-> xlc
-
-
-AC_DEFUN([BTNG_INFO_CXX_ID_NAMES],
-dnl Arguments are:
-dnl 1. Name of variable to set to the ID string.
-dnl 2. Name of variable to set to the version number.
-[
-# Start macro BTNG_INFO_CXX_ID_NAMES
-  AC_REQUIRE([AC_PROG_CXXCPP])
-  AC_LANG_SAVE
-  AC_LANG_CPLUSPLUS
-  BTNG_AC_LOG(CXXP is $CXX)
-  BTNG_AC_LOG(CXXCPP is $CXXCPP)
-
-  $1=unknown
-  $2=unknown
-
-dnl Do not change the following chain of if blocks into a case statement.
-dnl We may eventually have a compiler that must be tested in a different
-dnl method
-
-
-  # Check if it is a Sun compiler.
-  if test $$1 = unknown; then
-    BTNG_AC_LOG(checking if $CXX is sunpro)
-    AC_EGREP_CPP([^0x[0-9]+],__SUNPRO_CC,
-      $1=sunpro
-      # SUN compiler defines __SUNPRO_CC to the version number.
-      echo __SUNPRO_CC > conftest.C
-      $2=`${CXXCPP} conftest.C | sed -n 2p`
-      rm -f conftest.C
-    )
-  fi
-
-
-  # Check if it is a Intel compiler.
-  if test $$1 = unknown; then
-    BTNG_AC_LOG(checking if $CXX is intel)
-    AC_EGREP_CPP(^yes,
-#ifdef __INTEL_COMPILER
-yes;
-#endif
-,
-      $1=intel
-      # Intel compiler defines __INTEL_COMPILER to the version number.
-      echo __INTEL_COMPILER > conftest.C
-      $2=`${CXXCPP} conftest.C | sed -n 2p`
-      rm -f conftest.C
-    )
-  fi
-
-
-  # Check if it is a GNU compiler.
-  if test $$1 = unknown; then
-    BTNG_AC_LOG(checking if $CXX is gnu)
-    AC_EGREP_CPP(^yes,
-#ifdef __GNUC__
-yes;
-#endif
-,
-    $1=gnu
-    # GNU compilers output version number with option --version.
-    # Alternatively, it also defines the macros __GNUC__,
-    # GNUC_MINOR__ and __GNUC_PATCHLEVEL__
-    [[$2=`$CXX --version | sed -e 's/[^0-9]\{0,\}\([^ ]\{1,\}\).\{0,\}/\1/' -e 1q`]]
-    )
-  fi
-
-
-  # Check if it is a DEC compiler.
-  if test $$1 = unknown; then
-    BTNG_AC_LOG(checking if $CXX is dec)
-    AC_EGREP_CPP(^1,__DECCXX,
-      $1=dec
-      # DEC compiler defines __DECCXX_VER to the version number.
-      echo __DECCXX_VER > conftest.C
-      $2=`${CXXCPP} conftest.C | sed -n 2p`
-      rm -f conftest.C
-    )
-  fi
-
-
-  # Check if it is a KAI compiler.
-  if test $$1 = unknown; then
-    BTNG_AC_LOG(checking if $CXX is kai)
-    AC_EGREP_CPP(^1,__KCC,
-      $1=kai
-      # KCC compiler defines __KCC_VERSION to the version number.
-      echo __KCC_VERSION > conftest.C
-      $2=`${CXXCPP} conftest.C | sed -n 2p`
-      rm -f conftest.C
-    )
-  fi
-
-
-  # Check if it is a SGI compiler.
-  if test $$1 = unknown; then
-    BTNG_AC_LOG(checking if $CXX is sgi)
-    AC_EGREP_CPP(^1,__sgi,
-      $1=sgi
-      # SGI compiler defines _COMPILER_VERSION to the version number.
-      echo _COMPILER_VERSION > conftest.C
-      $2=`${CXXCPP} conftest.C | sed /^\\#/d`
-      rm -f conftest.C
-    )
-  fi
-
-
-  # Check if it is a IBM compiler.
-  if test $$1 = unknown; then
-    BTNG_AC_LOG(checking if $CXX is xlc)
-    AC_EGREP_CPP(^yes,
-#ifdef __xlC__
-yes;
-#endif
-,
-    $1=xlc
-    # IBM compiler defines __xlC__ to the version number.
-    echo __xlC__ > conftest.C
-    $2=`${CXXCPP} conftest.C | sed /^\\#/d`
-    rm -f conftest.C
-    )
-  fi
-
-
-  AC_LANG_RESTORE
-  BTNG_AC_LOG_VAR(CXX_ID CXX_VERSION)
-# End macro BTNG_INFO_CXX_ID_NAMES
-])
-
-
-
-
-
-AC_DEFUN([BTNG_INFO_CC_ID_NAMES],
-dnl Arguments are:
-dnl 1. Name of variable to set to the ID string.
-dnl 2. Name of variable to set to the version number.
-[
-# Start macro BTNG_INFO_CC_ID_NAMES
-  AC_REQUIRE([AC_PROG_CPP])
-  AC_LANG_SAVE
-  AC_LANG_C
-  BTNG_AC_LOG(CC is $CC)
-  BTNG_AC_LOG(CPP is $CPP)
-
-  $1=unknown
-  $2=unknown
-
-dnl Do not change the following chain of if blocks into a case statement.
-dnl We may eventually have a compiler that must be tested in a different
-dnl method
-
-
-  # Check if it is a Sun compiler.
-  if test $$1 = unknown; then
-    BTNG_AC_LOG(checking if $CC is sunpro)
-    AC_EGREP_CPP([^ 0x[0-9]+],__SUNPRO_C,
-      $1=sunpro
-      # SUN compiler defines __SUNPRO_C to the version number.
-      echo __SUNPRO_C > conftest.c
-      $2=`${CPP} ${CPPFLAGS} conftest.c | sed -n -e 's/^ //' -e 2p`
-      rm -f conftest.c
-    )
-  fi
-
-
-  # Check if it is a Intel compiler.
-  if test $$1 = unknown; then
-    BTNG_AC_LOG(checking if $CC is intel)
-    AC_EGREP_CPP(^yes,
-#ifdef __INTEL_COMPILER
-yes;
-#endif
-,
-      $1=intel
-      # Intel compiler defines __INTEL_COMPILER to the version number.
-      echo __INTEL_COMPILER > conftest.C
-      $2=`${CPP} conftest.C | sed -n 2p`
-      rm -f conftest.C
-    )
-  fi
-
-
-  # Check if it is a GNU compiler.
-  if test $$1 = unknown; then
-    BTNG_AC_LOG(checking if $CC is gnu)
-    AC_EGREP_CPP(^yes,
-#ifdef __GNUC__
-yes;
-#endif
-,
-    $1=gnu
-    [[$2=`$CC --version | sed -e 's/[^0-9]\{0,\}\([^ ]\{1,\}\).\{0,\}/\1/' -e 1q`]]
-    )
-  fi
-
-
-  # Check if it is a DEC compiler.
-  if test $$1 = unknown; then
-    BTNG_AC_LOG(checking if $CC is dec)
-    AC_EGREP_CPP(^ 1,__DECC,
-      $1=dec
-      # DEC compiler defines __DECC_VER to the version number.
-      echo __DECC_VER > conftest.c
-      $2=`${CPP} ${CPPFLAGS} conftest.c | sed -n -e 's/^ //' -e 2p`
-      rm -f conftest.c
-    )
-  fi
-
-
-  # Check if it is a KAI compiler.
-  if test $$1 = unknown; then
-    BTNG_AC_LOG(checking if $CC is kai)
-    AC_EGREP_CPP(^1,__KCC,
-      $1=kai
-      # KCC compiler defines __KCC_VERSION to the version number.
-      echo __KCC_VERSION > conftest.c
-      $2=`${CPP} ${CPPFLAGS} conftest.c | sed -n 2p`
-      rm -f conftest.c
-    )
-  fi
-
-
-  # Check if it is a SGI compiler.
-  if test $$1 = unknown; then
-    BTNG_AC_LOG(checking if $CC is sgi)
-    AC_EGREP_CPP(^1,__sgi,
-      $1=sgi
-      # SGI compiler defines _COMPILER_VERSION to the version number.
-      echo _COMPILER_VERSION > conftest.c
-      $2=`${CPP} ${CPPFLAGS} conftest.c | sed /^\\#/d`
-      rm -f conftest.c
-    )
-  fi
-
-
-  # Check if it is a IBM compiler.
-  if test $$1 = unknown; then
-    BTNG_AC_LOG(checking if $CC is xlc)
-    if echo "$host_os" | grep "aix" >/dev/null ; then
-      # The wretched IBM shell does not eval correctly,
-      # so we have to help it with a pre-eval eval statement.
-      ac_cpp=`eval "echo $ac_cpp"`
-      save_ac_cpp=$ac_cpp
-      BTNG_AC_LOG(ac_cpp is temporarily set to $ac_cpp)
-    else
-      save_ac_cpp=
-    fi
-    BTNG_AC_LOG(ac_cpp is $ac_cpp)
-    AC_EGREP_CPP(^yes,
-#ifdef __xlC__
-yes;
-#endif
-,
-    $1=xlc
-    # IBM compiler defines __xlC__ to the version number.
-    echo __xlC__ > conftest.C
-    $2=`${CPP} conftest.C | sed /^\\#/d`
-    rm -f conftest.C
-    )
-    test "$save_ac_cpp" && ac_cpp=$save_ac_cpp
-    BTNG_AC_LOG(ac_cpp is restored to $ac_cpp)
-  fi
-
-
-  AC_LANG_RESTORE
-  BTNG_AC_LOG_VAR(CC_ID CC_VERSION)
-# End macro BTNG_INFO_CC_ID_NAMES
-])
-
-dnl $Id: compiling-boolean.m4 155 2007-05-14 22:09:31Z gunney $
-
-
-AC_DEFUN([BTNG_TYPE_BOOL],[
-
-# Start macro BTNG_TYPE_BOOL
-
-AC_MSG_CHECKING(checking whether bool type is broken)
-
-AC_CACHE_VAL(btng_cv_type_bool_broken, [
-
-  AC_LANG_SAVE
-  AC_LANG_CPLUSPLUS
-
-  AC_TRY_COMPILE(, bool b = true; ,
-    # bool is not broken.
-    btng_cv_type_bool_broken=no
-    ,
-    # bool is broken.
-    btng_cv_type_bool_broken=yes
-  )	dnl End AC_TRY_COMPILE call
-
-  AC_LANG_RESTORE
-
-])	dnl End AC_CACHE_VAL call
-
-AC_MSG_RESULT($btng_cv_type_bool_broken)
-
-if test "$btng_cv_type_bool_broken" = yes; then
-  AC_DEFINE([BOOL_IS_BROKEN],1,Define if bool type is not properly supported)
-fi
-
-
-# End macro BTNG_TYPE_BOOL
-
-])	dnl End of COMPILE_BOOLEAN_MACRO definition.
-
-dnl $Id: compiling-namespace.m4 155 2007-05-14 22:09:31Z gunney $
-
-
-
-AC_DEFUN([BTNG_TYPE_NAMESPACE],[
-
-# Start macro BTNG_TYPE_NAMESPACE
-
-AC_MSG_CHECKING(whether namespace is broken)
-
-AC_CACHE_VAL(btng_cv_type_namespace_broken, [
-
-  dnl AC_LANG_SAVE
-  dnl AC_LANG_CPLUSPLUS
-  AC_LANG_PUSH([C++])
-  AC_TRY_COMPILE(namespace test{ int i; }
-		, using namespace test;,
-    # namespace is not broken.
-    btng_cv_type_namespace_broken=no
-    ,
-    # namespace is broken.
-    btng_cv_type_namespace_broken=yes
-  )	dnl End AC_TRY_COMPILE call
-
-  AC_LANG_POP([C++])
-  dnl AC_LANG_RESTORE
-
-])	dnl End AC_CACHE_VAL call
-
-AC_MSG_RESULT($btng_cv_type_namespace_broken)
-
-if test "$btng_cv_type_namespace_broken" = yes; then
-  AC_DEFINE([NAMESPACE_IS_BROKEN],1,Define if namespace is not properly supported)
-fi
-
-
-# End macro BTNG_TYPE_NAMESPACE
-
-])	dnl End of BTNG_TYPE_NAMESPACE definition.
-
-AC_DEFUN([BTNG_AC_LOG],[echo "configure:__oline__:" $1 >&AC_FD_CC])
-
-AC_DEFUN([BTNG_AC_LOG_VAR],[
-dnl arg1 is list of variables to log.
-dnl arg2 (optional) is a label.
-dnl
-dnl This macro makes code that write out at configure time
-dnl label: x is '...'
-dnl if x is set and
-dnl label: x is unset
-dnl otherwise.
-define([btng_log_label],ifelse($2,,,[$2: ]))
-btng_log_vars="$1"
-for btng_log_vars_index in $btng_log_vars ; do
-  eval "test \"\${${btng_log_vars_index}+set}\" = set"
-  if test $? = 0; then
-    btng_log_vars_value="'`eval echo \\${$btng_log_vars_index}`'";
-  else
-    btng_log_vars_value="unset";
-  fi
-  BTNG_AC_LOG("btng_log_label$btng_log_vars_index is $btng_log_vars_value");
-dnl
-dnl This is a shorter version, but it does not work for some Bourne shells
-dnl due to misinterpretation of the multiple backslashes
-dnl BTNG_AC_LOG("btng_log_label$btng_log_vars_index is `eval if test \\\"\$\{$btng_log_vars_index+set\}\\\"\; then echo \\\""'"\$\{$btng_log_vars_index\}"'"\\\"\; else echo 'unset'\; fi`")
-done
-undefine([btng_log_label])
-])
-
-dnl $Id: support-blas.m4 155 2007-05-14 22:09:31Z gunney $
-
-AC_DEFUN([BTNG_VAR_SET_BLAS],[
-dnl Provides support for the blas library.
-dnl
-dnl Arguments are:
-dnl 1. Name of variable to set to path where blas are installed.
-dnl    Nothing is done if this variable is unset.
-dnl    If you only want to look in default locations, set it to blank.
-dnl 2. Name of the INCLUDES variable similar to the automake INCLUDES variable.
-dnl    This variable is modified ONLY if it is NOT set.
-dnl 3. Name of the LIBS variable similar to the automake LIBS variable.
-dnl    This variable is modified ONLY if it is NOT set.
-dnl
-dnl If arg1 is defined, assume that the user wants blas
-dnl support.  Do so by assigning arg2 and arg3 if they are not defined.
-dnl
-if test "${$1+set}" = set ; then
-  # Modify the output INCLUDES variable, if it is not set.
-  if test ! "${$2+set}" = set ; then
-    test -n "${$1}" && $2="-I${$1}/include"
-  fi
-  # Modify the output LIBS variable, if it is not set.
-  if test ! "${$3+set}" = set ; then
-    # Save LIBS for later recovery.
-    btng_save_LIBS="$LIBS";
-    # Extra libraries, if any, required by this check.
-    btng_extra_libs="$libz_LIBS -lm"
-    # If path is given, add path to extra flag for library search.
-    test -n "${$1}" && btng_extra_libs="-L${$1}/lib $btng_extra_libs"
-    # Look for library.
-    AC_SEARCH_LIBS([daxpy_],blas,[
-      BTNG_AC_LOG_VAR(LIBS,After finding blas flag)
-      # Action if found ...
-      # Extract modifications to LIB into library-specific LIBS variable.
-      $3=`echo " $LIBS" | sed "s! $btng_save_LIBS!!"`;
-      test -n "${$1}" && $3="-L${$1}/lib ${$3}"
-      BTNG_AC_LOG_VAR($3, Found blas library flag)
-      ],[
-      # Action if NOT found ...
-      BTNG_AC_LOG_VAR($3, Did not find blas library flag)
-      AC_MSG_WARN(
-[I could not systematically find the name of
-the blas library so I am using -lblas instead.])
-      $3="-lblas"
-      test -n "${$1}" &&	\
-	$3="-L${$1}/lib ${$3}"	# Add path flag to output variable.
-      ],[$btng_extra_libs])
-    LIBS="$btng_save_LIBS";	# Restore global-use variable.
-    unset btng_extra_libs
-    unset btng_save_LIBS
-  else
-    BTNG_AC_LOG(Not looking for blas because $3 is already set)
-  fi
-fi
-])dnl
-
-
-
-
-AC_DEFUN([BTNG_SUPPORT_BLAS],[
-dnl Support blas library by setting the variables
-dnl blas_PREFIX, blas_INCLUDES, and blas_LIBS.
-dnl Arg1: non-empty if you want the default to be on.
-dnl
-# Begin macro BTNG_SUPPORT_BLAS
-
-BTNG_ARG_WITH_ENV_WRAPPER(blas, blas_PREFIX,
-ifelse($1,,
-[  --with-blas[=PATH]
-			Use blas and optionally specify where
-			they are installed.],
-[  --without-blas	Do not use the blas library.]),
-if test "${with_blas+set}" = set; then
-  blas_PREFIX=
-else
-ifelse($1,,unset blas_PREFIX,blas_PREFIX=)
-fi
-)
-
-BTNG_ARG_WITH_PREFIX(blas-includes,blas_INCLUDES,
-[  --with-blas-includes=STRING
-			Specify the INCLUDES flags for blas.
-			If not specified, and --with-blas=PATH is,
-			this defaults to "-IPATH/include".])dnl
-
-BTNG_ARG_WITH_PREFIX(blas-libs,blas_LIBS,
-[  --with-blas-libs=STRING
-			Specify LIBS flags for blas.
-			If not specified, and --with-blas=PATH is,
-			this defaults to "-LPATH/lib -lblas".])dnl
-
-BTNG_VAR_SET_BLAS(blas_PREFIX,blas_INCLUDES,blas_LIBS)
-
-BTNG_AC_LOG_VAR(blas_PREFIX blas_INCLUDES blas_LIBS)
-# End macro BTNG_SUPPORT_BLAS
-])
-
-dnl $Id: support-blaslapack.m4 155 2007-05-14 22:09:31Z gunney $
-
-AC_DEFUN([BTNG_SUPPORT_BLASLAPACK],[
-dnl Support blas and lapack libraries by setting the variables
-dnl blaslapack_PREFIX, blaslapack_INCLUDES, and blaslapack_LIBS.
-dnl Arg1: non-empty if you want the default to be on.
-dnl
-# Begin macro BTNG_SUPPORT_BLASLAPACK
-
-BTNG_ARG_WITH_ENV_WRAPPER(blaslapack, blaslapack_PREFIX,
-ifelse($1,,
-[  --with-blaslapack[=PATH]
-			Use blas and lapack and optionally specify where
-			they are installed.],
-[  --without-blaslapack	Do not use the blas and lapack libraries.]),
-if test "${with_blaslapack+set}" = set; then
-  blaslapack_PREFIX=
-else
-ifelse($1,,unset blaslapack_PREFIX,blaslapack_PREFIX=)
-fi
-)
-
-BTNG_ARG_WITH_PREFIX(blaslapack-includes,blaslapack_INCLUDES,
-[  --with-blaslapack-includes=STRING
-			Specify the INCLUDES flags for blas and lapack.
-			If not specified, and --with-blaslapack=PATH is,
-			this defaults to "-IPATH/include".])dnl
-
-BTNG_ARG_WITH_PREFIX(blaslapack-libs,blaslapack_LIBS,
-[  --with-blaslapack-libs=STRING
-			Specify LIBS flags for blas and lapack.
-			If not specified, and --with-blaslapack=PATH is,
-			this defaults to "-LPATH/lib -llapack -lblas".])dnl
-
-# Look for blas and lapack flags separately.
-# Then combine them.
-if test "${blaslapack_PREFIX+set}" = set; then
-  blas_PREFIX="$blaslapack_PREFIX"
-  lapack_PREFIX="$blaslapack_PREFIX"
-fi
-BTNG_VAR_SET_BLAS(blas_PREFIX,blas_INCLUDES,blas_LIBS)
-BTNG_VAR_SET_LAPACK(lapack_PREFIX,lapack_INCLUDES,lapack_LIBS)
-
-# Combine include flags from blas and lapack without repeating -I flags.
-if test -n "$blas_INCLUDES" || test -n "$lapack_INCLUDES" ; then
-unset blaslapack_INCLUDES
-for i in $lapack_INCLUDES $blas_INCLUDES ; do
-  case $i in
-  -I*) 
-    echo "${blaslapack_INCLUDES}" | egrep "($i\$|$i[[ 	]] *)" > /dev/null	\
-      && continue	# already contains the flag we want to add.
-    blaslapack_INCLUDES="$blaslapack_INCLUDES $i"
-    ;;
-  esac
-done
-fi
-
-# Combine lib flags from blas and lapack without repeating -L flags.
-if test -n "$blas_LIBS" || test -n "$lapack_LIBS" ; then
-unset blaslapack_LIBS
-for i in $lapack_LIBS $blas_LIBS ; do
-  case $i in
-  -L*) 
-    echo "${blaslapack_LIBS}" | egrep "($i\$|$i[[ 	]] *)" > /dev/null	\
-      && continue	# already contains the flag we want to add.
-    blaslapack_LIBS="$blaslapack_LIBS $i"
-    ;;
-  esac
-done
-for i in $lapack_LIBS $blas_LIBS ; do
-  case $i in
-  -L*) : ;;
-  *) blaslapack_LIBS="$blaslapack_LIBS $i";
-  esac
-done
-fi
-
-BTNG_AC_LOG_VAR(blaslapack_PREFIX blaslapack_INCLUDES blaslapack_LIBS)
-# End macro BTNG_SUPPORT_BLASLAPACK
-])
-
-dnl Define macros for supporting HDF5.
-dnl $Id: support-dl.m4 155 2007-05-14 22:09:31Z gunney $
-
-AC_DEFUN([BTNG_VAR_SET_DL],[
-dnl Provides support for the dl (dynamic loading) library.
-dnl
-dnl Arguments are:
-dnl 1. Name of variable to set to path where dl are installed.
-dnl    Nothing is done if this variable is unset.
-dnl    If you only want to look in default locations, set it to blank.
-dnl 2. Name of the INCLUDES variable similar to the automake INCLUDES variable.
-dnl    This variable is modified ONLY if it is NOT set and the path
-dnl    is non-blank.
-dnl 3. Name of the LIBS variable similar to the automake LIBS variable.
-dnl    This variable is modified ONLY if it is NOT set.
-dnl    If the library cannot be found, this remains unset.
-dnl
-dnl If arg1 is defined, assume that the user wants dl support.
-dnl Do so by assigning arg2 and arg3 if they are not defined.
-dnl
-# Begin macro BTNG_VAR_SET_DL
-if test "${$1+set}" = set ; then
-  # Modify the output INCLUDES variable, if it is not set.
-  if test ! "${$2+set}" = set ; then
-    test -n "${$1}" && $2="-I${$1}/include"
-  fi
-  # Modify the output LIBS variable, if it is not set.
-  if test ! "${$3+set}" = set ; then
-    # Save LIBS for later recovery.
-    btng_save_LIBS="$LIBS";
-    # Extra libraries, if any, required by this check.
-    btng_extra_libs="$libz_LIBS -lm"
-    # If path is given, add path to extra flag for library search.
-    test -n "${$1}" && btng_extra_libs="-L${$1}/lib $btng_extra_libs"
-    # Look for library.
-    AC_SEARCH_LIBS([dlopen],dl,[
-      BTNG_AC_LOG_VAR(LIBS,After finding dl flag)
-      # Action if found ...
-      # Extract modifications to LIB into library-specific LIBS variable.
-      $3=`echo " $LIBS" | sed "s! $btng_save_LIBS!!"`;
-      test -n "${$1}" && $3="-L${$1}/lib ${$3}"
-      BTNG_AC_LOG_VAR($3, Found dl library flag)
-      ],[
-      # Action if NOT found ...
-      BTNG_AC_LOG_VAR($3, Did not find dl library flag)
-      ],[$btng_extra_libs])
-    LIBS="$btng_save_LIBS";	# Restore global-use variable.
-    unset btng_extra_libs
-    unset btng_save_LIBS
-  else
-    BTNG_AC_LOG(Not looking for dl because $3 is already set)
-  fi
-fi
-# End macro BTNG_VAR_SET_DL
-])dnl
-
-
-
-AC_DEFUN([BTNG_SUPPORT_DL],[
-dnl Support dl library by setting the variables
-dnl dl_PREFIX, dl_INCLUDES, and dl_LIBS.
-dnl Arg1: non-empty if you want the default to be on.
-dnl
-# Begin macro BTNG_SUPPORT_DL
-
-BTNG_ARG_WITH_ENV_WRAPPER(dl, dl_PREFIX,
-ifelse($1,,
-[  --with-dl[=PATH]
-			Use the dynamic loading library and optionally
-			specify where it is installed.],
-[  --without-dl		Do not use the dynamic loading library.]),
-ifelse($1,,unset dl_PREFIX; test "${with_dl+set}" = set && dl_PREFIX=,dl_PREFIX=))
-
-BTNG_ARG_WITH_PREFIX(dl-includes,dl_INCLUDES,
-[  --with-dl-includes=STRING
-			Specify the INCLUDES flags for dl.
-			If not specified, and --with-dl=PATH is,
-			this defaults to "-IPATH/include".])dnl
-
-BTNG_ARG_WITH_PREFIX(dl-libs,dl_LIBS,
-[  --with-dl-libs=STRING
-			Specify LIBS flags for dl.
-			If not specified, and --with-dl=PATH is,
-			this defaults to "-LPATH/lib -ldl".])dnl
-
-BTNG_VAR_SET_DL(dl_PREFIX,dl_INCLUDES,dl_LIBS)
-# End macro BTNG_SUPPORT_DL
-])
-
-dnl $Id: support-hypre.m4 155 2007-05-14 22:09:31Z gunney $
-
-dnl Define macros for supporting HYPRE.
-
-
-AC_DEFUN([BTNG_SUPPORT_HYPRE],[
-dnl Support hypre libraries by setting the variables
-dnl hypre_PREFIX, hypre_INCLUDES, and hypre_LIBS.
-dnl Arg1: empty if you want the default to be off.
-dnl
-# Begin macro BTNG_SUPPORT_HYPRE
-BTNG_ARG_WITH_ENV_WRAPPER(hypre, hypre_PREFIX,
-ifelse($1,,
-[  --with-hypre[=PATH]	Use HYPRE and optionally specify where it is installed.],
-[  --without-hypre	Do not use the HYPRe library.]),
-ifelse($1,,if test "$with_hypre" = '' ; then unset hypre_PREFIX; else hypre_PREFIX=; fi, hypre_PREFIX=)
-)
-BTNG_VAR_SET_HYPRE(hypre_PREFIX,hypre_INCLUDES,hypre_LIBS)
-BTNG_AC_LOG_VAR(hypre_PREFIX hypre_INCLUDES hypre_LIBS)
-if test "${hypre_PREFIX+set}" = set; then
-  btng_save_cppflags=$CPPFLAGS
-
-  # Add hypre include flags to cpp so we can examine its header file.
-  CPPFLAGS="$hypre_INCLUDES $CPPFLAGS"
-  BTNG_AC_LOG_VAR(hypre_INCLUDES CPPFLAGS)
-
-  # Check if HYPRE header is ok.
-  AC_CHECK_HEADER(HYPRE_config.h,:,
-    [AC_MSG_ERROR(Problems checking HYPRE_config.h)])
-
-  # Check if HYPRE was compiled with parallelism.
-  AC_MSG_CHECKING(if hypre is serial or parallel)
-  AC_EGREP_CPP([^HYPRE_SEQUENTIAL_IS_DEFINED$], [
-#include <HYPRE_config.h>
-#ifdef HYPRE_SEQUENTIAL
-HYPRE_SEQUENTIAL_IS_DEFINED
-#endif
-    ],
-    hypre_PARALLELISM=serial,
-    hypre_PARALLELISM=parallel)
-  AC_MSG_RESULT($hypre_PARALLELISM)
-
-  # Reset cpp after checking hypre header file.
-  CPPFLAGS=$btng_save_cppflags
-  unset btng_save_cppflags
-
-  BTNG_AC_LOG_VAR(CPPFLAGS)
-  BTNG_AC_LOG_VAR(hypre_config_file hypre_PARALLELISM)
-fi
-# End macro BTNG_SUPPORT_HYPRE
-])
-
-
-AC_DEFUN([BTNG_VAR_SET_HYPRE],[
-dnl Provides support for the blas and lapack libraries.
-dnl
-dnl Arguments are:
-dnl 1. Name of variable to set to path where hypre is installed.
-dnl    Nothig is done if this variable is unset.
-dnl 2. Name of the INCLUDES variable similar to the automake INCLUDES variable.
-dnl    This variable is modified ONLY if it is NOT set.
-dnl 3. Name of the LIBS variable similar to the automake LIBS variable.
-dnl    This variable is modified ONLY if it is NOT set.
-dnl
-dnl If arg1 is defined, assume that the user wants blas and lapack
-dnl support.  Do so by assigning arg2 and arg3 if they are not defined.
-dnl
-# Begin macro BTNG_VAR_SET_HYPRE
-if test "${$1+set}" = set ; then
-  if test ! "${$2+set}" = set ; then
-    test -n "${$1}" && $2="-I${$1}/include"
-  fi
-  if test ! "${$3+set}" = set ; then
-    $3='-lHYPRE_sstruct_ls -lHYPRE_sstruct_mv -lHYPRE_struct_ls -lHYPRE_struct_mv -lHYPRE_parcsr_ls -lHYPRE_DistributedMatrixPilutSolver -lHYPRE_ParaSails -lHYPRE_Euclid -lHYPRE_MatrixMatrix -lHYPRE_DistributedMatrix -lHYPRE_IJ_mv -lHYPRE_parcsr_mv -lHYPRE_seq_mv -lHYPRE_krylov -lHYPRE_utilities'
-    if test -n "${$1}" ; then
-      for i in ${$3} ; do
-	tmp_name=`echo $i | sed 's/^-l//'`
-        if test ! -f "${$1}/lib/lib${tmp_name}.a" && \
-          test ! -f "${$1}/lib/lib${tmp_name}.so"; then
-          AC_MSG_WARN(Library file for ${tmp_name} is missing from ${$1}/lib.)
-        fi
-      done
-      $3="-L${$1}/lib ${$3}"
-    fi
-  fi
-fi
-# End macro BTNG_VAR_SET_HYPRE
-])dnl
-
-dnl $Id: support-ieee-float.m4 155 2007-05-14 22:09:31Z gunney $
-
-AC_DEFUN([BTNG_C_IEEE_FLOAT],[
-dnl Check on certain declarations in the float.h file:
-dnl FLT_SNAN DBL_SNAN
-dnl
-dnl ac_define ..._IS_BROKEN for symbols that are not defined.
-dnl
-# Begin macro BTNG_IEEE_FLOAT
-
-AC_LANG_C
-
-AC_EGREP_CPP([^nan is broken],
-[#include <float.h>
-#ifndef NAN
-nan is broken
-#endif],
-AC_DEFINE([NAN_IS_BROKEN],[1],[Define if NAN is not in float.h])
-BTNG_AC_LOG(["NAN is broken (not in float.h)"]),
-BTNG_AC_LOG(["NAN is ok (in float.h)"])
-)
-
-AC_EGREP_CPP([^flt snan is broken],
-[#include <float.h>
-#ifndef FLT_SNAN
-flt snan is broken
-#endif],
-AC_DEFINE([FLT_SNAN_IS_BROKEN],[1],[Define if FLT_SNAN is not in float.h])
-BTNG_AC_LOG(["FLT_NAN is broken (not in float.h)"]),
-BTNG_AC_LOG(["FLT_NAN is ok (in float.h)"])
-)
-
-AC_EGREP_CPP([^dbl snan is broken],
-[#include <float.h>
-#ifndef DBL_SNAN
-dbl snan is broken
-#endif],
-AC_DEFINE([DBL_SNAN_IS_BROKEN],[1],[Define if DBL_SNAN is not in float.h])
-BTNG_AC_LOG(["DBL_NAN is broken (not in float.h)"]),
-BTNG_AC_LOG(["DBL_NAN is ok (in float.h)"])
-)
-
-AC_EGREP_CPP([^flt snan is broken],
-[#include <float.h>
-#ifndef FLT_MAX
-flt snan is broken
-#endif],
-AC_DEFINE([FLT_MAX_IS_BROKEN],[1],[Define if FLT_MAX is not in float.h])
-BTNG_AC_LOG(["FLT_MAX is broken (not in float.h)"]),
-BTNG_AC_LOG(["FLT_MAX is ok (in float.h)"])
-)
-
-AC_EGREP_CPP([^dbl snan is broken],
-[#include <float.h>
-#ifndef DBL_MAX
-dbl snan is broken
-#endif],
-AC_DEFINE([DBL_MAX_IS_BROKEN],[1],[Define if DBL_MAX is not in float.h])
-BTNG_AC_LOG(["DBL_MAX is broken (not in float.h)"]),
-BTNG_AC_LOG(["DBL_MAX is ok (in float.h)"])
-)
-
-# End macro BTNG_IEEE_FLOAT
-])dnl
-
-dnl $Id: support-lapack.m4 155 2007-05-14 22:09:31Z gunney $
-
-AC_DEFUN([BTNG_VAR_SET_LAPACK],[
-dnl Provides support for the lapack library.
-dnl
-dnl Arguments are:
-dnl 1. Name of variable to set to path where lapack are installed.
-dnl    Nothig is done if this variable is unset.
-dnl 2. Name of the INCLUDES variable similar to the automake INCLUDES variable.
-dnl    This variable is modified ONLY if it is NOT set.
-dnl 3. Name of the LIBS variable similar to the automake LIBS variable.
-dnl    This variable is modified ONLY if it is NOT set.
-dnl
-dnl If arg1 is defined, assume that the user wants lapack
-dnl support.  Do so by assigning arg2 and arg3 if they are not defined.
-dnl
-if test "${$1+set}" = set ; then
-  # Modify the output INCLUDES variable, if it is not set.
-  if test ! "${$2+set}" = set ; then
-    test -n "${$1}" && $2="-I${$1}/include"
-  fi
-  # Modify the output LIBS variable, if it is not set.
-  if test ! "${$3+set}" = set ; then
-    # Save LIBS for later recovery.
-    btng_save_LIBS="$LIBS";
-    # Extra libraries, if any, required by this check.
-    btng_extra_libs="$libz_LIBS -lm"
-    # If path is given, add path to extra flag for library search.
-    test -n "${$1}" && btng_extra_libs="-L${$1}/lib $btng_extra_libs"
-    # Look for library.
-    AC_SEARCH_LIBS([xerbla_],lapack,[
-      BTNG_AC_LOG_VAR(LIBS,After finding lapack flag)
-      # Action if found ...
-      # Extract modifications to LIB into library-specific LIBS variable.
-      $3=`echo " $LIBS" | sed "s! $btng_save_LIBS!!"`;
-      test -n "${$1}" && $3="-L${$1}/lib ${$3}"
-      BTNG_AC_LOG_VAR($3, Found lapack library flag)
-      ],[
-      # Action if NOT found ...
-      BTNG_AC_LOG_VAR($3, Did not find lapack library flag)
-      AC_MSG_WARN(
-[I could not systematically find the name of
-the lapack library so I am using -llapack instead.])
-      $3="-llapack"
-      test -n "${$1}" &&	\
-	$3="-L${$1}/lib ${$3}"	# Add path flag to output variable.
-      ],[$btng_extra_libs])
-    LIBS="$btng_save_LIBS";	# Restore global-use variable.
-    unset btng_extra_libs
-    unset btng_save_LIBS
-  else
-    BTNG_AC_LOG(Not looking for lapack because $3 is already set)
-  fi
-fi
-])dnl
-
-
-
-
-AC_DEFUN([BTNG_SUPPORT_LAPACK],[
-dnl Support lapack library by setting the variables
-dnl lapack_PREFIX, lapack_INCLUDES, and lapack_LIBS.
-dnl Arg1: non-empty if you want the default to be on.
-dnl
-# Begin macro BTNG_SUPPORT_LAPACK
-
-BTNG_ARG_WITH_ENV_WRAPPER(lapack, lapack_PREFIX,
-ifelse($1,,
-[  --with-lapack[=PATH]
-			Use lapack and optionally specify where
-			they are installed.],
-[  --without-lapack	Do not use the lapack library.]),
-if test "${with_lapack+set}" = set; then
-  lapack_PREFIX=
-else
-ifelse($1,,unset lapack_PREFIX,lapack_PREFIX=)
-fi
-)
-
-BTNG_ARG_WITH_PREFIX(lapack-includes,lapack_INCLUDES,
-[  --with-lapack-includes=STRING
-			Specify the INCLUDES flags for lapack.
-			If not specified, and --with-lapack=PATH is,
-			this defaults to "-IPATH/include".])dnl
-
-BTNG_ARG_WITH_PREFIX(lapack-libs,lapack_LIBS,
-[  --with-lapack-libs=STRING
-			Specify LIBS flags for lapack.
-			If not specified, and --with-lapack=PATH is,
-			this defaults to "-LPATH/lib -llapack".])dnl
-
-BTNG_VAR_SET_LAPACK(lapack_PREFIX,lapack_INCLUDES,lapack_LIBS)
-
-BTNG_AC_LOG_VAR(lapack_PREFIX lapack_INCLUDES lapack_LIBS)
-# End macro BTNG_SUPPORT_LAPACK
-])
-
-dnl Define macros for supporting z compression library.
-dnl $Id: support-libz.m4 155 2007-05-14 22:09:31Z gunney $
-
-AC_DEFUN([BTNG_VAR_SET_LIBZ],[
-dnl Provides support for the z compression library.
-dnl
-dnl Arguments are:
-dnl 1. Name of variable to set to path where z compression library is installed.
-dnl    Nothing is done if this variable is unset.
-dnl    If you only want to look in default locations, set it to blank.
-dnl 2. Name of the INCLUDES variable similar to the automake INCLUDES variable.
-dnl    This variable is modified ONLY if it is NOT set.
-dnl 3. Name of the LIBS variable similar to the automake LIBS variable.
-dnl    This variable is modified ONLY if it is NOT set.
-dnl
-dnl If arg1 is defined, assume that the user wants z compression
-dnl support.  Do so by assigning arg2 and arg3 if they are not defined.
-dnl
-# End macro BTNG_VAR_SET_LIBZ
-if test "${$1+set}" = set ; then
-  # Modify the output INCLUDES variable, if it is not set.
-  if test ! "${$2+set}" = set ; then
-    test -n "${$1}" && $2="-I${$1}/include"
-  fi
-  # Modify the output LIBS variable, if it is not set.
-  if test ! "${$3+set}" = set ; then
-    # Save LIBS for later recovery.
-    btng_save_LIBS="$LIBS";
-    # Extra libraries, if any, required by this check.
-    btng_extra_libs="$libz_LIBS -lm"
-    # If path is given, add path to extra flag for library search.
-    test -n "${$1}" && btng_extra_libs="-L${$1}/lib $btng_extra_libs"
-    # Look for library.
-    AC_SEARCH_LIBS([zlibVersion],z,[
-      BTNG_AC_LOG_VAR(LIBS,After finding libz flag)
-      # Action if found ...
-      # Extract modifications to LIB into library-specific LIBS variable.
-      $3=`echo " $LIBS" | sed "s! $btng_save_LIBS!!"`;
-      test -n "${$1}" && $3="-L${$1}/lib ${$3}"
-      BTNG_AC_LOG_VAR($3, Found libz library flag)
-      ],[
-      # Action if NOT found ...
-      BTNG_AC_LOG_VAR($3, Did not find libz library flag)
-      ],[$btng_extra_libs])
-    LIBS="$btng_save_LIBS";	# Restore global-use variable.
-    unset btng_extra_libs
-    unset btng_save_LIBS
-  else
-    BTNG_AC_LOG(Not looking for libz because $3 is already set)
-  fi
-fi
-# End macro BTNG_VAR_SET_LIBZ
-])dnl
-
-
-
-AC_DEFUN([BTNG_SUPPORT_LIBZ],[
-dnl Support z compression library by setting the variables
-dnl libz_PREFIX, libz_INCLUDES, and libz_LIBS.
-dnl Arg1: non-empty if you want the default to be on.
-dnl
-# Begin macro BTNG_SUPPORT_LIBZ
-
-BTNG_ARG_WITH_ENV_WRAPPER(libz, libz_PREFIX,
-ifelse($1,,
-[  --with-libz[=PATH]
-			Use z compression and optionally specify where
-			it is installed.],
-[  --without-libz	Do not use the z compression library.]),
-ifelse($1,,unset libz_PREFIX; test "${with_libz+set}" = set && libz_PREFIX=,libz_PREFIX=))
-
-BTNG_ARG_WITH_PREFIX(libz-includes,libz_INCLUDES,
-[  --with-libz-includes=STRING
-			Specify the INCLUDES flags for z compression.
-			If not specified, and --with-libz=PATH is,
-			this defaults to "-IPATH/include".])dnl
-
-BTNG_ARG_WITH_PREFIX(libz-libs,libz_LIBS,
-[  --with-libz-libs=STRING
-			Specify LIBS flags for z compression.])dnl
-
-BTNG_VAR_SET_LIBZ(libz_PREFIX,libz_INCLUDES,libz_LIBS)
-# End macro BTNG_SUPPORT_LIBZ
-])
-
-dnl $Id: support-nsl.m4 155 2007-05-14 22:09:31Z gunney $
-
-AC_DEFUN([BTNG_VAR_SET_NSL],[
-dnl Provides support for the nsl library.
-dnl
-dnl Arguments are:
-dnl 1. Name of variable to set to path where nsl are installed.
-dnl    Nothing is done if this variable is unset.
-dnl    If you only want to look in default locations, set it to blank.
-dnl 2. Name of the INCLUDES variable similar to the automake INCLUDES variable.
-dnl    This variable is modified ONLY if it is NOT set and the path
-dnl    is non-blank.
-dnl 3. Name of the LIBS variable similar to the automake LIBS variable.
-dnl    This variable is modified ONLY if it is NOT set.
-dnl    If the library cannot be found, this remains unset.
-dnl
-dnl If arg1 is defined, assume that the user wants nsl support.
-dnl Do so by assigning arg2 and arg3 if they are not defined.
-dnl
-if test "${$1+set}" = set ; then
-  # Modify the output INCLUDES variable, if it is not set.
-  if test ! "${$2+set}" = set ; then
-    test -n "${$1}" && $2="-I${$1}/include"
-  fi
-  # Modify the output LIBS variable, if it is not set.
-  if test ! "${$3+set}" = set ; then
-    # Save LIBS for later recovery.
-    btng_save_LIBS="$LIBS";
-    # Extra libraries, if any, required by this check.
-    btng_extra_libs="$libz_LIBS -lm"
-    # If path is given, add path to extra flag for library search.
-    test -n "${$1}" && btng_extra_libs="-L${$1}/lib $btng_extra_libs"
-    # Look for library.
-    AC_SEARCH_LIBS([getnetname],nsl,[
-      BTNG_AC_LOG_VAR(LIBS,After finding nsl flag)
-      # Action if found ...
-      # Extract modifications to LIB into library-specific LIBS variable.
-      $3=`echo " $LIBS" | sed "s! $btng_save_LIBS!!"`;
-      test -n "${$1}" && $3="-L${$1}/lib ${$3}"
-      BTNG_AC_LOG_VAR($3, Found nsl library flag)
-      ],[
-      # Action if NOT found ...
-      BTNG_AC_LOG_VAR($3, Did not find nsl library flag)
-      ],[$btng_extra_libs])
-    LIBS="$btng_save_LIBS";	# Restore global-use variable.
-    unset btng_extra_libs
-    unset btng_save_LIBS
-  else
-    BTNG_AC_LOG(Not looking for nsl because $3 is already set)
-  fi
-fi
-])dnl
-
-
-
-AC_DEFUN([BTNG_SUPPORT_NSL],[
-dnl Support nsl library by setting the variables
-dnl nsl_PREFIX, nsl_INCLUDES, and nsl_LIBS.
-dnl Arg1: non-empty if you want the default to be on.
-dnl
-# Begin macro BTNG_SUPPORT_NSL
-
-BTNG_ARG_WITH_ENV_WRAPPER(nsl, nsl_PREFIX,
-ifelse($1,,
-[  --with-nsl[=PATH]
-			Use nsl and optionally specify where
-			it is installed.],
-[  --without-nsl	Do not use the nsl library.]),
-ifelse($1,,unset nsl_PREFIX; test "${with_nsl+set}" = set && nsl_PREFIX=,nsl_PREFIX=))
-BTNG_AC_LOG_VAR(nsl_PREFIX nsl_INCLUDES nsl_LIBS, before looking)
-
-BTNG_ARG_WITH_PREFIX(nsl-includes,nsl_INCLUDES,
-[  --with-nsl-includes=STRING
-			Specify the INCLUDES flags for nsl.
-			If not specified, and --with-nsl=PATH is,
-			this defaults to "-IPATH/include".])dnl
-
-BTNG_ARG_WITH_PREFIX(nsl-libs,nsl_LIBS,
-[  --with-nsl-libs=STRING
-			Specify LIBS flags for nsl.
-			If not specified, and --with-nsl=PATH is,
-			this defaults to "-LPATH/lib -lnsl".])dnl
-
-BTNG_VAR_SET_NSL(nsl_PREFIX,nsl_INCLUDES,nsl_LIBS)
-# End macro BTNG_SUPPORT_NSL
-])
-
-dnl $Id: support-petsc.m4 305 2007-12-04 17:03:07Z smithsg $
-
-AC_DEFUN([BTNG_SUPPORT_PETSC],[
-# Begin macro SUPPORT_PETSC
-dnl Support PETSC by setting PETSC_DIR, PETSC_ARCH,
-dnl petsc_INCLUDE and petsc_LIBS.
-dnl Also set PETSC_VERSION_MAJOR, PETSC_VERSION_MINOR and
-dnl PETSC_VERSION_SUBMINOR to indicate PETSc version.
-dnl
-dnl Support --with-petsc-optimize to use optimized PETSC library.
-dnl Support --with-petsc-mpiuni to use PETSC uniprocessor MPI library.
-dnl
-dnl Arg1: non-empty if you want the default to be on.
-dnl
-dnl This version supports PETSc-2.1.0 and later.
-
-# Set PETSC_DIR to the PETSC root directory.
-BTNG_ARG_WITH_PREFIX(petsc,PETSC_DIR,
-ifelse($1,,
-[[  --with-petsc=PATH	Support PETSc, and specify PETSC top-level directory.
-			Setting PETSC_DIR is equivalent to this.]],
-[  --without-petsc	Do not support PETSc.])
-,
-# User was not specific about specifying PETSc.
-ifelse($1,,
-# PETSc should be off by default.
-# So if user specified --with-petsc, it should include a path or it is an error.
-if test "${with_petsc+set}" = set ; then
-  # User specified --with-petsc ambiguously.
-  AC_MSG_ERROR([You must specify a path with --with-petsc=...])
-else
-  # User did not specify --with-petsc, so turn it off.
-  unset PETSC_DIR;
-fi
-,
-# PETSc should be on by default.
-# So require that user say where it is or turn it off.
-AC_MSG_ERROR([You must specify either --with-petsc=... or --without-petsc.])
-))
-
-# Set version numbers (PETSC_VERSION_...) for use by configure.
-# Users can directly access these from the PETSc header file.
-if test "${PETSC_DIR+set}" = set; then
-[
-PETSC_VERSION_MAJOR=`sed -e '/^[ \t]\{0,\}#define PETSC_VERSION_MAJOR/!d' -e 's/.\{0,\}[ \t]\{1,\}//' $PETSC_DIR/include/petscversion.h`
-PETSC_VERSION_MINOR=`sed -e '/^[ \t]\{0,\}#define PETSC_VERSION_MINOR/!d' -e 's/.\{0,\}[ \t]\{1,\}//' $PETSC_DIR/include/petscversion.h`
-PETSC_VERSION_SUBMINOR=`sed -e '/^[ \t]\{0,\}#define PETSC_VERSION_SUBMINOR/!d' -e 's/.\{0,\}[ \t]\{1,\}//' $PETSC_DIR/include/petscversion.h`
-]
-fi
-BTNG_AC_LOG_VAR(PETSC_VERSION_MAJOR PETSC_VERSION_MINOR PETSC_VERSION_SUBMINOR)
-
-# Set PETSC_ARCH.
-BTNG_ARG_WITH_PREFIX(petsc-arch,PETSC_ARCH,
-[  --with-petsc-arch=PETSC_ARCH
-			Specify the PETSC architecture.
-			If omitted, the output of the petscarch script
-			in the PETSc directory is used.])
-
-# Set PETSC_OPTIMIZE.
-BTNG_ARG_WITH_ENV_WRAPPER(petsc-optimize,PETSC_OPTIMIZE,
-[  --with-petsc-optimize
-			Use the optimized PETSC libraries],
-# By default, use the debug PETSC library.
-PETSC_OPTIMIZE=g
-BTNG_AC_LOG_VAR(with_petsc_optimize)
-test "$with_petsc_optimize" = yes && PETSC_OPTIMIZE=O
-)
-
-# Set PETSC_MPIUNI.
-BTNG_ARG_WITH_ENV_WRAPPER(petsc-mpiuni,PETSC_MPIUNI,
-[  --with-petsc-mpiuni	Use the PETSC uniprocessor MPI library],
-# By default, do not use the PETSC uniprocessor MPI library.
-unset PETSC_MPIUNI
-)
-
-# Set PETSC_LIBFILES
-unset PETSC_LIBFILES
-AC_ARG_WITH(petsc-libfiles,
-[  --with-petsc-libfiles
-			Specify explit PETSc library files instead
-			of -L and -l flags (may help some debuggers)],
-test "$with_petsc_libfiles" = yes && PETSC_LIBFILES=yes)
-
-
-if test "${PETSC_DIR+set}" = set; then
-  # Set up PETSC only if PETSC_DIR is defined.
-
-  if test ! -d "$PETSC_DIR"; then
-    AC_MSG_WARN([PETSC directory ($PETSC_DIR) does not look right])
-  fi
-  export PETSC_DIR
-  if test -z "$PETSC_ARCH"; then
-    if test -f "$PETSC_DIR/bmake/petscconf"; then
-	eval `grep PETSC_ARCH $PETSC_DIR/bmake/petscconf`
-    elif test -x "$PETSC_DIR/bin/petscarch"; then
-       PETSC_ARCH=`$PETSC_DIR/bin/petscarch`
-    else
-       AC_MSG_WARN([PETSC could not determine PETSC_ARCH])
-    fi    
-    export PETSC_ARCH
-  fi
-  BTNG_AC_LOG_VAR(PETSC_ARCH)
-  if test ! -d "$PETSC_DIR/bmake/$PETSC_ARCH"; then
-    AC_MSG_WARN([PETSC architecture ($PETSC_ARCH) does not look right])
-  fi
-  if test ! "$PETSC_OPTIMIZE" = g && test ! "$PETSC_OPTIMIZE" = O; then
-    AC_MSG_ERROR([PETSC optimize should be either g or O])
-  fi
-
-  petsc_INCLUDES="-I$PETSC_DIR/include -I$PETSC_DIR/bmake/$PETSC_ARCH"
-  petsc_INCLUDES="$petsc_INCLUDES -I$PETSC_DIR/src/vec"
-  # Currently, I'm not entirely sure why we have to explicitly specify
-  # the src/vec directory in the include path.  But there is at least
-  # one required file there that cannot be found in the include directory.
-
-# SGS Support latter version of PETSc
-# Try new structure and then old
-  if test -d "${PETSC_DIR}/lib/${PETSC_ARCH}"; then
-    petsc_LIBDIR="${PETSC_DIR}/lib/${PETSC_ARCH}"
-  elif  test -d "${PETSC_DIR}/lib/lib${PETSC_OPTIMIZE}/${PETSC_ARCH}"; then
-    petsc_LIBDIR="${PETSC_DIR}/lib/lib${PETSC_OPTIMIZE}/${PETSC_ARCH}"
-  else 
-    AC_MSG_WARN([PETSC lib directory does not look as expected])
-  fi
-
-
-  # Issue the -L flag if not specifying PETSc libraries by file names.
-  test ! "${PETSC_LIBFILES+set}" = set && petsc_LIBS="-L${petsc_LIBDIR}"
-
-  # Build up a list of PETSC library files.
-# SGS
-  petsc_libs_ls1=`cd ${petsc_LIBDIR} && echo lib*.*`
-
-  if test -n "$petsc_libs_ls1"; then
-    unset petsc_libs_ls
-    for i in $petsc_libs_ls1; do
-      j=`echo $i | sed -e 's/lib//' -e 's/\.a$//' -e 's/\.so$//'`
-      if echo "$petsc_libs_ls" | grep -v " $j " > /dev/null; then # Note padding!
-        petsc_libs_ls="$petsc_libs_ls $j ";	# Note space padding!
-      fi
-    done
-  fi
-  # Remove mpiuni from the list of PETSC libraries unless user asked for it.
-  if test ! "${PETSC_MPIUNI}" = yes; then
-    petsc_libs_ls=`echo "$petsc_libs_ls" | sed 's/ mpiuni //g'`
-  fi
-  # Move some low-level libraries to the end to ensure resolution
-  # for linkers that only make one pass.
-  for i in petscmat petscvec petsc; do
-    petsc_libs_ls=`echo "$petsc_libs_ls" | sed 's/\(.*\)\( \{0,1\}'"$i"'\{0,1\} \)\(.*\)/\1 \3 \2/g'`
-  done
-  # Build up petsc_LIBS string using library names.
-  BTNG_AC_LOG_VAR(petsc_libs_ls1 petsc_libs_ls)
-  if test -n "$petsc_libs_ls"; then
-    if test "${PETSC_LIBFILES+set}" = set; then
-      for i in $petsc_libs_ls; do
-# SGS
-        petsc_LIBS="$petsc_LIBS ${petsc_LIBDIR}/lib${i}.a"
-      done
-    else
-      for i in $petsc_libs_ls; do
-        petsc_LIBS="$petsc_LIBS -l$i"
-      done
-    fi
-  fi
-
-  BTNG_AC_LOG_VAR(PETSC_DIR petsc_INCLUDES petsc_LIBS PETSC_OPTIMIZE PETSC_MPIUNI)
-
-fi
-# End macro SUPPORT_PETSC
-])
-
-dnl $Id: support-restrict.m4 155 2007-05-14 22:09:31Z gunney $
-
-
-
-AC_DEFUN([BTNG_C_RESTRICT],[
-
-# Start macro BTNG_C_RESTRICT
-
-AC_MSG_CHECKING(checking whether restrict is broken)
-
-AC_CACHE_VAL(btng_cv_c_restrict_broken, [
-
-  AC_LANG_PUSH([C++])
-  AC_TRY_COMPILE([
-struct array_test {
-  double *ptr;
-  int i0;
-  array_test(double *p, int i);
-  double &value(int i) const;
-};
-array_test::array_test(double *p, int i) : ptr(p), i0(i) {}
-double &array_test::value(int i) __restrict__ const {
-  return ptr[i-i0];
-}
-    ],[
-double a[10];
-array_test at(a,20);
-at.value(5) = 5;
-    ],
-    # restrict is not broken.
-    btng_cv_c_restrict_broken=no
-    ,
-    # restrict is broken.
-    btng_cv_c_restrict_broken=yes
-  )	dnl End AC_TRY_COMPILE call
-
-  AC_LANG_POP([C++])
-
-])	dnl End AC_CACHE_VAL call
-
-AC_MSG_RESULT($btng_cv_c_restrict_broken)
-
-if test "$btng_cv_c_restrict_broken" = yes; then
-  AC_DEFINE([RESTRICT_IS_BROKEN],1,Define if restrict is not properly supported)
-fi
-
-
-# End macro BTNG_C_RESTRICT
-
-])	dnl End of BTNG_C_RESTRICT definition.
-
-dnl $Id: support-rpath.m4 333 2008-02-08 00:36:14Z smithsg $
-
-
-AC_DEFUN([BTNG_LIBS_ADD_RPATH],[
-# Begin macro BTNG_LIBS_ADD_RPATH
-dnl Support RPATH by going in a LIBS string and, for each -L flag,
-dnl add a flag immediately following it to set the RPATH, for
-dnl paths that contain shared libraries.
-dnl
-dnl arg1 is a LIBS string.
-dnl arg2 is the name of the variable to set to the new LIBS string.
-dnl arg3 is non-empty to use id of the C++ compiler instead of the C compiler.
-
-
-dnl Determine which compiler is being used, because
-dnl the syntax of the RPATH flag depends on the compiler.
-dnl Use the C++ compiler and assume the C compiler
-dnl is from the same family.
-AC_REQUIRE([BTNG_INFO_CC_CXX_ID])
-
-
-AC_ARG_ENABLE(rpath,
-[  --enable-rpath=SYNTAX	When linking add syntax for rpath for every
-			-L option that points to a directory with .so
-			files in it.  If SYNTAX is omitted, an attempt
-			is made to find out the correct rpath syntax for
-			the compiler being used.]
-,,enable_rpath=yes)
-
-if test "$enable_rpath" = yes; then
-  # Determine the proper rpath syntax.
-
-  AC_LANG_SAVE
-
-  ifelse([$3],,
-  AC_LANG_C
-  btng_rpath_compiler_id="$CC_ID",
-  AC_LANG_CPLUSPLUS
-  btng_rpath_compiler_id="$CXX_ID"
-  )
-
-
-  # Unset the rpath syntax variable so we can check on whether we
-  # found a way to set it.
-  unset btng_rpath_beginning;
-
-  # Determine, based on the compiler, the syntax for specifying RPATH.
-  # It should be of the form "$btng_rpath_beginning$the_path", where
-  # btng_rpath_beginning is the compiler-dependent part.
-  case "$btng_rpath_compiler_id" in
-    gnu)
-      # This compiler may use a variable rpath syntax because it may use
-      # the native loader.
-      BTNG_LIBS_FIND_RPATH(btng_rpath_beginning,
-	['---bogus-flag-meant-to-cause-error' '-Wl,-rpath ' '-Wl,-R' '-Wl,-R '])
-    ;;
-    intel)
-      # This compiler may use a variable rpath syntax because it may use
-      # the native loader.
-      BTNG_LIBS_FIND_RPATH(btng_rpath_beginning,
-	['---bogus-flag-meant-to-cause-error' '-Wl,-rpath ' '-Wl,-R' '-Wl,-R '])
-      if test "$btng_rpath_beginning" = "---bogus-flag-meant-to-cause-error"; then
-        # Do not rely on the compiler return value to test for syntax
-        # Guess the syntax assuming the native loader will be used.
-        case "$host_os" in
-          linux*) btng_rpath_beginning='-Wl,-rpath ' ;;
-          sun*|solaris*) btng_rpath_beginning='-R' ;;
-          osf*) btng_rpath_beginning='-rpath ' ;;
-          *) btng_rpath_beginning='' ;;
-        esac
-        AC_MSG_WARN(
-  [Your compiler ifelse($3,,$CC,$CXX) returns 0 even when it is
-  given a bogus flag.  Therefore, I cannot find the proper syntax
-  for the rpath for this compiler.  I have resorted to a guess that
-  may not be correct: '$btng_rpath_beginning'.
-  You can override this by using --enable-rpath=SYNTAX])
-      fi
-    ;;
-    sunpro)
-      # This compiler may use a variable rpath syntax.
-      BTNG_LIBS_FIND_RPATH(btng_rpath_beginning,['---bogus-flag-meant-to-cause-error' '-R' '-R '])
-    ;;
-    kai)
-      # The KAI compilers use the system native loader.
-      #
-      # On some platforms (PC/Linux at least), this compiler seems
-      # to return 0 even if it encounters error, thus it can return
-      # the first guess for the rpath syntax, even if the guess is
-      # wrong.  We try to catch this by making the first flag bogus.
-      # If the compiler accepts this flag (by returning 0), we know
-      # it is wrong and we resort to an alternative method for
-      # getting the rpath syntax.
-      BTNG_LIBS_FIND_RPATH(btng_rpath_beginning,
-	['---bogus-flag-meant-to-cause-error' '-R' '-R ' '-rpath ' '-Wl,-rpath ' '-Wl,-R' '-Wl,-R '])
-      if test "$btng_rpath_beginning" = "---bogus-flag-meant-to-cause-error"; then
-        # Do not rely on the compiler return value to test for syntax
-        # Guess the syntax assuming the native loader will be used.
-        case "$host_os" in
-          linux*) btng_rpath_beginning='-Wl,-rpath ' ;;
-          sun*|solaris*) btng_rpath_beginning='-R' ;;
-          osf*) btng_rpath_beginning='-rpath ' ;;
-          *) btng_rpath_beginning='' ;;
-        esac
-        AC_MSG_WARN(
-  [Your compiler ifelse($3,,$CC,$CXX) returns 0 even when it is
-  given a bogus flag.  Therefore, I cannot find the proper syntax
-  for the rpath for this compiler.  I have resorted to a guess that
-  may not be correct: '$btng_rpath_beginning'.
-  You can override this by using --enable-rpath=SYNTAX])
-      fi
-    ;;
-    *)
-      BTNG_LIBS_FIND_RPATH(btng_rpath_beginning)
-    ;;
-  esac
-  BTNG_AC_LOG_VAR(host_os CC_ID CXX_ID btng_rpath_compiler_id btng_rpath_beginning, forming rpaths)
-
-  AC_LANG_RESTORE
-
-  # It is valid to have btng_rpath_beginning be blank.
-  # but if it is unset, we could not find a way to set it.
-  if test ! "${btng_rpath_beginning+set}" = set; then
-    AC_MSG_WARN(I cannot find a working syntax for setting relocatable paths)
-  fi
-
-elif test ! "${enable_rpath}" = no; then
-
-  # User has provided the rpath syntax.
-  btng_rpath_beginning=$enable_rpath
-
-fi;	# End block determining the proper rpath syntax.
-
-
-# Use the rpath syntax.
-if test "${btng_rpath_beginning+set}" = set	\
-  && test -n "${btng_rpath_beginning}" ; then
-  # Add the RPATH flags only if we know the syntax for it,
-  # and if it is needed as indicated by a non-empty btng_rpath_beginning.
-
-  # Loop through the flags in $1, looking for the -L flag,
-  # and append RPATH flag to each one found, if the the
-  # path specified by the flag includes shared libraries.
-  for i in ${$1}; do
-    btng_new_$2="${btng_new_$2} ${i}"
-    btng_tmp_addl_string=`echo $i | sed 's/^-L//'`
-    test "$btng_tmp_addl_string" = "$i" && continue	# does not contain -L.
-    test -d "$btng_tmp_addl_string" || continue;	# directory nonexistent.
-    test "`echo $btng_tmp_addl_string/*.so`" = "$btng_tmp_addl_string/*.so" \
-      && continue;	# does not contain shared libraries.
-    echo "${btng_new_$2}"	\
-      | grep ".*${btng_rpath_beginning}[[ 	]]*${btng_tmp_addl_string}"	\
-      > /dev/null	\
-      && continue	# already contains the flag we want to add.
-    btng_new_$2="${btng_new_$2} ${btng_rpath_beginning}${btng_tmp_addl_string}"
-  done
-  $2="${btng_new_$2}"
-
-fi
-
-dnl Now, arg2 should be similar to arg1, but with the additional RPATH flags.
-
-# End macro BTNG_LIBS_ADD_RPATH
-])
-
-AC_DEFUN([BTNG_LIBS_FIND_RPATH],[
-# Begin macro BTNG_LIBS_FIND_RPATH
-dnl Find the correct rpath syntax from the list given in arg1.
-dnl arg1: variable to set to the syntax string
-dnl arg2: list of syntaxes to try;
-dnl   if blank, a large number of syntaxes will be tried.
-dnl
-dnl arg1 is list of possible rpath syntaxes to try.
-define(btng_possible_rpaths,dnl
-[ifelse($2,,['-R ' '-R' '-rpath ' '-Wl,-rpath ' '-Wl,-R ' '-Wl,-R'],[[$2]])])
-  btng_save_LIBS="$LIBS";
-  for i in btng_possible_rpaths; do
-    LIBS="${i}/usr/local"
-    AC_TRY_LINK(,,$1="$i", unset $1)
-    # Intel compiler does not fail on bad args but warning message is
-    # created. If warning is found in the log then continue searching
-    # for syntax as the current one is no good.  If warning is not
-    # found use return status of link attempt to determine if
-    # parameter was accepted by the compiler.
-    SEARCH=`echo "ignoring unknown option '${LIBS}'" | sed -e "s/---/-f-/"`
-    if ( grep "$SEARCH" config.log ) >/dev/null 2>&1
-    then 
-	:
-    else 
-        if test "${$1+set}" = set; then break; fi
-    fi
-  done
-  LIBS="$btng_save_LIBS"
-undefine([btng_possible_rpaths])
-# End macro BTNG_LIBS_FIND_RPATH
-])
-
-dnl Define macros for supporting z compression library.
-dnl $Id: support-spooles.m4 155 2007-05-14 22:09:31Z gunney $
-
-
-AC_DEFUN([BTNG_SUPPORT_SPOOLES],[
-dnl Support spooles library by setting the variables
-dnl spooles_PREFIX, spooles_INCLUDES, and spooles_LIBS.
-dnl Arg1: non-empty if you want the default to be on.
-dnl
-# Begin macro BTNG_SUPPORT_SPOOLES
-
-ifelse($1,,unset spooles_PREFIX,spooles_PREFIX=)
-
-AC_ARG_WITH(spooles,
-ifelse($1,,
-[  --with-spooles[=PATH]
-			Use spooles library and optionally specify where
-			it is installed.],
-[  --without-spooles	Do not use the spooles library.]),
-if test "${with_spooles+set}" = yes ; then
-  spooles_PREFIX=
-elif test "${with_spooles}" = no; then
-  unset spooles_PREFIX;
-else
-  spooles_PREFIX="${with_spooles}"
-fi
-)
-
-if test "${spooles_PREFIX+set}" = set; then
-  # Set spooles_LIBS and spooles_INCLUDE if they are not already set.
-  # Note that we expect library archives and headers to be
-  # directly under spooles_PREFIX rather than subdirectories
-  # lib and include of spooles_PREFIX.
-  if test ! "${spooles_LIBS+set}" = set; then
-    if test ! "${spooles_PREFIX}" = ''; then
-      spooles_LIBS="-L${spooles_PREFIX}"
-    fi
-    spooles_LIBS="${spooles_LIBS} -lspoolesMPI -lspooles"
-  fi
-  if test ! "${spooles_INCLUDES+set}" = set ; then
-    if test ! "${spooles_PREFIX}" = ''; then
-      spooles_INCLUDES="-I${spooles_PREFIX}"
-    fi
-  fi
-fi
-
-BTNG_AC_LOG_VAR(spooles_PREFIX spooles_LIBS spooles_INCLUDES)
-
-# End macro BTNG_SUPPORT_SPOOLES
-])
-
-dnl $Id: variable-header-filenames.m4 155 2007-05-14 22:09:31Z gunney $
-
-AC_DEFUN([BTNG_FIND_CORRECT_HEADER_FILENAME],[
-dnl There is no standard naming convention for STL header files.
-dnl This macro helps to pick the right name out of a list.
-dnl Arg1 is the variable to set to the found file name.
-dnl Arg2 is the list of file names to search
-dnl Arg3 are additional headers to include (for use by AC_TRY_COMPILE)
-dnl Arg4 is the code body to test if the included file works.
-# Start macro $0
-  AC_LANG_SAVE
-  AC_LANG_CPLUSPLUS
-  $1=
-  AC_REQUIRE([BTNG_TYPE_NAMESPACE])
-  AC_REQUIRE([BTNG_TYPE_BOOL])
-  CPPFLAGS_SAVE=$CPPFLAGS
-  for file in $2; do
-    AC_CHECK_HEADER($file, btng_header_found=1, unset btng_header_found)
-    if test -n "$btng_header_found"; then
-      AC_MSG_CHECKING(whether $file is the header sought)
-      BTNG_AC_LOG(found header file $file)
-      CPPFLAGS="$CPPFLAGS_SAVE $CXX_OPTIONS"
-      AC_TRY_COMPILE(
-        [
-/* macro $0 checking for $file */
-#ifdef BOOL_IS_BROKEN
-typedef int bool;
-#define true 1
-#define false 0
-#endif
-	$3
-        #include <$file>
-#ifndef NAMESPACE_IS_BROKEN
-using namespace std;
-#endif
-],
-        $4,
-	AC_MSG_RESULT(yes)
-        $1="$file",
-	AC_MSG_RESULT(no)
-      )
-    fi
-    if test -n "${$1}"; then break; fi
-  done
-  AC_LANG_RESTORE
-  CPPFLAGS=$CPPFLAGS_SAVE
-# End macro $0
-])
-
-
-
-
-AC_DEFUN([BTNG_TREAT_VARIABLE_HEADER_FILENAME],[
-dnl BTNG_TREAT_VARIABLE_HEADER_FILENAME is a generic macro
-dnl used by (and using) other macros in this file.
-dnl It determines, from a given list, the correct name of
-dnl a header file required to compile a test code body.
-dnl It takes a list of possible of the header filenames.
-dnl It reports whether each header file is the one sought
-dnl until it finds the one that is.
-dnl If none of the header filenames work:
-dnl   It issues a warning.
-dnl   It defines a ...IS_BROKEN C macro saying so.
-dnl If it finds the first header filename that works:
-dnl   It assigns a variable (..._HEADER_FILE) to the
-dnl   correct filename and call AC_DEFINE for that variable.
-dnl Arguments are:
-dnl  1: a single name representing the header sought.
-dnl  2: a list of possible header filenames.
-dnl  3: other include lines (for use in AC_TRY_COMPILE).
-dnl  4: code to test if the header file is the one being sought.
-dnl
-# Start macro $0
-AC_CACHE_VAL(btng_cv_[]translit($1,[-],[_])[]_header_filename, [
-  AC_ARG_WITH($1-header-file,
-  [  --with-$1-header-file	Specify name of the $1 header file.],
-  btng_cv_[]translit($1,[-],[_])[]_header_filename=$with_[]translit($1,[-],[_])[]_header_file,
-  [BTNG_FIND_CORRECT_HEADER_FILENAME(btng_cv_[]translit($1,[-],[_])[]_header_filename,$2,[$3],[[$4]])]
-  )
-])	dnl End AC_CACHE_VAL call
-# We must be able to find the $1 header file or else.
-translit($1,[-a-z],[_A-Z])[]_HEADER_FILE="$btng_cv_[]translit($1,[-],[_])[]_header_filename"
-if test -z "$translit($1,[-a-z],[_A-Z])[]_HEADER_FILE"; then
-  translit($1,[-],[_])[]_header_is_broken=1
-  AC_MSG_WARN([cannot find a working $1 header file.
-      Names tried: $2
-      If you know the correct hame of this header file,
-      use the option --with-[]$1[]-header-file=FILENAME
-      with configure.])
-  AC_DEFINE(translit($1,[-a-z],[_A-Z])[]_IS_BROKEN,[1],[The $1 header file is broken])
-  BTNG_AC_LOG(header file $1 is broken)
-else
-  unset translit($1,[-],[_])[]_header_is_broken
-  AC_DEFINE_UNQUOTED(translit($1,[-a-z],[_A-Z])[]_HEADER_FILE,<$translit($1,[-a-z],[_A-Z])[]_HEADER_FILE>,
-    [Header file for $1])
-  BTNG_AC_LOG(header file $1 is ok)
-fi
-# End macro $0
-])	dnl end of BTNG_TREAT_VARIABLE_HEADER_FILENAME definition.
-
-
-
-dnl
-dnl These are some STL headers with uncertain names.
-dnl
-
-
-AC_DEFUN([BTNG_STL_STRING_HEADER_FILENAME],[
-# Start macro $0
-dnl dnl AC_MSG_CHECKING(name of the STL string header file)
-BTNG_TREAT_VARIABLE_HEADER_FILENAME([stl-string],
-  [string strings string.h strings.h string.hxx strings.hxx],,
-  [std::string s; s = "sample string";])
-# End macro $0
-])	dnl end of BTNG_STL_STRING_HEADER_FILENAME definition.
-
-
-AC_DEFUN([BTNG_STL_SET_HEADER_FILENAME],[
-# Start macro $0
-dnl AC_MSG_CHECKING(name of the STL set header file)
-BTNG_TREAT_VARIABLE_HEADER_FILENAME([stl-set], [set set.h set.hxx],,
-  [set<int> s; s.insert(1);])
-# End macro $0
-])	dnl end of BTNG_STL_SET_HEADER_FILENAME definition.
-
-
-AC_DEFUN([BTNG_STL_STACK_HEADER_FILENAME],[
-# Start macro $0
-dnl AC_MSG_CHECKING(name of the STL stack header file)
-AC_REQUIRE([BTNG_INFO_CXX_ID])
-AC_REQUIRE([BTNG_STL_LIST_HEADER_FILENAME])
-btng_stl_stack_test_body='[stack<int> s; s.push(1);]'
-# The Sun compiler version 5.2 does not treat default template
-# arguments correctly.  The STL standard states that for stack,
-# only the first argument is required but this Sun compiler
-# requires the second.
-if test "$CXX_ID" = "sunpro" && echo "$CXX_VERSION" | grep '^0x420' > /dev/null || test "$CXX_ID" = "sunpro" && echo "$CXX_VERSION" | grep '^0x520' > /dev/null ; then
-btng_stl_stack_test_body='[stack<int,list<int> > s; s.push(1);]'
-fi
-BTNG_TREAT_VARIABLE_HEADER_FILENAME([stl-stack], [stack stack.h stack.hxx],,
-  [$btng_stl_stack_test_body])
-# End macro $0
-])	dnl end of BTNG_STL_STACK_HEADER_FILENAME definition.
-
-
-AC_DEFUN([BTNG_STL_VECTOR_HEADER_FILENAME],[
-# Start macro $0
-BTNG_TREAT_VARIABLE_HEADER_FILENAME([stl-vector], [vector vector.h vector.hxx],,
-[vector<int> v; v.insert(v.begin(),1);
-vector<char> s; s.insert( s.end(), 10, '\0' );])
-# End macro $0
-])	dnl end of BTNG_STL_VECTOR_HEADER_FILENAME definition.
-
-
-AC_DEFUN([BTNG_STL_LIST_HEADER_FILENAME],[
-# Start macro $0
-dnl AC_MSG_CHECKING(name of the STL list header file)
-BTNG_TREAT_VARIABLE_HEADER_FILENAME([stl-list], [list list.h list.hxx],,
-  [list<int> v; v.insert(v.begin(),1);])
-# End macro $0
-])	dnl end of BTNG_STL_LIST_HEADER_FILENAME definition.
-
-
-AC_DEFUN([BTNG_STL_MAP_HEADER_FILENAME],[
-# Start macro $0
-dnl AC_MSG_CHECKING(name of the STL map header file)
-AC_REQUIRE([BTNG_INFO_CXX_ID])
-btng_stl_map_test_body='[map<int,int> v; v[0]=1;]'
-# The Sun compiler version 4.2 does not treat default template
-# arguments correctly.  The STL standard states that for map,
-# only the first two arguments are required but the Sun compiler
-# requires the third.
-test "$CXX_ID" = "sunpro" && echo "$CXX_VERSION" | grep '^0x420' > /dev/null && \
-btng_stl_map_test_body='[map<int,int,less<int> > v; v[0]=1;]'
-BTNG_TREAT_VARIABLE_HEADER_FILENAME([stl-map], [map map.h map.hxx],,
-  [$btng_stl_map_test_body])
-# End macro $0
-])	dnl end of BTNG_STL_MAP_HEADER_FILENAME definition.
-
-
-AC_DEFUN([BTNG_STL_ITERATOR_HEADER_FILENAME],[
-# Start macro $0
-dnl AC_MSG_CHECKING(name of the STL iterator header file)
-BTNG_TREAT_VARIABLE_HEADER_FILENAME([stl-iterator],
-  [iterator iterator.h iterator.hxx],,
-  [int a[10], size; size=distance(a,a+10);])
-dnl  [ostream_iterator<int> v(cout," ");])
-# End macro $0
-])	dnl end of BTNG_STL_ITERATOR_HEADER_FILENAME definition.
-
-
-AC_DEFUN([BTNG_STL_ALGO_HEADER_FILENAME],[
-# Start macro $0
-dnl AC_MSG_CHECKING(name of the STL algo header file)
-BTNG_TREAT_VARIABLE_HEADER_FILENAME([stl-algo],
-  [algo algorithm algo.h algorithm.h algo.hxx algorithm.hxx] ,,
-  [int n[10]; find(n,n+10,0);])
-# End macro $0
-])	dnl end of BTNG_STL_ALGO_HEADER_FILENAME definition.
-
-
-AC_DEFUN([BTNG_STL_FUNCTION_HEADER_FILENAME],[
-# Start macro $0
-dnl AC_MSG_CHECKING(name of the STL numeric header file)
-BTNG_TREAT_VARIABLE_HEADER_FILENAME([stl-function],
-  [function function.h function.hxx] ,,
-  [int a=1, b=2, c; plus<int> adder; c=adder(a,b);])
-# End macro $0
-])	dnl end of BTNG_STL_FUNCTION_HEADER_FILENAME definition.
-
-
-AC_DEFUN([BTNG_STL_NUMERIC_HEADER_FILENAME],[
-# Start macro $0
-dnl AC_MSG_CHECKING(name of the STL numeric header file)
-BTNG_TREAT_VARIABLE_HEADER_FILENAME([stl-numeric],
-  [numeric numeric.h numeric.hxx] ,,
-  [int n[10]; iota(n,n+10,0);])
-# End macro $0
-])	dnl end of BTNG_STL_NUMERIC_HEADER_FILENAME definition.
-
-
-AC_DEFUN([BTNG_STL_SSTREAM_HEADER_FILENAME],[
-# Start macro $0
-dnl AC_MSG_CHECKING(name of the STL string stream header file)
-btng_stl_sstream_test_body='/* New syntax */ istringstream ist("a string");'
-dnl We think that the sun 4.2 compiler does not support the syntax,
-dnl but we're not absolutely sure.
-test "$CXX_ID" = "sunpro" && echo "$CXX_VERSION" | grep '^0x420' > /dev/null && \
-btng_stl_sstream_test_body='/* Old syntax */ char i[[10]]; istrstream ist(i);'
-test "$CXX_ID" = "gnu" && echo "$CXX_VERSION" | grep '^2.95.2' > /dev/null && \
-btng_stl_sstream_test_body='/* Old syntax */ char i[[10]]; istrstream ist(i);'
-BTNG_TREAT_VARIABLE_HEADER_FILENAME([stl-sstream],
-  [sstream stringstream strstream sstream.h stringstream.h strstream.h sstream.hxx stringstream.hxx strstream.hxx] ,,
-  [$btng_stl_sstream_test_body] )
-# End macro $0
-])      dnl end of BTNG_STL_SSTREAM_HEADER_FILENAME definition.
-
-
-AC_DEFUN([BTNG_STL_MULTIMAP_HEADER_FILENAME],[
-# Start macro $0
-dnl AC_MSG_CHECKING(name of the STL multimap header file)
-AC_REQUIRE([BTNG_INFO_CXX_ID])
-btng_stl_multimap_test_body='[multimap<int,int > v; pair<const int,int> thePair(0,1); v.insert(thePair);]'
-test "$CXX_ID" = "sunpro" && echo "$CXX_VERSION" | grep '^0x420' > /dev/null && \
-btng_stl_multimap_test_body='[multimap<int,int,less<int> > v; pair<const int,int> thePair(0,1); v.insert(thePair);]'
-BTNG_TREAT_VARIABLE_HEADER_FILENAME([stl-multimap],
-    [multimap mmap multimap.h mmap.h multimap.hxx mmap.hxx map map.h map.hxx],,
-    [$btng_stl_multimap_test_body])
-# End macro $0
-])      dnl end of BTNG_STL_MULTIMAP_HEADER_FILENAME definition.
-
-
-AC_DEFUN([BTNG_STL_PAIR_HEADER_FILENAME],[
-# Start macro $0
-dnl AC_MSG_CHECKING(name of the STL pair header file)
-BTNG_TREAT_VARIABLE_HEADER_FILENAME([stl-pair], [pair pair.h pair.hxx],,
-  [pair<int,int> s(0,1);])
-# End macro $0
-])      dnl end of BTNG_STL_PAIR_HEADER_FILENAME definition.
-
-
-
-
-dnl
-dnl These are some stream-related headers with uncertain names.
-dnl
-
-
-AC_DEFUN([BTNG_IOSTREAM_HEADER_FILENAME],[
-# Start macro $0
-dnl AC_MSG_CHECKING(name of the iostream header file)
-BTNG_TREAT_VARIABLE_HEADER_FILENAME([iostream],
-  [iostream iostream.h iostream.hxx],,
-  [ostream &co=cout; // test ostream declaration
-   istream &ci=cin; // test istream declaration
-   cout<<"test"<<endl; // test extraction operator
-   ])
-# End macro $0
-])	dnl end of BTNG_IOSTREAM_HEADER_FILENAME definition.
-
-
-AC_DEFUN([BTNG_FSTREAM_HEADER_FILENAME],[
-# Start macro $0
-dnl AC_MSG_CHECKING(name of the fstream header file)
-BTNG_TREAT_VARIABLE_HEADER_FILENAME([fstream],
-  [fstream fstream.h fstream.hxx],,
-  [fstream iost("theStream",ios::app);])
-# End macro $0
-])	dnl end of BTNG_FSTREAM_HEADER_FILENAME definition.
-
-
-AC_DEFUN([BTNG_IOMANIP_HEADER_FILENAME],[
-# Start macro $0
-dnl AC_MSG_CHECKING(name of the iomanip header file)
-AC_REQUIRE([BTNG_IOSTREAM_HEADER_FILENAME])
-BTNG_TREAT_VARIABLE_HEADER_FILENAME([iomanip],
-  [iomanip iomanip.h iomanip.hxx],[#include IOSTREAM_HEADER_FILE],
-  [cout<<setw(13)<<endl;])
-# End macro $0
-])	dnl end of BTNG_IOMANIP_HEADER_FILENAME definition.
-
-
-dnl
-dnl CASC C++ autoconf macros
-dnl
-dnl The following macros test various features of the C++ compiler, including:
-dnl
-dnl	- boolean types
-dnl	- namespace construct
-dnl	- template-based complex numbers
-dnl	- sstream.h header file with class ostringstream
-dnl	- new placement operator
-dnl	- explicit template instantiation
-dnl	- standard member function specialization
-dnl	- standard static data instantiation
-dnl	- standard static data specialization
-dnl	- static data specialization via pragmas
-dnl
-
-dnl
-dnl Check whether the C++ compiler supports the boolean built-in type.
-dnl
-dnl Variable:	casc_cv_cxx_have_bool = (yes|no)
-dnl Defines:	(HAVE|LACKS)_BOOL
-dnl
-
-AC_DEFUN([CASC_CXX_BOOL], [
-   AC_REQUIRE([AC_PROG_CXX])
-   AC_MSG_CHECKING(whether ${CXX} supports bool)
-
-   AC_CACHE_VAL(casc_cv_cxx_have_bool, [
-      AC_LANG_SAVE
-      AC_LANG_CPLUSPLUS
-      AC_TRY_COMPILE([
-bool b = true;
-         ], [/* empty */],
-         casc_cv_cxx_have_bool=yes,
-         casc_cv_cxx_have_bool=no)
-      AC_LANG_RESTORE
-   ])
-   AC_MSG_RESULT($casc_cv_cxx_have_bool)
-
-   if test "$casc_cv_cxx_have_bool" = yes; then
-      AC_DEFINE([HAVE_BOOL],[1],[HAVE_BOOL])
-   else
-      AC_DEFINE([LACKS_BOOL],[1],[LACKS_BOOL])
-   fi
-])
-
-dnl
-dnl Check whether the C++ compiler supports the ANSI/ISO namespace construct.
-dnl
-dnl Variable:	casc_cv_cxx_have_namespace = (yes|no)
-dnl Defines:	(HAVE|LACKS)_NAMESPACE
-dnl
-
-AC_DEFUN([CASC_CXX_NAMESPACE], [
-   AC_REQUIRE([AC_PROG_CXX])
-   AC_MSG_CHECKING(whether ${CXX} supports namespace)
-
-   AC_CACHE_VAL(casc_cv_cxx_have_namespace, [
-      AC_LANG_SAVE
-      AC_LANG_CPLUSPLUS
-      AC_TRY_LINK([
-namespace test {
-   int t();
-   int t() { return 0; } 
-}
-using namespace test;
-int foo() { int x = t(); x++; return x; }
-         ], [/* empty */],
-         casc_cv_cxx_have_namespace=yes,
-         casc_cv_cxx_have_namespace=no)
-      AC_LANG_RESTORE
-   ])
-   AC_MSG_RESULT($casc_cv_cxx_have_namespace)
-
-   if test "$casc_cv_cxx_have_namespace" = yes; then
-      AC_DEFINE([HAVE_NAMESPACE],[1],[HAVE_NAMESPACE])
-   else
-      AC_DEFINE([LACKS_NAMESPACE],[1],[LACKS_NAMESPACE])
-   fi
-])
-
-dnl
-dnl Check whether the C++ compiler supports cmath
-dnl
-dnl Variable:	casc_cv_cxx_have_cmath = (yes|no)
-dnl Defines:	(HAVE|LACKS)_CMATH
-dnl
-
-AC_DEFUN([CASC_CXX_CMATH], [
-   AC_REQUIRE([AC_PROG_CXX])
-   AC_MSG_CHECKING(whether ${CXX} supports cmath)
-
-   AC_CACHE_VAL(casc_cv_cxx_have_cmath, [
-      AC_LANG_SAVE
-      AC_LANG_CPLUSPLUS
-         AC_TRY_COMPILE([
-#include <cmath>
-void foo() {
-   double temp = std::sin(0.0);
-}
-            ], [/* empty */],
-            casc_cv_cxx_have_cmath=yes,
-            casc_cv_cxx_have_cmath=no)
-         AC_LANG_RESTORE
-      ])
-
-   AC_MSG_RESULT($casc_cv_cxx_have_cmath)
-
-   if test "$casc_cv_cxx_have_cmath" = yes; then
-      AC_DEFINE([HAVE_CMATH],[1],[HAVE_CMATH])
-   else
-      AC_DEFINE([LACKS_CMATH],[1],[LACKS_CMATH])
-   fi
-])
-
-dnl
-dnl Check whether the C++ compiler supports template-based complex numbers.
-dnl
-dnl Variable:	casc_cv_cxx_have_template_comlex = (yes|no)
-dnl Defines:	(HAVE|LACKS)_TEMPLATE_COMPLEX
-dnl
-
-AC_DEFUN([CASC_CXX_TEMPLATE_COMPLEX], [
-   AC_REQUIRE([AC_PROG_CXX])
-   AC_MSG_CHECKING(whether ${CXX} supports template-based complex numbers)
-
-   AC_CACHE_VAL(casc_cv_cxx_have_template_complex, [
-      AC_LANG_SAVE
-      AC_LANG_CPLUSPLUS
-      AC_TRY_COMPILE([
-#include <complex.h>
-void foo() {
-   complex<double> a(0.0, 1.0);
-}
-         ], [/* empty */],
-         casc_cv_cxx_have_template_complex=yes,
-         casc_cv_cxx_have_template_complex=no)
-      AC_LANG_RESTORE
-   ])
-
-   AC_MSG_RESULT($casc_cv_cxx_have_template_complex)
-
-   if test "$casc_cv_cxx_have_template_complex" = yes; then
-      AC_DEFINE([HAVE_TEMPLATE_COMPLEX],[1],[HAVE_TEMPLATE_COMPLEX])
-   else
-      AC_MSG_CHECKING(whether ${CXX} supports ISO template-based complex numbers)
-      AC_CACHE_VAL(casc_cv_cxx_have_template_complex_std, [
-         AC_LANG_SAVE
-         AC_LANG_CPLUSPLUS
-         AC_TRY_COMPILE([
-#include <complex>
-void foo() {
-   std::complex<double> a(0.0, 1.0);
-}
-            ], [/* empty */],
-            casc_cv_cxx_have_template_complex_std=yes,
-            casc_cv_cxx_have_template_complex_std=no)
-         AC_LANG_RESTORE
-      ])
-
-      AC_MSG_RESULT($casc_cv_cxx_have_template_complex_std)
-
-      if test "$casc_cv_cxx_have_template_complex_std" = yes; then
-         AC_DEFINE([HAVE_TEMPLATE_COMPLEX],[1],[HAVE_TEMPLATE_COMPLEX])
-      else
-         AC_DEFINE([LACKS_TEMPLATE_COMPLEX],[1],[LACKS_TEMPLATE_COMPLEX])
-      fi
-   fi
-])
-
-dnl
-dnl Check whether the C++ compiler supports sstream.h and class ostringstream.
-dnl
-dnl Variable:	casc_cv_cxx_have_sstream = (yes|no)
-dnl Defines:	(HAVE|LACKS)_SSTREAM
-dnl             NOTE: Also defines (HAVE|LACKS)_ISO_SSTREAM if compiler 
-dnl                   supports or does not support std ISO header file 
-dnl                   <sstream>.  This can be used determine a certain 
-dnl                   level of compiler support for std ISO header files. 
-dnl                   It is not intended to apply to all compilers.
-dnl
-
-AC_DEFUN([CASC_CXX_SSTREAM], [
-   AC_REQUIRE([AC_PROG_CXX])
-   AC_MSG_CHECKING(whether ${CXX} supports sstream.h and class ostringstream)
-
-   AC_CACHE_VAL(casc_cv_cxx_have_sstream, [
-      AC_LANG_SAVE
-      AC_LANG_CPLUSPLUS
-      AC_TRY_COMPILE([
-#include <sstream.h>
-void foo() {
-//   char buffer[100];
-//   std::ostringstream os(buffer, 100);
-//   os << "hello, world...";
-   std::ostringstream out;
-   double f = 5.0;
-   int    g = 1;
-   out << "(" << f << "<some string>" << g << ")";
-}
-         ], [/* empty */],
-         casc_cv_cxx_have_sstream=yes,
-         casc_cv_cxx_have_sstream=no)
-      AC_LANG_RESTORE
-   ])
-
-   AC_MSG_RESULT($casc_cv_cxx_have_sstream)
-
-   if test "$casc_cv_cxx_have_sstream" = yes; then
-      AC_DEFINE([HAVE_SSTREAM],[1],[HAVE_SSTREAM])
-   else
-        AC_MSG_CHECKING(whether ${CXX} supports sstream and class ostringstream)
-	AC_CACHE_VAL(casc_cv_cxx_have_sstream_std, [
-        AC_LANG_SAVE
-        AC_LANG_CPLUSPLUS
-        AC_TRY_COMPILE([
-#include <sstream>
-void foo() {
-//   char buffer[100];
-//   std::ostringstream os(buffer, 100);
-//   os << "hello, world...";
-   std::ostringstream out;
-   double f = 5.0;
-   int    g = 1;
-   out << "(" << f << "<some string>" << g << ")";
-}
-         ], [/* empty */],
-        casc_cv_cxx_have_sstream_std=yes,
-        casc_cv_cxx_have_sstream_std=no)
-        AC_LANG_RESTORE
-        ])
-
-      AC_MSG_RESULT($casc_cv_cxx_have_sstream_std)
-
-      if test "$casc_cv_cxx_have_sstream_std" = yes; then
-         AC_DEFINE([HAVE_SSTREAM],[1],[HAVE_SSTREAM])
-         AC_DEFINE([HAVE_ISO_SSTREAM],[1],[HAVE_ISO_SSTREAM])
-      else
-         AC_DEFINE([LACKS_SSTREAM],[1],[LACKS_SSTREAM])
-         AC_DEFINE([LACK_ISO_SSTREAM],[1],[LACK_ISO_SSTREAM])
-      fi
-   fi
-])
-
-dnl
-dnl Check if left is supported
-dnl
-dnl Variable:	casc_cv_cxx_have_iomanip_left = (yes|no)
-dnl Defines:	(HAVE|LACKS)_IOMANIP_LEFT
-
-AC_DEFUN([CASC_CXX_IOMANIP_LEFT], [
-   AC_REQUIRE([AC_PROG_CXX])
-   AC_MSG_CHECKING(whether ${CXX} defines the iomanip left operator)
-
-   AC_CACHE_VAL(casc_cv_cxx_have_iomanip_left, [
-      AC_LANG_SAVE
-      AC_LANG_CPLUSPLUS
-      AC_TRY_LINK([
-#include <iostream>
-#include <iomanip>
-using namespace std;
-
-void foo() 
-{
-   cout << left << 12.1;
-}
-         ], [/* empty */],
-         casc_cv_cxx_have_iomanip_left=yes,
-         casc_cv_cxx_have_iomanip_left=no)
-      AC_LANG_RESTORE
-   ])
-   AC_MSG_RESULT($casc_cv_cxx_have_iomanip_left)
-
-   if test "$casc_cv_cxx_have_iomanip_left" = yes; then
-      AC_DEFINE([HAVE_IOMANIP_LEFT],[1],[HAVE_IOMANIP_LEFT])
-   else
-      AC_DEFINE([LACKS_IOMANIP_LEFT],[1],[LACKS_IOMANIP_LEFT])
-   fi
-])
-
-
-dnl
-dnl Check whether the C++ compiler defines the new placement operator.
-dnl
-dnl Variable:	casc_cv_cxx_have_new_placement_operator = (yes|no)
-dnl Defines:	(HAVE|LACKS)_NEW_PLACEMENT_OPERATOR
-dnl
-
-AC_DEFUN([CASC_CXX_NEW_PLACEMENT_OPERATOR], [
-   AC_REQUIRE([AC_PROG_CXX])
-   AC_MSG_CHECKING(whether ${CXX} defines the new placement operator)
-
-   AC_CACHE_VAL(casc_cv_cxx_have_new_placement_operator, [
-      AC_LANG_SAVE
-      AC_LANG_CPLUSPLUS
-      AC_TRY_LINK([
-#include <new>
-void trynew() {
-   void *ptr = 0;
-   double *data = new (ptr) double;
-}
-         ], [/* empty */],
-         casc_cv_cxx_have_new_placement_operator=yes,
-         casc_cv_cxx_have_new_placement_operator=no)
-      AC_LANG_RESTORE
-   ])
-
-   AC_MSG_RESULT($casc_cv_cxx_have_new_placement_operator)
-
-   if test "$casc_cv_cxx_have_new_placement_operator" = yes; then
-      AC_DEFINE([HAVE_NEW_PLACEMENT_OPERATOR],[1],[HAVE_NEW_PLACEMENT_OPERATOR])
-   else
-      AC_DEFINE([LACKS_NEW_PLACEMENT_OPERATOR],[1],[LACKS_NEW_PLACEMENT_OPERATOR])
-   fi
-])
-
-dnl
-dnl Check whether the C++ compiler supports explicit template instantiation.
-dnl
-dnl Variable:	casc_cv_cxx_have_explicit_template_instantiation = (yes|no)
-dnl Defines:	(HAVE|LACKS)_EXPLICIT_TEMPLATE_INSTANTIATION
-dnl
-dnl The explicit template instantiation syntax forces the compiler to
-dnl instantiate a template of the specified type.  For example,
-dnl
-dnl	template <class T> class Pointer {
-dnl	   public: T *value;
-dnl	};
-dnl	#ifndef LACKS_EXPLICIT_TEMPLATE_INSTANTIATION
-dnl	template class Pointer<int>;
-dnl	#endif
-dnl
-dnl will create the code for a Pointer of type int.  If this syntax is
-dnl not allowed, then the compiler must define some other mechanism for
-dnl automatically generating template code.
-dnl
-
-AC_DEFUN([CASC_CXX_EXPLICIT_TEMPLATE_INSTANTIATION], [
-   AC_REQUIRE([AC_PROG_CXX])
-   AC_MSG_CHECKING(whether ${CXX} supports explicit template instantiation)
-   AC_CACHE_VAL(casc_cv_cxx_have_explicit_template_instantiation, [
-      AC_LANG_SAVE
-      AC_LANG_CPLUSPLUS
-      AC_TRY_COMPILE([
-template <class T> class Pointer { public: T *value; };
-template class Pointer<int>;
-         ], [/* empty */],
-         casc_cv_cxx_have_explicit_template_instantiation=yes,
-         casc_cv_cxx_have_explicit_template_instantiation=no)
-      AC_LANG_RESTORE
-   ])
-   AC_MSG_RESULT($casc_cv_cxx_have_explicit_template_instantiation)
-
-   if test "$casc_cv_cxx_have_explicit_template_instantiation" = yes; then
-      AC_DEFINE([HAVE_EXPLICIT_TEMPLATE_INSTANTIATION],[1],[HAVE_EXPLICIT_TEMPLATE_INSTANTIATION])
-   else
-      AC_DEFINE([LACKS_EXPLICIT_TEMPLATE_INSTANTIATION],[1],[LACKS_EXPLICIT_TEMPLATE_INSTANTIATION])
-   fi
-])
-
-dnl
-dnl Check whether the C++ compiler supports member function specialization.
-dnl
-dnl Variable:	casc_cv_cxx_have_member_function_specialization = (yes|no)
-dnl Defines:	(HAVE|LACKS)_MEMBER_FUNCTION_SPECIALIZATION
-dnl
-dnl The ANSI/ISO member function specialization syntax is used when defining
-dnl a specialized member function of a template class.  For example:
-dnl
-dnl	template <class T> class Pointer {
-dnl	   public: void foo();
-dnl	};
-dnl	#ifndef LACKS_MEMBER_FUNCTION_SPECIALIZATION
-dnl	template <>
-dnl	#endif
-dnl     void Pointer<int>::foo() { }
-dnl
-dnl will define the specialized version of Pointer<int>::foo().  Some
-dnl compilers such as GNU g++ cannot parse the template <> syntax.
-dnl
-
-AC_DEFUN([CASC_CXX_MEMBER_FUNCTION_SPECIALIZATION], [
-   AC_REQUIRE([AC_PROG_CXX])
-   AC_MSG_CHECKING(whether ${CXX} supports member function specialization)
-   AC_CACHE_VAL(casc_cv_cxx_have_member_function_specialization, [
-      AC_LANG_SAVE
-      AC_LANG_CPLUSPLUS
-      AC_TRY_COMPILE([
-template <class T> class Pointer { public: void foo(); };
-template <> void Pointer<int>::foo();
-template <> void Pointer<int>::foo() { }
-         ], [/* empty */],
-         casc_cv_cxx_have_member_function_specialization=yes,
-         casc_cv_cxx_have_member_function_specialization=no)
-      AC_LANG_RESTORE
-   ])
-
-   dnl ASCI Red compiles but does not generate the code so manually
-   dnl set this
-   case $ARCH in
-      ipsc2)
-         casc_cv_cxx_have_member_function_specialization=no
-         ;;
-   esac
-
-   AC_MSG_RESULT($casc_cv_cxx_have_member_function_specialization)
-   if test "$casc_cv_cxx_have_member_function_specialization" = yes; then
-      AC_DEFINE([HAVE_MEMBER_FUNCTION_SPECIALIZATION],[1],[HAVE_MEMBER_FUNCTION_SPECIALIZATION])
-   else
-      AC_DEFINE([LACKS_MEMBER_FUNCTION_SPECIALIZATION],[1],[LACKS_MEMBER_FUNCTION_SPECIALIZATION])
-   fi
-
-])
-
-dnl
-dnl Check whether the C++ compiler supports static data instantiation.
-dnl
-dnl Variable:	casc_cv_cxx_have_static_data_instantiation = (yes|no)
-dnl Defines:	(HAVE|LACKS)_STATIC_DATA_INSTANTIATION
-dnl
-dnl The ANSI/ISO specifies that the default values of the static data members
-dnl of a template class may be defined as follows:
-dnl
-dnl	template <class T> class Pointer {
-dnl	   public: static T *s_test;
-dnl	};
-dnl	#ifndef LACKS_STATIC_DATA_INSTANTIATION
-dnl	template <class T> T* Pointer<T>::s_test = (T*) 0;
-dnl	#endif
-dnl
-dnl Some compilers such as GNU g++ cannot parse the generic static data member
-dnl instantiation syntax and require that static data members for type T be
-dnl explicitly specified to instantiate the data member.
-
-AC_DEFUN([CASC_CXX_STATIC_DATA_INSTANTIATION], [
-   AC_REQUIRE([AC_PROG_CXX])
-   AC_MSG_CHECKING(whether ${CXX} supports static data instantiation)
-   AC_CACHE_VAL(casc_cv_cxx_have_static_data_instantiation, [
-      AC_LANG_SAVE
-      AC_LANG_CPLUSPLUS
-      AC_TRY_COMPILE([
-template <class T> class Pointer { public: void foo(); };
-template <> void Pointer<int>::foo() { }
-         ], [/* empty */],
-         casc_cv_cxx_have_static_data_instantiation=yes,
-         casc_cv_cxx_have_static_data_instantiation=no)
-      AC_LANG_RESTORE
-   ])
-   AC_MSG_RESULT($casc_cv_cxx_have_static_data_instantiation)
-   if test "$casc_cv_cxx_have_static_data_instantiation" = yes; then
-      AC_DEFINE([HAVE_STATIC_DATA_INSTANTIATION],[1],[HAVE_STATIC_DATA_INSTANTIATION])
-   else
-      AC_DEFINE([LACKS_STATIC_DATA_INSTANTIATION],[1],[LACKS_STATIC_DATA_INSTANTIATION])
-   fi
-])
-
-dnl
-dnl Check whether the C++ compiler supports standard static data specialization.
-dnl
-dnl Variable:	casc_cv_cxx_have_standard_static_data_specialization = (yes|no)
-dnl Defines:	(HAVE|LACKS)_STANDARD_STATIC_DATA_SPECIALIZATION
-dnl
-dnl The ANSI/ISO specifies that static data members of a template class may
-dnl be specialized as follows:
-dnl
-dnl	template <class T> class Pointer {
-dnl	   public: static T *s_test;
-dnl	};
-dnl	template <> int *Pointer<int>::s_test;
-dnl	template <> int *Pointer<int>::s_test = (int*) 0;
-dnl	template class Pointer<int>;
-dnl
-dnl Some compilers such as GNU g++ and older versions of KCC cannot parse
-dnl this syntax and use other methods (such as pragmas or different syntax).
-dnl
-
-AC_DEFUN([CASC_CXX_STANDARD_STATIC_DATA_SPECIALIZATION], [
-   AC_REQUIRE([AC_PROG_CXX])
-   AC_MSG_CHECKING(whether ${CXX} supports standard static data specialization)
-   AC_CACHE_VAL(casc_cv_cxx_have_standard_static_data_specialization, [
-      AC_LANG_SAVE
-      AC_LANG_CPLUSPLUS
-      AC_TRY_COMPILE([
-template <class T> class Pointer { public: static T *s_test; };
-template <> int *Pointer<int>::s_test;
-int test() { Pointer<int> P; return(*P.s_test); }
-template <> int *Pointer<int>::s_test = (int*) 0;
-template class Pointer<int>;
-         ], [/* empty */],
-         casc_cv_cxx_have_standard_static_data_specialization=yes,
-         casc_cv_cxx_have_standard_static_data_specialization=no)
-      AC_LANG_RESTORE
-   ])
-   AC_MSG_RESULT($casc_cv_cxx_have_standard_static_data_specialization)
-   if test "$casc_cv_cxx_have_standard_static_data_specialization" = yes; then
-      AC_DEFINE([HAVE_STANDARD_STATIC_DATA_SPECIALIZATION],[1],[HAVE_STANDARD_STATIC_DATA_SPECIALIZATION])
-   else
-      AC_DEFINE([LACKS_STANDARD_STATIC_DATA_SPECIALIZATION],[1],[LACKS_STANDARD_STATIC_DATA_SPECIALIZATION])
-   fi
-])
-
-dnl
-dnl Check whether the C++ compiler supports pragma static data specialization.
-dnl
-dnl Variable:	casc_cv_cxx_have_pragma_static_data_specialization = (yes|no)
-dnl Defines:	(HAVE|LACKS)_PRAGMA_STATIC_DATA_SPECIALIZATION
-dnl
-dnl Some compilers support the specialization of a static data member of a
-dnl template class using the following syntax:
-dnl
-dnl	template <class T> class Pointer {
-dnl	   public: static T *s_test;
-dnl	};
-dnl	#pragma do_not_instantiate int *Pointer<int>::s_test
-dnl	template <> int *Pointer<int>::s_test = (int*) 0;
-dnl	template class Pointer<int>;
-dnl
-dnl This syntax is supported by older versions of KCC.  Note that this
-dnl macro should be used ONLY if the standard static data specialization
-dnl syntax fails.
-dnl
-
-AC_DEFUN([CASC_CXX_PRAGMA_STATIC_DATA_SPECIALIZATION], [
-   AC_REQUIRE([AC_PROG_CXX])
-   AC_MSG_CHECKING(whether ${CXX} supports pragma static data specialization)
-   AC_CACHE_VAL(casc_cv_cxx_have_pragma_static_data_specialization, [
-      AC_LANG_SAVE
-      AC_LANG_CPLUSPLUS
-      AC_TRY_COMPILE([
-template <class T> class Pointer { public: static T *s_test; };
-#pragma do_not_instantiate int *Pointer<int>::s_test
-int test() { Pointer<int> P; return(*P.s_test); }
-template <> int *Pointer<int>::s_test = (int*) 0;
-template class Pointer<int>;
-         ], [/* empty */],
-         casc_cv_cxx_have_pragma_static_data_specialization=yes,
-         casc_cv_cxx_have_pragma_static_data_specialization=no)
-      AC_LANG_RESTORE
-   ])
-   AC_MSG_RESULT($casc_cv_cxx_have_pragma_static_data_specialization)
-   if test "$casc_cv_cxx_have_pragma_static_data_specialization" = yes; then
-      AC_DEFINE([HAVE_PRAGMA_STATIC_DATA_SPECIALIZATION],[1],[HAVE_PRAGMA_STATIC_DATA_SPECIALIZATION])
-   else
-      AC_DEFINE([LACKS_PRAGMA_STATIC_DATA_SPECIALIZATION],[1],[LACKS_PRAGMA_STATIC_DATA_SPECIALIZATION])
-   fi
-])
-
-dnl
-dnl Check whether the C++ compiler supports exception handling.
-dnl
-dnl Variable:	casc_cv_cxx_have_exception_handling = (yes|no)
-dnl Defines:	(HAVE|LACKS)_EXCEPTION_HANDLING
-dnl
-dnl Compilers that support exception handling will support the following  
-dnl operation: 
-dnl
-dnl static void byebye(int error) {
-dnl    fprintf(stderr, "floating point exception\n");   abort(); 
-dnl }
-dnl int main(int argc, char** argv) {
-dnl    unsigned short fpu_flags = _FPU_DEFAULT;
-dnl    fpu_flags &= ~_FPU_MASK_IM;  /* Execption on Invalid operation */
-dnl    fpu_flags &= ~_FPU_MASK_ZM;  /* Execption on Division by zero  */
-dnl    fpu_flags &= ~_FPU_MASK_OM;  /* Execption on Overflow */
-dnl    _FPU_SETCW(fpu_flags);
-dnl    signal(SIGFPE, byebye);  /* Invoke byebye when above occurs */
-dnl }
-dnl
-dnl
-AC_DEFUN([CASC_CXX_EXCEPTION_HANDLING], [
-    AC_REQUIRE([AC_PROG_CXX])
-    AC_MSG_CHECKING(whether ${CXX} supports exception handling)
-    AC_CACHE_VAL(casc_cxx_have_exception_handling, [
-       AC_LANG_SAVE
-       AC_LANG_CPLUSPLUS
-       AC_TRY_COMPILE([
-#include <fpu_control.h>
-#include <signal.h>
-static void byebye(int error) { }
-void foo() {
-   unsigned short fpu_flags = _FPU_DEFAULT;
-   fpu_flags &= ~_FPU_MASK_IM;  /* Execption on Invalid operation */
-   fpu_flags &= ~_FPU_MASK_ZM;  /* Execption on Division by zero  */
-   fpu_flags &= ~_FPU_MASK_OM;  /* Execption on Overflow */
-   _FPU_SETCW(fpu_flags);
-   signal(SIGFPE, byebye);
-}
-         ], [/* empty */],
-         casc_cxx_have_exception_handling=yes,
-         casc_cxx_have_exception_handling=no)
-       AC_LANG_RESTORE
-    ])
-    AC_MSG_RESULT($casc_cxx_have_exception_handling)
-    if test "$casc_cxx_have_exception_handling" = yes; then
-       AC_DEFINE([HAVE_EXCEPTION_HANDLING],[1],[HAVE_EXCEPTION_HANDLING])
-    else
-       AC_DEFINE([LACKS_EXCEPTION_HANDLING],[1],[LACKS_EXCEPTION_HANDLING])
-    fi
-])
-
-
-dnl
-dnl Determines which form of isnan is present
-dnl 
-dnl Defines:	(HAVE|LACKS)_CMATH_ISNAN
-dnl             (HAVE|LACKS)_ISNAN
-dnl  	        (HAVE|LACKS)_ISNAND
-dnl  	        (HAVE|LACKS)_INLINE_ISNAND
-dnl
-dnl isnan is part of C99 spec and not necessarily available under
-dnl ISO C++.  Test for some other possible functions.
-dnl
-AC_DEFUN([CASC_CXX_ISNAN], [
-   AC_REQUIRE([AC_PROG_CXX])
-   AC_MSG_CHECKING(checking for isnan in cmath)
-
-   AC_LANG_SAVE
-   AC_LANG_CPLUSPLUS
-   AC_TRY_COMPILE([ #include <cmath> ], 
-      [ int test = std::isnan(0.0); ],
-      casc_cv_cxx_have_isnan=yes,
-      casc_cv_cxx_have_isnan=no)
-   AC_LANG_RESTORE
-
-   AC_MSG_RESULT($casc_cv_cxx_have_isnan)
-
-   if test "$casc_cv_cxx_have_isnan" = yes; then
-      AC_DEFINE([HAVE_CMATH_ISNAN],[1],[HAVE_CMATH_ISNAN])
-   else
-      AC_DEFINE([LACKS_CMATH_ISNAN],[1],[LACKS_CMATH_ISNAN])
-
-      AC_MSG_CHECKING(checking for isnan in math.h)
-
-      AC_LANG_SAVE
-      AC_LANG_CPLUSPLUS
-      AC_TRY_COMPILE([#include <math.h>], 
-         [int test = isnan(0.0);],
-         casc_cv_cxx_have_isnan=yes,
-         casc_cv_cxx_have_isnan=no)
-      AC_LANG_RESTORE
-
-      AC_MSG_RESULT($casc_cv_cxx_have_isnan)
-
-      if test "$casc_cv_cxx_have_isnan" = yes; then
-         AC_DEFINE([HAVE_ISNAN],[1],[HAVE_ISNAN])
-      else
-         AC_DEFINE([LACKS_ISNAN],[1],[LACKS_ISNAN])
-
-         AC_MSG_CHECKING(checking for __isnand)
-
-         AC_LANG_SAVE
-         AC_LANG_CPLUSPLUS
-         AC_TRY_COMPILE([#include <math.h>],
-            [int test = __isnand(0.0);],
-            casc_cv_cxx_have_isnand=yes,
-            casc_cv_cxx_have_isnand=no)
-         AC_LANG_RESTORE
-  
-         AC_MSG_RESULT($casc_cv_cxx_have_isnand)
-         if test "$casc_cv_cxx_have_isnand" = yes; then
-            AC_DEFINE([HAVE_ISNAND],[1],[HAVE_ISNAND])
-         else
-            AC_DEFINE([LACKS_ISNAND],[1],[LACKS_ISNAND])
-
-            AC_MSG_CHECKING(checking for __inline_isnand)
-
-            AC_LANG_SAVE
-            AC_LANG_CPLUSPLUS
-            AC_TRY_COMPILE([#include <math.h>],
-                 [int test = __inline_isnand(0.0);],
-                casc_cv_cxx_have_inline_isnan=yes,
-                casc_cv_cxx_have_inline_isnan=no)
-              AC_LANG_RESTORE
-
-            AC_MSG_RESULT($casc_cv_cxx_have_inline_isnan)
-            if test "$casc_cv_cxx_have_inline_isnan" = yes; then
-               AC_DEFINE([HAVE_INLINE_ISNAND],[1],[HAVE_INLINE_ISNAND])
-            else
-               AC_DEFINE([LACKS_INLINE_ISNAND],[1],[LACKS_INLINE_ISNAND])
-           fi
-	fi
-      fi
-   fi
-])
-
-
-dnl
-dnl Check whether the GNU C++ compiler needs float NAN templates
-dnl
-dnl Variable:	casc_cv_cxx_have_isnan_template = (yes|no)
-dnl Defines:	(HAVE|LACKS)_ISNAN_TEMPLATE
-dnl
-
-AC_DEFUN([CASC_CXX_ISNAN_TEMPLATE], [
-   AC_REQUIRE([AC_PROG_CXX])
-   AC_MSG_CHECKING(whether ${CXX} needs isnan templates)
-
-   AC_CACHE_VAL(casc_cv_cxx_have_isnan_template, [
-      AC_LANG_SAVE
-      AC_LANG_CPLUSPLUS
-      AC_TRY_COMPILE([
-
-#include <complex>
-
-template int __gnu_cxx::isnan<float>(float);
-template int __gnu_cxx::__capture_isnan<float>(float);
-         ], [/* empty */],
-         casc_cv_cxx_have_isnan_template=yes,
-         casc_cv_cxx_have_isnan_template=no)
-      AC_LANG_RESTORE
-   ])
-   AC_MSG_RESULT($casc_cv_cxx_have_isnan_template)
-
-   if test "$casc_cv_cxx_have_isnan_template" = yes; then
-      AC_DEFINE([HAVE_ISNAN_TEMPLATE],[1],[HAVE_ISNAN_TEMPLATE])
-   else
-      AC_DEFINE([LACKS_ISNAN_TEMPLATE],[1],[LACKS_ISNAN_TEMPLATE])
-   fi
-])
-
-
-dnl ******************************************************************
-dnl * CASC_PROG_F77 searches the PATH for an available Fortran 77
-dnl * compiler. It assigns the name of the compiler to F77.
-dnl ******************************************************************
-
-AC_DEFUN([CASC_PROG_F77],
-[
-   if test -z "$F77"; then
-      AC_CHECK_PROGS(F77, f77 g77 xlf cf77 if77 nf77)
-      test -z "$F77" && AC_MSG_ERROR([no acceptable f77 found in \$PATH])
-      FFLAGS="-g -O"
-      AC_SUBST(FFLAGS)
-   fi
-])dnl
-
-
-dnl **********************************************************************
-dnl * CASC_PROG_FPP searches the PATH for a preprocessor for Fortran files
-dnl * with preprocessor directives
-dnl **********************************************************************
-
-AC_DEFUN([CASC_PROG_FPP],
-[
-   AC_CHECK_PROGS(FPP, fpp cpp "$CC -E" "cc -E" "gcc -E")
-   test -z "$FPP" && AC_MSG_ERROR([no acceptable fpp found in \$PATH])
-])dnl
-
-
-dnl **********************************************************************
-dnl * CASC_CHECK_F77_PP checks whether the preprocessor needs to
-dnl * be called before calling the compiler for Fortran files with
-dnl * preprocessor directives.  If the preprocessor is necessary,
-dnl * F77NEEDSPP is set to "yes", otherwise it is set to "no"
-dnl **********************************************************************
-
-AC_DEFUN([CASC_CHECK_F77_PP],
-[
-   AC_REQUIRE([CASC_PROG_F77])
-
-   rm -f testpp.o
-
-   AC_MSG_CHECKING(whether $FPP needs to be called before $F77)
-
-   # This is a dumb little fortran program with C preprocessor calls
-   # It will compile only if $F77 has a built-in preprocessor
-
-   cat > testpp.F << EOF
-#define FOO 3
-	program testpp
-	integer num
-        integer sum
-        num = FOO
-#ifdef FOO
-        sum = num + num
-#else
-        sum = num + num + num
-#endif
-        end 
-EOF
-
-   # Compile the program and set $F77NEEDSPP appropriately
-   $F77 -DBAR -c testpp.F  > /dev/null 2>&1
-   if test -f testpp.o; then 
-      F77NEEDSPP=no 
-   else 
-      F77NEEDSPP=yes 
-   fi
-
-   AC_MSG_RESULT($F77NEEDSPP)
-   rm -f testpp.o testpp.F
-
-   AC_SUBST(F77NEEDSPP)
-])dnl
-
-
-
-dnl **********************************************************************
-dnl * CASC_CHECK_LIB_FORTRAN(LIBRARY, [, ACTION-IF-FOUND [,
-dnl *                        ACTION-IF-NOT-FOUND [, OTHER-LIBRARIEs]]])
-dnl * 
-dnl * Checks whether LIBRARY can be used to link a sample C function
-dnl * that contains a call to a sample Fortran 77 function. If linking
-dnl * is successful, ACTION-IF-FOUND is executed, otherwise
-dnl * ACTION-IF-NOT-FOUND is executed.  The default for ACTION-IF-FOUND is
-dnl * to add -lLIBRARY to $LIBS.  The default for ACTION-IF-NOT-FOUND is
-dnl * nothing.  OTHER-LIBRARIES can include the full names of libraries in
-dnl * the current directory, -l flags specifying other libraries, -L tags
-dnl * specifying the location of libraries (This macro may not check the
-dnl * same lib directories as would be checked by the linker by default on
-dnl * the command line.), and/or the names of object files, all separated
-dnl * by a space, whatever might be necessary for successful linkage.
-dnl **********************************************************************
-
-AC_DEFUN([CASC_CHECK_LIB_FORTRAN],
-[
-   # This macro needs a f77 compiler and knowledge of the name-mangling scheme
-   AC_REQUIRE([CASC_PROG_F77])
-   AC_REQUIRE([PAC_GET_FORTNAMES])
-
-   if test -z "$FORTRANNAMES" ; then
-      NAMESTYLE="FORTRANNOUNDERSCORE"
-   else
-      NAMESTYLE=$FORTRANNAMES
-   fi
-
-   # This is a little subroutine to be called later by a C main function
-   cat > testflib_.f << EOF
-        subroutine testflib(i)
-        integer i
-        print *, "This tests which libraries work"
-        return
-        end
-EOF
-
-   $F77 -c testflib_.f > /dev/null 2>&1
-
-   # Mangle testflib's name appropriatiately
-   case $NAMESTYLE in
-      FORTRANDOUBLEUNDERSCORE)
-         THIS_FUNCTION=testflib_;;
-
-      FORTRANUNDERSCORE)
-         THIS_FUNCTION=testflib_;;
-
-      FORTRANCAPS)
-         THIS_FUNCTION=TESTFLIB;;
-
-      FORTRANNOUNDERSCORE)
-         THIS_FUNCTION=testflib;;
-
-   esac
-
-   # Checks if the LIBRARY from the argument list can be used to link
-   # a C test program with testflib
-   AC_CHECK_LIB($1, $THIS_FUNCTION, $2, $3, testflib_.o $4)
-
-   rm -f testflib_.o testflib_.f
-
-])dnl
-
-
-dnl ********************************************************************* 
-dnl * CASC_SET_F77LIBS sets the necessary library flags for linking C and
-dnl * Fortran 77 codes with the C linker.  The necessary -l flags are put 
-dnl * into the variable F77LIBS, and the necessary -L flags are put into  
-dnl * the variable F77LIBDIRS.  This macro first checks to see if the
-dnl * shell variable $F77LIBS is already set.  If so, the preset value is
-dnl * used.  Otherwise this macro only works for known architectures.
-dnl *********************************************************************
-
-AC_DEFUN([CASC_SET_F77LIBS],
-[
-   AC_REQUIRE([CASC_GUESS_ARCH])
-   AC_REQUIRE([CASC_PROG_F77])
-
-   if test -z "$casc_f77_libs"; then
-      case $ARCH in 
-         sun4 | solaris)
-            case $F77 in
-               *g77)
-                   CASC_CHECK_LIB_FORTRAN(f2c,
-                                          F77LIBDIRS="-L/home/casc/g77/lib"
-                                          F77LIBS="-lf2c"
-                                          , ,
-                                          -L/home/casc/g77/lib -lf2c);;
-               *)
-                  CASC_CHECK_LIB_FORTRAN(sunmath,
-                                   F77LIBDIRS="-L/opt/SUNWspro/SC5.0/lib"
-                                   F77LIBS="-lF77 -lsunmath"
-                                   , ,
-                                   -L/opt/SUNWspro/SC5.0/lib -lF77 -lsunmath);;
-               esac
-         ;;
-         alpha)
-            CASC_CHECK_LIB_FORTRAN(for, F77LIBS="-lfor", , );;
-
-         rs6000)
-            CASC_CHECK_LIB_FORTRAN(xlf90, F77LIBS="-lxlf90", , );;
-
-         IRIX64 | iris4d)
-            CASC_CHECK_LIB_FORTRAN(I77, 
-                                  F77LIBS="-lF77 -lU77 -lI77 -lisam", ,
-                                  -lF77 -lU77 -lI77 -lisam);;
-
-         *)
-            AC_MSG_WARN(
-[unable to set F77LIBFLAGS.  They must be set as a shell variable or
- with a command-line option])
-         ;;             
-
-      esac
-
-   else
-      if test -n "$casc_f77_lib_dirs"; then
-         for casc_lib_dir in $casc_f77_lib_dirs; do
-            F77LIBDIRS="-L$casc_lib_dir $F77LIBDIRS"       
-         done
-      fi
-
-      for casc_lib in $casc_f77_libs; do
-         F77LIBS="$F77LIBS -l$casc_lib"
-      done
-   fi
-
-   F77LIBFLAGS="$F77LIBDIRS $F77LIBS"
-])dnl
-
-
-dnl *********************************************************************
-dnl * CASC_FIND_F77LIBS may be a replacement for CASC_SET_F77LIBS.  This
-dnl * macro automatically finds the flags necessary to located the 
-dnl * libraries needed for a Fortran/C interface.  It is more robust than
-dnl * CASC_SET_F77LIBS, because it is not based on the architecture name.
-dnl * The test is performed directly on the Fortran compiler using the
-dnl * macro LF_FLIBS. When CASC_FIND_F77LIBS is included in configure.in,
-dnl * it will set the variable F77LIBFLAGS to be a list of flags, which 
-dnl * will probably be a set of -L, -R, -l, and -u flags, as well as
-dnl * perhaps the absolute paths of some libraries.  The drawback to this
-dnl * macro is that it will usually insert some flags (mostly -L flags) 
-dnl * that aren't needed, but hopefully they will be harmless.  I haven't
-dnl * seen the extra flags that are included by this macro break anything
-dnl * yet.  Hopefully more testing on more machines will give confidence
-dnl * that this really works and will be able to set up the Fortran links
-dnl * on an unknown system.  If this macro sets up nothing, then
-dnl * CASC_SET_F77LIBS is called as a backup
-dnl *********************************************************************
-
-AC_DEFUN([CASC_FIND_F77LIBS],
-[
-   AC_CACHE_CHECK([for Fortran libraries], casc_cv_f77flags,
-   [
-      if test -z "$F77LIBFLAGS"; then
-         dnl * LF_FLIBS creates variable $flibs_result containing a list of 
-         dnl * flags related to the Fortran compiler
-         LF_FLIBS
-         for casc_flag in $flibs_result; do
-
-            dnl * Here we sort the flags in $flibs_result
-            case $casc_flag in
-            [-l* | /*)]
-               casc_f77_libs="$casc_f77_libs $casc_flag"
-            ;;
-            [-L*)]
-               casc_f77_dirs="$casc_flag $casc_f77_dirs"
-            ;;
-            [*)]
-               casc_other_flags="$casc_other_flags $casc_flag"
-            ;;
-            esac
-         done
-
-         F77LIBFLAGS="$casc_other_flags $casc_f77_dirs"
-
-
-         if test -n "`echo $F77LIBFLAGS | grep '\-R/'`"; then
-            F77LIBFLAGS=`echo $F77LIBFLAGS | sed 's/-R\//-R \//'`
-         fi
-	 
-	 dnl Strip off quotes.  This was needed for mpi wrappers.
-         dnl This is potentially bad.
-         F77LIBFLAGS=`echo $F77LIBFLAGS | sed 's/\"//'`
-         casc_f77_libs=`echo $casc_f77_libs | sed 's/\"//'`
-
-         dnl * each -l flag is checked using CASC_CHECK_LIB_FORTRAN, until
-         dnl * successful linking of a test program is accomplished, at which
-         dnl * time the loop is broken.  If successful linking does not occur,
-         dnl * CASC_CHECK_LIB will check for the library's existence and add
-         dnl * to F77LIBFLAGS if it exists.  All libraries listed by explicit
-         dnl * path are added to F77LIBFLAGS
-         for casc_flag in $casc_f77_libs; do
-
-            case $casc_flag in
-
-            [/*)]
-               if test -f "$casc_flag"; then
-                  F77LIBFLAGS="$F77LIBFLAGS $casc_flag"
-               fi
-            ;;
-
-            [-l*)]
-
-               casc_lib_name=`echo "$casc_flag" | sed 's/-l//g'`
-               CASC_CHECK_LIB_FORTRAN($casc_lib_name,
-                  F77LIBFLAGS="$F77LIBFLAGS $casc_flag"
-                  casc_result=yes,
-                  F77LIBFLAGS="$F77LIBFLAGS $casc_flag",
-                  $F77LIBFLAGS)
- 
-            if test "$casc_result" = yes; then 
-               casc_result=
-               break
-            fi
-            ;;
-         esac
-         done
- 
-         # if this macro didn't work call CASC_SET_F77LIBS
-         if test -z "$F77LIBFLAGS"; then
-            CASC_SET_F77LIBS
-
-         fi        
-
-         dnl if PGI remove the include of the gcc libs, 
-         dnl causes problem with Intel compilers
-         if test -n "`echo $F77 | grep pgf77`"; then
-            F77LIBFLAGS=`echo $F77LIBFLAGS | sed 's/-lgcc//g'`
-         fi
-
-         dnl * On IBM don't use the links to poe library directories coming
-         dnl * out of the fortran compiler
-         if test -n "`echo $F77LIBFLAGS | grep xlf`"; then
-             F77LIBFLAGS=`echo $F77LIBFLAGS | sed 's/-L\/lib\/threads//g'`
-             F77LIBFLAGS=`echo $F77LIBFLAGS | sed 's/-L\/usr\/lpp\/ppe.poe\/lib\/threads//g'`
-             F77LIBFLAGS=`echo $F77LIBFLAGS | sed 's/-L\/usr\/lpp\/ppe.poe\/lib\/ip//g'`
-             F77LIBFLAGS=`echo $F77LIBFLAGS | sed 's/-L\/usr\/lpp\/ppe.poe\/lib//g'`
-             F77LIBFLAGS=`echo $F77LIBFLAGS | sed 's/-L\/usr\/lpp\/ppe.poe\/lib//g'`
-             F77LIBFLAGS=`echo $F77LIBFLAGS | sed 's/-lmpi_r//g'`
-             F77LIBFLAGS=`echo $F77LIBFLAGS | sed 's/-lvtd_r//g'`
-         fi
-      fi
-
-      casc_cv_f77flags=$F77LIBFLAGS
-   ])
-
-   dnl in case we are getting library flags from cached values
-   F77LIBFLAGS=$casc_cv_f77flags
-
-   AC_SUBST(F77LIBFLAGS)
-
-])dnl
-
-
-dnl * The following are macros copied from outside sources
-
-
-dnl ********************************************************************
-dnl * CASC_GET_FORTNAMES is a wrapper for the macro PAC_GET_FORTNAMES.
-dnl * The two can be used interchangeably.
-dnl *
-dnl * PAC_GET_FORTNAMES is distributed with mpich.  It checks what format
-dnl * is used to call Fortran subroutines in C functions.  This macro
-dnl * defines the shell variable $FORTRANNAMES and creates -D  
-dnl * preprocessor flags that tell what the Fortran name-mangling is.  The
-dnl * preprocessor macros defined are FORTRAN_DOUBLE_UNDERSCORE,
-dnl * FORTRAN_UNDERSCORE, FORTRAN_CAPS, and FORTRAN_NO_UNDERSCORE.  The
-dnl * possible values for FORTRANNAMES are the same words without
-dnl * underscores.
-dnl * 
-dnl * Changes:
-dnl *    AC_DEFINE lines to define preprocessor macros that are assigned
-dnl *    to DEFS added by Noah Elliott May 18, 1998
-dnl ********************************************************************
-
-AC_DEFUN([CASC_GET_FORTNAMES],
-[
-   PAC_GET_FORTNAMES
-])dnl
-
-AC_DEFUN([PAC_GET_FORTNAMES],[
-   # Check for strange behavior of Fortran.  For example, some FreeBSD
-   # systems use f2c to implement f77, and the version of f2c that they
-   # use generates TWO (!!!) trailing underscores 
-   # Currently, WDEF is not used but could be...
-   #
-   # Eventually, we want to be able to override the choices here and
-   # force a particular form.  This is particularly useful in systems
-   # where a Fortran compiler option is used to force a particular
-   # external name format (rs6000 xlf, for example).
-   cat > confftest.f <<EOF
-       subroutine mpir_init_fop( a )
-       integer a
-       a = 1
-       return
-       end
-EOF
-   $F77 $FFLAGS -c confftest.f > /dev/null 2>&1
-   if test ! -s confftest.o ; then
-        AC_MSG_ERROR([Unable to compile a Fortran test program])
-        NOF77=1
-        HAS_FORTRAN=0
-   elif test -z "$FORTRANNAMES" ; then
-    # We have to be careful here, since the name may occur in several  
-    # forms.  We try to handle this by testing for several forms
-    # directly.
-    if test $arch_CRAY ; then
-     # Cray doesn't accept -a ...
-     nameform1=`strings confftest.o | grep mpir_init_fop_  | head -1`
-     nameform2=`strings confftest.o | grep MPIR_INIT_FOP   | head -1`
-     nameform3=`strings confftest.o | grep mpir_init_fop   | head -1`
-     nameform4=`strings confftest.o | grep mpir_init_fop__ | head -1`
-    else
-     nameform1=`strings -a confftest.o | grep mpir_init_fop_  | head -1`
-     nameform2=`strings -a confftest.o | grep MPIR_INIT_FOP   | head -1`
-     nameform3=`strings -a confftest.o | grep mpir_init_fop   | head -1`
-     nameform4=`strings -a confftest.o | grep mpir_init_fop__ | head -1`
-    fi
-    /bin/rm -f confftest.f confftest.o
-    AC_MSG_CHECKING(Fortran external names)
-    if test -n "$nameform4" ; then
-        AC_DEFINE([FORTRAN_DOUBLE_UNDERSCORE],[1],[FORTRAN_DOUBLE_UNDERSCORE])
-        AC_MSG_RESULT(lowercase with one or two trailing underscores)
-        FORTRANNAMES="FORTRANDOUBLEUNDERSCORE"
-    elif test -n "$nameform1" ; then
-        # We don't set this in CFLAGS; it is a default case
-        AC_DEFINE([FORTRAN_UNDERSCORE],[1],[FORTRAN_UNDERSCORE])
-        AC_MSG_RESULT(lowercase with a trailing underscore)
-        FORTRANNAMES="FORTRANUNDERSCORE"
-    elif test -n "$nameform2" ; then
-        AC_DEFINE([FORTRAN_CAPS],[1],[FORTRAN_CAPS])
-        AC_MSG_RESULT(uppercase)
-        FORTRANNAMES="FORTRANCAPS"
-    elif test -n "$nameform3" ; then
-        AC_DEFINE([FORTRAN_NO_UNDERSCORE],[1],[FORTRAN_NO_UNDERSCORE])
-        AC_MSG_RESULT(lowercase)
-        FORTRANNAMES="FORTRANNOUNDERSCORE"
-    else
-        AC_MSG_RESULT(unknown)
-#       print_error "If you have problems linking, try using the -nof77 option"
-#        print_error "to configure and rebuild MPICH."
-        NOF77=1
-        HAS_FORTRAN=0
-    fi
-    fi
-    rm -f confftest.f confftest.o
-    if test -n "$FORTRANNAMES" ; then
-        WDEF="-D$FORTRANNAMES"
-    fi  
-    ])dnl
-
-
-dnl ****************************************************************
-dnl * LF_FLIBS was copied from E. Gkioulekas' autotools package for use in
-dnl * CASC_FIND_F77LIBS.  It's probably not good to be used all by itself.
-dnl * It uses the output the Fortran compiler gives when given a -v flag
-dnl * to produce a list of flags that the Fortran compiler uses.  From
-dnl * this list CASC_FIND_F77LIBS sets up the Fortran/C interface flags.
-dnl *
-dnl * Changes:
-dnl * AC_SUBST(FLIBS) suppressed by N. Elliott 7-10-98
-dnl *****************************************************************
-   
-AC_DEFUN([LF_FLIBS],[
-  dnl AC_MSG_CHECKING(for Fortran libraries)
-  dnl
-  dnl Write a minimal program and compile it with -v. I don't know
-  dnl what to do if your compiler doesn't have -v
-  dnl
-  dnl changequote(, )dnl
-  echo "      END" > conftest.f
-  foutput=`${F77-f77} -v -o conftest conftest.f 2>&1`
-  dnl
-  dnl The easiest thing to do for xlf output is to replace all the commas
-  dnl with spaces.  Try to only do that if the output is really from xlf,
-  dnl since doing that causes problems on other systems.
-  dnl
-  xlf_p=`echo $foutput | grep xlfentry`
-  if test -n "$xlf_p"; then
-    foutput=`echo $foutput | sed 's/,/ /g'`
-  fi
-  ifc_p=`echo $foutput | grep ifc`
-  ifort_p=`echo $foutput | grep ifort`
-  if test -n "$ifort_p" -o -n "$ifc_p"; then
-    foutput=`echo $foutput | sed 's/\\\/ \-u\/ \___get\/ /g'`
-  fi
-  dnl
-  ld_run_path=`echo $foutput | \
-
-    [sed -n -e 's/^.*LD_RUN_PATH *= *\([^ ]*\).*/\1/p'`]
-  dnl
-  dnl We are only supposed to find this on Solaris systems...
-  dnl Uh, the run path should be absolute, shouldn't it?
-  dnl
-  case "$ld_run_path" in
-
-    /*)
-
-      if test "$ac_cv_prog_gcc" = yes; then
-
-        ld_run_path="-Xlinker -R -Xlinker $ld_run_path"
-      else
-        ld_run_path="-R $ld_run_path"
-      fi
-    ;;
-
-    *)
-      ld_run_path=
-    ;;
-  esac
-
-  dnl
-  flibs=
-  lflags=
-  dnl
-  dnl If want_arg is set, we know we want the arg to be added to the list,
-  dnl so we don't have to examine it.
-  dnl
-  want_arg=
-  dnl
-  for arg in $foutput; do
-    old_want_arg=$want_arg
-    want_arg=
-  dnl
-  dnl None of the options that take arguments expect the argument to
-  dnl start with a -, so pretend we didn't see anything special.
-  dnl
-    if test -n "$old_want_arg"; then
-      case "$arg" in
-        -*)
-        old_want_arg=
-        ;;
-      esac
-    fi
-
-    case "$old_want_arg" in
-      '')
-        case $arg in
-        /*.a)
-          exists=false
-          for f in $lflags; do
-            if test x$arg = x$f; then
-              exists=true
-            fi
-          done
-          if $exists; then
-            arg=
-          else
-            lflags="$lflags $arg"
-          fi
-        ;;
-        -bI:*)
-          exists=false
-          for f in $lflags; do
-            if test x$arg = x$f; then
-              exists=true
-            fi
-          done
-          if $exists; then
-            arg=
-          else
-            if test "$ac_cv_prog_gcc" = yes; then
-              lflags="$lflags -Xlinker $arg"
-            else
-              lflags="$lflags $arg"
-            fi
-          fi
-        ;;
-        -lang* | -lcrt0.o | -lc )
-          arg=
-        ;;
-        [-[lLR])]
-          want_arg=$arg
-          arg=
-        ;;
-        [-[lLR]*)]
-          exists=false
-          for f in $lflags; do
-            if test x$arg = x$f; then
-              exists=true
-            fi
-          done
-          if $exists; then
-            arg=
-          else
-            case "$arg" in
-              -lkernel32)
-                case "$canonical_host_type" in
-                  *-*-cygwin32)
-                  ;;
-                  *)
-                    lflags="$lflags $arg"
-                  ;;
-                esac
-              ;;
-              -lm)
-              ;;
-              *)
-                lflags="$lflags $arg"
-              ;;
-            esac
-          fi
-        ;;
-        -u)
-          want_arg=$arg
-          arg=
-        ;;
-        -Y)
-          want_arg=$arg
-          arg=
-        ;;
-        *)
-          arg=
-        ;;
-        esac
-      ;;
-      [-[lLR])]
-        arg="$old_want_arg $arg"
-      ;;
-      -u)
-        arg="-u $arg"
-      ;;
-      -Y)
-
-  dnl
-  dnl Should probably try to ensure unique directory options here too.
-  dnl This probably only applies to Solaris systems, and then will only
-  dnl work with gcc...
-  dnl
-        arg=`echo $arg | sed -e 's%^P,%%'`
-        SAVE_IFS=$IFS
-        IFS=:
-        list=
-        for elt in $arg; do
-        list="$list -L$elt"
-        done
-        IFS=$SAVE_IFS
-        arg="$list"
-      ;;
-    esac
-  dnl
-
-    if test -n "$arg"; then
-      flibs="$flibs $arg"
-    fi
-  done
-  if test -n "$ld_run_path"; then
-    flibs_result="$ld_run_path $flibs"
-  else
-    flibs_result="$flibs"
-  fi
-  dnl changequote([, ])dnl
-  rm -f conftest.f conftest.o conftest
-  dnl
-  dnl Phew! Done! Now, output the result
-  dnl
-
-  FLIBS="$flibs_result"
-  dnl AC_MSG_RESULT([$FLIBS])
-dnl  AC_SUBST(FLIBS)
-])dnl
-
-
-dnl Define a macro for supporting HDF5
-
-AC_DEFUN([CASC_SUPPORT_HDF5],[
-
-# Begin CASC_SUPPORT_HDF5
-# Defines hdf5_PREFIX hdf5_INCLUDES and hdf5_LIBS if with-hdf5 is specified.
-AC_ARG_WITH(hdf5,
-[ --with-hdf5[=PATH]  Use HDF5 and optionally specify where HDF5 is installed.],
-, with_hdf5=no)
-
-case "$with_hdf5" in
-  no)
-    AC_MSG_NOTICE([configuring without HDF5 support])
-    : Do nothing
-  ;;
-  yes)
-    # HDF5 install path was not specified.
-    # Look in a couple of standard locations to probe if 
-    # HDF5 header files are there.
-    AC_MSG_CHECKING([for HDF5 installation])
-    for dir in /usr /usr/local; do
-      if test -f ${dir}/include/hdf5.h; then
-        hdf5_PREFIX=${dir}
-        break
-      fi
-    done
-    AC_MSG_RESULT([$hdf5_PREFIX])
-  ;;
-  *)
-    # HDF5 install path was specified.
-    AC_MSG_CHECKING([for HDF5 installation])
-
-    if test -f ${with_hdf5}/include/hdf5.h; then
-        hdf5_PREFIX=$with_hdf5
-        hdf5_INCLUDES="-I${hdf5_PREFIX}/include"
-        hdf5_LIBS="-L${hdf5_PREFIX}/lib -lhdf5"
-        AC_MSG_RESULT([$hdf5_PREFIX])
-    else
-        AC_MSG_RESULT([$hdf5_PREFIX])
-        AC_MSG_ERROR([HDF5 not found in $with_hdf5])
-    fi
-  ;;
-esac
-
-
-
-# Test compiling an HDF application
-
-# NOTE that AC_SEARCH_LIBS didn't work completely so
-# use a more complicated example program to see
-# if that will catch when HDF is not working.
-if test "${hdf5_PREFIX+set}" = set; then
-
-   AC_REQUIRE([AC_PROG_CXX])
-   AC_MSG_CHECKING(whether HDF5 link works)
-   AC_LANG_PUSH(C++)
-   CASC_PUSH_COMPILER_STATE
-   # NOTE lib z and m were from BTNG macro.
-   LIBS="${LIBS} ${hdf5_LIBS} $libz_LIBS -lm "
-   CXXFLAGS="${CXXFLAGS} ${hdf5_INCLUDES}"
-   AC_LINK_IFELSE([
-      #include "hdf5.h"
-      #define FILE "file.h5"
-
-      int main() {
-
-         hid_t       file_id;   /* file identifier */
-         herr_t      status;
-
-         /* Create a new file using default properties. */
-         file_id = H5Fcreate(FILE, H5F_ACC_TRUNC, H5P_DEFAULT, H5P_DEFAULT);
-
-         /* Terminate access to the file. */
-         status = H5Fclose(file_id); 
-     }
-      ], 
-      casc_hdf5_compile=yes,
-      casc_hdf5_compile=no)
-   CASC_POP_COMPILER_STATE
-   AC_LANG_POP
-   AC_MSG_RESULT($casc_hdf5_compile)
-
-   if test "$casc_hdf5_compile" = no; then
-      AC_MSG_ERROR([HDF5 compile/link test failed])
-   fi
-fi
-
-# END CASC_SUPPORT_HDF5
-
-])dnl End definition of CASC_SUPPORT_HDF5
-
-
-
-
-dnl *********************************************************************
-dnl * CASC_ADD_LIB(LIBRARY, FUNCTION, DIRECTORY-LIST[, PREFIX[, 
-dnl *              ACTION-IF-FOUND[, ACTION-IF-NOT-FOUND]]])
-dnl * checks first if LIBRARY is available on the linking search path and
-dnl * if FUNCTION can be linked with LIBRARY.  If so, -lLIBRARY is added
-dnl * to the variable [PREFIX]LIBS. (i.e., if prefix is LD, -llibrary is
-dnl * added to LDLIBS.)  If not, checks whitespace-separated
-dnl * DIRECTORY-LIST to see if LIBRARY exists in a specified directory and
-dnl * can be linked with FUNCTION.  If so, the first directory where
-dnl * linking is successful is added to the front of [PREFIX]LIBDIRS, and
-dnl * -lLIBRARY is added to the end of [PREFIX]LIBS.  If no prefix is
-dnl * specified, the directories and libraries are added to LIBS and
-dnl * LIBDIRS, respectively.  If the order of -l flags on the linking
-dnl * lines is important, CASC_ADD_LIB should be called for each library
-dnl * in the order they should appear on linking lines.  Mere existence of
-dnl * LIBRARY in the search path or in a specified directory can usually
-dnl * be determined by entering 'main' for FUNCTION.  Optional argument
-dnl * ACTION-IF-FOUND contains additional instructions to execute as soon
-dnl * as LIBRARY is found in any directory.  Optional argument
-dnl * ACTION-IF-NOT-FOUND contains instructions to execute if LIBRARY is
-dnl * not found anywhere.
-dnl **********************************************************************
-
-AC_DEFUN([CASC_ADD_LIB],
-[
-   # define some macros to hopefully improve readability
-   define([m_THESE_LIBS],[$4LIBS])
-   define([m_THESE_LIBDIRS],[$4LIBDIRS])
-
-   # check for the library from first argument.  If linking is successful
-   # the first time, the job is done, otherwise loop through DIRECTORY-LIST
-   AC_CHECK_LIB($1, $2, m_THESE_LIBS="$m_THESE_LIBS -l$1"
-                          casc_lib_found=yes 
-                          ifelse([$5], , , [$5]),
-
-      dnl * If library not found
-      for casc_lib_dir in $3; do
-
-         AC_CHECK_LIB($1, $2, 
-            m_THESE_LIBDIRS="-L$casc_lib_dir $m_THESE_LIBDIRS"
-            m_THESE_LIBS="$m_THESE_LIBS -l$1"
-            casc_lib_found=yes
-            ifelse([$5], , , [$5])
-            break
-            , ,
-            -L$casc_lib_dir $m_THESE_LIBDIRS $m_THESE_LIBS -l$1, no)
-      done
-      , $m_THESE_LIBDIRS $m_THESE_LIBS, no)  dnl * last two arguments for
-                                             dnl * first check
-
-   # ACTION-IF-NOT_FOUND for when the library is found nowhere
-   ifelse([$6], , ,
-      if test "$casc_lib_found" != "yes"; then
-         [$6]
-      fi
-   )
-
-   unset casc_lib_found
-
-   undefine([m_THESE_LIBS])
-   undefine([m_THESE_LIBDIRS])
-
-])dnl
-
-
-dnl ***********************************************************************
-dnl CASC_CHECK_LIB(LIBRARY, FUNCTION [, ACTION-IF-FOUND [, ACTION-IF-NOT-FOUND
-dnl              [, OTHER-LIBRARIES [, CACHE-CHOICE]]]])
-dnl * This is the same as AC_CHECK_LIB, except when it tests for LIBRARY
-dnl * it puts the flag -lLIBRARY after $LIBS and OTHER-LIBRARIES.  The Sun
-dnl * cc compiler does not search for LIBRARY in any directories specified
-dnl * by -L in OTHER-LIBRARIES when -lLIBRARY is listed first.  The
-dnl * functionality of this macro is the same as that of AC_CHECK_LIB in
-dnl * the Autoconf documentation.  
-dnl * CACHE-CHOICE [$6]added by N. Elliott, 6-24-98.  If CACHE-CHOICE is 'no',
-dnl * the results of this test are not cached.  CACHE-CHOICE should be
-dnl * used only when this test is called recursively.
-dnl *
-dnl * CASC_CHECK_LIB_OLD is an older version of this macro which doesn't
-dnl * seem to work with newer versions of autoconf
-dnl **********************************************************************
-
-AC_DEFUN([CASC_CHECK_LIB],
-[
-dnl AC_MSG_CHECKING([for $2 in -l$1])
-dnl Use a cache variable name containing both the library and function name,
-dnl because the test really is for library $1 defining function $2, not
-dnl just for library $1.  Separate tests with the same $1 and different $2s
-dnl may have different results.
-ac_lib_var=`echo $1['_']$2 | sed 'y%./+-%__p_%'`
-AC_CACHE_VAL(ac_cv_lib_$ac_lib_var,
-[ac_save_LIBS="$LIBS"
-LIBS="$5 $LIBS -l$1"
-AC_TRY_LINK(dnl
-ifelse(AC_LANG, [FORTRAN77], ,
-ifelse([$2], [main], , dnl Avoid conflicting decl of main.
-[/* Override any gcc2 internal prototype to avoid an error.  */
-]ifelse(AC_LANG, CPLUSPLUS, [#ifdef __cplusplus
-extern "C"
-#endif
-])dnl
-[/* We use char because int might match the return type of a gcc2
-    builtin and then its argument prototype would still apply.  */
-char $2();
-])),
-            [$2()],
-            eval "ac_cv_lib_$ac_lib_var=yes",
-            eval "ac_cv_lib_$ac_lib_var=no")   
-LIBS="$ac_save_LIBS"
-])dnl 
-if eval "test \"`echo '$ac_cv_lib_'$ac_lib_var`\" = yes"; then
-  :
-  dnl AC_MSG_RESULT(yes)
-  ifelse([$3], ,
-[changequote(, )dnl
-  ac_tr_lib=HAVE_LIB`echo $1 | sed -e 's/[^a-zA-Z0-9_]/_/g' \
-    -e 'y/abcdefghijklmnopqrstuvwxyz/ABCDEFGHIJKLMNOPQRSTUVWXYZ/'`
-changequote([, ])dnl
-  AC_DEFINE_UNQUOTED($ac_tr_lib)
-  LIBS="-l$1 $LIBS" 
-], [$3])
-else
- : 
-  dnl AC_MSG_RESULT(no)
-ifelse([$4], , , [
-ifelse([$6], no, unset ac_cv_lib_$ac_lib_var)  
-$4
-])dnl
-fi
-ifelse([$6], no, unset ac_cv_lib_$ac_lib_var)
-])dnl
-
-
-
-AC_DEFUN([CASC_CHECK_LIB_OLD],
-[AC_MSG_CHECKING([for -l$1])
-dnl Use a cache variable name containing both the library and function name,
-dnl because the test really is for library $1 defining function $2, not
-dnl just for library $1.  Separate tests with the same $1 and different $2s
-dnl may have different results.
-ac_lib_var=`echo $1['_']$2 | tr './+\055' '__p_'`
-AC_CACHE_VAL(ac_cv_lib_$ac_lib_var,
-[ac_save_LIBS="$LIBS"
-LIBS="$5 $LIBS -l$1"
-AC_TRY_LINK(dnl
-ifelse([$2], [main], , dnl Avoid conflicting decl of main.
-[/* Override any gcc2 internal prototype to avoid an error.  */
-]ifelse(AC_LANG, CPLUSPLUS, [#ifdef __cplusplus 
-extern "C"
-#endif
-])dnl
-[/* We use char because int might match the return type of a gcc2
-    builtin and then its argument prototype would still apply.  */
-char $2();
-]),
-            [$2()],
-            eval "ac_cv_lib_$ac_lib_var=yes",
-            eval "ac_cv_lib_$ac_lib_var=no")dnl
-LIBS="$ac_save_LIBS"
-])dnl
-if eval "test \"`echo '$ac_cv_lib_'$ac_lib_var`\" = yes"; then
-  AC_MSG_RESULT(yes)  
-  ifelse([$3], ,
-[changequote(, )dnl
-  ac_tr_lib=HAVE_LIB`echo $1 | tr 'abcdefghijklmnopqrstuvwxyz' 'ABCDEFGHIJKLMNOPQRSTUVWXYZ'`
-changequote([, ])dnl
-  AC_DEFINE_UNQUOTED($ac_tr_lib)
-  LIBS="-l$1 $LIBS"
-], [
-ifelse([$6], no, unset ac_cv_lib_$ac_lib_var)
-$3])
-else
-  AC_MSG_RESULT(no) 
-ifelse([$4], , , [
-ifelse([$6], no, unset ac_cv_lib_$ac_lib_var)
-$4
-])dnl
-fi
-ifelse([$6], no, unset ac_cv_lib_$ac_lib_var)
-])
-
-
-
-dnl *********************************************************************
-dnl * CASC_CHECK_HEADER(HEADER-FILE, DIRECTORY-LIST[, ACTION-IF-FOUND[,
-dnl *                   ACTION-IF-NOT-FOUND]])
-dnl * This macro is an alternative to AC_CHECK_HEADER.  It does
-dnl * essentially the same thing, but it allows the user to specify
-dnl * a directory list if HEADER-FILE can not be found in the current path
-dnl * for #includes, and it adds to the variable INCLUDES the first
-dnl * directory in DIRECTORY-LIST from where HEADER-FILE can be included.
-dnl *********************************************************************
-
-AC_DEFUN([CASC_CHECK_HEADER],
-[
-   dnl * loop through the directory list.  The first iteration leaves the
-   dnl * casc_dir variable empty to check if the header can be #included
-   dnl * without specifying a directory.
-   for casc_dir in '' $2 ; do
-      if test -n "$casc_dir"; then
-         casc_header=$casc_dir/$1
-      else
-         casc_header=$1
-      fi
-
-      dnl * Check for the header.  Add the necessary -I flag to INCLUDES
-      AC_CHECK_HEADER( $casc_header,
-         if test -n "$casc_dir"; then
-            INCLUDES="$INCLUDES -I$casc_dir"
-         fi
-         casc_header_found=yes
-         ifelse([$3], , , [$3])
-         break )
-
-   done
-
-   dnl * This takes care of the action if not found
-   ifelse([$4], , ,
-      if test "$casc_header_found" != "yes"; then
-         [$4]
-      fi
-   )
-
-   unset casc_header_found
-])dnl
-
-
-dnl **********************************************************************
-dnl * CASC_CREATE_PACKAGE_OPTION(PACKAGE-NAME[, DIR-LIST[, FILE]])
-dnl * This is a general macro that creates a configure command-line option
-dnl * called `--with-PACKAGE-NAME-dir' which will allow the user to
-dnl * specify the location of the installation of an outside software
-dnl * package, such as PETSc or ISIS++.  After a check to make sure the
-dnl * given directory is valid (see below for discussion of validity), the
-dnl * directory's path is stored in the shell variable PACKAGE-NAME_DIR.
-dnl * For example, to allow the user to specify the location of PETSc,
-dnl * place `CASC_CREATE_PACKAGE_OPTION(PETSC)' in configure.in.  Then the
-dnl * user, if configuring on the CASC Sun cluster, would type `configure
-dnl * --with-PETSC-dir=/home/casc/petsc', and the directory's path would
-dnl * be stored in PETSC_DIR.  With this macro, the user is also permitted
-dnl * to set the variable PACKAGE-NAME_DIR in the environment before
-dnl * running configure, but any choice made on the command line would
-dnl * override any preset values.  
-dnl *
-dnl * This macro takes an optional second argument, DIR-LIST, which is a
-dnl * whitespace-separated list of directories where the developer thinks
-dnl * PACKAGE-NAME might be installed.  If DIR-LIST is given, and the user
-dnl * does not use the `--with' option to give the location of
-dnl * PACKAGE-NAME (or if the directory given by the user does not exist),
-dnl * then configure will assign to PACKAGE-NAME_DIR the path of the first
-dnl * directory in DIR-LIST that is valid.
-dnl *
-dnl * Validity:  The optional third argument to this macro is FILE, which
-dnl * should be either the name of a file in the top directory of the
-dnl * package in question or the relative path of a file in a subdirectory
-dnl * of the package.  If the argument FILE is given, then configure will
-dnl * consider a user specified directory or a directory from DIR-LIST 
-dnl * valid only if FILE exists in the directory.  If this argument is not
-dnl * given, then configure will consider a directory valid simply if it
-dnl * is indeed a directory.  FILE should be a file with a unique name
-dnl * that can be expected to exist in the same location in any 
-dnl * installation of the package in question.  If you know of no such
-dnl * file, do not include a third argument when invoking this macro.
-dnl * 
-dnl * This macro also gives the user the command-line option
-dnl * `--without-PACKAGE-NAME-dir', which, when invoked, will leave the
-dnl * variable PACKAGE-NAME_DIR empty.  This option should be invoked when
-dnl * the user wants to exclude a package from the configuration.
-dnl * 
-dnl * NOTE:  Since PACKAGE-NAME is used as part of both a command-line
-dnl * option and a variable name, it MUST consist of only alphanumeric
-dnl * characters.  PACKAGE-NAME is only a label, so it need not conform to
-dnl * any existing directory or file name.  I would recommend that it be
-dnl * all caps, as it becomes part of the name of a variable that is
-dnl * substituted into the Makefile.
-dnl **********************************************************************
-
-AC_DEFUN([CASC_CREATE_PACKAGE_OPTION],
-[
-   AC_MSG_CHECKING([for $1 directory])
-
-   dnl * $1 stands for the PACKAGE-NAME.  If [$1]_DIR has been set in the
-   dnl * environment, give its value to casc_env_[$1]_dir, and clear
-   dnl * [$1]_DIR.  The environmental value will ultimately be reassigned
-   dnl * to [$1]_DIR if it is valid and no command-line options are able
-   dnl * to change [$1]_DIR to a valid directory.  The environmental value
-   dnl * will also be used even if it is invalid, if the command-line
-   dnl * options and the DIRECTORY-LIST are both unable to generate a
-   dnl * valid value.
-   casc_result=
-   casc_env_[$1]_dir=$[$1]_DIR
-   [$1]_DIR=
-
-   AC_ARG_WITH($1-dir, 
-[  --with-$1-dir=DIR    $1 is installed in directory DIR
-  --without-$1-dir     do not look for $1],
-
-               if test "$withval" = "no"; then
-                  casc_result="configuring without [$1]"
-                  [$1]_DIR=
-               fi
-               , )
-
-   dnl * If "--without-$1-dir" was given, then [$1]_DIR is left blank.
-   dnl * Otherwise there is the following procedure to try to give
-   dnl * [$1]_DIR a valid value:
-   dnl *
-   dnl * if "--with-$1-dir" was given
-   dnl *    if the argument to "--with-$1-dir" is valid
-   dnl *       assign the argument to [$1]_DIR
-   dnl *    endif
-   dnl * endif
-   dnl *
-   dnl * if a value for [$1]_DIR has not yet been found
-   dnl *    if [$1]_DIR from the environment exists and is valid
-   dnl *       assign the environmental value to [$1]_DIR
-   dnl *    endif
-   dnl * endif
-   dnl *
-   dnl * if [$1]_DIR still has no value
-   dnl *    if the macro was given a DIRECTORY-LIST argument
-   dnl *       for each directory in the list
-   dnl *          if the directory is valid
-   dnl *             assign the directory to [$1]_DIR
-   dnl *             break loop
-   dnl *          else
-   dnl *             continue loop
-   dnl *          endif
-   dnl *       end loop
-   dnl *       if [$1]_DIR still doesn't have a value
-   dnl *          casc_result="none"
-   dnl *       else
-   dnl *          casc_result=$[$1]_DIR
-   dnl *       endif
-   dnl *    else
-   dnl *       casc_result="none"
-   dnl *    endif
-   dnl * endif
-
-   if test "$with_[$1]_dir" != "no"; then
-
-      if test -d "$with_[$1]_dir"; then
-
-         ifelse([$3], , ,
-            if test -f $with_[$1]_dir/[$3]; then)
-
-               casc_result="$with_[$1]_dir"
-               [$1]_DIR="$casc_result"
-
-         ifelse([$3], , ,
-            fi)
-      fi
-
-      if test -z "$casc_result"; then
-
-         if test -d "$casc_env_[$1]_dir"; then
-
-            ifelse([$3], , ,
-               if test -f $casc_env_[$1]_dir/[$3]; then)
-
-                  casc_result="$casc_env_[$1]_dir"
-                  [$1]_DIR="$casc_result"
-
-            ifelse([$3], , ,
-               fi)
-         fi
-      fi
-
-
-
-      if test -z "$casc_result"; then
-         [$1]_DIR=
-   
-         ifelse([$2], ,
-            casc_result="none" ,
-
-            for casc_dir in $2; do
-
-               if test -d "$casc_dir"; then
-
-                  ifelse([$3], , ,
-                     if test -f $casc_dir/[$3]; then)
-
-                        $1_DIR=$casc_dir
-
-                        break
-
-                  ifelse([$3], , ,
-                     fi)
-               fi
-            done
-
-            if test -z "$[$1]_DIR"; then
-               casc_result="none"
-
-            else
-               casc_result="$[$1]_DIR"
-            fi
-         )
-      fi
-   fi
-
-   dnl * $casc_result either is a valid value for [$1]_DIR or "none".
-   dnl * if none, then assign the original environmental value of
-   dnl * [$1]_DIR, whatever it may be, to casc_result and [$1]_DIR.  If
-   dnl * there was no environmental value, then $casc_result remains
-   dnl * "none" and [$1]_DIR is left empty.
-
-   if test "$casc_result" = "none"; then
-
-      if test -n "$casc_env_[$1]_dir"; then
-
-         casc_result="$casc_env_[$1]_dir"
-         [$1]_DIR="$casc_result"
-      fi
-   fi
-
-   AC_MSG_RESULT($casc_result)
-   AC_SUBST([$1]_DIR)
-])
-
-
-dnl smr_ARG_WITHLIB from FVWM by S. Robbins 
-dnl Allow argument for optional libraries; wraps AC_ARG_WITH, to
-dnl provide a "--with-foo-lib" option in the configure script, where foo
-dnl is presumed to be a library name.  The argument given by the user
-dnl (i.e. "bar" in ./configure --with-foo-lib=bar) may be one of four 
-dnl things:
-dnl     * boolean (no, yes or blank): whether to use library or not
-dnl     * file: assumed to be the name of the library
-dnl     * directory: assumed to *contain* the library
-dnl     * a quoted, space-separated list of linker flags needed to link
-dnl       with this library.  (To be used if this library requires
-dnl       linker flags other than the normal `-L' and `-l' flags.)
-dnl 
-dnl The argument is sanity-checked.  If all is well, two variables are
-dnl set: "with_foo" (value is yes, no, or maybe), and "foo_LIBFLAGS" (value
-dnl is either blank, a file, -lfoo, '-L/some/dir -lfoo', or whatever 
-dnl linker flags the user gives). The idea is: the first tells you whether
-dnl the library is to be used or not (or the user didn't specify one way
-dnl or the other) and the second to put on the command line for linking
-dnl with the library.
-dnl
-dnl Usage:
-dnl smr_ARG_WITHLIB(name, libname, description)
-dnl 
-dnl name                name for --with argument ("foo" for libfoo)
-dnl libname             (optional) actual name of library,
-dnl                     if different from name
-dnl description         (optional) used to construct help string
-dnl 
-dnl Changes:  Changed some identifier names.
-dnl           --with-foo-library is now --with-foo-lib
-dnl           foo_LIBS is now foo_LIBFLAGS
-dnl           Fourth posibility for argument to --with-foo-lib added
-dnl           Documentation above changed to reflect these changes
-dnl           Noah Elliott, October 1998
-
-
-AC_DEFUN([CASC_SMR_ARG_WITHLIB],
-[
-   smr_ARG_WITHLIB([$1],[$2],[$3])
-])dnl
-
-AC_DEFUN([smr_ARG_WITHLIB], [
-
-ifelse($2, , smr_lib=[$1], smr_lib=[$2]) 
-    
-AC_ARG_WITH([$1]-lib,
-ifelse($3, ,
-[  --with-$1-lib[=PATH]       use $1 library], 
-[  --with-$1-lib[=PATH]       use $1 library ($3)]),
-[
-    if test "$withval" = yes; then
-        with_[$1]=yes
-        [$1]_LIBFLAGS="-l${smr_lib}"
-    elif test "$withval" = no; then
-        with_[$1]=no
-        [$1]_LIBFLAGS=
-    else
-        with_[$1]=yes
-        if test -f "$withval"; then
-            [$1]_LIBFLAGS=$withval
-        elif test -d "$withval"; then
-            [$1]_LIBFLAGS="-L$withval -l${smr_lib}"
-        else
-            case $withval in
-            -*)
-               [$1]_LIBFLAGS="$withval"
-            ;;
-            *)
-               AC_MSG_ERROR(
-                  [argument must be boolean, file, directory, or compiler flags]
-                           )
-            ;;
-            esac
-        fi
-    fi
-], [
-    with_[$1]=maybe
-    [$1]_LIBFLAGS="-l${smr_lib}"
-])])
-
-    
-dnl smr_ARG_WITHINCLUDES from FVWM by S. Robbins
-dnl Check if the include files for a library are accessible, and
-dnl define the variable "name_INCLUDE" with the proper "-I" flag for
-dnl the compiler.  The user has a chance to specify the includes
-dnl location, using "--with-foo-include".
-dnl 
-dnl This should be used *after* smr_ARG_WITHLIB *and* AC_CHECK_LIB are
-dnl successful.
-dnl 
-dnl Usage:
-dnl smr_ARG_WITHINCLUDES(name, header, extra-flags)
-dnl 
-dnl name                library name, MUST same as used with smr_ARG_WITHLIB
-dnl header              a header file required for using the lib
-dnl extra-flags         (optional) flags required when compiling the
-dnl                     header, typically more includes; for ex. X_CFLAGS
-dnl
-dnl Changes:  Changed some identifier names.
-dnl           --with-foo-includes is now --with-foo-include
-dnl           name_CFLAGS is now name_INCLUDE
-dnl           Documentation above changed to reflect these changes
-dnl           Noah Elliott, October 1998
-
-AC_DEFUN([CASC_SMR_ARG_WITHINCLUDES],
-[
-   smr_ARG_WITHINCLUDES([$1], [$2], [$3])
-])dnl
-
-AC_DEFUN([smr_ARG_WITHINCLUDES], [
-
-AC_ARG_WITH([$1]-include,
-[  --with-$1-include=DIR  set directory for $1 headers],
-[
-    if test -d "$withval"; then
-        [$1]_INCLUDE="-I${withval}"
-    else
-        AC_MSG_ERROR(argument must be a directory)
-    fi])
-
-dnl This bit of logic comes from autoconf's AC_PROG_CC macro.  We need
-dnl to put the given include directory into CPPFLAGS temporarily, but
-dnl then restore CPPFLAGS to its old value.
-dnl 
-smr_test_CPPFLAGS="${CPPFLAGS+set}"
-smr_save_CPPFLAGS="$CPPFLAGS"
-CPPFLAGS="$CPPFLAGS ${[$1]_CFLAGS}"
-
-    ifelse($3, , , CPPFLAGS="$CPPFLAGS [$3]")
-    AC_CHECK_HEADERS($2)
-   
-if test "$smr_test_CPPFLAGS" = set; then
-    CPPFLAGS=$smr_save_CPPFLAGS
-else
-    unset CPPFLAGS
-fi
-])
-    
-        
-dnl smr_CHECK_LIB from FVWM by S. Robbins
-dnl Probe for an optional library.  This macro creates both
-dnl --with-foo-lib and --with-foo-include options for the configure
-dnl script.  If --with-foo-lib is *not* specified, the default is to
-dnl probe for the library, and use it if found.
-dnl
-dnl Usage:
-dnl smr_CHECK_LIB(name, libname, desc, func, header, x-libs, x-flags)
-dnl 
-dnl name        name for --with options
-dnl libname     (optional) real name of library, if different from
-dnl             above
-dnl desc        (optional) short descr. of library, for help string
-dnl func        function of library, to probe for
-dnl header      (optional) header required for using library
-dnl x-libs      (optional) extra libraries, if needed to link with lib
-dnl x-flags     (optional) extra flags, if needed to include header files
-dnl
-dnl Changes:  identifier names and documentation modified to reflect
-dnl           changes to smr_ARG_WITHLIB and smr_ARG_WITHINCLUDES
-dnl           Noah Elliott, October 1998
-
-AC_DEFUN([CASC_SMR_CHECK_LIB],
-[
-   smr_CHECK_LIB([$1], [$2], [$3], [$4], [$5], [$6], [$7])
-])dnl
-
-AC_DEFUN([smr_CHECK_LIB],
-[   
-ifelse($2, , smr_lib=[$1], smr_lib=[$2])
-ifelse($5, , , smr_header=[$5])
-smr_ARG_WITHLIB($1,$2,$3)
-if test "$with_$1" != no; then
-    AC_CHECK_LIB($smr_lib, $4,
-        smr_havelib=yes, smr_havelib=no,
-        ifelse($6, , ${$1_LIBFLAGS}, [${$1_LIBFLAGS} $6]))
-    if test "$smr_havelib" = yes -a "$smr_header" != ""; then
-        smr_ARG_WITHINCLUDES($1, $smr_header, $7)
-        smr_safe=`echo "$smr_header" | sed 'y%./+-%__p_%'`
-        if eval "test \"`echo '$ac_cv_header_'$smr_safe`\" != yes"; then
-            smr_havelib=no
-        fi
-    fi
-    if test "$smr_havelib" = yes; then
-        AC_MSG_RESULT(Using $1 library)
-    else
-        $1_LIBFLAGS=
-        $1_INCLUDE=
-        if test "$with_$1" = maybe; then
-            AC_MSG_RESULT(Not using $1 library)
-        else
-            AC_MSG_WARN(Requested $1 library not found!)
-        fi
-    fi
-fi])
-
-
-dnl **********************************************************************
-dnl * CASC_CONFIG_OUTPUT_LIST(DIR-LIST[, OUTPUT-FILE])
-dnl *
-dnl * The intent of this macro is to make configure handle the possibility
-dnl * that a portion of the directory tree of a project may not be
-dnl * present.  This will modify the argument list of AC_OUTPUT to contain
-dnl * only output file names for which corresponding input files exist.
-dnl * If you are not concerned about the possible absence of the necessary
-dnl * input (.in) files, it is better to not use this macro and to
-dnl * explicitly list all of the output files in a call to AC_OUTPUT.
-dnl * Also, If you wish to create a file Foo from a file with a name
-dnl * other than Foo.in, this macro will not work, and you must use
-dnl * AC_OUTPUT.
-dnl *
-dnl * This macro checks for the existence of the file OUTPUT-FILE.in in
-dnl * each directory specified in the whitespace-separated DIR-LIST.  
-dnl * (Directories should be specified by relative path from the directory 
-dnl * containing configure.in.) If OUTPUT-FILE is not specified, the
-dnl * default is 'Makefile'.  For each directory that contains 
-dnl * OUTPUT-FILE.in, the relative path of OUTPUT-FILE is added to the 
-dnl * shell variable OUTPUT-FILE_list.  When AC_OUTPUT is called,
-dnl * '$OUTPUT-FILE_list' should be included in the argument list.  So if
-dnl * you have a directory tree and each subdirectory contains a 
-dnl * Makefile.in, DIR-LIST should be a list of every subdirectory and
-dnl * OUTPUT-FILE can be omitted, because 'Makefile' is the default.  When
-dnl * configure runs, it will check for the existence of a Makefile.in in
-dnl * each directory in DIR-LIST, and if so, the relative path of each
-dnl * intended Makefile will be added to the variable Makefile_list.
-dnl *
-dnl * This macro can be called multiple times, if there are files other
-dnl * than Makefile.in with a .in suffix other that are intended to be 
-dnl * processed by configure. 
-dnl *
-dnl * Example
-dnl *     If directories dir1 and dir2 both contain a file named Foo.in, 
-dnl *     and you wish to use configure to create a file named Foo in each
-dnl *     directory, then call 
-dnl *     CASC_CONFIG_OUTPUT_LIST(dir1 dir2, Foo)
-dnl *     If you also called this macro for Makefile as described above,
-dnl *     you should call
-dnl *     AC_OUTPUT($Makefile_list $Foo_list)
-dnl *     at the end of configure.in .
-dnl *********************************************************************
-
-
-AC_DEFUN([CASC_CONFIG_OUTPUT_LIST],
-[
-   dnl * m_OUTPUT_LIST is a macro to store the name of the variable
-   dnl * which will contain the list of output files
-   define([m_OUTPUT_LIST], ifelse([$2], , Makefile_list, [$2_list]))
-
-   if test -z "$srcdir"; then
-      srcdir=.
-   fi
-
-   dnl * use "Makefile" if second argument not given
-   if test -n "$2"; then
-      casc_output_file=$2
-   else   
-      casc_output_file=Makefile
-   fi   
-      
-   dnl * Add a file to the output list if its ".in" file exists.
-   for casc_dir in $1; do
-      if test -f $srcdir/$casc_dir/$casc_output_file.in; then
-         m_OUTPUT_LIST="$m_OUTPUT_LIST $casc_dir/$casc_output_file"
-      fi
-   done
-])dnl
-
-
-dnl **********************************************************************
-dnl * CASC_GUESS_ARCH
-dnl * Guesses a one-word name for the current architecture, unless ARCH
-dnl * has been preset.  This is an alternative to the built-in macro
-dnl * AC_CANONICAL_HOST, which gives a three-word name.  Uses the utility
-dnl * 'tarch', which is a Bourne shell script that should be in the same  
-dnl * directory as the configure script.  If tarch is not present or if it
-dnl * fails, ARCH is set to the value, if any, of shell variable HOSTTYPE,
-dnl * otherwise ARCH is set to "unknown".
-dnl **********************************************************************
-
-AC_DEFUN([CASC_GUESS_ARCH],
-[
-   AC_MSG_CHECKING(the architecture)
-
-   dnl * $ARCH could already be set in the environment or earlier in configure
-   dnl * Use the preset value if it exists, otherwise go throug the procedure
-   if test -z "$ARCH"; then
-
-      dnl * configure searches for the tool "tarch".  It should be in the
-      dnl * same directory as configure.in, but a couple of other places
-      dnl * will be checked.  casc_tarch stores a relative path for "tarch".
-      casc_tarch_dir=
-      for casc_dir in $srcdir $srcdir/.. $srcdir/../.. $srcdir/config; do
-         if test -f $casc_dir/tarch; then
-            casc_tarch_dir=$casc_dir
-            casc_tarch=$casc_tarch_dir/tarch
-            break
-         fi
-      done
-
-      dnl * if tarch was not found or doesn't work, try using env variable
-      dnl * $HOSTTYPE
-      if test -z "$casc_tarch_dir"; then
-         AC_MSG_WARN(cannot find tarch, using \$HOSTTYPE as the architecture)
-         ARCH=$HOSTTYPE
-      else
-         ARCH="`$casc_tarch`"
-
-         if test -z "$ARCH" || test "$ARCH" = "unknown"; then
-            ARCH=$HOSTTYPE
-         fi
-      fi
-
-      dnl * if $ARCH is still empty, give it the value "unknown".
-      if test -z "$ARCH"; then
-         ARCH=unknown
-         AC_MSG_WARN(architecture is unknown)
-      else
-         AC_MSG_RESULT($ARCH)
-      fi    
-   else
-      AC_MSG_RESULT($ARCH)
-   fi
-
-   AC_SUBST(ARCH)
-
-])dnl
-
-
-dnl **********************************************************************
-dnl * CASC_SET_SUFFIX_RULES is not like the other macros in aclocal.m4
-dnl * because it does not run any kind of test on the system on which it
-dnl * is running.  All it does is create several variables which contain
-dnl * the text of some simple implicit suffix rules that can be
-dnl * substituted into Makefile.in.  The suffix rules that come from the
-dnl * macro all deal with compiling a source file into an object file.  If
-dnl * this macro is called in configure.in, then if `@CRULE@' is placed in
-dnl * Makefile.in, the following will appear in the generated Makefile:
-dnl *
-dnl * .c.o:
-dnl *         @echo "Making (c) " $@ 
-dnl *         @${CC} -o $@ -c ${CFLAGS} $<	
-dnl *
-dnl * The following is a list of the variables created by this macro and
-dnl * the corresponding suffixes of the files that each implicit rule 
-dnl * deals with.
-dnl *
-dnl * CRULE       --   .c
-dnl * CXXRULE     --   .cxx
-dnl * CPPRULE     --   .cpp
-dnl * CCRULE      --   .cc
-dnl * CAPCRULE    --   .C
-dnl * F77RULE     --   .f
-dnl *
-dnl * There are four suffix rules for C++ files because of the different
-dnl * suffixes that can be used for C++.  Only use the one which
-dnl * corresponds to the suffix you use for your C++ files.
-dnl *
-dnl * The rules created by this macro require you to use the following
-dnl * conventions for Makefile variables:
-dnl *
-dnl * CC        = C compiler
-dnl * CXX       = C++ compiler
-dnl * F77       = Fortran 77 compiler
-dnl * CFLAGS    = C compiler flags
-dnl * CXXFLAGS  = C++ compiler flags
-dnl * FFLAGS    = Fortran 77 compiler flags
-dnl **********************************************************************
-
-AC_DEFUN([CASC_SET_SUFFIX_RULES],
-[
-   dnl * Things weren't working whenever "$@" showed up in the script, so
-   dnl * I made the symbol $at_sign to signify '@'
-   at_sign=@
-
-   dnl * All of the backslashes are used to handle the $'s and the
-   dnl * newlines which get passed through echo and sed.
-
-   CRULE=`echo ".c.o:\\\\
-\t@echo \"Making (c) \" \\$$at_sign \\\\
-\t@\\${CC} -o \\$$at_sign -c \\${CFLAGS} \$<"`
-
-   AC_SUBST(CRULE)
-
-   CXXRULE=`echo ".cxx.o:\\\\
-\t@echo \"Making (c++) \" \\$$at_sign \\\\
-\t@\\${CXX} -o \\$$at_sign -c \\${CXXFLAGS} \$<"`
-
-   AC_SUBST(CXXRULE)
-
-   CPPRULE=`echo ".cpp.o:\\\\
-\t@echo \"Making (c++) \" \\$$at_sign \\\\
-\t@\\${CXX} -o \\$$at_sign -c \\${CXXFLAGS} \$<"`
-
-   AC_SUBST(CPPRULE)
-
-   CCRULE=`echo ".cc.o:\\\\
-\t@echo \"Making (c++) \" \\$$at_sign \\\\
-\t@\\${CXX} -o \\$$at_sign -c \\${CXXFLAGS} \$<"`
-
-   AC_SUBST(CCRULE)
-
-   CAPCRULE=`echo ".C.o:\\\\
-\t@echo \"Making (c++) \" \\$$at_sign \\\\
-\t@\\${CXX} -o \\$$at_sign -c \\${CXXFLAGS} \$<"`
-
-   AC_SUBST(CAPCRULE)
-
-   F77RULE=`echo ".f.o:\\\\
-\t@echo \"Making (f) \" \\$$at_sign \\\\
-\t@\\${F77} -o \\$$at_sign -c \\${FFLAGS} \$<"`
-
-   AC_SUBST(F77RULE)
-
-])
-
-dnl Macro to save compiler state flags for invoking dnl compiler tests
-dnl NOTE that this is NOT currently a stack so can dnl only be called
-dnl in push/pop order.  push push pop pop dnl will fail
-AC_DEFUN([CASC_PUSH_COMPILER_STATE],[
-   casc_save_LIBS=$LIBS
-   casc_save_CXXFLAGS=$CXXFLAGS
-])
-
-dnl Macro to restore compiler state flags for invoking
-dnl compiler tests
-AC_DEFUN([CASC_POP_COMPILER_STATE],[
-   LIBS=$casc_save_LIBS
-   unset casc_save_LIBS
-   CXXFLAGS=$casc_save_CXXFLAGS
-   unset casc_save_CXXFLAGS
-])
-
-dnl ********************************************************************
-dnl * CASC_PROG_MPICC searches the PATH for an available MPI C compiler
-dnl * wraparound.  It assigns the name to MPICC.
-dnl ********************************************************************
-
-AC_DEFUN([CASC_PROG_MPICC],
-[
-   AC_CHECK_PROGS(MPICC, mpcc mpicc tmcc hcc)
-   test -z "$MPICC" && AC_MSG_ERROR([no acceptable mpicc found in \$PATH])
-])dnl
-
-
-dnl ********************************************************************
-dnl * CASC_PROG_MPICXX searches the PATH for an available MPI C++ 
-dnl * compiler wraparound.  It assigns the name to MPICXX.
-dnl ********************************************************************
-
-AC_DEFUN([CASC_PROG_MPICXX],
-[
-   AC_CHECK_PROGS(MPICXX, mpKCC mpCC mpig++ mpiCC hcp)
-   test -z "$MPICXX" && AC_MSG_ERROR([no acceptable mpic++ found in \$PATH])
-])dnl
-
-
-dnl **********************************************************************
-dnl * CASC_PROG_MPIF77 searches the PATH for an available MPI Fortran 77 
-dnl * compiler wraparound.  It assigns the name to MPIF77.
-dnl **********************************************************************
-
-AC_DEFUN([CASC_PROG_MPIF77],
-[
-   AC_CHECK_PROGS(MPIF77, mpf77 mpxlf mpif77 mpixlf tmf77 hf77)
-   test -z "$MPIF77" && AC_MSG_ERROR([no acceptable mpif77 found in \$PATH])
-])dnl
-
-
-dnl ***********************************************************************
-dnl * CASC_CHECK_MPIF77_PP checks whether the preprocessor needs to
-dnl * be called before calling the compiler for Fortran files with
-dnl * preprocessor directives and MPI function calls.  If the preprocessor
-dnl * is necessary, MPIF77NEEDSPP is set to "yes", otherwise it is set to
-dnl * "no"
-dnl ***********************************************************************
-
-AC_DEFUN([CASC_CHECK_MPIF77_PP],
-[
-   AC_REQUIRE([CASC_PROG_MPIF77])
-
-   rm -f testppmp.o
-
-   AC_MSG_CHECKING(whether $FPP needs to be called before $MPIF77)
-
-   # This follows the same procedur as CASC_CHECK_F77_PP, except it tests
-   # $MPIF77 using a test program that includes MPI functions.
-
-   cat > testppmp.F <<EOF
-#define FOO 3
-	program testppmp
-	include 'mpif.h'
-	integer rank,size,mpierr,sum
-	call MPI_INIT(mpierr)
-	call MPI_COMM_SIZE(MPI_COMM_WORLD,size,mpierr)
-	call MPI_COMM_RANK(MPI_COMM_WORLD,rank,mpierr)
-#ifdef FORTRAN_NO_UNDERSCORE
-        sum = rank + size
-#else
-        sum = rank + rank
-#endif
-        call MPI_FINALIZE(mpierr)
-        end 
-EOF
-
-   $MPIF77 -DBAR -c testppmp.F 
-   if test -f testppmp.o; then 
-      MPIF77NEEDSPP=no 
-   else 
-      MPIF77NEEDSPP=yes 
-   fi
-
-   echo $MPIF77NEEDSPP
-   rm -f testppmp.o testppmp.F
-   AC_SUBST(MPIF77NEEDSPP)
-])dnl
-
-
-dnl *********************************************************************
-dnl * CASC_SET_MPI sets up the needed MPI library and directory flags.   
-dnl * The location of the file mpi.h is put into the variable MPIINCLUDE
-dnl * as a -I flag.  The -l flags that specify the needed libraries and
-dnl * the -L flags that specify the paths of those libraries are placed in
-dnl * the variables MPILIBS and MPILIBDIRS, respectively.  To set the MPI
-dnl * libraries and directories manually, use the --with-mpi-include,
-dnl * --with-mpi-libs, and --with-mpi-lib-dirs command-line options when
-dnl * invoking configure.  Only one directory should be specified with
-dnl * --with-mpi-include, while any number of directories can be specified
-dnl * by --with-mpi-lib-dirs.  Any number of libraries can be specified
-dnl * with --with-mpi-libs, and the libraries must be referred to by their 
-dnl * base names, so libmpi.a is just mpi.  It is adviseable to use all 
-dnl * three --with flags whenever one is used, because it is likely that
-dnl * when one is chosen it will mess up the automatic choices for the
-dnl * other two.  If the architecture is unknown, or if the needed MPI
-dnl * settings for the current architecture are not known, then the naive
-dnl * settings of MPILIBS="-lmpi" and MPILIBDIRS="-L/usr/local/mpi/lib"
-dnl * are tested, and if they exist they are used, otherwise the MPILIB*
-dnl * variables are left blank.  In the case of rs6000, the variable
-dnl * MPIFLAGS is also set. 
-dnl **********************************************************************
- 
-AC_DEFUN([CASC_SET_MPI],
-[
-
-   dnl * If called from within CASC_FIND_MPI, then the configure-line
-   dnl * options will already exist.  This ifdef creates them otherwise.
-   ifdef([AC_PROVIDE_CASC_FIND_MPI], ,
-      [AC_ARG_WITH(mpi-include, [  --with-mpi-include=DIR  mpi.h is in DIR],
-                  casc_mpi_include_dir=$withval)
-
-      AC_ARG_WITH(mpi-libs, 
-[  --with-mpi-libs=LIBS    LIBS is space-separated list of library names
-                          needed for MPI, e.g. \"nsl socket mpi\"],
-                  casc_mpi_libs=$withval)
-
-      AC_ARG_WITH(mpi-lib-dirs, 
-[  --with-mpi-lib-dirs=DIRS
-                          DIRS is space-separated list of directories
-                          containing the libraries specified by
-                          \`--with-mpi-libs', e.g \"/usr/lib /usr/local/mpi/lib\"],
-                  casc_mpi_lib_dirs=$withval)]
-   )
-
-   if test -z "$casc_mpi_libs"; then
-      AC_REQUIRE([CASC_GUESS_ARCH])
-
-      dnl * Set everything to known values
-      case $ARCH in
-
-         sun4 | solaris)
-            case $F77 in
-               *g77)
-                   if test -z "$casc_mpi_include_dir"; then
-                      casc_mpi_include_dir=/usr/local/mpi/lam/h
-                   fi
-                   
-                   if test -z "$casc_mpi_lib_dirs"; then
-                      casc_mpi_lib_dirs="/usr/local/mpi/lam/lib"
-                   fi
-
-                   casc_mpi_libs="socket mpi trillium args tstdio t";;
-
-               *)
-
-                  if test -z "$casc_mpi_include_dir"; then
-                     MPIINCLUDE="-I/usr/local/mpi/mpich/include \
-                                 -I/usr/local/mpi/mpich/lib/solaris/ch_p4"
-                  fi
-
-                  if test -z "$casc_mpi_lib_dirs"; then
-                     casc_mpi_lib_dirs="/usr/local/mpi/mpich/lib/solaris/ch_p4 \
-                                       /usr/lib"
-                  fi
-            
-               casc_mpi_libs="nsl socket mpi";;
-               esac
-
-            if test -z "$MPIINCLUDE"; then
-               AC_CHECK_HEADER($casc_mpi_include_dir/mpi.h,
-                               MPIINCLUDE="-I$casc_mpi_include_dir")
-            fi
-         ;;
-
-         alpha)
-            if test -z "$casc_mpi_include_dir"; then
-               casc_mpi_include_dir=/usr/local/mpi/include
-            fi
-            AC_CHECK_HEADER($casc_mpi_include_dir/mpi.h,
-                               MPIINCLUDE="-I$casc_mpi_include_dir")
-
-            if test -z "$casc_mpi_lib_dirs"; then
-               casc_mpi_lib_dirs="/usr/local/mpi/lib/alpha/ch_shmem \
-                                  /usr/local/lib"
-            fi
-
-            casc_mpi_libs="mpich gs";;
-
-         rs6000) 
-
-dnl            if test -z "$casc_mpi_include_dir"; then
-dnl               casc_mpi_include_dir=/usr/lpp/ppe.poe/include
-dnl            fi
-dnl            AC_CHECK_HEADER($casc_mpi_include_dir/mpi.h,
-dnl                               MPIINCLUDE="-I$casc_mpi_include_dir")
-
-dnl            if test -z "$casc_mpi_lib_dirs"; then
-dnl               casc_mpi_lib_dirs=/usr/lpp/ppe.poe/lib
-dnl            fi
-
-            casc_mpi_libs=mpi
-
-            MPIFLAGS="-binitfini:poe_remote_main";;
-
-         IRIX64 | iris4d) 
-            if test -z "$casc_mpi_include_dir"; then
-               casc_mpi_include_dir=/usr/local/mpi/include
-            fi
-            AC_CHECK_HEADER($casc_mpi_include_dir/mpi.h,
-                               MPIINCLUDE="-I$casc_mpi_include_dir")
-
-            if test -z "$casc_mpi_lib_dirs"; then
-               casc_mpi_lib_dirs=/usr/local/mpi/lib/IRIX64/ch_p4
-            fi
-
-            casc_mpi_libs=mpi;; 
-        
-         *)
-AC_MSG_WARN([trying naive MPI settings - can use --with flags to change])
-            if test -z "$casc_mpi_include_dir"; then
-               casc_mpi_include_dir=/usr/local/mpi/include
-            fi
-            AC_CHECK_HEADER($casc_mpi_include_dir/mpi.h,
-                               MPIINCLUDE="-I$casc_mpi_include_dir")
-
-            if test -z "$casc_mpi_lib_dirs"; then
-               casc_mpi_lib_dirs=/usr/local/mpi/lib
-            fi
-            casc_mpi_libs=mpi ;;
-      esac
-
-      for casc_lib in $casc_mpi_libs; do
-         CASC_ADD_LIB($casc_lib, main, $casc_mpi_lib_dirs, MPI)
-      done
-
-   else
-      if test -n "$casc_mpi_include_dir"; then
-         MPIINCLUDE="-I$casc_mpi_include_dir"
-      else
-         MPIINCLUDE=
-      fi
-
-      if test -n "$casc_mpi_lib_dirs"; then
-         for casc_lib_dir in $casc_mpi_lib_dirs; do
-            MPILIBDIRS="-L$casc_lib_dir $MPILIBDIRS"
-         done
-      else
-         MPILIBDIRS=
-      fi
-
-      for casc_lib in $casc_mpi_libs; do
-         MPILIBS="$MPILIBS -l$casc_lib"
-      done
-   fi
-])dnl
-
-
-dnl ********************************************************************
-dnl * CASC_FIND_MPI will determine the libraries, directories, and other
-dnl * flags needed to compile and link programs with MPI function calls.
-dnl * This macro runs tests on the script found by the CASC_PROG_MPICC
-dnl * macro.  If there is no such mpicc-type script in the PATH and
-dnl * MPICC is not set manually, then this macro will not work.
-dnl *
-dnl * One may question why these settings would need to be determined if
-dnl * there already is mpicc available, and that is a valid question.  I
-dnl * can think of a couple of reasons one may want to use these settings 
-dnl * rather than using mpicc directly.  First, these settings allow you
-dnl * to choose the C compiler you wish to use rather than using whatever
-dnl * compiler is written into mpicc.  Also, the settings determined by
-dnl * this macro should also work with C++ and Fortran compilers, so you
-dnl * won't need to have mpiCC and mpif77 alongside mpicc.  This is
-dnl * especially helpful on systems that don't have mpiCC.  The advantage
-dnl * of this macro over CASC_SET_MPI is that this one doesn't require
-dnl * a test of the machine type and thus will hopefully work on unknown
-dnl * architectures.  The main disadvantage is that it relies on mpicc.
-dnl *
-dnl * --with-mpi-include, --with-mpi-libs, and --with-mpi-lib-dirs can be
-dnl * used to manually override the automatic test, just as with
-dnl * CASC_SET_MPI.  If any one of these three options are used, the
-dnl * automatic test will not be run, so it is best to call all three
-dnl * whenever one is called.  In addition, the option --with-mpi-flags is
-dnl * available here to set any other flags that may be needed, but it
-dnl * does not override the automatic test.  Flags set by --with-mpi-flags
-dnl * will be added to the variable MPIFLAGS.  This way, if the macro, for
-dnl * whatever reason, leaves off a necessary flag, the flag can be added 
-dnl * to MPIFLAGS without eliminating anything else.  The other variables
-dnl * set are MPIINCLUDE, MPILIBS, and MPILIBDIRS, just as in 
-dnl * CASC_SET_MPI.  This macro also incorporates CASC_SET_MPI as a backup
-dnl * plan, where if there is no mpicc, it will use the settings
-dnl * determined by architecture name in CASC_SET_MPI
-dnl ********************************************************************
-
-AC_DEFUN([CASC_FIND_MPI],
-[
-
-   casc_find_mpi_cache_used=yes
-
-   AC_CACHE_VAL(casc_cv_mpi_include, casc_find_mpi_cache_used=no)
-   AC_CACHE_VAL(casc_cv_mpi_libs, casc_find_mpi_cache_used=no)
-   AC_CACHE_VAL(casc_cv_mpi_lib_dirs, casc_find_mpi_cache_used=no)
-   AC_CACHE_VAL(casc_cv_mpi_flags, casc_find_mpi_cache_used=no)
-
-   if test "$casc_find_mpi_cache_used" = "yes"; then
-      AC_MSG_CHECKING(for location of mpi.h)
-      MPIINCLUDE=$casc_cv_mpi_include
-      AC_MSG_RESULT("\(cached\) $MPIINCLUDE")
-
-      AC_MSG_CHECKING(for MPI library directories)
-      MPILIBDIRS=$casc_cv_mpi_lib_dirs
-      AC_MSG_RESULT("\(cached\) $MPILIBDIRS")
-
-      AC_MSG_CHECKING(for MPI libraries)
-      MPILIBS=$casc_cv_mpi_libs
-      AC_MSG_RESULT("\(cached\) $MPILIBS")
-
-      AC_MSG_CHECKING(for other MPI-related flags)
-      MPIFLAGS=$casc_cv_mpi_flags
-      AC_MSG_RESULT("\(cached\) $MPIFLAGS")
-   else
-   
-
-      dnl * Set up user options.  If user uses any of the fist three options,
-      dnl * then automatic tests are not run.
-
-      casc_user_chose_mpi=no
-      AC_ARG_WITH(mpi-include, [  --with-mpi-include=DIR  mpi.h is in DIR],
-                  for mpi_dir in $withval; do
-                     MPIINCLUDE="$MPIINCLUDE -I$withval"
-                  done; casc_user_chose_mpi=yes)
-
-      AC_ARG_WITH(mpi-libs,
-[  --with-mpi-libs=LIBS    LIBS is space-separated list of library names 
-                          needed for MPI, e.g. \"nsl socket mpi\"],  
-                  for mpi_lib in $withval; do
-                     MPILIBS="$MPILIBS -l$mpi_lib"
-                  done; casc_user_chose_mpi=yes)
-
-
-      AC_ARG_WITH(mpi-lib-dirs,
-[  --with-mpi-lib-dirs=DIRS
-                          DIRS is space-separated list of directories
-                          containing the libraries specified by
-                          \`--with-mpi-libs', e.g \"/usr/lib /usr/local/mpi/lib\"],
-                  for mpi_lib_dir in $withval; do
-                     MPILIBDIRS="-L$mpi_lib_dir $MPILIBDIRS"
-                  done; casc_user_chose_mpi=yes)
-
-      dnl * --with-mpi-flags only adds to automatic selections, 
-      dnl * does not override
-
-      AC_ARG_WITH(mpi-flags,
-[  --with-mpi-flags=FLAGS  FLAGS is space-separated list of whatever flags other
-                          than -l and -L are needed to link with mpi libraries],
-                          MPIFLAGS=$withval)
-
-
-      if test "$casc_user_chose_mpi" = "no"; then
-
-      dnl * Find an MPICC.  If there is none, call CASC_SET_MPI to choose MPI
-      dnl * settings based on architecture name.  If CASC_SET_MPI fails,
-      dnl * print warning message.  Manual MPI settings must be used.
-
-         AC_ARG_WITH(MPICC,
-[  --with-MPICC=ARG        ARG is mpicc or similar MPI C compiling tool],
-            MPICC=$withval,
-            [AC_CHECK_PROGS(MPICC, mpcc mpicc tmcc hcc)])
-
-         if test -z "$MPICC"; then
-            AC_MSG_WARN([no acceptable mpicc found in \$PATH])
-            CASC_SET_MPI
-            if test -z "$MPILIBS"; then
-             AC_MSG_WARN([MPI not found - must set manually using --with flags])
-            fi
-
-         dnl * When $MPICC is there, run the automatic test
-         dnl * here begins the hairy stuff
-
-         else      
- 
-            dnl changequote(, )dnl
-  
-            dnl * Create a minimal MPI program.  It will be compiled using
-            dnl * $MPICC with verbose output.
-            cat > mpconftest.c << EOF
-#include "mpi.h"
-
-main(int argc, char **argv)
-{
-   int rank, size;
-   MPI_Init(&argc, &argv);
-   MPI_Comm_size(MPI_COMM_WORLD, &size);
-   MPI_Comm_rank(MPI_COMM_WORLD, &rank);
-   MPI_Finalize();
-   return 0;
-}
-EOF
-
-            casc_mplibs=
-            casc_mplibdirs=
-            casc_flags=
-            casc_lmpi_exists=no
-
-            dnl * These are various ways to produce verbose output from $MPICC
-            dnl * All of their outputs are stuffed into variable
-            dnl * $casc_mpoutput
-
-            for casc_command in "$MPICC -show"\
-                                "$MPICC -v"\
-                                "$MPICC -#"\
-                                "$MPICC"; do
-
-               casc_this_output=`$casc_command mpconftest.c -o mpconftest 2>&1`
-
-               dnl * If $MPICC uses xlc, then commas must be removed from output
-               xlc_p=`echo $casc_this_output | grep xlcentry`
-               if test -n "$xlc_p"; then
-                  casc_this_output=`echo $casc_this_output | sed 's/,/ /g'`
-               fi
-
-               dnl * Turn on flag once -lmpi is found in output
-               lmpi_p=`echo $casc_this_output | grep "\-lmpi"`
-               if test -n "$lmpi_p"; then
-                  casc_lmpi_exists=yes
-               fi
-
-               casc_mpoutput="$casc_mpoutput $casc_this_output"
-               casc_this_output=
-
-            done
-
-            rm -rf mpconftest*
-
-            dnl * little test to identify $CC as IBM's xlc
-            echo "main() {}" > cc_conftest.c
-            cc_output=`${CC-cc} -v -o cc_conftest cc_conftest.c 2>&1`
-            xlc_p=`echo $cc_output | grep xlcentry`
-            if test -n "$xlc_p"; then
-               casc_compiler_is_xlc=yes
-            fi 
-            rm -rf cc_conftest*
-
-            dnl * $MPICC might not produce '-lmpi', but we still need it.
-            dnl * Add -lmpi to $casc_mplibs if it was never found
-            if test "$casc_lmpi_exists" = "no"; then
-               casc_mplibs="-lmpi"
-            else
-               casc_mplibs=
-            fi
-
-            casc_want_arg=
-
-            dnl * Loop through every word in output to find possible flags.
-            dnl * If the word is the absolute path of a library, it is added
-            dnl * to $casc_flags.  Any "-llib", "-L/dir", "-R/dir" and
-            dnl * "-I/dir" is kept.  If '-l', '-L', '-R', '-I', '-u', or '-Y'
-            dnl * appears alone, then the next word is checked.  If the next
-            dnl * word is another flag beginning with '-', then the first
-            dnl * word is discarded.  If the next word is anything else, then
-            dnl * the two words are coupled in the $casc_arg variable.
-            dnl * "-binitfini:poe_remote_main" is a flag needed especially
-            dnl * for IBM MPI, and it is always kept if it is found.
-            dnl * Any other word is discarded.  Also, after a word is found
-            dnl * and kept once, it is discarded if it appears again
-
-            for casc_arg in $casc_mpoutput; do
- 
-               casc_old_want_arg=$casc_want_arg
-               casc_want_arg=  
-
-               if test -n "$casc_old_want_arg"; then
-                  case "$casc_arg" in
-                  [-*)]
-                     casc_old_want_arg=
-                  ;;
-                  esac
-               fi
-
-               case "$casc_old_want_arg" in
-               ['')]
-                  case $casc_arg in
-                  [/*.a)]
-                     exists=false
-                     for f in $casc_flags; do
-                        if test x$casc_arg = x$f; then
-                           exists=true
-                        fi
-                     done
-                     if $exists; then
-                        casc_arg=
-                     else
-                        casc_flags="$casc_flags $casc_arg"
-                     fi
-                  ;;
-                  [-binitfini:poe_remote_main)]
-                     exists=false
-                     for f in $casc_flags; do
-                        if test x$casc_arg = x$f; then
-                           exists=true
-                        fi
-                     done
-                     if $exists; then
-                        casc_arg=
-                     else
-                        casc_flags="$casc_flags $casc_arg"
-                     fi
-                  ;;
-                  [-lang*)]
-                     casc_arg=
-                  ;;
-                  [-[lLR])]
-                     casc_want_arg=$casc_arg
-                     casc_arg=
-                  ;;
-                  [-[lLR]*)]
-                     exists=false
-                     for f in $casc_flags; do
-                        if test x$casc_arg = x$f; then
-                           exists=true
-                        fi
-                     done
-                     if $exists; then
-                        casc_arg=
-                     else
-                       casc_flags="$casc_flags $casc_arg"
-                     fi
-                  ;;
-                 [-u)]
-                     casc_want_arg=$casc_arg
-                     casc_arg=
-                  ;;
-                  [-Y)]
-                     casc_want_arg=$casc_arg
-                     casc_arg=
-                  ;;
-                  [-I)]
-                     casc_want_arg=$casc_arg
-                     casc_arg=
-                  ;;
-                  [-I*)]
-                     exists=false
-                     for f in $casc_flags; do
-                        if test x$casc_arg = x$f; then
-                           exists=true
-                        fi
-                     done
-                     if $exists; then
-                        casc_arg=
-                     else
-                        casc_flags="$casc_flags $casc_arg"
-                     fi
-                  ;;
-                  [*)]
-                     casc_arg=
-                  ;;
-                  esac
-
-               ;;
-               [-[lLRI])]
-                  casc_arg="casc_old_want_arg $casc_arg"
-               ;;
-               [-u)]
-                  casc_arg="-u $casc_arg"
-               ;;
-               [-Y)]
-                  casc_arg=`echo $casc_arg | sed -e 's%^P,%%'`
-                  SAVE_IFS=$IFS
-                  IFS=:
-                  casc_list=
-                  for casc_elt in $casc_arg; do
-                     casc_list="$casc_list -L$casc_elt"
-                  done
-                  IFS=$SAVE_IFS
-                  casc_arg="$casc_list"
-               ;;
-               esac
-
-               dnl * Still inside the big for loop, we separate each flag
-               dnl * into includes, libdirs, libs, flags
-               if test -n "$casc_arg"; then
-                  case $casc_arg in
-                  [-I*)]
-
-                     dnl * if the directory given in this flag contains mpi.h
-                     dnl * then the flag is assigned to $MPIINCLUDE
-                     if test -z "$MPIINCLUDE"; then
-                        casc_cppflags="$casc_cppflags $casc_arg"
-                        casc_include_dir=`echo "$casc_arg" | sed 's/-I//g'` 
-
-                        SAVE_CPPFLAGS="$CPPFLAGS"
-                        CPPFLAGS="$casc_cppflags"
-                        dnl changequote([, ])dnl
-
-                        unset ac_cv_header_mpi_h
-                        AC_CHECK_HEADER(mpi.h,
-                                        MPIINCLUDE="$casc_cppflags")
-
-                        dnl changequote(, )dnl
-                        CPPFLAGS="$SAVE_CPPFLAGS"
-
-                     else
-                        casc_arg=
-                     fi
-                  ;;
-                  [-[LR]*)]
-
-                     dnl * These are the lib directory flags
-                     casc_mplibdirs="$casc_mplibdirs $casc_arg"
-                  ;;
-                  [-l* | /*)]
-
-                     dnl * These are the libraries
-                     casc_mplibs="$casc_mplibs $casc_arg"
-                  ;;
-                  [-binitfini:poe_remote_main)]
-                     if test "$casc_compiler_is_xlc" = "yes"; then
-                        casc_mpflags="$casc_mpflags $casc_arg"
-                     fi
-                  ;;
-                  [*)]
-                     dnl * any other flag that has been kept goes here
-                     casc_mpflags="$casc_mpflags $casc_arg"
-                  ;;
-                  esac
-
-                  dnl * Upcoming test needs $LIBS to contain the flags 
-                  dnl * we've found
-                  LIBS_SAVE=$LIBS
-                  LIBS="$MPIINCLUDE $casc_mpflags $casc_mplibdirs $casc_mplibs"
-
-                  if test -n "`echo $LIBS | grep '\-R/'`"; then
-                     LIBS=`echo $LIBS | sed 's/-R\//-R \//'`
-                  fi
-
-                  dnl changequote([, ])dnl
-
-
-                  dnl * Test to see if flags found up to this point are
-                  dnl * sufficient to compile and link test program.  If not,
-                  dnl * the loop keeps going to the next word
-                  AC_LANG_PUSH(C)
-                  AC_TRY_LINK(
-dnl                     ifelse(AC_LANG, [C++],
-
-dnl [#ifdef __cplusplus
-dnl extern "C"
-dnl #endif
-dnl ])dnl
-[#include "mpi.h"
-], [int rank, size;
-   int argc;
-   char **argv;
-   MPI_Init(&argc, &argv);
-   MPI_Comm_size(MPI_COMM_WORLD, &size);
-   MPI_Comm_rank(MPI_COMM_WORLD, &rank);
-   MPI_Finalize();
-],
-                     casc_result=yes)
-                  AC_LANG_POP(C)
-                  LIBS=$LIBS_SAVE
-
-                  if test "$casc_result" = yes; then
-                     casc_result=
-                     break
-                  fi
-               fi
-            done
-
-            dnl * After loop is done, set variables to be substituted
-            MPILIBS=$casc_mplibs
-            MPILIBDIRS=$casc_mplibdirs
-            MPIFLAGS="$MPIFLAGS $casc_mpflags"
-
-            dnl * IBM MPI uses /usr/lpp/ppe.poe/libc.a instead of /lib/libc.a
-            dnl * so we need to make sure that -L/lib is not part of the 
-            dnl * linking line when we use IBM MPI.  This only appears in
-            dnl * configure when CASC_FIND_MPI is called first.
-	    dnl            ifdef([AC_PROVIDE_CASC_FIND_F77LIBS], 
-            dnl               if test -n "`echo $F77LIBFLAGS | grep '\-L/lib '`"; then
-            dnl                  if test -n "`echo $F77LIBFLAGS | grep xlf`"; then
-            dnl                     F77LIBFLAGS=`echo $F77LIBFLAGS | sed 's/-L\/lib //g'`
-            dnl                  fi
-            dnl               fi
-            dnl            )
-
-            if test -n "`echo $MPILIBS | grep pmpich`" &&
-               test -z "`echo $MPILIBS | grep pthread`"; then
-                  LIBS_SAVE=$LIBS
-                  LIBS="$MPIINCLUDE $MPIFLAGS $MPILIBDIRS $MPILIBS -lpthread"
-                  AC_LANG_PUSH(C)
-                  AC_TRY_LINK(
-dnl                     ifelse(AC_LANG, [C++],
-
-dnl [#ifdef __cplusplus
-dnl extern "C"
-dnl #endif
-dnl ])dnl
-[#include "mpi.h"
-], [int rank, size;
-   int argc;
-   char **argv;
-   MPI_Init(&argc, &argv);
-   MPI_Comm_size(MPI_COMM_WORLD, &size);
-   MPI_Comm_rank(MPI_COMM_WORLD, &rank);
-   MPI_Finalize();
-],
-                     MPILIBS="$MPILIBS -lpthread")
-                  AC_LANG_POP(C)
-                  LIBS=$LIBS_SAVE
-            fi
-
-            AC_MSG_CHECKING(for MPI include directories)
-            AC_MSG_RESULT($MPIINCLUDE)
-            AC_MSG_CHECKING(for MPI library directories)
-            AC_MSG_RESULT($MPILIBDIRS)
-            AC_MSG_CHECKING(for MPI libraries)
-            AC_MSG_RESULT($MPILIBS)
-            AC_MSG_CHECKING(for other MPI-related flags)
-            AC_MSG_RESULT($MPIFLAGS)
-         fi
-      fi
-
-      AC_CACHE_VAL(casc_cv_mpi_include, casc_cv_mpi_include=$MPIINCLUDE)
-      AC_CACHE_VAL(casc_cv_mpi_lib_dirs, casc_cv_mpi_lib_dirs=$MPILIBDIRS)
-      AC_CACHE_VAL(casc_cv_mpi_libs, casc_cv_mpi_libs=$MPILIBS)
-      AC_CACHE_VAL(casc_cv_mpi_flags, casc_cv_mpi_flags=$MPIFLAGS)
-   fi
-
-   AC_SUBST(MPIINCLUDE)
-   AC_SUBST(MPILIBDIRS)
-   AC_SUBST(MPILIBS)
-   AC_SUBST(MPIFLAGS)
-
-])dnl
-
-dnl ********************************************************************
-dnl * CASC_FIND_MPI_ALPHA is a special case of CASC_FIND_MPI for the
-dnl * compass cluster.  The original CASC_FIND_MPI looks for existence 
-dnl * of mpCC and mpiCC.  If the former is found it uses native (proprietary) 
-dnl * mpi and if the latter is found, it uses mpich.  The DECs are a 
-dnl * special case because mpCC does not exist and mpiCC does, but we want
-dnl * to use the native version by default.  Therefore, the original macro 
-dnl * did not work for this case so I added this one to deal with it.
-dnl * AMW 9/00
-dnl ********************************************************************
-
-AC_DEFUN([CASC_FIND_MPI_ALPHA],
-[
-
-   casc_find_mpi_cache_used=yes
-
-   AC_CACHE_VAL(casc_cv_mpi_include, casc_find_mpi_cache_used=no)
-   AC_CACHE_VAL(casc_cv_mpi_libs, casc_find_mpi_cache_used=no)
-   AC_CACHE_VAL(casc_cv_mpi_lib_dirs, casc_find_mpi_cache_used=no)
-   AC_CACHE_VAL(casc_cv_mpi_flags, casc_find_mpi_cache_used=no)
-
-   if test "$casc_find_mpi_cache_used" = "yes"; then
-      AC_MSG_CHECKING(for location of mpi.h)
-      MPIINCLUDE=$casc_cv_mpi_include
-      AC_MSG_RESULT("\(cached\) $MPIINCLUDE")
-
-      AC_MSG_CHECKING(for MPI library directories)
-      MPILIBDIRS=$casc_cv_mpi_lib_dirs
-      AC_MSG_RESULT("\(cached\) $MPILIBDIRS")
-
-      AC_MSG_CHECKING(for MPI libraries)
-      MPILIBS=$casc_cv_mpi_libs
-      AC_MSG_RESULT("\(cached\) $MPILIBS")
-
-      AC_MSG_CHECKING(for other MPI-related flags)
-      MPIFLAGS=$casc_cv_mpi_flags
-      AC_MSG_RESULT("\(cached\) $MPIFLAGS")
-   else
-   
-
-      dnl * Set up user options.  If user uses any of the fist three options,
-      dnl * then automatic tests are not run.
-
-      casc_user_chose_mpi=no
-      AC_ARG_WITH(mpi-include, [  --with-mpi-include=DIR  mpi.h is in DIR],
-                  for mpi_dir in $withval; do
-                     MPIINCLUDE="$MPIINCLUDE -I$withval"
-                  done; casc_user_chose_mpi=yes)
-
-      AC_ARG_WITH(mpi-libs,
-[  --with-mpi-libs=LIBS    LIBS is space-separated list of library names 
-                          needed for MPI, e.g. \"nsl socket mpi\"],  
-                  for mpi_lib in $withval; do
-                     MPILIBS="$MPILIBS -l$mpi_lib"
-                  done; casc_user_chose_mpi=yes)
-
-
-      AC_ARG_WITH(mpi-lib-dirs,
-[  --with-mpi-lib-dirs=DIRS
-                          DIRS is space-separated list of directories
-                          containing the libraries specified by
-                          \`--with-mpi-libs', e.g \"/usr/lib /usr/local/mpi/lib\"],
-                  for mpi_lib_dir in $withval; do
-                     MPILIBDIRS="-L$mpi_lib_dir $MPILIBDIRS"
-                  done; casc_user_chose_mpi=yes)
-
-      dnl * --with-mpi-flags only adds to automatic selections, 
-      dnl * does not override
-
-      AC_ARG_WITH(mpi-flags,
-[  --with-mpi-flags=FLAGS  FLAGS is space-separated list of whatever flags other
-                          than -l and -L are needed to link with mpi libraries],
-                          MPIFLAGS=$withval)
-
-
-      if test "$casc_user_chose_mpi" = "no"; then
- 
-         dnl * Set defaults for Compass cluster here.  This is the point where
-         dnl * we call CASC_SET_MPI in CASC_FIND_MPI macro. 
- 
-         casc_mpi_include_dir=
-         casc_mpi_lib_dirs=
-         casc_mpi_libs="mpi rt rpc gs pthread"
-
-         for casc_incl_dir in $casc_mpi_include_dir; do
-            MPIINCLUDE="-I$casc_incl_dir $MPIINCLUDE"
-         done
-         for casc_lib_dir in $casc_mpi_lib_dirs; do
-            MPILIBDIRS="-L$casc_lib_dir $MPILIBDIRS"
-         done
-         for casc_lib in $casc_mpi_libs; do
-            MPILIBS="$MPILIBS -l$casc_lib"
-         done
-      fi
-
-
-      AC_MSG_CHECKING(for MPI include directories)
-      AC_MSG_RESULT($MPIINCLUDE)
-      AC_MSG_CHECKING(for MPI library directories)
-      AC_MSG_RESULT($MPILIBDIRS)
-      AC_MSG_CHECKING(for MPI libraries)
-      AC_MSG_RESULT($MPILIBS)
-      AC_MSG_CHECKING(for other MPI-related flags)
-      AC_MSG_RESULT($MPIFLAGS)
-
-   fi
-
-])dnl
-
-
-
-dnl Define a macro for supporting SILO
-
-AC_DEFUN([CASC_SUPPORT_SILO],[
-
-# Begin CASC_SUPPORT_SILO
-# Defines silo_PREFIX silo_INCLUDES and silo_LIBS if with-silo is specified.
-AC_ARG_WITH(silo,
-[ --with-silo[=PATH]  Use SILO and optionally specify where SILO is installed.],
-, with_silo=no)
-
-case "$with_silo" in
-  no)
-    AC_MSG_NOTICE([configuring without SILO support])
-    : Do nothing
-  ;;
-  yes)
-    # SILO install path was not specified.
-    # Look in a couple of standard locations to probe if 
-    # SILO header files are there.
-    AC_MSG_CHECKING([for SILO installation])
-    for dir in /usr /usr/local; do
-      if test -f ${dir}/include/silo.h; then
-        silo_PREFIX=${dir}
-        break
-      fi
-    done
-    AC_MSG_RESULT([$silo_PREFIX])
-  ;;
-  *)
-    # SILO install path was specified.
-    AC_MSG_CHECKING([for SILO installation])
-    silo_PREFIX=$with_silo
-    silo_INCLUDES="-I${silo_PREFIX}/include"
-    if test -f ${silo_PREFIX}/include/silo.h; then
-        AC_MSG_RESULT([$silo_PREFIX])
-    else
-        AC_MSG_RESULT([$silo_PREFIX])
-        AC_MSG_ERROR([SILO not found in $with_silo])
-    fi
-  ;;
-esac
-
-# Determine which SILO library is built
-if test "${silo_PREFIX+set}" = set; then
-   AC_MSG_CHECKING([for SILO library])
-   if test -f ${silo_PREFIX}/lib/libsilo.a; then
-      silo_LIBS='-lsilo'
-      AC_MSG_RESULT([using $silo_LIBS])
-   elif test -f ${silo_PREFIX}/lib/libsiloh5.a; then
-      silo_LIBS='-lsiloh5'
-      AC_MSG_RESULT([using $silo_LIBS])
-   else
-      AC_MSG_RESULT([using $silo_LIBS])
-      AC_MSG_ERROR([Could not fine silo library in $silo_PREFIX])
-   fi
-
-   silo_LIBS="-L${silo_PREFIX}/lib ${silo_LIBS}"
-fi
-
-# END CASC_SUPPORT_SILO
-
-])dnl End definition of CASC_SUPPORT_SILO
-
-dnl Define a macro for supporting generalized serial-parallel run.
-
-
-AC_DEFUN([SAMRAI_SERPA],[
-dnl Support a generalized way to run a program in serial or parallel mode.
-dnl (serpa is serial + parallel).
-dnl
-dnl Arg1: name (may include relative path) to give to shell script created.
-dnl   If omitted, the name will be serpa-run, in the top level directory.
-dnl
-dnl This macro brings out an automake bug.  See "IMPORTANT NOTE:" below
-dnl for comments and how to circumvent.
-
-# Begin macro $0
-
-
-# The generalized script needs to know about the system
-# so it can form the appropriate parallel run command line.
-AC_REQUIRE([AC_CANONICAL_TARGET])
-
-
-dnl The parallel run program (usually mpirun) is hardwired for now,
-dnl but it should be more flexible.
-dnl I plan to eventualy use the following variable,
-dnl but it is not currently used.
-AC_ARG_WITH(parallel-run-bin,[
-  --with-parallel-run-bin=STRING
-		Specify the parallel run binary (i.e., mpirun, dmpirun,
-		poe, etc) to be used in the serial-parallel run script.
-],[
-case "$with_parallel_run_bin" in
-  no)
-    # Set PARALLEL_RUN_BIN to blank to remove it from the serpa-run script.
-    PARALLEL_RUN_BIN=;;
-  yes)
-    # Unset the variable PARALLEL_RUN_BIN so it is guessed in the next step.
-    unset PARALLEL_RUN_BIN;
-    ;;
-  *)
-    # Set PARALLEL_RUN_BIN to user specification.
-    PARALLEL_RUN_BIN="$with_parallel_run_bin"
-    ;;
-esac
-BTNG_AC_LOG_VAR(with_parallel_run_bin PARALLEL_RUN_BIN target_os, with-parallel-run-bin given)
-
-],[
-unset PARALLEL_RUN_BIN;
-BTNG_AC_LOG_VAR(with_parallel_run_bin PARALLEL_RUN_BIN target_os, with-parallel-run-bin NOT given)
-])
-# If PARALLEL_RUN_BIN is unset, guess it.
-if test ! "${PARALLEL_RUN_BIN+set}" = set; then
-  case "$target_os" in
-    osf*) PARALLEL_RUN_BIN=dmpirun
-    ;;
-    *) PARALLEL_RUN_BIN=mpirun
-    ;;
-  esac
-  BTNG_AC_LOG_VAR(with_parallel_run_bin PARALLEL_RUN_BIN target_os, after setting PARALLEL_RUN_BIN)
-fi
-AC_SUBST(PARALLEL_RUN_BIN)
-
-
-define(btng_serpa_run_fn,ifelse($1,,serpa-run,$1))
-dnl Create serpa-run.in file (at autoconf time, before configure time)
-dnl File serpa-run.in will be used at configure time to create serpa-run
-dnl in the compile tree.
-syscmd([ file_name=']btng_serpa_run_fn[' cat <<'__EOM__'> ${file_name}.in
-#!/bin/sh
-
-# This script runs an executable program serially or in parallel.
-
-# The syntax for running programs in parallel differs from platform to platform,
-# software to software.  This script automatically uses the correct syntax for
-# the environments that it knows about.  For the environments it does not know,
-# it has a default that may work.
-
-# This script defines the set of tests to put the program through.
-# This set is parametrized by these variables:
-# nproc_list: space- or comma-separated list of number of processors to use.
-
-
-# The name and directory of this script
-# (Do not rely on existence of dirname and basename programs.)
-script_name=`echo ${0} | sed -e 's:.*/::'`;
-dir_name=`echo ${0} | sed -e 's:^\([^/]*\)$:./\1:' -e 's:/[^/]*$::'`;
-
-# Define a way to gracefully die from within this script.
-# The die function is similar to Perl's.
-# Arguments are: <exit_value> <exit_message>
-die () {
-    echo "ERROR_MESSAGE_FROM ${script_name}:"
-    if [ -n "${2}" ]; then echo "Error ${2}"; fi
-    if [ -n "${1}" ]; then exit ${1}; fi
-    exit 99
-}
-
-
-# When no argument is given, print the help message and exit.
-if [ "${1}" = '-h' ] || [ "${1}" = '--help' ] || [ ${#} -lt 2 ] ; then
-  cat <<-_EOF_
-	Usage: ${script_name} <list of nproc> <program name>
-
-	This is a generalized script to run a program in serial
-	and/or parallel.
-
-	The number of processors are given by <list of nproc>,
-	which must be a comma- or space-delimited list of integers.
-	Example: "${script_name} 1,2,5 parallel_program" runs
-	parallel_program 3 times with 1, 2 and 5 processors in turn.
-
-	The special case of number of processors = 0 means to run serially.
-	This differs from one processor in that one processor means to run
-	in parallel, but with one processor.
-
-	This script exits with an error if any instance of
-	running the program fails.
-
-	If SERPA_REDIRECT_OUTPUT_TO is defined in the environment,
-	standard output of the program is redirected there.
-	If SERPA_REDIRECT_ERRORS_TO is defined in the environment,
-	error output of the program is redirected there.
-	Outputs directly from THIS script are NOT affected
-	by these environment variables.
-
-	If SERPA_MAX_FAILS is defined, ${script_name} will
-	continue until that many failures before exiting.
-	The default is 1 failure (${script_name} exits on the
-	first failure).  The exit value will always be the
-	failure count.
-
-	When a serial run os made, if SERPA_PERFORMANCE_FILE
-	is defined and is the name of a file, that file is searched
-	for performance data.  The run is timed and the result
-	is compared to the performance data found.
-	_EOF_
-exit
-fi
-
-# How to invoke a GNU compatible time command
-if [ -z "${SERPA_GNUTIME}" ]; then
-    SERPA_GNUTIME=/usr/bin/time
-fi
-
-# Percent difference for performance comparisons
-if [ -z "${SERPA_DIFFERENCE}" ]; then
-    SERPA_DIFFERENCE=0.1
-fi
-
-
-# Check the redirection environment variables.
-# See the help message for how these are used.
-if [ -n "${SERPA_REDIRECT_OUTPUT_TO}" ]; then
-  output_redirection_string="1> ${SERPA_REDIRECT_OUTPUT_TO}"
-else
-  unset output_redirection_string
-fi
-if [ -n "${SERPA_REDIRECT_ERRORS_TO}" ]; then
-  errors_redirection_string="2> ${SERPA_REDIRECT_ERRORS_TO}"
-else
-  unset errors_redirection_string
-fi
-
-# Save the arguments for later reference.
-serpa_args="${@}"
-
-
-# Get the number of processors from the first argument of this script.
-nproc_list=${1}; shift;
-# We allow comma-delimited lists, so we now remove those commas.
-echo ${nproc_list} | grep '^[0-9 ,]\{1,\}$' > /dev/null	\
-  || die 1 "Invalid number of processors list '${nproc_list}'"
-nproc_list=`echo ${nproc_list} | sed 's/,/ /g'`
-
-# Get the program name from the next argument of this script.
-program=${1}; shift;
-test -x ${program} || die 1 "No execute permission on '${program}'"
-
-
-# Determine host name for use below.
-if [ ${?}{HOST} ]; then
-  HOST=`uname -n`
-  export HOST
-fi
-
-
-# Use additional_env to specify additional environments that
-# should be set before running.  Although you can, do not use
-# this to set environments for programs.  It is meant to be
-# environments for the parallel execution program such as
-# mpirun.
-additional_env=
-
-
-# Variables required for using parallelrun.  These may not be needed,
-# but if they are needed and unset, there will be an error.
-# Some of these strings are determined at configure time.
-parallelrun_prog="@PARALLEL_RUN_BIN@";	# Name of parallelrun program.
-
-
-# Determine what platform we are on.
-target_cpu=@target_cpu@
-target_os=@target_os@
-target_vendor=@target_vendor@
-
-
-# Determine the machine file name.
-serpa_machine_file='serpa.machines'
-
-
-# Define a function to run a program in parallel.
-# We have to do this because different environments require different syntaxes.
-# The function arguments are:
-#   program name
-#   number of processor
-#
-# We define the function in a big if-else statement based on the
-# target computer.  We assume that there is a one-to-one correspondence.
-# If there is not, there may have to be a nested if-structure.
-#
-if echo "${HOST}" | egrep '^(blue|frost)[0-9]' > /dev/null ; then
-
-  # For blue, a specific singleton platform.
-  run_multiproc () {
-    MP_RESD="YES"
-    MP_HOSTFILE=""
-    MP_EUILIB=us
-    MP_EUIDEVICE=css0
-    export MP_RESD MP_HOSTFILE MP_EUILIB MP_EUIDEVICE
-  # IBM shell functions eat their parameters after the first assignment
-  # from them so save the parameters first.
-    case "${HOST}" in
-      blue*) proc_per_node=4;;
-      frost*) proc_per_node=16;;
-    esac
-    program=${1}; nproc=${2}; shift 2
-    nodes=`expr 1 + \( ${nproc} - 1 \) / ${proc_per_node}`
-    com="${additional_env} ${parallelrun_prog} ${program}"
-    com="${com} -rmpool 0 -nodes ${nodes} -procs ${nproc} ${@}"
-    # com="${program} ${@} -procs ${nproc}"
-    echo ${com}
-    eval ${com} ${output_redirection_string} ${errors_redirection_string}
-    return ${?}
-  }
-
-elif echo "${HOST}" | grep '^tc2k' > /dev/null ; then
-
-  # For tc2k, a specific singleton platform (contributed by Brian Miller).
-  run_multiproc () {
-    program=${1}; nproc=${2}; shift 2
-    com="${additional_env} prun -n ${nproc} ${program} ${@}"
-    com="${program} ${@} -p ${nproc}"
-    echo ${com}
-    eval ${com} ${output_redirection_string} ${errors_redirection_string}
-    return ${?}
-  }
-
-elif echo "${HOST}" | egrep '^(mcr|pengra|thunder)[0-9]' > /dev/null ; then
-
-  # For LC Linux clusters using srun.
-  run_multiproc () {
-    program=${1}; nproc=${2}; shift 2
-    com="${additional_env} srun -n${nproc} -p pdebug ${program} ${@}"
-    echo ${com}
-    eval ${com} ${output_redirection_string} ${errors_redirection_string}
-    return ${?}
-  }
-
-elif echo "${target_os}" | grep '^osf'	> /dev/null ; then
-
-  # For Dec OSF.
-  run_multiproc () {
-    program=${1}; nproc=${2}; shift 2
-    com="${additional_env} dmpirun -np ${nproc} ${program} ${@}"
-    echo ${com}
-    eval ${com} ${output_redirection_string} ${errors_redirection_string}
-    return ${?}
-  }
-
-elif echo "${target_os}" | grep '^solaris' > /dev/null	\
-  || echo "${target_os}" | grep '^irix' > /dev/null	\
-  || echo "${target_os}" | grep '^linux' > /dev/null	\
-  ; then
-
-  # Most platforms fall into this case.
-  run_multiproc () {
-    program=${1}; nproc=${2}; shift 2
-    com="${additional_env} ${parallelrun_prog}"
-    com="${com} -machinefile ${dir_name}/${serpa_machine_file} -np ${nproc} ${program} ${@}"
-    echo ${com}
-    eval ${com} ${output_redirection_string} ${errors_redirection_string}
-    return ${?}
-  }
-
-else
-
-  # Simplest case.
-  # This is generic.  It may not work, but it is our best guess
-  # without knowledge of the system.
-  run_multiproc () {
-    program=${1}; nproc=${2}; shift 2
-    com="${additional_env} ${program} -np ${nproc} ${@}"
-    echo ${com}
-    eval ${com} ${output_redirection_string} ${errors_redirection_string}
-    return ${?}
-  }
-
-fi
-
-
-# Initialize the failure count.
-serpa_num_failures=0
-test -z "${SERPA_MAX_FAILS}" && SERPA_MAX_FAILS=1
-
-# Run the program.
-for nproc in ${nproc_list}; do
-  cat <<-_EOM_
-	${script_name}================================================
-	RUNNING: ${script_name} ${nproc} ${program} ${@}
-	${script_name}::::::::::::::::::::::::::::::::::::::::::::::::
-	_EOM_
-  if test "${nproc}" = 0 ; then
-    # Run serially.
-
-    # If performance file exists then with performance testing
-    # otherwise do a normal sequential run
-    if test "${SERPA_PERFORMANCE_FILE+set}" = set &&
-       test -f "${SERPA_PERFORMANCE_FILE}"; then
-
-	# Run with performance check. 
-	com="${additional_env} ${program} ${@}"
-	echo "${com}"
-	${SERPA_GNUTIME} -o $$.time -f "%e %t" ${com} \
-	    ${output_redirection_string} ${errors_redirection_string}
-	exit_value=${?}
-
-	# Parse temporary file to get recorded time/memory usage
-	read etime memory < $$.time
-	rm $$.time
-	
-	# Report the run time/memory usage 
-	echo "serpa-perf ${nproc} <${com}> ${etime} ${memory}"
-
-	# Check if time is out of bounds
-	search=`grep "serpa-perf ${nproc} <${com}>" ${SERPA_PERFORMANCE_FILE}`
-	if test "$?" = "0";then
-	    search=`echo $search | sed 's/.*>//'`
-	    read compare_time compare_memory <<EOF	    
-$search
-EOF
-        else
-	    compare_time=999999
-	    compare_memory=0
-	fi
-
-	difference=`bc -l <<EOF
-a=${etime}
-b=${compare_time}
-t=${SERPA_DIFFERENCE}
-d=a-b
-if ( d < 0 ) {
-	d = -d
-}
-p=d/b
-print (p < t), "\n"
-EOF`
-	if test "${difference}" = "1"; then
-	    echo "PERFORMANCE PASSED: target ${compare_time} (seconds) current ${etime} sec"
-	else
-	    echo "PERFORMANCE FAIL: target ${compare_time} (seconds) current ${etime}"
-	fi
-
-	# Currently don't do memory check since it is not reporting anything.
-
-    else
-	# Run without performance testing
-	com="${additional_env} ${program} ${@}"
-	echo "${com}"
-	eval ${com} ${output_redirection_string} ${errors_redirection_string}
-	exit_value=${?}
-    fi
-  else
-    # Because parallel runs sometimes fails due to problems unrelated
-    # to the program, we give it several tries before declaring failure.
-    if test -z "${SERPA_PARALLEL_TRIES}"; then SERPA_PARALLEL_TRIES=1; fi
-    c=1
-    while test ${c} -le ${SERPA_PARALLEL_TRIES} ; do
-      if test ${c} -gt 1 ; then
-        echo "possibly failed.  TRY number ${c}"
-      fi
-      run_multiproc ${program} ${nproc} "${@}"
-      exit_value=${?}
-      if [ ${exit_value} = 0 ]; then
-        break
-      fi
-      c=`expr ${c} + 1`
-    done
-  fi
-  # Report pass or fail.
-  # pf_string=FAILED; test "${exit_value}" = 0 && pf_string=PASSED
-  pf_string=FAILED; test "${exit_value}" = 0 && pf_string=COMPLETED
-  cat <<-_EOM_
-	${script_name}::::::::::::::::::::::::::::::::::::::::::::::::
-	${pf_string}: ${script_name} ${nproc} ${program} ${@}
-	${script_name}================================================
-	_EOM_
-  # Count failures and possibly exit.
-  if test ${exit_value} -ne 0 ; then
-    serpa_num_failures=`expr ${serpa_num_failures} + 1`;
-    if test ${serpa_num_failures} -eq ${SERPA_MAX_FAILS}; then
-      die 1 "FAIL running ${program} with ${nproc} processors"
-    fi
-  fi
-done
-
-if test ${serpa_num_failures} -eq 0; then
-  echo "${script_name} ${serpa_args} passed."
-else
-  echo "${script_name} ${serpa_args} had ${serpa_num_failures} failures."
-fi
-exit ${serpa_num_failures}
-
-# End of script.
-__EOM__
-])dnl End of macro to create serpa-run.in
-
-
-dnl Create the configured file from its .in version.
-dnl AC_CONFIG_FILES( btng_serpa_run_fn, chmod +x btng_serpa_run_fn )
-dnl IMPORTANT NOTE:
-dnl Using the defined symbol btng_serpa_run_fn in AC_CONFIG_FILES
-dnl causes automake to complain that btng_serpa_run_fn.in is not found.
-dnl Since that symbol is a defined m4 macro, this is an automake deficiency.
-dnl Until this is fixed, the above AC_CONFIG_FILES usage will not
-dnl work!  You must call AC_CONFIG_FILES with the actual names of
-dnl the file instead of the m4-defined symbol btng_serpa_run_fn.
-
-
-
-AC_CONFIG_COMMANDS([create-serpa-machine-file],[
-# Generate a machine file if needed.
-if test ! -r "$serpa_machine_file" ; then
-  # Set the serpa machine file name to be in the same directory as
-  # the serpa-run script.
-  btng_serpa_dir_name=`echo ']btng_serpa_run_fn[' | sed -e ['s:^\([^/]*\)$:./\1:'] -e ['s:/[^/]*$::']`;
-  btng_serpa_machine_file="${btng_serpa_dir_name}/serpa.machines"
-  hostname="`hostname`"
-  cat <<-__EOF__>"$btng_serpa_machine_file"
-	$hostname
-	$hostname
-	$hostname
-	$hostname
-	__EOF__
-fi
-],[
-dnl Settings to make before running the above.
-])
-
-
-# Add the serpa machine file to the clean list.
-btng_serpa_dir_name=`echo ']btng_serpa_run_fn[' | sed -e ['s:^\([^/]*\)$:./\1:'] -e ['s:/[^/]*$::']`;
-btng_serpa_machine_file="${btng_serpa_dir_name}/serpa.machines"
-DISTCLEANFILES="$DISTCLEANFILES ${btng_serpa_machine_file}"
-BTNG_AC_LOG_VAR(btng_serpa_machine_file DISTCLEANFILES, in support-serpa-run)
-
-
-undefine([btng_serpa_run_fn])
-
-
-# End macro $0
-])dnl End BTNG_SUPPORT_SERPA macro.
-
-AC_DEFUN([SAMRAI_SPLIT_LIBS_STRING],[
-dnl
-dnl Macro SAMRAI_SPLIT_LIBS_STRING
-dnl Written by Brian Gunney.
-dnl
-dnl This macro takes an automake-style LIBS string (arg1) and
-dnl splits it into the -L part (arg2, what SAMRAI usually calls
-dnl LIB_PATH) and -l part (arg3, what SAMRAI calls LIB_NAME).
-dnl The rest are also lumped into the LIB_NAME part, for lack
-dnl of generality in the SAMRAI distinction.
-dnl
-dnl I think the SAMRAI format is limitting because not all parts
-dnl if the LIBS strings can be recategorized into LIB_PATH and
-dnl LIB_NAME parts.  But this macro allows us to use macros that
-dnl conform to the standard automake format.  BTNG.
-dnl
-# Split $1 into the LIB_PATH part ($2) and the LIB_NAME part ($3)
-if test -n "${$1}"; then
-  for i in ${$1}; do
-    case "$i" in
-    -L*) $2="${$2} $i" ;;
-    *) $3="${$3} $i" ;;
-    esac
-  done
-fi
-])
-
diff --git a/config/config.guess b/config/config.guess
index 6bdac8d..1972fda 100755
--- a/config/config.guess
+++ b/config/config.guess
@@ -1,13 +1,12 @@
 #! /bin/sh
 # Attempt to guess a canonical system name.
-#   Copyright (C) 1992, 1993, 1994, 1995, 1996, 1997, 1998, 1999,
-#   2000, 2001, 2002, 2003 Free Software Foundation, Inc.
+#   Copyright 1992-2021 Free Software Foundation, Inc.
 
-timestamp='2003-05-09'
+timestamp='2021-01-25'
 
 # This file is free software; you can redistribute it and/or modify it
 # under the terms of the GNU General Public License as published by
-# the Free Software Foundation; either version 2 of the License, or
+# the Free Software Foundation; either version 3 of the License, or
 # (at your option) any later version.
 #
 # This program is distributed in the hope that it will be useful, but
@@ -16,33 +15,31 @@ timestamp='2003-05-09'
 # General Public License for more details.
 #
 # You should have received a copy of the GNU General Public License
-# along with this program; if not, write to the Free Software
-# Foundation, Inc., 59 Temple Place - Suite 330, Boston, MA 02111-1307, USA.
+# along with this program; if not, see <https://www.gnu.org/licenses/>.
 #
 # As a special exception to the GNU General Public License, if you
 # distribute this file as part of a program that contains a
 # configuration script generated by Autoconf, you may include it under
-# the same distribution terms that you use for the rest of that program.
-
-# Originally written by Per Bothner <per@bothner.com>.
-# Please send patches to <config-patches@gnu.org>.  Submit a context
-# diff and a properly formatted ChangeLog entry.
+# the same distribution terms that you use for the rest of that
+# program.  This Exception is an additional permission under section 7
+# of the GNU General Public License, version 3 ("GPLv3").
+#
+# Originally written by Per Bothner; maintained since 2000 by Ben Elliston.
 #
-# This script attempts to guess a canonical system name similar to
-# config.sub.  If it succeeds, it prints the system name on stdout, and
-# exits with 0.  Otherwise, it exits with 1.
+# You can get the latest version of this script from:
+# https://git.savannah.gnu.org/cgit/config.git/plain/config.guess
 #
-# The plan is that this can be called by configure scripts if you
-# don't specify an explicit build system type.
+# Please send patches to <config-patches@gnu.org>.
+
 
-me=`echo "$0" | sed -e 's,.*/,,'`
+me=$(echo "$0" | sed -e 's,.*/,,')
 
 usage="\
 Usage: $0 [OPTION]
 
 Output the configuration name of the system \`$me' is run on.
 
-Operation modes:
+Options:
   -h, --help         print this help, then exit
   -t, --time-stamp   print date of last modification, then exit
   -v, --version      print version number, then exit
@@ -53,8 +50,7 @@ version="\
 GNU config.guess ($timestamp)
 
 Originally written by Per Bothner.
-Copyright (C) 1992, 1993, 1994, 1995, 1996, 1997, 1998, 1999, 2000, 2001
-Free Software Foundation, Inc.
+Copyright 1992-2021 Free Software Foundation, Inc.
 
 This is free software; see the source for copying conditions.  There is NO
 warranty; not even for MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE."
@@ -66,11 +62,11 @@ Try \`$me --help' for more information."
 while test $# -gt 0 ; do
   case $1 in
     --time-stamp | --time* | -t )
-       echo "$timestamp" ; exit 0 ;;
+       echo "$timestamp" ; exit ;;
     --version | -v )
-       echo "$version" ; exit 0 ;;
+       echo "$version" ; exit ;;
     --help | --h* | -h )
-       echo "$usage"; exit 0 ;;
+       echo "$usage"; exit ;;
     -- )     # Stop option processing
        shift; break ;;
     - )	# Use stdin as input.
@@ -88,8 +84,6 @@ if test $# != 0; then
   exit 1
 fi
 
-trap 'exit 1' 1 2 15
-
 # CC_FOR_BUILD -- compiler used by this script. Note that the use of a
 # compiler to aid in system detection is discouraged as it requires
 # temporary files to be created and, as you can see below, it is a
@@ -100,47 +94,92 @@ trap 'exit 1' 1 2 15
 
 # Portable tmp directory creation inspired by the Autoconf team.
 
-set_cc_for_build='
-trap "exitcode=\$?; (rm -f \$tmpfiles 2>/dev/null; rmdir \$tmp 2>/dev/null) && exit \$exitcode" 0 ;
-trap "rm -f \$tmpfiles 2>/dev/null; rmdir \$tmp 2>/dev/null; exit 1" 1 2 13 15 ;
-: ${TMPDIR=/tmp} ;
- { tmp=`(umask 077 && mktemp -d -q "$TMPDIR/cgXXXXXX") 2>/dev/null` && test -n "$tmp" && test -d "$tmp" ; } ||
- { test -n "$RANDOM" && tmp=$TMPDIR/cg$$-$RANDOM && (umask 077 && mkdir $tmp) ; } ||
- { echo "$me: cannot create a temporary directory in $TMPDIR" >&2 ; exit 1 ; } ;
-dummy=$tmp/dummy ;
-tmpfiles="$dummy.c $dummy.o $dummy.rel $dummy" ;
-case $CC_FOR_BUILD,$HOST_CC,$CC in
- ,,)    echo "int x;" > $dummy.c ;
-	for c in cc gcc c89 c99 ; do
-	  if ($c -c -o $dummy.o $dummy.c) >/dev/null 2>&1 ; then
-	     CC_FOR_BUILD="$c"; break ;
-	  fi ;
-	done ;
-	if test x"$CC_FOR_BUILD" = x ; then
-	  CC_FOR_BUILD=no_compiler_found ;
-	fi
-	;;
- ,,*)   CC_FOR_BUILD=$CC ;;
- ,*,*)  CC_FOR_BUILD=$HOST_CC ;;
-esac ;'
+tmp=
+# shellcheck disable=SC2172
+trap 'test -z "$tmp" || rm -fr "$tmp"' 0 1 2 13 15
+
+set_cc_for_build() {
+    # prevent multiple calls if $tmp is already set
+    test "$tmp" && return 0
+    : "${TMPDIR=/tmp}"
+    # shellcheck disable=SC2039
+    { tmp=$( (umask 077 && mktemp -d "$TMPDIR/cgXXXXXX") 2>/dev/null) && test -n "$tmp" && test -d "$tmp" ; } ||
+	{ test -n "$RANDOM" && tmp=$TMPDIR/cg$$-$RANDOM && (umask 077 && mkdir "$tmp" 2>/dev/null) ; } ||
+	{ tmp=$TMPDIR/cg-$$ && (umask 077 && mkdir "$tmp" 2>/dev/null) && echo "Warning: creating insecure temp directory" >&2 ; } ||
+	{ echo "$me: cannot create a temporary directory in $TMPDIR" >&2 ; exit 1 ; }
+    dummy=$tmp/dummy
+    case ${CC_FOR_BUILD-},${HOST_CC-},${CC-} in
+	,,)    echo "int x;" > "$dummy.c"
+	       for driver in cc gcc c89 c99 ; do
+		   if ($driver -c -o "$dummy.o" "$dummy.c") >/dev/null 2>&1 ; then
+		       CC_FOR_BUILD="$driver"
+		       break
+		   fi
+	       done
+	       if test x"$CC_FOR_BUILD" = x ; then
+		   CC_FOR_BUILD=no_compiler_found
+	       fi
+	       ;;
+	,,*)   CC_FOR_BUILD=$CC ;;
+	,*,*)  CC_FOR_BUILD=$HOST_CC ;;
+    esac
+}
 
 # This is needed to find uname on a Pyramid OSx when run in the BSD universe.
 # (ghazi@noc.rutgers.edu 1994-08-24)
-if (test -f /.attbin/uname) >/dev/null 2>&1 ; then
+if test -f /.attbin/uname ; then
 	PATH=$PATH:/.attbin ; export PATH
 fi
 
-UNAME_MACHINE=`(uname -m) 2>/dev/null` || UNAME_MACHINE=unknown
-UNAME_RELEASE=`(uname -r) 2>/dev/null` || UNAME_RELEASE=unknown
-UNAME_SYSTEM=`(uname -s) 2>/dev/null`  || UNAME_SYSTEM=unknown
-UNAME_VERSION=`(uname -v) 2>/dev/null` || UNAME_VERSION=unknown
+UNAME_MACHINE=$( (uname -m) 2>/dev/null) || UNAME_MACHINE=unknown
+UNAME_RELEASE=$( (uname -r) 2>/dev/null) || UNAME_RELEASE=unknown
+UNAME_SYSTEM=$( (uname -s) 2>/dev/null) || UNAME_SYSTEM=unknown
+UNAME_VERSION=$( (uname -v) 2>/dev/null) || UNAME_VERSION=unknown
+
+case "$UNAME_SYSTEM" in
+Linux|GNU|GNU/*)
+	LIBC=unknown
+
+	set_cc_for_build
+	cat <<-EOF > "$dummy.c"
+	#include <features.h>
+	#if defined(__UCLIBC__)
+	LIBC=uclibc
+	#elif defined(__dietlibc__)
+	LIBC=dietlibc
+	#elif defined(__GLIBC__)
+	LIBC=gnu
+	#else
+	#include <stdarg.h>
+	/* First heuristic to detect musl libc.  */
+	#ifdef __DEFINED_va_list
+	LIBC=musl
+	#endif
+	#endif
+	EOF
+	eval "$($CC_FOR_BUILD -E "$dummy.c" 2>/dev/null | grep '^LIBC' | sed 's, ,,g')"
+
+	# Second heuristic to detect musl libc.
+	if [ "$LIBC" = unknown ] &&
+	   command -v ldd >/dev/null &&
+	   ldd --version 2>&1 | grep -q ^musl; then
+		LIBC=musl
+	fi
+
+	# If the system lacks a compiler, then just pick glibc.
+	# We could probably try harder.
+	if [ "$LIBC" = unknown ]; then
+		LIBC=gnu
+	fi
+	;;
+esac
 
 # Note: order is significant - the case branches are not exclusive.
 
-case "${UNAME_MACHINE}:${UNAME_SYSTEM}:${UNAME_RELEASE}:${UNAME_VERSION}" in
+case "$UNAME_MACHINE:$UNAME_SYSTEM:$UNAME_RELEASE:$UNAME_VERSION" in
     *:NetBSD:*:*)
 	# NetBSD (nbsd) targets should (where applicable) match one or
-	# more of the tupples: *-*-netbsdelf*, *-*-netbsdaout*,
+	# more of the tuples: *-*-netbsdelf*, *-*-netbsdaout*,
 	# *-*-netbsdecoff* and *-*-netbsd*.  For targets that recently
 	# switched to ELF, *-*-netbsd* would select the old
 	# object file format.  This provides both forward
@@ -149,23 +188,34 @@ case "${UNAME_MACHINE}:${UNAME_SYSTEM}:${UNAME_RELEASE}:${UNAME_VERSION}" in
 	#
 	# Note: NetBSD doesn't particularly care about the vendor
 	# portion of the name.  We always set it to "unknown".
-	sysctl="sysctl -n hw.machine_arch"
-	UNAME_MACHINE_ARCH=`(/sbin/$sysctl 2>/dev/null || \
-	    /usr/sbin/$sysctl 2>/dev/null || echo unknown)`
-	case "${UNAME_MACHINE_ARCH}" in
+	UNAME_MACHINE_ARCH=$( (uname -p 2>/dev/null || \
+	    /sbin/sysctl -n hw.machine_arch 2>/dev/null || \
+	    /usr/sbin/sysctl -n hw.machine_arch 2>/dev/null || \
+	    echo unknown))
+	case "$UNAME_MACHINE_ARCH" in
+	    aarch64eb) machine=aarch64_be-unknown ;;
 	    armeb) machine=armeb-unknown ;;
 	    arm*) machine=arm-unknown ;;
 	    sh3el) machine=shl-unknown ;;
 	    sh3eb) machine=sh-unknown ;;
-	    *) machine=${UNAME_MACHINE_ARCH}-unknown ;;
+	    sh5el) machine=sh5le-unknown ;;
+	    earmv*)
+		arch=$(echo "$UNAME_MACHINE_ARCH" | sed -e 's,^e\(armv[0-9]\).*$,\1,')
+		endian=$(echo "$UNAME_MACHINE_ARCH" | sed -ne 's,^.*\(eb\)$,\1,p')
+		machine="${arch}${endian}"-unknown
+		;;
+	    *) machine="$UNAME_MACHINE_ARCH"-unknown ;;
 	esac
 	# The Operating System including object format, if it has switched
-	# to ELF recently, or will in the future.
-	case "${UNAME_MACHINE_ARCH}" in
+	# to ELF recently (or will in the future) and ABI.
+	case "$UNAME_MACHINE_ARCH" in
+	    earm*)
+		os=netbsdelf
+		;;
 	    arm*|i386|m68k|ns32k|sh3*|sparc|vax)
-		eval $set_cc_for_build
+		set_cc_for_build
 		if echo __ELF__ | $CC_FOR_BUILD -E - 2>/dev/null \
-			| grep __ELF__ >/dev/null
+			| grep -q __ELF__
 		then
 		    # Once all utilities can be ECOFF (netbsdecoff) or a.out (netbsdaout).
 		    # Return netbsd for either.  FIX?
@@ -175,7 +225,14 @@ case "${UNAME_MACHINE}:${UNAME_SYSTEM}:${UNAME_RELEASE}:${UNAME_VERSION}" in
 		fi
 		;;
 	    *)
-	        os=netbsd
+		os=netbsd
+		;;
+	esac
+	# Determine ABI tags.
+	case "$UNAME_MACHINE_ARCH" in
+	    earm*)
+		expr='s/^earmv[0-9]/-eabi/;s/eb$//'
+		abi=$(echo "$UNAME_MACHINE_ARCH" | sed -e "$expr")
 		;;
 	esac
 	# The OS release
@@ -183,189 +240,223 @@ case "${UNAME_MACHINE}:${UNAME_SYSTEM}:${UNAME_RELEASE}:${UNAME_VERSION}" in
 	# thus, need a distinct triplet. However, they do not need
 	# kernel version information, so it can be replaced with a
 	# suitable tag, in the style of linux-gnu.
-	case "${UNAME_VERSION}" in
+	case "$UNAME_VERSION" in
 	    Debian*)
 		release='-gnu'
 		;;
 	    *)
-		release=`echo ${UNAME_RELEASE}|sed -e 's/[-_].*/\./'`
+		release=$(echo "$UNAME_RELEASE" | sed -e 's/[-_].*//' | cut -d. -f1,2)
 		;;
 	esac
 	# Since CPU_TYPE-MANUFACTURER-KERNEL-OPERATING_SYSTEM:
 	# contains redundant information, the shorter form:
 	# CPU_TYPE-MANUFACTURER-OPERATING_SYSTEM is used.
-	echo "${machine}-${os}${release}"
-	exit 0 ;;
-    amiga:OpenBSD:*:*)
-	echo m68k-unknown-openbsd${UNAME_RELEASE}
-	exit 0 ;;
-    arc:OpenBSD:*:*)
-	echo mipsel-unknown-openbsd${UNAME_RELEASE}
-	exit 0 ;;
-    hp300:OpenBSD:*:*)
-	echo m68k-unknown-openbsd${UNAME_RELEASE}
-	exit 0 ;;
-    mac68k:OpenBSD:*:*)
-	echo m68k-unknown-openbsd${UNAME_RELEASE}
-	exit 0 ;;
-    macppc:OpenBSD:*:*)
-	echo powerpc-unknown-openbsd${UNAME_RELEASE}
-	exit 0 ;;
-    mvme68k:OpenBSD:*:*)
-	echo m68k-unknown-openbsd${UNAME_RELEASE}
-	exit 0 ;;
-    mvme88k:OpenBSD:*:*)
-	echo m88k-unknown-openbsd${UNAME_RELEASE}
-	exit 0 ;;
-    mvmeppc:OpenBSD:*:*)
-	echo powerpc-unknown-openbsd${UNAME_RELEASE}
-	exit 0 ;;
-    pmax:OpenBSD:*:*)
-	echo mipsel-unknown-openbsd${UNAME_RELEASE}
-	exit 0 ;;
-    sgi:OpenBSD:*:*)
-	echo mipseb-unknown-openbsd${UNAME_RELEASE}
-	exit 0 ;;
-    sun3:OpenBSD:*:*)
-	echo m68k-unknown-openbsd${UNAME_RELEASE}
-	exit 0 ;;
-    wgrisc:OpenBSD:*:*)
-	echo mipsel-unknown-openbsd${UNAME_RELEASE}
-	exit 0 ;;
+	echo "$machine-${os}${release}${abi-}"
+	exit ;;
+    *:Bitrig:*:*)
+	UNAME_MACHINE_ARCH=$(arch | sed 's/Bitrig.//')
+	echo "$UNAME_MACHINE_ARCH"-unknown-bitrig"$UNAME_RELEASE"
+	exit ;;
     *:OpenBSD:*:*)
-	echo ${UNAME_MACHINE}-unknown-openbsd${UNAME_RELEASE}
-	exit 0 ;;
+	UNAME_MACHINE_ARCH=$(arch | sed 's/OpenBSD.//')
+	echo "$UNAME_MACHINE_ARCH"-unknown-openbsd"$UNAME_RELEASE"
+	exit ;;
+    *:LibertyBSD:*:*)
+	UNAME_MACHINE_ARCH=$(arch | sed 's/^.*BSD\.//')
+	echo "$UNAME_MACHINE_ARCH"-unknown-libertybsd"$UNAME_RELEASE"
+	exit ;;
+    *:MidnightBSD:*:*)
+	echo "$UNAME_MACHINE"-unknown-midnightbsd"$UNAME_RELEASE"
+	exit ;;
+    *:ekkoBSD:*:*)
+	echo "$UNAME_MACHINE"-unknown-ekkobsd"$UNAME_RELEASE"
+	exit ;;
+    *:SolidBSD:*:*)
+	echo "$UNAME_MACHINE"-unknown-solidbsd"$UNAME_RELEASE"
+	exit ;;
+    *:OS108:*:*)
+	echo "$UNAME_MACHINE"-unknown-os108_"$UNAME_RELEASE"
+	exit ;;
+    macppc:MirBSD:*:*)
+	echo powerpc-unknown-mirbsd"$UNAME_RELEASE"
+	exit ;;
+    *:MirBSD:*:*)
+	echo "$UNAME_MACHINE"-unknown-mirbsd"$UNAME_RELEASE"
+	exit ;;
+    *:Sortix:*:*)
+	echo "$UNAME_MACHINE"-unknown-sortix
+	exit ;;
+    *:Twizzler:*:*)
+	echo "$UNAME_MACHINE"-unknown-twizzler
+	exit ;;
+    *:Redox:*:*)
+	echo "$UNAME_MACHINE"-unknown-redox
+	exit ;;
+    mips:OSF1:*.*)
+	echo mips-dec-osf1
+	exit ;;
     alpha:OSF1:*:*)
-	if test $UNAME_RELEASE = "V4.0"; then
-		UNAME_RELEASE=`/usr/sbin/sizer -v | awk '{print $3}'`
-	fi
+	case $UNAME_RELEASE in
+	*4.0)
+		UNAME_RELEASE=$(/usr/sbin/sizer -v | awk '{print $3}')
+		;;
+	*5.*)
+		UNAME_RELEASE=$(/usr/sbin/sizer -v | awk '{print $4}')
+		;;
+	esac
 	# According to Compaq, /usr/sbin/psrinfo has been available on
 	# OSF/1 and Tru64 systems produced since 1995.  I hope that
 	# covers most systems running today.  This code pipes the CPU
 	# types through head -n 1, so we only detect the type of CPU 0.
-	ALPHA_CPU_TYPE=`/usr/sbin/psrinfo -v | sed -n -e 's/^  The alpha \(.*\) processor.*$/\1/p' | head -n 1`
+	ALPHA_CPU_TYPE=$(/usr/sbin/psrinfo -v | sed -n -e 's/^  The alpha \(.*\) processor.*$/\1/p' | head -n 1)
 	case "$ALPHA_CPU_TYPE" in
 	    "EV4 (21064)")
-		UNAME_MACHINE="alpha" ;;
+		UNAME_MACHINE=alpha ;;
 	    "EV4.5 (21064)")
-		UNAME_MACHINE="alpha" ;;
+		UNAME_MACHINE=alpha ;;
 	    "LCA4 (21066/21068)")
-		UNAME_MACHINE="alpha" ;;
+		UNAME_MACHINE=alpha ;;
 	    "EV5 (21164)")
-		UNAME_MACHINE="alphaev5" ;;
+		UNAME_MACHINE=alphaev5 ;;
 	    "EV5.6 (21164A)")
-		UNAME_MACHINE="alphaev56" ;;
+		UNAME_MACHINE=alphaev56 ;;
 	    "EV5.6 (21164PC)")
-		UNAME_MACHINE="alphapca56" ;;
+		UNAME_MACHINE=alphapca56 ;;
 	    "EV5.7 (21164PC)")
-		UNAME_MACHINE="alphapca57" ;;
+		UNAME_MACHINE=alphapca57 ;;
 	    "EV6 (21264)")
-		UNAME_MACHINE="alphaev6" ;;
+		UNAME_MACHINE=alphaev6 ;;
 	    "EV6.7 (21264A)")
-		UNAME_MACHINE="alphaev67" ;;
+		UNAME_MACHINE=alphaev67 ;;
 	    "EV6.8CB (21264C)")
-		UNAME_MACHINE="alphaev68" ;;
+		UNAME_MACHINE=alphaev68 ;;
 	    "EV6.8AL (21264B)")
-		UNAME_MACHINE="alphaev68" ;;
+		UNAME_MACHINE=alphaev68 ;;
 	    "EV6.8CX (21264D)")
-		UNAME_MACHINE="alphaev68" ;;
+		UNAME_MACHINE=alphaev68 ;;
 	    "EV6.9A (21264/EV69A)")
-		UNAME_MACHINE="alphaev69" ;;
+		UNAME_MACHINE=alphaev69 ;;
 	    "EV7 (21364)")
-		UNAME_MACHINE="alphaev7" ;;
+		UNAME_MACHINE=alphaev7 ;;
 	    "EV7.9 (21364A)")
-		UNAME_MACHINE="alphaev79" ;;
+		UNAME_MACHINE=alphaev79 ;;
 	esac
+	# A Pn.n version is a patched version.
 	# A Vn.n version is a released version.
 	# A Tn.n version is a released field test version.
 	# A Xn.n version is an unreleased experimental baselevel.
 	# 1.2 uses "1.2" for uname -r.
-	echo ${UNAME_MACHINE}-dec-osf`echo ${UNAME_RELEASE} | sed -e 's/^[VTX]//' | tr 'ABCDEFGHIJKLMNOPQRSTUVWXYZ' 'abcdefghijklmnopqrstuvwxyz'`
-	exit 0 ;;
-    Alpha\ *:Windows_NT*:*)
-	# How do we know it's Interix rather than the generic POSIX subsystem?
-	# Should we change UNAME_MACHINE based on the output of uname instead
-	# of the specific Alpha model?
-	echo alpha-pc-interix
-	exit 0 ;;
-    21064:Windows_NT:50:3)
-	echo alpha-dec-winnt3.5
-	exit 0 ;;
+	echo "$UNAME_MACHINE"-dec-osf"$(echo "$UNAME_RELEASE" | sed -e 's/^[PVTX]//' | tr ABCDEFGHIJKLMNOPQRSTUVWXYZ abcdefghijklmnopqrstuvwxyz)"
+	# Reset EXIT trap before exiting to avoid spurious non-zero exit code.
+	exitcode=$?
+	trap '' 0
+	exit $exitcode ;;
     Amiga*:UNIX_System_V:4.0:*)
 	echo m68k-unknown-sysv4
-	exit 0;;
+	exit ;;
     *:[Aa]miga[Oo][Ss]:*:*)
-	echo ${UNAME_MACHINE}-unknown-amigaos
-	exit 0 ;;
+	echo "$UNAME_MACHINE"-unknown-amigaos
+	exit ;;
     *:[Mm]orph[Oo][Ss]:*:*)
-	echo ${UNAME_MACHINE}-unknown-morphos
-	exit 0 ;;
+	echo "$UNAME_MACHINE"-unknown-morphos
+	exit ;;
     *:OS/390:*:*)
 	echo i370-ibm-openedition
-	exit 0 ;;
+	exit ;;
+    *:z/VM:*:*)
+	echo s390-ibm-zvmoe
+	exit ;;
+    *:OS400:*:*)
+	echo powerpc-ibm-os400
+	exit ;;
     arm:RISC*:1.[012]*:*|arm:riscix:1.[012]*:*)
-	echo arm-acorn-riscix${UNAME_RELEASE}
-	exit 0;;
+	echo arm-acorn-riscix"$UNAME_RELEASE"
+	exit ;;
+    arm*:riscos:*:*|arm*:RISCOS:*:*)
+	echo arm-unknown-riscos
+	exit ;;
     SR2?01:HI-UX/MPP:*:* | SR8000:HI-UX/MPP:*:*)
 	echo hppa1.1-hitachi-hiuxmpp
-	exit 0;;
+	exit ;;
     Pyramid*:OSx*:*:* | MIS*:OSx*:*:* | MIS*:SMP_DC-OSx*:*:*)
 	# akee@wpdis03.wpafb.af.mil (Earle F. Ake) contributed MIS and NILE.
-	if test "`(/bin/universe) 2>/dev/null`" = att ; then
+	if test "$( (/bin/universe) 2>/dev/null)" = att ; then
 		echo pyramid-pyramid-sysv3
 	else
 		echo pyramid-pyramid-bsd
 	fi
-	exit 0 ;;
+	exit ;;
     NILE*:*:*:dcosx)
 	echo pyramid-pyramid-svr4
-	exit 0 ;;
-    DRS?6000:UNIX_SV:4.2*:7*)
-	case `/usr/bin/uname -p` in
-	    sparc) echo sparc-icl-nx7 && exit 0 ;;
+	exit ;;
+    DRS?6000:unix:4.0:6*)
+	echo sparc-icl-nx6
+	exit ;;
+    DRS?6000:UNIX_SV:4.2*:7* | DRS?6000:isis:4.2*:7*)
+	case $(/usr/bin/uname -p) in
+	    sparc) echo sparc-icl-nx7; exit ;;
 	esac ;;
+    s390x:SunOS:*:*)
+	echo "$UNAME_MACHINE"-ibm-solaris2"$(echo "$UNAME_RELEASE" | sed -e 's/[^.]*//')"
+	exit ;;
     sun4H:SunOS:5.*:*)
-	echo sparc-hal-solaris2`echo ${UNAME_RELEASE}|sed -e 's/[^.]*//'`
-	exit 0 ;;
+	echo sparc-hal-solaris2"$(echo "$UNAME_RELEASE"|sed -e 's/[^.]*//')"
+	exit ;;
     sun4*:SunOS:5.*:* | tadpole*:SunOS:5.*:*)
-	echo sparc-sun-solaris2`echo ${UNAME_RELEASE}|sed -e 's/[^.]*//'`
-	exit 0 ;;
-    i86pc:SunOS:5.*:*)
-	echo i386-pc-solaris2`echo ${UNAME_RELEASE}|sed -e 's/[^.]*//'`
-	exit 0 ;;
+	echo sparc-sun-solaris2"$(echo "$UNAME_RELEASE" | sed -e 's/[^.]*//')"
+	exit ;;
+    i86pc:AuroraUX:5.*:* | i86xen:AuroraUX:5.*:*)
+	echo i386-pc-auroraux"$UNAME_RELEASE"
+	exit ;;
+    i86pc:SunOS:5.*:* | i86xen:SunOS:5.*:*)
+	set_cc_for_build
+	SUN_ARCH=i386
+	# If there is a compiler, see if it is configured for 64-bit objects.
+	# Note that the Sun cc does not turn __LP64__ into 1 like gcc does.
+	# This test works for both compilers.
+	if test "$CC_FOR_BUILD" != no_compiler_found; then
+	    if (echo '#ifdef __amd64'; echo IS_64BIT_ARCH; echo '#endif') | \
+		(CCOPTS="" $CC_FOR_BUILD -E - 2>/dev/null) | \
+		grep IS_64BIT_ARCH >/dev/null
+	    then
+		SUN_ARCH=x86_64
+	    fi
+	fi
+	echo "$SUN_ARCH"-pc-solaris2"$(echo "$UNAME_RELEASE"|sed -e 's/[^.]*//')"
+	exit ;;
     sun4*:SunOS:6*:*)
 	# According to config.sub, this is the proper way to canonicalize
 	# SunOS6.  Hard to guess exactly what SunOS6 will be like, but
 	# it's likely to be more like Solaris than SunOS4.
-	echo sparc-sun-solaris3`echo ${UNAME_RELEASE}|sed -e 's/[^.]*//'`
-	exit 0 ;;
+	echo sparc-sun-solaris3"$(echo "$UNAME_RELEASE"|sed -e 's/[^.]*//')"
+	exit ;;
     sun4*:SunOS:*:*)
-	case "`/usr/bin/arch -k`" in
+	case "$(/usr/bin/arch -k)" in
 	    Series*|S4*)
-		UNAME_RELEASE=`uname -v`
+		UNAME_RELEASE=$(uname -v)
 		;;
 	esac
 	# Japanese Language versions have a version number like `4.1.3-JL'.
-	echo sparc-sun-sunos`echo ${UNAME_RELEASE}|sed -e 's/-/_/'`
-	exit 0 ;;
+	echo sparc-sun-sunos"$(echo "$UNAME_RELEASE"|sed -e 's/-/_/')"
+	exit ;;
     sun3*:SunOS:*:*)
-	echo m68k-sun-sunos${UNAME_RELEASE}
-	exit 0 ;;
+	echo m68k-sun-sunos"$UNAME_RELEASE"
+	exit ;;
     sun*:*:4.2BSD:*)
-	UNAME_RELEASE=`(sed 1q /etc/motd | awk '{print substr($5,1,3)}') 2>/dev/null`
-	test "x${UNAME_RELEASE}" = "x" && UNAME_RELEASE=3
-	case "`/bin/arch`" in
+	UNAME_RELEASE=$( (sed 1q /etc/motd | awk '{print substr($5,1,3)}') 2>/dev/null)
+	test "x$UNAME_RELEASE" = x && UNAME_RELEASE=3
+	case "$(/bin/arch)" in
 	    sun3)
-		echo m68k-sun-sunos${UNAME_RELEASE}
+		echo m68k-sun-sunos"$UNAME_RELEASE"
 		;;
 	    sun4)
-		echo sparc-sun-sunos${UNAME_RELEASE}
+		echo sparc-sun-sunos"$UNAME_RELEASE"
 		;;
 	esac
-	exit 0 ;;
+	exit ;;
     aushp:SunOS:*:*)
-	echo sparc-auspex-sunos${UNAME_RELEASE}
-	exit 0 ;;
+	echo sparc-auspex-sunos"$UNAME_RELEASE"
+	exit ;;
     # The situation for MiNT is a little confusing.  The machine name
     # can be virtually everything (everything which is not
     # "atarist" or "atariste" at least should have a processor
@@ -375,41 +466,44 @@ case "${UNAME_MACHINE}:${UNAME_SYSTEM}:${UNAME_RELEASE}:${UNAME_VERSION}" in
     # MiNT.  But MiNT is downward compatible to TOS, so this should
     # be no problem.
     atarist[e]:*MiNT:*:* | atarist[e]:*mint:*:* | atarist[e]:*TOS:*:*)
-        echo m68k-atari-mint${UNAME_RELEASE}
-	exit 0 ;;
+	echo m68k-atari-mint"$UNAME_RELEASE"
+	exit ;;
     atari*:*MiNT:*:* | atari*:*mint:*:* | atarist[e]:*TOS:*:*)
-	echo m68k-atari-mint${UNAME_RELEASE}
-        exit 0 ;;
+	echo m68k-atari-mint"$UNAME_RELEASE"
+	exit ;;
     *falcon*:*MiNT:*:* | *falcon*:*mint:*:* | *falcon*:*TOS:*:*)
-        echo m68k-atari-mint${UNAME_RELEASE}
-	exit 0 ;;
+	echo m68k-atari-mint"$UNAME_RELEASE"
+	exit ;;
     milan*:*MiNT:*:* | milan*:*mint:*:* | *milan*:*TOS:*:*)
-        echo m68k-milan-mint${UNAME_RELEASE}
-        exit 0 ;;
+	echo m68k-milan-mint"$UNAME_RELEASE"
+	exit ;;
     hades*:*MiNT:*:* | hades*:*mint:*:* | *hades*:*TOS:*:*)
-        echo m68k-hades-mint${UNAME_RELEASE}
-        exit 0 ;;
+	echo m68k-hades-mint"$UNAME_RELEASE"
+	exit ;;
     *:*MiNT:*:* | *:*mint:*:* | *:*TOS:*:*)
-        echo m68k-unknown-mint${UNAME_RELEASE}
-        exit 0 ;;
+	echo m68k-unknown-mint"$UNAME_RELEASE"
+	exit ;;
+    m68k:machten:*:*)
+	echo m68k-apple-machten"$UNAME_RELEASE"
+	exit ;;
     powerpc:machten:*:*)
-	echo powerpc-apple-machten${UNAME_RELEASE}
-	exit 0 ;;
+	echo powerpc-apple-machten"$UNAME_RELEASE"
+	exit ;;
     RISC*:Mach:*:*)
 	echo mips-dec-mach_bsd4.3
-	exit 0 ;;
+	exit ;;
     RISC*:ULTRIX:*:*)
-	echo mips-dec-ultrix${UNAME_RELEASE}
-	exit 0 ;;
+	echo mips-dec-ultrix"$UNAME_RELEASE"
+	exit ;;
     VAX*:ULTRIX*:*:*)
-	echo vax-dec-ultrix${UNAME_RELEASE}
-	exit 0 ;;
+	echo vax-dec-ultrix"$UNAME_RELEASE"
+	exit ;;
     2020:CLIX:*:* | 2430:CLIX:*:*)
-	echo clipper-intergraph-clix${UNAME_RELEASE}
-	exit 0 ;;
+	echo clipper-intergraph-clix"$UNAME_RELEASE"
+	exit ;;
     mips:*:*:UMIPS | mips:*:*:RISCos)
-	eval $set_cc_for_build
-	sed 's/^	//' << EOF >$dummy.c
+	set_cc_for_build
+	sed 's/^	//' << EOF > "$dummy.c"
 #ifdef __cplusplus
 #include <stdio.h>  /* for printf() prototype */
 	int main (int argc, char *argv[]) {
@@ -418,94 +512,95 @@ case "${UNAME_MACHINE}:${UNAME_SYSTEM}:${UNAME_RELEASE}:${UNAME_VERSION}" in
 #endif
 	#if defined (host_mips) && defined (MIPSEB)
 	#if defined (SYSTYPE_SYSV)
-	  printf ("mips-mips-riscos%ssysv\n", argv[1]); exit (0);
+	  printf ("mips-mips-riscos%ssysv\\n", argv[1]); exit (0);
 	#endif
 	#if defined (SYSTYPE_SVR4)
-	  printf ("mips-mips-riscos%ssvr4\n", argv[1]); exit (0);
+	  printf ("mips-mips-riscos%ssvr4\\n", argv[1]); exit (0);
 	#endif
 	#if defined (SYSTYPE_BSD43) || defined(SYSTYPE_BSD)
-	  printf ("mips-mips-riscos%sbsd\n", argv[1]); exit (0);
+	  printf ("mips-mips-riscos%sbsd\\n", argv[1]); exit (0);
 	#endif
 	#endif
 	  exit (-1);
 	}
 EOF
-	$CC_FOR_BUILD -o $dummy $dummy.c \
-	  && $dummy `echo "${UNAME_RELEASE}" | sed -n 's/\([0-9]*\).*/\1/p'` \
-	  && exit 0
-	echo mips-mips-riscos${UNAME_RELEASE}
-	exit 0 ;;
+	$CC_FOR_BUILD -o "$dummy" "$dummy.c" &&
+	  dummyarg=$(echo "$UNAME_RELEASE" | sed -n 's/\([0-9]*\).*/\1/p') &&
+	  SYSTEM_NAME=$("$dummy" "$dummyarg") &&
+	    { echo "$SYSTEM_NAME"; exit; }
+	echo mips-mips-riscos"$UNAME_RELEASE"
+	exit ;;
     Motorola:PowerMAX_OS:*:*)
 	echo powerpc-motorola-powermax
-	exit 0 ;;
+	exit ;;
     Motorola:*:4.3:PL8-*)
 	echo powerpc-harris-powermax
-	exit 0 ;;
+	exit ;;
     Night_Hawk:*:*:PowerMAX_OS | Synergy:PowerMAX_OS:*:*)
 	echo powerpc-harris-powermax
-	exit 0 ;;
+	exit ;;
     Night_Hawk:Power_UNIX:*:*)
 	echo powerpc-harris-powerunix
-	exit 0 ;;
+	exit ;;
     m88k:CX/UX:7*:*)
 	echo m88k-harris-cxux7
-	exit 0 ;;
+	exit ;;
     m88k:*:4*:R4*)
 	echo m88k-motorola-sysv4
-	exit 0 ;;
+	exit ;;
     m88k:*:3*:R3*)
 	echo m88k-motorola-sysv3
-	exit 0 ;;
+	exit ;;
     AViiON:dgux:*:*)
-        # DG/UX returns AViiON for all architectures
-        UNAME_PROCESSOR=`/usr/bin/uname -p`
-	if [ $UNAME_PROCESSOR = mc88100 ] || [ $UNAME_PROCESSOR = mc88110 ]
+	# DG/UX returns AViiON for all architectures
+	UNAME_PROCESSOR=$(/usr/bin/uname -p)
+	if test "$UNAME_PROCESSOR" = mc88100 || test "$UNAME_PROCESSOR" = mc88110
 	then
-	    if [ ${TARGET_BINARY_INTERFACE}x = m88kdguxelfx ] || \
-	       [ ${TARGET_BINARY_INTERFACE}x = x ]
+	    if test "$TARGET_BINARY_INTERFACE"x = m88kdguxelfx || \
+	       test "$TARGET_BINARY_INTERFACE"x = x
 	    then
-		echo m88k-dg-dgux${UNAME_RELEASE}
+		echo m88k-dg-dgux"$UNAME_RELEASE"
 	    else
-		echo m88k-dg-dguxbcs${UNAME_RELEASE}
+		echo m88k-dg-dguxbcs"$UNAME_RELEASE"
 	    fi
 	else
-	    echo i586-dg-dgux${UNAME_RELEASE}
+	    echo i586-dg-dgux"$UNAME_RELEASE"
 	fi
- 	exit 0 ;;
+	exit ;;
     M88*:DolphinOS:*:*)	# DolphinOS (SVR3)
 	echo m88k-dolphin-sysv3
-	exit 0 ;;
+	exit ;;
     M88*:*:R3*:*)
 	# Delta 88k system running SVR3
 	echo m88k-motorola-sysv3
-	exit 0 ;;
+	exit ;;
     XD88*:*:*:*) # Tektronix XD88 system running UTekV (SVR3)
 	echo m88k-tektronix-sysv3
-	exit 0 ;;
+	exit ;;
     Tek43[0-9][0-9]:UTek:*:*) # Tektronix 4300 system running UTek (BSD)
 	echo m68k-tektronix-bsd
-	exit 0 ;;
+	exit ;;
     *:IRIX*:*:*)
-	echo mips-sgi-irix`echo ${UNAME_RELEASE}|sed -e 's/-/_/g'`
-	exit 0 ;;
+	echo mips-sgi-irix"$(echo "$UNAME_RELEASE"|sed -e 's/-/_/g')"
+	exit ;;
     ????????:AIX?:[12].1:2)   # AIX 2.2.1 or AIX 2.1.1 is RT/PC AIX.
-	echo romp-ibm-aix      # uname -m gives an 8 hex-code CPU id
-	exit 0 ;;              # Note that: echo "'`uname -s`'" gives 'AIX '
+	echo romp-ibm-aix     # uname -m gives an 8 hex-code CPU id
+	exit ;;               # Note that: echo "'$(uname -s)'" gives 'AIX '
     i*86:AIX:*:*)
 	echo i386-ibm-aix
-	exit 0 ;;
+	exit ;;
     ia64:AIX:*:*)
-	if [ -x /usr/bin/oslevel ] ; then
-		IBM_REV=`/usr/bin/oslevel`
+	if test -x /usr/bin/oslevel ; then
+		IBM_REV=$(/usr/bin/oslevel)
 	else
-		IBM_REV=${UNAME_VERSION}.${UNAME_RELEASE}
+		IBM_REV="$UNAME_VERSION.$UNAME_RELEASE"
 	fi
-	echo ${UNAME_MACHINE}-ibm-aix${IBM_REV}
-	exit 0 ;;
+	echo "$UNAME_MACHINE"-ibm-aix"$IBM_REV"
+	exit ;;
     *:AIX:2:3)
 	if grep bos325 /usr/include/stdio.h >/dev/null 2>&1; then
-		eval $set_cc_for_build
-		sed 's/^		//' << EOF >$dummy.c
+		set_cc_for_build
+		sed 's/^		//' << EOF > "$dummy.c"
 		#include <sys/systemcfg.h>
 
 		main()
@@ -516,128 +611,143 @@ EOF
 			exit(0);
 			}
 EOF
-		$CC_FOR_BUILD -o $dummy $dummy.c && $dummy && exit 0
-		echo rs6000-ibm-aix3.2.5
+		if $CC_FOR_BUILD -o "$dummy" "$dummy.c" && SYSTEM_NAME=$("$dummy")
+		then
+			echo "$SYSTEM_NAME"
+		else
+			echo rs6000-ibm-aix3.2.5
+		fi
 	elif grep bos324 /usr/include/stdio.h >/dev/null 2>&1; then
 		echo rs6000-ibm-aix3.2.4
 	else
 		echo rs6000-ibm-aix3.2
 	fi
-	exit 0 ;;
-    *:AIX:*:[45])
-	IBM_CPU_ID=`/usr/sbin/lsdev -C -c processor -S available | sed 1q | awk '{ print $1 }'`
-	if /usr/sbin/lsattr -El ${IBM_CPU_ID} | grep ' POWER' >/dev/null 2>&1; then
+	exit ;;
+    *:AIX:*:[4567])
+	IBM_CPU_ID=$(/usr/sbin/lsdev -C -c processor -S available | sed 1q | awk '{ print $1 }')
+	if /usr/sbin/lsattr -El "$IBM_CPU_ID" | grep ' POWER' >/dev/null 2>&1; then
 		IBM_ARCH=rs6000
 	else
 		IBM_ARCH=powerpc
 	fi
-	if [ -x /usr/bin/oslevel ] ; then
-		IBM_REV=`/usr/bin/oslevel`
+	if test -x /usr/bin/lslpp ; then
+		IBM_REV=$(/usr/bin/lslpp -Lqc bos.rte.libc |
+			   awk -F: '{ print $3 }' | sed s/[0-9]*$/0/)
 	else
-		IBM_REV=${UNAME_VERSION}.${UNAME_RELEASE}
+		IBM_REV="$UNAME_VERSION.$UNAME_RELEASE"
 	fi
-	echo ${IBM_ARCH}-ibm-aix${IBM_REV}
-	exit 0 ;;
+	echo "$IBM_ARCH"-ibm-aix"$IBM_REV"
+	exit ;;
     *:AIX:*:*)
 	echo rs6000-ibm-aix
-	exit 0 ;;
-    ibmrt:4.4BSD:*|romp-ibm:BSD:*)
+	exit ;;
+    ibmrt:4.4BSD:*|romp-ibm:4.4BSD:*)
 	echo romp-ibm-bsd4.4
-	exit 0 ;;
+	exit ;;
     ibmrt:*BSD:*|romp-ibm:BSD:*)            # covers RT/PC BSD and
-	echo romp-ibm-bsd${UNAME_RELEASE}   # 4.3 with uname added to
-	exit 0 ;;                           # report: romp-ibm BSD 4.3
+	echo romp-ibm-bsd"$UNAME_RELEASE"   # 4.3 with uname added to
+	exit ;;                             # report: romp-ibm BSD 4.3
     *:BOSX:*:*)
 	echo rs6000-bull-bosx
-	exit 0 ;;
+	exit ;;
     DPX/2?00:B.O.S.:*:*)
 	echo m68k-bull-sysv3
-	exit 0 ;;
+	exit ;;
     9000/[34]??:4.3bsd:1.*:*)
 	echo m68k-hp-bsd
-	exit 0 ;;
+	exit ;;
     hp300:4.4BSD:*:* | 9000/[34]??:4.3bsd:2.*:*)
 	echo m68k-hp-bsd4.4
-	exit 0 ;;
+	exit ;;
     9000/[34678]??:HP-UX:*:*)
-	HPUX_REV=`echo ${UNAME_RELEASE}|sed -e 's/[^.]*.[0B]*//'`
-	case "${UNAME_MACHINE}" in
-	    9000/31? )            HP_ARCH=m68000 ;;
-	    9000/[34]?? )         HP_ARCH=m68k ;;
+	HPUX_REV=$(echo "$UNAME_RELEASE"|sed -e 's/[^.]*.[0B]*//')
+	case "$UNAME_MACHINE" in
+	    9000/31?)            HP_ARCH=m68000 ;;
+	    9000/[34]??)         HP_ARCH=m68k ;;
 	    9000/[678][0-9][0-9])
-		if [ -x /usr/bin/getconf ]; then
-		    sc_cpu_version=`/usr/bin/getconf SC_CPU_VERSION 2>/dev/null`
-                    sc_kernel_bits=`/usr/bin/getconf SC_KERNEL_BITS 2>/dev/null`
-                    case "${sc_cpu_version}" in
-                      523) HP_ARCH="hppa1.0" ;; # CPU_PA_RISC1_0
-                      528) HP_ARCH="hppa1.1" ;; # CPU_PA_RISC1_1
-                      532)                      # CPU_PA_RISC2_0
-                        case "${sc_kernel_bits}" in
-                          32) HP_ARCH="hppa2.0n" ;;
-                          64) HP_ARCH="hppa2.0w" ;;
-			  '') HP_ARCH="hppa2.0" ;;   # HP-UX 10.20
-                        esac ;;
-                    esac
+		if test -x /usr/bin/getconf; then
+		    sc_cpu_version=$(/usr/bin/getconf SC_CPU_VERSION 2>/dev/null)
+		    sc_kernel_bits=$(/usr/bin/getconf SC_KERNEL_BITS 2>/dev/null)
+		    case "$sc_cpu_version" in
+		      523) HP_ARCH=hppa1.0 ;; # CPU_PA_RISC1_0
+		      528) HP_ARCH=hppa1.1 ;; # CPU_PA_RISC1_1
+		      532)                      # CPU_PA_RISC2_0
+			case "$sc_kernel_bits" in
+			  32) HP_ARCH=hppa2.0n ;;
+			  64) HP_ARCH=hppa2.0w ;;
+			  '') HP_ARCH=hppa2.0 ;;   # HP-UX 10.20
+			esac ;;
+		    esac
 		fi
-		if [ "${HP_ARCH}" = "" ]; then
-		    eval $set_cc_for_build
-		    sed 's/^              //' << EOF >$dummy.c
+		if test "$HP_ARCH" = ""; then
+		    set_cc_for_build
+		    sed 's/^		//' << EOF > "$dummy.c"
 
-              #define _HPUX_SOURCE
-              #include <stdlib.h>
-              #include <unistd.h>
+		#define _HPUX_SOURCE
+		#include <stdlib.h>
+		#include <unistd.h>
 
-              int main ()
-              {
-              #if defined(_SC_KERNEL_BITS)
-                  long bits = sysconf(_SC_KERNEL_BITS);
-              #endif
-                  long cpu  = sysconf (_SC_CPU_VERSION);
+		int main ()
+		{
+		#if defined(_SC_KERNEL_BITS)
+		    long bits = sysconf(_SC_KERNEL_BITS);
+		#endif
+		    long cpu  = sysconf (_SC_CPU_VERSION);
 
-                  switch (cpu)
-              	{
-              	case CPU_PA_RISC1_0: puts ("hppa1.0"); break;
-              	case CPU_PA_RISC1_1: puts ("hppa1.1"); break;
-              	case CPU_PA_RISC2_0:
-              #if defined(_SC_KERNEL_BITS)
-              	    switch (bits)
-              		{
-              		case 64: puts ("hppa2.0w"); break;
-              		case 32: puts ("hppa2.0n"); break;
-              		default: puts ("hppa2.0"); break;
-              		} break;
-              #else  /* !defined(_SC_KERNEL_BITS) */
-              	    puts ("hppa2.0"); break;
-              #endif
-              	default: puts ("hppa1.0"); break;
-              	}
-                  exit (0);
-              }
+		    switch (cpu)
+			{
+			case CPU_PA_RISC1_0: puts ("hppa1.0"); break;
+			case CPU_PA_RISC1_1: puts ("hppa1.1"); break;
+			case CPU_PA_RISC2_0:
+		#if defined(_SC_KERNEL_BITS)
+			    switch (bits)
+				{
+				case 64: puts ("hppa2.0w"); break;
+				case 32: puts ("hppa2.0n"); break;
+				default: puts ("hppa2.0"); break;
+				} break;
+		#else  /* !defined(_SC_KERNEL_BITS) */
+			    puts ("hppa2.0"); break;
+		#endif
+			default: puts ("hppa1.0"); break;
+			}
+		    exit (0);
+		}
 EOF
-		    (CCOPTS= $CC_FOR_BUILD -o $dummy $dummy.c 2>/dev/null) && HP_ARCH=`$dummy`
+		    (CCOPTS="" $CC_FOR_BUILD -o "$dummy" "$dummy.c" 2>/dev/null) && HP_ARCH=$("$dummy")
 		    test -z "$HP_ARCH" && HP_ARCH=hppa
 		fi ;;
 	esac
-	if [ ${HP_ARCH} = "hppa2.0w" ]
+	if test "$HP_ARCH" = hppa2.0w
 	then
-	    # avoid double evaluation of $set_cc_for_build
-	    test -n "$CC_FOR_BUILD" || eval $set_cc_for_build
-	    if echo __LP64__ | (CCOPTS= $CC_FOR_BUILD -E -) | grep __LP64__ >/dev/null
+	    set_cc_for_build
+
+	    # hppa2.0w-hp-hpux* has a 64-bit kernel and a compiler generating
+	    # 32-bit code.  hppa64-hp-hpux* has the same kernel and a compiler
+	    # generating 64-bit code.  GNU and HP use different nomenclature:
+	    #
+	    # $ CC_FOR_BUILD=cc ./config.guess
+	    # => hppa2.0w-hp-hpux11.23
+	    # $ CC_FOR_BUILD="cc +DA2.0w" ./config.guess
+	    # => hppa64-hp-hpux11.23
+
+	    if echo __LP64__ | (CCOPTS="" $CC_FOR_BUILD -E - 2>/dev/null) |
+		grep -q __LP64__
 	    then
-		HP_ARCH="hppa2.0w"
+		HP_ARCH=hppa2.0w
 	    else
-		HP_ARCH="hppa64"
+		HP_ARCH=hppa64
 	    fi
 	fi
-	echo ${HP_ARCH}-hp-hpux${HPUX_REV}
-	exit 0 ;;
+	echo "$HP_ARCH"-hp-hpux"$HPUX_REV"
+	exit ;;
     ia64:HP-UX:*:*)
-	HPUX_REV=`echo ${UNAME_RELEASE}|sed -e 's/[^.]*.[0B]*//'`
-	echo ia64-hp-hpux${HPUX_REV}
-	exit 0 ;;
+	HPUX_REV=$(echo "$UNAME_RELEASE"|sed -e 's/[^.]*.[0B]*//')
+	echo ia64-hp-hpux"$HPUX_REV"
+	exit ;;
     3050*:HI-UX:*:*)
-	eval $set_cc_for_build
-	sed 's/^	//' << EOF >$dummy.c
+	set_cc_for_build
+	sed 's/^	//' << EOF > "$dummy.c"
 	#include <unistd.h>
 	int
 	main ()
@@ -662,193 +772,171 @@ EOF
 	  exit (0);
 	}
 EOF
-	$CC_FOR_BUILD -o $dummy $dummy.c && $dummy && exit 0
+	$CC_FOR_BUILD -o "$dummy" "$dummy.c" && SYSTEM_NAME=$("$dummy") &&
+		{ echo "$SYSTEM_NAME"; exit; }
 	echo unknown-hitachi-hiuxwe2
-	exit 0 ;;
-    9000/7??:4.3bsd:*:* | 9000/8?[79]:4.3bsd:*:* )
+	exit ;;
+    9000/7??:4.3bsd:*:* | 9000/8?[79]:4.3bsd:*:*)
 	echo hppa1.1-hp-bsd
-	exit 0 ;;
+	exit ;;
     9000/8??:4.3bsd:*:*)
 	echo hppa1.0-hp-bsd
-	exit 0 ;;
+	exit ;;
     *9??*:MPE/iX:*:* | *3000*:MPE/iX:*:*)
 	echo hppa1.0-hp-mpeix
-	exit 0 ;;
-    hp7??:OSF1:*:* | hp8?[79]:OSF1:*:* )
+	exit ;;
+    hp7??:OSF1:*:* | hp8?[79]:OSF1:*:*)
 	echo hppa1.1-hp-osf
-	exit 0 ;;
+	exit ;;
     hp8??:OSF1:*:*)
 	echo hppa1.0-hp-osf
-	exit 0 ;;
+	exit ;;
     i*86:OSF1:*:*)
-	if [ -x /usr/sbin/sysversion ] ; then
-	    echo ${UNAME_MACHINE}-unknown-osf1mk
+	if test -x /usr/sbin/sysversion ; then
+	    echo "$UNAME_MACHINE"-unknown-osf1mk
 	else
-	    echo ${UNAME_MACHINE}-unknown-osf1
+	    echo "$UNAME_MACHINE"-unknown-osf1
 	fi
-	exit 0 ;;
+	exit ;;
     parisc*:Lites*:*:*)
 	echo hppa1.1-hp-lites
-	exit 0 ;;
+	exit ;;
     C1*:ConvexOS:*:* | convex:ConvexOS:C1*:*)
 	echo c1-convex-bsd
-        exit 0 ;;
+	exit ;;
     C2*:ConvexOS:*:* | convex:ConvexOS:C2*:*)
 	if getsysinfo -f scalar_acc
 	then echo c32-convex-bsd
 	else echo c2-convex-bsd
 	fi
-        exit 0 ;;
+	exit ;;
     C34*:ConvexOS:*:* | convex:ConvexOS:C34*:*)
 	echo c34-convex-bsd
-        exit 0 ;;
+	exit ;;
     C38*:ConvexOS:*:* | convex:ConvexOS:C38*:*)
 	echo c38-convex-bsd
-        exit 0 ;;
+	exit ;;
     C4*:ConvexOS:*:* | convex:ConvexOS:C4*:*)
 	echo c4-convex-bsd
-        exit 0 ;;
+	exit ;;
     CRAY*Y-MP:*:*:*)
-	echo ymp-cray-unicos${UNAME_RELEASE} | sed -e 's/\.[^.]*$/.X/'
-	exit 0 ;;
+	echo ymp-cray-unicos"$UNAME_RELEASE" | sed -e 's/\.[^.]*$/.X/'
+	exit ;;
     CRAY*[A-Z]90:*:*:*)
-	echo ${UNAME_MACHINE}-cray-unicos${UNAME_RELEASE} \
+	echo "$UNAME_MACHINE"-cray-unicos"$UNAME_RELEASE" \
 	| sed -e 's/CRAY.*\([A-Z]90\)/\1/' \
 	      -e y/ABCDEFGHIJKLMNOPQRSTUVWXYZ/abcdefghijklmnopqrstuvwxyz/ \
 	      -e 's/\.[^.]*$/.X/'
-	exit 0 ;;
+	exit ;;
     CRAY*TS:*:*:*)
-	echo t90-cray-unicos${UNAME_RELEASE} | sed -e 's/\.[^.]*$/.X/'
-	exit 0 ;;
+	echo t90-cray-unicos"$UNAME_RELEASE" | sed -e 's/\.[^.]*$/.X/'
+	exit ;;
     CRAY*T3E:*:*:*)
-	echo alphaev5-cray-unicosmk${UNAME_RELEASE} | sed -e 's/\.[^.]*$/.X/'
-	exit 0 ;;
+	echo alphaev5-cray-unicosmk"$UNAME_RELEASE" | sed -e 's/\.[^.]*$/.X/'
+	exit ;;
     CRAY*SV1:*:*:*)
-	echo sv1-cray-unicos${UNAME_RELEASE} | sed -e 's/\.[^.]*$/.X/'
-	exit 0 ;;
+	echo sv1-cray-unicos"$UNAME_RELEASE" | sed -e 's/\.[^.]*$/.X/'
+	exit ;;
     *:UNICOS/mp:*:*)
-	echo nv1-cray-unicosmp${UNAME_RELEASE} | sed -e 's/\.[^.]*$/.X/' 
-	exit 0 ;;
+	echo craynv-cray-unicosmp"$UNAME_RELEASE" | sed -e 's/\.[^.]*$/.X/'
+	exit ;;
     F30[01]:UNIX_System_V:*:* | F700:UNIX_System_V:*:*)
-	FUJITSU_PROC=`uname -m | tr 'ABCDEFGHIJKLMNOPQRSTUVWXYZ' 'abcdefghijklmnopqrstuvwxyz'`
-        FUJITSU_SYS=`uname -p | tr 'ABCDEFGHIJKLMNOPQRSTUVWXYZ' 'abcdefghijklmnopqrstuvwxyz' | sed -e 's/\///'`
-        FUJITSU_REL=`echo ${UNAME_RELEASE} | sed -e 's/ /_/'`
-        echo "${FUJITSU_PROC}-fujitsu-${FUJITSU_SYS}${FUJITSU_REL}"
-        exit 0 ;;
+	FUJITSU_PROC=$(uname -m | tr ABCDEFGHIJKLMNOPQRSTUVWXYZ abcdefghijklmnopqrstuvwxyz)
+	FUJITSU_SYS=$(uname -p | tr ABCDEFGHIJKLMNOPQRSTUVWXYZ abcdefghijklmnopqrstuvwxyz | sed -e 's/\///')
+	FUJITSU_REL=$(echo "$UNAME_RELEASE" | sed -e 's/ /_/')
+	echo "${FUJITSU_PROC}-fujitsu-${FUJITSU_SYS}${FUJITSU_REL}"
+	exit ;;
+    5000:UNIX_System_V:4.*:*)
+	FUJITSU_SYS=$(uname -p | tr ABCDEFGHIJKLMNOPQRSTUVWXYZ abcdefghijklmnopqrstuvwxyz | sed -e 's/\///')
+	FUJITSU_REL=$(echo "$UNAME_RELEASE" | tr ABCDEFGHIJKLMNOPQRSTUVWXYZ abcdefghijklmnopqrstuvwxyz | sed -e 's/ /_/')
+	echo "sparc-fujitsu-${FUJITSU_SYS}${FUJITSU_REL}"
+	exit ;;
     i*86:BSD/386:*:* | i*86:BSD/OS:*:* | *:Ascend\ Embedded/OS:*:*)
-	echo ${UNAME_MACHINE}-pc-bsdi${UNAME_RELEASE}
-	exit 0 ;;
+	echo "$UNAME_MACHINE"-pc-bsdi"$UNAME_RELEASE"
+	exit ;;
     sparc*:BSD/OS:*:*)
-	echo sparc-unknown-bsdi${UNAME_RELEASE}
-	exit 0 ;;
+	echo sparc-unknown-bsdi"$UNAME_RELEASE"
+	exit ;;
     *:BSD/OS:*:*)
-	echo ${UNAME_MACHINE}-unknown-bsdi${UNAME_RELEASE}
-	exit 0 ;;
-    *:FreeBSD:*:*|*:GNU/FreeBSD:*:*)
-	# Determine whether the default compiler uses glibc.
-	eval $set_cc_for_build
-	sed 's/^	//' << EOF >$dummy.c
-	#include <features.h>
-	#if __GLIBC__ >= 2
-	LIBC=gnu
-	#else
-	LIBC=
-	#endif
-EOF
-	eval `$CC_FOR_BUILD -E $dummy.c 2>/dev/null | grep ^LIBC=`
-	echo ${UNAME_MACHINE}-unknown-freebsd`echo ${UNAME_RELEASE}|sed -e 's/[-(].*//'`${LIBC:+-$LIBC}
-	exit 0 ;;
+	echo "$UNAME_MACHINE"-unknown-bsdi"$UNAME_RELEASE"
+	exit ;;
+    arm:FreeBSD:*:*)
+	UNAME_PROCESSOR=$(uname -p)
+	set_cc_for_build
+	if echo __ARM_PCS_VFP | $CC_FOR_BUILD -E - 2>/dev/null \
+	    | grep -q __ARM_PCS_VFP
+	then
+	    echo "${UNAME_PROCESSOR}"-unknown-freebsd"$(echo ${UNAME_RELEASE}|sed -e 's/[-(].*//')"-gnueabi
+	else
+	    echo "${UNAME_PROCESSOR}"-unknown-freebsd"$(echo ${UNAME_RELEASE}|sed -e 's/[-(].*//')"-gnueabihf
+	fi
+	exit ;;
+    *:FreeBSD:*:*)
+	UNAME_PROCESSOR=$(/usr/bin/uname -p)
+	case "$UNAME_PROCESSOR" in
+	    amd64)
+		UNAME_PROCESSOR=x86_64 ;;
+	    i386)
+		UNAME_PROCESSOR=i586 ;;
+	esac
+	echo "$UNAME_PROCESSOR"-unknown-freebsd"$(echo "$UNAME_RELEASE"|sed -e 's/[-(].*//')"
+	exit ;;
     i*:CYGWIN*:*)
-	echo ${UNAME_MACHINE}-pc-cygwin
-	exit 0 ;;
-    i*:MINGW*:*)
-	echo ${UNAME_MACHINE}-pc-mingw32
-	exit 0 ;;
+	echo "$UNAME_MACHINE"-pc-cygwin
+	exit ;;
+    *:MINGW64*:*)
+	echo "$UNAME_MACHINE"-pc-mingw64
+	exit ;;
+    *:MINGW*:*)
+	echo "$UNAME_MACHINE"-pc-mingw32
+	exit ;;
+    *:MSYS*:*)
+	echo "$UNAME_MACHINE"-pc-msys
+	exit ;;
     i*:PW*:*)
-	echo ${UNAME_MACHINE}-pc-pw32
-	exit 0 ;;
-    x86:Interix*:3*)
-	echo i586-pc-interix3
-	exit 0 ;;
-    [345]86:Windows_95:* | [345]86:Windows_98:* | [345]86:Windows_NT:*)
-	echo i${UNAME_MACHINE}-pc-mks
-	exit 0 ;;
-    i*:Windows_NT*:* | Pentium*:Windows_NT*:*)
-	# How do we know it's Interix rather than the generic POSIX subsystem?
-	# It also conflicts with pre-2.0 versions of AT&T UWIN. Should we
-	# UNAME_MACHINE based on the output of uname instead of i386?
-	echo i586-pc-interix
-	exit 0 ;;
+	echo "$UNAME_MACHINE"-pc-pw32
+	exit ;;
+    *:Interix*:*)
+	case "$UNAME_MACHINE" in
+	    x86)
+		echo i586-pc-interix"$UNAME_RELEASE"
+		exit ;;
+	    authenticamd | genuineintel | EM64T)
+		echo x86_64-unknown-interix"$UNAME_RELEASE"
+		exit ;;
+	    IA64)
+		echo ia64-unknown-interix"$UNAME_RELEASE"
+		exit ;;
+	esac ;;
     i*:UWIN*:*)
-	echo ${UNAME_MACHINE}-pc-uwin
-	exit 0 ;;
-    p*:CYGWIN*:*)
-	echo powerpcle-unknown-cygwin
-	exit 0 ;;
+	echo "$UNAME_MACHINE"-pc-uwin
+	exit ;;
+    amd64:CYGWIN*:*:* | x86_64:CYGWIN*:*:*)
+	echo x86_64-pc-cygwin
+	exit ;;
     prep*:SunOS:5.*:*)
-	echo powerpcle-unknown-solaris2`echo ${UNAME_RELEASE}|sed -e 's/[^.]*//'`
-	exit 0 ;;
+	echo powerpcle-unknown-solaris2"$(echo "$UNAME_RELEASE"|sed -e 's/[^.]*//')"
+	exit ;;
     *:GNU:*:*)
-	echo `echo ${UNAME_MACHINE}|sed -e 's,[-/].*$,,'`-unknown-gnu`echo ${UNAME_RELEASE}|sed -e 's,/.*$,,'`
-	exit 0 ;;
-    i*86:Minix:*:*)
-	echo ${UNAME_MACHINE}-pc-minix
-	exit 0 ;;
-    arm*:Linux:*:*)
-	echo ${UNAME_MACHINE}-unknown-linux-gnu
-	exit 0 ;;
-    ia64:Linux:*:*)
-	echo ${UNAME_MACHINE}-unknown-linux-gnu
-	exit 0 ;;
-    m68*:Linux:*:*)
-	echo ${UNAME_MACHINE}-unknown-linux-gnu
-	exit 0 ;;
-    mips:Linux:*:*)
-	eval $set_cc_for_build
-	sed 's/^	//' << EOF >$dummy.c
-	#undef CPU
-	#undef mips
-	#undef mipsel
-	#if defined(__MIPSEL__) || defined(__MIPSEL) || defined(_MIPSEL) || defined(MIPSEL)
-	CPU=mipsel
-	#else
-	#if defined(__MIPSEB__) || defined(__MIPSEB) || defined(_MIPSEB) || defined(MIPSEB)
-	CPU=mips
-	#else
-	CPU=
-	#endif
-	#endif
-EOF
-	eval `$CC_FOR_BUILD -E $dummy.c 2>/dev/null | grep ^CPU=`
-	test x"${CPU}" != x && echo "${CPU}-unknown-linux-gnu" && exit 0
-	;;
-    mips64:Linux:*:*)
-	eval $set_cc_for_build
-	sed 's/^	//' << EOF >$dummy.c
-	#undef CPU
-	#undef mips64
-	#undef mips64el
-	#if defined(__MIPSEL__) || defined(__MIPSEL) || defined(_MIPSEL) || defined(MIPSEL)
-	CPU=mips64el
-	#else
-	#if defined(__MIPSEB__) || defined(__MIPSEB) || defined(_MIPSEB) || defined(MIPSEB)
-	CPU=mips64
-	#else
-	CPU=
-	#endif
-	#endif
-EOF
-	eval `$CC_FOR_BUILD -E $dummy.c 2>/dev/null | grep ^CPU=`
-	test x"${CPU}" != x && echo "${CPU}-unknown-linux-gnu" && exit 0
-	;;
-    ppc:Linux:*:*)
-	echo powerpc-unknown-linux-gnu
-	exit 0 ;;
-    ppc64:Linux:*:*)
-	echo powerpc64-unknown-linux-gnu
-	exit 0 ;;
+	# the GNU system
+	echo "$(echo "$UNAME_MACHINE"|sed -e 's,[-/].*$,,')-unknown-$LIBC$(echo "$UNAME_RELEASE"|sed -e 's,/.*$,,')"
+	exit ;;
+    *:GNU/*:*:*)
+	# other systems with GNU libc and userland
+	echo "$UNAME_MACHINE-unknown-$(echo "$UNAME_SYSTEM" | sed 's,^[^/]*/,,' | tr "[:upper:]" "[:lower:]")$(echo "$UNAME_RELEASE"|sed -e 's/[-(].*//')-$LIBC"
+	exit ;;
+    *:Minix:*:*)
+	echo "$UNAME_MACHINE"-unknown-minix
+	exit ;;
+    aarch64:Linux:*:*)
+	echo "$UNAME_MACHINE"-unknown-linux-"$LIBC"
+	exit ;;
+    aarch64_be:Linux:*:*)
+	UNAME_MACHINE=aarch64_be
+	echo "$UNAME_MACHINE"-unknown-linux-"$LIBC"
+	exit ;;
     alpha:Linux:*:*)
-	case `sed -n '/^cpu model/s/^.*: \(.*\)/\1/p' < /proc/cpuinfo` in
+	case $(sed -n '/^cpu model/s/^.*: \(.*\)/\1/p' /proc/cpuinfo 2>/dev/null) in
 	  EV5)   UNAME_MACHINE=alphaev5 ;;
 	  EV56)  UNAME_MACHINE=alphaev56 ;;
 	  PCA56) UNAME_MACHINE=alphapca56 ;;
@@ -856,140 +944,242 @@ EOF
 	  EV6)   UNAME_MACHINE=alphaev6 ;;
 	  EV67)  UNAME_MACHINE=alphaev67 ;;
 	  EV68*) UNAME_MACHINE=alphaev68 ;;
-        esac
-	objdump --private-headers /bin/sh | grep ld.so.1 >/dev/null
-	if test "$?" = 0 ; then LIBC="libc1" ; else LIBC="" ; fi
-	echo ${UNAME_MACHINE}-unknown-linux-gnu${LIBC}
-	exit 0 ;;
+	esac
+	objdump --private-headers /bin/sh | grep -q ld.so.1
+	if test "$?" = 0 ; then LIBC=gnulibc1 ; fi
+	echo "$UNAME_MACHINE"-unknown-linux-"$LIBC"
+	exit ;;
+    arc:Linux:*:* | arceb:Linux:*:*)
+	echo "$UNAME_MACHINE"-unknown-linux-"$LIBC"
+	exit ;;
+    arm*:Linux:*:*)
+	set_cc_for_build
+	if echo __ARM_EABI__ | $CC_FOR_BUILD -E - 2>/dev/null \
+	    | grep -q __ARM_EABI__
+	then
+	    echo "$UNAME_MACHINE"-unknown-linux-"$LIBC"
+	else
+	    if echo __ARM_PCS_VFP | $CC_FOR_BUILD -E - 2>/dev/null \
+		| grep -q __ARM_PCS_VFP
+	    then
+		echo "$UNAME_MACHINE"-unknown-linux-"$LIBC"eabi
+	    else
+		echo "$UNAME_MACHINE"-unknown-linux-"$LIBC"eabihf
+	    fi
+	fi
+	exit ;;
+    avr32*:Linux:*:*)
+	echo "$UNAME_MACHINE"-unknown-linux-"$LIBC"
+	exit ;;
+    cris:Linux:*:*)
+	echo "$UNAME_MACHINE"-axis-linux-"$LIBC"
+	exit ;;
+    crisv32:Linux:*:*)
+	echo "$UNAME_MACHINE"-axis-linux-"$LIBC"
+	exit ;;
+    e2k:Linux:*:*)
+	echo "$UNAME_MACHINE"-unknown-linux-"$LIBC"
+	exit ;;
+    frv:Linux:*:*)
+	echo "$UNAME_MACHINE"-unknown-linux-"$LIBC"
+	exit ;;
+    hexagon:Linux:*:*)
+	echo "$UNAME_MACHINE"-unknown-linux-"$LIBC"
+	exit ;;
+    i*86:Linux:*:*)
+	echo "$UNAME_MACHINE"-pc-linux-"$LIBC"
+	exit ;;
+    ia64:Linux:*:*)
+	echo "$UNAME_MACHINE"-unknown-linux-"$LIBC"
+	exit ;;
+    k1om:Linux:*:*)
+	echo "$UNAME_MACHINE"-unknown-linux-"$LIBC"
+	exit ;;
+    loongarch32:Linux:*:* | loongarch64:Linux:*:* | loongarchx32:Linux:*:*)
+	echo "$UNAME_MACHINE"-unknown-linux-"$LIBC"
+	exit ;;
+    m32r*:Linux:*:*)
+	echo "$UNAME_MACHINE"-unknown-linux-"$LIBC"
+	exit ;;
+    m68*:Linux:*:*)
+	echo "$UNAME_MACHINE"-unknown-linux-"$LIBC"
+	exit ;;
+    mips:Linux:*:* | mips64:Linux:*:*)
+	set_cc_for_build
+	IS_GLIBC=0
+	test x"${LIBC}" = xgnu && IS_GLIBC=1
+	sed 's/^	//' << EOF > "$dummy.c"
+	#undef CPU
+	#undef mips
+	#undef mipsel
+	#undef mips64
+	#undef mips64el
+	#if ${IS_GLIBC} && defined(_ABI64)
+	LIBCABI=gnuabi64
+	#else
+	#if ${IS_GLIBC} && defined(_ABIN32)
+	LIBCABI=gnuabin32
+	#else
+	LIBCABI=${LIBC}
+	#endif
+	#endif
+
+	#if ${IS_GLIBC} && defined(__mips64) && defined(__mips_isa_rev) && __mips_isa_rev>=6
+	CPU=mipsisa64r6
+	#else
+	#if ${IS_GLIBC} && !defined(__mips64) && defined(__mips_isa_rev) && __mips_isa_rev>=6
+	CPU=mipsisa32r6
+	#else
+	#if defined(__mips64)
+	CPU=mips64
+	#else
+	CPU=mips
+	#endif
+	#endif
+	#endif
+
+	#if defined(__MIPSEL__) || defined(__MIPSEL) || defined(_MIPSEL) || defined(MIPSEL)
+	MIPS_ENDIAN=el
+	#else
+	#if defined(__MIPSEB__) || defined(__MIPSEB) || defined(_MIPSEB) || defined(MIPSEB)
+	MIPS_ENDIAN=
+	#else
+	MIPS_ENDIAN=
+	#endif
+	#endif
+EOF
+	eval "$($CC_FOR_BUILD -E "$dummy.c" 2>/dev/null | grep '^CPU\|^MIPS_ENDIAN\|^LIBCABI')"
+	test "x$CPU" != x && { echo "$CPU${MIPS_ENDIAN}-unknown-linux-$LIBCABI"; exit; }
+	;;
+    mips64el:Linux:*:*)
+	echo "$UNAME_MACHINE"-unknown-linux-"$LIBC"
+	exit ;;
+    openrisc*:Linux:*:*)
+	echo or1k-unknown-linux-"$LIBC"
+	exit ;;
+    or32:Linux:*:* | or1k*:Linux:*:*)
+	echo "$UNAME_MACHINE"-unknown-linux-"$LIBC"
+	exit ;;
+    padre:Linux:*:*)
+	echo sparc-unknown-linux-"$LIBC"
+	exit ;;
+    parisc64:Linux:*:* | hppa64:Linux:*:*)
+	echo hppa64-unknown-linux-"$LIBC"
+	exit ;;
     parisc:Linux:*:* | hppa:Linux:*:*)
 	# Look for CPU level
-	case `grep '^cpu[^a-z]*:' /proc/cpuinfo 2>/dev/null | cut -d' ' -f2` in
-	  PA7*) echo hppa1.1-unknown-linux-gnu ;;
-	  PA8*) echo hppa2.0-unknown-linux-gnu ;;
-	  *)    echo hppa-unknown-linux-gnu ;;
+	case $(grep '^cpu[^a-z]*:' /proc/cpuinfo 2>/dev/null | cut -d' ' -f2) in
+	  PA7*) echo hppa1.1-unknown-linux-"$LIBC" ;;
+	  PA8*) echo hppa2.0-unknown-linux-"$LIBC" ;;
+	  *)    echo hppa-unknown-linux-"$LIBC" ;;
 	esac
-	exit 0 ;;
-    parisc64:Linux:*:* | hppa64:Linux:*:*)
-	echo hppa64-unknown-linux-gnu
-	exit 0 ;;
+	exit ;;
+    ppc64:Linux:*:*)
+	echo powerpc64-unknown-linux-"$LIBC"
+	exit ;;
+    ppc:Linux:*:*)
+	echo powerpc-unknown-linux-"$LIBC"
+	exit ;;
+    ppc64le:Linux:*:*)
+	echo powerpc64le-unknown-linux-"$LIBC"
+	exit ;;
+    ppcle:Linux:*:*)
+	echo powerpcle-unknown-linux-"$LIBC"
+	exit ;;
+    riscv32:Linux:*:* | riscv32be:Linux:*:* | riscv64:Linux:*:* | riscv64be:Linux:*:*)
+	echo "$UNAME_MACHINE"-unknown-linux-"$LIBC"
+	exit ;;
     s390:Linux:*:* | s390x:Linux:*:*)
-	echo ${UNAME_MACHINE}-ibm-linux
-	exit 0 ;;
+	echo "$UNAME_MACHINE"-ibm-linux-"$LIBC"
+	exit ;;
+    sh64*:Linux:*:*)
+	echo "$UNAME_MACHINE"-unknown-linux-"$LIBC"
+	exit ;;
     sh*:Linux:*:*)
-	echo ${UNAME_MACHINE}-unknown-linux-gnu
-	exit 0 ;;
+	echo "$UNAME_MACHINE"-unknown-linux-"$LIBC"
+	exit ;;
     sparc:Linux:*:* | sparc64:Linux:*:*)
-	echo ${UNAME_MACHINE}-unknown-linux-gnu
-	exit 0 ;;
+	echo "$UNAME_MACHINE"-unknown-linux-"$LIBC"
+	exit ;;
+    tile*:Linux:*:*)
+	echo "$UNAME_MACHINE"-unknown-linux-"$LIBC"
+	exit ;;
+    vax:Linux:*:*)
+	echo "$UNAME_MACHINE"-dec-linux-"$LIBC"
+	exit ;;
     x86_64:Linux:*:*)
-	echo x86_64-unknown-linux-gnu
-	exit 0 ;;
-    i*86:Linux:*:*)
-	# The BFD linker knows what the default object file format is, so
-	# first see if it will tell us. cd to the root directory to prevent
-	# problems with other programs or directories called `ld' in the path.
-	# Set LC_ALL=C to ensure ld outputs messages in English.
-	ld_supported_targets=`cd /; LC_ALL=C ld --help 2>&1 \
-			 | sed -ne '/supported targets:/!d
-				    s/[ 	][ 	]*/ /g
-				    s/.*supported targets: *//
-				    s/ .*//
-				    p'`
-        case "$ld_supported_targets" in
-	  elf32-i386)
-		TENTATIVE="${UNAME_MACHINE}-pc-linux-gnu"
-		;;
-	  a.out-i386-linux)
-		echo "${UNAME_MACHINE}-pc-linux-gnuaout"
-		exit 0 ;;
-	  coff-i386)
-		echo "${UNAME_MACHINE}-pc-linux-gnucoff"
-		exit 0 ;;
-	  "")
-		# Either a pre-BFD a.out linker (linux-gnuoldld) or
-		# one that does not give us useful --help.
-		echo "${UNAME_MACHINE}-pc-linux-gnuoldld"
-		exit 0 ;;
-	esac
-	# Determine whether the default compiler is a.out or elf
-	eval $set_cc_for_build
-	sed 's/^	//' << EOF >$dummy.c
-	#include <features.h>
-	#ifdef __ELF__
-	# ifdef __GLIBC__
-	#  if __GLIBC__ >= 2
-	LIBC=gnu
-	#  else
-	LIBC=gnulibc1
-	#  endif
-	# else
-	LIBC=gnulibc1
-	# endif
-	#else
-	#ifdef __INTEL_COMPILER
-	LIBC=gnu
-	#else
-	LIBC=gnuaout
-	#endif
-	#endif
-EOF
-	eval `$CC_FOR_BUILD -E $dummy.c 2>/dev/null | grep ^LIBC=`
-	test x"${LIBC}" != x && echo "${UNAME_MACHINE}-pc-linux-${LIBC}" && exit 0
-	test x"${TENTATIVE}" != x && echo "${TENTATIVE}" && exit 0
-	;;
+	set_cc_for_build
+	LIBCABI=$LIBC
+	if test "$CC_FOR_BUILD" != no_compiler_found; then
+	    if (echo '#ifdef __ILP32__'; echo IS_X32; echo '#endif') | \
+		(CCOPTS="" $CC_FOR_BUILD -E - 2>/dev/null) | \
+		grep IS_X32 >/dev/null
+	    then
+		LIBCABI="$LIBC"x32
+	    fi
+	fi
+	echo "$UNAME_MACHINE"-pc-linux-"$LIBCABI"
+	exit ;;
+    xtensa*:Linux:*:*)
+	echo "$UNAME_MACHINE"-unknown-linux-"$LIBC"
+	exit ;;
     i*86:DYNIX/ptx:4*:*)
 	# ptx 4.0 does uname -s correctly, with DYNIX/ptx in there.
 	# earlier versions are messed up and put the nodename in both
 	# sysname and nodename.
 	echo i386-sequent-sysv4
-	exit 0 ;;
+	exit ;;
     i*86:UNIX_SV:4.2MP:2.*)
-        # Unixware is an offshoot of SVR4, but it has its own version
-        # number series starting with 2...
-        # I am not positive that other SVR4 systems won't match this,
+	# Unixware is an offshoot of SVR4, but it has its own version
+	# number series starting with 2...
+	# I am not positive that other SVR4 systems won't match this,
 	# I just have to hope.  -- rms.
-        # Use sysv4.2uw... so that sysv4* matches it.
-	echo ${UNAME_MACHINE}-pc-sysv4.2uw${UNAME_VERSION}
-	exit 0 ;;
+	# Use sysv4.2uw... so that sysv4* matches it.
+	echo "$UNAME_MACHINE"-pc-sysv4.2uw"$UNAME_VERSION"
+	exit ;;
     i*86:OS/2:*:*)
 	# If we were able to find `uname', then EMX Unix compatibility
 	# is probably installed.
-	echo ${UNAME_MACHINE}-pc-os2-emx
-	exit 0 ;;
+	echo "$UNAME_MACHINE"-pc-os2-emx
+	exit ;;
     i*86:XTS-300:*:STOP)
-	echo ${UNAME_MACHINE}-unknown-stop
-	exit 0 ;;
+	echo "$UNAME_MACHINE"-unknown-stop
+	exit ;;
     i*86:atheos:*:*)
-	echo ${UNAME_MACHINE}-unknown-atheos
-	exit 0 ;;
-    i*86:LynxOS:2.*:* | i*86:LynxOS:3.[01]*:* | i*86:LynxOS:4.0*:*)
-	echo i386-unknown-lynxos${UNAME_RELEASE}
-	exit 0 ;;
+	echo "$UNAME_MACHINE"-unknown-atheos
+	exit ;;
+    i*86:syllable:*:*)
+	echo "$UNAME_MACHINE"-pc-syllable
+	exit ;;
+    i*86:LynxOS:2.*:* | i*86:LynxOS:3.[01]*:* | i*86:LynxOS:4.[02]*:*)
+	echo i386-unknown-lynxos"$UNAME_RELEASE"
+	exit ;;
     i*86:*DOS:*:*)
-	echo ${UNAME_MACHINE}-pc-msdosdjgpp
-	exit 0 ;;
-    i*86:*:4.*:* | i*86:SYSTEM_V:4.*:*)
-	UNAME_REL=`echo ${UNAME_RELEASE} | sed 's/\/MP$//'`
+	echo "$UNAME_MACHINE"-pc-msdosdjgpp
+	exit ;;
+    i*86:*:4.*:*)
+	UNAME_REL=$(echo "$UNAME_RELEASE" | sed 's/\/MP$//')
 	if grep Novell /usr/include/link.h >/dev/null 2>/dev/null; then
-		echo ${UNAME_MACHINE}-univel-sysv${UNAME_REL}
+		echo "$UNAME_MACHINE"-univel-sysv"$UNAME_REL"
 	else
-		echo ${UNAME_MACHINE}-pc-sysv${UNAME_REL}
+		echo "$UNAME_MACHINE"-pc-sysv"$UNAME_REL"
 	fi
-	exit 0 ;;
-    i*86:*:5:[78]*)
-	case `/bin/uname -X | grep "^Machine"` in
+	exit ;;
+    i*86:*:5:[678]*)
+	# UnixWare 7.x, OpenUNIX and OpenServer 6.
+	case $(/bin/uname -X | grep "^Machine") in
 	    *486*)	     UNAME_MACHINE=i486 ;;
 	    *Pentium)	     UNAME_MACHINE=i586 ;;
 	    *Pent*|*Celeron) UNAME_MACHINE=i686 ;;
 	esac
-	echo ${UNAME_MACHINE}-unknown-sysv${UNAME_RELEASE}${UNAME_SYSTEM}${UNAME_VERSION}
-	exit 0 ;;
+	echo "$UNAME_MACHINE-unknown-sysv${UNAME_RELEASE}${UNAME_SYSTEM}${UNAME_VERSION}"
+	exit ;;
     i*86:*:3.2:*)
 	if test -f /usr/options/cb.name; then
-		UNAME_REL=`sed -n 's/.*Version //p' </usr/options/cb.name`
-		echo ${UNAME_MACHINE}-pc-isc$UNAME_REL
+		UNAME_REL=$(sed -n 's/.*Version //p' </usr/options/cb.name)
+		echo "$UNAME_MACHINE"-pc-isc"$UNAME_REL"
 	elif /bin/uname -X 2>/dev/null >/dev/null ; then
-		UNAME_REL=`(/bin/uname -X|grep Release|sed -e 's/.*= //')`
+		UNAME_REL=$( (/bin/uname -X|grep Release|sed -e 's/.*= //'))
 		(/bin/uname -X|grep i80486 >/dev/null) && UNAME_MACHINE=i486
 		(/bin/uname -X|grep '^Machine.*Pentium' >/dev/null) \
 			&& UNAME_MACHINE=i586
@@ -997,208 +1187,329 @@ EOF
 			&& UNAME_MACHINE=i686
 		(/bin/uname -X|grep '^Machine.*Pentium Pro' >/dev/null) \
 			&& UNAME_MACHINE=i686
-		echo ${UNAME_MACHINE}-pc-sco$UNAME_REL
+		echo "$UNAME_MACHINE"-pc-sco"$UNAME_REL"
 	else
-		echo ${UNAME_MACHINE}-pc-sysv32
+		echo "$UNAME_MACHINE"-pc-sysv32
 	fi
-	exit 0 ;;
+	exit ;;
     pc:*:*:*)
 	# Left here for compatibility:
-        # uname -m prints for DJGPP always 'pc', but it prints nothing about
-        # the processor, so we play safe by assuming i386.
-	echo i386-pc-msdosdjgpp
-        exit 0 ;;
+	# uname -m prints for DJGPP always 'pc', but it prints nothing about
+	# the processor, so we play safe by assuming i586.
+	# Note: whatever this is, it MUST be the same as what config.sub
+	# prints for the "djgpp" host, or else GDB configure will decide that
+	# this is a cross-build.
+	echo i586-pc-msdosdjgpp
+	exit ;;
     Intel:Mach:3*:*)
 	echo i386-pc-mach3
-	exit 0 ;;
+	exit ;;
     paragon:*:*:*)
 	echo i860-intel-osf1
-	exit 0 ;;
+	exit ;;
     i860:*:4.*:*) # i860-SVR4
 	if grep Stardent /usr/include/sys/uadmin.h >/dev/null 2>&1 ; then
-	  echo i860-stardent-sysv${UNAME_RELEASE} # Stardent Vistra i860-SVR4
+	  echo i860-stardent-sysv"$UNAME_RELEASE" # Stardent Vistra i860-SVR4
 	else # Add other i860-SVR4 vendors below as they are discovered.
-	  echo i860-unknown-sysv${UNAME_RELEASE}  # Unknown i860-SVR4
+	  echo i860-unknown-sysv"$UNAME_RELEASE"  # Unknown i860-SVR4
 	fi
-	exit 0 ;;
+	exit ;;
     mini*:CTIX:SYS*5:*)
 	# "miniframe"
 	echo m68010-convergent-sysv
-	exit 0 ;;
+	exit ;;
     mc68k:UNIX:SYSTEM5:3.51m)
 	echo m68k-convergent-sysv
-	exit 0 ;;
+	exit ;;
     M680?0:D-NIX:5.3:*)
 	echo m68k-diab-dnix
-	exit 0 ;;
-    M68*:*:R3V[567]*:*)
-	test -r /sysV68 && echo 'm68k-motorola-sysv' && exit 0 ;;
-    3[34]??:*:4.0:3.0 | 3[34]??A:*:4.0:3.0 | 3[34]??,*:*:4.0:3.0 | 3[34]??/*:*:4.0:3.0 | 4400:*:4.0:3.0 | 4850:*:4.0:3.0 | SKA40:*:4.0:3.0 | SDS2:*:4.0:3.0 | SHG2:*:4.0:3.0)
+	exit ;;
+    M68*:*:R3V[5678]*:*)
+	test -r /sysV68 && { echo 'm68k-motorola-sysv'; exit; } ;;
+    3[345]??:*:4.0:3.0 | 3[34]??A:*:4.0:3.0 | 3[34]??,*:*:4.0:3.0 | 3[34]??/*:*:4.0:3.0 | 4400:*:4.0:3.0 | 4850:*:4.0:3.0 | SKA40:*:4.0:3.0 | SDS2:*:4.0:3.0 | SHG2:*:4.0:3.0 | S7501*:*:4.0:3.0)
 	OS_REL=''
 	test -r /etc/.relid \
-	&& OS_REL=.`sed -n 's/[^ ]* [^ ]* \([0-9][0-9]\).*/\1/p' < /etc/.relid`
+	&& OS_REL=.$(sed -n 's/[^ ]* [^ ]* \([0-9][0-9]\).*/\1/p' < /etc/.relid)
 	/bin/uname -p 2>/dev/null | grep 86 >/dev/null \
-	  && echo i486-ncr-sysv4.3${OS_REL} && exit 0
+	  && { echo i486-ncr-sysv4.3"$OS_REL"; exit; }
 	/bin/uname -p 2>/dev/null | /bin/grep entium >/dev/null \
-	  && echo i586-ncr-sysv4.3${OS_REL} && exit 0 ;;
+	  && { echo i586-ncr-sysv4.3"$OS_REL"; exit; } ;;
     3[34]??:*:4.0:* | 3[34]??,*:*:4.0:*)
-        /bin/uname -p 2>/dev/null | grep 86 >/dev/null \
-          && echo i486-ncr-sysv4 && exit 0 ;;
+	/bin/uname -p 2>/dev/null | grep 86 >/dev/null \
+	  && { echo i486-ncr-sysv4; exit; } ;;
+    NCR*:*:4.2:* | MPRAS*:*:4.2:*)
+	OS_REL='.3'
+	test -r /etc/.relid \
+	    && OS_REL=.$(sed -n 's/[^ ]* [^ ]* \([0-9][0-9]\).*/\1/p' < /etc/.relid)
+	/bin/uname -p 2>/dev/null | grep 86 >/dev/null \
+	    && { echo i486-ncr-sysv4.3"$OS_REL"; exit; }
+	/bin/uname -p 2>/dev/null | /bin/grep entium >/dev/null \
+	    && { echo i586-ncr-sysv4.3"$OS_REL"; exit; }
+	/bin/uname -p 2>/dev/null | /bin/grep pteron >/dev/null \
+	    && { echo i586-ncr-sysv4.3"$OS_REL"; exit; } ;;
     m68*:LynxOS:2.*:* | m68*:LynxOS:3.0*:*)
-	echo m68k-unknown-lynxos${UNAME_RELEASE}
-	exit 0 ;;
+	echo m68k-unknown-lynxos"$UNAME_RELEASE"
+	exit ;;
     mc68030:UNIX_System_V:4.*:*)
 	echo m68k-atari-sysv4
-	exit 0 ;;
+	exit ;;
     TSUNAMI:LynxOS:2.*:*)
-	echo sparc-unknown-lynxos${UNAME_RELEASE}
-	exit 0 ;;
+	echo sparc-unknown-lynxos"$UNAME_RELEASE"
+	exit ;;
     rs6000:LynxOS:2.*:*)
-	echo rs6000-unknown-lynxos${UNAME_RELEASE}
-	exit 0 ;;
-    PowerPC:LynxOS:2.*:* | PowerPC:LynxOS:3.[01]*:* | PowerPC:LynxOS:4.0*:*)
-	echo powerpc-unknown-lynxos${UNAME_RELEASE}
-	exit 0 ;;
+	echo rs6000-unknown-lynxos"$UNAME_RELEASE"
+	exit ;;
+    PowerPC:LynxOS:2.*:* | PowerPC:LynxOS:3.[01]*:* | PowerPC:LynxOS:4.[02]*:*)
+	echo powerpc-unknown-lynxos"$UNAME_RELEASE"
+	exit ;;
     SM[BE]S:UNIX_SV:*:*)
-	echo mips-dde-sysv${UNAME_RELEASE}
-	exit 0 ;;
+	echo mips-dde-sysv"$UNAME_RELEASE"
+	exit ;;
     RM*:ReliantUNIX-*:*:*)
 	echo mips-sni-sysv4
-	exit 0 ;;
+	exit ;;
     RM*:SINIX-*:*:*)
 	echo mips-sni-sysv4
-	exit 0 ;;
+	exit ;;
     *:SINIX-*:*:*)
 	if uname -p 2>/dev/null >/dev/null ; then
-		UNAME_MACHINE=`(uname -p) 2>/dev/null`
-		echo ${UNAME_MACHINE}-sni-sysv4
+		UNAME_MACHINE=$( (uname -p) 2>/dev/null)
+		echo "$UNAME_MACHINE"-sni-sysv4
 	else
 		echo ns32k-sni-sysv
 	fi
-	exit 0 ;;
-    PENTIUM:*:4.0*:*) # Unisys `ClearPath HMP IX 4000' SVR4/MP effort
-                      # says <Richard.M.Bartel@ccMail.Census.GOV>
-        echo i586-unisys-sysv4
-        exit 0 ;;
+	exit ;;
+    PENTIUM:*:4.0*:*)	# Unisys `ClearPath HMP IX 4000' SVR4/MP effort
+			# says <Richard.M.Bartel@ccMail.Census.GOV>
+	echo i586-unisys-sysv4
+	exit ;;
     *:UNIX_System_V:4*:FTX*)
 	# From Gerald Hewes <hewes@openmarket.com>.
 	# How about differentiating between stratus architectures? -djm
 	echo hppa1.1-stratus-sysv4
-	exit 0 ;;
+	exit ;;
     *:*:*:FTX*)
 	# From seanf@swdc.stratus.com.
 	echo i860-stratus-sysv4
-	exit 0 ;;
+	exit ;;
+    i*86:VOS:*:*)
+	# From Paul.Green@stratus.com.
+	echo "$UNAME_MACHINE"-stratus-vos
+	exit ;;
     *:VOS:*:*)
 	# From Paul.Green@stratus.com.
 	echo hppa1.1-stratus-vos
-	exit 0 ;;
+	exit ;;
     mc68*:A/UX:*:*)
-	echo m68k-apple-aux${UNAME_RELEASE}
-	exit 0 ;;
+	echo m68k-apple-aux"$UNAME_RELEASE"
+	exit ;;
     news*:NEWS-OS:6*:*)
 	echo mips-sony-newsos6
-	exit 0 ;;
+	exit ;;
     R[34]000:*System_V*:*:* | R4000:UNIX_SYSV:*:* | R*000:UNIX_SV:*:*)
-	if [ -d /usr/nec ]; then
-	        echo mips-nec-sysv${UNAME_RELEASE}
+	if test -d /usr/nec; then
+		echo mips-nec-sysv"$UNAME_RELEASE"
 	else
-	        echo mips-unknown-sysv${UNAME_RELEASE}
+		echo mips-unknown-sysv"$UNAME_RELEASE"
 	fi
-        exit 0 ;;
+	exit ;;
     BeBox:BeOS:*:*)	# BeOS running on hardware made by Be, PPC only.
 	echo powerpc-be-beos
-	exit 0 ;;
+	exit ;;
     BeMac:BeOS:*:*)	# BeOS running on Mac or Mac clone, PPC only.
 	echo powerpc-apple-beos
-	exit 0 ;;
+	exit ;;
     BePC:BeOS:*:*)	# BeOS running on Intel PC compatible.
 	echo i586-pc-beos
-	exit 0 ;;
+	exit ;;
+    BePC:Haiku:*:*)	# Haiku running on Intel PC compatible.
+	echo i586-pc-haiku
+	exit ;;
+    x86_64:Haiku:*:*)
+	echo x86_64-unknown-haiku
+	exit ;;
     SX-4:SUPER-UX:*:*)
-	echo sx4-nec-superux${UNAME_RELEASE}
-	exit 0 ;;
+	echo sx4-nec-superux"$UNAME_RELEASE"
+	exit ;;
     SX-5:SUPER-UX:*:*)
-	echo sx5-nec-superux${UNAME_RELEASE}
-	exit 0 ;;
+	echo sx5-nec-superux"$UNAME_RELEASE"
+	exit ;;
     SX-6:SUPER-UX:*:*)
-	echo sx6-nec-superux${UNAME_RELEASE}
-	exit 0 ;;
+	echo sx6-nec-superux"$UNAME_RELEASE"
+	exit ;;
+    SX-7:SUPER-UX:*:*)
+	echo sx7-nec-superux"$UNAME_RELEASE"
+	exit ;;
+    SX-8:SUPER-UX:*:*)
+	echo sx8-nec-superux"$UNAME_RELEASE"
+	exit ;;
+    SX-8R:SUPER-UX:*:*)
+	echo sx8r-nec-superux"$UNAME_RELEASE"
+	exit ;;
+    SX-ACE:SUPER-UX:*:*)
+	echo sxace-nec-superux"$UNAME_RELEASE"
+	exit ;;
     Power*:Rhapsody:*:*)
-	echo powerpc-apple-rhapsody${UNAME_RELEASE}
-	exit 0 ;;
+	echo powerpc-apple-rhapsody"$UNAME_RELEASE"
+	exit ;;
     *:Rhapsody:*:*)
-	echo ${UNAME_MACHINE}-apple-rhapsody${UNAME_RELEASE}
-	exit 0 ;;
+	echo "$UNAME_MACHINE"-apple-rhapsody"$UNAME_RELEASE"
+	exit ;;
+    arm64:Darwin:*:*)
+	echo aarch64-apple-darwin"$UNAME_RELEASE"
+	exit ;;
     *:Darwin:*:*)
-	case `uname -p` in
-	    *86) UNAME_PROCESSOR=i686 ;;
-	    powerpc) UNAME_PROCESSOR=powerpc ;;
+	UNAME_PROCESSOR=$(uname -p)
+	case $UNAME_PROCESSOR in
+	    unknown) UNAME_PROCESSOR=powerpc ;;
 	esac
-	echo ${UNAME_PROCESSOR}-apple-darwin${UNAME_RELEASE}
-	exit 0 ;;
+	if command -v xcode-select > /dev/null 2> /dev/null && \
+		! xcode-select --print-path > /dev/null 2> /dev/null ; then
+	    # Avoid executing cc if there is no toolchain installed as
+	    # cc will be a stub that puts up a graphical alert
+	    # prompting the user to install developer tools.
+	    CC_FOR_BUILD=no_compiler_found
+	else
+	    set_cc_for_build
+	fi
+	if test "$CC_FOR_BUILD" != no_compiler_found; then
+	    if (echo '#ifdef __LP64__'; echo IS_64BIT_ARCH; echo '#endif') | \
+		   (CCOPTS="" $CC_FOR_BUILD -E - 2>/dev/null) | \
+		   grep IS_64BIT_ARCH >/dev/null
+	    then
+		case $UNAME_PROCESSOR in
+		    i386) UNAME_PROCESSOR=x86_64 ;;
+		    powerpc) UNAME_PROCESSOR=powerpc64 ;;
+		esac
+	    fi
+	    # On 10.4-10.6 one might compile for PowerPC via gcc -arch ppc
+	    if (echo '#ifdef __POWERPC__'; echo IS_PPC; echo '#endif') | \
+		   (CCOPTS="" $CC_FOR_BUILD -E - 2>/dev/null) | \
+		   grep IS_PPC >/dev/null
+	    then
+		UNAME_PROCESSOR=powerpc
+	    fi
+	elif test "$UNAME_PROCESSOR" = i386 ; then
+	    # uname -m returns i386 or x86_64
+	    UNAME_PROCESSOR=$UNAME_MACHINE
+	fi
+	echo "$UNAME_PROCESSOR"-apple-darwin"$UNAME_RELEASE"
+	exit ;;
     *:procnto*:*:* | *:QNX:[0123456789]*:*)
-	UNAME_PROCESSOR=`uname -p`
-	if test "$UNAME_PROCESSOR" = "x86"; then
+	UNAME_PROCESSOR=$(uname -p)
+	if test "$UNAME_PROCESSOR" = x86; then
 		UNAME_PROCESSOR=i386
 		UNAME_MACHINE=pc
 	fi
-	echo ${UNAME_PROCESSOR}-${UNAME_MACHINE}-nto-qnx${UNAME_RELEASE}
-	exit 0 ;;
+	echo "$UNAME_PROCESSOR"-"$UNAME_MACHINE"-nto-qnx"$UNAME_RELEASE"
+	exit ;;
     *:QNX:*:4*)
 	echo i386-pc-qnx
-	exit 0 ;;
-    NSR-[DGKLNPTVW]:NONSTOP_KERNEL:*:*)
-	echo nsr-tandem-nsk${UNAME_RELEASE}
-	exit 0 ;;
+	exit ;;
+    NEO-*:NONSTOP_KERNEL:*:*)
+	echo neo-tandem-nsk"$UNAME_RELEASE"
+	exit ;;
+    NSE-*:NONSTOP_KERNEL:*:*)
+	echo nse-tandem-nsk"$UNAME_RELEASE"
+	exit ;;
+    NSR-*:NONSTOP_KERNEL:*:*)
+	echo nsr-tandem-nsk"$UNAME_RELEASE"
+	exit ;;
+    NSV-*:NONSTOP_KERNEL:*:*)
+	echo nsv-tandem-nsk"$UNAME_RELEASE"
+	exit ;;
+    NSX-*:NONSTOP_KERNEL:*:*)
+	echo nsx-tandem-nsk"$UNAME_RELEASE"
+	exit ;;
     *:NonStop-UX:*:*)
 	echo mips-compaq-nonstopux
-	exit 0 ;;
+	exit ;;
     BS2000:POSIX*:*:*)
 	echo bs2000-siemens-sysv
-	exit 0 ;;
+	exit ;;
     DS/*:UNIX_System_V:*:*)
-	echo ${UNAME_MACHINE}-${UNAME_SYSTEM}-${UNAME_RELEASE}
-	exit 0 ;;
+	echo "$UNAME_MACHINE"-"$UNAME_SYSTEM"-"$UNAME_RELEASE"
+	exit ;;
     *:Plan9:*:*)
 	# "uname -m" is not consistent, so use $cputype instead. 386
 	# is converted to i386 for consistency with other x86
 	# operating systems.
-	if test "$cputype" = "386"; then
+	# shellcheck disable=SC2154
+	if test "$cputype" = 386; then
 	    UNAME_MACHINE=i386
 	else
 	    UNAME_MACHINE="$cputype"
 	fi
-	echo ${UNAME_MACHINE}-unknown-plan9
-	exit 0 ;;
+	echo "$UNAME_MACHINE"-unknown-plan9
+	exit ;;
     *:TOPS-10:*:*)
 	echo pdp10-unknown-tops10
-	exit 0 ;;
+	exit ;;
     *:TENEX:*:*)
 	echo pdp10-unknown-tenex
-	exit 0 ;;
+	exit ;;
     KS10:TOPS-20:*:* | KL10:TOPS-20:*:* | TYPE4:TOPS-20:*:*)
 	echo pdp10-dec-tops20
-	exit 0 ;;
+	exit ;;
     XKL-1:TOPS-20:*:* | TYPE5:TOPS-20:*:*)
 	echo pdp10-xkl-tops20
-	exit 0 ;;
+	exit ;;
     *:TOPS-20:*:*)
 	echo pdp10-unknown-tops20
-	exit 0 ;;
+	exit ;;
     *:ITS:*:*)
 	echo pdp10-unknown-its
-	exit 0 ;;
+	exit ;;
+    SEI:*:*:SEIUX)
+	echo mips-sei-seiux"$UNAME_RELEASE"
+	exit ;;
+    *:DragonFly:*:*)
+	echo "$UNAME_MACHINE"-unknown-dragonfly"$(echo "$UNAME_RELEASE"|sed -e 's/[-(].*//')"
+	exit ;;
+    *:*VMS:*:*)
+	UNAME_MACHINE=$( (uname -p) 2>/dev/null)
+	case "$UNAME_MACHINE" in
+	    A*) echo alpha-dec-vms ; exit ;;
+	    I*) echo ia64-dec-vms ; exit ;;
+	    V*) echo vax-dec-vms ; exit ;;
+	esac ;;
+    *:XENIX:*:SysV)
+	echo i386-pc-xenix
+	exit ;;
+    i*86:skyos:*:*)
+	echo "$UNAME_MACHINE"-pc-skyos"$(echo "$UNAME_RELEASE" | sed -e 's/ .*$//')"
+	exit ;;
+    i*86:rdos:*:*)
+	echo "$UNAME_MACHINE"-pc-rdos
+	exit ;;
+    *:AROS:*:*)
+	echo "$UNAME_MACHINE"-unknown-aros
+	exit ;;
+    x86_64:VMkernel:*:*)
+	echo "$UNAME_MACHINE"-unknown-esx
+	exit ;;
+    amd64:Isilon\ OneFS:*:*)
+	echo x86_64-unknown-onefs
+	exit ;;
+    *:Unleashed:*:*)
+	echo "$UNAME_MACHINE"-unknown-unleashed"$UNAME_RELEASE"
+	exit ;;
 esac
 
-#echo '(No uname command or uname output not recognized.)' 1>&2
-#echo "${UNAME_MACHINE}:${UNAME_SYSTEM}:${UNAME_RELEASE}:${UNAME_VERSION}" 1>&2
-
-eval $set_cc_for_build
-cat >$dummy.c <<EOF
+# No uname command or uname output not recognized.
+set_cc_for_build
+cat > "$dummy.c" <<EOF
 #ifdef _SEQUENT_
-# include <sys/types.h>
-# include <sys/utsname.h>
+#include <sys/types.h>
+#include <sys/utsname.h>
+#endif
+#if defined(ultrix) || defined(_ultrix) || defined(__ultrix) || defined(__ultrix__)
+#if defined (vax) || defined (__vax) || defined (__vax__) || defined(mips) || defined(__mips) || defined(__mips__) || defined(MIPS) || defined(__MIPS__)
+#include <signal.h>
+#if defined(_SIZE_T_) || defined(SIGLOST)
+#include <sys/utsname.h>
+#endif
+#endif
 #endif
 main ()
 {
@@ -1211,28 +1522,20 @@ main ()
 #include <sys/param.h>
   printf ("m68k-sony-newsos%s\n",
 #ifdef NEWSOS4
-          "4"
+  "4"
 #else
-	  ""
+  ""
 #endif
-         ); exit (0);
+  ); exit (0);
 #endif
 #endif
 
-#if defined (__arm) && defined (__acorn) && defined (__unix)
-  printf ("arm-acorn-riscix"); exit (0);
-#endif
-
-#if defined (hp300) && !defined (hpux)
-  printf ("m68k-hp-bsd\n"); exit (0);
-#endif
-
 #if defined (NeXT)
 #if !defined (__ARCHITECTURE__)
 #define __ARCHITECTURE__ "m68k"
 #endif
   int version;
-  version=`(hostinfo | sed -n 's/.*NeXT Mach \([0-9]*\).*/\1/p') 2>/dev/null`;
+  version=$( (hostinfo | sed -n 's/.*NeXT Mach \([0-9]*\).*/\1/p') 2>/dev/null);
   if (version < 4)
     printf ("%s-next-nextstep%d\n", __ARCHITECTURE__, version);
   else
@@ -1266,39 +1569,54 @@ main ()
 #endif
 
 #if defined (_SEQUENT_)
-    struct utsname un;
-
-    uname(&un);
-
-    if (strncmp(un.version, "V2", 2) == 0) {
-	printf ("i386-sequent-ptx2\n"); exit (0);
-    }
-    if (strncmp(un.version, "V1", 2) == 0) { /* XXX is V1 correct? */
-	printf ("i386-sequent-ptx1\n"); exit (0);
-    }
-    printf ("i386-sequent-ptx\n"); exit (0);
+  struct utsname un;
 
+  uname(&un);
+  if (strncmp(un.version, "V2", 2) == 0) {
+    printf ("i386-sequent-ptx2\n"); exit (0);
+  }
+  if (strncmp(un.version, "V1", 2) == 0) { /* XXX is V1 correct? */
+    printf ("i386-sequent-ptx1\n"); exit (0);
+  }
+  printf ("i386-sequent-ptx\n"); exit (0);
 #endif
 
 #if defined (vax)
-# if !defined (ultrix)
-#  include <sys/param.h>
-#  if defined (BSD)
-#   if BSD == 43
-      printf ("vax-dec-bsd4.3\n"); exit (0);
-#   else
-#    if BSD == 199006
-      printf ("vax-dec-bsd4.3reno\n"); exit (0);
-#    else
-      printf ("vax-dec-bsd\n"); exit (0);
-#    endif
-#   endif
-#  else
-    printf ("vax-dec-bsd\n"); exit (0);
-#  endif
-# else
-    printf ("vax-dec-ultrix\n"); exit (0);
-# endif
+#if !defined (ultrix)
+#include <sys/param.h>
+#if defined (BSD)
+#if BSD == 43
+  printf ("vax-dec-bsd4.3\n"); exit (0);
+#else
+#if BSD == 199006
+  printf ("vax-dec-bsd4.3reno\n"); exit (0);
+#else
+  printf ("vax-dec-bsd\n"); exit (0);
+#endif
+#endif
+#else
+  printf ("vax-dec-bsd\n"); exit (0);
+#endif
+#else
+#if defined(_SIZE_T_) || defined(SIGLOST)
+  struct utsname un;
+  uname (&un);
+  printf ("vax-dec-ultrix%s\n", un.release); exit (0);
+#else
+  printf ("vax-dec-ultrix\n"); exit (0);
+#endif
+#endif
+#endif
+#if defined(ultrix) || defined(_ultrix) || defined(__ultrix) || defined(__ultrix__)
+#if defined(mips) || defined(__mips) || defined(__mips__) || defined(MIPS) || defined(__MIPS__)
+#if defined(_SIZE_T_) || defined(SIGLOST)
+  struct utsname *un;
+  uname (&un);
+  printf ("mips-dec-ultrix%s\n", un.release); exit (0);
+#else
+  printf ("mips-dec-ultrix\n"); exit (0);
+#endif
+#endif
 #endif
 
 #if defined (alliant) && defined (i860)
@@ -1309,79 +1627,73 @@ main ()
 }
 EOF
 
-$CC_FOR_BUILD -o $dummy $dummy.c 2>/dev/null && $dummy && exit 0
+$CC_FOR_BUILD -o "$dummy" "$dummy.c" 2>/dev/null && SYSTEM_NAME=$($dummy) &&
+	{ echo "$SYSTEM_NAME"; exit; }
 
 # Apollos put the system type in the environment.
+test -d /usr/apollo && { echo "$ISP-apollo-$SYSTYPE"; exit; }
 
-test -d /usr/apollo && { echo ${ISP}-apollo-${SYSTYPE}; exit 0; }
+echo "$0: unable to guess system type" >&2
 
-# Convex versions that predate uname can use getsysinfo(1)
+case "$UNAME_MACHINE:$UNAME_SYSTEM" in
+    mips:Linux | mips64:Linux)
+	# If we got here on MIPS GNU/Linux, output extra information.
+	cat >&2 <<EOF
 
-if [ -x /usr/convex/getsysinfo ]
-then
-    case `getsysinfo -f cpu_type` in
-    c1*)
-	echo c1-convex-bsd
-	exit 0 ;;
-    c2*)
-	if getsysinfo -f scalar_acc
-	then echo c32-convex-bsd
-	else echo c2-convex-bsd
-	fi
-	exit 0 ;;
-    c34*)
-	echo c34-convex-bsd
-	exit 0 ;;
-    c38*)
-	echo c38-convex-bsd
-	exit 0 ;;
-    c4*)
-	echo c4-convex-bsd
-	exit 0 ;;
-    esac
-fi
+NOTE: MIPS GNU/Linux systems require a C compiler to fully recognize
+the system type. Please install a C compiler and try again.
+EOF
+	;;
+esac
 
 cat >&2 <<EOF
-$0: unable to guess system type
 
-This script, last modified $timestamp, has failed to recognize
-the operating system you are using. It is advised that you
-download the most up to date version of the config scripts from
+This script (version $timestamp), has failed to recognize the
+operating system you are using. If your script is old, overwrite *all*
+copies of config.guess and config.sub with the latest versions from:
 
-    ftp://ftp.gnu.org/pub/gnu/config/
+  https://git.savannah.gnu.org/cgit/config.git/plain/config.guess
+and
+  https://git.savannah.gnu.org/cgit/config.git/plain/config.sub
+EOF
 
-If the version you run ($0) is already up to date, please
-send the following data and any information you think might be
-pertinent to <config-patches@gnu.org> in order to provide the needed
-information to handle your system.
+year=$(echo $timestamp | sed 's,-.*,,')
+# shellcheck disable=SC2003
+if test "$(expr "$(date +%Y)" - "$year")" -lt 3 ; then
+   cat >&2 <<EOF
+
+If $0 has already been updated, send the following data and any
+information you think might be pertinent to config-patches@gnu.org to
+provide the necessary information to handle your system.
 
 config.guess timestamp = $timestamp
 
-uname -m = `(uname -m) 2>/dev/null || echo unknown`
-uname -r = `(uname -r) 2>/dev/null || echo unknown`
-uname -s = `(uname -s) 2>/dev/null || echo unknown`
-uname -v = `(uname -v) 2>/dev/null || echo unknown`
+uname -m = $( (uname -m) 2>/dev/null || echo unknown)
+uname -r = $( (uname -r) 2>/dev/null || echo unknown)
+uname -s = $( (uname -s) 2>/dev/null || echo unknown)
+uname -v = $( (uname -v) 2>/dev/null || echo unknown)
 
-/usr/bin/uname -p = `(/usr/bin/uname -p) 2>/dev/null`
-/bin/uname -X     = `(/bin/uname -X) 2>/dev/null`
+/usr/bin/uname -p = $( (/usr/bin/uname -p) 2>/dev/null)
+/bin/uname -X     = $( (/bin/uname -X) 2>/dev/null)
 
-hostinfo               = `(hostinfo) 2>/dev/null`
-/bin/universe          = `(/bin/universe) 2>/dev/null`
-/usr/bin/arch -k       = `(/usr/bin/arch -k) 2>/dev/null`
-/bin/arch              = `(/bin/arch) 2>/dev/null`
-/usr/bin/oslevel       = `(/usr/bin/oslevel) 2>/dev/null`
-/usr/convex/getsysinfo = `(/usr/convex/getsysinfo) 2>/dev/null`
+hostinfo               = $( (hostinfo) 2>/dev/null)
+/bin/universe          = $( (/bin/universe) 2>/dev/null)
+/usr/bin/arch -k       = $( (/usr/bin/arch -k) 2>/dev/null)
+/bin/arch              = $( (/bin/arch) 2>/dev/null)
+/usr/bin/oslevel       = $( (/usr/bin/oslevel) 2>/dev/null)
+/usr/convex/getsysinfo = $( (/usr/convex/getsysinfo) 2>/dev/null)
 
-UNAME_MACHINE = ${UNAME_MACHINE}
-UNAME_RELEASE = ${UNAME_RELEASE}
-UNAME_SYSTEM  = ${UNAME_SYSTEM}
-UNAME_VERSION = ${UNAME_VERSION}
+UNAME_MACHINE = "$UNAME_MACHINE"
+UNAME_RELEASE = "$UNAME_RELEASE"
+UNAME_SYSTEM  = "$UNAME_SYSTEM"
+UNAME_VERSION = "$UNAME_VERSION"
 EOF
+fi
 
 exit 1
 
 # Local variables:
-# eval: (add-hook 'write-file-hooks 'time-stamp)
+# eval: (add-hook 'before-save-hook 'time-stamp)
 # time-stamp-start: "timestamp='"
 # time-stamp-format: "%:y-%02m-%02d"
 # time-stamp-end: "'"
diff --git a/config/config.sub b/config/config.sub
index fe4f1ed..63c1f1c 100755
--- a/config/config.sub
+++ b/config/config.sub
@@ -1,42 +1,40 @@
 #! /bin/sh
 # Configuration validation subroutine script.
-#   Copyright (C) 1992, 1993, 1994, 1995, 1996, 1997, 1998, 1999,
-#   2000, 2001, 2002, 2003 Free Software Foundation, Inc.
+#   Copyright 1992-2021 Free Software Foundation, Inc.
 
-timestamp='2003-05-09'
+timestamp='2021-01-08'
 
-# This file is (in principle) common to ALL GNU software.
-# The presence of a machine in this file suggests that SOME GNU software
-# can handle that machine.  It does not imply ALL GNU software can.
-#
-# This file is free software; you can redistribute it and/or modify
-# it under the terms of the GNU General Public License as published by
-# the Free Software Foundation; either version 2 of the License, or
+# This file is free software; you can redistribute it and/or modify it
+# under the terms of the GNU General Public License as published by
+# the Free Software Foundation; either version 3 of the License, or
 # (at your option) any later version.
 #
-# This program is distributed in the hope that it will be useful,
-# but WITHOUT ANY WARRANTY; without even the implied warranty of
-# MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
-# GNU General Public License for more details.
+# This program is distributed in the hope that it will be useful, but
+# WITHOUT ANY WARRANTY; without even the implied warranty of
+# MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU
+# General Public License for more details.
 #
 # You should have received a copy of the GNU General Public License
-# along with this program; if not, write to the Free Software
-# Foundation, Inc., 59 Temple Place - Suite 330,
-# Boston, MA 02111-1307, USA.
-
+# along with this program; if not, see <https://www.gnu.org/licenses/>.
+#
 # As a special exception to the GNU General Public License, if you
 # distribute this file as part of a program that contains a
 # configuration script generated by Autoconf, you may include it under
-# the same distribution terms that you use for the rest of that program.
+# the same distribution terms that you use for the rest of that
+# program.  This Exception is an additional permission under section 7
+# of the GNU General Public License, version 3 ("GPLv3").
 
-# Please send patches to <config-patches@gnu.org>.  Submit a context
-# diff and a properly formatted ChangeLog entry.
+
+# Please send patches to <config-patches@gnu.org>.
 #
 # Configuration subroutine to validate and canonicalize a configuration type.
 # Supply the specified configuration type as an argument.
 # If it is invalid, we print an error message on stderr and exit with code 1.
 # Otherwise, we print the canonical config type on stdout and succeed.
 
+# You can get the latest version of this script from:
+# https://git.savannah.gnu.org/cgit/config.git/plain/config.sub
+
 # This file is supposed to be the same for all GNU packages
 # and recognize all the CPU types, system types and aliases
 # that are meaningful with *any* GNU software.
@@ -52,15 +50,14 @@ timestamp='2003-05-09'
 #	CPU_TYPE-MANUFACTURER-KERNEL-OPERATING_SYSTEM
 # It is wrong to echo any other type of specification.
 
-me=`echo "$0" | sed -e 's,.*/,,'`
+me=$(echo "$0" | sed -e 's,.*/,,')
 
 usage="\
-Usage: $0 [OPTION] CPU-MFR-OPSYS
-       $0 [OPTION] ALIAS
+Usage: $0 [OPTION] CPU-MFR-OPSYS or ALIAS
 
 Canonicalize a configuration name.
 
-Operation modes:
+Options:
   -h, --help         print this help, then exit
   -t, --time-stamp   print date of last modification, then exit
   -v, --version      print version number, then exit
@@ -70,8 +67,7 @@ Report bugs and patches to <config-patches@gnu.org>."
 version="\
 GNU config.sub ($timestamp)
 
-Copyright (C) 1992, 1993, 1994, 1995, 1996, 1997, 1998, 1999, 2000, 2001
-Free Software Foundation, Inc.
+Copyright 1992-2021 Free Software Foundation, Inc.
 
 This is free software; see the source for copying conditions.  There is NO
 warranty; not even for MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE."
@@ -83,23 +79,23 @@ Try \`$me --help' for more information."
 while test $# -gt 0 ; do
   case $1 in
     --time-stamp | --time* | -t )
-       echo "$timestamp" ; exit 0 ;;
+       echo "$timestamp" ; exit ;;
     --version | -v )
-       echo "$version" ; exit 0 ;;
+       echo "$version" ; exit ;;
     --help | --h* | -h )
-       echo "$usage"; exit 0 ;;
+       echo "$usage"; exit ;;
     -- )     # Stop option processing
        shift; break ;;
     - )	# Use stdin as input.
        break ;;
     -* )
-       echo "$me: invalid option $1$help"
+       echo "$me: invalid option $1$help" >&2
        exit 1 ;;
 
     *local*)
        # First pass through any local machine types.
-       echo $1
-       exit 0;;
+       echo "$1"
+       exit ;;
 
     * )
        break ;;
@@ -114,972 +110,1169 @@ case $# in
     exit 1;;
 esac
 
-# Separate what the user gave into CPU-COMPANY and OS or KERNEL-OS (if any).
-# Here we must recognize all the valid KERNEL-OS combinations.
-maybe_os=`echo $1 | sed 's/^\(.*\)-\([^-]*-[^-]*\)$/\2/'`
-case $maybe_os in
-  nto-qnx* | linux-gnu* | freebsd*-gnu* | netbsd*-gnu* | storm-chaos* | os2-emx* | rtmk-nova*)
-    os=-$maybe_os
-    basic_machine=`echo $1 | sed 's/^\(.*\)-\([^-]*-[^-]*\)$/\1/'`
-    ;;
-  *)
-    basic_machine=`echo $1 | sed 's/-[^-]*$//'`
-    if [ $basic_machine != $1 ]
-    then os=`echo $1 | sed 's/.*-/-/'`
-    else os=; fi
-    ;;
-esac
+# Split fields of configuration type
+# shellcheck disable=SC2162
+IFS="-" read field1 field2 field3 field4 <<EOF
+$1
+EOF
 
-### Let's recognize common machines as not being operating systems so
-### that things like config.sub decstation-3100 work.  We also
-### recognize some manufacturers as not being operating systems, so we
-### can provide default operating systems below.
-case $os in
-	-sun*os*)
-		# Prevent following clause from handling this invalid input.
+# Separate into logical components for further validation
+case $1 in
+	*-*-*-*-*)
+		echo Invalid configuration \`"$1"\': more than four components >&2
+		exit 1
 		;;
-	-dec* | -mips* | -sequent* | -encore* | -pc532* | -sgi* | -sony* | \
-	-att* | -7300* | -3300* | -delta* | -motorola* | -sun[234]* | \
-	-unicom* | -ibm* | -next | -hp | -isi* | -apollo | -altos* | \
-	-convergent* | -ncr* | -news | -32* | -3600* | -3100* | -hitachi* |\
-	-c[123]* | -convex* | -sun | -crds | -omron* | -dg | -ultra | -tti* | \
-	-harris | -dolphin | -highlevel | -gould | -cbm | -ns | -masscomp | \
-	-apple | -axis)
-		os=
-		basic_machine=$1
+	*-*-*-*)
+		basic_machine=$field1-$field2
+		basic_os=$field3-$field4
 		;;
-	-sim | -cisco | -oki | -wec | -winbond)
-		os=
-		basic_machine=$1
-		;;
-	-scout)
-		;;
-	-wrs)
-		os=-vxworks
-		basic_machine=$1
-		;;
-	-chorusos*)
-		os=-chorusos
-		basic_machine=$1
-		;;
- 	-chorusrdb)
- 		os=-chorusrdb
-		basic_machine=$1
- 		;;
-	-hiux*)
-		os=-hiuxwe2
-		;;
-	-sco5)
-		os=-sco3.2v5
-		basic_machine=`echo $1 | sed -e 's/86-.*/86-pc/'`
-		;;
-	-sco4)
-		os=-sco3.2v4
-		basic_machine=`echo $1 | sed -e 's/86-.*/86-pc/'`
-		;;
-	-sco3.2.[4-9]*)
-		os=`echo $os | sed -e 's/sco3.2./sco3.2v/'`
-		basic_machine=`echo $1 | sed -e 's/86-.*/86-pc/'`
-		;;
-	-sco3.2v[4-9]*)
-		# Don't forget version if it is 3.2v4 or newer.
-		basic_machine=`echo $1 | sed -e 's/86-.*/86-pc/'`
-		;;
-	-sco*)
-		os=-sco3.2v2
-		basic_machine=`echo $1 | sed -e 's/86-.*/86-pc/'`
-		;;
-	-udk*)
-		basic_machine=`echo $1 | sed -e 's/86-.*/86-pc/'`
-		;;
-	-isc)
-		os=-isc2.2
-		basic_machine=`echo $1 | sed -e 's/86-.*/86-pc/'`
-		;;
-	-clix*)
-		basic_machine=clipper-intergraph
-		;;
-	-isc*)
-		basic_machine=`echo $1 | sed -e 's/86-.*/86-pc/'`
-		;;
-	-lynx*)
-		os=-lynxos
-		;;
-	-ptx*)
-		basic_machine=`echo $1 | sed -e 's/86-.*/86-sequent/'`
-		;;
-	-windowsnt*)
-		os=`echo $os | sed -e 's/windowsnt/winnt/'`
-		;;
-	-psos*)
-		os=-psos
-		;;
-	-mint | -mint[0-9]*)
-		basic_machine=m68k-atari
-		os=-mint
-		;;
-esac
-
-# Decode aliases for certain CPU-COMPANY combinations.
-case $basic_machine in
-	# Recognize the basic CPU types without company name.
-	# Some are omitted here because they have special meanings below.
-	1750a | 580 \
-	| a29k \
-	| alpha | alphaev[4-8] | alphaev56 | alphaev6[78] | alphapca5[67] \
-	| alpha64 | alpha64ev[4-8] | alpha64ev56 | alpha64ev6[78] | alpha64pca5[67] \
-	| arc | arm | arm[bl]e | arme[lb] | armv[2345] | armv[345][lb] | avr \
-	| clipper \
-	| d10v | d30v | dlx | dsp16xx \
-	| fr30 | frv \
-	| h8300 | h8500 | hppa | hppa1.[01] | hppa2.0 | hppa2.0[nw] | hppa64 \
-	| i370 | i860 | i960 | ia64 \
-	| ip2k \
-	| m32r | m68000 | m68k | m88k | mcore \
-	| mips | mipsbe | mipseb | mipsel | mipsle \
-	| mips16 \
-	| mips64 | mips64el \
-	| mips64vr | mips64vrel \
-	| mips64orion | mips64orionel \
-	| mips64vr4100 | mips64vr4100el \
-	| mips64vr4300 | mips64vr4300el \
-	| mips64vr5000 | mips64vr5000el \
-	| mipsisa32 | mipsisa32el \
-	| mipsisa32r2 | mipsisa32r2el \
-	| mipsisa64 | mipsisa64el \
-	| mipsisa64sb1 | mipsisa64sb1el \
-	| mipsisa64sr71k | mipsisa64sr71kel \
-	| mipstx39 | mipstx39el \
-	| mn10200 | mn10300 \
-	| msp430 \
-	| ns16k | ns32k \
-	| openrisc | or32 \
-	| pdp10 | pdp11 | pj | pjl \
-	| powerpc | powerpc64 | powerpc64le | powerpcle | ppcbe \
-	| pyramid \
-	| sh | sh[1234] | sh[23]e | sh[34]eb | shbe | shle | sh[1234]le | sh3ele \
-	| sh64 | sh64le \
-	| sparc | sparc64 | sparc86x | sparclet | sparclite | sparcv9 | sparcv9b \
-	| strongarm \
-	| tahoe | thumb | tic80 | tron \
-	| v850 | v850e \
-	| we32k \
-	| x86 | xscale | xstormy16 | xtensa \
-	| z8k)
-		basic_machine=$basic_machine-unknown
-		;;
-	m6811 | m68hc11 | m6812 | m68hc12)
-		# Motorola 68HC11/12.
-		basic_machine=$basic_machine-unknown
-		os=-none
-		;;
-	m88110 | m680[12346]0 | m683?2 | m68360 | m5200 | v70 | w65 | z8k)
-		;;
-
-	# We use `pc' rather than `unknown'
-	# because (1) that's what they normally are, and
-	# (2) the word "unknown" tends to confuse beginning users.
-	i*86 | x86_64)
-	  basic_machine=$basic_machine-pc
-	  ;;
-	# Object if more than one company name word.
 	*-*-*)
-		echo Invalid configuration \`$1\': machine \`$basic_machine\' not recognized 1>&2
-		exit 1
-		;;
-	# Recognize the basic CPU types with company name.
-	580-* \
-	| a29k-* \
-	| alpha-* | alphaev[4-8]-* | alphaev56-* | alphaev6[78]-* \
-	| alpha64-* | alpha64ev[4-8]-* | alpha64ev56-* | alpha64ev6[78]-* \
-	| alphapca5[67]-* | alpha64pca5[67]-* | arc-* \
-	| arm-*  | armbe-* | armle-* | armeb-* | armv*-* \
-	| avr-* \
-	| bs2000-* \
-	| c[123]* | c30-* | [cjt]90-* | c4x-* | c54x-* | c55x-* | c6x-* \
-	| clipper-* | cydra-* \
-	| d10v-* | d30v-* | dlx-* \
-	| elxsi-* \
-	| f30[01]-* | f700-* | fr30-* | frv-* | fx80-* \
-	| h8300-* | h8500-* \
-	| hppa-* | hppa1.[01]-* | hppa2.0-* | hppa2.0[nw]-* | hppa64-* \
-	| i*86-* | i860-* | i960-* | ia64-* \
-	| ip2k-* \
-	| m32r-* \
-	| m68000-* | m680[012346]0-* | m68360-* | m683?2-* | m68k-* \
-	| m88110-* | m88k-* | mcore-* \
-	| mips-* | mipsbe-* | mipseb-* | mipsel-* | mipsle-* \
-	| mips16-* \
-	| mips64-* | mips64el-* \
-	| mips64vr-* | mips64vrel-* \
-	| mips64orion-* | mips64orionel-* \
-	| mips64vr4100-* | mips64vr4100el-* \
-	| mips64vr4300-* | mips64vr4300el-* \
-	| mips64vr5000-* | mips64vr5000el-* \
-	| mipsisa32-* | mipsisa32el-* \
-	| mipsisa32r2-* | mipsisa32r2el-* \
-	| mipsisa64-* | mipsisa64el-* \
-	| mipsisa64sb1-* | mipsisa64sb1el-* \
-	| mipsisa64sr71k-* | mipsisa64sr71kel-* \
-	| mipstx39-* | mipstx39el-* \
-	| msp430-* \
-	| none-* | np1-* | nv1-* | ns16k-* | ns32k-* \
-	| orion-* \
-	| pdp10-* | pdp11-* | pj-* | pjl-* | pn-* | power-* \
-	| powerpc-* | powerpc64-* | powerpc64le-* | powerpcle-* | ppcbe-* \
-	| pyramid-* \
-	| romp-* | rs6000-* \
-	| sh-* | sh[1234]-* | sh[23]e-* | sh[34]eb-* | shbe-* \
-	| shle-* | sh[1234]le-* | sh3ele-* | sh64-* | sh64le-* \
-	| sparc-* | sparc64-* | sparc86x-* | sparclet-* | sparclite-* \
-	| sparcv9-* | sparcv9b-* | strongarm-* | sv1-* | sx?-* \
-	| tahoe-* | thumb-* \
-	| tic30-* | tic4x-* | tic54x-* | tic55x-* | tic6x-* | tic80-* \
-	| tron-* \
-	| v850-* | v850e-* | vax-* \
-	| we32k-* \
-	| x86-* | x86_64-* | xps100-* | xscale-* | xstormy16-* \
-	| xtensa-* \
-	| ymp-* \
-	| z8k-*)
+		# Ambiguous whether COMPANY is present, or skipped and KERNEL-OS is two
+		# parts
+		maybe_os=$field2-$field3
+		case $maybe_os in
+			nto-qnx* | linux-* | uclinux-uclibc* \
+			| uclinux-gnu* | kfreebsd*-gnu* | knetbsd*-gnu* | netbsd*-gnu* \
+			| netbsd*-eabi* | kopensolaris*-gnu* | cloudabi*-eabi* \
+			| storm-chaos* | os2-emx* | rtmk-nova*)
+				basic_machine=$field1
+				basic_os=$maybe_os
+				;;
+			android-linux)
+				basic_machine=$field1-unknown
+				basic_os=linux-android
+				;;
+			*)
+				basic_machine=$field1-$field2
+				basic_os=$field3
+				;;
+		esac
 		;;
+	*-*)
+		# A lone config we happen to match not fitting any pattern
+		case $field1-$field2 in
+			decstation-3100)
+				basic_machine=mips-dec
+				basic_os=
+				;;
+			*-*)
+				# Second component is usually, but not always the OS
+				case $field2 in
+					# Prevent following clause from handling this valid os
+					sun*os*)
+						basic_machine=$field1
+						basic_os=$field2
+						;;
+					# Manufacturers
+					dec* | mips* | sequent* | encore* | pc533* | sgi* | sony* \
+					| att* | 7300* | 3300* | delta* | motorola* | sun[234]* \
+					| unicom* | ibm* | next | hp | isi* | apollo | altos* \
+					| convergent* | ncr* | news | 32* | 3600* | 3100* \
+					| hitachi* | c[123]* | convex* | sun | crds | omron* | dg \
+					| ultra | tti* | harris | dolphin | highlevel | gould \
+					| cbm | ns | masscomp | apple | axis | knuth | cray \
+					| microblaze* | sim | cisco \
+					| oki | wec | wrs | winbond)
+						basic_machine=$field1-$field2
+						basic_os=
+						;;
+					*)
+						basic_machine=$field1
+						basic_os=$field2
+						;;
+				esac
+			;;
+		esac
+		;;
+	*)
+		# Convert single-component short-hands not valid as part of
+		# multi-component configurations.
+		case $field1 in
+			386bsd)
+				basic_machine=i386-pc
+				basic_os=bsd
+				;;
+			a29khif)
+				basic_machine=a29k-amd
+				basic_os=udi
+				;;
+			adobe68k)
+				basic_machine=m68010-adobe
+				basic_os=scout
+				;;
+			alliant)
+				basic_machine=fx80-alliant
+				basic_os=
+				;;
+			altos | altos3068)
+				basic_machine=m68k-altos
+				basic_os=
+				;;
+			am29k)
+				basic_machine=a29k-none
+				basic_os=bsd
+				;;
+			amdahl)
+				basic_machine=580-amdahl
+				basic_os=sysv
+				;;
+			amiga)
+				basic_machine=m68k-unknown
+				basic_os=
+				;;
+			amigaos | amigados)
+				basic_machine=m68k-unknown
+				basic_os=amigaos
+				;;
+			amigaunix | amix)
+				basic_machine=m68k-unknown
+				basic_os=sysv4
+				;;
+			apollo68)
+				basic_machine=m68k-apollo
+				basic_os=sysv
+				;;
+			apollo68bsd)
+				basic_machine=m68k-apollo
+				basic_os=bsd
+				;;
+			aros)
+				basic_machine=i386-pc
+				basic_os=aros
+				;;
+			aux)
+				basic_machine=m68k-apple
+				basic_os=aux
+				;;
+			balance)
+				basic_machine=ns32k-sequent
+				basic_os=dynix
+				;;
+			blackfin)
+				basic_machine=bfin-unknown
+				basic_os=linux
+				;;
+			cegcc)
+				basic_machine=arm-unknown
+				basic_os=cegcc
+				;;
+			convex-c1)
+				basic_machine=c1-convex
+				basic_os=bsd
+				;;
+			convex-c2)
+				basic_machine=c2-convex
+				basic_os=bsd
+				;;
+			convex-c32)
+				basic_machine=c32-convex
+				basic_os=bsd
+				;;
+			convex-c34)
+				basic_machine=c34-convex
+				basic_os=bsd
+				;;
+			convex-c38)
+				basic_machine=c38-convex
+				basic_os=bsd
+				;;
+			cray)
+				basic_machine=j90-cray
+				basic_os=unicos
+				;;
+			crds | unos)
+				basic_machine=m68k-crds
+				basic_os=
+				;;
+			da30)
+				basic_machine=m68k-da30
+				basic_os=
+				;;
+			decstation | pmax | pmin | dec3100 | decstatn)
+				basic_machine=mips-dec
+				basic_os=
+				;;
+			delta88)
+				basic_machine=m88k-motorola
+				basic_os=sysv3
+				;;
+			dicos)
+				basic_machine=i686-pc
+				basic_os=dicos
+				;;
+			djgpp)
+				basic_machine=i586-pc
+				basic_os=msdosdjgpp
+				;;
+			ebmon29k)
+				basic_machine=a29k-amd
+				basic_os=ebmon
+				;;
+			es1800 | OSE68k | ose68k | ose | OSE)
+				basic_machine=m68k-ericsson
+				basic_os=ose
+				;;
+			gmicro)
+				basic_machine=tron-gmicro
+				basic_os=sysv
+				;;
+			go32)
+				basic_machine=i386-pc
+				basic_os=go32
+				;;
+			h8300hms)
+				basic_machine=h8300-hitachi
+				basic_os=hms
+				;;
+			h8300xray)
+				basic_machine=h8300-hitachi
+				basic_os=xray
+				;;
+			h8500hms)
+				basic_machine=h8500-hitachi
+				basic_os=hms
+				;;
+			harris)
+				basic_machine=m88k-harris
+				basic_os=sysv3
+				;;
+			hp300 | hp300hpux)
+				basic_machine=m68k-hp
+				basic_os=hpux
+				;;
+			hp300bsd)
+				basic_machine=m68k-hp
+				basic_os=bsd
+				;;
+			hppaosf)
+				basic_machine=hppa1.1-hp
+				basic_os=osf
+				;;
+			hppro)
+				basic_machine=hppa1.1-hp
+				basic_os=proelf
+				;;
+			i386mach)
+				basic_machine=i386-mach
+				basic_os=mach
+				;;
+			isi68 | isi)
+				basic_machine=m68k-isi
+				basic_os=sysv
+				;;
+			m68knommu)
+				basic_machine=m68k-unknown
+				basic_os=linux
+				;;
+			magnum | m3230)
+				basic_machine=mips-mips
+				basic_os=sysv
+				;;
+			merlin)
+				basic_machine=ns32k-utek
+				basic_os=sysv
+				;;
+			mingw64)
+				basic_machine=x86_64-pc
+				basic_os=mingw64
+				;;
+			mingw32)
+				basic_machine=i686-pc
+				basic_os=mingw32
+				;;
+			mingw32ce)
+				basic_machine=arm-unknown
+				basic_os=mingw32ce
+				;;
+			monitor)
+				basic_machine=m68k-rom68k
+				basic_os=coff
+				;;
+			morphos)
+				basic_machine=powerpc-unknown
+				basic_os=morphos
+				;;
+			moxiebox)
+				basic_machine=moxie-unknown
+				basic_os=moxiebox
+				;;
+			msdos)
+				basic_machine=i386-pc
+				basic_os=msdos
+				;;
+			msys)
+				basic_machine=i686-pc
+				basic_os=msys
+				;;
+			mvs)
+				basic_machine=i370-ibm
+				basic_os=mvs
+				;;
+			nacl)
+				basic_machine=le32-unknown
+				basic_os=nacl
+				;;
+			ncr3000)
+				basic_machine=i486-ncr
+				basic_os=sysv4
+				;;
+			netbsd386)
+				basic_machine=i386-pc
+				basic_os=netbsd
+				;;
+			netwinder)
+				basic_machine=armv4l-rebel
+				basic_os=linux
+				;;
+			news | news700 | news800 | news900)
+				basic_machine=m68k-sony
+				basic_os=newsos
+				;;
+			news1000)
+				basic_machine=m68030-sony
+				basic_os=newsos
+				;;
+			necv70)
+				basic_machine=v70-nec
+				basic_os=sysv
+				;;
+			nh3000)
+				basic_machine=m68k-harris
+				basic_os=cxux
+				;;
+			nh[45]000)
+				basic_machine=m88k-harris
+				basic_os=cxux
+				;;
+			nindy960)
+				basic_machine=i960-intel
+				basic_os=nindy
+				;;
+			mon960)
+				basic_machine=i960-intel
+				basic_os=mon960
+				;;
+			nonstopux)
+				basic_machine=mips-compaq
+				basic_os=nonstopux
+				;;
+			os400)
+				basic_machine=powerpc-ibm
+				basic_os=os400
+				;;
+			OSE68000 | ose68000)
+				basic_machine=m68000-ericsson
+				basic_os=ose
+				;;
+			os68k)
+				basic_machine=m68k-none
+				basic_os=os68k
+				;;
+			paragon)
+				basic_machine=i860-intel
+				basic_os=osf
+				;;
+			parisc)
+				basic_machine=hppa-unknown
+				basic_os=linux
+				;;
+			psp)
+				basic_machine=mipsallegrexel-sony
+				basic_os=psp
+				;;
+			pw32)
+				basic_machine=i586-unknown
+				basic_os=pw32
+				;;
+			rdos | rdos64)
+				basic_machine=x86_64-pc
+				basic_os=rdos
+				;;
+			rdos32)
+				basic_machine=i386-pc
+				basic_os=rdos
+				;;
+			rom68k)
+				basic_machine=m68k-rom68k
+				basic_os=coff
+				;;
+			sa29200)
+				basic_machine=a29k-amd
+				basic_os=udi
+				;;
+			sei)
+				basic_machine=mips-sei
+				basic_os=seiux
+				;;
+			sequent)
+				basic_machine=i386-sequent
+				basic_os=
+				;;
+			sps7)
+				basic_machine=m68k-bull
+				basic_os=sysv2
+				;;
+			st2000)
+				basic_machine=m68k-tandem
+				basic_os=
+				;;
+			stratus)
+				basic_machine=i860-stratus
+				basic_os=sysv4
+				;;
+			sun2)
+				basic_machine=m68000-sun
+				basic_os=
+				;;
+			sun2os3)
+				basic_machine=m68000-sun
+				basic_os=sunos3
+				;;
+			sun2os4)
+				basic_machine=m68000-sun
+				basic_os=sunos4
+				;;
+			sun3)
+				basic_machine=m68k-sun
+				basic_os=
+				;;
+			sun3os3)
+				basic_machine=m68k-sun
+				basic_os=sunos3
+				;;
+			sun3os4)
+				basic_machine=m68k-sun
+				basic_os=sunos4
+				;;
+			sun4)
+				basic_machine=sparc-sun
+				basic_os=
+				;;
+			sun4os3)
+				basic_machine=sparc-sun
+				basic_os=sunos3
+				;;
+			sun4os4)
+				basic_machine=sparc-sun
+				basic_os=sunos4
+				;;
+			sun4sol2)
+				basic_machine=sparc-sun
+				basic_os=solaris2
+				;;
+			sun386 | sun386i | roadrunner)
+				basic_machine=i386-sun
+				basic_os=
+				;;
+			sv1)
+				basic_machine=sv1-cray
+				basic_os=unicos
+				;;
+			symmetry)
+				basic_machine=i386-sequent
+				basic_os=dynix
+				;;
+			t3e)
+				basic_machine=alphaev5-cray
+				basic_os=unicos
+				;;
+			t90)
+				basic_machine=t90-cray
+				basic_os=unicos
+				;;
+			toad1)
+				basic_machine=pdp10-xkl
+				basic_os=tops20
+				;;
+			tpf)
+				basic_machine=s390x-ibm
+				basic_os=tpf
+				;;
+			udi29k)
+				basic_machine=a29k-amd
+				basic_os=udi
+				;;
+			ultra3)
+				basic_machine=a29k-nyu
+				basic_os=sym1
+				;;
+			v810 | necv810)
+				basic_machine=v810-nec
+				basic_os=none
+				;;
+			vaxv)
+				basic_machine=vax-dec
+				basic_os=sysv
+				;;
+			vms)
+				basic_machine=vax-dec
+				basic_os=vms
+				;;
+			vsta)
+				basic_machine=i386-pc
+				basic_os=vsta
+				;;
+			vxworks960)
+				basic_machine=i960-wrs
+				basic_os=vxworks
+				;;
+			vxworks68)
+				basic_machine=m68k-wrs
+				basic_os=vxworks
+				;;
+			vxworks29k)
+				basic_machine=a29k-wrs
+				basic_os=vxworks
+				;;
+			xbox)
+				basic_machine=i686-pc
+				basic_os=mingw32
+				;;
+			ymp)
+				basic_machine=ymp-cray
+				basic_os=unicos
+				;;
+			*)
+				basic_machine=$1
+				basic_os=
+				;;
+		esac
+		;;
+esac
+
+# Decode 1-component or ad-hoc basic machines
+case $basic_machine in
+	# Here we handle the default manufacturer of certain CPU types.  It is in
+	# some cases the only manufacturer, in others, it is the most popular.
+	w89k)
+		cpu=hppa1.1
+		vendor=winbond
+		;;
+	op50n)
+		cpu=hppa1.1
+		vendor=oki
+		;;
+	op60c)
+		cpu=hppa1.1
+		vendor=oki
+		;;
+	ibm*)
+		cpu=i370
+		vendor=ibm
+		;;
+	orion105)
+		cpu=clipper
+		vendor=highlevel
+		;;
+	mac | mpw | mac-mpw)
+		cpu=m68k
+		vendor=apple
+		;;
+	pmac | pmac-mpw)
+		cpu=powerpc
+		vendor=apple
+		;;
+
 	# Recognize the various machine names and aliases which stand
 	# for a CPU type and a company and sometimes even an OS.
-	386bsd)
-		basic_machine=i386-unknown
-		os=-bsd
-		;;
 	3b1 | 7300 | 7300-att | att-7300 | pc7300 | safari | unixpc)
-		basic_machine=m68000-att
+		cpu=m68000
+		vendor=att
 		;;
 	3b*)
-		basic_machine=we32k-att
+		cpu=we32k
+		vendor=att
 		;;
-	a29khif)
-		basic_machine=a29k-amd
-		os=-udi
-		;;
-	adobe68k)
-		basic_machine=m68010-adobe
-		os=-scout
-		;;
-	alliant | fx80)
-		basic_machine=fx80-alliant
-		;;
-	altos | altos3068)
-		basic_machine=m68k-altos
-		;;
-	am29k)
-		basic_machine=a29k-none
-		os=-bsd
-		;;
-	amd64)
-		basic_machine=x86_64-pc
-		;;
-	amdahl)
-		basic_machine=580-amdahl
-		os=-sysv
-		;;
-	amiga | amiga-*)
-		basic_machine=m68k-unknown
-		;;
-	amigaos | amigados)
-		basic_machine=m68k-unknown
-		os=-amigaos
-		;;
-	amigaunix | amix)
-		basic_machine=m68k-unknown
-		os=-sysv4
-		;;
-	apollo68)
-		basic_machine=m68k-apollo
-		os=-sysv
-		;;
-	apollo68bsd)
-		basic_machine=m68k-apollo
-		os=-bsd
-		;;
-	aux)
-		basic_machine=m68k-apple
-		os=-aux
-		;;
-	balance)
-		basic_machine=ns32k-sequent
-		os=-dynix
-		;;
-	c90)
-		basic_machine=c90-cray
-		os=-unicos
-		;;
-	convex-c1)
-		basic_machine=c1-convex
-		os=-bsd
-		;;
-	convex-c2)
-		basic_machine=c2-convex
-		os=-bsd
-		;;
-	convex-c32)
-		basic_machine=c32-convex
-		os=-bsd
-		;;
-	convex-c34)
-		basic_machine=c34-convex
-		os=-bsd
-		;;
-	convex-c38)
-		basic_machine=c38-convex
-		os=-bsd
-		;;
-	cray | j90)
-		basic_machine=j90-cray
-		os=-unicos
-		;;
-	crds | unos)
-		basic_machine=m68k-crds
-		;;
-	cris | cris-* | etrax*)
-		basic_machine=cris-axis
-		;;
-	da30 | da30-*)
-		basic_machine=m68k-da30
-		;;
-	decstation | decstation-3100 | pmax | pmax-* | pmin | dec3100 | decstatn)
-		basic_machine=mips-dec
+	bluegene*)
+		cpu=powerpc
+		vendor=ibm
+		basic_os=cnk
 		;;
 	decsystem10* | dec10*)
-		basic_machine=pdp10-dec
-		os=-tops10
+		cpu=pdp10
+		vendor=dec
+		basic_os=tops10
 		;;
 	decsystem20* | dec20*)
-		basic_machine=pdp10-dec
-		os=-tops20
+		cpu=pdp10
+		vendor=dec
+		basic_os=tops20
 		;;
 	delta | 3300 | motorola-3300 | motorola-delta \
 	      | 3300-motorola | delta-motorola)
-		basic_machine=m68k-motorola
+		cpu=m68k
+		vendor=motorola
 		;;
-	delta88)
-		basic_machine=m88k-motorola
-		os=-sysv3
-		;;
-	dpx20 | dpx20-*)
-		basic_machine=rs6000-bull
-		os=-bosx
-		;;
-	dpx2* | dpx2*-bull)
-		basic_machine=m68k-bull
-		os=-sysv3
-		;;
-	ebmon29k)
-		basic_machine=a29k-amd
-		os=-ebmon
-		;;
-	elxsi)
-		basic_machine=elxsi-elxsi
-		os=-bsd
+	dpx2*)
+		cpu=m68k
+		vendor=bull
+		basic_os=sysv3
 		;;
 	encore | umax | mmax)
-		basic_machine=ns32k-encore
+		cpu=ns32k
+		vendor=encore
 		;;
-	es1800 | OSE68k | ose68k | ose | OSE)
-		basic_machine=m68k-ericsson
-		os=-ose
+	elxsi)
+		cpu=elxsi
+		vendor=elxsi
+		basic_os=${basic_os:-bsd}
 		;;
 	fx2800)
-		basic_machine=i860-alliant
+		cpu=i860
+		vendor=alliant
 		;;
 	genix)
-		basic_machine=ns32k-ns
-		;;
-	gmicro)
-		basic_machine=tron-gmicro
-		os=-sysv
-		;;
-	go32)
-		basic_machine=i386-pc
-		os=-go32
+		cpu=ns32k
+		vendor=ns
 		;;
 	h3050r* | hiux*)
-		basic_machine=hppa1.1-hitachi
-		os=-hiuxwe2
-		;;
-	h8300hms)
-		basic_machine=h8300-hitachi
-		os=-hms
-		;;
-	h8300xray)
-		basic_machine=h8300-hitachi
-		os=-xray
-		;;
-	h8500hms)
-		basic_machine=h8500-hitachi
-		os=-hms
-		;;
-	harris)
-		basic_machine=m88k-harris
-		os=-sysv3
-		;;
-	hp300-*)
-		basic_machine=m68k-hp
-		;;
-	hp300bsd)
-		basic_machine=m68k-hp
-		os=-bsd
-		;;
-	hp300hpux)
-		basic_machine=m68k-hp
-		os=-hpux
+		cpu=hppa1.1
+		vendor=hitachi
+		basic_os=hiuxwe2
 		;;
 	hp3k9[0-9][0-9] | hp9[0-9][0-9])
-		basic_machine=hppa1.0-hp
+		cpu=hppa1.0
+		vendor=hp
 		;;
 	hp9k2[0-9][0-9] | hp9k31[0-9])
-		basic_machine=m68000-hp
+		cpu=m68000
+		vendor=hp
 		;;
 	hp9k3[2-9][0-9])
-		basic_machine=m68k-hp
+		cpu=m68k
+		vendor=hp
 		;;
 	hp9k6[0-9][0-9] | hp6[0-9][0-9])
-		basic_machine=hppa1.0-hp
+		cpu=hppa1.0
+		vendor=hp
 		;;
 	hp9k7[0-79][0-9] | hp7[0-79][0-9])
-		basic_machine=hppa1.1-hp
+		cpu=hppa1.1
+		vendor=hp
 		;;
 	hp9k78[0-9] | hp78[0-9])
 		# FIXME: really hppa2.0-hp
-		basic_machine=hppa1.1-hp
+		cpu=hppa1.1
+		vendor=hp
 		;;
 	hp9k8[67]1 | hp8[67]1 | hp9k80[24] | hp80[24] | hp9k8[78]9 | hp8[78]9 | hp9k893 | hp893)
 		# FIXME: really hppa2.0-hp
-		basic_machine=hppa1.1-hp
+		cpu=hppa1.1
+		vendor=hp
 		;;
 	hp9k8[0-9][13679] | hp8[0-9][13679])
-		basic_machine=hppa1.1-hp
+		cpu=hppa1.1
+		vendor=hp
 		;;
 	hp9k8[0-9][0-9] | hp8[0-9][0-9])
-		basic_machine=hppa1.0-hp
+		cpu=hppa1.0
+		vendor=hp
 		;;
-	hppa-next)
-		os=-nextstep3
-		;;
-	hppaosf)
-		basic_machine=hppa1.1-hp
-		os=-osf
-		;;
-	hppro)
-		basic_machine=hppa1.1-hp
-		os=-proelf
-		;;
-	i370-ibm* | ibm*)
-		basic_machine=i370-ibm
-		;;
-# I'm not sure what "Sysv32" means.  Should this be sysv3.2?
 	i*86v32)
-		basic_machine=`echo $1 | sed -e 's/86.*/86-pc/'`
-		os=-sysv32
+		cpu=$(echo "$1" | sed -e 's/86.*/86/')
+		vendor=pc
+		basic_os=sysv32
 		;;
 	i*86v4*)
-		basic_machine=`echo $1 | sed -e 's/86.*/86-pc/'`
-		os=-sysv4
+		cpu=$(echo "$1" | sed -e 's/86.*/86/')
+		vendor=pc
+		basic_os=sysv4
 		;;
 	i*86v)
-		basic_machine=`echo $1 | sed -e 's/86.*/86-pc/'`
-		os=-sysv
+		cpu=$(echo "$1" | sed -e 's/86.*/86/')
+		vendor=pc
+		basic_os=sysv
 		;;
 	i*86sol2)
-		basic_machine=`echo $1 | sed -e 's/86.*/86-pc/'`
-		os=-solaris2
+		cpu=$(echo "$1" | sed -e 's/86.*/86/')
+		vendor=pc
+		basic_os=solaris2
 		;;
-	i386mach)
-		basic_machine=i386-mach
-		os=-mach
-		;;
-	i386-vsta | vsta)
-		basic_machine=i386-unknown
-		os=-vsta
+	j90 | j90-cray)
+		cpu=j90
+		vendor=cray
+		basic_os=${basic_os:-unicos}
 		;;
 	iris | iris4d)
-		basic_machine=mips-sgi
-		case $os in
-		    -irix*)
+		cpu=mips
+		vendor=sgi
+		case $basic_os in
+		    irix*)
 			;;
 		    *)
-			os=-irix4
+			basic_os=irix4
 			;;
 		esac
 		;;
-	isi68 | isi)
-		basic_machine=m68k-isi
-		os=-sysv
-		;;
-	m88k-omron*)
-		basic_machine=m88k-omron
-		;;
-	magnum | m3230)
-		basic_machine=mips-mips
-		os=-sysv
-		;;
-	merlin)
-		basic_machine=ns32k-utek
-		os=-sysv
-		;;
-	mingw32)
-		basic_machine=i386-pc
-		os=-mingw32
-		;;
 	miniframe)
-		basic_machine=m68000-convergent
+		cpu=m68000
+		vendor=convergent
 		;;
-	*mint | -mint[0-9]* | *MiNT | *MiNT[0-9]*)
-		basic_machine=m68k-atari
-		os=-mint
-		;;
-	mips3*-*)
-		basic_machine=`echo $basic_machine | sed -e 's/mips3/mips64/'`
-		;;
-	mips3*)
-		basic_machine=`echo $basic_machine | sed -e 's/mips3/mips64/'`-unknown
-		;;
-	mmix*)
-		basic_machine=mmix-knuth
-		os=-mmixware
-		;;
-	monitor)
-		basic_machine=m68k-rom68k
-		os=-coff
-		;;
-	morphos)
-		basic_machine=powerpc-unknown
-		os=-morphos
-		;;
-	msdos)
-		basic_machine=i386-pc
-		os=-msdos
-		;;
-	mvs)
-		basic_machine=i370-ibm
-		os=-mvs
-		;;
-	ncr3000)
-		basic_machine=i486-ncr
-		os=-sysv4
-		;;
-	netbsd386)
-		basic_machine=i386-unknown
-		os=-netbsd
-		;;
-	netwinder)
-		basic_machine=armv4l-rebel
-		os=-linux
-		;;
-	news | news700 | news800 | news900)
-		basic_machine=m68k-sony
-		os=-newsos
-		;;
-	news1000)
-		basic_machine=m68030-sony
-		os=-newsos
+	*mint | mint[0-9]* | *MiNT | *MiNT[0-9]*)
+		cpu=m68k
+		vendor=atari
+		basic_os=mint
 		;;
 	news-3600 | risc-news)
-		basic_machine=mips-sony
-		os=-newsos
+		cpu=mips
+		vendor=sony
+		basic_os=newsos
 		;;
-	necv70)
-		basic_machine=v70-nec
-		os=-sysv
-		;;
-	next | m*-next )
-		basic_machine=m68k-next
-		case $os in
-		    -nextstep* )
+	next | m*-next)
+		cpu=m68k
+		vendor=next
+		case $basic_os in
+		    openstep*)
+		        ;;
+		    nextstep*)
 			;;
-		    -ns2*)
-		      os=-nextstep2
+		    ns2*)
+		      basic_os=nextstep2
 			;;
 		    *)
-		      os=-nextstep3
+		      basic_os=nextstep3
 			;;
 		esac
 		;;
-	nh3000)
-		basic_machine=m68k-harris
-		os=-cxux
-		;;
-	nh[45]000)
-		basic_machine=m88k-harris
-		os=-cxux
-		;;
-	nindy960)
-		basic_machine=i960-intel
-		os=-nindy
-		;;
-	mon960)
-		basic_machine=i960-intel
-		os=-mon960
-		;;
-	nonstopux)
-		basic_machine=mips-compaq
-		os=-nonstopux
-		;;
 	np1)
-		basic_machine=np1-gould
-		;;
-	nv1)
-		basic_machine=nv1-cray
-		os=-unicosmp
-		;;
-	nsr-tandem)
-		basic_machine=nsr-tandem
+		cpu=np1
+		vendor=gould
 		;;
 	op50n-* | op60c-*)
-		basic_machine=hppa1.1-oki
-		os=-proelf
-		;;
-	or32 | or32-*)
-		basic_machine=or32-unknown
-		os=-coff
-		;;
-	OSE68000 | ose68000)
-		basic_machine=m68000-ericsson
-		os=-ose
-		;;
-	os68k)
-		basic_machine=m68k-none
-		os=-os68k
+		cpu=hppa1.1
+		vendor=oki
+		basic_os=proelf
 		;;
 	pa-hitachi)
-		basic_machine=hppa1.1-hitachi
-		os=-hiuxwe2
-		;;
-	paragon)
-		basic_machine=i860-intel
-		os=-osf
+		cpu=hppa1.1
+		vendor=hitachi
+		basic_os=hiuxwe2
 		;;
 	pbd)
-		basic_machine=sparc-tti
+		cpu=sparc
+		vendor=tti
 		;;
 	pbb)
-		basic_machine=m68k-tti
+		cpu=m68k
+		vendor=tti
 		;;
-	pc532 | pc532-*)
-		basic_machine=ns32k-pc532
-		;;
-	pentium | p5 | k5 | k6 | nexgen | viac3)
-		basic_machine=i586-pc
-		;;
-	pentiumpro | p6 | 6x86 | athlon | athlon_*)
-		basic_machine=i686-pc
-		;;
-	pentiumii | pentium2)
-		basic_machine=i686-pc
-		;;
-	pentium-* | p5-* | k5-* | k6-* | nexgen-* | viac3-*)
-		basic_machine=i586-`echo $basic_machine | sed 's/^[^-]*-//'`
-		;;
-	pentiumpro-* | p6-* | 6x86-* | athlon-*)
-		basic_machine=i686-`echo $basic_machine | sed 's/^[^-]*-//'`
-		;;
-	pentiumii-* | pentium2-*)
-		basic_machine=i686-`echo $basic_machine | sed 's/^[^-]*-//'`
+	pc532)
+		cpu=ns32k
+		vendor=pc532
 		;;
 	pn)
-		basic_machine=pn-gould
+		cpu=pn
+		vendor=gould
 		;;
-	power)	basic_machine=power-ibm
-		;;
-	ppc)	basic_machine=powerpc-unknown
-		;;
-	ppc-*)	basic_machine=powerpc-`echo $basic_machine | sed 's/^[^-]*-//'`
-		;;
-	ppcle | powerpclittle | ppc-le | powerpc-little)
-		basic_machine=powerpcle-unknown
-		;;
-	ppcle-* | powerpclittle-*)
-		basic_machine=powerpcle-`echo $basic_machine | sed 's/^[^-]*-//'`
-		;;
-	ppc64)	basic_machine=powerpc64-unknown
-		;;
-	ppc64-*) basic_machine=powerpc64-`echo $basic_machine | sed 's/^[^-]*-//'`
-		;;
-	ppc64le | powerpc64little | ppc64-le | powerpc64-little)
-		basic_machine=powerpc64le-unknown
-		;;
-	ppc64le-* | powerpc64little-*)
-		basic_machine=powerpc64le-`echo $basic_machine | sed 's/^[^-]*-//'`
+	power)
+		cpu=power
+		vendor=ibm
 		;;
 	ps2)
-		basic_machine=i386-ibm
-		;;
-	pw32)
-		basic_machine=i586-unknown
-		os=-pw32
-		;;
-	rom68k)
-		basic_machine=m68k-rom68k
-		os=-coff
+		cpu=i386
+		vendor=ibm
 		;;
 	rm[46]00)
-		basic_machine=mips-siemens
+		cpu=mips
+		vendor=siemens
 		;;
 	rtpc | rtpc-*)
-		basic_machine=romp-ibm
-		;;
-	s390 | s390-*)
-		basic_machine=s390-ibm
-		;;
-	s390x | s390x-*)
-		basic_machine=s390x-ibm
-		;;
-	sa29200)
-		basic_machine=a29k-amd
-		os=-udi
-		;;
-	sb1)
-		basic_machine=mipsisa64sb1-unknown
-		;;
-	sb1el)
-		basic_machine=mipsisa64sb1el-unknown
-		;;
-	sequent)
-		basic_machine=i386-sequent
-		;;
-	sh)
-		basic_machine=sh-hitachi
-		os=-hms
-		;;
-	sparclite-wrs | simso-wrs)
-		basic_machine=sparclite-wrs
-		os=-vxworks
-		;;
-	sps7)
-		basic_machine=m68k-bull
-		os=-sysv2
-		;;
-	spur)
-		basic_machine=spur-unknown
-		;;
-	st2000)
-		basic_machine=m68k-tandem
-		;;
-	stratus)
-		basic_machine=i860-stratus
-		os=-sysv4
-		;;
-	sun2)
-		basic_machine=m68000-sun
-		;;
-	sun2os3)
-		basic_machine=m68000-sun
-		os=-sunos3
-		;;
-	sun2os4)
-		basic_machine=m68000-sun
-		os=-sunos4
-		;;
-	sun3os3)
-		basic_machine=m68k-sun
-		os=-sunos3
-		;;
-	sun3os4)
-		basic_machine=m68k-sun
-		os=-sunos4
-		;;
-	sun4os3)
-		basic_machine=sparc-sun
-		os=-sunos3
-		;;
-	sun4os4)
-		basic_machine=sparc-sun
-		os=-sunos4
-		;;
-	sun4sol2)
-		basic_machine=sparc-sun
-		os=-solaris2
-		;;
-	sun3 | sun3-*)
-		basic_machine=m68k-sun
-		;;
-	sun4)
-		basic_machine=sparc-sun
-		;;
-	sun386 | sun386i | roadrunner)
-		basic_machine=i386-sun
-		;;
-	sv1)
-		basic_machine=sv1-cray
-		os=-unicos
-		;;
-	symmetry)
-		basic_machine=i386-sequent
-		os=-dynix
-		;;
-	t3e)
-		basic_machine=alphaev5-cray
-		os=-unicos
-		;;
-	t90)
-		basic_machine=t90-cray
-		os=-unicos
-		;;
-        tic4x | c4x*)
-		basic_machine=tic4x-unknown
-		os=-coff
-		;;
-	tic54x | c54x*)
-		basic_machine=tic54x-unknown
-		os=-coff
-		;;
-	tic55x | c55x*)
-		basic_machine=tic55x-unknown
-		os=-coff
-		;;
-	tic6x | c6x*)
-		basic_machine=tic6x-unknown
-		os=-coff
-		;;
-	tx39)
-		basic_machine=mipstx39-unknown
-		;;
-	tx39el)
-		basic_machine=mipstx39el-unknown
-		;;
-	toad1)
-		basic_machine=pdp10-xkl
-		os=-tops20
+		cpu=romp
+		vendor=ibm
+		;;
+	sde)
+		cpu=mipsisa32
+		vendor=sde
+		basic_os=${basic_os:-elf}
+		;;
+	simso-wrs)
+		cpu=sparclite
+		vendor=wrs
+		basic_os=vxworks
 		;;
 	tower | tower-32)
-		basic_machine=m68k-ncr
-		;;
-	udi29k)
-		basic_machine=a29k-amd
-		os=-udi
-		;;
-	ultra3)
-		basic_machine=a29k-nyu
-		os=-sym1
-		;;
-	v810 | necv810)
-		basic_machine=v810-nec
-		os=-none
-		;;
-	vaxv)
-		basic_machine=vax-dec
-		os=-sysv
-		;;
-	vms)
-		basic_machine=vax-dec
-		os=-vms
+		cpu=m68k
+		vendor=ncr
 		;;
 	vpp*|vx|vx-*)
-		basic_machine=f301-fujitsu
+		cpu=f301
+		vendor=fujitsu
 		;;
-	vxworks960)
-		basic_machine=i960-wrs
-		os=-vxworks
-		;;
-	vxworks68)
-		basic_machine=m68k-wrs
-		os=-vxworks
-		;;
-	vxworks29k)
-		basic_machine=a29k-wrs
-		os=-vxworks
-		;;
-	w65*)
-		basic_machine=w65-wdc
-		os=-none
+	w65)
+		cpu=w65
+		vendor=wdc
 		;;
 	w89k-*)
-		basic_machine=hppa1.1-winbond
-		os=-proelf
-		;;
-	xps | xps100)
-		basic_machine=xps100-honeywell
-		;;
-	ymp)
-		basic_machine=ymp-cray
-		os=-unicos
-		;;
-	z8k-*-coff)
-		basic_machine=z8k-unknown
-		os=-sim
+		cpu=hppa1.1
+		vendor=winbond
+		basic_os=proelf
 		;;
 	none)
-		basic_machine=none-none
-		os=-none
+		cpu=none
+		vendor=none
+		;;
+	leon|leon[3-9])
+		cpu=sparc
+		vendor=$basic_machine
+		;;
+	leon-*|leon[3-9]-*)
+		cpu=sparc
+		vendor=$(echo "$basic_machine" | sed 's/-.*//')
+		;;
+
+	*-*)
+		# shellcheck disable=SC2162
+		IFS="-" read cpu vendor <<EOF
+$basic_machine
+EOF
+		;;
+	# We use `pc' rather than `unknown'
+	# because (1) that's what they normally are, and
+	# (2) the word "unknown" tends to confuse beginning users.
+	i*86 | x86_64)
+		cpu=$basic_machine
+		vendor=pc
+		;;
+	# These rules are duplicated from below for sake of the special case above;
+	# i.e. things that normalized to x86 arches should also default to "pc"
+	pc98)
+		cpu=i386
+		vendor=pc
+		;;
+	x64 | amd64)
+		cpu=x86_64
+		vendor=pc
+		;;
+	# Recognize the basic CPU types without company name.
+	*)
+		cpu=$basic_machine
+		vendor=unknown
+		;;
+esac
+
+unset -v basic_machine
+
+# Decode basic machines in the full and proper CPU-Company form.
+case $cpu-$vendor in
+	# Here we handle the default manufacturer of certain CPU types in canonical form. It is in
+	# some cases the only manufacturer, in others, it is the most popular.
+	craynv-unknown)
+		vendor=cray
+		basic_os=${basic_os:-unicosmp}
+		;;
+	c90-unknown | c90-cray)
+		vendor=cray
+		basic_os=${Basic_os:-unicos}
+		;;
+	fx80-unknown)
+		vendor=alliant
+		;;
+	romp-unknown)
+		vendor=ibm
+		;;
+	mmix-unknown)
+		vendor=knuth
+		;;
+	microblaze-unknown | microblazeel-unknown)
+		vendor=xilinx
+		;;
+	rs6000-unknown)
+		vendor=ibm
+		;;
+	vax-unknown)
+		vendor=dec
+		;;
+	pdp11-unknown)
+		vendor=dec
+		;;
+	we32k-unknown)
+		vendor=att
+		;;
+	cydra-unknown)
+		vendor=cydrome
+		;;
+	i370-ibm*)
+		vendor=ibm
+		;;
+	orion-unknown)
+		vendor=highlevel
+		;;
+	xps-unknown | xps100-unknown)
+		cpu=xps100
+		vendor=honeywell
+		;;
+
+	# Here we normalize CPU types with a missing or matching vendor
+	dpx20-unknown | dpx20-bull)
+		cpu=rs6000
+		vendor=bull
+		basic_os=${basic_os:-bosx}
 		;;
 
-# Here we handle the default manufacturer of certain CPU types.  It is in
-# some cases the only manufacturer, in others, it is the most popular.
-	w89k)
-		basic_machine=hppa1.1-winbond
+	# Here we normalize CPU types irrespective of the vendor
+	amd64-*)
+		cpu=x86_64
 		;;
-	op50n)
-		basic_machine=hppa1.1-oki
+	blackfin-*)
+		cpu=bfin
+		basic_os=linux
 		;;
-	op60c)
-		basic_machine=hppa1.1-oki
+	c54x-*)
+		cpu=tic54x
 		;;
-	romp)
-		basic_machine=romp-ibm
+	c55x-*)
+		cpu=tic55x
 		;;
-	rs6000)
-		basic_machine=rs6000-ibm
+	c6x-*)
+		cpu=tic6x
 		;;
-	vax)
-		basic_machine=vax-dec
+	e500v[12]-*)
+		cpu=powerpc
+		basic_os=${basic_os}"spe"
 		;;
-	pdp10)
-		# there are many clones, so DEC is not a safe bet
-		basic_machine=pdp10-unknown
+	mips3*-*)
+		cpu=mips64
 		;;
-	pdp11)
-		basic_machine=pdp11-dec
+	ms1-*)
+		cpu=mt
 		;;
-	we32k)
-		basic_machine=we32k-att
+	m68knommu-*)
+		cpu=m68k
+		basic_os=linux
 		;;
-	sh3 | sh4 | sh[34]eb | sh[1234]le | sh[23]ele)
-		basic_machine=sh-unknown
+	m9s12z-* | m68hcs12z-* | hcs12z-* | s12z-*)
+		cpu=s12z
 		;;
-	sh64)
-		basic_machine=sh64-unknown
+	openrisc-*)
+		cpu=or32
 		;;
-	sparc | sparcv9 | sparcv9b)
-		basic_machine=sparc-sun
+	parisc-*)
+		cpu=hppa
+		basic_os=linux
 		;;
-	cydra)
-		basic_machine=cydra-cydrome
+	pentium-* | p5-* | k5-* | k6-* | nexgen-* | viac3-*)
+		cpu=i586
 		;;
-	orion)
-		basic_machine=orion-highlevel
+	pentiumpro-* | p6-* | 6x86-* | athlon-* | athalon_*-*)
+		cpu=i686
 		;;
-	orion105)
-		basic_machine=clipper-highlevel
+	pentiumii-* | pentium2-* | pentiumiii-* | pentium3-*)
+		cpu=i686
 		;;
-	mac | mpw | mac-mpw)
-		basic_machine=m68k-apple
+	pentium4-*)
+		cpu=i786
 		;;
-	pmac | pmac-mpw)
-		basic_machine=powerpc-apple
+	pc98-*)
+		cpu=i386
 		;;
-	*-unknown)
-		# Make sure to match an already-canonicalized machine name.
+	ppc-* | ppcbe-*)
+		cpu=powerpc
 		;;
+	ppcle-* | powerpclittle-*)
+		cpu=powerpcle
+		;;
+	ppc64-*)
+		cpu=powerpc64
+		;;
+	ppc64le-* | powerpc64little-*)
+		cpu=powerpc64le
+		;;
+	sb1-*)
+		cpu=mipsisa64sb1
+		;;
+	sb1el-*)
+		cpu=mipsisa64sb1el
+		;;
+	sh5e[lb]-*)
+		cpu=$(echo "$cpu" | sed 's/^\(sh.\)e\(.\)$/\1\2e/')
+		;;
+	spur-*)
+		cpu=spur
+		;;
+	strongarm-* | thumb-*)
+		cpu=arm
+		;;
+	tx39-*)
+		cpu=mipstx39
+		;;
+	tx39el-*)
+		cpu=mipstx39el
+		;;
+	x64-*)
+		cpu=x86_64
+		;;
+	xscale-* | xscalee[bl]-*)
+		cpu=$(echo "$cpu" | sed 's/^xscale/arm/')
+		;;
+	arm64-*)
+		cpu=aarch64
+		;;
+
+	# Recognize the canonical CPU Types that limit and/or modify the
+	# company names they are paired with.
+	cr16-*)
+		basic_os=${basic_os:-elf}
+		;;
+	crisv32-* | etraxfs*-*)
+		cpu=crisv32
+		vendor=axis
+		;;
+	cris-* | etrax*-*)
+		cpu=cris
+		vendor=axis
+		;;
+	crx-*)
+		basic_os=${basic_os:-elf}
+		;;
+	neo-tandem)
+		cpu=neo
+		vendor=tandem
+		;;
+	nse-tandem)
+		cpu=nse
+		vendor=tandem
+		;;
+	nsr-tandem)
+		cpu=nsr
+		vendor=tandem
+		;;
+	nsv-tandem)
+		cpu=nsv
+		vendor=tandem
+		;;
+	nsx-tandem)
+		cpu=nsx
+		vendor=tandem
+		;;
+	mipsallegrexel-sony)
+		cpu=mipsallegrexel
+		vendor=sony
+		;;
+	tile*-*)
+		basic_os=${basic_os:-linux-gnu}
+		;;
+
 	*)
-		echo Invalid configuration \`$1\': machine \`$basic_machine\' not recognized 1>&2
-		exit 1
+		# Recognize the canonical CPU types that are allowed with any
+		# company name.
+		case $cpu in
+			1750a | 580 \
+			| a29k \
+			| aarch64 | aarch64_be \
+			| abacus \
+			| alpha | alphaev[4-8] | alphaev56 | alphaev6[78] \
+			| alpha64 | alpha64ev[4-8] | alpha64ev56 | alpha64ev6[78] \
+			| alphapca5[67] | alpha64pca5[67] \
+			| am33_2.0 \
+			| amdgcn \
+			| arc | arceb \
+			| arm | arm[lb]e | arme[lb] | armv* \
+			| avr | avr32 \
+			| asmjs \
+			| ba \
+			| be32 | be64 \
+			| bfin | bpf | bs2000 \
+			| c[123]* | c30 | [cjt]90 | c4x \
+			| c8051 | clipper | craynv | csky | cydra \
+			| d10v | d30v | dlx | dsp16xx \
+			| e2k | elxsi | epiphany \
+			| f30[01] | f700 | fido | fr30 | frv | ft32 | fx80 \
+			| h8300 | h8500 \
+			| hppa | hppa1.[01] | hppa2.0 | hppa2.0[nw] | hppa64 \
+			| hexagon \
+			| i370 | i*86 | i860 | i960 | ia16 | ia64 \
+			| ip2k | iq2000 \
+			| k1om \
+			| le32 | le64 \
+			| lm32 \
+			| loongarch32 | loongarch64 | loongarchx32 \
+			| m32c | m32r | m32rle \
+			| m5200 | m68000 | m680[012346]0 | m68360 | m683?2 | m68k \
+			| m6811 | m68hc11 | m6812 | m68hc12 | m68hcs12x \
+			| m88110 | m88k | maxq | mb | mcore | mep | metag \
+			| microblaze | microblazeel \
+			| mips | mipsbe | mipseb | mipsel | mipsle \
+			| mips16 \
+			| mips64 | mips64eb | mips64el \
+			| mips64octeon | mips64octeonel \
+			| mips64orion | mips64orionel \
+			| mips64r5900 | mips64r5900el \
+			| mips64vr | mips64vrel \
+			| mips64vr4100 | mips64vr4100el \
+			| mips64vr4300 | mips64vr4300el \
+			| mips64vr5000 | mips64vr5000el \
+			| mips64vr5900 | mips64vr5900el \
+			| mipsisa32 | mipsisa32el \
+			| mipsisa32r2 | mipsisa32r2el \
+			| mipsisa32r6 | mipsisa32r6el \
+			| mipsisa64 | mipsisa64el \
+			| mipsisa64r2 | mipsisa64r2el \
+			| mipsisa64r6 | mipsisa64r6el \
+			| mipsisa64sb1 | mipsisa64sb1el \
+			| mipsisa64sr71k | mipsisa64sr71kel \
+			| mipsr5900 | mipsr5900el \
+			| mipstx39 | mipstx39el \
+			| mmix \
+			| mn10200 | mn10300 \
+			| moxie \
+			| mt \
+			| msp430 \
+			| nds32 | nds32le | nds32be \
+			| nfp \
+			| nios | nios2 | nios2eb | nios2el \
+			| none | np1 | ns16k | ns32k | nvptx \
+			| open8 \
+			| or1k* \
+			| or32 \
+			| orion \
+			| picochip \
+			| pdp10 | pdp11 | pj | pjl | pn | power \
+			| powerpc | powerpc64 | powerpc64le | powerpcle | powerpcspe \
+			| pru \
+			| pyramid \
+			| riscv | riscv32 | riscv32be | riscv64 | riscv64be \
+			| rl78 | romp | rs6000 | rx \
+			| s390 | s390x \
+			| score \
+			| sh | shl \
+			| sh[1234] | sh[24]a | sh[24]ae[lb] | sh[23]e | she[lb] | sh[lb]e \
+			| sh[1234]e[lb] |  sh[12345][lb]e | sh[23]ele | sh64 | sh64le \
+			| sparc | sparc64 | sparc64b | sparc64v | sparc86x | sparclet \
+			| sparclite \
+			| sparcv8 | sparcv9 | sparcv9b | sparcv9v | sv1 | sx* \
+			| spu \
+			| tahoe \
+			| thumbv7* \
+			| tic30 | tic4x | tic54x | tic55x | tic6x | tic80 \
+			| tron \
+			| ubicom32 \
+			| v70 | v850 | v850e | v850e1 | v850es | v850e2 | v850e2v3 \
+			| vax \
+			| visium \
+			| w65 \
+			| wasm32 | wasm64 \
+			| we32k \
+			| x86 | x86_64 | xc16x | xgate | xps100 \
+			| xstormy16 | xtensa* \
+			| ymp \
+			| z8k | z80)
+				;;
+
+			*)
+				echo Invalid configuration \`"$1"\': machine \`"$cpu-$vendor"\' not recognized 1>&2
+				exit 1
+				;;
+		esac
 		;;
 esac
 
 # Here we canonicalize certain aliases for manufacturers.
-case $basic_machine in
-	*-digital*)
-		basic_machine=`echo $basic_machine | sed 's/digital.*/dec/'`
+case $vendor in
+	digital*)
+		vendor=dec
 		;;
-	*-commodore*)
-		basic_machine=`echo $basic_machine | sed 's/commodore.*/cbm/'`
+	commodore*)
+		vendor=cbm
 		;;
 	*)
 		;;
@@ -1087,174 +1280,213 @@ esac
 
 # Decode manufacturer-specific aliases for certain operating systems.
 
-if [ x"$os" != x"" ]
+if test x$basic_os != x
 then
+
+# First recognize some ad-hoc caes, or perhaps split kernel-os, or else just
+# set os.
+case $basic_os in
+	gnu/linux*)
+		kernel=linux
+		os=$(echo $basic_os | sed -e 's|gnu/linux|gnu|')
+		;;
+	os2-emx)
+		kernel=os2
+		os=$(echo $basic_os | sed -e 's|os2-emx|emx|')
+		;;
+	nto-qnx*)
+		kernel=nto
+		os=$(echo $basic_os | sed -e 's|nto-qnx|qnx|')
+		;;
+	*-*)
+		# shellcheck disable=SC2162
+		IFS="-" read kernel os <<EOF
+$basic_os
+EOF
+		;;
+	# Default OS when just kernel was specified
+	nto*)
+		kernel=nto
+		os=$(echo $basic_os | sed -e 's|nto|qnx|')
+		;;
+	linux*)
+		kernel=linux
+		os=$(echo $basic_os | sed -e 's|linux|gnu|')
+		;;
+	*)
+		kernel=
+		os=$basic_os
+		;;
+esac
+
+# Now, normalize the OS (knowing we just have one component, it's not a kernel,
+# etc.)
 case $os in
-        # First match some system type aliases
-        # that might get confused with valid system types.
-	# -solaris* is a basic system type, with this one exception.
-	-solaris1 | -solaris1.*)
-		os=`echo $os | sed -e 's|solaris1|sunos4|'`
-		;;
-	-solaris)
-		os=-solaris2
-		;;
-	-svr4*)
-		os=-sysv4
-		;;
-	-unixware*)
-		os=-sysv4.2uw
-		;;
-	-gnu/linux*)
-		os=`echo $os | sed -e 's|gnu/linux|linux-gnu|'`
-		;;
-	# First accept the basic system types.
-	# The portable systems comes first.
-	# Each alternative MUST END IN A *, to match a version number.
-	# -sysv* is not here because it comes later, after sysvr4.
-	-gnu* | -bsd* | -mach* | -minix* | -genix* | -ultrix* | -irix* \
-	      | -*vms* | -sco* | -esix* | -isc* | -aix* | -sunos | -sunos[34]*\
-	      | -hpux* | -unos* | -osf* | -luna* | -dgux* | -solaris* | -sym* \
-	      | -amigaos* | -amigados* | -msdos* | -newsos* | -unicos* | -aof* \
-	      | -aos* \
-	      | -nindy* | -vxsim* | -vxworks* | -ebmon* | -hms* | -mvs* \
-	      | -clix* | -riscos* | -uniplus* | -iris* | -rtu* | -xenix* \
-	      | -hiux* | -386bsd* | -netbsd* | -openbsd* | -freebsd* | -riscix* \
-	      | -lynxos* | -bosx* | -nextstep* | -cxux* | -aout* | -elf* | -oabi* \
-	      | -ptx* | -coff* | -ecoff* | -winnt* | -domain* | -vsta* \
-	      | -udi* | -eabi* | -lites* | -ieee* | -go32* | -aux* \
-	      | -chorusos* | -chorusrdb* \
-	      | -cygwin* | -pe* | -psos* | -moss* | -proelf* | -rtems* \
-	      | -mingw32* | -linux-gnu* | -uxpv* | -beos* | -mpeix* | -udk* \
-	      | -interix* | -uwin* | -mks* | -rhapsody* | -darwin* | -opened* \
-	      | -openstep* | -oskit* | -conix* | -pw32* | -nonstopux* \
-	      | -storm-chaos* | -tops10* | -tenex* | -tops20* | -its* \
-	      | -os2* | -vos* | -palmos* | -uclinux* | -nucleus* \
-	      | -morphos* | -superux* | -rtmk* | -rtmk-nova* | -windiss* \
-	      | -powermax* | -dnix*)
-	# Remember, each alternative MUST END IN *, to match a version number.
-		;;
-	-qnx*)
-		case $basic_machine in
-		    x86-* | i*86-*)
-			;;
-		    *)
-			os=-nto$os
-			;;
-		esac
-		;;
-	-nto-qnx*)
-		;;
-	-nto*)
-		os=`echo $os | sed -e 's|nto|nto-qnx|'`
-		;;
-	-sim | -es1800* | -hms* | -xray | -os68k* | -none* | -v88r* \
-	      | -windows* | -osx | -abug | -netware* | -os9* | -beos* \
-	      | -macos* | -mpw* | -magic* | -mmixware* | -mon960* | -lnews*)
-		;;
-	-mac*)
-		os=`echo $os | sed -e 's|mac|macos|'`
-		;;
-	-linux*)
-		os=`echo $os | sed -e 's|linux|linux-gnu|'`
-		;;
-	-sunos5*)
-		os=`echo $os | sed -e 's|sunos5|solaris2|'`
-		;;
-	-sunos6*)
-		os=`echo $os | sed -e 's|sunos6|solaris3|'`
-		;;
-	-opened*)
-		os=-openedition
-		;;
-	-wince*)
-		os=-wince
-		;;
-	-osfrose*)
-		os=-osfrose
-		;;
-	-osf*)
-		os=-osf
-		;;
-	-utek*)
-		os=-bsd
-		;;
-	-dynix*)
-		os=-bsd
-		;;
-	-acis*)
-		os=-aos
-		;;
-	-atheos*)
-		os=-atheos
-		;;
-	-386bsd)
-		os=-bsd
-		;;
-	-ctix* | -uts*)
-		os=-sysv
-		;;
-	-nova*)
-		os=-rtmk-nova
-		;;
-	-ns2 )
-		os=-nextstep2
-		;;
-	-nsk*)
-		os=-nsk
+	# First match some system type aliases that might get confused
+	# with valid system types.
+	# solaris* is a basic system type, with this one exception.
+	auroraux)
+		os=auroraux
+		;;
+	bluegene*)
+		os=cnk
+		;;
+	solaris1 | solaris1.*)
+		os=$(echo $os | sed -e 's|solaris1|sunos4|')
+		;;
+	solaris)
+		os=solaris2
+		;;
+	unixware*)
+		os=sysv4.2uw
+		;;
+	# es1800 is here to avoid being matched by es* (a different OS)
+	es1800*)
+		os=ose
+		;;
+	# Some version numbers need modification
+	chorusos*)
+		os=chorusos
+		;;
+	isc)
+		os=isc2.2
+		;;
+	sco6)
+		os=sco5v6
+		;;
+	sco5)
+		os=sco3.2v5
+		;;
+	sco4)
+		os=sco3.2v4
+		;;
+	sco3.2.[4-9]*)
+		os=$(echo $os | sed -e 's/sco3.2./sco3.2v/')
+		;;
+	sco*v* | scout)
+		# Don't match below
+		;;
+	sco*)
+		os=sco3.2v2
+		;;
+	psos*)
+		os=psos
+		;;
+	qnx*)
+		os=qnx
+		;;
+	hiux*)
+		os=hiuxwe2
+		;;
+	lynx*178)
+		os=lynxos178
+		;;
+	lynx*5)
+		os=lynxos5
+		;;
+	lynxos*)
+		# don't get caught up in next wildcard
+		;;
+	lynx*)
+		os=lynxos
+		;;
+	mac[0-9]*)
+		os=$(echo "$os" | sed -e 's|mac|macos|')
+		;;
+	opened*)
+		os=openedition
+		;;
+	os400*)
+		os=os400
+		;;
+	sunos5*)
+		os=$(echo "$os" | sed -e 's|sunos5|solaris2|')
+		;;
+	sunos6*)
+		os=$(echo "$os" | sed -e 's|sunos6|solaris3|')
+		;;
+	wince*)
+		os=wince
+		;;
+	utek*)
+		os=bsd
+		;;
+	dynix*)
+		os=bsd
+		;;
+	acis*)
+		os=aos
+		;;
+	atheos*)
+		os=atheos
+		;;
+	syllable*)
+		os=syllable
+		;;
+	386bsd)
+		os=bsd
+		;;
+	ctix* | uts*)
+		os=sysv
+		;;
+	nova*)
+		os=rtmk-nova
+		;;
+	ns2)
+		os=nextstep2
 		;;
 	# Preserve the version number of sinix5.
-	-sinix5.*)
-		os=`echo $os | sed -e 's|sinix|sysv|'`
+	sinix5.*)
+		os=$(echo $os | sed -e 's|sinix|sysv|')
 		;;
-	-sinix*)
-		os=-sysv4
+	sinix*)
+		os=sysv4
 		;;
-	-triton*)
-		os=-sysv3
+	tpf*)
+		os=tpf
 		;;
-	-oss*)
-		os=-sysv3
+	triton*)
+		os=sysv3
 		;;
-	-svr4)
-		os=-sysv4
+	oss*)
+		os=sysv3
 		;;
-	-svr3)
-		os=-sysv3
+	svr4*)
+		os=sysv4
 		;;
-	-sysvr4)
-		os=-sysv4
+	svr3)
+		os=sysv3
 		;;
-	# This must come after -sysvr4.
-	-sysv*)
+	sysvr4)
+		os=sysv4
 		;;
-	-ose*)
-		os=-ose
+	ose*)
+		os=ose
 		;;
-	-es1800*)
-		os=-ose
+	*mint | mint[0-9]* | *MiNT | MiNT[0-9]*)
+		os=mint
 		;;
-	-xenix)
-		os=-xenix
+	dicos*)
+		os=dicos
 		;;
-	-*mint | -mint[0-9]* | -*MiNT | -MiNT[0-9]*)
-		os=-mint
-		;;
-	-aros*)
-		os=-aros
-		;;
-	-kaos*)
-		os=-kaos
-		;;
-	-none)
+	pikeos*)
+		# Until real need of OS specific support for
+		# particular features comes up, bare metal
+		# configurations are quite functional.
+		case $cpu in
+		    arm*)
+			os=eabi
+			;;
+		    *)
+			os=elf
+			;;
+		esac
 		;;
 	*)
-		# Get rid of the `-' at the beginning of $os.
-		os=`echo $os | sed 's/[^-]*-//'`
-		echo Invalid configuration \`$1\': system \`$os\' not recognized 1>&2
-		exit 1
+		# No normalization, but not necessarily accepted, that comes below.
 		;;
 esac
+
 else
 
 # Here we handle the default operating systems that come with various machines.
@@ -1267,225 +1499,361 @@ else
 # will signal an error saying that MANUFACTURER isn't an operating
 # system, and we'll never get to this point.
 
-case $basic_machine in
+kernel=
+case $cpu-$vendor in
+	score-*)
+		os=elf
+		;;
+	spu-*)
+		os=elf
+		;;
 	*-acorn)
-		os=-riscix1.2
+		os=riscix1.2
 		;;
 	arm*-rebel)
-		os=-linux
+		kernel=linux
+		os=gnu
 		;;
 	arm*-semi)
-		os=-aout
+		os=aout
+		;;
+	c4x-* | tic4x-*)
+		os=coff
+		;;
+	c8051-*)
+		os=elf
+		;;
+	clipper-intergraph)
+		os=clix
+		;;
+	hexagon-*)
+		os=elf
+		;;
+	tic54x-*)
+		os=coff
+		;;
+	tic55x-*)
+		os=coff
+		;;
+	tic6x-*)
+		os=coff
 		;;
 	# This must come before the *-dec entry.
 	pdp10-*)
-		os=-tops20
+		os=tops20
 		;;
 	pdp11-*)
-		os=-none
+		os=none
 		;;
 	*-dec | vax-*)
-		os=-ultrix4.2
+		os=ultrix4.2
 		;;
 	m68*-apollo)
-		os=-domain
+		os=domain
 		;;
 	i386-sun)
-		os=-sunos4.0.2
+		os=sunos4.0.2
 		;;
 	m68000-sun)
-		os=-sunos3
-		# This also exists in the configure program, but was not the
-		# default.
-		# os=-sunos4
+		os=sunos3
 		;;
 	m68*-cisco)
-		os=-aout
+		os=aout
+		;;
+	mep-*)
+		os=elf
 		;;
 	mips*-cisco)
-		os=-elf
+		os=elf
 		;;
 	mips*-*)
-		os=-elf
+		os=elf
 		;;
 	or32-*)
-		os=-coff
+		os=coff
 		;;
 	*-tti)	# must be before sparc entry or we get the wrong os.
-		os=-sysv3
+		os=sysv3
 		;;
 	sparc-* | *-sun)
-		os=-sunos4.1.1
+		os=sunos4.1.1
+		;;
+	pru-*)
+		os=elf
 		;;
 	*-be)
-		os=-beos
+		os=beos
 		;;
 	*-ibm)
-		os=-aix
+		os=aix
+		;;
+	*-knuth)
+		os=mmixware
 		;;
 	*-wec)
-		os=-proelf
+		os=proelf
 		;;
 	*-winbond)
-		os=-proelf
+		os=proelf
 		;;
 	*-oki)
-		os=-proelf
+		os=proelf
 		;;
 	*-hp)
-		os=-hpux
+		os=hpux
 		;;
 	*-hitachi)
-		os=-hiux
+		os=hiux
 		;;
 	i860-* | *-att | *-ncr | *-altos | *-motorola | *-convergent)
-		os=-sysv
+		os=sysv
 		;;
 	*-cbm)
-		os=-amigaos
+		os=amigaos
 		;;
 	*-dg)
-		os=-dgux
+		os=dgux
 		;;
 	*-dolphin)
-		os=-sysv3
+		os=sysv3
 		;;
 	m68k-ccur)
-		os=-rtu
+		os=rtu
 		;;
 	m88k-omron*)
-		os=-luna
+		os=luna
 		;;
-	*-next )
-		os=-nextstep
+	*-next)
+		os=nextstep
 		;;
 	*-sequent)
-		os=-ptx
+		os=ptx
 		;;
 	*-crds)
-		os=-unos
+		os=unos
 		;;
 	*-ns)
-		os=-genix
+		os=genix
 		;;
 	i370-*)
-		os=-mvs
-		;;
-	*-next)
-		os=-nextstep3
+		os=mvs
 		;;
 	*-gould)
-		os=-sysv
+		os=sysv
 		;;
 	*-highlevel)
-		os=-bsd
+		os=bsd
 		;;
 	*-encore)
-		os=-bsd
+		os=bsd
 		;;
 	*-sgi)
-		os=-irix
+		os=irix
 		;;
 	*-siemens)
-		os=-sysv4
+		os=sysv4
 		;;
 	*-masscomp)
-		os=-rtu
+		os=rtu
 		;;
 	f30[01]-fujitsu | f700-fujitsu)
-		os=-uxpv
+		os=uxpv
 		;;
 	*-rom68k)
-		os=-coff
+		os=coff
 		;;
 	*-*bug)
-		os=-coff
+		os=coff
 		;;
 	*-apple)
-		os=-macos
+		os=macos
 		;;
 	*-atari*)
-		os=-mint
+		os=mint
+		;;
+	*-wrs)
+		os=vxworks
 		;;
 	*)
-		os=-none
+		os=none
 		;;
 esac
+
 fi
 
+# Now, validate our (potentially fixed-up) OS.
+case $os in
+	# Sometimes we do "kernel-libc", so those need to count as OSes.
+	musl* | newlib* | uclibc*)
+		;;
+	# Likewise for "kernel-abi"
+	eabi* | gnueabi*)
+		;;
+	# VxWorks passes extra cpu info in the 4th filed.
+	simlinux | simwindows | spe)
+		;;
+	# Now accept the basic system types.
+	# The portable systems comes first.
+	# Each alternative MUST end in a * to match a version number.
+	gnu* | android* | bsd* | mach* | minix* | genix* | ultrix* | irix* \
+	     | *vms* | esix* | aix* | cnk* | sunos | sunos[34]* \
+	     | hpux* | unos* | osf* | luna* | dgux* | auroraux* | solaris* \
+	     | sym* |  plan9* | psp* | sim* | xray* | os68k* | v88r* \
+	     | hiux* | abug | nacl* | netware* | windows* \
+	     | os9* | macos* | osx* | ios* \
+	     | mpw* | magic* | mmixware* | mon960* | lnews* \
+	     | amigaos* | amigados* | msdos* | newsos* | unicos* | aof* \
+	     | aos* | aros* | cloudabi* | sortix* | twizzler* \
+	     | nindy* | vxsim* | vxworks* | ebmon* | hms* | mvs* \
+	     | clix* | riscos* | uniplus* | iris* | isc* | rtu* | xenix* \
+	     | mirbsd* | netbsd* | dicos* | openedition* | ose* \
+	     | bitrig* | openbsd* | solidbsd* | libertybsd* | os108* \
+	     | ekkobsd* | freebsd* | riscix* | lynxos* | os400* \
+	     | bosx* | nextstep* | cxux* | aout* | elf* | oabi* \
+	     | ptx* | coff* | ecoff* | winnt* | domain* | vsta* \
+	     | udi* | lites* | ieee* | go32* | aux* | hcos* \
+	     | chorusrdb* | cegcc* | glidix* \
+	     | cygwin* | msys* | pe* | moss* | proelf* | rtems* \
+	     | midipix* | mingw32* | mingw64* | mint* \
+	     | uxpv* | beos* | mpeix* | udk* | moxiebox* \
+	     | interix* | uwin* | mks* | rhapsody* | darwin* \
+	     | openstep* | oskit* | conix* | pw32* | nonstopux* \
+	     | storm-chaos* | tops10* | tenex* | tops20* | its* \
+	     | os2* | vos* | palmos* | uclinux* | nucleus* | morphos* \
+	     | scout* | superux* | sysv* | rtmk* | tpf* | windiss* \
+	     | powermax* | dnix* | nx6 | nx7 | sei* | dragonfly* \
+	     | skyos* | haiku* | rdos* | toppers* | drops* | es* \
+	     | onefs* | tirtos* | phoenix* | fuchsia* | redox* | bme* \
+	     | midnightbsd* | amdhsa* | unleashed* | emscripten* | wasi* \
+	     | nsk* | powerunix* | genode* | zvmoe* | qnx* | emx*)
+		;;
+	# This one is extra strict with allowed versions
+	sco3.2v2 | sco3.2v[4-9]* | sco5v6*)
+		# Don't forget version if it is 3.2v4 or newer.
+		;;
+	none)
+		;;
+	*)
+		echo Invalid configuration \`"$1"\': OS \`"$os"\' not recognized 1>&2
+		exit 1
+		;;
+esac
+
+# As a final step for OS-related things, validate the OS-kernel combination
+# (given a valid OS), if there is a kernel.
+case $kernel-$os in
+	linux-gnu* | linux-dietlibc* | linux-android* | linux-newlib* | linux-musl* | linux-uclibc* )
+		;;
+	uclinux-uclibc* )
+		;;
+	-dietlibc* | -newlib* | -musl* | -uclibc* )
+		# These are just libc implementations, not actual OSes, and thus
+		# require a kernel.
+		echo "Invalid configuration \`$1': libc \`$os' needs explicit kernel." 1>&2
+		exit 1
+		;;
+	kfreebsd*-gnu* | kopensolaris*-gnu*)
+		;;
+	vxworks-simlinux | vxworks-simwindows | vxworks-spe)
+		;;
+	nto-qnx*)
+		;;
+	os2-emx)
+		;;
+	*-eabi* | *-gnueabi*)
+		;;
+	-*)
+		# Blank kernel with real OS is always fine.
+		;;
+	*-*)
+		echo "Invalid configuration \`$1': Kernel \`$kernel' not known to work with OS \`$os'." 1>&2
+		exit 1
+		;;
+esac
+
 # Here we handle the case where we know the os, and the CPU type, but not the
 # manufacturer.  We pick the logical manufacturer.
-vendor=unknown
-case $basic_machine in
-	*-unknown)
-		case $os in
-			-riscix*)
+case $vendor in
+	unknown)
+		case $cpu-$os in
+			*-riscix*)
 				vendor=acorn
 				;;
-			-sunos*)
+			*-sunos*)
 				vendor=sun
 				;;
-			-aix*)
+			*-cnk* | *-aix*)
 				vendor=ibm
 				;;
-			-beos*)
+			*-beos*)
 				vendor=be
 				;;
-			-hpux*)
+			*-hpux*)
 				vendor=hp
 				;;
-			-mpeix*)
+			*-mpeix*)
 				vendor=hp
 				;;
-			-hiux*)
+			*-hiux*)
 				vendor=hitachi
 				;;
-			-unos*)
+			*-unos*)
 				vendor=crds
 				;;
-			-dgux*)
+			*-dgux*)
 				vendor=dg
 				;;
-			-luna*)
+			*-luna*)
 				vendor=omron
 				;;
-			-genix*)
+			*-genix*)
 				vendor=ns
 				;;
-			-mvs* | -opened*)
+			*-clix*)
+				vendor=intergraph
+				;;
+			*-mvs* | *-opened*)
+				vendor=ibm
+				;;
+			*-os400*)
+				vendor=ibm
+				;;
+			s390-* | s390x-*)
 				vendor=ibm
 				;;
-			-ptx*)
+			*-ptx*)
 				vendor=sequent
 				;;
-			-vxsim* | -vxworks* | -windiss*)
+			*-tpf*)
+				vendor=ibm
+				;;
+			*-vxsim* | *-vxworks* | *-windiss*)
 				vendor=wrs
 				;;
-			-aux*)
+			*-aux*)
 				vendor=apple
 				;;
-			-hms*)
+			*-hms*)
 				vendor=hitachi
 				;;
-			-mpw* | -macos*)
+			*-mpw* | *-macos*)
 				vendor=apple
 				;;
-			-*mint | -mint[0-9]* | -*MiNT | -MiNT[0-9]*)
+			*-*mint | *-mint[0-9]* | *-*MiNT | *-MiNT[0-9]*)
 				vendor=atari
 				;;
-			-vos*)
+			*-vos*)
 				vendor=stratus
 				;;
 		esac
-		basic_machine=`echo $basic_machine | sed "s/unknown/$vendor/"`
 		;;
 esac
 
-echo $basic_machine$os
-exit 0
+echo "$cpu-$vendor-${kernel:+$kernel-}$os"
+exit
 
 # Local variables:
-# eval: (add-hook 'write-file-hooks 'time-stamp)
+# eval: (add-hook 'before-save-hook 'time-stamp)
 # time-stamp-start: "timestamp='"
 # time-stamp-format: "%:y-%02m-%02d"
 # time-stamp-end: "'"
diff --git a/config/install-sh b/config/install-sh
index e9de238..ec298b5 100755
--- a/config/install-sh
+++ b/config/install-sh
@@ -1,251 +1,541 @@
 #!/bin/sh
-#
 # install - install a program, script, or datafile
-# This comes from X11R5 (mit/util/scripts/install.sh).
-#
-# Copyright 1991 by the Massachusetts Institute of Technology
-#
-# Permission to use, copy, modify, distribute, and sell this software and its
-# documentation for any purpose is hereby granted without fee, provided that
-# the above copyright notice appear in all copies and that both that
-# copyright notice and this permission notice appear in supporting
-# documentation, and that the name of M.I.T. not be used in advertising or
-# publicity pertaining to distribution of the software without specific,
-# written prior permission.  M.I.T. makes no representations about the
-# suitability of this software for any purpose.  It is provided "as is"
-# without express or implied warranty.
+
+scriptversion=2020-11-14.01; # UTC
+
+# This originates from X11R5 (mit/util/scripts/install.sh), which was
+# later released in X11R6 (xc/config/util/install.sh) with the
+# following copyright and license.
+#
+# Copyright (C) 1994 X Consortium
+#
+# Permission is hereby granted, free of charge, to any person obtaining a copy
+# of this software and associated documentation files (the "Software"), to
+# deal in the Software without restriction, including without limitation the
+# rights to use, copy, modify, merge, publish, distribute, sublicense, and/or
+# sell copies of the Software, and to permit persons to whom the Software is
+# furnished to do so, subject to the following conditions:
+#
+# The above copyright notice and this permission notice shall be included in
+# all copies or substantial portions of the Software.
+#
+# THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
+# IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
+# FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT.  IN NO EVENT SHALL THE
+# X CONSORTIUM BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER LIABILITY, WHETHER IN
+# AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM, OUT OF OR IN CONNEC-
+# TION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE SOFTWARE.
+#
+# Except as contained in this notice, the name of the X Consortium shall not
+# be used in advertising or otherwise to promote the sale, use or other deal-
+# ings in this Software without prior written authorization from the X Consor-
+# tium.
+#
+#
+# FSF changes to this file are in the public domain.
 #
 # Calling this script install-sh is preferred over install.sh, to prevent
-# `make' implicit rules from creating a file called install from it
+# 'make' implicit rules from creating a file called install from it
 # when there is no Makefile.
 #
 # This script is compatible with the BSD install script, but was written
-# from scratch.  It can only install one file at a time, a restriction
-# shared with many OS's install programs.
+# from scratch.
 
-
-# set DOITPROG to echo to test this script
-
-# Don't use :- since 4.3BSD and earlier shells don't like it.
-doit="${DOITPROG-}"
-
-
-# put in absolute paths if you don't have them in your path; or use env. vars.
-
-mvprog="${MVPROG-mv}"
-cpprog="${CPPROG-cp}"
-chmodprog="${CHMODPROG-chmod}"
-chownprog="${CHOWNPROG-chown}"
-chgrpprog="${CHGRPPROG-chgrp}"
-stripprog="${STRIPPROG-strip}"
-rmprog="${RMPROG-rm}"
-mkdirprog="${MKDIRPROG-mkdir}"
-
-transformbasename=""
-transform_arg=""
-instcmd="$mvprog"
-chmodcmd="$chmodprog 0755"
-chowncmd=""
-chgrpcmd=""
-stripcmd=""
-rmcmd="$rmprog -f"
-mvcmd="$mvprog"
-src=""
-dst=""
-dir_arg=""
-
-while [ x"$1" != x ]; do
-    case $1 in
-	-c) instcmd="$cpprog"
-	    shift
-	    continue;;
-
-	-d) dir_arg=true
-	    shift
-	    continue;;
-
-	-m) chmodcmd="$chmodprog $2"
-	    shift
-	    shift
-	    continue;;
-
-	-o) chowncmd="$chownprog $2"
-	    shift
-	    shift
-	    continue;;
-
-	-g) chgrpcmd="$chgrpprog $2"
-	    shift
-	    shift
-	    continue;;
-
-	-s) stripcmd="$stripprog"
-	    shift
-	    continue;;
-
-	-t=*) transformarg=`echo $1 | sed 's/-t=//'`
-	    shift
-	    continue;;
-
-	-b=*) transformbasename=`echo $1 | sed 's/-b=//'`
-	    shift
-	    continue;;
-
-	*)  if [ x"$src" = x ]
-	    then
-		src=$1
-	    else
-		# this colon is to work around a 386BSD /bin/sh bug
-		:
-		dst=$1
-	    fi
-	    shift
-	    continue;;
-    esac
-done
-
-if [ x"$src" = x ]
-then
-	echo "install:	no input file specified"
-	exit 1
-else
-	true
-fi
-
-if [ x"$dir_arg" != x ]; then
-	dst=$src
-	src=""
-	
-	if [ -d $dst ]; then
-		instcmd=:
-		chmodcmd=""
-	else
-		instcmd=mkdir
-	fi
-else
-
-# Waiting for this to be detected by the "$instcmd $src $dsttmp" command
-# might cause directories to be created, which would be especially bad 
-# if $src (and thus $dsttmp) contains '*'.
-
-	if [ -f $src -o -d $src ]
-	then
-		true
-	else
-		echo "install:  $src does not exist"
-		exit 1
-	fi
-	
-	if [ x"$dst" = x ]
-	then
-		echo "install:	no destination specified"
-		exit 1
-	else
-		true
-	fi
-
-# If destination is a directory, append the input filename; if your system
-# does not like double slashes in filenames, you may need to add some logic
-
-	if [ -d $dst ]
-	then
-		dst="$dst"/`basename $src`
-	else
-		true
-	fi
-fi
-
-## this sed command emulates the dirname command
-dstdir=`echo $dst | sed -e 's,[^/]*$,,;s,/$,,;s,^$,.,'`
-
-# Make sure that the destination directory exists.
-#  this part is taken from Noah Friedman's mkinstalldirs script
-
-# Skip lots of stat calls in the usual case.
-if [ ! -d "$dstdir" ]; then
-defaultIFS='	
+tab='	'
+nl='
 '
-IFS="${IFS-${defaultIFS}}"
+IFS=" $tab$nl"
 
-oIFS="${IFS}"
-# Some sh's can't handle IFS=/ for some reason.
-IFS='%'
-set - `echo ${dstdir} | sed -e 's@/@%@g' -e 's@^%@/@'`
-IFS="${oIFS}"
+# Set DOITPROG to "echo" to test this script.
 
-pathcomp=''
+doit=${DOITPROG-}
+doit_exec=${doit:-exec}
 
-while [ $# -ne 0 ] ; do
-	pathcomp="${pathcomp}${1}"
-	shift
+# Put in absolute file names if you don't have them in your path;
+# or use environment vars.
 
-	if [ ! -d "${pathcomp}" ] ;
-        then
-		$mkdirprog "${pathcomp}"
-	else
-		true
-	fi
+chgrpprog=${CHGRPPROG-chgrp}
+chmodprog=${CHMODPROG-chmod}
+chownprog=${CHOWNPROG-chown}
+cmpprog=${CMPPROG-cmp}
+cpprog=${CPPROG-cp}
+mkdirprog=${MKDIRPROG-mkdir}
+mvprog=${MVPROG-mv}
+rmprog=${RMPROG-rm}
+stripprog=${STRIPPROG-strip}
+
+posix_mkdir=
+
+# Desired mode of installed file.
+mode=0755
+
+# Create dirs (including intermediate dirs) using mode 755.
+# This is like GNU 'install' as of coreutils 8.32 (2020).
+mkdir_umask=22
+
+backupsuffix=
+chgrpcmd=
+chmodcmd=$chmodprog
+chowncmd=
+mvcmd=$mvprog
+rmcmd="$rmprog -f"
+stripcmd=
+
+src=
+dst=
+dir_arg=
+dst_arg=
+
+copy_on_change=false
+is_target_a_directory=possibly
+
+usage="\
+Usage: $0 [OPTION]... [-T] SRCFILE DSTFILE
+   or: $0 [OPTION]... SRCFILES... DIRECTORY
+   or: $0 [OPTION]... -t DIRECTORY SRCFILES...
+   or: $0 [OPTION]... -d DIRECTORIES...
+
+In the 1st form, copy SRCFILE to DSTFILE.
+In the 2nd and 3rd, copy all SRCFILES to DIRECTORY.
+In the 4th, create DIRECTORIES.
+
+Options:
+     --help     display this help and exit.
+     --version  display version info and exit.
+
+  -c            (ignored)
+  -C            install only if different (preserve data modification time)
+  -d            create directories instead of installing files.
+  -g GROUP      $chgrpprog installed files to GROUP.
+  -m MODE       $chmodprog installed files to MODE.
+  -o USER       $chownprog installed files to USER.
+  -p            pass -p to $cpprog.
+  -s            $stripprog installed files.
+  -S SUFFIX     attempt to back up existing files, with suffix SUFFIX.
+  -t DIRECTORY  install into DIRECTORY.
+  -T            report an error if DSTFILE is a directory.
+
+Environment variables override the default commands:
+  CHGRPPROG CHMODPROG CHOWNPROG CMPPROG CPPROG MKDIRPROG MVPROG
+  RMPROG STRIPPROG
+
+By default, rm is invoked with -f; when overridden with RMPROG,
+it's up to you to specify -f if you want it.
+
+If -S is not specified, no backups are attempted.
+
+Email bug reports to bug-automake@gnu.org.
+Automake home page: https://www.gnu.org/software/automake/
+"
+
+while test $# -ne 0; do
+  case $1 in
+    -c) ;;
+
+    -C) copy_on_change=true;;
+
+    -d) dir_arg=true;;
+
+    -g) chgrpcmd="$chgrpprog $2"
+        shift;;
+
+    --help) echo "$usage"; exit $?;;
+
+    -m) mode=$2
+        case $mode in
+          *' '* | *"$tab"* | *"$nl"* | *'*'* | *'?'* | *'['*)
+            echo "$0: invalid mode: $mode" >&2
+            exit 1;;
+        esac
+        shift;;
+
+    -o) chowncmd="$chownprog $2"
+        shift;;
+
+    -p) cpprog="$cpprog -p";;
+
+    -s) stripcmd=$stripprog;;
+
+    -S) backupsuffix="$2"
+        shift;;
+
+    -t)
+        is_target_a_directory=always
+        dst_arg=$2
+        # Protect names problematic for 'test' and other utilities.
+        case $dst_arg in
+          -* | [=\(\)!]) dst_arg=./$dst_arg;;
+        esac
+        shift;;
+
+    -T) is_target_a_directory=never;;
+
+    --version) echo "$0 $scriptversion"; exit $?;;
 
-	pathcomp="${pathcomp}/"
+    --) shift
+        break;;
+
+    -*) echo "$0: invalid option: $1" >&2
+        exit 1;;
+
+    *)  break;;
+  esac
+  shift
 done
+
+# We allow the use of options -d and -T together, by making -d
+# take the precedence; this is for compatibility with GNU install.
+
+if test -n "$dir_arg"; then
+  if test -n "$dst_arg"; then
+    echo "$0: target directory not allowed when installing a directory." >&2
+    exit 1
+  fi
 fi
 
-if [ x"$dir_arg" != x ]
-then
-	$doit $instcmd $dst &&
+if test $# -ne 0 && test -z "$dir_arg$dst_arg"; then
+  # When -d is used, all remaining arguments are directories to create.
+  # When -t is used, the destination is already specified.
+  # Otherwise, the last argument is the destination.  Remove it from $@.
+  for arg
+  do
+    if test -n "$dst_arg"; then
+      # $@ is not empty: it contains at least $arg.
+      set fnord "$@" "$dst_arg"
+      shift # fnord
+    fi
+    shift # arg
+    dst_arg=$arg
+    # Protect names problematic for 'test' and other utilities.
+    case $dst_arg in
+      -* | [=\(\)!]) dst_arg=./$dst_arg;;
+    esac
+  done
+fi
 
-	if [ x"$chowncmd" != x ]; then $doit $chowncmd $dst; else true ; fi &&
-	if [ x"$chgrpcmd" != x ]; then $doit $chgrpcmd $dst; else true ; fi &&
-	if [ x"$stripcmd" != x ]; then $doit $stripcmd $dst; else true ; fi &&
-	if [ x"$chmodcmd" != x ]; then $doit $chmodcmd $dst; else true ; fi
-else
+if test $# -eq 0; then
+  if test -z "$dir_arg"; then
+    echo "$0: no input file specified." >&2
+    exit 1
+  fi
+  # It's OK to call 'install-sh -d' without argument.
+  # This can happen when creating conditional directories.
+  exit 0
+fi
 
-# If we're going to rename the final executable, determine the name now.
+if test -z "$dir_arg"; then
+  if test $# -gt 1 || test "$is_target_a_directory" = always; then
+    if test ! -d "$dst_arg"; then
+      echo "$0: $dst_arg: Is not a directory." >&2
+      exit 1
+    fi
+  fi
+fi
 
-	if [ x"$transformarg" = x ] 
-	then
-		dstfile=`basename $dst`
-	else
-		dstfile=`basename $dst $transformbasename | 
-			sed $transformarg`$transformbasename
-	fi
+if test -z "$dir_arg"; then
+  do_exit='(exit $ret); exit $ret'
+  trap "ret=129; $do_exit" 1
+  trap "ret=130; $do_exit" 2
+  trap "ret=141; $do_exit" 13
+  trap "ret=143; $do_exit" 15
+
+  # Set umask so as not to create temps with too-generous modes.
+  # However, 'strip' requires both read and write access to temps.
+  case $mode in
+    # Optimize common cases.
+    *644) cp_umask=133;;
+    *755) cp_umask=22;;
+
+    *[0-7])
+      if test -z "$stripcmd"; then
+        u_plus_rw=
+      else
+        u_plus_rw='% 200'
+      fi
+      cp_umask=`expr '(' 777 - $mode % 1000 ')' $u_plus_rw`;;
+    *)
+      if test -z "$stripcmd"; then
+        u_plus_rw=
+      else
+        u_plus_rw=,u+rw
+      fi
+      cp_umask=$mode$u_plus_rw;;
+  esac
+fi
+
+for src
+do
+  # Protect names problematic for 'test' and other utilities.
+  case $src in
+    -* | [=\(\)!]) src=./$src;;
+  esac
+
+  if test -n "$dir_arg"; then
+    dst=$src
+    dstdir=$dst
+    test -d "$dstdir"
+    dstdir_status=$?
+    # Don't chown directories that already exist.
+    if test $dstdir_status = 0; then
+      chowncmd=""
+    fi
+  else
 
-# don't allow the sed command to completely eliminate the filename
+    # Waiting for this to be detected by the "$cpprog $src $dsttmp" command
+    # might cause directories to be created, which would be especially bad
+    # if $src (and thus $dsttmp) contains '*'.
+    if test ! -f "$src" && test ! -d "$src"; then
+      echo "$0: $src does not exist." >&2
+      exit 1
+    fi
 
-	if [ x"$dstfile" = x ] 
+    if test -z "$dst_arg"; then
+      echo "$0: no destination specified." >&2
+      exit 1
+    fi
+    dst=$dst_arg
+
+    # If destination is a directory, append the input filename.
+    if test -d "$dst"; then
+      if test "$is_target_a_directory" = never; then
+        echo "$0: $dst_arg: Is a directory" >&2
+        exit 1
+      fi
+      dstdir=$dst
+      dstbase=`basename "$src"`
+      case $dst in
+	*/) dst=$dst$dstbase;;
+	*)  dst=$dst/$dstbase;;
+      esac
+      dstdir_status=0
+    else
+      dstdir=`dirname "$dst"`
+      test -d "$dstdir"
+      dstdir_status=$?
+    fi
+  fi
+
+  case $dstdir in
+    */) dstdirslash=$dstdir;;
+    *)  dstdirslash=$dstdir/;;
+  esac
+
+  obsolete_mkdir_used=false
+
+  if test $dstdir_status != 0; then
+    case $posix_mkdir in
+      '')
+        # With -d, create the new directory with the user-specified mode.
+        # Otherwise, rely on $mkdir_umask.
+        if test -n "$dir_arg"; then
+          mkdir_mode=-m$mode
+        else
+          mkdir_mode=
+        fi
+
+        posix_mkdir=false
+	# The $RANDOM variable is not portable (e.g., dash).  Use it
+	# here however when possible just to lower collision chance.
+	tmpdir=${TMPDIR-/tmp}/ins$RANDOM-$$
+
+	trap '
+	  ret=$?
+	  rmdir "$tmpdir/a/b" "$tmpdir/a" "$tmpdir" 2>/dev/null
+	  exit $ret
+	' 0
+
+	# Because "mkdir -p" follows existing symlinks and we likely work
+	# directly in world-writeable /tmp, make sure that the '$tmpdir'
+	# directory is successfully created first before we actually test
+	# 'mkdir -p'.
+	if (umask $mkdir_umask &&
+	    $mkdirprog $mkdir_mode "$tmpdir" &&
+	    exec $mkdirprog $mkdir_mode -p -- "$tmpdir/a/b") >/dev/null 2>&1
 	then
-		dstfile=`basename $dst`
+	  if test -z "$dir_arg" || {
+	       # Check for POSIX incompatibilities with -m.
+	       # HP-UX 11.23 and IRIX 6.5 mkdir -m -p sets group- or
+	       # other-writable bit of parent directory when it shouldn't.
+	       # FreeBSD 6.1 mkdir -m -p sets mode of existing directory.
+	       test_tmpdir="$tmpdir/a"
+	       ls_ld_tmpdir=`ls -ld "$test_tmpdir"`
+	       case $ls_ld_tmpdir in
+		 d????-?r-*) different_mode=700;;
+		 d????-?--*) different_mode=755;;
+		 *) false;;
+	       esac &&
+	       $mkdirprog -m$different_mode -p -- "$test_tmpdir" && {
+		 ls_ld_tmpdir_1=`ls -ld "$test_tmpdir"`
+		 test "$ls_ld_tmpdir" = "$ls_ld_tmpdir_1"
+	       }
+	     }
+	  then posix_mkdir=:
+	  fi
+	  rmdir "$tmpdir/a/b" "$tmpdir/a" "$tmpdir"
 	else
-		true
+	  # Remove any dirs left behind by ancient mkdir implementations.
+	  rmdir ./$mkdir_mode ./-p ./-- "$tmpdir" 2>/dev/null
 	fi
+	trap '' 0;;
+    esac
 
-# Make a temp file name in the proper directory.
+    if
+      $posix_mkdir && (
+        umask $mkdir_umask &&
+        $doit_exec $mkdirprog $mkdir_mode -p -- "$dstdir"
+      )
+    then :
+    else
 
-	dsttmp=$dstdir/#inst.$$#
+      # mkdir does not conform to POSIX,
+      # or it failed possibly due to a race condition.  Create the
+      # directory the slow way, step by step, checking for races as we go.
 
-# Move or copy the file name to the temp name
+      case $dstdir in
+        /*) prefix='/';;
+        [-=\(\)!]*) prefix='./';;
+        *)  prefix='';;
+      esac
 
-	$doit $instcmd $src $dsttmp &&
+      oIFS=$IFS
+      IFS=/
+      set -f
+      set fnord $dstdir
+      shift
+      set +f
+      IFS=$oIFS
 
-	trap "rm -f ${dsttmp}" 0 &&
+      prefixes=
 
-# and set any options; do chmod last to preserve setuid bits
+      for d
+      do
+        test X"$d" = X && continue
 
-# If any of these fail, we abort the whole thing.  If we want to
-# ignore errors from any of these, just make sure not to ignore
-# errors from the above "$doit $instcmd $src $dsttmp" command.
+        prefix=$prefix$d
+        if test -d "$prefix"; then
+          prefixes=
+        else
+          if $posix_mkdir; then
+            (umask $mkdir_umask &&
+             $doit_exec $mkdirprog $mkdir_mode -p -- "$dstdir") && break
+            # Don't fail if two instances are running concurrently.
+            test -d "$prefix" || exit 1
+          else
+            case $prefix in
+              *\'*) qprefix=`echo "$prefix" | sed "s/'/'\\\\\\\\''/g"`;;
+              *) qprefix=$prefix;;
+            esac
+            prefixes="$prefixes '$qprefix'"
+          fi
+        fi
+        prefix=$prefix/
+      done
 
-	if [ x"$chowncmd" != x ]; then $doit $chowncmd $dsttmp; else true;fi &&
-	if [ x"$chgrpcmd" != x ]; then $doit $chgrpcmd $dsttmp; else true;fi &&
-	if [ x"$stripcmd" != x ]; then $doit $stripcmd $dsttmp; else true;fi &&
-	if [ x"$chmodcmd" != x ]; then $doit $chmodcmd $dsttmp; else true;fi &&
+      if test -n "$prefixes"; then
+        # Don't fail if two instances are running concurrently.
+        (umask $mkdir_umask &&
+         eval "\$doit_exec \$mkdirprog $prefixes") ||
+          test -d "$dstdir" || exit 1
+        obsolete_mkdir_used=true
+      fi
+    fi
+  fi
 
-# Now rename the file to the real destination.
+  if test -n "$dir_arg"; then
+    { test -z "$chowncmd" || $doit $chowncmd "$dst"; } &&
+    { test -z "$chgrpcmd" || $doit $chgrpcmd "$dst"; } &&
+    { test "$obsolete_mkdir_used$chowncmd$chgrpcmd" = false ||
+      test -z "$chmodcmd" || $doit $chmodcmd $mode "$dst"; } || exit 1
+  else
 
-	$doit $rmcmd -f $dstdir/$dstfile &&
-	$doit $mvcmd $dsttmp $dstdir/$dstfile 
+    # Make a couple of temp file names in the proper directory.
+    dsttmp=${dstdirslash}_inst.$$_
+    rmtmp=${dstdirslash}_rm.$$_
 
-fi &&
+    # Trap to clean up those temp files at exit.
+    trap 'ret=$?; rm -f "$dsttmp" "$rmtmp" && exit $ret' 0
 
+    # Copy the file name to the temp name.
+    (umask $cp_umask &&
+     { test -z "$stripcmd" || {
+	 # Create $dsttmp read-write so that cp doesn't create it read-only,
+	 # which would cause strip to fail.
+	 if test -z "$doit"; then
+	   : >"$dsttmp" # No need to fork-exec 'touch'.
+	 else
+	   $doit touch "$dsttmp"
+	 fi
+       }
+     } &&
+     $doit_exec $cpprog "$src" "$dsttmp") &&
+
+    # and set any options; do chmod last to preserve setuid bits.
+    #
+    # If any of these fail, we abort the whole thing.  If we want to
+    # ignore errors from any of these, just make sure not to ignore
+    # errors from the above "$doit $cpprog $src $dsttmp" command.
+    #
+    { test -z "$chowncmd" || $doit $chowncmd "$dsttmp"; } &&
+    { test -z "$chgrpcmd" || $doit $chgrpcmd "$dsttmp"; } &&
+    { test -z "$stripcmd" || $doit $stripcmd "$dsttmp"; } &&
+    { test -z "$chmodcmd" || $doit $chmodcmd $mode "$dsttmp"; } &&
+
+    # If -C, don't bother to copy if it wouldn't change the file.
+    if $copy_on_change &&
+       old=`LC_ALL=C ls -dlL "$dst"     2>/dev/null` &&
+       new=`LC_ALL=C ls -dlL "$dsttmp"  2>/dev/null` &&
+       set -f &&
+       set X $old && old=:$2:$4:$5:$6 &&
+       set X $new && new=:$2:$4:$5:$6 &&
+       set +f &&
+       test "$old" = "$new" &&
+       $cmpprog "$dst" "$dsttmp" >/dev/null 2>&1
+    then
+      rm -f "$dsttmp"
+    else
+      # If $backupsuffix is set, and the file being installed
+      # already exists, attempt a backup.  Don't worry if it fails,
+      # e.g., if mv doesn't support -f.
+      if test -n "$backupsuffix" && test -f "$dst"; then
+        $doit $mvcmd -f "$dst" "$dst$backupsuffix" 2>/dev/null
+      fi
+
+      # Rename the file to the real destination.
+      $doit $mvcmd -f "$dsttmp" "$dst" 2>/dev/null ||
+
+      # The rename failed, perhaps because mv can't rename something else
+      # to itself, or perhaps because mv is so ancient that it does not
+      # support -f.
+      {
+        # Now remove or move aside any old file at destination location.
+        # We try this two ways since rm can't unlink itself on some
+        # systems and the destination file might be busy for other
+        # reasons.  In this case, the final cleanup might fail but the new
+        # file should still install successfully.
+        {
+          test ! -f "$dst" ||
+          $doit $rmcmd "$dst" 2>/dev/null ||
+          { $doit $mvcmd -f "$dst" "$rmtmp" 2>/dev/null &&
+            { $doit $rmcmd "$rmtmp" 2>/dev/null; :; }
+          } ||
+          { echo "$0: cannot unlink or rename $dst" >&2
+            (exit 1); exit 1
+          }
+        } &&
+
+        # Now rename the file to the real destination.
+        $doit $mvcmd "$dsttmp" "$dst"
+      }
+    fi || exit 1
+
+    trap '' 0
+  fi
+done
 
-exit 0
+# Local variables:
+# eval: (add-hook 'before-save-hook 'time-stamp)
+# time-stamp-start: "scriptversion="
+# time-stamp-format: "%:y-%02m-%02d.%02H"
+# time-stamp-time-zone: "UTC0"
+# time-stamp-end: "; # UTC"
+# End:
diff --git a/configure b/configure
index 633a02f..a28c9ce 100755
--- a/configure
+++ b/configure
@@ -1,82 +1,102 @@
 #! /bin/sh
 # Guess values for system-dependent variables and create Makefiles.
-# Generated by GNU Autoconf 2.61.
+# Generated by GNU Autoconf 2.71.
+#
+#
+# Copyright (C) 1992-1996, 1998-2017, 2020-2021 Free Software Foundation,
+# Inc.
+#
 #
-# Copyright (C) 1992, 1993, 1994, 1995, 1996, 1998, 1999, 2000, 2001,
-# 2002, 2003, 2004, 2005, 2006 Free Software Foundation, Inc.
 # This configure script is free software; the Free Software Foundation
 # gives unlimited permission to copy, distribute and modify it.
-## --------------------- ##
-## M4sh Initialization.  ##
-## --------------------- ##
+## -------------------- ##
+## M4sh Initialization. ##
+## -------------------- ##
 
 # Be more Bourne compatible
 DUALCASE=1; export DUALCASE # for MKS sh
-if test -n "${ZSH_VERSION+set}" && (emulate sh) >/dev/null 2>&1; then
+as_nop=:
+if test ${ZSH_VERSION+y} && (emulate sh) >/dev/null 2>&1
+then :
   emulate sh
   NULLCMD=:
-  # Zsh 3.x and 4.x performs word splitting on ${1+"$@"}, which
+  # Pre-4.2 versions of Zsh do word splitting on ${1+"$@"}, which
   # is contrary to our usage.  Disable this feature.
   alias -g '${1+"$@"}'='"$@"'
   setopt NO_GLOB_SUBST
-else
-  case `(set -o) 2>/dev/null` in
-  *posix*) set -o posix ;;
+else $as_nop
+  case `(set -o) 2>/dev/null` in #(
+  *posix*) :
+    set -o posix ;; #(
+  *) :
+     ;;
 esac
-
 fi
 
 
 
+# Reset variables that may have inherited troublesome values from
+# the environment.
 
-# PATH needs CR
-# Avoid depending upon Character Ranges.
-as_cr_letters='abcdefghijklmnopqrstuvwxyz'
-as_cr_LETTERS='ABCDEFGHIJKLMNOPQRSTUVWXYZ'
-as_cr_Letters=$as_cr_letters$as_cr_LETTERS
-as_cr_digits='0123456789'
-as_cr_alnum=$as_cr_Letters$as_cr_digits
-
-# The user is always right.
-if test "${PATH_SEPARATOR+set}" != set; then
-  echo "#! /bin/sh" >conf$$.sh
-  echo  "exit 0"   >>conf$$.sh
-  chmod +x conf$$.sh
-  if (PATH="/nonexistent;."; conf$$.sh) >/dev/null 2>&1; then
-    PATH_SEPARATOR=';'
-  else
-    PATH_SEPARATOR=:
-  fi
-  rm -f conf$$.sh
-fi
-
-# Support unset when possible.
-if ( (MAIL=60; unset MAIL) || exit) >/dev/null 2>&1; then
-  as_unset=unset
-else
-  as_unset=false
-fi
-
-
-# IFS
-# We need space, tab and new line, in precisely that order.  Quoting is
-# there to prevent editors from complaining about space-tab.
-# (If _AS_PATH_WALK were called with IFS unset, it would disable word
-# splitting by setting IFS to empty value.)
+# IFS needs to be set, to space, tab, and newline, in precisely that order.
+# (If _AS_PATH_WALK were called with IFS unset, it would have the
+# side effect of setting IFS to empty, thus disabling word splitting.)
+# Quoting is to prevent editors from complaining about space-tab.
 as_nl='
 '
+export as_nl
 IFS=" ""	$as_nl"
 
+PS1='$ '
+PS2='> '
+PS4='+ '
+
+# Ensure predictable behavior from utilities with locale-dependent output.
+LC_ALL=C
+export LC_ALL
+LANGUAGE=C
+export LANGUAGE
+
+# We cannot yet rely on "unset" to work, but we need these variables
+# to be unset--not just set to an empty or harmless value--now, to
+# avoid bugs in old shells (e.g. pre-3.0 UWIN ksh).  This construct
+# also avoids known problems related to "unset" and subshell syntax
+# in other old shells (e.g. bash 2.01 and pdksh 5.2.14).
+for as_var in BASH_ENV ENV MAIL MAILPATH CDPATH
+do eval test \${$as_var+y} \
+  && ( (unset $as_var) || exit 1) >/dev/null 2>&1 && unset $as_var || :
+done
+
+# Ensure that fds 0, 1, and 2 are open.
+if (exec 3>&0) 2>/dev/null; then :; else exec 0</dev/null; fi
+if (exec 3>&1) 2>/dev/null; then :; else exec 1>/dev/null; fi
+if (exec 3>&2)            ; then :; else exec 2>/dev/null; fi
+
+# The user is always right.
+if ${PATH_SEPARATOR+false} :; then
+  PATH_SEPARATOR=:
+  (PATH='/bin;/bin'; FPATH=$PATH; sh -c :) >/dev/null 2>&1 && {
+    (PATH='/bin:/bin'; FPATH=$PATH; sh -c :) >/dev/null 2>&1 ||
+      PATH_SEPARATOR=';'
+  }
+fi
+
+
 # Find who we are.  Look in the path if we contain no directory separator.
-case $0 in
+as_myself=
+case $0 in #((
   *[\\/]* ) as_myself=$0 ;;
   *) as_save_IFS=$IFS; IFS=$PATH_SEPARATOR
 for as_dir in $PATH
 do
   IFS=$as_save_IFS
-  test -z "$as_dir" && as_dir=.
-  test -r "$as_dir/$0" && as_myself=$as_dir/$0 && break
-done
+  case $as_dir in #(((
+    '') as_dir=./ ;;
+    */) ;;
+    *) as_dir=$as_dir/ ;;
+  esac
+    test -r "$as_dir$0" && as_myself=$as_dir$0 && break
+  done
 IFS=$as_save_IFS
 
      ;;
@@ -87,354 +107,386 @@ if test "x$as_myself" = x; then
   as_myself=$0
 fi
 if test ! -f "$as_myself"; then
-  echo "$as_myself: error: cannot find myself; rerun with an absolute file name" >&2
-  { (exit 1); exit 1; }
+  printf "%s\n" "$as_myself: error: cannot find myself; rerun with an absolute file name" >&2
+  exit 1
 fi
 
-# Work around bugs in pre-3.0 UWIN ksh.
-for as_var in ENV MAIL MAILPATH
-do ($as_unset $as_var) >/dev/null 2>&1 && $as_unset $as_var
-done
-PS1='$ '
-PS2='> '
-PS4='+ '
 
-# NLS nuisances.
-for as_var in \
-  LANG LANGUAGE LC_ADDRESS LC_ALL LC_COLLATE LC_CTYPE LC_IDENTIFICATION \
-  LC_MEASUREMENT LC_MESSAGES LC_MONETARY LC_NAME LC_NUMERIC LC_PAPER \
-  LC_TELEPHONE LC_TIME
-do
-  if (set +x; test -z "`(eval $as_var=C; export $as_var) 2>&1`"); then
-    eval $as_var=C; export $as_var
-  else
-    ($as_unset $as_var) >/dev/null 2>&1 && $as_unset $as_var
+# Use a proper internal environment variable to ensure we don't fall
+  # into an infinite loop, continuously re-executing ourselves.
+  if test x"${_as_can_reexec}" != xno && test "x$CONFIG_SHELL" != x; then
+    _as_can_reexec=no; export _as_can_reexec;
+    # We cannot yet assume a decent shell, so we have to provide a
+# neutralization value for shells without unset; and this also
+# works around shells that cannot unset nonexistent variables.
+# Preserve -v and -x to the replacement shell.
+BASH_ENV=/dev/null
+ENV=/dev/null
+(unset BASH_ENV) >/dev/null 2>&1 && unset BASH_ENV ENV
+case $- in # ((((
+  *v*x* | *x*v* ) as_opts=-vx ;;
+  *v* ) as_opts=-v ;;
+  *x* ) as_opts=-x ;;
+  * ) as_opts= ;;
+esac
+exec $CONFIG_SHELL $as_opts "$as_myself" ${1+"$@"}
+# Admittedly, this is quite paranoid, since all the known shells bail
+# out after a failed `exec'.
+printf "%s\n" "$0: could not re-execute with $CONFIG_SHELL" >&2
+exit 255
   fi
-done
-
-# Required to use basename.
-if expr a : '\(a\)' >/dev/null 2>&1 &&
-   test "X`expr 00001 : '.*\(...\)'`" = X001; then
-  as_expr=expr
-else
-  as_expr=false
-fi
-
-if (basename -- /) >/dev/null 2>&1 && test "X`basename -- / 2>&1`" = "X/"; then
-  as_basename=basename
-else
-  as_basename=false
-fi
-
-
-# Name of the executable.
-as_me=`$as_basename -- "$0" ||
-$as_expr X/"$0" : '.*/\([^/][^/]*\)/*$' \| \
-	 X"$0" : 'X\(//\)$' \| \
-	 X"$0" : 'X\(/\)' \| . 2>/dev/null ||
-echo X/"$0" |
-    sed '/^.*\/\([^/][^/]*\)\/*$/{
-	    s//\1/
-	    q
-	  }
-	  /^X\/\(\/\/\)$/{
-	    s//\1/
-	    q
-	  }
-	  /^X\/\(\/\).*/{
-	    s//\1/
-	    q
-	  }
-	  s/.*/./; q'`
-
-# CDPATH.
-$as_unset CDPATH
-
-
+  # We don't want this to propagate to other subprocesses.
+          { _as_can_reexec=; unset _as_can_reexec;}
 if test "x$CONFIG_SHELL" = x; then
-  if (eval ":") 2>/dev/null; then
+  as_bourne_compatible="as_nop=:
+if test \${ZSH_VERSION+y} && (emulate sh) >/dev/null 2>&1
+then :
+  emulate sh
+  NULLCMD=:
+  # Pre-4.2 versions of Zsh do word splitting on \${1+\"\$@\"}, which
+  # is contrary to our usage.  Disable this feature.
+  alias -g '\${1+\"\$@\"}'='\"\$@\"'
+  setopt NO_GLOB_SUBST
+else \$as_nop
+  case \`(set -o) 2>/dev/null\` in #(
+  *posix*) :
+    set -o posix ;; #(
+  *) :
+     ;;
+esac
+fi
+"
+  as_required="as_fn_return () { (exit \$1); }
+as_fn_success () { as_fn_return 0; }
+as_fn_failure () { as_fn_return 1; }
+as_fn_ret_success () { return 0; }
+as_fn_ret_failure () { return 1; }
+
+exitcode=0
+as_fn_success || { exitcode=1; echo as_fn_success failed.; }
+as_fn_failure && { exitcode=1; echo as_fn_failure succeeded.; }
+as_fn_ret_success || { exitcode=1; echo as_fn_ret_success failed.; }
+as_fn_ret_failure && { exitcode=1; echo as_fn_ret_failure succeeded.; }
+if ( set x; as_fn_ret_success y && test x = \"\$1\" )
+then :
+
+else \$as_nop
+  exitcode=1; echo positional parameters were not saved.
+fi
+test x\$exitcode = x0 || exit 1
+blah=\$(echo \$(echo blah))
+test x\"\$blah\" = xblah || exit 1
+test -x / || exit 1"
+  as_suggested="  as_lineno_1=";as_suggested=$as_suggested$LINENO;as_suggested=$as_suggested" as_lineno_1a=\$LINENO
+  as_lineno_2=";as_suggested=$as_suggested$LINENO;as_suggested=$as_suggested" as_lineno_2a=\$LINENO
+  eval 'test \"x\$as_lineno_1'\$as_run'\" != \"x\$as_lineno_2'\$as_run'\" &&
+  test \"x\`expr \$as_lineno_1'\$as_run' + 1\`\" = \"x\$as_lineno_2'\$as_run'\"' || exit 1
+test \$(( 1 + 1 )) = 2 || exit 1"
+  if (eval "$as_required") 2>/dev/null
+then :
   as_have_required=yes
-else
+else $as_nop
   as_have_required=no
 fi
+  if test x$as_have_required = xyes && (eval "$as_suggested") 2>/dev/null
+then :
 
-  if test $as_have_required = yes && 	 (eval ":
-(as_func_return () {
-  (exit \$1)
-}
-as_func_success () {
-  as_func_return 0
-}
-as_func_failure () {
-  as_func_return 1
-}
-as_func_ret_success () {
-  return 0
-}
-as_func_ret_failure () {
-  return 1
-}
-
-exitcode=0
-if as_func_success; then
-  :
-else
-  exitcode=1
-  echo as_func_success failed.
-fi
-
-if as_func_failure; then
-  exitcode=1
-  echo as_func_failure succeeded.
-fi
-
-if as_func_ret_success; then
-  :
-else
-  exitcode=1
-  echo as_func_ret_success failed.
-fi
-
-if as_func_ret_failure; then
-  exitcode=1
-  echo as_func_ret_failure succeeded.
-fi
-
-if ( set x; as_func_ret_success y && test x = \"\$1\" ); then
-  :
-else
-  exitcode=1
-  echo positional parameters were not saved.
-fi
-
-test \$exitcode = 0) || { (exit 1); exit 1; }
-
-(
-  as_lineno_1=\$LINENO
-  as_lineno_2=\$LINENO
-  test \"x\$as_lineno_1\" != \"x\$as_lineno_2\" &&
-  test \"x\`expr \$as_lineno_1 + 1\`\" = \"x\$as_lineno_2\") || { (exit 1); exit 1; }
-") 2> /dev/null; then
-  :
-else
-  as_candidate_shells=
-    as_save_IFS=$IFS; IFS=$PATH_SEPARATOR
+else $as_nop
+  as_save_IFS=$IFS; IFS=$PATH_SEPARATOR
+as_found=false
 for as_dir in /bin$PATH_SEPARATOR/usr/bin$PATH_SEPARATOR$PATH
 do
   IFS=$as_save_IFS
-  test -z "$as_dir" && as_dir=.
-  case $as_dir in
+  case $as_dir in #(((
+    '') as_dir=./ ;;
+    */) ;;
+    *) as_dir=$as_dir/ ;;
+  esac
+  as_found=:
+  case $as_dir in #(
 	 /*)
 	   for as_base in sh bash ksh sh5; do
-	     as_candidate_shells="$as_candidate_shells $as_dir/$as_base"
+	     # Try only shells that exist, to save several forks.
+	     as_shell=$as_dir$as_base
+	     if { test -f "$as_shell" || test -f "$as_shell.exe"; } &&
+		    as_run=a "$as_shell" -c "$as_bourne_compatible""$as_required" 2>/dev/null
+then :
+  CONFIG_SHELL=$as_shell as_have_required=yes
+		   if as_run=a "$as_shell" -c "$as_bourne_compatible""$as_suggested" 2>/dev/null
+then :
+  break 2
+fi
+fi
 	   done;;
        esac
+  as_found=false
 done
 IFS=$as_save_IFS
-
-
-      for as_shell in $as_candidate_shells $SHELL; do
-	 # Try only shells that exist, to save several forks.
-	 if { test -f "$as_shell" || test -f "$as_shell.exe"; } &&
-		{ ("$as_shell") 2> /dev/null <<\_ASEOF
-if test -n "${ZSH_VERSION+set}" && (emulate sh) >/dev/null 2>&1; then
-  emulate sh
-  NULLCMD=:
-  # Zsh 3.x and 4.x performs word splitting on ${1+"$@"}, which
-  # is contrary to our usage.  Disable this feature.
-  alias -g '${1+"$@"}'='"$@"'
-  setopt NO_GLOB_SUBST
-else
-  case `(set -o) 2>/dev/null` in
-  *posix*) set -o posix ;;
-esac
-
-fi
-
-
-:
-_ASEOF
-}; then
-  CONFIG_SHELL=$as_shell
-	       as_have_required=yes
-	       if { "$as_shell" 2> /dev/null <<\_ASEOF
-if test -n "${ZSH_VERSION+set}" && (emulate sh) >/dev/null 2>&1; then
-  emulate sh
-  NULLCMD=:
-  # Zsh 3.x and 4.x performs word splitting on ${1+"$@"}, which
-  # is contrary to our usage.  Disable this feature.
-  alias -g '${1+"$@"}'='"$@"'
-  setopt NO_GLOB_SUBST
-else
-  case `(set -o) 2>/dev/null` in
-  *posix*) set -o posix ;;
-esac
-
-fi
-
-
-:
-(as_func_return () {
-  (exit $1)
-}
-as_func_success () {
-  as_func_return 0
-}
-as_func_failure () {
-  as_func_return 1
-}
-as_func_ret_success () {
-  return 0
-}
-as_func_ret_failure () {
-  return 1
-}
-
-exitcode=0
-if as_func_success; then
-  :
-else
-  exitcode=1
-  echo as_func_success failed.
-fi
-
-if as_func_failure; then
-  exitcode=1
-  echo as_func_failure succeeded.
-fi
-
-if as_func_ret_success; then
-  :
-else
-  exitcode=1
-  echo as_func_ret_success failed.
-fi
-
-if as_func_ret_failure; then
-  exitcode=1
-  echo as_func_ret_failure succeeded.
+if $as_found
+then :
+
+else $as_nop
+  if { test -f "$SHELL" || test -f "$SHELL.exe"; } &&
+	      as_run=a "$SHELL" -c "$as_bourne_compatible""$as_required" 2>/dev/null
+then :
+  CONFIG_SHELL=$SHELL as_have_required=yes
 fi
-
-if ( set x; as_func_ret_success y && test x = "$1" ); then
-  :
-else
-  exitcode=1
-  echo positional parameters were not saved.
-fi
-
-test $exitcode = 0) || { (exit 1); exit 1; }
-
-(
-  as_lineno_1=$LINENO
-  as_lineno_2=$LINENO
-  test "x$as_lineno_1" != "x$as_lineno_2" &&
-  test "x`expr $as_lineno_1 + 1`" = "x$as_lineno_2") || { (exit 1); exit 1; }
-
-_ASEOF
-}; then
-  break
-fi
-
 fi
 
-      done
 
-      if test "x$CONFIG_SHELL" != x; then
-  for as_var in BASH_ENV ENV
-        do ($as_unset $as_var) >/dev/null 2>&1 && $as_unset $as_var
-        done
-        export CONFIG_SHELL
-        exec "$CONFIG_SHELL" "$as_myself" ${1+"$@"}
+      if test "x$CONFIG_SHELL" != x
+then :
+  export CONFIG_SHELL
+             # We cannot yet assume a decent shell, so we have to provide a
+# neutralization value for shells without unset; and this also
+# works around shells that cannot unset nonexistent variables.
+# Preserve -v and -x to the replacement shell.
+BASH_ENV=/dev/null
+ENV=/dev/null
+(unset BASH_ENV) >/dev/null 2>&1 && unset BASH_ENV ENV
+case $- in # ((((
+  *v*x* | *x*v* ) as_opts=-vx ;;
+  *v* ) as_opts=-v ;;
+  *x* ) as_opts=-x ;;
+  * ) as_opts= ;;
+esac
+exec $CONFIG_SHELL $as_opts "$as_myself" ${1+"$@"}
+# Admittedly, this is quite paranoid, since all the known shells bail
+# out after a failed `exec'.
+printf "%s\n" "$0: could not re-execute with $CONFIG_SHELL" >&2
+exit 255
 fi
 
-
-    if test $as_have_required = no; then
-  echo This script requires a shell more modern than all the
-      echo shells that I found on your system.  Please install a
-      echo modern shell, or manually run the script under such a
-      echo shell if you do have one.
-      { (exit 1); exit 1; }
+    if test x$as_have_required = xno
+then :
+  printf "%s\n" "$0: This script requires a shell more modern than all"
+  printf "%s\n" "$0: the shells that I found on your system."
+  if test ${ZSH_VERSION+y} ; then
+    printf "%s\n" "$0: In particular, zsh $ZSH_VERSION has bugs and should"
+    printf "%s\n" "$0: be upgraded to zsh 4.3.4 or later."
+  else
+    printf "%s\n" "$0: Please tell bug-autoconf@gnu.org about your system,
+$0: including any error possibly output before this
+$0: message. Then install a modern shell, or manually run
+$0: the script under such a shell if you do have one."
+  fi
+  exit 1
 fi
-
-
 fi
-
 fi
-
-
-
-(eval "as_func_return () {
-  (exit \$1)
-}
-as_func_success () {
-  as_func_return 0
-}
-as_func_failure () {
-  as_func_return 1
+SHELL=${CONFIG_SHELL-/bin/sh}
+export SHELL
+# Unset more variables known to interfere with behavior of common tools.
+CLICOLOR_FORCE= GREP_OPTIONS=
+unset CLICOLOR_FORCE GREP_OPTIONS
+
+## --------------------- ##
+## M4sh Shell Functions. ##
+## --------------------- ##
+# as_fn_unset VAR
+# ---------------
+# Portably unset VAR.
+as_fn_unset ()
+{
+  { eval $1=; unset $1;}
 }
-as_func_ret_success () {
-  return 0
+as_unset=as_fn_unset
+
+
+# as_fn_set_status STATUS
+# -----------------------
+# Set $? to STATUS, without forking.
+as_fn_set_status ()
+{
+  return $1
+} # as_fn_set_status
+
+# as_fn_exit STATUS
+# -----------------
+# Exit the shell with STATUS, even in a "trap 0" or "set -e" context.
+as_fn_exit ()
+{
+  set +e
+  as_fn_set_status $1
+  exit $1
+} # as_fn_exit
+# as_fn_nop
+# ---------
+# Do nothing but, unlike ":", preserve the value of $?.
+as_fn_nop ()
+{
+  return $?
 }
-as_func_ret_failure () {
-  return 1
+as_nop=as_fn_nop
+
+# as_fn_mkdir_p
+# -------------
+# Create "$as_dir" as a directory, including parents if necessary.
+as_fn_mkdir_p ()
+{
+
+  case $as_dir in #(
+  -*) as_dir=./$as_dir;;
+  esac
+  test -d "$as_dir" || eval $as_mkdir_p || {
+    as_dirs=
+    while :; do
+      case $as_dir in #(
+      *\'*) as_qdir=`printf "%s\n" "$as_dir" | sed "s/'/'\\\\\\\\''/g"`;; #'(
+      *) as_qdir=$as_dir;;
+      esac
+      as_dirs="'$as_qdir' $as_dirs"
+      as_dir=`$as_dirname -- "$as_dir" ||
+$as_expr X"$as_dir" : 'X\(.*[^/]\)//*[^/][^/]*/*$' \| \
+	 X"$as_dir" : 'X\(//\)[^/]' \| \
+	 X"$as_dir" : 'X\(//\)$' \| \
+	 X"$as_dir" : 'X\(/\)' \| . 2>/dev/null ||
+printf "%s\n" X"$as_dir" |
+    sed '/^X\(.*[^/]\)\/\/*[^/][^/]*\/*$/{
+	    s//\1/
+	    q
+	  }
+	  /^X\(\/\/\)[^/].*/{
+	    s//\1/
+	    q
+	  }
+	  /^X\(\/\/\)$/{
+	    s//\1/
+	    q
+	  }
+	  /^X\(\/\).*/{
+	    s//\1/
+	    q
+	  }
+	  s/.*/./; q'`
+      test -d "$as_dir" && break
+    done
+    test -z "$as_dirs" || eval "mkdir $as_dirs"
+  } || test -d "$as_dir" || as_fn_error $? "cannot create directory $as_dir"
+
+
+} # as_fn_mkdir_p
+
+# as_fn_executable_p FILE
+# -----------------------
+# Test if FILE is an executable regular file.
+as_fn_executable_p ()
+{
+  test -f "$1" && test -x "$1"
+} # as_fn_executable_p
+# as_fn_append VAR VALUE
+# ----------------------
+# Append the text in VALUE to the end of the definition contained in VAR. Take
+# advantage of any shell optimizations that allow amortized linear growth over
+# repeated appends, instead of the typical quadratic growth present in naive
+# implementations.
+if (eval "as_var=1; as_var+=2; test x\$as_var = x12") 2>/dev/null
+then :
+  eval 'as_fn_append ()
+  {
+    eval $1+=\$2
+  }'
+else $as_nop
+  as_fn_append ()
+  {
+    eval $1=\$$1\$2
+  }
+fi # as_fn_append
+
+# as_fn_arith ARG...
+# ------------------
+# Perform arithmetic evaluation on the ARGs, and store the result in the
+# global $as_val. Take advantage of shells that can avoid forks. The arguments
+# must be portable across $(()) and expr.
+if (eval "test \$(( 1 + 1 )) = 2") 2>/dev/null
+then :
+  eval 'as_fn_arith ()
+  {
+    as_val=$(( $* ))
+  }'
+else $as_nop
+  as_fn_arith ()
+  {
+    as_val=`expr "$@" || test $? -eq 1`
+  }
+fi # as_fn_arith
+
+# as_fn_nop
+# ---------
+# Do nothing but, unlike ":", preserve the value of $?.
+as_fn_nop ()
+{
+  return $?
 }
-
-exitcode=0
-if as_func_success; then
-  :
+as_nop=as_fn_nop
+
+# as_fn_error STATUS ERROR [LINENO LOG_FD]
+# ----------------------------------------
+# Output "`basename $0`: error: ERROR" to stderr. If LINENO and LOG_FD are
+# provided, also output the error to LOG_FD, referencing LINENO. Then exit the
+# script with STATUS, using 1 if that was 0.
+as_fn_error ()
+{
+  as_status=$1; test $as_status -eq 0 && as_status=1
+  if test "$4"; then
+    as_lineno=${as_lineno-"$3"} as_lineno_stack=as_lineno_stack=$as_lineno_stack
+    printf "%s\n" "$as_me:${as_lineno-$LINENO}: error: $2" >&$4
+  fi
+  printf "%s\n" "$as_me: error: $2" >&2
+  as_fn_exit $as_status
+} # as_fn_error
+
+if expr a : '\(a\)' >/dev/null 2>&1 &&
+   test "X`expr 00001 : '.*\(...\)'`" = X001; then
+  as_expr=expr
 else
-  exitcode=1
-  echo as_func_success failed.
-fi
-
-if as_func_failure; then
-  exitcode=1
-  echo as_func_failure succeeded.
+  as_expr=false
 fi
 
-if as_func_ret_success; then
-  :
+if (basename -- /) >/dev/null 2>&1 && test "X`basename -- / 2>&1`" = "X/"; then
+  as_basename=basename
 else
-  exitcode=1
-  echo as_func_ret_success failed.
+  as_basename=false
 fi
 
-if as_func_ret_failure; then
-  exitcode=1
-  echo as_func_ret_failure succeeded.
-fi
-
-if ( set x; as_func_ret_success y && test x = \"\$1\" ); then
-  :
+if (as_dir=`dirname -- /` && test "X$as_dir" = X/) >/dev/null 2>&1; then
+  as_dirname=dirname
 else
-  exitcode=1
-  echo positional parameters were not saved.
+  as_dirname=false
 fi
 
-test \$exitcode = 0") || {
-  echo No shell found that supports shell functions.
-  echo Please tell autoconf@gnu.org about your system,
-  echo including any error possibly output before this
-  echo message
-}
-
-
-
-  as_lineno_1=$LINENO
-  as_lineno_2=$LINENO
-  test "x$as_lineno_1" != "x$as_lineno_2" &&
-  test "x`expr $as_lineno_1 + 1`" = "x$as_lineno_2" || {
-
-  # Create $as_me.lineno as a copy of $as_myself, but with $LINENO
-  # uniformly replaced by the line number.  The first 'sed' inserts a
-  # line-number line after each line using $LINENO; the second 'sed'
-  # does the real work.  The second script uses 'N' to pair each
-  # line-number line with the line containing $LINENO, and appends
-  # trailing '-' during substitution so that $LINENO is not a special
-  # case at line end.
-  # (Raja R Harinath suggested sed '=', and Paul Eggert wrote the
-  # scripts with optimization help from Paolo Bonzini.  Blame Lee
-  # E. McMahon (1931-1989) for sed's syntax.  :-)
+as_me=`$as_basename -- "$0" ||
+$as_expr X/"$0" : '.*/\([^/][^/]*\)/*$' \| \
+	 X"$0" : 'X\(//\)$' \| \
+	 X"$0" : 'X\(/\)' \| . 2>/dev/null ||
+printf "%s\n" X/"$0" |
+    sed '/^.*\/\([^/][^/]*\)\/*$/{
+	    s//\1/
+	    q
+	  }
+	  /^X\/\(\/\/\)$/{
+	    s//\1/
+	    q
+	  }
+	  /^X\/\(\/\).*/{
+	    s//\1/
+	    q
+	  }
+	  s/.*/./; q'`
+
+# Avoid depending upon Character Ranges.
+as_cr_letters='abcdefghijklmnopqrstuvwxyz'
+as_cr_LETTERS='ABCDEFGHIJKLMNOPQRSTUVWXYZ'
+as_cr_Letters=$as_cr_letters$as_cr_LETTERS
+as_cr_digits='0123456789'
+as_cr_alnum=$as_cr_Letters$as_cr_digits
+
+
+  as_lineno_1=$LINENO as_lineno_1a=$LINENO
+  as_lineno_2=$LINENO as_lineno_2a=$LINENO
+  eval 'test "x$as_lineno_1'$as_run'" != "x$as_lineno_2'$as_run'" &&
+  test "x`expr $as_lineno_1'$as_run' + 1`" = "x$as_lineno_2'$as_run'"' || {
+  # Blame Lee E. McMahon (1931-1989) for sed's syntax.  :-)
   sed -n '
     p
     /[$]LINENO/=
@@ -451,9 +503,12 @@ test \$exitcode = 0") || {
       s/-\n.*//
     ' >$as_me.lineno &&
   chmod +x "$as_me.lineno" ||
-    { echo "$as_me: error: cannot create $as_me.lineno; rerun with a POSIX shell" >&2
-   { (exit 1); exit 1; }; }
+    { printf "%s\n" "$as_me: error: cannot create $as_me.lineno; rerun with a POSIX shell" >&2; as_fn_exit 1; }
 
+  # If we had to re-execute with $CONFIG_SHELL, we're ensured to have
+  # already done that, so ensure we don't try to do so again and fall
+  # in an infinite loop.  This has already happened in practice.
+  _as_can_reexec=no; export _as_can_reexec
   # Don't try to exec as it changes $[0], causing all sort of problems
   # (the dirname of $[0] is not the place where we might find the
   # original and so on.  Autoconf is especially sensitive to this).
@@ -463,83 +518,65 @@ test \$exitcode = 0") || {
 }
 
 
-if (as_dir=`dirname -- /` && test "X$as_dir" = X/) >/dev/null 2>&1; then
-  as_dirname=dirname
-else
-  as_dirname=false
-fi
-
+# Determine whether it's possible to make 'echo' print without a newline.
+# These variables are no longer used directly by Autoconf, but are AC_SUBSTed
+# for compatibility with existing Makefiles.
 ECHO_C= ECHO_N= ECHO_T=
-case `echo -n x` in
+case `echo -n x` in #(((((
 -n*)
-  case `echo 'x\c'` in
+  case `echo 'xy\c'` in
   *c*) ECHO_T='	';;	# ECHO_T is single tab character.
-  *)   ECHO_C='\c';;
+  xy)  ECHO_C='\c';;
+  *)   echo `echo ksh88 bug on AIX 6.1` > /dev/null
+       ECHO_T='	';;
   esac;;
 *)
   ECHO_N='-n';;
 esac
 
-if expr a : '\(a\)' >/dev/null 2>&1 &&
-   test "X`expr 00001 : '.*\(...\)'`" = X001; then
-  as_expr=expr
-else
-  as_expr=false
-fi
+# For backward compatibility with old third-party macros, we provide
+# the shell variables $as_echo and $as_echo_n.  New code should use
+# AS_ECHO(["message"]) and AS_ECHO_N(["message"]), respectively.
+as_echo='printf %s\n'
+as_echo_n='printf %s'
+
 
 rm -f conf$$ conf$$.exe conf$$.file
 if test -d conf$$.dir; then
   rm -f conf$$.dir/conf$$.file
 else
   rm -f conf$$.dir
-  mkdir conf$$.dir
+  mkdir conf$$.dir 2>/dev/null
 fi
-echo >conf$$.file
-if ln -s conf$$.file conf$$ 2>/dev/null; then
-  as_ln_s='ln -s'
-  # ... but there are two gotchas:
-  # 1) On MSYS, both `ln -s file dir' and `ln file dir' fail.
-  # 2) DJGPP < 2.04 has no symlinks; `ln -s' creates a wrapper executable.
-  # In both cases, we have to default to `cp -p'.
-  ln -s conf$$.file conf$$.dir 2>/dev/null && test ! -f conf$$.exe ||
-    as_ln_s='cp -p'
-elif ln conf$$.file conf$$ 2>/dev/null; then
-  as_ln_s=ln
+if (echo >conf$$.file) 2>/dev/null; then
+  if ln -s conf$$.file conf$$ 2>/dev/null; then
+    as_ln_s='ln -s'
+    # ... but there are two gotchas:
+    # 1) On MSYS, both `ln -s file dir' and `ln file dir' fail.
+    # 2) DJGPP < 2.04 has no symlinks; `ln -s' creates a wrapper executable.
+    # In both cases, we have to default to `cp -pR'.
+    ln -s conf$$.file conf$$.dir 2>/dev/null && test ! -f conf$$.exe ||
+      as_ln_s='cp -pR'
+  elif ln conf$$.file conf$$ 2>/dev/null; then
+    as_ln_s=ln
+  else
+    as_ln_s='cp -pR'
+  fi
 else
-  as_ln_s='cp -p'
+  as_ln_s='cp -pR'
 fi
 rm -f conf$$ conf$$.exe conf$$.dir/conf$$.file conf$$.file
 rmdir conf$$.dir 2>/dev/null
 
 if mkdir -p . 2>/dev/null; then
-  as_mkdir_p=:
+  as_mkdir_p='mkdir -p "$as_dir"'
 else
   test -d ./-p && rmdir ./-p
   as_mkdir_p=false
 fi
 
-if test -x / >/dev/null 2>&1; then
-  as_test_x='test -x'
-else
-  if ls -dL / >/dev/null 2>&1; then
-    as_ls_L_option=L
-  else
-    as_ls_L_option=
-  fi
-  as_test_x='
-    eval sh -c '\''
-      if test -d "$1"; then
-        test -d "$1/.";
-      else
-	case $1 in
-        -*)set "./$1";;
-	esac;
-	case `ls -ld'$as_ls_L_option' "$1" 2>/dev/null` in
-	???[sx]*):;;*)false;;esac;fi
-    '\'' sh
-  '
-fi
-as_executable_p=$as_test_x
+as_test_x='test -x'
+as_executable_p=as_fn_executable_p
 
 # Sed expression to map a string onto a valid CPP name.
 as_tr_cpp="eval sed 'y%*$as_cr_letters%P$as_cr_LETTERS%;s%[^_$as_cr_alnum]%_%g'"
@@ -548,11 +585,11 @@ as_tr_cpp="eval sed 'y%*$as_cr_letters%P$as_cr_LETTERS%;s%[^_$as_cr_alnum]%_%g'"
 as_tr_sh="eval sed 'y%*+%pp%;s%[^_$as_cr_alnum]%_%g'"
 
 
-
-exec 7<&0 </dev/null 6>&1
+test -n "$DJDIR" || exec 7<&0 </dev/null
+exec 6>&1
 
 # Name of the host.
-# hostname on some systems (SVR3.2, Linux) returns a bogus exit status,
+# hostname on some systems (SVR3.2, old GNU/Linux) returns a bogus exit status,
 # so uname gets run too.
 ac_hostname=`(hostname || uname -n) 2>/dev/null | sed 1q`
 
@@ -567,167 +604,235 @@ cross_compiling=no
 subdirs=
 MFLAGS=
 MAKEFLAGS=
-SHELL=${CONFIG_SHELL-/bin/sh}
 
 # Identity of this package.
-PACKAGE_NAME=
-PACKAGE_TARNAME=
-PACKAGE_VERSION=
-PACKAGE_STRING=
-PACKAGE_BUGREPORT=
+PACKAGE_NAME=''
+PACKAGE_TARNAME=''
+PACKAGE_VERSION=''
+PACKAGE_STRING=''
+PACKAGE_BUGREPORT=''
+PACKAGE_URL=''
 
 ac_unique_file="COPYRIGHT"
 # Factoring default headers for most tests.
 ac_includes_default="\
-#include <stdio.h>
-#ifdef HAVE_SYS_TYPES_H
-# include <sys/types.h>
+#include <stddef.h>
+#ifdef HAVE_STDIO_H
+# include <stdio.h>
 #endif
-#ifdef HAVE_SYS_STAT_H
-# include <sys/stat.h>
-#endif
-#ifdef STDC_HEADERS
+#ifdef HAVE_STDLIB_H
 # include <stdlib.h>
-# include <stddef.h>
-#else
-# ifdef HAVE_STDLIB_H
-#  include <stdlib.h>
-# endif
 #endif
 #ifdef HAVE_STRING_H
-# if !defined STDC_HEADERS && defined HAVE_MEMORY_H
-#  include <memory.h>
-# endif
 # include <string.h>
 #endif
-#ifdef HAVE_STRINGS_H
-# include <strings.h>
-#endif
 #ifdef HAVE_INTTYPES_H
 # include <inttypes.h>
 #endif
 #ifdef HAVE_STDINT_H
 # include <stdint.h>
 #endif
+#ifdef HAVE_STRINGS_H
+# include <strings.h>
+#endif
+#ifdef HAVE_SYS_TYPES_H
+# include <sys/types.h>
+#endif
+#ifdef HAVE_SYS_STAT_H
+# include <sys/stat.h>
+#endif
 #ifdef HAVE_UNISTD_H
 # include <unistd.h>
 #endif"
 
-ac_subst_vars='SHELL
-PATH_SEPARATOR
-PACKAGE_NAME
-PACKAGE_TARNAME
-PACKAGE_VERSION
-PACKAGE_STRING
-PACKAGE_BUGREPORT
-exec_prefix
-prefix
-program_transform_name
-bindir
-sbindir
-libexecdir
-datarootdir
-datadir
-sysconfdir
-sharedstatedir
-localstatedir
-includedir
-oldincludedir
-docdir
-infodir
-htmldir
-dvidir
-pdfdir
-psdir
-libdir
-localedir
-mandir
-DEFS
-ECHO_C
-ECHO_N
-ECHO_T
-LIBS
-build_alias
-host_alias
-target_alias
-build
-build_cpu
-build_vendor
-build_os
-host
-host_cpu
-host_vendor
-host_os
-target
-target_cpu
-target_vendor
-target_os
-ARCH
-CXX
-CXXFLAGS
-LDFLAGS
-CPPFLAGS
-ac_ct_CXX
-EXEEXT
-OBJEXT
-CC
-CFLAGS
-ac_ct_CC
-AR
-M4
-INSTALL_PROGRAM
-INSTALL_SCRIPT
-INSTALL_DATA
-CPP
-GREP
-EGREP
-CXXCPP
-CXX_FLAGS_NO_TEMPLATE_INST
-IMPLICIT_TEMPLATE_INSTANTIATION
-DEPENDS_ON_TEMPLATE_IMPLEMENTATION
-DEVELOPER_MAKEFILE
-SAMRAI_OPTIONAL_LIBS
-SAMRAI_ENABLE_SPECIAL
-F77
-FFLAGS
-F77LIBFLAGS
-ac_ct_F77
-FLIBS
-XMKMF
-X_CFLAGS
-X_PRE_LIBS
-X_LIBS
-X_EXTRA_LIBS
-DOXYGEN_BIN
-HAVE_DOT
-DOT_PATH
-dox_output_dir
-SAMRAI_PERL
-MPICC
-MPIINCLUDE
-MPILIBDIRS
-MPILIBS
-MPIFLAGS
-SUNDIALS_C_FILES
-PARALLEL_RUN_BIN
-TEST_NPROCS
-INSTDIR
-SAMRAI_TARGET
-TAU_INCLUDE
-XARGS
-F77_FLAGS
-C_FLAGS
-CXX_FLAGS
-LD_FLAGS
-CXXLD_FLAGS
-LIB_SUFFIX
-SRCDIR_COMPILE_PREFIX
-INC_PATH
-LIB_PATH
-LIB_NAME
+ac_header_cxx_list=
+ac_subst_vars='LTLIBOBJS
 LIBOBJS
-LTLIBOBJS'
+LIB_NAME
+LIB_PATH
+INC_PATH
+SRCDIR_COMPILE_PREFIX
+LIB_SUFFIX
+CXXLD_FLAGS
+LD_FLAGS
+CXX_FLAGS
+C_FLAGS
+F77_FLAGS
+XARGS
+TAU_INCLUDE
+SAMRAI_TARGET
+INSTDIR
+TEST_NPROCS
+PARALLEL_RUN_BIN
+SUNDIALS_C_FILES
+MPIFLAGS
+MPILIBS
+MPILIBDIRS
+MPIINCLUDE
+MPICC
+SAMRAI_PERL
+dox_output_dir
+DOT_PATH
+HAVE_DOT
+DOXYGEN_BIN
+X_EXTRA_LIBS
+X_LIBS
+X_PRE_LIBS
+X_CFLAGS
+XMKMF
+FLIBS
+ac_ct_F77
+F77LIBFLAGS
+FFLAGS
+F77
+SAMRAI_ENABLE_SPECIAL
+SAMRAI_OPTIONAL_LIBS
+DEVELOPER_MAKEFILE
+DEPENDS_ON_TEMPLATE_IMPLEMENTATION
+IMPLICIT_TEMPLATE_INSTANTIATION
+CXX_FLAGS_NO_TEMPLATE_INST
+CXXCPP
+EGREP
+GREP
+CPP
+MKDIR_P
+INSTALL_DATA
+INSTALL_SCRIPT
+INSTALL_PROGRAM
+M4
+AR
+ac_ct_CC
+CFLAGS
+CC
+OBJEXT
+EXEEXT
+ac_ct_CXX
+CPPFLAGS
+LDFLAGS
+CXXFLAGS
+CXX
+ARCH
+target_os
+target_vendor
+target_cpu
+target
+host_os
+host_vendor
+host_cpu
+host
+build_os
+build_vendor
+build_cpu
+build
+target_alias
+host_alias
+build_alias
+LIBS
+ECHO_T
+ECHO_N
+ECHO_C
+DEFS
+mandir
+localedir
+libdir
+psdir
+pdfdir
+dvidir
+htmldir
+infodir
+docdir
+oldincludedir
+includedir
+runstatedir
+localstatedir
+sharedstatedir
+sysconfdir
+datadir
+datarootdir
+libexecdir
+sbindir
+bindir
+program_transform_name
+prefix
+exec_prefix
+PACKAGE_URL
+PACKAGE_BUGREPORT
+PACKAGE_STRING
+PACKAGE_VERSION
+PACKAGE_TARNAME
+PACKAGE_NAME
+PATH_SEPARATOR
+SHELL'
 ac_subst_files=''
+ac_user_opts='
+enable_option_checking
+enable_char
+enable_float
+enable_bool
+enable_dcomplex
+enable_vpath
+enable_noxargs
+enable_shared
+enable_xdr
+enable_developer_makefile
+with_CC
+with_CXX
+with_F77
+with_M4
+with_AR
+with_vampir
+with_tau
+enable_deprecated
+with_MPI
+with_HDF5
+with_PETSC
+enable_implicit_template_instantiation
+enable_opt
+enable_debug
+enable_fortran_mangling_override
+with_x
+with_doxygen
+with_dot_dir
+with_dox_output_dir
+with_perl
+with_iostream_header_file
+with_iomanip_header_file
+with_stl_sstream_header_file
+with_dl
+with_dl_includes
+with_dl_libs
+with_nsl
+with_nsl_includes
+with_nsl_libs
+with_libz
+with_libz_includes
+with_libz_libs
+with_blaslapack
+with_blaslapack_includes
+with_blaslapack_libs
+with_mpi
+with_mpi_include
+with_mpi_libs
+with_mpi_lib_dirs
+with_mpi_flags
+with_MPICC
+with_hdf5
+with_silo
+with_hypre
+with_superlu_lib
+with_spooles
+with_petsc
+with_petsc_arch
+with_petsc_optimize
+with_petsc_mpiuni
+with_petsc_libfiles
+with_sundials
+with_cubes
+with_eleven
+enable_rpath
+with_parallel_run_bin
+enable_test_nprocs
+'
       ac_precious_vars='build_alias
 host_alias
 target_alias
@@ -749,6 +854,8 @@ XMKMF'
 # Initialize some variables set by options.
 ac_init_help=
 ac_init_version=false
+ac_unrecognized_opts=
+ac_unrecognized_sep=
 # The variables have the same names as the options, with
 # dashes changed to underlines.
 cache_file=/dev/null
@@ -780,6 +887,7 @@ datadir='${datarootdir}'
 sysconfdir='${prefix}/etc'
 sharedstatedir='${prefix}/com'
 localstatedir='${prefix}/var'
+runstatedir='${localstatedir}/run'
 includedir='${prefix}/include'
 oldincludedir='/usr/include'
 docdir='${datarootdir}/doc/${PACKAGE}'
@@ -804,12 +912,11 @@ do
   fi
 
   case $ac_option in
-  *=*)	ac_optarg=`expr "X$ac_option" : '[^=]*=\(.*\)'` ;;
-  *)	ac_optarg=yes ;;
+  *=?*) ac_optarg=`expr "X$ac_option" : '[^=]*=\(.*\)'` ;;
+  *=)   ac_optarg= ;;
+  *)    ac_optarg=yes ;;
   esac
 
-  # Accept the important Cygnus configure options, so we can diagnose typos.
-
   case $ac_dashdash$ac_option in
   --)
     ac_dashdash=yes ;;
@@ -847,13 +954,20 @@ do
     datarootdir=$ac_optarg ;;
 
   -disable-* | --disable-*)
-    ac_feature=`expr "x$ac_option" : 'x-*disable-\(.*\)'`
+    ac_useropt=`expr "x$ac_option" : 'x-*disable-\(.*\)'`
     # Reject names that are not valid shell variable names.
-    expr "x$ac_feature" : ".*[^-._$as_cr_alnum]" >/dev/null &&
-      { echo "$as_me: error: invalid feature name: $ac_feature" >&2
-   { (exit 1); exit 1; }; }
-    ac_feature=`echo $ac_feature | sed 's/[-.]/_/g'`
-    eval enable_$ac_feature=no ;;
+    expr "x$ac_useropt" : ".*[^-+._$as_cr_alnum]" >/dev/null &&
+      as_fn_error $? "invalid feature name: \`$ac_useropt'"
+    ac_useropt_orig=$ac_useropt
+    ac_useropt=`printf "%s\n" "$ac_useropt" | sed 's/[-+.]/_/g'`
+    case $ac_user_opts in
+      *"
+"enable_$ac_useropt"
+"*) ;;
+      *) ac_unrecognized_opts="$ac_unrecognized_opts$ac_unrecognized_sep--disable-$ac_useropt_orig"
+	 ac_unrecognized_sep=', ';;
+    esac
+    eval enable_$ac_useropt=no ;;
 
   -docdir | --docdir | --docdi | --doc | --do)
     ac_prev=docdir ;;
@@ -866,13 +980,20 @@ do
     dvidir=$ac_optarg ;;
 
   -enable-* | --enable-*)
-    ac_feature=`expr "x$ac_option" : 'x-*enable-\([^=]*\)'`
+    ac_useropt=`expr "x$ac_option" : 'x-*enable-\([^=]*\)'`
     # Reject names that are not valid shell variable names.
-    expr "x$ac_feature" : ".*[^-._$as_cr_alnum]" >/dev/null &&
-      { echo "$as_me: error: invalid feature name: $ac_feature" >&2
-   { (exit 1); exit 1; }; }
-    ac_feature=`echo $ac_feature | sed 's/[-.]/_/g'`
-    eval enable_$ac_feature=\$ac_optarg ;;
+    expr "x$ac_useropt" : ".*[^-+._$as_cr_alnum]" >/dev/null &&
+      as_fn_error $? "invalid feature name: \`$ac_useropt'"
+    ac_useropt_orig=$ac_useropt
+    ac_useropt=`printf "%s\n" "$ac_useropt" | sed 's/[-+.]/_/g'`
+    case $ac_user_opts in
+      *"
+"enable_$ac_useropt"
+"*) ;;
+      *) ac_unrecognized_opts="$ac_unrecognized_opts$ac_unrecognized_sep--enable-$ac_useropt_orig"
+	 ac_unrecognized_sep=', ';;
+    esac
+    eval enable_$ac_useropt=\$ac_optarg ;;
 
   -exec-prefix | --exec_prefix | --exec-prefix | --exec-prefi \
   | --exec-pref | --exec-pre | --exec-pr | --exec-p | --exec- \
@@ -1017,6 +1138,15 @@ do
   | -silent | --silent | --silen | --sile | --sil)
     silent=yes ;;
 
+  -runstatedir | --runstatedir | --runstatedi | --runstated \
+  | --runstate | --runstat | --runsta | --runst | --runs \
+  | --run | --ru | --r)
+    ac_prev=runstatedir ;;
+  -runstatedir=* | --runstatedir=* | --runstatedi=* | --runstated=* \
+  | --runstate=* | --runstat=* | --runsta=* | --runst=* | --runs=* \
+  | --run=* | --ru=* | --r=*)
+    runstatedir=$ac_optarg ;;
+
   -sbindir | --sbindir | --sbindi | --sbind | --sbin | --sbi | --sb)
     ac_prev=sbindir ;;
   -sbindir=* | --sbindir=* | --sbindi=* | --sbind=* | --sbin=* \
@@ -1063,22 +1193,36 @@ do
     ac_init_version=: ;;
 
   -with-* | --with-*)
-    ac_package=`expr "x$ac_option" : 'x-*with-\([^=]*\)'`
+    ac_useropt=`expr "x$ac_option" : 'x-*with-\([^=]*\)'`
     # Reject names that are not valid shell variable names.
-    expr "x$ac_package" : ".*[^-._$as_cr_alnum]" >/dev/null &&
-      { echo "$as_me: error: invalid package name: $ac_package" >&2
-   { (exit 1); exit 1; }; }
-    ac_package=`echo $ac_package | sed 's/[-.]/_/g'`
-    eval with_$ac_package=\$ac_optarg ;;
+    expr "x$ac_useropt" : ".*[^-+._$as_cr_alnum]" >/dev/null &&
+      as_fn_error $? "invalid package name: \`$ac_useropt'"
+    ac_useropt_orig=$ac_useropt
+    ac_useropt=`printf "%s\n" "$ac_useropt" | sed 's/[-+.]/_/g'`
+    case $ac_user_opts in
+      *"
+"with_$ac_useropt"
+"*) ;;
+      *) ac_unrecognized_opts="$ac_unrecognized_opts$ac_unrecognized_sep--with-$ac_useropt_orig"
+	 ac_unrecognized_sep=', ';;
+    esac
+    eval with_$ac_useropt=\$ac_optarg ;;
 
   -without-* | --without-*)
-    ac_package=`expr "x$ac_option" : 'x-*without-\(.*\)'`
+    ac_useropt=`expr "x$ac_option" : 'x-*without-\(.*\)'`
     # Reject names that are not valid shell variable names.
-    expr "x$ac_package" : ".*[^-._$as_cr_alnum]" >/dev/null &&
-      { echo "$as_me: error: invalid package name: $ac_package" >&2
-   { (exit 1); exit 1; }; }
-    ac_package=`echo $ac_package | sed 's/[-.]/_/g'`
-    eval with_$ac_package=no ;;
+    expr "x$ac_useropt" : ".*[^-+._$as_cr_alnum]" >/dev/null &&
+      as_fn_error $? "invalid package name: \`$ac_useropt'"
+    ac_useropt_orig=$ac_useropt
+    ac_useropt=`printf "%s\n" "$ac_useropt" | sed 's/[-+.]/_/g'`
+    case $ac_user_opts in
+      *"
+"with_$ac_useropt"
+"*) ;;
+      *) ac_unrecognized_opts="$ac_unrecognized_opts$ac_unrecognized_sep--without-$ac_useropt_orig"
+	 ac_unrecognized_sep=', ';;
+    esac
+    eval with_$ac_useropt=no ;;
 
   --x)
     # Obsolete; use --with-x.
@@ -1098,26 +1242,26 @@ do
   | --x-librar=* | --x-libra=* | --x-libr=* | --x-lib=* | --x-li=* | --x-l=*)
     x_libraries=$ac_optarg ;;
 
-  -*) { echo "$as_me: error: unrecognized option: $ac_option
-Try \`$0 --help' for more information." >&2
-   { (exit 1); exit 1; }; }
+  -*) as_fn_error $? "unrecognized option: \`$ac_option'
+Try \`$0 --help' for more information"
     ;;
 
   *=*)
     ac_envvar=`expr "x$ac_option" : 'x\([^=]*\)='`
     # Reject names that are not valid shell variable names.
-    expr "x$ac_envvar" : ".*[^_$as_cr_alnum]" >/dev/null &&
-      { echo "$as_me: error: invalid variable name: $ac_envvar" >&2
-   { (exit 1); exit 1; }; }
+    case $ac_envvar in #(
+      '' | [0-9]* | *[!_$as_cr_alnum]* )
+      as_fn_error $? "invalid variable name: \`$ac_envvar'" ;;
+    esac
     eval $ac_envvar=\$ac_optarg
     export $ac_envvar ;;
 
   *)
     # FIXME: should be removed in autoconf 3.0.
-    echo "$as_me: WARNING: you should use --build, --host, --target" >&2
+    printf "%s\n" "$as_me: WARNING: you should use --build, --host, --target" >&2
     expr "x$ac_option" : ".*[^-._$as_cr_alnum]" >/dev/null &&
-      echo "$as_me: WARNING: invalid host type: $ac_option" >&2
-    : ${build_alias=$ac_option} ${host_alias=$ac_option} ${target_alias=$ac_option}
+      printf "%s\n" "$as_me: WARNING: invalid host type: $ac_option" >&2
+    : "${build_alias=$ac_option} ${host_alias=$ac_option} ${target_alias=$ac_option}"
     ;;
 
   esac
@@ -1125,23 +1269,36 @@ done
 
 if test -n "$ac_prev"; then
   ac_option=--`echo $ac_prev | sed 's/_/-/g'`
-  { echo "$as_me: error: missing argument to $ac_option" >&2
-   { (exit 1); exit 1; }; }
+  as_fn_error $? "missing argument to $ac_option"
 fi
 
-# Be sure to have absolute directory names.
+if test -n "$ac_unrecognized_opts"; then
+  case $enable_option_checking in
+    no) ;;
+    fatal) as_fn_error $? "unrecognized options: $ac_unrecognized_opts" ;;
+    *)     printf "%s\n" "$as_me: WARNING: unrecognized options: $ac_unrecognized_opts" >&2 ;;
+  esac
+fi
+
+# Check all directory arguments for consistency.
 for ac_var in	exec_prefix prefix bindir sbindir libexecdir datarootdir \
 		datadir sysconfdir sharedstatedir localstatedir includedir \
 		oldincludedir docdir infodir htmldir dvidir pdfdir psdir \
-		libdir localedir mandir
+		libdir localedir mandir runstatedir
 do
   eval ac_val=\$$ac_var
+  # Remove trailing slashes.
+  case $ac_val in
+    */ )
+      ac_val=`expr "X$ac_val" : 'X\(.*[^/]\)' \| "X$ac_val" : 'X\(.*\)'`
+      eval $ac_var=\$ac_val;;
+  esac
+  # Be sure to have absolute directory names.
   case $ac_val in
     [\\/$]* | ?:[\\/]* )  continue;;
     NONE | '' ) case $ac_var in *prefix ) continue;; esac;;
   esac
-  { echo "$as_me: error: expected an absolute directory name for --$ac_var: $ac_val" >&2
-   { (exit 1); exit 1; }; }
+  as_fn_error $? "expected an absolute directory name for --$ac_var: $ac_val"
 done
 
 # There might be people who depend on the old broken behavior: `$host'
@@ -1155,8 +1312,6 @@ target=$target_alias
 if test "x$host_alias" != x; then
   if test "x$build_alias" = x; then
     cross_compiling=maybe
-    echo "$as_me: WARNING: If you wanted to set the --build type, don't use --host.
-    If a cross compiler is detected then cross compile mode will be used." >&2
   elif test "x$build_alias" != "x$host_alias"; then
     cross_compiling=yes
   fi
@@ -1171,23 +1326,21 @@ test "$silent" = yes && exec 6>/dev/null
 ac_pwd=`pwd` && test -n "$ac_pwd" &&
 ac_ls_di=`ls -di .` &&
 ac_pwd_ls_di=`cd "$ac_pwd" && ls -di .` ||
-  { echo "$as_me: error: Working directory cannot be determined" >&2
-   { (exit 1); exit 1; }; }
+  as_fn_error $? "working directory cannot be determined"
 test "X$ac_ls_di" = "X$ac_pwd_ls_di" ||
-  { echo "$as_me: error: pwd does not report name of working directory" >&2
-   { (exit 1); exit 1; }; }
+  as_fn_error $? "pwd does not report name of working directory"
 
 
 # Find the source files, if location was not specified.
 if test -z "$srcdir"; then
   ac_srcdir_defaulted=yes
   # Try the directory containing this script, then the parent directory.
-  ac_confdir=`$as_dirname -- "$0" ||
-$as_expr X"$0" : 'X\(.*[^/]\)//*[^/][^/]*/*$' \| \
-	 X"$0" : 'X\(//\)[^/]' \| \
-	 X"$0" : 'X\(//\)$' \| \
-	 X"$0" : 'X\(/\)' \| . 2>/dev/null ||
-echo X"$0" |
+  ac_confdir=`$as_dirname -- "$as_myself" ||
+$as_expr X"$as_myself" : 'X\(.*[^/]\)//*[^/][^/]*/*$' \| \
+	 X"$as_myself" : 'X\(//\)[^/]' \| \
+	 X"$as_myself" : 'X\(//\)$' \| \
+	 X"$as_myself" : 'X\(/\)' \| . 2>/dev/null ||
+printf "%s\n" X"$as_myself" |
     sed '/^X\(.*[^/]\)\/\/*[^/][^/]*\/*$/{
 	    s//\1/
 	    q
@@ -1214,13 +1367,11 @@ else
 fi
 if test ! -r "$srcdir/$ac_unique_file"; then
   test "$ac_srcdir_defaulted" = yes && srcdir="$ac_confdir or .."
-  { echo "$as_me: error: cannot find sources ($ac_unique_file) in $srcdir" >&2
-   { (exit 1); exit 1; }; }
+  as_fn_error $? "cannot find sources ($ac_unique_file) in $srcdir"
 fi
 ac_msg="sources are in $srcdir, but \`cd $srcdir' does not work"
 ac_abs_confdir=`(
-	cd "$srcdir" && test -r "./$ac_unique_file" || { echo "$as_me: error: $ac_msg" >&2
-   { (exit 1); exit 1; }; }
+	cd "$srcdir" && test -r "./$ac_unique_file" || as_fn_error $? "$ac_msg"
 	pwd)`
 # When building in place, set srcdir=.
 if test "$ac_abs_confdir" = "$ac_pwd"; then
@@ -1260,7 +1411,7 @@ Configuration:
       --help=short        display options specific to this package
       --help=recursive    display the short help of all the included packages
   -V, --version           display version information and exit
-  -q, --quiet, --silent   do not print \`checking...' messages
+  -q, --quiet, --silent   do not print \`checking ...' messages
       --cache-file=FILE   cache test results in FILE [disabled]
   -C, --config-cache      alias for \`--cache-file=config.cache'
   -n, --no-create         do not create output files
@@ -1268,9 +1419,9 @@ Configuration:
 
 Installation directories:
   --prefix=PREFIX         install architecture-independent files in PREFIX
-			  [$ac_default_prefix]
+                          [$ac_default_prefix]
   --exec-prefix=EPREFIX   install architecture-dependent files in EPREFIX
-			  [PREFIX]
+                          [PREFIX]
 
 By default, \`make install' will install all the files in
 \`$ac_default_prefix/bin', \`$ac_default_prefix/lib' etc.  You can specify
@@ -1280,25 +1431,26 @@ for instance \`--prefix=\$HOME'.
 For better control, use the options below.
 
 Fine tuning of the installation directories:
-  --bindir=DIR           user executables [EPREFIX/bin]
-  --sbindir=DIR          system admin executables [EPREFIX/sbin]
-  --libexecdir=DIR       program executables [EPREFIX/libexec]
-  --sysconfdir=DIR       read-only single-machine data [PREFIX/etc]
-  --sharedstatedir=DIR   modifiable architecture-independent data [PREFIX/com]
-  --localstatedir=DIR    modifiable single-machine data [PREFIX/var]
-  --libdir=DIR           object code libraries [EPREFIX/lib]
-  --includedir=DIR       C header files [PREFIX/include]
-  --oldincludedir=DIR    C header files for non-gcc [/usr/include]
-  --datarootdir=DIR      read-only arch.-independent data root [PREFIX/share]
-  --datadir=DIR          read-only architecture-independent data [DATAROOTDIR]
-  --infodir=DIR          info documentation [DATAROOTDIR/info]
-  --localedir=DIR        locale-dependent data [DATAROOTDIR/locale]
-  --mandir=DIR           man documentation [DATAROOTDIR/man]
-  --docdir=DIR           documentation root [DATAROOTDIR/doc/PACKAGE]
-  --htmldir=DIR          html documentation [DOCDIR]
-  --dvidir=DIR           dvi documentation [DOCDIR]
-  --pdfdir=DIR           pdf documentation [DOCDIR]
-  --psdir=DIR            ps documentation [DOCDIR]
+  --bindir=DIR            user executables [EPREFIX/bin]
+  --sbindir=DIR           system admin executables [EPREFIX/sbin]
+  --libexecdir=DIR        program executables [EPREFIX/libexec]
+  --sysconfdir=DIR        read-only single-machine data [PREFIX/etc]
+  --sharedstatedir=DIR    modifiable architecture-independent data [PREFIX/com]
+  --localstatedir=DIR     modifiable single-machine data [PREFIX/var]
+  --runstatedir=DIR       modifiable per-process data [LOCALSTATEDIR/run]
+  --libdir=DIR            object code libraries [EPREFIX/lib]
+  --includedir=DIR        C header files [PREFIX/include]
+  --oldincludedir=DIR     C header files for non-gcc [/usr/include]
+  --datarootdir=DIR       read-only arch.-independent data root [PREFIX/share]
+  --datadir=DIR           read-only architecture-independent data [DATAROOTDIR]
+  --infodir=DIR           info documentation [DATAROOTDIR/info]
+  --localedir=DIR         locale-dependent data [DATAROOTDIR/locale]
+  --mandir=DIR            man documentation [DATAROOTDIR/man]
+  --docdir=DIR            documentation root [DATAROOTDIR/doc/PACKAGE]
+  --htmldir=DIR           html documentation [DOCDIR]
+  --dvidir=DIR            dvi documentation [DOCDIR]
+  --pdfdir=DIR            pdf documentation [DOCDIR]
+  --psdir=DIR             ps documentation [DOCDIR]
 _ACEOF
 
   cat <<\_ACEOF
@@ -1319,6 +1471,7 @@ if test -n "$ac_init_help"; then
   cat <<\_ACEOF
 
 Optional Features:
+  --disable-option-checking  ignore unrecognized --enable/--with options
   --disable-FEATURE       do not include FEATURE (same as --enable-FEATURE=no)
   --enable-FEATURE[=ARG]  include FEATURE [ARG=yes]
   --enable-char           build char patch datatypes
@@ -1460,7 +1613,7 @@ Some influential environment variables:
   LDFLAGS     linker flags, e.g. -L<lib dir> if you have libraries in a
               nonstandard directory <lib dir>
   LIBS        libraries to pass to the linker, e.g. -l<library>
-  CPPFLAGS    C/C++/Objective C preprocessor flags, e.g. -I<include dir> if
+  CPPFLAGS    (Objective) C/C++ preprocessor flags, e.g. -I<include dir> if
               you have headers in a nonstandard directory <include dir>
   CC          C compiler command
   CFLAGS      C compiler flags
@@ -1473,6 +1626,7 @@ Some influential environment variables:
 Use these variables to override the choices made by `configure' or to help
 it to find libraries and programs with nonstandard names/locations.
 
+Report bugs to the package provider.
 _ACEOF
 ac_status=$?
 fi
@@ -1480,15 +1634,17 @@ fi
 if test "$ac_init_help" = "recursive"; then
   # If there are subdirs, report their specific --help.
   for ac_dir in : $ac_subdirs_all; do test "x$ac_dir" = x: && continue
-    test -d "$ac_dir" || continue
+    test -d "$ac_dir" ||
+      { cd "$srcdir" && ac_pwd=`pwd` && srcdir=. && test -d "$ac_dir"; } ||
+      continue
     ac_builddir=.
 
 case "$ac_dir" in
 .) ac_dir_suffix= ac_top_builddir_sub=. ac_top_build_prefix= ;;
 *)
-  ac_dir_suffix=/`echo "$ac_dir" | sed 's,^\.[\\/],,'`
+  ac_dir_suffix=/`printf "%s\n" "$ac_dir" | sed 's|^\.[\\/]||'`
   # A ".." for each directory in $ac_dir_suffix.
-  ac_top_builddir_sub=`echo "$ac_dir_suffix" | sed 's,/[^\\/]*,/..,g;s,/,,'`
+  ac_top_builddir_sub=`printf "%s\n" "$ac_dir_suffix" | sed 's|/[^\\/]*|/..|g;s|/||'`
   case $ac_top_builddir_sub in
   "") ac_top_builddir_sub=. ac_top_build_prefix= ;;
   *)  ac_top_build_prefix=$ac_top_builddir_sub/ ;;
@@ -1516,7 +1672,8 @@ esac
 ac_abs_srcdir=$ac_abs_top_srcdir$ac_dir_suffix
 
     cd "$ac_dir" || { ac_status=$?; continue; }
-    # Check for guested configure.
+    # Check for configure.gnu first; this name is used for a wrapper for
+    # Metaconfig's "Configure" on case-insensitive file systems.
     if test -f "$ac_srcdir/configure.gnu"; then
       echo &&
       $SHELL "$ac_srcdir/configure.gnu" --help=recursive
@@ -1524,7 +1681,7 @@ ac_abs_srcdir=$ac_abs_top_srcdir$ac_dir_suffix
       echo &&
       $SHELL "$ac_srcdir/configure" --help=recursive
     else
-      echo "$as_me: WARNING: no configuration information is in $ac_dir" >&2
+      printf "%s\n" "$as_me: WARNING: no configuration information is in $ac_dir" >&2
     fi || ac_status=$?
     cd "$ac_pwd" || { ac_status=$?; break; }
   done
@@ -1534,23 +1691,469 @@ test -n "$ac_init_help" && exit $ac_status
 if $ac_init_version; then
   cat <<\_ACEOF
 configure
-generated by GNU Autoconf 2.61
+generated by GNU Autoconf 2.71
 
-Copyright (C) 1992, 1993, 1994, 1995, 1996, 1998, 1999, 2000, 2001,
-2002, 2003, 2004, 2005, 2006 Free Software Foundation, Inc.
+Copyright (C) 2021 Free Software Foundation, Inc.
 This configure script is free software; the Free Software Foundation
 gives unlimited permission to copy, distribute and modify it.
 _ACEOF
   exit
 fi
+
+## ------------------------ ##
+## Autoconf initialization. ##
+## ------------------------ ##
+
+# ac_fn_cxx_try_compile LINENO
+# ----------------------------
+# Try to compile conftest.$ac_ext, and return whether this succeeded.
+ac_fn_cxx_try_compile ()
+{
+  as_lineno=${as_lineno-"$1"} as_lineno_stack=as_lineno_stack=$as_lineno_stack
+  rm -f conftest.$ac_objext conftest.beam
+  if { { ac_try="$ac_compile"
+case "(($ac_try" in
+  *\"* | *\`* | *\\*) ac_try_echo=\$ac_try;;
+  *) ac_try_echo=$ac_try;;
+esac
+eval ac_try_echo="\"\$as_me:${as_lineno-$LINENO}: $ac_try_echo\""
+printf "%s\n" "$ac_try_echo"; } >&5
+  (eval "$ac_compile") 2>conftest.err
+  ac_status=$?
+  if test -s conftest.err; then
+    grep -v '^ *+' conftest.err >conftest.er1
+    cat conftest.er1 >&5
+    mv -f conftest.er1 conftest.err
+  fi
+  printf "%s\n" "$as_me:${as_lineno-$LINENO}: \$? = $ac_status" >&5
+  test $ac_status = 0; } && {
+	 test -z "$ac_cxx_werror_flag" ||
+	 test ! -s conftest.err
+       } && test -s conftest.$ac_objext
+then :
+  ac_retval=0
+else $as_nop
+  printf "%s\n" "$as_me: failed program was:" >&5
+sed 's/^/| /' conftest.$ac_ext >&5
+
+	ac_retval=1
+fi
+  eval $as_lineno_stack; ${as_lineno_stack:+:} unset as_lineno
+  as_fn_set_status $ac_retval
+
+} # ac_fn_cxx_try_compile
+
+# ac_fn_c_try_compile LINENO
+# --------------------------
+# Try to compile conftest.$ac_ext, and return whether this succeeded.
+ac_fn_c_try_compile ()
+{
+  as_lineno=${as_lineno-"$1"} as_lineno_stack=as_lineno_stack=$as_lineno_stack
+  rm -f conftest.$ac_objext conftest.beam
+  if { { ac_try="$ac_compile"
+case "(($ac_try" in
+  *\"* | *\`* | *\\*) ac_try_echo=\$ac_try;;
+  *) ac_try_echo=$ac_try;;
+esac
+eval ac_try_echo="\"\$as_me:${as_lineno-$LINENO}: $ac_try_echo\""
+printf "%s\n" "$ac_try_echo"; } >&5
+  (eval "$ac_compile") 2>conftest.err
+  ac_status=$?
+  if test -s conftest.err; then
+    grep -v '^ *+' conftest.err >conftest.er1
+    cat conftest.er1 >&5
+    mv -f conftest.er1 conftest.err
+  fi
+  printf "%s\n" "$as_me:${as_lineno-$LINENO}: \$? = $ac_status" >&5
+  test $ac_status = 0; } && {
+	 test -z "$ac_c_werror_flag" ||
+	 test ! -s conftest.err
+       } && test -s conftest.$ac_objext
+then :
+  ac_retval=0
+else $as_nop
+  printf "%s\n" "$as_me: failed program was:" >&5
+sed 's/^/| /' conftest.$ac_ext >&5
+
+	ac_retval=1
+fi
+  eval $as_lineno_stack; ${as_lineno_stack:+:} unset as_lineno
+  as_fn_set_status $ac_retval
+
+} # ac_fn_c_try_compile
+
+# ac_fn_c_try_link LINENO
+# -----------------------
+# Try to link conftest.$ac_ext, and return whether this succeeded.
+ac_fn_c_try_link ()
+{
+  as_lineno=${as_lineno-"$1"} as_lineno_stack=as_lineno_stack=$as_lineno_stack
+  rm -f conftest.$ac_objext conftest.beam conftest$ac_exeext
+  if { { ac_try="$ac_link"
+case "(($ac_try" in
+  *\"* | *\`* | *\\*) ac_try_echo=\$ac_try;;
+  *) ac_try_echo=$ac_try;;
+esac
+eval ac_try_echo="\"\$as_me:${as_lineno-$LINENO}: $ac_try_echo\""
+printf "%s\n" "$ac_try_echo"; } >&5
+  (eval "$ac_link") 2>conftest.err
+  ac_status=$?
+  if test -s conftest.err; then
+    grep -v '^ *+' conftest.err >conftest.er1
+    cat conftest.er1 >&5
+    mv -f conftest.er1 conftest.err
+  fi
+  printf "%s\n" "$as_me:${as_lineno-$LINENO}: \$? = $ac_status" >&5
+  test $ac_status = 0; } && {
+	 test -z "$ac_c_werror_flag" ||
+	 test ! -s conftest.err
+       } && test -s conftest$ac_exeext && {
+	 test "$cross_compiling" = yes ||
+	 test -x conftest$ac_exeext
+       }
+then :
+  ac_retval=0
+else $as_nop
+  printf "%s\n" "$as_me: failed program was:" >&5
+sed 's/^/| /' conftest.$ac_ext >&5
+
+	ac_retval=1
+fi
+  # Delete the IPA/IPO (Inter Procedural Analysis/Optimization) information
+  # created by the PGI compiler (conftest_ipa8_conftest.oo), as it would
+  # interfere with the next link command; also delete a directory that is
+  # left behind by Apple's compiler.  We do this before executing the actions.
+  rm -rf conftest.dSYM conftest_ipa8_conftest.oo
+  eval $as_lineno_stack; ${as_lineno_stack:+:} unset as_lineno
+  as_fn_set_status $ac_retval
+
+} # ac_fn_c_try_link
+
+# ac_fn_c_try_cpp LINENO
+# ----------------------
+# Try to preprocess conftest.$ac_ext, and return whether this succeeded.
+ac_fn_c_try_cpp ()
+{
+  as_lineno=${as_lineno-"$1"} as_lineno_stack=as_lineno_stack=$as_lineno_stack
+  if { { ac_try="$ac_cpp conftest.$ac_ext"
+case "(($ac_try" in
+  *\"* | *\`* | *\\*) ac_try_echo=\$ac_try;;
+  *) ac_try_echo=$ac_try;;
+esac
+eval ac_try_echo="\"\$as_me:${as_lineno-$LINENO}: $ac_try_echo\""
+printf "%s\n" "$ac_try_echo"; } >&5
+  (eval "$ac_cpp conftest.$ac_ext") 2>conftest.err
+  ac_status=$?
+  if test -s conftest.err; then
+    grep -v '^ *+' conftest.err >conftest.er1
+    cat conftest.er1 >&5
+    mv -f conftest.er1 conftest.err
+  fi
+  printf "%s\n" "$as_me:${as_lineno-$LINENO}: \$? = $ac_status" >&5
+  test $ac_status = 0; } > conftest.i && {
+	 test -z "$ac_c_preproc_warn_flag$ac_c_werror_flag" ||
+	 test ! -s conftest.err
+       }
+then :
+  ac_retval=0
+else $as_nop
+  printf "%s\n" "$as_me: failed program was:" >&5
+sed 's/^/| /' conftest.$ac_ext >&5
+
+    ac_retval=1
+fi
+  eval $as_lineno_stack; ${as_lineno_stack:+:} unset as_lineno
+  as_fn_set_status $ac_retval
+
+} # ac_fn_c_try_cpp
+
+# ac_fn_cxx_try_cpp LINENO
+# ------------------------
+# Try to preprocess conftest.$ac_ext, and return whether this succeeded.
+ac_fn_cxx_try_cpp ()
+{
+  as_lineno=${as_lineno-"$1"} as_lineno_stack=as_lineno_stack=$as_lineno_stack
+  if { { ac_try="$ac_cpp conftest.$ac_ext"
+case "(($ac_try" in
+  *\"* | *\`* | *\\*) ac_try_echo=\$ac_try;;
+  *) ac_try_echo=$ac_try;;
+esac
+eval ac_try_echo="\"\$as_me:${as_lineno-$LINENO}: $ac_try_echo\""
+printf "%s\n" "$ac_try_echo"; } >&5
+  (eval "$ac_cpp conftest.$ac_ext") 2>conftest.err
+  ac_status=$?
+  if test -s conftest.err; then
+    grep -v '^ *+' conftest.err >conftest.er1
+    cat conftest.er1 >&5
+    mv -f conftest.er1 conftest.err
+  fi
+  printf "%s\n" "$as_me:${as_lineno-$LINENO}: \$? = $ac_status" >&5
+  test $ac_status = 0; } > conftest.i && {
+	 test -z "$ac_cxx_preproc_warn_flag$ac_cxx_werror_flag" ||
+	 test ! -s conftest.err
+       }
+then :
+  ac_retval=0
+else $as_nop
+  printf "%s\n" "$as_me: failed program was:" >&5
+sed 's/^/| /' conftest.$ac_ext >&5
+
+    ac_retval=1
+fi
+  eval $as_lineno_stack; ${as_lineno_stack:+:} unset as_lineno
+  as_fn_set_status $ac_retval
+
+} # ac_fn_cxx_try_cpp
+
+# ac_fn_cxx_try_link LINENO
+# -------------------------
+# Try to link conftest.$ac_ext, and return whether this succeeded.
+ac_fn_cxx_try_link ()
+{
+  as_lineno=${as_lineno-"$1"} as_lineno_stack=as_lineno_stack=$as_lineno_stack
+  rm -f conftest.$ac_objext conftest.beam conftest$ac_exeext
+  if { { ac_try="$ac_link"
+case "(($ac_try" in
+  *\"* | *\`* | *\\*) ac_try_echo=\$ac_try;;
+  *) ac_try_echo=$ac_try;;
+esac
+eval ac_try_echo="\"\$as_me:${as_lineno-$LINENO}: $ac_try_echo\""
+printf "%s\n" "$ac_try_echo"; } >&5
+  (eval "$ac_link") 2>conftest.err
+  ac_status=$?
+  if test -s conftest.err; then
+    grep -v '^ *+' conftest.err >conftest.er1
+    cat conftest.er1 >&5
+    mv -f conftest.er1 conftest.err
+  fi
+  printf "%s\n" "$as_me:${as_lineno-$LINENO}: \$? = $ac_status" >&5
+  test $ac_status = 0; } && {
+	 test -z "$ac_cxx_werror_flag" ||
+	 test ! -s conftest.err
+       } && test -s conftest$ac_exeext && {
+	 test "$cross_compiling" = yes ||
+	 test -x conftest$ac_exeext
+       }
+then :
+  ac_retval=0
+else $as_nop
+  printf "%s\n" "$as_me: failed program was:" >&5
+sed 's/^/| /' conftest.$ac_ext >&5
+
+	ac_retval=1
+fi
+  # Delete the IPA/IPO (Inter Procedural Analysis/Optimization) information
+  # created by the PGI compiler (conftest_ipa8_conftest.oo), as it would
+  # interfere with the next link command; also delete a directory that is
+  # left behind by Apple's compiler.  We do this before executing the actions.
+  rm -rf conftest.dSYM conftest_ipa8_conftest.oo
+  eval $as_lineno_stack; ${as_lineno_stack:+:} unset as_lineno
+  as_fn_set_status $ac_retval
+
+} # ac_fn_cxx_try_link
+
+# ac_fn_f77_try_compile LINENO
+# ----------------------------
+# Try to compile conftest.$ac_ext, and return whether this succeeded.
+ac_fn_f77_try_compile ()
+{
+  as_lineno=${as_lineno-"$1"} as_lineno_stack=as_lineno_stack=$as_lineno_stack
+  rm -f conftest.$ac_objext conftest.beam
+  if { { ac_try="$ac_compile"
+case "(($ac_try" in
+  *\"* | *\`* | *\\*) ac_try_echo=\$ac_try;;
+  *) ac_try_echo=$ac_try;;
+esac
+eval ac_try_echo="\"\$as_me:${as_lineno-$LINENO}: $ac_try_echo\""
+printf "%s\n" "$ac_try_echo"; } >&5
+  (eval "$ac_compile") 2>conftest.err
+  ac_status=$?
+  if test -s conftest.err; then
+    grep -v '^ *+' conftest.err >conftest.er1
+    cat conftest.er1 >&5
+    mv -f conftest.er1 conftest.err
+  fi
+  printf "%s\n" "$as_me:${as_lineno-$LINENO}: \$? = $ac_status" >&5
+  test $ac_status = 0; } && {
+	 test -z "$ac_f77_werror_flag" ||
+	 test ! -s conftest.err
+       } && test -s conftest.$ac_objext
+then :
+  ac_retval=0
+else $as_nop
+  printf "%s\n" "$as_me: failed program was:" >&5
+sed 's/^/| /' conftest.$ac_ext >&5
+
+	ac_retval=1
+fi
+  eval $as_lineno_stack; ${as_lineno_stack:+:} unset as_lineno
+  as_fn_set_status $ac_retval
+
+} # ac_fn_f77_try_compile
+
+# ac_fn_c_check_func LINENO FUNC VAR
+# ----------------------------------
+# Tests whether FUNC exists, setting the cache variable VAR accordingly
+ac_fn_c_check_func ()
+{
+  as_lineno=${as_lineno-"$1"} as_lineno_stack=as_lineno_stack=$as_lineno_stack
+  { printf "%s\n" "$as_me:${as_lineno-$LINENO}: checking for $2" >&5
+printf %s "checking for $2... " >&6; }
+if eval test \${$3+y}
+then :
+  printf %s "(cached) " >&6
+else $as_nop
+  cat confdefs.h - <<_ACEOF >conftest.$ac_ext
+/* end confdefs.h.  */
+/* Define $2 to an innocuous variant, in case <limits.h> declares $2.
+   For example, HP-UX 11i <limits.h> declares gettimeofday.  */
+#define $2 innocuous_$2
+
+/* System header to define __stub macros and hopefully few prototypes,
+   which can conflict with char $2 (); below.  */
+
+#include <limits.h>
+#undef $2
+
+/* Override any GCC internal prototype to avoid an error.
+   Use char because int might match the return type of a GCC
+   builtin and then its argument prototype would still apply.  */
+#ifdef __cplusplus
+extern "C"
+#endif
+char $2 ();
+/* The GNU C library defines this for functions which it implements
+    to always fail with ENOSYS.  Some functions are actually named
+    something starting with __ and the normal name is an alias.  */
+#if defined __stub_$2 || defined __stub___$2
+choke me
+#endif
+
+#ifdef F77_DUMMY_MAIN
+
+#  ifdef __cplusplus
+     extern "C"
+#  endif
+   int F77_DUMMY_MAIN() { return 1; }
+
+#endif
+int
+main (void)
+{
+return $2 ();
+  ;
+  return 0;
+}
+_ACEOF
+if ac_fn_c_try_link "$LINENO"
+then :
+  eval "$3=yes"
+else $as_nop
+  eval "$3=no"
+fi
+rm -f core conftest.err conftest.$ac_objext conftest.beam \
+    conftest$ac_exeext conftest.$ac_ext
+fi
+eval ac_res=\$$3
+	       { printf "%s\n" "$as_me:${as_lineno-$LINENO}: result: $ac_res" >&5
+printf "%s\n" "$ac_res" >&6; }
+  eval $as_lineno_stack; ${as_lineno_stack:+:} unset as_lineno
+
+} # ac_fn_c_check_func
+
+# ac_fn_cxx_check_header_compile LINENO HEADER VAR INCLUDES
+# ---------------------------------------------------------
+# Tests whether HEADER exists and can be compiled using the include files in
+# INCLUDES, setting the cache variable VAR accordingly.
+ac_fn_cxx_check_header_compile ()
+{
+  as_lineno=${as_lineno-"$1"} as_lineno_stack=as_lineno_stack=$as_lineno_stack
+  { printf "%s\n" "$as_me:${as_lineno-$LINENO}: checking for $2" >&5
+printf %s "checking for $2... " >&6; }
+if eval test \${$3+y}
+then :
+  printf %s "(cached) " >&6
+else $as_nop
+  cat confdefs.h - <<_ACEOF >conftest.$ac_ext
+/* end confdefs.h.  */
+$4
+#include <$2>
+_ACEOF
+if ac_fn_cxx_try_compile "$LINENO"
+then :
+  eval "$3=yes"
+else $as_nop
+  eval "$3=no"
+fi
+rm -f core conftest.err conftest.$ac_objext conftest.beam conftest.$ac_ext
+fi
+eval ac_res=\$$3
+	       { printf "%s\n" "$as_me:${as_lineno-$LINENO}: result: $ac_res" >&5
+printf "%s\n" "$ac_res" >&6; }
+  eval $as_lineno_stack; ${as_lineno_stack:+:} unset as_lineno
+
+} # ac_fn_cxx_check_header_compile
+
+# ac_fn_c_check_header_compile LINENO HEADER VAR INCLUDES
+# -------------------------------------------------------
+# Tests whether HEADER exists and can be compiled using the include files in
+# INCLUDES, setting the cache variable VAR accordingly.
+ac_fn_c_check_header_compile ()
+{
+  as_lineno=${as_lineno-"$1"} as_lineno_stack=as_lineno_stack=$as_lineno_stack
+  { printf "%s\n" "$as_me:${as_lineno-$LINENO}: checking for $2" >&5
+printf %s "checking for $2... " >&6; }
+if eval test \${$3+y}
+then :
+  printf %s "(cached) " >&6
+else $as_nop
+  cat confdefs.h - <<_ACEOF >conftest.$ac_ext
+/* end confdefs.h.  */
+$4
+#include <$2>
+_ACEOF
+if ac_fn_c_try_compile "$LINENO"
+then :
+  eval "$3=yes"
+else $as_nop
+  eval "$3=no"
+fi
+rm -f core conftest.err conftest.$ac_objext conftest.beam conftest.$ac_ext
+fi
+eval ac_res=\$$3
+	       { printf "%s\n" "$as_me:${as_lineno-$LINENO}: result: $ac_res" >&5
+printf "%s\n" "$ac_res" >&6; }
+  eval $as_lineno_stack; ${as_lineno_stack:+:} unset as_lineno
+
+} # ac_fn_c_check_header_compile
+ac_configure_args_raw=
+for ac_arg
+do
+  case $ac_arg in
+  *\'*)
+    ac_arg=`printf "%s\n" "$ac_arg" | sed "s/'/'\\\\\\\\''/g"` ;;
+  esac
+  as_fn_append ac_configure_args_raw " '$ac_arg'"
+done
+
+case $ac_configure_args_raw in
+  *$as_nl*)
+    ac_safe_unquote= ;;
+  *)
+    ac_unsafe_z='|&;<>()$`\\"*?[ ''	' # This string ends in space, tab.
+    ac_unsafe_a="$ac_unsafe_z#~"
+    ac_safe_unquote="s/ '\\([^$ac_unsafe_a][^$ac_unsafe_z]*\\)'/ \\1/g"
+    ac_configure_args_raw=`      printf "%s\n" "$ac_configure_args_raw" | sed "$ac_safe_unquote"`;;
+esac
+
 cat >config.log <<_ACEOF
 This file contains any messages produced by compilers while
 running configure, to aid debugging if configure makes a mistake.
 
 It was created by $as_me, which was
-generated by GNU Autoconf 2.61.  Invocation command line was
+generated by GNU Autoconf 2.71.  Invocation command line was
 
-  $ $0 $@
+  $ $0$ac_configure_args_raw
 
 _ACEOF
 exec 5>>config.log
@@ -1583,9 +2186,13 @@ as_save_IFS=$IFS; IFS=$PATH_SEPARATOR
 for as_dir in $PATH
 do
   IFS=$as_save_IFS
-  test -z "$as_dir" && as_dir=.
-  echo "PATH: $as_dir"
-done
+  case $as_dir in #(((
+    '') as_dir=./ ;;
+    */) ;;
+    *) as_dir=$as_dir/ ;;
+  esac
+    printf "%s\n" "PATH: $as_dir"
+  done
 IFS=$as_save_IFS
 
 } >&5
@@ -1619,12 +2226,12 @@ do
     | -silent | --silent | --silen | --sile | --sil)
       continue ;;
     *\'*)
-      ac_arg=`echo "$ac_arg" | sed "s/'/'\\\\\\\\''/g"` ;;
+      ac_arg=`printf "%s\n" "$ac_arg" | sed "s/'/'\\\\\\\\''/g"` ;;
     esac
     case $ac_pass in
-    1) ac_configure_args0="$ac_configure_args0 '$ac_arg'" ;;
+    1) as_fn_append ac_configure_args0 " '$ac_arg'" ;;
     2)
-      ac_configure_args1="$ac_configure_args1 '$ac_arg'"
+      as_fn_append ac_configure_args1 " '$ac_arg'"
       if test $ac_must_keep_next = true; then
 	ac_must_keep_next=false # Got value, back to normal.
       else
@@ -1640,13 +2247,13 @@ do
 	  -* ) ac_must_keep_next=true ;;
 	esac
       fi
-      ac_configure_args="$ac_configure_args '$ac_arg'"
+      as_fn_append ac_configure_args " '$ac_arg'"
       ;;
     esac
   done
 done
-$as_unset ac_configure_args0 || test "${ac_configure_args0+set}" != set || { ac_configure_args0=; export ac_configure_args0; }
-$as_unset ac_configure_args1 || test "${ac_configure_args1+set}" != set || { ac_configure_args1=; export ac_configure_args1; }
+{ ac_configure_args0=; unset ac_configure_args0;}
+{ ac_configure_args1=; unset ac_configure_args1;}
 
 # When interrupted or exit'd, cleanup temporary files, and complete
 # config.log.  We remove comments because anyway the quotes in there
@@ -1654,15 +2261,15 @@ $as_unset ac_configure_args1 || test "${ac_configure_args1+set}" != set || { ac_
 # WARNING: Use '\'' to represent an apostrophe within the trap.
 # WARNING: Do not start the trap code with a newline, due to a FreeBSD 4.0 bug.
 trap 'exit_status=$?
+  # Sanitize IFS.
+  IFS=" ""	$as_nl"
   # Save into config.log some information that might help in debugging.
   {
     echo
 
-    cat <<\_ASBOX
-## ---------------- ##
+    printf "%s\n" "## ---------------- ##
 ## Cache variables. ##
-## ---------------- ##
-_ASBOX
+## ---------------- ##"
     echo
     # The following way of writing the cache mishandles newlines in values,
 (
@@ -1671,12 +2278,13 @@ _ASBOX
     case $ac_val in #(
     *${as_nl}*)
       case $ac_var in #(
-      *_cv_*) { echo "$as_me:$LINENO: WARNING: Cache variable $ac_var contains a newline." >&5
-echo "$as_me: WARNING: Cache variable $ac_var contains a newline." >&2;} ;;
+      *_cv_*) { printf "%s\n" "$as_me:${as_lineno-$LINENO}: WARNING: cache variable $ac_var contains a newline" >&5
+printf "%s\n" "$as_me: WARNING: cache variable $ac_var contains a newline" >&2;} ;;
       esac
       case $ac_var in #(
       _ | IFS | as_nl) ;; #(
-      *) $as_unset $ac_var ;;
+      BASH_ARGV | BASH_SOURCE) eval $ac_var= ;; #(
+      *) { eval $ac_var=; unset $ac_var;} ;;
       esac ;;
     esac
   done
@@ -1695,131 +2303,755 @@ echo "$as_me: WARNING: Cache variable $ac_var contains a newline." >&2;} ;;
 )
     echo
 
-    cat <<\_ASBOX
-## ----------------- ##
+    printf "%s\n" "## ----------------- ##
 ## Output variables. ##
-## ----------------- ##
-_ASBOX
+## ----------------- ##"
     echo
     for ac_var in $ac_subst_vars
     do
       eval ac_val=\$$ac_var
       case $ac_val in
-      *\'\''*) ac_val=`echo "$ac_val" | sed "s/'\''/'\''\\\\\\\\'\'''\''/g"`;;
+      *\'\''*) ac_val=`printf "%s\n" "$ac_val" | sed "s/'\''/'\''\\\\\\\\'\'''\''/g"`;;
       esac
-      echo "$ac_var='\''$ac_val'\''"
+      printf "%s\n" "$ac_var='\''$ac_val'\''"
     done | sort
     echo
 
     if test -n "$ac_subst_files"; then
-      cat <<\_ASBOX
-## ------------------- ##
+      printf "%s\n" "## ------------------- ##
 ## File substitutions. ##
-## ------------------- ##
-_ASBOX
+## ------------------- ##"
       echo
       for ac_var in $ac_subst_files
       do
 	eval ac_val=\$$ac_var
 	case $ac_val in
-	*\'\''*) ac_val=`echo "$ac_val" | sed "s/'\''/'\''\\\\\\\\'\'''\''/g"`;;
+	*\'\''*) ac_val=`printf "%s\n" "$ac_val" | sed "s/'\''/'\''\\\\\\\\'\'''\''/g"`;;
 	esac
-	echo "$ac_var='\''$ac_val'\''"
+	printf "%s\n" "$ac_var='\''$ac_val'\''"
       done | sort
       echo
     fi
 
     if test -s confdefs.h; then
-      cat <<\_ASBOX
-## ----------- ##
+      printf "%s\n" "## ----------- ##
 ## confdefs.h. ##
-## ----------- ##
-_ASBOX
+## ----------- ##"
       echo
       cat confdefs.h
       echo
     fi
     test "$ac_signal" != 0 &&
-      echo "$as_me: caught signal $ac_signal"
-    echo "$as_me: exit $exit_status"
+      printf "%s\n" "$as_me: caught signal $ac_signal"
+    printf "%s\n" "$as_me: exit $exit_status"
   } >&5
   rm -f core *.core core.conftest.* &&
     rm -f -r conftest* confdefs* conf$$* $ac_clean_files &&
     exit $exit_status
 ' 0
 for ac_signal in 1 2 13 15; do
-  trap 'ac_signal='$ac_signal'; { (exit 1); exit 1; }' $ac_signal
+  trap 'ac_signal='$ac_signal'; as_fn_exit 1' $ac_signal
 done
 ac_signal=0
 
 # confdefs.h avoids OS command line length limits that DEFS can exceed.
 rm -f -r conftest* confdefs.h
 
+printf "%s\n" "/* confdefs.h */" > confdefs.h
+
 # Predefined preprocessor variables.
 
-cat >>confdefs.h <<_ACEOF
-#define PACKAGE_NAME "$PACKAGE_NAME"
-_ACEOF
+printf "%s\n" "#define PACKAGE_NAME \"$PACKAGE_NAME\"" >>confdefs.h
 
+printf "%s\n" "#define PACKAGE_TARNAME \"$PACKAGE_TARNAME\"" >>confdefs.h
 
-cat >>confdefs.h <<_ACEOF
-#define PACKAGE_TARNAME "$PACKAGE_TARNAME"
-_ACEOF
+printf "%s\n" "#define PACKAGE_VERSION \"$PACKAGE_VERSION\"" >>confdefs.h
 
+printf "%s\n" "#define PACKAGE_STRING \"$PACKAGE_STRING\"" >>confdefs.h
 
-cat >>confdefs.h <<_ACEOF
-#define PACKAGE_VERSION "$PACKAGE_VERSION"
-_ACEOF
+printf "%s\n" "#define PACKAGE_BUGREPORT \"$PACKAGE_BUGREPORT\"" >>confdefs.h
 
-
-cat >>confdefs.h <<_ACEOF
-#define PACKAGE_STRING "$PACKAGE_STRING"
-_ACEOF
-
-
-cat >>confdefs.h <<_ACEOF
-#define PACKAGE_BUGREPORT "$PACKAGE_BUGREPORT"
-_ACEOF
+printf "%s\n" "#define PACKAGE_URL \"$PACKAGE_URL\"" >>confdefs.h
 
 
 # Let the site file select an alternate cache file if it wants to.
-# Prefer explicitly selected file to automatically selected ones.
+# Prefer an explicitly selected file to automatically selected ones.
 if test -n "$CONFIG_SITE"; then
-  set x "$CONFIG_SITE"
+  ac_site_files="$CONFIG_SITE"
 elif test "x$prefix" != xNONE; then
-  set x "$prefix/share/config.site" "$prefix/etc/config.site"
+  ac_site_files="$prefix/share/config.site $prefix/etc/config.site"
 else
-  set x "$ac_default_prefix/share/config.site" \
-	"$ac_default_prefix/etc/config.site"
+  ac_site_files="$ac_default_prefix/share/config.site $ac_default_prefix/etc/config.site"
 fi
-shift
-for ac_site_file
+
+for ac_site_file in $ac_site_files
 do
-  if test -r "$ac_site_file"; then
-    { echo "$as_me:$LINENO: loading site script $ac_site_file" >&5
-echo "$as_me: loading site script $ac_site_file" >&6;}
+  case $ac_site_file in #(
+  */*) :
+     ;; #(
+  *) :
+    ac_site_file=./$ac_site_file ;;
+esac
+  if test -f "$ac_site_file" && test -r "$ac_site_file"; then
+    { printf "%s\n" "$as_me:${as_lineno-$LINENO}: loading site script $ac_site_file" >&5
+printf "%s\n" "$as_me: loading site script $ac_site_file" >&6;}
     sed 's/^/| /' "$ac_site_file" >&5
-    . "$ac_site_file"
+    . "$ac_site_file" \
+      || { { printf "%s\n" "$as_me:${as_lineno-$LINENO}: error: in \`$ac_pwd':" >&5
+printf "%s\n" "$as_me: error: in \`$ac_pwd':" >&2;}
+as_fn_error $? "failed to load site script $ac_site_file
+See \`config.log' for more details" "$LINENO" 5; }
   fi
 done
 
 if test -r "$cache_file"; then
-  # Some versions of bash will fail to source /dev/null (special
-  # files actually), so we avoid doing that.
-  if test -f "$cache_file"; then
-    { echo "$as_me:$LINENO: loading cache $cache_file" >&5
-echo "$as_me: loading cache $cache_file" >&6;}
+  # Some versions of bash will fail to source /dev/null (special files
+  # actually), so we avoid doing that.  DJGPP emulates it as a regular file.
+  if test /dev/null != "$cache_file" && test -f "$cache_file"; then
+    { printf "%s\n" "$as_me:${as_lineno-$LINENO}: loading cache $cache_file" >&5
+printf "%s\n" "$as_me: loading cache $cache_file" >&6;}
     case $cache_file in
       [\\/]* | ?:[\\/]* ) . "$cache_file";;
       *)                      . "./$cache_file";;
     esac
   fi
 else
-  { echo "$as_me:$LINENO: creating cache $cache_file" >&5
-echo "$as_me: creating cache $cache_file" >&6;}
+  { printf "%s\n" "$as_me:${as_lineno-$LINENO}: creating cache $cache_file" >&5
+printf "%s\n" "$as_me: creating cache $cache_file" >&6;}
   >$cache_file
 fi
 
+# Test code for whether the C++ compiler supports C++98 (global declarations)
+ac_cxx_conftest_cxx98_globals='
+// Does the compiler advertise C++98 conformance?
+#if !defined __cplusplus || __cplusplus < 199711L
+# error "Compiler does not advertise C++98 conformance"
+#endif
+
+// These inclusions are to reject old compilers that
+// lack the unsuffixed header files.
+#include <cstdlib>
+#include <exception>
+
+// <cassert> and <cstring> are *not* freestanding headers in C++98.
+extern void assert (int);
+namespace std {
+  extern int strcmp (const char *, const char *);
+}
+
+// Namespaces, exceptions, and templates were all added after "C++ 2.0".
+using std::exception;
+using std::strcmp;
+
+namespace {
+
+void test_exception_syntax()
+{
+  try {
+    throw "test";
+  } catch (const char *s) {
+    // Extra parentheses suppress a warning when building autoconf itself,
+    // due to lint rules shared with more typical C programs.
+    assert (!(strcmp) (s, "test"));
+  }
+}
+
+template <typename T> struct test_template
+{
+  T const val;
+  explicit test_template(T t) : val(t) {}
+  template <typename U> T add(U u) { return static_cast<T>(u) + val; }
+};
+
+} // anonymous namespace
+'
+
+# Test code for whether the C++ compiler supports C++98 (body of main)
+ac_cxx_conftest_cxx98_main='
+  assert (argc);
+  assert (! argv[0]);
+{
+  test_exception_syntax ();
+  test_template<double> tt (2.0);
+  assert (tt.add (4) == 6.0);
+  assert (true && !false);
+}
+'
+
+# Test code for whether the C++ compiler supports C++11 (global declarations)
+ac_cxx_conftest_cxx11_globals='
+// Does the compiler advertise C++ 2011 conformance?
+#if !defined __cplusplus || __cplusplus < 201103L
+# error "Compiler does not advertise C++11 conformance"
+#endif
+
+namespace cxx11test
+{
+  constexpr int get_val() { return 20; }
+
+  struct testinit
+  {
+    int i;
+    double d;
+  };
+
+  class delegate
+  {
+  public:
+    delegate(int n) : n(n) {}
+    delegate(): delegate(2354) {}
+
+    virtual int getval() { return this->n; };
+  protected:
+    int n;
+  };
+
+  class overridden : public delegate
+  {
+  public:
+    overridden(int n): delegate(n) {}
+    virtual int getval() override final { return this->n * 2; }
+  };
+
+  class nocopy
+  {
+  public:
+    nocopy(int i): i(i) {}
+    nocopy() = default;
+    nocopy(const nocopy&) = delete;
+    nocopy & operator=(const nocopy&) = delete;
+  private:
+    int i;
+  };
+
+  // for testing lambda expressions
+  template <typename Ret, typename Fn> Ret eval(Fn f, Ret v)
+  {
+    return f(v);
+  }
+
+  // for testing variadic templates and trailing return types
+  template <typename V> auto sum(V first) -> V
+  {
+    return first;
+  }
+  template <typename V, typename... Args> auto sum(V first, Args... rest) -> V
+  {
+    return first + sum(rest...);
+  }
+}
+'
+
+# Test code for whether the C++ compiler supports C++11 (body of main)
+ac_cxx_conftest_cxx11_main='
+{
+  // Test auto and decltype
+  auto a1 = 6538;
+  auto a2 = 48573953.4;
+  auto a3 = "String literal";
+
+  int total = 0;
+  for (auto i = a3; *i; ++i) { total += *i; }
+
+  decltype(a2) a4 = 34895.034;
+}
+{
+  // Test constexpr
+  short sa[cxx11test::get_val()] = { 0 };
+}
+{
+  // Test initializer lists
+  cxx11test::testinit il = { 4323, 435234.23544 };
+}
+{
+  // Test range-based for
+  int array[] = {9, 7, 13, 15, 4, 18, 12, 10, 5, 3,
+                 14, 19, 17, 8, 6, 20, 16, 2, 11, 1};
+  for (auto &x : array) { x += 23; }
+}
+{
+  // Test lambda expressions
+  using cxx11test::eval;
+  assert (eval ([](int x) { return x*2; }, 21) == 42);
+  double d = 2.0;
+  assert (eval ([&](double x) { return d += x; }, 3.0) == 5.0);
+  assert (d == 5.0);
+  assert (eval ([=](double x) mutable { return d += x; }, 4.0) == 9.0);
+  assert (d == 5.0);
+}
+{
+  // Test use of variadic templates
+  using cxx11test::sum;
+  auto a = sum(1);
+  auto b = sum(1, 2);
+  auto c = sum(1.0, 2.0, 3.0);
+}
+{
+  // Test constructor delegation
+  cxx11test::delegate d1;
+  cxx11test::delegate d2();
+  cxx11test::delegate d3(45);
+}
+{
+  // Test override and final
+  cxx11test::overridden o1(55464);
+}
+{
+  // Test nullptr
+  char *c = nullptr;
+}
+{
+  // Test template brackets
+  test_template<::test_template<int>> v(test_template<int>(12));
+}
+{
+  // Unicode literals
+  char const *utf8 = u8"UTF-8 string \u2500";
+  char16_t const *utf16 = u"UTF-8 string \u2500";
+  char32_t const *utf32 = U"UTF-32 string \u2500";
+}
+'
+
+# Test code for whether the C compiler supports C++11 (complete).
+ac_cxx_conftest_cxx11_program="${ac_cxx_conftest_cxx98_globals}
+${ac_cxx_conftest_cxx11_globals}
+
+int
+main (int argc, char **argv)
+{
+  int ok = 0;
+  ${ac_cxx_conftest_cxx98_main}
+  ${ac_cxx_conftest_cxx11_main}
+  return ok;
+}
+"
+
+# Test code for whether the C compiler supports C++98 (complete).
+ac_cxx_conftest_cxx98_program="${ac_cxx_conftest_cxx98_globals}
+int
+main (int argc, char **argv)
+{
+  int ok = 0;
+  ${ac_cxx_conftest_cxx98_main}
+  return ok;
+}
+"
+
+# Test code for whether the C compiler supports C89 (global declarations)
+ac_c_conftest_c89_globals='
+/* Does the compiler advertise C89 conformance?
+   Do not test the value of __STDC__, because some compilers set it to 0
+   while being otherwise adequately conformant. */
+#if !defined __STDC__
+# error "Compiler does not advertise C89 conformance"
+#endif
+
+#include <stddef.h>
+#include <stdarg.h>
+struct stat;
+/* Most of the following tests are stolen from RCS 5.7 src/conf.sh.  */
+struct buf { int x; };
+struct buf * (*rcsopen) (struct buf *, struct stat *, int);
+static char *e (p, i)
+     char **p;
+     int i;
+{
+  return p[i];
+}
+static char *f (char * (*g) (char **, int), char **p, ...)
+{
+  char *s;
+  va_list v;
+  va_start (v,p);
+  s = g (p, va_arg (v,int));
+  va_end (v);
+  return s;
+}
+
+/* OSF 4.0 Compaq cc is some sort of almost-ANSI by default.  It has
+   function prototypes and stuff, but not \xHH hex character constants.
+   These do not provoke an error unfortunately, instead are silently treated
+   as an "x".  The following induces an error, until -std is added to get
+   proper ANSI mode.  Curiously \x00 != x always comes out true, for an
+   array size at least.  It is necessary to write \x00 == 0 to get something
+   that is true only with -std.  */
+int osf4_cc_array ['\''\x00'\'' == 0 ? 1 : -1];
+
+/* IBM C 6 for AIX is almost-ANSI by default, but it replaces macro parameters
+   inside strings and character constants.  */
+#define FOO(x) '\''x'\''
+int xlc6_cc_array[FOO(a) == '\''x'\'' ? 1 : -1];
+
+int test (int i, double x);
+struct s1 {int (*f) (int a);};
+struct s2 {int (*f) (double a);};
+int pairnames (int, char **, int *(*)(struct buf *, struct stat *, int),
+               int, int);'
+
+# Test code for whether the C compiler supports C89 (body of main).
+ac_c_conftest_c89_main='
+ok |= (argc == 0 || f (e, argv, 0) != argv[0] || f (e, argv, 1) != argv[1]);
+'
+
+# Test code for whether the C compiler supports C99 (global declarations)
+ac_c_conftest_c99_globals='
+// Does the compiler advertise C99 conformance?
+#if !defined __STDC_VERSION__ || __STDC_VERSION__ < 199901L
+# error "Compiler does not advertise C99 conformance"
+#endif
+
+#include <stdbool.h>
+extern int puts (const char *);
+extern int printf (const char *, ...);
+extern int dprintf (int, const char *, ...);
+extern void *malloc (size_t);
+
+// Check varargs macros.  These examples are taken from C99 6.10.3.5.
+// dprintf is used instead of fprintf to avoid needing to declare
+// FILE and stderr.
+#define debug(...) dprintf (2, __VA_ARGS__)
+#define showlist(...) puts (#__VA_ARGS__)
+#define report(test,...) ((test) ? puts (#test) : printf (__VA_ARGS__))
+static void
+test_varargs_macros (void)
+{
+  int x = 1234;
+  int y = 5678;
+  debug ("Flag");
+  debug ("X = %d\n", x);
+  showlist (The first, second, and third items.);
+  report (x>y, "x is %d but y is %d", x, y);
+}
+
+// Check long long types.
+#define BIG64 18446744073709551615ull
+#define BIG32 4294967295ul
+#define BIG_OK (BIG64 / BIG32 == 4294967297ull && BIG64 % BIG32 == 0)
+#if !BIG_OK
+  #error "your preprocessor is broken"
+#endif
+#if BIG_OK
+#else
+  #error "your preprocessor is broken"
+#endif
+static long long int bignum = -9223372036854775807LL;
+static unsigned long long int ubignum = BIG64;
+
+struct incomplete_array
+{
+  int datasize;
+  double data[];
+};
+
+struct named_init {
+  int number;
+  const wchar_t *name;
+  double average;
+};
+
+typedef const char *ccp;
+
+static inline int
+test_restrict (ccp restrict text)
+{
+  // See if C++-style comments work.
+  // Iterate through items via the restricted pointer.
+  // Also check for declarations in for loops.
+  for (unsigned int i = 0; *(text+i) != '\''\0'\''; ++i)
+    continue;
+  return 0;
+}
+
+// Check varargs and va_copy.
+static bool
+test_varargs (const char *format, ...)
+{
+  va_list args;
+  va_start (args, format);
+  va_list args_copy;
+  va_copy (args_copy, args);
+
+  const char *str = "";
+  int number = 0;
+  float fnumber = 0;
+
+  while (*format)
+    {
+      switch (*format++)
+	{
+	case '\''s'\'': // string
+	  str = va_arg (args_copy, const char *);
+	  break;
+	case '\''d'\'': // int
+	  number = va_arg (args_copy, int);
+	  break;
+	case '\''f'\'': // float
+	  fnumber = va_arg (args_copy, double);
+	  break;
+	default:
+	  break;
+	}
+    }
+  va_end (args_copy);
+  va_end (args);
+
+  return *str && number && fnumber;
+}
+'
+
+# Test code for whether the C compiler supports C99 (body of main).
+ac_c_conftest_c99_main='
+  // Check bool.
+  _Bool success = false;
+  success |= (argc != 0);
+
+  // Check restrict.
+  if (test_restrict ("String literal") == 0)
+    success = true;
+  char *restrict newvar = "Another string";
+
+  // Check varargs.
+  success &= test_varargs ("s, d'\'' f .", "string", 65, 34.234);
+  test_varargs_macros ();
+
+  // Check flexible array members.
+  struct incomplete_array *ia =
+    malloc (sizeof (struct incomplete_array) + (sizeof (double) * 10));
+  ia->datasize = 10;
+  for (int i = 0; i < ia->datasize; ++i)
+    ia->data[i] = i * 1.234;
+
+  // Check named initializers.
+  struct named_init ni = {
+    .number = 34,
+    .name = L"Test wide string",
+    .average = 543.34343,
+  };
+
+  ni.number = 58;
+
+  int dynamic_array[ni.number];
+  dynamic_array[0] = argv[0][0];
+  dynamic_array[ni.number - 1] = 543;
+
+  // work around unused variable warnings
+  ok |= (!success || bignum == 0LL || ubignum == 0uLL || newvar[0] == '\''x'\''
+	 || dynamic_array[ni.number - 1] != 543);
+'
+
+# Test code for whether the C compiler supports C11 (global declarations)
+ac_c_conftest_c11_globals='
+// Does the compiler advertise C11 conformance?
+#if !defined __STDC_VERSION__ || __STDC_VERSION__ < 201112L
+# error "Compiler does not advertise C11 conformance"
+#endif
+
+// Check _Alignas.
+char _Alignas (double) aligned_as_double;
+char _Alignas (0) no_special_alignment;
+extern char aligned_as_int;
+char _Alignas (0) _Alignas (int) aligned_as_int;
+
+// Check _Alignof.
+enum
+{
+  int_alignment = _Alignof (int),
+  int_array_alignment = _Alignof (int[100]),
+  char_alignment = _Alignof (char)
+};
+_Static_assert (0 < -_Alignof (int), "_Alignof is signed");
+
+// Check _Noreturn.
+int _Noreturn does_not_return (void) { for (;;) continue; }
+
+// Check _Static_assert.
+struct test_static_assert
+{
+  int x;
+  _Static_assert (sizeof (int) <= sizeof (long int),
+                  "_Static_assert does not work in struct");
+  long int y;
+};
+
+// Check UTF-8 literals.
+#define u8 syntax error!
+char const utf8_literal[] = u8"happens to be ASCII" "another string";
+
+// Check duplicate typedefs.
+typedef long *long_ptr;
+typedef long int *long_ptr;
+typedef long_ptr long_ptr;
+
+// Anonymous structures and unions -- taken from C11 6.7.2.1 Example 1.
+struct anonymous
+{
+  union {
+    struct { int i; int j; };
+    struct { int k; long int l; } w;
+  };
+  int m;
+} v1;
+'
+
+# Test code for whether the C compiler supports C11 (body of main).
+ac_c_conftest_c11_main='
+  _Static_assert ((offsetof (struct anonymous, i)
+		   == offsetof (struct anonymous, w.k)),
+		  "Anonymous union alignment botch");
+  v1.i = 2;
+  v1.w.k = 5;
+  ok |= v1.i != 5;
+'
+
+# Test code for whether the C compiler supports C11 (complete).
+ac_c_conftest_c11_program="${ac_c_conftest_c89_globals}
+${ac_c_conftest_c99_globals}
+${ac_c_conftest_c11_globals}
+
+int
+main (int argc, char **argv)
+{
+  int ok = 0;
+  ${ac_c_conftest_c89_main}
+  ${ac_c_conftest_c99_main}
+  ${ac_c_conftest_c11_main}
+  return ok;
+}
+"
+
+# Test code for whether the C compiler supports C99 (complete).
+ac_c_conftest_c99_program="${ac_c_conftest_c89_globals}
+${ac_c_conftest_c99_globals}
+
+int
+main (int argc, char **argv)
+{
+  int ok = 0;
+  ${ac_c_conftest_c89_main}
+  ${ac_c_conftest_c99_main}
+  return ok;
+}
+"
+
+# Test code for whether the C compiler supports C89 (complete).
+ac_c_conftest_c89_program="${ac_c_conftest_c89_globals}
+
+int
+main (int argc, char **argv)
+{
+  int ok = 0;
+  ${ac_c_conftest_c89_main}
+  return ok;
+}
+"
+
+as_fn_append ac_header_cxx_list " stdio.h stdio_h HAVE_STDIO_H"
+as_fn_append ac_header_cxx_list " stdlib.h stdlib_h HAVE_STDLIB_H"
+as_fn_append ac_header_cxx_list " string.h string_h HAVE_STRING_H"
+as_fn_append ac_header_cxx_list " inttypes.h inttypes_h HAVE_INTTYPES_H"
+as_fn_append ac_header_cxx_list " stdint.h stdint_h HAVE_STDINT_H"
+as_fn_append ac_header_cxx_list " strings.h strings_h HAVE_STRINGS_H"
+as_fn_append ac_header_cxx_list " sys/stat.h sys_stat_h HAVE_SYS_STAT_H"
+as_fn_append ac_header_cxx_list " sys/types.h sys_types_h HAVE_SYS_TYPES_H"
+as_fn_append ac_header_cxx_list " unistd.h unistd_h HAVE_UNISTD_H"
+
+# Auxiliary files required by this configure script.
+ac_aux_files="install-sh config.guess config.sub"
+
+# Locations in which to look for auxiliary files.
+ac_aux_dir_candidates="${srcdir}/config"
+
+# Search for a directory containing all of the required auxiliary files,
+# $ac_aux_files, from the $PATH-style list $ac_aux_dir_candidates.
+# If we don't find one directory that contains all the files we need,
+# we report the set of missing files from the *first* directory in
+# $ac_aux_dir_candidates and give up.
+ac_missing_aux_files=""
+ac_first_candidate=:
+printf "%s\n" "$as_me:${as_lineno-$LINENO}: looking for aux files: $ac_aux_files" >&5
+as_save_IFS=$IFS; IFS=$PATH_SEPARATOR
+as_found=false
+for as_dir in $ac_aux_dir_candidates
+do
+  IFS=$as_save_IFS
+  case $as_dir in #(((
+    '') as_dir=./ ;;
+    */) ;;
+    *) as_dir=$as_dir/ ;;
+  esac
+  as_found=:
+
+  printf "%s\n" "$as_me:${as_lineno-$LINENO}:  trying $as_dir" >&5
+  ac_aux_dir_found=yes
+  ac_install_sh=
+  for ac_aux in $ac_aux_files
+  do
+    # As a special case, if "install-sh" is required, that requirement
+    # can be satisfied by any of "install-sh", "install.sh", or "shtool",
+    # and $ac_install_sh is set appropriately for whichever one is found.
+    if test x"$ac_aux" = x"install-sh"
+    then
+      if test -f "${as_dir}install-sh"; then
+        printf "%s\n" "$as_me:${as_lineno-$LINENO}:   ${as_dir}install-sh found" >&5
+        ac_install_sh="${as_dir}install-sh -c"
+      elif test -f "${as_dir}install.sh"; then
+        printf "%s\n" "$as_me:${as_lineno-$LINENO}:   ${as_dir}install.sh found" >&5
+        ac_install_sh="${as_dir}install.sh -c"
+      elif test -f "${as_dir}shtool"; then
+        printf "%s\n" "$as_me:${as_lineno-$LINENO}:   ${as_dir}shtool found" >&5
+        ac_install_sh="${as_dir}shtool install -c"
+      else
+        ac_aux_dir_found=no
+        if $ac_first_candidate; then
+          ac_missing_aux_files="${ac_missing_aux_files} install-sh"
+        else
+          break
+        fi
+      fi
+    else
+      if test -f "${as_dir}${ac_aux}"; then
+        printf "%s\n" "$as_me:${as_lineno-$LINENO}:   ${as_dir}${ac_aux} found" >&5
+      else
+        ac_aux_dir_found=no
+        if $ac_first_candidate; then
+          ac_missing_aux_files="${ac_missing_aux_files} ${ac_aux}"
+        else
+          break
+        fi
+      fi
+    fi
+  done
+  if test "$ac_aux_dir_found" = yes; then
+    ac_aux_dir="$as_dir"
+    break
+  fi
+  ac_first_candidate=false
+
+  as_found=false
+done
+IFS=$as_save_IFS
+if $as_found
+then :
+
+else $as_nop
+  as_fn_error $? "cannot find required auxiliary files:$ac_missing_aux_files" "$LINENO" 5
+fi
+
+
+# These three variables are undocumented and unsupported,
+# and are intended to be withdrawn in a future Autoconf release.
+# They can cause serious problems if a builder's source tree is in a directory
+# whose full name contains unusual characters.
+if test -f "${ac_aux_dir}config.guess"; then
+  ac_config_guess="$SHELL ${ac_aux_dir}config.guess"
+fi
+if test -f "${ac_aux_dir}config.sub"; then
+  ac_config_sub="$SHELL ${ac_aux_dir}config.sub"
+fi
+if test -f "$ac_aux_dir/configure"; then
+  ac_configure="$SHELL ${ac_aux_dir}configure"
+fi
+
 # Check that the precious variables saved in the cache have kept the same
 # value.
 ac_cache_corrupted=false
@@ -1830,60 +3062,57 @@ for ac_var in $ac_precious_vars; do
   eval ac_new_val=\$ac_env_${ac_var}_value
   case $ac_old_set,$ac_new_set in
     set,)
-      { echo "$as_me:$LINENO: error: \`$ac_var' was set to \`$ac_old_val' in the previous run" >&5
-echo "$as_me: error: \`$ac_var' was set to \`$ac_old_val' in the previous run" >&2;}
+      { printf "%s\n" "$as_me:${as_lineno-$LINENO}: error: \`$ac_var' was set to \`$ac_old_val' in the previous run" >&5
+printf "%s\n" "$as_me: error: \`$ac_var' was set to \`$ac_old_val' in the previous run" >&2;}
       ac_cache_corrupted=: ;;
     ,set)
-      { echo "$as_me:$LINENO: error: \`$ac_var' was not set in the previous run" >&5
-echo "$as_me: error: \`$ac_var' was not set in the previous run" >&2;}
+      { printf "%s\n" "$as_me:${as_lineno-$LINENO}: error: \`$ac_var' was not set in the previous run" >&5
+printf "%s\n" "$as_me: error: \`$ac_var' was not set in the previous run" >&2;}
       ac_cache_corrupted=: ;;
     ,);;
     *)
       if test "x$ac_old_val" != "x$ac_new_val"; then
-	{ echo "$as_me:$LINENO: error: \`$ac_var' has changed since the previous run:" >&5
-echo "$as_me: error: \`$ac_var' has changed since the previous run:" >&2;}
-	{ echo "$as_me:$LINENO:   former value:  $ac_old_val" >&5
-echo "$as_me:   former value:  $ac_old_val" >&2;}
-	{ echo "$as_me:$LINENO:   current value: $ac_new_val" >&5
-echo "$as_me:   current value: $ac_new_val" >&2;}
-	ac_cache_corrupted=:
+	# differences in whitespace do not lead to failure.
+	ac_old_val_w=`echo x $ac_old_val`
+	ac_new_val_w=`echo x $ac_new_val`
+	if test "$ac_old_val_w" != "$ac_new_val_w"; then
+	  { printf "%s\n" "$as_me:${as_lineno-$LINENO}: error: \`$ac_var' has changed since the previous run:" >&5
+printf "%s\n" "$as_me: error: \`$ac_var' has changed since the previous run:" >&2;}
+	  ac_cache_corrupted=:
+	else
+	  { printf "%s\n" "$as_me:${as_lineno-$LINENO}: warning: ignoring whitespace changes in \`$ac_var' since the previous run:" >&5
+printf "%s\n" "$as_me: warning: ignoring whitespace changes in \`$ac_var' since the previous run:" >&2;}
+	  eval $ac_var=\$ac_old_val
+	fi
+	{ printf "%s\n" "$as_me:${as_lineno-$LINENO}:   former value:  \`$ac_old_val'" >&5
+printf "%s\n" "$as_me:   former value:  \`$ac_old_val'" >&2;}
+	{ printf "%s\n" "$as_me:${as_lineno-$LINENO}:   current value: \`$ac_new_val'" >&5
+printf "%s\n" "$as_me:   current value: \`$ac_new_val'" >&2;}
       fi;;
   esac
   # Pass precious variables to config.status.
   if test "$ac_new_set" = set; then
     case $ac_new_val in
-    *\'*) ac_arg=$ac_var=`echo "$ac_new_val" | sed "s/'/'\\\\\\\\''/g"` ;;
+    *\'*) ac_arg=$ac_var=`printf "%s\n" "$ac_new_val" | sed "s/'/'\\\\\\\\''/g"` ;;
     *) ac_arg=$ac_var=$ac_new_val ;;
     esac
     case " $ac_configure_args " in
       *" '$ac_arg' "*) ;; # Avoid dups.  Use of quotes ensures accuracy.
-      *) ac_configure_args="$ac_configure_args '$ac_arg'" ;;
+      *) as_fn_append ac_configure_args " '$ac_arg'" ;;
     esac
   fi
 done
 if $ac_cache_corrupted; then
-  { echo "$as_me:$LINENO: error: changes in the environment can compromise the build" >&5
-echo "$as_me: error: changes in the environment can compromise the build" >&2;}
-  { { echo "$as_me:$LINENO: error: run \`make distclean' and/or \`rm $cache_file' and start over" >&5
-echo "$as_me: error: run \`make distclean' and/or \`rm $cache_file' and start over" >&2;}
-   { (exit 1); exit 1; }; }
+  { printf "%s\n" "$as_me:${as_lineno-$LINENO}: error: in \`$ac_pwd':" >&5
+printf "%s\n" "$as_me: error: in \`$ac_pwd':" >&2;}
+  { printf "%s\n" "$as_me:${as_lineno-$LINENO}: error: changes in the environment can compromise the build" >&5
+printf "%s\n" "$as_me: error: changes in the environment can compromise the build" >&2;}
+  as_fn_error $? "run \`${MAKE-make} distclean' and/or \`rm $cache_file'
+	    and start over" "$LINENO" 5
 fi
-
-
-
-
-
-
-
-
-
-
-
-
-
-
-
-
+## -------------------- ##
+## Main body of script. ##
+## -------------------- ##
 
 ac_ext=c
 ac_cpp='$CPP $CPPFLAGS'
@@ -1892,6 +3121,7 @@ ac_link='$CC -o conftest$ac_exeext $CFLAGS $CPPFLAGS $LDFLAGS conftest.$ac_ext $
 ac_compiler_gnu=$ac_cv_c_compiler_gnu
 
 
+
 ac_config_headers="$ac_config_headers include/SAMRAI_config.h:config/SAMRAI_config.h.in"
 
 
@@ -1899,8 +3129,6 @@ ac_config_headers="$ac_config_headers include/SAMRAI_config.h:config/SAMRAI_conf
 
 
 
-
-
 btng_log_vars="CONFIG_SHELL"
 for btng_log_vars_index in $btng_log_vars ; do
   eval "test \"\${${btng_log_vars_index}+set}\" = set"
@@ -1909,75 +3137,41 @@ for btng_log_vars_index in $btng_log_vars ; do
   else
     btng_log_vars_value="unset";
   fi
-  echo "configure:1912:" "$btng_log_vars_index is $btng_log_vars_value" >&5;
+  echo "configure:3140:" "$btng_log_vars_index is $btng_log_vars_value" >&5;
 done
 
 
 
-ac_aux_dir=
-for ac_dir in config "$srcdir"/config; do
-  if test -f "$ac_dir/install-sh"; then
-    ac_aux_dir=$ac_dir
-    ac_install_sh="$ac_aux_dir/install-sh -c"
-    break
-  elif test -f "$ac_dir/install.sh"; then
-    ac_aux_dir=$ac_dir
-    ac_install_sh="$ac_aux_dir/install.sh -c"
-    break
-  elif test -f "$ac_dir/shtool"; then
-    ac_aux_dir=$ac_dir
-    ac_install_sh="$ac_aux_dir/shtool install -c"
-    break
-  fi
-done
-if test -z "$ac_aux_dir"; then
-  { { echo "$as_me:$LINENO: error: cannot find install-sh or install.sh in config \"$srcdir\"/config" >&5
-echo "$as_me: error: cannot find install-sh or install.sh in config \"$srcdir\"/config" >&2;}
-   { (exit 1); exit 1; }; }
-fi
-
-# These three variables are undocumented and unsupported,
-# and are intended to be withdrawn in a future Autoconf release.
-# They can cause serious problems if a builder's source tree is in a directory
-# whose full name contains unusual characters.
-ac_config_guess="$SHELL $ac_aux_dir/config.guess"  # Please don't use this var.
-ac_config_sub="$SHELL $ac_aux_dir/config.sub"  # Please don't use this var.
-ac_configure="$SHELL $ac_aux_dir/configure"  # Please don't use this var.
-
 
 
 # Get system type.
-# Make sure we can run config.sub.
-$SHELL "$ac_aux_dir/config.sub" sun4 >/dev/null 2>&1 ||
-  { { echo "$as_me:$LINENO: error: cannot run $SHELL $ac_aux_dir/config.sub" >&5
-echo "$as_me: error: cannot run $SHELL $ac_aux_dir/config.sub" >&2;}
-   { (exit 1); exit 1; }; }
-
-{ echo "$as_me:$LINENO: checking build system type" >&5
-echo $ECHO_N "checking build system type... $ECHO_C" >&6; }
-if test "${ac_cv_build+set}" = set; then
-  echo $ECHO_N "(cached) $ECHO_C" >&6
-else
+
+
+
+  # Make sure we can run config.sub.
+$SHELL "${ac_aux_dir}config.sub" sun4 >/dev/null 2>&1 ||
+  as_fn_error $? "cannot run $SHELL ${ac_aux_dir}config.sub" "$LINENO" 5
+
+{ printf "%s\n" "$as_me:${as_lineno-$LINENO}: checking build system type" >&5
+printf %s "checking build system type... " >&6; }
+if test ${ac_cv_build+y}
+then :
+  printf %s "(cached) " >&6
+else $as_nop
   ac_build_alias=$build_alias
 test "x$ac_build_alias" = x &&
-  ac_build_alias=`$SHELL "$ac_aux_dir/config.guess"`
+  ac_build_alias=`$SHELL "${ac_aux_dir}config.guess"`
 test "x$ac_build_alias" = x &&
-  { { echo "$as_me:$LINENO: error: cannot guess build type; you must specify one" >&5
-echo "$as_me: error: cannot guess build type; you must specify one" >&2;}
-   { (exit 1); exit 1; }; }
-ac_cv_build=`$SHELL "$ac_aux_dir/config.sub" $ac_build_alias` ||
-  { { echo "$as_me:$LINENO: error: $SHELL $ac_aux_dir/config.sub $ac_build_alias failed" >&5
-echo "$as_me: error: $SHELL $ac_aux_dir/config.sub $ac_build_alias failed" >&2;}
-   { (exit 1); exit 1; }; }
+  as_fn_error $? "cannot guess build type; you must specify one" "$LINENO" 5
+ac_cv_build=`$SHELL "${ac_aux_dir}config.sub" $ac_build_alias` ||
+  as_fn_error $? "$SHELL ${ac_aux_dir}config.sub $ac_build_alias failed" "$LINENO" 5
 
 fi
-{ echo "$as_me:$LINENO: result: $ac_cv_build" >&5
-echo "${ECHO_T}$ac_cv_build" >&6; }
+{ printf "%s\n" "$as_me:${as_lineno-$LINENO}: result: $ac_cv_build" >&5
+printf "%s\n" "$ac_cv_build" >&6; }
 case $ac_cv_build in
 *-*-*) ;;
-*) { { echo "$as_me:$LINENO: error: invalid value of canonical build" >&5
-echo "$as_me: error: invalid value of canonical build" >&2;}
-   { (exit 1); exit 1; }; };;
+*) as_fn_error $? "invalid value of canonical build" "$LINENO" 5;;
 esac
 build=$ac_cv_build
 ac_save_IFS=$IFS; IFS='-'
@@ -1993,28 +3187,25 @@ IFS=$ac_save_IFS
 case $build_os in *\ *) build_os=`echo "$build_os" | sed 's/ /-/g'`;; esac
 
 
-{ echo "$as_me:$LINENO: checking host system type" >&5
-echo $ECHO_N "checking host system type... $ECHO_C" >&6; }
-if test "${ac_cv_host+set}" = set; then
-  echo $ECHO_N "(cached) $ECHO_C" >&6
-else
+{ printf "%s\n" "$as_me:${as_lineno-$LINENO}: checking host system type" >&5
+printf %s "checking host system type... " >&6; }
+if test ${ac_cv_host+y}
+then :
+  printf %s "(cached) " >&6
+else $as_nop
   if test "x$host_alias" = x; then
   ac_cv_host=$ac_cv_build
 else
-  ac_cv_host=`$SHELL "$ac_aux_dir/config.sub" $host_alias` ||
-    { { echo "$as_me:$LINENO: error: $SHELL $ac_aux_dir/config.sub $host_alias failed" >&5
-echo "$as_me: error: $SHELL $ac_aux_dir/config.sub $host_alias failed" >&2;}
-   { (exit 1); exit 1; }; }
+  ac_cv_host=`$SHELL "${ac_aux_dir}config.sub" $host_alias` ||
+    as_fn_error $? "$SHELL ${ac_aux_dir}config.sub $host_alias failed" "$LINENO" 5
 fi
 
 fi
-{ echo "$as_me:$LINENO: result: $ac_cv_host" >&5
-echo "${ECHO_T}$ac_cv_host" >&6; }
+{ printf "%s\n" "$as_me:${as_lineno-$LINENO}: result: $ac_cv_host" >&5
+printf "%s\n" "$ac_cv_host" >&6; }
 case $ac_cv_host in
 *-*-*) ;;
-*) { { echo "$as_me:$LINENO: error: invalid value of canonical host" >&5
-echo "$as_me: error: invalid value of canonical host" >&2;}
-   { (exit 1); exit 1; }; };;
+*) as_fn_error $? "invalid value of canonical host" "$LINENO" 5;;
 esac
 host=$ac_cv_host
 ac_save_IFS=$IFS; IFS='-'
@@ -2030,28 +3221,25 @@ IFS=$ac_save_IFS
 case $host_os in *\ *) host_os=`echo "$host_os" | sed 's/ /-/g'`;; esac
 
 
-{ echo "$as_me:$LINENO: checking target system type" >&5
-echo $ECHO_N "checking target system type... $ECHO_C" >&6; }
-if test "${ac_cv_target+set}" = set; then
-  echo $ECHO_N "(cached) $ECHO_C" >&6
-else
+{ printf "%s\n" "$as_me:${as_lineno-$LINENO}: checking target system type" >&5
+printf %s "checking target system type... " >&6; }
+if test ${ac_cv_target+y}
+then :
+  printf %s "(cached) " >&6
+else $as_nop
   if test "x$target_alias" = x; then
   ac_cv_target=$ac_cv_host
 else
-  ac_cv_target=`$SHELL "$ac_aux_dir/config.sub" $target_alias` ||
-    { { echo "$as_me:$LINENO: error: $SHELL $ac_aux_dir/config.sub $target_alias failed" >&5
-echo "$as_me: error: $SHELL $ac_aux_dir/config.sub $target_alias failed" >&2;}
-   { (exit 1); exit 1; }; }
+  ac_cv_target=`$SHELL "${ac_aux_dir}config.sub" $target_alias` ||
+    as_fn_error $? "$SHELL ${ac_aux_dir}config.sub $target_alias failed" "$LINENO" 5
 fi
 
 fi
-{ echo "$as_me:$LINENO: result: $ac_cv_target" >&5
-echo "${ECHO_T}$ac_cv_target" >&6; }
+{ printf "%s\n" "$as_me:${as_lineno-$LINENO}: result: $ac_cv_target" >&5
+printf "%s\n" "$ac_cv_target" >&6; }
 case $ac_cv_target in
 *-*-*) ;;
-*) { { echo "$as_me:$LINENO: error: invalid value of canonical target" >&5
-echo "$as_me: error: invalid value of canonical target" >&2;}
-   { (exit 1); exit 1; }; };;
+*) as_fn_error $? "invalid value of canonical target" "$LINENO" 5;;
 esac
 target=$ac_cv_target
 ac_save_IFS=$IFS; IFS='-'
@@ -2083,7 +3271,7 @@ for btng_log_vars_index in $btng_log_vars ; do
   else
     btng_log_vars_value="unset";
   fi
-  echo "configure:2086:" "$btng_log_vars_index is $btng_log_vars_value" >&5;
+  echo "configure:3274:" "$btng_log_vars_index is $btng_log_vars_value" >&5;
 done
 
 
@@ -2091,111 +3279,126 @@ done
 case "$host_os" in
   solaris*)
 
-cat >>confdefs.h <<\_ACEOF
-#define HOST_OS_IS_SOLARIS 1
-_ACEOF
+printf "%s\n" "#define HOST_OS_IS_SOLARIS 1" >>confdefs.h
 
 esac
 
 
 # Check whether --enable-char was given.
-if test "${enable_char+set}" = set; then
+if test ${enable_char+y}
+then :
   enableval=$enable_char;
 fi
 
 # Check whether --enable-float was given.
-if test "${enable_float+set}" = set; then
+if test ${enable_float+y}
+then :
   enableval=$enable_float;
 fi
 
 # Check whether --enable-bool was given.
-if test "${enable_bool+set}" = set; then
+if test ${enable_bool+y}
+then :
   enableval=$enable_bool;
 fi
 
 # Check whether --enable-dcomplex was given.
-if test "${enable_dcomplex+set}" = set; then
+if test ${enable_dcomplex+y}
+then :
   enableval=$enable_dcomplex;
 fi
 
 
 # Check whether --enable-vpath was given.
-if test "${enable_vpath+set}" = set; then
+if test ${enable_vpath+y}
+then :
   enableval=$enable_vpath;
 fi
 
 # Check whether --enable-noxargs was given.
-if test "${enable_noxargs+set}" = set; then
+if test ${enable_noxargs+y}
+then :
   enableval=$enable_noxargs;
 fi
 
 # Check whether --enable-shared was given.
-if test "${enable_shared+set}" = set; then
+if test ${enable_shared+y}
+then :
   enableval=$enable_shared;
 fi
 
 # Check whether --enable-xdr was given.
-if test "${enable_xdr+set}" = set; then
+if test ${enable_xdr+y}
+then :
   enableval=$enable_xdr;
-else
+else $as_nop
   enable_xdr="no"
 
 fi
 
 # Check whether --enable-developer_makefile was given.
-if test "${enable_developer_makefile+set}" = set; then
+if test ${enable_developer_makefile+y}
+then :
   enableval=$enable_developer_makefile;
-else
+else $as_nop
   enable_developer_makefile="no"
 
 fi
 
 
 # Check whether --with-CC was given.
-if test "${with_CC+set}" = set; then
+if test ${with_CC+y}
+then :
   withval=$with_CC;
 fi
 
 
 # Check whether --with-CXX was given.
-if test "${with_CXX+set}" = set; then
+if test ${with_CXX+y}
+then :
   withval=$with_CXX;
 fi
 
 
 # Check whether --with-F77 was given.
-if test "${with_F77+set}" = set; then
+if test ${with_F77+y}
+then :
   withval=$with_F77;
 fi
 
 
 # Check whether --with-M4 was given.
-if test "${with_M4+set}" = set; then
+if test ${with_M4+y}
+then :
   withval=$with_M4;
 fi
 
 
 # Check whether --with-AR was given.
-if test "${with_AR+set}" = set; then
+if test ${with_AR+y}
+then :
   withval=$with_AR;
 fi
 
 
 # Check whether --with-vampir was given.
-if test "${with_vampir+set}" = set; then
+if test ${with_vampir+y}
+then :
   withval=$with_vampir;
 fi
 
 
 # Check whether --with-tau was given.
-if test "${with_tau+set}" = set; then
+if test ${with_tau+y}
+then :
   withval=$with_tau;
 fi
 
 # Check whether --enable-deprecated was given.
-if test "${enable_deprecated+set}" = set; then
+if test ${enable_deprecated+y}
+then :
   enableval=$enable_deprecated;
-else
+else $as_nop
   enable_deprecated="yes"
 
 fi
@@ -2203,32 +3406,26 @@ fi
 
 
 # Check whether --with-MPI was given.
-if test "${with_MPI+set}" = set; then
-  withval=$with_MPI; { { echo "$as_me:$LINENO: error: Obsolete option for MPI used!!
-You should use lower-case.  Do 'configure --help' for help." >&5
-echo "$as_me: error: Obsolete option for MPI used!!
-You should use lower-case.  Do 'configure --help' for help." >&2;}
-   { (exit 1); exit 1; }; }
+if test ${with_MPI+y}
+then :
+  withval=$with_MPI; as_fn_error $? "Obsolete option for MPI used!!
+You should use lower-case.  Do 'configure --help' for help." "$LINENO" 5
 fi
 
 
 # Check whether --with-HDF5 was given.
-if test "${with_HDF5+set}" = set; then
-  withval=$with_HDF5; { { echo "$as_me:$LINENO: error: Obsolete option for HDF5 used!!
-You should use lower-case.  Do 'configure --help' for help." >&5
-echo "$as_me: error: Obsolete option for HDF5 used!!
-You should use lower-case.  Do 'configure --help' for help." >&2;}
-   { (exit 1); exit 1; }; }
+if test ${with_HDF5+y}
+then :
+  withval=$with_HDF5; as_fn_error $? "Obsolete option for HDF5 used!!
+You should use lower-case.  Do 'configure --help' for help." "$LINENO" 5
 fi
 
 
 # Check whether --with-PETSC was given.
-if test "${with_PETSC+set}" = set; then
-  withval=$with_PETSC; { { echo "$as_me:$LINENO: error: Obsolete option for PETSC used!!
-You should use lower-case.  Do 'configure --help' for help." >&5
-echo "$as_me: error: Obsolete option for PETSC used!!
-You should use lower-case.  Do 'configure --help' for help." >&2;}
-   { (exit 1); exit 1; }; }
+if test ${with_PETSC+y}
+then :
+  withval=$with_PETSC; as_fn_error $? "Obsolete option for PETSC used!!
+You should use lower-case.  Do 'configure --help' for help." "$LINENO" 5
 fi
 
 
@@ -2259,15 +3456,15 @@ for btng_log_vars_index in $btng_log_vars ; do
   else
     btng_log_vars_value="unset";
   fi
-  echo "configure:2262:" "$btng_log_vars_index is $btng_log_vars_value" >&5;
+  echo "configure:3459:" "$btng_log_vars_index is $btng_log_vars_value" >&5;
 done
 
 
 
 
 
-   { echo "$as_me:$LINENO: checking the architecture" >&5
-echo $ECHO_N "checking the architecture... $ECHO_C" >&6; }
+   { printf "%s\n" "$as_me:${as_lineno-$LINENO}: checking the architecture" >&5
+printf %s "checking the architecture... " >&6; }
 
          if test -z "$ARCH"; then
 
@@ -2281,8 +3478,8 @@ echo $ECHO_N "checking the architecture... $ECHO_C" >&6; }
       done
 
                   if test -z "$casc_tarch_dir"; then
-         { echo "$as_me:$LINENO: WARNING: cannot find tarch" >&5
-echo "$as_me: WARNING: cannot find tarch" >&2;}
+         { printf "%s\n" "$as_me:${as_lineno-$LINENO}: WARNING: cannot find tarch" >&5
+printf "%s\n" "$as_me: WARNING: cannot find tarch" >&2;}
          ARCH=$HOSTTYPE
       else
          ARCH="`$casc_tarch`"
@@ -2294,15 +3491,15 @@ echo "$as_me: WARNING: cannot find tarch" >&2;}
 
             if test -z "$ARCH"; then
          ARCH=unknown
-         { echo "$as_me:$LINENO: WARNING: architecture is unknown" >&5
-echo "$as_me: WARNING: architecture is unknown" >&2;}
+         { printf "%s\n" "$as_me:${as_lineno-$LINENO}: WARNING: architecture is unknown" >&5
+printf "%s\n" "$as_me: WARNING: architecture is unknown" >&2;}
       else
-         { echo "$as_me:$LINENO: result: $ARCH" >&5
-echo "${ECHO_T}$ARCH" >&6; }
+         { printf "%s\n" "$as_me:${as_lineno-$LINENO}: result: $ARCH" >&5
+printf "%s\n" "$ARCH" >&6; }
       fi
    else
-      { echo "$as_me:$LINENO: result: $ARCH" >&5
-echo "${ECHO_T}$ARCH" >&6; }
+      { printf "%s\n" "$as_me:${as_lineno-$LINENO}: result: $ARCH" >&5
+printf "%s\n" "$ARCH" >&6; }
    fi
 
 
@@ -2318,7 +3515,7 @@ for btng_log_vars_index in $btng_log_vars ; do
   else
     btng_log_vars_value="unset";
   fi
-  echo "configure:2321:" "$btng_log_vars_index is $btng_log_vars_value" >&5;
+  echo "configure:3518:" "$btng_log_vars_index is $btng_log_vars_value" >&5;
 done
 
 
@@ -2344,10 +3541,16 @@ for btng_log_vars_index in $btng_log_vars ; do
   else
     btng_log_vars_value="unset";
   fi
-  echo "configure:2347:" "before running compiler search: $btng_log_vars_index is $btng_log_vars_value" >&5;
+  echo "configure:3544:" "before running compiler search: $btng_log_vars_index is $btng_log_vars_value" >&5;
 done
 
 
+
+
+
+
+
+
 ac_ext=cpp
 ac_cpp='$CXXCPP $CPPFLAGS'
 ac_compile='$CXX -c $CXXFLAGS $CPPFLAGS conftest.$ac_ext >&5'
@@ -2362,11 +3565,12 @@ if test -z "$CXX"; then
   do
     # Extract the first word of "$ac_tool_prefix$ac_prog", so it can be a program name with args.
 set dummy $ac_tool_prefix$ac_prog; ac_word=$2
-{ echo "$as_me:$LINENO: checking for $ac_word" >&5
-echo $ECHO_N "checking for $ac_word... $ECHO_C" >&6; }
-if test "${ac_cv_prog_CXX+set}" = set; then
-  echo $ECHO_N "(cached) $ECHO_C" >&6
-else
+{ printf "%s\n" "$as_me:${as_lineno-$LINENO}: checking for $ac_word" >&5
+printf %s "checking for $ac_word... " >&6; }
+if test ${ac_cv_prog_CXX+y}
+then :
+  printf %s "(cached) " >&6
+else $as_nop
   if test -n "$CXX"; then
   ac_cv_prog_CXX="$CXX" # Let the user override the test.
 else
@@ -2374,26 +3578,30 @@ as_save_IFS=$IFS; IFS=$PATH_SEPARATOR
 for as_dir in $PATH
 do
   IFS=$as_save_IFS
-  test -z "$as_dir" && as_dir=.
-  for ac_exec_ext in '' $ac_executable_extensions; do
-  if { test -f "$as_dir/$ac_word$ac_exec_ext" && $as_test_x "$as_dir/$ac_word$ac_exec_ext"; }; then
+  case $as_dir in #(((
+    '') as_dir=./ ;;
+    */) ;;
+    *) as_dir=$as_dir/ ;;
+  esac
+    for ac_exec_ext in '' $ac_executable_extensions; do
+  if as_fn_executable_p "$as_dir$ac_word$ac_exec_ext"; then
     ac_cv_prog_CXX="$ac_tool_prefix$ac_prog"
-    echo "$as_me:$LINENO: found $as_dir/$ac_word$ac_exec_ext" >&5
+    printf "%s\n" "$as_me:${as_lineno-$LINENO}: found $as_dir$ac_word$ac_exec_ext" >&5
     break 2
   fi
 done
-done
+  done
 IFS=$as_save_IFS
 
 fi
 fi
 CXX=$ac_cv_prog_CXX
 if test -n "$CXX"; then
-  { echo "$as_me:$LINENO: result: $CXX" >&5
-echo "${ECHO_T}$CXX" >&6; }
+  { printf "%s\n" "$as_me:${as_lineno-$LINENO}: result: $CXX" >&5
+printf "%s\n" "$CXX" >&6; }
 else
-  { echo "$as_me:$LINENO: result: no" >&5
-echo "${ECHO_T}no" >&6; }
+  { printf "%s\n" "$as_me:${as_lineno-$LINENO}: result: no" >&5
+printf "%s\n" "no" >&6; }
 fi
 
 
@@ -2406,11 +3614,12 @@ if test -z "$CXX"; then
 do
   # Extract the first word of "$ac_prog", so it can be a program name with args.
 set dummy $ac_prog; ac_word=$2
-{ echo "$as_me:$LINENO: checking for $ac_word" >&5
-echo $ECHO_N "checking for $ac_word... $ECHO_C" >&6; }
-if test "${ac_cv_prog_ac_ct_CXX+set}" = set; then
-  echo $ECHO_N "(cached) $ECHO_C" >&6
-else
+{ printf "%s\n" "$as_me:${as_lineno-$LINENO}: checking for $ac_word" >&5
+printf %s "checking for $ac_word... " >&6; }
+if test ${ac_cv_prog_ac_ct_CXX+y}
+then :
+  printf %s "(cached) " >&6
+else $as_nop
   if test -n "$ac_ct_CXX"; then
   ac_cv_prog_ac_ct_CXX="$ac_ct_CXX" # Let the user override the test.
 else
@@ -2418,26 +3627,30 @@ as_save_IFS=$IFS; IFS=$PATH_SEPARATOR
 for as_dir in $PATH
 do
   IFS=$as_save_IFS
-  test -z "$as_dir" && as_dir=.
-  for ac_exec_ext in '' $ac_executable_extensions; do
-  if { test -f "$as_dir/$ac_word$ac_exec_ext" && $as_test_x "$as_dir/$ac_word$ac_exec_ext"; }; then
+  case $as_dir in #(((
+    '') as_dir=./ ;;
+    */) ;;
+    *) as_dir=$as_dir/ ;;
+  esac
+    for ac_exec_ext in '' $ac_executable_extensions; do
+  if as_fn_executable_p "$as_dir$ac_word$ac_exec_ext"; then
     ac_cv_prog_ac_ct_CXX="$ac_prog"
-    echo "$as_me:$LINENO: found $as_dir/$ac_word$ac_exec_ext" >&5
+    printf "%s\n" "$as_me:${as_lineno-$LINENO}: found $as_dir$ac_word$ac_exec_ext" >&5
     break 2
   fi
 done
-done
+  done
 IFS=$as_save_IFS
 
 fi
 fi
 ac_ct_CXX=$ac_cv_prog_ac_ct_CXX
 if test -n "$ac_ct_CXX"; then
-  { echo "$as_me:$LINENO: result: $ac_ct_CXX" >&5
-echo "${ECHO_T}$ac_ct_CXX" >&6; }
+  { printf "%s\n" "$as_me:${as_lineno-$LINENO}: result: $ac_ct_CXX" >&5
+printf "%s\n" "$ac_ct_CXX" >&6; }
 else
-  { echo "$as_me:$LINENO: result: no" >&5
-echo "${ECHO_T}no" >&6; }
+  { printf "%s\n" "$as_me:${as_lineno-$LINENO}: result: no" >&5
+printf "%s\n" "no" >&6; }
 fi
 
 
@@ -2449,12 +3662,8 @@ done
   else
     case $cross_compiling:$ac_tool_warned in
 yes:)
-{ echo "$as_me:$LINENO: WARNING: In the future, Autoconf will not detect cross-tools
-whose name does not start with the host triplet.  If you think this
-configuration is useful to you, please write to autoconf@gnu.org." >&5
-echo "$as_me: WARNING: In the future, Autoconf will not detect cross-tools
-whose name does not start with the host triplet.  If you think this
-configuration is useful to you, please write to autoconf@gnu.org." >&2;}
+{ printf "%s\n" "$as_me:${as_lineno-$LINENO}: WARNING: using cross tools not prefixed with host triplet" >&5
+printf "%s\n" "$as_me: WARNING: using cross tools not prefixed with host triplet" >&2;}
 ac_tool_warned=yes ;;
 esac
     CXX=$ac_ct_CXX
@@ -2464,48 +3673,35 @@ fi
   fi
 fi
 # Provide some information about the compiler.
-echo "$as_me:$LINENO: checking for C++ compiler version" >&5
-ac_compiler=`set X $ac_compile; echo $2`
-{ (ac_try="$ac_compiler --version >&5"
+printf "%s\n" "$as_me:${as_lineno-$LINENO}: checking for C++ compiler version" >&5
+set X $ac_compile
+ac_compiler=$2
+for ac_option in --version -v -V -qversion; do
+  { { ac_try="$ac_compiler $ac_option >&5"
 case "(($ac_try" in
   *\"* | *\`* | *\\*) ac_try_echo=\$ac_try;;
   *) ac_try_echo=$ac_try;;
 esac
-eval "echo \"\$as_me:$LINENO: $ac_try_echo\"") >&5
-  (eval "$ac_compiler --version >&5") 2>&5
+eval ac_try_echo="\"\$as_me:${as_lineno-$LINENO}: $ac_try_echo\""
+printf "%s\n" "$ac_try_echo"; } >&5
+  (eval "$ac_compiler $ac_option >&5") 2>conftest.err
   ac_status=$?
-  echo "$as_me:$LINENO: \$? = $ac_status" >&5
-  (exit $ac_status); }
-{ (ac_try="$ac_compiler -v >&5"
-case "(($ac_try" in
-  *\"* | *\`* | *\\*) ac_try_echo=\$ac_try;;
-  *) ac_try_echo=$ac_try;;
-esac
-eval "echo \"\$as_me:$LINENO: $ac_try_echo\"") >&5
-  (eval "$ac_compiler -v >&5") 2>&5
-  ac_status=$?
-  echo "$as_me:$LINENO: \$? = $ac_status" >&5
-  (exit $ac_status); }
-{ (ac_try="$ac_compiler -V >&5"
-case "(($ac_try" in
-  *\"* | *\`* | *\\*) ac_try_echo=\$ac_try;;
-  *) ac_try_echo=$ac_try;;
-esac
-eval "echo \"\$as_me:$LINENO: $ac_try_echo\"") >&5
-  (eval "$ac_compiler -V >&5") 2>&5
-  ac_status=$?
-  echo "$as_me:$LINENO: \$? = $ac_status" >&5
-  (exit $ac_status); }
+  if test -s conftest.err; then
+    sed '10a\
+... rest of stderr output deleted ...
+         10q' conftest.err >conftest.er1
+    cat conftest.er1 >&5
+  fi
+  rm -f conftest.er1 conftest.err
+  printf "%s\n" "$as_me:${as_lineno-$LINENO}: \$? = $ac_status" >&5
+  test $ac_status = 0; }
+done
 
-cat >conftest.$ac_ext <<_ACEOF
-/* confdefs.h.  */
-_ACEOF
-cat confdefs.h >>conftest.$ac_ext
-cat >>conftest.$ac_ext <<_ACEOF
+cat confdefs.h - <<_ACEOF >conftest.$ac_ext
 /* end confdefs.h.  */
 
 int
-main ()
+main (void)
 {
 
   ;
@@ -2513,42 +3709,39 @@ main ()
 }
 _ACEOF
 ac_clean_files_save=$ac_clean_files
-ac_clean_files="$ac_clean_files a.out a.exe b.out"
+ac_clean_files="$ac_clean_files a.out a.out.dSYM a.exe b.out"
 # Try to create an executable without -o first, disregard a.out.
 # It will help us diagnose broken compilers, and finding out an intuition
 # of exeext.
-{ echo "$as_me:$LINENO: checking for C++ compiler default output file name" >&5
-echo $ECHO_N "checking for C++ compiler default output file name... $ECHO_C" >&6; }
-ac_link_default=`echo "$ac_link" | sed 's/ -o *conftest[^ ]*//'`
-#
-# List of possible output files, starting from the most likely.
-# The algorithm is not robust to junk in `.', hence go to wildcards (a.*)
-# only as a last resort.  b.out is created by i960 compilers.
-ac_files='a_out.exe a.exe conftest.exe a.out conftest a.* conftest.* b.out'
-#
-# The IRIX 6 linker writes into existing files which may not be
-# executable, retaining their permissions.  Remove them first so a
-# subsequent execution test works.
+{ printf "%s\n" "$as_me:${as_lineno-$LINENO}: checking whether the C++ compiler works" >&5
+printf %s "checking whether the C++ compiler works... " >&6; }
+ac_link_default=`printf "%s\n" "$ac_link" | sed 's/ -o *conftest[^ ]*//'`
+
+# The possible output files:
+ac_files="a.out conftest.exe conftest a.exe a_out.exe b.out conftest.*"
+
 ac_rmfiles=
 for ac_file in $ac_files
 do
   case $ac_file in
-    *.$ac_ext | *.xcoff | *.tds | *.d | *.pdb | *.xSYM | *.bb | *.bbg | *.map | *.inf | *.o | *.obj ) ;;
+    *.$ac_ext | *.xcoff | *.tds | *.d | *.pdb | *.xSYM | *.bb | *.bbg | *.map | *.inf | *.dSYM | *.o | *.obj ) ;;
     * ) ac_rmfiles="$ac_rmfiles $ac_file";;
   esac
 done
 rm -f $ac_rmfiles
 
-if { (ac_try="$ac_link_default"
+if { { ac_try="$ac_link_default"
 case "(($ac_try" in
   *\"* | *\`* | *\\*) ac_try_echo=\$ac_try;;
   *) ac_try_echo=$ac_try;;
 esac
-eval "echo \"\$as_me:$LINENO: $ac_try_echo\"") >&5
+eval ac_try_echo="\"\$as_me:${as_lineno-$LINENO}: $ac_try_echo\""
+printf "%s\n" "$ac_try_echo"; } >&5
   (eval "$ac_link_default") 2>&5
   ac_status=$?
-  echo "$as_me:$LINENO: \$? = $ac_status" >&5
-  (exit $ac_status); }; then
+  printf "%s\n" "$as_me:${as_lineno-$LINENO}: \$? = $ac_status" >&5
+  test $ac_status = 0; }
+then :
   # Autoconf-2.13 could set the ac_cv_exeext variable to `no'.
 # So ignore a value of `no', otherwise this would lead to `EXEEXT = no'
 # in a Makefile.  We should not override ac_cv_exeext if it was cached,
@@ -2558,14 +3751,14 @@ for ac_file in $ac_files ''
 do
   test -f "$ac_file" || continue
   case $ac_file in
-    *.$ac_ext | *.xcoff | *.tds | *.d | *.pdb | *.xSYM | *.bb | *.bbg | *.map | *.inf | *.o | *.obj )
+    *.$ac_ext | *.xcoff | *.tds | *.d | *.pdb | *.xSYM | *.bb | *.bbg | *.map | *.inf | *.dSYM | *.o | *.obj )
 	;;
     [ab].out )
 	# We found the default executable, but exeext='' is most
 	# certainly right.
 	break;;
     *.* )
-        if test "${ac_cv_exeext+set}" = set && test "$ac_cv_exeext" != no;
+	if test ${ac_cv_exeext+y} && test "$ac_cv_exeext" != no;
 	then :; else
 	   ac_cv_exeext=`expr "$ac_file" : '[^.]*\(\..*\)'`
 	fi
@@ -2581,81 +3774,46 @@ do
 done
 test "$ac_cv_exeext" = no && ac_cv_exeext=
 
-else
+else $as_nop
   ac_file=''
 fi
-
-{ echo "$as_me:$LINENO: result: $ac_file" >&5
-echo "${ECHO_T}$ac_file" >&6; }
-if test -z "$ac_file"; then
-  echo "$as_me: failed program was:" >&5
+if test -z "$ac_file"
+then :
+  { printf "%s\n" "$as_me:${as_lineno-$LINENO}: result: no" >&5
+printf "%s\n" "no" >&6; }
+printf "%s\n" "$as_me: failed program was:" >&5
 sed 's/^/| /' conftest.$ac_ext >&5
 
-{ { echo "$as_me:$LINENO: error: C++ compiler cannot create executables
-See \`config.log' for more details." >&5
-echo "$as_me: error: C++ compiler cannot create executables
-See \`config.log' for more details." >&2;}
-   { (exit 77); exit 77; }; }
+{ { printf "%s\n" "$as_me:${as_lineno-$LINENO}: error: in \`$ac_pwd':" >&5
+printf "%s\n" "$as_me: error: in \`$ac_pwd':" >&2;}
+as_fn_error 77 "C++ compiler cannot create executables
+See \`config.log' for more details" "$LINENO" 5; }
+else $as_nop
+  { printf "%s\n" "$as_me:${as_lineno-$LINENO}: result: yes" >&5
+printf "%s\n" "yes" >&6; }
 fi
-
+{ printf "%s\n" "$as_me:${as_lineno-$LINENO}: checking for C++ compiler default output file name" >&5
+printf %s "checking for C++ compiler default output file name... " >&6; }
+{ printf "%s\n" "$as_me:${as_lineno-$LINENO}: result: $ac_file" >&5
+printf "%s\n" "$ac_file" >&6; }
 ac_exeext=$ac_cv_exeext
 
-# Check that the compiler produces executables we can run.  If not, either
-# the compiler is broken, or we cross compile.
-{ echo "$as_me:$LINENO: checking whether the C++ compiler works" >&5
-echo $ECHO_N "checking whether the C++ compiler works... $ECHO_C" >&6; }
-# FIXME: These cross compiler hacks should be removed for Autoconf 3.0
-# If not cross compiling, check that we can run a simple program.
-if test "$cross_compiling" != yes; then
-  if { ac_try='./$ac_file'
-  { (case "(($ac_try" in
-  *\"* | *\`* | *\\*) ac_try_echo=\$ac_try;;
-  *) ac_try_echo=$ac_try;;
-esac
-eval "echo \"\$as_me:$LINENO: $ac_try_echo\"") >&5
-  (eval "$ac_try") 2>&5
-  ac_status=$?
-  echo "$as_me:$LINENO: \$? = $ac_status" >&5
-  (exit $ac_status); }; }; then
-    cross_compiling=no
-  else
-    if test "$cross_compiling" = maybe; then
-	cross_compiling=yes
-    else
-	{ { echo "$as_me:$LINENO: error: cannot run C++ compiled programs.
-If you meant to cross compile, use \`--host'.
-See \`config.log' for more details." >&5
-echo "$as_me: error: cannot run C++ compiled programs.
-If you meant to cross compile, use \`--host'.
-See \`config.log' for more details." >&2;}
-   { (exit 1); exit 1; }; }
-    fi
-  fi
-fi
-{ echo "$as_me:$LINENO: result: yes" >&5
-echo "${ECHO_T}yes" >&6; }
-
-rm -f a.out a.exe conftest$ac_cv_exeext b.out
+rm -f -r a.out a.out.dSYM a.exe conftest$ac_cv_exeext b.out
 ac_clean_files=$ac_clean_files_save
-# Check that the compiler produces executables we can run.  If not, either
-# the compiler is broken, or we cross compile.
-{ echo "$as_me:$LINENO: checking whether we are cross compiling" >&5
-echo $ECHO_N "checking whether we are cross compiling... $ECHO_C" >&6; }
-{ echo "$as_me:$LINENO: result: $cross_compiling" >&5
-echo "${ECHO_T}$cross_compiling" >&6; }
-
-{ echo "$as_me:$LINENO: checking for suffix of executables" >&5
-echo $ECHO_N "checking for suffix of executables... $ECHO_C" >&6; }
-if { (ac_try="$ac_link"
+{ printf "%s\n" "$as_me:${as_lineno-$LINENO}: checking for suffix of executables" >&5
+printf %s "checking for suffix of executables... " >&6; }
+if { { ac_try="$ac_link"
 case "(($ac_try" in
   *\"* | *\`* | *\\*) ac_try_echo=\$ac_try;;
   *) ac_try_echo=$ac_try;;
 esac
-eval "echo \"\$as_me:$LINENO: $ac_try_echo\"") >&5
+eval ac_try_echo="\"\$as_me:${as_lineno-$LINENO}: $ac_try_echo\""
+printf "%s\n" "$ac_try_echo"; } >&5
   (eval "$ac_link") 2>&5
   ac_status=$?
-  echo "$as_me:$LINENO: \$? = $ac_status" >&5
-  (exit $ac_status); }; then
+  printf "%s\n" "$as_me:${as_lineno-$LINENO}: \$? = $ac_status" >&5
+  test $ac_status = 0; }
+then :
   # If both `conftest.exe' and `conftest' are `present' (well, observable)
 # catch `conftest.exe'.  For instance with Cygwin, `ls conftest' will
 # work properly (i.e., refer to `conftest.exe'), while it won't with
@@ -2663,41 +3821,95 @@ eval "echo \"\$as_me:$LINENO: $ac_try_echo\"") >&5
 for ac_file in conftest.exe conftest conftest.*; do
   test -f "$ac_file" || continue
   case $ac_file in
-    *.$ac_ext | *.xcoff | *.tds | *.d | *.pdb | *.xSYM | *.bb | *.bbg | *.map | *.inf | *.o | *.obj ) ;;
+    *.$ac_ext | *.xcoff | *.tds | *.d | *.pdb | *.xSYM | *.bb | *.bbg | *.map | *.inf | *.dSYM | *.o | *.obj ) ;;
     *.* ) ac_cv_exeext=`expr "$ac_file" : '[^.]*\(\..*\)'`
 	  break;;
     * ) break;;
   esac
 done
-else
-  { { echo "$as_me:$LINENO: error: cannot compute suffix of executables: cannot compile and link
-See \`config.log' for more details." >&5
-echo "$as_me: error: cannot compute suffix of executables: cannot compile and link
-See \`config.log' for more details." >&2;}
-   { (exit 1); exit 1; }; }
+else $as_nop
+  { { printf "%s\n" "$as_me:${as_lineno-$LINENO}: error: in \`$ac_pwd':" >&5
+printf "%s\n" "$as_me: error: in \`$ac_pwd':" >&2;}
+as_fn_error $? "cannot compute suffix of executables: cannot compile and link
+See \`config.log' for more details" "$LINENO" 5; }
 fi
-
-rm -f conftest$ac_cv_exeext
-{ echo "$as_me:$LINENO: result: $ac_cv_exeext" >&5
-echo "${ECHO_T}$ac_cv_exeext" >&6; }
+rm -f conftest conftest$ac_cv_exeext
+{ printf "%s\n" "$as_me:${as_lineno-$LINENO}: result: $ac_cv_exeext" >&5
+printf "%s\n" "$ac_cv_exeext" >&6; }
 
 rm -f conftest.$ac_ext
 EXEEXT=$ac_cv_exeext
 ac_exeext=$EXEEXT
-{ echo "$as_me:$LINENO: checking for suffix of object files" >&5
-echo $ECHO_N "checking for suffix of object files... $ECHO_C" >&6; }
-if test "${ac_cv_objext+set}" = set; then
-  echo $ECHO_N "(cached) $ECHO_C" >&6
-else
-  cat >conftest.$ac_ext <<_ACEOF
-/* confdefs.h.  */
+cat confdefs.h - <<_ACEOF >conftest.$ac_ext
+/* end confdefs.h.  */
+#include <stdio.h>
+int
+main (void)
+{
+FILE *f = fopen ("conftest.out", "w");
+ return ferror (f) || fclose (f) != 0;
+
+  ;
+  return 0;
+}
 _ACEOF
-cat confdefs.h >>conftest.$ac_ext
-cat >>conftest.$ac_ext <<_ACEOF
+ac_clean_files="$ac_clean_files conftest.out"
+# Check that the compiler produces executables we can run.  If not, either
+# the compiler is broken, or we cross compile.
+{ printf "%s\n" "$as_me:${as_lineno-$LINENO}: checking whether we are cross compiling" >&5
+printf %s "checking whether we are cross compiling... " >&6; }
+if test "$cross_compiling" != yes; then
+  { { ac_try="$ac_link"
+case "(($ac_try" in
+  *\"* | *\`* | *\\*) ac_try_echo=\$ac_try;;
+  *) ac_try_echo=$ac_try;;
+esac
+eval ac_try_echo="\"\$as_me:${as_lineno-$LINENO}: $ac_try_echo\""
+printf "%s\n" "$ac_try_echo"; } >&5
+  (eval "$ac_link") 2>&5
+  ac_status=$?
+  printf "%s\n" "$as_me:${as_lineno-$LINENO}: \$? = $ac_status" >&5
+  test $ac_status = 0; }
+  if { ac_try='./conftest$ac_cv_exeext'
+  { { case "(($ac_try" in
+  *\"* | *\`* | *\\*) ac_try_echo=\$ac_try;;
+  *) ac_try_echo=$ac_try;;
+esac
+eval ac_try_echo="\"\$as_me:${as_lineno-$LINENO}: $ac_try_echo\""
+printf "%s\n" "$ac_try_echo"; } >&5
+  (eval "$ac_try") 2>&5
+  ac_status=$?
+  printf "%s\n" "$as_me:${as_lineno-$LINENO}: \$? = $ac_status" >&5
+  test $ac_status = 0; }; }; then
+    cross_compiling=no
+  else
+    if test "$cross_compiling" = maybe; then
+	cross_compiling=yes
+    else
+	{ { printf "%s\n" "$as_me:${as_lineno-$LINENO}: error: in \`$ac_pwd':" >&5
+printf "%s\n" "$as_me: error: in \`$ac_pwd':" >&2;}
+as_fn_error 77 "cannot run C++ compiled programs.
+If you meant to cross compile, use \`--host'.
+See \`config.log' for more details" "$LINENO" 5; }
+    fi
+  fi
+fi
+{ printf "%s\n" "$as_me:${as_lineno-$LINENO}: result: $cross_compiling" >&5
+printf "%s\n" "$cross_compiling" >&6; }
+
+rm -f conftest.$ac_ext conftest$ac_cv_exeext conftest.out
+ac_clean_files=$ac_clean_files_save
+{ printf "%s\n" "$as_me:${as_lineno-$LINENO}: checking for suffix of object files" >&5
+printf %s "checking for suffix of object files... " >&6; }
+if test ${ac_cv_objext+y}
+then :
+  printf %s "(cached) " >&6
+else $as_nop
+  cat confdefs.h - <<_ACEOF >conftest.$ac_ext
 /* end confdefs.h.  */
 
 int
-main ()
+main (void)
 {
 
   ;
@@ -2705,55 +3917,52 @@ main ()
 }
 _ACEOF
 rm -f conftest.o conftest.obj
-if { (ac_try="$ac_compile"
+if { { ac_try="$ac_compile"
 case "(($ac_try" in
   *\"* | *\`* | *\\*) ac_try_echo=\$ac_try;;
   *) ac_try_echo=$ac_try;;
 esac
-eval "echo \"\$as_me:$LINENO: $ac_try_echo\"") >&5
+eval ac_try_echo="\"\$as_me:${as_lineno-$LINENO}: $ac_try_echo\""
+printf "%s\n" "$ac_try_echo"; } >&5
   (eval "$ac_compile") 2>&5
   ac_status=$?
-  echo "$as_me:$LINENO: \$? = $ac_status" >&5
-  (exit $ac_status); }; then
+  printf "%s\n" "$as_me:${as_lineno-$LINENO}: \$? = $ac_status" >&5
+  test $ac_status = 0; }
+then :
   for ac_file in conftest.o conftest.obj conftest.*; do
   test -f "$ac_file" || continue;
   case $ac_file in
-    *.$ac_ext | *.xcoff | *.tds | *.d | *.pdb | *.xSYM | *.bb | *.bbg | *.map | *.inf ) ;;
+    *.$ac_ext | *.xcoff | *.tds | *.d | *.pdb | *.xSYM | *.bb | *.bbg | *.map | *.inf | *.dSYM ) ;;
     *) ac_cv_objext=`expr "$ac_file" : '.*\.\(.*\)'`
        break;;
   esac
 done
-else
-  echo "$as_me: failed program was:" >&5
+else $as_nop
+  printf "%s\n" "$as_me: failed program was:" >&5
 sed 's/^/| /' conftest.$ac_ext >&5
 
-{ { echo "$as_me:$LINENO: error: cannot compute suffix of object files: cannot compile
-See \`config.log' for more details." >&5
-echo "$as_me: error: cannot compute suffix of object files: cannot compile
-See \`config.log' for more details." >&2;}
-   { (exit 1); exit 1; }; }
+{ { printf "%s\n" "$as_me:${as_lineno-$LINENO}: error: in \`$ac_pwd':" >&5
+printf "%s\n" "$as_me: error: in \`$ac_pwd':" >&2;}
+as_fn_error $? "cannot compute suffix of object files: cannot compile
+See \`config.log' for more details" "$LINENO" 5; }
 fi
-
 rm -f conftest.$ac_cv_objext conftest.$ac_ext
 fi
-{ echo "$as_me:$LINENO: result: $ac_cv_objext" >&5
-echo "${ECHO_T}$ac_cv_objext" >&6; }
+{ printf "%s\n" "$as_me:${as_lineno-$LINENO}: result: $ac_cv_objext" >&5
+printf "%s\n" "$ac_cv_objext" >&6; }
 OBJEXT=$ac_cv_objext
 ac_objext=$OBJEXT
-{ echo "$as_me:$LINENO: checking whether we are using the GNU C++ compiler" >&5
-echo $ECHO_N "checking whether we are using the GNU C++ compiler... $ECHO_C" >&6; }
-if test "${ac_cv_cxx_compiler_gnu+set}" = set; then
-  echo $ECHO_N "(cached) $ECHO_C" >&6
-else
-  cat >conftest.$ac_ext <<_ACEOF
-/* confdefs.h.  */
-_ACEOF
-cat confdefs.h >>conftest.$ac_ext
-cat >>conftest.$ac_ext <<_ACEOF
+{ printf "%s\n" "$as_me:${as_lineno-$LINENO}: checking whether the compiler supports GNU C++" >&5
+printf %s "checking whether the compiler supports GNU C++... " >&6; }
+if test ${ac_cv_cxx_compiler_gnu+y}
+then :
+  printf %s "(cached) " >&6
+else $as_nop
+  cat confdefs.h - <<_ACEOF >conftest.$ac_ext
 /* end confdefs.h.  */
 
 int
-main ()
+main (void)
 {
 #ifndef __GNUC__
        choke me
@@ -2763,178 +3972,95 @@ main ()
   return 0;
 }
 _ACEOF
-rm -f conftest.$ac_objext
-if { (ac_try="$ac_compile"
-case "(($ac_try" in
-  *\"* | *\`* | *\\*) ac_try_echo=\$ac_try;;
-  *) ac_try_echo=$ac_try;;
-esac
-eval "echo \"\$as_me:$LINENO: $ac_try_echo\"") >&5
-  (eval "$ac_compile") 2>conftest.er1
-  ac_status=$?
-  grep -v '^ *+' conftest.er1 >conftest.err
-  rm -f conftest.er1
-  cat conftest.err >&5
-  echo "$as_me:$LINENO: \$? = $ac_status" >&5
-  (exit $ac_status); } && {
-	 test -z "$ac_cxx_werror_flag" ||
-	 test ! -s conftest.err
-       } && test -s conftest.$ac_objext; then
+if ac_fn_cxx_try_compile "$LINENO"
+then :
   ac_compiler_gnu=yes
-else
-  echo "$as_me: failed program was:" >&5
-sed 's/^/| /' conftest.$ac_ext >&5
-
-	ac_compiler_gnu=no
+else $as_nop
+  ac_compiler_gnu=no
 fi
-
-rm -f core conftest.err conftest.$ac_objext conftest.$ac_ext
+rm -f core conftest.err conftest.$ac_objext conftest.beam conftest.$ac_ext
 ac_cv_cxx_compiler_gnu=$ac_compiler_gnu
 
 fi
-{ echo "$as_me:$LINENO: result: $ac_cv_cxx_compiler_gnu" >&5
-echo "${ECHO_T}$ac_cv_cxx_compiler_gnu" >&6; }
-GXX=`test $ac_compiler_gnu = yes && echo yes`
-ac_test_CXXFLAGS=${CXXFLAGS+set}
+{ printf "%s\n" "$as_me:${as_lineno-$LINENO}: result: $ac_cv_cxx_compiler_gnu" >&5
+printf "%s\n" "$ac_cv_cxx_compiler_gnu" >&6; }
+ac_compiler_gnu=$ac_cv_cxx_compiler_gnu
+
+if test $ac_compiler_gnu = yes; then
+  GXX=yes
+else
+  GXX=
+fi
+ac_test_CXXFLAGS=${CXXFLAGS+y}
 ac_save_CXXFLAGS=$CXXFLAGS
-{ echo "$as_me:$LINENO: checking whether $CXX accepts -g" >&5
-echo $ECHO_N "checking whether $CXX accepts -g... $ECHO_C" >&6; }
-if test "${ac_cv_prog_cxx_g+set}" = set; then
-  echo $ECHO_N "(cached) $ECHO_C" >&6
-else
+{ printf "%s\n" "$as_me:${as_lineno-$LINENO}: checking whether $CXX accepts -g" >&5
+printf %s "checking whether $CXX accepts -g... " >&6; }
+if test ${ac_cv_prog_cxx_g+y}
+then :
+  printf %s "(cached) " >&6
+else $as_nop
   ac_save_cxx_werror_flag=$ac_cxx_werror_flag
    ac_cxx_werror_flag=yes
    ac_cv_prog_cxx_g=no
    CXXFLAGS="-g"
-   cat >conftest.$ac_ext <<_ACEOF
-/* confdefs.h.  */
-_ACEOF
-cat confdefs.h >>conftest.$ac_ext
-cat >>conftest.$ac_ext <<_ACEOF
+   cat confdefs.h - <<_ACEOF >conftest.$ac_ext
 /* end confdefs.h.  */
 
 int
-main ()
+main (void)
 {
 
   ;
   return 0;
 }
 _ACEOF
-rm -f conftest.$ac_objext
-if { (ac_try="$ac_compile"
-case "(($ac_try" in
-  *\"* | *\`* | *\\*) ac_try_echo=\$ac_try;;
-  *) ac_try_echo=$ac_try;;
-esac
-eval "echo \"\$as_me:$LINENO: $ac_try_echo\"") >&5
-  (eval "$ac_compile") 2>conftest.er1
-  ac_status=$?
-  grep -v '^ *+' conftest.er1 >conftest.err
-  rm -f conftest.er1
-  cat conftest.err >&5
-  echo "$as_me:$LINENO: \$? = $ac_status" >&5
-  (exit $ac_status); } && {
-	 test -z "$ac_cxx_werror_flag" ||
-	 test ! -s conftest.err
-       } && test -s conftest.$ac_objext; then
+if ac_fn_cxx_try_compile "$LINENO"
+then :
   ac_cv_prog_cxx_g=yes
-else
-  echo "$as_me: failed program was:" >&5
-sed 's/^/| /' conftest.$ac_ext >&5
-
-	CXXFLAGS=""
-      cat >conftest.$ac_ext <<_ACEOF
-/* confdefs.h.  */
-_ACEOF
-cat confdefs.h >>conftest.$ac_ext
-cat >>conftest.$ac_ext <<_ACEOF
+else $as_nop
+  CXXFLAGS=""
+      cat confdefs.h - <<_ACEOF >conftest.$ac_ext
 /* end confdefs.h.  */
 
 int
-main ()
+main (void)
 {
 
   ;
   return 0;
 }
 _ACEOF
-rm -f conftest.$ac_objext
-if { (ac_try="$ac_compile"
-case "(($ac_try" in
-  *\"* | *\`* | *\\*) ac_try_echo=\$ac_try;;
-  *) ac_try_echo=$ac_try;;
-esac
-eval "echo \"\$as_me:$LINENO: $ac_try_echo\"") >&5
-  (eval "$ac_compile") 2>conftest.er1
-  ac_status=$?
-  grep -v '^ *+' conftest.er1 >conftest.err
-  rm -f conftest.er1
-  cat conftest.err >&5
-  echo "$as_me:$LINENO: \$? = $ac_status" >&5
-  (exit $ac_status); } && {
-	 test -z "$ac_cxx_werror_flag" ||
-	 test ! -s conftest.err
-       } && test -s conftest.$ac_objext; then
-  :
-else
-  echo "$as_me: failed program was:" >&5
-sed 's/^/| /' conftest.$ac_ext >&5
+if ac_fn_cxx_try_compile "$LINENO"
+then :
 
-	ac_cxx_werror_flag=$ac_save_cxx_werror_flag
+else $as_nop
+  ac_cxx_werror_flag=$ac_save_cxx_werror_flag
 	 CXXFLAGS="-g"
-	 cat >conftest.$ac_ext <<_ACEOF
-/* confdefs.h.  */
-_ACEOF
-cat confdefs.h >>conftest.$ac_ext
-cat >>conftest.$ac_ext <<_ACEOF
+	 cat confdefs.h - <<_ACEOF >conftest.$ac_ext
 /* end confdefs.h.  */
 
 int
-main ()
+main (void)
 {
 
   ;
   return 0;
 }
 _ACEOF
-rm -f conftest.$ac_objext
-if { (ac_try="$ac_compile"
-case "(($ac_try" in
-  *\"* | *\`* | *\\*) ac_try_echo=\$ac_try;;
-  *) ac_try_echo=$ac_try;;
-esac
-eval "echo \"\$as_me:$LINENO: $ac_try_echo\"") >&5
-  (eval "$ac_compile") 2>conftest.er1
-  ac_status=$?
-  grep -v '^ *+' conftest.er1 >conftest.err
-  rm -f conftest.er1
-  cat conftest.err >&5
-  echo "$as_me:$LINENO: \$? = $ac_status" >&5
-  (exit $ac_status); } && {
-	 test -z "$ac_cxx_werror_flag" ||
-	 test ! -s conftest.err
-       } && test -s conftest.$ac_objext; then
+if ac_fn_cxx_try_compile "$LINENO"
+then :
   ac_cv_prog_cxx_g=yes
-else
-  echo "$as_me: failed program was:" >&5
-sed 's/^/| /' conftest.$ac_ext >&5
-
-
 fi
-
-rm -f core conftest.err conftest.$ac_objext conftest.$ac_ext
+rm -f core conftest.err conftest.$ac_objext conftest.beam conftest.$ac_ext
 fi
-
-rm -f core conftest.err conftest.$ac_objext conftest.$ac_ext
+rm -f core conftest.err conftest.$ac_objext conftest.beam conftest.$ac_ext
 fi
-
-rm -f core conftest.err conftest.$ac_objext conftest.$ac_ext
+rm -f core conftest.err conftest.$ac_objext conftest.beam conftest.$ac_ext
    ac_cxx_werror_flag=$ac_save_cxx_werror_flag
 fi
-{ echo "$as_me:$LINENO: result: $ac_cv_prog_cxx_g" >&5
-echo "${ECHO_T}$ac_cv_prog_cxx_g" >&6; }
-if test "$ac_test_CXXFLAGS" = set; then
+{ printf "%s\n" "$as_me:${as_lineno-$LINENO}: result: $ac_cv_prog_cxx_g" >&5
+printf "%s\n" "$ac_cv_prog_cxx_g" >&6; }
+if test $ac_test_CXXFLAGS; then
   CXXFLAGS=$ac_save_CXXFLAGS
 elif test $ac_cv_prog_cxx_g = yes; then
   if test "$GXX" = yes; then
@@ -2949,6 +4075,100 @@ else
     CXXFLAGS=
   fi
 fi
+ac_prog_cxx_stdcxx=no
+if test x$ac_prog_cxx_stdcxx = xno
+then :
+  { printf "%s\n" "$as_me:${as_lineno-$LINENO}: checking for $CXX option to enable C++11 features" >&5
+printf %s "checking for $CXX option to enable C++11 features... " >&6; }
+if test ${ac_cv_prog_cxx_11+y}
+then :
+  printf %s "(cached) " >&6
+else $as_nop
+  ac_cv_prog_cxx_11=no
+ac_save_CXX=$CXX
+cat confdefs.h - <<_ACEOF >conftest.$ac_ext
+/* end confdefs.h.  */
+$ac_cxx_conftest_cxx11_program
+_ACEOF
+for ac_arg in '' -std=gnu++11 -std=gnu++0x -std=c++11 -std=c++0x -qlanglvl=extended0x -AA
+do
+  CXX="$ac_save_CXX $ac_arg"
+  if ac_fn_cxx_try_compile "$LINENO"
+then :
+  ac_cv_prog_cxx_cxx11=$ac_arg
+fi
+rm -f core conftest.err conftest.$ac_objext conftest.beam
+  test "x$ac_cv_prog_cxx_cxx11" != "xno" && break
+done
+rm -f conftest.$ac_ext
+CXX=$ac_save_CXX
+fi
+
+if test "x$ac_cv_prog_cxx_cxx11" = xno
+then :
+  { printf "%s\n" "$as_me:${as_lineno-$LINENO}: result: unsupported" >&5
+printf "%s\n" "unsupported" >&6; }
+else $as_nop
+  if test "x$ac_cv_prog_cxx_cxx11" = x
+then :
+  { printf "%s\n" "$as_me:${as_lineno-$LINENO}: result: none needed" >&5
+printf "%s\n" "none needed" >&6; }
+else $as_nop
+  { printf "%s\n" "$as_me:${as_lineno-$LINENO}: result: $ac_cv_prog_cxx_cxx11" >&5
+printf "%s\n" "$ac_cv_prog_cxx_cxx11" >&6; }
+     CXX="$CXX $ac_cv_prog_cxx_cxx11"
+fi
+  ac_cv_prog_cxx_stdcxx=$ac_cv_prog_cxx_cxx11
+  ac_prog_cxx_stdcxx=cxx11
+fi
+fi
+if test x$ac_prog_cxx_stdcxx = xno
+then :
+  { printf "%s\n" "$as_me:${as_lineno-$LINENO}: checking for $CXX option to enable C++98 features" >&5
+printf %s "checking for $CXX option to enable C++98 features... " >&6; }
+if test ${ac_cv_prog_cxx_98+y}
+then :
+  printf %s "(cached) " >&6
+else $as_nop
+  ac_cv_prog_cxx_98=no
+ac_save_CXX=$CXX
+cat confdefs.h - <<_ACEOF >conftest.$ac_ext
+/* end confdefs.h.  */
+$ac_cxx_conftest_cxx98_program
+_ACEOF
+for ac_arg in '' -std=gnu++98 -std=c++98 -qlanglvl=extended -AA
+do
+  CXX="$ac_save_CXX $ac_arg"
+  if ac_fn_cxx_try_compile "$LINENO"
+then :
+  ac_cv_prog_cxx_cxx98=$ac_arg
+fi
+rm -f core conftest.err conftest.$ac_objext conftest.beam
+  test "x$ac_cv_prog_cxx_cxx98" != "xno" && break
+done
+rm -f conftest.$ac_ext
+CXX=$ac_save_CXX
+fi
+
+if test "x$ac_cv_prog_cxx_cxx98" = xno
+then :
+  { printf "%s\n" "$as_me:${as_lineno-$LINENO}: result: unsupported" >&5
+printf "%s\n" "unsupported" >&6; }
+else $as_nop
+  if test "x$ac_cv_prog_cxx_cxx98" = x
+then :
+  { printf "%s\n" "$as_me:${as_lineno-$LINENO}: result: none needed" >&5
+printf "%s\n" "none needed" >&6; }
+else $as_nop
+  { printf "%s\n" "$as_me:${as_lineno-$LINENO}: result: $ac_cv_prog_cxx_cxx98" >&5
+printf "%s\n" "$ac_cv_prog_cxx_cxx98" >&6; }
+     CXX="$CXX $ac_cv_prog_cxx_cxx98"
+fi
+  ac_cv_prog_cxx_stdcxx=$ac_cv_prog_cxx_cxx98
+  ac_prog_cxx_stdcxx=cxx98
+fi
+fi
+
 ac_ext=c
 ac_cpp='$CPP $CPPFLAGS'
 ac_compile='$CC -c $CFLAGS $CPPFLAGS conftest.$ac_ext >&5'
@@ -2965,7 +4185,7 @@ for btng_log_vars_index in $btng_log_vars ; do
   else
     btng_log_vars_value="unset";
   fi
-  echo "configure:2968:" "after running compiler search: $btng_log_vars_index is $btng_log_vars_value" >&5;
+  echo "configure:4188:" "after running compiler search: $btng_log_vars_index is $btng_log_vars_value" >&5;
 done
 
 
@@ -2974,7 +4194,16 @@ done
 if test -n "$with_CC"; then
    CC=$with_CC
 else
-   ac_ext=c
+
+
+
+
+
+
+
+
+
+ac_ext=c
 ac_cpp='$CPP $CPPFLAGS'
 ac_compile='$CC -c $CFLAGS $CPPFLAGS conftest.$ac_ext >&5'
 ac_link='$CC -o conftest$ac_exeext $CFLAGS $CPPFLAGS $LDFLAGS conftest.$ac_ext $LIBS >&5'
@@ -2982,11 +4211,12 @@ ac_compiler_gnu=$ac_cv_c_compiler_gnu
 if test -n "$ac_tool_prefix"; then
   # Extract the first word of "${ac_tool_prefix}gcc", so it can be a program name with args.
 set dummy ${ac_tool_prefix}gcc; ac_word=$2
-{ echo "$as_me:$LINENO: checking for $ac_word" >&5
-echo $ECHO_N "checking for $ac_word... $ECHO_C" >&6; }
-if test "${ac_cv_prog_CC+set}" = set; then
-  echo $ECHO_N "(cached) $ECHO_C" >&6
-else
+{ printf "%s\n" "$as_me:${as_lineno-$LINENO}: checking for $ac_word" >&5
+printf %s "checking for $ac_word... " >&6; }
+if test ${ac_cv_prog_CC+y}
+then :
+  printf %s "(cached) " >&6
+else $as_nop
   if test -n "$CC"; then
   ac_cv_prog_CC="$CC" # Let the user override the test.
 else
@@ -2994,26 +4224,30 @@ as_save_IFS=$IFS; IFS=$PATH_SEPARATOR
 for as_dir in $PATH
 do
   IFS=$as_save_IFS
-  test -z "$as_dir" && as_dir=.
-  for ac_exec_ext in '' $ac_executable_extensions; do
-  if { test -f "$as_dir/$ac_word$ac_exec_ext" && $as_test_x "$as_dir/$ac_word$ac_exec_ext"; }; then
+  case $as_dir in #(((
+    '') as_dir=./ ;;
+    */) ;;
+    *) as_dir=$as_dir/ ;;
+  esac
+    for ac_exec_ext in '' $ac_executable_extensions; do
+  if as_fn_executable_p "$as_dir$ac_word$ac_exec_ext"; then
     ac_cv_prog_CC="${ac_tool_prefix}gcc"
-    echo "$as_me:$LINENO: found $as_dir/$ac_word$ac_exec_ext" >&5
+    printf "%s\n" "$as_me:${as_lineno-$LINENO}: found $as_dir$ac_word$ac_exec_ext" >&5
     break 2
   fi
 done
-done
+  done
 IFS=$as_save_IFS
 
 fi
 fi
 CC=$ac_cv_prog_CC
 if test -n "$CC"; then
-  { echo "$as_me:$LINENO: result: $CC" >&5
-echo "${ECHO_T}$CC" >&6; }
+  { printf "%s\n" "$as_me:${as_lineno-$LINENO}: result: $CC" >&5
+printf "%s\n" "$CC" >&6; }
 else
-  { echo "$as_me:$LINENO: result: no" >&5
-echo "${ECHO_T}no" >&6; }
+  { printf "%s\n" "$as_me:${as_lineno-$LINENO}: result: no" >&5
+printf "%s\n" "no" >&6; }
 fi
 
 
@@ -3022,11 +4256,12 @@ if test -z "$ac_cv_prog_CC"; then
   ac_ct_CC=$CC
   # Extract the first word of "gcc", so it can be a program name with args.
 set dummy gcc; ac_word=$2
-{ echo "$as_me:$LINENO: checking for $ac_word" >&5
-echo $ECHO_N "checking for $ac_word... $ECHO_C" >&6; }
-if test "${ac_cv_prog_ac_ct_CC+set}" = set; then
-  echo $ECHO_N "(cached) $ECHO_C" >&6
-else
+{ printf "%s\n" "$as_me:${as_lineno-$LINENO}: checking for $ac_word" >&5
+printf %s "checking for $ac_word... " >&6; }
+if test ${ac_cv_prog_ac_ct_CC+y}
+then :
+  printf %s "(cached) " >&6
+else $as_nop
   if test -n "$ac_ct_CC"; then
   ac_cv_prog_ac_ct_CC="$ac_ct_CC" # Let the user override the test.
 else
@@ -3034,26 +4269,30 @@ as_save_IFS=$IFS; IFS=$PATH_SEPARATOR
 for as_dir in $PATH
 do
   IFS=$as_save_IFS
-  test -z "$as_dir" && as_dir=.
-  for ac_exec_ext in '' $ac_executable_extensions; do
-  if { test -f "$as_dir/$ac_word$ac_exec_ext" && $as_test_x "$as_dir/$ac_word$ac_exec_ext"; }; then
+  case $as_dir in #(((
+    '') as_dir=./ ;;
+    */) ;;
+    *) as_dir=$as_dir/ ;;
+  esac
+    for ac_exec_ext in '' $ac_executable_extensions; do
+  if as_fn_executable_p "$as_dir$ac_word$ac_exec_ext"; then
     ac_cv_prog_ac_ct_CC="gcc"
-    echo "$as_me:$LINENO: found $as_dir/$ac_word$ac_exec_ext" >&5
+    printf "%s\n" "$as_me:${as_lineno-$LINENO}: found $as_dir$ac_word$ac_exec_ext" >&5
     break 2
   fi
 done
-done
+  done
 IFS=$as_save_IFS
 
 fi
 fi
 ac_ct_CC=$ac_cv_prog_ac_ct_CC
 if test -n "$ac_ct_CC"; then
-  { echo "$as_me:$LINENO: result: $ac_ct_CC" >&5
-echo "${ECHO_T}$ac_ct_CC" >&6; }
+  { printf "%s\n" "$as_me:${as_lineno-$LINENO}: result: $ac_ct_CC" >&5
+printf "%s\n" "$ac_ct_CC" >&6; }
 else
-  { echo "$as_me:$LINENO: result: no" >&5
-echo "${ECHO_T}no" >&6; }
+  { printf "%s\n" "$as_me:${as_lineno-$LINENO}: result: no" >&5
+printf "%s\n" "no" >&6; }
 fi
 
   if test "x$ac_ct_CC" = x; then
@@ -3061,12 +4300,8 @@ fi
   else
     case $cross_compiling:$ac_tool_warned in
 yes:)
-{ echo "$as_me:$LINENO: WARNING: In the future, Autoconf will not detect cross-tools
-whose name does not start with the host triplet.  If you think this
-configuration is useful to you, please write to autoconf@gnu.org." >&5
-echo "$as_me: WARNING: In the future, Autoconf will not detect cross-tools
-whose name does not start with the host triplet.  If you think this
-configuration is useful to you, please write to autoconf@gnu.org." >&2;}
+{ printf "%s\n" "$as_me:${as_lineno-$LINENO}: WARNING: using cross tools not prefixed with host triplet" >&5
+printf "%s\n" "$as_me: WARNING: using cross tools not prefixed with host triplet" >&2;}
 ac_tool_warned=yes ;;
 esac
     CC=$ac_ct_CC
@@ -3079,11 +4314,12 @@ if test -z "$CC"; then
           if test -n "$ac_tool_prefix"; then
     # Extract the first word of "${ac_tool_prefix}cc", so it can be a program name with args.
 set dummy ${ac_tool_prefix}cc; ac_word=$2
-{ echo "$as_me:$LINENO: checking for $ac_word" >&5
-echo $ECHO_N "checking for $ac_word... $ECHO_C" >&6; }
-if test "${ac_cv_prog_CC+set}" = set; then
-  echo $ECHO_N "(cached) $ECHO_C" >&6
-else
+{ printf "%s\n" "$as_me:${as_lineno-$LINENO}: checking for $ac_word" >&5
+printf %s "checking for $ac_word... " >&6; }
+if test ${ac_cv_prog_CC+y}
+then :
+  printf %s "(cached) " >&6
+else $as_nop
   if test -n "$CC"; then
   ac_cv_prog_CC="$CC" # Let the user override the test.
 else
@@ -3091,26 +4327,30 @@ as_save_IFS=$IFS; IFS=$PATH_SEPARATOR
 for as_dir in $PATH
 do
   IFS=$as_save_IFS
-  test -z "$as_dir" && as_dir=.
-  for ac_exec_ext in '' $ac_executable_extensions; do
-  if { test -f "$as_dir/$ac_word$ac_exec_ext" && $as_test_x "$as_dir/$ac_word$ac_exec_ext"; }; then
+  case $as_dir in #(((
+    '') as_dir=./ ;;
+    */) ;;
+    *) as_dir=$as_dir/ ;;
+  esac
+    for ac_exec_ext in '' $ac_executable_extensions; do
+  if as_fn_executable_p "$as_dir$ac_word$ac_exec_ext"; then
     ac_cv_prog_CC="${ac_tool_prefix}cc"
-    echo "$as_me:$LINENO: found $as_dir/$ac_word$ac_exec_ext" >&5
+    printf "%s\n" "$as_me:${as_lineno-$LINENO}: found $as_dir$ac_word$ac_exec_ext" >&5
     break 2
   fi
 done
-done
+  done
 IFS=$as_save_IFS
 
 fi
 fi
 CC=$ac_cv_prog_CC
 if test -n "$CC"; then
-  { echo "$as_me:$LINENO: result: $CC" >&5
-echo "${ECHO_T}$CC" >&6; }
+  { printf "%s\n" "$as_me:${as_lineno-$LINENO}: result: $CC" >&5
+printf "%s\n" "$CC" >&6; }
 else
-  { echo "$as_me:$LINENO: result: no" >&5
-echo "${ECHO_T}no" >&6; }
+  { printf "%s\n" "$as_me:${as_lineno-$LINENO}: result: no" >&5
+printf "%s\n" "no" >&6; }
 fi
 
 
@@ -3119,11 +4359,12 @@ fi
 if test -z "$CC"; then
   # Extract the first word of "cc", so it can be a program name with args.
 set dummy cc; ac_word=$2
-{ echo "$as_me:$LINENO: checking for $ac_word" >&5
-echo $ECHO_N "checking for $ac_word... $ECHO_C" >&6; }
-if test "${ac_cv_prog_CC+set}" = set; then
-  echo $ECHO_N "(cached) $ECHO_C" >&6
-else
+{ printf "%s\n" "$as_me:${as_lineno-$LINENO}: checking for $ac_word" >&5
+printf %s "checking for $ac_word... " >&6; }
+if test ${ac_cv_prog_CC+y}
+then :
+  printf %s "(cached) " >&6
+else $as_nop
   if test -n "$CC"; then
   ac_cv_prog_CC="$CC" # Let the user override the test.
 else
@@ -3132,19 +4373,23 @@ as_save_IFS=$IFS; IFS=$PATH_SEPARATOR
 for as_dir in $PATH
 do
   IFS=$as_save_IFS
-  test -z "$as_dir" && as_dir=.
-  for ac_exec_ext in '' $ac_executable_extensions; do
-  if { test -f "$as_dir/$ac_word$ac_exec_ext" && $as_test_x "$as_dir/$ac_word$ac_exec_ext"; }; then
-    if test "$as_dir/$ac_word$ac_exec_ext" = "/usr/ucb/cc"; then
+  case $as_dir in #(((
+    '') as_dir=./ ;;
+    */) ;;
+    *) as_dir=$as_dir/ ;;
+  esac
+    for ac_exec_ext in '' $ac_executable_extensions; do
+  if as_fn_executable_p "$as_dir$ac_word$ac_exec_ext"; then
+    if test "$as_dir$ac_word$ac_exec_ext" = "/usr/ucb/cc"; then
        ac_prog_rejected=yes
        continue
      fi
     ac_cv_prog_CC="cc"
-    echo "$as_me:$LINENO: found $as_dir/$ac_word$ac_exec_ext" >&5
+    printf "%s\n" "$as_me:${as_lineno-$LINENO}: found $as_dir$ac_word$ac_exec_ext" >&5
     break 2
   fi
 done
-done
+  done
 IFS=$as_save_IFS
 
 if test $ac_prog_rejected = yes; then
@@ -3156,18 +4401,18 @@ if test $ac_prog_rejected = yes; then
     # However, it has the same basename, so the bogon will be chosen
     # first if we set CC to just the basename; use the full file name.
     shift
-    ac_cv_prog_CC="$as_dir/$ac_word${1+' '}$@"
+    ac_cv_prog_CC="$as_dir$ac_word${1+' '}$@"
   fi
 fi
 fi
 fi
 CC=$ac_cv_prog_CC
 if test -n "$CC"; then
-  { echo "$as_me:$LINENO: result: $CC" >&5
-echo "${ECHO_T}$CC" >&6; }
+  { printf "%s\n" "$as_me:${as_lineno-$LINENO}: result: $CC" >&5
+printf "%s\n" "$CC" >&6; }
 else
-  { echo "$as_me:$LINENO: result: no" >&5
-echo "${ECHO_T}no" >&6; }
+  { printf "%s\n" "$as_me:${as_lineno-$LINENO}: result: no" >&5
+printf "%s\n" "no" >&6; }
 fi
 
 
@@ -3178,11 +4423,12 @@ if test -z "$CC"; then
   do
     # Extract the first word of "$ac_tool_prefix$ac_prog", so it can be a program name with args.
 set dummy $ac_tool_prefix$ac_prog; ac_word=$2
-{ echo "$as_me:$LINENO: checking for $ac_word" >&5
-echo $ECHO_N "checking for $ac_word... $ECHO_C" >&6; }
-if test "${ac_cv_prog_CC+set}" = set; then
-  echo $ECHO_N "(cached) $ECHO_C" >&6
-else
+{ printf "%s\n" "$as_me:${as_lineno-$LINENO}: checking for $ac_word" >&5
+printf %s "checking for $ac_word... " >&6; }
+if test ${ac_cv_prog_CC+y}
+then :
+  printf %s "(cached) " >&6
+else $as_nop
   if test -n "$CC"; then
   ac_cv_prog_CC="$CC" # Let the user override the test.
 else
@@ -3190,26 +4436,30 @@ as_save_IFS=$IFS; IFS=$PATH_SEPARATOR
 for as_dir in $PATH
 do
   IFS=$as_save_IFS
-  test -z "$as_dir" && as_dir=.
-  for ac_exec_ext in '' $ac_executable_extensions; do
-  if { test -f "$as_dir/$ac_word$ac_exec_ext" && $as_test_x "$as_dir/$ac_word$ac_exec_ext"; }; then
+  case $as_dir in #(((
+    '') as_dir=./ ;;
+    */) ;;
+    *) as_dir=$as_dir/ ;;
+  esac
+    for ac_exec_ext in '' $ac_executable_extensions; do
+  if as_fn_executable_p "$as_dir$ac_word$ac_exec_ext"; then
     ac_cv_prog_CC="$ac_tool_prefix$ac_prog"
-    echo "$as_me:$LINENO: found $as_dir/$ac_word$ac_exec_ext" >&5
+    printf "%s\n" "$as_me:${as_lineno-$LINENO}: found $as_dir$ac_word$ac_exec_ext" >&5
     break 2
   fi
 done
-done
+  done
 IFS=$as_save_IFS
 
 fi
 fi
 CC=$ac_cv_prog_CC
 if test -n "$CC"; then
-  { echo "$as_me:$LINENO: result: $CC" >&5
-echo "${ECHO_T}$CC" >&6; }
+  { printf "%s\n" "$as_me:${as_lineno-$LINENO}: result: $CC" >&5
+printf "%s\n" "$CC" >&6; }
 else
-  { echo "$as_me:$LINENO: result: no" >&5
-echo "${ECHO_T}no" >&6; }
+  { printf "%s\n" "$as_me:${as_lineno-$LINENO}: result: no" >&5
+printf "%s\n" "no" >&6; }
 fi
 
 
@@ -3222,11 +4472,12 @@ if test -z "$CC"; then
 do
   # Extract the first word of "$ac_prog", so it can be a program name with args.
 set dummy $ac_prog; ac_word=$2
-{ echo "$as_me:$LINENO: checking for $ac_word" >&5
-echo $ECHO_N "checking for $ac_word... $ECHO_C" >&6; }
-if test "${ac_cv_prog_ac_ct_CC+set}" = set; then
-  echo $ECHO_N "(cached) $ECHO_C" >&6
-else
+{ printf "%s\n" "$as_me:${as_lineno-$LINENO}: checking for $ac_word" >&5
+printf %s "checking for $ac_word... " >&6; }
+if test ${ac_cv_prog_ac_ct_CC+y}
+then :
+  printf %s "(cached) " >&6
+else $as_nop
   if test -n "$ac_ct_CC"; then
   ac_cv_prog_ac_ct_CC="$ac_ct_CC" # Let the user override the test.
 else
@@ -3234,26 +4485,30 @@ as_save_IFS=$IFS; IFS=$PATH_SEPARATOR
 for as_dir in $PATH
 do
   IFS=$as_save_IFS
-  test -z "$as_dir" && as_dir=.
-  for ac_exec_ext in '' $ac_executable_extensions; do
-  if { test -f "$as_dir/$ac_word$ac_exec_ext" && $as_test_x "$as_dir/$ac_word$ac_exec_ext"; }; then
+  case $as_dir in #(((
+    '') as_dir=./ ;;
+    */) ;;
+    *) as_dir=$as_dir/ ;;
+  esac
+    for ac_exec_ext in '' $ac_executable_extensions; do
+  if as_fn_executable_p "$as_dir$ac_word$ac_exec_ext"; then
     ac_cv_prog_ac_ct_CC="$ac_prog"
-    echo "$as_me:$LINENO: found $as_dir/$ac_word$ac_exec_ext" >&5
+    printf "%s\n" "$as_me:${as_lineno-$LINENO}: found $as_dir$ac_word$ac_exec_ext" >&5
     break 2
   fi
 done
-done
+  done
 IFS=$as_save_IFS
 
 fi
 fi
 ac_ct_CC=$ac_cv_prog_ac_ct_CC
 if test -n "$ac_ct_CC"; then
-  { echo "$as_me:$LINENO: result: $ac_ct_CC" >&5
-echo "${ECHO_T}$ac_ct_CC" >&6; }
+  { printf "%s\n" "$as_me:${as_lineno-$LINENO}: result: $ac_ct_CC" >&5
+printf "%s\n" "$ac_ct_CC" >&6; }
 else
-  { echo "$as_me:$LINENO: result: no" >&5
-echo "${ECHO_T}no" >&6; }
+  { printf "%s\n" "$as_me:${as_lineno-$LINENO}: result: no" >&5
+printf "%s\n" "no" >&6; }
 fi
 
 
@@ -3265,75 +4520,162 @@ done
   else
     case $cross_compiling:$ac_tool_warned in
 yes:)
-{ echo "$as_me:$LINENO: WARNING: In the future, Autoconf will not detect cross-tools
-whose name does not start with the host triplet.  If you think this
-configuration is useful to you, please write to autoconf@gnu.org." >&5
-echo "$as_me: WARNING: In the future, Autoconf will not detect cross-tools
-whose name does not start with the host triplet.  If you think this
-configuration is useful to you, please write to autoconf@gnu.org." >&2;}
+{ printf "%s\n" "$as_me:${as_lineno-$LINENO}: WARNING: using cross tools not prefixed with host triplet" >&5
+printf "%s\n" "$as_me: WARNING: using cross tools not prefixed with host triplet" >&2;}
 ac_tool_warned=yes ;;
 esac
     CC=$ac_ct_CC
   fi
 fi
 
+fi
+if test -z "$CC"; then
+  if test -n "$ac_tool_prefix"; then
+  # Extract the first word of "${ac_tool_prefix}clang", so it can be a program name with args.
+set dummy ${ac_tool_prefix}clang; ac_word=$2
+{ printf "%s\n" "$as_me:${as_lineno-$LINENO}: checking for $ac_word" >&5
+printf %s "checking for $ac_word... " >&6; }
+if test ${ac_cv_prog_CC+y}
+then :
+  printf %s "(cached) " >&6
+else $as_nop
+  if test -n "$CC"; then
+  ac_cv_prog_CC="$CC" # Let the user override the test.
+else
+as_save_IFS=$IFS; IFS=$PATH_SEPARATOR
+for as_dir in $PATH
+do
+  IFS=$as_save_IFS
+  case $as_dir in #(((
+    '') as_dir=./ ;;
+    */) ;;
+    *) as_dir=$as_dir/ ;;
+  esac
+    for ac_exec_ext in '' $ac_executable_extensions; do
+  if as_fn_executable_p "$as_dir$ac_word$ac_exec_ext"; then
+    ac_cv_prog_CC="${ac_tool_prefix}clang"
+    printf "%s\n" "$as_me:${as_lineno-$LINENO}: found $as_dir$ac_word$ac_exec_ext" >&5
+    break 2
+  fi
+done
+  done
+IFS=$as_save_IFS
+
+fi
+fi
+CC=$ac_cv_prog_CC
+if test -n "$CC"; then
+  { printf "%s\n" "$as_me:${as_lineno-$LINENO}: result: $CC" >&5
+printf "%s\n" "$CC" >&6; }
+else
+  { printf "%s\n" "$as_me:${as_lineno-$LINENO}: result: no" >&5
+printf "%s\n" "no" >&6; }
+fi
+
+
+fi
+if test -z "$ac_cv_prog_CC"; then
+  ac_ct_CC=$CC
+  # Extract the first word of "clang", so it can be a program name with args.
+set dummy clang; ac_word=$2
+{ printf "%s\n" "$as_me:${as_lineno-$LINENO}: checking for $ac_word" >&5
+printf %s "checking for $ac_word... " >&6; }
+if test ${ac_cv_prog_ac_ct_CC+y}
+then :
+  printf %s "(cached) " >&6
+else $as_nop
+  if test -n "$ac_ct_CC"; then
+  ac_cv_prog_ac_ct_CC="$ac_ct_CC" # Let the user override the test.
+else
+as_save_IFS=$IFS; IFS=$PATH_SEPARATOR
+for as_dir in $PATH
+do
+  IFS=$as_save_IFS
+  case $as_dir in #(((
+    '') as_dir=./ ;;
+    */) ;;
+    *) as_dir=$as_dir/ ;;
+  esac
+    for ac_exec_ext in '' $ac_executable_extensions; do
+  if as_fn_executable_p "$as_dir$ac_word$ac_exec_ext"; then
+    ac_cv_prog_ac_ct_CC="clang"
+    printf "%s\n" "$as_me:${as_lineno-$LINENO}: found $as_dir$ac_word$ac_exec_ext" >&5
+    break 2
+  fi
+done
+  done
+IFS=$as_save_IFS
+
+fi
+fi
+ac_ct_CC=$ac_cv_prog_ac_ct_CC
+if test -n "$ac_ct_CC"; then
+  { printf "%s\n" "$as_me:${as_lineno-$LINENO}: result: $ac_ct_CC" >&5
+printf "%s\n" "$ac_ct_CC" >&6; }
+else
+  { printf "%s\n" "$as_me:${as_lineno-$LINENO}: result: no" >&5
+printf "%s\n" "no" >&6; }
+fi
+
+  if test "x$ac_ct_CC" = x; then
+    CC=""
+  else
+    case $cross_compiling:$ac_tool_warned in
+yes:)
+{ printf "%s\n" "$as_me:${as_lineno-$LINENO}: WARNING: using cross tools not prefixed with host triplet" >&5
+printf "%s\n" "$as_me: WARNING: using cross tools not prefixed with host triplet" >&2;}
+ac_tool_warned=yes ;;
+esac
+    CC=$ac_ct_CC
+  fi
+else
+  CC="$ac_cv_prog_CC"
+fi
+
 fi
 
 
-test -z "$CC" && { { echo "$as_me:$LINENO: error: no acceptable C compiler found in \$PATH
-See \`config.log' for more details." >&5
-echo "$as_me: error: no acceptable C compiler found in \$PATH
-See \`config.log' for more details." >&2;}
-   { (exit 1); exit 1; }; }
+test -z "$CC" && { { printf "%s\n" "$as_me:${as_lineno-$LINENO}: error: in \`$ac_pwd':" >&5
+printf "%s\n" "$as_me: error: in \`$ac_pwd':" >&2;}
+as_fn_error $? "no acceptable C compiler found in \$PATH
+See \`config.log' for more details" "$LINENO" 5; }
 
 # Provide some information about the compiler.
-echo "$as_me:$LINENO: checking for C compiler version" >&5
-ac_compiler=`set X $ac_compile; echo $2`
-{ (ac_try="$ac_compiler --version >&5"
+printf "%s\n" "$as_me:${as_lineno-$LINENO}: checking for C compiler version" >&5
+set X $ac_compile
+ac_compiler=$2
+for ac_option in --version -v -V -qversion -version; do
+  { { ac_try="$ac_compiler $ac_option >&5"
 case "(($ac_try" in
   *\"* | *\`* | *\\*) ac_try_echo=\$ac_try;;
   *) ac_try_echo=$ac_try;;
 esac
-eval "echo \"\$as_me:$LINENO: $ac_try_echo\"") >&5
-  (eval "$ac_compiler --version >&5") 2>&5
+eval ac_try_echo="\"\$as_me:${as_lineno-$LINENO}: $ac_try_echo\""
+printf "%s\n" "$ac_try_echo"; } >&5
+  (eval "$ac_compiler $ac_option >&5") 2>conftest.err
   ac_status=$?
-  echo "$as_me:$LINENO: \$? = $ac_status" >&5
-  (exit $ac_status); }
-{ (ac_try="$ac_compiler -v >&5"
-case "(($ac_try" in
-  *\"* | *\`* | *\\*) ac_try_echo=\$ac_try;;
-  *) ac_try_echo=$ac_try;;
-esac
-eval "echo \"\$as_me:$LINENO: $ac_try_echo\"") >&5
-  (eval "$ac_compiler -v >&5") 2>&5
-  ac_status=$?
-  echo "$as_me:$LINENO: \$? = $ac_status" >&5
-  (exit $ac_status); }
-{ (ac_try="$ac_compiler -V >&5"
-case "(($ac_try" in
-  *\"* | *\`* | *\\*) ac_try_echo=\$ac_try;;
-  *) ac_try_echo=$ac_try;;
-esac
-eval "echo \"\$as_me:$LINENO: $ac_try_echo\"") >&5
-  (eval "$ac_compiler -V >&5") 2>&5
-  ac_status=$?
-  echo "$as_me:$LINENO: \$? = $ac_status" >&5
-  (exit $ac_status); }
+  if test -s conftest.err; then
+    sed '10a\
+... rest of stderr output deleted ...
+         10q' conftest.err >conftest.er1
+    cat conftest.er1 >&5
+  fi
+  rm -f conftest.er1 conftest.err
+  printf "%s\n" "$as_me:${as_lineno-$LINENO}: \$? = $ac_status" >&5
+  test $ac_status = 0; }
+done
 
-{ echo "$as_me:$LINENO: checking whether we are using the GNU C compiler" >&5
-echo $ECHO_N "checking whether we are using the GNU C compiler... $ECHO_C" >&6; }
-if test "${ac_cv_c_compiler_gnu+set}" = set; then
-  echo $ECHO_N "(cached) $ECHO_C" >&6
-else
-  cat >conftest.$ac_ext <<_ACEOF
-/* confdefs.h.  */
-_ACEOF
-cat confdefs.h >>conftest.$ac_ext
-cat >>conftest.$ac_ext <<_ACEOF
+{ printf "%s\n" "$as_me:${as_lineno-$LINENO}: checking whether the compiler supports GNU C" >&5
+printf %s "checking whether the compiler supports GNU C... " >&6; }
+if test ${ac_cv_c_compiler_gnu+y}
+then :
+  printf %s "(cached) " >&6
+else $as_nop
+  cat confdefs.h - <<_ACEOF >conftest.$ac_ext
 /* end confdefs.h.  */
 
 int
-main ()
+main (void)
 {
 #ifndef __GNUC__
        choke me
@@ -3343,178 +4685,95 @@ main ()
   return 0;
 }
 _ACEOF
-rm -f conftest.$ac_objext
-if { (ac_try="$ac_compile"
-case "(($ac_try" in
-  *\"* | *\`* | *\\*) ac_try_echo=\$ac_try;;
-  *) ac_try_echo=$ac_try;;
-esac
-eval "echo \"\$as_me:$LINENO: $ac_try_echo\"") >&5
-  (eval "$ac_compile") 2>conftest.er1
-  ac_status=$?
-  grep -v '^ *+' conftest.er1 >conftest.err
-  rm -f conftest.er1
-  cat conftest.err >&5
-  echo "$as_me:$LINENO: \$? = $ac_status" >&5
-  (exit $ac_status); } && {
-	 test -z "$ac_c_werror_flag" ||
-	 test ! -s conftest.err
-       } && test -s conftest.$ac_objext; then
+if ac_fn_c_try_compile "$LINENO"
+then :
   ac_compiler_gnu=yes
-else
-  echo "$as_me: failed program was:" >&5
-sed 's/^/| /' conftest.$ac_ext >&5
-
-	ac_compiler_gnu=no
+else $as_nop
+  ac_compiler_gnu=no
 fi
-
-rm -f core conftest.err conftest.$ac_objext conftest.$ac_ext
+rm -f core conftest.err conftest.$ac_objext conftest.beam conftest.$ac_ext
 ac_cv_c_compiler_gnu=$ac_compiler_gnu
 
 fi
-{ echo "$as_me:$LINENO: result: $ac_cv_c_compiler_gnu" >&5
-echo "${ECHO_T}$ac_cv_c_compiler_gnu" >&6; }
-GCC=`test $ac_compiler_gnu = yes && echo yes`
-ac_test_CFLAGS=${CFLAGS+set}
+{ printf "%s\n" "$as_me:${as_lineno-$LINENO}: result: $ac_cv_c_compiler_gnu" >&5
+printf "%s\n" "$ac_cv_c_compiler_gnu" >&6; }
+ac_compiler_gnu=$ac_cv_c_compiler_gnu
+
+if test $ac_compiler_gnu = yes; then
+  GCC=yes
+else
+  GCC=
+fi
+ac_test_CFLAGS=${CFLAGS+y}
 ac_save_CFLAGS=$CFLAGS
-{ echo "$as_me:$LINENO: checking whether $CC accepts -g" >&5
-echo $ECHO_N "checking whether $CC accepts -g... $ECHO_C" >&6; }
-if test "${ac_cv_prog_cc_g+set}" = set; then
-  echo $ECHO_N "(cached) $ECHO_C" >&6
-else
+{ printf "%s\n" "$as_me:${as_lineno-$LINENO}: checking whether $CC accepts -g" >&5
+printf %s "checking whether $CC accepts -g... " >&6; }
+if test ${ac_cv_prog_cc_g+y}
+then :
+  printf %s "(cached) " >&6
+else $as_nop
   ac_save_c_werror_flag=$ac_c_werror_flag
    ac_c_werror_flag=yes
    ac_cv_prog_cc_g=no
    CFLAGS="-g"
-   cat >conftest.$ac_ext <<_ACEOF
-/* confdefs.h.  */
-_ACEOF
-cat confdefs.h >>conftest.$ac_ext
-cat >>conftest.$ac_ext <<_ACEOF
+   cat confdefs.h - <<_ACEOF >conftest.$ac_ext
 /* end confdefs.h.  */
 
 int
-main ()
+main (void)
 {
 
   ;
   return 0;
 }
 _ACEOF
-rm -f conftest.$ac_objext
-if { (ac_try="$ac_compile"
-case "(($ac_try" in
-  *\"* | *\`* | *\\*) ac_try_echo=\$ac_try;;
-  *) ac_try_echo=$ac_try;;
-esac
-eval "echo \"\$as_me:$LINENO: $ac_try_echo\"") >&5
-  (eval "$ac_compile") 2>conftest.er1
-  ac_status=$?
-  grep -v '^ *+' conftest.er1 >conftest.err
-  rm -f conftest.er1
-  cat conftest.err >&5
-  echo "$as_me:$LINENO: \$? = $ac_status" >&5
-  (exit $ac_status); } && {
-	 test -z "$ac_c_werror_flag" ||
-	 test ! -s conftest.err
-       } && test -s conftest.$ac_objext; then
+if ac_fn_c_try_compile "$LINENO"
+then :
   ac_cv_prog_cc_g=yes
-else
-  echo "$as_me: failed program was:" >&5
-sed 's/^/| /' conftest.$ac_ext >&5
-
-	CFLAGS=""
-      cat >conftest.$ac_ext <<_ACEOF
-/* confdefs.h.  */
-_ACEOF
-cat confdefs.h >>conftest.$ac_ext
-cat >>conftest.$ac_ext <<_ACEOF
+else $as_nop
+  CFLAGS=""
+      cat confdefs.h - <<_ACEOF >conftest.$ac_ext
 /* end confdefs.h.  */
 
 int
-main ()
+main (void)
 {
 
   ;
   return 0;
 }
 _ACEOF
-rm -f conftest.$ac_objext
-if { (ac_try="$ac_compile"
-case "(($ac_try" in
-  *\"* | *\`* | *\\*) ac_try_echo=\$ac_try;;
-  *) ac_try_echo=$ac_try;;
-esac
-eval "echo \"\$as_me:$LINENO: $ac_try_echo\"") >&5
-  (eval "$ac_compile") 2>conftest.er1
-  ac_status=$?
-  grep -v '^ *+' conftest.er1 >conftest.err
-  rm -f conftest.er1
-  cat conftest.err >&5
-  echo "$as_me:$LINENO: \$? = $ac_status" >&5
-  (exit $ac_status); } && {
-	 test -z "$ac_c_werror_flag" ||
-	 test ! -s conftest.err
-       } && test -s conftest.$ac_objext; then
-  :
-else
-  echo "$as_me: failed program was:" >&5
-sed 's/^/| /' conftest.$ac_ext >&5
+if ac_fn_c_try_compile "$LINENO"
+then :
 
-	ac_c_werror_flag=$ac_save_c_werror_flag
+else $as_nop
+  ac_c_werror_flag=$ac_save_c_werror_flag
 	 CFLAGS="-g"
-	 cat >conftest.$ac_ext <<_ACEOF
-/* confdefs.h.  */
-_ACEOF
-cat confdefs.h >>conftest.$ac_ext
-cat >>conftest.$ac_ext <<_ACEOF
+	 cat confdefs.h - <<_ACEOF >conftest.$ac_ext
 /* end confdefs.h.  */
 
 int
-main ()
+main (void)
 {
 
   ;
   return 0;
 }
 _ACEOF
-rm -f conftest.$ac_objext
-if { (ac_try="$ac_compile"
-case "(($ac_try" in
-  *\"* | *\`* | *\\*) ac_try_echo=\$ac_try;;
-  *) ac_try_echo=$ac_try;;
-esac
-eval "echo \"\$as_me:$LINENO: $ac_try_echo\"") >&5
-  (eval "$ac_compile") 2>conftest.er1
-  ac_status=$?
-  grep -v '^ *+' conftest.er1 >conftest.err
-  rm -f conftest.er1
-  cat conftest.err >&5
-  echo "$as_me:$LINENO: \$? = $ac_status" >&5
-  (exit $ac_status); } && {
-	 test -z "$ac_c_werror_flag" ||
-	 test ! -s conftest.err
-       } && test -s conftest.$ac_objext; then
+if ac_fn_c_try_compile "$LINENO"
+then :
   ac_cv_prog_cc_g=yes
-else
-  echo "$as_me: failed program was:" >&5
-sed 's/^/| /' conftest.$ac_ext >&5
-
-
 fi
-
-rm -f core conftest.err conftest.$ac_objext conftest.$ac_ext
+rm -f core conftest.err conftest.$ac_objext conftest.beam conftest.$ac_ext
 fi
-
-rm -f core conftest.err conftest.$ac_objext conftest.$ac_ext
+rm -f core conftest.err conftest.$ac_objext conftest.beam conftest.$ac_ext
 fi
-
-rm -f core conftest.err conftest.$ac_objext conftest.$ac_ext
+rm -f core conftest.err conftest.$ac_objext conftest.beam conftest.$ac_ext
    ac_c_werror_flag=$ac_save_c_werror_flag
 fi
-{ echo "$as_me:$LINENO: result: $ac_cv_prog_cc_g" >&5
-echo "${ECHO_T}$ac_cv_prog_cc_g" >&6; }
-if test "$ac_test_CFLAGS" = set; then
+{ printf "%s\n" "$as_me:${as_lineno-$LINENO}: result: $ac_cv_prog_cc_g" >&5
+printf "%s\n" "$ac_cv_prog_cc_g" >&6; }
+if test $ac_test_CFLAGS; then
   CFLAGS=$ac_save_CFLAGS
 elif test $ac_cv_prog_cc_g = yes; then
   if test "$GCC" = yes; then
@@ -3529,120 +4788,145 @@ else
     CFLAGS=
   fi
 fi
-{ echo "$as_me:$LINENO: checking for $CC option to accept ISO C89" >&5
-echo $ECHO_N "checking for $CC option to accept ISO C89... $ECHO_C" >&6; }
-if test "${ac_cv_prog_cc_c89+set}" = set; then
-  echo $ECHO_N "(cached) $ECHO_C" >&6
-else
+ac_prog_cc_stdc=no
+if test x$ac_prog_cc_stdc = xno
+then :
+  { printf "%s\n" "$as_me:${as_lineno-$LINENO}: checking for $CC option to enable C11 features" >&5
+printf %s "checking for $CC option to enable C11 features... " >&6; }
+if test ${ac_cv_prog_cc_c11+y}
+then :
+  printf %s "(cached) " >&6
+else $as_nop
+  ac_cv_prog_cc_c11=no
+ac_save_CC=$CC
+cat confdefs.h - <<_ACEOF >conftest.$ac_ext
+/* end confdefs.h.  */
+$ac_c_conftest_c11_program
+_ACEOF
+for ac_arg in '' -std=gnu11
+do
+  CC="$ac_save_CC $ac_arg"
+  if ac_fn_c_try_compile "$LINENO"
+then :
+  ac_cv_prog_cc_c11=$ac_arg
+fi
+rm -f core conftest.err conftest.$ac_objext conftest.beam
+  test "x$ac_cv_prog_cc_c11" != "xno" && break
+done
+rm -f conftest.$ac_ext
+CC=$ac_save_CC
+fi
+
+if test "x$ac_cv_prog_cc_c11" = xno
+then :
+  { printf "%s\n" "$as_me:${as_lineno-$LINENO}: result: unsupported" >&5
+printf "%s\n" "unsupported" >&6; }
+else $as_nop
+  if test "x$ac_cv_prog_cc_c11" = x
+then :
+  { printf "%s\n" "$as_me:${as_lineno-$LINENO}: result: none needed" >&5
+printf "%s\n" "none needed" >&6; }
+else $as_nop
+  { printf "%s\n" "$as_me:${as_lineno-$LINENO}: result: $ac_cv_prog_cc_c11" >&5
+printf "%s\n" "$ac_cv_prog_cc_c11" >&6; }
+     CC="$CC $ac_cv_prog_cc_c11"
+fi
+  ac_cv_prog_cc_stdc=$ac_cv_prog_cc_c11
+  ac_prog_cc_stdc=c11
+fi
+fi
+if test x$ac_prog_cc_stdc = xno
+then :
+  { printf "%s\n" "$as_me:${as_lineno-$LINENO}: checking for $CC option to enable C99 features" >&5
+printf %s "checking for $CC option to enable C99 features... " >&6; }
+if test ${ac_cv_prog_cc_c99+y}
+then :
+  printf %s "(cached) " >&6
+else $as_nop
+  ac_cv_prog_cc_c99=no
+ac_save_CC=$CC
+cat confdefs.h - <<_ACEOF >conftest.$ac_ext
+/* end confdefs.h.  */
+$ac_c_conftest_c99_program
+_ACEOF
+for ac_arg in '' -std=gnu99 -std=c99 -c99 -qlanglvl=extc1x -qlanglvl=extc99 -AC99 -D_STDC_C99=
+do
+  CC="$ac_save_CC $ac_arg"
+  if ac_fn_c_try_compile "$LINENO"
+then :
+  ac_cv_prog_cc_c99=$ac_arg
+fi
+rm -f core conftest.err conftest.$ac_objext conftest.beam
+  test "x$ac_cv_prog_cc_c99" != "xno" && break
+done
+rm -f conftest.$ac_ext
+CC=$ac_save_CC
+fi
+
+if test "x$ac_cv_prog_cc_c99" = xno
+then :
+  { printf "%s\n" "$as_me:${as_lineno-$LINENO}: result: unsupported" >&5
+printf "%s\n" "unsupported" >&6; }
+else $as_nop
+  if test "x$ac_cv_prog_cc_c99" = x
+then :
+  { printf "%s\n" "$as_me:${as_lineno-$LINENO}: result: none needed" >&5
+printf "%s\n" "none needed" >&6; }
+else $as_nop
+  { printf "%s\n" "$as_me:${as_lineno-$LINENO}: result: $ac_cv_prog_cc_c99" >&5
+printf "%s\n" "$ac_cv_prog_cc_c99" >&6; }
+     CC="$CC $ac_cv_prog_cc_c99"
+fi
+  ac_cv_prog_cc_stdc=$ac_cv_prog_cc_c99
+  ac_prog_cc_stdc=c99
+fi
+fi
+if test x$ac_prog_cc_stdc = xno
+then :
+  { printf "%s\n" "$as_me:${as_lineno-$LINENO}: checking for $CC option to enable C89 features" >&5
+printf %s "checking for $CC option to enable C89 features... " >&6; }
+if test ${ac_cv_prog_cc_c89+y}
+then :
+  printf %s "(cached) " >&6
+else $as_nop
   ac_cv_prog_cc_c89=no
 ac_save_CC=$CC
-cat >conftest.$ac_ext <<_ACEOF
-/* confdefs.h.  */
-_ACEOF
-cat confdefs.h >>conftest.$ac_ext
-cat >>conftest.$ac_ext <<_ACEOF
+cat confdefs.h - <<_ACEOF >conftest.$ac_ext
 /* end confdefs.h.  */
-#include <stdarg.h>
-#include <stdio.h>
-#include <sys/types.h>
-#include <sys/stat.h>
-/* Most of the following tests are stolen from RCS 5.7's src/conf.sh.  */
-struct buf { int x; };
-FILE * (*rcsopen) (struct buf *, struct stat *, int);
-static char *e (p, i)
-     char **p;
-     int i;
-{
-  return p[i];
-}
-static char *f (char * (*g) (char **, int), char **p, ...)
-{
-  char *s;
-  va_list v;
-  va_start (v,p);
-  s = g (p, va_arg (v,int));
-  va_end (v);
-  return s;
-}
-
-/* OSF 4.0 Compaq cc is some sort of almost-ANSI by default.  It has
-   function prototypes and stuff, but not '\xHH' hex character constants.
-   These don't provoke an error unfortunately, instead are silently treated
-   as 'x'.  The following induces an error, until -std is added to get
-   proper ANSI mode.  Curiously '\x00'!='x' always comes out true, for an
-   array size at least.  It's necessary to write '\x00'==0 to get something
-   that's true only with -std.  */
-int osf4_cc_array ['\x00' == 0 ? 1 : -1];
-
-/* IBM C 6 for AIX is almost-ANSI by default, but it replaces macro parameters
-   inside strings and character constants.  */
-#define FOO(x) 'x'
-int xlc6_cc_array[FOO(a) == 'x' ? 1 : -1];
-
-int test (int i, double x);
-struct s1 {int (*f) (int a);};
-struct s2 {int (*f) (double a);};
-int pairnames (int, char **, FILE *(*)(struct buf *, struct stat *, int), int, int);
-int argc;
-char **argv;
-int
-main ()
-{
-return f (e, argv, 0) != argv[0]  ||  f (e, argv, 1) != argv[1];
-  ;
-  return 0;
-}
+$ac_c_conftest_c89_program
 _ACEOF
-for ac_arg in '' -qlanglvl=extc89 -qlanglvl=ansi -std \
-	-Ae "-Aa -D_HPUX_SOURCE" "-Xc -D__EXTENSIONS__"
+for ac_arg in '' -qlanglvl=extc89 -qlanglvl=ansi -std -Ae "-Aa -D_HPUX_SOURCE" "-Xc -D__EXTENSIONS__"
 do
   CC="$ac_save_CC $ac_arg"
-  rm -f conftest.$ac_objext
-if { (ac_try="$ac_compile"
-case "(($ac_try" in
-  *\"* | *\`* | *\\*) ac_try_echo=\$ac_try;;
-  *) ac_try_echo=$ac_try;;
-esac
-eval "echo \"\$as_me:$LINENO: $ac_try_echo\"") >&5
-  (eval "$ac_compile") 2>conftest.er1
-  ac_status=$?
-  grep -v '^ *+' conftest.er1 >conftest.err
-  rm -f conftest.er1
-  cat conftest.err >&5
-  echo "$as_me:$LINENO: \$? = $ac_status" >&5
-  (exit $ac_status); } && {
-	 test -z "$ac_c_werror_flag" ||
-	 test ! -s conftest.err
-       } && test -s conftest.$ac_objext; then
+  if ac_fn_c_try_compile "$LINENO"
+then :
   ac_cv_prog_cc_c89=$ac_arg
-else
-  echo "$as_me: failed program was:" >&5
-sed 's/^/| /' conftest.$ac_ext >&5
-
-
 fi
-
-rm -f core conftest.err conftest.$ac_objext
+rm -f core conftest.err conftest.$ac_objext conftest.beam
   test "x$ac_cv_prog_cc_c89" != "xno" && break
 done
 rm -f conftest.$ac_ext
 CC=$ac_save_CC
-
 fi
-# AC_CACHE_VAL
-case "x$ac_cv_prog_cc_c89" in
-  x)
-    { echo "$as_me:$LINENO: result: none needed" >&5
-echo "${ECHO_T}none needed" >&6; } ;;
-  xno)
-    { echo "$as_me:$LINENO: result: unsupported" >&5
-echo "${ECHO_T}unsupported" >&6; } ;;
-  *)
-    CC="$CC $ac_cv_prog_cc_c89"
-    { echo "$as_me:$LINENO: result: $ac_cv_prog_cc_c89" >&5
-echo "${ECHO_T}$ac_cv_prog_cc_c89" >&6; } ;;
-esac
 
+if test "x$ac_cv_prog_cc_c89" = xno
+then :
+  { printf "%s\n" "$as_me:${as_lineno-$LINENO}: result: unsupported" >&5
+printf "%s\n" "unsupported" >&6; }
+else $as_nop
+  if test "x$ac_cv_prog_cc_c89" = x
+then :
+  { printf "%s\n" "$as_me:${as_lineno-$LINENO}: result: none needed" >&5
+printf "%s\n" "none needed" >&6; }
+else $as_nop
+  { printf "%s\n" "$as_me:${as_lineno-$LINENO}: result: $ac_cv_prog_cc_c89" >&5
+printf "%s\n" "$ac_cv_prog_cc_c89" >&6; }
+     CC="$CC $ac_cv_prog_cc_c89"
+fi
+  ac_cv_prog_cc_stdc=$ac_cv_prog_cc_c89
+  ac_prog_cc_stdc=c89
+fi
+fi
 
 ac_ext=c
 ac_cpp='$CPP $CPPFLAGS'
@@ -3653,85 +4937,61 @@ ac_compiler_gnu=$ac_cv_c_compiler_gnu
 fi
 
 
-{ echo "$as_me:$LINENO: checking for library containing strerror" >&5
-echo $ECHO_N "checking for library containing strerror... $ECHO_C" >&6; }
-if test "${ac_cv_search_strerror+set}" = set; then
-  echo $ECHO_N "(cached) $ECHO_C" >&6
-else
+{ printf "%s\n" "$as_me:${as_lineno-$LINENO}: checking for library containing strerror" >&5
+printf %s "checking for library containing strerror... " >&6; }
+if test ${ac_cv_search_strerror+y}
+then :
+  printf %s "(cached) " >&6
+else $as_nop
   ac_func_search_save_LIBS=$LIBS
-cat >conftest.$ac_ext <<_ACEOF
-/* confdefs.h.  */
-_ACEOF
-cat confdefs.h >>conftest.$ac_ext
-cat >>conftest.$ac_ext <<_ACEOF
+cat confdefs.h - <<_ACEOF >conftest.$ac_ext
 /* end confdefs.h.  */
 
 /* Override any GCC internal prototype to avoid an error.
    Use char because int might match the return type of a GCC
    builtin and then its argument prototype would still apply.  */
-#ifdef __cplusplus
-extern "C"
-#endif
 char strerror ();
 int
-main ()
+main (void)
 {
 return strerror ();
   ;
   return 0;
 }
 _ACEOF
-for ac_lib in '' cposix; do
+for ac_lib in '' cposix
+do
   if test -z "$ac_lib"; then
     ac_res="none required"
   else
     ac_res=-l$ac_lib
     LIBS="-l$ac_lib  $ac_func_search_save_LIBS"
   fi
-  rm -f conftest.$ac_objext conftest$ac_exeext
-if { (ac_try="$ac_link"
-case "(($ac_try" in
-  *\"* | *\`* | *\\*) ac_try_echo=\$ac_try;;
-  *) ac_try_echo=$ac_try;;
-esac
-eval "echo \"\$as_me:$LINENO: $ac_try_echo\"") >&5
-  (eval "$ac_link") 2>conftest.er1
-  ac_status=$?
-  grep -v '^ *+' conftest.er1 >conftest.err
-  rm -f conftest.er1
-  cat conftest.err >&5
-  echo "$as_me:$LINENO: \$? = $ac_status" >&5
-  (exit $ac_status); } && {
-	 test -z "$ac_c_werror_flag" ||
-	 test ! -s conftest.err
-       } && test -s conftest$ac_exeext &&
-       $as_test_x conftest$ac_exeext; then
+  if ac_fn_c_try_link "$LINENO"
+then :
   ac_cv_search_strerror=$ac_res
-else
-  echo "$as_me: failed program was:" >&5
-sed 's/^/| /' conftest.$ac_ext >&5
-
-
 fi
-
-rm -f core conftest.err conftest.$ac_objext conftest_ipa8_conftest.oo \
-      conftest$ac_exeext
-  if test "${ac_cv_search_strerror+set}" = set; then
+rm -f core conftest.err conftest.$ac_objext conftest.beam \
+    conftest$ac_exeext
+  if test ${ac_cv_search_strerror+y}
+then :
   break
 fi
 done
-if test "${ac_cv_search_strerror+set}" = set; then
-  :
-else
+if test ${ac_cv_search_strerror+y}
+then :
+
+else $as_nop
   ac_cv_search_strerror=no
 fi
 rm conftest.$ac_ext
 LIBS=$ac_func_search_save_LIBS
 fi
-{ echo "$as_me:$LINENO: result: $ac_cv_search_strerror" >&5
-echo "${ECHO_T}$ac_cv_search_strerror" >&6; }
+{ printf "%s\n" "$as_me:${as_lineno-$LINENO}: result: $ac_cv_search_strerror" >&5
+printf "%s\n" "$ac_cv_search_strerror" >&6; }
 ac_res=$ac_cv_search_strerror
-if test "$ac_res" != no; then
+if test "$ac_res" != no
+then :
   test "$ac_res" = "none required" || LIBS="$ac_res $LIBS"
 
 fi
@@ -3743,11 +5003,12 @@ for ac_prog in $with_AR ar
 do
   # Extract the first word of "$ac_prog", so it can be a program name with args.
 set dummy $ac_prog; ac_word=$2
-{ echo "$as_me:$LINENO: checking for $ac_word" >&5
-echo $ECHO_N "checking for $ac_word... $ECHO_C" >&6; }
-if test "${ac_cv_prog_AR+set}" = set; then
-  echo $ECHO_N "(cached) $ECHO_C" >&6
-else
+{ printf "%s\n" "$as_me:${as_lineno-$LINENO}: checking for $ac_word" >&5
+printf %s "checking for $ac_word... " >&6; }
+if test ${ac_cv_prog_AR+y}
+then :
+  printf %s "(cached) " >&6
+else $as_nop
   if test -n "$AR"; then
   ac_cv_prog_AR="$AR" # Let the user override the test.
 else
@@ -3755,26 +5016,30 @@ as_save_IFS=$IFS; IFS=$PATH_SEPARATOR
 for as_dir in $PATH
 do
   IFS=$as_save_IFS
-  test -z "$as_dir" && as_dir=.
-  for ac_exec_ext in '' $ac_executable_extensions; do
-  if { test -f "$as_dir/$ac_word$ac_exec_ext" && $as_test_x "$as_dir/$ac_word$ac_exec_ext"; }; then
+  case $as_dir in #(((
+    '') as_dir=./ ;;
+    */) ;;
+    *) as_dir=$as_dir/ ;;
+  esac
+    for ac_exec_ext in '' $ac_executable_extensions; do
+  if as_fn_executable_p "$as_dir$ac_word$ac_exec_ext"; then
     ac_cv_prog_AR="$ac_prog"
-    echo "$as_me:$LINENO: found $as_dir/$ac_word$ac_exec_ext" >&5
+    printf "%s\n" "$as_me:${as_lineno-$LINENO}: found $as_dir$ac_word$ac_exec_ext" >&5
     break 2
   fi
 done
-done
+  done
 IFS=$as_save_IFS
 
 fi
 fi
 AR=$ac_cv_prog_AR
 if test -n "$AR"; then
-  { echo "$as_me:$LINENO: result: $AR" >&5
-echo "${ECHO_T}$AR" >&6; }
+  { printf "%s\n" "$as_me:${as_lineno-$LINENO}: result: $AR" >&5
+printf "%s\n" "$AR" >&6; }
 else
-  { echo "$as_me:$LINENO: result: no" >&5
-echo "${ECHO_T}no" >&6; }
+  { printf "%s\n" "$as_me:${as_lineno-$LINENO}: result: no" >&5
+printf "%s\n" "no" >&6; }
 fi
 
 
@@ -3782,9 +5047,7 @@ fi
 done
 
 if test -z "$AR"; then
-   { { echo "$as_me:$LINENO: error: ar archiver not found - specify with --with-m4=ARG" >&5
-echo "$as_me: error: ar archiver not found - specify with --with-m4=ARG" >&2;}
-   { (exit 1); exit 1; }; }
+   as_fn_error $? "ar archiver not found - specify with --with-m4=ARG" "$LINENO" 5
 fi
 
 
@@ -3792,11 +5055,12 @@ for ac_prog in $with_M4 gm4 m4
 do
   # Extract the first word of "$ac_prog", so it can be a program name with args.
 set dummy $ac_prog; ac_word=$2
-{ echo "$as_me:$LINENO: checking for $ac_word" >&5
-echo $ECHO_N "checking for $ac_word... $ECHO_C" >&6; }
-if test "${ac_cv_prog_M4+set}" = set; then
-  echo $ECHO_N "(cached) $ECHO_C" >&6
-else
+{ printf "%s\n" "$as_me:${as_lineno-$LINENO}: checking for $ac_word" >&5
+printf %s "checking for $ac_word... " >&6; }
+if test ${ac_cv_prog_M4+y}
+then :
+  printf %s "(cached) " >&6
+else $as_nop
   if test -n "$M4"; then
   ac_cv_prog_M4="$M4" # Let the user override the test.
 else
@@ -3804,26 +5068,30 @@ as_save_IFS=$IFS; IFS=$PATH_SEPARATOR
 for as_dir in $PATH
 do
   IFS=$as_save_IFS
-  test -z "$as_dir" && as_dir=.
-  for ac_exec_ext in '' $ac_executable_extensions; do
-  if { test -f "$as_dir/$ac_word$ac_exec_ext" && $as_test_x "$as_dir/$ac_word$ac_exec_ext"; }; then
+  case $as_dir in #(((
+    '') as_dir=./ ;;
+    */) ;;
+    *) as_dir=$as_dir/ ;;
+  esac
+    for ac_exec_ext in '' $ac_executable_extensions; do
+  if as_fn_executable_p "$as_dir$ac_word$ac_exec_ext"; then
     ac_cv_prog_M4="$ac_prog"
-    echo "$as_me:$LINENO: found $as_dir/$ac_word$ac_exec_ext" >&5
+    printf "%s\n" "$as_me:${as_lineno-$LINENO}: found $as_dir$ac_word$ac_exec_ext" >&5
     break 2
   fi
 done
-done
+  done
 IFS=$as_save_IFS
 
 fi
 fi
 M4=$ac_cv_prog_M4
 if test -n "$M4"; then
-  { echo "$as_me:$LINENO: result: $M4" >&5
-echo "${ECHO_T}$M4" >&6; }
+  { printf "%s\n" "$as_me:${as_lineno-$LINENO}: result: $M4" >&5
+printf "%s\n" "$M4" >&6; }
 else
-  { echo "$as_me:$LINENO: result: no" >&5
-echo "${ECHO_T}no" >&6; }
+  { printf "%s\n" "$as_me:${as_lineno-$LINENO}: result: no" >&5
+printf "%s\n" "no" >&6; }
 fi
 
 
@@ -3831,14 +5099,13 @@ fi
 done
 
 if test -z "$M4"; then
-   { { echo "$as_me:$LINENO: error: m4 preprocessor not found - specify with --with-M4=ARG" >&5
-echo "$as_me: error: m4 preprocessor not found - specify with --with-M4=ARG" >&2;}
-   { (exit 1); exit 1; }; }
+   as_fn_error $? "m4 preprocessor not found - specify with --with-M4=ARG" "$LINENO" 5
 fi
 
 
 
-# Find a good install program.  We prefer a C program (faster),
+
+  # Find a good install program.  We prefer a C program (faster),
 # so one script is as good as another.  But avoid the broken or
 # incompatible versions:
 # SysV /etc/install, /usr/sbin/install
@@ -3851,22 +5118,28 @@ fi
 # SVR4 /usr/ucb/install, which tries to use the nonexistent group "staff"
 # OS/2's system install, which has a completely different semantic
 # ./install, which can be erroneously created by make from ./install.sh.
-{ echo "$as_me:$LINENO: checking for a BSD-compatible install" >&5
-echo $ECHO_N "checking for a BSD-compatible install... $ECHO_C" >&6; }
+# Reject install programs that cannot install multiple files.
+{ printf "%s\n" "$as_me:${as_lineno-$LINENO}: checking for a BSD-compatible install" >&5
+printf %s "checking for a BSD-compatible install... " >&6; }
 if test -z "$INSTALL"; then
-if test "${ac_cv_path_install+set}" = set; then
-  echo $ECHO_N "(cached) $ECHO_C" >&6
-else
+if test ${ac_cv_path_install+y}
+then :
+  printf %s "(cached) " >&6
+else $as_nop
   as_save_IFS=$IFS; IFS=$PATH_SEPARATOR
 for as_dir in $PATH
 do
   IFS=$as_save_IFS
-  test -z "$as_dir" && as_dir=.
-  # Account for people who put trailing slashes in PATH elements.
-case $as_dir/ in
-  ./ | .// | /cC/* | \
+  case $as_dir in #(((
+    '') as_dir=./ ;;
+    */) ;;
+    *) as_dir=$as_dir/ ;;
+  esac
+    # Account for fact that we put trailing slashes in our PATH walk.
+case $as_dir in #((
+  ./ | /[cC]/* | \
   /etc/* | /usr/sbin/* | /usr/etc/* | /sbin/* | /usr/afsws/bin/* | \
-  ?:\\/os2\\/install\\/* | ?:\\/OS2\\/INSTALL\\/* | \
+  ?:[\\/]os2[\\/]install[\\/]* | ?:[\\/]OS2[\\/]INSTALL[\\/]* | \
   /usr/ucb/* ) ;;
   *)
     # OSF1 and SCO ODT 3.0 have their own names for install.
@@ -3874,30 +5147,42 @@ case $as_dir/ in
     # by default.
     for ac_prog in ginstall scoinst install; do
       for ac_exec_ext in '' $ac_executable_extensions; do
-	if { test -f "$as_dir/$ac_prog$ac_exec_ext" && $as_test_x "$as_dir/$ac_prog$ac_exec_ext"; }; then
+	if as_fn_executable_p "$as_dir$ac_prog$ac_exec_ext"; then
 	  if test $ac_prog = install &&
-	    grep dspmsg "$as_dir/$ac_prog$ac_exec_ext" >/dev/null 2>&1; then
+	    grep dspmsg "$as_dir$ac_prog$ac_exec_ext" >/dev/null 2>&1; then
 	    # AIX install.  It has an incompatible calling convention.
 	    :
 	  elif test $ac_prog = install &&
-	    grep pwplus "$as_dir/$ac_prog$ac_exec_ext" >/dev/null 2>&1; then
+	    grep pwplus "$as_dir$ac_prog$ac_exec_ext" >/dev/null 2>&1; then
 	    # program-specific install script used by HP pwplus--don't use.
 	    :
 	  else
-	    ac_cv_path_install="$as_dir/$ac_prog$ac_exec_ext -c"
-	    break 3
+	    rm -rf conftest.one conftest.two conftest.dir
+	    echo one > conftest.one
+	    echo two > conftest.two
+	    mkdir conftest.dir
+	    if "$as_dir$ac_prog$ac_exec_ext" -c conftest.one conftest.two "`pwd`/conftest.dir/" &&
+	      test -s conftest.one && test -s conftest.two &&
+	      test -s conftest.dir/conftest.one &&
+	      test -s conftest.dir/conftest.two
+	    then
+	      ac_cv_path_install="$as_dir$ac_prog$ac_exec_ext -c"
+	      break 3
+	    fi
 	  fi
 	fi
       done
     done
     ;;
 esac
-done
+
+  done
 IFS=$as_save_IFS
 
+rm -rf conftest.one conftest.two conftest.dir
 
 fi
-  if test "${ac_cv_path_install+set}" = set; then
+  if test ${ac_cv_path_install+y}; then
     INSTALL=$ac_cv_path_install
   else
     # As a last resort, use the slow shell script.  Don't cache a
@@ -3907,8 +5192,8 @@ fi
     INSTALL=$ac_install_sh
   fi
 fi
-{ echo "$as_me:$LINENO: result: $INSTALL" >&5
-echo "${ECHO_T}$INSTALL" >&6; }
+{ printf "%s\n" "$as_me:${as_lineno-$LINENO}: result: $INSTALL" >&5
+printf "%s\n" "$INSTALL" >&6; }
 
 # Use test -z because SunOS4 sh mishandles braces in ${var-val}.
 # It thinks the first close brace ends the variable substitution.
@@ -3919,58 +5204,60 @@ test -z "$INSTALL_SCRIPT" && INSTALL_SCRIPT='${INSTALL}'
 test -z "$INSTALL_DATA" && INSTALL_DATA='${INSTALL} -m 644'
 
 if test -z "$INSTALL"; then
-   { { echo "$as_me:$LINENO: error: install not found" >&5
-echo "$as_me: error: install not found" >&2;}
-   { (exit 1); exit 1; }; }
+   as_fn_error $? "install not found" "$LINENO" 5
 fi
 
 
-{ echo "$as_me:$LINENO: checking for a thread-safe mkdir -p" >&5
-echo $ECHO_N "checking for a thread-safe mkdir -p... $ECHO_C" >&6; }
+
+  { printf "%s\n" "$as_me:${as_lineno-$LINENO}: checking for a race-free mkdir -p" >&5
+printf %s "checking for a race-free mkdir -p... " >&6; }
 if test -z "$MKDIR_P"; then
-  if test "${ac_cv_path_mkdir+set}" = set; then
-  echo $ECHO_N "(cached) $ECHO_C" >&6
-else
+  if test ${ac_cv_path_mkdir+y}
+then :
+  printf %s "(cached) " >&6
+else $as_nop
   as_save_IFS=$IFS; IFS=$PATH_SEPARATOR
 for as_dir in $PATH$PATH_SEPARATOR/opt/sfw/bin
 do
   IFS=$as_save_IFS
-  test -z "$as_dir" && as_dir=.
-  for ac_prog in mkdir gmkdir; do
+  case $as_dir in #(((
+    '') as_dir=./ ;;
+    */) ;;
+    *) as_dir=$as_dir/ ;;
+  esac
+    for ac_prog in mkdir gmkdir; do
 	 for ac_exec_ext in '' $ac_executable_extensions; do
-	   { test -f "$as_dir/$ac_prog$ac_exec_ext" && $as_test_x "$as_dir/$ac_prog$ac_exec_ext"; } || continue
-	   case `"$as_dir/$ac_prog$ac_exec_ext" --version 2>&1` in #(
-	     'mkdir (GNU coreutils) '* | \
-	     'mkdir (coreutils) '* | \
+	   as_fn_executable_p "$as_dir$ac_prog$ac_exec_ext" || continue
+	   case `"$as_dir$ac_prog$ac_exec_ext" --version 2>&1` in #(
+	     'mkdir ('*'coreutils) '* | \
+	     'BusyBox '* | \
 	     'mkdir (fileutils) '4.1*)
-	       ac_cv_path_mkdir=$as_dir/$ac_prog$ac_exec_ext
+	       ac_cv_path_mkdir=$as_dir$ac_prog$ac_exec_ext
 	       break 3;;
 	   esac
 	 done
        done
-done
+  done
 IFS=$as_save_IFS
 
 fi
 
-  if test "${ac_cv_path_mkdir+set}" = set; then
+  test -d ./--version && rmdir ./--version
+  if test ${ac_cv_path_mkdir+y}; then
     MKDIR_P="$ac_cv_path_mkdir -p"
   else
     # As a last resort, use the slow shell script.  Don't cache a
     # value for MKDIR_P within a source directory, because that will
     # break other packages using the cache if that directory is
     # removed, or if the value is a relative name.
-    test -d ./--version && rmdir ./--version
     MKDIR_P="$ac_install_sh -d"
   fi
 fi
-{ echo "$as_me:$LINENO: result: $MKDIR_P" >&5
-echo "${ECHO_T}$MKDIR_P" >&6; }
+{ printf "%s\n" "$as_me:${as_lineno-$LINENO}: result: $MKDIR_P" >&5
+printf "%s\n" "$MKDIR_P" >&6; }
 
 if test -z "$MKDIR_P"; then
-   { { echo "$as_me:$LINENO: error: mkdir not found" >&5
-echo "$as_me: error: mkdir not found" >&2;}
-   { (exit 1); exit 1; }; }
+   as_fn_error $? "mkdir not found" "$LINENO" 5
 fi
 
 
@@ -3979,111 +5266,63 @@ ac_cpp='$CPP $CPPFLAGS'
 ac_compile='$CC -c $CFLAGS $CPPFLAGS conftest.$ac_ext >&5'
 ac_link='$CC -o conftest$ac_exeext $CFLAGS $CPPFLAGS $LDFLAGS conftest.$ac_ext $LIBS >&5'
 ac_compiler_gnu=$ac_cv_c_compiler_gnu
-{ echo "$as_me:$LINENO: checking how to run the C preprocessor" >&5
-echo $ECHO_N "checking how to run the C preprocessor... $ECHO_C" >&6; }
+{ printf "%s\n" "$as_me:${as_lineno-$LINENO}: checking how to run the C preprocessor" >&5
+printf %s "checking how to run the C preprocessor... " >&6; }
 # On Suns, sometimes $CPP names a directory.
 if test -n "$CPP" && test -d "$CPP"; then
   CPP=
 fi
 if test -z "$CPP"; then
-  if test "${ac_cv_prog_CPP+set}" = set; then
-  echo $ECHO_N "(cached) $ECHO_C" >&6
-else
-      # Double quotes because CPP needs to be expanded
-    for CPP in "$CC -E" "$CC -E -traditional-cpp" "/lib/cpp"
+  if test ${ac_cv_prog_CPP+y}
+then :
+  printf %s "(cached) " >&6
+else $as_nop
+      # Double quotes because $CC needs to be expanded
+    for CPP in "$CC -E" "$CC -E -traditional-cpp" cpp /lib/cpp
     do
       ac_preproc_ok=false
 for ac_c_preproc_warn_flag in '' yes
 do
   # Use a header file that comes with gcc, so configuring glibc
   # with a fresh cross-compiler works.
-  # Prefer <limits.h> to <assert.h> if __STDC__ is defined, since
-  # <limits.h> exists even on freestanding compilers.
   # On the NeXT, cc -E runs the code through the compiler's parser,
   # not just through cpp. "Syntax error" is here to catch this case.
-  cat >conftest.$ac_ext <<_ACEOF
-/* confdefs.h.  */
-_ACEOF
-cat confdefs.h >>conftest.$ac_ext
-cat >>conftest.$ac_ext <<_ACEOF
+  cat confdefs.h - <<_ACEOF >conftest.$ac_ext
 /* end confdefs.h.  */
-#ifdef __STDC__
-# include <limits.h>
-#else
-# include <assert.h>
-#endif
+#include <limits.h>
 		     Syntax error
 _ACEOF
-if { (ac_try="$ac_cpp conftest.$ac_ext"
-case "(($ac_try" in
-  *\"* | *\`* | *\\*) ac_try_echo=\$ac_try;;
-  *) ac_try_echo=$ac_try;;
-esac
-eval "echo \"\$as_me:$LINENO: $ac_try_echo\"") >&5
-  (eval "$ac_cpp conftest.$ac_ext") 2>conftest.er1
-  ac_status=$?
-  grep -v '^ *+' conftest.er1 >conftest.err
-  rm -f conftest.er1
-  cat conftest.err >&5
-  echo "$as_me:$LINENO: \$? = $ac_status" >&5
-  (exit $ac_status); } >/dev/null && {
-	 test -z "$ac_c_preproc_warn_flag$ac_c_werror_flag" ||
-	 test ! -s conftest.err
-       }; then
-  :
-else
-  echo "$as_me: failed program was:" >&5
-sed 's/^/| /' conftest.$ac_ext >&5
+if ac_fn_c_try_cpp "$LINENO"
+then :
 
+else $as_nop
   # Broken: fails on valid input.
 continue
 fi
-
-rm -f conftest.err conftest.$ac_ext
+rm -f conftest.err conftest.i conftest.$ac_ext
 
   # OK, works on sane cases.  Now check whether nonexistent headers
   # can be detected and how.
-  cat >conftest.$ac_ext <<_ACEOF
-/* confdefs.h.  */
-_ACEOF
-cat confdefs.h >>conftest.$ac_ext
-cat >>conftest.$ac_ext <<_ACEOF
+  cat confdefs.h - <<_ACEOF >conftest.$ac_ext
 /* end confdefs.h.  */
 #include <ac_nonexistent.h>
 _ACEOF
-if { (ac_try="$ac_cpp conftest.$ac_ext"
-case "(($ac_try" in
-  *\"* | *\`* | *\\*) ac_try_echo=\$ac_try;;
-  *) ac_try_echo=$ac_try;;
-esac
-eval "echo \"\$as_me:$LINENO: $ac_try_echo\"") >&5
-  (eval "$ac_cpp conftest.$ac_ext") 2>conftest.er1
-  ac_status=$?
-  grep -v '^ *+' conftest.er1 >conftest.err
-  rm -f conftest.er1
-  cat conftest.err >&5
-  echo "$as_me:$LINENO: \$? = $ac_status" >&5
-  (exit $ac_status); } >/dev/null && {
-	 test -z "$ac_c_preproc_warn_flag$ac_c_werror_flag" ||
-	 test ! -s conftest.err
-       }; then
+if ac_fn_c_try_cpp "$LINENO"
+then :
   # Broken: success on invalid input.
 continue
-else
-  echo "$as_me: failed program was:" >&5
-sed 's/^/| /' conftest.$ac_ext >&5
-
+else $as_nop
   # Passes both tests.
 ac_preproc_ok=:
 break
 fi
-
-rm -f conftest.err conftest.$ac_ext
+rm -f conftest.err conftest.i conftest.$ac_ext
 
 done
 # Because of `break', _AC_PREPROC_IFELSE's cleaning code was skipped.
-rm -f conftest.err conftest.$ac_ext
-if $ac_preproc_ok; then
+rm -f conftest.i conftest.err conftest.$ac_ext
+if $ac_preproc_ok
+then :
   break
 fi
 
@@ -4095,107 +5334,57 @@ fi
 else
   ac_cv_prog_CPP=$CPP
 fi
-{ echo "$as_me:$LINENO: result: $CPP" >&5
-echo "${ECHO_T}$CPP" >&6; }
+{ printf "%s\n" "$as_me:${as_lineno-$LINENO}: result: $CPP" >&5
+printf "%s\n" "$CPP" >&6; }
 ac_preproc_ok=false
 for ac_c_preproc_warn_flag in '' yes
 do
   # Use a header file that comes with gcc, so configuring glibc
   # with a fresh cross-compiler works.
-  # Prefer <limits.h> to <assert.h> if __STDC__ is defined, since
-  # <limits.h> exists even on freestanding compilers.
   # On the NeXT, cc -E runs the code through the compiler's parser,
   # not just through cpp. "Syntax error" is here to catch this case.
-  cat >conftest.$ac_ext <<_ACEOF
-/* confdefs.h.  */
-_ACEOF
-cat confdefs.h >>conftest.$ac_ext
-cat >>conftest.$ac_ext <<_ACEOF
+  cat confdefs.h - <<_ACEOF >conftest.$ac_ext
 /* end confdefs.h.  */
-#ifdef __STDC__
-# include <limits.h>
-#else
-# include <assert.h>
-#endif
+#include <limits.h>
 		     Syntax error
 _ACEOF
-if { (ac_try="$ac_cpp conftest.$ac_ext"
-case "(($ac_try" in
-  *\"* | *\`* | *\\*) ac_try_echo=\$ac_try;;
-  *) ac_try_echo=$ac_try;;
-esac
-eval "echo \"\$as_me:$LINENO: $ac_try_echo\"") >&5
-  (eval "$ac_cpp conftest.$ac_ext") 2>conftest.er1
-  ac_status=$?
-  grep -v '^ *+' conftest.er1 >conftest.err
-  rm -f conftest.er1
-  cat conftest.err >&5
-  echo "$as_me:$LINENO: \$? = $ac_status" >&5
-  (exit $ac_status); } >/dev/null && {
-	 test -z "$ac_c_preproc_warn_flag$ac_c_werror_flag" ||
-	 test ! -s conftest.err
-       }; then
-  :
-else
-  echo "$as_me: failed program was:" >&5
-sed 's/^/| /' conftest.$ac_ext >&5
+if ac_fn_c_try_cpp "$LINENO"
+then :
 
+else $as_nop
   # Broken: fails on valid input.
 continue
 fi
-
-rm -f conftest.err conftest.$ac_ext
+rm -f conftest.err conftest.i conftest.$ac_ext
 
   # OK, works on sane cases.  Now check whether nonexistent headers
   # can be detected and how.
-  cat >conftest.$ac_ext <<_ACEOF
-/* confdefs.h.  */
-_ACEOF
-cat confdefs.h >>conftest.$ac_ext
-cat >>conftest.$ac_ext <<_ACEOF
+  cat confdefs.h - <<_ACEOF >conftest.$ac_ext
 /* end confdefs.h.  */
 #include <ac_nonexistent.h>
 _ACEOF
-if { (ac_try="$ac_cpp conftest.$ac_ext"
-case "(($ac_try" in
-  *\"* | *\`* | *\\*) ac_try_echo=\$ac_try;;
-  *) ac_try_echo=$ac_try;;
-esac
-eval "echo \"\$as_me:$LINENO: $ac_try_echo\"") >&5
-  (eval "$ac_cpp conftest.$ac_ext") 2>conftest.er1
-  ac_status=$?
-  grep -v '^ *+' conftest.er1 >conftest.err
-  rm -f conftest.er1
-  cat conftest.err >&5
-  echo "$as_me:$LINENO: \$? = $ac_status" >&5
-  (exit $ac_status); } >/dev/null && {
-	 test -z "$ac_c_preproc_warn_flag$ac_c_werror_flag" ||
-	 test ! -s conftest.err
-       }; then
+if ac_fn_c_try_cpp "$LINENO"
+then :
   # Broken: success on invalid input.
 continue
-else
-  echo "$as_me: failed program was:" >&5
-sed 's/^/| /' conftest.$ac_ext >&5
-
+else $as_nop
   # Passes both tests.
 ac_preproc_ok=:
 break
 fi
-
-rm -f conftest.err conftest.$ac_ext
+rm -f conftest.err conftest.i conftest.$ac_ext
 
 done
 # Because of `break', _AC_PREPROC_IFELSE's cleaning code was skipped.
-rm -f conftest.err conftest.$ac_ext
-if $ac_preproc_ok; then
-  :
-else
-  { { echo "$as_me:$LINENO: error: C preprocessor \"$CPP\" fails sanity check
-See \`config.log' for more details." >&5
-echo "$as_me: error: C preprocessor \"$CPP\" fails sanity check
-See \`config.log' for more details." >&2;}
-   { (exit 1); exit 1; }; }
+rm -f conftest.i conftest.err conftest.$ac_ext
+if $ac_preproc_ok
+then :
+
+else $as_nop
+  { { printf "%s\n" "$as_me:${as_lineno-$LINENO}: error: in \`$ac_pwd':" >&5
+printf "%s\n" "$as_me: error: in \`$ac_pwd':" >&2;}
+as_fn_error $? "C preprocessor \"$CPP\" fails sanity check
+See \`config.log' for more details" "$LINENO" 5; }
 fi
 
 ac_ext=c
@@ -4205,45 +5394,46 @@ ac_link='$CC -o conftest$ac_exeext $CFLAGS $CPPFLAGS $LDFLAGS conftest.$ac_ext $
 ac_compiler_gnu=$ac_cv_c_compiler_gnu
 
 
-{ echo "$as_me:$LINENO: checking for grep that handles long lines and -e" >&5
-echo $ECHO_N "checking for grep that handles long lines and -e... $ECHO_C" >&6; }
-if test "${ac_cv_path_GREP+set}" = set; then
-  echo $ECHO_N "(cached) $ECHO_C" >&6
-else
-  # Extract the first word of "grep ggrep" to use in msg output
-if test -z "$GREP"; then
-set dummy grep ggrep; ac_prog_name=$2
-if test "${ac_cv_path_GREP+set}" = set; then
-  echo $ECHO_N "(cached) $ECHO_C" >&6
-else
+{ printf "%s\n" "$as_me:${as_lineno-$LINENO}: checking for grep that handles long lines and -e" >&5
+printf %s "checking for grep that handles long lines and -e... " >&6; }
+if test ${ac_cv_path_GREP+y}
+then :
+  printf %s "(cached) " >&6
+else $as_nop
+  if test -z "$GREP"; then
   ac_path_GREP_found=false
-# Loop through the user's path and test for each of PROGNAME-LIST
-as_save_IFS=$IFS; IFS=$PATH_SEPARATOR
+  # Loop through the user's path and test for each of PROGNAME-LIST
+  as_save_IFS=$IFS; IFS=$PATH_SEPARATOR
 for as_dir in $PATH$PATH_SEPARATOR/usr/xpg4/bin
 do
   IFS=$as_save_IFS
-  test -z "$as_dir" && as_dir=.
-  for ac_prog in grep ggrep; do
-  for ac_exec_ext in '' $ac_executable_extensions; do
-    ac_path_GREP="$as_dir/$ac_prog$ac_exec_ext"
-    { test -f "$ac_path_GREP" && $as_test_x "$ac_path_GREP"; } || continue
-    # Check for GNU ac_path_GREP and select it if it is found.
+  case $as_dir in #(((
+    '') as_dir=./ ;;
+    */) ;;
+    *) as_dir=$as_dir/ ;;
+  esac
+    for ac_prog in grep ggrep
+   do
+    for ac_exec_ext in '' $ac_executable_extensions; do
+      ac_path_GREP="$as_dir$ac_prog$ac_exec_ext"
+      as_fn_executable_p "$ac_path_GREP" || continue
+# Check for GNU ac_path_GREP and select it if it is found.
   # Check for GNU $ac_path_GREP
 case `"$ac_path_GREP" --version 2>&1` in
 *GNU*)
   ac_cv_path_GREP="$ac_path_GREP" ac_path_GREP_found=:;;
 *)
   ac_count=0
-  echo $ECHO_N "0123456789$ECHO_C" >"conftest.in"
+  printf %s 0123456789 >"conftest.in"
   while :
   do
     cat "conftest.in" "conftest.in" >"conftest.tmp"
     mv "conftest.tmp" "conftest.in"
     cp "conftest.in" "conftest.nl"
-    echo 'GREP' >> "conftest.nl"
+    printf "%s\n" 'GREP' >> "conftest.nl"
     "$ac_path_GREP" -e 'GREP$' -e '-(cannot match)-' < "conftest.nl" >"conftest.out" 2>/dev/null || break
     diff "conftest.out" "conftest.nl" >/dev/null 2>&1 || break
-    ac_count=`expr $ac_count + 1`
+    as_fn_arith $ac_count + 1 && ac_count=$as_val
     if test $ac_count -gt ${ac_path_GREP_max-0}; then
       # Best one so far, save it but keep looking for a better one
       ac_cv_path_GREP="$ac_path_GREP"
@@ -4255,77 +5445,67 @@ case `"$ac_path_GREP" --version 2>&1` in
   rm -f conftest.in conftest.tmp conftest.nl conftest.out;;
 esac
 
-
-    $ac_path_GREP_found && break 3
+      $ac_path_GREP_found && break 3
+    done
+  done
   done
-done
-
-done
 IFS=$as_save_IFS
-
-
-fi
-
-GREP="$ac_cv_path_GREP"
-if test -z "$GREP"; then
-  { { echo "$as_me:$LINENO: error: no acceptable $ac_prog_name could be found in $PATH$PATH_SEPARATOR/usr/xpg4/bin" >&5
-echo "$as_me: error: no acceptable $ac_prog_name could be found in $PATH$PATH_SEPARATOR/usr/xpg4/bin" >&2;}
-   { (exit 1); exit 1; }; }
-fi
-
+  if test -z "$ac_cv_path_GREP"; then
+    as_fn_error $? "no acceptable grep could be found in $PATH$PATH_SEPARATOR/usr/xpg4/bin" "$LINENO" 5
+  fi
 else
   ac_cv_path_GREP=$GREP
 fi
 
-
 fi
-{ echo "$as_me:$LINENO: result: $ac_cv_path_GREP" >&5
-echo "${ECHO_T}$ac_cv_path_GREP" >&6; }
+{ printf "%s\n" "$as_me:${as_lineno-$LINENO}: result: $ac_cv_path_GREP" >&5
+printf "%s\n" "$ac_cv_path_GREP" >&6; }
  GREP="$ac_cv_path_GREP"
 
 
-{ echo "$as_me:$LINENO: checking for egrep" >&5
-echo $ECHO_N "checking for egrep... $ECHO_C" >&6; }
-if test "${ac_cv_path_EGREP+set}" = set; then
-  echo $ECHO_N "(cached) $ECHO_C" >&6
-else
+{ printf "%s\n" "$as_me:${as_lineno-$LINENO}: checking for egrep" >&5
+printf %s "checking for egrep... " >&6; }
+if test ${ac_cv_path_EGREP+y}
+then :
+  printf %s "(cached) " >&6
+else $as_nop
   if echo a | $GREP -E '(a|b)' >/dev/null 2>&1
    then ac_cv_path_EGREP="$GREP -E"
    else
-     # Extract the first word of "egrep" to use in msg output
-if test -z "$EGREP"; then
-set dummy egrep; ac_prog_name=$2
-if test "${ac_cv_path_EGREP+set}" = set; then
-  echo $ECHO_N "(cached) $ECHO_C" >&6
-else
+     if test -z "$EGREP"; then
   ac_path_EGREP_found=false
-# Loop through the user's path and test for each of PROGNAME-LIST
-as_save_IFS=$IFS; IFS=$PATH_SEPARATOR
+  # Loop through the user's path and test for each of PROGNAME-LIST
+  as_save_IFS=$IFS; IFS=$PATH_SEPARATOR
 for as_dir in $PATH$PATH_SEPARATOR/usr/xpg4/bin
 do
   IFS=$as_save_IFS
-  test -z "$as_dir" && as_dir=.
-  for ac_prog in egrep; do
-  for ac_exec_ext in '' $ac_executable_extensions; do
-    ac_path_EGREP="$as_dir/$ac_prog$ac_exec_ext"
-    { test -f "$ac_path_EGREP" && $as_test_x "$ac_path_EGREP"; } || continue
-    # Check for GNU ac_path_EGREP and select it if it is found.
+  case $as_dir in #(((
+    '') as_dir=./ ;;
+    */) ;;
+    *) as_dir=$as_dir/ ;;
+  esac
+    for ac_prog in egrep
+   do
+    for ac_exec_ext in '' $ac_executable_extensions; do
+      ac_path_EGREP="$as_dir$ac_prog$ac_exec_ext"
+      as_fn_executable_p "$ac_path_EGREP" || continue
+# Check for GNU ac_path_EGREP and select it if it is found.
   # Check for GNU $ac_path_EGREP
 case `"$ac_path_EGREP" --version 2>&1` in
 *GNU*)
   ac_cv_path_EGREP="$ac_path_EGREP" ac_path_EGREP_found=:;;
 *)
   ac_count=0
-  echo $ECHO_N "0123456789$ECHO_C" >"conftest.in"
+  printf %s 0123456789 >"conftest.in"
   while :
   do
     cat "conftest.in" "conftest.in" >"conftest.tmp"
     mv "conftest.tmp" "conftest.in"
     cp "conftest.in" "conftest.nl"
-    echo 'EGREP' >> "conftest.nl"
+    printf "%s\n" 'EGREP' >> "conftest.nl"
     "$ac_path_EGREP" 'EGREP$' < "conftest.nl" >"conftest.out" 2>/dev/null || break
     diff "conftest.out" "conftest.nl" >/dev/null 2>&1 || break
-    ac_count=`expr $ac_count + 1`
+    as_fn_arith $ac_count + 1 && ac_count=$as_val
     if test $ac_count -gt ${ac_path_EGREP_max-0}; then
       # Best one so far, save it but keep looking for a better one
       ac_cv_path_EGREP="$ac_path_EGREP"
@@ -4337,33 +5517,22 @@ case `"$ac_path_EGREP" --version 2>&1` in
   rm -f conftest.in conftest.tmp conftest.nl conftest.out;;
 esac
 
-
-    $ac_path_EGREP_found && break 3
+      $ac_path_EGREP_found && break 3
+    done
+  done
   done
-done
-
-done
 IFS=$as_save_IFS
-
-
-fi
-
-EGREP="$ac_cv_path_EGREP"
-if test -z "$EGREP"; then
-  { { echo "$as_me:$LINENO: error: no acceptable $ac_prog_name could be found in $PATH$PATH_SEPARATOR/usr/xpg4/bin" >&5
-echo "$as_me: error: no acceptable $ac_prog_name could be found in $PATH$PATH_SEPARATOR/usr/xpg4/bin" >&2;}
-   { (exit 1); exit 1; }; }
-fi
-
+  if test -z "$ac_cv_path_EGREP"; then
+    as_fn_error $? "no acceptable egrep could be found in $PATH$PATH_SEPARATOR/usr/xpg4/bin" "$LINENO" 5
+  fi
 else
   ac_cv_path_EGREP=$EGREP
 fi
 
-
    fi
 fi
-{ echo "$as_me:$LINENO: result: $ac_cv_path_EGREP" >&5
-echo "${ECHO_T}$ac_cv_path_EGREP" >&6; }
+{ printf "%s\n" "$as_me:${as_lineno-$LINENO}: result: $ac_cv_path_EGREP" >&5
+printf "%s\n" "$ac_cv_path_EGREP" >&6; }
  EGREP="$ac_cv_path_EGREP"
 
 
@@ -4378,8 +5547,8 @@ ac_compile='$CC -c $CFLAGS $CPPFLAGS conftest.$ac_ext >&5'
 ac_link='$CC -o conftest$ac_exeext $CFLAGS $CPPFLAGS $LDFLAGS conftest.$ac_ext $LIBS >&5'
 ac_compiler_gnu=$ac_cv_c_compiler_gnu
 
-  echo "configure:4381:" CC is $CC >&5
-  echo "configure:4382:" CPP is $CPP >&5
+  echo "configure:5550:" CC is $CC >&5
+  echo "configure:5551:" CPP is $CPP >&5
 
   CC_ID=unknown
   CC_VERSION=unknown
@@ -4388,17 +5557,14 @@ ac_compiler_gnu=$ac_cv_c_compiler_gnu
 
   # Check if it is a Sun compiler.
   if test $CC_ID = unknown; then
-    echo "configure:4391:" checking if $CC is sunpro >&5
-    cat >conftest.$ac_ext <<_ACEOF
-/* confdefs.h.  */
-_ACEOF
-cat confdefs.h >>conftest.$ac_ext
-cat >>conftest.$ac_ext <<_ACEOF
+    echo "configure:5560:" checking if $CC is sunpro >&5
+    cat confdefs.h - <<_ACEOF >conftest.$ac_ext
 /* end confdefs.h.  */
 __SUNPRO_C
 _ACEOF
 if (eval "$ac_cpp conftest.$ac_ext") 2>&5 |
-  $EGREP "^ 0x[0-9]+" >/dev/null 2>&1; then
+  $EGREP "^ 0x[0-9]+" >/dev/null 2>&1
+then :
   CC_ID=sunpro
       # SUN compiler defines __SUNPRO_C to the version number.
       echo __SUNPRO_C > conftest.c
@@ -4406,19 +5572,15 @@ if (eval "$ac_cpp conftest.$ac_ext") 2>&5 |
       rm -f conftest.c
 
 fi
-rm -f conftest*
+rm -rf conftest*
 
   fi
 
 
   # Check if it is a Intel compiler.
   if test $CC_ID = unknown; then
-    echo "configure:4416:" checking if $CC is intel >&5
-    cat >conftest.$ac_ext <<_ACEOF
-/* confdefs.h.  */
-_ACEOF
-cat confdefs.h >>conftest.$ac_ext
-cat >>conftest.$ac_ext <<_ACEOF
+    echo "configure:5582:" checking if $CC is intel >&5
+    cat confdefs.h - <<_ACEOF >conftest.$ac_ext
 /* end confdefs.h.  */
 #ifdef __INTEL_COMPILER
 yes;
@@ -4426,7 +5588,8 @@ yes;
 
 _ACEOF
 if (eval "$ac_cpp conftest.$ac_ext") 2>&5 |
-  $EGREP "^yes" >/dev/null 2>&1; then
+  $EGREP "^yes" >/dev/null 2>&1
+then :
   CC_ID=intel
       # Intel compiler defines __INTEL_COMPILER to the version number.
       echo __INTEL_COMPILER > conftest.C
@@ -4434,19 +5597,15 @@ if (eval "$ac_cpp conftest.$ac_ext") 2>&5 |
       rm -f conftest.C
 
 fi
-rm -f conftest*
+rm -rf conftest*
 
   fi
 
 
   # Check if it is a GNU compiler.
   if test $CC_ID = unknown; then
-    echo "configure:4444:" checking if $CC is gnu >&5
-    cat >conftest.$ac_ext <<_ACEOF
-/* confdefs.h.  */
-_ACEOF
-cat confdefs.h >>conftest.$ac_ext
-cat >>conftest.$ac_ext <<_ACEOF
+    echo "configure:5607:" checking if $CC is gnu >&5
+    cat confdefs.h - <<_ACEOF >conftest.$ac_ext
 /* end confdefs.h.  */
 #ifdef __GNUC__
 yes;
@@ -4454,29 +5613,27 @@ yes;
 
 _ACEOF
 if (eval "$ac_cpp conftest.$ac_ext") 2>&5 |
-  $EGREP "^yes" >/dev/null 2>&1; then
+  $EGREP "^yes" >/dev/null 2>&1
+then :
   CC_ID=gnu
     CC_VERSION=`$CC --version | sed -e 's/[^0-9]\{0,\}\([^ ]\{1,\}\).\{0,\}/\1/' -e 1q`
 
 fi
-rm -f conftest*
+rm -rf conftest*
 
   fi
 
 
   # Check if it is a DEC compiler.
   if test $CC_ID = unknown; then
-    echo "configure:4469:" checking if $CC is dec >&5
-    cat >conftest.$ac_ext <<_ACEOF
-/* confdefs.h.  */
-_ACEOF
-cat confdefs.h >>conftest.$ac_ext
-cat >>conftest.$ac_ext <<_ACEOF
+    echo "configure:5629:" checking if $CC is dec >&5
+    cat confdefs.h - <<_ACEOF >conftest.$ac_ext
 /* end confdefs.h.  */
 __DECC
 _ACEOF
 if (eval "$ac_cpp conftest.$ac_ext") 2>&5 |
-  $EGREP "^ 1" >/dev/null 2>&1; then
+  $EGREP "^ 1" >/dev/null 2>&1
+then :
   CC_ID=dec
       # DEC compiler defines __DECC_VER to the version number.
       echo __DECC_VER > conftest.c
@@ -4484,24 +5641,21 @@ if (eval "$ac_cpp conftest.$ac_ext") 2>&5 |
       rm -f conftest.c
 
 fi
-rm -f conftest*
+rm -rf conftest*
 
   fi
 
 
   # Check if it is a KAI compiler.
   if test $CC_ID = unknown; then
-    echo "configure:4494:" checking if $CC is kai >&5
-    cat >conftest.$ac_ext <<_ACEOF
-/* confdefs.h.  */
-_ACEOF
-cat confdefs.h >>conftest.$ac_ext
-cat >>conftest.$ac_ext <<_ACEOF
+    echo "configure:5651:" checking if $CC is kai >&5
+    cat confdefs.h - <<_ACEOF >conftest.$ac_ext
 /* end confdefs.h.  */
 __KCC
 _ACEOF
 if (eval "$ac_cpp conftest.$ac_ext") 2>&5 |
-  $EGREP "^1" >/dev/null 2>&1; then
+  $EGREP "^1" >/dev/null 2>&1
+then :
   CC_ID=kai
       # KCC compiler defines __KCC_VERSION to the version number.
       echo __KCC_VERSION > conftest.c
@@ -4509,24 +5663,21 @@ if (eval "$ac_cpp conftest.$ac_ext") 2>&5 |
       rm -f conftest.c
 
 fi
-rm -f conftest*
+rm -rf conftest*
 
   fi
 
 
   # Check if it is a SGI compiler.
   if test $CC_ID = unknown; then
-    echo "configure:4519:" checking if $CC is sgi >&5
-    cat >conftest.$ac_ext <<_ACEOF
-/* confdefs.h.  */
-_ACEOF
-cat confdefs.h >>conftest.$ac_ext
-cat >>conftest.$ac_ext <<_ACEOF
+    echo "configure:5673:" checking if $CC is sgi >&5
+    cat confdefs.h - <<_ACEOF >conftest.$ac_ext
 /* end confdefs.h.  */
 __sgi
 _ACEOF
 if (eval "$ac_cpp conftest.$ac_ext") 2>&5 |
-  $EGREP "^1" >/dev/null 2>&1; then
+  $EGREP "^1" >/dev/null 2>&1
+then :
   CC_ID=sgi
       # SGI compiler defines _COMPILER_VERSION to the version number.
       echo _COMPILER_VERSION > conftest.c
@@ -4534,29 +5685,25 @@ if (eval "$ac_cpp conftest.$ac_ext") 2>&5 |
       rm -f conftest.c
 
 fi
-rm -f conftest*
+rm -rf conftest*
 
   fi
 
 
   # Check if it is a IBM compiler.
   if test $CC_ID = unknown; then
-    echo "configure:4544:" checking if $CC is xlc >&5
+    echo "configure:5695:" checking if $CC is xlc >&5
     if echo "$host_os" | grep "aix" >/dev/null ; then
       # The wretched IBM shell does not eval correctly,
       # so we have to help it with a pre-eval eval statement.
       ac_cpp=`eval "echo $ac_cpp"`
       save_ac_cpp=$ac_cpp
-      echo "configure:4550:" ac_cpp is temporarily set to $ac_cpp >&5
+      echo "configure:5701:" ac_cpp is temporarily set to $ac_cpp >&5
     else
       save_ac_cpp=
     fi
-    echo "configure:4554:" ac_cpp is $ac_cpp >&5
-    cat >conftest.$ac_ext <<_ACEOF
-/* confdefs.h.  */
-_ACEOF
-cat confdefs.h >>conftest.$ac_ext
-cat >>conftest.$ac_ext <<_ACEOF
+    echo "configure:5705:" ac_cpp is $ac_cpp >&5
+    cat confdefs.h - <<_ACEOF >conftest.$ac_ext
 /* end confdefs.h.  */
 #ifdef __xlC__
 yes;
@@ -4564,7 +5711,8 @@ yes;
 
 _ACEOF
 if (eval "$ac_cpp conftest.$ac_ext") 2>&5 |
-  $EGREP "^yes" >/dev/null 2>&1; then
+  $EGREP "^yes" >/dev/null 2>&1
+then :
   CC_ID=xlc
     # IBM compiler defines __xlC__ to the version number.
     echo __xlC__ > conftest.C
@@ -4572,10 +5720,10 @@ if (eval "$ac_cpp conftest.$ac_ext") 2>&5 |
     rm -f conftest.C
 
 fi
-rm -f conftest*
+rm -rf conftest*
 
     test "$save_ac_cpp" && ac_cpp=$save_ac_cpp
-    echo "configure:4578:" ac_cpp is restored to $ac_cpp >&5
+    echo "configure:5726:" ac_cpp is restored to $ac_cpp >&5
   fi
 
 
@@ -4595,7 +5743,7 @@ for btng_log_vars_index in $btng_log_vars ; do
   else
     btng_log_vars_value="unset";
   fi
-  echo "configure:4598:" "$btng_log_vars_index is $btng_log_vars_value" >&5;
+  echo "configure:5746:" "$btng_log_vars_index is $btng_log_vars_value" >&5;
 done
 
 
@@ -4607,107 +5755,59 @@ ac_cpp='$CXXCPP $CPPFLAGS'
 ac_compile='$CXX -c $CXXFLAGS $CPPFLAGS conftest.$ac_ext >&5'
 ac_link='$CXX -o conftest$ac_exeext $CXXFLAGS $CPPFLAGS $LDFLAGS conftest.$ac_ext $LIBS >&5'
 ac_compiler_gnu=$ac_cv_cxx_compiler_gnu
-{ echo "$as_me:$LINENO: checking how to run the C++ preprocessor" >&5
-echo $ECHO_N "checking how to run the C++ preprocessor... $ECHO_C" >&6; }
+{ printf "%s\n" "$as_me:${as_lineno-$LINENO}: checking how to run the C++ preprocessor" >&5
+printf %s "checking how to run the C++ preprocessor... " >&6; }
 if test -z "$CXXCPP"; then
-  if test "${ac_cv_prog_CXXCPP+set}" = set; then
-  echo $ECHO_N "(cached) $ECHO_C" >&6
-else
-      # Double quotes because CXXCPP needs to be expanded
-    for CXXCPP in "$CXX -E" "/lib/cpp"
+  if test ${ac_cv_prog_CXXCPP+y}
+then :
+  printf %s "(cached) " >&6
+else $as_nop
+      # Double quotes because $CXX needs to be expanded
+    for CXXCPP in "$CXX -E" cpp /lib/cpp
     do
       ac_preproc_ok=false
 for ac_cxx_preproc_warn_flag in '' yes
 do
   # Use a header file that comes with gcc, so configuring glibc
   # with a fresh cross-compiler works.
-  # Prefer <limits.h> to <assert.h> if __STDC__ is defined, since
-  # <limits.h> exists even on freestanding compilers.
   # On the NeXT, cc -E runs the code through the compiler's parser,
   # not just through cpp. "Syntax error" is here to catch this case.
-  cat >conftest.$ac_ext <<_ACEOF
-/* confdefs.h.  */
-_ACEOF
-cat confdefs.h >>conftest.$ac_ext
-cat >>conftest.$ac_ext <<_ACEOF
+  cat confdefs.h - <<_ACEOF >conftest.$ac_ext
 /* end confdefs.h.  */
-#ifdef __STDC__
-# include <limits.h>
-#else
-# include <assert.h>
-#endif
+#include <limits.h>
 		     Syntax error
 _ACEOF
-if { (ac_try="$ac_cpp conftest.$ac_ext"
-case "(($ac_try" in
-  *\"* | *\`* | *\\*) ac_try_echo=\$ac_try;;
-  *) ac_try_echo=$ac_try;;
-esac
-eval "echo \"\$as_me:$LINENO: $ac_try_echo\"") >&5
-  (eval "$ac_cpp conftest.$ac_ext") 2>conftest.er1
-  ac_status=$?
-  grep -v '^ *+' conftest.er1 >conftest.err
-  rm -f conftest.er1
-  cat conftest.err >&5
-  echo "$as_me:$LINENO: \$? = $ac_status" >&5
-  (exit $ac_status); } >/dev/null && {
-	 test -z "$ac_cxx_preproc_warn_flag$ac_cxx_werror_flag" ||
-	 test ! -s conftest.err
-       }; then
-  :
-else
-  echo "$as_me: failed program was:" >&5
-sed 's/^/| /' conftest.$ac_ext >&5
+if ac_fn_cxx_try_cpp "$LINENO"
+then :
 
+else $as_nop
   # Broken: fails on valid input.
 continue
 fi
-
-rm -f conftest.err conftest.$ac_ext
+rm -f conftest.err conftest.i conftest.$ac_ext
 
   # OK, works on sane cases.  Now check whether nonexistent headers
   # can be detected and how.
-  cat >conftest.$ac_ext <<_ACEOF
-/* confdefs.h.  */
-_ACEOF
-cat confdefs.h >>conftest.$ac_ext
-cat >>conftest.$ac_ext <<_ACEOF
+  cat confdefs.h - <<_ACEOF >conftest.$ac_ext
 /* end confdefs.h.  */
 #include <ac_nonexistent.h>
 _ACEOF
-if { (ac_try="$ac_cpp conftest.$ac_ext"
-case "(($ac_try" in
-  *\"* | *\`* | *\\*) ac_try_echo=\$ac_try;;
-  *) ac_try_echo=$ac_try;;
-esac
-eval "echo \"\$as_me:$LINENO: $ac_try_echo\"") >&5
-  (eval "$ac_cpp conftest.$ac_ext") 2>conftest.er1
-  ac_status=$?
-  grep -v '^ *+' conftest.er1 >conftest.err
-  rm -f conftest.er1
-  cat conftest.err >&5
-  echo "$as_me:$LINENO: \$? = $ac_status" >&5
-  (exit $ac_status); } >/dev/null && {
-	 test -z "$ac_cxx_preproc_warn_flag$ac_cxx_werror_flag" ||
-	 test ! -s conftest.err
-       }; then
+if ac_fn_cxx_try_cpp "$LINENO"
+then :
   # Broken: success on invalid input.
 continue
-else
-  echo "$as_me: failed program was:" >&5
-sed 's/^/| /' conftest.$ac_ext >&5
-
+else $as_nop
   # Passes both tests.
 ac_preproc_ok=:
 break
 fi
-
-rm -f conftest.err conftest.$ac_ext
+rm -f conftest.err conftest.i conftest.$ac_ext
 
 done
 # Because of `break', _AC_PREPROC_IFELSE's cleaning code was skipped.
-rm -f conftest.err conftest.$ac_ext
-if $ac_preproc_ok; then
+rm -f conftest.i conftest.err conftest.$ac_ext
+if $ac_preproc_ok
+then :
   break
 fi
 
@@ -4719,107 +5819,57 @@ fi
 else
   ac_cv_prog_CXXCPP=$CXXCPP
 fi
-{ echo "$as_me:$LINENO: result: $CXXCPP" >&5
-echo "${ECHO_T}$CXXCPP" >&6; }
+{ printf "%s\n" "$as_me:${as_lineno-$LINENO}: result: $CXXCPP" >&5
+printf "%s\n" "$CXXCPP" >&6; }
 ac_preproc_ok=false
 for ac_cxx_preproc_warn_flag in '' yes
 do
   # Use a header file that comes with gcc, so configuring glibc
   # with a fresh cross-compiler works.
-  # Prefer <limits.h> to <assert.h> if __STDC__ is defined, since
-  # <limits.h> exists even on freestanding compilers.
   # On the NeXT, cc -E runs the code through the compiler's parser,
   # not just through cpp. "Syntax error" is here to catch this case.
-  cat >conftest.$ac_ext <<_ACEOF
-/* confdefs.h.  */
-_ACEOF
-cat confdefs.h >>conftest.$ac_ext
-cat >>conftest.$ac_ext <<_ACEOF
+  cat confdefs.h - <<_ACEOF >conftest.$ac_ext
 /* end confdefs.h.  */
-#ifdef __STDC__
-# include <limits.h>
-#else
-# include <assert.h>
-#endif
+#include <limits.h>
 		     Syntax error
 _ACEOF
-if { (ac_try="$ac_cpp conftest.$ac_ext"
-case "(($ac_try" in
-  *\"* | *\`* | *\\*) ac_try_echo=\$ac_try;;
-  *) ac_try_echo=$ac_try;;
-esac
-eval "echo \"\$as_me:$LINENO: $ac_try_echo\"") >&5
-  (eval "$ac_cpp conftest.$ac_ext") 2>conftest.er1
-  ac_status=$?
-  grep -v '^ *+' conftest.er1 >conftest.err
-  rm -f conftest.er1
-  cat conftest.err >&5
-  echo "$as_me:$LINENO: \$? = $ac_status" >&5
-  (exit $ac_status); } >/dev/null && {
-	 test -z "$ac_cxx_preproc_warn_flag$ac_cxx_werror_flag" ||
-	 test ! -s conftest.err
-       }; then
-  :
-else
-  echo "$as_me: failed program was:" >&5
-sed 's/^/| /' conftest.$ac_ext >&5
+if ac_fn_cxx_try_cpp "$LINENO"
+then :
 
+else $as_nop
   # Broken: fails on valid input.
 continue
 fi
-
-rm -f conftest.err conftest.$ac_ext
+rm -f conftest.err conftest.i conftest.$ac_ext
 
   # OK, works on sane cases.  Now check whether nonexistent headers
   # can be detected and how.
-  cat >conftest.$ac_ext <<_ACEOF
-/* confdefs.h.  */
-_ACEOF
-cat confdefs.h >>conftest.$ac_ext
-cat >>conftest.$ac_ext <<_ACEOF
+  cat confdefs.h - <<_ACEOF >conftest.$ac_ext
 /* end confdefs.h.  */
 #include <ac_nonexistent.h>
 _ACEOF
-if { (ac_try="$ac_cpp conftest.$ac_ext"
-case "(($ac_try" in
-  *\"* | *\`* | *\\*) ac_try_echo=\$ac_try;;
-  *) ac_try_echo=$ac_try;;
-esac
-eval "echo \"\$as_me:$LINENO: $ac_try_echo\"") >&5
-  (eval "$ac_cpp conftest.$ac_ext") 2>conftest.er1
-  ac_status=$?
-  grep -v '^ *+' conftest.er1 >conftest.err
-  rm -f conftest.er1
-  cat conftest.err >&5
-  echo "$as_me:$LINENO: \$? = $ac_status" >&5
-  (exit $ac_status); } >/dev/null && {
-	 test -z "$ac_cxx_preproc_warn_flag$ac_cxx_werror_flag" ||
-	 test ! -s conftest.err
-       }; then
+if ac_fn_cxx_try_cpp "$LINENO"
+then :
   # Broken: success on invalid input.
 continue
-else
-  echo "$as_me: failed program was:" >&5
-sed 's/^/| /' conftest.$ac_ext >&5
-
+else $as_nop
   # Passes both tests.
 ac_preproc_ok=:
 break
 fi
-
-rm -f conftest.err conftest.$ac_ext
+rm -f conftest.err conftest.i conftest.$ac_ext
 
 done
 # Because of `break', _AC_PREPROC_IFELSE's cleaning code was skipped.
-rm -f conftest.err conftest.$ac_ext
-if $ac_preproc_ok; then
-  :
-else
-  { { echo "$as_me:$LINENO: error: C++ preprocessor \"$CXXCPP\" fails sanity check
-See \`config.log' for more details." >&5
-echo "$as_me: error: C++ preprocessor \"$CXXCPP\" fails sanity check
-See \`config.log' for more details." >&2;}
-   { (exit 1); exit 1; }; }
+rm -f conftest.i conftest.err conftest.$ac_ext
+if $ac_preproc_ok
+then :
+
+else $as_nop
+  { { printf "%s\n" "$as_me:${as_lineno-$LINENO}: error: in \`$ac_pwd':" >&5
+printf "%s\n" "$as_me: error: in \`$ac_pwd':" >&2;}
+as_fn_error $? "C++ preprocessor \"$CXXCPP\" fails sanity check
+See \`config.log' for more details" "$LINENO" 5; }
 fi
 
 ac_ext=c
@@ -4841,8 +5891,8 @@ ac_compile='$CXX -c $CXXFLAGS $CPPFLAGS conftest.$ac_ext >&5'
 ac_link='$CXX -o conftest$ac_exeext $CXXFLAGS $CPPFLAGS $LDFLAGS conftest.$ac_ext $LIBS >&5'
 ac_compiler_gnu=$ac_cv_cxx_compiler_gnu
 
-  echo "configure:4844:" CXXP is $CXX >&5
-  echo "configure:4845:" CXXCPP is $CXXCPP >&5
+  echo "configure:5894:" CXXP is $CXX >&5
+  echo "configure:5895:" CXXCPP is $CXXCPP >&5
 
   CXX_ID=unknown
   CXX_VERSION=unknown
@@ -4851,17 +5901,14 @@ ac_compiler_gnu=$ac_cv_cxx_compiler_gnu
 
   # Check if it is a Sun compiler.
   if test $CXX_ID = unknown; then
-    echo "configure:4854:" checking if $CXX is sunpro >&5
-    cat >conftest.$ac_ext <<_ACEOF
-/* confdefs.h.  */
-_ACEOF
-cat confdefs.h >>conftest.$ac_ext
-cat >>conftest.$ac_ext <<_ACEOF
+    echo "configure:5904:" checking if $CXX is sunpro >&5
+    cat confdefs.h - <<_ACEOF >conftest.$ac_ext
 /* end confdefs.h.  */
 __SUNPRO_CC
 _ACEOF
 if (eval "$ac_cpp conftest.$ac_ext") 2>&5 |
-  $EGREP "^0x[0-9]+" >/dev/null 2>&1; then
+  $EGREP "^0x[0-9]+" >/dev/null 2>&1
+then :
   CXX_ID=sunpro
       # SUN compiler defines __SUNPRO_CC to the version number.
       echo __SUNPRO_CC > conftest.C
@@ -4869,19 +5916,15 @@ if (eval "$ac_cpp conftest.$ac_ext") 2>&5 |
       rm -f conftest.C
 
 fi
-rm -f conftest*
+rm -rf conftest*
 
   fi
 
 
   # Check if it is a Intel compiler.
   if test $CXX_ID = unknown; then
-    echo "configure:4879:" checking if $CXX is intel >&5
-    cat >conftest.$ac_ext <<_ACEOF
-/* confdefs.h.  */
-_ACEOF
-cat confdefs.h >>conftest.$ac_ext
-cat >>conftest.$ac_ext <<_ACEOF
+    echo "configure:5926:" checking if $CXX is intel >&5
+    cat confdefs.h - <<_ACEOF >conftest.$ac_ext
 /* end confdefs.h.  */
 #ifdef __INTEL_COMPILER
 yes;
@@ -4889,7 +5932,8 @@ yes;
 
 _ACEOF
 if (eval "$ac_cpp conftest.$ac_ext") 2>&5 |
-  $EGREP "^yes" >/dev/null 2>&1; then
+  $EGREP "^yes" >/dev/null 2>&1
+then :
   CXX_ID=intel
       # Intel compiler defines __INTEL_COMPILER to the version number.
       echo __INTEL_COMPILER > conftest.C
@@ -4897,19 +5941,15 @@ if (eval "$ac_cpp conftest.$ac_ext") 2>&5 |
       rm -f conftest.C
 
 fi
-rm -f conftest*
+rm -rf conftest*
 
   fi
 
 
   # Check if it is a GNU compiler.
   if test $CXX_ID = unknown; then
-    echo "configure:4907:" checking if $CXX is gnu >&5
-    cat >conftest.$ac_ext <<_ACEOF
-/* confdefs.h.  */
-_ACEOF
-cat confdefs.h >>conftest.$ac_ext
-cat >>conftest.$ac_ext <<_ACEOF
+    echo "configure:5951:" checking if $CXX is gnu >&5
+    cat confdefs.h - <<_ACEOF >conftest.$ac_ext
 /* end confdefs.h.  */
 #ifdef __GNUC__
 yes;
@@ -4917,7 +5957,8 @@ yes;
 
 _ACEOF
 if (eval "$ac_cpp conftest.$ac_ext") 2>&5 |
-  $EGREP "^yes" >/dev/null 2>&1; then
+  $EGREP "^yes" >/dev/null 2>&1
+then :
   CXX_ID=gnu
     # GNU compilers output version number with option --version.
     # Alternatively, it also defines the macros __GNUC__,
@@ -4925,24 +5966,21 @@ if (eval "$ac_cpp conftest.$ac_ext") 2>&5 |
     CXX_VERSION=`$CXX --version | sed -e 's/[^0-9]\{0,\}\([^ ]\{1,\}\).\{0,\}/\1/' -e 1q`
 
 fi
-rm -f conftest*
+rm -rf conftest*
 
   fi
 
 
   # Check if it is a DEC compiler.
   if test $CXX_ID = unknown; then
-    echo "configure:4935:" checking if $CXX is dec >&5
-    cat >conftest.$ac_ext <<_ACEOF
-/* confdefs.h.  */
-_ACEOF
-cat confdefs.h >>conftest.$ac_ext
-cat >>conftest.$ac_ext <<_ACEOF
+    echo "configure:5976:" checking if $CXX is dec >&5
+    cat confdefs.h - <<_ACEOF >conftest.$ac_ext
 /* end confdefs.h.  */
 __DECCXX
 _ACEOF
 if (eval "$ac_cpp conftest.$ac_ext") 2>&5 |
-  $EGREP "^1" >/dev/null 2>&1; then
+  $EGREP "^1" >/dev/null 2>&1
+then :
   CXX_ID=dec
       # DEC compiler defines __DECCXX_VER to the version number.
       echo __DECCXX_VER > conftest.C
@@ -4950,24 +5988,21 @@ if (eval "$ac_cpp conftest.$ac_ext") 2>&5 |
       rm -f conftest.C
 
 fi
-rm -f conftest*
+rm -rf conftest*
 
   fi
 
 
   # Check if it is a KAI compiler.
   if test $CXX_ID = unknown; then
-    echo "configure:4960:" checking if $CXX is kai >&5
-    cat >conftest.$ac_ext <<_ACEOF
-/* confdefs.h.  */
-_ACEOF
-cat confdefs.h >>conftest.$ac_ext
-cat >>conftest.$ac_ext <<_ACEOF
+    echo "configure:5998:" checking if $CXX is kai >&5
+    cat confdefs.h - <<_ACEOF >conftest.$ac_ext
 /* end confdefs.h.  */
 __KCC
 _ACEOF
 if (eval "$ac_cpp conftest.$ac_ext") 2>&5 |
-  $EGREP "^1" >/dev/null 2>&1; then
+  $EGREP "^1" >/dev/null 2>&1
+then :
   CXX_ID=kai
       # KCC compiler defines __KCC_VERSION to the version number.
       echo __KCC_VERSION > conftest.C
@@ -4975,24 +6010,21 @@ if (eval "$ac_cpp conftest.$ac_ext") 2>&5 |
       rm -f conftest.C
 
 fi
-rm -f conftest*
+rm -rf conftest*
 
   fi
 
 
   # Check if it is a SGI compiler.
   if test $CXX_ID = unknown; then
-    echo "configure:4985:" checking if $CXX is sgi >&5
-    cat >conftest.$ac_ext <<_ACEOF
-/* confdefs.h.  */
-_ACEOF
-cat confdefs.h >>conftest.$ac_ext
-cat >>conftest.$ac_ext <<_ACEOF
+    echo "configure:6020:" checking if $CXX is sgi >&5
+    cat confdefs.h - <<_ACEOF >conftest.$ac_ext
 /* end confdefs.h.  */
 __sgi
 _ACEOF
 if (eval "$ac_cpp conftest.$ac_ext") 2>&5 |
-  $EGREP "^1" >/dev/null 2>&1; then
+  $EGREP "^1" >/dev/null 2>&1
+then :
   CXX_ID=sgi
       # SGI compiler defines _COMPILER_VERSION to the version number.
       echo _COMPILER_VERSION > conftest.C
@@ -5000,19 +6032,15 @@ if (eval "$ac_cpp conftest.$ac_ext") 2>&5 |
       rm -f conftest.C
 
 fi
-rm -f conftest*
+rm -rf conftest*
 
   fi
 
 
   # Check if it is a IBM compiler.
   if test $CXX_ID = unknown; then
-    echo "configure:5010:" checking if $CXX is xlc >&5
-    cat >conftest.$ac_ext <<_ACEOF
-/* confdefs.h.  */
-_ACEOF
-cat confdefs.h >>conftest.$ac_ext
-cat >>conftest.$ac_ext <<_ACEOF
+    echo "configure:6042:" checking if $CXX is xlc >&5
+    cat confdefs.h - <<_ACEOF >conftest.$ac_ext
 /* end confdefs.h.  */
 #ifdef __xlC__
 yes;
@@ -5020,7 +6048,8 @@ yes;
 
 _ACEOF
 if (eval "$ac_cpp conftest.$ac_ext") 2>&5 |
-  $EGREP "^yes" >/dev/null 2>&1; then
+  $EGREP "^yes" >/dev/null 2>&1
+then :
   CXX_ID=xlc
     # IBM compiler defines __xlC__ to the version number.
     echo __xlC__ > conftest.C
@@ -5028,7 +6057,7 @@ if (eval "$ac_cpp conftest.$ac_ext") 2>&5 |
     rm -f conftest.C
 
 fi
-rm -f conftest*
+rm -rf conftest*
 
   fi
 
@@ -5049,7 +6078,7 @@ for btng_log_vars_index in $btng_log_vars ; do
   else
     btng_log_vars_value="unset";
   fi
-  echo "configure:5052:" "$btng_log_vars_index is $btng_log_vars_value" >&5;
+  echo "configure:6081:" "$btng_log_vars_index is $btng_log_vars_value" >&5;
 done
 
 
@@ -5064,11 +6093,11 @@ done
 case $CXX_ID in
 gnu|xlc|intel) ;;
 *)
-  { echo "$as_me:$LINENO: WARNING:
+  { printf "%s\n" "$as_me:${as_lineno-$LINENO}: WARNING:
 You are using a C++ compiler unsupported by SAMRAI
 You are on your own!
 " >&5
-echo "$as_me: WARNING:
+printf "%s\n" "$as_me: WARNING:
 You are using a C++ compiler unsupported by SAMRAI
 You are on your own!
 " >&2;}
@@ -5080,7 +6109,7 @@ for i in "$CXX" "$CC" ; do
   baseprog=`echo $i | awk '{print $1}'`
   prog=`which $baseprog`
   if echo "$prog" | grep -v '^/usr/bin/' > /dev/null; then
-    { echo "$as_me:$LINENO: NOTIFICATION:
+    { printf "%s\n" "$as_me:${as_lineno-$LINENO}: NOTIFICATION:
 
 The compiler $i has an unusual path.
 This may cause link problems if you don't also have the associated
@@ -5089,7 +6118,7 @@ that path in your LD_LIBRARY_PATH, the compiler checks may not run
 properly.  In that case, you may want to stop this process now, set
 your LD_LIBRARY_PATH appropriately and run it.
 " >&5
-echo "$as_me: NOTIFICATION:
+printf "%s\n" "$as_me: NOTIFICATION:
 
 The compiler $i has an unusual path.
 This may cause link problems if you don't also have the associated
@@ -5104,12 +6133,13 @@ done
 
 
 
-   { echo "$as_me:$LINENO: checking whether ${CXX} supports namespace" >&5
-echo $ECHO_N "checking whether ${CXX} supports namespace... $ECHO_C" >&6; }
+   { printf "%s\n" "$as_me:${as_lineno-$LINENO}: checking whether ${CXX} supports namespace" >&5
+printf %s "checking whether ${CXX} supports namespace... " >&6; }
 
-   if test "${casc_cv_cxx_have_namespace+set}" = set; then
-  echo $ECHO_N "(cached) $ECHO_C" >&6
-else
+   if test ${casc_cv_cxx_have_namespace+y}
+then :
+  printf %s "(cached) " >&6
+else $as_nop
 
 
       ac_ext=cpp
@@ -5118,11 +6148,7 @@ ac_compile='$CXX -c $CXXFLAGS $CPPFLAGS conftest.$ac_ext >&5'
 ac_link='$CXX -o conftest$ac_exeext $CXXFLAGS $CPPFLAGS $LDFLAGS conftest.$ac_ext $LIBS >&5'
 ac_compiler_gnu=$ac_cv_cxx_compiler_gnu
 
-      cat >conftest.$ac_ext <<_ACEOF
-/* confdefs.h.  */
-_ACEOF
-cat confdefs.h >>conftest.$ac_ext
-cat >>conftest.$ac_ext <<_ACEOF
+      cat confdefs.h - <<_ACEOF >conftest.$ac_ext
 /* end confdefs.h.  */
 
 namespace test {
@@ -5133,41 +6159,21 @@ using namespace test;
 int foo() { int x = t(); x++; return x; }
 
 int
-main ()
+main (void)
 {
 /* empty */
   ;
   return 0;
 }
 _ACEOF
-rm -f conftest.$ac_objext conftest$ac_exeext
-if { (ac_try="$ac_link"
-case "(($ac_try" in
-  *\"* | *\`* | *\\*) ac_try_echo=\$ac_try;;
-  *) ac_try_echo=$ac_try;;
-esac
-eval "echo \"\$as_me:$LINENO: $ac_try_echo\"") >&5
-  (eval "$ac_link") 2>conftest.er1
-  ac_status=$?
-  grep -v '^ *+' conftest.er1 >conftest.err
-  rm -f conftest.er1
-  cat conftest.err >&5
-  echo "$as_me:$LINENO: \$? = $ac_status" >&5
-  (exit $ac_status); } && {
-	 test -z "$ac_cxx_werror_flag" ||
-	 test ! -s conftest.err
-       } && test -s conftest$ac_exeext &&
-       $as_test_x conftest$ac_exeext; then
+if ac_fn_cxx_try_link "$LINENO"
+then :
   casc_cv_cxx_have_namespace=yes
-else
-  echo "$as_me: failed program was:" >&5
-sed 's/^/| /' conftest.$ac_ext >&5
-
-	casc_cv_cxx_have_namespace=no
+else $as_nop
+  casc_cv_cxx_have_namespace=no
 fi
-
-rm -f core conftest.err conftest.$ac_objext conftest_ipa8_conftest.oo \
-      conftest$ac_exeext conftest.$ac_ext
+rm -f core conftest.err conftest.$ac_objext conftest.beam \
+    conftest$ac_exeext conftest.$ac_ext
       ac_ext=c
 ac_cpp='$CPP $CPPFLAGS'
 ac_compile='$CC -c $CFLAGS $CPPFLAGS conftest.$ac_ext >&5'
@@ -5177,31 +6183,28 @@ ac_compiler_gnu=$ac_cv_c_compiler_gnu
 
 fi
 
-   { echo "$as_me:$LINENO: result: $casc_cv_cxx_have_namespace" >&5
-echo "${ECHO_T}$casc_cv_cxx_have_namespace" >&6; }
+   { printf "%s\n" "$as_me:${as_lineno-$LINENO}: result: $casc_cv_cxx_have_namespace" >&5
+printf "%s\n" "$casc_cv_cxx_have_namespace" >&6; }
 
    if test "$casc_cv_cxx_have_namespace" = yes; then
 
-cat >>confdefs.h <<\_ACEOF
-#define HAVE_NAMESPACE 1
-_ACEOF
+printf "%s\n" "#define HAVE_NAMESPACE 1" >>confdefs.h
 
    else
 
-cat >>confdefs.h <<\_ACEOF
-#define LACKS_NAMESPACE 1
-_ACEOF
+printf "%s\n" "#define LACKS_NAMESPACE 1" >>confdefs.h
 
    fi
 
 
 
-   { echo "$as_me:$LINENO: checking whether ${CXX} supports template-based complex numbers" >&5
-echo $ECHO_N "checking whether ${CXX} supports template-based complex numbers... $ECHO_C" >&6; }
+   { printf "%s\n" "$as_me:${as_lineno-$LINENO}: checking whether ${CXX} supports template-based complex numbers" >&5
+printf %s "checking whether ${CXX} supports template-based complex numbers... " >&6; }
 
-   if test "${casc_cv_cxx_have_template_complex+set}" = set; then
-  echo $ECHO_N "(cached) $ECHO_C" >&6
-else
+   if test ${casc_cv_cxx_have_template_complex+y}
+then :
+  printf %s "(cached) " >&6
+else $as_nop
 
 
       ac_ext=cpp
@@ -5210,11 +6213,7 @@ ac_compile='$CXX -c $CXXFLAGS $CPPFLAGS conftest.$ac_ext >&5'
 ac_link='$CXX -o conftest$ac_exeext $CXXFLAGS $CPPFLAGS $LDFLAGS conftest.$ac_ext $LIBS >&5'
 ac_compiler_gnu=$ac_cv_cxx_compiler_gnu
 
-      cat >conftest.$ac_ext <<_ACEOF
-/* confdefs.h.  */
-_ACEOF
-cat confdefs.h >>conftest.$ac_ext
-cat >>conftest.$ac_ext <<_ACEOF
+      cat confdefs.h - <<_ACEOF >conftest.$ac_ext
 /* end confdefs.h.  */
 
 #include <complex.h>
@@ -5223,39 +6222,20 @@ void foo() {
 }
 
 int
-main ()
+main (void)
 {
 /* empty */
   ;
   return 0;
 }
 _ACEOF
-rm -f conftest.$ac_objext
-if { (ac_try="$ac_compile"
-case "(($ac_try" in
-  *\"* | *\`* | *\\*) ac_try_echo=\$ac_try;;
-  *) ac_try_echo=$ac_try;;
-esac
-eval "echo \"\$as_me:$LINENO: $ac_try_echo\"") >&5
-  (eval "$ac_compile") 2>conftest.er1
-  ac_status=$?
-  grep -v '^ *+' conftest.er1 >conftest.err
-  rm -f conftest.er1
-  cat conftest.err >&5
-  echo "$as_me:$LINENO: \$? = $ac_status" >&5
-  (exit $ac_status); } && {
-	 test -z "$ac_cxx_werror_flag" ||
-	 test ! -s conftest.err
-       } && test -s conftest.$ac_objext; then
+if ac_fn_cxx_try_compile "$LINENO"
+then :
   casc_cv_cxx_have_template_complex=yes
-else
-  echo "$as_me: failed program was:" >&5
-sed 's/^/| /' conftest.$ac_ext >&5
-
-	casc_cv_cxx_have_template_complex=no
+else $as_nop
+  casc_cv_cxx_have_template_complex=no
 fi
-
-rm -f core conftest.err conftest.$ac_objext conftest.$ac_ext
+rm -f core conftest.err conftest.$ac_objext conftest.beam conftest.$ac_ext
       ac_ext=c
 ac_cpp='$CPP $CPPFLAGS'
 ac_compile='$CC -c $CFLAGS $CPPFLAGS conftest.$ac_ext >&5'
@@ -5266,21 +6246,20 @@ ac_compiler_gnu=$ac_cv_c_compiler_gnu
 fi
 
 
-   { echo "$as_me:$LINENO: result: $casc_cv_cxx_have_template_complex" >&5
-echo "${ECHO_T}$casc_cv_cxx_have_template_complex" >&6; }
+   { printf "%s\n" "$as_me:${as_lineno-$LINENO}: result: $casc_cv_cxx_have_template_complex" >&5
+printf "%s\n" "$casc_cv_cxx_have_template_complex" >&6; }
 
    if test "$casc_cv_cxx_have_template_complex" = yes; then
 
-cat >>confdefs.h <<\_ACEOF
-#define HAVE_TEMPLATE_COMPLEX 1
-_ACEOF
+printf "%s\n" "#define HAVE_TEMPLATE_COMPLEX 1" >>confdefs.h
 
    else
-      { echo "$as_me:$LINENO: checking whether ${CXX} supports ISO template-based complex numbers" >&5
-echo $ECHO_N "checking whether ${CXX} supports ISO template-based complex numbers... $ECHO_C" >&6; }
-      if test "${casc_cv_cxx_have_template_complex_std+set}" = set; then
-  echo $ECHO_N "(cached) $ECHO_C" >&6
-else
+      { printf "%s\n" "$as_me:${as_lineno-$LINENO}: checking whether ${CXX} supports ISO template-based complex numbers" >&5
+printf %s "checking whether ${CXX} supports ISO template-based complex numbers... " >&6; }
+      if test ${casc_cv_cxx_have_template_complex_std+y}
+then :
+  printf %s "(cached) " >&6
+else $as_nop
 
 
          ac_ext=cpp
@@ -5289,11 +6268,7 @@ ac_compile='$CXX -c $CXXFLAGS $CPPFLAGS conftest.$ac_ext >&5'
 ac_link='$CXX -o conftest$ac_exeext $CXXFLAGS $CPPFLAGS $LDFLAGS conftest.$ac_ext $LIBS >&5'
 ac_compiler_gnu=$ac_cv_cxx_compiler_gnu
 
-         cat >conftest.$ac_ext <<_ACEOF
-/* confdefs.h.  */
-_ACEOF
-cat confdefs.h >>conftest.$ac_ext
-cat >>conftest.$ac_ext <<_ACEOF
+         cat confdefs.h - <<_ACEOF >conftest.$ac_ext
 /* end confdefs.h.  */
 
 #include <complex>
@@ -5302,39 +6277,20 @@ void foo() {
 }
 
 int
-main ()
+main (void)
 {
 /* empty */
   ;
   return 0;
 }
 _ACEOF
-rm -f conftest.$ac_objext
-if { (ac_try="$ac_compile"
-case "(($ac_try" in
-  *\"* | *\`* | *\\*) ac_try_echo=\$ac_try;;
-  *) ac_try_echo=$ac_try;;
-esac
-eval "echo \"\$as_me:$LINENO: $ac_try_echo\"") >&5
-  (eval "$ac_compile") 2>conftest.er1
-  ac_status=$?
-  grep -v '^ *+' conftest.er1 >conftest.err
-  rm -f conftest.er1
-  cat conftest.err >&5
-  echo "$as_me:$LINENO: \$? = $ac_status" >&5
-  (exit $ac_status); } && {
-	 test -z "$ac_cxx_werror_flag" ||
-	 test ! -s conftest.err
-       } && test -s conftest.$ac_objext; then
+if ac_fn_cxx_try_compile "$LINENO"
+then :
   casc_cv_cxx_have_template_complex_std=yes
-else
-  echo "$as_me: failed program was:" >&5
-sed 's/^/| /' conftest.$ac_ext >&5
-
-	casc_cv_cxx_have_template_complex_std=no
+else $as_nop
+  casc_cv_cxx_have_template_complex_std=no
 fi
-
-rm -f core conftest.err conftest.$ac_objext conftest.$ac_ext
+rm -f core conftest.err conftest.$ac_objext conftest.beam conftest.$ac_ext
          ac_ext=c
 ac_cpp='$CPP $CPPFLAGS'
 ac_compile='$CC -c $CFLAGS $CPPFLAGS conftest.$ac_ext >&5'
@@ -5345,32 +6301,29 @@ ac_compiler_gnu=$ac_cv_c_compiler_gnu
 fi
 
 
-      { echo "$as_me:$LINENO: result: $casc_cv_cxx_have_template_complex_std" >&5
-echo "${ECHO_T}$casc_cv_cxx_have_template_complex_std" >&6; }
+      { printf "%s\n" "$as_me:${as_lineno-$LINENO}: result: $casc_cv_cxx_have_template_complex_std" >&5
+printf "%s\n" "$casc_cv_cxx_have_template_complex_std" >&6; }
 
       if test "$casc_cv_cxx_have_template_complex_std" = yes; then
 
-cat >>confdefs.h <<\_ACEOF
-#define HAVE_TEMPLATE_COMPLEX 1
-_ACEOF
+printf "%s\n" "#define HAVE_TEMPLATE_COMPLEX 1" >>confdefs.h
 
       else
 
-cat >>confdefs.h <<\_ACEOF
-#define LACKS_TEMPLATE_COMPLEX 1
-_ACEOF
+printf "%s\n" "#define LACKS_TEMPLATE_COMPLEX 1" >>confdefs.h
 
       fi
    fi
 
 
 
-   { echo "$as_me:$LINENO: checking whether ${CXX} supports sstream.h and class ostringstream" >&5
-echo $ECHO_N "checking whether ${CXX} supports sstream.h and class ostringstream... $ECHO_C" >&6; }
+   { printf "%s\n" "$as_me:${as_lineno-$LINENO}: checking whether ${CXX} supports sstream.h and class ostringstream" >&5
+printf %s "checking whether ${CXX} supports sstream.h and class ostringstream... " >&6; }
 
-   if test "${casc_cv_cxx_have_sstream+set}" = set; then
-  echo $ECHO_N "(cached) $ECHO_C" >&6
-else
+   if test ${casc_cv_cxx_have_sstream+y}
+then :
+  printf %s "(cached) " >&6
+else $as_nop
 
 
       ac_ext=cpp
@@ -5379,11 +6332,7 @@ ac_compile='$CXX -c $CXXFLAGS $CPPFLAGS conftest.$ac_ext >&5'
 ac_link='$CXX -o conftest$ac_exeext $CXXFLAGS $CPPFLAGS $LDFLAGS conftest.$ac_ext $LIBS >&5'
 ac_compiler_gnu=$ac_cv_cxx_compiler_gnu
 
-      cat >conftest.$ac_ext <<_ACEOF
-/* confdefs.h.  */
-_ACEOF
-cat confdefs.h >>conftest.$ac_ext
-cat >>conftest.$ac_ext <<_ACEOF
+      cat confdefs.h - <<_ACEOF >conftest.$ac_ext
 /* end confdefs.h.  */
 
 #include <sstream.h>
@@ -5398,39 +6347,20 @@ void foo() {
 }
 
 int
-main ()
+main (void)
 {
 /* empty */
   ;
   return 0;
 }
 _ACEOF
-rm -f conftest.$ac_objext
-if { (ac_try="$ac_compile"
-case "(($ac_try" in
-  *\"* | *\`* | *\\*) ac_try_echo=\$ac_try;;
-  *) ac_try_echo=$ac_try;;
-esac
-eval "echo \"\$as_me:$LINENO: $ac_try_echo\"") >&5
-  (eval "$ac_compile") 2>conftest.er1
-  ac_status=$?
-  grep -v '^ *+' conftest.er1 >conftest.err
-  rm -f conftest.er1
-  cat conftest.err >&5
-  echo "$as_me:$LINENO: \$? = $ac_status" >&5
-  (exit $ac_status); } && {
-	 test -z "$ac_cxx_werror_flag" ||
-	 test ! -s conftest.err
-       } && test -s conftest.$ac_objext; then
+if ac_fn_cxx_try_compile "$LINENO"
+then :
   casc_cv_cxx_have_sstream=yes
-else
-  echo "$as_me: failed program was:" >&5
-sed 's/^/| /' conftest.$ac_ext >&5
-
-	casc_cv_cxx_have_sstream=no
+else $as_nop
+  casc_cv_cxx_have_sstream=no
 fi
-
-rm -f core conftest.err conftest.$ac_objext conftest.$ac_ext
+rm -f core conftest.err conftest.$ac_objext conftest.beam conftest.$ac_ext
       ac_ext=c
 ac_cpp='$CPP $CPPFLAGS'
 ac_compile='$CC -c $CFLAGS $CPPFLAGS conftest.$ac_ext >&5'
@@ -5441,21 +6371,20 @@ ac_compiler_gnu=$ac_cv_c_compiler_gnu
 fi
 
 
-   { echo "$as_me:$LINENO: result: $casc_cv_cxx_have_sstream" >&5
-echo "${ECHO_T}$casc_cv_cxx_have_sstream" >&6; }
+   { printf "%s\n" "$as_me:${as_lineno-$LINENO}: result: $casc_cv_cxx_have_sstream" >&5
+printf "%s\n" "$casc_cv_cxx_have_sstream" >&6; }
 
    if test "$casc_cv_cxx_have_sstream" = yes; then
 
-cat >>confdefs.h <<\_ACEOF
-#define HAVE_SSTREAM 1
-_ACEOF
+printf "%s\n" "#define HAVE_SSTREAM 1" >>confdefs.h
 
    else
-        { echo "$as_me:$LINENO: checking whether ${CXX} supports sstream and class ostringstream" >&5
-echo $ECHO_N "checking whether ${CXX} supports sstream and class ostringstream... $ECHO_C" >&6; }
-	if test "${casc_cv_cxx_have_sstream_std+set}" = set; then
-  echo $ECHO_N "(cached) $ECHO_C" >&6
-else
+        { printf "%s\n" "$as_me:${as_lineno-$LINENO}: checking whether ${CXX} supports sstream and class ostringstream" >&5
+printf %s "checking whether ${CXX} supports sstream and class ostringstream... " >&6; }
+	if test ${casc_cv_cxx_have_sstream_std+y}
+then :
+  printf %s "(cached) " >&6
+else $as_nop
 
 
         ac_ext=cpp
@@ -5464,11 +6393,7 @@ ac_compile='$CXX -c $CXXFLAGS $CPPFLAGS conftest.$ac_ext >&5'
 ac_link='$CXX -o conftest$ac_exeext $CXXFLAGS $CPPFLAGS $LDFLAGS conftest.$ac_ext $LIBS >&5'
 ac_compiler_gnu=$ac_cv_cxx_compiler_gnu
 
-        cat >conftest.$ac_ext <<_ACEOF
-/* confdefs.h.  */
-_ACEOF
-cat confdefs.h >>conftest.$ac_ext
-cat >>conftest.$ac_ext <<_ACEOF
+        cat confdefs.h - <<_ACEOF >conftest.$ac_ext
 /* end confdefs.h.  */
 
 #include <sstream>
@@ -5483,39 +6408,20 @@ void foo() {
 }
 
 int
-main ()
+main (void)
 {
 /* empty */
   ;
   return 0;
 }
 _ACEOF
-rm -f conftest.$ac_objext
-if { (ac_try="$ac_compile"
-case "(($ac_try" in
-  *\"* | *\`* | *\\*) ac_try_echo=\$ac_try;;
-  *) ac_try_echo=$ac_try;;
-esac
-eval "echo \"\$as_me:$LINENO: $ac_try_echo\"") >&5
-  (eval "$ac_compile") 2>conftest.er1
-  ac_status=$?
-  grep -v '^ *+' conftest.er1 >conftest.err
-  rm -f conftest.er1
-  cat conftest.err >&5
-  echo "$as_me:$LINENO: \$? = $ac_status" >&5
-  (exit $ac_status); } && {
-	 test -z "$ac_cxx_werror_flag" ||
-	 test ! -s conftest.err
-       } && test -s conftest.$ac_objext; then
+if ac_fn_cxx_try_compile "$LINENO"
+then :
   casc_cv_cxx_have_sstream_std=yes
-else
-  echo "$as_me: failed program was:" >&5
-sed 's/^/| /' conftest.$ac_ext >&5
-
-	casc_cv_cxx_have_sstream_std=no
+else $as_nop
+  casc_cv_cxx_have_sstream_std=no
 fi
-
-rm -f core conftest.err conftest.$ac_objext conftest.$ac_ext
+rm -f core conftest.err conftest.$ac_objext conftest.beam conftest.$ac_ext
         ac_ext=c
 ac_cpp='$CPP $CPPFLAGS'
 ac_compile='$CC -c $CFLAGS $CPPFLAGS conftest.$ac_ext >&5'
@@ -5526,42 +6432,35 @@ ac_compiler_gnu=$ac_cv_c_compiler_gnu
 fi
 
 
-      { echo "$as_me:$LINENO: result: $casc_cv_cxx_have_sstream_std" >&5
-echo "${ECHO_T}$casc_cv_cxx_have_sstream_std" >&6; }
+      { printf "%s\n" "$as_me:${as_lineno-$LINENO}: result: $casc_cv_cxx_have_sstream_std" >&5
+printf "%s\n" "$casc_cv_cxx_have_sstream_std" >&6; }
 
       if test "$casc_cv_cxx_have_sstream_std" = yes; then
 
-cat >>confdefs.h <<\_ACEOF
-#define HAVE_SSTREAM 1
-_ACEOF
+printf "%s\n" "#define HAVE_SSTREAM 1" >>confdefs.h
 
 
-cat >>confdefs.h <<\_ACEOF
-#define HAVE_ISO_SSTREAM 1
-_ACEOF
+printf "%s\n" "#define HAVE_ISO_SSTREAM 1" >>confdefs.h
 
       else
 
-cat >>confdefs.h <<\_ACEOF
-#define LACKS_SSTREAM 1
-_ACEOF
+printf "%s\n" "#define LACKS_SSTREAM 1" >>confdefs.h
 
 
-cat >>confdefs.h <<\_ACEOF
-#define LACK_ISO_SSTREAM 1
-_ACEOF
+printf "%s\n" "#define LACK_ISO_SSTREAM 1" >>confdefs.h
 
       fi
    fi
 
 
 
-   { echo "$as_me:$LINENO: checking whether ${CXX} defines the iomanip left operator" >&5
-echo $ECHO_N "checking whether ${CXX} defines the iomanip left operator... $ECHO_C" >&6; }
+   { printf "%s\n" "$as_me:${as_lineno-$LINENO}: checking whether ${CXX} defines the iomanip left operator" >&5
+printf %s "checking whether ${CXX} defines the iomanip left operator... " >&6; }
 
-   if test "${casc_cv_cxx_have_iomanip_left+set}" = set; then
-  echo $ECHO_N "(cached) $ECHO_C" >&6
-else
+   if test ${casc_cv_cxx_have_iomanip_left+y}
+then :
+  printf %s "(cached) " >&6
+else $as_nop
 
 
       ac_ext=cpp
@@ -5570,11 +6469,7 @@ ac_compile='$CXX -c $CXXFLAGS $CPPFLAGS conftest.$ac_ext >&5'
 ac_link='$CXX -o conftest$ac_exeext $CXXFLAGS $CPPFLAGS $LDFLAGS conftest.$ac_ext $LIBS >&5'
 ac_compiler_gnu=$ac_cv_cxx_compiler_gnu
 
-      cat >conftest.$ac_ext <<_ACEOF
-/* confdefs.h.  */
-_ACEOF
-cat confdefs.h >>conftest.$ac_ext
-cat >>conftest.$ac_ext <<_ACEOF
+      cat confdefs.h - <<_ACEOF >conftest.$ac_ext
 /* end confdefs.h.  */
 
 #include <iostream>
@@ -5587,41 +6482,21 @@ void foo()
 }
 
 int
-main ()
+main (void)
 {
 /* empty */
   ;
   return 0;
 }
 _ACEOF
-rm -f conftest.$ac_objext conftest$ac_exeext
-if { (ac_try="$ac_link"
-case "(($ac_try" in
-  *\"* | *\`* | *\\*) ac_try_echo=\$ac_try;;
-  *) ac_try_echo=$ac_try;;
-esac
-eval "echo \"\$as_me:$LINENO: $ac_try_echo\"") >&5
-  (eval "$ac_link") 2>conftest.er1
-  ac_status=$?
-  grep -v '^ *+' conftest.er1 >conftest.err
-  rm -f conftest.er1
-  cat conftest.err >&5
-  echo "$as_me:$LINENO: \$? = $ac_status" >&5
-  (exit $ac_status); } && {
-	 test -z "$ac_cxx_werror_flag" ||
-	 test ! -s conftest.err
-       } && test -s conftest$ac_exeext &&
-       $as_test_x conftest$ac_exeext; then
+if ac_fn_cxx_try_link "$LINENO"
+then :
   casc_cv_cxx_have_iomanip_left=yes
-else
-  echo "$as_me: failed program was:" >&5
-sed 's/^/| /' conftest.$ac_ext >&5
-
-	casc_cv_cxx_have_iomanip_left=no
+else $as_nop
+  casc_cv_cxx_have_iomanip_left=no
 fi
-
-rm -f core conftest.err conftest.$ac_objext conftest_ipa8_conftest.oo \
-      conftest$ac_exeext conftest.$ac_ext
+rm -f core conftest.err conftest.$ac_objext conftest.beam \
+    conftest$ac_exeext conftest.$ac_ext
       ac_ext=c
 ac_cpp='$CPP $CPPFLAGS'
 ac_compile='$CC -c $CFLAGS $CPPFLAGS conftest.$ac_ext >&5'
@@ -5631,31 +6506,28 @@ ac_compiler_gnu=$ac_cv_c_compiler_gnu
 
 fi
 
-   { echo "$as_me:$LINENO: result: $casc_cv_cxx_have_iomanip_left" >&5
-echo "${ECHO_T}$casc_cv_cxx_have_iomanip_left" >&6; }
+   { printf "%s\n" "$as_me:${as_lineno-$LINENO}: result: $casc_cv_cxx_have_iomanip_left" >&5
+printf "%s\n" "$casc_cv_cxx_have_iomanip_left" >&6; }
 
    if test "$casc_cv_cxx_have_iomanip_left" = yes; then
 
-cat >>confdefs.h <<\_ACEOF
-#define HAVE_IOMANIP_LEFT 1
-_ACEOF
+printf "%s\n" "#define HAVE_IOMANIP_LEFT 1" >>confdefs.h
 
    else
 
-cat >>confdefs.h <<\_ACEOF
-#define LACKS_IOMANIP_LEFT 1
-_ACEOF
+printf "%s\n" "#define LACKS_IOMANIP_LEFT 1" >>confdefs.h
 
    fi
 
 
 
-   { echo "$as_me:$LINENO: checking whether ${CXX} defines the new placement operator" >&5
-echo $ECHO_N "checking whether ${CXX} defines the new placement operator... $ECHO_C" >&6; }
+   { printf "%s\n" "$as_me:${as_lineno-$LINENO}: checking whether ${CXX} defines the new placement operator" >&5
+printf %s "checking whether ${CXX} defines the new placement operator... " >&6; }
 
-   if test "${casc_cv_cxx_have_new_placement_operator+set}" = set; then
-  echo $ECHO_N "(cached) $ECHO_C" >&6
-else
+   if test ${casc_cv_cxx_have_new_placement_operator+y}
+then :
+  printf %s "(cached) " >&6
+else $as_nop
 
 
       ac_ext=cpp
@@ -5664,11 +6536,7 @@ ac_compile='$CXX -c $CXXFLAGS $CPPFLAGS conftest.$ac_ext >&5'
 ac_link='$CXX -o conftest$ac_exeext $CXXFLAGS $CPPFLAGS $LDFLAGS conftest.$ac_ext $LIBS >&5'
 ac_compiler_gnu=$ac_cv_cxx_compiler_gnu
 
-      cat >conftest.$ac_ext <<_ACEOF
-/* confdefs.h.  */
-_ACEOF
-cat confdefs.h >>conftest.$ac_ext
-cat >>conftest.$ac_ext <<_ACEOF
+      cat confdefs.h - <<_ACEOF >conftest.$ac_ext
 /* end confdefs.h.  */
 
 #include <new>
@@ -5678,41 +6546,21 @@ void trynew() {
 }
 
 int
-main ()
+main (void)
 {
 /* empty */
   ;
   return 0;
 }
 _ACEOF
-rm -f conftest.$ac_objext conftest$ac_exeext
-if { (ac_try="$ac_link"
-case "(($ac_try" in
-  *\"* | *\`* | *\\*) ac_try_echo=\$ac_try;;
-  *) ac_try_echo=$ac_try;;
-esac
-eval "echo \"\$as_me:$LINENO: $ac_try_echo\"") >&5
-  (eval "$ac_link") 2>conftest.er1
-  ac_status=$?
-  grep -v '^ *+' conftest.er1 >conftest.err
-  rm -f conftest.er1
-  cat conftest.err >&5
-  echo "$as_me:$LINENO: \$? = $ac_status" >&5
-  (exit $ac_status); } && {
-	 test -z "$ac_cxx_werror_flag" ||
-	 test ! -s conftest.err
-       } && test -s conftest$ac_exeext &&
-       $as_test_x conftest$ac_exeext; then
+if ac_fn_cxx_try_link "$LINENO"
+then :
   casc_cv_cxx_have_new_placement_operator=yes
-else
-  echo "$as_me: failed program was:" >&5
-sed 's/^/| /' conftest.$ac_ext >&5
-
-	casc_cv_cxx_have_new_placement_operator=no
+else $as_nop
+  casc_cv_cxx_have_new_placement_operator=no
 fi
-
-rm -f core conftest.err conftest.$ac_objext conftest_ipa8_conftest.oo \
-      conftest$ac_exeext conftest.$ac_ext
+rm -f core conftest.err conftest.$ac_objext conftest.beam \
+    conftest$ac_exeext conftest.$ac_ext
       ac_ext=c
 ac_cpp='$CPP $CPPFLAGS'
 ac_compile='$CC -c $CFLAGS $CPPFLAGS conftest.$ac_ext >&5'
@@ -5723,30 +6571,27 @@ ac_compiler_gnu=$ac_cv_c_compiler_gnu
 fi
 
 
-   { echo "$as_me:$LINENO: result: $casc_cv_cxx_have_new_placement_operator" >&5
-echo "${ECHO_T}$casc_cv_cxx_have_new_placement_operator" >&6; }
+   { printf "%s\n" "$as_me:${as_lineno-$LINENO}: result: $casc_cv_cxx_have_new_placement_operator" >&5
+printf "%s\n" "$casc_cv_cxx_have_new_placement_operator" >&6; }
 
    if test "$casc_cv_cxx_have_new_placement_operator" = yes; then
 
-cat >>confdefs.h <<\_ACEOF
-#define HAVE_NEW_PLACEMENT_OPERATOR 1
-_ACEOF
+printf "%s\n" "#define HAVE_NEW_PLACEMENT_OPERATOR 1" >>confdefs.h
 
    else
 
-cat >>confdefs.h <<\_ACEOF
-#define LACKS_NEW_PLACEMENT_OPERATOR 1
-_ACEOF
+printf "%s\n" "#define LACKS_NEW_PLACEMENT_OPERATOR 1" >>confdefs.h
 
    fi
 
 
 
-   { echo "$as_me:$LINENO: checking whether ${CXX} supports member function specialization" >&5
-echo $ECHO_N "checking whether ${CXX} supports member function specialization... $ECHO_C" >&6; }
-   if test "${casc_cv_cxx_have_member_function_specialization+set}" = set; then
-  echo $ECHO_N "(cached) $ECHO_C" >&6
-else
+   { printf "%s\n" "$as_me:${as_lineno-$LINENO}: checking whether ${CXX} supports member function specialization" >&5
+printf %s "checking whether ${CXX} supports member function specialization... " >&6; }
+   if test ${casc_cv_cxx_have_member_function_specialization+y}
+then :
+  printf %s "(cached) " >&6
+else $as_nop
 
 
       ac_ext=cpp
@@ -5755,11 +6600,7 @@ ac_compile='$CXX -c $CXXFLAGS $CPPFLAGS conftest.$ac_ext >&5'
 ac_link='$CXX -o conftest$ac_exeext $CXXFLAGS $CPPFLAGS $LDFLAGS conftest.$ac_ext $LIBS >&5'
 ac_compiler_gnu=$ac_cv_cxx_compiler_gnu
 
-      cat >conftest.$ac_ext <<_ACEOF
-/* confdefs.h.  */
-_ACEOF
-cat confdefs.h >>conftest.$ac_ext
-cat >>conftest.$ac_ext <<_ACEOF
+      cat confdefs.h - <<_ACEOF >conftest.$ac_ext
 /* end confdefs.h.  */
 
 template <class T> class Pointer { public: void foo(); };
@@ -5767,39 +6608,20 @@ template <> void Pointer<int>::foo();
 template <> void Pointer<int>::foo() { }
 
 int
-main ()
+main (void)
 {
 /* empty */
   ;
   return 0;
 }
 _ACEOF
-rm -f conftest.$ac_objext
-if { (ac_try="$ac_compile"
-case "(($ac_try" in
-  *\"* | *\`* | *\\*) ac_try_echo=\$ac_try;;
-  *) ac_try_echo=$ac_try;;
-esac
-eval "echo \"\$as_me:$LINENO: $ac_try_echo\"") >&5
-  (eval "$ac_compile") 2>conftest.er1
-  ac_status=$?
-  grep -v '^ *+' conftest.er1 >conftest.err
-  rm -f conftest.er1
-  cat conftest.err >&5
-  echo "$as_me:$LINENO: \$? = $ac_status" >&5
-  (exit $ac_status); } && {
-	 test -z "$ac_cxx_werror_flag" ||
-	 test ! -s conftest.err
-       } && test -s conftest.$ac_objext; then
+if ac_fn_cxx_try_compile "$LINENO"
+then :
   casc_cv_cxx_have_member_function_specialization=yes
-else
-  echo "$as_me: failed program was:" >&5
-sed 's/^/| /' conftest.$ac_ext >&5
-
-	casc_cv_cxx_have_member_function_specialization=no
+else $as_nop
+  casc_cv_cxx_have_member_function_specialization=no
 fi
-
-rm -f core conftest.err conftest.$ac_objext conftest.$ac_ext
+rm -f core conftest.err conftest.$ac_objext conftest.beam conftest.$ac_ext
       ac_ext=c
 ac_cpp='$CPP $CPPFLAGS'
 ac_compile='$CC -c $CFLAGS $CPPFLAGS conftest.$ac_ext >&5'
@@ -5816,30 +6638,27 @@ fi
          ;;
    esac
 
-   { echo "$as_me:$LINENO: result: $casc_cv_cxx_have_member_function_specialization" >&5
-echo "${ECHO_T}$casc_cv_cxx_have_member_function_specialization" >&6; }
+   { printf "%s\n" "$as_me:${as_lineno-$LINENO}: result: $casc_cv_cxx_have_member_function_specialization" >&5
+printf "%s\n" "$casc_cv_cxx_have_member_function_specialization" >&6; }
    if test "$casc_cv_cxx_have_member_function_specialization" = yes; then
 
-cat >>confdefs.h <<\_ACEOF
-#define HAVE_MEMBER_FUNCTION_SPECIALIZATION 1
-_ACEOF
+printf "%s\n" "#define HAVE_MEMBER_FUNCTION_SPECIALIZATION 1" >>confdefs.h
 
    else
 
-cat >>confdefs.h <<\_ACEOF
-#define LACKS_MEMBER_FUNCTION_SPECIALIZATION 1
-_ACEOF
+printf "%s\n" "#define LACKS_MEMBER_FUNCTION_SPECIALIZATION 1" >>confdefs.h
 
    fi
 
 
 
 
-   { echo "$as_me:$LINENO: checking whether ${CXX} supports static data instantiation" >&5
-echo $ECHO_N "checking whether ${CXX} supports static data instantiation... $ECHO_C" >&6; }
-   if test "${casc_cv_cxx_have_static_data_instantiation+set}" = set; then
-  echo $ECHO_N "(cached) $ECHO_C" >&6
-else
+   { printf "%s\n" "$as_me:${as_lineno-$LINENO}: checking whether ${CXX} supports static data instantiation" >&5
+printf %s "checking whether ${CXX} supports static data instantiation... " >&6; }
+   if test ${casc_cv_cxx_have_static_data_instantiation+y}
+then :
+  printf %s "(cached) " >&6
+else $as_nop
 
 
       ac_ext=cpp
@@ -5848,50 +6667,27 @@ ac_compile='$CXX -c $CXXFLAGS $CPPFLAGS conftest.$ac_ext >&5'
 ac_link='$CXX -o conftest$ac_exeext $CXXFLAGS $CPPFLAGS $LDFLAGS conftest.$ac_ext $LIBS >&5'
 ac_compiler_gnu=$ac_cv_cxx_compiler_gnu
 
-      cat >conftest.$ac_ext <<_ACEOF
-/* confdefs.h.  */
-_ACEOF
-cat confdefs.h >>conftest.$ac_ext
-cat >>conftest.$ac_ext <<_ACEOF
+      cat confdefs.h - <<_ACEOF >conftest.$ac_ext
 /* end confdefs.h.  */
 
 template <class T> class Pointer { public: void foo(); };
 template <> void Pointer<int>::foo() { }
 
 int
-main ()
+main (void)
 {
 /* empty */
   ;
   return 0;
 }
 _ACEOF
-rm -f conftest.$ac_objext
-if { (ac_try="$ac_compile"
-case "(($ac_try" in
-  *\"* | *\`* | *\\*) ac_try_echo=\$ac_try;;
-  *) ac_try_echo=$ac_try;;
-esac
-eval "echo \"\$as_me:$LINENO: $ac_try_echo\"") >&5
-  (eval "$ac_compile") 2>conftest.er1
-  ac_status=$?
-  grep -v '^ *+' conftest.er1 >conftest.err
-  rm -f conftest.er1
-  cat conftest.err >&5
-  echo "$as_me:$LINENO: \$? = $ac_status" >&5
-  (exit $ac_status); } && {
-	 test -z "$ac_cxx_werror_flag" ||
-	 test ! -s conftest.err
-       } && test -s conftest.$ac_objext; then
+if ac_fn_cxx_try_compile "$LINENO"
+then :
   casc_cv_cxx_have_static_data_instantiation=yes
-else
-  echo "$as_me: failed program was:" >&5
-sed 's/^/| /' conftest.$ac_ext >&5
-
-	casc_cv_cxx_have_static_data_instantiation=no
+else $as_nop
+  casc_cv_cxx_have_static_data_instantiation=no
 fi
-
-rm -f core conftest.err conftest.$ac_objext conftest.$ac_ext
+rm -f core conftest.err conftest.$ac_objext conftest.beam conftest.$ac_ext
       ac_ext=c
 ac_cpp='$CPP $CPPFLAGS'
 ac_compile='$CC -c $CFLAGS $CPPFLAGS conftest.$ac_ext >&5'
@@ -5901,29 +6697,26 @@ ac_compiler_gnu=$ac_cv_c_compiler_gnu
 
 fi
 
-   { echo "$as_me:$LINENO: result: $casc_cv_cxx_have_static_data_instantiation" >&5
-echo "${ECHO_T}$casc_cv_cxx_have_static_data_instantiation" >&6; }
+   { printf "%s\n" "$as_me:${as_lineno-$LINENO}: result: $casc_cv_cxx_have_static_data_instantiation" >&5
+printf "%s\n" "$casc_cv_cxx_have_static_data_instantiation" >&6; }
    if test "$casc_cv_cxx_have_static_data_instantiation" = yes; then
 
-cat >>confdefs.h <<\_ACEOF
-#define HAVE_STATIC_DATA_INSTANTIATION 1
-_ACEOF
+printf "%s\n" "#define HAVE_STATIC_DATA_INSTANTIATION 1" >>confdefs.h
 
    else
 
-cat >>confdefs.h <<\_ACEOF
-#define LACKS_STATIC_DATA_INSTANTIATION 1
-_ACEOF
+printf "%s\n" "#define LACKS_STATIC_DATA_INSTANTIATION 1" >>confdefs.h
 
    fi
 
 
 
-    { echo "$as_me:$LINENO: checking whether ${CXX} supports exception handling" >&5
-echo $ECHO_N "checking whether ${CXX} supports exception handling... $ECHO_C" >&6; }
-    if test "${casc_cxx_have_exception_handling+set}" = set; then
-  echo $ECHO_N "(cached) $ECHO_C" >&6
-else
+    { printf "%s\n" "$as_me:${as_lineno-$LINENO}: checking whether ${CXX} supports exception handling" >&5
+printf %s "checking whether ${CXX} supports exception handling... " >&6; }
+    if test ${casc_cxx_have_exception_handling+y}
+then :
+  printf %s "(cached) " >&6
+else $as_nop
 
 
        ac_ext=cpp
@@ -5932,11 +6725,7 @@ ac_compile='$CXX -c $CXXFLAGS $CPPFLAGS conftest.$ac_ext >&5'
 ac_link='$CXX -o conftest$ac_exeext $CXXFLAGS $CPPFLAGS $LDFLAGS conftest.$ac_ext $LIBS >&5'
 ac_compiler_gnu=$ac_cv_cxx_compiler_gnu
 
-       cat >conftest.$ac_ext <<_ACEOF
-/* confdefs.h.  */
-_ACEOF
-cat confdefs.h >>conftest.$ac_ext
-cat >>conftest.$ac_ext <<_ACEOF
+       cat confdefs.h - <<_ACEOF >conftest.$ac_ext
 /* end confdefs.h.  */
 
 #include <fpu_control.h>
@@ -5952,39 +6741,20 @@ void foo() {
 }
 
 int
-main ()
+main (void)
 {
 /* empty */
   ;
   return 0;
 }
 _ACEOF
-rm -f conftest.$ac_objext
-if { (ac_try="$ac_compile"
-case "(($ac_try" in
-  *\"* | *\`* | *\\*) ac_try_echo=\$ac_try;;
-  *) ac_try_echo=$ac_try;;
-esac
-eval "echo \"\$as_me:$LINENO: $ac_try_echo\"") >&5
-  (eval "$ac_compile") 2>conftest.er1
-  ac_status=$?
-  grep -v '^ *+' conftest.er1 >conftest.err
-  rm -f conftest.er1
-  cat conftest.err >&5
-  echo "$as_me:$LINENO: \$? = $ac_status" >&5
-  (exit $ac_status); } && {
-	 test -z "$ac_cxx_werror_flag" ||
-	 test ! -s conftest.err
-       } && test -s conftest.$ac_objext; then
+if ac_fn_cxx_try_compile "$LINENO"
+then :
   casc_cxx_have_exception_handling=yes
-else
-  echo "$as_me: failed program was:" >&5
-sed 's/^/| /' conftest.$ac_ext >&5
-
-	casc_cxx_have_exception_handling=no
+else $as_nop
+  casc_cxx_have_exception_handling=no
 fi
-
-rm -f core conftest.err conftest.$ac_objext conftest.$ac_ext
+rm -f core conftest.err conftest.$ac_objext conftest.beam conftest.$ac_ext
        ac_ext=c
 ac_cpp='$CPP $CPPFLAGS'
 ac_compile='$CC -c $CFLAGS $CPPFLAGS conftest.$ac_ext >&5'
@@ -5994,29 +6764,26 @@ ac_compiler_gnu=$ac_cv_c_compiler_gnu
 
 fi
 
-    { echo "$as_me:$LINENO: result: $casc_cxx_have_exception_handling" >&5
-echo "${ECHO_T}$casc_cxx_have_exception_handling" >&6; }
+    { printf "%s\n" "$as_me:${as_lineno-$LINENO}: result: $casc_cxx_have_exception_handling" >&5
+printf "%s\n" "$casc_cxx_have_exception_handling" >&6; }
     if test "$casc_cxx_have_exception_handling" = yes; then
 
-cat >>confdefs.h <<\_ACEOF
-#define HAVE_EXCEPTION_HANDLING 1
-_ACEOF
+printf "%s\n" "#define HAVE_EXCEPTION_HANDLING 1" >>confdefs.h
 
     else
 
-cat >>confdefs.h <<\_ACEOF
-#define LACKS_EXCEPTION_HANDLING 1
-_ACEOF
+printf "%s\n" "#define LACKS_EXCEPTION_HANDLING 1" >>confdefs.h
 
     fi
 
 
 
-   { echo "$as_me:$LINENO: checking whether ${CXX} supports standard static data specialization" >&5
-echo $ECHO_N "checking whether ${CXX} supports standard static data specialization... $ECHO_C" >&6; }
-   if test "${casc_cv_cxx_have_standard_static_data_specialization+set}" = set; then
-  echo $ECHO_N "(cached) $ECHO_C" >&6
-else
+   { printf "%s\n" "$as_me:${as_lineno-$LINENO}: checking whether ${CXX} supports standard static data specialization" >&5
+printf %s "checking whether ${CXX} supports standard static data specialization... " >&6; }
+   if test ${casc_cv_cxx_have_standard_static_data_specialization+y}
+then :
+  printf %s "(cached) " >&6
+else $as_nop
 
 
       ac_ext=cpp
@@ -6025,11 +6792,7 @@ ac_compile='$CXX -c $CXXFLAGS $CPPFLAGS conftest.$ac_ext >&5'
 ac_link='$CXX -o conftest$ac_exeext $CXXFLAGS $CPPFLAGS $LDFLAGS conftest.$ac_ext $LIBS >&5'
 ac_compiler_gnu=$ac_cv_cxx_compiler_gnu
 
-      cat >conftest.$ac_ext <<_ACEOF
-/* confdefs.h.  */
-_ACEOF
-cat confdefs.h >>conftest.$ac_ext
-cat >>conftest.$ac_ext <<_ACEOF
+      cat confdefs.h - <<_ACEOF >conftest.$ac_ext
 /* end confdefs.h.  */
 
 template <class T> class Pointer { public: static T *s_test; };
@@ -6039,39 +6802,20 @@ template <> int *Pointer<int>::s_test = (int*) 0;
 template class Pointer<int>;
 
 int
-main ()
+main (void)
 {
 /* empty */
   ;
   return 0;
 }
 _ACEOF
-rm -f conftest.$ac_objext
-if { (ac_try="$ac_compile"
-case "(($ac_try" in
-  *\"* | *\`* | *\\*) ac_try_echo=\$ac_try;;
-  *) ac_try_echo=$ac_try;;
-esac
-eval "echo \"\$as_me:$LINENO: $ac_try_echo\"") >&5
-  (eval "$ac_compile") 2>conftest.er1
-  ac_status=$?
-  grep -v '^ *+' conftest.er1 >conftest.err
-  rm -f conftest.er1
-  cat conftest.err >&5
-  echo "$as_me:$LINENO: \$? = $ac_status" >&5
-  (exit $ac_status); } && {
-	 test -z "$ac_cxx_werror_flag" ||
-	 test ! -s conftest.err
-       } && test -s conftest.$ac_objext; then
+if ac_fn_cxx_try_compile "$LINENO"
+then :
   casc_cv_cxx_have_standard_static_data_specialization=yes
-else
-  echo "$as_me: failed program was:" >&5
-sed 's/^/| /' conftest.$ac_ext >&5
-
-	casc_cv_cxx_have_standard_static_data_specialization=no
+else $as_nop
+  casc_cv_cxx_have_standard_static_data_specialization=no
 fi
-
-rm -f core conftest.err conftest.$ac_objext conftest.$ac_ext
+rm -f core conftest.err conftest.$ac_objext conftest.beam conftest.$ac_ext
       ac_ext=c
 ac_cpp='$CPP $CPPFLAGS'
 ac_compile='$CC -c $CFLAGS $CPPFLAGS conftest.$ac_ext >&5'
@@ -6081,30 +6825,27 @@ ac_compiler_gnu=$ac_cv_c_compiler_gnu
 
 fi
 
-   { echo "$as_me:$LINENO: result: $casc_cv_cxx_have_standard_static_data_specialization" >&5
-echo "${ECHO_T}$casc_cv_cxx_have_standard_static_data_specialization" >&6; }
+   { printf "%s\n" "$as_me:${as_lineno-$LINENO}: result: $casc_cv_cxx_have_standard_static_data_specialization" >&5
+printf "%s\n" "$casc_cv_cxx_have_standard_static_data_specialization" >&6; }
    if test "$casc_cv_cxx_have_standard_static_data_specialization" = yes; then
 
-cat >>confdefs.h <<\_ACEOF
-#define HAVE_STANDARD_STATIC_DATA_SPECIALIZATION 1
-_ACEOF
+printf "%s\n" "#define HAVE_STANDARD_STATIC_DATA_SPECIALIZATION 1" >>confdefs.h
 
    else
 
-cat >>confdefs.h <<\_ACEOF
-#define LACKS_STANDARD_STATIC_DATA_SPECIALIZATION 1
-_ACEOF
+printf "%s\n" "#define LACKS_STANDARD_STATIC_DATA_SPECIALIZATION 1" >>confdefs.h
 
    fi
 
 if test "$casc_cv_cxx_have_standard_static_data_specialization" = "no"; then
 
 
-   { echo "$as_me:$LINENO: checking whether ${CXX} supports pragma static data specialization" >&5
-echo $ECHO_N "checking whether ${CXX} supports pragma static data specialization... $ECHO_C" >&6; }
-   if test "${casc_cv_cxx_have_pragma_static_data_specialization+set}" = set; then
-  echo $ECHO_N "(cached) $ECHO_C" >&6
-else
+   { printf "%s\n" "$as_me:${as_lineno-$LINENO}: checking whether ${CXX} supports pragma static data specialization" >&5
+printf %s "checking whether ${CXX} supports pragma static data specialization... " >&6; }
+   if test ${casc_cv_cxx_have_pragma_static_data_specialization+y}
+then :
+  printf %s "(cached) " >&6
+else $as_nop
 
 
       ac_ext=cpp
@@ -6113,11 +6854,7 @@ ac_compile='$CXX -c $CXXFLAGS $CPPFLAGS conftest.$ac_ext >&5'
 ac_link='$CXX -o conftest$ac_exeext $CXXFLAGS $CPPFLAGS $LDFLAGS conftest.$ac_ext $LIBS >&5'
 ac_compiler_gnu=$ac_cv_cxx_compiler_gnu
 
-      cat >conftest.$ac_ext <<_ACEOF
-/* confdefs.h.  */
-_ACEOF
-cat confdefs.h >>conftest.$ac_ext
-cat >>conftest.$ac_ext <<_ACEOF
+      cat confdefs.h - <<_ACEOF >conftest.$ac_ext
 /* end confdefs.h.  */
 
 template <class T> class Pointer { public: static T *s_test; };
@@ -6127,39 +6864,20 @@ template <> int *Pointer<int>::s_test = (int*) 0;
 template class Pointer<int>;
 
 int
-main ()
+main (void)
 {
 /* empty */
   ;
   return 0;
 }
 _ACEOF
-rm -f conftest.$ac_objext
-if { (ac_try="$ac_compile"
-case "(($ac_try" in
-  *\"* | *\`* | *\\*) ac_try_echo=\$ac_try;;
-  *) ac_try_echo=$ac_try;;
-esac
-eval "echo \"\$as_me:$LINENO: $ac_try_echo\"") >&5
-  (eval "$ac_compile") 2>conftest.er1
-  ac_status=$?
-  grep -v '^ *+' conftest.er1 >conftest.err
-  rm -f conftest.er1
-  cat conftest.err >&5
-  echo "$as_me:$LINENO: \$? = $ac_status" >&5
-  (exit $ac_status); } && {
-	 test -z "$ac_cxx_werror_flag" ||
-	 test ! -s conftest.err
-       } && test -s conftest.$ac_objext; then
+if ac_fn_cxx_try_compile "$LINENO"
+then :
   casc_cv_cxx_have_pragma_static_data_specialization=yes
-else
-  echo "$as_me: failed program was:" >&5
-sed 's/^/| /' conftest.$ac_ext >&5
-
-	casc_cv_cxx_have_pragma_static_data_specialization=no
+else $as_nop
+  casc_cv_cxx_have_pragma_static_data_specialization=no
 fi
-
-rm -f core conftest.err conftest.$ac_objext conftest.$ac_ext
+rm -f core conftest.err conftest.$ac_objext conftest.beam conftest.$ac_ext
       ac_ext=c
 ac_cpp='$CPP $CPPFLAGS'
 ac_compile='$CC -c $CFLAGS $CPPFLAGS conftest.$ac_ext >&5'
@@ -6169,19 +6887,15 @@ ac_compiler_gnu=$ac_cv_c_compiler_gnu
 
 fi
 
-   { echo "$as_me:$LINENO: result: $casc_cv_cxx_have_pragma_static_data_specialization" >&5
-echo "${ECHO_T}$casc_cv_cxx_have_pragma_static_data_specialization" >&6; }
+   { printf "%s\n" "$as_me:${as_lineno-$LINENO}: result: $casc_cv_cxx_have_pragma_static_data_specialization" >&5
+printf "%s\n" "$casc_cv_cxx_have_pragma_static_data_specialization" >&6; }
    if test "$casc_cv_cxx_have_pragma_static_data_specialization" = yes; then
 
-cat >>confdefs.h <<\_ACEOF
-#define HAVE_PRAGMA_STATIC_DATA_SPECIALIZATION 1
-_ACEOF
+printf "%s\n" "#define HAVE_PRAGMA_STATIC_DATA_SPECIALIZATION 1" >>confdefs.h
 
    else
 
-cat >>confdefs.h <<\_ACEOF
-#define LACKS_PRAGMA_STATIC_DATA_SPECIALIZATION 1
-_ACEOF
+printf "%s\n" "#define LACKS_PRAGMA_STATIC_DATA_SPECIALIZATION 1" >>confdefs.h
 
    fi
 
@@ -6189,12 +6903,13 @@ fi
 
 
 
-   { echo "$as_me:$LINENO: checking whether ${CXX} supports cmath" >&5
-echo $ECHO_N "checking whether ${CXX} supports cmath... $ECHO_C" >&6; }
+   { printf "%s\n" "$as_me:${as_lineno-$LINENO}: checking whether ${CXX} supports cmath" >&5
+printf %s "checking whether ${CXX} supports cmath... " >&6; }
 
-   if test "${casc_cv_cxx_have_cmath+set}" = set; then
-  echo $ECHO_N "(cached) $ECHO_C" >&6
-else
+   if test ${casc_cv_cxx_have_cmath+y}
+then :
+  printf %s "(cached) " >&6
+else $as_nop
 
 
       ac_ext=cpp
@@ -6203,11 +6918,7 @@ ac_compile='$CXX -c $CXXFLAGS $CPPFLAGS conftest.$ac_ext >&5'
 ac_link='$CXX -o conftest$ac_exeext $CXXFLAGS $CPPFLAGS $LDFLAGS conftest.$ac_ext $LIBS >&5'
 ac_compiler_gnu=$ac_cv_cxx_compiler_gnu
 
-         cat >conftest.$ac_ext <<_ACEOF
-/* confdefs.h.  */
-_ACEOF
-cat confdefs.h >>conftest.$ac_ext
-cat >>conftest.$ac_ext <<_ACEOF
+         cat confdefs.h - <<_ACEOF >conftest.$ac_ext
 /* end confdefs.h.  */
 
 #include <cmath>
@@ -6216,39 +6927,20 @@ void foo() {
 }
 
 int
-main ()
+main (void)
 {
 /* empty */
   ;
   return 0;
 }
 _ACEOF
-rm -f conftest.$ac_objext
-if { (ac_try="$ac_compile"
-case "(($ac_try" in
-  *\"* | *\`* | *\\*) ac_try_echo=\$ac_try;;
-  *) ac_try_echo=$ac_try;;
-esac
-eval "echo \"\$as_me:$LINENO: $ac_try_echo\"") >&5
-  (eval "$ac_compile") 2>conftest.er1
-  ac_status=$?
-  grep -v '^ *+' conftest.er1 >conftest.err
-  rm -f conftest.er1
-  cat conftest.err >&5
-  echo "$as_me:$LINENO: \$? = $ac_status" >&5
-  (exit $ac_status); } && {
-	 test -z "$ac_cxx_werror_flag" ||
-	 test ! -s conftest.err
-       } && test -s conftest.$ac_objext; then
+if ac_fn_cxx_try_compile "$LINENO"
+then :
   casc_cv_cxx_have_cmath=yes
-else
-  echo "$as_me: failed program was:" >&5
-sed 's/^/| /' conftest.$ac_ext >&5
-
-	casc_cv_cxx_have_cmath=no
+else $as_nop
+  casc_cv_cxx_have_cmath=no
 fi
-
-rm -f core conftest.err conftest.$ac_objext conftest.$ac_ext
+rm -f core conftest.err conftest.$ac_objext conftest.beam conftest.$ac_ext
          ac_ext=c
 ac_cpp='$CPP $CPPFLAGS'
 ac_compile='$CC -c $CFLAGS $CPPFLAGS conftest.$ac_ext >&5'
@@ -6259,32 +6951,29 @@ ac_compiler_gnu=$ac_cv_c_compiler_gnu
 fi
 
 
-   { echo "$as_me:$LINENO: result: $casc_cv_cxx_have_cmath" >&5
-echo "${ECHO_T}$casc_cv_cxx_have_cmath" >&6; }
+   { printf "%s\n" "$as_me:${as_lineno-$LINENO}: result: $casc_cv_cxx_have_cmath" >&5
+printf "%s\n" "$casc_cv_cxx_have_cmath" >&6; }
 
    if test "$casc_cv_cxx_have_cmath" = yes; then
 
-cat >>confdefs.h <<\_ACEOF
-#define HAVE_CMATH 1
-_ACEOF
+printf "%s\n" "#define HAVE_CMATH 1" >>confdefs.h
 
    else
 
-cat >>confdefs.h <<\_ACEOF
-#define LACKS_CMATH 1
-_ACEOF
+printf "%s\n" "#define LACKS_CMATH 1" >>confdefs.h
 
    fi
 
 
 
 
-   { echo "$as_me:$LINENO: checking whether ${CXX} needs isnan templates" >&5
-echo $ECHO_N "checking whether ${CXX} needs isnan templates... $ECHO_C" >&6; }
+   { printf "%s\n" "$as_me:${as_lineno-$LINENO}: checking whether ${CXX} needs isnan templates" >&5
+printf %s "checking whether ${CXX} needs isnan templates... " >&6; }
 
-   if test "${casc_cv_cxx_have_isnan_template+set}" = set; then
-  echo $ECHO_N "(cached) $ECHO_C" >&6
-else
+   if test ${casc_cv_cxx_have_isnan_template+y}
+then :
+  printf %s "(cached) " >&6
+else $as_nop
 
 
       ac_ext=cpp
@@ -6293,11 +6982,7 @@ ac_compile='$CXX -c $CXXFLAGS $CPPFLAGS conftest.$ac_ext >&5'
 ac_link='$CXX -o conftest$ac_exeext $CXXFLAGS $CPPFLAGS $LDFLAGS conftest.$ac_ext $LIBS >&5'
 ac_compiler_gnu=$ac_cv_cxx_compiler_gnu
 
-      cat >conftest.$ac_ext <<_ACEOF
-/* confdefs.h.  */
-_ACEOF
-cat confdefs.h >>conftest.$ac_ext
-cat >>conftest.$ac_ext <<_ACEOF
+      cat confdefs.h - <<_ACEOF >conftest.$ac_ext
 /* end confdefs.h.  */
 
 
@@ -6307,39 +6992,20 @@ template int __gnu_cxx::isnan<float>(float);
 template int __gnu_cxx::__capture_isnan<float>(float);
 
 int
-main ()
+main (void)
 {
 /* empty */
   ;
   return 0;
 }
 _ACEOF
-rm -f conftest.$ac_objext
-if { (ac_try="$ac_compile"
-case "(($ac_try" in
-  *\"* | *\`* | *\\*) ac_try_echo=\$ac_try;;
-  *) ac_try_echo=$ac_try;;
-esac
-eval "echo \"\$as_me:$LINENO: $ac_try_echo\"") >&5
-  (eval "$ac_compile") 2>conftest.er1
-  ac_status=$?
-  grep -v '^ *+' conftest.er1 >conftest.err
-  rm -f conftest.er1
-  cat conftest.err >&5
-  echo "$as_me:$LINENO: \$? = $ac_status" >&5
-  (exit $ac_status); } && {
-	 test -z "$ac_cxx_werror_flag" ||
-	 test ! -s conftest.err
-       } && test -s conftest.$ac_objext; then
+if ac_fn_cxx_try_compile "$LINENO"
+then :
   casc_cv_cxx_have_isnan_template=yes
-else
-  echo "$as_me: failed program was:" >&5
-sed 's/^/| /' conftest.$ac_ext >&5
-
-	casc_cv_cxx_have_isnan_template=no
+else $as_nop
+  casc_cv_cxx_have_isnan_template=no
 fi
-
-rm -f core conftest.err conftest.$ac_objext conftest.$ac_ext
+rm -f core conftest.err conftest.$ac_objext conftest.beam conftest.$ac_ext
       ac_ext=c
 ac_cpp='$CPP $CPPFLAGS'
 ac_compile='$CC -c $CFLAGS $CPPFLAGS conftest.$ac_ext >&5'
@@ -6349,20 +7015,16 @@ ac_compiler_gnu=$ac_cv_c_compiler_gnu
 
 fi
 
-   { echo "$as_me:$LINENO: result: $casc_cv_cxx_have_isnan_template" >&5
-echo "${ECHO_T}$casc_cv_cxx_have_isnan_template" >&6; }
+   { printf "%s\n" "$as_me:${as_lineno-$LINENO}: result: $casc_cv_cxx_have_isnan_template" >&5
+printf "%s\n" "$casc_cv_cxx_have_isnan_template" >&6; }
 
    if test "$casc_cv_cxx_have_isnan_template" = yes; then
 
-cat >>confdefs.h <<\_ACEOF
-#define HAVE_ISNAN_TEMPLATE 1
-_ACEOF
+printf "%s\n" "#define HAVE_ISNAN_TEMPLATE 1" >>confdefs.h
 
    else
 
-cat >>confdefs.h <<\_ACEOF
-#define LACKS_ISNAN_TEMPLATE 1
-_ACEOF
+printf "%s\n" "#define LACKS_ISNAN_TEMPLATE 1" >>confdefs.h
 
    fi
 
@@ -6373,10 +7035,11 @@ _ACEOF
 
 IMPLICIT_TEMPLATE_INSTANTIATION="no"
 # Check whether --enable-implicit-template-instantiation was given.
-if test "${enable_implicit_template_instantiation+set}" = set; then
+if test ${enable_implicit_template_instantiation+y}
+then :
   enableval=$enable_implicit_template_instantiation; IMPLICIT_TEMPLATE_INSTANTIATION="yes"
 
-else
+else $as_nop
   enable_implicit_template_instantiation=no
 
 fi
@@ -6437,9 +7100,7 @@ case $CXX_ID in
       ;;
    intel)
       #  compiler requires template includes
-      cat >>confdefs.h <<\_ACEOF
-#define INCLUDE_TEMPLATE_IMPLEMENTATION 1
-_ACEOF
+      printf "%s\n" "#define INCLUDE_TEMPLATE_IMPLEMENTATION 1" >>confdefs.h
 
       case $ARCH in
          LINUX)
@@ -6457,9 +7118,7 @@ _ACEOF
       ;;
     *)
       # By default include the template impls during compile
-      cat >>confdefs.h <<\_ACEOF
-#define INCLUDE_TEMPLATE_IMPLEMENTATION 1
-_ACEOF
+      printf "%s\n" "#define INCLUDE_TEMPLATE_IMPLEMENTATION 1" >>confdefs.h
 
 esac
 
@@ -6512,25 +7171,19 @@ case $CXX_ID in
       DEPENDS_ON_TEMPLATE_IMPLEMENTATION="no"
       #  compiler requires template includes
 
-cat >>confdefs.h <<\_ACEOF
-#define INCLUDE_TEMPLATE_IMPLEMENTATION 1
-_ACEOF
+printf "%s\n" "#define INCLUDE_TEMPLATE_IMPLEMENTATION 1" >>confdefs.h
 
       ;;
    *)
       # By default include the template impls during compile
 
-cat >>confdefs.h <<\_ACEOF
-#define INCLUDE_TEMPLATE_IMPLEMENTATION 1
-_ACEOF
+printf "%s\n" "#define INCLUDE_TEMPLATE_IMPLEMENTATION 1" >>confdefs.h
 
 esac
 
 if test "${enable_implicit_template_instantiation}" = 'yes'; then
 
-cat >>confdefs.h <<\_ACEOF
-#define INCLUDE_TEMPLATE_IMPLEMENTATION 1
-_ACEOF
+printf "%s\n" "#define INCLUDE_TEMPLATE_IMPLEMENTATION 1" >>confdefs.h
 
    DEPENDS_ON_TEMPLATE_IMPLEMENTATION="yes"
 fi
@@ -6547,7 +7200,8 @@ fi
 
 
 # Check whether --enable-opt was given.
-if test "${enable_opt+set}" = set; then
+if test ${enable_opt+y}
+then :
   enableval=$enable_opt; case "$enable_opt" in
    no) opt_switches= ;;
    yes)
@@ -6563,7 +7217,7 @@ if test "${enable_opt+set}" = set; then
       esac ;;
    *) opt_switches="$enable_opt" ;;
 esac
-else
+else $as_nop
   opt_switches=
 fi
 
@@ -6575,7 +7229,8 @@ if test -n "$opt_switches" ; then
 fi
 
 # Check whether --enable-debug was given.
-if test "${enable_debug+set}" = set; then
+if test ${enable_debug+y}
+then :
   enableval=$enable_debug; case "$enable_debug" in
    no) debug_switches= ;;
    yes)
@@ -6588,22 +7243,16 @@ case "$enable_debug" in
    no) ;;
    *)
 
-cat >>confdefs.h <<\_ACEOF
-#define DEBUG_NO_INLINE 1
-_ACEOF
+printf "%s\n" "#define DEBUG_NO_INLINE 1" >>confdefs.h
 
 
-cat >>confdefs.h <<\_ACEOF
-#define DEBUG_CHECK_ASSERTIONS 1
-_ACEOF
+printf "%s\n" "#define DEBUG_CHECK_ASSERTIONS 1" >>confdefs.h
 
 
-cat >>confdefs.h <<\_ACEOF
-#define DEBUG_INITIALIZE_UNDEFINED 1
-_ACEOF
+printf "%s\n" "#define DEBUG_INITIALIZE_UNDEFINED 1" >>confdefs.h
 
 esac
-else
+else $as_nop
   debug_switches=-g
 fi
 
@@ -6625,7 +7274,7 @@ for btng_log_vars_index in $btng_log_vars ; do
   else
     btng_log_vars_value="unset";
   fi
-  echo "configure:6628:" "$btng_log_vars_index is $btng_log_vars_value" >&5;
+  echo "configure:7277:" "$btng_log_vars_index is $btng_log_vars_value" >&5;
 done
 
 
@@ -6636,9 +7285,7 @@ SAMRAI_ENABLE_SPECIAL="no"
 if test "$enable_char" = "yes"; then
    SAMRAI_OPTIONAL_LIBS="libchar"
 
-cat >>confdefs.h <<\_ACEOF
-#define HAVE_CHAR 1
-_ACEOF
+printf "%s\n" "#define HAVE_CHAR 1" >>confdefs.h
 
 fi
 
@@ -6646,9 +7293,7 @@ if test "$enable_bool" = "yes"; then
    SAMRAI_OPTIONAL_LIBS="libbool $SAMRAI_OPTIONAL_LIBS"
    SAMRAI_ENABLE_SPECIAL="yes"
 
-cat >>confdefs.h <<\_ACEOF
-#define HAVE_BOOL 1
-_ACEOF
+printf "%s\n" "#define HAVE_BOOL 1" >>confdefs.h
 
 fi
 
@@ -6656,9 +7301,7 @@ if test "$enable_float" = "yes"; then
    SAMRAI_OPTIONAL_LIBS="libfloat $SAMRAI_OPTIONAL_LIBS"
    SAMRAI_ENABLE_SPECIAL="yes"
 
-cat >>confdefs.h <<\_ACEOF
-#define HAVE_FLOAT 1
-_ACEOF
+printf "%s\n" "#define HAVE_FLOAT 1" >>confdefs.h
 
 fi
 
@@ -6666,9 +7309,7 @@ if test "$enable_dcomplex" = "yes"; then
    SAMRAI_OPTIONAL_LIBS="libdcomplex $SAMRAI_OPTIONAL_LIBS"
    SAMRAI_ENABLE_SPECIAL="yes"
 
-cat >>confdefs.h <<\_ACEOF
-#define HAVE_DCOMPLEX 1
-_ACEOF
+printf "%s\n" "#define HAVE_DCOMPLEX 1" >>confdefs.h
 
 fi
 
@@ -6684,11 +7325,12 @@ if test -n "$with_F77"; then
 do
   # Extract the first word of "$ac_prog", so it can be a program name with args.
 set dummy $ac_prog; ac_word=$2
-{ echo "$as_me:$LINENO: checking for $ac_word" >&5
-echo $ECHO_N "checking for $ac_word... $ECHO_C" >&6; }
-if test "${ac_cv_prog_F77+set}" = set; then
-  echo $ECHO_N "(cached) $ECHO_C" >&6
-else
+{ printf "%s\n" "$as_me:${as_lineno-$LINENO}: checking for $ac_word" >&5
+printf %s "checking for $ac_word... " >&6; }
+if test ${ac_cv_prog_F77+y}
+then :
+  printf %s "(cached) " >&6
+else $as_nop
   if test -n "$F77"; then
   ac_cv_prog_F77="$F77" # Let the user override the test.
 else
@@ -6696,26 +7338,30 @@ as_save_IFS=$IFS; IFS=$PATH_SEPARATOR
 for as_dir in $PATH
 do
   IFS=$as_save_IFS
-  test -z "$as_dir" && as_dir=.
-  for ac_exec_ext in '' $ac_executable_extensions; do
-  if { test -f "$as_dir/$ac_word$ac_exec_ext" && $as_test_x "$as_dir/$ac_word$ac_exec_ext"; }; then
+  case $as_dir in #(((
+    '') as_dir=./ ;;
+    */) ;;
+    *) as_dir=$as_dir/ ;;
+  esac
+    for ac_exec_ext in '' $ac_executable_extensions; do
+  if as_fn_executable_p "$as_dir$ac_word$ac_exec_ext"; then
     ac_cv_prog_F77="$ac_prog"
-    echo "$as_me:$LINENO: found $as_dir/$ac_word$ac_exec_ext" >&5
+    printf "%s\n" "$as_me:${as_lineno-$LINENO}: found $as_dir$ac_word$ac_exec_ext" >&5
     break 2
   fi
 done
-done
+  done
 IFS=$as_save_IFS
 
 fi
 fi
 F77=$ac_cv_prog_F77
 if test -n "$F77"; then
-  { echo "$as_me:$LINENO: result: $F77" >&5
-echo "${ECHO_T}$F77" >&6; }
+  { printf "%s\n" "$as_me:${as_lineno-$LINENO}: result: $F77" >&5
+printf "%s\n" "$F77" >&6; }
 else
-  { echo "$as_me:$LINENO: result: no" >&5
-echo "${ECHO_T}no" >&6; }
+  { printf "%s\n" "$as_me:${as_lineno-$LINENO}: result: no" >&5
+printf "%s\n" "no" >&6; }
 fi
 
 
@@ -6729,11 +7375,12 @@ else
 do
   # Extract the first word of "$ac_prog", so it can be a program name with args.
 set dummy $ac_prog; ac_word=$2
-{ echo "$as_me:$LINENO: checking for $ac_word" >&5
-echo $ECHO_N "checking for $ac_word... $ECHO_C" >&6; }
-if test "${ac_cv_prog_F77+set}" = set; then
-  echo $ECHO_N "(cached) $ECHO_C" >&6
-else
+{ printf "%s\n" "$as_me:${as_lineno-$LINENO}: checking for $ac_word" >&5
+printf %s "checking for $ac_word... " >&6; }
+if test ${ac_cv_prog_F77+y}
+then :
+  printf %s "(cached) " >&6
+else $as_nop
   if test -n "$F77"; then
   ac_cv_prog_F77="$F77" # Let the user override the test.
 else
@@ -6741,26 +7388,30 @@ as_save_IFS=$IFS; IFS=$PATH_SEPARATOR
 for as_dir in $PATH
 do
   IFS=$as_save_IFS
-  test -z "$as_dir" && as_dir=.
-  for ac_exec_ext in '' $ac_executable_extensions; do
-  if { test -f "$as_dir/$ac_word$ac_exec_ext" && $as_test_x "$as_dir/$ac_word$ac_exec_ext"; }; then
+  case $as_dir in #(((
+    '') as_dir=./ ;;
+    */) ;;
+    *) as_dir=$as_dir/ ;;
+  esac
+    for ac_exec_ext in '' $ac_executable_extensions; do
+  if as_fn_executable_p "$as_dir$ac_word$ac_exec_ext"; then
     ac_cv_prog_F77="$ac_prog"
-    echo "$as_me:$LINENO: found $as_dir/$ac_word$ac_exec_ext" >&5
+    printf "%s\n" "$as_me:${as_lineno-$LINENO}: found $as_dir$ac_word$ac_exec_ext" >&5
     break 2
   fi
 done
-done
+  done
 IFS=$as_save_IFS
 
 fi
 fi
 F77=$ac_cv_prog_F77
 if test -n "$F77"; then
-  { echo "$as_me:$LINENO: result: $F77" >&5
-echo "${ECHO_T}$F77" >&6; }
+  { printf "%s\n" "$as_me:${as_lineno-$LINENO}: result: $F77" >&5
+printf "%s\n" "$F77" >&6; }
 else
-  { echo "$as_me:$LINENO: result: no" >&5
-echo "${ECHO_T}no" >&6; }
+  { printf "%s\n" "$as_me:${as_lineno-$LINENO}: result: no" >&5
+printf "%s\n" "no" >&6; }
 fi
 
 
@@ -6775,11 +7426,12 @@ done
 do
   # Extract the first word of "$ac_prog", so it can be a program name with args.
 set dummy $ac_prog; ac_word=$2
-{ echo "$as_me:$LINENO: checking for $ac_word" >&5
-echo $ECHO_N "checking for $ac_word... $ECHO_C" >&6; }
-if test "${ac_cv_prog_F77+set}" = set; then
-  echo $ECHO_N "(cached) $ECHO_C" >&6
-else
+{ printf "%s\n" "$as_me:${as_lineno-$LINENO}: checking for $ac_word" >&5
+printf %s "checking for $ac_word... " >&6; }
+if test ${ac_cv_prog_F77+y}
+then :
+  printf %s "(cached) " >&6
+else $as_nop
   if test -n "$F77"; then
   ac_cv_prog_F77="$F77" # Let the user override the test.
 else
@@ -6787,26 +7439,30 @@ as_save_IFS=$IFS; IFS=$PATH_SEPARATOR
 for as_dir in $PATH
 do
   IFS=$as_save_IFS
-  test -z "$as_dir" && as_dir=.
-  for ac_exec_ext in '' $ac_executable_extensions; do
-  if { test -f "$as_dir/$ac_word$ac_exec_ext" && $as_test_x "$as_dir/$ac_word$ac_exec_ext"; }; then
+  case $as_dir in #(((
+    '') as_dir=./ ;;
+    */) ;;
+    *) as_dir=$as_dir/ ;;
+  esac
+    for ac_exec_ext in '' $ac_executable_extensions; do
+  if as_fn_executable_p "$as_dir$ac_word$ac_exec_ext"; then
     ac_cv_prog_F77="$ac_prog"
-    echo "$as_me:$LINENO: found $as_dir/$ac_word$ac_exec_ext" >&5
+    printf "%s\n" "$as_me:${as_lineno-$LINENO}: found $as_dir$ac_word$ac_exec_ext" >&5
     break 2
   fi
 done
-done
+  done
 IFS=$as_save_IFS
 
 fi
 fi
 F77=$ac_cv_prog_F77
 if test -n "$F77"; then
-  { echo "$as_me:$LINENO: result: $F77" >&5
-echo "${ECHO_T}$F77" >&6; }
+  { printf "%s\n" "$as_me:${as_lineno-$LINENO}: result: $F77" >&5
+printf "%s\n" "$F77" >&6; }
 else
-  { echo "$as_me:$LINENO: result: no" >&5
-echo "${ECHO_T}no" >&6; }
+  { printf "%s\n" "$as_me:${as_lineno-$LINENO}: result: no" >&5
+printf "%s\n" "no" >&6; }
 fi
 
 
@@ -6817,9 +7473,7 @@ done
    fi
 fi
 
-test -z "$F77" && { { echo "$as_me:$LINENO: error: no acceptable Fortran found in $PATH" >&5
-echo "$as_me: error: no acceptable Fortran found in $PATH" >&2;}
-   { (exit 1); exit 1; }; }
+test -z "$F77" && as_fn_error $? "no acceptable Fortran found in $PATH" "$LINENO" 5
 
 
 btng_log_vars="F77"
@@ -6830,7 +7484,7 @@ for btng_log_vars_index in $btng_log_vars ; do
   else
     btng_log_vars_value="unset";
   fi
-  echo "configure:6833:" "$btng_log_vars_index is $btng_log_vars_value" >&5;
+  echo "configure:7487:" "$btng_log_vars_index is $btng_log_vars_value" >&5;
 done
 
 
@@ -6838,7 +7492,7 @@ done
 # Warn user about unusual compiler paths and LD_LIBRARY_PATH
 for i in `which $F77` ; do
   if echo "$i" | grep -v '^/usr/bin/' > /dev/null; then
-    { echo "$as_me:$LINENO: NOTIFICATION:
+    { printf "%s\n" "$as_me:${as_lineno-$LINENO}: NOTIFICATION:
 
 The compiler $i has an unusual path.
 This may cause link problems if you don't also have the associated
@@ -6847,7 +7501,7 @@ that path in your LD_LIBRARY_PATH, the compiler checks may not run
 properly.  In that case, you may want to stop this process now, set
 your LD_LIBRARY_PATH appropriately and run it.
 " >&5
-echo "$as_me: NOTIFICATION:
+printf "%s\n" "$as_me: NOTIFICATION:
 
 The compiler $i has an unusual path.
 This may cause link problems if you don't also have the associated
@@ -6887,11 +7541,12 @@ case $ARCH in
 do
   # Extract the first word of "$ac_prog", so it can be a program name with args.
 set dummy $ac_prog; ac_word=$2
-{ echo "$as_me:$LINENO: checking for $ac_word" >&5
-echo $ECHO_N "checking for $ac_word... $ECHO_C" >&6; }
-if test "${ac_cv_prog_F77+set}" = set; then
-  echo $ECHO_N "(cached) $ECHO_C" >&6
-else
+{ printf "%s\n" "$as_me:${as_lineno-$LINENO}: checking for $ac_word" >&5
+printf %s "checking for $ac_word... " >&6; }
+if test ${ac_cv_prog_F77+y}
+then :
+  printf %s "(cached) " >&6
+else $as_nop
   if test -n "$F77"; then
   ac_cv_prog_F77="$F77" # Let the user override the test.
 else
@@ -6899,35 +7554,37 @@ as_save_IFS=$IFS; IFS=$PATH_SEPARATOR
 for as_dir in $PATH
 do
   IFS=$as_save_IFS
-  test -z "$as_dir" && as_dir=.
-  for ac_exec_ext in '' $ac_executable_extensions; do
-  if { test -f "$as_dir/$ac_word$ac_exec_ext" && $as_test_x "$as_dir/$ac_word$ac_exec_ext"; }; then
+  case $as_dir in #(((
+    '') as_dir=./ ;;
+    */) ;;
+    *) as_dir=$as_dir/ ;;
+  esac
+    for ac_exec_ext in '' $ac_executable_extensions; do
+  if as_fn_executable_p "$as_dir$ac_word$ac_exec_ext"; then
     ac_cv_prog_F77="$ac_prog"
-    echo "$as_me:$LINENO: found $as_dir/$ac_word$ac_exec_ext" >&5
+    printf "%s\n" "$as_me:${as_lineno-$LINENO}: found $as_dir$ac_word$ac_exec_ext" >&5
     break 2
   fi
 done
-done
+  done
 IFS=$as_save_IFS
 
 fi
 fi
 F77=$ac_cv_prog_F77
 if test -n "$F77"; then
-  { echo "$as_me:$LINENO: result: $F77" >&5
-echo "${ECHO_T}$F77" >&6; }
+  { printf "%s\n" "$as_me:${as_lineno-$LINENO}: result: $F77" >&5
+printf "%s\n" "$F77" >&6; }
 else
-  { echo "$as_me:$LINENO: result: no" >&5
-echo "${ECHO_T}no" >&6; }
+  { printf "%s\n" "$as_me:${as_lineno-$LINENO}: result: no" >&5
+printf "%s\n" "no" >&6; }
 fi
 
 
   test -n "$F77" && break
 done
 
-      test -z "$F77" && { { echo "$as_me:$LINENO: error: no acceptable f77 found in \$PATH" >&5
-echo "$as_me: error: no acceptable f77 found in \$PATH" >&2;}
-   { (exit 1); exit 1; }; }
+      test -z "$F77" && as_fn_error $? "no acceptable f77 found in \$PATH" "$LINENO" 5
       FFLAGS="-g -O"
 
    fi
@@ -6951,9 +7608,7 @@ echo "$as_me: error: no acceptable f77 found in \$PATH" >&2;}
 EOF
    $F77 $FFLAGS -c confftest.f > /dev/null 2>&1
    if test ! -s confftest.o ; then
-        { { echo "$as_me:$LINENO: error: Unable to compile a Fortran test program" >&5
-echo "$as_me: error: Unable to compile a Fortran test program" >&2;}
-   { (exit 1); exit 1; }; }
+        as_fn_error $? "Unable to compile a Fortran test program" "$LINENO" 5
         NOF77=1
         HAS_FORTRAN=0
    elif test -z "$FORTRANNAMES" ; then
@@ -6973,48 +7628,40 @@ echo "$as_me: error: Unable to compile a Fortran test program" >&2;}
      nameform4=`strings -a confftest.o | grep mpir_init_fop__ | head -1`
     fi
     /bin/rm -f confftest.f confftest.o
-    { echo "$as_me:$LINENO: checking Fortran external names" >&5
-echo $ECHO_N "checking Fortran external names... $ECHO_C" >&6; }
+    { printf "%s\n" "$as_me:${as_lineno-$LINENO}: checking Fortran external names" >&5
+printf %s "checking Fortran external names... " >&6; }
     if test -n "$nameform4" ; then
 
-cat >>confdefs.h <<\_ACEOF
-#define FORTRAN_DOUBLE_UNDERSCORE 1
-_ACEOF
+printf "%s\n" "#define FORTRAN_DOUBLE_UNDERSCORE 1" >>confdefs.h
 
-        { echo "$as_me:$LINENO: result: lowercase with one or two trailing underscores" >&5
-echo "${ECHO_T}lowercase with one or two trailing underscores" >&6; }
+        { printf "%s\n" "$as_me:${as_lineno-$LINENO}: result: lowercase with one or two trailing underscores" >&5
+printf "%s\n" "lowercase with one or two trailing underscores" >&6; }
         FORTRANNAMES="FORTRANDOUBLEUNDERSCORE"
     elif test -n "$nameform1" ; then
         # We don't set this in CFLAGS; it is a default case
 
-cat >>confdefs.h <<\_ACEOF
-#define FORTRAN_UNDERSCORE 1
-_ACEOF
+printf "%s\n" "#define FORTRAN_UNDERSCORE 1" >>confdefs.h
 
-        { echo "$as_me:$LINENO: result: lowercase with a trailing underscore" >&5
-echo "${ECHO_T}lowercase with a trailing underscore" >&6; }
+        { printf "%s\n" "$as_me:${as_lineno-$LINENO}: result: lowercase with a trailing underscore" >&5
+printf "%s\n" "lowercase with a trailing underscore" >&6; }
         FORTRANNAMES="FORTRANUNDERSCORE"
     elif test -n "$nameform2" ; then
 
-cat >>confdefs.h <<\_ACEOF
-#define FORTRAN_CAPS 1
-_ACEOF
+printf "%s\n" "#define FORTRAN_CAPS 1" >>confdefs.h
 
-        { echo "$as_me:$LINENO: result: uppercase" >&5
-echo "${ECHO_T}uppercase" >&6; }
+        { printf "%s\n" "$as_me:${as_lineno-$LINENO}: result: uppercase" >&5
+printf "%s\n" "uppercase" >&6; }
         FORTRANNAMES="FORTRANCAPS"
     elif test -n "$nameform3" ; then
 
-cat >>confdefs.h <<\_ACEOF
-#define FORTRAN_NO_UNDERSCORE 1
-_ACEOF
+printf "%s\n" "#define FORTRAN_NO_UNDERSCORE 1" >>confdefs.h
 
-        { echo "$as_me:$LINENO: result: lowercase" >&5
-echo "${ECHO_T}lowercase" >&6; }
+        { printf "%s\n" "$as_me:${as_lineno-$LINENO}: result: lowercase" >&5
+printf "%s\n" "lowercase" >&6; }
         FORTRANNAMES="FORTRANNOUNDERSCORE"
     else
-        { echo "$as_me:$LINENO: result: unknown" >&5
-echo "${ECHO_T}unknown" >&6; }
+        { printf "%s\n" "$as_me:${as_lineno-$LINENO}: result: unknown" >&5
+printf "%s\n" "unknown" >&6; }
 #       print_error "If you have problems linking, try using the -nof77 option"
 #        print_error "to configure and rebuild MPICH."
         NOF77=1
@@ -7027,11 +7674,12 @@ echo "${ECHO_T}unknown" >&6; }
     fi
 
 
-   { echo "$as_me:$LINENO: checking for Fortran libraries" >&5
-echo $ECHO_N "checking for Fortran libraries... $ECHO_C" >&6; }
-if test "${casc_cv_f77flags+set}" = set; then
-  echo $ECHO_N "(cached) $ECHO_C" >&6
-else
+   { printf "%s\n" "$as_me:${as_lineno-$LINENO}: checking for Fortran libraries" >&5
+printf %s "checking for Fortran libraries... " >&6; }
+if test ${casc_cv_f77flags+y}
+then :
+  printf %s "(cached) " >&6
+else $as_nop
 
       if test -z "$F77LIBFLAGS"; then
 
@@ -7192,7 +7840,7 @@ else
   fi
     rm -f conftest.f conftest.o conftest
 
-  FLIBS="$flibs_result"
+  FLIBS="" # We never use FLIBS and it sometimes has quotes it in it, so disable it completely
 
          for casc_flag in $flibs_result; do
 
@@ -7272,73 +7920,48 @@ EOF
 
    # Checks if the LIBRARY from the argument list can be used to link
    # a C test program with testflib
-   as_ac_Lib=`echo "ac_cv_lib_$casc_lib_name''_$THIS_FUNCTION" | $as_tr_sh`
-{ echo "$as_me:$LINENO: checking for $THIS_FUNCTION in -l$casc_lib_name" >&5
-echo $ECHO_N "checking for $THIS_FUNCTION in -l$casc_lib_name... $ECHO_C" >&6; }
-if { as_var=$as_ac_Lib; eval "test \"\${$as_var+set}\" = set"; }; then
-  echo $ECHO_N "(cached) $ECHO_C" >&6
-else
+   as_ac_Lib=`printf "%s\n" "ac_cv_lib_$casc_lib_name""_$THIS_FUNCTION" | $as_tr_sh`
+{ printf "%s\n" "$as_me:${as_lineno-$LINENO}: checking for $THIS_FUNCTION in -l$casc_lib_name" >&5
+printf %s "checking for $THIS_FUNCTION in -l$casc_lib_name... " >&6; }
+if eval test \${$as_ac_Lib+y}
+then :
+  printf %s "(cached) " >&6
+else $as_nop
   ac_check_lib_save_LIBS=$LIBS
 LIBS="-l$casc_lib_name testflib_.o $F77LIBFLAGS $LIBS"
-cat >conftest.$ac_ext <<_ACEOF
-/* confdefs.h.  */
-_ACEOF
-cat confdefs.h >>conftest.$ac_ext
-cat >>conftest.$ac_ext <<_ACEOF
+cat confdefs.h - <<_ACEOF >conftest.$ac_ext
 /* end confdefs.h.  */
 
 /* Override any GCC internal prototype to avoid an error.
    Use char because int might match the return type of a GCC
    builtin and then its argument prototype would still apply.  */
-#ifdef __cplusplus
-extern "C"
-#endif
 char $THIS_FUNCTION ();
 int
-main ()
+main (void)
 {
 return $THIS_FUNCTION ();
   ;
   return 0;
 }
 _ACEOF
-rm -f conftest.$ac_objext conftest$ac_exeext
-if { (ac_try="$ac_link"
-case "(($ac_try" in
-  *\"* | *\`* | *\\*) ac_try_echo=\$ac_try;;
-  *) ac_try_echo=$ac_try;;
-esac
-eval "echo \"\$as_me:$LINENO: $ac_try_echo\"") >&5
-  (eval "$ac_link") 2>conftest.er1
-  ac_status=$?
-  grep -v '^ *+' conftest.er1 >conftest.err
-  rm -f conftest.er1
-  cat conftest.err >&5
-  echo "$as_me:$LINENO: \$? = $ac_status" >&5
-  (exit $ac_status); } && {
-	 test -z "$ac_c_werror_flag" ||
-	 test ! -s conftest.err
-       } && test -s conftest$ac_exeext &&
-       $as_test_x conftest$ac_exeext; then
+if ac_fn_c_try_link "$LINENO"
+then :
   eval "$as_ac_Lib=yes"
-else
-  echo "$as_me: failed program was:" >&5
-sed 's/^/| /' conftest.$ac_ext >&5
-
-	eval "$as_ac_Lib=no"
+else $as_nop
+  eval "$as_ac_Lib=no"
 fi
-
-rm -f core conftest.err conftest.$ac_objext conftest_ipa8_conftest.oo \
-      conftest$ac_exeext conftest.$ac_ext
+rm -f core conftest.err conftest.$ac_objext conftest.beam \
+    conftest$ac_exeext conftest.$ac_ext
 LIBS=$ac_check_lib_save_LIBS
 fi
-ac_res=`eval echo '${'$as_ac_Lib'}'`
-	       { echo "$as_me:$LINENO: result: $ac_res" >&5
-echo "${ECHO_T}$ac_res" >&6; }
-if test `eval echo '${'$as_ac_Lib'}'` = yes; then
+eval ac_res=\$$as_ac_Lib
+	       { printf "%s\n" "$as_me:${as_lineno-$LINENO}: result: $ac_res" >&5
+printf "%s\n" "$ac_res" >&6; }
+if eval test \"x\$"$as_ac_Lib"\" = x"yes"
+then :
   F77LIBFLAGS="$F77LIBFLAGS $casc_flag"
                   casc_result=yes
-else
+else $as_nop
   F77LIBFLAGS="$F77LIBFLAGS $casc_flag"
 fi
 
@@ -7406,70 +8029,45 @@ EOF
 
    # Checks if the LIBRARY from the argument list can be used to link
    # a C test program with testflib
-   as_ac_Lib=`echo "ac_cv_lib_f2c_$THIS_FUNCTION" | $as_tr_sh`
-{ echo "$as_me:$LINENO: checking for $THIS_FUNCTION in -lf2c" >&5
-echo $ECHO_N "checking for $THIS_FUNCTION in -lf2c... $ECHO_C" >&6; }
-if { as_var=$as_ac_Lib; eval "test \"\${$as_var+set}\" = set"; }; then
-  echo $ECHO_N "(cached) $ECHO_C" >&6
-else
+   as_ac_Lib=`printf "%s\n" "ac_cv_lib_f2c_$THIS_FUNCTION" | $as_tr_sh`
+{ printf "%s\n" "$as_me:${as_lineno-$LINENO}: checking for $THIS_FUNCTION in -lf2c" >&5
+printf %s "checking for $THIS_FUNCTION in -lf2c... " >&6; }
+if eval test \${$as_ac_Lib+y}
+then :
+  printf %s "(cached) " >&6
+else $as_nop
   ac_check_lib_save_LIBS=$LIBS
 LIBS="-lf2c testflib_.o -L/home/casc/g77/lib -lf2c $LIBS"
-cat >conftest.$ac_ext <<_ACEOF
-/* confdefs.h.  */
-_ACEOF
-cat confdefs.h >>conftest.$ac_ext
-cat >>conftest.$ac_ext <<_ACEOF
+cat confdefs.h - <<_ACEOF >conftest.$ac_ext
 /* end confdefs.h.  */
 
 /* Override any GCC internal prototype to avoid an error.
    Use char because int might match the return type of a GCC
    builtin and then its argument prototype would still apply.  */
-#ifdef __cplusplus
-extern "C"
-#endif
 char $THIS_FUNCTION ();
 int
-main ()
+main (void)
 {
 return $THIS_FUNCTION ();
   ;
   return 0;
 }
 _ACEOF
-rm -f conftest.$ac_objext conftest$ac_exeext
-if { (ac_try="$ac_link"
-case "(($ac_try" in
-  *\"* | *\`* | *\\*) ac_try_echo=\$ac_try;;
-  *) ac_try_echo=$ac_try;;
-esac
-eval "echo \"\$as_me:$LINENO: $ac_try_echo\"") >&5
-  (eval "$ac_link") 2>conftest.er1
-  ac_status=$?
-  grep -v '^ *+' conftest.er1 >conftest.err
-  rm -f conftest.er1
-  cat conftest.err >&5
-  echo "$as_me:$LINENO: \$? = $ac_status" >&5
-  (exit $ac_status); } && {
-	 test -z "$ac_c_werror_flag" ||
-	 test ! -s conftest.err
-       } && test -s conftest$ac_exeext &&
-       $as_test_x conftest$ac_exeext; then
+if ac_fn_c_try_link "$LINENO"
+then :
   eval "$as_ac_Lib=yes"
-else
-  echo "$as_me: failed program was:" >&5
-sed 's/^/| /' conftest.$ac_ext >&5
-
-	eval "$as_ac_Lib=no"
+else $as_nop
+  eval "$as_ac_Lib=no"
 fi
-
-rm -f core conftest.err conftest.$ac_objext conftest_ipa8_conftest.oo \
-      conftest$ac_exeext conftest.$ac_ext
+rm -f core conftest.err conftest.$ac_objext conftest.beam \
+    conftest$ac_exeext conftest.$ac_ext
 LIBS=$ac_check_lib_save_LIBS
 fi
-ac_res=`eval echo '${'$as_ac_Lib'}'`
-	       { echo "$as_me:$LINENO: result: $ac_res" >&5
-echo "${ECHO_T}$ac_res" >&6; }
-if test `eval echo '${'$as_ac_Lib'}'` = yes; then
+eval ac_res=\$$as_ac_Lib
+	       { printf "%s\n" "$as_me:${as_lineno-$LINENO}: result: $ac_res" >&5
+printf "%s\n" "$ac_res" >&6; }
+if eval test \"x\$"$as_ac_Lib"\" = x"yes"
+then :
   F77LIBDIRS="-L/home/casc/g77/lib"
                                           F77LIBS="-lf2c"
 
@@ -7520,70 +8118,45 @@ EOF
 
    # Checks if the LIBRARY from the argument list can be used to link
    # a C test program with testflib
-   as_ac_Lib=`echo "ac_cv_lib_sunmath_$THIS_FUNCTION" | $as_tr_sh`
-{ echo "$as_me:$LINENO: checking for $THIS_FUNCTION in -lsunmath" >&5
-echo $ECHO_N "checking for $THIS_FUNCTION in -lsunmath... $ECHO_C" >&6; }
-if { as_var=$as_ac_Lib; eval "test \"\${$as_var+set}\" = set"; }; then
-  echo $ECHO_N "(cached) $ECHO_C" >&6
-else
+   as_ac_Lib=`printf "%s\n" "ac_cv_lib_sunmath_$THIS_FUNCTION" | $as_tr_sh`
+{ printf "%s\n" "$as_me:${as_lineno-$LINENO}: checking for $THIS_FUNCTION in -lsunmath" >&5
+printf %s "checking for $THIS_FUNCTION in -lsunmath... " >&6; }
+if eval test \${$as_ac_Lib+y}
+then :
+  printf %s "(cached) " >&6
+else $as_nop
   ac_check_lib_save_LIBS=$LIBS
 LIBS="-lsunmath testflib_.o -L/opt/SUNWspro/SC5.0/lib -lF77 -lsunmath $LIBS"
-cat >conftest.$ac_ext <<_ACEOF
-/* confdefs.h.  */
-_ACEOF
-cat confdefs.h >>conftest.$ac_ext
-cat >>conftest.$ac_ext <<_ACEOF
+cat confdefs.h - <<_ACEOF >conftest.$ac_ext
 /* end confdefs.h.  */
 
 /* Override any GCC internal prototype to avoid an error.
    Use char because int might match the return type of a GCC
    builtin and then its argument prototype would still apply.  */
-#ifdef __cplusplus
-extern "C"
-#endif
 char $THIS_FUNCTION ();
 int
-main ()
+main (void)
 {
 return $THIS_FUNCTION ();
   ;
   return 0;
 }
 _ACEOF
-rm -f conftest.$ac_objext conftest$ac_exeext
-if { (ac_try="$ac_link"
-case "(($ac_try" in
-  *\"* | *\`* | *\\*) ac_try_echo=\$ac_try;;
-  *) ac_try_echo=$ac_try;;
-esac
-eval "echo \"\$as_me:$LINENO: $ac_try_echo\"") >&5
-  (eval "$ac_link") 2>conftest.er1
-  ac_status=$?
-  grep -v '^ *+' conftest.er1 >conftest.err
-  rm -f conftest.er1
-  cat conftest.err >&5
-  echo "$as_me:$LINENO: \$? = $ac_status" >&5
-  (exit $ac_status); } && {
-	 test -z "$ac_c_werror_flag" ||
-	 test ! -s conftest.err
-       } && test -s conftest$ac_exeext &&
-       $as_test_x conftest$ac_exeext; then
+if ac_fn_c_try_link "$LINENO"
+then :
   eval "$as_ac_Lib=yes"
-else
-  echo "$as_me: failed program was:" >&5
-sed 's/^/| /' conftest.$ac_ext >&5
-
-	eval "$as_ac_Lib=no"
+else $as_nop
+  eval "$as_ac_Lib=no"
 fi
-
-rm -f core conftest.err conftest.$ac_objext conftest_ipa8_conftest.oo \
-      conftest$ac_exeext conftest.$ac_ext
+rm -f core conftest.err conftest.$ac_objext conftest.beam \
+    conftest$ac_exeext conftest.$ac_ext
 LIBS=$ac_check_lib_save_LIBS
 fi
-ac_res=`eval echo '${'$as_ac_Lib'}'`
-	       { echo "$as_me:$LINENO: result: $ac_res" >&5
-echo "${ECHO_T}$ac_res" >&6; }
-if test `eval echo '${'$as_ac_Lib'}'` = yes; then
+eval ac_res=\$$as_ac_Lib
+	       { printf "%s\n" "$as_me:${as_lineno-$LINENO}: result: $ac_res" >&5
+printf "%s\n" "$ac_res" >&6; }
+if eval test \"x\$"$as_ac_Lib"\" = x"yes"
+then :
   F77LIBDIRS="-L/opt/SUNWspro/SC5.0/lib"
                                    F77LIBS="-lF77 -lsunmath"
 
@@ -7636,70 +8209,45 @@ EOF
 
    # Checks if the LIBRARY from the argument list can be used to link
    # a C test program with testflib
-   as_ac_Lib=`echo "ac_cv_lib_for_$THIS_FUNCTION" | $as_tr_sh`
-{ echo "$as_me:$LINENO: checking for $THIS_FUNCTION in -lfor" >&5
-echo $ECHO_N "checking for $THIS_FUNCTION in -lfor... $ECHO_C" >&6; }
-if { as_var=$as_ac_Lib; eval "test \"\${$as_var+set}\" = set"; }; then
-  echo $ECHO_N "(cached) $ECHO_C" >&6
-else
+   as_ac_Lib=`printf "%s\n" "ac_cv_lib_for_$THIS_FUNCTION" | $as_tr_sh`
+{ printf "%s\n" "$as_me:${as_lineno-$LINENO}: checking for $THIS_FUNCTION in -lfor" >&5
+printf %s "checking for $THIS_FUNCTION in -lfor... " >&6; }
+if eval test \${$as_ac_Lib+y}
+then :
+  printf %s "(cached) " >&6
+else $as_nop
   ac_check_lib_save_LIBS=$LIBS
 LIBS="-lfor testflib_.o  $LIBS"
-cat >conftest.$ac_ext <<_ACEOF
-/* confdefs.h.  */
-_ACEOF
-cat confdefs.h >>conftest.$ac_ext
-cat >>conftest.$ac_ext <<_ACEOF
+cat confdefs.h - <<_ACEOF >conftest.$ac_ext
 /* end confdefs.h.  */
 
 /* Override any GCC internal prototype to avoid an error.
    Use char because int might match the return type of a GCC
    builtin and then its argument prototype would still apply.  */
-#ifdef __cplusplus
-extern "C"
-#endif
 char $THIS_FUNCTION ();
 int
-main ()
+main (void)
 {
 return $THIS_FUNCTION ();
   ;
   return 0;
 }
 _ACEOF
-rm -f conftest.$ac_objext conftest$ac_exeext
-if { (ac_try="$ac_link"
-case "(($ac_try" in
-  *\"* | *\`* | *\\*) ac_try_echo=\$ac_try;;
-  *) ac_try_echo=$ac_try;;
-esac
-eval "echo \"\$as_me:$LINENO: $ac_try_echo\"") >&5
-  (eval "$ac_link") 2>conftest.er1
-  ac_status=$?
-  grep -v '^ *+' conftest.er1 >conftest.err
-  rm -f conftest.er1
-  cat conftest.err >&5
-  echo "$as_me:$LINENO: \$? = $ac_status" >&5
-  (exit $ac_status); } && {
-	 test -z "$ac_c_werror_flag" ||
-	 test ! -s conftest.err
-       } && test -s conftest$ac_exeext &&
-       $as_test_x conftest$ac_exeext; then
+if ac_fn_c_try_link "$LINENO"
+then :
   eval "$as_ac_Lib=yes"
-else
-  echo "$as_me: failed program was:" >&5
-sed 's/^/| /' conftest.$ac_ext >&5
-
-	eval "$as_ac_Lib=no"
+else $as_nop
+  eval "$as_ac_Lib=no"
 fi
-
-rm -f core conftest.err conftest.$ac_objext conftest_ipa8_conftest.oo \
-      conftest$ac_exeext conftest.$ac_ext
+rm -f core conftest.err conftest.$ac_objext conftest.beam \
+    conftest$ac_exeext conftest.$ac_ext
 LIBS=$ac_check_lib_save_LIBS
 fi
-ac_res=`eval echo '${'$as_ac_Lib'}'`
-	       { echo "$as_me:$LINENO: result: $ac_res" >&5
-echo "${ECHO_T}$ac_res" >&6; }
-if test `eval echo '${'$as_ac_Lib'}'` = yes; then
+eval ac_res=\$$as_ac_Lib
+	       { printf "%s\n" "$as_me:${as_lineno-$LINENO}: result: $ac_res" >&5
+printf "%s\n" "$ac_res" >&6; }
+if eval test \"x\$"$as_ac_Lib"\" = x"yes"
+then :
   F77LIBS="-lfor"
 fi
 
@@ -7749,70 +8297,45 @@ EOF
 
    # Checks if the LIBRARY from the argument list can be used to link
    # a C test program with testflib
-   as_ac_Lib=`echo "ac_cv_lib_xlf90_$THIS_FUNCTION" | $as_tr_sh`
-{ echo "$as_me:$LINENO: checking for $THIS_FUNCTION in -lxlf90" >&5
-echo $ECHO_N "checking for $THIS_FUNCTION in -lxlf90... $ECHO_C" >&6; }
-if { as_var=$as_ac_Lib; eval "test \"\${$as_var+set}\" = set"; }; then
-  echo $ECHO_N "(cached) $ECHO_C" >&6
-else
+   as_ac_Lib=`printf "%s\n" "ac_cv_lib_xlf90_$THIS_FUNCTION" | $as_tr_sh`
+{ printf "%s\n" "$as_me:${as_lineno-$LINENO}: checking for $THIS_FUNCTION in -lxlf90" >&5
+printf %s "checking for $THIS_FUNCTION in -lxlf90... " >&6; }
+if eval test \${$as_ac_Lib+y}
+then :
+  printf %s "(cached) " >&6
+else $as_nop
   ac_check_lib_save_LIBS=$LIBS
 LIBS="-lxlf90 testflib_.o  $LIBS"
-cat >conftest.$ac_ext <<_ACEOF
-/* confdefs.h.  */
-_ACEOF
-cat confdefs.h >>conftest.$ac_ext
-cat >>conftest.$ac_ext <<_ACEOF
+cat confdefs.h - <<_ACEOF >conftest.$ac_ext
 /* end confdefs.h.  */
 
 /* Override any GCC internal prototype to avoid an error.
    Use char because int might match the return type of a GCC
    builtin and then its argument prototype would still apply.  */
-#ifdef __cplusplus
-extern "C"
-#endif
 char $THIS_FUNCTION ();
 int
-main ()
+main (void)
 {
 return $THIS_FUNCTION ();
   ;
   return 0;
 }
 _ACEOF
-rm -f conftest.$ac_objext conftest$ac_exeext
-if { (ac_try="$ac_link"
-case "(($ac_try" in
-  *\"* | *\`* | *\\*) ac_try_echo=\$ac_try;;
-  *) ac_try_echo=$ac_try;;
-esac
-eval "echo \"\$as_me:$LINENO: $ac_try_echo\"") >&5
-  (eval "$ac_link") 2>conftest.er1
-  ac_status=$?
-  grep -v '^ *+' conftest.er1 >conftest.err
-  rm -f conftest.er1
-  cat conftest.err >&5
-  echo "$as_me:$LINENO: \$? = $ac_status" >&5
-  (exit $ac_status); } && {
-	 test -z "$ac_c_werror_flag" ||
-	 test ! -s conftest.err
-       } && test -s conftest$ac_exeext &&
-       $as_test_x conftest$ac_exeext; then
+if ac_fn_c_try_link "$LINENO"
+then :
   eval "$as_ac_Lib=yes"
-else
-  echo "$as_me: failed program was:" >&5
-sed 's/^/| /' conftest.$ac_ext >&5
-
-	eval "$as_ac_Lib=no"
+else $as_nop
+  eval "$as_ac_Lib=no"
 fi
-
-rm -f core conftest.err conftest.$ac_objext conftest_ipa8_conftest.oo \
-      conftest$ac_exeext conftest.$ac_ext
+rm -f core conftest.err conftest.$ac_objext conftest.beam \
+    conftest$ac_exeext conftest.$ac_ext
 LIBS=$ac_check_lib_save_LIBS
 fi
-ac_res=`eval echo '${'$as_ac_Lib'}'`
-	       { echo "$as_me:$LINENO: result: $ac_res" >&5
-echo "${ECHO_T}$ac_res" >&6; }
-if test `eval echo '${'$as_ac_Lib'}'` = yes; then
+eval ac_res=\$$as_ac_Lib
+	       { printf "%s\n" "$as_me:${as_lineno-$LINENO}: result: $ac_res" >&5
+printf "%s\n" "$ac_res" >&6; }
+if eval test \"x\$"$as_ac_Lib"\" = x"yes"
+then :
   F77LIBS="-lxlf90"
 fi
 
@@ -7862,70 +8385,45 @@ EOF
 
    # Checks if the LIBRARY from the argument list can be used to link
    # a C test program with testflib
-   as_ac_Lib=`echo "ac_cv_lib_I77_$THIS_FUNCTION" | $as_tr_sh`
-{ echo "$as_me:$LINENO: checking for $THIS_FUNCTION in -lI77" >&5
-echo $ECHO_N "checking for $THIS_FUNCTION in -lI77... $ECHO_C" >&6; }
-if { as_var=$as_ac_Lib; eval "test \"\${$as_var+set}\" = set"; }; then
-  echo $ECHO_N "(cached) $ECHO_C" >&6
-else
+   as_ac_Lib=`printf "%s\n" "ac_cv_lib_I77_$THIS_FUNCTION" | $as_tr_sh`
+{ printf "%s\n" "$as_me:${as_lineno-$LINENO}: checking for $THIS_FUNCTION in -lI77" >&5
+printf %s "checking for $THIS_FUNCTION in -lI77... " >&6; }
+if eval test \${$as_ac_Lib+y}
+then :
+  printf %s "(cached) " >&6
+else $as_nop
   ac_check_lib_save_LIBS=$LIBS
 LIBS="-lI77 testflib_.o -lF77 -lU77 -lI77 -lisam $LIBS"
-cat >conftest.$ac_ext <<_ACEOF
-/* confdefs.h.  */
-_ACEOF
-cat confdefs.h >>conftest.$ac_ext
-cat >>conftest.$ac_ext <<_ACEOF
+cat confdefs.h - <<_ACEOF >conftest.$ac_ext
 /* end confdefs.h.  */
 
 /* Override any GCC internal prototype to avoid an error.
    Use char because int might match the return type of a GCC
    builtin and then its argument prototype would still apply.  */
-#ifdef __cplusplus
-extern "C"
-#endif
 char $THIS_FUNCTION ();
 int
-main ()
+main (void)
 {
 return $THIS_FUNCTION ();
   ;
   return 0;
 }
 _ACEOF
-rm -f conftest.$ac_objext conftest$ac_exeext
-if { (ac_try="$ac_link"
-case "(($ac_try" in
-  *\"* | *\`* | *\\*) ac_try_echo=\$ac_try;;
-  *) ac_try_echo=$ac_try;;
-esac
-eval "echo \"\$as_me:$LINENO: $ac_try_echo\"") >&5
-  (eval "$ac_link") 2>conftest.er1
-  ac_status=$?
-  grep -v '^ *+' conftest.er1 >conftest.err
-  rm -f conftest.er1
-  cat conftest.err >&5
-  echo "$as_me:$LINENO: \$? = $ac_status" >&5
-  (exit $ac_status); } && {
-	 test -z "$ac_c_werror_flag" ||
-	 test ! -s conftest.err
-       } && test -s conftest$ac_exeext &&
-       $as_test_x conftest$ac_exeext; then
+if ac_fn_c_try_link "$LINENO"
+then :
   eval "$as_ac_Lib=yes"
-else
-  echo "$as_me: failed program was:" >&5
-sed 's/^/| /' conftest.$ac_ext >&5
-
-	eval "$as_ac_Lib=no"
+else $as_nop
+  eval "$as_ac_Lib=no"
 fi
-
-rm -f core conftest.err conftest.$ac_objext conftest_ipa8_conftest.oo \
-      conftest$ac_exeext conftest.$ac_ext
+rm -f core conftest.err conftest.$ac_objext conftest.beam \
+    conftest$ac_exeext conftest.$ac_ext
 LIBS=$ac_check_lib_save_LIBS
 fi
-ac_res=`eval echo '${'$as_ac_Lib'}'`
-	       { echo "$as_me:$LINENO: result: $ac_res" >&5
-echo "${ECHO_T}$ac_res" >&6; }
-if test `eval echo '${'$as_ac_Lib'}'` = yes; then
+eval ac_res=\$$as_ac_Lib
+	       { printf "%s\n" "$as_me:${as_lineno-$LINENO}: result: $ac_res" >&5
+printf "%s\n" "$ac_res" >&6; }
+if eval test \"x\$"$as_ac_Lib"\" = x"yes"
+then :
   F77LIBS="-lF77 -lU77 -lI77 -lisam"
 fi
 
@@ -7935,9 +8433,9 @@ fi
 ;;
 
          *)
-            { echo "$as_me:$LINENO: WARNING: unable to set F77LIBFLAGS.  They must be set as a shell variable or
+            { printf "%s\n" "$as_me:${as_lineno-$LINENO}: WARNING: unable to set F77LIBFLAGS.  They must be set as a shell variable or
  with a command-line option" >&5
-echo "$as_me: WARNING: unable to set F77LIBFLAGS.  They must be set as a shell variable or
+printf "%s\n" "$as_me: WARNING: unable to set F77LIBFLAGS.  They must be set as a shell variable or
  with a command-line option" >&2;}
          ;;
 
@@ -7978,8 +8476,8 @@ echo "$as_me: WARNING: unable to set F77LIBFLAGS.  They must be set as a shell v
       casc_cv_f77flags=$F77LIBFLAGS
 
 fi
-{ echo "$as_me:$LINENO: result: $casc_cv_f77flags" >&5
-echo "${ECHO_T}$casc_cv_f77flags" >&6; }
+{ printf "%s\n" "$as_me:${as_lineno-$LINENO}: result: $casc_cv_f77flags" >&5
+printf "%s\n" "$casc_cv_f77flags" >&6; }
 
       F77LIBFLAGS=$casc_cv_f77flags
 
@@ -8000,11 +8498,12 @@ echo "${ECHO_T}$casc_cv_f77flags" >&6; }
       ;;
    LINUX)
 
-   { echo "$as_me:$LINENO: checking for Fortran libraries" >&5
-echo $ECHO_N "checking for Fortran libraries... $ECHO_C" >&6; }
-if test "${casc_cv_f77flags+set}" = set; then
-  echo $ECHO_N "(cached) $ECHO_C" >&6
-else
+   { printf "%s\n" "$as_me:${as_lineno-$LINENO}: checking for Fortran libraries" >&5
+printf %s "checking for Fortran libraries... " >&6; }
+if test ${casc_cv_f77flags+y}
+then :
+  printf %s "(cached) " >&6
+else $as_nop
 
       if test -z "$F77LIBFLAGS"; then
 
@@ -8165,7 +8664,7 @@ else
   fi
     rm -f conftest.f conftest.o conftest
 
-  FLIBS="$flibs_result"
+  FLIBS="" # We never use FLIBS and it sometimes has quotes it in it, so disable it completely
 
          for casc_flag in $flibs_result; do
 
@@ -8245,73 +8744,48 @@ EOF
 
    # Checks if the LIBRARY from the argument list can be used to link
    # a C test program with testflib
-   as_ac_Lib=`echo "ac_cv_lib_$casc_lib_name''_$THIS_FUNCTION" | $as_tr_sh`
-{ echo "$as_me:$LINENO: checking for $THIS_FUNCTION in -l$casc_lib_name" >&5
-echo $ECHO_N "checking for $THIS_FUNCTION in -l$casc_lib_name... $ECHO_C" >&6; }
-if { as_var=$as_ac_Lib; eval "test \"\${$as_var+set}\" = set"; }; then
-  echo $ECHO_N "(cached) $ECHO_C" >&6
-else
+   as_ac_Lib=`printf "%s\n" "ac_cv_lib_$casc_lib_name""_$THIS_FUNCTION" | $as_tr_sh`
+{ printf "%s\n" "$as_me:${as_lineno-$LINENO}: checking for $THIS_FUNCTION in -l$casc_lib_name" >&5
+printf %s "checking for $THIS_FUNCTION in -l$casc_lib_name... " >&6; }
+if eval test \${$as_ac_Lib+y}
+then :
+  printf %s "(cached) " >&6
+else $as_nop
   ac_check_lib_save_LIBS=$LIBS
 LIBS="-l$casc_lib_name testflib_.o $F77LIBFLAGS $LIBS"
-cat >conftest.$ac_ext <<_ACEOF
-/* confdefs.h.  */
-_ACEOF
-cat confdefs.h >>conftest.$ac_ext
-cat >>conftest.$ac_ext <<_ACEOF
+cat confdefs.h - <<_ACEOF >conftest.$ac_ext
 /* end confdefs.h.  */
 
 /* Override any GCC internal prototype to avoid an error.
    Use char because int might match the return type of a GCC
    builtin and then its argument prototype would still apply.  */
-#ifdef __cplusplus
-extern "C"
-#endif
 char $THIS_FUNCTION ();
 int
-main ()
+main (void)
 {
 return $THIS_FUNCTION ();
   ;
   return 0;
 }
 _ACEOF
-rm -f conftest.$ac_objext conftest$ac_exeext
-if { (ac_try="$ac_link"
-case "(($ac_try" in
-  *\"* | *\`* | *\\*) ac_try_echo=\$ac_try;;
-  *) ac_try_echo=$ac_try;;
-esac
-eval "echo \"\$as_me:$LINENO: $ac_try_echo\"") >&5
-  (eval "$ac_link") 2>conftest.er1
-  ac_status=$?
-  grep -v '^ *+' conftest.er1 >conftest.err
-  rm -f conftest.er1
-  cat conftest.err >&5
-  echo "$as_me:$LINENO: \$? = $ac_status" >&5
-  (exit $ac_status); } && {
-	 test -z "$ac_c_werror_flag" ||
-	 test ! -s conftest.err
-       } && test -s conftest$ac_exeext &&
-       $as_test_x conftest$ac_exeext; then
+if ac_fn_c_try_link "$LINENO"
+then :
   eval "$as_ac_Lib=yes"
-else
-  echo "$as_me: failed program was:" >&5
-sed 's/^/| /' conftest.$ac_ext >&5
-
-	eval "$as_ac_Lib=no"
+else $as_nop
+  eval "$as_ac_Lib=no"
 fi
-
-rm -f core conftest.err conftest.$ac_objext conftest_ipa8_conftest.oo \
-      conftest$ac_exeext conftest.$ac_ext
+rm -f core conftest.err conftest.$ac_objext conftest.beam \
+    conftest$ac_exeext conftest.$ac_ext
 LIBS=$ac_check_lib_save_LIBS
 fi
-ac_res=`eval echo '${'$as_ac_Lib'}'`
-	       { echo "$as_me:$LINENO: result: $ac_res" >&5
-echo "${ECHO_T}$ac_res" >&6; }
-if test `eval echo '${'$as_ac_Lib'}'` = yes; then
+eval ac_res=\$$as_ac_Lib
+	       { printf "%s\n" "$as_me:${as_lineno-$LINENO}: result: $ac_res" >&5
+printf "%s\n" "$ac_res" >&6; }
+if eval test \"x\$"$as_ac_Lib"\" = x"yes"
+then :
   F77LIBFLAGS="$F77LIBFLAGS $casc_flag"
                   casc_result=yes
-else
+else $as_nop
   F77LIBFLAGS="$F77LIBFLAGS $casc_flag"
 fi
 
@@ -8379,70 +8853,45 @@ EOF
 
    # Checks if the LIBRARY from the argument list can be used to link
    # a C test program with testflib
-   as_ac_Lib=`echo "ac_cv_lib_f2c_$THIS_FUNCTION" | $as_tr_sh`
-{ echo "$as_me:$LINENO: checking for $THIS_FUNCTION in -lf2c" >&5
-echo $ECHO_N "checking for $THIS_FUNCTION in -lf2c... $ECHO_C" >&6; }
-if { as_var=$as_ac_Lib; eval "test \"\${$as_var+set}\" = set"; }; then
-  echo $ECHO_N "(cached) $ECHO_C" >&6
-else
+   as_ac_Lib=`printf "%s\n" "ac_cv_lib_f2c_$THIS_FUNCTION" | $as_tr_sh`
+{ printf "%s\n" "$as_me:${as_lineno-$LINENO}: checking for $THIS_FUNCTION in -lf2c" >&5
+printf %s "checking for $THIS_FUNCTION in -lf2c... " >&6; }
+if eval test \${$as_ac_Lib+y}
+then :
+  printf %s "(cached) " >&6
+else $as_nop
   ac_check_lib_save_LIBS=$LIBS
 LIBS="-lf2c testflib_.o -L/home/casc/g77/lib -lf2c $LIBS"
-cat >conftest.$ac_ext <<_ACEOF
-/* confdefs.h.  */
-_ACEOF
-cat confdefs.h >>conftest.$ac_ext
-cat >>conftest.$ac_ext <<_ACEOF
+cat confdefs.h - <<_ACEOF >conftest.$ac_ext
 /* end confdefs.h.  */
 
 /* Override any GCC internal prototype to avoid an error.
    Use char because int might match the return type of a GCC
    builtin and then its argument prototype would still apply.  */
-#ifdef __cplusplus
-extern "C"
-#endif
 char $THIS_FUNCTION ();
 int
-main ()
+main (void)
 {
 return $THIS_FUNCTION ();
   ;
   return 0;
 }
 _ACEOF
-rm -f conftest.$ac_objext conftest$ac_exeext
-if { (ac_try="$ac_link"
-case "(($ac_try" in
-  *\"* | *\`* | *\\*) ac_try_echo=\$ac_try;;
-  *) ac_try_echo=$ac_try;;
-esac
-eval "echo \"\$as_me:$LINENO: $ac_try_echo\"") >&5
-  (eval "$ac_link") 2>conftest.er1
-  ac_status=$?
-  grep -v '^ *+' conftest.er1 >conftest.err
-  rm -f conftest.er1
-  cat conftest.err >&5
-  echo "$as_me:$LINENO: \$? = $ac_status" >&5
-  (exit $ac_status); } && {
-	 test -z "$ac_c_werror_flag" ||
-	 test ! -s conftest.err
-       } && test -s conftest$ac_exeext &&
-       $as_test_x conftest$ac_exeext; then
+if ac_fn_c_try_link "$LINENO"
+then :
   eval "$as_ac_Lib=yes"
-else
-  echo "$as_me: failed program was:" >&5
-sed 's/^/| /' conftest.$ac_ext >&5
-
-	eval "$as_ac_Lib=no"
+else $as_nop
+  eval "$as_ac_Lib=no"
 fi
-
-rm -f core conftest.err conftest.$ac_objext conftest_ipa8_conftest.oo \
-      conftest$ac_exeext conftest.$ac_ext
+rm -f core conftest.err conftest.$ac_objext conftest.beam \
+    conftest$ac_exeext conftest.$ac_ext
 LIBS=$ac_check_lib_save_LIBS
 fi
-ac_res=`eval echo '${'$as_ac_Lib'}'`
-	       { echo "$as_me:$LINENO: result: $ac_res" >&5
-echo "${ECHO_T}$ac_res" >&6; }
-if test `eval echo '${'$as_ac_Lib'}'` = yes; then
+eval ac_res=\$$as_ac_Lib
+	       { printf "%s\n" "$as_me:${as_lineno-$LINENO}: result: $ac_res" >&5
+printf "%s\n" "$ac_res" >&6; }
+if eval test \"x\$"$as_ac_Lib"\" = x"yes"
+then :
   F77LIBDIRS="-L/home/casc/g77/lib"
                                           F77LIBS="-lf2c"
 
@@ -8493,70 +8942,45 @@ EOF
 
    # Checks if the LIBRARY from the argument list can be used to link
    # a C test program with testflib
-   as_ac_Lib=`echo "ac_cv_lib_sunmath_$THIS_FUNCTION" | $as_tr_sh`
-{ echo "$as_me:$LINENO: checking for $THIS_FUNCTION in -lsunmath" >&5
-echo $ECHO_N "checking for $THIS_FUNCTION in -lsunmath... $ECHO_C" >&6; }
-if { as_var=$as_ac_Lib; eval "test \"\${$as_var+set}\" = set"; }; then
-  echo $ECHO_N "(cached) $ECHO_C" >&6
-else
+   as_ac_Lib=`printf "%s\n" "ac_cv_lib_sunmath_$THIS_FUNCTION" | $as_tr_sh`
+{ printf "%s\n" "$as_me:${as_lineno-$LINENO}: checking for $THIS_FUNCTION in -lsunmath" >&5
+printf %s "checking for $THIS_FUNCTION in -lsunmath... " >&6; }
+if eval test \${$as_ac_Lib+y}
+then :
+  printf %s "(cached) " >&6
+else $as_nop
   ac_check_lib_save_LIBS=$LIBS
 LIBS="-lsunmath testflib_.o -L/opt/SUNWspro/SC5.0/lib -lF77 -lsunmath $LIBS"
-cat >conftest.$ac_ext <<_ACEOF
-/* confdefs.h.  */
-_ACEOF
-cat confdefs.h >>conftest.$ac_ext
-cat >>conftest.$ac_ext <<_ACEOF
+cat confdefs.h - <<_ACEOF >conftest.$ac_ext
 /* end confdefs.h.  */
 
 /* Override any GCC internal prototype to avoid an error.
    Use char because int might match the return type of a GCC
    builtin and then its argument prototype would still apply.  */
-#ifdef __cplusplus
-extern "C"
-#endif
 char $THIS_FUNCTION ();
 int
-main ()
+main (void)
 {
 return $THIS_FUNCTION ();
   ;
   return 0;
 }
 _ACEOF
-rm -f conftest.$ac_objext conftest$ac_exeext
-if { (ac_try="$ac_link"
-case "(($ac_try" in
-  *\"* | *\`* | *\\*) ac_try_echo=\$ac_try;;
-  *) ac_try_echo=$ac_try;;
-esac
-eval "echo \"\$as_me:$LINENO: $ac_try_echo\"") >&5
-  (eval "$ac_link") 2>conftest.er1
-  ac_status=$?
-  grep -v '^ *+' conftest.er1 >conftest.err
-  rm -f conftest.er1
-  cat conftest.err >&5
-  echo "$as_me:$LINENO: \$? = $ac_status" >&5
-  (exit $ac_status); } && {
-	 test -z "$ac_c_werror_flag" ||
-	 test ! -s conftest.err
-       } && test -s conftest$ac_exeext &&
-       $as_test_x conftest$ac_exeext; then
+if ac_fn_c_try_link "$LINENO"
+then :
   eval "$as_ac_Lib=yes"
-else
-  echo "$as_me: failed program was:" >&5
-sed 's/^/| /' conftest.$ac_ext >&5
-
-	eval "$as_ac_Lib=no"
+else $as_nop
+  eval "$as_ac_Lib=no"
 fi
-
-rm -f core conftest.err conftest.$ac_objext conftest_ipa8_conftest.oo \
-      conftest$ac_exeext conftest.$ac_ext
+rm -f core conftest.err conftest.$ac_objext conftest.beam \
+    conftest$ac_exeext conftest.$ac_ext
 LIBS=$ac_check_lib_save_LIBS
 fi
-ac_res=`eval echo '${'$as_ac_Lib'}'`
-	       { echo "$as_me:$LINENO: result: $ac_res" >&5
-echo "${ECHO_T}$ac_res" >&6; }
-if test `eval echo '${'$as_ac_Lib'}'` = yes; then
+eval ac_res=\$$as_ac_Lib
+	       { printf "%s\n" "$as_me:${as_lineno-$LINENO}: result: $ac_res" >&5
+printf "%s\n" "$ac_res" >&6; }
+if eval test \"x\$"$as_ac_Lib"\" = x"yes"
+then :
   F77LIBDIRS="-L/opt/SUNWspro/SC5.0/lib"
                                    F77LIBS="-lF77 -lsunmath"
 
@@ -8609,70 +9033,45 @@ EOF
 
    # Checks if the LIBRARY from the argument list can be used to link
    # a C test program with testflib
-   as_ac_Lib=`echo "ac_cv_lib_for_$THIS_FUNCTION" | $as_tr_sh`
-{ echo "$as_me:$LINENO: checking for $THIS_FUNCTION in -lfor" >&5
-echo $ECHO_N "checking for $THIS_FUNCTION in -lfor... $ECHO_C" >&6; }
-if { as_var=$as_ac_Lib; eval "test \"\${$as_var+set}\" = set"; }; then
-  echo $ECHO_N "(cached) $ECHO_C" >&6
-else
+   as_ac_Lib=`printf "%s\n" "ac_cv_lib_for_$THIS_FUNCTION" | $as_tr_sh`
+{ printf "%s\n" "$as_me:${as_lineno-$LINENO}: checking for $THIS_FUNCTION in -lfor" >&5
+printf %s "checking for $THIS_FUNCTION in -lfor... " >&6; }
+if eval test \${$as_ac_Lib+y}
+then :
+  printf %s "(cached) " >&6
+else $as_nop
   ac_check_lib_save_LIBS=$LIBS
 LIBS="-lfor testflib_.o  $LIBS"
-cat >conftest.$ac_ext <<_ACEOF
-/* confdefs.h.  */
-_ACEOF
-cat confdefs.h >>conftest.$ac_ext
-cat >>conftest.$ac_ext <<_ACEOF
+cat confdefs.h - <<_ACEOF >conftest.$ac_ext
 /* end confdefs.h.  */
 
 /* Override any GCC internal prototype to avoid an error.
    Use char because int might match the return type of a GCC
    builtin and then its argument prototype would still apply.  */
-#ifdef __cplusplus
-extern "C"
-#endif
 char $THIS_FUNCTION ();
 int
-main ()
+main (void)
 {
 return $THIS_FUNCTION ();
   ;
   return 0;
 }
 _ACEOF
-rm -f conftest.$ac_objext conftest$ac_exeext
-if { (ac_try="$ac_link"
-case "(($ac_try" in
-  *\"* | *\`* | *\\*) ac_try_echo=\$ac_try;;
-  *) ac_try_echo=$ac_try;;
-esac
-eval "echo \"\$as_me:$LINENO: $ac_try_echo\"") >&5
-  (eval "$ac_link") 2>conftest.er1
-  ac_status=$?
-  grep -v '^ *+' conftest.er1 >conftest.err
-  rm -f conftest.er1
-  cat conftest.err >&5
-  echo "$as_me:$LINENO: \$? = $ac_status" >&5
-  (exit $ac_status); } && {
-	 test -z "$ac_c_werror_flag" ||
-	 test ! -s conftest.err
-       } && test -s conftest$ac_exeext &&
-       $as_test_x conftest$ac_exeext; then
+if ac_fn_c_try_link "$LINENO"
+then :
   eval "$as_ac_Lib=yes"
-else
-  echo "$as_me: failed program was:" >&5
-sed 's/^/| /' conftest.$ac_ext >&5
-
-	eval "$as_ac_Lib=no"
+else $as_nop
+  eval "$as_ac_Lib=no"
 fi
-
-rm -f core conftest.err conftest.$ac_objext conftest_ipa8_conftest.oo \
-      conftest$ac_exeext conftest.$ac_ext
+rm -f core conftest.err conftest.$ac_objext conftest.beam \
+    conftest$ac_exeext conftest.$ac_ext
 LIBS=$ac_check_lib_save_LIBS
 fi
-ac_res=`eval echo '${'$as_ac_Lib'}'`
-	       { echo "$as_me:$LINENO: result: $ac_res" >&5
-echo "${ECHO_T}$ac_res" >&6; }
-if test `eval echo '${'$as_ac_Lib'}'` = yes; then
+eval ac_res=\$$as_ac_Lib
+	       { printf "%s\n" "$as_me:${as_lineno-$LINENO}: result: $ac_res" >&5
+printf "%s\n" "$ac_res" >&6; }
+if eval test \"x\$"$as_ac_Lib"\" = x"yes"
+then :
   F77LIBS="-lfor"
 fi
 
@@ -8722,70 +9121,45 @@ EOF
 
    # Checks if the LIBRARY from the argument list can be used to link
    # a C test program with testflib
-   as_ac_Lib=`echo "ac_cv_lib_xlf90_$THIS_FUNCTION" | $as_tr_sh`
-{ echo "$as_me:$LINENO: checking for $THIS_FUNCTION in -lxlf90" >&5
-echo $ECHO_N "checking for $THIS_FUNCTION in -lxlf90... $ECHO_C" >&6; }
-if { as_var=$as_ac_Lib; eval "test \"\${$as_var+set}\" = set"; }; then
-  echo $ECHO_N "(cached) $ECHO_C" >&6
-else
+   as_ac_Lib=`printf "%s\n" "ac_cv_lib_xlf90_$THIS_FUNCTION" | $as_tr_sh`
+{ printf "%s\n" "$as_me:${as_lineno-$LINENO}: checking for $THIS_FUNCTION in -lxlf90" >&5
+printf %s "checking for $THIS_FUNCTION in -lxlf90... " >&6; }
+if eval test \${$as_ac_Lib+y}
+then :
+  printf %s "(cached) " >&6
+else $as_nop
   ac_check_lib_save_LIBS=$LIBS
 LIBS="-lxlf90 testflib_.o  $LIBS"
-cat >conftest.$ac_ext <<_ACEOF
-/* confdefs.h.  */
-_ACEOF
-cat confdefs.h >>conftest.$ac_ext
-cat >>conftest.$ac_ext <<_ACEOF
+cat confdefs.h - <<_ACEOF >conftest.$ac_ext
 /* end confdefs.h.  */
 
 /* Override any GCC internal prototype to avoid an error.
    Use char because int might match the return type of a GCC
    builtin and then its argument prototype would still apply.  */
-#ifdef __cplusplus
-extern "C"
-#endif
 char $THIS_FUNCTION ();
 int
-main ()
+main (void)
 {
 return $THIS_FUNCTION ();
   ;
   return 0;
 }
 _ACEOF
-rm -f conftest.$ac_objext conftest$ac_exeext
-if { (ac_try="$ac_link"
-case "(($ac_try" in
-  *\"* | *\`* | *\\*) ac_try_echo=\$ac_try;;
-  *) ac_try_echo=$ac_try;;
-esac
-eval "echo \"\$as_me:$LINENO: $ac_try_echo\"") >&5
-  (eval "$ac_link") 2>conftest.er1
-  ac_status=$?
-  grep -v '^ *+' conftest.er1 >conftest.err
-  rm -f conftest.er1
-  cat conftest.err >&5
-  echo "$as_me:$LINENO: \$? = $ac_status" >&5
-  (exit $ac_status); } && {
-	 test -z "$ac_c_werror_flag" ||
-	 test ! -s conftest.err
-       } && test -s conftest$ac_exeext &&
-       $as_test_x conftest$ac_exeext; then
+if ac_fn_c_try_link "$LINENO"
+then :
   eval "$as_ac_Lib=yes"
-else
-  echo "$as_me: failed program was:" >&5
-sed 's/^/| /' conftest.$ac_ext >&5
-
-	eval "$as_ac_Lib=no"
+else $as_nop
+  eval "$as_ac_Lib=no"
 fi
-
-rm -f core conftest.err conftest.$ac_objext conftest_ipa8_conftest.oo \
-      conftest$ac_exeext conftest.$ac_ext
+rm -f core conftest.err conftest.$ac_objext conftest.beam \
+    conftest$ac_exeext conftest.$ac_ext
 LIBS=$ac_check_lib_save_LIBS
 fi
-ac_res=`eval echo '${'$as_ac_Lib'}'`
-	       { echo "$as_me:$LINENO: result: $ac_res" >&5
-echo "${ECHO_T}$ac_res" >&6; }
-if test `eval echo '${'$as_ac_Lib'}'` = yes; then
+eval ac_res=\$$as_ac_Lib
+	       { printf "%s\n" "$as_me:${as_lineno-$LINENO}: result: $ac_res" >&5
+printf "%s\n" "$ac_res" >&6; }
+if eval test \"x\$"$as_ac_Lib"\" = x"yes"
+then :
   F77LIBS="-lxlf90"
 fi
 
@@ -8835,70 +9209,45 @@ EOF
 
    # Checks if the LIBRARY from the argument list can be used to link
    # a C test program with testflib
-   as_ac_Lib=`echo "ac_cv_lib_I77_$THIS_FUNCTION" | $as_tr_sh`
-{ echo "$as_me:$LINENO: checking for $THIS_FUNCTION in -lI77" >&5
-echo $ECHO_N "checking for $THIS_FUNCTION in -lI77... $ECHO_C" >&6; }
-if { as_var=$as_ac_Lib; eval "test \"\${$as_var+set}\" = set"; }; then
-  echo $ECHO_N "(cached) $ECHO_C" >&6
-else
+   as_ac_Lib=`printf "%s\n" "ac_cv_lib_I77_$THIS_FUNCTION" | $as_tr_sh`
+{ printf "%s\n" "$as_me:${as_lineno-$LINENO}: checking for $THIS_FUNCTION in -lI77" >&5
+printf %s "checking for $THIS_FUNCTION in -lI77... " >&6; }
+if eval test \${$as_ac_Lib+y}
+then :
+  printf %s "(cached) " >&6
+else $as_nop
   ac_check_lib_save_LIBS=$LIBS
 LIBS="-lI77 testflib_.o -lF77 -lU77 -lI77 -lisam $LIBS"
-cat >conftest.$ac_ext <<_ACEOF
-/* confdefs.h.  */
-_ACEOF
-cat confdefs.h >>conftest.$ac_ext
-cat >>conftest.$ac_ext <<_ACEOF
+cat confdefs.h - <<_ACEOF >conftest.$ac_ext
 /* end confdefs.h.  */
 
 /* Override any GCC internal prototype to avoid an error.
    Use char because int might match the return type of a GCC
    builtin and then its argument prototype would still apply.  */
-#ifdef __cplusplus
-extern "C"
-#endif
 char $THIS_FUNCTION ();
 int
-main ()
+main (void)
 {
 return $THIS_FUNCTION ();
   ;
   return 0;
 }
 _ACEOF
-rm -f conftest.$ac_objext conftest$ac_exeext
-if { (ac_try="$ac_link"
-case "(($ac_try" in
-  *\"* | *\`* | *\\*) ac_try_echo=\$ac_try;;
-  *) ac_try_echo=$ac_try;;
-esac
-eval "echo \"\$as_me:$LINENO: $ac_try_echo\"") >&5
-  (eval "$ac_link") 2>conftest.er1
-  ac_status=$?
-  grep -v '^ *+' conftest.er1 >conftest.err
-  rm -f conftest.er1
-  cat conftest.err >&5
-  echo "$as_me:$LINENO: \$? = $ac_status" >&5
-  (exit $ac_status); } && {
-	 test -z "$ac_c_werror_flag" ||
-	 test ! -s conftest.err
-       } && test -s conftest$ac_exeext &&
-       $as_test_x conftest$ac_exeext; then
+if ac_fn_c_try_link "$LINENO"
+then :
   eval "$as_ac_Lib=yes"
-else
-  echo "$as_me: failed program was:" >&5
-sed 's/^/| /' conftest.$ac_ext >&5
-
-	eval "$as_ac_Lib=no"
+else $as_nop
+  eval "$as_ac_Lib=no"
 fi
-
-rm -f core conftest.err conftest.$ac_objext conftest_ipa8_conftest.oo \
-      conftest$ac_exeext conftest.$ac_ext
+rm -f core conftest.err conftest.$ac_objext conftest.beam \
+    conftest$ac_exeext conftest.$ac_ext
 LIBS=$ac_check_lib_save_LIBS
 fi
-ac_res=`eval echo '${'$as_ac_Lib'}'`
-	       { echo "$as_me:$LINENO: result: $ac_res" >&5
-echo "${ECHO_T}$ac_res" >&6; }
-if test `eval echo '${'$as_ac_Lib'}'` = yes; then
+eval ac_res=\$$as_ac_Lib
+	       { printf "%s\n" "$as_me:${as_lineno-$LINENO}: result: $ac_res" >&5
+printf "%s\n" "$ac_res" >&6; }
+if eval test \"x\$"$as_ac_Lib"\" = x"yes"
+then :
   F77LIBS="-lF77 -lU77 -lI77 -lisam"
 fi
 
@@ -8908,9 +9257,9 @@ fi
 ;;
 
          *)
-            { echo "$as_me:$LINENO: WARNING: unable to set F77LIBFLAGS.  They must be set as a shell variable or
+            { printf "%s\n" "$as_me:${as_lineno-$LINENO}: WARNING: unable to set F77LIBFLAGS.  They must be set as a shell variable or
  with a command-line option" >&5
-echo "$as_me: WARNING: unable to set F77LIBFLAGS.  They must be set as a shell variable or
+printf "%s\n" "$as_me: WARNING: unable to set F77LIBFLAGS.  They must be set as a shell variable or
  with a command-line option" >&2;}
          ;;
 
@@ -8951,8 +9300,8 @@ echo "$as_me: WARNING: unable to set F77LIBFLAGS.  They must be set as a shell v
       casc_cv_f77flags=$F77LIBFLAGS
 
 fi
-{ echo "$as_me:$LINENO: result: $casc_cv_f77flags" >&5
-echo "${ECHO_T}$casc_cv_f77flags" >&6; }
+{ printf "%s\n" "$as_me:${as_lineno-$LINENO}: result: $casc_cv_f77flags" >&5
+printf "%s\n" "$casc_cv_f77flags" >&6; }
 
       F77LIBFLAGS=$casc_cv_f77flags
 
@@ -8967,11 +9316,12 @@ echo "${ECHO_T}$casc_cv_f77flags" >&6; }
       ;;
    *)
 
-   { echo "$as_me:$LINENO: checking for Fortran libraries" >&5
-echo $ECHO_N "checking for Fortran libraries... $ECHO_C" >&6; }
-if test "${casc_cv_f77flags+set}" = set; then
-  echo $ECHO_N "(cached) $ECHO_C" >&6
-else
+   { printf "%s\n" "$as_me:${as_lineno-$LINENO}: checking for Fortran libraries" >&5
+printf %s "checking for Fortran libraries... " >&6; }
+if test ${casc_cv_f77flags+y}
+then :
+  printf %s "(cached) " >&6
+else $as_nop
 
       if test -z "$F77LIBFLAGS"; then
 
@@ -9132,7 +9482,7 @@ else
   fi
     rm -f conftest.f conftest.o conftest
 
-  FLIBS="$flibs_result"
+  FLIBS="" # We never use FLIBS and it sometimes has quotes it in it, so disable it completely
 
          for casc_flag in $flibs_result; do
 
@@ -9212,73 +9562,48 @@ EOF
 
    # Checks if the LIBRARY from the argument list can be used to link
    # a C test program with testflib
-   as_ac_Lib=`echo "ac_cv_lib_$casc_lib_name''_$THIS_FUNCTION" | $as_tr_sh`
-{ echo "$as_me:$LINENO: checking for $THIS_FUNCTION in -l$casc_lib_name" >&5
-echo $ECHO_N "checking for $THIS_FUNCTION in -l$casc_lib_name... $ECHO_C" >&6; }
-if { as_var=$as_ac_Lib; eval "test \"\${$as_var+set}\" = set"; }; then
-  echo $ECHO_N "(cached) $ECHO_C" >&6
-else
+   as_ac_Lib=`printf "%s\n" "ac_cv_lib_$casc_lib_name""_$THIS_FUNCTION" | $as_tr_sh`
+{ printf "%s\n" "$as_me:${as_lineno-$LINENO}: checking for $THIS_FUNCTION in -l$casc_lib_name" >&5
+printf %s "checking for $THIS_FUNCTION in -l$casc_lib_name... " >&6; }
+if eval test \${$as_ac_Lib+y}
+then :
+  printf %s "(cached) " >&6
+else $as_nop
   ac_check_lib_save_LIBS=$LIBS
 LIBS="-l$casc_lib_name testflib_.o $F77LIBFLAGS $LIBS"
-cat >conftest.$ac_ext <<_ACEOF
-/* confdefs.h.  */
-_ACEOF
-cat confdefs.h >>conftest.$ac_ext
-cat >>conftest.$ac_ext <<_ACEOF
+cat confdefs.h - <<_ACEOF >conftest.$ac_ext
 /* end confdefs.h.  */
 
 /* Override any GCC internal prototype to avoid an error.
    Use char because int might match the return type of a GCC
    builtin and then its argument prototype would still apply.  */
-#ifdef __cplusplus
-extern "C"
-#endif
 char $THIS_FUNCTION ();
 int
-main ()
+main (void)
 {
 return $THIS_FUNCTION ();
   ;
   return 0;
 }
 _ACEOF
-rm -f conftest.$ac_objext conftest$ac_exeext
-if { (ac_try="$ac_link"
-case "(($ac_try" in
-  *\"* | *\`* | *\\*) ac_try_echo=\$ac_try;;
-  *) ac_try_echo=$ac_try;;
-esac
-eval "echo \"\$as_me:$LINENO: $ac_try_echo\"") >&5
-  (eval "$ac_link") 2>conftest.er1
-  ac_status=$?
-  grep -v '^ *+' conftest.er1 >conftest.err
-  rm -f conftest.er1
-  cat conftest.err >&5
-  echo "$as_me:$LINENO: \$? = $ac_status" >&5
-  (exit $ac_status); } && {
-	 test -z "$ac_c_werror_flag" ||
-	 test ! -s conftest.err
-       } && test -s conftest$ac_exeext &&
-       $as_test_x conftest$ac_exeext; then
+if ac_fn_c_try_link "$LINENO"
+then :
   eval "$as_ac_Lib=yes"
-else
-  echo "$as_me: failed program was:" >&5
-sed 's/^/| /' conftest.$ac_ext >&5
-
-	eval "$as_ac_Lib=no"
+else $as_nop
+  eval "$as_ac_Lib=no"
 fi
-
-rm -f core conftest.err conftest.$ac_objext conftest_ipa8_conftest.oo \
-      conftest$ac_exeext conftest.$ac_ext
+rm -f core conftest.err conftest.$ac_objext conftest.beam \
+    conftest$ac_exeext conftest.$ac_ext
 LIBS=$ac_check_lib_save_LIBS
 fi
-ac_res=`eval echo '${'$as_ac_Lib'}'`
-	       { echo "$as_me:$LINENO: result: $ac_res" >&5
-echo "${ECHO_T}$ac_res" >&6; }
-if test `eval echo '${'$as_ac_Lib'}'` = yes; then
+eval ac_res=\$$as_ac_Lib
+	       { printf "%s\n" "$as_me:${as_lineno-$LINENO}: result: $ac_res" >&5
+printf "%s\n" "$ac_res" >&6; }
+if eval test \"x\$"$as_ac_Lib"\" = x"yes"
+then :
   F77LIBFLAGS="$F77LIBFLAGS $casc_flag"
                   casc_result=yes
-else
+else $as_nop
   F77LIBFLAGS="$F77LIBFLAGS $casc_flag"
 fi
 
@@ -9346,70 +9671,45 @@ EOF
 
    # Checks if the LIBRARY from the argument list can be used to link
    # a C test program with testflib
-   as_ac_Lib=`echo "ac_cv_lib_f2c_$THIS_FUNCTION" | $as_tr_sh`
-{ echo "$as_me:$LINENO: checking for $THIS_FUNCTION in -lf2c" >&5
-echo $ECHO_N "checking for $THIS_FUNCTION in -lf2c... $ECHO_C" >&6; }
-if { as_var=$as_ac_Lib; eval "test \"\${$as_var+set}\" = set"; }; then
-  echo $ECHO_N "(cached) $ECHO_C" >&6
-else
+   as_ac_Lib=`printf "%s\n" "ac_cv_lib_f2c_$THIS_FUNCTION" | $as_tr_sh`
+{ printf "%s\n" "$as_me:${as_lineno-$LINENO}: checking for $THIS_FUNCTION in -lf2c" >&5
+printf %s "checking for $THIS_FUNCTION in -lf2c... " >&6; }
+if eval test \${$as_ac_Lib+y}
+then :
+  printf %s "(cached) " >&6
+else $as_nop
   ac_check_lib_save_LIBS=$LIBS
 LIBS="-lf2c testflib_.o -L/home/casc/g77/lib -lf2c $LIBS"
-cat >conftest.$ac_ext <<_ACEOF
-/* confdefs.h.  */
-_ACEOF
-cat confdefs.h >>conftest.$ac_ext
-cat >>conftest.$ac_ext <<_ACEOF
+cat confdefs.h - <<_ACEOF >conftest.$ac_ext
 /* end confdefs.h.  */
 
 /* Override any GCC internal prototype to avoid an error.
    Use char because int might match the return type of a GCC
    builtin and then its argument prototype would still apply.  */
-#ifdef __cplusplus
-extern "C"
-#endif
 char $THIS_FUNCTION ();
 int
-main ()
+main (void)
 {
 return $THIS_FUNCTION ();
   ;
   return 0;
 }
 _ACEOF
-rm -f conftest.$ac_objext conftest$ac_exeext
-if { (ac_try="$ac_link"
-case "(($ac_try" in
-  *\"* | *\`* | *\\*) ac_try_echo=\$ac_try;;
-  *) ac_try_echo=$ac_try;;
-esac
-eval "echo \"\$as_me:$LINENO: $ac_try_echo\"") >&5
-  (eval "$ac_link") 2>conftest.er1
-  ac_status=$?
-  grep -v '^ *+' conftest.er1 >conftest.err
-  rm -f conftest.er1
-  cat conftest.err >&5
-  echo "$as_me:$LINENO: \$? = $ac_status" >&5
-  (exit $ac_status); } && {
-	 test -z "$ac_c_werror_flag" ||
-	 test ! -s conftest.err
-       } && test -s conftest$ac_exeext &&
-       $as_test_x conftest$ac_exeext; then
+if ac_fn_c_try_link "$LINENO"
+then :
   eval "$as_ac_Lib=yes"
-else
-  echo "$as_me: failed program was:" >&5
-sed 's/^/| /' conftest.$ac_ext >&5
-
-	eval "$as_ac_Lib=no"
+else $as_nop
+  eval "$as_ac_Lib=no"
 fi
-
-rm -f core conftest.err conftest.$ac_objext conftest_ipa8_conftest.oo \
-      conftest$ac_exeext conftest.$ac_ext
+rm -f core conftest.err conftest.$ac_objext conftest.beam \
+    conftest$ac_exeext conftest.$ac_ext
 LIBS=$ac_check_lib_save_LIBS
 fi
-ac_res=`eval echo '${'$as_ac_Lib'}'`
-	       { echo "$as_me:$LINENO: result: $ac_res" >&5
-echo "${ECHO_T}$ac_res" >&6; }
-if test `eval echo '${'$as_ac_Lib'}'` = yes; then
+eval ac_res=\$$as_ac_Lib
+	       { printf "%s\n" "$as_me:${as_lineno-$LINENO}: result: $ac_res" >&5
+printf "%s\n" "$ac_res" >&6; }
+if eval test \"x\$"$as_ac_Lib"\" = x"yes"
+then :
   F77LIBDIRS="-L/home/casc/g77/lib"
                                           F77LIBS="-lf2c"
 
@@ -9460,70 +9760,45 @@ EOF
 
    # Checks if the LIBRARY from the argument list can be used to link
    # a C test program with testflib
-   as_ac_Lib=`echo "ac_cv_lib_sunmath_$THIS_FUNCTION" | $as_tr_sh`
-{ echo "$as_me:$LINENO: checking for $THIS_FUNCTION in -lsunmath" >&5
-echo $ECHO_N "checking for $THIS_FUNCTION in -lsunmath... $ECHO_C" >&6; }
-if { as_var=$as_ac_Lib; eval "test \"\${$as_var+set}\" = set"; }; then
-  echo $ECHO_N "(cached) $ECHO_C" >&6
-else
+   as_ac_Lib=`printf "%s\n" "ac_cv_lib_sunmath_$THIS_FUNCTION" | $as_tr_sh`
+{ printf "%s\n" "$as_me:${as_lineno-$LINENO}: checking for $THIS_FUNCTION in -lsunmath" >&5
+printf %s "checking for $THIS_FUNCTION in -lsunmath... " >&6; }
+if eval test \${$as_ac_Lib+y}
+then :
+  printf %s "(cached) " >&6
+else $as_nop
   ac_check_lib_save_LIBS=$LIBS
 LIBS="-lsunmath testflib_.o -L/opt/SUNWspro/SC5.0/lib -lF77 -lsunmath $LIBS"
-cat >conftest.$ac_ext <<_ACEOF
-/* confdefs.h.  */
-_ACEOF
-cat confdefs.h >>conftest.$ac_ext
-cat >>conftest.$ac_ext <<_ACEOF
+cat confdefs.h - <<_ACEOF >conftest.$ac_ext
 /* end confdefs.h.  */
 
 /* Override any GCC internal prototype to avoid an error.
    Use char because int might match the return type of a GCC
    builtin and then its argument prototype would still apply.  */
-#ifdef __cplusplus
-extern "C"
-#endif
 char $THIS_FUNCTION ();
 int
-main ()
+main (void)
 {
 return $THIS_FUNCTION ();
   ;
   return 0;
 }
 _ACEOF
-rm -f conftest.$ac_objext conftest$ac_exeext
-if { (ac_try="$ac_link"
-case "(($ac_try" in
-  *\"* | *\`* | *\\*) ac_try_echo=\$ac_try;;
-  *) ac_try_echo=$ac_try;;
-esac
-eval "echo \"\$as_me:$LINENO: $ac_try_echo\"") >&5
-  (eval "$ac_link") 2>conftest.er1
-  ac_status=$?
-  grep -v '^ *+' conftest.er1 >conftest.err
-  rm -f conftest.er1
-  cat conftest.err >&5
-  echo "$as_me:$LINENO: \$? = $ac_status" >&5
-  (exit $ac_status); } && {
-	 test -z "$ac_c_werror_flag" ||
-	 test ! -s conftest.err
-       } && test -s conftest$ac_exeext &&
-       $as_test_x conftest$ac_exeext; then
+if ac_fn_c_try_link "$LINENO"
+then :
   eval "$as_ac_Lib=yes"
-else
-  echo "$as_me: failed program was:" >&5
-sed 's/^/| /' conftest.$ac_ext >&5
-
-	eval "$as_ac_Lib=no"
+else $as_nop
+  eval "$as_ac_Lib=no"
 fi
-
-rm -f core conftest.err conftest.$ac_objext conftest_ipa8_conftest.oo \
-      conftest$ac_exeext conftest.$ac_ext
+rm -f core conftest.err conftest.$ac_objext conftest.beam \
+    conftest$ac_exeext conftest.$ac_ext
 LIBS=$ac_check_lib_save_LIBS
 fi
-ac_res=`eval echo '${'$as_ac_Lib'}'`
-	       { echo "$as_me:$LINENO: result: $ac_res" >&5
-echo "${ECHO_T}$ac_res" >&6; }
-if test `eval echo '${'$as_ac_Lib'}'` = yes; then
+eval ac_res=\$$as_ac_Lib
+	       { printf "%s\n" "$as_me:${as_lineno-$LINENO}: result: $ac_res" >&5
+printf "%s\n" "$ac_res" >&6; }
+if eval test \"x\$"$as_ac_Lib"\" = x"yes"
+then :
   F77LIBDIRS="-L/opt/SUNWspro/SC5.0/lib"
                                    F77LIBS="-lF77 -lsunmath"
 
@@ -9576,70 +9851,45 @@ EOF
 
    # Checks if the LIBRARY from the argument list can be used to link
    # a C test program with testflib
-   as_ac_Lib=`echo "ac_cv_lib_for_$THIS_FUNCTION" | $as_tr_sh`
-{ echo "$as_me:$LINENO: checking for $THIS_FUNCTION in -lfor" >&5
-echo $ECHO_N "checking for $THIS_FUNCTION in -lfor... $ECHO_C" >&6; }
-if { as_var=$as_ac_Lib; eval "test \"\${$as_var+set}\" = set"; }; then
-  echo $ECHO_N "(cached) $ECHO_C" >&6
-else
+   as_ac_Lib=`printf "%s\n" "ac_cv_lib_for_$THIS_FUNCTION" | $as_tr_sh`
+{ printf "%s\n" "$as_me:${as_lineno-$LINENO}: checking for $THIS_FUNCTION in -lfor" >&5
+printf %s "checking for $THIS_FUNCTION in -lfor... " >&6; }
+if eval test \${$as_ac_Lib+y}
+then :
+  printf %s "(cached) " >&6
+else $as_nop
   ac_check_lib_save_LIBS=$LIBS
 LIBS="-lfor testflib_.o  $LIBS"
-cat >conftest.$ac_ext <<_ACEOF
-/* confdefs.h.  */
-_ACEOF
-cat confdefs.h >>conftest.$ac_ext
-cat >>conftest.$ac_ext <<_ACEOF
+cat confdefs.h - <<_ACEOF >conftest.$ac_ext
 /* end confdefs.h.  */
 
 /* Override any GCC internal prototype to avoid an error.
    Use char because int might match the return type of a GCC
    builtin and then its argument prototype would still apply.  */
-#ifdef __cplusplus
-extern "C"
-#endif
 char $THIS_FUNCTION ();
 int
-main ()
+main (void)
 {
 return $THIS_FUNCTION ();
   ;
   return 0;
 }
 _ACEOF
-rm -f conftest.$ac_objext conftest$ac_exeext
-if { (ac_try="$ac_link"
-case "(($ac_try" in
-  *\"* | *\`* | *\\*) ac_try_echo=\$ac_try;;
-  *) ac_try_echo=$ac_try;;
-esac
-eval "echo \"\$as_me:$LINENO: $ac_try_echo\"") >&5
-  (eval "$ac_link") 2>conftest.er1
-  ac_status=$?
-  grep -v '^ *+' conftest.er1 >conftest.err
-  rm -f conftest.er1
-  cat conftest.err >&5
-  echo "$as_me:$LINENO: \$? = $ac_status" >&5
-  (exit $ac_status); } && {
-	 test -z "$ac_c_werror_flag" ||
-	 test ! -s conftest.err
-       } && test -s conftest$ac_exeext &&
-       $as_test_x conftest$ac_exeext; then
+if ac_fn_c_try_link "$LINENO"
+then :
   eval "$as_ac_Lib=yes"
-else
-  echo "$as_me: failed program was:" >&5
-sed 's/^/| /' conftest.$ac_ext >&5
-
-	eval "$as_ac_Lib=no"
+else $as_nop
+  eval "$as_ac_Lib=no"
 fi
-
-rm -f core conftest.err conftest.$ac_objext conftest_ipa8_conftest.oo \
-      conftest$ac_exeext conftest.$ac_ext
+rm -f core conftest.err conftest.$ac_objext conftest.beam \
+    conftest$ac_exeext conftest.$ac_ext
 LIBS=$ac_check_lib_save_LIBS
 fi
-ac_res=`eval echo '${'$as_ac_Lib'}'`
-	       { echo "$as_me:$LINENO: result: $ac_res" >&5
-echo "${ECHO_T}$ac_res" >&6; }
-if test `eval echo '${'$as_ac_Lib'}'` = yes; then
+eval ac_res=\$$as_ac_Lib
+	       { printf "%s\n" "$as_me:${as_lineno-$LINENO}: result: $ac_res" >&5
+printf "%s\n" "$ac_res" >&6; }
+if eval test \"x\$"$as_ac_Lib"\" = x"yes"
+then :
   F77LIBS="-lfor"
 fi
 
@@ -9689,70 +9939,45 @@ EOF
 
    # Checks if the LIBRARY from the argument list can be used to link
    # a C test program with testflib
-   as_ac_Lib=`echo "ac_cv_lib_xlf90_$THIS_FUNCTION" | $as_tr_sh`
-{ echo "$as_me:$LINENO: checking for $THIS_FUNCTION in -lxlf90" >&5
-echo $ECHO_N "checking for $THIS_FUNCTION in -lxlf90... $ECHO_C" >&6; }
-if { as_var=$as_ac_Lib; eval "test \"\${$as_var+set}\" = set"; }; then
-  echo $ECHO_N "(cached) $ECHO_C" >&6
-else
+   as_ac_Lib=`printf "%s\n" "ac_cv_lib_xlf90_$THIS_FUNCTION" | $as_tr_sh`
+{ printf "%s\n" "$as_me:${as_lineno-$LINENO}: checking for $THIS_FUNCTION in -lxlf90" >&5
+printf %s "checking for $THIS_FUNCTION in -lxlf90... " >&6; }
+if eval test \${$as_ac_Lib+y}
+then :
+  printf %s "(cached) " >&6
+else $as_nop
   ac_check_lib_save_LIBS=$LIBS
 LIBS="-lxlf90 testflib_.o  $LIBS"
-cat >conftest.$ac_ext <<_ACEOF
-/* confdefs.h.  */
-_ACEOF
-cat confdefs.h >>conftest.$ac_ext
-cat >>conftest.$ac_ext <<_ACEOF
+cat confdefs.h - <<_ACEOF >conftest.$ac_ext
 /* end confdefs.h.  */
 
 /* Override any GCC internal prototype to avoid an error.
    Use char because int might match the return type of a GCC
    builtin and then its argument prototype would still apply.  */
-#ifdef __cplusplus
-extern "C"
-#endif
 char $THIS_FUNCTION ();
 int
-main ()
+main (void)
 {
 return $THIS_FUNCTION ();
   ;
   return 0;
 }
 _ACEOF
-rm -f conftest.$ac_objext conftest$ac_exeext
-if { (ac_try="$ac_link"
-case "(($ac_try" in
-  *\"* | *\`* | *\\*) ac_try_echo=\$ac_try;;
-  *) ac_try_echo=$ac_try;;
-esac
-eval "echo \"\$as_me:$LINENO: $ac_try_echo\"") >&5
-  (eval "$ac_link") 2>conftest.er1
-  ac_status=$?
-  grep -v '^ *+' conftest.er1 >conftest.err
-  rm -f conftest.er1
-  cat conftest.err >&5
-  echo "$as_me:$LINENO: \$? = $ac_status" >&5
-  (exit $ac_status); } && {
-	 test -z "$ac_c_werror_flag" ||
-	 test ! -s conftest.err
-       } && test -s conftest$ac_exeext &&
-       $as_test_x conftest$ac_exeext; then
+if ac_fn_c_try_link "$LINENO"
+then :
   eval "$as_ac_Lib=yes"
-else
-  echo "$as_me: failed program was:" >&5
-sed 's/^/| /' conftest.$ac_ext >&5
-
-	eval "$as_ac_Lib=no"
+else $as_nop
+  eval "$as_ac_Lib=no"
 fi
-
-rm -f core conftest.err conftest.$ac_objext conftest_ipa8_conftest.oo \
-      conftest$ac_exeext conftest.$ac_ext
+rm -f core conftest.err conftest.$ac_objext conftest.beam \
+    conftest$ac_exeext conftest.$ac_ext
 LIBS=$ac_check_lib_save_LIBS
 fi
-ac_res=`eval echo '${'$as_ac_Lib'}'`
-	       { echo "$as_me:$LINENO: result: $ac_res" >&5
-echo "${ECHO_T}$ac_res" >&6; }
-if test `eval echo '${'$as_ac_Lib'}'` = yes; then
+eval ac_res=\$$as_ac_Lib
+	       { printf "%s\n" "$as_me:${as_lineno-$LINENO}: result: $ac_res" >&5
+printf "%s\n" "$ac_res" >&6; }
+if eval test \"x\$"$as_ac_Lib"\" = x"yes"
+then :
   F77LIBS="-lxlf90"
 fi
 
@@ -9802,70 +10027,45 @@ EOF
 
    # Checks if the LIBRARY from the argument list can be used to link
    # a C test program with testflib
-   as_ac_Lib=`echo "ac_cv_lib_I77_$THIS_FUNCTION" | $as_tr_sh`
-{ echo "$as_me:$LINENO: checking for $THIS_FUNCTION in -lI77" >&5
-echo $ECHO_N "checking for $THIS_FUNCTION in -lI77... $ECHO_C" >&6; }
-if { as_var=$as_ac_Lib; eval "test \"\${$as_var+set}\" = set"; }; then
-  echo $ECHO_N "(cached) $ECHO_C" >&6
-else
+   as_ac_Lib=`printf "%s\n" "ac_cv_lib_I77_$THIS_FUNCTION" | $as_tr_sh`
+{ printf "%s\n" "$as_me:${as_lineno-$LINENO}: checking for $THIS_FUNCTION in -lI77" >&5
+printf %s "checking for $THIS_FUNCTION in -lI77... " >&6; }
+if eval test \${$as_ac_Lib+y}
+then :
+  printf %s "(cached) " >&6
+else $as_nop
   ac_check_lib_save_LIBS=$LIBS
 LIBS="-lI77 testflib_.o -lF77 -lU77 -lI77 -lisam $LIBS"
-cat >conftest.$ac_ext <<_ACEOF
-/* confdefs.h.  */
-_ACEOF
-cat confdefs.h >>conftest.$ac_ext
-cat >>conftest.$ac_ext <<_ACEOF
+cat confdefs.h - <<_ACEOF >conftest.$ac_ext
 /* end confdefs.h.  */
 
 /* Override any GCC internal prototype to avoid an error.
    Use char because int might match the return type of a GCC
    builtin and then its argument prototype would still apply.  */
-#ifdef __cplusplus
-extern "C"
-#endif
 char $THIS_FUNCTION ();
 int
-main ()
+main (void)
 {
 return $THIS_FUNCTION ();
   ;
   return 0;
 }
 _ACEOF
-rm -f conftest.$ac_objext conftest$ac_exeext
-if { (ac_try="$ac_link"
-case "(($ac_try" in
-  *\"* | *\`* | *\\*) ac_try_echo=\$ac_try;;
-  *) ac_try_echo=$ac_try;;
-esac
-eval "echo \"\$as_me:$LINENO: $ac_try_echo\"") >&5
-  (eval "$ac_link") 2>conftest.er1
-  ac_status=$?
-  grep -v '^ *+' conftest.er1 >conftest.err
-  rm -f conftest.er1
-  cat conftest.err >&5
-  echo "$as_me:$LINENO: \$? = $ac_status" >&5
-  (exit $ac_status); } && {
-	 test -z "$ac_c_werror_flag" ||
-	 test ! -s conftest.err
-       } && test -s conftest$ac_exeext &&
-       $as_test_x conftest$ac_exeext; then
+if ac_fn_c_try_link "$LINENO"
+then :
   eval "$as_ac_Lib=yes"
-else
-  echo "$as_me: failed program was:" >&5
-sed 's/^/| /' conftest.$ac_ext >&5
-
-	eval "$as_ac_Lib=no"
+else $as_nop
+  eval "$as_ac_Lib=no"
 fi
-
-rm -f core conftest.err conftest.$ac_objext conftest_ipa8_conftest.oo \
-      conftest$ac_exeext conftest.$ac_ext
+rm -f core conftest.err conftest.$ac_objext conftest.beam \
+    conftest$ac_exeext conftest.$ac_ext
 LIBS=$ac_check_lib_save_LIBS
 fi
-ac_res=`eval echo '${'$as_ac_Lib'}'`
-	       { echo "$as_me:$LINENO: result: $ac_res" >&5
-echo "${ECHO_T}$ac_res" >&6; }
-if test `eval echo '${'$as_ac_Lib'}'` = yes; then
+eval ac_res=\$$as_ac_Lib
+	       { printf "%s\n" "$as_me:${as_lineno-$LINENO}: result: $ac_res" >&5
+printf "%s\n" "$ac_res" >&6; }
+if eval test \"x\$"$as_ac_Lib"\" = x"yes"
+then :
   F77LIBS="-lF77 -lU77 -lI77 -lisam"
 fi
 
@@ -9875,9 +10075,9 @@ fi
 ;;
 
          *)
-            { echo "$as_me:$LINENO: WARNING: unable to set F77LIBFLAGS.  They must be set as a shell variable or
+            { printf "%s\n" "$as_me:${as_lineno-$LINENO}: WARNING: unable to set F77LIBFLAGS.  They must be set as a shell variable or
  with a command-line option" >&5
-echo "$as_me: WARNING: unable to set F77LIBFLAGS.  They must be set as a shell variable or
+printf "%s\n" "$as_me: WARNING: unable to set F77LIBFLAGS.  They must be set as a shell variable or
  with a command-line option" >&2;}
          ;;
 
@@ -9918,8 +10118,8 @@ echo "$as_me: WARNING: unable to set F77LIBFLAGS.  They must be set as a shell v
       casc_cv_f77flags=$F77LIBFLAGS
 
 fi
-{ echo "$as_me:$LINENO: result: $casc_cv_f77flags" >&5
-echo "${ECHO_T}$casc_cv_f77flags" >&6; }
+{ printf "%s\n" "$as_me:${as_lineno-$LINENO}: result: $casc_cv_f77flags" >&5
+printf "%s\n" "$casc_cv_f77flags" >&6; }
 
       F77LIBFLAGS=$casc_cv_f77flags
 
@@ -9939,7 +10139,7 @@ for btng_log_vars_index in $btng_log_vars ; do
   else
     btng_log_vars_value="unset";
   fi
-  echo "configure:9942:" "after appending F77LIBFLAGS to LIB_NAME: $btng_log_vars_index is $btng_log_vars_value" >&5;
+  echo "configure:10142:" "after appending F77LIBFLAGS to LIB_NAME: $btng_log_vars_index is $btng_log_vars_value" >&5;
 done
 
 
@@ -9949,15 +10149,16 @@ ac_compile='$F77 -c $FFLAGS conftest.$ac_ext >&5'
 ac_link='$F77 -o conftest$ac_exeext $FFLAGS $LDFLAGS conftest.$ac_ext $LIBS >&5'
 ac_compiler_gnu=$ac_cv_f77_compiler_gnu
 if test -n "$ac_tool_prefix"; then
-  for ac_prog in g77 xlf f77 frt pgf77 cf77 fort77 fl32 af77 xlf90 f90 pgf90 pghpf epcf90 gfortran g95 xlf95 f95 fort ifort ifc efc pgf95 lf95 ftn
+  for ac_prog in g77 xlf f77 frt pgf77 cf77 fort77 fl32 af77 xlf90 f90 pgf90 pghpf epcf90 gfortran g95 xlf95 f95 fort ifort ifc efc pgfortran pgf95 lf95 ftn nagfor
   do
     # Extract the first word of "$ac_tool_prefix$ac_prog", so it can be a program name with args.
 set dummy $ac_tool_prefix$ac_prog; ac_word=$2
-{ echo "$as_me:$LINENO: checking for $ac_word" >&5
-echo $ECHO_N "checking for $ac_word... $ECHO_C" >&6; }
-if test "${ac_cv_prog_F77+set}" = set; then
-  echo $ECHO_N "(cached) $ECHO_C" >&6
-else
+{ printf "%s\n" "$as_me:${as_lineno-$LINENO}: checking for $ac_word" >&5
+printf %s "checking for $ac_word... " >&6; }
+if test ${ac_cv_prog_F77+y}
+then :
+  printf %s "(cached) " >&6
+else $as_nop
   if test -n "$F77"; then
   ac_cv_prog_F77="$F77" # Let the user override the test.
 else
@@ -9965,26 +10166,30 @@ as_save_IFS=$IFS; IFS=$PATH_SEPARATOR
 for as_dir in $PATH
 do
   IFS=$as_save_IFS
-  test -z "$as_dir" && as_dir=.
-  for ac_exec_ext in '' $ac_executable_extensions; do
-  if { test -f "$as_dir/$ac_word$ac_exec_ext" && $as_test_x "$as_dir/$ac_word$ac_exec_ext"; }; then
+  case $as_dir in #(((
+    '') as_dir=./ ;;
+    */) ;;
+    *) as_dir=$as_dir/ ;;
+  esac
+    for ac_exec_ext in '' $ac_executable_extensions; do
+  if as_fn_executable_p "$as_dir$ac_word$ac_exec_ext"; then
     ac_cv_prog_F77="$ac_tool_prefix$ac_prog"
-    echo "$as_me:$LINENO: found $as_dir/$ac_word$ac_exec_ext" >&5
+    printf "%s\n" "$as_me:${as_lineno-$LINENO}: found $as_dir$ac_word$ac_exec_ext" >&5
     break 2
   fi
 done
-done
+  done
 IFS=$as_save_IFS
 
 fi
 fi
 F77=$ac_cv_prog_F77
 if test -n "$F77"; then
-  { echo "$as_me:$LINENO: result: $F77" >&5
-echo "${ECHO_T}$F77" >&6; }
+  { printf "%s\n" "$as_me:${as_lineno-$LINENO}: result: $F77" >&5
+printf "%s\n" "$F77" >&6; }
 else
-  { echo "$as_me:$LINENO: result: no" >&5
-echo "${ECHO_T}no" >&6; }
+  { printf "%s\n" "$as_me:${as_lineno-$LINENO}: result: no" >&5
+printf "%s\n" "no" >&6; }
 fi
 
 
@@ -9993,15 +10198,16 @@ fi
 fi
 if test -z "$F77"; then
   ac_ct_F77=$F77
-  for ac_prog in g77 xlf f77 frt pgf77 cf77 fort77 fl32 af77 xlf90 f90 pgf90 pghpf epcf90 gfortran g95 xlf95 f95 fort ifort ifc efc pgf95 lf95 ftn
+  for ac_prog in g77 xlf f77 frt pgf77 cf77 fort77 fl32 af77 xlf90 f90 pgf90 pghpf epcf90 gfortran g95 xlf95 f95 fort ifort ifc efc pgfortran pgf95 lf95 ftn nagfor
 do
   # Extract the first word of "$ac_prog", so it can be a program name with args.
 set dummy $ac_prog; ac_word=$2
-{ echo "$as_me:$LINENO: checking for $ac_word" >&5
-echo $ECHO_N "checking for $ac_word... $ECHO_C" >&6; }
-if test "${ac_cv_prog_ac_ct_F77+set}" = set; then
-  echo $ECHO_N "(cached) $ECHO_C" >&6
-else
+{ printf "%s\n" "$as_me:${as_lineno-$LINENO}: checking for $ac_word" >&5
+printf %s "checking for $ac_word... " >&6; }
+if test ${ac_cv_prog_ac_ct_F77+y}
+then :
+  printf %s "(cached) " >&6
+else $as_nop
   if test -n "$ac_ct_F77"; then
   ac_cv_prog_ac_ct_F77="$ac_ct_F77" # Let the user override the test.
 else
@@ -10009,26 +10215,30 @@ as_save_IFS=$IFS; IFS=$PATH_SEPARATOR
 for as_dir in $PATH
 do
   IFS=$as_save_IFS
-  test -z "$as_dir" && as_dir=.
-  for ac_exec_ext in '' $ac_executable_extensions; do
-  if { test -f "$as_dir/$ac_word$ac_exec_ext" && $as_test_x "$as_dir/$ac_word$ac_exec_ext"; }; then
+  case $as_dir in #(((
+    '') as_dir=./ ;;
+    */) ;;
+    *) as_dir=$as_dir/ ;;
+  esac
+    for ac_exec_ext in '' $ac_executable_extensions; do
+  if as_fn_executable_p "$as_dir$ac_word$ac_exec_ext"; then
     ac_cv_prog_ac_ct_F77="$ac_prog"
-    echo "$as_me:$LINENO: found $as_dir/$ac_word$ac_exec_ext" >&5
+    printf "%s\n" "$as_me:${as_lineno-$LINENO}: found $as_dir$ac_word$ac_exec_ext" >&5
     break 2
   fi
 done
-done
+  done
 IFS=$as_save_IFS
 
 fi
 fi
 ac_ct_F77=$ac_cv_prog_ac_ct_F77
 if test -n "$ac_ct_F77"; then
-  { echo "$as_me:$LINENO: result: $ac_ct_F77" >&5
-echo "${ECHO_T}$ac_ct_F77" >&6; }
+  { printf "%s\n" "$as_me:${as_lineno-$LINENO}: result: $ac_ct_F77" >&5
+printf "%s\n" "$ac_ct_F77" >&6; }
 else
-  { echo "$as_me:$LINENO: result: no" >&5
-echo "${ECHO_T}no" >&6; }
+  { printf "%s\n" "$as_me:${as_lineno-$LINENO}: result: no" >&5
+printf "%s\n" "no" >&6; }
 fi
 
 
@@ -10040,12 +10250,8 @@ done
   else
     case $cross_compiling:$ac_tool_warned in
 yes:)
-{ echo "$as_me:$LINENO: WARNING: In the future, Autoconf will not detect cross-tools
-whose name does not start with the host triplet.  If you think this
-configuration is useful to you, please write to autoconf@gnu.org." >&5
-echo "$as_me: WARNING: In the future, Autoconf will not detect cross-tools
-whose name does not start with the host triplet.  If you think this
-configuration is useful to you, please write to autoconf@gnu.org." >&2;}
+{ printf "%s\n" "$as_me:${as_lineno-$LINENO}: WARNING: using cross tools not prefixed with host triplet" >&5
+printf "%s\n" "$as_me: WARNING: using cross tools not prefixed with host triplet" >&2;}
 ac_tool_warned=yes ;;
 esac
     F77=$ac_ct_F77
@@ -10054,50 +10260,42 @@ fi
 
 
 # Provide some information about the compiler.
-echo "$as_me:$LINENO: checking for Fortran 77 compiler version" >&5
-ac_compiler=`set X $ac_compile; echo $2`
-{ (ac_try="$ac_compiler --version >&5"
+printf "%s\n" "$as_me:${as_lineno-$LINENO}: checking for Fortran 77 compiler version" >&5
+set X $ac_compile
+ac_compiler=$2
+for ac_option in --version -v -V -qversion; do
+  { { ac_try="$ac_compiler $ac_option >&5"
 case "(($ac_try" in
   *\"* | *\`* | *\\*) ac_try_echo=\$ac_try;;
   *) ac_try_echo=$ac_try;;
 esac
-eval "echo \"\$as_me:$LINENO: $ac_try_echo\"") >&5
-  (eval "$ac_compiler --version >&5") 2>&5
+eval ac_try_echo="\"\$as_me:${as_lineno-$LINENO}: $ac_try_echo\""
+printf "%s\n" "$ac_try_echo"; } >&5
+  (eval "$ac_compiler $ac_option >&5") 2>conftest.err
   ac_status=$?
-  echo "$as_me:$LINENO: \$? = $ac_status" >&5
-  (exit $ac_status); }
-{ (ac_try="$ac_compiler -v >&5"
-case "(($ac_try" in
-  *\"* | *\`* | *\\*) ac_try_echo=\$ac_try;;
-  *) ac_try_echo=$ac_try;;
-esac
-eval "echo \"\$as_me:$LINENO: $ac_try_echo\"") >&5
-  (eval "$ac_compiler -v >&5") 2>&5
-  ac_status=$?
-  echo "$as_me:$LINENO: \$? = $ac_status" >&5
-  (exit $ac_status); }
-{ (ac_try="$ac_compiler -V >&5"
-case "(($ac_try" in
-  *\"* | *\`* | *\\*) ac_try_echo=\$ac_try;;
-  *) ac_try_echo=$ac_try;;
-esac
-eval "echo \"\$as_me:$LINENO: $ac_try_echo\"") >&5
-  (eval "$ac_compiler -V >&5") 2>&5
-  ac_status=$?
-  echo "$as_me:$LINENO: \$? = $ac_status" >&5
-  (exit $ac_status); }
+  if test -s conftest.err; then
+    sed '10a\
+... rest of stderr output deleted ...
+         10q' conftest.err >conftest.er1
+    cat conftest.er1 >&5
+  fi
+  rm -f conftest.er1 conftest.err
+  printf "%s\n" "$as_me:${as_lineno-$LINENO}: \$? = $ac_status" >&5
+  test $ac_status = 0; }
+done
 rm -f a.out
 
 # If we don't use `.F' as extension, the preprocessor is not run on the
 # input file.  (Note that this only needs to work for GNU compilers.)
 ac_save_ext=$ac_ext
 ac_ext=F
-{ echo "$as_me:$LINENO: checking whether we are using the GNU Fortran 77 compiler" >&5
-echo $ECHO_N "checking whether we are using the GNU Fortran 77 compiler... $ECHO_C" >&6; }
-if test "${ac_cv_f77_compiler_gnu+set}" = set; then
-  echo $ECHO_N "(cached) $ECHO_C" >&6
-else
-  cat >conftest.$ac_ext <<_ACEOF
+{ printf "%s\n" "$as_me:${as_lineno-$LINENO}: checking whether the compiler supports GNU Fortran 77" >&5
+printf %s "checking whether the compiler supports GNU Fortran 77... " >&6; }
+if test ${ac_cv_f77_compiler_gnu+y}
+then :
+  printf %s "(cached) " >&6
+else $as_nop
+  cat > conftest.$ac_ext <<_ACEOF
       program main
 #ifndef __GNUC__
        choke me
@@ -10105,83 +10303,48 @@ else
 
       end
 _ACEOF
-rm -f conftest.$ac_objext
-if { (ac_try="$ac_compile"
-case "(($ac_try" in
-  *\"* | *\`* | *\\*) ac_try_echo=\$ac_try;;
-  *) ac_try_echo=$ac_try;;
-esac
-eval "echo \"\$as_me:$LINENO: $ac_try_echo\"") >&5
-  (eval "$ac_compile") 2>conftest.er1
-  ac_status=$?
-  grep -v '^ *+' conftest.er1 >conftest.err
-  rm -f conftest.er1
-  cat conftest.err >&5
-  echo "$as_me:$LINENO: \$? = $ac_status" >&5
-  (exit $ac_status); } && {
-	 test -z "$ac_f77_werror_flag" ||
-	 test ! -s conftest.err
-       } && test -s conftest.$ac_objext; then
+if ac_fn_f77_try_compile "$LINENO"
+then :
   ac_compiler_gnu=yes
-else
-  echo "$as_me: failed program was:" >&5
-sed 's/^/| /' conftest.$ac_ext >&5
-
-	ac_compiler_gnu=no
+else $as_nop
+  ac_compiler_gnu=no
 fi
-
-rm -f core conftest.err conftest.$ac_objext conftest.$ac_ext
+rm -f core conftest.err conftest.$ac_objext conftest.beam conftest.$ac_ext
 ac_cv_f77_compiler_gnu=$ac_compiler_gnu
 
 fi
-{ echo "$as_me:$LINENO: result: $ac_cv_f77_compiler_gnu" >&5
-echo "${ECHO_T}$ac_cv_f77_compiler_gnu" >&6; }
+{ printf "%s\n" "$as_me:${as_lineno-$LINENO}: result: $ac_cv_f77_compiler_gnu" >&5
+printf "%s\n" "$ac_cv_f77_compiler_gnu" >&6; }
+ac_compiler_gnu=$ac_cv_f77_compiler_gnu
+
 ac_ext=$ac_save_ext
-ac_test_FFLAGS=${FFLAGS+set}
+ac_test_FFLAGS=${FFLAGS+y}
 ac_save_FFLAGS=$FFLAGS
 FFLAGS=
-{ echo "$as_me:$LINENO: checking whether $F77 accepts -g" >&5
-echo $ECHO_N "checking whether $F77 accepts -g... $ECHO_C" >&6; }
-if test "${ac_cv_prog_f77_g+set}" = set; then
-  echo $ECHO_N "(cached) $ECHO_C" >&6
-else
+{ printf "%s\n" "$as_me:${as_lineno-$LINENO}: checking whether $F77 accepts -g" >&5
+printf %s "checking whether $F77 accepts -g... " >&6; }
+if test ${ac_cv_prog_f77_g+y}
+then :
+  printf %s "(cached) " >&6
+else $as_nop
   FFLAGS=-g
-cat >conftest.$ac_ext <<_ACEOF
+cat > conftest.$ac_ext <<_ACEOF
       program main
 
       end
 _ACEOF
-rm -f conftest.$ac_objext
-if { (ac_try="$ac_compile"
-case "(($ac_try" in
-  *\"* | *\`* | *\\*) ac_try_echo=\$ac_try;;
-  *) ac_try_echo=$ac_try;;
-esac
-eval "echo \"\$as_me:$LINENO: $ac_try_echo\"") >&5
-  (eval "$ac_compile") 2>conftest.er1
-  ac_status=$?
-  grep -v '^ *+' conftest.er1 >conftest.err
-  rm -f conftest.er1
-  cat conftest.err >&5
-  echo "$as_me:$LINENO: \$? = $ac_status" >&5
-  (exit $ac_status); } && {
-	 test -z "$ac_f77_werror_flag" ||
-	 test ! -s conftest.err
-       } && test -s conftest.$ac_objext; then
+if ac_fn_f77_try_compile "$LINENO"
+then :
   ac_cv_prog_f77_g=yes
-else
-  echo "$as_me: failed program was:" >&5
-sed 's/^/| /' conftest.$ac_ext >&5
-
-	ac_cv_prog_f77_g=no
+else $as_nop
+  ac_cv_prog_f77_g=no
 fi
-
-rm -f core conftest.err conftest.$ac_objext conftest.$ac_ext
+rm -f core conftest.err conftest.$ac_objext conftest.beam conftest.$ac_ext
 
 fi
-{ echo "$as_me:$LINENO: result: $ac_cv_prog_f77_g" >&5
-echo "${ECHO_T}$ac_cv_prog_f77_g" >&6; }
-if test "$ac_test_FFLAGS" = set; then
+{ printf "%s\n" "$as_me:${as_lineno-$LINENO}: result: $ac_cv_prog_f77_g" >&5
+printf "%s\n" "$ac_cv_prog_f77_g" >&6; }
+if test $ac_test_FFLAGS; then
   FFLAGS=$ac_save_FFLAGS
 elif test $ac_cv_prog_f77_g = yes; then
   if test "x$ac_cv_f77_compiler_gnu" = xyes; then
@@ -10197,7 +10360,11 @@ else
   fi
 fi
 
-G77=`test $ac_compiler_gnu = yes && echo yes`
+if test $ac_compiler_gnu = yes; then
+  G77=yes
+else
+  G77=
+fi
 ac_ext=c
 ac_cpp='$CPP $CPPFLAGS'
 ac_compile='$CC -c $CFLAGS $CPPFLAGS conftest.$ac_ext >&5'
@@ -10209,37 +10376,23 @@ ac_ext=f
 ac_compile='$F77 -c $FFLAGS conftest.$ac_ext >&5'
 ac_link='$F77 -o conftest$ac_exeext $FFLAGS $LDFLAGS conftest.$ac_ext $LIBS >&5'
 ac_compiler_gnu=$ac_cv_f77_compiler_gnu
-{ echo "$as_me:$LINENO: checking how to get verbose linking output from $F77" >&5
-echo $ECHO_N "checking how to get verbose linking output from $F77... $ECHO_C" >&6; }
-if test "${ac_cv_prog_f77_v+set}" = set; then
-  echo $ECHO_N "(cached) $ECHO_C" >&6
-else
-  cat >conftest.$ac_ext <<_ACEOF
+{ printf "%s\n" "$as_me:${as_lineno-$LINENO}: checking how to get verbose linking output from $F77" >&5
+printf %s "checking how to get verbose linking output from $F77... " >&6; }
+if test ${ac_cv_prog_f77_v+y}
+then :
+  printf %s "(cached) " >&6
+else $as_nop
+  cat > conftest.$ac_ext <<_ACEOF
       program main
 
       end
 _ACEOF
-rm -f conftest.$ac_objext
-if { (ac_try="$ac_compile"
-case "(($ac_try" in
-  *\"* | *\`* | *\\*) ac_try_echo=\$ac_try;;
-  *) ac_try_echo=$ac_try;;
-esac
-eval "echo \"\$as_me:$LINENO: $ac_try_echo\"") >&5
-  (eval "$ac_compile") 2>conftest.er1
-  ac_status=$?
-  grep -v '^ *+' conftest.er1 >conftest.err
-  rm -f conftest.er1
-  cat conftest.err >&5
-  echo "$as_me:$LINENO: \$? = $ac_status" >&5
-  (exit $ac_status); } && {
-	 test -z "$ac_f77_werror_flag" ||
-	 test ! -s conftest.err
-       } && test -s conftest.$ac_objext; then
+if ac_fn_f77_try_compile "$LINENO"
+then :
   ac_cv_prog_f77_v=
 # Try some options frequently used verbose output
 for ac_verb in -v -verbose --verbose -V -\#\#\#; do
-  cat >conftest.$ac_ext <<_ACEOF
+  cat > conftest.$ac_ext <<_ACEOF
       program main
 
       end
@@ -10253,27 +10406,38 @@ ac_save_FFLAGS=$FFLAGS
 FFLAGS="$FFLAGS $ac_verb"
 eval "set x $ac_link"
 shift
-echo "$as_me:$LINENO: $*" >&5
-ac_f77_v_output=`eval $ac_link 5>&1 2>&1 | grep -v 'Driving:'`
-echo "$ac_f77_v_output" >&5
+printf "%s\n" "$as_me:${as_lineno-$LINENO}: $*" >&5
+# gfortran 4.3 outputs lines setting COLLECT_GCC_OPTIONS, COMPILER_PATH,
+# LIBRARY_PATH; skip all such settings.
+ac_f77_v_output=`eval $ac_link 5>&1 2>&1 |
+  sed '/^Driving:/d; /^Configured with:/d;
+      '"/^[_$as_cr_Letters][_$as_cr_alnum]*=/d"`
+printf "%s\n" "$ac_f77_v_output" >&5
 FFLAGS=$ac_save_FFLAGS
 
-rm -f conftest*
+rm -rf conftest*
 
 # On HP/UX there is a line like: "LPATH is: /foo:/bar:/baz" where
 # /foo, /bar, and /baz are search directories for the Fortran linker.
 # Here, we change these into -L/foo -L/bar -L/baz (and put it first):
 ac_f77_v_output="`echo $ac_f77_v_output |
 	grep 'LPATH is:' |
-	sed 's,.*LPATH is\(: *[^ ]*\).*,\1,;s,: */, -L/,g'` $ac_f77_v_output"
+	sed 's|.*LPATH is\(: *[^ ]*\).*|\1|;s|: */| -L/|g'` $ac_f77_v_output"
 
 # FIXME: we keep getting bitten by quoted arguments; a more general fix
 #        that detects unbalanced quotes in FLIBS should be implemented
 #        and (ugh) tested at some point.
 case $ac_f77_v_output in
-  # If we are using xlf then replace all the commas with spaces.
+  # With xlf replace commas with spaces,
+  # and remove "-link" and closing parenthesis.
   *xlfentry*)
-    ac_f77_v_output=`echo $ac_f77_v_output | sed 's/,/ /g'` ;;
+    ac_f77_v_output=`echo $ac_f77_v_output |
+      sed '
+        s/,/ /g
+        s/ -link / /g
+        s/) *$//
+      '
+    ` ;;
 
   # With Intel ifc, ignore the quoted -mGLOB_options_string stuff (quoted
   # $LIBS confuse us, and the libraries appear later in the output anyway).
@@ -10285,9 +10449,19 @@ case $ac_f77_v_output in
   # Doubly-quoted arguments were reported for "PGF90/x86 Linux/x86 5.0-2".
   *-cmdline\ * | *-ignore\ * | *-def\ *)
     ac_f77_v_output=`echo $ac_f77_v_output | sed "\
-        s/-cmdline  *'[^']*'/ /g; s/-cmdline  *\"[^\"]*\"/ /g
-        s/-ignore  *'[^']*'/ /g; s/-ignore  *\"[^\"]*\"/ /g
-        s/-def  *'[^']*'/ /g; s/-def  *\"[^\"]*\"/ /g"` ;;
+	s/-cmdline  *'[^']*'/ /g; s/-cmdline  *\"[^\"]*\"/ /g
+	s/-ignore  *'[^']*'/ /g; s/-ignore  *\"[^\"]*\"/ /g
+	s/-def  *'[^']*'/ /g; s/-def  *\"[^\"]*\"/ /g"` ;;
+
+  # If we are using fort77 (the f2c wrapper) then filter output and delete quotes.
+  *fort77*f2c*gcc*)
+    ac_f77_v_output=`echo "$ac_f77_v_output" | sed -n '
+        /:[	 ]\+Running[	 ]\{1,\}"gcc"/{
+          /"-c"/d
+          /[.]c"*/d
+          s/^.*"gcc"/"gcc"/
+          s/"//gp
+        }'` ;;
 
   # If we are using Cray Fortran then delete quotes.
   *cft90*)
@@ -10298,39 +10472,36 @@ esac
   # look for -l* and *.a constructs in the output
   for ac_arg in $ac_f77_v_output; do
      case $ac_arg in
-        [\\/]*.a | ?:[\\/]*.a | -[lLRu]*)
-          ac_cv_prog_f77_v=$ac_verb
-          break 2 ;;
+	[\\/]*.a | ?:[\\/]*.a | -[lLRu]*)
+	  ac_cv_prog_f77_v=$ac_verb
+	  break 2 ;;
      esac
   done
 done
 if test -z "$ac_cv_prog_f77_v"; then
-   { echo "$as_me:$LINENO: WARNING: cannot determine how to obtain linking information from $F77" >&5
-echo "$as_me: WARNING: cannot determine how to obtain linking information from $F77" >&2;}
+   { printf "%s\n" "$as_me:${as_lineno-$LINENO}: WARNING: cannot determine how to obtain linking information from $F77" >&5
+printf "%s\n" "$as_me: WARNING: cannot determine how to obtain linking information from $F77" >&2;}
 fi
-else
-  echo "$as_me: failed program was:" >&5
-sed 's/^/| /' conftest.$ac_ext >&5
-
-	{ echo "$as_me:$LINENO: WARNING: compilation failed" >&5
-echo "$as_me: WARNING: compilation failed" >&2;}
+else $as_nop
+  { printf "%s\n" "$as_me:${as_lineno-$LINENO}: WARNING: compilation failed" >&5
+printf "%s\n" "$as_me: WARNING: compilation failed" >&2;}
 fi
-
-rm -f core conftest.err conftest.$ac_objext conftest.$ac_ext
+rm -f core conftest.err conftest.$ac_objext conftest.beam conftest.$ac_ext
 
 fi
-{ echo "$as_me:$LINENO: result: $ac_cv_prog_f77_v" >&5
-echo "${ECHO_T}$ac_cv_prog_f77_v" >&6; }
-{ echo "$as_me:$LINENO: checking for Fortran 77 libraries of $F77" >&5
-echo $ECHO_N "checking for Fortran 77 libraries of $F77... $ECHO_C" >&6; }
-if test "${ac_cv_f77_libs+set}" = set; then
-  echo $ECHO_N "(cached) $ECHO_C" >&6
-else
+{ printf "%s\n" "$as_me:${as_lineno-$LINENO}: result: $ac_cv_prog_f77_v" >&5
+printf "%s\n" "$ac_cv_prog_f77_v" >&6; }
+{ printf "%s\n" "$as_me:${as_lineno-$LINENO}: checking for Fortran 77 libraries of $F77" >&5
+printf %s "checking for Fortran 77 libraries of $F77... " >&6; }
+if test ${ac_cv_f77_libs+y}
+then :
+  printf %s "(cached) " >&6
+else $as_nop
   if test "x$FLIBS" != "x"; then
   ac_cv_f77_libs="$FLIBS" # Let the user override the test.
 else
 
-cat >conftest.$ac_ext <<_ACEOF
+cat > conftest.$ac_ext <<_ACEOF
       program main
 
       end
@@ -10344,27 +10515,38 @@ ac_save_FFLAGS=$FFLAGS
 FFLAGS="$FFLAGS $ac_cv_prog_f77_v"
 eval "set x $ac_link"
 shift
-echo "$as_me:$LINENO: $*" >&5
-ac_f77_v_output=`eval $ac_link 5>&1 2>&1 | grep -v 'Driving:'`
-echo "$ac_f77_v_output" >&5
+printf "%s\n" "$as_me:${as_lineno-$LINENO}: $*" >&5
+# gfortran 4.3 outputs lines setting COLLECT_GCC_OPTIONS, COMPILER_PATH,
+# LIBRARY_PATH; skip all such settings.
+ac_f77_v_output=`eval $ac_link 5>&1 2>&1 |
+  sed '/^Driving:/d; /^Configured with:/d;
+      '"/^[_$as_cr_Letters][_$as_cr_alnum]*=/d"`
+printf "%s\n" "$ac_f77_v_output" >&5
 FFLAGS=$ac_save_FFLAGS
 
-rm -f conftest*
+rm -rf conftest*
 
 # On HP/UX there is a line like: "LPATH is: /foo:/bar:/baz" where
 # /foo, /bar, and /baz are search directories for the Fortran linker.
 # Here, we change these into -L/foo -L/bar -L/baz (and put it first):
 ac_f77_v_output="`echo $ac_f77_v_output |
 	grep 'LPATH is:' |
-	sed 's,.*LPATH is\(: *[^ ]*\).*,\1,;s,: */, -L/,g'` $ac_f77_v_output"
+	sed 's|.*LPATH is\(: *[^ ]*\).*|\1|;s|: */| -L/|g'` $ac_f77_v_output"
 
 # FIXME: we keep getting bitten by quoted arguments; a more general fix
 #        that detects unbalanced quotes in FLIBS should be implemented
 #        and (ugh) tested at some point.
 case $ac_f77_v_output in
-  # If we are using xlf then replace all the commas with spaces.
+  # With xlf replace commas with spaces,
+  # and remove "-link" and closing parenthesis.
   *xlfentry*)
-    ac_f77_v_output=`echo $ac_f77_v_output | sed 's/,/ /g'` ;;
+    ac_f77_v_output=`echo $ac_f77_v_output |
+      sed '
+        s/,/ /g
+        s/ -link / /g
+        s/) *$//
+      '
+    ` ;;
 
   # With Intel ifc, ignore the quoted -mGLOB_options_string stuff (quoted
   # $LIBS confuse us, and the libraries appear later in the output anyway).
@@ -10376,9 +10558,19 @@ case $ac_f77_v_output in
   # Doubly-quoted arguments were reported for "PGF90/x86 Linux/x86 5.0-2".
   *-cmdline\ * | *-ignore\ * | *-def\ *)
     ac_f77_v_output=`echo $ac_f77_v_output | sed "\
-        s/-cmdline  *'[^']*'/ /g; s/-cmdline  *\"[^\"]*\"/ /g
-        s/-ignore  *'[^']*'/ /g; s/-ignore  *\"[^\"]*\"/ /g
-        s/-def  *'[^']*'/ /g; s/-def  *\"[^\"]*\"/ /g"` ;;
+	s/-cmdline  *'[^']*'/ /g; s/-cmdline  *\"[^\"]*\"/ /g
+	s/-ignore  *'[^']*'/ /g; s/-ignore  *\"[^\"]*\"/ /g
+	s/-def  *'[^']*'/ /g; s/-def  *\"[^\"]*\"/ /g"` ;;
+
+  # If we are using fort77 (the f2c wrapper) then filter output and delete quotes.
+  *fort77*f2c*gcc*)
+    ac_f77_v_output=`echo "$ac_f77_v_output" | sed -n '
+        /:[	 ]\+Running[	 ]\{1,\}"gcc"/{
+          /"-c"/d
+          /[.]c"*/d
+          s/^.*"gcc"/"gcc"/
+          s/"//gp
+        }'` ;;
 
   # If we are using Cray Fortran then delete quotes.
   *cft90*)
@@ -10397,8 +10589,8 @@ while test $# != 1; do
   shift
   ac_arg=$1
   case $ac_arg in
-        [\\/]*.a | ?:[\\/]*.a)
-            ac_exists=false
+	[\\/]*.a | ?:[\\/]*.a)
+	    ac_exists=false
   for ac_i in $ac_cv_f77_libs; do
     if test x"$ac_arg" = x"$ac_i"; then
       ac_exists=true
@@ -10406,15 +10598,15 @@ while test $# != 1; do
     fi
   done
 
-  if test x"$ac_exists" = xtrue; then
-  :
-else
+  if test x"$ac_exists" = xtrue
+then :
+
+else $as_nop
   ac_cv_f77_libs="$ac_cv_f77_libs $ac_arg"
 fi
-
-          ;;
-        -bI:*)
-            ac_exists=false
+	  ;;
+	-bI:*)
+	    ac_exists=false
   for ac_i in $ac_cv_f77_libs; do
     if test x"$ac_arg" = x"$ac_i"; then
       ac_exists=true
@@ -10422,9 +10614,10 @@ fi
     fi
   done
 
-  if test x"$ac_exists" = xtrue; then
-  :
-else
+  if test x"$ac_exists" = xtrue
+then :
+
+else $as_nop
   if test "$ac_compiler_gnu" = yes; then
   for ac_link_opt in $ac_arg; do
     ac_cv_f77_libs="$ac_cv_f77_libs -Xlinker $ac_link_opt"
@@ -10433,18 +10626,37 @@ else
   ac_cv_f77_libs="$ac_cv_f77_libs $ac_arg"
 fi
 fi
+	  ;;
+	  # Ignore these flags.
+	-lang* | -lcrt*.o | -lc | -lgcc* | -lSystem | -libmil | -little \
+	  |-LANG:=* | -LIST:* | -LNO:* | -link)
+	  ;;
+	-lkernel32)
+	  # Ignore this library only on Windows-like systems.
+	  case $host_os in
+	  cygwin* | msys* ) ;;
+	  *)
+	    ac_exists=false
+  for ac_i in $ac_cv_f77_libs; do
+    if test x"$ac_arg" = x"$ac_i"; then
+      ac_exists=true
+      break
+    fi
+  done
 
-          ;;
-          # Ignore these flags.
-        -lang* | -lcrt*.o | -lc | -lgcc* | -lSystem | -libmil | -LANG:=* | -LIST:* | -LNO:*)
-          ;;
-        -lkernel32)
-          test x"$CYGWIN" != xyes && ac_cv_f77_libs="$ac_cv_f77_libs $ac_arg"
-          ;;
-        -[LRuYz])
-          # These flags, when seen by themselves, take an argument.
-          # We remove the space between option and argument and re-iterate
-          # unless we find an empty arg or a new option (starting with -)
+  if test x"$ac_exists" = xtrue
+then :
+
+else $as_nop
+  ac_cv_f77_libs="$ac_cv_f77_libs $ac_arg"
+fi
+	    ;;
+	  esac
+	  ;;
+	-[LRuYz])
+	  # These flags, when seen by themselves, take an argument.
+	  # We remove the space between option and argument and re-iterate
+	  # unless we find an empty arg or a new option (starting with -)
 	  case $2 in
 	     "" | -*);;
 	     *)
@@ -10453,10 +10665,10 @@ fi
 		set X $ac_arg "$@"
 		;;
 	  esac
-          ;;
-        -YP,*)
-          for ac_j in `echo $ac_arg | sed -e 's/-YP,/-L/;s/:/ -L/g'`; do
-              ac_exists=false
+	  ;;
+	-YP,*)
+	  for ac_j in `printf "%s\n" "$ac_arg" | sed -e 's/-YP,/-L/;s/:/ -L/g'`; do
+	      ac_exists=false
   for ac_i in $ac_cv_f77_libs; do
     if test x"$ac_j" = x"$ac_i"; then
       ac_exists=true
@@ -10464,17 +10676,17 @@ fi
     fi
   done
 
-  if test x"$ac_exists" = xtrue; then
-  :
-else
+  if test x"$ac_exists" = xtrue
+then :
+
+else $as_nop
   ac_arg="$ac_arg $ac_j"
-                               ac_cv_f77_libs="$ac_cv_f77_libs $ac_j"
+			       ac_cv_f77_libs="$ac_cv_f77_libs $ac_j"
 fi
-
-          done
-          ;;
-        -[lLR]*)
-            ac_exists=false
+	  done
+	  ;;
+	-[lLR]*)
+	    ac_exists=false
   for ac_i in $ac_cv_f77_libs; do
     if test x"$ac_arg" = x"$ac_i"; then
       ac_exists=true
@@ -10482,17 +10694,18 @@ fi
     fi
   done
 
-  if test x"$ac_exists" = xtrue; then
-  :
-else
+  if test x"$ac_exists" = xtrue
+then :
+
+else $as_nop
   ac_cv_f77_libs="$ac_cv_f77_libs $ac_arg"
 fi
-
-          ;;
+	  ;;
 	-zallextract*| -zdefaultextract)
 	  ac_cv_f77_libs="$ac_cv_f77_libs $ac_arg"
 	  ;;
-          # Ignore everything else.
+	-mllvm) ${2+shift};; # Defend against 'clang -mllvm -loopopt=0'.
+	  # Ignore everything else.
   esac
 done
 # restore positional arguments
@@ -10503,10 +10716,10 @@ set X $ac_save_positional; shift
 # must begin with a "/").
 case `(uname -sr) 2>/dev/null` in
    "SunOS 5"*)
-      ac_ld_run_path=`echo $ac_f77_v_output |
-                        sed -n 's,^.*LD_RUN_PATH *= *\(/[^ ]*\).*$,-R\1,p'`
+      ac_ld_run_path=`printf "%s\n" "$ac_f77_v_output" |
+			sed -n 's,^.*LD_RUN_PATH *= *\(/[^ ]*\).*$,-R\1,p'`
       test "x$ac_ld_run_path" != x &&
-        if test "$ac_compiler_gnu" = yes; then
+	if test "$ac_compiler_gnu" = yes; then
   for ac_link_opt in $ac_ld_run_path; do
     ac_cv_f77_libs="$ac_cv_f77_libs -Xlinker $ac_link_opt"
   done
@@ -10518,9 +10731,9 @@ esac
 fi # test "x$[]_AC_LANG_PREFIX[]LIBS" = "x"
 
 fi
-{ echo "$as_me:$LINENO: result: $ac_cv_f77_libs" >&5
-echo "${ECHO_T}$ac_cv_f77_libs" >&6; }
-FLIBS="$ac_cv_f77_libs"
+{ printf "%s\n" "$as_me:${as_lineno-$LINENO}: result: $ac_cv_f77_libs" >&5
+printf "%s\n" "$ac_cv_f77_libs" >&6; }
+FLIBS="" # We never use FLIBS and it sometimes has quotes it in it, so disable it completely
 
 
 ac_ext=c
@@ -10534,11 +10747,12 @@ ac_compile='$F77 -c $FFLAGS conftest.$ac_ext >&5'
 ac_link='$F77 -o conftest$ac_exeext $FFLAGS $LDFLAGS conftest.$ac_ext $LIBS >&5'
 ac_compiler_gnu=$ac_cv_f77_compiler_gnu
 
-{ echo "$as_me:$LINENO: checking for dummy main to link with Fortran 77 libraries" >&5
-echo $ECHO_N "checking for dummy main to link with Fortran 77 libraries... $ECHO_C" >&6; }
-if test "${ac_cv_f77_dummy_main+set}" = set; then
-  echo $ECHO_N "(cached) $ECHO_C" >&6
-else
+{ printf "%s\n" "$as_me:${as_lineno-$LINENO}: checking for dummy main to link with Fortran 77 libraries" >&5
+printf %s "checking for dummy main to link with Fortran 77 libraries... " >&6; }
+if test ${ac_cv_f77_dummy_main+y}
+then :
+  printf %s "(cached) " >&6
+else $as_nop
   ac_f77_dm_save_LIBS=$LIBS
  LIBS="$LIBS $FLIBS"
  ac_fortran_dm_var=F77_DUMMY_MAIN
@@ -10549,11 +10763,7 @@ ac_link='$CC -o conftest$ac_exeext $CFLAGS $CPPFLAGS $LDFLAGS conftest.$ac_ext $
 ac_compiler_gnu=$ac_cv_c_compiler_gnu
 
  # First, try linking without a dummy main:
- cat >conftest.$ac_ext <<_ACEOF
-/* confdefs.h.  */
-_ACEOF
-cat confdefs.h >>conftest.$ac_ext
-cat >>conftest.$ac_ext <<_ACEOF
+ cat confdefs.h - <<_ACEOF >conftest.$ac_ext
 /* end confdefs.h.  */
 
 #ifdef F77_DUMMY_MAIN
@@ -10565,49 +10775,25 @@ cat >>conftest.$ac_ext <<_ACEOF
 
 #endif
 int
-main ()
+main (void)
 {
 
   ;
   return 0;
 }
 _ACEOF
-rm -f conftest.$ac_objext conftest$ac_exeext
-if { (ac_try="$ac_link"
-case "(($ac_try" in
-  *\"* | *\`* | *\\*) ac_try_echo=\$ac_try;;
-  *) ac_try_echo=$ac_try;;
-esac
-eval "echo \"\$as_me:$LINENO: $ac_try_echo\"") >&5
-  (eval "$ac_link") 2>conftest.er1
-  ac_status=$?
-  grep -v '^ *+' conftest.er1 >conftest.err
-  rm -f conftest.er1
-  cat conftest.err >&5
-  echo "$as_me:$LINENO: \$? = $ac_status" >&5
-  (exit $ac_status); } && {
-	 test -z "$ac_c_werror_flag" ||
-	 test ! -s conftest.err
-       } && test -s conftest$ac_exeext &&
-       $as_test_x conftest$ac_exeext; then
+if ac_fn_c_try_link "$LINENO"
+then :
   ac_cv_fortran_dummy_main=none
-else
-  echo "$as_me: failed program was:" >&5
-sed 's/^/| /' conftest.$ac_ext >&5
-
-	ac_cv_fortran_dummy_main=unknown
+else $as_nop
+  ac_cv_fortran_dummy_main=unknown
 fi
-
-rm -f core conftest.err conftest.$ac_objext conftest_ipa8_conftest.oo \
-      conftest$ac_exeext conftest.$ac_ext
+rm -f core conftest.err conftest.$ac_objext conftest.beam \
+    conftest$ac_exeext conftest.$ac_ext
 
  if test $ac_cv_fortran_dummy_main = unknown; then
    for ac_func in MAIN__ MAIN_ __main MAIN _MAIN __MAIN main_ main__ _main; do
-     cat >conftest.$ac_ext <<_ACEOF
-/* confdefs.h.  */
-_ACEOF
-cat confdefs.h >>conftest.$ac_ext
-cat >>conftest.$ac_ext <<_ACEOF
+     cat confdefs.h - <<_ACEOF >conftest.$ac_ext
 /* end confdefs.h.  */
 #define $ac_fortran_dm_var $ac_func
 #ifdef F77_DUMMY_MAIN
@@ -10619,41 +10805,19 @@ cat >>conftest.$ac_ext <<_ACEOF
 
 #endif
 int
-main ()
+main (void)
 {
 
   ;
   return 0;
 }
 _ACEOF
-rm -f conftest.$ac_objext conftest$ac_exeext
-if { (ac_try="$ac_link"
-case "(($ac_try" in
-  *\"* | *\`* | *\\*) ac_try_echo=\$ac_try;;
-  *) ac_try_echo=$ac_try;;
-esac
-eval "echo \"\$as_me:$LINENO: $ac_try_echo\"") >&5
-  (eval "$ac_link") 2>conftest.er1
-  ac_status=$?
-  grep -v '^ *+' conftest.er1 >conftest.err
-  rm -f conftest.er1
-  cat conftest.err >&5
-  echo "$as_me:$LINENO: \$? = $ac_status" >&5
-  (exit $ac_status); } && {
-	 test -z "$ac_c_werror_flag" ||
-	 test ! -s conftest.err
-       } && test -s conftest$ac_exeext &&
-       $as_test_x conftest$ac_exeext; then
+if ac_fn_c_try_link "$LINENO"
+then :
   ac_cv_fortran_dummy_main=$ac_func; break
-else
-  echo "$as_me: failed program was:" >&5
-sed 's/^/| /' conftest.$ac_ext >&5
-
-
 fi
-
-rm -f core conftest.err conftest.$ac_objext conftest_ipa8_conftest.oo \
-      conftest$ac_exeext conftest.$ac_ext
+rm -f core conftest.err conftest.$ac_objext conftest.beam \
+    conftest$ac_exeext conftest.$ac_ext
    done
  fi
  ac_ext=f
@@ -10661,37 +10825,32 @@ ac_compile='$F77 -c $FFLAGS conftest.$ac_ext >&5'
 ac_link='$F77 -o conftest$ac_exeext $FFLAGS $LDFLAGS conftest.$ac_ext $LIBS >&5'
 ac_compiler_gnu=$ac_cv_f77_compiler_gnu
  ac_cv_f77_dummy_main=$ac_cv_fortran_dummy_main
- rm -f conftest*
+ rm -rf conftest*
  LIBS=$ac_f77_dm_save_LIBS
 
 fi
-{ echo "$as_me:$LINENO: result: $ac_cv_f77_dummy_main" >&5
-echo "${ECHO_T}$ac_cv_f77_dummy_main" >&6; }
+{ printf "%s\n" "$as_me:${as_lineno-$LINENO}: result: $ac_cv_f77_dummy_main" >&5
+printf "%s\n" "$ac_cv_f77_dummy_main" >&6; }
 F77_DUMMY_MAIN=$ac_cv_f77_dummy_main
-if test "$F77_DUMMY_MAIN" != unknown; then
+if test "$F77_DUMMY_MAIN" != unknown
+then :
   if test $F77_DUMMY_MAIN != none; then
 
-cat >>confdefs.h <<_ACEOF
-#define F77_DUMMY_MAIN $F77_DUMMY_MAIN
-_ACEOF
+printf "%s\n" "#define F77_DUMMY_MAIN $F77_DUMMY_MAIN" >>confdefs.h
 
   if test "x$ac_cv_fc_dummy_main" = "x$ac_cv_f77_dummy_main"; then
 
-cat >>confdefs.h <<\_ACEOF
-#define FC_DUMMY_MAIN_EQ_F77 1
-_ACEOF
+printf "%s\n" "#define FC_DUMMY_MAIN_EQ_F77 1" >>confdefs.h
 
   fi
 fi
-else
-  { { echo "$as_me:$LINENO: error: linking to Fortran libraries from C fails
-See \`config.log' for more details." >&5
-echo "$as_me: error: linking to Fortran libraries from C fails
-See \`config.log' for more details." >&2;}
-   { (exit 1); exit 1; }; }
+else $as_nop
+  { { printf "%s\n" "$as_me:${as_lineno-$LINENO}: error: in \`$ac_pwd':" >&5
+printf "%s\n" "$as_me: error: in \`$ac_pwd':" >&2;}
+as_fn_error $? "linking to Fortran libraries from C fails
+See \`config.log' for more details" "$LINENO" 5; }
 fi
 
-
 ac_ext=c
 ac_cpp='$CPP $CPPFLAGS'
 ac_compile='$CC -c $CFLAGS $CPPFLAGS conftest.$ac_ext >&5'
@@ -10702,12 +10861,13 @@ ac_ext=f
 ac_compile='$F77 -c $FFLAGS conftest.$ac_ext >&5'
 ac_link='$F77 -o conftest$ac_exeext $FFLAGS $LDFLAGS conftest.$ac_ext $LIBS >&5'
 ac_compiler_gnu=$ac_cv_f77_compiler_gnu
-{ echo "$as_me:$LINENO: checking for Fortran 77 name-mangling scheme" >&5
-echo $ECHO_N "checking for Fortran 77 name-mangling scheme... $ECHO_C" >&6; }
-if test "${ac_cv_f77_mangling+set}" = set; then
-  echo $ECHO_N "(cached) $ECHO_C" >&6
-else
-  cat >conftest.$ac_ext <<_ACEOF
+{ printf "%s\n" "$as_me:${as_lineno-$LINENO}: checking for Fortran 77 name-mangling scheme" >&5
+printf %s "checking for Fortran 77 name-mangling scheme... " >&6; }
+if test ${ac_cv_f77_mangling+y}
+then :
+  printf %s "(cached) " >&6
+else $as_nop
+  cat > conftest.$ac_ext <<_ACEOF
       subroutine foobar()
       return
       end
@@ -10715,23 +10875,8 @@ else
       return
       end
 _ACEOF
-rm -f conftest.$ac_objext
-if { (ac_try="$ac_compile"
-case "(($ac_try" in
-  *\"* | *\`* | *\\*) ac_try_echo=\$ac_try;;
-  *) ac_try_echo=$ac_try;;
-esac
-eval "echo \"\$as_me:$LINENO: $ac_try_echo\"") >&5
-  (eval "$ac_compile") 2>conftest.er1
-  ac_status=$?
-  grep -v '^ *+' conftest.er1 >conftest.err
-  rm -f conftest.er1
-  cat conftest.err >&5
-  echo "$as_me:$LINENO: \$? = $ac_status" >&5
-  (exit $ac_status); } && {
-	 test -z "$ac_f77_werror_flag" ||
-	 test ! -s conftest.err
-       } && test -s conftest.$ac_objext; then
+if ac_fn_f77_try_compile "$LINENO"
+then :
   mv conftest.$ac_objext cfortran_test.$ac_objext
 
   ac_save_LIBS=$LIBS
@@ -10746,19 +10891,12 @@ ac_compiler_gnu=$ac_cv_c_compiler_gnu
   for ac_foobar in foobar FOOBAR; do
     for ac_underscore in "" "_"; do
       ac_func="$ac_foobar$ac_underscore"
-      cat >conftest.$ac_ext <<_ACEOF
-/* confdefs.h.  */
-_ACEOF
-cat confdefs.h >>conftest.$ac_ext
-cat >>conftest.$ac_ext <<_ACEOF
+      cat confdefs.h - <<_ACEOF >conftest.$ac_ext
 /* end confdefs.h.  */
 
 /* Override any GCC internal prototype to avoid an error.
    Use char because int might match the return type of a GCC
    builtin and then its argument prototype would still apply.  */
-#ifdef __cplusplus
-extern "C"
-#endif
 char $ac_func ();
 #ifdef F77_DUMMY_MAIN
 
@@ -10769,41 +10907,19 @@ char $ac_func ();
 
 #endif
 int
-main ()
+main (void)
 {
 return $ac_func ();
   ;
   return 0;
 }
 _ACEOF
-rm -f conftest.$ac_objext conftest$ac_exeext
-if { (ac_try="$ac_link"
-case "(($ac_try" in
-  *\"* | *\`* | *\\*) ac_try_echo=\$ac_try;;
-  *) ac_try_echo=$ac_try;;
-esac
-eval "echo \"\$as_me:$LINENO: $ac_try_echo\"") >&5
-  (eval "$ac_link") 2>conftest.er1
-  ac_status=$?
-  grep -v '^ *+' conftest.er1 >conftest.err
-  rm -f conftest.er1
-  cat conftest.err >&5
-  echo "$as_me:$LINENO: \$? = $ac_status" >&5
-  (exit $ac_status); } && {
-	 test -z "$ac_c_werror_flag" ||
-	 test ! -s conftest.err
-       } && test -s conftest$ac_exeext &&
-       $as_test_x conftest$ac_exeext; then
+if ac_fn_c_try_link "$LINENO"
+then :
   ac_success=yes; break 2
-else
-  echo "$as_me: failed program was:" >&5
-sed 's/^/| /' conftest.$ac_ext >&5
-
-
 fi
-
-rm -f core conftest.err conftest.$ac_objext conftest_ipa8_conftest.oo \
-      conftest$ac_exeext conftest.$ac_ext
+rm -f core conftest.err conftest.$ac_objext conftest.beam \
+    conftest$ac_exeext conftest.$ac_ext
     done
   done
   ac_ext=f
@@ -10831,19 +10947,12 @@ ac_compiler_gnu=$ac_cv_c_compiler_gnu
      ac_success_extra=no
      for ac_extra in "" "_"; do
 	ac_func="$ac_foo_bar$ac_underscore$ac_extra"
-	cat >conftest.$ac_ext <<_ACEOF
-/* confdefs.h.  */
-_ACEOF
-cat confdefs.h >>conftest.$ac_ext
-cat >>conftest.$ac_ext <<_ACEOF
+	cat confdefs.h - <<_ACEOF >conftest.$ac_ext
 /* end confdefs.h.  */
 
 /* Override any GCC internal prototype to avoid an error.
    Use char because int might match the return type of a GCC
    builtin and then its argument prototype would still apply.  */
-#ifdef __cplusplus
-extern "C"
-#endif
 char $ac_func ();
 #ifdef F77_DUMMY_MAIN
 
@@ -10854,41 +10963,19 @@ char $ac_func ();
 
 #endif
 int
-main ()
+main (void)
 {
 return $ac_func ();
   ;
   return 0;
 }
 _ACEOF
-rm -f conftest.$ac_objext conftest$ac_exeext
-if { (ac_try="$ac_link"
-case "(($ac_try" in
-  *\"* | *\`* | *\\*) ac_try_echo=\$ac_try;;
-  *) ac_try_echo=$ac_try;;
-esac
-eval "echo \"\$as_me:$LINENO: $ac_try_echo\"") >&5
-  (eval "$ac_link") 2>conftest.er1
-  ac_status=$?
-  grep -v '^ *+' conftest.er1 >conftest.err
-  rm -f conftest.er1
-  cat conftest.err >&5
-  echo "$as_me:$LINENO: \$? = $ac_status" >&5
-  (exit $ac_status); } && {
-	 test -z "$ac_c_werror_flag" ||
-	 test ! -s conftest.err
-       } && test -s conftest$ac_exeext &&
-       $as_test_x conftest$ac_exeext; then
+if ac_fn_c_try_link "$LINENO"
+then :
   ac_success_extra=yes; break
-else
-  echo "$as_me: failed program was:" >&5
-sed 's/^/| /' conftest.$ac_ext >&5
-
-
 fi
-
-rm -f core conftest.err conftest.$ac_objext conftest_ipa8_conftest.oo \
-      conftest$ac_exeext conftest.$ac_ext
+rm -f core conftest.err conftest.$ac_objext conftest.beam \
+    conftest$ac_exeext conftest.$ac_ext
      done
      ac_ext=f
 ac_compile='$F77 -c $FFLAGS conftest.$ac_ext >&5'
@@ -10897,16 +10984,16 @@ ac_compiler_gnu=$ac_cv_f77_compiler_gnu
 
      if test "$ac_success_extra" = "yes"; then
 	ac_cv_f77_mangling="$ac_case case"
-        if test -z "$ac_underscore"; then
-           ac_cv_f77_mangling="$ac_cv_f77_mangling, no underscore"
+	if test -z "$ac_underscore"; then
+	   ac_cv_f77_mangling="$ac_cv_f77_mangling, no underscore"
 	else
-           ac_cv_f77_mangling="$ac_cv_f77_mangling, underscore"
-        fi
-        if test -z "$ac_extra"; then
-           ac_cv_f77_mangling="$ac_cv_f77_mangling, no extra underscore"
+	   ac_cv_f77_mangling="$ac_cv_f77_mangling, underscore"
+	fi
+	if test -z "$ac_extra"; then
+	   ac_cv_f77_mangling="$ac_cv_f77_mangling, no extra underscore"
 	else
-           ac_cv_f77_mangling="$ac_cv_f77_mangling, extra underscore"
-        fi
+	   ac_cv_f77_mangling="$ac_cv_f77_mangling, extra underscore"
+	fi
       else
 	ac_cv_f77_mangling="unknown"
       fi
@@ -10915,23 +11002,19 @@ ac_compiler_gnu=$ac_cv_f77_compiler_gnu
   fi
 
   LIBS=$ac_save_LIBS
-  rm -f cfortran_test* conftest*
-else
-  echo "$as_me: failed program was:" >&5
-sed 's/^/| /' conftest.$ac_ext >&5
-
-	{ { echo "$as_me:$LINENO: error: cannot compile a simple Fortran program
-See \`config.log' for more details." >&5
-echo "$as_me: error: cannot compile a simple Fortran program
-See \`config.log' for more details." >&2;}
-   { (exit 1); exit 1; }; }
+  rm -rf conftest*
+  rm -f cfortran_test*
+else $as_nop
+  { { printf "%s\n" "$as_me:${as_lineno-$LINENO}: error: in \`$ac_pwd':" >&5
+printf "%s\n" "$as_me: error: in \`$ac_pwd':" >&2;}
+as_fn_error $? "cannot compile a simple Fortran program
+See \`config.log' for more details" "$LINENO" 5; }
 fi
-
-rm -f core conftest.err conftest.$ac_objext conftest.$ac_ext
+rm -f core conftest.err conftest.$ac_objext conftest.beam conftest.$ac_ext
 
 fi
-{ echo "$as_me:$LINENO: result: $ac_cv_f77_mangling" >&5
-echo "${ECHO_T}$ac_cv_f77_mangling" >&6; }
+{ printf "%s\n" "$as_me:${as_lineno-$LINENO}: result: $ac_cv_f77_mangling" >&5
+printf "%s\n" "$ac_cv_f77_mangling" >&6; }
 
 ac_ext=c
 ac_cpp='$CPP $CPPFLAGS'
@@ -10943,85 +11026,51 @@ ac_ext=f
 ac_compile='$F77 -c $FFLAGS conftest.$ac_ext >&5'
 ac_link='$F77 -o conftest$ac_exeext $FFLAGS $LDFLAGS conftest.$ac_ext $LIBS >&5'
 ac_compiler_gnu=$ac_cv_f77_compiler_gnu
-
-
 case $ac_cv_f77_mangling in
   "lower case, no underscore, no extra underscore")
-          cat >>confdefs.h <<\_ACEOF
-#define F77_FUNC(name,NAME) name
-_ACEOF
+	  printf "%s\n" "#define F77_FUNC(name,NAME) name" >>confdefs.h
 
-          cat >>confdefs.h <<\_ACEOF
-#define F77_FUNC_(name,NAME) name
-_ACEOF
+	  printf "%s\n" "#define F77_FUNC_(name,NAME) name" >>confdefs.h
  ;;
   "lower case, no underscore, extra underscore")
-          cat >>confdefs.h <<\_ACEOF
-#define F77_FUNC(name,NAME) name
-_ACEOF
+	  printf "%s\n" "#define F77_FUNC(name,NAME) name" >>confdefs.h
 
-          cat >>confdefs.h <<\_ACEOF
-#define F77_FUNC_(name,NAME) name ## _
-_ACEOF
+	  printf "%s\n" "#define F77_FUNC_(name,NAME) name ## _" >>confdefs.h
  ;;
   "lower case, underscore, no extra underscore")
-          cat >>confdefs.h <<\_ACEOF
-#define F77_FUNC(name,NAME) name ## _
-_ACEOF
+	  printf "%s\n" "#define F77_FUNC(name,NAME) name ## _" >>confdefs.h
 
-          cat >>confdefs.h <<\_ACEOF
-#define F77_FUNC_(name,NAME) name ## _
-_ACEOF
+	  printf "%s\n" "#define F77_FUNC_(name,NAME) name ## _" >>confdefs.h
  ;;
   "lower case, underscore, extra underscore")
-          cat >>confdefs.h <<\_ACEOF
-#define F77_FUNC(name,NAME) name ## _
-_ACEOF
+	  printf "%s\n" "#define F77_FUNC(name,NAME) name ## _" >>confdefs.h
 
-          cat >>confdefs.h <<\_ACEOF
-#define F77_FUNC_(name,NAME) name ## __
-_ACEOF
+	  printf "%s\n" "#define F77_FUNC_(name,NAME) name ## __" >>confdefs.h
  ;;
   "upper case, no underscore, no extra underscore")
-          cat >>confdefs.h <<\_ACEOF
-#define F77_FUNC(name,NAME) NAME
-_ACEOF
+	  printf "%s\n" "#define F77_FUNC(name,NAME) NAME" >>confdefs.h
 
-          cat >>confdefs.h <<\_ACEOF
-#define F77_FUNC_(name,NAME) NAME
-_ACEOF
+	  printf "%s\n" "#define F77_FUNC_(name,NAME) NAME" >>confdefs.h
  ;;
   "upper case, no underscore, extra underscore")
-          cat >>confdefs.h <<\_ACEOF
-#define F77_FUNC(name,NAME) NAME
-_ACEOF
+	  printf "%s\n" "#define F77_FUNC(name,NAME) NAME" >>confdefs.h
 
-          cat >>confdefs.h <<\_ACEOF
-#define F77_FUNC_(name,NAME) NAME ## _
-_ACEOF
+	  printf "%s\n" "#define F77_FUNC_(name,NAME) NAME ## _" >>confdefs.h
  ;;
   "upper case, underscore, no extra underscore")
-          cat >>confdefs.h <<\_ACEOF
-#define F77_FUNC(name,NAME) NAME ## _
-_ACEOF
+	  printf "%s\n" "#define F77_FUNC(name,NAME) NAME ## _" >>confdefs.h
 
-          cat >>confdefs.h <<\_ACEOF
-#define F77_FUNC_(name,NAME) NAME ## _
-_ACEOF
+	  printf "%s\n" "#define F77_FUNC_(name,NAME) NAME ## _" >>confdefs.h
  ;;
   "upper case, underscore, extra underscore")
-          cat >>confdefs.h <<\_ACEOF
-#define F77_FUNC(name,NAME) NAME ## _
-_ACEOF
+	  printf "%s\n" "#define F77_FUNC(name,NAME) NAME ## _" >>confdefs.h
 
-          cat >>confdefs.h <<\_ACEOF
-#define F77_FUNC_(name,NAME) NAME ## __
-_ACEOF
+	  printf "%s\n" "#define F77_FUNC_(name,NAME) NAME ## __" >>confdefs.h
  ;;
   *)
-          { echo "$as_me:$LINENO: WARNING: unknown Fortran name-mangling scheme" >&5
-echo "$as_me: WARNING: unknown Fortran name-mangling scheme" >&2;}
-          ;;
+	  { printf "%s\n" "$as_me:${as_lineno-$LINENO}: WARNING: unknown Fortran name-mangling scheme" >&5
+printf "%s\n" "$as_me: WARNING: unknown Fortran name-mangling scheme" >&2;}
+	  ;;
 esac
 
 ac_ext=c
@@ -11031,31 +11080,33 @@ ac_link='$CC -o conftest$ac_exeext $CFLAGS $CPPFLAGS $LDFLAGS conftest.$ac_ext $
 ac_compiler_gnu=$ac_cv_c_compiler_gnu
 
 
-{ echo "$as_me:$LINENO: checking whether to kludge override fortran name mangling results" >&5
-echo $ECHO_N "checking whether to kludge override fortran name mangling results... $ECHO_C" >&6; }
+{ printf "%s\n" "$as_me:${as_lineno-$LINENO}: checking whether to kludge override fortran name mangling results" >&5
+printf %s "checking whether to kludge override fortran name mangling results... " >&6; }
 # Check whether --enable-fortran-mangling-override was given.
-if test "${enable_fortran_mangling_override+set}" = set; then
+if test ${enable_fortran_mangling_override+y}
+then :
   enableval=$enable_fortran_mangling_override; case "$enable_fortran_mangling_override" in
   yes)
-  { echo "$as_me:$LINENO: result: yes" >&5
-echo "${ECHO_T}yes" >&6; }
+  { printf "%s\n" "$as_me:${as_lineno-$LINENO}: result: yes" >&5
+printf "%s\n" "yes" >&6; }
   sed -e 's/^\(#define F77_FUNC.\{1,\}\)/\1 ## _/' confdefs.h > confdefs1.h
   mv confdefs1.h confdefs.h
 esac
-else
-  { echo "$as_me:$LINENO: result: no" >&5
-echo "${ECHO_T}no" >&6; }
+else $as_nop
+  { printf "%s\n" "$as_me:${as_lineno-$LINENO}: result: no" >&5
+printf "%s\n" "no" >&6; }
 fi
 
 
 
 if test "${with_x+set}" = set; then
-   { echo "$as_me:$LINENO: checking for X" >&5
-echo $ECHO_N "checking for X... $ECHO_C" >&6; }
+   { printf "%s\n" "$as_me:${as_lineno-$LINENO}: checking for X" >&5
+printf %s "checking for X... " >&6; }
 
 
 # Check whether --with-x was given.
-if test "${with_x+set}" = set; then
+if test ${with_x+y}
+then :
   withval=$with_x;
 fi
 
@@ -11065,15 +11116,50 @@ if test "x$with_x" = xno; then
   have_x=disabled
 else
   case $x_includes,$x_libraries in #(
-    *\'*) { { echo "$as_me:$LINENO: error: Cannot use X directory names containing '" >&5
-echo "$as_me: error: Cannot use X directory names containing '" >&2;}
-   { (exit 1); exit 1; }; };; #(
-    *,NONE | NONE,*) if test "${ac_cv_have_x+set}" = set; then
-  echo $ECHO_N "(cached) $ECHO_C" >&6
-else
+    *\'*) as_fn_error $? "cannot use X directory names containing '" "$LINENO" 5;; #(
+    *,NONE | NONE,*) if test ${ac_cv_have_x+y}
+then :
+  printf %s "(cached) " >&6
+else $as_nop
   # One or both of the vars are not set, and there is no cached value.
-ac_x_includes=no ac_x_libraries=no
-rm -f -r conftest.dir
+ac_x_includes=no
+ac_x_libraries=no
+# Do we need to do anything special at all?
+ac_save_LIBS=$LIBS
+LIBS="-lX11 $LIBS"
+cat confdefs.h - <<_ACEOF >conftest.$ac_ext
+/* end confdefs.h.  */
+#include <X11/Xlib.h>
+#ifdef F77_DUMMY_MAIN
+
+#  ifdef __cplusplus
+     extern "C"
+#  endif
+   int F77_DUMMY_MAIN() { return 1; }
+
+#endif
+int
+main (void)
+{
+XrmInitialize ()
+  ;
+  return 0;
+}
+_ACEOF
+if ac_fn_c_try_link "$LINENO"
+then :
+  # We can compile and link X programs with no special options.
+  ac_x_includes=
+  ac_x_libraries=
+fi
+rm -f core conftest.err conftest.$ac_objext conftest.beam \
+    conftest$ac_exeext conftest.$ac_ext
+LIBS="$ac_save_LIBS"
+# If that didn't work, only try xmkmf and file system searches
+# for native compilation.
+if test x"$ac_x_includes" = xno && test "$cross_compiling" = no
+then :
+  rm -f -r conftest.dir
 if mkdir conftest.dir; then
   cd conftest.dir
   cat >Imakefile <<'_ACEOF'
@@ -11085,12 +11171,12 @@ libdir:
 	@echo libdir='${LIBDIR}'
 _ACEOF
   if (export CC; ${XMKMF-xmkmf}) >/dev/null 2>/dev/null && test -f Makefile; then
-    # GNU make sometimes prints "make[1]: Entering...", which would confuse us.
+    # GNU make sometimes prints "make[1]: Entering ...", which would confuse us.
     for ac_var in incroot usrlibdir libdir; do
       eval "ac_im_$ac_var=\`\${MAKE-make} $ac_var 2>/dev/null | sed -n 's/^$ac_var=//p'\`"
     done
     # Open Windows xmkmf reportedly sets LIBDIR instead of USRLIBDIR.
-    for ac_extension in a so sl; do
+    for ac_extension in a so sl dylib la dll; do
       if test ! -f "$ac_im_usrlibdir/libX11.$ac_extension" &&
 	 test -f "$ac_im_libdir/libX11.$ac_extension"; then
 	ac_im_usrlibdir=$ac_im_libdir; break
@@ -11104,7 +11190,7 @@ _ACEOF
 	*) test -f "$ac_im_incroot/X11/Xos.h" && ac_x_includes=$ac_im_incroot;;
     esac
     case $ac_im_usrlibdir in
-	/usr/lib | /lib) ;;
+	/usr/lib | /usr/lib64 | /lib | /lib64) ;;
 	*) test -d "$ac_im_usrlibdir" && ac_x_libraries=$ac_im_usrlibdir ;;
     esac
   fi
@@ -11112,29 +11198,35 @@ _ACEOF
   rm -f -r conftest.dir
 fi
 
-# Standard set of common directories for X headers.
+  # Standard set of common directories for X headers.
 # Check X11 before X11Rn because it is often a symlink to the current release.
 ac_x_header_dirs='
 /usr/X11/include
+/usr/X11R7/include
 /usr/X11R6/include
 /usr/X11R5/include
 /usr/X11R4/include
 
 /usr/include/X11
+/usr/include/X11R7
 /usr/include/X11R6
 /usr/include/X11R5
 /usr/include/X11R4
 
 /usr/local/X11/include
+/usr/local/X11R7/include
 /usr/local/X11R6/include
 /usr/local/X11R5/include
 /usr/local/X11R4/include
 
 /usr/local/include/X11
+/usr/local/include/X11R7
 /usr/local/include/X11R6
 /usr/local/include/X11R5
 /usr/local/include/X11R4
 
+/opt/X11/include
+
 /usr/X386/include
 /usr/x386/include
 /usr/XFree86/include/X11
@@ -11152,36 +11244,15 @@ ac_x_header_dirs='
 if test "$ac_x_includes" = no; then
   # Guess where to find include files, by looking for Xlib.h.
   # First, try using that file with no special directory specified.
-  cat >conftest.$ac_ext <<_ACEOF
-/* confdefs.h.  */
-_ACEOF
-cat confdefs.h >>conftest.$ac_ext
-cat >>conftest.$ac_ext <<_ACEOF
+  cat confdefs.h - <<_ACEOF >conftest.$ac_ext
 /* end confdefs.h.  */
 #include <X11/Xlib.h>
 _ACEOF
-if { (ac_try="$ac_cpp conftest.$ac_ext"
-case "(($ac_try" in
-  *\"* | *\`* | *\\*) ac_try_echo=\$ac_try;;
-  *) ac_try_echo=$ac_try;;
-esac
-eval "echo \"\$as_me:$LINENO: $ac_try_echo\"") >&5
-  (eval "$ac_cpp conftest.$ac_ext") 2>conftest.er1
-  ac_status=$?
-  grep -v '^ *+' conftest.er1 >conftest.err
-  rm -f conftest.er1
-  cat conftest.err >&5
-  echo "$as_me:$LINENO: \$? = $ac_status" >&5
-  (exit $ac_status); } >/dev/null && {
-	 test -z "$ac_c_preproc_warn_flag$ac_c_werror_flag" ||
-	 test ! -s conftest.err
-       }; then
+if ac_fn_c_try_cpp "$LINENO"
+then :
   # We can compile using X headers with no special include directory.
 ac_x_includes=
-else
-  echo "$as_me: failed program was:" >&5
-sed 's/^/| /' conftest.$ac_ext >&5
-
+else $as_nop
   for ac_dir in $ac_x_header_dirs; do
   if test -r "$ac_dir/X11/Xlib.h"; then
     ac_x_includes=$ac_dir
@@ -11189,8 +11260,7 @@ sed 's/^/| /' conftest.$ac_ext >&5
   fi
 done
 fi
-
-rm -f conftest.err conftest.$ac_ext
+rm -f conftest.err conftest.i conftest.$ac_ext
 fi # $ac_x_includes = no
 
 if test "$ac_x_libraries" = no; then
@@ -11199,11 +11269,7 @@ if test "$ac_x_libraries" = no; then
   # Don't add to $LIBS permanently.
   ac_save_LIBS=$LIBS
   LIBS="-lX11 $LIBS"
-  cat >conftest.$ac_ext <<_ACEOF
-/* confdefs.h.  */
-_ACEOF
-cat confdefs.h >>conftest.$ac_ext
-cat >>conftest.$ac_ext <<_ACEOF
+  cat confdefs.h - <<_ACEOF >conftest.$ac_ext
 /* end confdefs.h.  */
 #include <X11/Xlib.h>
 #ifdef F77_DUMMY_MAIN
@@ -11215,43 +11281,24 @@ cat >>conftest.$ac_ext <<_ACEOF
 
 #endif
 int
-main ()
+main (void)
 {
 XrmInitialize ()
   ;
   return 0;
 }
 _ACEOF
-rm -f conftest.$ac_objext conftest$ac_exeext
-if { (ac_try="$ac_link"
-case "(($ac_try" in
-  *\"* | *\`* | *\\*) ac_try_echo=\$ac_try;;
-  *) ac_try_echo=$ac_try;;
-esac
-eval "echo \"\$as_me:$LINENO: $ac_try_echo\"") >&5
-  (eval "$ac_link") 2>conftest.er1
-  ac_status=$?
-  grep -v '^ *+' conftest.er1 >conftest.err
-  rm -f conftest.er1
-  cat conftest.err >&5
-  echo "$as_me:$LINENO: \$? = $ac_status" >&5
-  (exit $ac_status); } && {
-	 test -z "$ac_c_werror_flag" ||
-	 test ! -s conftest.err
-       } && test -s conftest$ac_exeext &&
-       $as_test_x conftest$ac_exeext; then
+if ac_fn_c_try_link "$LINENO"
+then :
   LIBS=$ac_save_LIBS
 # We can link X programs with no special library path.
 ac_x_libraries=
-else
-  echo "$as_me: failed program was:" >&5
-sed 's/^/| /' conftest.$ac_ext >&5
-
-	LIBS=$ac_save_LIBS
-for ac_dir in `echo "$ac_x_includes $ac_x_header_dirs" | sed s/include/lib/g`
+else $as_nop
+  LIBS=$ac_save_LIBS
+for ac_dir in `printf "%s\n" "$ac_x_includes $ac_x_header_dirs" | sed s/include/lib/g`
 do
   # Don't even attempt the hair of trying to link an X program!
-  for ac_extension in a so sl; do
+  for ac_extension in a so sl dylib la dll; do
     if test -r "$ac_dir/libX11.$ac_extension"; then
       ac_x_libraries=$ac_dir
       break 2
@@ -11259,20 +11306,21 @@ do
   done
 done
 fi
-
-rm -f core conftest.err conftest.$ac_objext conftest_ipa8_conftest.oo \
-      conftest$ac_exeext conftest.$ac_ext
+rm -f core conftest.err conftest.$ac_objext conftest.beam \
+    conftest$ac_exeext conftest.$ac_ext
 fi # $ac_x_libraries = no
 
+fi
+# Record the results.
 case $ac_x_includes,$ac_x_libraries in #(
-  no,* | *,no | *\'*)
+  no,* | *,no | *\'*) :
     # Didn't find X, or a directory has "'" in its name.
-    ac_cv_have_x="have_x=no";; #(
-  *)
+    ac_cv_have_x="have_x=no" ;; #(
+  *) :
     # Record where we found X for the cache.
     ac_cv_have_x="have_x=yes\
 	ac_x_includes='$ac_x_includes'\
-	ac_x_libraries='$ac_x_libraries'"
+	ac_x_libraries='$ac_x_libraries'" ;;
 esac
 fi
 ;; #(
@@ -11282,8 +11330,8 @@ fi
 fi # $with_x != no
 
 if test "$have_x" != yes; then
-  { echo "$as_me:$LINENO: result: $have_x" >&5
-echo "${ECHO_T}$have_x" >&6; }
+  { printf "%s\n" "$as_me:${as_lineno-$LINENO}: result: $have_x" >&5
+printf "%s\n" "$have_x" >&6; }
   no_x=yes
 else
   # If each of the values was on the command line, it overrides each guess.
@@ -11293,16 +11341,14 @@ else
   ac_cv_have_x="have_x=yes\
 	ac_x_includes='$x_includes'\
 	ac_x_libraries='$x_libraries'"
-  { echo "$as_me:$LINENO: result: libraries $x_libraries, headers $x_includes" >&5
-echo "${ECHO_T}libraries $x_libraries, headers $x_includes" >&6; }
+  { printf "%s\n" "$as_me:${as_lineno-$LINENO}: result: libraries $x_libraries, headers $x_includes" >&5
+printf "%s\n" "libraries $x_libraries, headers $x_includes" >&6; }
 fi
 
 if test "$no_x" = yes; then
   # Not all programs may use this symbol, but it does not hurt to define it.
 
-cat >>confdefs.h <<\_ACEOF
-#define X_DISPLAY_MISSING 1
-_ACEOF
+printf "%s\n" "#define X_DISPLAY_MISSING 1" >>confdefs.h
 
   X_CFLAGS= X_PRE_LIBS= X_LIBS= X_EXTRA_LIBS=
 else
@@ -11315,16 +11361,12 @@ else
     X_LIBS="$X_LIBS -L$x_libraries"
     # For Solaris; some versions of Sun CC require a space after -R and
     # others require no space.  Words are not sufficient . . . .
-    { echo "$as_me:$LINENO: checking whether -R must be followed by a space" >&5
-echo $ECHO_N "checking whether -R must be followed by a space... $ECHO_C" >&6; }
+    { printf "%s\n" "$as_me:${as_lineno-$LINENO}: checking whether -R must be followed by a space" >&5
+printf %s "checking whether -R must be followed by a space... " >&6; }
     ac_xsave_LIBS=$LIBS; LIBS="$LIBS -R$x_libraries"
     ac_xsave_c_werror_flag=$ac_c_werror_flag
     ac_c_werror_flag=yes
-    cat >conftest.$ac_ext <<_ACEOF
-/* confdefs.h.  */
-_ACEOF
-cat confdefs.h >>conftest.$ac_ext
-cat >>conftest.$ac_ext <<_ACEOF
+    cat confdefs.h - <<_ACEOF >conftest.$ac_ext
 /* end confdefs.h.  */
 
 #ifdef F77_DUMMY_MAIN
@@ -11336,44 +11378,21 @@ cat >>conftest.$ac_ext <<_ACEOF
 
 #endif
 int
-main ()
+main (void)
 {
 
   ;
   return 0;
 }
 _ACEOF
-rm -f conftest.$ac_objext conftest$ac_exeext
-if { (ac_try="$ac_link"
-case "(($ac_try" in
-  *\"* | *\`* | *\\*) ac_try_echo=\$ac_try;;
-  *) ac_try_echo=$ac_try;;
-esac
-eval "echo \"\$as_me:$LINENO: $ac_try_echo\"") >&5
-  (eval "$ac_link") 2>conftest.er1
-  ac_status=$?
-  grep -v '^ *+' conftest.er1 >conftest.err
-  rm -f conftest.er1
-  cat conftest.err >&5
-  echo "$as_me:$LINENO: \$? = $ac_status" >&5
-  (exit $ac_status); } && {
-	 test -z "$ac_c_werror_flag" ||
-	 test ! -s conftest.err
-       } && test -s conftest$ac_exeext &&
-       $as_test_x conftest$ac_exeext; then
-  { echo "$as_me:$LINENO: result: no" >&5
-echo "${ECHO_T}no" >&6; }
+if ac_fn_c_try_link "$LINENO"
+then :
+  { printf "%s\n" "$as_me:${as_lineno-$LINENO}: result: no" >&5
+printf "%s\n" "no" >&6; }
        X_LIBS="$X_LIBS -R$x_libraries"
-else
-  echo "$as_me: failed program was:" >&5
-sed 's/^/| /' conftest.$ac_ext >&5
-
-	LIBS="$ac_xsave_LIBS -R $x_libraries"
-       cat >conftest.$ac_ext <<_ACEOF
-/* confdefs.h.  */
-_ACEOF
-cat confdefs.h >>conftest.$ac_ext
-cat >>conftest.$ac_ext <<_ACEOF
+else $as_nop
+  LIBS="$ac_xsave_LIBS -R $x_libraries"
+       cat confdefs.h - <<_ACEOF >conftest.$ac_ext
 /* end confdefs.h.  */
 
 #ifdef F77_DUMMY_MAIN
@@ -11385,48 +11404,27 @@ cat >>conftest.$ac_ext <<_ACEOF
 
 #endif
 int
-main ()
+main (void)
 {
 
   ;
   return 0;
 }
 _ACEOF
-rm -f conftest.$ac_objext conftest$ac_exeext
-if { (ac_try="$ac_link"
-case "(($ac_try" in
-  *\"* | *\`* | *\\*) ac_try_echo=\$ac_try;;
-  *) ac_try_echo=$ac_try;;
-esac
-eval "echo \"\$as_me:$LINENO: $ac_try_echo\"") >&5
-  (eval "$ac_link") 2>conftest.er1
-  ac_status=$?
-  grep -v '^ *+' conftest.er1 >conftest.err
-  rm -f conftest.er1
-  cat conftest.err >&5
-  echo "$as_me:$LINENO: \$? = $ac_status" >&5
-  (exit $ac_status); } && {
-	 test -z "$ac_c_werror_flag" ||
-	 test ! -s conftest.err
-       } && test -s conftest$ac_exeext &&
-       $as_test_x conftest$ac_exeext; then
-  { echo "$as_me:$LINENO: result: yes" >&5
-echo "${ECHO_T}yes" >&6; }
+if ac_fn_c_try_link "$LINENO"
+then :
+  { printf "%s\n" "$as_me:${as_lineno-$LINENO}: result: yes" >&5
+printf "%s\n" "yes" >&6; }
 	  X_LIBS="$X_LIBS -R $x_libraries"
-else
-  echo "$as_me: failed program was:" >&5
-sed 's/^/| /' conftest.$ac_ext >&5
-
-	{ echo "$as_me:$LINENO: result: neither works" >&5
-echo "${ECHO_T}neither works" >&6; }
+else $as_nop
+  { printf "%s\n" "$as_me:${as_lineno-$LINENO}: result: neither works" >&5
+printf "%s\n" "neither works" >&6; }
 fi
-
-rm -f core conftest.err conftest.$ac_objext conftest_ipa8_conftest.oo \
-      conftest$ac_exeext conftest.$ac_ext
+rm -f core conftest.err conftest.$ac_objext conftest.beam \
+    conftest$ac_exeext conftest.$ac_ext
 fi
-
-rm -f core conftest.err conftest.$ac_objext conftest_ipa8_conftest.oo \
-      conftest$ac_exeext conftest.$ac_ext
+rm -f core conftest.err conftest.$ac_objext conftest.beam \
+    conftest$ac_exeext conftest.$ac_ext
     ac_c_werror_flag=$ac_xsave_c_werror_flag
     LIBS=$ac_xsave_LIBS
   fi
@@ -11442,19 +11440,12 @@ rm -f core conftest.err conftest.$ac_objext conftest_ipa8_conftest.oo \
     # libraries were built with DECnet support.  And Karl Berry says
     # the Alpha needs dnet_stub (dnet does not exist).
     ac_xsave_LIBS="$LIBS"; LIBS="$LIBS $X_LIBS -lX11"
-    cat >conftest.$ac_ext <<_ACEOF
-/* confdefs.h.  */
-_ACEOF
-cat confdefs.h >>conftest.$ac_ext
-cat >>conftest.$ac_ext <<_ACEOF
+    cat confdefs.h - <<_ACEOF >conftest.$ac_ext
 /* end confdefs.h.  */
 
 /* Override any GCC internal prototype to avoid an error.
    Use char because int might match the return type of a GCC
    builtin and then its argument prototype would still apply.  */
-#ifdef __cplusplus
-extern "C"
-#endif
 char XOpenDisplay ();
 #ifdef F77_DUMMY_MAIN
 
@@ -11465,56 +11456,31 @@ char XOpenDisplay ();
 
 #endif
 int
-main ()
+main (void)
 {
 return XOpenDisplay ();
   ;
   return 0;
 }
 _ACEOF
-rm -f conftest.$ac_objext conftest$ac_exeext
-if { (ac_try="$ac_link"
-case "(($ac_try" in
-  *\"* | *\`* | *\\*) ac_try_echo=\$ac_try;;
-  *) ac_try_echo=$ac_try;;
-esac
-eval "echo \"\$as_me:$LINENO: $ac_try_echo\"") >&5
-  (eval "$ac_link") 2>conftest.er1
-  ac_status=$?
-  grep -v '^ *+' conftest.er1 >conftest.err
-  rm -f conftest.er1
-  cat conftest.err >&5
-  echo "$as_me:$LINENO: \$? = $ac_status" >&5
-  (exit $ac_status); } && {
-	 test -z "$ac_c_werror_flag" ||
-	 test ! -s conftest.err
-       } && test -s conftest$ac_exeext &&
-       $as_test_x conftest$ac_exeext; then
-  :
-else
-  echo "$as_me: failed program was:" >&5
-sed 's/^/| /' conftest.$ac_ext >&5
+if ac_fn_c_try_link "$LINENO"
+then :
 
-	{ echo "$as_me:$LINENO: checking for dnet_ntoa in -ldnet" >&5
-echo $ECHO_N "checking for dnet_ntoa in -ldnet... $ECHO_C" >&6; }
-if test "${ac_cv_lib_dnet_dnet_ntoa+set}" = set; then
-  echo $ECHO_N "(cached) $ECHO_C" >&6
-else
+else $as_nop
+  { printf "%s\n" "$as_me:${as_lineno-$LINENO}: checking for dnet_ntoa in -ldnet" >&5
+printf %s "checking for dnet_ntoa in -ldnet... " >&6; }
+if test ${ac_cv_lib_dnet_dnet_ntoa+y}
+then :
+  printf %s "(cached) " >&6
+else $as_nop
   ac_check_lib_save_LIBS=$LIBS
 LIBS="-ldnet  $LIBS"
-cat >conftest.$ac_ext <<_ACEOF
-/* confdefs.h.  */
-_ACEOF
-cat confdefs.h >>conftest.$ac_ext
-cat >>conftest.$ac_ext <<_ACEOF
+cat confdefs.h - <<_ACEOF >conftest.$ac_ext
 /* end confdefs.h.  */
 
 /* Override any GCC internal prototype to avoid an error.
    Use char because int might match the return type of a GCC
    builtin and then its argument prototype would still apply.  */
-#ifdef __cplusplus
-extern "C"
-#endif
 char dnet_ntoa ();
 #ifdef F77_DUMMY_MAIN
 
@@ -11525,70 +11491,45 @@ char dnet_ntoa ();
 
 #endif
 int
-main ()
+main (void)
 {
 return dnet_ntoa ();
   ;
   return 0;
 }
 _ACEOF
-rm -f conftest.$ac_objext conftest$ac_exeext
-if { (ac_try="$ac_link"
-case "(($ac_try" in
-  *\"* | *\`* | *\\*) ac_try_echo=\$ac_try;;
-  *) ac_try_echo=$ac_try;;
-esac
-eval "echo \"\$as_me:$LINENO: $ac_try_echo\"") >&5
-  (eval "$ac_link") 2>conftest.er1
-  ac_status=$?
-  grep -v '^ *+' conftest.er1 >conftest.err
-  rm -f conftest.er1
-  cat conftest.err >&5
-  echo "$as_me:$LINENO: \$? = $ac_status" >&5
-  (exit $ac_status); } && {
-	 test -z "$ac_c_werror_flag" ||
-	 test ! -s conftest.err
-       } && test -s conftest$ac_exeext &&
-       $as_test_x conftest$ac_exeext; then
+if ac_fn_c_try_link "$LINENO"
+then :
   ac_cv_lib_dnet_dnet_ntoa=yes
-else
-  echo "$as_me: failed program was:" >&5
-sed 's/^/| /' conftest.$ac_ext >&5
-
-	ac_cv_lib_dnet_dnet_ntoa=no
+else $as_nop
+  ac_cv_lib_dnet_dnet_ntoa=no
 fi
-
-rm -f core conftest.err conftest.$ac_objext conftest_ipa8_conftest.oo \
-      conftest$ac_exeext conftest.$ac_ext
+rm -f core conftest.err conftest.$ac_objext conftest.beam \
+    conftest$ac_exeext conftest.$ac_ext
 LIBS=$ac_check_lib_save_LIBS
 fi
-{ echo "$as_me:$LINENO: result: $ac_cv_lib_dnet_dnet_ntoa" >&5
-echo "${ECHO_T}$ac_cv_lib_dnet_dnet_ntoa" >&6; }
-if test $ac_cv_lib_dnet_dnet_ntoa = yes; then
+{ printf "%s\n" "$as_me:${as_lineno-$LINENO}: result: $ac_cv_lib_dnet_dnet_ntoa" >&5
+printf "%s\n" "$ac_cv_lib_dnet_dnet_ntoa" >&6; }
+if test "x$ac_cv_lib_dnet_dnet_ntoa" = xyes
+then :
   X_EXTRA_LIBS="$X_EXTRA_LIBS -ldnet"
 fi
 
     if test $ac_cv_lib_dnet_dnet_ntoa = no; then
-      { echo "$as_me:$LINENO: checking for dnet_ntoa in -ldnet_stub" >&5
-echo $ECHO_N "checking for dnet_ntoa in -ldnet_stub... $ECHO_C" >&6; }
-if test "${ac_cv_lib_dnet_stub_dnet_ntoa+set}" = set; then
-  echo $ECHO_N "(cached) $ECHO_C" >&6
-else
+      { printf "%s\n" "$as_me:${as_lineno-$LINENO}: checking for dnet_ntoa in -ldnet_stub" >&5
+printf %s "checking for dnet_ntoa in -ldnet_stub... " >&6; }
+if test ${ac_cv_lib_dnet_stub_dnet_ntoa+y}
+then :
+  printf %s "(cached) " >&6
+else $as_nop
   ac_check_lib_save_LIBS=$LIBS
 LIBS="-ldnet_stub  $LIBS"
-cat >conftest.$ac_ext <<_ACEOF
-/* confdefs.h.  */
-_ACEOF
-cat confdefs.h >>conftest.$ac_ext
-cat >>conftest.$ac_ext <<_ACEOF
+cat confdefs.h - <<_ACEOF >conftest.$ac_ext
 /* end confdefs.h.  */
 
 /* Override any GCC internal prototype to avoid an error.
    Use char because int might match the return type of a GCC
    builtin and then its argument prototype would still apply.  */
-#ifdef __cplusplus
-extern "C"
-#endif
 char dnet_ntoa ();
 #ifdef F77_DUMMY_MAIN
 
@@ -11599,54 +11540,34 @@ char dnet_ntoa ();
 
 #endif
 int
-main ()
+main (void)
 {
 return dnet_ntoa ();
   ;
   return 0;
 }
 _ACEOF
-rm -f conftest.$ac_objext conftest$ac_exeext
-if { (ac_try="$ac_link"
-case "(($ac_try" in
-  *\"* | *\`* | *\\*) ac_try_echo=\$ac_try;;
-  *) ac_try_echo=$ac_try;;
-esac
-eval "echo \"\$as_me:$LINENO: $ac_try_echo\"") >&5
-  (eval "$ac_link") 2>conftest.er1
-  ac_status=$?
-  grep -v '^ *+' conftest.er1 >conftest.err
-  rm -f conftest.er1
-  cat conftest.err >&5
-  echo "$as_me:$LINENO: \$? = $ac_status" >&5
-  (exit $ac_status); } && {
-	 test -z "$ac_c_werror_flag" ||
-	 test ! -s conftest.err
-       } && test -s conftest$ac_exeext &&
-       $as_test_x conftest$ac_exeext; then
+if ac_fn_c_try_link "$LINENO"
+then :
   ac_cv_lib_dnet_stub_dnet_ntoa=yes
-else
-  echo "$as_me: failed program was:" >&5
-sed 's/^/| /' conftest.$ac_ext >&5
-
-	ac_cv_lib_dnet_stub_dnet_ntoa=no
+else $as_nop
+  ac_cv_lib_dnet_stub_dnet_ntoa=no
 fi
-
-rm -f core conftest.err conftest.$ac_objext conftest_ipa8_conftest.oo \
-      conftest$ac_exeext conftest.$ac_ext
+rm -f core conftest.err conftest.$ac_objext conftest.beam \
+    conftest$ac_exeext conftest.$ac_ext
 LIBS=$ac_check_lib_save_LIBS
 fi
-{ echo "$as_me:$LINENO: result: $ac_cv_lib_dnet_stub_dnet_ntoa" >&5
-echo "${ECHO_T}$ac_cv_lib_dnet_stub_dnet_ntoa" >&6; }
-if test $ac_cv_lib_dnet_stub_dnet_ntoa = yes; then
+{ printf "%s\n" "$as_me:${as_lineno-$LINENO}: result: $ac_cv_lib_dnet_stub_dnet_ntoa" >&5
+printf "%s\n" "$ac_cv_lib_dnet_stub_dnet_ntoa" >&6; }
+if test "x$ac_cv_lib_dnet_stub_dnet_ntoa" = xyes
+then :
   X_EXTRA_LIBS="$X_EXTRA_LIBS -ldnet_stub"
 fi
 
     fi
 fi
-
-rm -f core conftest.err conftest.$ac_objext conftest_ipa8_conftest.oo \
-      conftest$ac_exeext conftest.$ac_ext
+rm -f core conftest.err conftest.$ac_objext conftest.beam \
+    conftest$ac_exeext conftest.$ac_ext
     LIBS="$ac_xsave_LIBS"
 
     # msh@cis.ufl.edu says -lnsl (and -lsocket) are needed for his 386/AT,
@@ -11657,117 +11578,27 @@ rm -f core conftest.err conftest.$ac_objext conftest_ipa8_conftest.oo \
     # on Irix 5.2, according to T.E. Dickey.
     # The functions gethostbyname, getservbyname, and inet_addr are
     # in -lbsd on LynxOS 3.0.1/i386, according to Lars Hecking.
-    { echo "$as_me:$LINENO: checking for gethostbyname" >&5
-echo $ECHO_N "checking for gethostbyname... $ECHO_C" >&6; }
-if test "${ac_cv_func_gethostbyname+set}" = set; then
-  echo $ECHO_N "(cached) $ECHO_C" >&6
-else
-  cat >conftest.$ac_ext <<_ACEOF
-/* confdefs.h.  */
-_ACEOF
-cat confdefs.h >>conftest.$ac_ext
-cat >>conftest.$ac_ext <<_ACEOF
-/* end confdefs.h.  */
-/* Define gethostbyname to an innocuous variant, in case <limits.h> declares gethostbyname.
-   For example, HP-UX 11i <limits.h> declares gettimeofday.  */
-#define gethostbyname innocuous_gethostbyname
+    ac_fn_c_check_func "$LINENO" "gethostbyname" "ac_cv_func_gethostbyname"
+if test "x$ac_cv_func_gethostbyname" = xyes
+then :
 
-/* System header to define __stub macros and hopefully few prototypes,
-    which can conflict with char gethostbyname (); below.
-    Prefer <limits.h> to <assert.h> if __STDC__ is defined, since
-    <limits.h> exists even on freestanding compilers.  */
-
-#ifdef __STDC__
-# include <limits.h>
-#else
-# include <assert.h>
-#endif
-
-#undef gethostbyname
-
-/* Override any GCC internal prototype to avoid an error.
-   Use char because int might match the return type of a GCC
-   builtin and then its argument prototype would still apply.  */
-#ifdef __cplusplus
-extern "C"
-#endif
-char gethostbyname ();
-/* The GNU C library defines this for functions which it implements
-    to always fail with ENOSYS.  Some functions are actually named
-    something starting with __ and the normal name is an alias.  */
-#if defined __stub_gethostbyname || defined __stub___gethostbyname
-choke me
-#endif
-
-#ifdef F77_DUMMY_MAIN
-
-#  ifdef __cplusplus
-     extern "C"
-#  endif
-   int F77_DUMMY_MAIN() { return 1; }
-
-#endif
-int
-main ()
-{
-return gethostbyname ();
-  ;
-  return 0;
-}
-_ACEOF
-rm -f conftest.$ac_objext conftest$ac_exeext
-if { (ac_try="$ac_link"
-case "(($ac_try" in
-  *\"* | *\`* | *\\*) ac_try_echo=\$ac_try;;
-  *) ac_try_echo=$ac_try;;
-esac
-eval "echo \"\$as_me:$LINENO: $ac_try_echo\"") >&5
-  (eval "$ac_link") 2>conftest.er1
-  ac_status=$?
-  grep -v '^ *+' conftest.er1 >conftest.err
-  rm -f conftest.er1
-  cat conftest.err >&5
-  echo "$as_me:$LINENO: \$? = $ac_status" >&5
-  (exit $ac_status); } && {
-	 test -z "$ac_c_werror_flag" ||
-	 test ! -s conftest.err
-       } && test -s conftest$ac_exeext &&
-       $as_test_x conftest$ac_exeext; then
-  ac_cv_func_gethostbyname=yes
-else
-  echo "$as_me: failed program was:" >&5
-sed 's/^/| /' conftest.$ac_ext >&5
-
-	ac_cv_func_gethostbyname=no
-fi
-
-rm -f core conftest.err conftest.$ac_objext conftest_ipa8_conftest.oo \
-      conftest$ac_exeext conftest.$ac_ext
 fi
-{ echo "$as_me:$LINENO: result: $ac_cv_func_gethostbyname" >&5
-echo "${ECHO_T}$ac_cv_func_gethostbyname" >&6; }
 
     if test $ac_cv_func_gethostbyname = no; then
-      { echo "$as_me:$LINENO: checking for gethostbyname in -lnsl" >&5
-echo $ECHO_N "checking for gethostbyname in -lnsl... $ECHO_C" >&6; }
-if test "${ac_cv_lib_nsl_gethostbyname+set}" = set; then
-  echo $ECHO_N "(cached) $ECHO_C" >&6
-else
+      { printf "%s\n" "$as_me:${as_lineno-$LINENO}: checking for gethostbyname in -lnsl" >&5
+printf %s "checking for gethostbyname in -lnsl... " >&6; }
+if test ${ac_cv_lib_nsl_gethostbyname+y}
+then :
+  printf %s "(cached) " >&6
+else $as_nop
   ac_check_lib_save_LIBS=$LIBS
 LIBS="-lnsl  $LIBS"
-cat >conftest.$ac_ext <<_ACEOF
-/* confdefs.h.  */
-_ACEOF
-cat confdefs.h >>conftest.$ac_ext
-cat >>conftest.$ac_ext <<_ACEOF
+cat confdefs.h - <<_ACEOF >conftest.$ac_ext
 /* end confdefs.h.  */
 
 /* Override any GCC internal prototype to avoid an error.
    Use char because int might match the return type of a GCC
    builtin and then its argument prototype would still apply.  */
-#ifdef __cplusplus
-extern "C"
-#endif
 char gethostbyname ();
 #ifdef F77_DUMMY_MAIN
 
@@ -11778,70 +11609,45 @@ char gethostbyname ();
 
 #endif
 int
-main ()
+main (void)
 {
 return gethostbyname ();
   ;
   return 0;
 }
 _ACEOF
-rm -f conftest.$ac_objext conftest$ac_exeext
-if { (ac_try="$ac_link"
-case "(($ac_try" in
-  *\"* | *\`* | *\\*) ac_try_echo=\$ac_try;;
-  *) ac_try_echo=$ac_try;;
-esac
-eval "echo \"\$as_me:$LINENO: $ac_try_echo\"") >&5
-  (eval "$ac_link") 2>conftest.er1
-  ac_status=$?
-  grep -v '^ *+' conftest.er1 >conftest.err
-  rm -f conftest.er1
-  cat conftest.err >&5
-  echo "$as_me:$LINENO: \$? = $ac_status" >&5
-  (exit $ac_status); } && {
-	 test -z "$ac_c_werror_flag" ||
-	 test ! -s conftest.err
-       } && test -s conftest$ac_exeext &&
-       $as_test_x conftest$ac_exeext; then
+if ac_fn_c_try_link "$LINENO"
+then :
   ac_cv_lib_nsl_gethostbyname=yes
-else
-  echo "$as_me: failed program was:" >&5
-sed 's/^/| /' conftest.$ac_ext >&5
-
-	ac_cv_lib_nsl_gethostbyname=no
+else $as_nop
+  ac_cv_lib_nsl_gethostbyname=no
 fi
-
-rm -f core conftest.err conftest.$ac_objext conftest_ipa8_conftest.oo \
-      conftest$ac_exeext conftest.$ac_ext
+rm -f core conftest.err conftest.$ac_objext conftest.beam \
+    conftest$ac_exeext conftest.$ac_ext
 LIBS=$ac_check_lib_save_LIBS
 fi
-{ echo "$as_me:$LINENO: result: $ac_cv_lib_nsl_gethostbyname" >&5
-echo "${ECHO_T}$ac_cv_lib_nsl_gethostbyname" >&6; }
-if test $ac_cv_lib_nsl_gethostbyname = yes; then
+{ printf "%s\n" "$as_me:${as_lineno-$LINENO}: result: $ac_cv_lib_nsl_gethostbyname" >&5
+printf "%s\n" "$ac_cv_lib_nsl_gethostbyname" >&6; }
+if test "x$ac_cv_lib_nsl_gethostbyname" = xyes
+then :
   X_EXTRA_LIBS="$X_EXTRA_LIBS -lnsl"
 fi
 
       if test $ac_cv_lib_nsl_gethostbyname = no; then
-	{ echo "$as_me:$LINENO: checking for gethostbyname in -lbsd" >&5
-echo $ECHO_N "checking for gethostbyname in -lbsd... $ECHO_C" >&6; }
-if test "${ac_cv_lib_bsd_gethostbyname+set}" = set; then
-  echo $ECHO_N "(cached) $ECHO_C" >&6
-else
+	{ printf "%s\n" "$as_me:${as_lineno-$LINENO}: checking for gethostbyname in -lbsd" >&5
+printf %s "checking for gethostbyname in -lbsd... " >&6; }
+if test ${ac_cv_lib_bsd_gethostbyname+y}
+then :
+  printf %s "(cached) " >&6
+else $as_nop
   ac_check_lib_save_LIBS=$LIBS
 LIBS="-lbsd  $LIBS"
-cat >conftest.$ac_ext <<_ACEOF
-/* confdefs.h.  */
-_ACEOF
-cat confdefs.h >>conftest.$ac_ext
-cat >>conftest.$ac_ext <<_ACEOF
+cat confdefs.h - <<_ACEOF >conftest.$ac_ext
 /* end confdefs.h.  */
 
 /* Override any GCC internal prototype to avoid an error.
    Use char because int might match the return type of a GCC
    builtin and then its argument prototype would still apply.  */
-#ifdef __cplusplus
-extern "C"
-#endif
 char gethostbyname ();
 #ifdef F77_DUMMY_MAIN
 
@@ -11852,46 +11658,27 @@ char gethostbyname ();
 
 #endif
 int
-main ()
+main (void)
 {
 return gethostbyname ();
   ;
   return 0;
 }
 _ACEOF
-rm -f conftest.$ac_objext conftest$ac_exeext
-if { (ac_try="$ac_link"
-case "(($ac_try" in
-  *\"* | *\`* | *\\*) ac_try_echo=\$ac_try;;
-  *) ac_try_echo=$ac_try;;
-esac
-eval "echo \"\$as_me:$LINENO: $ac_try_echo\"") >&5
-  (eval "$ac_link") 2>conftest.er1
-  ac_status=$?
-  grep -v '^ *+' conftest.er1 >conftest.err
-  rm -f conftest.er1
-  cat conftest.err >&5
-  echo "$as_me:$LINENO: \$? = $ac_status" >&5
-  (exit $ac_status); } && {
-	 test -z "$ac_c_werror_flag" ||
-	 test ! -s conftest.err
-       } && test -s conftest$ac_exeext &&
-       $as_test_x conftest$ac_exeext; then
+if ac_fn_c_try_link "$LINENO"
+then :
   ac_cv_lib_bsd_gethostbyname=yes
-else
-  echo "$as_me: failed program was:" >&5
-sed 's/^/| /' conftest.$ac_ext >&5
-
-	ac_cv_lib_bsd_gethostbyname=no
+else $as_nop
+  ac_cv_lib_bsd_gethostbyname=no
 fi
-
-rm -f core conftest.err conftest.$ac_objext conftest_ipa8_conftest.oo \
-      conftest$ac_exeext conftest.$ac_ext
+rm -f core conftest.err conftest.$ac_objext conftest.beam \
+    conftest$ac_exeext conftest.$ac_ext
 LIBS=$ac_check_lib_save_LIBS
 fi
-{ echo "$as_me:$LINENO: result: $ac_cv_lib_bsd_gethostbyname" >&5
-echo "${ECHO_T}$ac_cv_lib_bsd_gethostbyname" >&6; }
-if test $ac_cv_lib_bsd_gethostbyname = yes; then
+{ printf "%s\n" "$as_me:${as_lineno-$LINENO}: result: $ac_cv_lib_bsd_gethostbyname" >&5
+printf "%s\n" "$ac_cv_lib_bsd_gethostbyname" >&6; }
+if test "x$ac_cv_lib_bsd_gethostbyname" = xyes
+then :
   X_EXTRA_LIBS="$X_EXTRA_LIBS -lbsd"
 fi
 
@@ -11905,117 +11692,27 @@ fi
     # variants that don't use the name server (or something).  -lsocket
     # must be given before -lnsl if both are needed.  We assume that
     # if connect needs -lnsl, so does gethostbyname.
-    { echo "$as_me:$LINENO: checking for connect" >&5
-echo $ECHO_N "checking for connect... $ECHO_C" >&6; }
-if test "${ac_cv_func_connect+set}" = set; then
-  echo $ECHO_N "(cached) $ECHO_C" >&6
-else
-  cat >conftest.$ac_ext <<_ACEOF
-/* confdefs.h.  */
-_ACEOF
-cat confdefs.h >>conftest.$ac_ext
-cat >>conftest.$ac_ext <<_ACEOF
-/* end confdefs.h.  */
-/* Define connect to an innocuous variant, in case <limits.h> declares connect.
-   For example, HP-UX 11i <limits.h> declares gettimeofday.  */
-#define connect innocuous_connect
+    ac_fn_c_check_func "$LINENO" "connect" "ac_cv_func_connect"
+if test "x$ac_cv_func_connect" = xyes
+then :
 
-/* System header to define __stub macros and hopefully few prototypes,
-    which can conflict with char connect (); below.
-    Prefer <limits.h> to <assert.h> if __STDC__ is defined, since
-    <limits.h> exists even on freestanding compilers.  */
-
-#ifdef __STDC__
-# include <limits.h>
-#else
-# include <assert.h>
-#endif
-
-#undef connect
-
-/* Override any GCC internal prototype to avoid an error.
-   Use char because int might match the return type of a GCC
-   builtin and then its argument prototype would still apply.  */
-#ifdef __cplusplus
-extern "C"
-#endif
-char connect ();
-/* The GNU C library defines this for functions which it implements
-    to always fail with ENOSYS.  Some functions are actually named
-    something starting with __ and the normal name is an alias.  */
-#if defined __stub_connect || defined __stub___connect
-choke me
-#endif
-
-#ifdef F77_DUMMY_MAIN
-
-#  ifdef __cplusplus
-     extern "C"
-#  endif
-   int F77_DUMMY_MAIN() { return 1; }
-
-#endif
-int
-main ()
-{
-return connect ();
-  ;
-  return 0;
-}
-_ACEOF
-rm -f conftest.$ac_objext conftest$ac_exeext
-if { (ac_try="$ac_link"
-case "(($ac_try" in
-  *\"* | *\`* | *\\*) ac_try_echo=\$ac_try;;
-  *) ac_try_echo=$ac_try;;
-esac
-eval "echo \"\$as_me:$LINENO: $ac_try_echo\"") >&5
-  (eval "$ac_link") 2>conftest.er1
-  ac_status=$?
-  grep -v '^ *+' conftest.er1 >conftest.err
-  rm -f conftest.er1
-  cat conftest.err >&5
-  echo "$as_me:$LINENO: \$? = $ac_status" >&5
-  (exit $ac_status); } && {
-	 test -z "$ac_c_werror_flag" ||
-	 test ! -s conftest.err
-       } && test -s conftest$ac_exeext &&
-       $as_test_x conftest$ac_exeext; then
-  ac_cv_func_connect=yes
-else
-  echo "$as_me: failed program was:" >&5
-sed 's/^/| /' conftest.$ac_ext >&5
-
-	ac_cv_func_connect=no
-fi
-
-rm -f core conftest.err conftest.$ac_objext conftest_ipa8_conftest.oo \
-      conftest$ac_exeext conftest.$ac_ext
 fi
-{ echo "$as_me:$LINENO: result: $ac_cv_func_connect" >&5
-echo "${ECHO_T}$ac_cv_func_connect" >&6; }
 
     if test $ac_cv_func_connect = no; then
-      { echo "$as_me:$LINENO: checking for connect in -lsocket" >&5
-echo $ECHO_N "checking for connect in -lsocket... $ECHO_C" >&6; }
-if test "${ac_cv_lib_socket_connect+set}" = set; then
-  echo $ECHO_N "(cached) $ECHO_C" >&6
-else
+      { printf "%s\n" "$as_me:${as_lineno-$LINENO}: checking for connect in -lsocket" >&5
+printf %s "checking for connect in -lsocket... " >&6; }
+if test ${ac_cv_lib_socket_connect+y}
+then :
+  printf %s "(cached) " >&6
+else $as_nop
   ac_check_lib_save_LIBS=$LIBS
 LIBS="-lsocket $X_EXTRA_LIBS $LIBS"
-cat >conftest.$ac_ext <<_ACEOF
-/* confdefs.h.  */
-_ACEOF
-cat confdefs.h >>conftest.$ac_ext
-cat >>conftest.$ac_ext <<_ACEOF
+cat confdefs.h - <<_ACEOF >conftest.$ac_ext
 /* end confdefs.h.  */
 
 /* Override any GCC internal prototype to avoid an error.
    Use char because int might match the return type of a GCC
    builtin and then its argument prototype would still apply.  */
-#ifdef __cplusplus
-extern "C"
-#endif
 char connect ();
 #ifdef F77_DUMMY_MAIN
 
@@ -12026,163 +11723,54 @@ char connect ();
 
 #endif
 int
-main ()
+main (void)
 {
 return connect ();
   ;
   return 0;
 }
 _ACEOF
-rm -f conftest.$ac_objext conftest$ac_exeext
-if { (ac_try="$ac_link"
-case "(($ac_try" in
-  *\"* | *\`* | *\\*) ac_try_echo=\$ac_try;;
-  *) ac_try_echo=$ac_try;;
-esac
-eval "echo \"\$as_me:$LINENO: $ac_try_echo\"") >&5
-  (eval "$ac_link") 2>conftest.er1
-  ac_status=$?
-  grep -v '^ *+' conftest.er1 >conftest.err
-  rm -f conftest.er1
-  cat conftest.err >&5
-  echo "$as_me:$LINENO: \$? = $ac_status" >&5
-  (exit $ac_status); } && {
-	 test -z "$ac_c_werror_flag" ||
-	 test ! -s conftest.err
-       } && test -s conftest$ac_exeext &&
-       $as_test_x conftest$ac_exeext; then
+if ac_fn_c_try_link "$LINENO"
+then :
   ac_cv_lib_socket_connect=yes
-else
-  echo "$as_me: failed program was:" >&5
-sed 's/^/| /' conftest.$ac_ext >&5
-
-	ac_cv_lib_socket_connect=no
+else $as_nop
+  ac_cv_lib_socket_connect=no
 fi
-
-rm -f core conftest.err conftest.$ac_objext conftest_ipa8_conftest.oo \
-      conftest$ac_exeext conftest.$ac_ext
+rm -f core conftest.err conftest.$ac_objext conftest.beam \
+    conftest$ac_exeext conftest.$ac_ext
 LIBS=$ac_check_lib_save_LIBS
 fi
-{ echo "$as_me:$LINENO: result: $ac_cv_lib_socket_connect" >&5
-echo "${ECHO_T}$ac_cv_lib_socket_connect" >&6; }
-if test $ac_cv_lib_socket_connect = yes; then
+{ printf "%s\n" "$as_me:${as_lineno-$LINENO}: result: $ac_cv_lib_socket_connect" >&5
+printf "%s\n" "$ac_cv_lib_socket_connect" >&6; }
+if test "x$ac_cv_lib_socket_connect" = xyes
+then :
   X_EXTRA_LIBS="-lsocket $X_EXTRA_LIBS"
 fi
 
     fi
 
     # Guillermo Gomez says -lposix is necessary on A/UX.
-    { echo "$as_me:$LINENO: checking for remove" >&5
-echo $ECHO_N "checking for remove... $ECHO_C" >&6; }
-if test "${ac_cv_func_remove+set}" = set; then
-  echo $ECHO_N "(cached) $ECHO_C" >&6
-else
-  cat >conftest.$ac_ext <<_ACEOF
-/* confdefs.h.  */
-_ACEOF
-cat confdefs.h >>conftest.$ac_ext
-cat >>conftest.$ac_ext <<_ACEOF
-/* end confdefs.h.  */
-/* Define remove to an innocuous variant, in case <limits.h> declares remove.
-   For example, HP-UX 11i <limits.h> declares gettimeofday.  */
-#define remove innocuous_remove
+    ac_fn_c_check_func "$LINENO" "remove" "ac_cv_func_remove"
+if test "x$ac_cv_func_remove" = xyes
+then :
 
-/* System header to define __stub macros and hopefully few prototypes,
-    which can conflict with char remove (); below.
-    Prefer <limits.h> to <assert.h> if __STDC__ is defined, since
-    <limits.h> exists even on freestanding compilers.  */
-
-#ifdef __STDC__
-# include <limits.h>
-#else
-# include <assert.h>
-#endif
-
-#undef remove
-
-/* Override any GCC internal prototype to avoid an error.
-   Use char because int might match the return type of a GCC
-   builtin and then its argument prototype would still apply.  */
-#ifdef __cplusplus
-extern "C"
-#endif
-char remove ();
-/* The GNU C library defines this for functions which it implements
-    to always fail with ENOSYS.  Some functions are actually named
-    something starting with __ and the normal name is an alias.  */
-#if defined __stub_remove || defined __stub___remove
-choke me
-#endif
-
-#ifdef F77_DUMMY_MAIN
-
-#  ifdef __cplusplus
-     extern "C"
-#  endif
-   int F77_DUMMY_MAIN() { return 1; }
-
-#endif
-int
-main ()
-{
-return remove ();
-  ;
-  return 0;
-}
-_ACEOF
-rm -f conftest.$ac_objext conftest$ac_exeext
-if { (ac_try="$ac_link"
-case "(($ac_try" in
-  *\"* | *\`* | *\\*) ac_try_echo=\$ac_try;;
-  *) ac_try_echo=$ac_try;;
-esac
-eval "echo \"\$as_me:$LINENO: $ac_try_echo\"") >&5
-  (eval "$ac_link") 2>conftest.er1
-  ac_status=$?
-  grep -v '^ *+' conftest.er1 >conftest.err
-  rm -f conftest.er1
-  cat conftest.err >&5
-  echo "$as_me:$LINENO: \$? = $ac_status" >&5
-  (exit $ac_status); } && {
-	 test -z "$ac_c_werror_flag" ||
-	 test ! -s conftest.err
-       } && test -s conftest$ac_exeext &&
-       $as_test_x conftest$ac_exeext; then
-  ac_cv_func_remove=yes
-else
-  echo "$as_me: failed program was:" >&5
-sed 's/^/| /' conftest.$ac_ext >&5
-
-	ac_cv_func_remove=no
-fi
-
-rm -f core conftest.err conftest.$ac_objext conftest_ipa8_conftest.oo \
-      conftest$ac_exeext conftest.$ac_ext
 fi
-{ echo "$as_me:$LINENO: result: $ac_cv_func_remove" >&5
-echo "${ECHO_T}$ac_cv_func_remove" >&6; }
 
     if test $ac_cv_func_remove = no; then
-      { echo "$as_me:$LINENO: checking for remove in -lposix" >&5
-echo $ECHO_N "checking for remove in -lposix... $ECHO_C" >&6; }
-if test "${ac_cv_lib_posix_remove+set}" = set; then
-  echo $ECHO_N "(cached) $ECHO_C" >&6
-else
+      { printf "%s\n" "$as_me:${as_lineno-$LINENO}: checking for remove in -lposix" >&5
+printf %s "checking for remove in -lposix... " >&6; }
+if test ${ac_cv_lib_posix_remove+y}
+then :
+  printf %s "(cached) " >&6
+else $as_nop
   ac_check_lib_save_LIBS=$LIBS
 LIBS="-lposix  $LIBS"
-cat >conftest.$ac_ext <<_ACEOF
-/* confdefs.h.  */
-_ACEOF
-cat confdefs.h >>conftest.$ac_ext
-cat >>conftest.$ac_ext <<_ACEOF
+cat confdefs.h - <<_ACEOF >conftest.$ac_ext
 /* end confdefs.h.  */
 
 /* Override any GCC internal prototype to avoid an error.
    Use char because int might match the return type of a GCC
    builtin and then its argument prototype would still apply.  */
-#ifdef __cplusplus
-extern "C"
-#endif
 char remove ();
 #ifdef F77_DUMMY_MAIN
 
@@ -12193,163 +11781,54 @@ char remove ();
 
 #endif
 int
-main ()
+main (void)
 {
 return remove ();
   ;
   return 0;
 }
 _ACEOF
-rm -f conftest.$ac_objext conftest$ac_exeext
-if { (ac_try="$ac_link"
-case "(($ac_try" in
-  *\"* | *\`* | *\\*) ac_try_echo=\$ac_try;;
-  *) ac_try_echo=$ac_try;;
-esac
-eval "echo \"\$as_me:$LINENO: $ac_try_echo\"") >&5
-  (eval "$ac_link") 2>conftest.er1
-  ac_status=$?
-  grep -v '^ *+' conftest.er1 >conftest.err
-  rm -f conftest.er1
-  cat conftest.err >&5
-  echo "$as_me:$LINENO: \$? = $ac_status" >&5
-  (exit $ac_status); } && {
-	 test -z "$ac_c_werror_flag" ||
-	 test ! -s conftest.err
-       } && test -s conftest$ac_exeext &&
-       $as_test_x conftest$ac_exeext; then
+if ac_fn_c_try_link "$LINENO"
+then :
   ac_cv_lib_posix_remove=yes
-else
-  echo "$as_me: failed program was:" >&5
-sed 's/^/| /' conftest.$ac_ext >&5
-
-	ac_cv_lib_posix_remove=no
+else $as_nop
+  ac_cv_lib_posix_remove=no
 fi
-
-rm -f core conftest.err conftest.$ac_objext conftest_ipa8_conftest.oo \
-      conftest$ac_exeext conftest.$ac_ext
+rm -f core conftest.err conftest.$ac_objext conftest.beam \
+    conftest$ac_exeext conftest.$ac_ext
 LIBS=$ac_check_lib_save_LIBS
 fi
-{ echo "$as_me:$LINENO: result: $ac_cv_lib_posix_remove" >&5
-echo "${ECHO_T}$ac_cv_lib_posix_remove" >&6; }
-if test $ac_cv_lib_posix_remove = yes; then
+{ printf "%s\n" "$as_me:${as_lineno-$LINENO}: result: $ac_cv_lib_posix_remove" >&5
+printf "%s\n" "$ac_cv_lib_posix_remove" >&6; }
+if test "x$ac_cv_lib_posix_remove" = xyes
+then :
   X_EXTRA_LIBS="$X_EXTRA_LIBS -lposix"
 fi
 
     fi
 
     # BSDI BSD/OS 2.1 needs -lipc for XOpenDisplay.
-    { echo "$as_me:$LINENO: checking for shmat" >&5
-echo $ECHO_N "checking for shmat... $ECHO_C" >&6; }
-if test "${ac_cv_func_shmat+set}" = set; then
-  echo $ECHO_N "(cached) $ECHO_C" >&6
-else
-  cat >conftest.$ac_ext <<_ACEOF
-/* confdefs.h.  */
-_ACEOF
-cat confdefs.h >>conftest.$ac_ext
-cat >>conftest.$ac_ext <<_ACEOF
-/* end confdefs.h.  */
-/* Define shmat to an innocuous variant, in case <limits.h> declares shmat.
-   For example, HP-UX 11i <limits.h> declares gettimeofday.  */
-#define shmat innocuous_shmat
+    ac_fn_c_check_func "$LINENO" "shmat" "ac_cv_func_shmat"
+if test "x$ac_cv_func_shmat" = xyes
+then :
 
-/* System header to define __stub macros and hopefully few prototypes,
-    which can conflict with char shmat (); below.
-    Prefer <limits.h> to <assert.h> if __STDC__ is defined, since
-    <limits.h> exists even on freestanding compilers.  */
-
-#ifdef __STDC__
-# include <limits.h>
-#else
-# include <assert.h>
-#endif
-
-#undef shmat
-
-/* Override any GCC internal prototype to avoid an error.
-   Use char because int might match the return type of a GCC
-   builtin and then its argument prototype would still apply.  */
-#ifdef __cplusplus
-extern "C"
-#endif
-char shmat ();
-/* The GNU C library defines this for functions which it implements
-    to always fail with ENOSYS.  Some functions are actually named
-    something starting with __ and the normal name is an alias.  */
-#if defined __stub_shmat || defined __stub___shmat
-choke me
-#endif
-
-#ifdef F77_DUMMY_MAIN
-
-#  ifdef __cplusplus
-     extern "C"
-#  endif
-   int F77_DUMMY_MAIN() { return 1; }
-
-#endif
-int
-main ()
-{
-return shmat ();
-  ;
-  return 0;
-}
-_ACEOF
-rm -f conftest.$ac_objext conftest$ac_exeext
-if { (ac_try="$ac_link"
-case "(($ac_try" in
-  *\"* | *\`* | *\\*) ac_try_echo=\$ac_try;;
-  *) ac_try_echo=$ac_try;;
-esac
-eval "echo \"\$as_me:$LINENO: $ac_try_echo\"") >&5
-  (eval "$ac_link") 2>conftest.er1
-  ac_status=$?
-  grep -v '^ *+' conftest.er1 >conftest.err
-  rm -f conftest.er1
-  cat conftest.err >&5
-  echo "$as_me:$LINENO: \$? = $ac_status" >&5
-  (exit $ac_status); } && {
-	 test -z "$ac_c_werror_flag" ||
-	 test ! -s conftest.err
-       } && test -s conftest$ac_exeext &&
-       $as_test_x conftest$ac_exeext; then
-  ac_cv_func_shmat=yes
-else
-  echo "$as_me: failed program was:" >&5
-sed 's/^/| /' conftest.$ac_ext >&5
-
-	ac_cv_func_shmat=no
-fi
-
-rm -f core conftest.err conftest.$ac_objext conftest_ipa8_conftest.oo \
-      conftest$ac_exeext conftest.$ac_ext
 fi
-{ echo "$as_me:$LINENO: result: $ac_cv_func_shmat" >&5
-echo "${ECHO_T}$ac_cv_func_shmat" >&6; }
 
     if test $ac_cv_func_shmat = no; then
-      { echo "$as_me:$LINENO: checking for shmat in -lipc" >&5
-echo $ECHO_N "checking for shmat in -lipc... $ECHO_C" >&6; }
-if test "${ac_cv_lib_ipc_shmat+set}" = set; then
-  echo $ECHO_N "(cached) $ECHO_C" >&6
-else
+      { printf "%s\n" "$as_me:${as_lineno-$LINENO}: checking for shmat in -lipc" >&5
+printf %s "checking for shmat in -lipc... " >&6; }
+if test ${ac_cv_lib_ipc_shmat+y}
+then :
+  printf %s "(cached) " >&6
+else $as_nop
   ac_check_lib_save_LIBS=$LIBS
 LIBS="-lipc  $LIBS"
-cat >conftest.$ac_ext <<_ACEOF
-/* confdefs.h.  */
-_ACEOF
-cat confdefs.h >>conftest.$ac_ext
-cat >>conftest.$ac_ext <<_ACEOF
+cat confdefs.h - <<_ACEOF >conftest.$ac_ext
 /* end confdefs.h.  */
 
 /* Override any GCC internal prototype to avoid an error.
    Use char because int might match the return type of a GCC
    builtin and then its argument prototype would still apply.  */
-#ifdef __cplusplus
-extern "C"
-#endif
 char shmat ();
 #ifdef F77_DUMMY_MAIN
 
@@ -12360,46 +11839,27 @@ char shmat ();
 
 #endif
 int
-main ()
+main (void)
 {
 return shmat ();
   ;
   return 0;
 }
 _ACEOF
-rm -f conftest.$ac_objext conftest$ac_exeext
-if { (ac_try="$ac_link"
-case "(($ac_try" in
-  *\"* | *\`* | *\\*) ac_try_echo=\$ac_try;;
-  *) ac_try_echo=$ac_try;;
-esac
-eval "echo \"\$as_me:$LINENO: $ac_try_echo\"") >&5
-  (eval "$ac_link") 2>conftest.er1
-  ac_status=$?
-  grep -v '^ *+' conftest.er1 >conftest.err
-  rm -f conftest.er1
-  cat conftest.err >&5
-  echo "$as_me:$LINENO: \$? = $ac_status" >&5
-  (exit $ac_status); } && {
-	 test -z "$ac_c_werror_flag" ||
-	 test ! -s conftest.err
-       } && test -s conftest$ac_exeext &&
-       $as_test_x conftest$ac_exeext; then
+if ac_fn_c_try_link "$LINENO"
+then :
   ac_cv_lib_ipc_shmat=yes
-else
-  echo "$as_me: failed program was:" >&5
-sed 's/^/| /' conftest.$ac_ext >&5
-
-	ac_cv_lib_ipc_shmat=no
+else $as_nop
+  ac_cv_lib_ipc_shmat=no
 fi
-
-rm -f core conftest.err conftest.$ac_objext conftest_ipa8_conftest.oo \
-      conftest$ac_exeext conftest.$ac_ext
+rm -f core conftest.err conftest.$ac_objext conftest.beam \
+    conftest$ac_exeext conftest.$ac_ext
 LIBS=$ac_check_lib_save_LIBS
 fi
-{ echo "$as_me:$LINENO: result: $ac_cv_lib_ipc_shmat" >&5
-echo "${ECHO_T}$ac_cv_lib_ipc_shmat" >&6; }
-if test $ac_cv_lib_ipc_shmat = yes; then
+{ printf "%s\n" "$as_me:${as_lineno-$LINENO}: result: $ac_cv_lib_ipc_shmat" >&5
+printf "%s\n" "$ac_cv_lib_ipc_shmat" >&6; }
+if test "x$ac_cv_lib_ipc_shmat" = xyes
+then :
   X_EXTRA_LIBS="$X_EXTRA_LIBS -lipc"
 fi
 
@@ -12415,26 +11875,20 @@ fi
   # These have to be linked with before -lX11, unlike the other
   # libraries we check for below, so use a different variable.
   # John Interrante, Karl Berry
-  { echo "$as_me:$LINENO: checking for IceConnectionNumber in -lICE" >&5
-echo $ECHO_N "checking for IceConnectionNumber in -lICE... $ECHO_C" >&6; }
-if test "${ac_cv_lib_ICE_IceConnectionNumber+set}" = set; then
-  echo $ECHO_N "(cached) $ECHO_C" >&6
-else
+  { printf "%s\n" "$as_me:${as_lineno-$LINENO}: checking for IceConnectionNumber in -lICE" >&5
+printf %s "checking for IceConnectionNumber in -lICE... " >&6; }
+if test ${ac_cv_lib_ICE_IceConnectionNumber+y}
+then :
+  printf %s "(cached) " >&6
+else $as_nop
   ac_check_lib_save_LIBS=$LIBS
 LIBS="-lICE $X_EXTRA_LIBS $LIBS"
-cat >conftest.$ac_ext <<_ACEOF
-/* confdefs.h.  */
-_ACEOF
-cat confdefs.h >>conftest.$ac_ext
-cat >>conftest.$ac_ext <<_ACEOF
+cat confdefs.h - <<_ACEOF >conftest.$ac_ext
 /* end confdefs.h.  */
 
 /* Override any GCC internal prototype to avoid an error.
    Use char because int might match the return type of a GCC
    builtin and then its argument prototype would still apply.  */
-#ifdef __cplusplus
-extern "C"
-#endif
 char IceConnectionNumber ();
 #ifdef F77_DUMMY_MAIN
 
@@ -12445,46 +11899,27 @@ char IceConnectionNumber ();
 
 #endif
 int
-main ()
+main (void)
 {
 return IceConnectionNumber ();
   ;
   return 0;
 }
 _ACEOF
-rm -f conftest.$ac_objext conftest$ac_exeext
-if { (ac_try="$ac_link"
-case "(($ac_try" in
-  *\"* | *\`* | *\\*) ac_try_echo=\$ac_try;;
-  *) ac_try_echo=$ac_try;;
-esac
-eval "echo \"\$as_me:$LINENO: $ac_try_echo\"") >&5
-  (eval "$ac_link") 2>conftest.er1
-  ac_status=$?
-  grep -v '^ *+' conftest.er1 >conftest.err
-  rm -f conftest.er1
-  cat conftest.err >&5
-  echo "$as_me:$LINENO: \$? = $ac_status" >&5
-  (exit $ac_status); } && {
-	 test -z "$ac_c_werror_flag" ||
-	 test ! -s conftest.err
-       } && test -s conftest$ac_exeext &&
-       $as_test_x conftest$ac_exeext; then
+if ac_fn_c_try_link "$LINENO"
+then :
   ac_cv_lib_ICE_IceConnectionNumber=yes
-else
-  echo "$as_me: failed program was:" >&5
-sed 's/^/| /' conftest.$ac_ext >&5
-
-	ac_cv_lib_ICE_IceConnectionNumber=no
+else $as_nop
+  ac_cv_lib_ICE_IceConnectionNumber=no
 fi
-
-rm -f core conftest.err conftest.$ac_objext conftest_ipa8_conftest.oo \
-      conftest$ac_exeext conftest.$ac_ext
+rm -f core conftest.err conftest.$ac_objext conftest.beam \
+    conftest$ac_exeext conftest.$ac_ext
 LIBS=$ac_check_lib_save_LIBS
 fi
-{ echo "$as_me:$LINENO: result: $ac_cv_lib_ICE_IceConnectionNumber" >&5
-echo "${ECHO_T}$ac_cv_lib_ICE_IceConnectionNumber" >&6; }
-if test $ac_cv_lib_ICE_IceConnectionNumber = yes; then
+{ printf "%s\n" "$as_me:${as_lineno-$LINENO}: result: $ac_cv_lib_ICE_IceConnectionNumber" >&5
+printf "%s\n" "$ac_cv_lib_ICE_IceConnectionNumber" >&6; }
+if test "x$ac_cv_lib_ICE_IceConnectionNumber" = xyes
+then :
   X_PRE_LIBS="$X_PRE_LIBS -lSM -lICE"
 fi
 
@@ -12493,18 +11928,14 @@ fi
 fi
 
    if test "yes" = "$no_x"; then
-      { echo "$as_me:$LINENO: NOTIFICATION: SAMRAI configured without the X11 library" >&5
-echo "$as_me: NOTIFICATION: SAMRAI configured without the X11 library" >&6;}
+      { printf "%s\n" "$as_me:${as_lineno-$LINENO}: NOTIFICATION: SAMRAI configured without the X11 library" >&5
+printf "%s\n" "$as_me: NOTIFICATION: SAMRAI configured without the X11 library" >&6;}
 
-cat >>confdefs.h <<\_ACEOF
-#define LACKS_X11 1
-_ACEOF
+printf "%s\n" "#define LACKS_X11 1" >>confdefs.h
 
    else
 
-cat >>confdefs.h <<\_ACEOF
-#define HAVE_X11 1
-_ACEOF
+printf "%s\n" "#define HAVE_X11 1" >>confdefs.h
 
       X_LIBS=`echo $X_LIBS | sed 's/-R\//-R \//'`
       if test -n "$x_includes"; then
@@ -12514,12 +11945,10 @@ _ACEOF
       LIB_NAME="$X_PRE_LIBS -lX11 $X_EXTRA_LIBS $LIB_NAME"
    fi
 else
-   { echo "$as_me:$LINENO: NOTIFICATION: SAMRAI configured without the X11 library" >&5
-echo "$as_me: NOTIFICATION: SAMRAI configured without the X11 library" >&6;}
+   { printf "%s\n" "$as_me:${as_lineno-$LINENO}: NOTIFICATION: SAMRAI configured without the X11 library" >&5
+printf "%s\n" "$as_me: NOTIFICATION: SAMRAI configured without the X11 library" >&6;}
 
-cat >>confdefs.h <<\_ACEOF
-#define LACKS_X11 1
-_ACEOF
+printf "%s\n" "#define LACKS_X11 1" >>confdefs.h
 
 fi
 
@@ -12548,15 +11977,17 @@ fi
 
 
 # Start macro BTNG_ARG_WITH_ENV_WRAPPER with args doxygen and DOXYGEN_BIN
-{ echo "$as_me:$LINENO: checking for doxygen" >&5
-echo $ECHO_N "checking for doxygen... $ECHO_C" >&6; }
-if test "${btng_cv_prog_doxygen+set}" = set; then
-  echo $ECHO_N "(cached) $ECHO_C" >&6
-else
+{ printf "%s\n" "$as_me:${as_lineno-$LINENO}: checking for doxygen" >&5
+printf %s "checking for doxygen... " >&6; }
+if test ${btng_cv_prog_doxygen+y}
+then :
+  printf %s "(cached) " >&6
+else $as_nop
 
 
 # Check whether --with-doxygen was given.
-if test "${with_doxygen+set}" = set; then
+if test ${with_doxygen+y}
+then :
   withval=$with_doxygen;
 fi
 
@@ -12592,8 +12023,8 @@ if test "${DOXYGEN_BIN+set}" = set ; then
   # This block executes the quality check commands, if any, for DOXYGEN_BIN.
   # if DOXYGEN_BIN is an absolute path, make sure it is executable.
   if echo "${DOXYGEN_BIN}" | grep '^/' > /dev/null && test ! -x "${DOXYGEN_BIN}"; then
-    { echo "$as_me:$LINENO: WARNING: doxygen program ${DOXYGEN_BIN} is not executable." >&5
-echo "$as_me: WARNING: doxygen program ${DOXYGEN_BIN} is not executable." >&2;}
+    { printf "%s\n" "$as_me:${as_lineno-$LINENO}: WARNING: doxygen program ${DOXYGEN_BIN} is not executable." >&5
+printf "%s\n" "$as_me: WARNING: doxygen program ${DOXYGEN_BIN} is not executable." >&2;}
   fi
 
 fi
@@ -12603,8 +12034,8 @@ if test "${DOXYGEN_BIN+set}" = set ; then
 fi
 
 fi
-{ echo "$as_me:$LINENO: result: $btng_cv_prog_doxygen" >&5
-echo "${ECHO_T}$btng_cv_prog_doxygen" >&6; }
+{ printf "%s\n" "$as_me:${as_lineno-$LINENO}: result: $btng_cv_prog_doxygen" >&5
+printf "%s\n" "$btng_cv_prog_doxygen" >&6; }
 # Set DOXYGEN_BIN from cache.
 # DOXYGEN_BIN is not yet set if we grabbed it from cache.
 if test "${btng_cv_prog_doxygen+set}" = set ; then
@@ -12616,11 +12047,12 @@ fi
 if test "${DOXYGEN_BIN+set}" = set; then
   # Extract the first word of "doxygen", so it can be a program name with args.
 set dummy doxygen; ac_word=$2
-{ echo "$as_me:$LINENO: checking for $ac_word" >&5
-echo $ECHO_N "checking for $ac_word... $ECHO_C" >&6; }
-if test "${ac_cv_path_DOXYGEN_BIN+set}" = set; then
-  echo $ECHO_N "(cached) $ECHO_C" >&6
-else
+{ printf "%s\n" "$as_me:${as_lineno-$LINENO}: checking for $ac_word" >&5
+printf %s "checking for $ac_word... " >&6; }
+if test ${ac_cv_path_DOXYGEN_BIN+y}
+then :
+  printf %s "(cached) " >&6
+else $as_nop
   case $DOXYGEN_BIN in
   [\\/]* | ?:[\\/]*)
   ac_cv_path_DOXYGEN_BIN="$DOXYGEN_BIN" # Let the user override the test with a path.
@@ -12630,15 +12062,19 @@ else
 for as_dir in $PATH
 do
   IFS=$as_save_IFS
-  test -z "$as_dir" && as_dir=.
-  for ac_exec_ext in '' $ac_executable_extensions; do
-  if { test -f "$as_dir/$ac_word$ac_exec_ext" && $as_test_x "$as_dir/$ac_word$ac_exec_ext"; }; then
-    ac_cv_path_DOXYGEN_BIN="$as_dir/$ac_word$ac_exec_ext"
-    echo "$as_me:$LINENO: found $as_dir/$ac_word$ac_exec_ext" >&5
+  case $as_dir in #(((
+    '') as_dir=./ ;;
+    */) ;;
+    *) as_dir=$as_dir/ ;;
+  esac
+    for ac_exec_ext in '' $ac_executable_extensions; do
+  if as_fn_executable_p "$as_dir$ac_word$ac_exec_ext"; then
+    ac_cv_path_DOXYGEN_BIN="$as_dir$ac_word$ac_exec_ext"
+    printf "%s\n" "$as_me:${as_lineno-$LINENO}: found $as_dir$ac_word$ac_exec_ext" >&5
     break 2
   fi
 done
-done
+  done
 IFS=$as_save_IFS
 
   ;;
@@ -12646,11 +12082,11 @@ esac
 fi
 DOXYGEN_BIN=$ac_cv_path_DOXYGEN_BIN
 if test -n "$DOXYGEN_BIN"; then
-  { echo "$as_me:$LINENO: result: $DOXYGEN_BIN" >&5
-echo "${ECHO_T}$DOXYGEN_BIN" >&6; }
+  { printf "%s\n" "$as_me:${as_lineno-$LINENO}: result: $DOXYGEN_BIN" >&5
+printf "%s\n" "$DOXYGEN_BIN" >&6; }
 else
-  { echo "$as_me:$LINENO: result: no" >&5
-echo "${ECHO_T}no" >&6; }
+  { printf "%s\n" "$as_me:${as_lineno-$LINENO}: result: no" >&5
+printf "%s\n" "no" >&6; }
 fi
 
 
@@ -12666,7 +12102,7 @@ for btng_log_vars_index in $btng_log_vars ; do
   else
     btng_log_vars_value="unset";
   fi
-  echo "configure:12669:" "$btng_log_vars_index is $btng_log_vars_value" >&5;
+  echo "configure:12105:" "$btng_log_vars_index is $btng_log_vars_value" >&5;
 done
 
 
@@ -12674,9 +12110,10 @@ done
 
 
 # Check whether --with-dot-dir was given.
-if test "${with_dot_dir+set}" = set; then
+if test ${with_dot_dir+y}
+then :
   withval=$with_dot_dir;
-else
+else $as_nop
   unset with_dot_dir
 fi
 
@@ -12697,12 +12134,12 @@ elif test "${with_dot_dir}" = no; then
 else
   # Make sure valid path is specified.  Enable dot.
   if test ! -d ${with_dot_dir}; then
-     { echo "$as_me:$LINENO: WARNING:
+     { printf "%s\n" "$as_me:${as_lineno-$LINENO}: WARNING:
 Invalid path given for dot executable: ${with_dot_dir}.
 Path does not exist.
 You can expect doxygen documentation generation to not work properly.
 " >&5
-echo "$as_me: WARNING:
+printf "%s\n" "$as_me: WARNING:
 Invalid path given for dot executable: ${with_dot_dir}.
 Path does not exist.
 You can expect doxygen documentation generation to not work properly.
@@ -12721,7 +12158,7 @@ for btng_log_vars_index in $btng_log_vars ; do
   else
     btng_log_vars_value="unset";
   fi
-  echo "configure:12724:" "$btng_log_vars_index is $btng_log_vars_value" >&5;
+  echo "configure:12161:" "$btng_log_vars_index is $btng_log_vars_value" >&5;
 done
 
 
@@ -12731,15 +12168,14 @@ done
 
 
 # Check whether --with-dox-output-dir was given.
-if test "${with_dox_output_dir+set}" = set; then
+if test ${with_dox_output_dir+y}
+then :
   withval=$with_dox_output_dir;
 fi
 
 if test -n "$with_dox_output_dir"; then
   if echo "$with_dox_output_dir" | grep -v '^/' ; then
-    { { echo "$as_me:$LINENO: error: You must give a full path with --with-dox-output-dir=DIR" >&5
-echo "$as_me: error: You must give a full path with --with-dox-output-dir=DIR" >&2;}
-   { (exit 1); exit 1; }; }
+    as_fn_error $? "You must give a full path with --with-dox-output-dir=DIR" "$LINENO" 5
   fi
   dox_output_dir="$with_dox_output_dir"
   # Make sure dox_output_dir ends with / so because the doxygen
@@ -12752,15 +12188,17 @@ fi
 
 
 # Start macro BTNG_ARG_WITH_ENV_WRAPPER with args perl and SAMRAI_PERL
-{ echo "$as_me:$LINENO: checking for perl" >&5
-echo $ECHO_N "checking for perl... $ECHO_C" >&6; }
-if test "${btng_cv_prog_perl+set}" = set; then
-  echo $ECHO_N "(cached) $ECHO_C" >&6
-else
+{ printf "%s\n" "$as_me:${as_lineno-$LINENO}: checking for perl" >&5
+printf %s "checking for perl... " >&6; }
+if test ${btng_cv_prog_perl+y}
+then :
+  printf %s "(cached) " >&6
+else $as_nop
 
 
 # Check whether --with-perl was given.
-if test "${with_perl+set}" = set; then
+if test ${with_perl+y}
+then :
   withval=$with_perl;
 fi
 
@@ -12796,8 +12234,8 @@ if test "${SAMRAI_PERL+set}" = set ; then
   # This block executes the quality check commands, if any, for SAMRAI_PERL.
   # if SAMRAI_PERL is an absolute path, make sure it is executable.
   if echo "${SAMRAI_PERL}" | grep '^/' > /dev/null && test ! -x "${SAMRAI_PERL}"; then
-    { echo "$as_me:$LINENO: WARNING: perl program ${SAMRAI_PERL} is not executable." >&5
-echo "$as_me: WARNING: perl program ${SAMRAI_PERL} is not executable." >&2;}
+    { printf "%s\n" "$as_me:${as_lineno-$LINENO}: WARNING: perl program ${SAMRAI_PERL} is not executable." >&5
+printf "%s\n" "$as_me: WARNING: perl program ${SAMRAI_PERL} is not executable." >&2;}
   fi
 
 fi
@@ -12807,8 +12245,8 @@ if test "${SAMRAI_PERL+set}" = set ; then
 fi
 
 fi
-{ echo "$as_me:$LINENO: result: $btng_cv_prog_perl" >&5
-echo "${ECHO_T}$btng_cv_prog_perl" >&6; }
+{ printf "%s\n" "$as_me:${as_lineno-$LINENO}: result: $btng_cv_prog_perl" >&5
+printf "%s\n" "$btng_cv_prog_perl" >&6; }
 # Set SAMRAI_PERL from cache.
 # SAMRAI_PERL is not yet set if we grabbed it from cache.
 if test "${btng_cv_prog_perl+set}" = set ; then
@@ -12820,11 +12258,12 @@ fi
 if test "${SAMRAI_PERL+set}" = set; then
   # Extract the first word of "perl", so it can be a program name with args.
 set dummy perl; ac_word=$2
-{ echo "$as_me:$LINENO: checking for $ac_word" >&5
-echo $ECHO_N "checking for $ac_word... $ECHO_C" >&6; }
-if test "${ac_cv_path_SAMRAI_PERL+set}" = set; then
-  echo $ECHO_N "(cached) $ECHO_C" >&6
-else
+{ printf "%s\n" "$as_me:${as_lineno-$LINENO}: checking for $ac_word" >&5
+printf %s "checking for $ac_word... " >&6; }
+if test ${ac_cv_path_SAMRAI_PERL+y}
+then :
+  printf %s "(cached) " >&6
+else $as_nop
   case $SAMRAI_PERL in
   [\\/]* | ?:[\\/]*)
   ac_cv_path_SAMRAI_PERL="$SAMRAI_PERL" # Let the user override the test with a path.
@@ -12834,15 +12273,19 @@ else
 for as_dir in $PATH
 do
   IFS=$as_save_IFS
-  test -z "$as_dir" && as_dir=.
-  for ac_exec_ext in '' $ac_executable_extensions; do
-  if { test -f "$as_dir/$ac_word$ac_exec_ext" && $as_test_x "$as_dir/$ac_word$ac_exec_ext"; }; then
-    ac_cv_path_SAMRAI_PERL="$as_dir/$ac_word$ac_exec_ext"
-    echo "$as_me:$LINENO: found $as_dir/$ac_word$ac_exec_ext" >&5
+  case $as_dir in #(((
+    '') as_dir=./ ;;
+    */) ;;
+    *) as_dir=$as_dir/ ;;
+  esac
+    for ac_exec_ext in '' $ac_executable_extensions; do
+  if as_fn_executable_p "$as_dir$ac_word$ac_exec_ext"; then
+    ac_cv_path_SAMRAI_PERL="$as_dir$ac_word$ac_exec_ext"
+    printf "%s\n" "$as_me:${as_lineno-$LINENO}: found $as_dir$ac_word$ac_exec_ext" >&5
     break 2
   fi
 done
-done
+  done
 IFS=$as_save_IFS
 
   ;;
@@ -12850,11 +12293,11 @@ esac
 fi
 SAMRAI_PERL=$ac_cv_path_SAMRAI_PERL
 if test -n "$SAMRAI_PERL"; then
-  { echo "$as_me:$LINENO: result: $SAMRAI_PERL" >&5
-echo "${ECHO_T}$SAMRAI_PERL" >&6; }
+  { printf "%s\n" "$as_me:${as_lineno-$LINENO}: result: $SAMRAI_PERL" >&5
+printf "%s\n" "$SAMRAI_PERL" >&6; }
 else
-  { echo "$as_me:$LINENO: result: no" >&5
-echo "${ECHO_T}no" >&6; }
+  { printf "%s\n" "$as_me:${as_lineno-$LINENO}: result: no" >&5
+printf "%s\n" "no" >&6; }
 fi
 
 
@@ -12870,58 +12313,55 @@ for btng_log_vars_index in $btng_log_vars ; do
   else
     btng_log_vars_value="unset";
   fi
-  echo "configure:12873:" "$btng_log_vars_index is $btng_log_vars_value" >&5;
+  echo "configure:12316:" "$btng_log_vars_index is $btng_log_vars_value" >&5;
 done
 
 
 
-echo "configure:12878:" begin stringize >&5
-{ echo "$as_me:$LINENO: checking for preprocessor stringizing operator" >&5
-echo $ECHO_N "checking for preprocessor stringizing operator... $ECHO_C" >&6; }
-if test "${ac_cv_c_stringize+set}" = set; then
-  echo $ECHO_N "(cached) $ECHO_C" >&6
-else
-  cat >conftest.$ac_ext <<_ACEOF
-/* confdefs.h.  */
-_ACEOF
-cat confdefs.h >>conftest.$ac_ext
-cat >>conftest.$ac_ext <<_ACEOF
+echo "configure:12321:" begin stringize >&5
+{ printf "%s\n" "$as_me:${as_lineno-$LINENO}: checking for preprocessor stringizing operator" >&5
+printf %s "checking for preprocessor stringizing operator... " >&6; }
+if test ${ac_cv_c_stringize+y}
+then :
+  printf %s "(cached) " >&6
+else $as_nop
+  cat confdefs.h - <<_ACEOF >conftest.$ac_ext
 /* end confdefs.h.  */
 #define x(y) #y
 
 char *s = x(teststring);
 _ACEOF
 if (eval "$ac_cpp conftest.$ac_ext") 2>&5 |
-  $EGREP "#teststring" >/dev/null 2>&1; then
+  $EGREP "#teststring" >/dev/null 2>&1
+then :
   ac_cv_c_stringize=no
-else
+else $as_nop
   ac_cv_c_stringize=yes
 fi
-rm -f conftest*
+rm -rf conftest*
 
 fi
-{ echo "$as_me:$LINENO: result: $ac_cv_c_stringize" >&5
-echo "${ECHO_T}$ac_cv_c_stringize" >&6; }
+{ printf "%s\n" "$as_me:${as_lineno-$LINENO}: result: $ac_cv_c_stringize" >&5
+printf "%s\n" "$ac_cv_c_stringize" >&6; }
 if test $ac_cv_c_stringize = yes; then
 
-cat >>confdefs.h <<\_ACEOF
-#define HAVE_STRINGIZE 1
-_ACEOF
+printf "%s\n" "#define HAVE_STRINGIZE 1" >>confdefs.h
 
 fi
 
-echo "configure:12913:" end stringize >&5
+echo "configure:12352:" end stringize >&5
 
 
 
 # Start macro BTNG_C_RESTRICT
 
-{ echo "$as_me:$LINENO: checking checking whether restrict is broken" >&5
-echo $ECHO_N "checking checking whether restrict is broken... $ECHO_C" >&6; }
+{ printf "%s\n" "$as_me:${as_lineno-$LINENO}: checking checking whether restrict is broken" >&5
+printf %s "checking checking whether restrict is broken... " >&6; }
 
-if test "${btng_cv_c_restrict_broken+set}" = set; then
-  echo $ECHO_N "(cached) $ECHO_C" >&6
-else
+if test ${btng_cv_c_restrict_broken+y}
+then :
+  printf %s "(cached) " >&6
+else $as_nop
 
 
   ac_ext=cpp
@@ -12930,11 +12370,7 @@ ac_compile='$CXX -c $CXXFLAGS $CPPFLAGS conftest.$ac_ext >&5'
 ac_link='$CXX -o conftest$ac_exeext $CXXFLAGS $CPPFLAGS $LDFLAGS conftest.$ac_ext $LIBS >&5'
 ac_compiler_gnu=$ac_cv_cxx_compiler_gnu
 
-  cat >conftest.$ac_ext <<_ACEOF
-/* confdefs.h.  */
-_ACEOF
-cat confdefs.h >>conftest.$ac_ext
-cat >>conftest.$ac_ext <<_ACEOF
+  cat confdefs.h - <<_ACEOF >conftest.$ac_ext
 /* end confdefs.h.  */
 
 struct array_test {
@@ -12957,7 +12393,7 @@ double &array_test::value(int i) __restrict__ const {
 
 #endif
 int
-main ()
+main (void)
 {
 
 double a[10];
@@ -12968,36 +12404,17 @@ at.value(5) = 5;
   return 0;
 }
 _ACEOF
-rm -f conftest.$ac_objext
-if { (ac_try="$ac_compile"
-case "(($ac_try" in
-  *\"* | *\`* | *\\*) ac_try_echo=\$ac_try;;
-  *) ac_try_echo=$ac_try;;
-esac
-eval "echo \"\$as_me:$LINENO: $ac_try_echo\"") >&5
-  (eval "$ac_compile") 2>conftest.er1
-  ac_status=$?
-  grep -v '^ *+' conftest.er1 >conftest.err
-  rm -f conftest.er1
-  cat conftest.err >&5
-  echo "$as_me:$LINENO: \$? = $ac_status" >&5
-  (exit $ac_status); } && {
-	 test -z "$ac_cxx_werror_flag" ||
-	 test ! -s conftest.err
-       } && test -s conftest.$ac_objext; then
+if ac_fn_cxx_try_compile "$LINENO"
+then :
   # restrict is not broken.
     btng_cv_c_restrict_broken=no
 
-else
-  echo "$as_me: failed program was:" >&5
-sed 's/^/| /' conftest.$ac_ext >&5
-
-	# restrict is broken.
+else $as_nop
+  # restrict is broken.
     btng_cv_c_restrict_broken=yes
 
 fi
-
-rm -f core conftest.err conftest.$ac_objext conftest.$ac_ext
+rm -f core conftest.err conftest.$ac_objext conftest.beam conftest.$ac_ext
   ac_ext=c
 ac_cpp='$CPP $CPPFLAGS'
 ac_compile='$CC -c $CFLAGS $CPPFLAGS conftest.$ac_ext >&5'
@@ -13008,14 +12425,12 @@ ac_compiler_gnu=$ac_cv_c_compiler_gnu
 
 fi
 
-{ echo "$as_me:$LINENO: result: $btng_cv_c_restrict_broken" >&5
-echo "${ECHO_T}$btng_cv_c_restrict_broken" >&6; }
+{ printf "%s\n" "$as_me:${as_lineno-$LINENO}: result: $btng_cv_c_restrict_broken" >&5
+printf "%s\n" "$btng_cv_c_restrict_broken" >&6; }
 
 if test "$btng_cv_c_restrict_broken" = yes; then
 
-cat >>confdefs.h <<\_ACEOF
-#define RESTRICT_IS_BROKEN 1
-_ACEOF
+printf "%s\n" "#define RESTRICT_IS_BROKEN 1" >>confdefs.h
 
 fi
 
@@ -13028,12 +12443,13 @@ fi
 
 # Start macro BTNG_TYPE_NAMESPACE
 
-{ echo "$as_me:$LINENO: checking whether namespace is broken" >&5
-echo $ECHO_N "checking whether namespace is broken... $ECHO_C" >&6; }
+{ printf "%s\n" "$as_me:${as_lineno-$LINENO}: checking whether namespace is broken" >&5
+printf %s "checking whether namespace is broken... " >&6; }
 
-if test "${btng_cv_type_namespace_broken+set}" = set; then
-  echo $ECHO_N "(cached) $ECHO_C" >&6
-else
+if test ${btng_cv_type_namespace_broken+y}
+then :
+  printf %s "(cached) " >&6
+else $as_nop
 
 
       ac_ext=cpp
@@ -13042,11 +12458,7 @@ ac_compile='$CXX -c $CXXFLAGS $CPPFLAGS conftest.$ac_ext >&5'
 ac_link='$CXX -o conftest$ac_exeext $CXXFLAGS $CPPFLAGS $LDFLAGS conftest.$ac_ext $LIBS >&5'
 ac_compiler_gnu=$ac_cv_cxx_compiler_gnu
 
-  cat >conftest.$ac_ext <<_ACEOF
-/* confdefs.h.  */
-_ACEOF
-cat confdefs.h >>conftest.$ac_ext
-cat >>conftest.$ac_ext <<_ACEOF
+  cat confdefs.h - <<_ACEOF >conftest.$ac_ext
 /* end confdefs.h.  */
 namespace test{ int i; }
 
@@ -13059,43 +12471,24 @@ namespace test{ int i; }
 
 #endif
 int
-main ()
+main (void)
 {
 using namespace test;
   ;
   return 0;
 }
 _ACEOF
-rm -f conftest.$ac_objext
-if { (ac_try="$ac_compile"
-case "(($ac_try" in
-  *\"* | *\`* | *\\*) ac_try_echo=\$ac_try;;
-  *) ac_try_echo=$ac_try;;
-esac
-eval "echo \"\$as_me:$LINENO: $ac_try_echo\"") >&5
-  (eval "$ac_compile") 2>conftest.er1
-  ac_status=$?
-  grep -v '^ *+' conftest.er1 >conftest.err
-  rm -f conftest.er1
-  cat conftest.err >&5
-  echo "$as_me:$LINENO: \$? = $ac_status" >&5
-  (exit $ac_status); } && {
-	 test -z "$ac_cxx_werror_flag" ||
-	 test ! -s conftest.err
-       } && test -s conftest.$ac_objext; then
+if ac_fn_cxx_try_compile "$LINENO"
+then :
   # namespace is not broken.
     btng_cv_type_namespace_broken=no
 
-else
-  echo "$as_me: failed program was:" >&5
-sed 's/^/| /' conftest.$ac_ext >&5
-
-	# namespace is broken.
+else $as_nop
+  # namespace is broken.
     btng_cv_type_namespace_broken=yes
 
 fi
-
-rm -f core conftest.err conftest.$ac_objext conftest.$ac_ext
+rm -f core conftest.err conftest.$ac_objext conftest.beam conftest.$ac_ext
   ac_ext=cpp
 ac_cpp='$CXXCPP $CPPFLAGS'
 ac_compile='$CXX -c $CXXFLAGS $CPPFLAGS conftest.$ac_ext >&5'
@@ -13106,14 +12499,12 @@ ac_compiler_gnu=$ac_cv_cxx_compiler_gnu
 
 fi
 
-{ echo "$as_me:$LINENO: result: $btng_cv_type_namespace_broken" >&5
-echo "${ECHO_T}$btng_cv_type_namespace_broken" >&6; }
+{ printf "%s\n" "$as_me:${as_lineno-$LINENO}: result: $btng_cv_type_namespace_broken" >&5
+printf "%s\n" "$btng_cv_type_namespace_broken" >&6; }
 
 if test "$btng_cv_type_namespace_broken" = yes; then
 
-cat >>confdefs.h <<\_ACEOF
-#define NAMESPACE_IS_BROKEN 1
-_ACEOF
+printf "%s\n" "#define NAMESPACE_IS_BROKEN 1" >>confdefs.h
 
 fi
 
@@ -13125,12 +12516,13 @@ fi
 
 # Start macro BTNG_TYPE_BOOL
 
-{ echo "$as_me:$LINENO: checking checking whether bool type is broken" >&5
-echo $ECHO_N "checking checking whether bool type is broken... $ECHO_C" >&6; }
+{ printf "%s\n" "$as_me:${as_lineno-$LINENO}: checking checking whether bool type is broken" >&5
+printf %s "checking checking whether bool type is broken... " >&6; }
 
-if test "${btng_cv_type_bool_broken+set}" = set; then
-  echo $ECHO_N "(cached) $ECHO_C" >&6
-else
+if test ${btng_cv_type_bool_broken+y}
+then :
+  printf %s "(cached) " >&6
+else $as_nop
 
 
 
@@ -13141,11 +12533,7 @@ ac_link='$CXX -o conftest$ac_exeext $CXXFLAGS $CPPFLAGS $LDFLAGS conftest.$ac_ex
 ac_compiler_gnu=$ac_cv_cxx_compiler_gnu
 
 
-  cat >conftest.$ac_ext <<_ACEOF
-/* confdefs.h.  */
-_ACEOF
-cat confdefs.h >>conftest.$ac_ext
-cat >>conftest.$ac_ext <<_ACEOF
+  cat confdefs.h - <<_ACEOF >conftest.$ac_ext
 /* end confdefs.h.  */
 
 #ifdef F77_DUMMY_MAIN
@@ -13157,43 +12545,24 @@ cat >>conftest.$ac_ext <<_ACEOF
 
 #endif
 int
-main ()
+main (void)
 {
 bool b = true;
   ;
   return 0;
 }
 _ACEOF
-rm -f conftest.$ac_objext
-if { (ac_try="$ac_compile"
-case "(($ac_try" in
-  *\"* | *\`* | *\\*) ac_try_echo=\$ac_try;;
-  *) ac_try_echo=$ac_try;;
-esac
-eval "echo \"\$as_me:$LINENO: $ac_try_echo\"") >&5
-  (eval "$ac_compile") 2>conftest.er1
-  ac_status=$?
-  grep -v '^ *+' conftest.er1 >conftest.err
-  rm -f conftest.er1
-  cat conftest.err >&5
-  echo "$as_me:$LINENO: \$? = $ac_status" >&5
-  (exit $ac_status); } && {
-	 test -z "$ac_cxx_werror_flag" ||
-	 test ! -s conftest.err
-       } && test -s conftest.$ac_objext; then
+if ac_fn_cxx_try_compile "$LINENO"
+then :
   # bool is not broken.
     btng_cv_type_bool_broken=no
 
-else
-  echo "$as_me: failed program was:" >&5
-sed 's/^/| /' conftest.$ac_ext >&5
-
-	# bool is broken.
+else $as_nop
+  # bool is broken.
     btng_cv_type_bool_broken=yes
 
 fi
-
-rm -f core conftest.err conftest.$ac_objext conftest.$ac_ext
+rm -f core conftest.err conftest.$ac_objext conftest.beam conftest.$ac_ext
   ac_ext=cpp
 ac_cpp='$CXXCPP $CPPFLAGS'
 ac_compile='$CXX -c $CXXFLAGS $CPPFLAGS conftest.$ac_ext >&5'
@@ -13204,14 +12573,12 @@ ac_compiler_gnu=$ac_cv_cxx_compiler_gnu
 
 fi
 
-{ echo "$as_me:$LINENO: result: $btng_cv_type_bool_broken" >&5
-echo "${ECHO_T}$btng_cv_type_bool_broken" >&6; }
+{ printf "%s\n" "$as_me:${as_lineno-$LINENO}: result: $btng_cv_type_bool_broken" >&5
+printf "%s\n" "$btng_cv_type_bool_broken" >&6; }
 
 if test "$btng_cv_type_bool_broken" = yes; then
 
-cat >>confdefs.h <<\_ACEOF
-#define BOOL_IS_BROKEN 1
-_ACEOF
+printf "%s\n" "#define BOOL_IS_BROKEN 1" >>confdefs.h
 
 fi
 
@@ -13219,270 +12586,50 @@ fi
 # End macro BTNG_TYPE_BOOL
 
 
-{ echo "$as_me:$LINENO: checking for ANSI C header files" >&5
-echo $ECHO_N "checking for ANSI C header files... $ECHO_C" >&6; }
-if test "${ac_cv_header_stdc+set}" = set; then
-  echo $ECHO_N "(cached) $ECHO_C" >&6
-else
-  cat >conftest.$ac_ext <<_ACEOF
-/* confdefs.h.  */
-_ACEOF
-cat confdefs.h >>conftest.$ac_ext
-cat >>conftest.$ac_ext <<_ACEOF
-/* end confdefs.h.  */
-#include <stdlib.h>
-#include <stdarg.h>
-#include <string.h>
-#include <float.h>
-
-#ifdef F77_DUMMY_MAIN
-
-#  ifdef __cplusplus
-     extern "C"
-#  endif
-   int F77_DUMMY_MAIN() { return 1; }
-
-#endif
-int
-main ()
-{
-
-  ;
-  return 0;
-}
-_ACEOF
-rm -f conftest.$ac_objext
-if { (ac_try="$ac_compile"
-case "(($ac_try" in
-  *\"* | *\`* | *\\*) ac_try_echo=\$ac_try;;
-  *) ac_try_echo=$ac_try;;
-esac
-eval "echo \"\$as_me:$LINENO: $ac_try_echo\"") >&5
-  (eval "$ac_compile") 2>conftest.er1
-  ac_status=$?
-  grep -v '^ *+' conftest.er1 >conftest.err
-  rm -f conftest.er1
-  cat conftest.err >&5
-  echo "$as_me:$LINENO: \$? = $ac_status" >&5
-  (exit $ac_status); } && {
-	 test -z "$ac_cxx_werror_flag" ||
-	 test ! -s conftest.err
-       } && test -s conftest.$ac_objext; then
-  ac_cv_header_stdc=yes
-else
-  echo "$as_me: failed program was:" >&5
-sed 's/^/| /' conftest.$ac_ext >&5
-
-	ac_cv_header_stdc=no
-fi
-
-rm -f core conftest.err conftest.$ac_objext conftest.$ac_ext
-
-if test $ac_cv_header_stdc = yes; then
-  # SunOS 4.x string.h does not declare mem*, contrary to ANSI.
-  cat >conftest.$ac_ext <<_ACEOF
-/* confdefs.h.  */
-_ACEOF
-cat confdefs.h >>conftest.$ac_ext
-cat >>conftest.$ac_ext <<_ACEOF
-/* end confdefs.h.  */
-#include <string.h>
-
-_ACEOF
-if (eval "$ac_cpp conftest.$ac_ext") 2>&5 |
-  $EGREP "memchr" >/dev/null 2>&1; then
-  :
-else
-  ac_cv_header_stdc=no
-fi
-rm -f conftest*
-
-fi
-
-if test $ac_cv_header_stdc = yes; then
-  # ISC 2.0.2 stdlib.h does not declare free, contrary to ANSI.
-  cat >conftest.$ac_ext <<_ACEOF
-/* confdefs.h.  */
-_ACEOF
-cat confdefs.h >>conftest.$ac_ext
-cat >>conftest.$ac_ext <<_ACEOF
-/* end confdefs.h.  */
-#include <stdlib.h>
-
-_ACEOF
-if (eval "$ac_cpp conftest.$ac_ext") 2>&5 |
-  $EGREP "free" >/dev/null 2>&1; then
-  :
-else
-  ac_cv_header_stdc=no
-fi
-rm -f conftest*
-
-fi
-
-if test $ac_cv_header_stdc = yes; then
-  # /bin/cc in Irix-4.0.5 gets non-ANSI ctype macros unless using -ansi.
-  if test "$cross_compiling" = yes; then
-  :
-else
-  cat >conftest.$ac_ext <<_ACEOF
-/* confdefs.h.  */
-_ACEOF
-cat confdefs.h >>conftest.$ac_ext
-cat >>conftest.$ac_ext <<_ACEOF
-/* end confdefs.h.  */
-#include <ctype.h>
-#include <stdlib.h>
-#if ((' ' & 0x0FF) == 0x020)
-# define ISLOWER(c) ('a' <= (c) && (c) <= 'z')
-# define TOUPPER(c) (ISLOWER(c) ? 'A' + ((c) - 'a') : (c))
-#else
-# define ISLOWER(c) \
-		   (('a' <= (c) && (c) <= 'i') \
-		     || ('j' <= (c) && (c) <= 'r') \
-		     || ('s' <= (c) && (c) <= 'z'))
-# define TOUPPER(c) (ISLOWER(c) ? ((c) | 0x40) : (c))
-#endif
-
-#define XOR(e, f) (((e) && !(f)) || (!(e) && (f)))
-int
-main ()
-{
-  int i;
-  for (i = 0; i < 256; i++)
-    if (XOR (islower (i), ISLOWER (i))
-	|| toupper (i) != TOUPPER (i))
-      return 2;
-  return 0;
-}
-_ACEOF
-rm -f conftest$ac_exeext
-if { (ac_try="$ac_link"
-case "(($ac_try" in
-  *\"* | *\`* | *\\*) ac_try_echo=\$ac_try;;
-  *) ac_try_echo=$ac_try;;
-esac
-eval "echo \"\$as_me:$LINENO: $ac_try_echo\"") >&5
-  (eval "$ac_link") 2>&5
-  ac_status=$?
-  echo "$as_me:$LINENO: \$? = $ac_status" >&5
-  (exit $ac_status); } && { ac_try='./conftest$ac_exeext'
-  { (case "(($ac_try" in
-  *\"* | *\`* | *\\*) ac_try_echo=\$ac_try;;
-  *) ac_try_echo=$ac_try;;
-esac
-eval "echo \"\$as_me:$LINENO: $ac_try_echo\"") >&5
-  (eval "$ac_try") 2>&5
-  ac_status=$?
-  echo "$as_me:$LINENO: \$? = $ac_status" >&5
-  (exit $ac_status); }; }; then
-  :
-else
-  echo "$as_me: program exited with status $ac_status" >&5
-echo "$as_me: failed program was:" >&5
-sed 's/^/| /' conftest.$ac_ext >&5
-
-( exit $ac_status )
-ac_cv_header_stdc=no
-fi
-rm -f core *.core core.conftest.* gmon.out bb.out conftest$ac_exeext conftest.$ac_objext conftest.$ac_ext
-fi
-
-
-fi
-fi
-{ echo "$as_me:$LINENO: result: $ac_cv_header_stdc" >&5
-echo "${ECHO_T}$ac_cv_header_stdc" >&6; }
-if test $ac_cv_header_stdc = yes; then
-
-cat >>confdefs.h <<\_ACEOF
-#define STDC_HEADERS 1
-_ACEOF
-
-fi
-
-# On IRIX 5.3, sys/types and inttypes.h are conflicting.
-
-
-
-
-
-
-
-
-
-for ac_header in sys/types.h sys/stat.h stdlib.h string.h memory.h strings.h \
-		  inttypes.h stdint.h unistd.h
+ac_header= ac_cache=
+for ac_item in $ac_header_cxx_list
 do
-as_ac_Header=`echo "ac_cv_header_$ac_header" | $as_tr_sh`
-{ echo "$as_me:$LINENO: checking for $ac_header" >&5
-echo $ECHO_N "checking for $ac_header... $ECHO_C" >&6; }
-if { as_var=$as_ac_Header; eval "test \"\${$as_var+set}\" = set"; }; then
-  echo $ECHO_N "(cached) $ECHO_C" >&6
-else
-  cat >conftest.$ac_ext <<_ACEOF
-/* confdefs.h.  */
-_ACEOF
-cat confdefs.h >>conftest.$ac_ext
-cat >>conftest.$ac_ext <<_ACEOF
-/* end confdefs.h.  */
-$ac_includes_default
-
-#include <$ac_header>
-_ACEOF
-rm -f conftest.$ac_objext
-if { (ac_try="$ac_compile"
-case "(($ac_try" in
-  *\"* | *\`* | *\\*) ac_try_echo=\$ac_try;;
-  *) ac_try_echo=$ac_try;;
-esac
-eval "echo \"\$as_me:$LINENO: $ac_try_echo\"") >&5
-  (eval "$ac_compile") 2>conftest.er1
-  ac_status=$?
-  grep -v '^ *+' conftest.er1 >conftest.err
-  rm -f conftest.er1
-  cat conftest.err >&5
-  echo "$as_me:$LINENO: \$? = $ac_status" >&5
-  (exit $ac_status); } && {
-	 test -z "$ac_cxx_werror_flag" ||
-	 test ! -s conftest.err
-       } && test -s conftest.$ac_objext; then
-  eval "$as_ac_Header=yes"
-else
-  echo "$as_me: failed program was:" >&5
-sed 's/^/| /' conftest.$ac_ext >&5
-
-	eval "$as_ac_Header=no"
-fi
-
-rm -f core conftest.err conftest.$ac_objext conftest.$ac_ext
-fi
-ac_res=`eval echo '${'$as_ac_Header'}'`
-	       { echo "$as_me:$LINENO: result: $ac_res" >&5
-echo "${ECHO_T}$ac_res" >&6; }
-if test `eval echo '${'$as_ac_Header'}'` = yes; then
-  cat >>confdefs.h <<_ACEOF
-#define `echo "HAVE_$ac_header" | $as_tr_cpp` 1
-_ACEOF
-
-fi
-
+  if test $ac_cache; then
+    ac_fn_cxx_check_header_compile "$LINENO" $ac_header ac_cv_header_$ac_cache "$ac_includes_default"
+    if eval test \"x\$ac_cv_header_$ac_cache\" = xyes; then
+      printf "%s\n" "#define $ac_item 1" >> confdefs.h
+    fi
+    ac_header= ac_cache=
+  elif test $ac_header; then
+    ac_cache=$ac_item
+  else
+    ac_header=$ac_item
+  fi
 done
 
 
 
+
+
+
+
+
+if test $ac_cv_header_stdlib_h = yes && test $ac_cv_header_string_h = yes
+then :
+
+printf "%s\n" "#define STDC_HEADERS 1" >>confdefs.h
+
+fi
+
 # Start macro BTNG_IOSTREAM_HEADER_FILENAME
 
 # Start macro BTNG_TREAT_VARIABLE_HEADER_FILENAME
-if test "${btng_cv_iostream_header_filename+set}" = set; then
-  echo $ECHO_N "(cached) $ECHO_C" >&6
-else
+if test ${btng_cv_iostream_header_filename+y}
+then :
+  printf %s "(cached) " >&6
+else $as_nop
 
 
 # Check whether --with-iostream-header-file was given.
-if test "${with_iostream_header_file+set}" = set; then
+if test ${with_iostream_header_file+y}
+then :
   withval=$with_iostream_header_file; btng_cv_iostream_header_filename=$with_iostream_header_file
-else
+else $as_nop
 
 # Start macro BTNG_FIND_CORRECT_HEADER_FILENAME
 
@@ -13497,151 +12644,21 @@ ac_compiler_gnu=$ac_cv_cxx_compiler_gnu
 
   CPPFLAGS_SAVE=$CPPFLAGS
   for file in iostream iostream.h iostream.hxx; do
-    as_ac_Header=`echo "ac_cv_header_$file" | $as_tr_sh`
-if { as_var=$as_ac_Header; eval "test \"\${$as_var+set}\" = set"; }; then
-  { echo "$as_me:$LINENO: checking for $file" >&5
-echo $ECHO_N "checking for $file... $ECHO_C" >&6; }
-if { as_var=$as_ac_Header; eval "test \"\${$as_var+set}\" = set"; }; then
-  echo $ECHO_N "(cached) $ECHO_C" >&6
-fi
-ac_res=`eval echo '${'$as_ac_Header'}'`
-	       { echo "$as_me:$LINENO: result: $ac_res" >&5
-echo "${ECHO_T}$ac_res" >&6; }
-else
-  # Is the header compilable?
-{ echo "$as_me:$LINENO: checking $file usability" >&5
-echo $ECHO_N "checking $file usability... $ECHO_C" >&6; }
-cat >conftest.$ac_ext <<_ACEOF
-/* confdefs.h.  */
-_ACEOF
-cat confdefs.h >>conftest.$ac_ext
-cat >>conftest.$ac_ext <<_ACEOF
-/* end confdefs.h.  */
-$ac_includes_default
-#include <$file>
-_ACEOF
-rm -f conftest.$ac_objext
-if { (ac_try="$ac_compile"
-case "(($ac_try" in
-  *\"* | *\`* | *\\*) ac_try_echo=\$ac_try;;
-  *) ac_try_echo=$ac_try;;
-esac
-eval "echo \"\$as_me:$LINENO: $ac_try_echo\"") >&5
-  (eval "$ac_compile") 2>conftest.er1
-  ac_status=$?
-  grep -v '^ *+' conftest.er1 >conftest.err
-  rm -f conftest.er1
-  cat conftest.err >&5
-  echo "$as_me:$LINENO: \$? = $ac_status" >&5
-  (exit $ac_status); } && {
-	 test -z "$ac_cxx_werror_flag" ||
-	 test ! -s conftest.err
-       } && test -s conftest.$ac_objext; then
-  ac_header_compiler=yes
-else
-  echo "$as_me: failed program was:" >&5
-sed 's/^/| /' conftest.$ac_ext >&5
-
-	ac_header_compiler=no
-fi
-
-rm -f core conftest.err conftest.$ac_objext conftest.$ac_ext
-{ echo "$as_me:$LINENO: result: $ac_header_compiler" >&5
-echo "${ECHO_T}$ac_header_compiler" >&6; }
-
-# Is the header present?
-{ echo "$as_me:$LINENO: checking $file presence" >&5
-echo $ECHO_N "checking $file presence... $ECHO_C" >&6; }
-cat >conftest.$ac_ext <<_ACEOF
-/* confdefs.h.  */
-_ACEOF
-cat confdefs.h >>conftest.$ac_ext
-cat >>conftest.$ac_ext <<_ACEOF
-/* end confdefs.h.  */
-#include <$file>
-_ACEOF
-if { (ac_try="$ac_cpp conftest.$ac_ext"
-case "(($ac_try" in
-  *\"* | *\`* | *\\*) ac_try_echo=\$ac_try;;
-  *) ac_try_echo=$ac_try;;
-esac
-eval "echo \"\$as_me:$LINENO: $ac_try_echo\"") >&5
-  (eval "$ac_cpp conftest.$ac_ext") 2>conftest.er1
-  ac_status=$?
-  grep -v '^ *+' conftest.er1 >conftest.err
-  rm -f conftest.er1
-  cat conftest.err >&5
-  echo "$as_me:$LINENO: \$? = $ac_status" >&5
-  (exit $ac_status); } >/dev/null && {
-	 test -z "$ac_cxx_preproc_warn_flag$ac_cxx_werror_flag" ||
-	 test ! -s conftest.err
-       }; then
-  ac_header_preproc=yes
-else
-  echo "$as_me: failed program was:" >&5
-sed 's/^/| /' conftest.$ac_ext >&5
-
-  ac_header_preproc=no
-fi
-
-rm -f conftest.err conftest.$ac_ext
-{ echo "$as_me:$LINENO: result: $ac_header_preproc" >&5
-echo "${ECHO_T}$ac_header_preproc" >&6; }
-
-# So?  What about this header?
-case $ac_header_compiler:$ac_header_preproc:$ac_cxx_preproc_warn_flag in
-  yes:no: )
-    { echo "$as_me:$LINENO: WARNING: $file: accepted by the compiler, rejected by the preprocessor!" >&5
-echo "$as_me: WARNING: $file: accepted by the compiler, rejected by the preprocessor!" >&2;}
-    { echo "$as_me:$LINENO: WARNING: $file: proceeding with the compiler's result" >&5
-echo "$as_me: WARNING: $file: proceeding with the compiler's result" >&2;}
-    ac_header_preproc=yes
-    ;;
-  no:yes:* )
-    { echo "$as_me:$LINENO: WARNING: $file: present but cannot be compiled" >&5
-echo "$as_me: WARNING: $file: present but cannot be compiled" >&2;}
-    { echo "$as_me:$LINENO: WARNING: $file:     check for missing prerequisite headers?" >&5
-echo "$as_me: WARNING: $file:     check for missing prerequisite headers?" >&2;}
-    { echo "$as_me:$LINENO: WARNING: $file: see the Autoconf documentation" >&5
-echo "$as_me: WARNING: $file: see the Autoconf documentation" >&2;}
-    { echo "$as_me:$LINENO: WARNING: $file:     section \"Present But Cannot Be Compiled\"" >&5
-echo "$as_me: WARNING: $file:     section \"Present But Cannot Be Compiled\"" >&2;}
-    { echo "$as_me:$LINENO: WARNING: $file: proceeding with the preprocessor's result" >&5
-echo "$as_me: WARNING: $file: proceeding with the preprocessor's result" >&2;}
-    { echo "$as_me:$LINENO: WARNING: $file: in the future, the compiler will take precedence" >&5
-echo "$as_me: WARNING: $file: in the future, the compiler will take precedence" >&2;}
-
-    ;;
-esac
-{ echo "$as_me:$LINENO: checking for $file" >&5
-echo $ECHO_N "checking for $file... $ECHO_C" >&6; }
-if { as_var=$as_ac_Header; eval "test \"\${$as_var+set}\" = set"; }; then
-  echo $ECHO_N "(cached) $ECHO_C" >&6
-else
-  eval "$as_ac_Header=\$ac_header_preproc"
-fi
-ac_res=`eval echo '${'$as_ac_Header'}'`
-	       { echo "$as_me:$LINENO: result: $ac_res" >&5
-echo "${ECHO_T}$ac_res" >&6; }
-
-fi
-if test `eval echo '${'$as_ac_Header'}'` = yes; then
+    as_ac_Header=`printf "%s\n" "ac_cv_header_$file" | $as_tr_sh`
+ac_fn_cxx_check_header_compile "$LINENO" "$file" "$as_ac_Header" "$ac_includes_default"
+if eval test \"x\$"$as_ac_Header"\" = x"yes"
+then :
   btng_header_found=1
-else
+else $as_nop
   unset btng_header_found
 fi
 
-
     if test -n "$btng_header_found"; then
-      { echo "$as_me:$LINENO: checking whether $file is the header sought" >&5
-echo $ECHO_N "checking whether $file is the header sought... $ECHO_C" >&6; }
-      echo "configure:13638:" found header file $file >&5
+      { printf "%s\n" "$as_me:${as_lineno-$LINENO}: checking whether $file is the header sought" >&5
+printf %s "checking whether $file is the header sought... " >&6; }
+      echo "configure:12659:" found header file $file >&5
       CPPFLAGS="$CPPFLAGS_SAVE $CXX_OPTIONS"
-      cat >conftest.$ac_ext <<_ACEOF
-/* confdefs.h.  */
-_ACEOF
-cat confdefs.h >>conftest.$ac_ext
-cat >>conftest.$ac_ext <<_ACEOF
+      cat confdefs.h - <<_ACEOF >conftest.$ac_ext
 /* end confdefs.h.  */
 
 /* macro BTNG_FIND_CORRECT_HEADER_FILENAME checking for $file */
@@ -13665,7 +12682,7 @@ using namespace std;
 
 #endif
 int
-main ()
+main (void)
 {
 ostream &co=cout; // test ostream declaration
    istream &ci=cin; // test istream declaration
@@ -13675,36 +12692,17 @@ ostream &co=cout; // test ostream declaration
   return 0;
 }
 _ACEOF
-rm -f conftest.$ac_objext
-if { (ac_try="$ac_compile"
-case "(($ac_try" in
-  *\"* | *\`* | *\\*) ac_try_echo=\$ac_try;;
-  *) ac_try_echo=$ac_try;;
-esac
-eval "echo \"\$as_me:$LINENO: $ac_try_echo\"") >&5
-  (eval "$ac_compile") 2>conftest.er1
-  ac_status=$?
-  grep -v '^ *+' conftest.er1 >conftest.err
-  rm -f conftest.er1
-  cat conftest.err >&5
-  echo "$as_me:$LINENO: \$? = $ac_status" >&5
-  (exit $ac_status); } && {
-	 test -z "$ac_cxx_werror_flag" ||
-	 test ! -s conftest.err
-       } && test -s conftest.$ac_objext; then
-  { echo "$as_me:$LINENO: result: yes" >&5
-echo "${ECHO_T}yes" >&6; }
+if ac_fn_cxx_try_compile "$LINENO"
+then :
+  { printf "%s\n" "$as_me:${as_lineno-$LINENO}: result: yes" >&5
+printf "%s\n" "yes" >&6; }
         btng_cv_iostream_header_filename="$file"
-else
-  echo "$as_me: failed program was:" >&5
-sed 's/^/| /' conftest.$ac_ext >&5
-
-	{ echo "$as_me:$LINENO: result: no" >&5
-echo "${ECHO_T}no" >&6; }
+else $as_nop
+  { printf "%s\n" "$as_me:${as_lineno-$LINENO}: result: no" >&5
+printf "%s\n" "no" >&6; }
 
 fi
-
-rm -f core conftest.err conftest.$ac_objext conftest.$ac_ext
+rm -f core conftest.err conftest.$ac_objext conftest.beam conftest.$ac_ext
     fi
     if test -n "${btng_cv_iostream_header_filename}"; then break; fi
   done
@@ -13726,30 +12724,26 @@ fi
 IOSTREAM_HEADER_FILE="$btng_cv_iostream_header_filename"
 if test -z "$IOSTREAM_HEADER_FILE"; then
   iostream_header_is_broken=1
-  { echo "$as_me:$LINENO: WARNING: cannot find a working iostream header file.
+  { printf "%s\n" "$as_me:${as_lineno-$LINENO}: WARNING: cannot find a working iostream header file.
       Names tried: iostream iostream.h iostream.hxx
       If you know the correct hame of this header file,
       use the option --with-iostream-header-file=FILENAME
       with configure." >&5
-echo "$as_me: WARNING: cannot find a working iostream header file.
+printf "%s\n" "$as_me: WARNING: cannot find a working iostream header file.
       Names tried: iostream iostream.h iostream.hxx
       If you know the correct hame of this header file,
       use the option --with-iostream-header-file=FILENAME
       with configure." >&2;}
 
-cat >>confdefs.h <<\_ACEOF
-#define IOSTREAM_IS_BROKEN 1
-_ACEOF
+printf "%s\n" "#define IOSTREAM_IS_BROKEN 1" >>confdefs.h
 
-  echo "configure:13744:" header file iostream is broken >&5
+  echo "configure:12740:" header file iostream is broken >&5
 else
   unset iostream_header_is_broken
 
-cat >>confdefs.h <<_ACEOF
-#define IOSTREAM_HEADER_FILE <$IOSTREAM_HEADER_FILE>
-_ACEOF
+printf "%s\n" "#define IOSTREAM_HEADER_FILE <$IOSTREAM_HEADER_FILE>" >>confdefs.h
 
-  echo "configure:13752:" header file iostream is ok >&5
+  echo "configure:12746:" header file iostream is ok >&5
 fi
 # End macro BTNG_TREAT_VARIABLE_HEADER_FILENAME
 
@@ -13760,15 +12754,17 @@ fi
 
 
 # Start macro BTNG_TREAT_VARIABLE_HEADER_FILENAME
-if test "${btng_cv_iomanip_header_filename+set}" = set; then
-  echo $ECHO_N "(cached) $ECHO_C" >&6
-else
+if test ${btng_cv_iomanip_header_filename+y}
+then :
+  printf %s "(cached) " >&6
+else $as_nop
 
 
 # Check whether --with-iomanip-header-file was given.
-if test "${with_iomanip_header_file+set}" = set; then
+if test ${with_iomanip_header_file+y}
+then :
   withval=$with_iomanip_header_file; btng_cv_iomanip_header_filename=$with_iomanip_header_file
-else
+else $as_nop
 
 # Start macro BTNG_FIND_CORRECT_HEADER_FILENAME
 
@@ -13783,151 +12779,21 @@ ac_compiler_gnu=$ac_cv_cxx_compiler_gnu
 
   CPPFLAGS_SAVE=$CPPFLAGS
   for file in iomanip iomanip.h iomanip.hxx; do
-    as_ac_Header=`echo "ac_cv_header_$file" | $as_tr_sh`
-if { as_var=$as_ac_Header; eval "test \"\${$as_var+set}\" = set"; }; then
-  { echo "$as_me:$LINENO: checking for $file" >&5
-echo $ECHO_N "checking for $file... $ECHO_C" >&6; }
-if { as_var=$as_ac_Header; eval "test \"\${$as_var+set}\" = set"; }; then
-  echo $ECHO_N "(cached) $ECHO_C" >&6
-fi
-ac_res=`eval echo '${'$as_ac_Header'}'`
-	       { echo "$as_me:$LINENO: result: $ac_res" >&5
-echo "${ECHO_T}$ac_res" >&6; }
-else
-  # Is the header compilable?
-{ echo "$as_me:$LINENO: checking $file usability" >&5
-echo $ECHO_N "checking $file usability... $ECHO_C" >&6; }
-cat >conftest.$ac_ext <<_ACEOF
-/* confdefs.h.  */
-_ACEOF
-cat confdefs.h >>conftest.$ac_ext
-cat >>conftest.$ac_ext <<_ACEOF
-/* end confdefs.h.  */
-$ac_includes_default
-#include <$file>
-_ACEOF
-rm -f conftest.$ac_objext
-if { (ac_try="$ac_compile"
-case "(($ac_try" in
-  *\"* | *\`* | *\\*) ac_try_echo=\$ac_try;;
-  *) ac_try_echo=$ac_try;;
-esac
-eval "echo \"\$as_me:$LINENO: $ac_try_echo\"") >&5
-  (eval "$ac_compile") 2>conftest.er1
-  ac_status=$?
-  grep -v '^ *+' conftest.er1 >conftest.err
-  rm -f conftest.er1
-  cat conftest.err >&5
-  echo "$as_me:$LINENO: \$? = $ac_status" >&5
-  (exit $ac_status); } && {
-	 test -z "$ac_cxx_werror_flag" ||
-	 test ! -s conftest.err
-       } && test -s conftest.$ac_objext; then
-  ac_header_compiler=yes
-else
-  echo "$as_me: failed program was:" >&5
-sed 's/^/| /' conftest.$ac_ext >&5
-
-	ac_header_compiler=no
-fi
-
-rm -f core conftest.err conftest.$ac_objext conftest.$ac_ext
-{ echo "$as_me:$LINENO: result: $ac_header_compiler" >&5
-echo "${ECHO_T}$ac_header_compiler" >&6; }
-
-# Is the header present?
-{ echo "$as_me:$LINENO: checking $file presence" >&5
-echo $ECHO_N "checking $file presence... $ECHO_C" >&6; }
-cat >conftest.$ac_ext <<_ACEOF
-/* confdefs.h.  */
-_ACEOF
-cat confdefs.h >>conftest.$ac_ext
-cat >>conftest.$ac_ext <<_ACEOF
-/* end confdefs.h.  */
-#include <$file>
-_ACEOF
-if { (ac_try="$ac_cpp conftest.$ac_ext"
-case "(($ac_try" in
-  *\"* | *\`* | *\\*) ac_try_echo=\$ac_try;;
-  *) ac_try_echo=$ac_try;;
-esac
-eval "echo \"\$as_me:$LINENO: $ac_try_echo\"") >&5
-  (eval "$ac_cpp conftest.$ac_ext") 2>conftest.er1
-  ac_status=$?
-  grep -v '^ *+' conftest.er1 >conftest.err
-  rm -f conftest.er1
-  cat conftest.err >&5
-  echo "$as_me:$LINENO: \$? = $ac_status" >&5
-  (exit $ac_status); } >/dev/null && {
-	 test -z "$ac_cxx_preproc_warn_flag$ac_cxx_werror_flag" ||
-	 test ! -s conftest.err
-       }; then
-  ac_header_preproc=yes
-else
-  echo "$as_me: failed program was:" >&5
-sed 's/^/| /' conftest.$ac_ext >&5
-
-  ac_header_preproc=no
-fi
-
-rm -f conftest.err conftest.$ac_ext
-{ echo "$as_me:$LINENO: result: $ac_header_preproc" >&5
-echo "${ECHO_T}$ac_header_preproc" >&6; }
-
-# So?  What about this header?
-case $ac_header_compiler:$ac_header_preproc:$ac_cxx_preproc_warn_flag in
-  yes:no: )
-    { echo "$as_me:$LINENO: WARNING: $file: accepted by the compiler, rejected by the preprocessor!" >&5
-echo "$as_me: WARNING: $file: accepted by the compiler, rejected by the preprocessor!" >&2;}
-    { echo "$as_me:$LINENO: WARNING: $file: proceeding with the compiler's result" >&5
-echo "$as_me: WARNING: $file: proceeding with the compiler's result" >&2;}
-    ac_header_preproc=yes
-    ;;
-  no:yes:* )
-    { echo "$as_me:$LINENO: WARNING: $file: present but cannot be compiled" >&5
-echo "$as_me: WARNING: $file: present but cannot be compiled" >&2;}
-    { echo "$as_me:$LINENO: WARNING: $file:     check for missing prerequisite headers?" >&5
-echo "$as_me: WARNING: $file:     check for missing prerequisite headers?" >&2;}
-    { echo "$as_me:$LINENO: WARNING: $file: see the Autoconf documentation" >&5
-echo "$as_me: WARNING: $file: see the Autoconf documentation" >&2;}
-    { echo "$as_me:$LINENO: WARNING: $file:     section \"Present But Cannot Be Compiled\"" >&5
-echo "$as_me: WARNING: $file:     section \"Present But Cannot Be Compiled\"" >&2;}
-    { echo "$as_me:$LINENO: WARNING: $file: proceeding with the preprocessor's result" >&5
-echo "$as_me: WARNING: $file: proceeding with the preprocessor's result" >&2;}
-    { echo "$as_me:$LINENO: WARNING: $file: in the future, the compiler will take precedence" >&5
-echo "$as_me: WARNING: $file: in the future, the compiler will take precedence" >&2;}
-
-    ;;
-esac
-{ echo "$as_me:$LINENO: checking for $file" >&5
-echo $ECHO_N "checking for $file... $ECHO_C" >&6; }
-if { as_var=$as_ac_Header; eval "test \"\${$as_var+set}\" = set"; }; then
-  echo $ECHO_N "(cached) $ECHO_C" >&6
-else
-  eval "$as_ac_Header=\$ac_header_preproc"
-fi
-ac_res=`eval echo '${'$as_ac_Header'}'`
-	       { echo "$as_me:$LINENO: result: $ac_res" >&5
-echo "${ECHO_T}$ac_res" >&6; }
-
-fi
-if test `eval echo '${'$as_ac_Header'}'` = yes; then
+    as_ac_Header=`printf "%s\n" "ac_cv_header_$file" | $as_tr_sh`
+ac_fn_cxx_check_header_compile "$LINENO" "$file" "$as_ac_Header" "$ac_includes_default"
+if eval test \"x\$"$as_ac_Header"\" = x"yes"
+then :
   btng_header_found=1
-else
+else $as_nop
   unset btng_header_found
 fi
 
-
     if test -n "$btng_header_found"; then
-      { echo "$as_me:$LINENO: checking whether $file is the header sought" >&5
-echo $ECHO_N "checking whether $file is the header sought... $ECHO_C" >&6; }
-      echo "configure:13924:" found header file $file >&5
+      { printf "%s\n" "$as_me:${as_lineno-$LINENO}: checking whether $file is the header sought" >&5
+printf %s "checking whether $file is the header sought... " >&6; }
+      echo "configure:12794:" found header file $file >&5
       CPPFLAGS="$CPPFLAGS_SAVE $CXX_OPTIONS"
-      cat >conftest.$ac_ext <<_ACEOF
-/* confdefs.h.  */
-_ACEOF
-cat confdefs.h >>conftest.$ac_ext
-cat >>conftest.$ac_ext <<_ACEOF
+      cat confdefs.h - <<_ACEOF >conftest.$ac_ext
 /* end confdefs.h.  */
 
 /* macro BTNG_FIND_CORRECT_HEADER_FILENAME checking for $file */
@@ -13951,43 +12817,24 @@ using namespace std;
 
 #endif
 int
-main ()
+main (void)
 {
 cout<<setw(13)<<endl;
   ;
   return 0;
 }
 _ACEOF
-rm -f conftest.$ac_objext
-if { (ac_try="$ac_compile"
-case "(($ac_try" in
-  *\"* | *\`* | *\\*) ac_try_echo=\$ac_try;;
-  *) ac_try_echo=$ac_try;;
-esac
-eval "echo \"\$as_me:$LINENO: $ac_try_echo\"") >&5
-  (eval "$ac_compile") 2>conftest.er1
-  ac_status=$?
-  grep -v '^ *+' conftest.er1 >conftest.err
-  rm -f conftest.er1
-  cat conftest.err >&5
-  echo "$as_me:$LINENO: \$? = $ac_status" >&5
-  (exit $ac_status); } && {
-	 test -z "$ac_cxx_werror_flag" ||
-	 test ! -s conftest.err
-       } && test -s conftest.$ac_objext; then
-  { echo "$as_me:$LINENO: result: yes" >&5
-echo "${ECHO_T}yes" >&6; }
+if ac_fn_cxx_try_compile "$LINENO"
+then :
+  { printf "%s\n" "$as_me:${as_lineno-$LINENO}: result: yes" >&5
+printf "%s\n" "yes" >&6; }
         btng_cv_iomanip_header_filename="$file"
-else
-  echo "$as_me: failed program was:" >&5
-sed 's/^/| /' conftest.$ac_ext >&5
-
-	{ echo "$as_me:$LINENO: result: no" >&5
-echo "${ECHO_T}no" >&6; }
+else $as_nop
+  { printf "%s\n" "$as_me:${as_lineno-$LINENO}: result: no" >&5
+printf "%s\n" "no" >&6; }
 
 fi
-
-rm -f core conftest.err conftest.$ac_objext conftest.$ac_ext
+rm -f core conftest.err conftest.$ac_objext conftest.beam conftest.$ac_ext
     fi
     if test -n "${btng_cv_iomanip_header_filename}"; then break; fi
   done
@@ -14009,30 +12856,26 @@ fi
 IOMANIP_HEADER_FILE="$btng_cv_iomanip_header_filename"
 if test -z "$IOMANIP_HEADER_FILE"; then
   iomanip_header_is_broken=1
-  { echo "$as_me:$LINENO: WARNING: cannot find a working iomanip header file.
+  { printf "%s\n" "$as_me:${as_lineno-$LINENO}: WARNING: cannot find a working iomanip header file.
       Names tried: iomanip iomanip.h iomanip.hxx
       If you know the correct hame of this header file,
       use the option --with-iomanip-header-file=FILENAME
       with configure." >&5
-echo "$as_me: WARNING: cannot find a working iomanip header file.
+printf "%s\n" "$as_me: WARNING: cannot find a working iomanip header file.
       Names tried: iomanip iomanip.h iomanip.hxx
       If you know the correct hame of this header file,
       use the option --with-iomanip-header-file=FILENAME
       with configure." >&2;}
 
-cat >>confdefs.h <<\_ACEOF
-#define IOMANIP_IS_BROKEN 1
-_ACEOF
+printf "%s\n" "#define IOMANIP_IS_BROKEN 1" >>confdefs.h
 
-  echo "configure:14027:" header file iomanip is broken >&5
+  echo "configure:12872:" header file iomanip is broken >&5
 else
   unset iomanip_header_is_broken
 
-cat >>confdefs.h <<_ACEOF
-#define IOMANIP_HEADER_FILE <$IOMANIP_HEADER_FILE>
-_ACEOF
+printf "%s\n" "#define IOMANIP_HEADER_FILE <$IOMANIP_HEADER_FILE>" >>confdefs.h
 
-  echo "configure:14035:" header file iomanip is ok >&5
+  echo "configure:12878:" header file iomanip is ok >&5
 fi
 # End macro BTNG_TREAT_VARIABLE_HEADER_FILENAME
 
@@ -14043,15 +12886,17 @@ fi
 # Start macro BTNG_IOSTREAM_HEADER_FILENAME
 
 # Start macro BTNG_TREAT_VARIABLE_HEADER_FILENAME
-if test "${btng_cv_iostream_header_filename+set}" = set; then
-  echo $ECHO_N "(cached) $ECHO_C" >&6
-else
+if test ${btng_cv_iostream_header_filename+y}
+then :
+  printf %s "(cached) " >&6
+else $as_nop
 
 
 # Check whether --with-iostream-header-file was given.
-if test "${with_iostream_header_file+set}" = set; then
+if test ${with_iostream_header_file+y}
+then :
   withval=$with_iostream_header_file; btng_cv_iostream_header_filename=$with_iostream_header_file
-else
+else $as_nop
 
 # Start macro BTNG_FIND_CORRECT_HEADER_FILENAME
 
@@ -14066,151 +12911,21 @@ ac_compiler_gnu=$ac_cv_cxx_compiler_gnu
 
   CPPFLAGS_SAVE=$CPPFLAGS
   for file in iostream iostream.h iostream.hxx; do
-    as_ac_Header=`echo "ac_cv_header_$file" | $as_tr_sh`
-if { as_var=$as_ac_Header; eval "test \"\${$as_var+set}\" = set"; }; then
-  { echo "$as_me:$LINENO: checking for $file" >&5
-echo $ECHO_N "checking for $file... $ECHO_C" >&6; }
-if { as_var=$as_ac_Header; eval "test \"\${$as_var+set}\" = set"; }; then
-  echo $ECHO_N "(cached) $ECHO_C" >&6
-fi
-ac_res=`eval echo '${'$as_ac_Header'}'`
-	       { echo "$as_me:$LINENO: result: $ac_res" >&5
-echo "${ECHO_T}$ac_res" >&6; }
-else
-  # Is the header compilable?
-{ echo "$as_me:$LINENO: checking $file usability" >&5
-echo $ECHO_N "checking $file usability... $ECHO_C" >&6; }
-cat >conftest.$ac_ext <<_ACEOF
-/* confdefs.h.  */
-_ACEOF
-cat confdefs.h >>conftest.$ac_ext
-cat >>conftest.$ac_ext <<_ACEOF
-/* end confdefs.h.  */
-$ac_includes_default
-#include <$file>
-_ACEOF
-rm -f conftest.$ac_objext
-if { (ac_try="$ac_compile"
-case "(($ac_try" in
-  *\"* | *\`* | *\\*) ac_try_echo=\$ac_try;;
-  *) ac_try_echo=$ac_try;;
-esac
-eval "echo \"\$as_me:$LINENO: $ac_try_echo\"") >&5
-  (eval "$ac_compile") 2>conftest.er1
-  ac_status=$?
-  grep -v '^ *+' conftest.er1 >conftest.err
-  rm -f conftest.er1
-  cat conftest.err >&5
-  echo "$as_me:$LINENO: \$? = $ac_status" >&5
-  (exit $ac_status); } && {
-	 test -z "$ac_cxx_werror_flag" ||
-	 test ! -s conftest.err
-       } && test -s conftest.$ac_objext; then
-  ac_header_compiler=yes
-else
-  echo "$as_me: failed program was:" >&5
-sed 's/^/| /' conftest.$ac_ext >&5
-
-	ac_header_compiler=no
-fi
-
-rm -f core conftest.err conftest.$ac_objext conftest.$ac_ext
-{ echo "$as_me:$LINENO: result: $ac_header_compiler" >&5
-echo "${ECHO_T}$ac_header_compiler" >&6; }
-
-# Is the header present?
-{ echo "$as_me:$LINENO: checking $file presence" >&5
-echo $ECHO_N "checking $file presence... $ECHO_C" >&6; }
-cat >conftest.$ac_ext <<_ACEOF
-/* confdefs.h.  */
-_ACEOF
-cat confdefs.h >>conftest.$ac_ext
-cat >>conftest.$ac_ext <<_ACEOF
-/* end confdefs.h.  */
-#include <$file>
-_ACEOF
-if { (ac_try="$ac_cpp conftest.$ac_ext"
-case "(($ac_try" in
-  *\"* | *\`* | *\\*) ac_try_echo=\$ac_try;;
-  *) ac_try_echo=$ac_try;;
-esac
-eval "echo \"\$as_me:$LINENO: $ac_try_echo\"") >&5
-  (eval "$ac_cpp conftest.$ac_ext") 2>conftest.er1
-  ac_status=$?
-  grep -v '^ *+' conftest.er1 >conftest.err
-  rm -f conftest.er1
-  cat conftest.err >&5
-  echo "$as_me:$LINENO: \$? = $ac_status" >&5
-  (exit $ac_status); } >/dev/null && {
-	 test -z "$ac_cxx_preproc_warn_flag$ac_cxx_werror_flag" ||
-	 test ! -s conftest.err
-       }; then
-  ac_header_preproc=yes
-else
-  echo "$as_me: failed program was:" >&5
-sed 's/^/| /' conftest.$ac_ext >&5
-
-  ac_header_preproc=no
-fi
-
-rm -f conftest.err conftest.$ac_ext
-{ echo "$as_me:$LINENO: result: $ac_header_preproc" >&5
-echo "${ECHO_T}$ac_header_preproc" >&6; }
-
-# So?  What about this header?
-case $ac_header_compiler:$ac_header_preproc:$ac_cxx_preproc_warn_flag in
-  yes:no: )
-    { echo "$as_me:$LINENO: WARNING: $file: accepted by the compiler, rejected by the preprocessor!" >&5
-echo "$as_me: WARNING: $file: accepted by the compiler, rejected by the preprocessor!" >&2;}
-    { echo "$as_me:$LINENO: WARNING: $file: proceeding with the compiler's result" >&5
-echo "$as_me: WARNING: $file: proceeding with the compiler's result" >&2;}
-    ac_header_preproc=yes
-    ;;
-  no:yes:* )
-    { echo "$as_me:$LINENO: WARNING: $file: present but cannot be compiled" >&5
-echo "$as_me: WARNING: $file: present but cannot be compiled" >&2;}
-    { echo "$as_me:$LINENO: WARNING: $file:     check for missing prerequisite headers?" >&5
-echo "$as_me: WARNING: $file:     check for missing prerequisite headers?" >&2;}
-    { echo "$as_me:$LINENO: WARNING: $file: see the Autoconf documentation" >&5
-echo "$as_me: WARNING: $file: see the Autoconf documentation" >&2;}
-    { echo "$as_me:$LINENO: WARNING: $file:     section \"Present But Cannot Be Compiled\"" >&5
-echo "$as_me: WARNING: $file:     section \"Present But Cannot Be Compiled\"" >&2;}
-    { echo "$as_me:$LINENO: WARNING: $file: proceeding with the preprocessor's result" >&5
-echo "$as_me: WARNING: $file: proceeding with the preprocessor's result" >&2;}
-    { echo "$as_me:$LINENO: WARNING: $file: in the future, the compiler will take precedence" >&5
-echo "$as_me: WARNING: $file: in the future, the compiler will take precedence" >&2;}
-
-    ;;
-esac
-{ echo "$as_me:$LINENO: checking for $file" >&5
-echo $ECHO_N "checking for $file... $ECHO_C" >&6; }
-if { as_var=$as_ac_Header; eval "test \"\${$as_var+set}\" = set"; }; then
-  echo $ECHO_N "(cached) $ECHO_C" >&6
-else
-  eval "$as_ac_Header=\$ac_header_preproc"
-fi
-ac_res=`eval echo '${'$as_ac_Header'}'`
-	       { echo "$as_me:$LINENO: result: $ac_res" >&5
-echo "${ECHO_T}$ac_res" >&6; }
-
-fi
-if test `eval echo '${'$as_ac_Header'}'` = yes; then
+    as_ac_Header=`printf "%s\n" "ac_cv_header_$file" | $as_tr_sh`
+ac_fn_cxx_check_header_compile "$LINENO" "$file" "$as_ac_Header" "$ac_includes_default"
+if eval test \"x\$"$as_ac_Header"\" = x"yes"
+then :
   btng_header_found=1
-else
+else $as_nop
   unset btng_header_found
 fi
 
-
     if test -n "$btng_header_found"; then
-      { echo "$as_me:$LINENO: checking whether $file is the header sought" >&5
-echo $ECHO_N "checking whether $file is the header sought... $ECHO_C" >&6; }
-      echo "configure:14207:" found header file $file >&5
+      { printf "%s\n" "$as_me:${as_lineno-$LINENO}: checking whether $file is the header sought" >&5
+printf %s "checking whether $file is the header sought... " >&6; }
+      echo "configure:12926:" found header file $file >&5
       CPPFLAGS="$CPPFLAGS_SAVE $CXX_OPTIONS"
-      cat >conftest.$ac_ext <<_ACEOF
-/* confdefs.h.  */
-_ACEOF
-cat confdefs.h >>conftest.$ac_ext
-cat >>conftest.$ac_ext <<_ACEOF
+      cat confdefs.h - <<_ACEOF >conftest.$ac_ext
 /* end confdefs.h.  */
 
 /* macro BTNG_FIND_CORRECT_HEADER_FILENAME checking for $file */
@@ -14234,7 +12949,7 @@ using namespace std;
 
 #endif
 int
-main ()
+main (void)
 {
 ostream &co=cout; // test ostream declaration
    istream &ci=cin; // test istream declaration
@@ -14244,36 +12959,17 @@ ostream &co=cout; // test ostream declaration
   return 0;
 }
 _ACEOF
-rm -f conftest.$ac_objext
-if { (ac_try="$ac_compile"
-case "(($ac_try" in
-  *\"* | *\`* | *\\*) ac_try_echo=\$ac_try;;
-  *) ac_try_echo=$ac_try;;
-esac
-eval "echo \"\$as_me:$LINENO: $ac_try_echo\"") >&5
-  (eval "$ac_compile") 2>conftest.er1
-  ac_status=$?
-  grep -v '^ *+' conftest.er1 >conftest.err
-  rm -f conftest.er1
-  cat conftest.err >&5
-  echo "$as_me:$LINENO: \$? = $ac_status" >&5
-  (exit $ac_status); } && {
-	 test -z "$ac_cxx_werror_flag" ||
-	 test ! -s conftest.err
-       } && test -s conftest.$ac_objext; then
-  { echo "$as_me:$LINENO: result: yes" >&5
-echo "${ECHO_T}yes" >&6; }
+if ac_fn_cxx_try_compile "$LINENO"
+then :
+  { printf "%s\n" "$as_me:${as_lineno-$LINENO}: result: yes" >&5
+printf "%s\n" "yes" >&6; }
         btng_cv_iostream_header_filename="$file"
-else
-  echo "$as_me: failed program was:" >&5
-sed 's/^/| /' conftest.$ac_ext >&5
-
-	{ echo "$as_me:$LINENO: result: no" >&5
-echo "${ECHO_T}no" >&6; }
+else $as_nop
+  { printf "%s\n" "$as_me:${as_lineno-$LINENO}: result: no" >&5
+printf "%s\n" "no" >&6; }
 
 fi
-
-rm -f core conftest.err conftest.$ac_objext conftest.$ac_ext
+rm -f core conftest.err conftest.$ac_objext conftest.beam conftest.$ac_ext
     fi
     if test -n "${btng_cv_iostream_header_filename}"; then break; fi
   done
@@ -14295,30 +12991,26 @@ fi
 IOSTREAM_HEADER_FILE="$btng_cv_iostream_header_filename"
 if test -z "$IOSTREAM_HEADER_FILE"; then
   iostream_header_is_broken=1
-  { echo "$as_me:$LINENO: WARNING: cannot find a working iostream header file.
+  { printf "%s\n" "$as_me:${as_lineno-$LINENO}: WARNING: cannot find a working iostream header file.
       Names tried: iostream iostream.h iostream.hxx
       If you know the correct hame of this header file,
       use the option --with-iostream-header-file=FILENAME
       with configure." >&5
-echo "$as_me: WARNING: cannot find a working iostream header file.
+printf "%s\n" "$as_me: WARNING: cannot find a working iostream header file.
       Names tried: iostream iostream.h iostream.hxx
       If you know the correct hame of this header file,
       use the option --with-iostream-header-file=FILENAME
       with configure." >&2;}
 
-cat >>confdefs.h <<\_ACEOF
-#define IOSTREAM_IS_BROKEN 1
-_ACEOF
+printf "%s\n" "#define IOSTREAM_IS_BROKEN 1" >>confdefs.h
 
-  echo "configure:14313:" header file iostream is broken >&5
+  echo "configure:13007:" header file iostream is broken >&5
 else
   unset iostream_header_is_broken
 
-cat >>confdefs.h <<_ACEOF
-#define IOSTREAM_HEADER_FILE <$IOSTREAM_HEADER_FILE>
-_ACEOF
+printf "%s\n" "#define IOSTREAM_HEADER_FILE <$IOSTREAM_HEADER_FILE>" >>confdefs.h
 
-  echo "configure:14321:" header file iostream is ok >&5
+  echo "configure:13013:" header file iostream is ok >&5
 fi
 # End macro BTNG_TREAT_VARIABLE_HEADER_FILENAME
 
@@ -14334,15 +13026,17 @@ test "$CXX_ID" = "gnu" && echo "$CXX_VERSION" | grep '^2.95.2' > /dev/null && \
 btng_stl_sstream_test_body='/* Old syntax */ char i[10]; istrstream ist(i);'
 
 # Start macro BTNG_TREAT_VARIABLE_HEADER_FILENAME
-if test "${btng_cv_stl_sstream_header_filename+set}" = set; then
-  echo $ECHO_N "(cached) $ECHO_C" >&6
-else
+if test ${btng_cv_stl_sstream_header_filename+y}
+then :
+  printf %s "(cached) " >&6
+else $as_nop
 
 
 # Check whether --with-stl-sstream-header-file was given.
-if test "${with_stl_sstream_header_file+set}" = set; then
+if test ${with_stl_sstream_header_file+y}
+then :
   withval=$with_stl_sstream_header_file; btng_cv_stl_sstream_header_filename=$with_stl_sstream_header_file
-else
+else $as_nop
 
 # Start macro BTNG_FIND_CORRECT_HEADER_FILENAME
 
@@ -14357,151 +13051,21 @@ ac_compiler_gnu=$ac_cv_cxx_compiler_gnu
 
   CPPFLAGS_SAVE=$CPPFLAGS
   for file in sstream stringstream strstream sstream.h stringstream.h strstream.h sstream.hxx stringstream.hxx strstream.hxx ; do
-    as_ac_Header=`echo "ac_cv_header_$file" | $as_tr_sh`
-if { as_var=$as_ac_Header; eval "test \"\${$as_var+set}\" = set"; }; then
-  { echo "$as_me:$LINENO: checking for $file" >&5
-echo $ECHO_N "checking for $file... $ECHO_C" >&6; }
-if { as_var=$as_ac_Header; eval "test \"\${$as_var+set}\" = set"; }; then
-  echo $ECHO_N "(cached) $ECHO_C" >&6
-fi
-ac_res=`eval echo '${'$as_ac_Header'}'`
-	       { echo "$as_me:$LINENO: result: $ac_res" >&5
-echo "${ECHO_T}$ac_res" >&6; }
-else
-  # Is the header compilable?
-{ echo "$as_me:$LINENO: checking $file usability" >&5
-echo $ECHO_N "checking $file usability... $ECHO_C" >&6; }
-cat >conftest.$ac_ext <<_ACEOF
-/* confdefs.h.  */
-_ACEOF
-cat confdefs.h >>conftest.$ac_ext
-cat >>conftest.$ac_ext <<_ACEOF
-/* end confdefs.h.  */
-$ac_includes_default
-#include <$file>
-_ACEOF
-rm -f conftest.$ac_objext
-if { (ac_try="$ac_compile"
-case "(($ac_try" in
-  *\"* | *\`* | *\\*) ac_try_echo=\$ac_try;;
-  *) ac_try_echo=$ac_try;;
-esac
-eval "echo \"\$as_me:$LINENO: $ac_try_echo\"") >&5
-  (eval "$ac_compile") 2>conftest.er1
-  ac_status=$?
-  grep -v '^ *+' conftest.er1 >conftest.err
-  rm -f conftest.er1
-  cat conftest.err >&5
-  echo "$as_me:$LINENO: \$? = $ac_status" >&5
-  (exit $ac_status); } && {
-	 test -z "$ac_cxx_werror_flag" ||
-	 test ! -s conftest.err
-       } && test -s conftest.$ac_objext; then
-  ac_header_compiler=yes
-else
-  echo "$as_me: failed program was:" >&5
-sed 's/^/| /' conftest.$ac_ext >&5
-
-	ac_header_compiler=no
-fi
-
-rm -f core conftest.err conftest.$ac_objext conftest.$ac_ext
-{ echo "$as_me:$LINENO: result: $ac_header_compiler" >&5
-echo "${ECHO_T}$ac_header_compiler" >&6; }
-
-# Is the header present?
-{ echo "$as_me:$LINENO: checking $file presence" >&5
-echo $ECHO_N "checking $file presence... $ECHO_C" >&6; }
-cat >conftest.$ac_ext <<_ACEOF
-/* confdefs.h.  */
-_ACEOF
-cat confdefs.h >>conftest.$ac_ext
-cat >>conftest.$ac_ext <<_ACEOF
-/* end confdefs.h.  */
-#include <$file>
-_ACEOF
-if { (ac_try="$ac_cpp conftest.$ac_ext"
-case "(($ac_try" in
-  *\"* | *\`* | *\\*) ac_try_echo=\$ac_try;;
-  *) ac_try_echo=$ac_try;;
-esac
-eval "echo \"\$as_me:$LINENO: $ac_try_echo\"") >&5
-  (eval "$ac_cpp conftest.$ac_ext") 2>conftest.er1
-  ac_status=$?
-  grep -v '^ *+' conftest.er1 >conftest.err
-  rm -f conftest.er1
-  cat conftest.err >&5
-  echo "$as_me:$LINENO: \$? = $ac_status" >&5
-  (exit $ac_status); } >/dev/null && {
-	 test -z "$ac_cxx_preproc_warn_flag$ac_cxx_werror_flag" ||
-	 test ! -s conftest.err
-       }; then
-  ac_header_preproc=yes
-else
-  echo "$as_me: failed program was:" >&5
-sed 's/^/| /' conftest.$ac_ext >&5
-
-  ac_header_preproc=no
-fi
-
-rm -f conftest.err conftest.$ac_ext
-{ echo "$as_me:$LINENO: result: $ac_header_preproc" >&5
-echo "${ECHO_T}$ac_header_preproc" >&6; }
-
-# So?  What about this header?
-case $ac_header_compiler:$ac_header_preproc:$ac_cxx_preproc_warn_flag in
-  yes:no: )
-    { echo "$as_me:$LINENO: WARNING: $file: accepted by the compiler, rejected by the preprocessor!" >&5
-echo "$as_me: WARNING: $file: accepted by the compiler, rejected by the preprocessor!" >&2;}
-    { echo "$as_me:$LINENO: WARNING: $file: proceeding with the compiler's result" >&5
-echo "$as_me: WARNING: $file: proceeding with the compiler's result" >&2;}
-    ac_header_preproc=yes
-    ;;
-  no:yes:* )
-    { echo "$as_me:$LINENO: WARNING: $file: present but cannot be compiled" >&5
-echo "$as_me: WARNING: $file: present but cannot be compiled" >&2;}
-    { echo "$as_me:$LINENO: WARNING: $file:     check for missing prerequisite headers?" >&5
-echo "$as_me: WARNING: $file:     check for missing prerequisite headers?" >&2;}
-    { echo "$as_me:$LINENO: WARNING: $file: see the Autoconf documentation" >&5
-echo "$as_me: WARNING: $file: see the Autoconf documentation" >&2;}
-    { echo "$as_me:$LINENO: WARNING: $file:     section \"Present But Cannot Be Compiled\"" >&5
-echo "$as_me: WARNING: $file:     section \"Present But Cannot Be Compiled\"" >&2;}
-    { echo "$as_me:$LINENO: WARNING: $file: proceeding with the preprocessor's result" >&5
-echo "$as_me: WARNING: $file: proceeding with the preprocessor's result" >&2;}
-    { echo "$as_me:$LINENO: WARNING: $file: in the future, the compiler will take precedence" >&5
-echo "$as_me: WARNING: $file: in the future, the compiler will take precedence" >&2;}
-
-    ;;
-esac
-{ echo "$as_me:$LINENO: checking for $file" >&5
-echo $ECHO_N "checking for $file... $ECHO_C" >&6; }
-if { as_var=$as_ac_Header; eval "test \"\${$as_var+set}\" = set"; }; then
-  echo $ECHO_N "(cached) $ECHO_C" >&6
-else
-  eval "$as_ac_Header=\$ac_header_preproc"
-fi
-ac_res=`eval echo '${'$as_ac_Header'}'`
-	       { echo "$as_me:$LINENO: result: $ac_res" >&5
-echo "${ECHO_T}$ac_res" >&6; }
-
-fi
-if test `eval echo '${'$as_ac_Header'}'` = yes; then
+    as_ac_Header=`printf "%s\n" "ac_cv_header_$file" | $as_tr_sh`
+ac_fn_cxx_check_header_compile "$LINENO" "$file" "$as_ac_Header" "$ac_includes_default"
+if eval test \"x\$"$as_ac_Header"\" = x"yes"
+then :
   btng_header_found=1
-else
+else $as_nop
   unset btng_header_found
 fi
 
-
     if test -n "$btng_header_found"; then
-      { echo "$as_me:$LINENO: checking whether $file is the header sought" >&5
-echo $ECHO_N "checking whether $file is the header sought... $ECHO_C" >&6; }
-      echo "configure:14498:" found header file $file >&5
+      { printf "%s\n" "$as_me:${as_lineno-$LINENO}: checking whether $file is the header sought" >&5
+printf %s "checking whether $file is the header sought... " >&6; }
+      echo "configure:13066:" found header file $file >&5
       CPPFLAGS="$CPPFLAGS_SAVE $CXX_OPTIONS"
-      cat >conftest.$ac_ext <<_ACEOF
-/* confdefs.h.  */
-_ACEOF
-cat confdefs.h >>conftest.$ac_ext
-cat >>conftest.$ac_ext <<_ACEOF
+      cat confdefs.h - <<_ACEOF >conftest.$ac_ext
 /* end confdefs.h.  */
 
 /* macro BTNG_FIND_CORRECT_HEADER_FILENAME checking for $file */
@@ -14525,43 +13089,24 @@ using namespace std;
 
 #endif
 int
-main ()
+main (void)
 {
 $btng_stl_sstream_test_body
   ;
   return 0;
 }
 _ACEOF
-rm -f conftest.$ac_objext
-if { (ac_try="$ac_compile"
-case "(($ac_try" in
-  *\"* | *\`* | *\\*) ac_try_echo=\$ac_try;;
-  *) ac_try_echo=$ac_try;;
-esac
-eval "echo \"\$as_me:$LINENO: $ac_try_echo\"") >&5
-  (eval "$ac_compile") 2>conftest.er1
-  ac_status=$?
-  grep -v '^ *+' conftest.er1 >conftest.err
-  rm -f conftest.er1
-  cat conftest.err >&5
-  echo "$as_me:$LINENO: \$? = $ac_status" >&5
-  (exit $ac_status); } && {
-	 test -z "$ac_cxx_werror_flag" ||
-	 test ! -s conftest.err
-       } && test -s conftest.$ac_objext; then
-  { echo "$as_me:$LINENO: result: yes" >&5
-echo "${ECHO_T}yes" >&6; }
+if ac_fn_cxx_try_compile "$LINENO"
+then :
+  { printf "%s\n" "$as_me:${as_lineno-$LINENO}: result: yes" >&5
+printf "%s\n" "yes" >&6; }
         btng_cv_stl_sstream_header_filename="$file"
-else
-  echo "$as_me: failed program was:" >&5
-sed 's/^/| /' conftest.$ac_ext >&5
-
-	{ echo "$as_me:$LINENO: result: no" >&5
-echo "${ECHO_T}no" >&6; }
+else $as_nop
+  { printf "%s\n" "$as_me:${as_lineno-$LINENO}: result: no" >&5
+printf "%s\n" "no" >&6; }
 
 fi
-
-rm -f core conftest.err conftest.$ac_objext conftest.$ac_ext
+rm -f core conftest.err conftest.$ac_objext conftest.beam conftest.$ac_ext
     fi
     if test -n "${btng_cv_stl_sstream_header_filename}"; then break; fi
   done
@@ -14583,30 +13128,26 @@ fi
 STL_SSTREAM_HEADER_FILE="$btng_cv_stl_sstream_header_filename"
 if test -z "$STL_SSTREAM_HEADER_FILE"; then
   stl_sstream_header_is_broken=1
-  { echo "$as_me:$LINENO: WARNING: cannot find a working stl-sstream header file.
+  { printf "%s\n" "$as_me:${as_lineno-$LINENO}: WARNING: cannot find a working stl-sstream header file.
       Names tried: sstream stringstream strstream sstream.h stringstream.h strstream.h sstream.hxx stringstream.hxx strstream.hxx
       If you know the correct hame of this header file,
       use the option --with-stl-sstream-header-file=FILENAME
       with configure." >&5
-echo "$as_me: WARNING: cannot find a working stl-sstream header file.
+printf "%s\n" "$as_me: WARNING: cannot find a working stl-sstream header file.
       Names tried: sstream stringstream strstream sstream.h stringstream.h strstream.h sstream.hxx stringstream.hxx strstream.hxx
       If you know the correct hame of this header file,
       use the option --with-stl-sstream-header-file=FILENAME
       with configure." >&2;}
 
-cat >>confdefs.h <<\_ACEOF
-#define STL_SSTREAM_IS_BROKEN 1
-_ACEOF
+printf "%s\n" "#define STL_SSTREAM_IS_BROKEN 1" >>confdefs.h
 
-  echo "configure:14601:" header file stl-sstream is broken >&5
+  echo "configure:13144:" header file stl-sstream is broken >&5
 else
   unset stl_sstream_header_is_broken
 
-cat >>confdefs.h <<_ACEOF
-#define STL_SSTREAM_HEADER_FILE <$STL_SSTREAM_HEADER_FILE>
-_ACEOF
+printf "%s\n" "#define STL_SSTREAM_HEADER_FILE <$STL_SSTREAM_HEADER_FILE>" >>confdefs.h
 
-  echo "configure:14609:" header file stl-sstream is ok >&5
+  echo "configure:13150:" header file stl-sstream is ok >&5
 fi
 # End macro BTNG_TREAT_VARIABLE_HEADER_FILENAME
 
@@ -14622,12 +13163,13 @@ ac_compiler_gnu=$ac_cv_cxx_compiler_gnu
 
 # Start macro BTNG_TYPE_NAMESPACE
 
-{ echo "$as_me:$LINENO: checking whether namespace is broken" >&5
-echo $ECHO_N "checking whether namespace is broken... $ECHO_C" >&6; }
+{ printf "%s\n" "$as_me:${as_lineno-$LINENO}: checking whether namespace is broken" >&5
+printf %s "checking whether namespace is broken... " >&6; }
 
-if test "${btng_cv_type_namespace_broken+set}" = set; then
-  echo $ECHO_N "(cached) $ECHO_C" >&6
-else
+if test ${btng_cv_type_namespace_broken+y}
+then :
+  printf %s "(cached) " >&6
+else $as_nop
 
 
       ac_ext=cpp
@@ -14636,11 +13178,7 @@ ac_compile='$CXX -c $CXXFLAGS $CPPFLAGS conftest.$ac_ext >&5'
 ac_link='$CXX -o conftest$ac_exeext $CXXFLAGS $CPPFLAGS $LDFLAGS conftest.$ac_ext $LIBS >&5'
 ac_compiler_gnu=$ac_cv_cxx_compiler_gnu
 
-  cat >conftest.$ac_ext <<_ACEOF
-/* confdefs.h.  */
-_ACEOF
-cat confdefs.h >>conftest.$ac_ext
-cat >>conftest.$ac_ext <<_ACEOF
+  cat confdefs.h - <<_ACEOF >conftest.$ac_ext
 /* end confdefs.h.  */
 namespace test{ int i; }
 
@@ -14653,43 +13191,24 @@ namespace test{ int i; }
 
 #endif
 int
-main ()
+main (void)
 {
 using namespace test;
   ;
   return 0;
 }
 _ACEOF
-rm -f conftest.$ac_objext
-if { (ac_try="$ac_compile"
-case "(($ac_try" in
-  *\"* | *\`* | *\\*) ac_try_echo=\$ac_try;;
-  *) ac_try_echo=$ac_try;;
-esac
-eval "echo \"\$as_me:$LINENO: $ac_try_echo\"") >&5
-  (eval "$ac_compile") 2>conftest.er1
-  ac_status=$?
-  grep -v '^ *+' conftest.er1 >conftest.err
-  rm -f conftest.er1
-  cat conftest.err >&5
-  echo "$as_me:$LINENO: \$? = $ac_status" >&5
-  (exit $ac_status); } && {
-	 test -z "$ac_cxx_werror_flag" ||
-	 test ! -s conftest.err
-       } && test -s conftest.$ac_objext; then
+if ac_fn_cxx_try_compile "$LINENO"
+then :
   # namespace is not broken.
     btng_cv_type_namespace_broken=no
 
-else
-  echo "$as_me: failed program was:" >&5
-sed 's/^/| /' conftest.$ac_ext >&5
-
-	# namespace is broken.
+else $as_nop
+  # namespace is broken.
     btng_cv_type_namespace_broken=yes
 
 fi
-
-rm -f core conftest.err conftest.$ac_objext conftest.$ac_ext
+rm -f core conftest.err conftest.$ac_objext conftest.beam conftest.$ac_ext
   ac_ext=cpp
 ac_cpp='$CXXCPP $CPPFLAGS'
 ac_compile='$CXX -c $CXXFLAGS $CPPFLAGS conftest.$ac_ext >&5'
@@ -14700,14 +13219,12 @@ ac_compiler_gnu=$ac_cv_cxx_compiler_gnu
 
 fi
 
-{ echo "$as_me:$LINENO: result: $btng_cv_type_namespace_broken" >&5
-echo "${ECHO_T}$btng_cv_type_namespace_broken" >&6; }
+{ printf "%s\n" "$as_me:${as_lineno-$LINENO}: result: $btng_cv_type_namespace_broken" >&5
+printf "%s\n" "$btng_cv_type_namespace_broken" >&6; }
 
 if test "$btng_cv_type_namespace_broken" = yes; then
 
-cat >>confdefs.h <<\_ACEOF
-#define NAMESPACE_IS_BROKEN 1
-_ACEOF
+printf "%s\n" "#define NAMESPACE_IS_BROKEN 1" >>confdefs.h
 
 fi
 
@@ -14715,13 +13232,9 @@ fi
 # End macro BTNG_TYPE_NAMESPACE
 
 
-{ echo "$as_me:$LINENO: checking type ostringstream" >&5
-echo $ECHO_N "checking type ostringstream... $ECHO_C" >&6; }
-cat >conftest.$ac_ext <<_ACEOF
-/* confdefs.h.  */
-_ACEOF
-cat confdefs.h >>conftest.$ac_ext
-cat >>conftest.$ac_ext <<_ACEOF
+{ printf "%s\n" "$as_me:${as_lineno-$LINENO}: checking type ostringstream" >&5
+printf %s "checking type ostringstream... " >&6; }
+cat confdefs.h - <<_ACEOF >conftest.$ac_ext
 /* end confdefs.h.  */
 #include STL_SSTREAM_HEADER_FILE
 #ifndef NAMESPACE_IS_BROKEN
@@ -14737,7 +13250,7 @@ using namespace std;
 
 #endif
 int
-main ()
+main (void)
 {
 ostringstream oss; oss << 10;
 
@@ -14745,47 +13258,22 @@ ostringstream oss; oss << 10;
   return 0;
 }
 _ACEOF
-rm -f conftest.$ac_objext
-if { (ac_try="$ac_compile"
-case "(($ac_try" in
-  *\"* | *\`* | *\\*) ac_try_echo=\$ac_try;;
-  *) ac_try_echo=$ac_try;;
-esac
-eval "echo \"\$as_me:$LINENO: $ac_try_echo\"") >&5
-  (eval "$ac_compile") 2>conftest.er1
-  ac_status=$?
-  grep -v '^ *+' conftest.er1 >conftest.err
-  rm -f conftest.er1
-  cat conftest.err >&5
-  echo "$as_me:$LINENO: \$? = $ac_status" >&5
-  (exit $ac_status); } && {
-	 test -z "$ac_cxx_werror_flag" ||
-	 test ! -s conftest.err
-       } && test -s conftest.$ac_objext; then
-  { echo "$as_me:$LINENO: result: ok" >&5
-echo "${ECHO_T}ok" >&6; }
-else
-  echo "$as_me: failed program was:" >&5
-sed 's/^/| /' conftest.$ac_ext >&5
+if ac_fn_cxx_try_compile "$LINENO"
+then :
+  { printf "%s\n" "$as_me:${as_lineno-$LINENO}: result: ok" >&5
+printf "%s\n" "ok" >&6; }
+else $as_nop
+  { printf "%s\n" "$as_me:${as_lineno-$LINENO}: result: broken" >&5
+printf "%s\n" "broken" >&6; }
 
-	{ echo "$as_me:$LINENO: result: broken" >&5
-echo "${ECHO_T}broken" >&6; }
-
-cat >>confdefs.h <<\_ACEOF
-#define OSTRINGSTREAM_TYPE_IS_BROKEN 1
-_ACEOF
+printf "%s\n" "#define OSTRINGSTREAM_TYPE_IS_BROKEN 1" >>confdefs.h
 
 
 fi
-
-rm -f core conftest.err conftest.$ac_objext conftest.$ac_ext
-{ echo "$as_me:$LINENO: checking type ostrstream" >&5
-echo $ECHO_N "checking type ostrstream... $ECHO_C" >&6; }
-cat >conftest.$ac_ext <<_ACEOF
-/* confdefs.h.  */
-_ACEOF
-cat confdefs.h >>conftest.$ac_ext
-cat >>conftest.$ac_ext <<_ACEOF
+rm -f core conftest.err conftest.$ac_objext conftest.beam conftest.$ac_ext
+{ printf "%s\n" "$as_me:${as_lineno-$LINENO}: checking type ostrstream" >&5
+printf %s "checking type ostrstream... " >&6; }
+cat confdefs.h - <<_ACEOF >conftest.$ac_ext
 /* end confdefs.h.  */
 #include STL_SSTREAM_HEADER_FILE
 #ifndef NAMESPACE_IS_BROKEN
@@ -14801,7 +13289,7 @@ using namespace std;
 
 #endif
 int
-main ()
+main (void)
 {
 ostrstream oss; oss << 10;
 
@@ -14809,40 +13297,19 @@ ostrstream oss; oss << 10;
   return 0;
 }
 _ACEOF
-rm -f conftest.$ac_objext
-if { (ac_try="$ac_compile"
-case "(($ac_try" in
-  *\"* | *\`* | *\\*) ac_try_echo=\$ac_try;;
-  *) ac_try_echo=$ac_try;;
-esac
-eval "echo \"\$as_me:$LINENO: $ac_try_echo\"") >&5
-  (eval "$ac_compile") 2>conftest.er1
-  ac_status=$?
-  grep -v '^ *+' conftest.er1 >conftest.err
-  rm -f conftest.er1
-  cat conftest.err >&5
-  echo "$as_me:$LINENO: \$? = $ac_status" >&5
-  (exit $ac_status); } && {
-	 test -z "$ac_cxx_werror_flag" ||
-	 test ! -s conftest.err
-       } && test -s conftest.$ac_objext; then
-  { echo "$as_me:$LINENO: result: ok" >&5
-echo "${ECHO_T}ok" >&6; }
-else
-  echo "$as_me: failed program was:" >&5
-sed 's/^/| /' conftest.$ac_ext >&5
+if ac_fn_cxx_try_compile "$LINENO"
+then :
+  { printf "%s\n" "$as_me:${as_lineno-$LINENO}: result: ok" >&5
+printf "%s\n" "ok" >&6; }
+else $as_nop
+  { printf "%s\n" "$as_me:${as_lineno-$LINENO}: result: broken" >&5
+printf "%s\n" "broken" >&6; }
 
-	{ echo "$as_me:$LINENO: result: broken" >&5
-echo "${ECHO_T}broken" >&6; }
-
-cat >>confdefs.h <<\_ACEOF
-#define OSTRSTREAM_TYPE_IS_BROKEN 1
-_ACEOF
+printf "%s\n" "#define OSTRSTREAM_TYPE_IS_BROKEN 1" >>confdefs.h
 
 
 fi
-
-rm -f core conftest.err conftest.$ac_objext conftest.$ac_ext
+rm -f core conftest.err conftest.$ac_objext conftest.beam conftest.$ac_ext
 ac_ext=c
 ac_cpp='$CPP $CPPFLAGS'
 ac_compile='$CC -c $CFLAGS $CPPFLAGS conftest.$ac_ext >&5'
@@ -14850,149 +13317,19 @@ ac_link='$CC -o conftest$ac_exeext $CFLAGS $CPPFLAGS $LDFLAGS conftest.$ac_ext $
 ac_compiler_gnu=$ac_cv_c_compiler_gnu
 
 
-if test "${ac_cv_header_malloc_h+set}" = set; then
-  { echo "$as_me:$LINENO: checking for malloc.h" >&5
-echo $ECHO_N "checking for malloc.h... $ECHO_C" >&6; }
-if test "${ac_cv_header_malloc_h+set}" = set; then
-  echo $ECHO_N "(cached) $ECHO_C" >&6
-fi
-{ echo "$as_me:$LINENO: result: $ac_cv_header_malloc_h" >&5
-echo "${ECHO_T}$ac_cv_header_malloc_h" >&6; }
-else
-  # Is the header compilable?
-{ echo "$as_me:$LINENO: checking malloc.h usability" >&5
-echo $ECHO_N "checking malloc.h usability... $ECHO_C" >&6; }
-cat >conftest.$ac_ext <<_ACEOF
-/* confdefs.h.  */
-_ACEOF
-cat confdefs.h >>conftest.$ac_ext
-cat >>conftest.$ac_ext <<_ACEOF
-/* end confdefs.h.  */
-$ac_includes_default
-#include <malloc.h>
-_ACEOF
-rm -f conftest.$ac_objext
-if { (ac_try="$ac_compile"
-case "(($ac_try" in
-  *\"* | *\`* | *\\*) ac_try_echo=\$ac_try;;
-  *) ac_try_echo=$ac_try;;
-esac
-eval "echo \"\$as_me:$LINENO: $ac_try_echo\"") >&5
-  (eval "$ac_compile") 2>conftest.er1
-  ac_status=$?
-  grep -v '^ *+' conftest.er1 >conftest.err
-  rm -f conftest.er1
-  cat conftest.err >&5
-  echo "$as_me:$LINENO: \$? = $ac_status" >&5
-  (exit $ac_status); } && {
-	 test -z "$ac_c_werror_flag" ||
-	 test ! -s conftest.err
-       } && test -s conftest.$ac_objext; then
-  ac_header_compiler=yes
-else
-  echo "$as_me: failed program was:" >&5
-sed 's/^/| /' conftest.$ac_ext >&5
-
-	ac_header_compiler=no
-fi
-
-rm -f core conftest.err conftest.$ac_objext conftest.$ac_ext
-{ echo "$as_me:$LINENO: result: $ac_header_compiler" >&5
-echo "${ECHO_T}$ac_header_compiler" >&6; }
-
-# Is the header present?
-{ echo "$as_me:$LINENO: checking malloc.h presence" >&5
-echo $ECHO_N "checking malloc.h presence... $ECHO_C" >&6; }
-cat >conftest.$ac_ext <<_ACEOF
-/* confdefs.h.  */
-_ACEOF
-cat confdefs.h >>conftest.$ac_ext
-cat >>conftest.$ac_ext <<_ACEOF
-/* end confdefs.h.  */
-#include <malloc.h>
-_ACEOF
-if { (ac_try="$ac_cpp conftest.$ac_ext"
-case "(($ac_try" in
-  *\"* | *\`* | *\\*) ac_try_echo=\$ac_try;;
-  *) ac_try_echo=$ac_try;;
-esac
-eval "echo \"\$as_me:$LINENO: $ac_try_echo\"") >&5
-  (eval "$ac_cpp conftest.$ac_ext") 2>conftest.er1
-  ac_status=$?
-  grep -v '^ *+' conftest.er1 >conftest.err
-  rm -f conftest.er1
-  cat conftest.err >&5
-  echo "$as_me:$LINENO: \$? = $ac_status" >&5
-  (exit $ac_status); } >/dev/null && {
-	 test -z "$ac_c_preproc_warn_flag$ac_c_werror_flag" ||
-	 test ! -s conftest.err
-       }; then
-  ac_header_preproc=yes
-else
-  echo "$as_me: failed program was:" >&5
-sed 's/^/| /' conftest.$ac_ext >&5
-
-  ac_header_preproc=no
-fi
+ac_fn_c_check_header_compile "$LINENO" "malloc.h" "ac_cv_header_malloc_h" "$ac_includes_default"
+if test "x$ac_cv_header_malloc_h" = xyes
+then :
 
-rm -f conftest.err conftest.$ac_ext
-{ echo "$as_me:$LINENO: result: $ac_header_preproc" >&5
-echo "${ECHO_T}$ac_header_preproc" >&6; }
+printf "%s\n" "#define HAVE_MALLOC_H 1" >>confdefs.h
 
-# So?  What about this header?
-case $ac_header_compiler:$ac_header_preproc:$ac_c_preproc_warn_flag in
-  yes:no: )
-    { echo "$as_me:$LINENO: WARNING: malloc.h: accepted by the compiler, rejected by the preprocessor!" >&5
-echo "$as_me: WARNING: malloc.h: accepted by the compiler, rejected by the preprocessor!" >&2;}
-    { echo "$as_me:$LINENO: WARNING: malloc.h: proceeding with the compiler's result" >&5
-echo "$as_me: WARNING: malloc.h: proceeding with the compiler's result" >&2;}
-    ac_header_preproc=yes
-    ;;
-  no:yes:* )
-    { echo "$as_me:$LINENO: WARNING: malloc.h: present but cannot be compiled" >&5
-echo "$as_me: WARNING: malloc.h: present but cannot be compiled" >&2;}
-    { echo "$as_me:$LINENO: WARNING: malloc.h:     check for missing prerequisite headers?" >&5
-echo "$as_me: WARNING: malloc.h:     check for missing prerequisite headers?" >&2;}
-    { echo "$as_me:$LINENO: WARNING: malloc.h: see the Autoconf documentation" >&5
-echo "$as_me: WARNING: malloc.h: see the Autoconf documentation" >&2;}
-    { echo "$as_me:$LINENO: WARNING: malloc.h:     section \"Present But Cannot Be Compiled\"" >&5
-echo "$as_me: WARNING: malloc.h:     section \"Present But Cannot Be Compiled\"" >&2;}
-    { echo "$as_me:$LINENO: WARNING: malloc.h: proceeding with the preprocessor's result" >&5
-echo "$as_me: WARNING: malloc.h: proceeding with the preprocessor's result" >&2;}
-    { echo "$as_me:$LINENO: WARNING: malloc.h: in the future, the compiler will take precedence" >&5
-echo "$as_me: WARNING: malloc.h: in the future, the compiler will take precedence" >&2;}
 
-    ;;
-esac
-{ echo "$as_me:$LINENO: checking for malloc.h" >&5
-echo $ECHO_N "checking for malloc.h... $ECHO_C" >&6; }
-if test "${ac_cv_header_malloc_h+set}" = set; then
-  echo $ECHO_N "(cached) $ECHO_C" >&6
-else
-  ac_cv_header_malloc_h=$ac_header_preproc
 fi
-{ echo "$as_me:$LINENO: result: $ac_cv_header_malloc_h" >&5
-echo "${ECHO_T}$ac_cv_header_malloc_h" >&6; }
-
-fi
-if test $ac_cv_header_malloc_h = yes; then
-
-cat >>confdefs.h <<\_ACEOF
-#define HAVE_MALLOC_H 1
-_ACEOF
-
-
-fi
-
 
 
-{ echo "$as_me:$LINENO: checking for mallinfo" >&5
-echo $ECHO_N "checking for mallinfo... $ECHO_C" >&6; }
-cat >conftest.$ac_ext <<_ACEOF
-/* confdefs.h.  */
-_ACEOF
-cat confdefs.h >>conftest.$ac_ext
-cat >>conftest.$ac_ext <<_ACEOF
+{ printf "%s\n" "$as_me:${as_lineno-$LINENO}: checking for mallinfo" >&5
+printf %s "checking for mallinfo... " >&6; }
+cat confdefs.h - <<_ACEOF >conftest.$ac_ext
 /* end confdefs.h.  */
 #include <malloc.h>
 #ifdef F77_DUMMY_MAIN
@@ -15004,52 +13341,31 @@ cat >>conftest.$ac_ext <<_ACEOF
 
 #endif
 int
-main ()
+main (void)
 {
 void *x=mallinfo
   ;
   return 0;
 }
 _ACEOF
-rm -f conftest.$ac_objext
-if { (ac_try="$ac_compile"
-case "(($ac_try" in
-  *\"* | *\`* | *\\*) ac_try_echo=\$ac_try;;
-  *) ac_try_echo=$ac_try;;
-esac
-eval "echo \"\$as_me:$LINENO: $ac_try_echo\"") >&5
-  (eval "$ac_compile") 2>conftest.er1
-  ac_status=$?
-  grep -v '^ *+' conftest.er1 >conftest.err
-  rm -f conftest.er1
-  cat conftest.err >&5
-  echo "$as_me:$LINENO: \$? = $ac_status" >&5
-  (exit $ac_status); } && {
-	 test -z "$ac_c_werror_flag" ||
-	 test ! -s conftest.err
-       } && test -s conftest.$ac_objext; then
+if ac_fn_c_try_compile "$LINENO"
+then :
 
-cat >>confdefs.h <<\_ACEOF
-#define HAVE_MALLINFO 1
-_ACEOF
+printf "%s\n" "#define HAVE_MALLINFO 1" >>confdefs.h
 
-  { echo "$as_me:$LINENO: result: yes" >&5
-echo "${ECHO_T}yes" >&6; }
-else
-  echo "$as_me: failed program was:" >&5
-sed 's/^/| /' conftest.$ac_ext >&5
-
-	{ echo "$as_me:$LINENO: result: no" >&5
-echo "${ECHO_T}no" >&6; }
+  { printf "%s\n" "$as_me:${as_lineno-$LINENO}: result: yes" >&5
+printf "%s\n" "yes" >&6; }
+else $as_nop
+  { printf "%s\n" "$as_me:${as_lineno-$LINENO}: result: no" >&5
+printf "%s\n" "no" >&6; }
 
 fi
+rm -f core conftest.err conftest.$ac_objext conftest.beam conftest.$ac_ext
 
-rm -f core conftest.err conftest.$ac_objext conftest.$ac_ext
 
 
-
-   { echo "$as_me:$LINENO: checking checking for isnan in cmath" >&5
-echo $ECHO_N "checking checking for isnan in cmath... $ECHO_C" >&6; }
+   { printf "%s\n" "$as_me:${as_lineno-$LINENO}: checking checking for isnan in cmath" >&5
+printf %s "checking checking for isnan in cmath... " >&6; }
 
 
    ac_ext=cpp
@@ -15058,11 +13374,7 @@ ac_compile='$CXX -c $CXXFLAGS $CPPFLAGS conftest.$ac_ext >&5'
 ac_link='$CXX -o conftest$ac_exeext $CXXFLAGS $CPPFLAGS $LDFLAGS conftest.$ac_ext $LIBS >&5'
 ac_compiler_gnu=$ac_cv_cxx_compiler_gnu
 
-   cat >conftest.$ac_ext <<_ACEOF
-/* confdefs.h.  */
-_ACEOF
-cat confdefs.h >>conftest.$ac_ext
-cat >>conftest.$ac_ext <<_ACEOF
+   cat confdefs.h - <<_ACEOF >conftest.$ac_ext
 /* end confdefs.h.  */
  #include <cmath>
 #ifdef F77_DUMMY_MAIN
@@ -15074,39 +13386,20 @@ cat >>conftest.$ac_ext <<_ACEOF
 
 #endif
 int
-main ()
+main (void)
 {
  int test = std::isnan(0.0);
   ;
   return 0;
 }
 _ACEOF
-rm -f conftest.$ac_objext
-if { (ac_try="$ac_compile"
-case "(($ac_try" in
-  *\"* | *\`* | *\\*) ac_try_echo=\$ac_try;;
-  *) ac_try_echo=$ac_try;;
-esac
-eval "echo \"\$as_me:$LINENO: $ac_try_echo\"") >&5
-  (eval "$ac_compile") 2>conftest.er1
-  ac_status=$?
-  grep -v '^ *+' conftest.er1 >conftest.err
-  rm -f conftest.er1
-  cat conftest.err >&5
-  echo "$as_me:$LINENO: \$? = $ac_status" >&5
-  (exit $ac_status); } && {
-	 test -z "$ac_cxx_werror_flag" ||
-	 test ! -s conftest.err
-       } && test -s conftest.$ac_objext; then
+if ac_fn_cxx_try_compile "$LINENO"
+then :
   casc_cv_cxx_have_isnan=yes
-else
-  echo "$as_me: failed program was:" >&5
-sed 's/^/| /' conftest.$ac_ext >&5
-
-	casc_cv_cxx_have_isnan=no
+else $as_nop
+  casc_cv_cxx_have_isnan=no
 fi
-
-rm -f core conftest.err conftest.$ac_objext conftest.$ac_ext
+rm -f core conftest.err conftest.$ac_objext conftest.beam conftest.$ac_ext
    ac_ext=c
 ac_cpp='$CPP $CPPFLAGS'
 ac_compile='$CC -c $CFLAGS $CPPFLAGS conftest.$ac_ext >&5'
@@ -15114,24 +13407,20 @@ ac_link='$CC -o conftest$ac_exeext $CFLAGS $CPPFLAGS $LDFLAGS conftest.$ac_ext $
 ac_compiler_gnu=$ac_cv_c_compiler_gnu
 
 
-   { echo "$as_me:$LINENO: result: $casc_cv_cxx_have_isnan" >&5
-echo "${ECHO_T}$casc_cv_cxx_have_isnan" >&6; }
+   { printf "%s\n" "$as_me:${as_lineno-$LINENO}: result: $casc_cv_cxx_have_isnan" >&5
+printf "%s\n" "$casc_cv_cxx_have_isnan" >&6; }
 
    if test "$casc_cv_cxx_have_isnan" = yes; then
 
-cat >>confdefs.h <<\_ACEOF
-#define HAVE_CMATH_ISNAN 1
-_ACEOF
+printf "%s\n" "#define HAVE_CMATH_ISNAN 1" >>confdefs.h
 
    else
 
-cat >>confdefs.h <<\_ACEOF
-#define LACKS_CMATH_ISNAN 1
-_ACEOF
+printf "%s\n" "#define LACKS_CMATH_ISNAN 1" >>confdefs.h
 
 
-      { echo "$as_me:$LINENO: checking checking for isnan in math.h" >&5
-echo $ECHO_N "checking checking for isnan in math.h... $ECHO_C" >&6; }
+      { printf "%s\n" "$as_me:${as_lineno-$LINENO}: checking checking for isnan in math.h" >&5
+printf %s "checking checking for isnan in math.h... " >&6; }
 
 
       ac_ext=cpp
@@ -15140,11 +13429,7 @@ ac_compile='$CXX -c $CXXFLAGS $CPPFLAGS conftest.$ac_ext >&5'
 ac_link='$CXX -o conftest$ac_exeext $CXXFLAGS $CPPFLAGS $LDFLAGS conftest.$ac_ext $LIBS >&5'
 ac_compiler_gnu=$ac_cv_cxx_compiler_gnu
 
-      cat >conftest.$ac_ext <<_ACEOF
-/* confdefs.h.  */
-_ACEOF
-cat confdefs.h >>conftest.$ac_ext
-cat >>conftest.$ac_ext <<_ACEOF
+      cat confdefs.h - <<_ACEOF >conftest.$ac_ext
 /* end confdefs.h.  */
 #include <math.h>
 #ifdef F77_DUMMY_MAIN
@@ -15156,39 +13441,20 @@ cat >>conftest.$ac_ext <<_ACEOF
 
 #endif
 int
-main ()
+main (void)
 {
 int test = isnan(0.0);
   ;
   return 0;
 }
 _ACEOF
-rm -f conftest.$ac_objext
-if { (ac_try="$ac_compile"
-case "(($ac_try" in
-  *\"* | *\`* | *\\*) ac_try_echo=\$ac_try;;
-  *) ac_try_echo=$ac_try;;
-esac
-eval "echo \"\$as_me:$LINENO: $ac_try_echo\"") >&5
-  (eval "$ac_compile") 2>conftest.er1
-  ac_status=$?
-  grep -v '^ *+' conftest.er1 >conftest.err
-  rm -f conftest.er1
-  cat conftest.err >&5
-  echo "$as_me:$LINENO: \$? = $ac_status" >&5
-  (exit $ac_status); } && {
-	 test -z "$ac_cxx_werror_flag" ||
-	 test ! -s conftest.err
-       } && test -s conftest.$ac_objext; then
+if ac_fn_cxx_try_compile "$LINENO"
+then :
   casc_cv_cxx_have_isnan=yes
-else
-  echo "$as_me: failed program was:" >&5
-sed 's/^/| /' conftest.$ac_ext >&5
-
-	casc_cv_cxx_have_isnan=no
+else $as_nop
+  casc_cv_cxx_have_isnan=no
 fi
-
-rm -f core conftest.err conftest.$ac_objext conftest.$ac_ext
+rm -f core conftest.err conftest.$ac_objext conftest.beam conftest.$ac_ext
       ac_ext=c
 ac_cpp='$CPP $CPPFLAGS'
 ac_compile='$CC -c $CFLAGS $CPPFLAGS conftest.$ac_ext >&5'
@@ -15196,24 +13462,20 @@ ac_link='$CC -o conftest$ac_exeext $CFLAGS $CPPFLAGS $LDFLAGS conftest.$ac_ext $
 ac_compiler_gnu=$ac_cv_c_compiler_gnu
 
 
-      { echo "$as_me:$LINENO: result: $casc_cv_cxx_have_isnan" >&5
-echo "${ECHO_T}$casc_cv_cxx_have_isnan" >&6; }
+      { printf "%s\n" "$as_me:${as_lineno-$LINENO}: result: $casc_cv_cxx_have_isnan" >&5
+printf "%s\n" "$casc_cv_cxx_have_isnan" >&6; }
 
       if test "$casc_cv_cxx_have_isnan" = yes; then
 
-cat >>confdefs.h <<\_ACEOF
-#define HAVE_ISNAN 1
-_ACEOF
+printf "%s\n" "#define HAVE_ISNAN 1" >>confdefs.h
 
       else
 
-cat >>confdefs.h <<\_ACEOF
-#define LACKS_ISNAN 1
-_ACEOF
+printf "%s\n" "#define LACKS_ISNAN 1" >>confdefs.h
 
 
-         { echo "$as_me:$LINENO: checking checking for __isnand" >&5
-echo $ECHO_N "checking checking for __isnand... $ECHO_C" >&6; }
+         { printf "%s\n" "$as_me:${as_lineno-$LINENO}: checking checking for __isnand" >&5
+printf %s "checking checking for __isnand... " >&6; }
 
 
          ac_ext=cpp
@@ -15222,11 +13484,7 @@ ac_compile='$CXX -c $CXXFLAGS $CPPFLAGS conftest.$ac_ext >&5'
 ac_link='$CXX -o conftest$ac_exeext $CXXFLAGS $CPPFLAGS $LDFLAGS conftest.$ac_ext $LIBS >&5'
 ac_compiler_gnu=$ac_cv_cxx_compiler_gnu
 
-         cat >conftest.$ac_ext <<_ACEOF
-/* confdefs.h.  */
-_ACEOF
-cat confdefs.h >>conftest.$ac_ext
-cat >>conftest.$ac_ext <<_ACEOF
+         cat confdefs.h - <<_ACEOF >conftest.$ac_ext
 /* end confdefs.h.  */
 #include <math.h>
 #ifdef F77_DUMMY_MAIN
@@ -15238,39 +13496,20 @@ cat >>conftest.$ac_ext <<_ACEOF
 
 #endif
 int
-main ()
+main (void)
 {
 int test = __isnand(0.0);
   ;
   return 0;
 }
 _ACEOF
-rm -f conftest.$ac_objext
-if { (ac_try="$ac_compile"
-case "(($ac_try" in
-  *\"* | *\`* | *\\*) ac_try_echo=\$ac_try;;
-  *) ac_try_echo=$ac_try;;
-esac
-eval "echo \"\$as_me:$LINENO: $ac_try_echo\"") >&5
-  (eval "$ac_compile") 2>conftest.er1
-  ac_status=$?
-  grep -v '^ *+' conftest.er1 >conftest.err
-  rm -f conftest.er1
-  cat conftest.err >&5
-  echo "$as_me:$LINENO: \$? = $ac_status" >&5
-  (exit $ac_status); } && {
-	 test -z "$ac_cxx_werror_flag" ||
-	 test ! -s conftest.err
-       } && test -s conftest.$ac_objext; then
+if ac_fn_cxx_try_compile "$LINENO"
+then :
   casc_cv_cxx_have_isnand=yes
-else
-  echo "$as_me: failed program was:" >&5
-sed 's/^/| /' conftest.$ac_ext >&5
-
-	casc_cv_cxx_have_isnand=no
+else $as_nop
+  casc_cv_cxx_have_isnand=no
 fi
-
-rm -f core conftest.err conftest.$ac_objext conftest.$ac_ext
+rm -f core conftest.err conftest.$ac_objext conftest.beam conftest.$ac_ext
          ac_ext=c
 ac_cpp='$CPP $CPPFLAGS'
 ac_compile='$CC -c $CFLAGS $CPPFLAGS conftest.$ac_ext >&5'
@@ -15278,23 +13517,19 @@ ac_link='$CC -o conftest$ac_exeext $CFLAGS $CPPFLAGS $LDFLAGS conftest.$ac_ext $
 ac_compiler_gnu=$ac_cv_c_compiler_gnu
 
 
-         { echo "$as_me:$LINENO: result: $casc_cv_cxx_have_isnand" >&5
-echo "${ECHO_T}$casc_cv_cxx_have_isnand" >&6; }
+         { printf "%s\n" "$as_me:${as_lineno-$LINENO}: result: $casc_cv_cxx_have_isnand" >&5
+printf "%s\n" "$casc_cv_cxx_have_isnand" >&6; }
          if test "$casc_cv_cxx_have_isnand" = yes; then
 
-cat >>confdefs.h <<\_ACEOF
-#define HAVE_ISNAND 1
-_ACEOF
+printf "%s\n" "#define HAVE_ISNAND 1" >>confdefs.h
 
          else
 
-cat >>confdefs.h <<\_ACEOF
-#define LACKS_ISNAND 1
-_ACEOF
+printf "%s\n" "#define LACKS_ISNAND 1" >>confdefs.h
 
 
-            { echo "$as_me:$LINENO: checking checking for __inline_isnand" >&5
-echo $ECHO_N "checking checking for __inline_isnand... $ECHO_C" >&6; }
+            { printf "%s\n" "$as_me:${as_lineno-$LINENO}: checking checking for __inline_isnand" >&5
+printf %s "checking checking for __inline_isnand... " >&6; }
 
 
             ac_ext=cpp
@@ -15303,11 +13538,7 @@ ac_compile='$CXX -c $CXXFLAGS $CPPFLAGS conftest.$ac_ext >&5'
 ac_link='$CXX -o conftest$ac_exeext $CXXFLAGS $CPPFLAGS $LDFLAGS conftest.$ac_ext $LIBS >&5'
 ac_compiler_gnu=$ac_cv_cxx_compiler_gnu
 
-            cat >conftest.$ac_ext <<_ACEOF
-/* confdefs.h.  */
-_ACEOF
-cat confdefs.h >>conftest.$ac_ext
-cat >>conftest.$ac_ext <<_ACEOF
+            cat confdefs.h - <<_ACEOF >conftest.$ac_ext
 /* end confdefs.h.  */
 #include <math.h>
 #ifdef F77_DUMMY_MAIN
@@ -15319,39 +13550,20 @@ cat >>conftest.$ac_ext <<_ACEOF
 
 #endif
 int
-main ()
+main (void)
 {
 int test = __inline_isnand(0.0);
   ;
   return 0;
 }
 _ACEOF
-rm -f conftest.$ac_objext
-if { (ac_try="$ac_compile"
-case "(($ac_try" in
-  *\"* | *\`* | *\\*) ac_try_echo=\$ac_try;;
-  *) ac_try_echo=$ac_try;;
-esac
-eval "echo \"\$as_me:$LINENO: $ac_try_echo\"") >&5
-  (eval "$ac_compile") 2>conftest.er1
-  ac_status=$?
-  grep -v '^ *+' conftest.er1 >conftest.err
-  rm -f conftest.er1
-  cat conftest.err >&5
-  echo "$as_me:$LINENO: \$? = $ac_status" >&5
-  (exit $ac_status); } && {
-	 test -z "$ac_cxx_werror_flag" ||
-	 test ! -s conftest.err
-       } && test -s conftest.$ac_objext; then
+if ac_fn_cxx_try_compile "$LINENO"
+then :
   casc_cv_cxx_have_inline_isnan=yes
-else
-  echo "$as_me: failed program was:" >&5
-sed 's/^/| /' conftest.$ac_ext >&5
-
-	casc_cv_cxx_have_inline_isnan=no
+else $as_nop
+  casc_cv_cxx_have_inline_isnan=no
 fi
-
-rm -f core conftest.err conftest.$ac_objext conftest.$ac_ext
+rm -f core conftest.err conftest.$ac_objext conftest.beam conftest.$ac_ext
               ac_ext=c
 ac_cpp='$CPP $CPPFLAGS'
 ac_compile='$CC -c $CFLAGS $CPPFLAGS conftest.$ac_ext >&5'
@@ -15359,19 +13571,15 @@ ac_link='$CC -o conftest$ac_exeext $CFLAGS $CPPFLAGS $LDFLAGS conftest.$ac_ext $
 ac_compiler_gnu=$ac_cv_c_compiler_gnu
 
 
-            { echo "$as_me:$LINENO: result: $casc_cv_cxx_have_inline_isnan" >&5
-echo "${ECHO_T}$casc_cv_cxx_have_inline_isnan" >&6; }
+            { printf "%s\n" "$as_me:${as_lineno-$LINENO}: result: $casc_cv_cxx_have_inline_isnan" >&5
+printf "%s\n" "$casc_cv_cxx_have_inline_isnan" >&6; }
             if test "$casc_cv_cxx_have_inline_isnan" = yes; then
 
-cat >>confdefs.h <<\_ACEOF
-#define HAVE_INLINE_ISNAND 1
-_ACEOF
+printf "%s\n" "#define HAVE_INLINE_ISNAND 1" >>confdefs.h
 
             else
 
-cat >>confdefs.h <<\_ACEOF
-#define LACKS_INLINE_ISNAND 1
-_ACEOF
+printf "%s\n" "#define LACKS_INLINE_ISNAND 1" >>confdefs.h
 
            fi
 	fi
@@ -15385,15 +13593,17 @@ _ACEOF
 
 
 # Start macro BTNG_ARG_WITH_ENV_WRAPPER with args dl and dl_PREFIX
-{ echo "$as_me:$LINENO: checking for dl" >&5
-echo $ECHO_N "checking for dl... $ECHO_C" >&6; }
-if test "${btng_cv_prog_dl+set}" = set; then
-  echo $ECHO_N "(cached) $ECHO_C" >&6
-else
+{ printf "%s\n" "$as_me:${as_lineno-$LINENO}: checking for dl" >&5
+printf %s "checking for dl... " >&6; }
+if test ${btng_cv_prog_dl+y}
+then :
+  printf %s "(cached) " >&6
+else $as_nop
 
 
 # Check whether --with-dl was given.
-if test "${with_dl+set}" = set; then
+if test ${with_dl+y}
+then :
   withval=$with_dl;
 fi
 
@@ -15433,8 +13643,8 @@ if test "${dl_PREFIX+set}" = set ; then
 fi
 
 fi
-{ echo "$as_me:$LINENO: result: $btng_cv_prog_dl" >&5
-echo "${ECHO_T}$btng_cv_prog_dl" >&6; }
+{ printf "%s\n" "$as_me:${as_lineno-$LINENO}: result: $btng_cv_prog_dl" >&5
+printf "%s\n" "$btng_cv_prog_dl" >&6; }
 # Set dl_PREFIX from cache.
 # dl_PREFIX is not yet set if we grabbed it from cache.
 if test "${btng_cv_prog_dl+set}" = set ; then
@@ -15449,15 +13659,17 @@ fi
 # Start macro BTNG_ARG_WITH_PREFIX
 
 # Start macro BTNG_ARG_WITH_ENV_WRAPPER with args dl-includes and dl_INCLUDES
-{ echo "$as_me:$LINENO: checking for dl-includes" >&5
-echo $ECHO_N "checking for dl-includes... $ECHO_C" >&6; }
-if test "${btng_cv_prog_dl_includes+set}" = set; then
-  echo $ECHO_N "(cached) $ECHO_C" >&6
-else
+{ printf "%s\n" "$as_me:${as_lineno-$LINENO}: checking for dl-includes" >&5
+printf %s "checking for dl-includes... " >&6; }
+if test ${btng_cv_prog_dl_includes+y}
+then :
+  printf %s "(cached) " >&6
+else $as_nop
 
 
 # Check whether --with-dl-includes was given.
-if test "${with_dl_includes+set}" = set; then
+if test ${with_dl_includes+y}
+then :
   withval=$with_dl_includes;
 fi
 
@@ -15479,11 +13691,9 @@ case "$with_dl_includes" in
       : Nothing to do here actually, because dl_INCLUDES is already in the environment.
     else
       if test "${with_dl_includes}" = yes ; then
-  { { echo "$as_me:$LINENO: error: If you specify --with-dl-includes, you must give it the path as in --with-dl-includes=/installation/path" >&5
-echo "$as_me: error: If you specify --with-dl-includes, you must give it the path as in --with-dl-includes=/installation/path" >&2;}
-   { (exit 1); exit 1; }; }
+  as_fn_error $? "If you specify --with-dl-includes, you must give it the path as in --with-dl-includes=/installation/path" "$LINENO" 5
 fi
-echo "configure:15486:" environment dl_INCLUDES not defined >&5
+echo "configure:13696:" environment dl_INCLUDES not defined >&5
 
 
     fi
@@ -15504,8 +13714,8 @@ if test "${dl_INCLUDES+set}" = set ; then
 fi
 
 fi
-{ echo "$as_me:$LINENO: result: $btng_cv_prog_dl_includes" >&5
-echo "${ECHO_T}$btng_cv_prog_dl_includes" >&6; }
+{ printf "%s\n" "$as_me:${as_lineno-$LINENO}: result: $btng_cv_prog_dl_includes" >&5
+printf "%s\n" "$btng_cv_prog_dl_includes" >&6; }
 # Set dl_INCLUDES from cache.
 # dl_INCLUDES is not yet set if we grabbed it from cache.
 if test "${btng_cv_prog_dl_includes+set}" = set ; then
@@ -15520,15 +13730,17 @@ fi
 # Start macro BTNG_ARG_WITH_PREFIX
 
 # Start macro BTNG_ARG_WITH_ENV_WRAPPER with args dl-libs and dl_LIBS
-{ echo "$as_me:$LINENO: checking for dl-libs" >&5
-echo $ECHO_N "checking for dl-libs... $ECHO_C" >&6; }
-if test "${btng_cv_prog_dl_libs+set}" = set; then
-  echo $ECHO_N "(cached) $ECHO_C" >&6
-else
+{ printf "%s\n" "$as_me:${as_lineno-$LINENO}: checking for dl-libs" >&5
+printf %s "checking for dl-libs... " >&6; }
+if test ${btng_cv_prog_dl_libs+y}
+then :
+  printf %s "(cached) " >&6
+else $as_nop
 
 
 # Check whether --with-dl-libs was given.
-if test "${with_dl_libs+set}" = set; then
+if test ${with_dl_libs+y}
+then :
   withval=$with_dl_libs;
 fi
 
@@ -15550,11 +13762,9 @@ case "$with_dl_libs" in
       : Nothing to do here actually, because dl_LIBS is already in the environment.
     else
       if test "${with_dl_libs}" = yes ; then
-  { { echo "$as_me:$LINENO: error: If you specify --with-dl-libs, you must give it the path as in --with-dl-libs=/installation/path" >&5
-echo "$as_me: error: If you specify --with-dl-libs, you must give it the path as in --with-dl-libs=/installation/path" >&2;}
-   { (exit 1); exit 1; }; }
+  as_fn_error $? "If you specify --with-dl-libs, you must give it the path as in --with-dl-libs=/installation/path" "$LINENO" 5
 fi
-echo "configure:15557:" environment dl_LIBS not defined >&5
+echo "configure:13767:" environment dl_LIBS not defined >&5
 
 
     fi
@@ -15575,8 +13785,8 @@ if test "${dl_LIBS+set}" = set ; then
 fi
 
 fi
-{ echo "$as_me:$LINENO: result: $btng_cv_prog_dl_libs" >&5
-echo "${ECHO_T}$btng_cv_prog_dl_libs" >&6; }
+{ printf "%s\n" "$as_me:${as_lineno-$LINENO}: result: $btng_cv_prog_dl_libs" >&5
+printf "%s\n" "$btng_cv_prog_dl_libs" >&6; }
 # Set dl_LIBS from cache.
 # dl_LIBS is not yet set if we grabbed it from cache.
 if test "${btng_cv_prog_dl_libs+set}" = set ; then
@@ -15603,25 +13813,19 @@ if test "${dl_PREFIX+set}" = set ; then
     # If path is given, add path to extra flag for library search.
     test -n "${dl_PREFIX}" && btng_extra_libs="-L${dl_PREFIX}/lib $btng_extra_libs"
     # Look for library.
-    { echo "$as_me:$LINENO: checking for library containing dlopen" >&5
-echo $ECHO_N "checking for library containing dlopen... $ECHO_C" >&6; }
-if test "${ac_cv_search_dlopen+set}" = set; then
-  echo $ECHO_N "(cached) $ECHO_C" >&6
-else
+    { printf "%s\n" "$as_me:${as_lineno-$LINENO}: checking for library containing dlopen" >&5
+printf %s "checking for library containing dlopen... " >&6; }
+if test ${ac_cv_search_dlopen+y}
+then :
+  printf %s "(cached) " >&6
+else $as_nop
   ac_func_search_save_LIBS=$LIBS
-cat >conftest.$ac_ext <<_ACEOF
-/* confdefs.h.  */
-_ACEOF
-cat confdefs.h >>conftest.$ac_ext
-cat >>conftest.$ac_ext <<_ACEOF
+cat confdefs.h - <<_ACEOF >conftest.$ac_ext
 /* end confdefs.h.  */
 
 /* Override any GCC internal prototype to avoid an error.
    Use char because int might match the return type of a GCC
    builtin and then its argument prototype would still apply.  */
-#ifdef __cplusplus
-extern "C"
-#endif
 char dlopen ();
 #ifdef F77_DUMMY_MAIN
 
@@ -15632,64 +13836,46 @@ char dlopen ();
 
 #endif
 int
-main ()
+main (void)
 {
 return dlopen ();
   ;
   return 0;
 }
 _ACEOF
-for ac_lib in '' dl; do
+for ac_lib in '' dl
+do
   if test -z "$ac_lib"; then
     ac_res="none required"
   else
     ac_res=-l$ac_lib
     LIBS="-l$ac_lib $btng_extra_libs $ac_func_search_save_LIBS"
   fi
-  rm -f conftest.$ac_objext conftest$ac_exeext
-if { (ac_try="$ac_link"
-case "(($ac_try" in
-  *\"* | *\`* | *\\*) ac_try_echo=\$ac_try;;
-  *) ac_try_echo=$ac_try;;
-esac
-eval "echo \"\$as_me:$LINENO: $ac_try_echo\"") >&5
-  (eval "$ac_link") 2>conftest.er1
-  ac_status=$?
-  grep -v '^ *+' conftest.er1 >conftest.err
-  rm -f conftest.er1
-  cat conftest.err >&5
-  echo "$as_me:$LINENO: \$? = $ac_status" >&5
-  (exit $ac_status); } && {
-	 test -z "$ac_c_werror_flag" ||
-	 test ! -s conftest.err
-       } && test -s conftest$ac_exeext &&
-       $as_test_x conftest$ac_exeext; then
+  if ac_fn_c_try_link "$LINENO"
+then :
   ac_cv_search_dlopen=$ac_res
-else
-  echo "$as_me: failed program was:" >&5
-sed 's/^/| /' conftest.$ac_ext >&5
-
-
 fi
-
-rm -f core conftest.err conftest.$ac_objext conftest_ipa8_conftest.oo \
-      conftest$ac_exeext
-  if test "${ac_cv_search_dlopen+set}" = set; then
+rm -f core conftest.err conftest.$ac_objext conftest.beam \
+    conftest$ac_exeext
+  if test ${ac_cv_search_dlopen+y}
+then :
   break
 fi
 done
-if test "${ac_cv_search_dlopen+set}" = set; then
-  :
-else
+if test ${ac_cv_search_dlopen+y}
+then :
+
+else $as_nop
   ac_cv_search_dlopen=no
 fi
 rm conftest.$ac_ext
 LIBS=$ac_func_search_save_LIBS
 fi
-{ echo "$as_me:$LINENO: result: $ac_cv_search_dlopen" >&5
-echo "${ECHO_T}$ac_cv_search_dlopen" >&6; }
+{ printf "%s\n" "$as_me:${as_lineno-$LINENO}: result: $ac_cv_search_dlopen" >&5
+printf "%s\n" "$ac_cv_search_dlopen" >&6; }
 ac_res=$ac_cv_search_dlopen
-if test "$ac_res" != no; then
+if test "$ac_res" != no
+then :
   test "$ac_res" = "none required" || LIBS="$ac_res $LIBS"
 
 
@@ -15702,7 +13888,7 @@ for btng_log_vars_index in $btng_log_vars ; do
   else
     btng_log_vars_value="unset";
   fi
-  echo "configure:15705:" "After finding dl flag: $btng_log_vars_index is $btng_log_vars_value" >&5;
+  echo "configure:13891:" "After finding dl flag: $btng_log_vars_index is $btng_log_vars_value" >&5;
 done
 
 
@@ -15720,12 +13906,12 @@ for btng_log_vars_index in $btng_log_vars ; do
   else
     btng_log_vars_value="unset";
   fi
-  echo "configure:15723:" "Found dl library flag: $btng_log_vars_index is $btng_log_vars_value" >&5;
+  echo "configure:13909:" "Found dl library flag: $btng_log_vars_index is $btng_log_vars_value" >&5;
 done
 
 
 
-else
+else $as_nop
 
       # Action if NOT found ...
 
@@ -15738,7 +13924,7 @@ for btng_log_vars_index in $btng_log_vars ; do
   else
     btng_log_vars_value="unset";
   fi
-  echo "configure:15741:" "Did not find dl library flag: $btng_log_vars_index is $btng_log_vars_value" >&5;
+  echo "configure:13927:" "Did not find dl library flag: $btng_log_vars_index is $btng_log_vars_value" >&5;
 done
 
 
@@ -15749,7 +13935,7 @@ fi
     unset btng_extra_libs
     unset btng_save_LIBS
   else
-    echo "configure:15752:" Not looking for dl because dl_LIBS is already set >&5
+    echo "configure:13938:" Not looking for dl because dl_LIBS is already set >&5
   fi
 fi
 # End macro BTNG_VAR_SET_DL
@@ -15759,12 +13945,12 @@ fi
 if test "${dl_PREFIX+set}" = set; then
   if echo $target_os | grep '^linux' > /dev/null \
     && test ! "${dl_LIBS+set}" = set; then
-    { echo "$as_me:$LINENO: WARNING:
+    { printf "%s\n" "$as_me:${as_lineno-$LINENO}: WARNING:
 	The Linux dynamic loading library is not found.
 	This may cause problems with some libraries that use it.
 	In particular, we have seen that PETSc may use this library.
     " >&5
-echo "$as_me: WARNING:
+printf "%s\n" "$as_me: WARNING:
 	The Linux dynamic loading library is not found.
 	This may cause problems with some libraries that use it.
 	In particular, we have seen that PETSc may use this library.
@@ -15795,37 +13981,23 @@ ac_ext=f
 ac_compile='$F77 -c $FFLAGS conftest.$ac_ext >&5'
 ac_link='$F77 -o conftest$ac_exeext $FFLAGS $LDFLAGS conftest.$ac_ext $LIBS >&5'
 ac_compiler_gnu=$ac_cv_f77_compiler_gnu
-{ echo "$as_me:$LINENO: checking how to get verbose linking output from $F77" >&5
-echo $ECHO_N "checking how to get verbose linking output from $F77... $ECHO_C" >&6; }
-if test "${ac_cv_prog_f77_v+set}" = set; then
-  echo $ECHO_N "(cached) $ECHO_C" >&6
-else
-  cat >conftest.$ac_ext <<_ACEOF
+{ printf "%s\n" "$as_me:${as_lineno-$LINENO}: checking how to get verbose linking output from $F77" >&5
+printf %s "checking how to get verbose linking output from $F77... " >&6; }
+if test ${ac_cv_prog_f77_v+y}
+then :
+  printf %s "(cached) " >&6
+else $as_nop
+  cat > conftest.$ac_ext <<_ACEOF
       program main
 
       end
 _ACEOF
-rm -f conftest.$ac_objext
-if { (ac_try="$ac_compile"
-case "(($ac_try" in
-  *\"* | *\`* | *\\*) ac_try_echo=\$ac_try;;
-  *) ac_try_echo=$ac_try;;
-esac
-eval "echo \"\$as_me:$LINENO: $ac_try_echo\"") >&5
-  (eval "$ac_compile") 2>conftest.er1
-  ac_status=$?
-  grep -v '^ *+' conftest.er1 >conftest.err
-  rm -f conftest.er1
-  cat conftest.err >&5
-  echo "$as_me:$LINENO: \$? = $ac_status" >&5
-  (exit $ac_status); } && {
-	 test -z "$ac_f77_werror_flag" ||
-	 test ! -s conftest.err
-       } && test -s conftest.$ac_objext; then
+if ac_fn_f77_try_compile "$LINENO"
+then :
   ac_cv_prog_f77_v=
 # Try some options frequently used verbose output
 for ac_verb in -v -verbose --verbose -V -\#\#\#; do
-  cat >conftest.$ac_ext <<_ACEOF
+  cat > conftest.$ac_ext <<_ACEOF
       program main
 
       end
@@ -15839,27 +14011,38 @@ ac_save_FFLAGS=$FFLAGS
 FFLAGS="$FFLAGS $ac_verb"
 eval "set x $ac_link"
 shift
-echo "$as_me:$LINENO: $*" >&5
-ac_f77_v_output=`eval $ac_link 5>&1 2>&1 | grep -v 'Driving:'`
-echo "$ac_f77_v_output" >&5
+printf "%s\n" "$as_me:${as_lineno-$LINENO}: $*" >&5
+# gfortran 4.3 outputs lines setting COLLECT_GCC_OPTIONS, COMPILER_PATH,
+# LIBRARY_PATH; skip all such settings.
+ac_f77_v_output=`eval $ac_link 5>&1 2>&1 |
+  sed '/^Driving:/d; /^Configured with:/d;
+      '"/^[_$as_cr_Letters][_$as_cr_alnum]*=/d"`
+printf "%s\n" "$ac_f77_v_output" >&5
 FFLAGS=$ac_save_FFLAGS
 
-rm -f conftest*
+rm -rf conftest*
 
 # On HP/UX there is a line like: "LPATH is: /foo:/bar:/baz" where
 # /foo, /bar, and /baz are search directories for the Fortran linker.
 # Here, we change these into -L/foo -L/bar -L/baz (and put it first):
 ac_f77_v_output="`echo $ac_f77_v_output |
 	grep 'LPATH is:' |
-	sed 's,.*LPATH is\(: *[^ ]*\).*,\1,;s,: */, -L/,g'` $ac_f77_v_output"
+	sed 's|.*LPATH is\(: *[^ ]*\).*|\1|;s|: */| -L/|g'` $ac_f77_v_output"
 
 # FIXME: we keep getting bitten by quoted arguments; a more general fix
 #        that detects unbalanced quotes in FLIBS should be implemented
 #        and (ugh) tested at some point.
 case $ac_f77_v_output in
-  # If we are using xlf then replace all the commas with spaces.
+  # With xlf replace commas with spaces,
+  # and remove "-link" and closing parenthesis.
   *xlfentry*)
-    ac_f77_v_output=`echo $ac_f77_v_output | sed 's/,/ /g'` ;;
+    ac_f77_v_output=`echo $ac_f77_v_output |
+      sed '
+        s/,/ /g
+        s/ -link / /g
+        s/) *$//
+      '
+    ` ;;
 
   # With Intel ifc, ignore the quoted -mGLOB_options_string stuff (quoted
   # $LIBS confuse us, and the libraries appear later in the output anyway).
@@ -15871,9 +14054,19 @@ case $ac_f77_v_output in
   # Doubly-quoted arguments were reported for "PGF90/x86 Linux/x86 5.0-2".
   *-cmdline\ * | *-ignore\ * | *-def\ *)
     ac_f77_v_output=`echo $ac_f77_v_output | sed "\
-        s/-cmdline  *'[^']*'/ /g; s/-cmdline  *\"[^\"]*\"/ /g
-        s/-ignore  *'[^']*'/ /g; s/-ignore  *\"[^\"]*\"/ /g
-        s/-def  *'[^']*'/ /g; s/-def  *\"[^\"]*\"/ /g"` ;;
+	s/-cmdline  *'[^']*'/ /g; s/-cmdline  *\"[^\"]*\"/ /g
+	s/-ignore  *'[^']*'/ /g; s/-ignore  *\"[^\"]*\"/ /g
+	s/-def  *'[^']*'/ /g; s/-def  *\"[^\"]*\"/ /g"` ;;
+
+  # If we are using fort77 (the f2c wrapper) then filter output and delete quotes.
+  *fort77*f2c*gcc*)
+    ac_f77_v_output=`echo "$ac_f77_v_output" | sed -n '
+        /:[	 ]\+Running[	 ]\{1,\}"gcc"/{
+          /"-c"/d
+          /[.]c"*/d
+          s/^.*"gcc"/"gcc"/
+          s/"//gp
+        }'` ;;
 
   # If we are using Cray Fortran then delete quotes.
   *cft90*)
@@ -15884,39 +14077,36 @@ esac
   # look for -l* and *.a constructs in the output
   for ac_arg in $ac_f77_v_output; do
      case $ac_arg in
-        [\\/]*.a | ?:[\\/]*.a | -[lLRu]*)
-          ac_cv_prog_f77_v=$ac_verb
-          break 2 ;;
+	[\\/]*.a | ?:[\\/]*.a | -[lLRu]*)
+	  ac_cv_prog_f77_v=$ac_verb
+	  break 2 ;;
      esac
   done
 done
 if test -z "$ac_cv_prog_f77_v"; then
-   { echo "$as_me:$LINENO: WARNING: cannot determine how to obtain linking information from $F77" >&5
-echo "$as_me: WARNING: cannot determine how to obtain linking information from $F77" >&2;}
+   { printf "%s\n" "$as_me:${as_lineno-$LINENO}: WARNING: cannot determine how to obtain linking information from $F77" >&5
+printf "%s\n" "$as_me: WARNING: cannot determine how to obtain linking information from $F77" >&2;}
 fi
-else
-  echo "$as_me: failed program was:" >&5
-sed 's/^/| /' conftest.$ac_ext >&5
-
-	{ echo "$as_me:$LINENO: WARNING: compilation failed" >&5
-echo "$as_me: WARNING: compilation failed" >&2;}
+else $as_nop
+  { printf "%s\n" "$as_me:${as_lineno-$LINENO}: WARNING: compilation failed" >&5
+printf "%s\n" "$as_me: WARNING: compilation failed" >&2;}
 fi
-
-rm -f core conftest.err conftest.$ac_objext conftest.$ac_ext
+rm -f core conftest.err conftest.$ac_objext conftest.beam conftest.$ac_ext
 
 fi
-{ echo "$as_me:$LINENO: result: $ac_cv_prog_f77_v" >&5
-echo "${ECHO_T}$ac_cv_prog_f77_v" >&6; }
-{ echo "$as_me:$LINENO: checking for Fortran 77 libraries of $F77" >&5
-echo $ECHO_N "checking for Fortran 77 libraries of $F77... $ECHO_C" >&6; }
-if test "${ac_cv_f77_libs+set}" = set; then
-  echo $ECHO_N "(cached) $ECHO_C" >&6
-else
+{ printf "%s\n" "$as_me:${as_lineno-$LINENO}: result: $ac_cv_prog_f77_v" >&5
+printf "%s\n" "$ac_cv_prog_f77_v" >&6; }
+{ printf "%s\n" "$as_me:${as_lineno-$LINENO}: checking for Fortran 77 libraries of $F77" >&5
+printf %s "checking for Fortran 77 libraries of $F77... " >&6; }
+if test ${ac_cv_f77_libs+y}
+then :
+  printf %s "(cached) " >&6
+else $as_nop
   if test "x$FLIBS" != "x"; then
   ac_cv_f77_libs="$FLIBS" # Let the user override the test.
 else
 
-cat >conftest.$ac_ext <<_ACEOF
+cat > conftest.$ac_ext <<_ACEOF
       program main
 
       end
@@ -15930,27 +14120,38 @@ ac_save_FFLAGS=$FFLAGS
 FFLAGS="$FFLAGS $ac_cv_prog_f77_v"
 eval "set x $ac_link"
 shift
-echo "$as_me:$LINENO: $*" >&5
-ac_f77_v_output=`eval $ac_link 5>&1 2>&1 | grep -v 'Driving:'`
-echo "$ac_f77_v_output" >&5
+printf "%s\n" "$as_me:${as_lineno-$LINENO}: $*" >&5
+# gfortran 4.3 outputs lines setting COLLECT_GCC_OPTIONS, COMPILER_PATH,
+# LIBRARY_PATH; skip all such settings.
+ac_f77_v_output=`eval $ac_link 5>&1 2>&1 |
+  sed '/^Driving:/d; /^Configured with:/d;
+      '"/^[_$as_cr_Letters][_$as_cr_alnum]*=/d"`
+printf "%s\n" "$ac_f77_v_output" >&5
 FFLAGS=$ac_save_FFLAGS
 
-rm -f conftest*
+rm -rf conftest*
 
 # On HP/UX there is a line like: "LPATH is: /foo:/bar:/baz" where
 # /foo, /bar, and /baz are search directories for the Fortran linker.
 # Here, we change these into -L/foo -L/bar -L/baz (and put it first):
 ac_f77_v_output="`echo $ac_f77_v_output |
 	grep 'LPATH is:' |
-	sed 's,.*LPATH is\(: *[^ ]*\).*,\1,;s,: */, -L/,g'` $ac_f77_v_output"
+	sed 's|.*LPATH is\(: *[^ ]*\).*|\1|;s|: */| -L/|g'` $ac_f77_v_output"
 
 # FIXME: we keep getting bitten by quoted arguments; a more general fix
 #        that detects unbalanced quotes in FLIBS should be implemented
 #        and (ugh) tested at some point.
 case $ac_f77_v_output in
-  # If we are using xlf then replace all the commas with spaces.
+  # With xlf replace commas with spaces,
+  # and remove "-link" and closing parenthesis.
   *xlfentry*)
-    ac_f77_v_output=`echo $ac_f77_v_output | sed 's/,/ /g'` ;;
+    ac_f77_v_output=`echo $ac_f77_v_output |
+      sed '
+        s/,/ /g
+        s/ -link / /g
+        s/) *$//
+      '
+    ` ;;
 
   # With Intel ifc, ignore the quoted -mGLOB_options_string stuff (quoted
   # $LIBS confuse us, and the libraries appear later in the output anyway).
@@ -15962,9 +14163,19 @@ case $ac_f77_v_output in
   # Doubly-quoted arguments were reported for "PGF90/x86 Linux/x86 5.0-2".
   *-cmdline\ * | *-ignore\ * | *-def\ *)
     ac_f77_v_output=`echo $ac_f77_v_output | sed "\
-        s/-cmdline  *'[^']*'/ /g; s/-cmdline  *\"[^\"]*\"/ /g
-        s/-ignore  *'[^']*'/ /g; s/-ignore  *\"[^\"]*\"/ /g
-        s/-def  *'[^']*'/ /g; s/-def  *\"[^\"]*\"/ /g"` ;;
+	s/-cmdline  *'[^']*'/ /g; s/-cmdline  *\"[^\"]*\"/ /g
+	s/-ignore  *'[^']*'/ /g; s/-ignore  *\"[^\"]*\"/ /g
+	s/-def  *'[^']*'/ /g; s/-def  *\"[^\"]*\"/ /g"` ;;
+
+  # If we are using fort77 (the f2c wrapper) then filter output and delete quotes.
+  *fort77*f2c*gcc*)
+    ac_f77_v_output=`echo "$ac_f77_v_output" | sed -n '
+        /:[	 ]\+Running[	 ]\{1,\}"gcc"/{
+          /"-c"/d
+          /[.]c"*/d
+          s/^.*"gcc"/"gcc"/
+          s/"//gp
+        }'` ;;
 
   # If we are using Cray Fortran then delete quotes.
   *cft90*)
@@ -15983,8 +14194,8 @@ while test $# != 1; do
   shift
   ac_arg=$1
   case $ac_arg in
-        [\\/]*.a | ?:[\\/]*.a)
-            ac_exists=false
+	[\\/]*.a | ?:[\\/]*.a)
+	    ac_exists=false
   for ac_i in $ac_cv_f77_libs; do
     if test x"$ac_arg" = x"$ac_i"; then
       ac_exists=true
@@ -15992,15 +14203,15 @@ while test $# != 1; do
     fi
   done
 
-  if test x"$ac_exists" = xtrue; then
-  :
-else
+  if test x"$ac_exists" = xtrue
+then :
+
+else $as_nop
   ac_cv_f77_libs="$ac_cv_f77_libs $ac_arg"
 fi
-
-          ;;
-        -bI:*)
-            ac_exists=false
+	  ;;
+	-bI:*)
+	    ac_exists=false
   for ac_i in $ac_cv_f77_libs; do
     if test x"$ac_arg" = x"$ac_i"; then
       ac_exists=true
@@ -16008,9 +14219,10 @@ fi
     fi
   done
 
-  if test x"$ac_exists" = xtrue; then
-  :
-else
+  if test x"$ac_exists" = xtrue
+then :
+
+else $as_nop
   if test "$ac_compiler_gnu" = yes; then
   for ac_link_opt in $ac_arg; do
     ac_cv_f77_libs="$ac_cv_f77_libs -Xlinker $ac_link_opt"
@@ -16019,18 +14231,37 @@ else
   ac_cv_f77_libs="$ac_cv_f77_libs $ac_arg"
 fi
 fi
+	  ;;
+	  # Ignore these flags.
+	-lang* | -lcrt*.o | -lc | -lgcc* | -lSystem | -libmil | -little \
+	  |-LANG:=* | -LIST:* | -LNO:* | -link)
+	  ;;
+	-lkernel32)
+	  # Ignore this library only on Windows-like systems.
+	  case $host_os in
+	  cygwin* | msys* ) ;;
+	  *)
+	    ac_exists=false
+  for ac_i in $ac_cv_f77_libs; do
+    if test x"$ac_arg" = x"$ac_i"; then
+      ac_exists=true
+      break
+    fi
+  done
 
-          ;;
-          # Ignore these flags.
-        -lang* | -lcrt*.o | -lc | -lgcc* | -lSystem | -libmil | -LANG:=* | -LIST:* | -LNO:*)
-          ;;
-        -lkernel32)
-          test x"$CYGWIN" != xyes && ac_cv_f77_libs="$ac_cv_f77_libs $ac_arg"
-          ;;
-        -[LRuYz])
-          # These flags, when seen by themselves, take an argument.
-          # We remove the space between option and argument and re-iterate
-          # unless we find an empty arg or a new option (starting with -)
+  if test x"$ac_exists" = xtrue
+then :
+
+else $as_nop
+  ac_cv_f77_libs="$ac_cv_f77_libs $ac_arg"
+fi
+	    ;;
+	  esac
+	  ;;
+	-[LRuYz])
+	  # These flags, when seen by themselves, take an argument.
+	  # We remove the space between option and argument and re-iterate
+	  # unless we find an empty arg or a new option (starting with -)
 	  case $2 in
 	     "" | -*);;
 	     *)
@@ -16039,10 +14270,10 @@ fi
 		set X $ac_arg "$@"
 		;;
 	  esac
-          ;;
-        -YP,*)
-          for ac_j in `echo $ac_arg | sed -e 's/-YP,/-L/;s/:/ -L/g'`; do
-              ac_exists=false
+	  ;;
+	-YP,*)
+	  for ac_j in `printf "%s\n" "$ac_arg" | sed -e 's/-YP,/-L/;s/:/ -L/g'`; do
+	      ac_exists=false
   for ac_i in $ac_cv_f77_libs; do
     if test x"$ac_j" = x"$ac_i"; then
       ac_exists=true
@@ -16050,17 +14281,17 @@ fi
     fi
   done
 
-  if test x"$ac_exists" = xtrue; then
-  :
-else
+  if test x"$ac_exists" = xtrue
+then :
+
+else $as_nop
   ac_arg="$ac_arg $ac_j"
-                               ac_cv_f77_libs="$ac_cv_f77_libs $ac_j"
+			       ac_cv_f77_libs="$ac_cv_f77_libs $ac_j"
 fi
-
-          done
-          ;;
-        -[lLR]*)
-            ac_exists=false
+	  done
+	  ;;
+	-[lLR]*)
+	    ac_exists=false
   for ac_i in $ac_cv_f77_libs; do
     if test x"$ac_arg" = x"$ac_i"; then
       ac_exists=true
@@ -16068,17 +14299,18 @@ fi
     fi
   done
 
-  if test x"$ac_exists" = xtrue; then
-  :
-else
+  if test x"$ac_exists" = xtrue
+then :
+
+else $as_nop
   ac_cv_f77_libs="$ac_cv_f77_libs $ac_arg"
 fi
-
-          ;;
+	  ;;
 	-zallextract*| -zdefaultextract)
 	  ac_cv_f77_libs="$ac_cv_f77_libs $ac_arg"
 	  ;;
-          # Ignore everything else.
+	-mllvm) ${2+shift};; # Defend against 'clang -mllvm -loopopt=0'.
+	  # Ignore everything else.
   esac
 done
 # restore positional arguments
@@ -16089,10 +14321,10 @@ set X $ac_save_positional; shift
 # must begin with a "/").
 case `(uname -sr) 2>/dev/null` in
    "SunOS 5"*)
-      ac_ld_run_path=`echo $ac_f77_v_output |
-                        sed -n 's,^.*LD_RUN_PATH *= *\(/[^ ]*\).*$,-R\1,p'`
+      ac_ld_run_path=`printf "%s\n" "$ac_f77_v_output" |
+			sed -n 's,^.*LD_RUN_PATH *= *\(/[^ ]*\).*$,-R\1,p'`
       test "x$ac_ld_run_path" != x &&
-        if test "$ac_compiler_gnu" = yes; then
+	if test "$ac_compiler_gnu" = yes; then
   for ac_link_opt in $ac_ld_run_path; do
     ac_cv_f77_libs="$ac_cv_f77_libs -Xlinker $ac_link_opt"
   done
@@ -16104,9 +14336,9 @@ esac
 fi # test "x$[]_AC_LANG_PREFIX[]LIBS" = "x"
 
 fi
-{ echo "$as_me:$LINENO: result: $ac_cv_f77_libs" >&5
-echo "${ECHO_T}$ac_cv_f77_libs" >&6; }
-FLIBS="$ac_cv_f77_libs"
+{ printf "%s\n" "$as_me:${as_lineno-$LINENO}: result: $ac_cv_f77_libs" >&5
+printf "%s\n" "$ac_cv_f77_libs" >&6; }
+FLIBS="" # We never use FLIBS and it sometimes has quotes it in it, so disable it completely
 
 
 ac_ext=c
@@ -16138,7 +14370,7 @@ for btng_log_vars_index in $btng_log_vars ; do
   else
     btng_log_vars_value="unset";
   fi
-  echo "configure:16141:" "after using ac_f77_library_ldflags: $btng_log_vars_index is $btng_log_vars_value" >&5;
+  echo "configure:14373:" "after using ac_f77_library_ldflags: $btng_log_vars_index is $btng_log_vars_value" >&5;
 done
 
 
@@ -16150,15 +14382,17 @@ done
 
 
 # Start macro BTNG_ARG_WITH_ENV_WRAPPER with args nsl and nsl_PREFIX
-{ echo "$as_me:$LINENO: checking for nsl" >&5
-echo $ECHO_N "checking for nsl... $ECHO_C" >&6; }
-if test "${btng_cv_prog_nsl+set}" = set; then
-  echo $ECHO_N "(cached) $ECHO_C" >&6
-else
+{ printf "%s\n" "$as_me:${as_lineno-$LINENO}: checking for nsl" >&5
+printf %s "checking for nsl... " >&6; }
+if test ${btng_cv_prog_nsl+y}
+then :
+  printf %s "(cached) " >&6
+else $as_nop
 
 
 # Check whether --with-nsl was given.
-if test "${with_nsl+set}" = set; then
+if test ${with_nsl+y}
+then :
   withval=$with_nsl;
 fi
 
@@ -16198,8 +14432,8 @@ if test "${nsl_PREFIX+set}" = set ; then
 fi
 
 fi
-{ echo "$as_me:$LINENO: result: $btng_cv_prog_nsl" >&5
-echo "${ECHO_T}$btng_cv_prog_nsl" >&6; }
+{ printf "%s\n" "$as_me:${as_lineno-$LINENO}: result: $btng_cv_prog_nsl" >&5
+printf "%s\n" "$btng_cv_prog_nsl" >&6; }
 # Set nsl_PREFIX from cache.
 # nsl_PREFIX is not yet set if we grabbed it from cache.
 if test "${btng_cv_prog_nsl+set}" = set ; then
@@ -16219,7 +14453,7 @@ for btng_log_vars_index in $btng_log_vars ; do
   else
     btng_log_vars_value="unset";
   fi
-  echo "configure:16222:" "before looking: $btng_log_vars_index is $btng_log_vars_value" >&5;
+  echo "configure:14456:" "before looking: $btng_log_vars_index is $btng_log_vars_value" >&5;
 done
 
 
@@ -16228,15 +14462,17 @@ done
 # Start macro BTNG_ARG_WITH_PREFIX
 
 # Start macro BTNG_ARG_WITH_ENV_WRAPPER with args nsl-includes and nsl_INCLUDES
-{ echo "$as_me:$LINENO: checking for nsl-includes" >&5
-echo $ECHO_N "checking for nsl-includes... $ECHO_C" >&6; }
-if test "${btng_cv_prog_nsl_includes+set}" = set; then
-  echo $ECHO_N "(cached) $ECHO_C" >&6
-else
+{ printf "%s\n" "$as_me:${as_lineno-$LINENO}: checking for nsl-includes" >&5
+printf %s "checking for nsl-includes... " >&6; }
+if test ${btng_cv_prog_nsl_includes+y}
+then :
+  printf %s "(cached) " >&6
+else $as_nop
 
 
 # Check whether --with-nsl-includes was given.
-if test "${with_nsl_includes+set}" = set; then
+if test ${with_nsl_includes+y}
+then :
   withval=$with_nsl_includes;
 fi
 
@@ -16258,11 +14494,9 @@ case "$with_nsl_includes" in
       : Nothing to do here actually, because nsl_INCLUDES is already in the environment.
     else
       if test "${with_nsl_includes}" = yes ; then
-  { { echo "$as_me:$LINENO: error: If you specify --with-nsl-includes, you must give it the path as in --with-nsl-includes=/installation/path" >&5
-echo "$as_me: error: If you specify --with-nsl-includes, you must give it the path as in --with-nsl-includes=/installation/path" >&2;}
-   { (exit 1); exit 1; }; }
+  as_fn_error $? "If you specify --with-nsl-includes, you must give it the path as in --with-nsl-includes=/installation/path" "$LINENO" 5
 fi
-echo "configure:16265:" environment nsl_INCLUDES not defined >&5
+echo "configure:14499:" environment nsl_INCLUDES not defined >&5
 
 
     fi
@@ -16283,8 +14517,8 @@ if test "${nsl_INCLUDES+set}" = set ; then
 fi
 
 fi
-{ echo "$as_me:$LINENO: result: $btng_cv_prog_nsl_includes" >&5
-echo "${ECHO_T}$btng_cv_prog_nsl_includes" >&6; }
+{ printf "%s\n" "$as_me:${as_lineno-$LINENO}: result: $btng_cv_prog_nsl_includes" >&5
+printf "%s\n" "$btng_cv_prog_nsl_includes" >&6; }
 # Set nsl_INCLUDES from cache.
 # nsl_INCLUDES is not yet set if we grabbed it from cache.
 if test "${btng_cv_prog_nsl_includes+set}" = set ; then
@@ -16299,15 +14533,17 @@ fi
 # Start macro BTNG_ARG_WITH_PREFIX
 
 # Start macro BTNG_ARG_WITH_ENV_WRAPPER with args nsl-libs and nsl_LIBS
-{ echo "$as_me:$LINENO: checking for nsl-libs" >&5
-echo $ECHO_N "checking for nsl-libs... $ECHO_C" >&6; }
-if test "${btng_cv_prog_nsl_libs+set}" = set; then
-  echo $ECHO_N "(cached) $ECHO_C" >&6
-else
+{ printf "%s\n" "$as_me:${as_lineno-$LINENO}: checking for nsl-libs" >&5
+printf %s "checking for nsl-libs... " >&6; }
+if test ${btng_cv_prog_nsl_libs+y}
+then :
+  printf %s "(cached) " >&6
+else $as_nop
 
 
 # Check whether --with-nsl-libs was given.
-if test "${with_nsl_libs+set}" = set; then
+if test ${with_nsl_libs+y}
+then :
   withval=$with_nsl_libs;
 fi
 
@@ -16329,11 +14565,9 @@ case "$with_nsl_libs" in
       : Nothing to do here actually, because nsl_LIBS is already in the environment.
     else
       if test "${with_nsl_libs}" = yes ; then
-  { { echo "$as_me:$LINENO: error: If you specify --with-nsl-libs, you must give it the path as in --with-nsl-libs=/installation/path" >&5
-echo "$as_me: error: If you specify --with-nsl-libs, you must give it the path as in --with-nsl-libs=/installation/path" >&2;}
-   { (exit 1); exit 1; }; }
+  as_fn_error $? "If you specify --with-nsl-libs, you must give it the path as in --with-nsl-libs=/installation/path" "$LINENO" 5
 fi
-echo "configure:16336:" environment nsl_LIBS not defined >&5
+echo "configure:14570:" environment nsl_LIBS not defined >&5
 
 
     fi
@@ -16354,8 +14588,8 @@ if test "${nsl_LIBS+set}" = set ; then
 fi
 
 fi
-{ echo "$as_me:$LINENO: result: $btng_cv_prog_nsl_libs" >&5
-echo "${ECHO_T}$btng_cv_prog_nsl_libs" >&6; }
+{ printf "%s\n" "$as_me:${as_lineno-$LINENO}: result: $btng_cv_prog_nsl_libs" >&5
+printf "%s\n" "$btng_cv_prog_nsl_libs" >&6; }
 # Set nsl_LIBS from cache.
 # nsl_LIBS is not yet set if we grabbed it from cache.
 if test "${btng_cv_prog_nsl_libs+set}" = set ; then
@@ -16381,25 +14615,19 @@ if test "${nsl_PREFIX+set}" = set ; then
     # If path is given, add path to extra flag for library search.
     test -n "${nsl_PREFIX}" && btng_extra_libs="-L${nsl_PREFIX}/lib $btng_extra_libs"
     # Look for library.
-    { echo "$as_me:$LINENO: checking for library containing getnetname" >&5
-echo $ECHO_N "checking for library containing getnetname... $ECHO_C" >&6; }
-if test "${ac_cv_search_getnetname+set}" = set; then
-  echo $ECHO_N "(cached) $ECHO_C" >&6
-else
+    { printf "%s\n" "$as_me:${as_lineno-$LINENO}: checking for library containing getnetname" >&5
+printf %s "checking for library containing getnetname... " >&6; }
+if test ${ac_cv_search_getnetname+y}
+then :
+  printf %s "(cached) " >&6
+else $as_nop
   ac_func_search_save_LIBS=$LIBS
-cat >conftest.$ac_ext <<_ACEOF
-/* confdefs.h.  */
-_ACEOF
-cat confdefs.h >>conftest.$ac_ext
-cat >>conftest.$ac_ext <<_ACEOF
+cat confdefs.h - <<_ACEOF >conftest.$ac_ext
 /* end confdefs.h.  */
 
 /* Override any GCC internal prototype to avoid an error.
    Use char because int might match the return type of a GCC
    builtin and then its argument prototype would still apply.  */
-#ifdef __cplusplus
-extern "C"
-#endif
 char getnetname ();
 #ifdef F77_DUMMY_MAIN
 
@@ -16410,64 +14638,46 @@ char getnetname ();
 
 #endif
 int
-main ()
+main (void)
 {
 return getnetname ();
   ;
   return 0;
 }
 _ACEOF
-for ac_lib in '' nsl; do
+for ac_lib in '' nsl
+do
   if test -z "$ac_lib"; then
     ac_res="none required"
   else
     ac_res=-l$ac_lib
     LIBS="-l$ac_lib $btng_extra_libs $ac_func_search_save_LIBS"
   fi
-  rm -f conftest.$ac_objext conftest$ac_exeext
-if { (ac_try="$ac_link"
-case "(($ac_try" in
-  *\"* | *\`* | *\\*) ac_try_echo=\$ac_try;;
-  *) ac_try_echo=$ac_try;;
-esac
-eval "echo \"\$as_me:$LINENO: $ac_try_echo\"") >&5
-  (eval "$ac_link") 2>conftest.er1
-  ac_status=$?
-  grep -v '^ *+' conftest.er1 >conftest.err
-  rm -f conftest.er1
-  cat conftest.err >&5
-  echo "$as_me:$LINENO: \$? = $ac_status" >&5
-  (exit $ac_status); } && {
-	 test -z "$ac_c_werror_flag" ||
-	 test ! -s conftest.err
-       } && test -s conftest$ac_exeext &&
-       $as_test_x conftest$ac_exeext; then
+  if ac_fn_c_try_link "$LINENO"
+then :
   ac_cv_search_getnetname=$ac_res
-else
-  echo "$as_me: failed program was:" >&5
-sed 's/^/| /' conftest.$ac_ext >&5
-
-
 fi
-
-rm -f core conftest.err conftest.$ac_objext conftest_ipa8_conftest.oo \
-      conftest$ac_exeext
-  if test "${ac_cv_search_getnetname+set}" = set; then
+rm -f core conftest.err conftest.$ac_objext conftest.beam \
+    conftest$ac_exeext
+  if test ${ac_cv_search_getnetname+y}
+then :
   break
 fi
 done
-if test "${ac_cv_search_getnetname+set}" = set; then
-  :
-else
+if test ${ac_cv_search_getnetname+y}
+then :
+
+else $as_nop
   ac_cv_search_getnetname=no
 fi
 rm conftest.$ac_ext
 LIBS=$ac_func_search_save_LIBS
 fi
-{ echo "$as_me:$LINENO: result: $ac_cv_search_getnetname" >&5
-echo "${ECHO_T}$ac_cv_search_getnetname" >&6; }
+{ printf "%s\n" "$as_me:${as_lineno-$LINENO}: result: $ac_cv_search_getnetname" >&5
+printf "%s\n" "$ac_cv_search_getnetname" >&6; }
 ac_res=$ac_cv_search_getnetname
-if test "$ac_res" != no; then
+if test "$ac_res" != no
+then :
   test "$ac_res" = "none required" || LIBS="$ac_res $LIBS"
 
 
@@ -16480,7 +14690,7 @@ for btng_log_vars_index in $btng_log_vars ; do
   else
     btng_log_vars_value="unset";
   fi
-  echo "configure:16483:" "After finding nsl flag: $btng_log_vars_index is $btng_log_vars_value" >&5;
+  echo "configure:14693:" "After finding nsl flag: $btng_log_vars_index is $btng_log_vars_value" >&5;
 done
 
 
@@ -16498,12 +14708,12 @@ for btng_log_vars_index in $btng_log_vars ; do
   else
     btng_log_vars_value="unset";
   fi
-  echo "configure:16501:" "Found nsl library flag: $btng_log_vars_index is $btng_log_vars_value" >&5;
+  echo "configure:14711:" "Found nsl library flag: $btng_log_vars_index is $btng_log_vars_value" >&5;
 done
 
 
 
-else
+else $as_nop
 
       # Action if NOT found ...
 
@@ -16516,7 +14726,7 @@ for btng_log_vars_index in $btng_log_vars ; do
   else
     btng_log_vars_value="unset";
   fi
-  echo "configure:16519:" "Did not find nsl library flag: $btng_log_vars_index is $btng_log_vars_value" >&5;
+  echo "configure:14729:" "Did not find nsl library flag: $btng_log_vars_index is $btng_log_vars_value" >&5;
 done
 
 
@@ -16527,7 +14737,7 @@ fi
     unset btng_extra_libs
     unset btng_save_LIBS
   else
-    echo "configure:16530:" Not looking for nsl because nsl_LIBS is already set >&5
+    echo "configure:14740:" Not looking for nsl because nsl_LIBS is already set >&5
   fi
 fi
 
@@ -16558,15 +14768,17 @@ fi
 
 
 # Start macro BTNG_ARG_WITH_ENV_WRAPPER with args libz and libz_PREFIX
-{ echo "$as_me:$LINENO: checking for libz" >&5
-echo $ECHO_N "checking for libz... $ECHO_C" >&6; }
-if test "${btng_cv_prog_libz+set}" = set; then
-  echo $ECHO_N "(cached) $ECHO_C" >&6
-else
+{ printf "%s\n" "$as_me:${as_lineno-$LINENO}: checking for libz" >&5
+printf %s "checking for libz... " >&6; }
+if test ${btng_cv_prog_libz+y}
+then :
+  printf %s "(cached) " >&6
+else $as_nop
 
 
 # Check whether --with-libz was given.
-if test "${with_libz+set}" = set; then
+if test ${with_libz+y}
+then :
   withval=$with_libz;
 fi
 
@@ -16606,8 +14818,8 @@ if test "${libz_PREFIX+set}" = set ; then
 fi
 
 fi
-{ echo "$as_me:$LINENO: result: $btng_cv_prog_libz" >&5
-echo "${ECHO_T}$btng_cv_prog_libz" >&6; }
+{ printf "%s\n" "$as_me:${as_lineno-$LINENO}: result: $btng_cv_prog_libz" >&5
+printf "%s\n" "$btng_cv_prog_libz" >&6; }
 # Set libz_PREFIX from cache.
 # libz_PREFIX is not yet set if we grabbed it from cache.
 if test "${btng_cv_prog_libz+set}" = set ; then
@@ -16622,15 +14834,17 @@ fi
 # Start macro BTNG_ARG_WITH_PREFIX
 
 # Start macro BTNG_ARG_WITH_ENV_WRAPPER with args libz-includes and libz_INCLUDES
-{ echo "$as_me:$LINENO: checking for libz-includes" >&5
-echo $ECHO_N "checking for libz-includes... $ECHO_C" >&6; }
-if test "${btng_cv_prog_libz_includes+set}" = set; then
-  echo $ECHO_N "(cached) $ECHO_C" >&6
-else
+{ printf "%s\n" "$as_me:${as_lineno-$LINENO}: checking for libz-includes" >&5
+printf %s "checking for libz-includes... " >&6; }
+if test ${btng_cv_prog_libz_includes+y}
+then :
+  printf %s "(cached) " >&6
+else $as_nop
 
 
 # Check whether --with-libz-includes was given.
-if test "${with_libz_includes+set}" = set; then
+if test ${with_libz_includes+y}
+then :
   withval=$with_libz_includes;
 fi
 
@@ -16652,11 +14866,9 @@ case "$with_libz_includes" in
       : Nothing to do here actually, because libz_INCLUDES is already in the environment.
     else
       if test "${with_libz_includes}" = yes ; then
-  { { echo "$as_me:$LINENO: error: If you specify --with-libz-includes, you must give it the path as in --with-libz-includes=/installation/path" >&5
-echo "$as_me: error: If you specify --with-libz-includes, you must give it the path as in --with-libz-includes=/installation/path" >&2;}
-   { (exit 1); exit 1; }; }
+  as_fn_error $? "If you specify --with-libz-includes, you must give it the path as in --with-libz-includes=/installation/path" "$LINENO" 5
 fi
-echo "configure:16659:" environment libz_INCLUDES not defined >&5
+echo "configure:14871:" environment libz_INCLUDES not defined >&5
 
 
     fi
@@ -16677,8 +14889,8 @@ if test "${libz_INCLUDES+set}" = set ; then
 fi
 
 fi
-{ echo "$as_me:$LINENO: result: $btng_cv_prog_libz_includes" >&5
-echo "${ECHO_T}$btng_cv_prog_libz_includes" >&6; }
+{ printf "%s\n" "$as_me:${as_lineno-$LINENO}: result: $btng_cv_prog_libz_includes" >&5
+printf "%s\n" "$btng_cv_prog_libz_includes" >&6; }
 # Set libz_INCLUDES from cache.
 # libz_INCLUDES is not yet set if we grabbed it from cache.
 if test "${btng_cv_prog_libz_includes+set}" = set ; then
@@ -16693,15 +14905,17 @@ fi
 # Start macro BTNG_ARG_WITH_PREFIX
 
 # Start macro BTNG_ARG_WITH_ENV_WRAPPER with args libz-libs and libz_LIBS
-{ echo "$as_me:$LINENO: checking for libz-libs" >&5
-echo $ECHO_N "checking for libz-libs... $ECHO_C" >&6; }
-if test "${btng_cv_prog_libz_libs+set}" = set; then
-  echo $ECHO_N "(cached) $ECHO_C" >&6
-else
+{ printf "%s\n" "$as_me:${as_lineno-$LINENO}: checking for libz-libs" >&5
+printf %s "checking for libz-libs... " >&6; }
+if test ${btng_cv_prog_libz_libs+y}
+then :
+  printf %s "(cached) " >&6
+else $as_nop
 
 
 # Check whether --with-libz-libs was given.
-if test "${with_libz_libs+set}" = set; then
+if test ${with_libz_libs+y}
+then :
   withval=$with_libz_libs;
 fi
 
@@ -16723,11 +14937,9 @@ case "$with_libz_libs" in
       : Nothing to do here actually, because libz_LIBS is already in the environment.
     else
       if test "${with_libz_libs}" = yes ; then
-  { { echo "$as_me:$LINENO: error: If you specify --with-libz-libs, you must give it the path as in --with-libz-libs=/installation/path" >&5
-echo "$as_me: error: If you specify --with-libz-libs, you must give it the path as in --with-libz-libs=/installation/path" >&2;}
-   { (exit 1); exit 1; }; }
+  as_fn_error $? "If you specify --with-libz-libs, you must give it the path as in --with-libz-libs=/installation/path" "$LINENO" 5
 fi
-echo "configure:16730:" environment libz_LIBS not defined >&5
+echo "configure:14942:" environment libz_LIBS not defined >&5
 
 
     fi
@@ -16748,8 +14960,8 @@ if test "${libz_LIBS+set}" = set ; then
 fi
 
 fi
-{ echo "$as_me:$LINENO: result: $btng_cv_prog_libz_libs" >&5
-echo "${ECHO_T}$btng_cv_prog_libz_libs" >&6; }
+{ printf "%s\n" "$as_me:${as_lineno-$LINENO}: result: $btng_cv_prog_libz_libs" >&5
+printf "%s\n" "$btng_cv_prog_libz_libs" >&6; }
 # Set libz_LIBS from cache.
 # libz_LIBS is not yet set if we grabbed it from cache.
 if test "${btng_cv_prog_libz_libs+set}" = set ; then
@@ -16776,25 +14988,19 @@ if test "${libz_PREFIX+set}" = set ; then
     # If path is given, add path to extra flag for library search.
     test -n "${libz_PREFIX}" && btng_extra_libs="-L${libz_PREFIX}/lib $btng_extra_libs"
     # Look for library.
-    { echo "$as_me:$LINENO: checking for library containing zlibVersion" >&5
-echo $ECHO_N "checking for library containing zlibVersion... $ECHO_C" >&6; }
-if test "${ac_cv_search_zlibVersion+set}" = set; then
-  echo $ECHO_N "(cached) $ECHO_C" >&6
-else
+    { printf "%s\n" "$as_me:${as_lineno-$LINENO}: checking for library containing zlibVersion" >&5
+printf %s "checking for library containing zlibVersion... " >&6; }
+if test ${ac_cv_search_zlibVersion+y}
+then :
+  printf %s "(cached) " >&6
+else $as_nop
   ac_func_search_save_LIBS=$LIBS
-cat >conftest.$ac_ext <<_ACEOF
-/* confdefs.h.  */
-_ACEOF
-cat confdefs.h >>conftest.$ac_ext
-cat >>conftest.$ac_ext <<_ACEOF
+cat confdefs.h - <<_ACEOF >conftest.$ac_ext
 /* end confdefs.h.  */
 
 /* Override any GCC internal prototype to avoid an error.
    Use char because int might match the return type of a GCC
    builtin and then its argument prototype would still apply.  */
-#ifdef __cplusplus
-extern "C"
-#endif
 char zlibVersion ();
 #ifdef F77_DUMMY_MAIN
 
@@ -16805,64 +15011,46 @@ char zlibVersion ();
 
 #endif
 int
-main ()
+main (void)
 {
 return zlibVersion ();
   ;
   return 0;
 }
 _ACEOF
-for ac_lib in '' z; do
+for ac_lib in '' z
+do
   if test -z "$ac_lib"; then
     ac_res="none required"
   else
     ac_res=-l$ac_lib
     LIBS="-l$ac_lib $btng_extra_libs $ac_func_search_save_LIBS"
   fi
-  rm -f conftest.$ac_objext conftest$ac_exeext
-if { (ac_try="$ac_link"
-case "(($ac_try" in
-  *\"* | *\`* | *\\*) ac_try_echo=\$ac_try;;
-  *) ac_try_echo=$ac_try;;
-esac
-eval "echo \"\$as_me:$LINENO: $ac_try_echo\"") >&5
-  (eval "$ac_link") 2>conftest.er1
-  ac_status=$?
-  grep -v '^ *+' conftest.er1 >conftest.err
-  rm -f conftest.er1
-  cat conftest.err >&5
-  echo "$as_me:$LINENO: \$? = $ac_status" >&5
-  (exit $ac_status); } && {
-	 test -z "$ac_c_werror_flag" ||
-	 test ! -s conftest.err
-       } && test -s conftest$ac_exeext &&
-       $as_test_x conftest$ac_exeext; then
+  if ac_fn_c_try_link "$LINENO"
+then :
   ac_cv_search_zlibVersion=$ac_res
-else
-  echo "$as_me: failed program was:" >&5
-sed 's/^/| /' conftest.$ac_ext >&5
-
-
 fi
-
-rm -f core conftest.err conftest.$ac_objext conftest_ipa8_conftest.oo \
-      conftest$ac_exeext
-  if test "${ac_cv_search_zlibVersion+set}" = set; then
+rm -f core conftest.err conftest.$ac_objext conftest.beam \
+    conftest$ac_exeext
+  if test ${ac_cv_search_zlibVersion+y}
+then :
   break
 fi
 done
-if test "${ac_cv_search_zlibVersion+set}" = set; then
-  :
-else
+if test ${ac_cv_search_zlibVersion+y}
+then :
+
+else $as_nop
   ac_cv_search_zlibVersion=no
 fi
 rm conftest.$ac_ext
 LIBS=$ac_func_search_save_LIBS
 fi
-{ echo "$as_me:$LINENO: result: $ac_cv_search_zlibVersion" >&5
-echo "${ECHO_T}$ac_cv_search_zlibVersion" >&6; }
+{ printf "%s\n" "$as_me:${as_lineno-$LINENO}: result: $ac_cv_search_zlibVersion" >&5
+printf "%s\n" "$ac_cv_search_zlibVersion" >&6; }
 ac_res=$ac_cv_search_zlibVersion
-if test "$ac_res" != no; then
+if test "$ac_res" != no
+then :
   test "$ac_res" = "none required" || LIBS="$ac_res $LIBS"
 
 
@@ -16875,7 +15063,7 @@ for btng_log_vars_index in $btng_log_vars ; do
   else
     btng_log_vars_value="unset";
   fi
-  echo "configure:16878:" "After finding libz flag: $btng_log_vars_index is $btng_log_vars_value" >&5;
+  echo "configure:15066:" "After finding libz flag: $btng_log_vars_index is $btng_log_vars_value" >&5;
 done
 
 
@@ -16893,12 +15081,12 @@ for btng_log_vars_index in $btng_log_vars ; do
   else
     btng_log_vars_value="unset";
   fi
-  echo "configure:16896:" "Found libz library flag: $btng_log_vars_index is $btng_log_vars_value" >&5;
+  echo "configure:15084:" "Found libz library flag: $btng_log_vars_index is $btng_log_vars_value" >&5;
 done
 
 
 
-else
+else $as_nop
 
       # Action if NOT found ...
 
@@ -16911,7 +15099,7 @@ for btng_log_vars_index in $btng_log_vars ; do
   else
     btng_log_vars_value="unset";
   fi
-  echo "configure:16914:" "Did not find libz library flag: $btng_log_vars_index is $btng_log_vars_value" >&5;
+  echo "configure:15102:" "Did not find libz library flag: $btng_log_vars_index is $btng_log_vars_value" >&5;
 done
 
 
@@ -16922,7 +15110,7 @@ fi
     unset btng_extra_libs
     unset btng_save_LIBS
   else
-    echo "configure:16925:" Not looking for libz because libz_LIBS is already set >&5
+    echo "configure:15113:" Not looking for libz because libz_LIBS is already set >&5
   fi
 fi
 # End macro BTNG_VAR_SET_LIBZ
@@ -16954,15 +15142,17 @@ fi
 
 
 # Start macro BTNG_ARG_WITH_ENV_WRAPPER with args blaslapack and blaslapack_PREFIX
-{ echo "$as_me:$LINENO: checking for blaslapack" >&5
-echo $ECHO_N "checking for blaslapack... $ECHO_C" >&6; }
-if test "${btng_cv_prog_blaslapack+set}" = set; then
-  echo $ECHO_N "(cached) $ECHO_C" >&6
-else
+{ printf "%s\n" "$as_me:${as_lineno-$LINENO}: checking for blaslapack" >&5
+printf %s "checking for blaslapack... " >&6; }
+if test ${btng_cv_prog_blaslapack+y}
+then :
+  printf %s "(cached) " >&6
+else $as_nop
 
 
 # Check whether --with-blaslapack was given.
-if test "${with_blaslapack+set}" = set; then
+if test ${with_blaslapack+y}
+then :
   withval=$with_blaslapack;
 fi
 
@@ -17007,8 +15197,8 @@ if test "${blaslapack_PREFIX+set}" = set ; then
 fi
 
 fi
-{ echo "$as_me:$LINENO: result: $btng_cv_prog_blaslapack" >&5
-echo "${ECHO_T}$btng_cv_prog_blaslapack" >&6; }
+{ printf "%s\n" "$as_me:${as_lineno-$LINENO}: result: $btng_cv_prog_blaslapack" >&5
+printf "%s\n" "$btng_cv_prog_blaslapack" >&6; }
 # Set blaslapack_PREFIX from cache.
 # blaslapack_PREFIX is not yet set if we grabbed it from cache.
 if test "${btng_cv_prog_blaslapack+set}" = set ; then
@@ -17023,15 +15213,17 @@ fi
 # Start macro BTNG_ARG_WITH_PREFIX
 
 # Start macro BTNG_ARG_WITH_ENV_WRAPPER with args blaslapack-includes and blaslapack_INCLUDES
-{ echo "$as_me:$LINENO: checking for blaslapack-includes" >&5
-echo $ECHO_N "checking for blaslapack-includes... $ECHO_C" >&6; }
-if test "${btng_cv_prog_blaslapack_includes+set}" = set; then
-  echo $ECHO_N "(cached) $ECHO_C" >&6
-else
+{ printf "%s\n" "$as_me:${as_lineno-$LINENO}: checking for blaslapack-includes" >&5
+printf %s "checking for blaslapack-includes... " >&6; }
+if test ${btng_cv_prog_blaslapack_includes+y}
+then :
+  printf %s "(cached) " >&6
+else $as_nop
 
 
 # Check whether --with-blaslapack-includes was given.
-if test "${with_blaslapack_includes+set}" = set; then
+if test ${with_blaslapack_includes+y}
+then :
   withval=$with_blaslapack_includes;
 fi
 
@@ -17053,11 +15245,9 @@ case "$with_blaslapack_includes" in
       : Nothing to do here actually, because blaslapack_INCLUDES is already in the environment.
     else
       if test "${with_blaslapack_includes}" = yes ; then
-  { { echo "$as_me:$LINENO: error: If you specify --with-blaslapack-includes, you must give it the path as in --with-blaslapack-includes=/installation/path" >&5
-echo "$as_me: error: If you specify --with-blaslapack-includes, you must give it the path as in --with-blaslapack-includes=/installation/path" >&2;}
-   { (exit 1); exit 1; }; }
+  as_fn_error $? "If you specify --with-blaslapack-includes, you must give it the path as in --with-blaslapack-includes=/installation/path" "$LINENO" 5
 fi
-echo "configure:17060:" environment blaslapack_INCLUDES not defined >&5
+echo "configure:15250:" environment blaslapack_INCLUDES not defined >&5
 
 
     fi
@@ -17078,8 +15268,8 @@ if test "${blaslapack_INCLUDES+set}" = set ; then
 fi
 
 fi
-{ echo "$as_me:$LINENO: result: $btng_cv_prog_blaslapack_includes" >&5
-echo "${ECHO_T}$btng_cv_prog_blaslapack_includes" >&6; }
+{ printf "%s\n" "$as_me:${as_lineno-$LINENO}: result: $btng_cv_prog_blaslapack_includes" >&5
+printf "%s\n" "$btng_cv_prog_blaslapack_includes" >&6; }
 # Set blaslapack_INCLUDES from cache.
 # blaslapack_INCLUDES is not yet set if we grabbed it from cache.
 if test "${btng_cv_prog_blaslapack_includes+set}" = set ; then
@@ -17094,15 +15284,17 @@ fi
 # Start macro BTNG_ARG_WITH_PREFIX
 
 # Start macro BTNG_ARG_WITH_ENV_WRAPPER with args blaslapack-libs and blaslapack_LIBS
-{ echo "$as_me:$LINENO: checking for blaslapack-libs" >&5
-echo $ECHO_N "checking for blaslapack-libs... $ECHO_C" >&6; }
-if test "${btng_cv_prog_blaslapack_libs+set}" = set; then
-  echo $ECHO_N "(cached) $ECHO_C" >&6
-else
+{ printf "%s\n" "$as_me:${as_lineno-$LINENO}: checking for blaslapack-libs" >&5
+printf %s "checking for blaslapack-libs... " >&6; }
+if test ${btng_cv_prog_blaslapack_libs+y}
+then :
+  printf %s "(cached) " >&6
+else $as_nop
 
 
 # Check whether --with-blaslapack-libs was given.
-if test "${with_blaslapack_libs+set}" = set; then
+if test ${with_blaslapack_libs+y}
+then :
   withval=$with_blaslapack_libs;
 fi
 
@@ -17124,11 +15316,9 @@ case "$with_blaslapack_libs" in
       : Nothing to do here actually, because blaslapack_LIBS is already in the environment.
     else
       if test "${with_blaslapack_libs}" = yes ; then
-  { { echo "$as_me:$LINENO: error: If you specify --with-blaslapack-libs, you must give it the path as in --with-blaslapack-libs=/installation/path" >&5
-echo "$as_me: error: If you specify --with-blaslapack-libs, you must give it the path as in --with-blaslapack-libs=/installation/path" >&2;}
-   { (exit 1); exit 1; }; }
+  as_fn_error $? "If you specify --with-blaslapack-libs, you must give it the path as in --with-blaslapack-libs=/installation/path" "$LINENO" 5
 fi
-echo "configure:17131:" environment blaslapack_LIBS not defined >&5
+echo "configure:15321:" environment blaslapack_LIBS not defined >&5
 
 
     fi
@@ -17149,8 +15339,8 @@ if test "${blaslapack_LIBS+set}" = set ; then
 fi
 
 fi
-{ echo "$as_me:$LINENO: result: $btng_cv_prog_blaslapack_libs" >&5
-echo "${ECHO_T}$btng_cv_prog_blaslapack_libs" >&6; }
+{ printf "%s\n" "$as_me:${as_lineno-$LINENO}: result: $btng_cv_prog_blaslapack_libs" >&5
+printf "%s\n" "$btng_cv_prog_blaslapack_libs" >&6; }
 # Set blaslapack_LIBS from cache.
 # blaslapack_LIBS is not yet set if we grabbed it from cache.
 if test "${btng_cv_prog_blaslapack_libs+set}" = set ; then
@@ -17182,25 +15372,19 @@ if test "${blas_PREFIX+set}" = set ; then
     # If path is given, add path to extra flag for library search.
     test -n "${blas_PREFIX}" && btng_extra_libs="-L${blas_PREFIX}/lib $btng_extra_libs"
     # Look for library.
-    { echo "$as_me:$LINENO: checking for library containing daxpy_" >&5
-echo $ECHO_N "checking for library containing daxpy_... $ECHO_C" >&6; }
-if test "${ac_cv_search_daxpy_+set}" = set; then
-  echo $ECHO_N "(cached) $ECHO_C" >&6
-else
+    { printf "%s\n" "$as_me:${as_lineno-$LINENO}: checking for library containing daxpy_" >&5
+printf %s "checking for library containing daxpy_... " >&6; }
+if test ${ac_cv_search_daxpy_+y}
+then :
+  printf %s "(cached) " >&6
+else $as_nop
   ac_func_search_save_LIBS=$LIBS
-cat >conftest.$ac_ext <<_ACEOF
-/* confdefs.h.  */
-_ACEOF
-cat confdefs.h >>conftest.$ac_ext
-cat >>conftest.$ac_ext <<_ACEOF
+cat confdefs.h - <<_ACEOF >conftest.$ac_ext
 /* end confdefs.h.  */
 
 /* Override any GCC internal prototype to avoid an error.
    Use char because int might match the return type of a GCC
    builtin and then its argument prototype would still apply.  */
-#ifdef __cplusplus
-extern "C"
-#endif
 char daxpy_ ();
 #ifdef F77_DUMMY_MAIN
 
@@ -17211,64 +15395,46 @@ char daxpy_ ();
 
 #endif
 int
-main ()
+main (void)
 {
 return daxpy_ ();
   ;
   return 0;
 }
 _ACEOF
-for ac_lib in '' blas; do
+for ac_lib in '' blas
+do
   if test -z "$ac_lib"; then
     ac_res="none required"
   else
     ac_res=-l$ac_lib
     LIBS="-l$ac_lib $btng_extra_libs $ac_func_search_save_LIBS"
   fi
-  rm -f conftest.$ac_objext conftest$ac_exeext
-if { (ac_try="$ac_link"
-case "(($ac_try" in
-  *\"* | *\`* | *\\*) ac_try_echo=\$ac_try;;
-  *) ac_try_echo=$ac_try;;
-esac
-eval "echo \"\$as_me:$LINENO: $ac_try_echo\"") >&5
-  (eval "$ac_link") 2>conftest.er1
-  ac_status=$?
-  grep -v '^ *+' conftest.er1 >conftest.err
-  rm -f conftest.er1
-  cat conftest.err >&5
-  echo "$as_me:$LINENO: \$? = $ac_status" >&5
-  (exit $ac_status); } && {
-	 test -z "$ac_c_werror_flag" ||
-	 test ! -s conftest.err
-       } && test -s conftest$ac_exeext &&
-       $as_test_x conftest$ac_exeext; then
+  if ac_fn_c_try_link "$LINENO"
+then :
   ac_cv_search_daxpy_=$ac_res
-else
-  echo "$as_me: failed program was:" >&5
-sed 's/^/| /' conftest.$ac_ext >&5
-
-
 fi
-
-rm -f core conftest.err conftest.$ac_objext conftest_ipa8_conftest.oo \
-      conftest$ac_exeext
-  if test "${ac_cv_search_daxpy_+set}" = set; then
+rm -f core conftest.err conftest.$ac_objext conftest.beam \
+    conftest$ac_exeext
+  if test ${ac_cv_search_daxpy_+y}
+then :
   break
 fi
 done
-if test "${ac_cv_search_daxpy_+set}" = set; then
-  :
-else
+if test ${ac_cv_search_daxpy_+y}
+then :
+
+else $as_nop
   ac_cv_search_daxpy_=no
 fi
 rm conftest.$ac_ext
 LIBS=$ac_func_search_save_LIBS
 fi
-{ echo "$as_me:$LINENO: result: $ac_cv_search_daxpy_" >&5
-echo "${ECHO_T}$ac_cv_search_daxpy_" >&6; }
+{ printf "%s\n" "$as_me:${as_lineno-$LINENO}: result: $ac_cv_search_daxpy_" >&5
+printf "%s\n" "$ac_cv_search_daxpy_" >&6; }
 ac_res=$ac_cv_search_daxpy_
-if test "$ac_res" != no; then
+if test "$ac_res" != no
+then :
   test "$ac_res" = "none required" || LIBS="$ac_res $LIBS"
 
 
@@ -17281,7 +15447,7 @@ for btng_log_vars_index in $btng_log_vars ; do
   else
     btng_log_vars_value="unset";
   fi
-  echo "configure:17284:" "After finding blas flag: $btng_log_vars_index is $btng_log_vars_value" >&5;
+  echo "configure:15450:" "After finding blas flag: $btng_log_vars_index is $btng_log_vars_value" >&5;
 done
 
 
@@ -17299,12 +15465,12 @@ for btng_log_vars_index in $btng_log_vars ; do
   else
     btng_log_vars_value="unset";
   fi
-  echo "configure:17302:" "Found blas library flag: $btng_log_vars_index is $btng_log_vars_value" >&5;
+  echo "configure:15468:" "Found blas library flag: $btng_log_vars_index is $btng_log_vars_value" >&5;
 done
 
 
 
-else
+else $as_nop
 
       # Action if NOT found ...
 
@@ -17317,13 +15483,13 @@ for btng_log_vars_index in $btng_log_vars ; do
   else
     btng_log_vars_value="unset";
   fi
-  echo "configure:17320:" "Did not find blas library flag: $btng_log_vars_index is $btng_log_vars_value" >&5;
+  echo "configure:15486:" "Did not find blas library flag: $btng_log_vars_index is $btng_log_vars_value" >&5;
 done
 
 
-      { echo "$as_me:$LINENO: WARNING: I could not systematically find the name of
+      { printf "%s\n" "$as_me:${as_lineno-$LINENO}: WARNING: I could not systematically find the name of
 the blas library so I am using -lblas instead." >&5
-echo "$as_me: WARNING: I could not systematically find the name of
+printf "%s\n" "$as_me: WARNING: I could not systematically find the name of
 the blas library so I am using -lblas instead." >&2;}
       blas_LIBS="-lblas"
       test -n "${blas_PREFIX}" &&	\
@@ -17335,7 +15501,7 @@ fi
     unset btng_extra_libs
     unset btng_save_LIBS
   else
-    echo "configure:17338:" Not looking for blas because blas_LIBS is already set >&5
+    echo "configure:15504:" Not looking for blas because blas_LIBS is already set >&5
   fi
 fi
 
@@ -17354,25 +15520,19 @@ if test "${lapack_PREFIX+set}" = set ; then
     # If path is given, add path to extra flag for library search.
     test -n "${lapack_PREFIX}" && btng_extra_libs="-L${lapack_PREFIX}/lib $btng_extra_libs"
     # Look for library.
-    { echo "$as_me:$LINENO: checking for library containing xerbla_" >&5
-echo $ECHO_N "checking for library containing xerbla_... $ECHO_C" >&6; }
-if test "${ac_cv_search_xerbla_+set}" = set; then
-  echo $ECHO_N "(cached) $ECHO_C" >&6
-else
+    { printf "%s\n" "$as_me:${as_lineno-$LINENO}: checking for library containing xerbla_" >&5
+printf %s "checking for library containing xerbla_... " >&6; }
+if test ${ac_cv_search_xerbla_+y}
+then :
+  printf %s "(cached) " >&6
+else $as_nop
   ac_func_search_save_LIBS=$LIBS
-cat >conftest.$ac_ext <<_ACEOF
-/* confdefs.h.  */
-_ACEOF
-cat confdefs.h >>conftest.$ac_ext
-cat >>conftest.$ac_ext <<_ACEOF
+cat confdefs.h - <<_ACEOF >conftest.$ac_ext
 /* end confdefs.h.  */
 
 /* Override any GCC internal prototype to avoid an error.
    Use char because int might match the return type of a GCC
    builtin and then its argument prototype would still apply.  */
-#ifdef __cplusplus
-extern "C"
-#endif
 char xerbla_ ();
 #ifdef F77_DUMMY_MAIN
 
@@ -17383,64 +15543,46 @@ char xerbla_ ();
 
 #endif
 int
-main ()
+main (void)
 {
 return xerbla_ ();
   ;
   return 0;
 }
 _ACEOF
-for ac_lib in '' lapack; do
+for ac_lib in '' lapack
+do
   if test -z "$ac_lib"; then
     ac_res="none required"
   else
     ac_res=-l$ac_lib
     LIBS="-l$ac_lib $btng_extra_libs $ac_func_search_save_LIBS"
   fi
-  rm -f conftest.$ac_objext conftest$ac_exeext
-if { (ac_try="$ac_link"
-case "(($ac_try" in
-  *\"* | *\`* | *\\*) ac_try_echo=\$ac_try;;
-  *) ac_try_echo=$ac_try;;
-esac
-eval "echo \"\$as_me:$LINENO: $ac_try_echo\"") >&5
-  (eval "$ac_link") 2>conftest.er1
-  ac_status=$?
-  grep -v '^ *+' conftest.er1 >conftest.err
-  rm -f conftest.er1
-  cat conftest.err >&5
-  echo "$as_me:$LINENO: \$? = $ac_status" >&5
-  (exit $ac_status); } && {
-	 test -z "$ac_c_werror_flag" ||
-	 test ! -s conftest.err
-       } && test -s conftest$ac_exeext &&
-       $as_test_x conftest$ac_exeext; then
+  if ac_fn_c_try_link "$LINENO"
+then :
   ac_cv_search_xerbla_=$ac_res
-else
-  echo "$as_me: failed program was:" >&5
-sed 's/^/| /' conftest.$ac_ext >&5
-
-
 fi
-
-rm -f core conftest.err conftest.$ac_objext conftest_ipa8_conftest.oo \
-      conftest$ac_exeext
-  if test "${ac_cv_search_xerbla_+set}" = set; then
+rm -f core conftest.err conftest.$ac_objext conftest.beam \
+    conftest$ac_exeext
+  if test ${ac_cv_search_xerbla_+y}
+then :
   break
 fi
 done
-if test "${ac_cv_search_xerbla_+set}" = set; then
-  :
-else
+if test ${ac_cv_search_xerbla_+y}
+then :
+
+else $as_nop
   ac_cv_search_xerbla_=no
 fi
 rm conftest.$ac_ext
 LIBS=$ac_func_search_save_LIBS
 fi
-{ echo "$as_me:$LINENO: result: $ac_cv_search_xerbla_" >&5
-echo "${ECHO_T}$ac_cv_search_xerbla_" >&6; }
+{ printf "%s\n" "$as_me:${as_lineno-$LINENO}: result: $ac_cv_search_xerbla_" >&5
+printf "%s\n" "$ac_cv_search_xerbla_" >&6; }
 ac_res=$ac_cv_search_xerbla_
-if test "$ac_res" != no; then
+if test "$ac_res" != no
+then :
   test "$ac_res" = "none required" || LIBS="$ac_res $LIBS"
 
 
@@ -17453,7 +15595,7 @@ for btng_log_vars_index in $btng_log_vars ; do
   else
     btng_log_vars_value="unset";
   fi
-  echo "configure:17456:" "After finding lapack flag: $btng_log_vars_index is $btng_log_vars_value" >&5;
+  echo "configure:15598:" "After finding lapack flag: $btng_log_vars_index is $btng_log_vars_value" >&5;
 done
 
 
@@ -17471,12 +15613,12 @@ for btng_log_vars_index in $btng_log_vars ; do
   else
     btng_log_vars_value="unset";
   fi
-  echo "configure:17474:" "Found lapack library flag: $btng_log_vars_index is $btng_log_vars_value" >&5;
+  echo "configure:15616:" "Found lapack library flag: $btng_log_vars_index is $btng_log_vars_value" >&5;
 done
 
 
 
-else
+else $as_nop
 
       # Action if NOT found ...
 
@@ -17489,13 +15631,13 @@ for btng_log_vars_index in $btng_log_vars ; do
   else
     btng_log_vars_value="unset";
   fi
-  echo "configure:17492:" "Did not find lapack library flag: $btng_log_vars_index is $btng_log_vars_value" >&5;
+  echo "configure:15634:" "Did not find lapack library flag: $btng_log_vars_index is $btng_log_vars_value" >&5;
 done
 
 
-      { echo "$as_me:$LINENO: WARNING: I could not systematically find the name of
+      { printf "%s\n" "$as_me:${as_lineno-$LINENO}: WARNING: I could not systematically find the name of
 the lapack library so I am using -llapack instead." >&5
-echo "$as_me: WARNING: I could not systematically find the name of
+printf "%s\n" "$as_me: WARNING: I could not systematically find the name of
 the lapack library so I am using -llapack instead." >&2;}
       lapack_LIBS="-llapack"
       test -n "${lapack_PREFIX}" &&	\
@@ -17507,7 +15649,7 @@ fi
     unset btng_extra_libs
     unset btng_save_LIBS
   else
-    echo "configure:17510:" Not looking for lapack because lapack_LIBS is already set >&5
+    echo "configure:15652:" Not looking for lapack because lapack_LIBS is already set >&5
   fi
 fi
 
@@ -17556,7 +15698,7 @@ for btng_log_vars_index in $btng_log_vars ; do
   else
     btng_log_vars_value="unset";
   fi
-  echo "configure:17559:" "$btng_log_vars_index is $btng_log_vars_value" >&5;
+  echo "configure:15701:" "$btng_log_vars_index is $btng_log_vars_value" >&5;
 done
 
 
@@ -17581,9 +15723,7 @@ fi
   LIB_NAME="$blaslapack_LIB_NAME $LIB_NAME"
   INC_PATH="$blaslapack_INCLUDES $INC_PATH"
 
-cat >>confdefs.h <<\_ACEOF
-#define HAVE_BLASLAPACK 1
-_ACEOF
+printf "%s\n" "#define HAVE_BLASLAPACK 1" >>confdefs.h
 
 fi
 
@@ -17596,7 +15736,7 @@ for btng_log_vars_index in $btng_log_vars ; do
   else
     btng_log_vars_value="unset";
   fi
-  echo "configure:17599:" "$btng_log_vars_index is $btng_log_vars_value" >&5;
+  echo "configure:15739:" "$btng_log_vars_index is $btng_log_vars_value" >&5;
 done
 
 
@@ -17604,17 +15744,16 @@ done
 
 
 # Check whether --with-mpi was given.
-if test "${with_mpi+set}" = set; then
+if test ${with_mpi+y}
+then :
   withval=$with_mpi;
 fi
 
 if test "$with_mpi" = no; then
-   { echo "$as_me:$LINENO: NOTIFICATION: SAMRAI configured without the MPI library" >&5
-echo "$as_me: NOTIFICATION: SAMRAI configured without the MPI library" >&6;}
+   { printf "%s\n" "$as_me:${as_lineno-$LINENO}: NOTIFICATION: SAMRAI configured without the MPI library" >&5
+printf "%s\n" "$as_me: NOTIFICATION: SAMRAI configured without the MPI library" >&6;}
 
-cat >>confdefs.h <<\_ACEOF
-#define LACKS_MPI 1
-_ACEOF
+printf "%s\n" "#define LACKS_MPI 1" >>confdefs.h
 
 else
 
@@ -17624,55 +15763,59 @@ else
 
    casc_find_mpi_cache_used=yes
 
-   if test "${casc_cv_mpi_include+set}" = set; then
-  echo $ECHO_N "(cached) $ECHO_C" >&6
-else
+   if test ${casc_cv_mpi_include+y}
+then :
+  printf %s "(cached) " >&6
+else $as_nop
   casc_find_mpi_cache_used=no
 fi
 
-   if test "${casc_cv_mpi_libs+set}" = set; then
-  echo $ECHO_N "(cached) $ECHO_C" >&6
-else
+   if test ${casc_cv_mpi_libs+y}
+then :
+  printf %s "(cached) " >&6
+else $as_nop
   casc_find_mpi_cache_used=no
 fi
 
-   if test "${casc_cv_mpi_lib_dirs+set}" = set; then
-  echo $ECHO_N "(cached) $ECHO_C" >&6
-else
+   if test ${casc_cv_mpi_lib_dirs+y}
+then :
+  printf %s "(cached) " >&6
+else $as_nop
   casc_find_mpi_cache_used=no
 fi
 
-   if test "${casc_cv_mpi_flags+set}" = set; then
-  echo $ECHO_N "(cached) $ECHO_C" >&6
-else
+   if test ${casc_cv_mpi_flags+y}
+then :
+  printf %s "(cached) " >&6
+else $as_nop
   casc_find_mpi_cache_used=no
 fi
 
 
    if test "$casc_find_mpi_cache_used" = "yes"; then
-      { echo "$as_me:$LINENO: checking for location of mpi.h" >&5
-echo $ECHO_N "checking for location of mpi.h... $ECHO_C" >&6; }
+      { printf "%s\n" "$as_me:${as_lineno-$LINENO}: checking for location of mpi.h" >&5
+printf %s "checking for location of mpi.h... " >&6; }
       MPIINCLUDE=$casc_cv_mpi_include
-      { echo "$as_me:$LINENO: result: \"\(cached\) $MPIINCLUDE\"" >&5
-echo "${ECHO_T}\"\(cached\) $MPIINCLUDE\"" >&6; }
+      { printf "%s\n" "$as_me:${as_lineno-$LINENO}: result: \"\(cached\) $MPIINCLUDE\"" >&5
+printf "%s\n" "\"\(cached\) $MPIINCLUDE\"" >&6; }
 
-      { echo "$as_me:$LINENO: checking for MPI library directories" >&5
-echo $ECHO_N "checking for MPI library directories... $ECHO_C" >&6; }
+      { printf "%s\n" "$as_me:${as_lineno-$LINENO}: checking for MPI library directories" >&5
+printf %s "checking for MPI library directories... " >&6; }
       MPILIBDIRS=$casc_cv_mpi_lib_dirs
-      { echo "$as_me:$LINENO: result: \"\(cached\) $MPILIBDIRS\"" >&5
-echo "${ECHO_T}\"\(cached\) $MPILIBDIRS\"" >&6; }
+      { printf "%s\n" "$as_me:${as_lineno-$LINENO}: result: \"\(cached\) $MPILIBDIRS\"" >&5
+printf "%s\n" "\"\(cached\) $MPILIBDIRS\"" >&6; }
 
-      { echo "$as_me:$LINENO: checking for MPI libraries" >&5
-echo $ECHO_N "checking for MPI libraries... $ECHO_C" >&6; }
+      { printf "%s\n" "$as_me:${as_lineno-$LINENO}: checking for MPI libraries" >&5
+printf %s "checking for MPI libraries... " >&6; }
       MPILIBS=$casc_cv_mpi_libs
-      { echo "$as_me:$LINENO: result: \"\(cached\) $MPILIBS\"" >&5
-echo "${ECHO_T}\"\(cached\) $MPILIBS\"" >&6; }
+      { printf "%s\n" "$as_me:${as_lineno-$LINENO}: result: \"\(cached\) $MPILIBS\"" >&5
+printf "%s\n" "\"\(cached\) $MPILIBS\"" >&6; }
 
-      { echo "$as_me:$LINENO: checking for other MPI-related flags" >&5
-echo $ECHO_N "checking for other MPI-related flags... $ECHO_C" >&6; }
+      { printf "%s\n" "$as_me:${as_lineno-$LINENO}: checking for other MPI-related flags" >&5
+printf %s "checking for other MPI-related flags... " >&6; }
       MPIFLAGS=$casc_cv_mpi_flags
-      { echo "$as_me:$LINENO: result: \"\(cached\) $MPIFLAGS\"" >&5
-echo "${ECHO_T}\"\(cached\) $MPIFLAGS\"" >&6; }
+      { printf "%s\n" "$as_me:${as_lineno-$LINENO}: result: \"\(cached\) $MPIFLAGS\"" >&5
+printf "%s\n" "\"\(cached\) $MPIFLAGS\"" >&6; }
    else
 
 
@@ -17680,7 +15823,8 @@ echo "${ECHO_T}\"\(cached\) $MPIFLAGS\"" >&6; }
       casc_user_chose_mpi=no
 
 # Check whether --with-mpi-include was given.
-if test "${with_mpi_include+set}" = set; then
+if test ${with_mpi_include+y}
+then :
   withval=$with_mpi_include; for mpi_dir in $withval; do
                      MPIINCLUDE="$MPIINCLUDE -I$withval"
                   done; casc_user_chose_mpi=yes
@@ -17689,7 +15833,8 @@ fi
 
 
 # Check whether --with-mpi-libs was given.
-if test "${with_mpi_libs+set}" = set; then
+if test ${with_mpi_libs+y}
+then :
   withval=$with_mpi_libs; for mpi_lib in $withval; do
                      MPILIBS="$MPILIBS -l$mpi_lib"
                   done; casc_user_chose_mpi=yes
@@ -17699,7 +15844,8 @@ fi
 
 
 # Check whether --with-mpi-lib-dirs was given.
-if test "${with_mpi_lib_dirs+set}" = set; then
+if test ${with_mpi_lib_dirs+y}
+then :
   withval=$with_mpi_lib_dirs; for mpi_lib_dir in $withval; do
                      MPILIBDIRS="-L$mpi_lib_dir $MPILIBDIRS"
                   done; casc_user_chose_mpi=yes
@@ -17709,7 +15855,8 @@ fi
 
 
 # Check whether --with-mpi-flags was given.
-if test "${with_mpi_flags+set}" = set; then
+if test ${with_mpi_flags+y}
+then :
   withval=$with_mpi_flags; MPIFLAGS=$withval
 fi
 
@@ -17734,22 +15881,22 @@ fi
       fi
 
 
-      { echo "$as_me:$LINENO: checking for MPI include directories" >&5
-echo $ECHO_N "checking for MPI include directories... $ECHO_C" >&6; }
-      { echo "$as_me:$LINENO: result: $MPIINCLUDE" >&5
-echo "${ECHO_T}$MPIINCLUDE" >&6; }
-      { echo "$as_me:$LINENO: checking for MPI library directories" >&5
-echo $ECHO_N "checking for MPI library directories... $ECHO_C" >&6; }
-      { echo "$as_me:$LINENO: result: $MPILIBDIRS" >&5
-echo "${ECHO_T}$MPILIBDIRS" >&6; }
-      { echo "$as_me:$LINENO: checking for MPI libraries" >&5
-echo $ECHO_N "checking for MPI libraries... $ECHO_C" >&6; }
-      { echo "$as_me:$LINENO: result: $MPILIBS" >&5
-echo "${ECHO_T}$MPILIBS" >&6; }
-      { echo "$as_me:$LINENO: checking for other MPI-related flags" >&5
-echo $ECHO_N "checking for other MPI-related flags... $ECHO_C" >&6; }
-      { echo "$as_me:$LINENO: result: $MPIFLAGS" >&5
-echo "${ECHO_T}$MPIFLAGS" >&6; }
+      { printf "%s\n" "$as_me:${as_lineno-$LINENO}: checking for MPI include directories" >&5
+printf %s "checking for MPI include directories... " >&6; }
+      { printf "%s\n" "$as_me:${as_lineno-$LINENO}: result: $MPIINCLUDE" >&5
+printf "%s\n" "$MPIINCLUDE" >&6; }
+      { printf "%s\n" "$as_me:${as_lineno-$LINENO}: checking for MPI library directories" >&5
+printf %s "checking for MPI library directories... " >&6; }
+      { printf "%s\n" "$as_me:${as_lineno-$LINENO}: result: $MPILIBDIRS" >&5
+printf "%s\n" "$MPILIBDIRS" >&6; }
+      { printf "%s\n" "$as_me:${as_lineno-$LINENO}: checking for MPI libraries" >&5
+printf %s "checking for MPI libraries... " >&6; }
+      { printf "%s\n" "$as_me:${as_lineno-$LINENO}: result: $MPILIBS" >&5
+printf "%s\n" "$MPILIBS" >&6; }
+      { printf "%s\n" "$as_me:${as_lineno-$LINENO}: checking for other MPI-related flags" >&5
+printf %s "checking for other MPI-related flags... " >&6; }
+      { printf "%s\n" "$as_me:${as_lineno-$LINENO}: result: $MPIFLAGS" >&5
+printf "%s\n" "$MPIFLAGS" >&6; }
 
    fi
 
@@ -17760,55 +15907,59 @@ echo "${ECHO_T}$MPIFLAGS" >&6; }
 
    casc_find_mpi_cache_used=yes
 
-   if test "${casc_cv_mpi_include+set}" = set; then
-  echo $ECHO_N "(cached) $ECHO_C" >&6
-else
+   if test ${casc_cv_mpi_include+y}
+then :
+  printf %s "(cached) " >&6
+else $as_nop
   casc_find_mpi_cache_used=no
 fi
 
-   if test "${casc_cv_mpi_libs+set}" = set; then
-  echo $ECHO_N "(cached) $ECHO_C" >&6
-else
+   if test ${casc_cv_mpi_libs+y}
+then :
+  printf %s "(cached) " >&6
+else $as_nop
   casc_find_mpi_cache_used=no
 fi
 
-   if test "${casc_cv_mpi_lib_dirs+set}" = set; then
-  echo $ECHO_N "(cached) $ECHO_C" >&6
-else
+   if test ${casc_cv_mpi_lib_dirs+y}
+then :
+  printf %s "(cached) " >&6
+else $as_nop
   casc_find_mpi_cache_used=no
 fi
 
-   if test "${casc_cv_mpi_flags+set}" = set; then
-  echo $ECHO_N "(cached) $ECHO_C" >&6
-else
+   if test ${casc_cv_mpi_flags+y}
+then :
+  printf %s "(cached) " >&6
+else $as_nop
   casc_find_mpi_cache_used=no
 fi
 
 
    if test "$casc_find_mpi_cache_used" = "yes"; then
-      { echo "$as_me:$LINENO: checking for location of mpi.h" >&5
-echo $ECHO_N "checking for location of mpi.h... $ECHO_C" >&6; }
+      { printf "%s\n" "$as_me:${as_lineno-$LINENO}: checking for location of mpi.h" >&5
+printf %s "checking for location of mpi.h... " >&6; }
       MPIINCLUDE=$casc_cv_mpi_include
-      { echo "$as_me:$LINENO: result: \"\(cached\) $MPIINCLUDE\"" >&5
-echo "${ECHO_T}\"\(cached\) $MPIINCLUDE\"" >&6; }
+      { printf "%s\n" "$as_me:${as_lineno-$LINENO}: result: \"\(cached\) $MPIINCLUDE\"" >&5
+printf "%s\n" "\"\(cached\) $MPIINCLUDE\"" >&6; }
 
-      { echo "$as_me:$LINENO: checking for MPI library directories" >&5
-echo $ECHO_N "checking for MPI library directories... $ECHO_C" >&6; }
+      { printf "%s\n" "$as_me:${as_lineno-$LINENO}: checking for MPI library directories" >&5
+printf %s "checking for MPI library directories... " >&6; }
       MPILIBDIRS=$casc_cv_mpi_lib_dirs
-      { echo "$as_me:$LINENO: result: \"\(cached\) $MPILIBDIRS\"" >&5
-echo "${ECHO_T}\"\(cached\) $MPILIBDIRS\"" >&6; }
+      { printf "%s\n" "$as_me:${as_lineno-$LINENO}: result: \"\(cached\) $MPILIBDIRS\"" >&5
+printf "%s\n" "\"\(cached\) $MPILIBDIRS\"" >&6; }
 
-      { echo "$as_me:$LINENO: checking for MPI libraries" >&5
-echo $ECHO_N "checking for MPI libraries... $ECHO_C" >&6; }
+      { printf "%s\n" "$as_me:${as_lineno-$LINENO}: checking for MPI libraries" >&5
+printf %s "checking for MPI libraries... " >&6; }
       MPILIBS=$casc_cv_mpi_libs
-      { echo "$as_me:$LINENO: result: \"\(cached\) $MPILIBS\"" >&5
-echo "${ECHO_T}\"\(cached\) $MPILIBS\"" >&6; }
+      { printf "%s\n" "$as_me:${as_lineno-$LINENO}: result: \"\(cached\) $MPILIBS\"" >&5
+printf "%s\n" "\"\(cached\) $MPILIBS\"" >&6; }
 
-      { echo "$as_me:$LINENO: checking for other MPI-related flags" >&5
-echo $ECHO_N "checking for other MPI-related flags... $ECHO_C" >&6; }
+      { printf "%s\n" "$as_me:${as_lineno-$LINENO}: checking for other MPI-related flags" >&5
+printf %s "checking for other MPI-related flags... " >&6; }
       MPIFLAGS=$casc_cv_mpi_flags
-      { echo "$as_me:$LINENO: result: \"\(cached\) $MPIFLAGS\"" >&5
-echo "${ECHO_T}\"\(cached\) $MPIFLAGS\"" >&6; }
+      { printf "%s\n" "$as_me:${as_lineno-$LINENO}: result: \"\(cached\) $MPIFLAGS\"" >&5
+printf "%s\n" "\"\(cached\) $MPIFLAGS\"" >&6; }
    else
 
 
@@ -17816,7 +15967,8 @@ echo "${ECHO_T}\"\(cached\) $MPIFLAGS\"" >&6; }
       casc_user_chose_mpi=no
 
 # Check whether --with-mpi-include was given.
-if test "${with_mpi_include+set}" = set; then
+if test ${with_mpi_include+y}
+then :
   withval=$with_mpi_include; for mpi_dir in $withval; do
                      MPIINCLUDE="$MPIINCLUDE -I$withval"
                   done; casc_user_chose_mpi=yes
@@ -17825,7 +15977,8 @@ fi
 
 
 # Check whether --with-mpi-libs was given.
-if test "${with_mpi_libs+set}" = set; then
+if test ${with_mpi_libs+y}
+then :
   withval=$with_mpi_libs; for mpi_lib in $withval; do
                      MPILIBS="$MPILIBS -l$mpi_lib"
                   done; casc_user_chose_mpi=yes
@@ -17835,7 +15988,8 @@ fi
 
 
 # Check whether --with-mpi-lib-dirs was given.
-if test "${with_mpi_lib_dirs+set}" = set; then
+if test ${with_mpi_lib_dirs+y}
+then :
   withval=$with_mpi_lib_dirs; for mpi_lib_dir in $withval; do
                      MPILIBDIRS="-L$mpi_lib_dir $MPILIBDIRS"
                   done; casc_user_chose_mpi=yes
@@ -17845,7 +15999,8 @@ fi
 
 
 # Check whether --with-mpi-flags was given.
-if test "${with_mpi_flags+set}" = set; then
+if test ${with_mpi_flags+y}
+then :
   withval=$with_mpi_flags; MPIFLAGS=$withval
 fi
 
@@ -17856,18 +16011,20 @@ fi
 
 
 # Check whether --with-MPICC was given.
-if test "${with_MPICC+set}" = set; then
+if test ${with_MPICC+y}
+then :
   withval=$with_MPICC; MPICC=$withval
-else
+else $as_nop
   for ac_prog in mpcc mpicc tmcc hcc
 do
   # Extract the first word of "$ac_prog", so it can be a program name with args.
 set dummy $ac_prog; ac_word=$2
-{ echo "$as_me:$LINENO: checking for $ac_word" >&5
-echo $ECHO_N "checking for $ac_word... $ECHO_C" >&6; }
-if test "${ac_cv_prog_MPICC+set}" = set; then
-  echo $ECHO_N "(cached) $ECHO_C" >&6
-else
+{ printf "%s\n" "$as_me:${as_lineno-$LINENO}: checking for $ac_word" >&5
+printf %s "checking for $ac_word... " >&6; }
+if test ${ac_cv_prog_MPICC+y}
+then :
+  printf %s "(cached) " >&6
+else $as_nop
   if test -n "$MPICC"; then
   ac_cv_prog_MPICC="$MPICC" # Let the user override the test.
 else
@@ -17875,26 +16032,30 @@ as_save_IFS=$IFS; IFS=$PATH_SEPARATOR
 for as_dir in $PATH
 do
   IFS=$as_save_IFS
-  test -z "$as_dir" && as_dir=.
-  for ac_exec_ext in '' $ac_executable_extensions; do
-  if { test -f "$as_dir/$ac_word$ac_exec_ext" && $as_test_x "$as_dir/$ac_word$ac_exec_ext"; }; then
+  case $as_dir in #(((
+    '') as_dir=./ ;;
+    */) ;;
+    *) as_dir=$as_dir/ ;;
+  esac
+    for ac_exec_ext in '' $ac_executable_extensions; do
+  if as_fn_executable_p "$as_dir$ac_word$ac_exec_ext"; then
     ac_cv_prog_MPICC="$ac_prog"
-    echo "$as_me:$LINENO: found $as_dir/$ac_word$ac_exec_ext" >&5
+    printf "%s\n" "$as_me:${as_lineno-$LINENO}: found $as_dir$ac_word$ac_exec_ext" >&5
     break 2
   fi
 done
-done
+  done
 IFS=$as_save_IFS
 
 fi
 fi
 MPICC=$ac_cv_prog_MPICC
 if test -n "$MPICC"; then
-  { echo "$as_me:$LINENO: result: $MPICC" >&5
-echo "${ECHO_T}$MPICC" >&6; }
+  { printf "%s\n" "$as_me:${as_lineno-$LINENO}: result: $MPICC" >&5
+printf "%s\n" "$MPICC" >&6; }
 else
-  { echo "$as_me:$LINENO: result: no" >&5
-echo "${ECHO_T}no" >&6; }
+  { printf "%s\n" "$as_me:${as_lineno-$LINENO}: result: no" >&5
+printf "%s\n" "no" >&6; }
 fi
 
 
@@ -17905,27 +16066,30 @@ fi
 
 
          if test -z "$MPICC"; then
-            { echo "$as_me:$LINENO: WARNING: no acceptable mpicc found in \$PATH" >&5
-echo "$as_me: WARNING: no acceptable mpicc found in \$PATH" >&2;}
+            { printf "%s\n" "$as_me:${as_lineno-$LINENO}: WARNING: no acceptable mpicc found in \$PATH" >&5
+printf "%s\n" "$as_me: WARNING: no acceptable mpicc found in \$PATH" >&2;}
 
 
 
 # Check whether --with-mpi-include was given.
-if test "${with_mpi_include+set}" = set; then
+if test ${with_mpi_include+y}
+then :
   withval=$with_mpi_include; casc_mpi_include_dir=$withval
 fi
 
 
 
 # Check whether --with-mpi-libs was given.
-if test "${with_mpi_libs+set}" = set; then
+if test ${with_mpi_libs+y}
+then :
   withval=$with_mpi_libs; casc_mpi_libs=$withval
 fi
 
 
 
 # Check whether --with-mpi-lib-dirs was given.
-if test "${with_mpi_lib_dirs+set}" = set; then
+if test ${with_mpi_lib_dirs+y}
+then :
   withval=$with_mpi_lib_dirs; casc_mpi_lib_dirs=$withval
 fi
 
@@ -17965,139 +16129,13 @@ fi
                esac
 
             if test -z "$MPIINCLUDE"; then
-               as_ac_Header=`echo "ac_cv_header_$casc_mpi_include_dir/mpi.h" | $as_tr_sh`
-if { as_var=$as_ac_Header; eval "test \"\${$as_var+set}\" = set"; }; then
-  { echo "$as_me:$LINENO: checking for $casc_mpi_include_dir/mpi.h" >&5
-echo $ECHO_N "checking for $casc_mpi_include_dir/mpi.h... $ECHO_C" >&6; }
-if { as_var=$as_ac_Header; eval "test \"\${$as_var+set}\" = set"; }; then
-  echo $ECHO_N "(cached) $ECHO_C" >&6
-fi
-ac_res=`eval echo '${'$as_ac_Header'}'`
-	       { echo "$as_me:$LINENO: result: $ac_res" >&5
-echo "${ECHO_T}$ac_res" >&6; }
-else
-  # Is the header compilable?
-{ echo "$as_me:$LINENO: checking $casc_mpi_include_dir/mpi.h usability" >&5
-echo $ECHO_N "checking $casc_mpi_include_dir/mpi.h usability... $ECHO_C" >&6; }
-cat >conftest.$ac_ext <<_ACEOF
-/* confdefs.h.  */
-_ACEOF
-cat confdefs.h >>conftest.$ac_ext
-cat >>conftest.$ac_ext <<_ACEOF
-/* end confdefs.h.  */
-$ac_includes_default
-#include <$casc_mpi_include_dir/mpi.h>
-_ACEOF
-rm -f conftest.$ac_objext
-if { (ac_try="$ac_compile"
-case "(($ac_try" in
-  *\"* | *\`* | *\\*) ac_try_echo=\$ac_try;;
-  *) ac_try_echo=$ac_try;;
-esac
-eval "echo \"\$as_me:$LINENO: $ac_try_echo\"") >&5
-  (eval "$ac_compile") 2>conftest.er1
-  ac_status=$?
-  grep -v '^ *+' conftest.er1 >conftest.err
-  rm -f conftest.er1
-  cat conftest.err >&5
-  echo "$as_me:$LINENO: \$? = $ac_status" >&5
-  (exit $ac_status); } && {
-	 test -z "$ac_c_werror_flag" ||
-	 test ! -s conftest.err
-       } && test -s conftest.$ac_objext; then
-  ac_header_compiler=yes
-else
-  echo "$as_me: failed program was:" >&5
-sed 's/^/| /' conftest.$ac_ext >&5
-
-	ac_header_compiler=no
-fi
-
-rm -f core conftest.err conftest.$ac_objext conftest.$ac_ext
-{ echo "$as_me:$LINENO: result: $ac_header_compiler" >&5
-echo "${ECHO_T}$ac_header_compiler" >&6; }
-
-# Is the header present?
-{ echo "$as_me:$LINENO: checking $casc_mpi_include_dir/mpi.h presence" >&5
-echo $ECHO_N "checking $casc_mpi_include_dir/mpi.h presence... $ECHO_C" >&6; }
-cat >conftest.$ac_ext <<_ACEOF
-/* confdefs.h.  */
-_ACEOF
-cat confdefs.h >>conftest.$ac_ext
-cat >>conftest.$ac_ext <<_ACEOF
-/* end confdefs.h.  */
-#include <$casc_mpi_include_dir/mpi.h>
-_ACEOF
-if { (ac_try="$ac_cpp conftest.$ac_ext"
-case "(($ac_try" in
-  *\"* | *\`* | *\\*) ac_try_echo=\$ac_try;;
-  *) ac_try_echo=$ac_try;;
-esac
-eval "echo \"\$as_me:$LINENO: $ac_try_echo\"") >&5
-  (eval "$ac_cpp conftest.$ac_ext") 2>conftest.er1
-  ac_status=$?
-  grep -v '^ *+' conftest.er1 >conftest.err
-  rm -f conftest.er1
-  cat conftest.err >&5
-  echo "$as_me:$LINENO: \$? = $ac_status" >&5
-  (exit $ac_status); } >/dev/null && {
-	 test -z "$ac_c_preproc_warn_flag$ac_c_werror_flag" ||
-	 test ! -s conftest.err
-       }; then
-  ac_header_preproc=yes
-else
-  echo "$as_me: failed program was:" >&5
-sed 's/^/| /' conftest.$ac_ext >&5
-
-  ac_header_preproc=no
-fi
-
-rm -f conftest.err conftest.$ac_ext
-{ echo "$as_me:$LINENO: result: $ac_header_preproc" >&5
-echo "${ECHO_T}$ac_header_preproc" >&6; }
-
-# So?  What about this header?
-case $ac_header_compiler:$ac_header_preproc:$ac_c_preproc_warn_flag in
-  yes:no: )
-    { echo "$as_me:$LINENO: WARNING: $casc_mpi_include_dir/mpi.h: accepted by the compiler, rejected by the preprocessor!" >&5
-echo "$as_me: WARNING: $casc_mpi_include_dir/mpi.h: accepted by the compiler, rejected by the preprocessor!" >&2;}
-    { echo "$as_me:$LINENO: WARNING: $casc_mpi_include_dir/mpi.h: proceeding with the compiler's result" >&5
-echo "$as_me: WARNING: $casc_mpi_include_dir/mpi.h: proceeding with the compiler's result" >&2;}
-    ac_header_preproc=yes
-    ;;
-  no:yes:* )
-    { echo "$as_me:$LINENO: WARNING: $casc_mpi_include_dir/mpi.h: present but cannot be compiled" >&5
-echo "$as_me: WARNING: $casc_mpi_include_dir/mpi.h: present but cannot be compiled" >&2;}
-    { echo "$as_me:$LINENO: WARNING: $casc_mpi_include_dir/mpi.h:     check for missing prerequisite headers?" >&5
-echo "$as_me: WARNING: $casc_mpi_include_dir/mpi.h:     check for missing prerequisite headers?" >&2;}
-    { echo "$as_me:$LINENO: WARNING: $casc_mpi_include_dir/mpi.h: see the Autoconf documentation" >&5
-echo "$as_me: WARNING: $casc_mpi_include_dir/mpi.h: see the Autoconf documentation" >&2;}
-    { echo "$as_me:$LINENO: WARNING: $casc_mpi_include_dir/mpi.h:     section \"Present But Cannot Be Compiled\"" >&5
-echo "$as_me: WARNING: $casc_mpi_include_dir/mpi.h:     section \"Present But Cannot Be Compiled\"" >&2;}
-    { echo "$as_me:$LINENO: WARNING: $casc_mpi_include_dir/mpi.h: proceeding with the preprocessor's result" >&5
-echo "$as_me: WARNING: $casc_mpi_include_dir/mpi.h: proceeding with the preprocessor's result" >&2;}
-    { echo "$as_me:$LINENO: WARNING: $casc_mpi_include_dir/mpi.h: in the future, the compiler will take precedence" >&5
-echo "$as_me: WARNING: $casc_mpi_include_dir/mpi.h: in the future, the compiler will take precedence" >&2;}
-
-    ;;
-esac
-{ echo "$as_me:$LINENO: checking for $casc_mpi_include_dir/mpi.h" >&5
-echo $ECHO_N "checking for $casc_mpi_include_dir/mpi.h... $ECHO_C" >&6; }
-if { as_var=$as_ac_Header; eval "test \"\${$as_var+set}\" = set"; }; then
-  echo $ECHO_N "(cached) $ECHO_C" >&6
-else
-  eval "$as_ac_Header=\$ac_header_preproc"
-fi
-ac_res=`eval echo '${'$as_ac_Header'}'`
-	       { echo "$as_me:$LINENO: result: $ac_res" >&5
-echo "${ECHO_T}$ac_res" >&6; }
-
-fi
-if test `eval echo '${'$as_ac_Header'}'` = yes; then
+               as_ac_Header=`printf "%s\n" "ac_cv_header_$casc_mpi_include_dir/mpi.h" | $as_tr_sh`
+ac_fn_c_check_header_compile "$LINENO" "$casc_mpi_include_dir/mpi.h" "$as_ac_Header" "$ac_includes_default"
+if eval test \"x\$"$as_ac_Header"\" = x"yes"
+then :
   MPIINCLUDE="-I$casc_mpi_include_dir"
 fi
 
-
             fi
          ;;
 
@@ -18105,140 +16143,14 @@ fi
             if test -z "$casc_mpi_include_dir"; then
                casc_mpi_include_dir=/usr/local/mpi/include
             fi
-            as_ac_Header=`echo "ac_cv_header_$casc_mpi_include_dir/mpi.h" | $as_tr_sh`
-if { as_var=$as_ac_Header; eval "test \"\${$as_var+set}\" = set"; }; then
-  { echo "$as_me:$LINENO: checking for $casc_mpi_include_dir/mpi.h" >&5
-echo $ECHO_N "checking for $casc_mpi_include_dir/mpi.h... $ECHO_C" >&6; }
-if { as_var=$as_ac_Header; eval "test \"\${$as_var+set}\" = set"; }; then
-  echo $ECHO_N "(cached) $ECHO_C" >&6
-fi
-ac_res=`eval echo '${'$as_ac_Header'}'`
-	       { echo "$as_me:$LINENO: result: $ac_res" >&5
-echo "${ECHO_T}$ac_res" >&6; }
-else
-  # Is the header compilable?
-{ echo "$as_me:$LINENO: checking $casc_mpi_include_dir/mpi.h usability" >&5
-echo $ECHO_N "checking $casc_mpi_include_dir/mpi.h usability... $ECHO_C" >&6; }
-cat >conftest.$ac_ext <<_ACEOF
-/* confdefs.h.  */
-_ACEOF
-cat confdefs.h >>conftest.$ac_ext
-cat >>conftest.$ac_ext <<_ACEOF
-/* end confdefs.h.  */
-$ac_includes_default
-#include <$casc_mpi_include_dir/mpi.h>
-_ACEOF
-rm -f conftest.$ac_objext
-if { (ac_try="$ac_compile"
-case "(($ac_try" in
-  *\"* | *\`* | *\\*) ac_try_echo=\$ac_try;;
-  *) ac_try_echo=$ac_try;;
-esac
-eval "echo \"\$as_me:$LINENO: $ac_try_echo\"") >&5
-  (eval "$ac_compile") 2>conftest.er1
-  ac_status=$?
-  grep -v '^ *+' conftest.er1 >conftest.err
-  rm -f conftest.er1
-  cat conftest.err >&5
-  echo "$as_me:$LINENO: \$? = $ac_status" >&5
-  (exit $ac_status); } && {
-	 test -z "$ac_c_werror_flag" ||
-	 test ! -s conftest.err
-       } && test -s conftest.$ac_objext; then
-  ac_header_compiler=yes
-else
-  echo "$as_me: failed program was:" >&5
-sed 's/^/| /' conftest.$ac_ext >&5
-
-	ac_header_compiler=no
-fi
-
-rm -f core conftest.err conftest.$ac_objext conftest.$ac_ext
-{ echo "$as_me:$LINENO: result: $ac_header_compiler" >&5
-echo "${ECHO_T}$ac_header_compiler" >&6; }
-
-# Is the header present?
-{ echo "$as_me:$LINENO: checking $casc_mpi_include_dir/mpi.h presence" >&5
-echo $ECHO_N "checking $casc_mpi_include_dir/mpi.h presence... $ECHO_C" >&6; }
-cat >conftest.$ac_ext <<_ACEOF
-/* confdefs.h.  */
-_ACEOF
-cat confdefs.h >>conftest.$ac_ext
-cat >>conftest.$ac_ext <<_ACEOF
-/* end confdefs.h.  */
-#include <$casc_mpi_include_dir/mpi.h>
-_ACEOF
-if { (ac_try="$ac_cpp conftest.$ac_ext"
-case "(($ac_try" in
-  *\"* | *\`* | *\\*) ac_try_echo=\$ac_try;;
-  *) ac_try_echo=$ac_try;;
-esac
-eval "echo \"\$as_me:$LINENO: $ac_try_echo\"") >&5
-  (eval "$ac_cpp conftest.$ac_ext") 2>conftest.er1
-  ac_status=$?
-  grep -v '^ *+' conftest.er1 >conftest.err
-  rm -f conftest.er1
-  cat conftest.err >&5
-  echo "$as_me:$LINENO: \$? = $ac_status" >&5
-  (exit $ac_status); } >/dev/null && {
-	 test -z "$ac_c_preproc_warn_flag$ac_c_werror_flag" ||
-	 test ! -s conftest.err
-       }; then
-  ac_header_preproc=yes
-else
-  echo "$as_me: failed program was:" >&5
-sed 's/^/| /' conftest.$ac_ext >&5
-
-  ac_header_preproc=no
-fi
-
-rm -f conftest.err conftest.$ac_ext
-{ echo "$as_me:$LINENO: result: $ac_header_preproc" >&5
-echo "${ECHO_T}$ac_header_preproc" >&6; }
-
-# So?  What about this header?
-case $ac_header_compiler:$ac_header_preproc:$ac_c_preproc_warn_flag in
-  yes:no: )
-    { echo "$as_me:$LINENO: WARNING: $casc_mpi_include_dir/mpi.h: accepted by the compiler, rejected by the preprocessor!" >&5
-echo "$as_me: WARNING: $casc_mpi_include_dir/mpi.h: accepted by the compiler, rejected by the preprocessor!" >&2;}
-    { echo "$as_me:$LINENO: WARNING: $casc_mpi_include_dir/mpi.h: proceeding with the compiler's result" >&5
-echo "$as_me: WARNING: $casc_mpi_include_dir/mpi.h: proceeding with the compiler's result" >&2;}
-    ac_header_preproc=yes
-    ;;
-  no:yes:* )
-    { echo "$as_me:$LINENO: WARNING: $casc_mpi_include_dir/mpi.h: present but cannot be compiled" >&5
-echo "$as_me: WARNING: $casc_mpi_include_dir/mpi.h: present but cannot be compiled" >&2;}
-    { echo "$as_me:$LINENO: WARNING: $casc_mpi_include_dir/mpi.h:     check for missing prerequisite headers?" >&5
-echo "$as_me: WARNING: $casc_mpi_include_dir/mpi.h:     check for missing prerequisite headers?" >&2;}
-    { echo "$as_me:$LINENO: WARNING: $casc_mpi_include_dir/mpi.h: see the Autoconf documentation" >&5
-echo "$as_me: WARNING: $casc_mpi_include_dir/mpi.h: see the Autoconf documentation" >&2;}
-    { echo "$as_me:$LINENO: WARNING: $casc_mpi_include_dir/mpi.h:     section \"Present But Cannot Be Compiled\"" >&5
-echo "$as_me: WARNING: $casc_mpi_include_dir/mpi.h:     section \"Present But Cannot Be Compiled\"" >&2;}
-    { echo "$as_me:$LINENO: WARNING: $casc_mpi_include_dir/mpi.h: proceeding with the preprocessor's result" >&5
-echo "$as_me: WARNING: $casc_mpi_include_dir/mpi.h: proceeding with the preprocessor's result" >&2;}
-    { echo "$as_me:$LINENO: WARNING: $casc_mpi_include_dir/mpi.h: in the future, the compiler will take precedence" >&5
-echo "$as_me: WARNING: $casc_mpi_include_dir/mpi.h: in the future, the compiler will take precedence" >&2;}
-
-    ;;
-esac
-{ echo "$as_me:$LINENO: checking for $casc_mpi_include_dir/mpi.h" >&5
-echo $ECHO_N "checking for $casc_mpi_include_dir/mpi.h... $ECHO_C" >&6; }
-if { as_var=$as_ac_Header; eval "test \"\${$as_var+set}\" = set"; }; then
-  echo $ECHO_N "(cached) $ECHO_C" >&6
-else
-  eval "$as_ac_Header=\$ac_header_preproc"
-fi
-ac_res=`eval echo '${'$as_ac_Header'}'`
-	       { echo "$as_me:$LINENO: result: $ac_res" >&5
-echo "${ECHO_T}$ac_res" >&6; }
-
-fi
-if test `eval echo '${'$as_ac_Header'}'` = yes; then
+            as_ac_Header=`printf "%s\n" "ac_cv_header_$casc_mpi_include_dir/mpi.h" | $as_tr_sh`
+ac_fn_c_check_header_compile "$LINENO" "$casc_mpi_include_dir/mpi.h" "$as_ac_Header" "$ac_includes_default"
+if eval test \"x\$"$as_ac_Header"\" = x"yes"
+then :
   MPIINCLUDE="-I$casc_mpi_include_dir"
 fi
 
 
-
             if test -z "$casc_mpi_lib_dirs"; then
                casc_mpi_lib_dirs="/usr/local/mpi/lib/alpha/ch_shmem \
                                   /usr/local/lib"
@@ -18258,140 +16170,14 @@ fi
             if test -z "$casc_mpi_include_dir"; then
                casc_mpi_include_dir=/usr/local/mpi/include
             fi
-            as_ac_Header=`echo "ac_cv_header_$casc_mpi_include_dir/mpi.h" | $as_tr_sh`
-if { as_var=$as_ac_Header; eval "test \"\${$as_var+set}\" = set"; }; then
-  { echo "$as_me:$LINENO: checking for $casc_mpi_include_dir/mpi.h" >&5
-echo $ECHO_N "checking for $casc_mpi_include_dir/mpi.h... $ECHO_C" >&6; }
-if { as_var=$as_ac_Header; eval "test \"\${$as_var+set}\" = set"; }; then
-  echo $ECHO_N "(cached) $ECHO_C" >&6
-fi
-ac_res=`eval echo '${'$as_ac_Header'}'`
-	       { echo "$as_me:$LINENO: result: $ac_res" >&5
-echo "${ECHO_T}$ac_res" >&6; }
-else
-  # Is the header compilable?
-{ echo "$as_me:$LINENO: checking $casc_mpi_include_dir/mpi.h usability" >&5
-echo $ECHO_N "checking $casc_mpi_include_dir/mpi.h usability... $ECHO_C" >&6; }
-cat >conftest.$ac_ext <<_ACEOF
-/* confdefs.h.  */
-_ACEOF
-cat confdefs.h >>conftest.$ac_ext
-cat >>conftest.$ac_ext <<_ACEOF
-/* end confdefs.h.  */
-$ac_includes_default
-#include <$casc_mpi_include_dir/mpi.h>
-_ACEOF
-rm -f conftest.$ac_objext
-if { (ac_try="$ac_compile"
-case "(($ac_try" in
-  *\"* | *\`* | *\\*) ac_try_echo=\$ac_try;;
-  *) ac_try_echo=$ac_try;;
-esac
-eval "echo \"\$as_me:$LINENO: $ac_try_echo\"") >&5
-  (eval "$ac_compile") 2>conftest.er1
-  ac_status=$?
-  grep -v '^ *+' conftest.er1 >conftest.err
-  rm -f conftest.er1
-  cat conftest.err >&5
-  echo "$as_me:$LINENO: \$? = $ac_status" >&5
-  (exit $ac_status); } && {
-	 test -z "$ac_c_werror_flag" ||
-	 test ! -s conftest.err
-       } && test -s conftest.$ac_objext; then
-  ac_header_compiler=yes
-else
-  echo "$as_me: failed program was:" >&5
-sed 's/^/| /' conftest.$ac_ext >&5
-
-	ac_header_compiler=no
-fi
-
-rm -f core conftest.err conftest.$ac_objext conftest.$ac_ext
-{ echo "$as_me:$LINENO: result: $ac_header_compiler" >&5
-echo "${ECHO_T}$ac_header_compiler" >&6; }
-
-# Is the header present?
-{ echo "$as_me:$LINENO: checking $casc_mpi_include_dir/mpi.h presence" >&5
-echo $ECHO_N "checking $casc_mpi_include_dir/mpi.h presence... $ECHO_C" >&6; }
-cat >conftest.$ac_ext <<_ACEOF
-/* confdefs.h.  */
-_ACEOF
-cat confdefs.h >>conftest.$ac_ext
-cat >>conftest.$ac_ext <<_ACEOF
-/* end confdefs.h.  */
-#include <$casc_mpi_include_dir/mpi.h>
-_ACEOF
-if { (ac_try="$ac_cpp conftest.$ac_ext"
-case "(($ac_try" in
-  *\"* | *\`* | *\\*) ac_try_echo=\$ac_try;;
-  *) ac_try_echo=$ac_try;;
-esac
-eval "echo \"\$as_me:$LINENO: $ac_try_echo\"") >&5
-  (eval "$ac_cpp conftest.$ac_ext") 2>conftest.er1
-  ac_status=$?
-  grep -v '^ *+' conftest.er1 >conftest.err
-  rm -f conftest.er1
-  cat conftest.err >&5
-  echo "$as_me:$LINENO: \$? = $ac_status" >&5
-  (exit $ac_status); } >/dev/null && {
-	 test -z "$ac_c_preproc_warn_flag$ac_c_werror_flag" ||
-	 test ! -s conftest.err
-       }; then
-  ac_header_preproc=yes
-else
-  echo "$as_me: failed program was:" >&5
-sed 's/^/| /' conftest.$ac_ext >&5
-
-  ac_header_preproc=no
-fi
-
-rm -f conftest.err conftest.$ac_ext
-{ echo "$as_me:$LINENO: result: $ac_header_preproc" >&5
-echo "${ECHO_T}$ac_header_preproc" >&6; }
-
-# So?  What about this header?
-case $ac_header_compiler:$ac_header_preproc:$ac_c_preproc_warn_flag in
-  yes:no: )
-    { echo "$as_me:$LINENO: WARNING: $casc_mpi_include_dir/mpi.h: accepted by the compiler, rejected by the preprocessor!" >&5
-echo "$as_me: WARNING: $casc_mpi_include_dir/mpi.h: accepted by the compiler, rejected by the preprocessor!" >&2;}
-    { echo "$as_me:$LINENO: WARNING: $casc_mpi_include_dir/mpi.h: proceeding with the compiler's result" >&5
-echo "$as_me: WARNING: $casc_mpi_include_dir/mpi.h: proceeding with the compiler's result" >&2;}
-    ac_header_preproc=yes
-    ;;
-  no:yes:* )
-    { echo "$as_me:$LINENO: WARNING: $casc_mpi_include_dir/mpi.h: present but cannot be compiled" >&5
-echo "$as_me: WARNING: $casc_mpi_include_dir/mpi.h: present but cannot be compiled" >&2;}
-    { echo "$as_me:$LINENO: WARNING: $casc_mpi_include_dir/mpi.h:     check for missing prerequisite headers?" >&5
-echo "$as_me: WARNING: $casc_mpi_include_dir/mpi.h:     check for missing prerequisite headers?" >&2;}
-    { echo "$as_me:$LINENO: WARNING: $casc_mpi_include_dir/mpi.h: see the Autoconf documentation" >&5
-echo "$as_me: WARNING: $casc_mpi_include_dir/mpi.h: see the Autoconf documentation" >&2;}
-    { echo "$as_me:$LINENO: WARNING: $casc_mpi_include_dir/mpi.h:     section \"Present But Cannot Be Compiled\"" >&5
-echo "$as_me: WARNING: $casc_mpi_include_dir/mpi.h:     section \"Present But Cannot Be Compiled\"" >&2;}
-    { echo "$as_me:$LINENO: WARNING: $casc_mpi_include_dir/mpi.h: proceeding with the preprocessor's result" >&5
-echo "$as_me: WARNING: $casc_mpi_include_dir/mpi.h: proceeding with the preprocessor's result" >&2;}
-    { echo "$as_me:$LINENO: WARNING: $casc_mpi_include_dir/mpi.h: in the future, the compiler will take precedence" >&5
-echo "$as_me: WARNING: $casc_mpi_include_dir/mpi.h: in the future, the compiler will take precedence" >&2;}
-
-    ;;
-esac
-{ echo "$as_me:$LINENO: checking for $casc_mpi_include_dir/mpi.h" >&5
-echo $ECHO_N "checking for $casc_mpi_include_dir/mpi.h... $ECHO_C" >&6; }
-if { as_var=$as_ac_Header; eval "test \"\${$as_var+set}\" = set"; }; then
-  echo $ECHO_N "(cached) $ECHO_C" >&6
-else
-  eval "$as_ac_Header=\$ac_header_preproc"
-fi
-ac_res=`eval echo '${'$as_ac_Header'}'`
-	       { echo "$as_me:$LINENO: result: $ac_res" >&5
-echo "${ECHO_T}$ac_res" >&6; }
-
-fi
-if test `eval echo '${'$as_ac_Header'}'` = yes; then
+            as_ac_Header=`printf "%s\n" "ac_cv_header_$casc_mpi_include_dir/mpi.h" | $as_tr_sh`
+ac_fn_c_check_header_compile "$LINENO" "$casc_mpi_include_dir/mpi.h" "$as_ac_Header" "$ac_includes_default"
+if eval test \"x\$"$as_ac_Header"\" = x"yes"
+then :
   MPIINCLUDE="-I$casc_mpi_include_dir"
 fi
 
 
-
             if test -z "$casc_mpi_lib_dirs"; then
                casc_mpi_lib_dirs=/usr/local/mpi/lib/IRIX64/ch_p4
             fi
@@ -18399,145 +16185,19 @@ fi
             casc_mpi_libs=mpi;;
 
          *)
-{ echo "$as_me:$LINENO: WARNING: trying naive MPI settings - can use --with flags to change" >&5
-echo "$as_me: WARNING: trying naive MPI settings - can use --with flags to change" >&2;}
+{ printf "%s\n" "$as_me:${as_lineno-$LINENO}: WARNING: trying naive MPI settings - can use --with flags to change" >&5
+printf "%s\n" "$as_me: WARNING: trying naive MPI settings - can use --with flags to change" >&2;}
             if test -z "$casc_mpi_include_dir"; then
                casc_mpi_include_dir=/usr/local/mpi/include
             fi
-            as_ac_Header=`echo "ac_cv_header_$casc_mpi_include_dir/mpi.h" | $as_tr_sh`
-if { as_var=$as_ac_Header; eval "test \"\${$as_var+set}\" = set"; }; then
-  { echo "$as_me:$LINENO: checking for $casc_mpi_include_dir/mpi.h" >&5
-echo $ECHO_N "checking for $casc_mpi_include_dir/mpi.h... $ECHO_C" >&6; }
-if { as_var=$as_ac_Header; eval "test \"\${$as_var+set}\" = set"; }; then
-  echo $ECHO_N "(cached) $ECHO_C" >&6
-fi
-ac_res=`eval echo '${'$as_ac_Header'}'`
-	       { echo "$as_me:$LINENO: result: $ac_res" >&5
-echo "${ECHO_T}$ac_res" >&6; }
-else
-  # Is the header compilable?
-{ echo "$as_me:$LINENO: checking $casc_mpi_include_dir/mpi.h usability" >&5
-echo $ECHO_N "checking $casc_mpi_include_dir/mpi.h usability... $ECHO_C" >&6; }
-cat >conftest.$ac_ext <<_ACEOF
-/* confdefs.h.  */
-_ACEOF
-cat confdefs.h >>conftest.$ac_ext
-cat >>conftest.$ac_ext <<_ACEOF
-/* end confdefs.h.  */
-$ac_includes_default
-#include <$casc_mpi_include_dir/mpi.h>
-_ACEOF
-rm -f conftest.$ac_objext
-if { (ac_try="$ac_compile"
-case "(($ac_try" in
-  *\"* | *\`* | *\\*) ac_try_echo=\$ac_try;;
-  *) ac_try_echo=$ac_try;;
-esac
-eval "echo \"\$as_me:$LINENO: $ac_try_echo\"") >&5
-  (eval "$ac_compile") 2>conftest.er1
-  ac_status=$?
-  grep -v '^ *+' conftest.er1 >conftest.err
-  rm -f conftest.er1
-  cat conftest.err >&5
-  echo "$as_me:$LINENO: \$? = $ac_status" >&5
-  (exit $ac_status); } && {
-	 test -z "$ac_c_werror_flag" ||
-	 test ! -s conftest.err
-       } && test -s conftest.$ac_objext; then
-  ac_header_compiler=yes
-else
-  echo "$as_me: failed program was:" >&5
-sed 's/^/| /' conftest.$ac_ext >&5
-
-	ac_header_compiler=no
-fi
-
-rm -f core conftest.err conftest.$ac_objext conftest.$ac_ext
-{ echo "$as_me:$LINENO: result: $ac_header_compiler" >&5
-echo "${ECHO_T}$ac_header_compiler" >&6; }
-
-# Is the header present?
-{ echo "$as_me:$LINENO: checking $casc_mpi_include_dir/mpi.h presence" >&5
-echo $ECHO_N "checking $casc_mpi_include_dir/mpi.h presence... $ECHO_C" >&6; }
-cat >conftest.$ac_ext <<_ACEOF
-/* confdefs.h.  */
-_ACEOF
-cat confdefs.h >>conftest.$ac_ext
-cat >>conftest.$ac_ext <<_ACEOF
-/* end confdefs.h.  */
-#include <$casc_mpi_include_dir/mpi.h>
-_ACEOF
-if { (ac_try="$ac_cpp conftest.$ac_ext"
-case "(($ac_try" in
-  *\"* | *\`* | *\\*) ac_try_echo=\$ac_try;;
-  *) ac_try_echo=$ac_try;;
-esac
-eval "echo \"\$as_me:$LINENO: $ac_try_echo\"") >&5
-  (eval "$ac_cpp conftest.$ac_ext") 2>conftest.er1
-  ac_status=$?
-  grep -v '^ *+' conftest.er1 >conftest.err
-  rm -f conftest.er1
-  cat conftest.err >&5
-  echo "$as_me:$LINENO: \$? = $ac_status" >&5
-  (exit $ac_status); } >/dev/null && {
-	 test -z "$ac_c_preproc_warn_flag$ac_c_werror_flag" ||
-	 test ! -s conftest.err
-       }; then
-  ac_header_preproc=yes
-else
-  echo "$as_me: failed program was:" >&5
-sed 's/^/| /' conftest.$ac_ext >&5
-
-  ac_header_preproc=no
-fi
-
-rm -f conftest.err conftest.$ac_ext
-{ echo "$as_me:$LINENO: result: $ac_header_preproc" >&5
-echo "${ECHO_T}$ac_header_preproc" >&6; }
-
-# So?  What about this header?
-case $ac_header_compiler:$ac_header_preproc:$ac_c_preproc_warn_flag in
-  yes:no: )
-    { echo "$as_me:$LINENO: WARNING: $casc_mpi_include_dir/mpi.h: accepted by the compiler, rejected by the preprocessor!" >&5
-echo "$as_me: WARNING: $casc_mpi_include_dir/mpi.h: accepted by the compiler, rejected by the preprocessor!" >&2;}
-    { echo "$as_me:$LINENO: WARNING: $casc_mpi_include_dir/mpi.h: proceeding with the compiler's result" >&5
-echo "$as_me: WARNING: $casc_mpi_include_dir/mpi.h: proceeding with the compiler's result" >&2;}
-    ac_header_preproc=yes
-    ;;
-  no:yes:* )
-    { echo "$as_me:$LINENO: WARNING: $casc_mpi_include_dir/mpi.h: present but cannot be compiled" >&5
-echo "$as_me: WARNING: $casc_mpi_include_dir/mpi.h: present but cannot be compiled" >&2;}
-    { echo "$as_me:$LINENO: WARNING: $casc_mpi_include_dir/mpi.h:     check for missing prerequisite headers?" >&5
-echo "$as_me: WARNING: $casc_mpi_include_dir/mpi.h:     check for missing prerequisite headers?" >&2;}
-    { echo "$as_me:$LINENO: WARNING: $casc_mpi_include_dir/mpi.h: see the Autoconf documentation" >&5
-echo "$as_me: WARNING: $casc_mpi_include_dir/mpi.h: see the Autoconf documentation" >&2;}
-    { echo "$as_me:$LINENO: WARNING: $casc_mpi_include_dir/mpi.h:     section \"Present But Cannot Be Compiled\"" >&5
-echo "$as_me: WARNING: $casc_mpi_include_dir/mpi.h:     section \"Present But Cannot Be Compiled\"" >&2;}
-    { echo "$as_me:$LINENO: WARNING: $casc_mpi_include_dir/mpi.h: proceeding with the preprocessor's result" >&5
-echo "$as_me: WARNING: $casc_mpi_include_dir/mpi.h: proceeding with the preprocessor's result" >&2;}
-    { echo "$as_me:$LINENO: WARNING: $casc_mpi_include_dir/mpi.h: in the future, the compiler will take precedence" >&5
-echo "$as_me: WARNING: $casc_mpi_include_dir/mpi.h: in the future, the compiler will take precedence" >&2;}
-
-    ;;
-esac
-{ echo "$as_me:$LINENO: checking for $casc_mpi_include_dir/mpi.h" >&5
-echo $ECHO_N "checking for $casc_mpi_include_dir/mpi.h... $ECHO_C" >&6; }
-if { as_var=$as_ac_Header; eval "test \"\${$as_var+set}\" = set"; }; then
-  echo $ECHO_N "(cached) $ECHO_C" >&6
-else
-  eval "$as_ac_Header=\$ac_header_preproc"
-fi
-ac_res=`eval echo '${'$as_ac_Header'}'`
-	       { echo "$as_me:$LINENO: result: $ac_res" >&5
-echo "${ECHO_T}$ac_res" >&6; }
-
-fi
-if test `eval echo '${'$as_ac_Header'}'` = yes; then
+            as_ac_Header=`printf "%s\n" "ac_cv_header_$casc_mpi_include_dir/mpi.h" | $as_tr_sh`
+ac_fn_c_check_header_compile "$LINENO" "$casc_mpi_include_dir/mpi.h" "$as_ac_Header" "$ac_includes_default"
+if eval test \"x\$"$as_ac_Header"\" = x"yes"
+then :
   MPIINCLUDE="-I$casc_mpi_include_dir"
 fi
 
 
-
             if test -z "$casc_mpi_lib_dirs"; then
                casc_mpi_lib_dirs=/usr/local/mpi/lib
             fi
@@ -18552,19 +16212,16 @@ fi
 
    # check for the library from first argument.  If linking is successful
    # the first time, the job is done, otherwise loop through DIRECTORY-LIST
-   as_ac_Lib=`echo "ac_cv_lib_$casc_lib''_main" | $as_tr_sh`
-{ echo "$as_me:$LINENO: checking for main in -l$casc_lib" >&5
-echo $ECHO_N "checking for main in -l$casc_lib... $ECHO_C" >&6; }
-if { as_var=$as_ac_Lib; eval "test \"\${$as_var+set}\" = set"; }; then
-  echo $ECHO_N "(cached) $ECHO_C" >&6
-else
+   as_ac_Lib=`printf "%s\n" "ac_cv_lib_$casc_lib""_main" | $as_tr_sh`
+{ printf "%s\n" "$as_me:${as_lineno-$LINENO}: checking for main in -l$casc_lib" >&5
+printf %s "checking for main in -l$casc_lib... " >&6; }
+if eval test \${$as_ac_Lib+y}
+then :
+  printf %s "(cached) " >&6
+else $as_nop
   ac_check_lib_save_LIBS=$LIBS
 LIBS="-l$casc_lib $MPILIBDIRS $MPILIBS $LIBS"
-cat >conftest.$ac_ext <<_ACEOF
-/* confdefs.h.  */
-_ACEOF
-cat confdefs.h >>conftest.$ac_ext
-cat >>conftest.$ac_ext <<_ACEOF
+cat confdefs.h - <<_ACEOF >conftest.$ac_ext
 /* end confdefs.h.  */
 
 
@@ -18577,66 +16234,44 @@ cat >>conftest.$ac_ext <<_ACEOF
 
 #endif
 int
-main ()
+main (void)
 {
 return main ();
   ;
   return 0;
 }
 _ACEOF
-rm -f conftest.$ac_objext conftest$ac_exeext
-if { (ac_try="$ac_link"
-case "(($ac_try" in
-  *\"* | *\`* | *\\*) ac_try_echo=\$ac_try;;
-  *) ac_try_echo=$ac_try;;
-esac
-eval "echo \"\$as_me:$LINENO: $ac_try_echo\"") >&5
-  (eval "$ac_link") 2>conftest.er1
-  ac_status=$?
-  grep -v '^ *+' conftest.er1 >conftest.err
-  rm -f conftest.er1
-  cat conftest.err >&5
-  echo "$as_me:$LINENO: \$? = $ac_status" >&5
-  (exit $ac_status); } && {
-	 test -z "$ac_c_werror_flag" ||
-	 test ! -s conftest.err
-       } && test -s conftest$ac_exeext &&
-       $as_test_x conftest$ac_exeext; then
+if ac_fn_c_try_link "$LINENO"
+then :
   eval "$as_ac_Lib=yes"
-else
-  echo "$as_me: failed program was:" >&5
-sed 's/^/| /' conftest.$ac_ext >&5
-
-	eval "$as_ac_Lib=no"
+else $as_nop
+  eval "$as_ac_Lib=no"
 fi
-
-rm -f core conftest.err conftest.$ac_objext conftest_ipa8_conftest.oo \
-      conftest$ac_exeext conftest.$ac_ext
+rm -f core conftest.err conftest.$ac_objext conftest.beam \
+    conftest$ac_exeext conftest.$ac_ext
 LIBS=$ac_check_lib_save_LIBS
 fi
-ac_res=`eval echo '${'$as_ac_Lib'}'`
-	       { echo "$as_me:$LINENO: result: $ac_res" >&5
-echo "${ECHO_T}$ac_res" >&6; }
-if test `eval echo '${'$as_ac_Lib'}'` = yes; then
+eval ac_res=\$$as_ac_Lib
+	       { printf "%s\n" "$as_me:${as_lineno-$LINENO}: result: $ac_res" >&5
+printf "%s\n" "$ac_res" >&6; }
+if eval test \"x\$"$as_ac_Lib"\" = x"yes"
+then :
   MPILIBS="$MPILIBS -l$casc_lib"
                           casc_lib_found=yes
 
-else
+else $as_nop
         for casc_lib_dir in $casc_mpi_lib_dirs; do
 
-         as_ac_Lib=`echo "ac_cv_lib_$casc_lib''_main" | $as_tr_sh`
-{ echo "$as_me:$LINENO: checking for main in -l$casc_lib" >&5
-echo $ECHO_N "checking for main in -l$casc_lib... $ECHO_C" >&6; }
-if { as_var=$as_ac_Lib; eval "test \"\${$as_var+set}\" = set"; }; then
-  echo $ECHO_N "(cached) $ECHO_C" >&6
-else
+         as_ac_Lib=`printf "%s\n" "ac_cv_lib_$casc_lib""_main" | $as_tr_sh`
+{ printf "%s\n" "$as_me:${as_lineno-$LINENO}: checking for main in -l$casc_lib" >&5
+printf %s "checking for main in -l$casc_lib... " >&6; }
+if eval test \${$as_ac_Lib+y}
+then :
+  printf %s "(cached) " >&6
+else $as_nop
   ac_check_lib_save_LIBS=$LIBS
 LIBS="-l$casc_lib -L$casc_lib_dir $MPILIBDIRS $MPILIBS -l$casc_lib $LIBS"
-cat >conftest.$ac_ext <<_ACEOF
-/* confdefs.h.  */
-_ACEOF
-cat confdefs.h >>conftest.$ac_ext
-cat >>conftest.$ac_ext <<_ACEOF
+cat confdefs.h - <<_ACEOF >conftest.$ac_ext
 /* end confdefs.h.  */
 
 
@@ -18649,47 +16284,28 @@ cat >>conftest.$ac_ext <<_ACEOF
 
 #endif
 int
-main ()
+main (void)
 {
 return main ();
   ;
   return 0;
 }
 _ACEOF
-rm -f conftest.$ac_objext conftest$ac_exeext
-if { (ac_try="$ac_link"
-case "(($ac_try" in
-  *\"* | *\`* | *\\*) ac_try_echo=\$ac_try;;
-  *) ac_try_echo=$ac_try;;
-esac
-eval "echo \"\$as_me:$LINENO: $ac_try_echo\"") >&5
-  (eval "$ac_link") 2>conftest.er1
-  ac_status=$?
-  grep -v '^ *+' conftest.er1 >conftest.err
-  rm -f conftest.er1
-  cat conftest.err >&5
-  echo "$as_me:$LINENO: \$? = $ac_status" >&5
-  (exit $ac_status); } && {
-	 test -z "$ac_c_werror_flag" ||
-	 test ! -s conftest.err
-       } && test -s conftest$ac_exeext &&
-       $as_test_x conftest$ac_exeext; then
+if ac_fn_c_try_link "$LINENO"
+then :
   eval "$as_ac_Lib=yes"
-else
-  echo "$as_me: failed program was:" >&5
-sed 's/^/| /' conftest.$ac_ext >&5
-
-	eval "$as_ac_Lib=no"
+else $as_nop
+  eval "$as_ac_Lib=no"
 fi
-
-rm -f core conftest.err conftest.$ac_objext conftest_ipa8_conftest.oo \
-      conftest$ac_exeext conftest.$ac_ext
+rm -f core conftest.err conftest.$ac_objext conftest.beam \
+    conftest$ac_exeext conftest.$ac_ext
 LIBS=$ac_check_lib_save_LIBS
 fi
-ac_res=`eval echo '${'$as_ac_Lib'}'`
-	       { echo "$as_me:$LINENO: result: $ac_res" >&5
-echo "${ECHO_T}$ac_res" >&6; }
-if test `eval echo '${'$as_ac_Lib'}'` = yes; then
+eval ac_res=\$$as_ac_Lib
+	       { printf "%s\n" "$as_me:${as_lineno-$LINENO}: result: $ac_res" >&5
+printf "%s\n" "$ac_res" >&6; }
+if eval test \"x\$"$as_ac_Lib"\" = x"yes"
+then :
   MPILIBDIRS="-L$casc_lib_dir $MPILIBDIRS"
             MPILIBS="$MPILIBS -l$casc_lib"
             casc_lib_found=yes
@@ -18734,8 +16350,8 @@ fi
    fi
 
             if test -z "$MPILIBS"; then
-             { echo "$as_me:$LINENO: WARNING: MPI not found - must set manually using --with flags" >&5
-echo "$as_me: WARNING: MPI not found - must set manually using --with flags" >&2;}
+             { printf "%s\n" "$as_me:${as_lineno-$LINENO}: WARNING: MPI not found - must set manually using --with flags" >&5
+printf "%s\n" "$as_me: WARNING: MPI not found - must set manually using --with flags" >&2;}
             fi
 
 
@@ -18927,137 +16543,13 @@ EOF
                         CPPFLAGS="$casc_cppflags"
 
                         unset ac_cv_header_mpi_h
-                        if test "${ac_cv_header_mpi_h+set}" = set; then
-  { echo "$as_me:$LINENO: checking for mpi.h" >&5
-echo $ECHO_N "checking for mpi.h... $ECHO_C" >&6; }
-if test "${ac_cv_header_mpi_h+set}" = set; then
-  echo $ECHO_N "(cached) $ECHO_C" >&6
-fi
-{ echo "$as_me:$LINENO: result: $ac_cv_header_mpi_h" >&5
-echo "${ECHO_T}$ac_cv_header_mpi_h" >&6; }
-else
-  # Is the header compilable?
-{ echo "$as_me:$LINENO: checking mpi.h usability" >&5
-echo $ECHO_N "checking mpi.h usability... $ECHO_C" >&6; }
-cat >conftest.$ac_ext <<_ACEOF
-/* confdefs.h.  */
-_ACEOF
-cat confdefs.h >>conftest.$ac_ext
-cat >>conftest.$ac_ext <<_ACEOF
-/* end confdefs.h.  */
-$ac_includes_default
-#include <mpi.h>
-_ACEOF
-rm -f conftest.$ac_objext
-if { (ac_try="$ac_compile"
-case "(($ac_try" in
-  *\"* | *\`* | *\\*) ac_try_echo=\$ac_try;;
-  *) ac_try_echo=$ac_try;;
-esac
-eval "echo \"\$as_me:$LINENO: $ac_try_echo\"") >&5
-  (eval "$ac_compile") 2>conftest.er1
-  ac_status=$?
-  grep -v '^ *+' conftest.er1 >conftest.err
-  rm -f conftest.er1
-  cat conftest.err >&5
-  echo "$as_me:$LINENO: \$? = $ac_status" >&5
-  (exit $ac_status); } && {
-	 test -z "$ac_c_werror_flag" ||
-	 test ! -s conftest.err
-       } && test -s conftest.$ac_objext; then
-  ac_header_compiler=yes
-else
-  echo "$as_me: failed program was:" >&5
-sed 's/^/| /' conftest.$ac_ext >&5
-
-	ac_header_compiler=no
-fi
-
-rm -f core conftest.err conftest.$ac_objext conftest.$ac_ext
-{ echo "$as_me:$LINENO: result: $ac_header_compiler" >&5
-echo "${ECHO_T}$ac_header_compiler" >&6; }
-
-# Is the header present?
-{ echo "$as_me:$LINENO: checking mpi.h presence" >&5
-echo $ECHO_N "checking mpi.h presence... $ECHO_C" >&6; }
-cat >conftest.$ac_ext <<_ACEOF
-/* confdefs.h.  */
-_ACEOF
-cat confdefs.h >>conftest.$ac_ext
-cat >>conftest.$ac_ext <<_ACEOF
-/* end confdefs.h.  */
-#include <mpi.h>
-_ACEOF
-if { (ac_try="$ac_cpp conftest.$ac_ext"
-case "(($ac_try" in
-  *\"* | *\`* | *\\*) ac_try_echo=\$ac_try;;
-  *) ac_try_echo=$ac_try;;
-esac
-eval "echo \"\$as_me:$LINENO: $ac_try_echo\"") >&5
-  (eval "$ac_cpp conftest.$ac_ext") 2>conftest.er1
-  ac_status=$?
-  grep -v '^ *+' conftest.er1 >conftest.err
-  rm -f conftest.er1
-  cat conftest.err >&5
-  echo "$as_me:$LINENO: \$? = $ac_status" >&5
-  (exit $ac_status); } >/dev/null && {
-	 test -z "$ac_c_preproc_warn_flag$ac_c_werror_flag" ||
-	 test ! -s conftest.err
-       }; then
-  ac_header_preproc=yes
-else
-  echo "$as_me: failed program was:" >&5
-sed 's/^/| /' conftest.$ac_ext >&5
-
-  ac_header_preproc=no
-fi
-
-rm -f conftest.err conftest.$ac_ext
-{ echo "$as_me:$LINENO: result: $ac_header_preproc" >&5
-echo "${ECHO_T}$ac_header_preproc" >&6; }
-
-# So?  What about this header?
-case $ac_header_compiler:$ac_header_preproc:$ac_c_preproc_warn_flag in
-  yes:no: )
-    { echo "$as_me:$LINENO: WARNING: mpi.h: accepted by the compiler, rejected by the preprocessor!" >&5
-echo "$as_me: WARNING: mpi.h: accepted by the compiler, rejected by the preprocessor!" >&2;}
-    { echo "$as_me:$LINENO: WARNING: mpi.h: proceeding with the compiler's result" >&5
-echo "$as_me: WARNING: mpi.h: proceeding with the compiler's result" >&2;}
-    ac_header_preproc=yes
-    ;;
-  no:yes:* )
-    { echo "$as_me:$LINENO: WARNING: mpi.h: present but cannot be compiled" >&5
-echo "$as_me: WARNING: mpi.h: present but cannot be compiled" >&2;}
-    { echo "$as_me:$LINENO: WARNING: mpi.h:     check for missing prerequisite headers?" >&5
-echo "$as_me: WARNING: mpi.h:     check for missing prerequisite headers?" >&2;}
-    { echo "$as_me:$LINENO: WARNING: mpi.h: see the Autoconf documentation" >&5
-echo "$as_me: WARNING: mpi.h: see the Autoconf documentation" >&2;}
-    { echo "$as_me:$LINENO: WARNING: mpi.h:     section \"Present But Cannot Be Compiled\"" >&5
-echo "$as_me: WARNING: mpi.h:     section \"Present But Cannot Be Compiled\"" >&2;}
-    { echo "$as_me:$LINENO: WARNING: mpi.h: proceeding with the preprocessor's result" >&5
-echo "$as_me: WARNING: mpi.h: proceeding with the preprocessor's result" >&2;}
-    { echo "$as_me:$LINENO: WARNING: mpi.h: in the future, the compiler will take precedence" >&5
-echo "$as_me: WARNING: mpi.h: in the future, the compiler will take precedence" >&2;}
-
-    ;;
-esac
-{ echo "$as_me:$LINENO: checking for mpi.h" >&5
-echo $ECHO_N "checking for mpi.h... $ECHO_C" >&6; }
-if test "${ac_cv_header_mpi_h+set}" = set; then
-  echo $ECHO_N "(cached) $ECHO_C" >&6
-else
-  ac_cv_header_mpi_h=$ac_header_preproc
-fi
-{ echo "$as_me:$LINENO: result: $ac_cv_header_mpi_h" >&5
-echo "${ECHO_T}$ac_cv_header_mpi_h" >&6; }
-
-fi
-if test $ac_cv_header_mpi_h = yes; then
+                        ac_fn_c_check_header_compile "$LINENO" "mpi.h" "ac_cv_header_mpi_h" "$ac_includes_default"
+if test "x$ac_cv_header_mpi_h" = xyes
+then :
   MPIINCLUDE="$casc_cppflags"
 fi
 
 
-
                                                 CPPFLAGS="$SAVE_CPPFLAGS"
 
                      else
@@ -19097,11 +16589,7 @@ ac_compile='$CC -c $CFLAGS $CPPFLAGS conftest.$ac_ext >&5'
 ac_link='$CC -o conftest$ac_exeext $CFLAGS $CPPFLAGS $LDFLAGS conftest.$ac_ext $LIBS >&5'
 ac_compiler_gnu=$ac_cv_c_compiler_gnu
 
-                  cat >conftest.$ac_ext <<_ACEOF
-/* confdefs.h.  */
-_ACEOF
-cat confdefs.h >>conftest.$ac_ext
-cat >>conftest.$ac_ext <<_ACEOF
+                  cat confdefs.h - <<_ACEOF >conftest.$ac_ext
 /* end confdefs.h.  */
 
 #include "mpi.h"
@@ -19115,7 +16603,7 @@ cat >>conftest.$ac_ext <<_ACEOF
 
 #endif
 int
-main ()
+main (void)
 {
 int rank, size;
    int argc;
@@ -19129,34 +16617,12 @@ int rank, size;
   return 0;
 }
 _ACEOF
-rm -f conftest.$ac_objext conftest$ac_exeext
-if { (ac_try="$ac_link"
-case "(($ac_try" in
-  *\"* | *\`* | *\\*) ac_try_echo=\$ac_try;;
-  *) ac_try_echo=$ac_try;;
-esac
-eval "echo \"\$as_me:$LINENO: $ac_try_echo\"") >&5
-  (eval "$ac_link") 2>conftest.er1
-  ac_status=$?
-  grep -v '^ *+' conftest.er1 >conftest.err
-  rm -f conftest.er1
-  cat conftest.err >&5
-  echo "$as_me:$LINENO: \$? = $ac_status" >&5
-  (exit $ac_status); } && {
-	 test -z "$ac_c_werror_flag" ||
-	 test ! -s conftest.err
-       } && test -s conftest$ac_exeext &&
-       $as_test_x conftest$ac_exeext; then
+if ac_fn_c_try_link "$LINENO"
+then :
   casc_result=yes
-else
-  echo "$as_me: failed program was:" >&5
-sed 's/^/| /' conftest.$ac_ext >&5
-
-
 fi
-
-rm -f core conftest.err conftest.$ac_objext conftest_ipa8_conftest.oo \
-      conftest$ac_exeext conftest.$ac_ext
+rm -f core conftest.err conftest.$ac_objext conftest.beam \
+    conftest$ac_exeext conftest.$ac_ext
                   ac_ext=c
 ac_cpp='$CPP $CPPFLAGS'
 ac_compile='$CC -c $CFLAGS $CPPFLAGS conftest.$ac_ext >&5'
@@ -19187,11 +16653,7 @@ ac_compile='$CC -c $CFLAGS $CPPFLAGS conftest.$ac_ext >&5'
 ac_link='$CC -o conftest$ac_exeext $CFLAGS $CPPFLAGS $LDFLAGS conftest.$ac_ext $LIBS >&5'
 ac_compiler_gnu=$ac_cv_c_compiler_gnu
 
-                  cat >conftest.$ac_ext <<_ACEOF
-/* confdefs.h.  */
-_ACEOF
-cat confdefs.h >>conftest.$ac_ext
-cat >>conftest.$ac_ext <<_ACEOF
+                  cat confdefs.h - <<_ACEOF >conftest.$ac_ext
 /* end confdefs.h.  */
 
 #include "mpi.h"
@@ -19205,7 +16667,7 @@ cat >>conftest.$ac_ext <<_ACEOF
 
 #endif
 int
-main ()
+main (void)
 {
 int rank, size;
    int argc;
@@ -19219,34 +16681,12 @@ int rank, size;
   return 0;
 }
 _ACEOF
-rm -f conftest.$ac_objext conftest$ac_exeext
-if { (ac_try="$ac_link"
-case "(($ac_try" in
-  *\"* | *\`* | *\\*) ac_try_echo=\$ac_try;;
-  *) ac_try_echo=$ac_try;;
-esac
-eval "echo \"\$as_me:$LINENO: $ac_try_echo\"") >&5
-  (eval "$ac_link") 2>conftest.er1
-  ac_status=$?
-  grep -v '^ *+' conftest.er1 >conftest.err
-  rm -f conftest.er1
-  cat conftest.err >&5
-  echo "$as_me:$LINENO: \$? = $ac_status" >&5
-  (exit $ac_status); } && {
-	 test -z "$ac_c_werror_flag" ||
-	 test ! -s conftest.err
-       } && test -s conftest$ac_exeext &&
-       $as_test_x conftest$ac_exeext; then
+if ac_fn_c_try_link "$LINENO"
+then :
   MPILIBS="$MPILIBS -lpthread"
-else
-  echo "$as_me: failed program was:" >&5
-sed 's/^/| /' conftest.$ac_ext >&5
-
-
 fi
-
-rm -f core conftest.err conftest.$ac_objext conftest_ipa8_conftest.oo \
-      conftest$ac_exeext conftest.$ac_ext
+rm -f core conftest.err conftest.$ac_objext conftest.beam \
+    conftest$ac_exeext conftest.$ac_ext
                   ac_ext=c
 ac_cpp='$CPP $CPPFLAGS'
 ac_compile='$CC -c $CFLAGS $CPPFLAGS conftest.$ac_ext >&5'
@@ -19256,46 +16696,50 @@ ac_compiler_gnu=$ac_cv_c_compiler_gnu
                   LIBS=$LIBS_SAVE
             fi
 
-            { echo "$as_me:$LINENO: checking for MPI include directories" >&5
-echo $ECHO_N "checking for MPI include directories... $ECHO_C" >&6; }
-            { echo "$as_me:$LINENO: result: $MPIINCLUDE" >&5
-echo "${ECHO_T}$MPIINCLUDE" >&6; }
-            { echo "$as_me:$LINENO: checking for MPI library directories" >&5
-echo $ECHO_N "checking for MPI library directories... $ECHO_C" >&6; }
-            { echo "$as_me:$LINENO: result: $MPILIBDIRS" >&5
-echo "${ECHO_T}$MPILIBDIRS" >&6; }
-            { echo "$as_me:$LINENO: checking for MPI libraries" >&5
-echo $ECHO_N "checking for MPI libraries... $ECHO_C" >&6; }
-            { echo "$as_me:$LINENO: result: $MPILIBS" >&5
-echo "${ECHO_T}$MPILIBS" >&6; }
-            { echo "$as_me:$LINENO: checking for other MPI-related flags" >&5
-echo $ECHO_N "checking for other MPI-related flags... $ECHO_C" >&6; }
-            { echo "$as_me:$LINENO: result: $MPIFLAGS" >&5
-echo "${ECHO_T}$MPIFLAGS" >&6; }
+            { printf "%s\n" "$as_me:${as_lineno-$LINENO}: checking for MPI include directories" >&5
+printf %s "checking for MPI include directories... " >&6; }
+            { printf "%s\n" "$as_me:${as_lineno-$LINENO}: result: $MPIINCLUDE" >&5
+printf "%s\n" "$MPIINCLUDE" >&6; }
+            { printf "%s\n" "$as_me:${as_lineno-$LINENO}: checking for MPI library directories" >&5
+printf %s "checking for MPI library directories... " >&6; }
+            { printf "%s\n" "$as_me:${as_lineno-$LINENO}: result: $MPILIBDIRS" >&5
+printf "%s\n" "$MPILIBDIRS" >&6; }
+            { printf "%s\n" "$as_me:${as_lineno-$LINENO}: checking for MPI libraries" >&5
+printf %s "checking for MPI libraries... " >&6; }
+            { printf "%s\n" "$as_me:${as_lineno-$LINENO}: result: $MPILIBS" >&5
+printf "%s\n" "$MPILIBS" >&6; }
+            { printf "%s\n" "$as_me:${as_lineno-$LINENO}: checking for other MPI-related flags" >&5
+printf %s "checking for other MPI-related flags... " >&6; }
+            { printf "%s\n" "$as_me:${as_lineno-$LINENO}: result: $MPIFLAGS" >&5
+printf "%s\n" "$MPIFLAGS" >&6; }
          fi
       fi
 
-      if test "${casc_cv_mpi_include+set}" = set; then
-  echo $ECHO_N "(cached) $ECHO_C" >&6
-else
+      if test ${casc_cv_mpi_include+y}
+then :
+  printf %s "(cached) " >&6
+else $as_nop
   casc_cv_mpi_include=$MPIINCLUDE
 fi
 
-      if test "${casc_cv_mpi_lib_dirs+set}" = set; then
-  echo $ECHO_N "(cached) $ECHO_C" >&6
-else
+      if test ${casc_cv_mpi_lib_dirs+y}
+then :
+  printf %s "(cached) " >&6
+else $as_nop
   casc_cv_mpi_lib_dirs=$MPILIBDIRS
 fi
 
-      if test "${casc_cv_mpi_libs+set}" = set; then
-  echo $ECHO_N "(cached) $ECHO_C" >&6
-else
+      if test ${casc_cv_mpi_libs+y}
+then :
+  printf %s "(cached) " >&6
+else $as_nop
   casc_cv_mpi_libs=$MPILIBS
 fi
 
-      if test "${casc_cv_mpi_flags+set}" = set; then
-  echo $ECHO_N "(cached) $ECHO_C" >&6
-else
+      if test ${casc_cv_mpi_flags+y}
+then :
+  printf %s "(cached) " >&6
+else $as_nop
   casc_cv_mpi_flags=$MPIFLAGS
 fi
 
@@ -19313,9 +16757,7 @@ fi
    if test -n "$MPIINCLUDE" -o -n "$MPILIBS" -o -n "$MPILIBDIRS"; then
       with_mpi=yes
 
-cat >>confdefs.h <<\_ACEOF
-#define HAVE_MPI 1
-_ACEOF
+printf "%s\n" "#define HAVE_MPI 1" >>confdefs.h
 
       INC_PATH="$MPIINCLUDE $INC_PATH"
       LIB_NAME="$MPILIBS $LIB_NAME"
@@ -19330,7 +16772,7 @@ for btng_log_vars_index in $btng_log_vars ; do
   else
     btng_log_vars_value="unset";
   fi
-  echo "configure:19333:" "After successfully finding MPI using casc_find_mpi: $btng_log_vars_index is $btng_log_vars_value" >&5;
+  echo "configure:16775:" "After successfully finding MPI using casc_find_mpi: $btng_log_vars_index is $btng_log_vars_value" >&5;
 done
 
 
@@ -19346,7 +16788,7 @@ for btng_log_vars_index in $btng_log_vars ; do
   else
     btng_log_vars_value="unset";
   fi
-  echo "configure:19349:" "$btng_log_vars_index is $btng_log_vars_value" >&5;
+  echo "configure:16791:" "$btng_log_vars_index is $btng_log_vars_value" >&5;
 done
 
 
@@ -19359,51 +16801,50 @@ done
 # Defines hdf5_PREFIX hdf5_INCLUDES and hdf5_LIBS if with-hdf5 is specified.
 
 # Check whether --with-hdf5 was given.
-if test "${with_hdf5+set}" = set; then
+if test ${with_hdf5+y}
+then :
   withval=$with_hdf5;
-else
+else $as_nop
   with_hdf5=no
 fi
 
 
 case "$with_hdf5" in
   no)
-    { echo "$as_me:$LINENO: configuring without HDF5 support" >&5
-echo "$as_me: configuring without HDF5 support" >&6;}
+    { printf "%s\n" "$as_me:${as_lineno-$LINENO}: configuring without HDF5 support" >&5
+printf "%s\n" "$as_me: configuring without HDF5 support" >&6;}
     : Do nothing
   ;;
   yes)
     # HDF5 install path was not specified.
     # Look in a couple of standard locations to probe if
     # HDF5 header files are there.
-    { echo "$as_me:$LINENO: checking for HDF5 installation" >&5
-echo $ECHO_N "checking for HDF5 installation... $ECHO_C" >&6; }
+    { printf "%s\n" "$as_me:${as_lineno-$LINENO}: checking for HDF5 installation" >&5
+printf %s "checking for HDF5 installation... " >&6; }
     for dir in /usr /usr/local; do
       if test -f ${dir}/include/hdf5.h; then
         hdf5_PREFIX=${dir}
         break
       fi
     done
-    { echo "$as_me:$LINENO: result: $hdf5_PREFIX" >&5
-echo "${ECHO_T}$hdf5_PREFIX" >&6; }
+    { printf "%s\n" "$as_me:${as_lineno-$LINENO}: result: $hdf5_PREFIX" >&5
+printf "%s\n" "$hdf5_PREFIX" >&6; }
   ;;
   *)
     # HDF5 install path was specified.
-    { echo "$as_me:$LINENO: checking for HDF5 installation" >&5
-echo $ECHO_N "checking for HDF5 installation... $ECHO_C" >&6; }
+    { printf "%s\n" "$as_me:${as_lineno-$LINENO}: checking for HDF5 installation" >&5
+printf %s "checking for HDF5 installation... " >&6; }
 
     if test -f ${with_hdf5}/include/hdf5.h; then
         hdf5_PREFIX=$with_hdf5
         hdf5_INCLUDES="-I${hdf5_PREFIX}/include"
         hdf5_LIBS="-L${hdf5_PREFIX}/lib -lhdf5"
-        { echo "$as_me:$LINENO: result: $hdf5_PREFIX" >&5
-echo "${ECHO_T}$hdf5_PREFIX" >&6; }
+        { printf "%s\n" "$as_me:${as_lineno-$LINENO}: result: $hdf5_PREFIX" >&5
+printf "%s\n" "$hdf5_PREFIX" >&6; }
     else
-        { echo "$as_me:$LINENO: result: $hdf5_PREFIX" >&5
-echo "${ECHO_T}$hdf5_PREFIX" >&6; }
-        { { echo "$as_me:$LINENO: error: HDF5 not found in $with_hdf5" >&5
-echo "$as_me: error: HDF5 not found in $with_hdf5" >&2;}
-   { (exit 1); exit 1; }; }
+        { printf "%s\n" "$as_me:${as_lineno-$LINENO}: result: $hdf5_PREFIX" >&5
+printf "%s\n" "$hdf5_PREFIX" >&6; }
+        as_fn_error $? "HDF5 not found in $with_hdf5" "$LINENO" 5
     fi
   ;;
 esac
@@ -19418,8 +16859,8 @@ esac
 if test "${hdf5_PREFIX+set}" = set; then
 
 
-   { echo "$as_me:$LINENO: checking whether HDF5 link works" >&5
-echo $ECHO_N "checking whether HDF5 link works... $ECHO_C" >&6; }
+   { printf "%s\n" "$as_me:${as_lineno-$LINENO}: checking whether HDF5 link works" >&5
+printf %s "checking whether HDF5 link works... " >&6; }
    ac_ext=cpp
 ac_cpp='$CXXCPP $CPPFLAGS'
 ac_compile='$CXX -c $CXXFLAGS $CPPFLAGS conftest.$ac_ext >&5'
@@ -19433,7 +16874,8 @@ ac_compiler_gnu=$ac_cv_cxx_compiler_gnu
    # NOTE lib z and m were from BTNG macro.
    LIBS="${LIBS} ${hdf5_LIBS} $libz_LIBS -lm "
    CXXFLAGS="${CXXFLAGS} ${hdf5_INCLUDES}"
-   cat >conftest.$ac_ext <<_ACEOF
+   cat confdefs.h - <<_ACEOF >conftest.$ac_ext
+/* end confdefs.h.  */
 
       #include "hdf5.h"
       #define FILE "file.h5"
@@ -19451,34 +16893,14 @@ ac_compiler_gnu=$ac_cv_cxx_compiler_gnu
      }
 
 _ACEOF
-rm -f conftest.$ac_objext conftest$ac_exeext
-if { (ac_try="$ac_link"
-case "(($ac_try" in
-  *\"* | *\`* | *\\*) ac_try_echo=\$ac_try;;
-  *) ac_try_echo=$ac_try;;
-esac
-eval "echo \"\$as_me:$LINENO: $ac_try_echo\"") >&5
-  (eval "$ac_link") 2>conftest.er1
-  ac_status=$?
-  grep -v '^ *+' conftest.er1 >conftest.err
-  rm -f conftest.er1
-  cat conftest.err >&5
-  echo "$as_me:$LINENO: \$? = $ac_status" >&5
-  (exit $ac_status); } && {
-	 test -z "$ac_cxx_werror_flag" ||
-	 test ! -s conftest.err
-       } && test -s conftest$ac_exeext &&
-       $as_test_x conftest$ac_exeext; then
+if ac_fn_cxx_try_link "$LINENO"
+then :
   casc_hdf5_compile=yes
-else
-  echo "$as_me: failed program was:" >&5
-sed 's/^/| /' conftest.$ac_ext >&5
-
-	casc_hdf5_compile=no
+else $as_nop
+  casc_hdf5_compile=no
 fi
-
-rm -f core conftest.err conftest.$ac_objext conftest_ipa8_conftest.oo \
-      conftest$ac_exeext conftest.$ac_ext
+rm -f core conftest.err conftest.$ac_objext conftest.beam \
+    conftest$ac_exeext conftest.$ac_ext
 
    LIBS=$casc_save_LIBS
    unset casc_save_LIBS
@@ -19491,13 +16913,11 @@ ac_compile='$CC -c $CFLAGS $CPPFLAGS conftest.$ac_ext >&5'
 ac_link='$CC -o conftest$ac_exeext $CFLAGS $CPPFLAGS $LDFLAGS conftest.$ac_ext $LIBS >&5'
 ac_compiler_gnu=$ac_cv_c_compiler_gnu
 
-   { echo "$as_me:$LINENO: result: $casc_hdf5_compile" >&5
-echo "${ECHO_T}$casc_hdf5_compile" >&6; }
+   { printf "%s\n" "$as_me:${as_lineno-$LINENO}: result: $casc_hdf5_compile" >&5
+printf "%s\n" "$casc_hdf5_compile" >&6; }
 
    if test "$casc_hdf5_compile" = no; then
-      { { echo "$as_me:$LINENO: error: HDF5 compile/link test failed" >&5
-echo "$as_me: error: HDF5 compile/link test failed" >&2;}
-   { (exit 1); exit 1; }; }
+      as_fn_error $? "HDF5 compile/link test failed" "$LINENO" 5
    fi
 fi
 
@@ -19521,15 +16941,11 @@ fi
   LIB_NAME="$hdf5_LIB_NAME $LIB_NAME"
   INC_PATH="$hdf5_INCLUDES $INC_PATH"
 
-cat >>confdefs.h <<\_ACEOF
-#define HAVE_HDF5 1
-_ACEOF
+printf "%s\n" "#define HAVE_HDF5 1" >>confdefs.h
 
 else
   if test ! "$with_hdf5" = no; then
-   { { echo "$as_me:$LINENO: error: HDF5 not found - either specify a valid location via --with-hdf5=PATH or if you do not have HDF5 use --without-hdf5.  Note: if you do not have HDF5 you will not be able to use SAMRAI's VisIt Data writer and the VisIt visualization package." >&5
-echo "$as_me: error: HDF5 not found - either specify a valid location via --with-hdf5=PATH or if you do not have HDF5 use --without-hdf5.  Note: if you do not have HDF5 you will not be able to use SAMRAI's VisIt Data writer and the VisIt visualization package." >&2;}
-   { (exit 1); exit 1; }; }
+   as_fn_error $? "HDF5 not found - either specify a valid location via --with-hdf5=PATH or if you do not have HDF5 use --without-hdf5.  Note: if you do not have HDF5 you will not be able to use SAMRAI's VisIt Data writer and the VisIt visualization package." "$LINENO" 5
   fi
 fi
 
@@ -19542,7 +16958,7 @@ for btng_log_vars_index in $btng_log_vars ; do
   else
     btng_log_vars_value="unset";
   fi
-  echo "configure:19545:" "$btng_log_vars_index is $btng_log_vars_value" >&5;
+  echo "configure:16961:" "$btng_log_vars_index is $btng_log_vars_value" >&5;
 done
 
 
@@ -19553,71 +16969,68 @@ done
 # Defines silo_PREFIX silo_INCLUDES and silo_LIBS if with-silo is specified.
 
 # Check whether --with-silo was given.
-if test "${with_silo+set}" = set; then
+if test ${with_silo+y}
+then :
   withval=$with_silo;
-else
+else $as_nop
   with_silo=no
 fi
 
 
 case "$with_silo" in
   no)
-    { echo "$as_me:$LINENO: configuring without SILO support" >&5
-echo "$as_me: configuring without SILO support" >&6;}
+    { printf "%s\n" "$as_me:${as_lineno-$LINENO}: configuring without SILO support" >&5
+printf "%s\n" "$as_me: configuring without SILO support" >&6;}
     : Do nothing
   ;;
   yes)
     # SILO install path was not specified.
     # Look in a couple of standard locations to probe if
     # SILO header files are there.
-    { echo "$as_me:$LINENO: checking for SILO installation" >&5
-echo $ECHO_N "checking for SILO installation... $ECHO_C" >&6; }
+    { printf "%s\n" "$as_me:${as_lineno-$LINENO}: checking for SILO installation" >&5
+printf %s "checking for SILO installation... " >&6; }
     for dir in /usr /usr/local; do
       if test -f ${dir}/include/silo.h; then
         silo_PREFIX=${dir}
         break
       fi
     done
-    { echo "$as_me:$LINENO: result: $silo_PREFIX" >&5
-echo "${ECHO_T}$silo_PREFIX" >&6; }
+    { printf "%s\n" "$as_me:${as_lineno-$LINENO}: result: $silo_PREFIX" >&5
+printf "%s\n" "$silo_PREFIX" >&6; }
   ;;
   *)
     # SILO install path was specified.
-    { echo "$as_me:$LINENO: checking for SILO installation" >&5
-echo $ECHO_N "checking for SILO installation... $ECHO_C" >&6; }
+    { printf "%s\n" "$as_me:${as_lineno-$LINENO}: checking for SILO installation" >&5
+printf %s "checking for SILO installation... " >&6; }
     silo_PREFIX=$with_silo
     silo_INCLUDES="-I${silo_PREFIX}/include"
     if test -f ${silo_PREFIX}/include/silo.h; then
-        { echo "$as_me:$LINENO: result: $silo_PREFIX" >&5
-echo "${ECHO_T}$silo_PREFIX" >&6; }
+        { printf "%s\n" "$as_me:${as_lineno-$LINENO}: result: $silo_PREFIX" >&5
+printf "%s\n" "$silo_PREFIX" >&6; }
     else
-        { echo "$as_me:$LINENO: result: $silo_PREFIX" >&5
-echo "${ECHO_T}$silo_PREFIX" >&6; }
-        { { echo "$as_me:$LINENO: error: SILO not found in $with_silo" >&5
-echo "$as_me: error: SILO not found in $with_silo" >&2;}
-   { (exit 1); exit 1; }; }
+        { printf "%s\n" "$as_me:${as_lineno-$LINENO}: result: $silo_PREFIX" >&5
+printf "%s\n" "$silo_PREFIX" >&6; }
+        as_fn_error $? "SILO not found in $with_silo" "$LINENO" 5
     fi
   ;;
 esac
 
 # Determine which SILO library is built
 if test "${silo_PREFIX+set}" = set; then
-   { echo "$as_me:$LINENO: checking for SILO library" >&5
-echo $ECHO_N "checking for SILO library... $ECHO_C" >&6; }
+   { printf "%s\n" "$as_me:${as_lineno-$LINENO}: checking for SILO library" >&5
+printf %s "checking for SILO library... " >&6; }
    if test -f ${silo_PREFIX}/lib/libsilo.a; then
       silo_LIBS='-lsilo'
-      { echo "$as_me:$LINENO: result: using $silo_LIBS" >&5
-echo "${ECHO_T}using $silo_LIBS" >&6; }
+      { printf "%s\n" "$as_me:${as_lineno-$LINENO}: result: using $silo_LIBS" >&5
+printf "%s\n" "using $silo_LIBS" >&6; }
    elif test -f ${silo_PREFIX}/lib/libsiloh5.a; then
       silo_LIBS='-lsiloh5'
-      { echo "$as_me:$LINENO: result: using $silo_LIBS" >&5
-echo "${ECHO_T}using $silo_LIBS" >&6; }
+      { printf "%s\n" "$as_me:${as_lineno-$LINENO}: result: using $silo_LIBS" >&5
+printf "%s\n" "using $silo_LIBS" >&6; }
    else
-      { echo "$as_me:$LINENO: result: using $silo_LIBS" >&5
-echo "${ECHO_T}using $silo_LIBS" >&6; }
-      { { echo "$as_me:$LINENO: error: Could not fine silo library in $silo_PREFIX" >&5
-echo "$as_me: error: Could not fine silo library in $silo_PREFIX" >&2;}
-   { (exit 1); exit 1; }; }
+      { printf "%s\n" "$as_me:${as_lineno-$LINENO}: result: using $silo_LIBS" >&5
+printf "%s\n" "using $silo_LIBS" >&6; }
+      as_fn_error $? "Could not fine silo library in $silo_PREFIX" "$LINENO" 5
    fi
 
    silo_LIBS="-L${silo_PREFIX}/lib ${silo_LIBS}"
@@ -19643,9 +17056,7 @@ fi
   LIB_NAME="$silo_LIB_NAME $LIB_NAME"
   INC_PATH="$silo_INCLUDES $INC_PATH"
 
-cat >>confdefs.h <<\_ACEOF
-#define HAVE_SILO 1
-_ACEOF
+printf "%s\n" "#define HAVE_SILO 1" >>confdefs.h
 
 fi
 
@@ -19658,7 +17069,7 @@ for btng_log_vars_index in $btng_log_vars ; do
   else
     btng_log_vars_value="unset";
   fi
-  echo "configure:19661:" "$btng_log_vars_index is $btng_log_vars_value" >&5;
+  echo "configure:17072:" "$btng_log_vars_index is $btng_log_vars_value" >&5;
 done
 
 
@@ -19667,15 +17078,17 @@ done
 # Begin macro BTNG_SUPPORT_HYPRE
 
 # Start macro BTNG_ARG_WITH_ENV_WRAPPER with args hypre and hypre_PREFIX
-{ echo "$as_me:$LINENO: checking for hypre" >&5
-echo $ECHO_N "checking for hypre... $ECHO_C" >&6; }
-if test "${btng_cv_prog_hypre+set}" = set; then
-  echo $ECHO_N "(cached) $ECHO_C" >&6
-else
+{ printf "%s\n" "$as_me:${as_lineno-$LINENO}: checking for hypre" >&5
+printf %s "checking for hypre... " >&6; }
+if test ${btng_cv_prog_hypre+y}
+then :
+  printf %s "(cached) " >&6
+else $as_nop
 
 
 # Check whether --with-hypre was given.
-if test "${with_hypre+set}" = set; then
+if test ${with_hypre+y}
+then :
   withval=$with_hypre;
 fi
 
@@ -19716,8 +17129,8 @@ if test "${hypre_PREFIX+set}" = set ; then
 fi
 
 fi
-{ echo "$as_me:$LINENO: result: $btng_cv_prog_hypre" >&5
-echo "${ECHO_T}$btng_cv_prog_hypre" >&6; }
+{ printf "%s\n" "$as_me:${as_lineno-$LINENO}: result: $btng_cv_prog_hypre" >&5
+printf "%s\n" "$btng_cv_prog_hypre" >&6; }
 # Set hypre_PREFIX from cache.
 # hypre_PREFIX is not yet set if we grabbed it from cache.
 if test "${btng_cv_prog_hypre+set}" = set ; then
@@ -19740,8 +17153,8 @@ if test "${hypre_PREFIX+set}" = set ; then
 	tmp_name=`echo $i | sed 's/^-l//'`
         if test ! -f "${hypre_PREFIX}/lib/lib${tmp_name}.a" && \
           test ! -f "${hypre_PREFIX}/lib/lib${tmp_name}.so"; then
-          { echo "$as_me:$LINENO: WARNING: Library file for ${tmp_name} is missing from ${hypre_PREFIX}/lib." >&5
-echo "$as_me: WARNING: Library file for ${tmp_name} is missing from ${hypre_PREFIX}/lib." >&2;}
+          { printf "%s\n" "$as_me:${as_lineno-$LINENO}: WARNING: Library file for ${tmp_name} is missing from ${hypre_PREFIX}/lib." >&5
+printf "%s\n" "$as_me: WARNING: Library file for ${tmp_name} is missing from ${hypre_PREFIX}/lib." >&2;}
         fi
       done
       hypre_LIBS="-L${hypre_PREFIX}/lib ${hypre_LIBS}"
@@ -19760,7 +17173,7 @@ for btng_log_vars_index in $btng_log_vars ; do
   else
     btng_log_vars_value="unset";
   fi
-  echo "configure:19763:" "$btng_log_vars_index is $btng_log_vars_value" >&5;
+  echo "configure:17176:" "$btng_log_vars_index is $btng_log_vars_value" >&5;
 done
 
 
@@ -19779,155 +17192,25 @@ for btng_log_vars_index in $btng_log_vars ; do
   else
     btng_log_vars_value="unset";
   fi
-  echo "configure:19782:" "$btng_log_vars_index is $btng_log_vars_value" >&5;
+  echo "configure:17195:" "$btng_log_vars_index is $btng_log_vars_value" >&5;
 done
 
 
 
   # Check if HYPRE header is ok.
-  if test "${ac_cv_header_HYPRE_config_h+set}" = set; then
-  { echo "$as_me:$LINENO: checking for HYPRE_config.h" >&5
-echo $ECHO_N "checking for HYPRE_config.h... $ECHO_C" >&6; }
-if test "${ac_cv_header_HYPRE_config_h+set}" = set; then
-  echo $ECHO_N "(cached) $ECHO_C" >&6
-fi
-{ echo "$as_me:$LINENO: result: $ac_cv_header_HYPRE_config_h" >&5
-echo "${ECHO_T}$ac_cv_header_HYPRE_config_h" >&6; }
-else
-  # Is the header compilable?
-{ echo "$as_me:$LINENO: checking HYPRE_config.h usability" >&5
-echo $ECHO_N "checking HYPRE_config.h usability... $ECHO_C" >&6; }
-cat >conftest.$ac_ext <<_ACEOF
-/* confdefs.h.  */
-_ACEOF
-cat confdefs.h >>conftest.$ac_ext
-cat >>conftest.$ac_ext <<_ACEOF
-/* end confdefs.h.  */
-$ac_includes_default
-#include <HYPRE_config.h>
-_ACEOF
-rm -f conftest.$ac_objext
-if { (ac_try="$ac_compile"
-case "(($ac_try" in
-  *\"* | *\`* | *\\*) ac_try_echo=\$ac_try;;
-  *) ac_try_echo=$ac_try;;
-esac
-eval "echo \"\$as_me:$LINENO: $ac_try_echo\"") >&5
-  (eval "$ac_compile") 2>conftest.er1
-  ac_status=$?
-  grep -v '^ *+' conftest.er1 >conftest.err
-  rm -f conftest.er1
-  cat conftest.err >&5
-  echo "$as_me:$LINENO: \$? = $ac_status" >&5
-  (exit $ac_status); } && {
-	 test -z "$ac_c_werror_flag" ||
-	 test ! -s conftest.err
-       } && test -s conftest.$ac_objext; then
-  ac_header_compiler=yes
-else
-  echo "$as_me: failed program was:" >&5
-sed 's/^/| /' conftest.$ac_ext >&5
-
-	ac_header_compiler=no
-fi
-
-rm -f core conftest.err conftest.$ac_objext conftest.$ac_ext
-{ echo "$as_me:$LINENO: result: $ac_header_compiler" >&5
-echo "${ECHO_T}$ac_header_compiler" >&6; }
-
-# Is the header present?
-{ echo "$as_me:$LINENO: checking HYPRE_config.h presence" >&5
-echo $ECHO_N "checking HYPRE_config.h presence... $ECHO_C" >&6; }
-cat >conftest.$ac_ext <<_ACEOF
-/* confdefs.h.  */
-_ACEOF
-cat confdefs.h >>conftest.$ac_ext
-cat >>conftest.$ac_ext <<_ACEOF
-/* end confdefs.h.  */
-#include <HYPRE_config.h>
-_ACEOF
-if { (ac_try="$ac_cpp conftest.$ac_ext"
-case "(($ac_try" in
-  *\"* | *\`* | *\\*) ac_try_echo=\$ac_try;;
-  *) ac_try_echo=$ac_try;;
-esac
-eval "echo \"\$as_me:$LINENO: $ac_try_echo\"") >&5
-  (eval "$ac_cpp conftest.$ac_ext") 2>conftest.er1
-  ac_status=$?
-  grep -v '^ *+' conftest.er1 >conftest.err
-  rm -f conftest.er1
-  cat conftest.err >&5
-  echo "$as_me:$LINENO: \$? = $ac_status" >&5
-  (exit $ac_status); } >/dev/null && {
-	 test -z "$ac_c_preproc_warn_flag$ac_c_werror_flag" ||
-	 test ! -s conftest.err
-       }; then
-  ac_header_preproc=yes
-else
-  echo "$as_me: failed program was:" >&5
-sed 's/^/| /' conftest.$ac_ext >&5
-
-  ac_header_preproc=no
-fi
-
-rm -f conftest.err conftest.$ac_ext
-{ echo "$as_me:$LINENO: result: $ac_header_preproc" >&5
-echo "${ECHO_T}$ac_header_preproc" >&6; }
-
-# So?  What about this header?
-case $ac_header_compiler:$ac_header_preproc:$ac_c_preproc_warn_flag in
-  yes:no: )
-    { echo "$as_me:$LINENO: WARNING: HYPRE_config.h: accepted by the compiler, rejected by the preprocessor!" >&5
-echo "$as_me: WARNING: HYPRE_config.h: accepted by the compiler, rejected by the preprocessor!" >&2;}
-    { echo "$as_me:$LINENO: WARNING: HYPRE_config.h: proceeding with the compiler's result" >&5
-echo "$as_me: WARNING: HYPRE_config.h: proceeding with the compiler's result" >&2;}
-    ac_header_preproc=yes
-    ;;
-  no:yes:* )
-    { echo "$as_me:$LINENO: WARNING: HYPRE_config.h: present but cannot be compiled" >&5
-echo "$as_me: WARNING: HYPRE_config.h: present but cannot be compiled" >&2;}
-    { echo "$as_me:$LINENO: WARNING: HYPRE_config.h:     check for missing prerequisite headers?" >&5
-echo "$as_me: WARNING: HYPRE_config.h:     check for missing prerequisite headers?" >&2;}
-    { echo "$as_me:$LINENO: WARNING: HYPRE_config.h: see the Autoconf documentation" >&5
-echo "$as_me: WARNING: HYPRE_config.h: see the Autoconf documentation" >&2;}
-    { echo "$as_me:$LINENO: WARNING: HYPRE_config.h:     section \"Present But Cannot Be Compiled\"" >&5
-echo "$as_me: WARNING: HYPRE_config.h:     section \"Present But Cannot Be Compiled\"" >&2;}
-    { echo "$as_me:$LINENO: WARNING: HYPRE_config.h: proceeding with the preprocessor's result" >&5
-echo "$as_me: WARNING: HYPRE_config.h: proceeding with the preprocessor's result" >&2;}
-    { echo "$as_me:$LINENO: WARNING: HYPRE_config.h: in the future, the compiler will take precedence" >&5
-echo "$as_me: WARNING: HYPRE_config.h: in the future, the compiler will take precedence" >&2;}
-
-    ;;
-esac
-{ echo "$as_me:$LINENO: checking for HYPRE_config.h" >&5
-echo $ECHO_N "checking for HYPRE_config.h... $ECHO_C" >&6; }
-if test "${ac_cv_header_HYPRE_config_h+set}" = set; then
-  echo $ECHO_N "(cached) $ECHO_C" >&6
-else
-  ac_cv_header_HYPRE_config_h=$ac_header_preproc
-fi
-{ echo "$as_me:$LINENO: result: $ac_cv_header_HYPRE_config_h" >&5
-echo "${ECHO_T}$ac_cv_header_HYPRE_config_h" >&6; }
-
-fi
-if test $ac_cv_header_HYPRE_config_h = yes; then
+  ac_fn_c_check_header_compile "$LINENO" "HYPRE_config.h" "ac_cv_header_HYPRE_config_h" "$ac_includes_default"
+if test "x$ac_cv_header_HYPRE_config_h" = xyes
+then :
   :
-else
-  { { echo "$as_me:$LINENO: error: Problems checking HYPRE_config.h" >&5
-echo "$as_me: error: Problems checking HYPRE_config.h" >&2;}
-   { (exit 1); exit 1; }; }
+else $as_nop
+  as_fn_error $? "Problems checking HYPRE_config.h" "$LINENO" 5
 fi
 
 
-
   # Check if HYPRE was compiled with parallelism.
-  { echo "$as_me:$LINENO: checking if hypre is serial or parallel" >&5
-echo $ECHO_N "checking if hypre is serial or parallel... $ECHO_C" >&6; }
-  cat >conftest.$ac_ext <<_ACEOF
-/* confdefs.h.  */
-_ACEOF
-cat confdefs.h >>conftest.$ac_ext
-cat >>conftest.$ac_ext <<_ACEOF
+  { printf "%s\n" "$as_me:${as_lineno-$LINENO}: checking if hypre is serial or parallel" >&5
+printf %s "checking if hypre is serial or parallel... " >&6; }
+  cat confdefs.h - <<_ACEOF >conftest.$ac_ext
 /* end confdefs.h.  */
 
 #include <HYPRE_config.h>
@@ -19937,15 +17220,16 @@ HYPRE_SEQUENTIAL_IS_DEFINED
 
 _ACEOF
 if (eval "$ac_cpp conftest.$ac_ext") 2>&5 |
-  $EGREP "^HYPRE_SEQUENTIAL_IS_DEFINED$" >/dev/null 2>&1; then
+  $EGREP "^HYPRE_SEQUENTIAL_IS_DEFINED$" >/dev/null 2>&1
+then :
   hypre_PARALLELISM=serial
-else
+else $as_nop
   hypre_PARALLELISM=parallel
 fi
-rm -f conftest*
+rm -rf conftest*
 
-  { echo "$as_me:$LINENO: result: $hypre_PARALLELISM" >&5
-echo "${ECHO_T}$hypre_PARALLELISM" >&6; }
+  { printf "%s\n" "$as_me:${as_lineno-$LINENO}: result: $hypre_PARALLELISM" >&5
+printf "%s\n" "$hypre_PARALLELISM" >&6; }
 
   # Reset cpp after checking hypre header file.
   CPPFLAGS=$btng_save_cppflags
@@ -19961,7 +17245,7 @@ for btng_log_vars_index in $btng_log_vars ; do
   else
     btng_log_vars_value="unset";
   fi
-  echo "configure:19964:" "$btng_log_vars_index is $btng_log_vars_value" >&5;
+  echo "configure:17248:" "$btng_log_vars_index is $btng_log_vars_value" >&5;
 done
 
 
@@ -19975,7 +17259,7 @@ for btng_log_vars_index in $btng_log_vars ; do
   else
     btng_log_vars_value="unset";
   fi
-  echo "configure:19978:" "$btng_log_vars_index is $btng_log_vars_value" >&5;
+  echo "configure:17262:" "$btng_log_vars_index is $btng_log_vars_value" >&5;
 done
 
 
@@ -19999,12 +17283,10 @@ fi
   LIB_NAME="$hypre_LIB_NAME $LIB_NAME"
   INC_PATH="$hypre_INCLUDES $INC_PATH"
 
-cat >>confdefs.h <<\_ACEOF
-#define HAVE_HYPRE 1
-_ACEOF
+printf "%s\n" "#define HAVE_HYPRE 1" >>confdefs.h
 
-  { echo "$as_me:$LINENO: checking whether HYPRE was compiled with MPI" >&5
-echo $ECHO_N "checking whether HYPRE was compiled with MPI... $ECHO_C" >&6; }
+  { printf "%s\n" "$as_me:${as_lineno-$LINENO}: checking whether HYPRE was compiled with MPI" >&5
+printf %s "checking whether HYPRE was compiled with MPI... " >&6; }
   # Check how HYPRe was compiled.
 
 
@@ -20016,50 +17298,43 @@ for btng_log_vars_index in $btng_log_vars ; do
   else
     btng_log_vars_value="unset";
   fi
-  echo "configure:20019:" "$btng_log_vars_index is $btng_log_vars_value" >&5;
+  echo "configure:17301:" "$btng_log_vars_index is $btng_log_vars_value" >&5;
 done
 
 
   if test "$hypre_PARALLELISM" = 'parallel'; then
-     { echo "$as_me:$LINENO: result: yes" >&5
-echo "${ECHO_T}yes" >&6; }
+     { printf "%s\n" "$as_me:${as_lineno-$LINENO}: result: yes" >&5
+printf "%s\n" "yes" >&6; }
      if test "$with_mpi" = no ; then
-        { { echo "$as_me:$LINENO: error: sequential SAMRAI cannot call parallel HYPRE" >&5
-echo "$as_me: error: sequential SAMRAI cannot call parallel HYPRE" >&2;}
-   { (exit 1); exit 1; }; }
+        as_fn_error $? "sequential SAMRAI cannot call parallel HYPRE" "$LINENO" 5
      fi
   elif test "$hypre_PARALLELISM" = 'serial'; then
-     { echo "$as_me:$LINENO: result: no" >&5
-echo "${ECHO_T}no" >&6; }
+     { printf "%s\n" "$as_me:${as_lineno-$LINENO}: result: no" >&5
+printf "%s\n" "no" >&6; }
 
-cat >>confdefs.h <<\_ACEOF
-#define HYPRE_SEQUENTIAL 1
-_ACEOF
+printf "%s\n" "#define HYPRE_SEQUENTIAL 1" >>confdefs.h
 
      if test "$with_mpi" != no ; then
-        { { echo "$as_me:$LINENO: error: parallel SAMRAI cannot call sequential HYPRE" >&5
-echo "$as_me: error: parallel SAMRAI cannot call sequential HYPRE" >&2;}
-   { (exit 1); exit 1; }; }
+        as_fn_error $? "parallel SAMRAI cannot call sequential HYPRE" "$LINENO" 5
      fi
   else
-     { echo "$as_me:$LINENO: WARNING: Cannot determine if hypre was compiled for serial or parallel" >&5
-echo "$as_me: WARNING: Cannot determine if hypre was compiled for serial or parallel" >&2;}
+     { printf "%s\n" "$as_me:${as_lineno-$LINENO}: WARNING: Cannot determine if hypre was compiled for serial or parallel" >&5
+printf "%s\n" "$as_me: WARNING: Cannot determine if hypre was compiled for serial or parallel" >&2;}
   fi
 else
-  { echo "$as_me:$LINENO: NOTIFICATION: SAMRAI configured without the HYPRE library" >&5
-echo "$as_me: NOTIFICATION: SAMRAI configured without the HYPRE library" >&6;}
+  { printf "%s\n" "$as_me:${as_lineno-$LINENO}: NOTIFICATION: SAMRAI configured without the HYPRE library" >&5
+printf "%s\n" "$as_me: NOTIFICATION: SAMRAI configured without the HYPRE library" >&6;}
 
-cat >>confdefs.h <<\_ACEOF
-#define LACKS_HYPRE 1
-_ACEOF
+printf "%s\n" "#define LACKS_HYPRE 1" >>confdefs.h
 
 fi
 
 
 # Check whether --with-superlu-lib was given.
-if test "${with_superlu_lib+set}" = set; then
+if test ${with_superlu_lib+y}
+then :
   withval=$with_superlu_lib;
-else
+else $as_nop
   with_superlu_lib='no'
 fi
 
@@ -20080,7 +17355,8 @@ unset spooles_PREFIX
 
 
 # Check whether --with-spooles was given.
-if test "${with_spooles+set}" = set; then
+if test ${with_spooles+y}
+then :
   withval=$with_spooles; if test "${with_spooles+set}" = yes ; then
   spooles_PREFIX=
 elif test "${with_spooles}" = no; then
@@ -20120,7 +17396,7 @@ for btng_log_vars_index in $btng_log_vars ; do
   else
     btng_log_vars_value="unset";
   fi
-  echo "configure:20123:" "$btng_log_vars_index is $btng_log_vars_value" >&5;
+  echo "configure:17399:" "$btng_log_vars_index is $btng_log_vars_value" >&5;
 done
 
 
@@ -20155,15 +17431,17 @@ fi
 # Start macro BTNG_ARG_WITH_PREFIX
 
 # Start macro BTNG_ARG_WITH_ENV_WRAPPER with args petsc and PETSC_DIR
-{ echo "$as_me:$LINENO: checking for petsc" >&5
-echo $ECHO_N "checking for petsc... $ECHO_C" >&6; }
-if test "${btng_cv_prog_petsc+set}" = set; then
-  echo $ECHO_N "(cached) $ECHO_C" >&6
-else
+{ printf "%s\n" "$as_me:${as_lineno-$LINENO}: checking for petsc" >&5
+printf %s "checking for petsc... " >&6; }
+if test ${btng_cv_prog_petsc+y}
+then :
+  printf %s "(cached) " >&6
+else $as_nop
 
 
 # Check whether --with-petsc was given.
-if test "${with_petsc+set}" = set; then
+if test ${with_petsc+y}
+then :
   withval=$with_petsc;
 fi
 
@@ -20189,9 +17467,7 @@ case "$with_petsc" in
 # So if user specified --with-petsc, it should include a path or it is an error.
 if test "${with_petsc+set}" = set ; then
   # User specified --with-petsc ambiguously.
-  { { echo "$as_me:$LINENO: error: You must specify a path with --with-petsc=..." >&5
-echo "$as_me: error: You must specify a path with --with-petsc=..." >&2;}
-   { (exit 1); exit 1; }; }
+  as_fn_error $? "You must specify a path with --with-petsc=..." "$LINENO" 5
 else
   # User did not specify --with-petsc, so turn it off.
   unset PETSC_DIR;
@@ -20216,8 +17492,8 @@ if test "${PETSC_DIR+set}" = set ; then
 fi
 
 fi
-{ echo "$as_me:$LINENO: result: $btng_cv_prog_petsc" >&5
-echo "${ECHO_T}$btng_cv_prog_petsc" >&6; }
+{ printf "%s\n" "$as_me:${as_lineno-$LINENO}: result: $btng_cv_prog_petsc" >&5
+printf "%s\n" "$btng_cv_prog_petsc" >&6; }
 # Set PETSC_DIR from cache.
 # PETSC_DIR is not yet set if we grabbed it from cache.
 if test "${btng_cv_prog_petsc+set}" = set ; then
@@ -20248,7 +17524,7 @@ for btng_log_vars_index in $btng_log_vars ; do
   else
     btng_log_vars_value="unset";
   fi
-  echo "configure:20251:" "$btng_log_vars_index is $btng_log_vars_value" >&5;
+  echo "configure:17527:" "$btng_log_vars_index is $btng_log_vars_value" >&5;
 done
 
 
@@ -20258,15 +17534,17 @@ done
 # Start macro BTNG_ARG_WITH_PREFIX
 
 # Start macro BTNG_ARG_WITH_ENV_WRAPPER with args petsc-arch and PETSC_ARCH
-{ echo "$as_me:$LINENO: checking for petsc-arch" >&5
-echo $ECHO_N "checking for petsc-arch... $ECHO_C" >&6; }
-if test "${btng_cv_prog_petsc_arch+set}" = set; then
-  echo $ECHO_N "(cached) $ECHO_C" >&6
-else
+{ printf "%s\n" "$as_me:${as_lineno-$LINENO}: checking for petsc-arch" >&5
+printf %s "checking for petsc-arch... " >&6; }
+if test ${btng_cv_prog_petsc_arch+y}
+then :
+  printf %s "(cached) " >&6
+else $as_nop
 
 
 # Check whether --with-petsc-arch was given.
-if test "${with_petsc_arch+set}" = set; then
+if test ${with_petsc_arch+y}
+then :
   withval=$with_petsc_arch;
 fi
 
@@ -20288,11 +17566,9 @@ case "$with_petsc_arch" in
       : Nothing to do here actually, because PETSC_ARCH is already in the environment.
     else
       if test "${with_petsc_arch}" = yes ; then
-  { { echo "$as_me:$LINENO: error: If you specify --with-petsc-arch, you must give it the path as in --with-petsc-arch=/installation/path" >&5
-echo "$as_me: error: If you specify --with-petsc-arch, you must give it the path as in --with-petsc-arch=/installation/path" >&2;}
-   { (exit 1); exit 1; }; }
+  as_fn_error $? "If you specify --with-petsc-arch, you must give it the path as in --with-petsc-arch=/installation/path" "$LINENO" 5
 fi
-echo "configure:20295:" environment PETSC_ARCH not defined >&5
+echo "configure:17571:" environment PETSC_ARCH not defined >&5
 
 
     fi
@@ -20313,8 +17589,8 @@ if test "${PETSC_ARCH+set}" = set ; then
 fi
 
 fi
-{ echo "$as_me:$LINENO: result: $btng_cv_prog_petsc_arch" >&5
-echo "${ECHO_T}$btng_cv_prog_petsc_arch" >&6; }
+{ printf "%s\n" "$as_me:${as_lineno-$LINENO}: result: $btng_cv_prog_petsc_arch" >&5
+printf "%s\n" "$btng_cv_prog_petsc_arch" >&6; }
 # Set PETSC_ARCH from cache.
 # PETSC_ARCH is not yet set if we grabbed it from cache.
 if test "${btng_cv_prog_petsc_arch+set}" = set ; then
@@ -20329,15 +17605,17 @@ fi
 # Set PETSC_OPTIMIZE.
 
 # Start macro BTNG_ARG_WITH_ENV_WRAPPER with args petsc-optimize and PETSC_OPTIMIZE
-{ echo "$as_me:$LINENO: checking for petsc-optimize" >&5
-echo $ECHO_N "checking for petsc-optimize... $ECHO_C" >&6; }
-if test "${btng_cv_prog_petsc_optimize+set}" = set; then
-  echo $ECHO_N "(cached) $ECHO_C" >&6
-else
+{ printf "%s\n" "$as_me:${as_lineno-$LINENO}: checking for petsc-optimize" >&5
+printf %s "checking for petsc-optimize... " >&6; }
+if test ${btng_cv_prog_petsc_optimize+y}
+then :
+  printf %s "(cached) " >&6
+else $as_nop
 
 
 # Check whether --with-petsc-optimize was given.
-if test "${with_petsc_optimize+set}" = set; then
+if test ${with_petsc_optimize+y}
+then :
   withval=$with_petsc_optimize;
 fi
 
@@ -20370,7 +17648,7 @@ for btng_log_vars_index in $btng_log_vars ; do
   else
     btng_log_vars_value="unset";
   fi
-  echo "configure:20373:" "$btng_log_vars_index is $btng_log_vars_value" >&5;
+  echo "configure:17651:" "$btng_log_vars_index is $btng_log_vars_value" >&5;
 done
 
 
@@ -20394,8 +17672,8 @@ if test "${PETSC_OPTIMIZE+set}" = set ; then
 fi
 
 fi
-{ echo "$as_me:$LINENO: result: $btng_cv_prog_petsc_optimize" >&5
-echo "${ECHO_T}$btng_cv_prog_petsc_optimize" >&6; }
+{ printf "%s\n" "$as_me:${as_lineno-$LINENO}: result: $btng_cv_prog_petsc_optimize" >&5
+printf "%s\n" "$btng_cv_prog_petsc_optimize" >&6; }
 # Set PETSC_OPTIMIZE from cache.
 # PETSC_OPTIMIZE is not yet set if we grabbed it from cache.
 if test "${btng_cv_prog_petsc_optimize+set}" = set ; then
@@ -20409,15 +17687,17 @@ fi
 # Set PETSC_MPIUNI.
 
 # Start macro BTNG_ARG_WITH_ENV_WRAPPER with args petsc-mpiuni and PETSC_MPIUNI
-{ echo "$as_me:$LINENO: checking for petsc-mpiuni" >&5
-echo $ECHO_N "checking for petsc-mpiuni... $ECHO_C" >&6; }
-if test "${btng_cv_prog_petsc_mpiuni+set}" = set; then
-  echo $ECHO_N "(cached) $ECHO_C" >&6
-else
+{ printf "%s\n" "$as_me:${as_lineno-$LINENO}: checking for petsc-mpiuni" >&5
+printf %s "checking for petsc-mpiuni... " >&6; }
+if test ${btng_cv_prog_petsc_mpiuni+y}
+then :
+  printf %s "(cached) " >&6
+else $as_nop
 
 
 # Check whether --with-petsc-mpiuni was given.
-if test "${with_petsc_mpiuni+set}" = set; then
+if test ${with_petsc_mpiuni+y}
+then :
   withval=$with_petsc_mpiuni;
 fi
 
@@ -20459,8 +17739,8 @@ if test "${PETSC_MPIUNI+set}" = set ; then
 fi
 
 fi
-{ echo "$as_me:$LINENO: result: $btng_cv_prog_petsc_mpiuni" >&5
-echo "${ECHO_T}$btng_cv_prog_petsc_mpiuni" >&6; }
+{ printf "%s\n" "$as_me:${as_lineno-$LINENO}: result: $btng_cv_prog_petsc_mpiuni" >&5
+printf "%s\n" "$btng_cv_prog_petsc_mpiuni" >&6; }
 # Set PETSC_MPIUNI from cache.
 # PETSC_MPIUNI is not yet set if we grabbed it from cache.
 if test "${btng_cv_prog_petsc_mpiuni+set}" = set ; then
@@ -20475,7 +17755,8 @@ fi
 unset PETSC_LIBFILES
 
 # Check whether --with-petsc-libfiles was given.
-if test "${with_petsc_libfiles+set}" = set; then
+if test ${with_petsc_libfiles+y}
+then :
   withval=$with_petsc_libfiles; test "$with_petsc_libfiles" = yes && PETSC_LIBFILES=yes
 fi
 
@@ -20485,8 +17766,8 @@ if test "${PETSC_DIR+set}" = set; then
   # Set up PETSC only if PETSC_DIR is defined.
 
   if test ! -d "$PETSC_DIR"; then
-    { echo "$as_me:$LINENO: WARNING: PETSC directory ($PETSC_DIR) does not look right" >&5
-echo "$as_me: WARNING: PETSC directory ($PETSC_DIR) does not look right" >&2;}
+    { printf "%s\n" "$as_me:${as_lineno-$LINENO}: WARNING: PETSC directory ($PETSC_DIR) does not look right" >&5
+printf "%s\n" "$as_me: WARNING: PETSC directory ($PETSC_DIR) does not look right" >&2;}
   fi
   export PETSC_DIR
   if test -z "$PETSC_ARCH"; then
@@ -20495,8 +17776,8 @@ echo "$as_me: WARNING: PETSC directory ($PETSC_DIR) does not look right" >&2;}
     elif test -x "$PETSC_DIR/bin/petscarch"; then
        PETSC_ARCH=`$PETSC_DIR/bin/petscarch`
     else
-       { echo "$as_me:$LINENO: WARNING: PETSC could not determine PETSC_ARCH" >&5
-echo "$as_me: WARNING: PETSC could not determine PETSC_ARCH" >&2;}
+       { printf "%s\n" "$as_me:${as_lineno-$LINENO}: WARNING: PETSC could not determine PETSC_ARCH" >&5
+printf "%s\n" "$as_me: WARNING: PETSC could not determine PETSC_ARCH" >&2;}
     fi
     export PETSC_ARCH
   fi
@@ -20510,18 +17791,16 @@ for btng_log_vars_index in $btng_log_vars ; do
   else
     btng_log_vars_value="unset";
   fi
-  echo "configure:20513:" "$btng_log_vars_index is $btng_log_vars_value" >&5;
+  echo "configure:17794:" "$btng_log_vars_index is $btng_log_vars_value" >&5;
 done
 
 
   if test ! -d "$PETSC_DIR/bmake/$PETSC_ARCH"; then
-    { echo "$as_me:$LINENO: WARNING: PETSC architecture ($PETSC_ARCH) does not look right" >&5
-echo "$as_me: WARNING: PETSC architecture ($PETSC_ARCH) does not look right" >&2;}
+    { printf "%s\n" "$as_me:${as_lineno-$LINENO}: WARNING: PETSC architecture ($PETSC_ARCH) does not look right" >&5
+printf "%s\n" "$as_me: WARNING: PETSC architecture ($PETSC_ARCH) does not look right" >&2;}
   fi
   if test ! "$PETSC_OPTIMIZE" = g && test ! "$PETSC_OPTIMIZE" = O; then
-    { { echo "$as_me:$LINENO: error: PETSC optimize should be either g or O" >&5
-echo "$as_me: error: PETSC optimize should be either g or O" >&2;}
-   { (exit 1); exit 1; }; }
+    as_fn_error $? "PETSC optimize should be either g or O" "$LINENO" 5
   fi
 
   petsc_INCLUDES="-I$PETSC_DIR/include -I$PETSC_DIR/bmake/$PETSC_ARCH"
@@ -20537,8 +17816,8 @@ echo "$as_me: error: PETSC optimize should be either g or O" >&2;}
   elif  test -d "${PETSC_DIR}/lib/lib${PETSC_OPTIMIZE}/${PETSC_ARCH}"; then
     petsc_LIBDIR="${PETSC_DIR}/lib/lib${PETSC_OPTIMIZE}/${PETSC_ARCH}"
   else
-    { echo "$as_me:$LINENO: WARNING: PETSC lib directory does not look as expected" >&5
-echo "$as_me: WARNING: PETSC lib directory does not look as expected" >&2;}
+    { printf "%s\n" "$as_me:${as_lineno-$LINENO}: WARNING: PETSC lib directory does not look as expected" >&5
+printf "%s\n" "$as_me: WARNING: PETSC lib directory does not look as expected" >&2;}
   fi
 
 
@@ -20578,7 +17857,7 @@ for btng_log_vars_index in $btng_log_vars ; do
   else
     btng_log_vars_value="unset";
   fi
-  echo "configure:20581:" "$btng_log_vars_index is $btng_log_vars_value" >&5;
+  echo "configure:17860:" "$btng_log_vars_index is $btng_log_vars_value" >&5;
 done
 
 
@@ -20605,7 +17884,7 @@ for btng_log_vars_index in $btng_log_vars ; do
   else
     btng_log_vars_value="unset";
   fi
-  echo "configure:20608:" "$btng_log_vars_index is $btng_log_vars_value" >&5;
+  echo "configure:17887:" "$btng_log_vars_index is $btng_log_vars_value" >&5;
 done
 
 
@@ -20630,18 +17909,16 @@ fi
   LIB_NAME="$petsc_LIB_NAME $LIB_NAME"
   INC_PATH="$petsc_INCLUDES $INC_PATH"
 
-cat >>confdefs.h <<\_ACEOF
-#define HAVE_PETSC 1
-_ACEOF
+printf "%s\n" "#define HAVE_PETSC 1" >>confdefs.h
 
   if test $PETSC_VERSION_MAJOR -ne 2 || \
      test $PETSC_VERSION_MINOR -ne 3 || \
      test $PETSC_VERSION_SUBMINOR -ne 3 ; then
-     { echo "$as_me:$LINENO: WARNING:
+     { printf "%s\n" "$as_me:${as_lineno-$LINENO}: WARNING:
 SAMRAI requires PETSc-2.3.3.  You have specified version $PETSC_VERSION_MAJOR.$PETSC_VERSION_MINOR.$PETSC_VERSION_SUBMINOR
 which may not work properly!
 " >&5
-echo "$as_me: WARNING:
+printf "%s\n" "$as_me: WARNING:
 SAMRAI requires PETSc-2.3.3.  You have specified version $PETSC_VERSION_MAJOR.$PETSC_VERSION_MINOR.$PETSC_VERSION_SUBMINOR
 which may not work properly!
 " >&2;}
@@ -20656,16 +17933,12 @@ fi
 case $ARCH in
    Linux | LINUX | linux | CYGWIN )
 
-cat >>confdefs.h <<\_ACEOF
-#define LACKS_PROPER_XDR_HEADER 1
-_ACEOF
+printf "%s\n" "#define LACKS_PROPER_XDR_HEADER 1" >>confdefs.h
 
       ;;
    rs6000)
 
-cat >>confdefs.h <<\_ACEOF
-#define _POWER 1
-_ACEOF
+printf "%s\n" "#define _POWER 1" >>confdefs.h
 
       ;;
    *)
@@ -20676,9 +17949,7 @@ esac
 if test "$enable_xdr" = "yes"; then
 
 
-cat >>confdefs.h <<\_ACEOF
-#define HAVE_XDR 1
-_ACEOF
+printf "%s\n" "#define HAVE_XDR 1" >>confdefs.h
 
 
 
@@ -20695,15 +17966,11 @@ fi
 
 if test "$enable_deprecated" = "yes"; then
 
-cat >>confdefs.h <<\_ACEOF
-#define INCLUDE_DEPRECATED 2
-_ACEOF
+printf "%s\n" "#define INCLUDE_DEPRECATED 2" >>confdefs.h
 
 else
 
-cat >>confdefs.h <<\_ACEOF
-#define INCLUDE_DEPRECATED 9999999
-_ACEOF
+printf "%s\n" "#define INCLUDE_DEPRECATED 9999999" >>confdefs.h
 
 fi
 
@@ -20711,32 +17978,27 @@ fi
 
 
 # Check whether --with-sundials was given.
-if test "${with_sundials+set}" = set; then
+if test ${with_sundials+y}
+then :
   withval=$with_sundials;
-else
+else $as_nop
   with_sundials='no'
 fi
 
 
 if test "$with_sundials" = no; then
-   { echo "$as_me:$LINENO: NOTIFICATION: SAMRAI configured without the Sundials library" >&5
-echo "$as_me: NOTIFICATION: SAMRAI configured without the Sundials library" >&6;}
+   { printf "%s\n" "$as_me:${as_lineno-$LINENO}: NOTIFICATION: SAMRAI configured without the Sundials library" >&5
+printf "%s\n" "$as_me: NOTIFICATION: SAMRAI configured without the Sundials library" >&6;}
 
-cat >>confdefs.h <<\_ACEOF
-#define LACKS_SUNDIALS 1
-_ACEOF
+printf "%s\n" "#define LACKS_SUNDIALS 1" >>confdefs.h
 
 else
    sundials_dir="$with_sundials"
    if test ! -d "$sundials_dir" ; then
-     { { echo "$as_me:$LINENO: error: You MUST specify an existing path when using --with-sundials=PATH" >&5
-echo "$as_me: error: You MUST specify an existing path when using --with-sundials=PATH" >&2;}
-   { (exit 1); exit 1; }; }
+     as_fn_error $? "You MUST specify an existing path when using --with-sundials=PATH" "$LINENO" 5
    fi
 
-cat >>confdefs.h <<\_ACEOF
-#define HAVE_SUNDIALS 1
-_ACEOF
+printf "%s\n" "#define HAVE_SUNDIALS 1" >>confdefs.h
 
    LIB_PATH="$LIB_PATH -L$sundials_dir/lib"
    LIB_NAME="$LIB_NAME -lsundials_cvode -lsundials_kinsol"
@@ -20754,7 +18016,7 @@ for btng_log_vars_index in $btng_log_vars ; do
   else
     btng_log_vars_value="unset";
   fi
-  echo "configure:20757:" "$btng_log_vars_index is $btng_log_vars_value" >&5;
+  echo "configure:18019:" "$btng_log_vars_index is $btng_log_vars_value" >&5;
 done
 
 
@@ -20762,33 +18024,28 @@ done
 
 
 # Check whether --with-cubes was given.
-if test "${with_cubes+set}" = set; then
+if test ${with_cubes+y}
+then :
   withval=$with_cubes;
-else
+else $as_nop
   with_cubes='no'
 fi
 
 
 CUBES_C_FILES="error_in_script.c"
 if test "$with_cubes" = no; then
-   { echo "$as_me:$LINENO: NOTIFICATION: SAMRAI configured without the CUBES library" >&5
-echo "$as_me: NOTIFICATION: SAMRAI configured without the CUBES library" >&6;}
+   { printf "%s\n" "$as_me:${as_lineno-$LINENO}: NOTIFICATION: SAMRAI configured without the CUBES library" >&5
+printf "%s\n" "$as_me: NOTIFICATION: SAMRAI configured without the CUBES library" >&6;}
 
-cat >>confdefs.h <<\_ACEOF
-#define LACKS_CUBES 1
-_ACEOF
+printf "%s\n" "#define LACKS_CUBES 1" >>confdefs.h
 
 else
    cubes_dir="$with_cubes"
    if test ! -d "$cubes_dir" ; then
-     { { echo "$as_me:$LINENO: error: You MUST specify an existing path when using --with-cubes=PATH" >&5
-echo "$as_me: error: You MUST specify an existing path when using --with-cubes=PATH" >&2;}
-   { (exit 1); exit 1; }; }
+     as_fn_error $? "You MUST specify an existing path when using --with-cubes=PATH" "$LINENO" 5
    fi
 
-cat >>confdefs.h <<\_ACEOF
-#define HAVE_CUBES 1
-_ACEOF
+printf "%s\n" "#define HAVE_CUBES 1" >>confdefs.h
 
    cubes_includes="-I${cubes_dir}/include -I${cubes_dir}/cart3d/include"
    cubes_lib="-L${cubes_dir} -L${cubes_dir}/cart3d/lib"
@@ -20806,7 +18063,7 @@ for btng_log_vars_index in $btng_log_vars ; do
   else
     btng_log_vars_value="unset";
   fi
-  echo "configure:20809:" "$btng_log_vars_index is $btng_log_vars_value" >&5;
+  echo "configure:18066:" "$btng_log_vars_index is $btng_log_vars_value" >&5;
 done
 
 
@@ -20815,33 +18072,28 @@ done
 
 
 # Check whether --with-eleven was given.
-if test "${with_eleven+set}" = set; then
+if test ${with_eleven+y}
+then :
   withval=$with_eleven;
-else
+else $as_nop
   with_eleven='no'
 fi
 
 
 ELEVEN_C_FILES="error_in_script.c"
 if test "$with_eleven" = no; then
-   { echo "$as_me:$LINENO: NOTIFICATION: SAMRAI configured without the ELEVEN library" >&5
-echo "$as_me: NOTIFICATION: SAMRAI configured without the ELEVEN library" >&6;}
+   { printf "%s\n" "$as_me:${as_lineno-$LINENO}: NOTIFICATION: SAMRAI configured without the ELEVEN library" >&5
+printf "%s\n" "$as_me: NOTIFICATION: SAMRAI configured without the ELEVEN library" >&6;}
 
-cat >>confdefs.h <<\_ACEOF
-#define LACKS_ELEVEN 1
-_ACEOF
+printf "%s\n" "#define LACKS_ELEVEN 1" >>confdefs.h
 
 else
    eleven_dir="$with_eleven"
    if test ! -d "$eleven_dir" ; then
-     { { echo "$as_me:$LINENO: error: You MUST specify an existing path when using --with-eleven=PATH" >&5
-echo "$as_me: error: You MUST specify an existing path when using --with-eleven=PATH" >&2;}
-   { (exit 1); exit 1; }; }
+     as_fn_error $? "You MUST specify an existing path when using --with-eleven=PATH" "$LINENO" 5
    fi
 
-cat >>confdefs.h <<\_ACEOF
-#define HAVE_ELEVEN 1
-_ACEOF
+printf "%s\n" "#define HAVE_ELEVEN 1" >>confdefs.h
 
    eleven_includes="-I${eleven_dir}/common -I${eleven_dir}/mesh -I${eleven_dir}/dbase -I${eleven_dir}/dbase/gzstream -I${eleven_dir}/eleven/src -I${eleven_dir}/geom_util"
    eleven_lib="-L${eleven_dir}/eleven/lib"
@@ -20859,7 +18111,7 @@ for btng_log_vars_index in $btng_log_vars ; do
   else
     btng_log_vars_value="unset";
   fi
-  echo "configure:20862:" "$btng_log_vars_index is $btng_log_vars_value" >&5;
+  echo "configure:18114:" "$btng_log_vars_index is $btng_log_vars_value" >&5;
 done
 
 
@@ -20867,14 +18119,12 @@ done
 
 if test -z "$with_vampir"; then
 
-cat >>confdefs.h <<\_ACEOF
-#define LACKS_VAMPIR 1
-_ACEOF
+printf "%s\n" "#define LACKS_VAMPIR 1" >>confdefs.h
 
 else
    if test "$with_vampir" = yes; then
-      { echo "$as_me:$LINENO: checking for VAMPIR" >&5
-echo $ECHO_N "checking for VAMPIR... $ECHO_C" >&6; }
+      { printf "%s\n" "$as_me:${as_lineno-$LINENO}: checking for VAMPIR" >&5
+printf %s "checking for VAMPIR... " >&6; }
       vampir_dir=
       for i in /usr/global/tools/kppp/aix_5_ll/default $with_vampir; do
          if test -d $i -a -f $i/include/VT.h; then
@@ -20887,12 +18137,10 @@ echo $ECHO_N "checking for VAMPIR... $ECHO_C" >&6; }
    fi
 
    if test -n "$vampir_dir"; then
-      { echo "$as_me:$LINENO: result: $vampir_dir" >&5
-echo "${ECHO_T}$vampir_dir" >&6; }
+      { printf "%s\n" "$as_me:${as_lineno-$LINENO}: result: $vampir_dir" >&5
+printf "%s\n" "$vampir_dir" >&6; }
 
-cat >>confdefs.h <<\_ACEOF
-#define HAVE_VAMPIR 1
-_ACEOF
+printf "%s\n" "#define HAVE_VAMPIR 1" >>confdefs.h
 
       with_vampir=yes
 
@@ -20910,12 +18158,10 @@ _ACEOF
             ;;
       esac
    else
-      { echo "$as_me:$LINENO: result: VAMPIR library not found" >&5
-echo "${ECHO_T}VAMPIR library not found" >&6; }
+      { printf "%s\n" "$as_me:${as_lineno-$LINENO}: result: VAMPIR library not found" >&5
+printf "%s\n" "VAMPIR library not found" >&6; }
 
-cat >>confdefs.h <<\_ACEOF
-#define LACKS_VAMPIR 1
-_ACEOF
+printf "%s\n" "#define LACKS_VAMPIR 1" >>confdefs.h
 
       with_vampir=no
    fi
@@ -20930,26 +18176,22 @@ for btng_log_vars_index in $btng_log_vars ; do
   else
     btng_log_vars_value="unset";
   fi
-  echo "configure:20933:" "$btng_log_vars_index is $btng_log_vars_value" >&5;
+  echo "configure:18179:" "$btng_log_vars_index is $btng_log_vars_value" >&5;
 done
 
 
 
 if test -z "$with_tau"; then
 
-cat >>confdefs.h <<\_ACEOF
-#define LACKS_TAU 1
-_ACEOF
+printf "%s\n" "#define LACKS_TAU 1" >>confdefs.h
 
 else
-   { echo "$as_me:$LINENO: checking for TAU" >&5
-echo $ECHO_N "checking for TAU... $ECHO_C" >&6; }
-   { echo "$as_me:$LINENO: result: $with_tau" >&5
-echo "${ECHO_T}$with_tau" >&6; }
+   { printf "%s\n" "$as_me:${as_lineno-$LINENO}: checking for TAU" >&5
+printf %s "checking for TAU... " >&6; }
+   { printf "%s\n" "$as_me:${as_lineno-$LINENO}: result: $with_tau" >&5
+printf "%s\n" "$with_tau" >&6; }
 
-cat >>confdefs.h <<\_ACEOF
-#define HAVE_TAU 1
-_ACEOF
+printf "%s\n" "#define HAVE_TAU 1" >>confdefs.h
 
    TAU_INCLUDE="$with_tau"
    INC_PATH="\$(TAU_INCLUDE) \$(TAU_DEFS) \$(TAU_MPI_INCLUDE) $INC_PATH"
@@ -20959,8 +18201,8 @@ _ACEOF
          ;;
    esac
    LIB_NAME="\$(TAU_MPI_LIBS) \$(TAU_LIBS) $LIB_NAME"
-   { echo "$as_me:$LINENO: result: including TAU makefile $TAU_INCLUDE" >&5
-echo "${ECHO_T}including TAU makefile $TAU_INCLUDE" >&6; }
+   { printf "%s\n" "$as_me:${as_lineno-$LINENO}: result: including TAU makefile $TAU_INCLUDE" >&5
+printf "%s\n" "including TAU makefile $TAU_INCLUDE" >&6; }
    TAU_INCLUDE="include $TAU_INCLUDE"
 fi
 
@@ -20975,11 +18217,7 @@ ac_link='$CC -o conftest$ac_exeext $CFLAGS $CPPFLAGS $LDFLAGS conftest.$ac_ext $
 ac_compiler_gnu=$ac_cv_c_compiler_gnu
 
 
-cat >conftest.$ac_ext <<_ACEOF
-/* confdefs.h.  */
-_ACEOF
-cat confdefs.h >>conftest.$ac_ext
-cat >>conftest.$ac_ext <<_ACEOF
+cat confdefs.h - <<_ACEOF >conftest.$ac_ext
 /* end confdefs.h.  */
 #include <float.h>
 #ifndef NAN
@@ -20987,25 +18225,20 @@ nan is broken
 #endif
 _ACEOF
 if (eval "$ac_cpp conftest.$ac_ext") 2>&5 |
-  $EGREP "^nan is broken" >/dev/null 2>&1; then
+  $EGREP "^nan is broken" >/dev/null 2>&1
+then :
 
-cat >>confdefs.h <<\_ACEOF
-#define NAN_IS_BROKEN 1
-_ACEOF
+printf "%s\n" "#define NAN_IS_BROKEN 1" >>confdefs.h
 
-echo "configure:20996:" "NAN is broken (not in float.h)" >&5
-else
-  echo "configure:20998:" "NAN is ok (in float.h)" >&5
+echo "configure:18233:" "NAN is broken (not in float.h)" >&5
+else $as_nop
+  echo "configure:18235:" "NAN is ok (in float.h)" >&5
 
 fi
-rm -f conftest*
+rm -rf conftest*
 
 
-cat >conftest.$ac_ext <<_ACEOF
-/* confdefs.h.  */
-_ACEOF
-cat confdefs.h >>conftest.$ac_ext
-cat >>conftest.$ac_ext <<_ACEOF
+cat confdefs.h - <<_ACEOF >conftest.$ac_ext
 /* end confdefs.h.  */
 #include <float.h>
 #ifndef FLT_SNAN
@@ -21013,25 +18246,20 @@ flt snan is broken
 #endif
 _ACEOF
 if (eval "$ac_cpp conftest.$ac_ext") 2>&5 |
-  $EGREP "^flt snan is broken" >/dev/null 2>&1; then
+  $EGREP "^flt snan is broken" >/dev/null 2>&1
+then :
 
-cat >>confdefs.h <<\_ACEOF
-#define FLT_SNAN_IS_BROKEN 1
-_ACEOF
+printf "%s\n" "#define FLT_SNAN_IS_BROKEN 1" >>confdefs.h
 
-echo "configure:21022:" "FLT_NAN is broken (not in float.h)" >&5
-else
-  echo "configure:21024:" "FLT_NAN is ok (in float.h)" >&5
+echo "configure:18254:" "FLT_NAN is broken (not in float.h)" >&5
+else $as_nop
+  echo "configure:18256:" "FLT_NAN is ok (in float.h)" >&5
 
 fi
-rm -f conftest*
+rm -rf conftest*
 
 
-cat >conftest.$ac_ext <<_ACEOF
-/* confdefs.h.  */
-_ACEOF
-cat confdefs.h >>conftest.$ac_ext
-cat >>conftest.$ac_ext <<_ACEOF
+cat confdefs.h - <<_ACEOF >conftest.$ac_ext
 /* end confdefs.h.  */
 #include <float.h>
 #ifndef DBL_SNAN
@@ -21039,25 +18267,20 @@ dbl snan is broken
 #endif
 _ACEOF
 if (eval "$ac_cpp conftest.$ac_ext") 2>&5 |
-  $EGREP "^dbl snan is broken" >/dev/null 2>&1; then
+  $EGREP "^dbl snan is broken" >/dev/null 2>&1
+then :
 
-cat >>confdefs.h <<\_ACEOF
-#define DBL_SNAN_IS_BROKEN 1
-_ACEOF
+printf "%s\n" "#define DBL_SNAN_IS_BROKEN 1" >>confdefs.h
 
-echo "configure:21048:" "DBL_NAN is broken (not in float.h)" >&5
-else
-  echo "configure:21050:" "DBL_NAN is ok (in float.h)" >&5
+echo "configure:18275:" "DBL_NAN is broken (not in float.h)" >&5
+else $as_nop
+  echo "configure:18277:" "DBL_NAN is ok (in float.h)" >&5
 
 fi
-rm -f conftest*
+rm -rf conftest*
 
 
-cat >conftest.$ac_ext <<_ACEOF
-/* confdefs.h.  */
-_ACEOF
-cat confdefs.h >>conftest.$ac_ext
-cat >>conftest.$ac_ext <<_ACEOF
+cat confdefs.h - <<_ACEOF >conftest.$ac_ext
 /* end confdefs.h.  */
 #include <float.h>
 #ifndef FLT_MAX
@@ -21065,25 +18288,20 @@ flt snan is broken
 #endif
 _ACEOF
 if (eval "$ac_cpp conftest.$ac_ext") 2>&5 |
-  $EGREP "^flt snan is broken" >/dev/null 2>&1; then
+  $EGREP "^flt snan is broken" >/dev/null 2>&1
+then :
 
-cat >>confdefs.h <<\_ACEOF
-#define FLT_MAX_IS_BROKEN 1
-_ACEOF
+printf "%s\n" "#define FLT_MAX_IS_BROKEN 1" >>confdefs.h
 
-echo "configure:21074:" "FLT_MAX is broken (not in float.h)" >&5
-else
-  echo "configure:21076:" "FLT_MAX is ok (in float.h)" >&5
+echo "configure:18296:" "FLT_MAX is broken (not in float.h)" >&5
+else $as_nop
+  echo "configure:18298:" "FLT_MAX is ok (in float.h)" >&5
 
 fi
-rm -f conftest*
+rm -rf conftest*
 
 
-cat >conftest.$ac_ext <<_ACEOF
-/* confdefs.h.  */
-_ACEOF
-cat confdefs.h >>conftest.$ac_ext
-cat >>conftest.$ac_ext <<_ACEOF
+cat confdefs.h - <<_ACEOF >conftest.$ac_ext
 /* end confdefs.h.  */
 #include <float.h>
 #ifndef DBL_MAX
@@ -21091,18 +18309,17 @@ dbl snan is broken
 #endif
 _ACEOF
 if (eval "$ac_cpp conftest.$ac_ext") 2>&5 |
-  $EGREP "^dbl snan is broken" >/dev/null 2>&1; then
+  $EGREP "^dbl snan is broken" >/dev/null 2>&1
+then :
 
-cat >>confdefs.h <<\_ACEOF
-#define DBL_MAX_IS_BROKEN 1
-_ACEOF
+printf "%s\n" "#define DBL_MAX_IS_BROKEN 1" >>confdefs.h
 
-echo "configure:21100:" "DBL_MAX is broken (not in float.h)" >&5
-else
-  echo "configure:21102:" "DBL_MAX is ok (in float.h)" >&5
+echo "configure:18317:" "DBL_MAX is broken (not in float.h)" >&5
+else $as_nop
+  echo "configure:18319:" "DBL_MAX is ok (in float.h)" >&5
 
 fi
-rm -f conftest*
+rm -rf conftest*
 
 
 # End macro BTNG_IEEE_FLOAT
@@ -21152,7 +18369,7 @@ for btng_log_vars_index in $btng_log_vars ; do
   else
     btng_log_vars_value="unset";
   fi
-  echo "configure:21155:" "before adding rpath syntax: $btng_log_vars_index is $btng_log_vars_value" >&5;
+  echo "configure:18372:" "before adding rpath syntax: $btng_log_vars_index is $btng_log_vars_value" >&5;
 done
 
 
@@ -21164,9 +18381,10 @@ done
 
 
 # Check whether --enable-rpath was given.
-if test "${enable_rpath+set}" = set; then
+if test ${enable_rpath+y}
+then :
   enableval=$enable_rpath;
-else
+else $as_nop
   enable_rpath=yes
 fi
 
@@ -21203,11 +18421,7 @@ ac_compiler_gnu=$ac_cv_cxx_compiler_gnu
   btng_save_LIBS="$LIBS";
   for i in '---bogus-flag-meant-to-cause-error' '-Wl,-rpath ' '-Wl,-R' '-Wl,-R '; do
     LIBS="${i}/usr/local"
-    cat >conftest.$ac_ext <<_ACEOF
-/* confdefs.h.  */
-_ACEOF
-cat confdefs.h >>conftest.$ac_ext
-cat >>conftest.$ac_ext <<_ACEOF
+    cat confdefs.h - <<_ACEOF >conftest.$ac_ext
 /* end confdefs.h.  */
 
 #ifdef F77_DUMMY_MAIN
@@ -21219,41 +18433,21 @@ cat >>conftest.$ac_ext <<_ACEOF
 
 #endif
 int
-main ()
+main (void)
 {
 
   ;
   return 0;
 }
 _ACEOF
-rm -f conftest.$ac_objext conftest$ac_exeext
-if { (ac_try="$ac_link"
-case "(($ac_try" in
-  *\"* | *\`* | *\\*) ac_try_echo=\$ac_try;;
-  *) ac_try_echo=$ac_try;;
-esac
-eval "echo \"\$as_me:$LINENO: $ac_try_echo\"") >&5
-  (eval "$ac_link") 2>conftest.er1
-  ac_status=$?
-  grep -v '^ *+' conftest.er1 >conftest.err
-  rm -f conftest.er1
-  cat conftest.err >&5
-  echo "$as_me:$LINENO: \$? = $ac_status" >&5
-  (exit $ac_status); } && {
-	 test -z "$ac_cxx_werror_flag" ||
-	 test ! -s conftest.err
-       } && test -s conftest$ac_exeext &&
-       $as_test_x conftest$ac_exeext; then
+if ac_fn_cxx_try_link "$LINENO"
+then :
   btng_rpath_beginning="$i"
-else
-  echo "$as_me: failed program was:" >&5
-sed 's/^/| /' conftest.$ac_ext >&5
-
-	unset btng_rpath_beginning
+else $as_nop
+  unset btng_rpath_beginning
 fi
-
-rm -f core conftest.err conftest.$ac_objext conftest_ipa8_conftest.oo \
-      conftest$ac_exeext conftest.$ac_ext
+rm -f core conftest.err conftest.$ac_objext conftest.beam \
+    conftest$ac_exeext conftest.$ac_ext
     # Intel compiler does not fail on bad args but warning message is
     # created. If warning is found in the log then continue searching
     # for syntax as the current one is no good.  If warning is not
@@ -21281,11 +18475,7 @@ rm -f core conftest.err conftest.$ac_objext conftest_ipa8_conftest.oo \
   btng_save_LIBS="$LIBS";
   for i in '---bogus-flag-meant-to-cause-error' '-Wl,-rpath ' '-Wl,-R' '-Wl,-R '; do
     LIBS="${i}/usr/local"
-    cat >conftest.$ac_ext <<_ACEOF
-/* confdefs.h.  */
-_ACEOF
-cat confdefs.h >>conftest.$ac_ext
-cat >>conftest.$ac_ext <<_ACEOF
+    cat confdefs.h - <<_ACEOF >conftest.$ac_ext
 /* end confdefs.h.  */
 
 #ifdef F77_DUMMY_MAIN
@@ -21297,41 +18487,21 @@ cat >>conftest.$ac_ext <<_ACEOF
 
 #endif
 int
-main ()
+main (void)
 {
 
   ;
   return 0;
 }
 _ACEOF
-rm -f conftest.$ac_objext conftest$ac_exeext
-if { (ac_try="$ac_link"
-case "(($ac_try" in
-  *\"* | *\`* | *\\*) ac_try_echo=\$ac_try;;
-  *) ac_try_echo=$ac_try;;
-esac
-eval "echo \"\$as_me:$LINENO: $ac_try_echo\"") >&5
-  (eval "$ac_link") 2>conftest.er1
-  ac_status=$?
-  grep -v '^ *+' conftest.er1 >conftest.err
-  rm -f conftest.er1
-  cat conftest.err >&5
-  echo "$as_me:$LINENO: \$? = $ac_status" >&5
-  (exit $ac_status); } && {
-	 test -z "$ac_cxx_werror_flag" ||
-	 test ! -s conftest.err
-       } && test -s conftest$ac_exeext &&
-       $as_test_x conftest$ac_exeext; then
+if ac_fn_cxx_try_link "$LINENO"
+then :
   btng_rpath_beginning="$i"
-else
-  echo "$as_me: failed program was:" >&5
-sed 's/^/| /' conftest.$ac_ext >&5
-
-	unset btng_rpath_beginning
+else $as_nop
+  unset btng_rpath_beginning
 fi
-
-rm -f core conftest.err conftest.$ac_objext conftest_ipa8_conftest.oo \
-      conftest$ac_exeext conftest.$ac_ext
+rm -f core conftest.err conftest.$ac_objext conftest.beam \
+    conftest$ac_exeext conftest.$ac_ext
     # Intel compiler does not fail on bad args but warning message is
     # created. If warning is found in the log then continue searching
     # for syntax as the current one is no good.  If warning is not
@@ -21358,12 +18528,12 @@ rm -f core conftest.err conftest.$ac_objext conftest_ipa8_conftest.oo \
           osf*) btng_rpath_beginning='-rpath ' ;;
           *) btng_rpath_beginning='' ;;
         esac
-        { echo "$as_me:$LINENO: WARNING: Your compiler $CXX returns 0 even when it is
+        { printf "%s\n" "$as_me:${as_lineno-$LINENO}: WARNING: Your compiler $CXX returns 0 even when it is
   given a bogus flag.  Therefore, I cannot find the proper syntax
   for the rpath for this compiler.  I have resorted to a guess that
   may not be correct: '$btng_rpath_beginning'.
   You can override this by using --enable-rpath=SYNTAX" >&5
-echo "$as_me: WARNING: Your compiler $CXX returns 0 even when it is
+printf "%s\n" "$as_me: WARNING: Your compiler $CXX returns 0 even when it is
   given a bogus flag.  Therefore, I cannot find the proper syntax
   for the rpath for this compiler.  I have resorted to a guess that
   may not be correct: '$btng_rpath_beginning'.
@@ -21378,11 +18548,7 @@ echo "$as_me: WARNING: Your compiler $CXX returns 0 even when it is
   btng_save_LIBS="$LIBS";
   for i in '---bogus-flag-meant-to-cause-error' '-R' '-R '; do
     LIBS="${i}/usr/local"
-    cat >conftest.$ac_ext <<_ACEOF
-/* confdefs.h.  */
-_ACEOF
-cat confdefs.h >>conftest.$ac_ext
-cat >>conftest.$ac_ext <<_ACEOF
+    cat confdefs.h - <<_ACEOF >conftest.$ac_ext
 /* end confdefs.h.  */
 
 #ifdef F77_DUMMY_MAIN
@@ -21394,41 +18560,21 @@ cat >>conftest.$ac_ext <<_ACEOF
 
 #endif
 int
-main ()
+main (void)
 {
 
   ;
   return 0;
 }
 _ACEOF
-rm -f conftest.$ac_objext conftest$ac_exeext
-if { (ac_try="$ac_link"
-case "(($ac_try" in
-  *\"* | *\`* | *\\*) ac_try_echo=\$ac_try;;
-  *) ac_try_echo=$ac_try;;
-esac
-eval "echo \"\$as_me:$LINENO: $ac_try_echo\"") >&5
-  (eval "$ac_link") 2>conftest.er1
-  ac_status=$?
-  grep -v '^ *+' conftest.er1 >conftest.err
-  rm -f conftest.er1
-  cat conftest.err >&5
-  echo "$as_me:$LINENO: \$? = $ac_status" >&5
-  (exit $ac_status); } && {
-	 test -z "$ac_cxx_werror_flag" ||
-	 test ! -s conftest.err
-       } && test -s conftest$ac_exeext &&
-       $as_test_x conftest$ac_exeext; then
+if ac_fn_cxx_try_link "$LINENO"
+then :
   btng_rpath_beginning="$i"
-else
-  echo "$as_me: failed program was:" >&5
-sed 's/^/| /' conftest.$ac_ext >&5
-
-	unset btng_rpath_beginning
+else $as_nop
+  unset btng_rpath_beginning
 fi
-
-rm -f core conftest.err conftest.$ac_objext conftest_ipa8_conftest.oo \
-      conftest$ac_exeext conftest.$ac_ext
+rm -f core conftest.err conftest.$ac_objext conftest.beam \
+    conftest$ac_exeext conftest.$ac_ext
     # Intel compiler does not fail on bad args but warning message is
     # created. If warning is found in the log then continue searching
     # for syntax as the current one is no good.  If warning is not
@@ -21463,11 +18609,7 @@ rm -f core conftest.err conftest.$ac_objext conftest_ipa8_conftest.oo \
   btng_save_LIBS="$LIBS";
   for i in '---bogus-flag-meant-to-cause-error' '-R' '-R ' '-rpath ' '-Wl,-rpath ' '-Wl,-R' '-Wl,-R '; do
     LIBS="${i}/usr/local"
-    cat >conftest.$ac_ext <<_ACEOF
-/* confdefs.h.  */
-_ACEOF
-cat confdefs.h >>conftest.$ac_ext
-cat >>conftest.$ac_ext <<_ACEOF
+    cat confdefs.h - <<_ACEOF >conftest.$ac_ext
 /* end confdefs.h.  */
 
 #ifdef F77_DUMMY_MAIN
@@ -21479,41 +18621,21 @@ cat >>conftest.$ac_ext <<_ACEOF
 
 #endif
 int
-main ()
+main (void)
 {
 
   ;
   return 0;
 }
 _ACEOF
-rm -f conftest.$ac_objext conftest$ac_exeext
-if { (ac_try="$ac_link"
-case "(($ac_try" in
-  *\"* | *\`* | *\\*) ac_try_echo=\$ac_try;;
-  *) ac_try_echo=$ac_try;;
-esac
-eval "echo \"\$as_me:$LINENO: $ac_try_echo\"") >&5
-  (eval "$ac_link") 2>conftest.er1
-  ac_status=$?
-  grep -v '^ *+' conftest.er1 >conftest.err
-  rm -f conftest.er1
-  cat conftest.err >&5
-  echo "$as_me:$LINENO: \$? = $ac_status" >&5
-  (exit $ac_status); } && {
-	 test -z "$ac_cxx_werror_flag" ||
-	 test ! -s conftest.err
-       } && test -s conftest$ac_exeext &&
-       $as_test_x conftest$ac_exeext; then
+if ac_fn_cxx_try_link "$LINENO"
+then :
   btng_rpath_beginning="$i"
-else
-  echo "$as_me: failed program was:" >&5
-sed 's/^/| /' conftest.$ac_ext >&5
-
-	unset btng_rpath_beginning
+else $as_nop
+  unset btng_rpath_beginning
 fi
-
-rm -f core conftest.err conftest.$ac_objext conftest_ipa8_conftest.oo \
-      conftest$ac_exeext conftest.$ac_ext
+rm -f core conftest.err conftest.$ac_objext conftest.beam \
+    conftest$ac_exeext conftest.$ac_ext
     # Intel compiler does not fail on bad args but warning message is
     # created. If warning is found in the log then continue searching
     # for syntax as the current one is no good.  If warning is not
@@ -21540,12 +18662,12 @@ rm -f core conftest.err conftest.$ac_objext conftest_ipa8_conftest.oo \
           osf*) btng_rpath_beginning='-rpath ' ;;
           *) btng_rpath_beginning='' ;;
         esac
-        { echo "$as_me:$LINENO: WARNING: Your compiler $CXX returns 0 even when it is
+        { printf "%s\n" "$as_me:${as_lineno-$LINENO}: WARNING: Your compiler $CXX returns 0 even when it is
   given a bogus flag.  Therefore, I cannot find the proper syntax
   for the rpath for this compiler.  I have resorted to a guess that
   may not be correct: '$btng_rpath_beginning'.
   You can override this by using --enable-rpath=SYNTAX" >&5
-echo "$as_me: WARNING: Your compiler $CXX returns 0 even when it is
+printf "%s\n" "$as_me: WARNING: Your compiler $CXX returns 0 even when it is
   given a bogus flag.  Therefore, I cannot find the proper syntax
   for the rpath for this compiler.  I have resorted to a guess that
   may not be correct: '$btng_rpath_beginning'.
@@ -21559,11 +18681,7 @@ echo "$as_me: WARNING: Your compiler $CXX returns 0 even when it is
   btng_save_LIBS="$LIBS";
   for i in '-R ' '-R' '-rpath ' '-Wl,-rpath ' '-Wl,-R ' '-Wl,-R'; do
     LIBS="${i}/usr/local"
-    cat >conftest.$ac_ext <<_ACEOF
-/* confdefs.h.  */
-_ACEOF
-cat confdefs.h >>conftest.$ac_ext
-cat >>conftest.$ac_ext <<_ACEOF
+    cat confdefs.h - <<_ACEOF >conftest.$ac_ext
 /* end confdefs.h.  */
 
 #ifdef F77_DUMMY_MAIN
@@ -21575,41 +18693,21 @@ cat >>conftest.$ac_ext <<_ACEOF
 
 #endif
 int
-main ()
+main (void)
 {
 
   ;
   return 0;
 }
 _ACEOF
-rm -f conftest.$ac_objext conftest$ac_exeext
-if { (ac_try="$ac_link"
-case "(($ac_try" in
-  *\"* | *\`* | *\\*) ac_try_echo=\$ac_try;;
-  *) ac_try_echo=$ac_try;;
-esac
-eval "echo \"\$as_me:$LINENO: $ac_try_echo\"") >&5
-  (eval "$ac_link") 2>conftest.er1
-  ac_status=$?
-  grep -v '^ *+' conftest.er1 >conftest.err
-  rm -f conftest.er1
-  cat conftest.err >&5
-  echo "$as_me:$LINENO: \$? = $ac_status" >&5
-  (exit $ac_status); } && {
-	 test -z "$ac_cxx_werror_flag" ||
-	 test ! -s conftest.err
-       } && test -s conftest$ac_exeext &&
-       $as_test_x conftest$ac_exeext; then
+if ac_fn_cxx_try_link "$LINENO"
+then :
   btng_rpath_beginning="$i"
-else
-  echo "$as_me: failed program was:" >&5
-sed 's/^/| /' conftest.$ac_ext >&5
-
-	unset btng_rpath_beginning
+else $as_nop
+  unset btng_rpath_beginning
 fi
-
-rm -f core conftest.err conftest.$ac_objext conftest_ipa8_conftest.oo \
-      conftest$ac_exeext conftest.$ac_ext
+rm -f core conftest.err conftest.$ac_objext conftest.beam \
+    conftest$ac_exeext conftest.$ac_ext
     # Intel compiler does not fail on bad args but warning message is
     # created. If warning is found in the log then continue searching
     # for syntax as the current one is no good.  If warning is not
@@ -21639,7 +18737,7 @@ for btng_log_vars_index in $btng_log_vars ; do
   else
     btng_log_vars_value="unset";
   fi
-  echo "configure:21642:" "forming rpaths: $btng_log_vars_index is $btng_log_vars_value" >&5;
+  echo "configure:18740:" "forming rpaths: $btng_log_vars_index is $btng_log_vars_value" >&5;
 done
 
 
@@ -21654,8 +18752,8 @@ ac_compiler_gnu=$ac_cv_c_compiler_gnu
   # It is valid to have btng_rpath_beginning be blank.
   # but if it is unset, we could not find a way to set it.
   if test ! "${btng_rpath_beginning+set}" = set; then
-    { echo "$as_me:$LINENO: WARNING: I cannot find a working syntax for setting relocatable paths" >&5
-echo "$as_me: WARNING: I cannot find a working syntax for setting relocatable paths" >&2;}
+    { printf "%s\n" "$as_me:${as_lineno-$LINENO}: WARNING: I cannot find a working syntax for setting relocatable paths" >&5
+printf "%s\n" "$as_me: WARNING: I cannot find a working syntax for setting relocatable paths" >&2;}
   fi
 
 elif test ! "${enable_rpath}" = no; then
@@ -21705,7 +18803,7 @@ for btng_log_vars_index in $btng_log_vars ; do
   else
     btng_log_vars_value="unset";
   fi
-  echo "configure:21708:" "after adding rpath syntax: $btng_log_vars_index is $btng_log_vars_value" >&5;
+  echo "configure:18806:" "after adding rpath syntax: $btng_log_vars_index is $btng_log_vars_value" >&5;
 done
 
 
@@ -21723,7 +18821,8 @@ done
 
 
 # Check whether --with-parallel-run-bin was given.
-if test "${with_parallel_run_bin+set}" = set; then
+if test ${with_parallel_run_bin+y}
+then :
   withval=$with_parallel_run_bin;
 case "$with_parallel_run_bin" in
   no)
@@ -21748,13 +18847,13 @@ for btng_log_vars_index in $btng_log_vars ; do
   else
     btng_log_vars_value="unset";
   fi
-  echo "configure:21751:" "with-parallel-run-bin given: $btng_log_vars_index is $btng_log_vars_value" >&5;
+  echo "configure:18850:" "with-parallel-run-bin given: $btng_log_vars_index is $btng_log_vars_value" >&5;
 done
 
 
 
 
-else
+else $as_nop
 
 unset PARALLEL_RUN_BIN;
 
@@ -21767,7 +18866,7 @@ for btng_log_vars_index in $btng_log_vars ; do
   else
     btng_log_vars_value="unset";
   fi
-  echo "configure:21770:" "with-parallel-run-bin NOT given: $btng_log_vars_index is $btng_log_vars_value" >&5;
+  echo "configure:18869:" "with-parallel-run-bin NOT given: $btng_log_vars_index is $btng_log_vars_value" >&5;
 done
 
 
@@ -21792,7 +18891,7 @@ for btng_log_vars_index in $btng_log_vars ; do
   else
     btng_log_vars_value="unset";
   fi
-  echo "configure:21795:" "after setting PARALLEL_RUN_BIN: $btng_log_vars_index is $btng_log_vars_value" >&5;
+  echo "configure:18894:" "after setting PARALLEL_RUN_BIN: $btng_log_vars_index is $btng_log_vars_value" >&5;
 done
 
 
@@ -21824,7 +18923,7 @@ for btng_log_vars_index in $btng_log_vars ; do
   else
     btng_log_vars_value="unset";
   fi
-  echo "configure:21827:" "in support-serpa-run: $btng_log_vars_index is $btng_log_vars_value" >&5;
+  echo "configure:18926:" "in support-serpa-run: $btng_log_vars_index is $btng_log_vars_value" >&5;
 done
 
 
@@ -21841,18 +18940,17 @@ ac_config_files="$ac_config_files config/serpa-run"
 
 
 # Check whether --enable-test-nprocs was given.
-if test "${enable_test_nprocs+set}" = set; then
+if test ${enable_test_nprocs+y}
+then :
   enableval=$enable_test_nprocs;
 case "$enable_test_nprocs" in
   yes|no)
-    { { echo "$as_me:$LINENO: error: You must specify a list of processors for testing." >&5
-echo "$as_me: error: You must specify a list of processors for testing." >&2;}
-   { (exit 1); exit 1; }; }
+    as_fn_error $? "You must specify a list of processors for testing." "$LINENO" 5
   ;;
   *) TEST_NPROCS=$enable_test_nprocs
 esac
 
-else
+else $as_nop
   TEST_NPROCS='0,2'
 
 fi
@@ -22009,7 +19107,7 @@ for btng_log_vars_index in $btng_log_vars ; do
   else
     btng_log_vars_value="unset";
   fi
-  echo "configure:22012:" "$btng_log_vars_index is $btng_log_vars_value" >&5;
+  echo "configure:19110:" "$btng_log_vars_index is $btng_log_vars_value" >&5;
 done
 
 
@@ -22023,7 +19121,7 @@ for btng_log_vars_index in $btng_log_vars ; do
   else
     btng_log_vars_value="unset";
   fi
-  echo "configure:22026:" "$btng_log_vars_index is $btng_log_vars_value" >&5;
+  echo "configure:19124:" "$btng_log_vars_index is $btng_log_vars_value" >&5;
 done
 
 
@@ -22062,12 +19160,13 @@ _ACEOF
     case $ac_val in #(
     *${as_nl}*)
       case $ac_var in #(
-      *_cv_*) { echo "$as_me:$LINENO: WARNING: Cache variable $ac_var contains a newline." >&5
-echo "$as_me: WARNING: Cache variable $ac_var contains a newline." >&2;} ;;
+      *_cv_*) { printf "%s\n" "$as_me:${as_lineno-$LINENO}: WARNING: cache variable $ac_var contains a newline" >&5
+printf "%s\n" "$as_me: WARNING: cache variable $ac_var contains a newline" >&2;} ;;
       esac
       case $ac_var in #(
       _ | IFS | as_nl) ;; #(
-      *) $as_unset $ac_var ;;
+      BASH_ARGV | BASH_SOURCE) eval $ac_var= ;; #(
+      *) { eval $ac_var=; unset $ac_var;} ;;
       esac ;;
     esac
   done
@@ -22075,8 +19174,8 @@ echo "$as_me: WARNING: Cache variable $ac_var contains a newline." >&2;} ;;
   (set) 2>&1 |
     case $as_nl`(ac_space=' '; set) 2>&1` in #(
     *${as_nl}ac_space=\ *)
-      # `set' does not quote correctly, so add quotes (double-quote
-      # substitution turns \\\\ into \\, and sed turns \\ into \).
+      # `set' does not quote correctly, so add quotes: double-quote
+      # substitution turns \\\\ into \\, and sed turns \\ into \.
       sed -n \
 	"s/'/'\\\\''/g;
 	  s/^\\([_$as_cr_alnum]*_cv_[_$as_cr_alnum]*\\)=\\(.*\\)/\\1='\\2'/p"
@@ -22092,19 +19191,30 @@ echo "$as_me: WARNING: Cache variable $ac_var contains a newline." >&2;} ;;
      /^ac_cv_env_/b end
      t clear
      :clear
-     s/^\([^=]*\)=\(.*[{}].*\)$/test "${\1+set}" = set || &/
+     s/^\([^=]*\)=\(.*[{}].*\)$/test ${\1+y} || &/
      t end
      s/^\([^=]*\)=\(.*\)$/\1=${\1=\2}/
      :end' >>confcache
 if diff "$cache_file" confcache >/dev/null 2>&1; then :; else
   if test -w "$cache_file"; then
-    test "x$cache_file" != "x/dev/null" &&
-      { echo "$as_me:$LINENO: updating cache $cache_file" >&5
-echo "$as_me: updating cache $cache_file" >&6;}
-    cat confcache >$cache_file
+    if test "x$cache_file" != "x/dev/null"; then
+      { printf "%s\n" "$as_me:${as_lineno-$LINENO}: updating cache $cache_file" >&5
+printf "%s\n" "$as_me: updating cache $cache_file" >&6;}
+      if test ! -f "$cache_file" || test -h "$cache_file"; then
+	cat confcache >"$cache_file"
+      else
+        case $cache_file in #(
+        */* | ?:*)
+	  mv -f confcache "$cache_file"$$ &&
+	  mv -f "$cache_file"$$ "$cache_file" ;; #(
+        *)
+	  mv -f confcache "$cache_file" ;;
+	esac
+      fi
+    fi
   else
-    { echo "$as_me:$LINENO: not updating unwritable cache $cache_file" >&5
-echo "$as_me: not updating unwritable cache $cache_file" >&6;}
+    { printf "%s\n" "$as_me:${as_lineno-$LINENO}: not updating unwritable cache $cache_file" >&5
+printf "%s\n" "$as_me: not updating unwritable cache $cache_file" >&6;}
   fi
 fi
 rm -f confcache
@@ -22117,14 +19227,15 @@ DEFS=-DHAVE_CONFIG_H
 
 ac_libobjs=
 ac_ltlibobjs=
+U=
 for ac_i in : $LIBOBJS; do test "x$ac_i" = x: && continue
   # 1. Remove the extension, and $U if already installed.
   ac_script='s/\$U\././;s/\.o$//;s/\.obj$//'
-  ac_i=`echo "$ac_i" | sed "$ac_script"`
+  ac_i=`printf "%s\n" "$ac_i" | sed "$ac_script"`
   # 2. Prepend LIBOBJDIR.  When used with automake>=1.10 LIBOBJDIR
   #    will be set to the directory where LIBOBJS objects are built.
-  ac_libobjs="$ac_libobjs \${LIBOBJDIR}$ac_i\$U.$ac_objext"
-  ac_ltlibobjs="$ac_ltlibobjs \${LIBOBJDIR}$ac_i"'$U.lo'
+  as_fn_append ac_libobjs " \${LIBOBJDIR}$ac_i\$U.$ac_objext"
+  as_fn_append ac_ltlibobjs " \${LIBOBJDIR}$ac_i"'$U.lo'
 done
 LIBOBJS=$ac_libobjs
 
@@ -22132,12 +19243,14 @@ LTLIBOBJS=$ac_ltlibobjs
 
 
 
-: ${CONFIG_STATUS=./config.status}
+: "${CONFIG_STATUS=./config.status}"
+ac_write_fail=0
 ac_clean_files_save=$ac_clean_files
 ac_clean_files="$ac_clean_files $CONFIG_STATUS"
-{ echo "$as_me:$LINENO: creating $CONFIG_STATUS" >&5
-echo "$as_me: creating $CONFIG_STATUS" >&6;}
-cat >$CONFIG_STATUS <<_ACEOF
+{ printf "%s\n" "$as_me:${as_lineno-$LINENO}: creating $CONFIG_STATUS" >&5
+printf "%s\n" "$as_me: creating $CONFIG_STATUS" >&6;}
+as_write_fail=0
+cat >$CONFIG_STATUS <<_ASEOF || as_write_fail=1
 #! $SHELL
 # Generated by $as_me.
 # Run this file to recreate the current configuration.
@@ -22147,81 +19260,99 @@ cat >$CONFIG_STATUS <<_ACEOF
 debug=false
 ac_cs_recheck=false
 ac_cs_silent=false
+
 SHELL=\${CONFIG_SHELL-$SHELL}
-_ACEOF
-
-cat >>$CONFIG_STATUS <<\_ACEOF
-## --------------------- ##
-## M4sh Initialization.  ##
-## --------------------- ##
+export SHELL
+_ASEOF
+cat >>$CONFIG_STATUS <<\_ASEOF || as_write_fail=1
+## -------------------- ##
+## M4sh Initialization. ##
+## -------------------- ##
 
 # Be more Bourne compatible
 DUALCASE=1; export DUALCASE # for MKS sh
-if test -n "${ZSH_VERSION+set}" && (emulate sh) >/dev/null 2>&1; then
+as_nop=:
+if test ${ZSH_VERSION+y} && (emulate sh) >/dev/null 2>&1
+then :
   emulate sh
   NULLCMD=:
-  # Zsh 3.x and 4.x performs word splitting on ${1+"$@"}, which
+  # Pre-4.2 versions of Zsh do word splitting on ${1+"$@"}, which
   # is contrary to our usage.  Disable this feature.
   alias -g '${1+"$@"}'='"$@"'
   setopt NO_GLOB_SUBST
-else
-  case `(set -o) 2>/dev/null` in
-  *posix*) set -o posix ;;
+else $as_nop
+  case `(set -o) 2>/dev/null` in #(
+  *posix*) :
+    set -o posix ;; #(
+  *) :
+     ;;
 esac
-
 fi
 
 
 
+# Reset variables that may have inherited troublesome values from
+# the environment.
 
-# PATH needs CR
-# Avoid depending upon Character Ranges.
-as_cr_letters='abcdefghijklmnopqrstuvwxyz'
-as_cr_LETTERS='ABCDEFGHIJKLMNOPQRSTUVWXYZ'
-as_cr_Letters=$as_cr_letters$as_cr_LETTERS
-as_cr_digits='0123456789'
-as_cr_alnum=$as_cr_Letters$as_cr_digits
-
-# The user is always right.
-if test "${PATH_SEPARATOR+set}" != set; then
-  echo "#! /bin/sh" >conf$$.sh
-  echo  "exit 0"   >>conf$$.sh
-  chmod +x conf$$.sh
-  if (PATH="/nonexistent;."; conf$$.sh) >/dev/null 2>&1; then
-    PATH_SEPARATOR=';'
-  else
-    PATH_SEPARATOR=:
-  fi
-  rm -f conf$$.sh
-fi
-
-# Support unset when possible.
-if ( (MAIL=60; unset MAIL) || exit) >/dev/null 2>&1; then
-  as_unset=unset
-else
-  as_unset=false
-fi
-
-
-# IFS
-# We need space, tab and new line, in precisely that order.  Quoting is
-# there to prevent editors from complaining about space-tab.
-# (If _AS_PATH_WALK were called with IFS unset, it would disable word
-# splitting by setting IFS to empty value.)
+# IFS needs to be set, to space, tab, and newline, in precisely that order.
+# (If _AS_PATH_WALK were called with IFS unset, it would have the
+# side effect of setting IFS to empty, thus disabling word splitting.)
+# Quoting is to prevent editors from complaining about space-tab.
 as_nl='
 '
+export as_nl
 IFS=" ""	$as_nl"
 
+PS1='$ '
+PS2='> '
+PS4='+ '
+
+# Ensure predictable behavior from utilities with locale-dependent output.
+LC_ALL=C
+export LC_ALL
+LANGUAGE=C
+export LANGUAGE
+
+# We cannot yet rely on "unset" to work, but we need these variables
+# to be unset--not just set to an empty or harmless value--now, to
+# avoid bugs in old shells (e.g. pre-3.0 UWIN ksh).  This construct
+# also avoids known problems related to "unset" and subshell syntax
+# in other old shells (e.g. bash 2.01 and pdksh 5.2.14).
+for as_var in BASH_ENV ENV MAIL MAILPATH CDPATH
+do eval test \${$as_var+y} \
+  && ( (unset $as_var) || exit 1) >/dev/null 2>&1 && unset $as_var || :
+done
+
+# Ensure that fds 0, 1, and 2 are open.
+if (exec 3>&0) 2>/dev/null; then :; else exec 0</dev/null; fi
+if (exec 3>&1) 2>/dev/null; then :; else exec 1>/dev/null; fi
+if (exec 3>&2)            ; then :; else exec 2>/dev/null; fi
+
+# The user is always right.
+if ${PATH_SEPARATOR+false} :; then
+  PATH_SEPARATOR=:
+  (PATH='/bin;/bin'; FPATH=$PATH; sh -c :) >/dev/null 2>&1 && {
+    (PATH='/bin:/bin'; FPATH=$PATH; sh -c :) >/dev/null 2>&1 ||
+      PATH_SEPARATOR=';'
+  }
+fi
+
+
 # Find who we are.  Look in the path if we contain no directory separator.
-case $0 in
+as_myself=
+case $0 in #((
   *[\\/]* ) as_myself=$0 ;;
   *) as_save_IFS=$IFS; IFS=$PATH_SEPARATOR
 for as_dir in $PATH
 do
   IFS=$as_save_IFS
-  test -z "$as_dir" && as_dir=.
-  test -r "$as_dir/$0" && as_myself=$as_dir/$0 && break
-done
+  case $as_dir in #(((
+    '') as_dir=./ ;;
+    */) ;;
+    *) as_dir=$as_dir/ ;;
+  esac
+    test -r "$as_dir$0" && as_myself=$as_dir$0 && break
+  done
 IFS=$as_save_IFS
 
      ;;
@@ -22232,32 +19363,95 @@ if test "x$as_myself" = x; then
   as_myself=$0
 fi
 if test ! -f "$as_myself"; then
-  echo "$as_myself: error: cannot find myself; rerun with an absolute file name" >&2
-  { (exit 1); exit 1; }
+  printf "%s\n" "$as_myself: error: cannot find myself; rerun with an absolute file name" >&2
+  exit 1
 fi
 
-# Work around bugs in pre-3.0 UWIN ksh.
-for as_var in ENV MAIL MAILPATH
-do ($as_unset $as_var) >/dev/null 2>&1 && $as_unset $as_var
-done
-PS1='$ '
-PS2='> '
-PS4='+ '
 
-# NLS nuisances.
-for as_var in \
-  LANG LANGUAGE LC_ADDRESS LC_ALL LC_COLLATE LC_CTYPE LC_IDENTIFICATION \
-  LC_MEASUREMENT LC_MESSAGES LC_MONETARY LC_NAME LC_NUMERIC LC_PAPER \
-  LC_TELEPHONE LC_TIME
-do
-  if (set +x; test -z "`(eval $as_var=C; export $as_var) 2>&1`"); then
-    eval $as_var=C; export $as_var
-  else
-    ($as_unset $as_var) >/dev/null 2>&1 && $as_unset $as_var
+
+# as_fn_error STATUS ERROR [LINENO LOG_FD]
+# ----------------------------------------
+# Output "`basename $0`: error: ERROR" to stderr. If LINENO and LOG_FD are
+# provided, also output the error to LOG_FD, referencing LINENO. Then exit the
+# script with STATUS, using 1 if that was 0.
+as_fn_error ()
+{
+  as_status=$1; test $as_status -eq 0 && as_status=1
+  if test "$4"; then
+    as_lineno=${as_lineno-"$3"} as_lineno_stack=as_lineno_stack=$as_lineno_stack
+    printf "%s\n" "$as_me:${as_lineno-$LINENO}: error: $2" >&$4
   fi
-done
+  printf "%s\n" "$as_me: error: $2" >&2
+  as_fn_exit $as_status
+} # as_fn_error
+
+
+
+# as_fn_set_status STATUS
+# -----------------------
+# Set $? to STATUS, without forking.
+as_fn_set_status ()
+{
+  return $1
+} # as_fn_set_status
+
+# as_fn_exit STATUS
+# -----------------
+# Exit the shell with STATUS, even in a "trap 0" or "set -e" context.
+as_fn_exit ()
+{
+  set +e
+  as_fn_set_status $1
+  exit $1
+} # as_fn_exit
+
+# as_fn_unset VAR
+# ---------------
+# Portably unset VAR.
+as_fn_unset ()
+{
+  { eval $1=; unset $1;}
+}
+as_unset=as_fn_unset
+
+# as_fn_append VAR VALUE
+# ----------------------
+# Append the text in VALUE to the end of the definition contained in VAR. Take
+# advantage of any shell optimizations that allow amortized linear growth over
+# repeated appends, instead of the typical quadratic growth present in naive
+# implementations.
+if (eval "as_var=1; as_var+=2; test x\$as_var = x12") 2>/dev/null
+then :
+  eval 'as_fn_append ()
+  {
+    eval $1+=\$2
+  }'
+else $as_nop
+  as_fn_append ()
+  {
+    eval $1=\$$1\$2
+  }
+fi # as_fn_append
+
+# as_fn_arith ARG...
+# ------------------
+# Perform arithmetic evaluation on the ARGs, and store the result in the
+# global $as_val. Take advantage of shells that can avoid forks. The arguments
+# must be portable across $(()) and expr.
+if (eval "test \$(( 1 + 1 )) = 2") 2>/dev/null
+then :
+  eval 'as_fn_arith ()
+  {
+    as_val=$(( $* ))
+  }'
+else $as_nop
+  as_fn_arith ()
+  {
+    as_val=`expr "$@" || test $? -eq 1`
+  }
+fi # as_fn_arith
+
 
-# Required to use basename.
 if expr a : '\(a\)' >/dev/null 2>&1 &&
    test "X`expr 00001 : '.*\(...\)'`" = X001; then
   as_expr=expr
@@ -22271,13 +19465,17 @@ else
   as_basename=false
 fi
 
+if (as_dir=`dirname -- /` && test "X$as_dir" = X/) >/dev/null 2>&1; then
+  as_dirname=dirname
+else
+  as_dirname=false
+fi
 
-# Name of the executable.
 as_me=`$as_basename -- "$0" ||
 $as_expr X/"$0" : '.*/\([^/][^/]*\)/*$' \| \
 	 X"$0" : 'X\(//\)$' \| \
 	 X"$0" : 'X\(/\)' \| . 2>/dev/null ||
-echo X/"$0" |
+printf "%s\n" X/"$0" |
     sed '/^.*\/\([^/][^/]*\)\/*$/{
 	    s//\1/
 	    q
@@ -22292,131 +19490,128 @@ echo X/"$0" |
 	  }
 	  s/.*/./; q'`
 
-# CDPATH.
-$as_unset CDPATH
+# Avoid depending upon Character Ranges.
+as_cr_letters='abcdefghijklmnopqrstuvwxyz'
+as_cr_LETTERS='ABCDEFGHIJKLMNOPQRSTUVWXYZ'
+as_cr_Letters=$as_cr_letters$as_cr_LETTERS
+as_cr_digits='0123456789'
+as_cr_alnum=$as_cr_Letters$as_cr_digits
 
 
-
-  as_lineno_1=$LINENO
-  as_lineno_2=$LINENO
-  test "x$as_lineno_1" != "x$as_lineno_2" &&
-  test "x`expr $as_lineno_1 + 1`" = "x$as_lineno_2" || {
-
-  # Create $as_me.lineno as a copy of $as_myself, but with $LINENO
-  # uniformly replaced by the line number.  The first 'sed' inserts a
-  # line-number line after each line using $LINENO; the second 'sed'
-  # does the real work.  The second script uses 'N' to pair each
-  # line-number line with the line containing $LINENO, and appends
-  # trailing '-' during substitution so that $LINENO is not a special
-  # case at line end.
-  # (Raja R Harinath suggested sed '=', and Paul Eggert wrote the
-  # scripts with optimization help from Paolo Bonzini.  Blame Lee
-  # E. McMahon (1931-1989) for sed's syntax.  :-)
-  sed -n '
-    p
-    /[$]LINENO/=
-  ' <$as_myself |
-    sed '
-      s/[$]LINENO.*/&-/
-      t lineno
-      b
-      :lineno
-      N
-      :loop
-      s/[$]LINENO\([^'$as_cr_alnum'_].*\n\)\(.*\)/\2\1\2/
-      t loop
-      s/-\n.*//
-    ' >$as_me.lineno &&
-  chmod +x "$as_me.lineno" ||
-    { echo "$as_me: error: cannot create $as_me.lineno; rerun with a POSIX shell" >&2
-   { (exit 1); exit 1; }; }
-
-  # Don't try to exec as it changes $[0], causing all sort of problems
-  # (the dirname of $[0] is not the place where we might find the
-  # original and so on.  Autoconf is especially sensitive to this).
-  . "./$as_me.lineno"
-  # Exit status is that of the last command.
-  exit
-}
-
-
-if (as_dir=`dirname -- /` && test "X$as_dir" = X/) >/dev/null 2>&1; then
-  as_dirname=dirname
-else
-  as_dirname=false
-fi
-
+# Determine whether it's possible to make 'echo' print without a newline.
+# These variables are no longer used directly by Autoconf, but are AC_SUBSTed
+# for compatibility with existing Makefiles.
 ECHO_C= ECHO_N= ECHO_T=
-case `echo -n x` in
+case `echo -n x` in #(((((
 -n*)
-  case `echo 'x\c'` in
+  case `echo 'xy\c'` in
   *c*) ECHO_T='	';;	# ECHO_T is single tab character.
-  *)   ECHO_C='\c';;
+  xy)  ECHO_C='\c';;
+  *)   echo `echo ksh88 bug on AIX 6.1` > /dev/null
+       ECHO_T='	';;
   esac;;
 *)
   ECHO_N='-n';;
 esac
 
-if expr a : '\(a\)' >/dev/null 2>&1 &&
-   test "X`expr 00001 : '.*\(...\)'`" = X001; then
-  as_expr=expr
-else
-  as_expr=false
-fi
+# For backward compatibility with old third-party macros, we provide
+# the shell variables $as_echo and $as_echo_n.  New code should use
+# AS_ECHO(["message"]) and AS_ECHO_N(["message"]), respectively.
+as_echo='printf %s\n'
+as_echo_n='printf %s'
 
 rm -f conf$$ conf$$.exe conf$$.file
 if test -d conf$$.dir; then
   rm -f conf$$.dir/conf$$.file
 else
   rm -f conf$$.dir
-  mkdir conf$$.dir
+  mkdir conf$$.dir 2>/dev/null
 fi
-echo >conf$$.file
-if ln -s conf$$.file conf$$ 2>/dev/null; then
-  as_ln_s='ln -s'
-  # ... but there are two gotchas:
-  # 1) On MSYS, both `ln -s file dir' and `ln file dir' fail.
-  # 2) DJGPP < 2.04 has no symlinks; `ln -s' creates a wrapper executable.
-  # In both cases, we have to default to `cp -p'.
-  ln -s conf$$.file conf$$.dir 2>/dev/null && test ! -f conf$$.exe ||
-    as_ln_s='cp -p'
-elif ln conf$$.file conf$$ 2>/dev/null; then
-  as_ln_s=ln
+if (echo >conf$$.file) 2>/dev/null; then
+  if ln -s conf$$.file conf$$ 2>/dev/null; then
+    as_ln_s='ln -s'
+    # ... but there are two gotchas:
+    # 1) On MSYS, both `ln -s file dir' and `ln file dir' fail.
+    # 2) DJGPP < 2.04 has no symlinks; `ln -s' creates a wrapper executable.
+    # In both cases, we have to default to `cp -pR'.
+    ln -s conf$$.file conf$$.dir 2>/dev/null && test ! -f conf$$.exe ||
+      as_ln_s='cp -pR'
+  elif ln conf$$.file conf$$ 2>/dev/null; then
+    as_ln_s=ln
+  else
+    as_ln_s='cp -pR'
+  fi
 else
-  as_ln_s='cp -p'
+  as_ln_s='cp -pR'
 fi
 rm -f conf$$ conf$$.exe conf$$.dir/conf$$.file conf$$.file
 rmdir conf$$.dir 2>/dev/null
 
+
+# as_fn_mkdir_p
+# -------------
+# Create "$as_dir" as a directory, including parents if necessary.
+as_fn_mkdir_p ()
+{
+
+  case $as_dir in #(
+  -*) as_dir=./$as_dir;;
+  esac
+  test -d "$as_dir" || eval $as_mkdir_p || {
+    as_dirs=
+    while :; do
+      case $as_dir in #(
+      *\'*) as_qdir=`printf "%s\n" "$as_dir" | sed "s/'/'\\\\\\\\''/g"`;; #'(
+      *) as_qdir=$as_dir;;
+      esac
+      as_dirs="'$as_qdir' $as_dirs"
+      as_dir=`$as_dirname -- "$as_dir" ||
+$as_expr X"$as_dir" : 'X\(.*[^/]\)//*[^/][^/]*/*$' \| \
+	 X"$as_dir" : 'X\(//\)[^/]' \| \
+	 X"$as_dir" : 'X\(//\)$' \| \
+	 X"$as_dir" : 'X\(/\)' \| . 2>/dev/null ||
+printf "%s\n" X"$as_dir" |
+    sed '/^X\(.*[^/]\)\/\/*[^/][^/]*\/*$/{
+	    s//\1/
+	    q
+	  }
+	  /^X\(\/\/\)[^/].*/{
+	    s//\1/
+	    q
+	  }
+	  /^X\(\/\/\)$/{
+	    s//\1/
+	    q
+	  }
+	  /^X\(\/\).*/{
+	    s//\1/
+	    q
+	  }
+	  s/.*/./; q'`
+      test -d "$as_dir" && break
+    done
+    test -z "$as_dirs" || eval "mkdir $as_dirs"
+  } || test -d "$as_dir" || as_fn_error $? "cannot create directory $as_dir"
+
+
+} # as_fn_mkdir_p
 if mkdir -p . 2>/dev/null; then
-  as_mkdir_p=:
+  as_mkdir_p='mkdir -p "$as_dir"'
 else
   test -d ./-p && rmdir ./-p
   as_mkdir_p=false
 fi
 
-if test -x / >/dev/null 2>&1; then
-  as_test_x='test -x'
-else
-  if ls -dL / >/dev/null 2>&1; then
-    as_ls_L_option=L
-  else
-    as_ls_L_option=
-  fi
-  as_test_x='
-    eval sh -c '\''
-      if test -d "$1"; then
-        test -d "$1/.";
-      else
-	case $1 in
-        -*)set "./$1";;
-	esac;
-	case `ls -ld'$as_ls_L_option' "$1" 2>/dev/null` in
-	???[sx]*):;;*)false;;esac;fi
-    '\'' sh
-  '
-fi
-as_executable_p=$as_test_x
+
+# as_fn_executable_p FILE
+# -----------------------
+# Test if FILE is an executable regular file.
+as_fn_executable_p ()
+{
+  test -f "$1" && test -x "$1"
+} # as_fn_executable_p
+as_test_x='test -x'
+as_executable_p=as_fn_executable_p
 
 # Sed expression to map a string onto a valid CPP name.
 as_tr_cpp="eval sed 'y%*$as_cr_letters%P$as_cr_LETTERS%;s%[^_$as_cr_alnum]%_%g'"
@@ -22426,13 +19621,19 @@ as_tr_sh="eval sed 'y%*+%pp%;s%[^_$as_cr_alnum]%_%g'"
 
 
 exec 6>&1
+## ----------------------------------- ##
+## Main body of $CONFIG_STATUS script. ##
+## ----------------------------------- ##
+_ASEOF
+test $as_write_fail = 0 && chmod +x $CONFIG_STATUS || ac_write_fail=1
 
-# Save the log message, to keep $[0] and so on meaningful, and to
+cat >>$CONFIG_STATUS <<\_ACEOF || ac_write_fail=1
+# Save the log message, to keep $0 and so on meaningful, and to
 # report actual input values of CONFIG_FILES etc. instead of their
 # values after options handling.
 ac_log="
 This file was extended by $as_me, which was
-generated by GNU Autoconf 2.61.  Invocation command line was
+generated by GNU Autoconf 2.71.  Invocation command line was
 
   CONFIG_FILES    = $CONFIG_FILES
   CONFIG_HEADERS  = $CONFIG_HEADERS
@@ -22445,7 +19646,16 @@ on `(hostname || uname -n) 2>/dev/null | sed 1q`
 
 _ACEOF
 
-cat >>$CONFIG_STATUS <<_ACEOF
+case $ac_config_files in *"
+"*) set x $ac_config_files; shift; ac_config_files=$*;;
+esac
+
+case $ac_config_headers in *"
+"*) set x $ac_config_headers; shift; ac_config_headers=$*;;
+esac
+
+
+cat >>$CONFIG_STATUS <<_ACEOF || ac_write_fail=1
 # Files that config.status was made for.
 config_files="$ac_config_files"
 config_headers="$ac_config_headers"
@@ -22454,22 +19664,25 @@ config_commands="$ac_config_commands"
 
 _ACEOF
 
-cat >>$CONFIG_STATUS <<\_ACEOF
+cat >>$CONFIG_STATUS <<\_ACEOF || ac_write_fail=1
 ac_cs_usage="\
-\`$as_me' instantiates files from templates according to the
-current configuration.
+\`$as_me' instantiates files and other configuration actions
+from templates according to the current configuration.  Unless the files
+and actions are specified as TAGs, all are instantiated by default.
 
-Usage: $0 [OPTIONS] [FILE]...
+Usage: $0 [OPTION]... [TAG]...
 
   -h, --help       print this help, then exit
   -V, --version    print version number and configuration settings, then exit
-  -q, --quiet      do not print progress messages
+      --config     print configuration, then exit
+  -q, --quiet, --silent
+                   do not print progress messages
   -d, --debug      don't remove temporary files
       --recheck    update $as_me by reconfiguring in the same conditions
-  --file=FILE[:TEMPLATE]
-		   instantiate the configuration file FILE
-  --header=FILE[:TEMPLATE]
-		   instantiate the configuration header FILE
+      --file=FILE[:TEMPLATE]
+                   instantiate the configuration file FILE
+      --header=FILE[:TEMPLATE]
+                   instantiate the configuration header FILE
 
 Configuration files:
 $config_files
@@ -22483,16 +19696,19 @@ $config_links
 Configuration commands:
 $config_commands
 
-Report bugs to <bug-autoconf@gnu.org>."
+Report bugs to the package provider."
 
 _ACEOF
-cat >>$CONFIG_STATUS <<_ACEOF
+ac_cs_config=`printf "%s\n" "$ac_configure_args" | sed "$ac_safe_unquote"`
+ac_cs_config_escaped=`printf "%s\n" "$ac_cs_config" | sed "s/^ //; s/'/'\\\\\\\\''/g"`
+cat >>$CONFIG_STATUS <<_ACEOF || ac_write_fail=1
+ac_cs_config='$ac_cs_config_escaped'
 ac_cs_version="\\
 config.status
-configured by $0, generated by GNU Autoconf 2.61,
-  with options \\"`echo "$ac_configure_args" | sed 's/^ //; s/[\\""\`\$]/\\\\&/g'`\\"
+configured by $0, generated by GNU Autoconf 2.71,
+  with options \\"\$ac_cs_config\\"
 
-Copyright (C) 2006 Free Software Foundation, Inc.
+Copyright (C) 2021 Free Software Foundation, Inc.
 This config.status script is free software; the Free Software Foundation
 gives unlimited permission to copy, distribute and modify it."
 
@@ -22500,20 +19716,25 @@ ac_pwd='$ac_pwd'
 srcdir='$srcdir'
 INSTALL='$INSTALL'
 MKDIR_P='$MKDIR_P'
+test -n "\$AWK" || AWK=awk
 _ACEOF
 
-cat >>$CONFIG_STATUS <<\_ACEOF
-# If no file are specified by the user, then we need to provide default
-# value.  By we need to know if files were specified by the user.
+cat >>$CONFIG_STATUS <<\_ACEOF || ac_write_fail=1
+# The default lists apply if the user does not specify any file.
 ac_need_defaults=:
 while test $# != 0
 do
   case $1 in
-  --*=*)
+  --*=?*)
     ac_option=`expr "X$1" : 'X\([^=]*\)='`
     ac_optarg=`expr "X$1" : 'X[^=]*=\(.*\)'`
     ac_shift=:
     ;;
+  --*=)
+    ac_option=`expr "X$1" : 'X\([^=]*\)='`
+    ac_optarg=
+    ac_shift=:
+    ;;
   *)
     ac_option=$1
     ac_optarg=$2
@@ -22526,34 +19747,41 @@ do
   -recheck | --recheck | --rechec | --reche | --rech | --rec | --re | --r)
     ac_cs_recheck=: ;;
   --version | --versio | --versi | --vers | --ver | --ve | --v | -V )
-    echo "$ac_cs_version"; exit ;;
+    printf "%s\n" "$ac_cs_version"; exit ;;
+  --config | --confi | --conf | --con | --co | --c )
+    printf "%s\n" "$ac_cs_config"; exit ;;
   --debug | --debu | --deb | --de | --d | -d )
     debug=: ;;
   --file | --fil | --fi | --f )
     $ac_shift
-    CONFIG_FILES="$CONFIG_FILES $ac_optarg"
+    case $ac_optarg in
+    *\'*) ac_optarg=`printf "%s\n" "$ac_optarg" | sed "s/'/'\\\\\\\\''/g"` ;;
+    '') as_fn_error $? "missing file argument" ;;
+    esac
+    as_fn_append CONFIG_FILES " '$ac_optarg'"
     ac_need_defaults=false;;
   --header | --heade | --head | --hea )
     $ac_shift
-    CONFIG_HEADERS="$CONFIG_HEADERS $ac_optarg"
+    case $ac_optarg in
+    *\'*) ac_optarg=`printf "%s\n" "$ac_optarg" | sed "s/'/'\\\\\\\\''/g"` ;;
+    esac
+    as_fn_append CONFIG_HEADERS " '$ac_optarg'"
     ac_need_defaults=false;;
   --he | --h)
     # Conflict between --help and --header
-    { echo "$as_me: error: ambiguous option: $1
-Try \`$0 --help' for more information." >&2
-   { (exit 1); exit 1; }; };;
+    as_fn_error $? "ambiguous option: \`$1'
+Try \`$0 --help' for more information.";;
   --help | --hel | -h )
-    echo "$ac_cs_usage"; exit ;;
+    printf "%s\n" "$ac_cs_usage"; exit ;;
   -q | -quiet | --quiet | --quie | --qui | --qu | --q \
   | -silent | --silent | --silen | --sile | --sil | --si | --s)
     ac_cs_silent=: ;;
 
   # This is an error.
-  -*) { echo "$as_me: error: unrecognized option: $1
-Try \`$0 --help' for more information." >&2
-   { (exit 1); exit 1; }; } ;;
+  -*) as_fn_error $? "unrecognized option: \`$1'
+Try \`$0 --help' for more information." ;;
 
-  *) ac_config_targets="$ac_config_targets $1"
+  *) as_fn_append ac_config_targets " $1"
      ac_need_defaults=false ;;
 
   esac
@@ -22568,27 +19796,29 @@ if $ac_cs_silent; then
 fi
 
 _ACEOF
-cat >>$CONFIG_STATUS <<_ACEOF
+cat >>$CONFIG_STATUS <<_ACEOF || ac_write_fail=1
 if \$ac_cs_recheck; then
-  echo "running CONFIG_SHELL=$SHELL $SHELL $0 "$ac_configure_args \$ac_configure_extra_args " --no-create --no-recursion" >&6
-  CONFIG_SHELL=$SHELL
+  set X $SHELL '$0' $ac_configure_args \$ac_configure_extra_args --no-create --no-recursion
+  shift
+  \printf "%s\n" "running CONFIG_SHELL=$SHELL \$*" >&6
+  CONFIG_SHELL='$SHELL'
   export CONFIG_SHELL
-  exec $SHELL "$0"$ac_configure_args \$ac_configure_extra_args --no-create --no-recursion
+  exec "\$@"
 fi
 
 _ACEOF
-cat >>$CONFIG_STATUS <<\_ACEOF
+cat >>$CONFIG_STATUS <<\_ACEOF || ac_write_fail=1
 exec 5>>config.log
 {
   echo
   sed 'h;s/./-/g;s/^.../## /;s/...$/ ##/;p;x;p;x' <<_ASBOX
 ## Running $as_me. ##
 _ASBOX
-  echo "$ac_log"
+  printf "%s\n" "$ac_log"
 } >&5
 
 _ACEOF
-cat >>$CONFIG_STATUS <<_ACEOF
+cat >>$CONFIG_STATUS <<_ACEOF || ac_write_fail=1
 #
 # INIT-COMMANDS
 #
@@ -22608,7 +19838,7 @@ fi
 
 _ACEOF
 
-cat >>$CONFIG_STATUS <<\_ACEOF
+cat >>$CONFIG_STATUS <<\_ACEOF || ac_write_fail=1
 
 # Handling of arguments.
 for ac_config_target in $ac_config_targets
@@ -23029,9 +20259,7 @@ do
     "${makefiles}") CONFIG_FILES="$CONFIG_FILES ${makefiles}" ;;
     "default") CONFIG_COMMANDS="$CONFIG_COMMANDS default" ;;
 
-  *) { { echo "$as_me:$LINENO: error: invalid argument: $ac_config_target" >&5
-echo "$as_me: error: invalid argument: $ac_config_target" >&2;}
-   { (exit 1); exit 1; }; };;
+  *) as_fn_error $? "invalid argument: \`$ac_config_target'" "$LINENO" 5;;
   esac
 done
 
@@ -23041,10 +20269,10 @@ done
 # We use the long form for the default assignment because of an extremely
 # bizarre bug on SunOS 4.1.3.
 if $ac_need_defaults; then
-  test "${CONFIG_FILES+set}" = set || CONFIG_FILES=$config_files
-  test "${CONFIG_HEADERS+set}" = set || CONFIG_HEADERS=$config_headers
-  test "${CONFIG_LINKS+set}" = set || CONFIG_LINKS=$config_links
-  test "${CONFIG_COMMANDS+set}" = set || CONFIG_COMMANDS=$config_commands
+  test ${CONFIG_FILES+y} || CONFIG_FILES=$config_files
+  test ${CONFIG_HEADERS+y} || CONFIG_HEADERS=$config_headers
+  test ${CONFIG_LINKS+y} || CONFIG_LINKS=$config_links
+  test ${CONFIG_COMMANDS+y} || CONFIG_COMMANDS=$config_commands
 fi
 
 # Have a temporary directory for convenience.  Make it in the build tree
@@ -23055,266 +20283,302 @@ fi
 # after its creation but before its name has been assigned to `$tmp'.
 $debug ||
 {
-  tmp=
+  tmp= ac_tmp=
   trap 'exit_status=$?
-  { test -z "$tmp" || test ! -d "$tmp" || rm -fr "$tmp"; } && exit $exit_status
+  : "${ac_tmp:=$tmp}"
+  { test ! -d "$ac_tmp" || rm -fr "$ac_tmp"; } && exit $exit_status
 ' 0
-  trap '{ (exit 1); exit 1; }' 1 2 13 15
+  trap 'as_fn_exit 1' 1 2 13 15
 }
 # Create a (secure) tmp directory for tmp files.
 
 {
   tmp=`(umask 077 && mktemp -d "./confXXXXXX") 2>/dev/null` &&
-  test -n "$tmp" && test -d "$tmp"
+  test -d "$tmp"
 }  ||
 {
   tmp=./conf$$-$RANDOM
   (umask 077 && mkdir "$tmp")
-} ||
-{
-   echo "$me: cannot create a temporary directory in ." >&2
-   { (exit 1); exit 1; }
-}
+} || as_fn_error $? "cannot create a temporary directory in ." "$LINENO" 5
+ac_tmp=$tmp
 
-#
-# Set up the sed scripts for CONFIG_FILES section.
-#
-
-# No need to generate the scripts if there are no CONFIG_FILES.
-# This happens for instance when ./config.status config.h
+# Set up the scripts for CONFIG_FILES section.
+# No need to generate them if there are no CONFIG_FILES.
+# This happens for instance with `./config.status config.h'.
 if test -n "$CONFIG_FILES"; then
 
-_ACEOF
-
-
-
-ac_delim='%!_!# '
-for ac_last_try in false false false false false :; do
-  cat >conf$$subs.sed <<_ACEOF
-SHELL!$SHELL$ac_delim
-PATH_SEPARATOR!$PATH_SEPARATOR$ac_delim
-PACKAGE_NAME!$PACKAGE_NAME$ac_delim
-PACKAGE_TARNAME!$PACKAGE_TARNAME$ac_delim
-PACKAGE_VERSION!$PACKAGE_VERSION$ac_delim
-PACKAGE_STRING!$PACKAGE_STRING$ac_delim
-PACKAGE_BUGREPORT!$PACKAGE_BUGREPORT$ac_delim
-exec_prefix!$exec_prefix$ac_delim
-prefix!$prefix$ac_delim
-program_transform_name!$program_transform_name$ac_delim
-bindir!$bindir$ac_delim
-sbindir!$sbindir$ac_delim
-libexecdir!$libexecdir$ac_delim
-datarootdir!$datarootdir$ac_delim
-datadir!$datadir$ac_delim
-sysconfdir!$sysconfdir$ac_delim
-sharedstatedir!$sharedstatedir$ac_delim
-localstatedir!$localstatedir$ac_delim
-includedir!$includedir$ac_delim
-oldincludedir!$oldincludedir$ac_delim
-docdir!$docdir$ac_delim
-infodir!$infodir$ac_delim
-htmldir!$htmldir$ac_delim
-dvidir!$dvidir$ac_delim
-pdfdir!$pdfdir$ac_delim
-psdir!$psdir$ac_delim
-libdir!$libdir$ac_delim
-localedir!$localedir$ac_delim
-mandir!$mandir$ac_delim
-DEFS!$DEFS$ac_delim
-ECHO_C!$ECHO_C$ac_delim
-ECHO_N!$ECHO_N$ac_delim
-ECHO_T!$ECHO_T$ac_delim
-LIBS!$LIBS$ac_delim
-build_alias!$build_alias$ac_delim
-host_alias!$host_alias$ac_delim
-target_alias!$target_alias$ac_delim
-build!$build$ac_delim
-build_cpu!$build_cpu$ac_delim
-build_vendor!$build_vendor$ac_delim
-build_os!$build_os$ac_delim
-host!$host$ac_delim
-host_cpu!$host_cpu$ac_delim
-host_vendor!$host_vendor$ac_delim
-host_os!$host_os$ac_delim
-target!$target$ac_delim
-target_cpu!$target_cpu$ac_delim
-target_vendor!$target_vendor$ac_delim
-target_os!$target_os$ac_delim
-ARCH!$ARCH$ac_delim
-CXX!$CXX$ac_delim
-CXXFLAGS!$CXXFLAGS$ac_delim
-LDFLAGS!$LDFLAGS$ac_delim
-CPPFLAGS!$CPPFLAGS$ac_delim
-ac_ct_CXX!$ac_ct_CXX$ac_delim
-EXEEXT!$EXEEXT$ac_delim
-OBJEXT!$OBJEXT$ac_delim
-CC!$CC$ac_delim
-CFLAGS!$CFLAGS$ac_delim
-ac_ct_CC!$ac_ct_CC$ac_delim
-AR!$AR$ac_delim
-M4!$M4$ac_delim
-INSTALL_PROGRAM!$INSTALL_PROGRAM$ac_delim
-INSTALL_SCRIPT!$INSTALL_SCRIPT$ac_delim
-INSTALL_DATA!$INSTALL_DATA$ac_delim
-CPP!$CPP$ac_delim
-GREP!$GREP$ac_delim
-EGREP!$EGREP$ac_delim
-CXXCPP!$CXXCPP$ac_delim
-CXX_FLAGS_NO_TEMPLATE_INST!$CXX_FLAGS_NO_TEMPLATE_INST$ac_delim
-IMPLICIT_TEMPLATE_INSTANTIATION!$IMPLICIT_TEMPLATE_INSTANTIATION$ac_delim
-DEPENDS_ON_TEMPLATE_IMPLEMENTATION!$DEPENDS_ON_TEMPLATE_IMPLEMENTATION$ac_delim
-DEVELOPER_MAKEFILE!$DEVELOPER_MAKEFILE$ac_delim
-SAMRAI_OPTIONAL_LIBS!$SAMRAI_OPTIONAL_LIBS$ac_delim
-SAMRAI_ENABLE_SPECIAL!$SAMRAI_ENABLE_SPECIAL$ac_delim
-F77!$F77$ac_delim
-FFLAGS!$FFLAGS$ac_delim
-F77LIBFLAGS!$F77LIBFLAGS$ac_delim
-ac_ct_F77!$ac_ct_F77$ac_delim
-FLIBS!$FLIBS$ac_delim
-XMKMF!$XMKMF$ac_delim
-X_CFLAGS!$X_CFLAGS$ac_delim
-X_PRE_LIBS!$X_PRE_LIBS$ac_delim
-X_LIBS!$X_LIBS$ac_delim
-X_EXTRA_LIBS!$X_EXTRA_LIBS$ac_delim
-DOXYGEN_BIN!$DOXYGEN_BIN$ac_delim
-HAVE_DOT!$HAVE_DOT$ac_delim
-DOT_PATH!$DOT_PATH$ac_delim
-dox_output_dir!$dox_output_dir$ac_delim
-SAMRAI_PERL!$SAMRAI_PERL$ac_delim
-MPICC!$MPICC$ac_delim
-MPIINCLUDE!$MPIINCLUDE$ac_delim
-MPILIBDIRS!$MPILIBDIRS$ac_delim
-MPILIBS!$MPILIBS$ac_delim
-MPIFLAGS!$MPIFLAGS$ac_delim
-SUNDIALS_C_FILES!$SUNDIALS_C_FILES$ac_delim
-PARALLEL_RUN_BIN!$PARALLEL_RUN_BIN$ac_delim
-_ACEOF
-
-  if test `sed -n "s/.*$ac_delim\$/X/p" conf$$subs.sed | grep -c X` = 97; then
-    break
-  elif $ac_last_try; then
-    { { echo "$as_me:$LINENO: error: could not make $CONFIG_STATUS" >&5
-echo "$as_me: error: could not make $CONFIG_STATUS" >&2;}
-   { (exit 1); exit 1; }; }
-  else
-    ac_delim="$ac_delim!$ac_delim _$ac_delim!! "
-  fi
-done
 
-ac_eof=`sed -n '/^CEOF[0-9]*$/s/CEOF/0/p' conf$$subs.sed`
-if test -n "$ac_eof"; then
-  ac_eof=`echo "$ac_eof" | sort -nru | sed 1q`
-  ac_eof=`expr $ac_eof + 1`
+ac_cr=`echo X | tr X '\015'`
+# On cygwin, bash can eat \r inside `` if the user requested igncr.
+# But we know of no other shell where ac_cr would be empty at this
+# point, so we can use a bashism as a fallback.
+if test "x$ac_cr" = x; then
+  eval ac_cr=\$\'\\r\'
+fi
+ac_cs_awk_cr=`$AWK 'BEGIN { print "a\rb" }' </dev/null 2>/dev/null`
+if test "$ac_cs_awk_cr" = "a${ac_cr}b"; then
+  ac_cs_awk_cr='\\r'
+else
+  ac_cs_awk_cr=$ac_cr
 fi
 
-cat >>$CONFIG_STATUS <<_ACEOF
-cat >"\$tmp/subs-1.sed" <<\CEOF$ac_eof
-/@[a-zA-Z_][a-zA-Z_0-9]*@/!b
-_ACEOF
-sed '
-s/[,\\&]/\\&/g; s/@/@|#_!!_#|/g
-s/^/s,@/; s/!/@,|#_!!_#|/
-:n
-t n
-s/'"$ac_delim"'$/,g/; t
-s/$/\\/; p
-N; s/^.*\n//; s/[,\\&]/\\&/g; s/@/@|#_!!_#|/g; b n
-' >>$CONFIG_STATUS <conf$$subs.sed
-rm -f conf$$subs.sed
-cat >>$CONFIG_STATUS <<_ACEOF
-CEOF$ac_eof
+echo 'BEGIN {' >"$ac_tmp/subs1.awk" &&
 _ACEOF
 
 
+{
+  echo "cat >conf$$subs.awk <<_ACEOF" &&
+  echo "$ac_subst_vars" | sed 's/.*/&!$&$ac_delim/' &&
+  echo "_ACEOF"
+} >conf$$subs.sh ||
+  as_fn_error $? "could not make $CONFIG_STATUS" "$LINENO" 5
+ac_delim_num=`echo "$ac_subst_vars" | grep -c '^'`
 ac_delim='%!_!# '
 for ac_last_try in false false false false false :; do
-  cat >conf$$subs.sed <<_ACEOF
-TEST_NPROCS!$TEST_NPROCS$ac_delim
-INSTDIR!$INSTDIR$ac_delim
-SAMRAI_TARGET!$SAMRAI_TARGET$ac_delim
-TAU_INCLUDE!$TAU_INCLUDE$ac_delim
-XARGS!$XARGS$ac_delim
-F77_FLAGS!$F77_FLAGS$ac_delim
-C_FLAGS!$C_FLAGS$ac_delim
-CXX_FLAGS!$CXX_FLAGS$ac_delim
-LD_FLAGS!$LD_FLAGS$ac_delim
-CXXLD_FLAGS!$CXXLD_FLAGS$ac_delim
-LIB_SUFFIX!$LIB_SUFFIX$ac_delim
-SRCDIR_COMPILE_PREFIX!$SRCDIR_COMPILE_PREFIX$ac_delim
-INC_PATH!$INC_PATH$ac_delim
-LIB_PATH!$LIB_PATH$ac_delim
-LIB_NAME!$LIB_NAME$ac_delim
-LIBOBJS!$LIBOBJS$ac_delim
-LTLIBOBJS!$LTLIBOBJS$ac_delim
-_ACEOF
+  . ./conf$$subs.sh ||
+    as_fn_error $? "could not make $CONFIG_STATUS" "$LINENO" 5
 
-  if test `sed -n "s/.*$ac_delim\$/X/p" conf$$subs.sed | grep -c X` = 17; then
+  ac_delim_n=`sed -n "s/.*$ac_delim\$/X/p" conf$$subs.awk | grep -c X`
+  if test $ac_delim_n = $ac_delim_num; then
     break
   elif $ac_last_try; then
-    { { echo "$as_me:$LINENO: error: could not make $CONFIG_STATUS" >&5
-echo "$as_me: error: could not make $CONFIG_STATUS" >&2;}
-   { (exit 1); exit 1; }; }
+    as_fn_error $? "could not make $CONFIG_STATUS" "$LINENO" 5
   else
     ac_delim="$ac_delim!$ac_delim _$ac_delim!! "
   fi
 done
+rm -f conf$$subs.sh
 
-ac_eof=`sed -n '/^CEOF[0-9]*$/s/CEOF/0/p' conf$$subs.sed`
-if test -n "$ac_eof"; then
-  ac_eof=`echo "$ac_eof" | sort -nru | sed 1q`
-  ac_eof=`expr $ac_eof + 1`
-fi
+cat >>$CONFIG_STATUS <<_ACEOF || ac_write_fail=1
+cat >>"\$ac_tmp/subs1.awk" <<\\_ACAWK &&
+_ACEOF
+sed -n '
+h
+s/^/S["/; s/!.*/"]=/
+p
+g
+s/^[^!]*!//
+:repl
+t repl
+s/'"$ac_delim"'$//
+t delim
+:nl
+h
+s/\(.\{148\}\)..*/\1/
+t more1
+s/["\\]/\\&/g; s/^/"/; s/$/\\n"\\/
+p
+n
+b repl
+:more1
+s/["\\]/\\&/g; s/^/"/; s/$/"\\/
+p
+g
+s/.\{148\}//
+t nl
+:delim
+h
+s/\(.\{148\}\)..*/\1/
+t more2
+s/["\\]/\\&/g; s/^/"/; s/$/"/
+p
+b
+:more2
+s/["\\]/\\&/g; s/^/"/; s/$/"\\/
+p
+g
+s/.\{148\}//
+t delim
+' <conf$$subs.awk | sed '
+/^[^""]/{
+  N
+  s/\n//
+}
+' >>$CONFIG_STATUS || ac_write_fail=1
+rm -f conf$$subs.awk
+cat >>$CONFIG_STATUS <<_ACEOF || ac_write_fail=1
+_ACAWK
+cat >>"\$ac_tmp/subs1.awk" <<_ACAWK &&
+  for (key in S) S_is_set[key] = 1
+  FS = ""
+
+}
+{
+  line = $ 0
+  nfields = split(line, field, "@")
+  substed = 0
+  len = length(field[1])
+  for (i = 2; i < nfields; i++) {
+    key = field[i]
+    keylen = length(key)
+    if (S_is_set[key]) {
+      value = S[key]
+      line = substr(line, 1, len) "" value "" substr(line, len + keylen + 3)
+      len += length(value) + length(field[++i])
+      substed = 1
+    } else
+      len += 1 + keylen
+  }
 
-cat >>$CONFIG_STATUS <<_ACEOF
-cat >"\$tmp/subs-2.sed" <<\CEOF$ac_eof
-/@[a-zA-Z_][a-zA-Z_0-9]*@/!b end
+  print line
+}
+
+_ACAWK
 _ACEOF
-sed '
-s/[,\\&]/\\&/g; s/@/@|#_!!_#|/g
-s/^/s,@/; s/!/@,|#_!!_#|/
-:n
-t n
-s/'"$ac_delim"'$/,g/; t
-s/$/\\/; p
-N; s/^.*\n//; s/[,\\&]/\\&/g; s/@/@|#_!!_#|/g; b n
-' >>$CONFIG_STATUS <conf$$subs.sed
-rm -f conf$$subs.sed
-cat >>$CONFIG_STATUS <<_ACEOF
-:end
-s/|#_!!_#|//g
-CEOF$ac_eof
+cat >>$CONFIG_STATUS <<\_ACEOF || ac_write_fail=1
+if sed "s/$ac_cr//" < /dev/null > /dev/null 2>&1; then
+  sed "s/$ac_cr\$//; s/$ac_cr/$ac_cs_awk_cr/g"
+else
+  cat
+fi < "$ac_tmp/subs1.awk" > "$ac_tmp/subs.awk" \
+  || as_fn_error $? "could not setup config files machinery" "$LINENO" 5
 _ACEOF
 
-
-# VPATH may cause trouble with some makes, so we remove $(srcdir),
-# ${srcdir} and @srcdir@ from VPATH if srcdir is ".", strip leading and
+# VPATH may cause trouble with some makes, so we remove sole $(srcdir),
+# ${srcdir} and @srcdir@ entries from VPATH if srcdir is ".", strip leading and
 # trailing colons and then remove the whole line if VPATH becomes empty
 # (actually we leave an empty line to preserve line numbers).
 if test "x$srcdir" = x.; then
-  ac_vpsub='/^[	 ]*VPATH[	 ]*=/{
-s/:*\$(srcdir):*/:/
-s/:*\${srcdir}:*/:/
-s/:*@srcdir@:*/:/
-s/^\([^=]*=[	 ]*\):*/\1/
+  ac_vpsub='/^[	 ]*VPATH[	 ]*=[	 ]*/{
+h
+s///
+s/^/:/
+s/[	 ]*$/:/
+s/:\$(srcdir):/:/g
+s/:\${srcdir}:/:/g
+s/:@srcdir@:/:/g
+s/^:*//
 s/:*$//
+x
+s/\(=[	 ]*\).*/\1/
+G
+s/\n//
 s/^[^=]*=[	 ]*$//
 }'
 fi
 
-cat >>$CONFIG_STATUS <<\_ACEOF
+cat >>$CONFIG_STATUS <<\_ACEOF || ac_write_fail=1
 fi # test -n "$CONFIG_FILES"
 
+# Set up the scripts for CONFIG_HEADERS section.
+# No need to generate them if there are no CONFIG_HEADERS.
+# This happens for instance with `./config.status Makefile'.
+if test -n "$CONFIG_HEADERS"; then
+cat >"$ac_tmp/defines.awk" <<\_ACAWK ||
+BEGIN {
+_ACEOF
 
-for ac_tag in  :F $CONFIG_FILES  :H $CONFIG_HEADERS  :L $CONFIG_LINKS  :C $CONFIG_COMMANDS
+# Transform confdefs.h into an awk script `defines.awk', embedded as
+# here-document in config.status, that substitutes the proper values into
+# config.h.in to produce config.h.
+
+# Create a delimiter string that does not exist in confdefs.h, to ease
+# handling of long lines.
+ac_delim='%!_!# '
+for ac_last_try in false false :; do
+  ac_tt=`sed -n "/$ac_delim/p" confdefs.h`
+  if test -z "$ac_tt"; then
+    break
+  elif $ac_last_try; then
+    as_fn_error $? "could not make $CONFIG_HEADERS" "$LINENO" 5
+  else
+    ac_delim="$ac_delim!$ac_delim _$ac_delim!! "
+  fi
+done
+
+# For the awk script, D is an array of macro values keyed by name,
+# likewise P contains macro parameters if any.  Preserve backslash
+# newline sequences.
+
+ac_word_re=[_$as_cr_Letters][_$as_cr_alnum]*
+sed -n '
+s/.\{148\}/&'"$ac_delim"'/g
+t rset
+:rset
+s/^[	 ]*#[	 ]*define[	 ][	 ]*/ /
+t def
+d
+:def
+s/\\$//
+t bsnl
+s/["\\]/\\&/g
+s/^ \('"$ac_word_re"'\)\(([^()]*)\)[	 ]*\(.*\)/P["\1"]="\2"\
+D["\1"]=" \3"/p
+s/^ \('"$ac_word_re"'\)[	 ]*\(.*\)/D["\1"]=" \2"/p
+d
+:bsnl
+s/["\\]/\\&/g
+s/^ \('"$ac_word_re"'\)\(([^()]*)\)[	 ]*\(.*\)/P["\1"]="\2"\
+D["\1"]=" \3\\\\\\n"\\/p
+t cont
+s/^ \('"$ac_word_re"'\)[	 ]*\(.*\)/D["\1"]=" \2\\\\\\n"\\/p
+t cont
+d
+:cont
+n
+s/.\{148\}/&'"$ac_delim"'/g
+t clear
+:clear
+s/\\$//
+t bsnlc
+s/["\\]/\\&/g; s/^/"/; s/$/"/p
+d
+:bsnlc
+s/["\\]/\\&/g; s/^/"/; s/$/\\\\\\n"\\/p
+b cont
+' <confdefs.h | sed '
+s/'"$ac_delim"'/"\\\
+"/g' >>$CONFIG_STATUS || ac_write_fail=1
+
+cat >>$CONFIG_STATUS <<_ACEOF || ac_write_fail=1
+  for (key in D) D_is_set[key] = 1
+  FS = ""
+}
+/^[\t ]*#[\t ]*(define|undef)[\t ]+$ac_word_re([\t (]|\$)/ {
+  line = \$ 0
+  split(line, arg, " ")
+  if (arg[1] == "#") {
+    defundef = arg[2]
+    mac1 = arg[3]
+  } else {
+    defundef = substr(arg[1], 2)
+    mac1 = arg[2]
+  }
+  split(mac1, mac2, "(") #)
+  macro = mac2[1]
+  prefix = substr(line, 1, index(line, defundef) - 1)
+  if (D_is_set[macro]) {
+    # Preserve the white space surrounding the "#".
+    print prefix "define", macro P[macro] D[macro]
+    next
+  } else {
+    # Replace #undef with comments.  This is necessary, for example,
+    # in the case of _POSIX_SOURCE, which is predefined and required
+    # on some systems where configure will not decide to define it.
+    if (defundef == "undef") {
+      print "/*", prefix defundef, macro, "*/"
+      next
+    }
+  }
+}
+{ print }
+_ACAWK
+_ACEOF
+cat >>$CONFIG_STATUS <<\_ACEOF || ac_write_fail=1
+  as_fn_error $? "could not setup config headers machinery" "$LINENO" 5
+fi # test -n "$CONFIG_HEADERS"
+
+
+eval set X "  :F $CONFIG_FILES  :H $CONFIG_HEADERS  :L $CONFIG_LINKS  :C $CONFIG_COMMANDS"
+shift
+for ac_tag
 do
   case $ac_tag in
   :[FHLC]) ac_mode=$ac_tag; continue;;
   esac
   case $ac_mode$ac_tag in
   :[FHL]*:*);;
-  :L* | :C*:*) { { echo "$as_me:$LINENO: error: Invalid tag $ac_tag." >&5
-echo "$as_me: error: Invalid tag $ac_tag." >&2;}
-   { (exit 1); exit 1; }; };;
+  :L* | :C*:*) as_fn_error $? "invalid tag \`$ac_tag'" "$LINENO" 5;;
   :[FH]-) ac_tag=-:-;;
   :[FH]*) ac_tag=$ac_tag:$ac_tag.in;;
   esac
@@ -23333,7 +20597,7 @@ echo "$as_me: error: Invalid tag $ac_tag." >&2;}
     for ac_f
     do
       case $ac_f in
-      -) ac_f="$tmp/stdin";;
+      -) ac_f="$ac_tmp/stdin";;
       *) # Look for the file first in the build tree, then in the source tree
 	 # (if the path is not absolute).  The absolute path cannot be DOS-style,
 	 # because $ac_f cannot contain `:'.
@@ -23342,26 +20606,34 @@ echo "$as_me: error: Invalid tag $ac_tag." >&2;}
 	   [\\/$]*) false;;
 	   *) test -f "$srcdir/$ac_f" && ac_f="$srcdir/$ac_f";;
 	   esac ||
-	   { { echo "$as_me:$LINENO: error: cannot find input file: $ac_f" >&5
-echo "$as_me: error: cannot find input file: $ac_f" >&2;}
-   { (exit 1); exit 1; }; };;
+	   as_fn_error 1 "cannot find input file: \`$ac_f'" "$LINENO" 5;;
       esac
-      ac_file_inputs="$ac_file_inputs $ac_f"
+      case $ac_f in *\'*) ac_f=`printf "%s\n" "$ac_f" | sed "s/'/'\\\\\\\\''/g"`;; esac
+      as_fn_append ac_file_inputs " '$ac_f'"
     done
 
     # Let's still pretend it is `configure' which instantiates (i.e., don't
     # use $as_me), people would be surprised to read:
     #    /* config.h.  Generated by config.status.  */
-    configure_input="Generated from "`IFS=:
-	  echo $* | sed 's|^[^:]*/||;s|:[^:]*/|, |g'`" by configure."
+    configure_input='Generated from '`
+	  printf "%s\n" "$*" | sed 's|^[^:]*/||;s|:[^:]*/|, |g'
+	`' by configure.'
     if test x"$ac_file" != x-; then
       configure_input="$ac_file.  $configure_input"
-      { echo "$as_me:$LINENO: creating $ac_file" >&5
-echo "$as_me: creating $ac_file" >&6;}
+      { printf "%s\n" "$as_me:${as_lineno-$LINENO}: creating $ac_file" >&5
+printf "%s\n" "$as_me: creating $ac_file" >&6;}
     fi
+    # Neutralize special characters interpreted by sed in replacement strings.
+    case $configure_input in #(
+    *\&* | *\|* | *\\* )
+       ac_sed_conf_input=`printf "%s\n" "$configure_input" |
+       sed 's/[\\\\&|]/\\\\&/g'`;; #(
+    *) ac_sed_conf_input=$configure_input;;
+    esac
 
     case $ac_tag in
-    *:-:* | *:-) cat >"$tmp/stdin";;
+    *:-:* | *:-) cat >"$ac_tmp/stdin" \
+      || as_fn_error $? "could not create $ac_file" "$LINENO" 5 ;;
     esac
     ;;
   esac
@@ -23371,7 +20643,7 @@ $as_expr X"$ac_file" : 'X\(.*[^/]\)//*[^/][^/]*/*$' \| \
 	 X"$ac_file" : 'X\(//\)[^/]' \| \
 	 X"$ac_file" : 'X\(//\)$' \| \
 	 X"$ac_file" : 'X\(/\)' \| . 2>/dev/null ||
-echo X"$ac_file" |
+printf "%s\n" X"$ac_file" |
     sed '/^X\(.*[^/]\)\/\/*[^/][^/]*\/*$/{
 	    s//\1/
 	    q
@@ -23389,55 +20661,15 @@ echo X"$ac_file" |
 	    q
 	  }
 	  s/.*/./; q'`
-  { as_dir="$ac_dir"
-  case $as_dir in #(
-  -*) as_dir=./$as_dir;;
-  esac
-  test -d "$as_dir" || { $as_mkdir_p && mkdir -p "$as_dir"; } || {
-    as_dirs=
-    while :; do
-      case $as_dir in #(
-      *\'*) as_qdir=`echo "$as_dir" | sed "s/'/'\\\\\\\\''/g"`;; #(
-      *) as_qdir=$as_dir;;
-      esac
-      as_dirs="'$as_qdir' $as_dirs"
-      as_dir=`$as_dirname -- "$as_dir" ||
-$as_expr X"$as_dir" : 'X\(.*[^/]\)//*[^/][^/]*/*$' \| \
-	 X"$as_dir" : 'X\(//\)[^/]' \| \
-	 X"$as_dir" : 'X\(//\)$' \| \
-	 X"$as_dir" : 'X\(/\)' \| . 2>/dev/null ||
-echo X"$as_dir" |
-    sed '/^X\(.*[^/]\)\/\/*[^/][^/]*\/*$/{
-	    s//\1/
-	    q
-	  }
-	  /^X\(\/\/\)[^/].*/{
-	    s//\1/
-	    q
-	  }
-	  /^X\(\/\/\)$/{
-	    s//\1/
-	    q
-	  }
-	  /^X\(\/\).*/{
-	    s//\1/
-	    q
-	  }
-	  s/.*/./; q'`
-      test -d "$as_dir" && break
-    done
-    test -z "$as_dirs" || eval "mkdir $as_dirs"
-  } || test -d "$as_dir" || { { echo "$as_me:$LINENO: error: cannot create directory $as_dir" >&5
-echo "$as_me: error: cannot create directory $as_dir" >&2;}
-   { (exit 1); exit 1; }; }; }
+  as_dir="$ac_dir"; as_fn_mkdir_p
   ac_builddir=.
 
 case "$ac_dir" in
 .) ac_dir_suffix= ac_top_builddir_sub=. ac_top_build_prefix= ;;
 *)
-  ac_dir_suffix=/`echo "$ac_dir" | sed 's,^\.[\\/],,'`
+  ac_dir_suffix=/`printf "%s\n" "$ac_dir" | sed 's|^\.[\\/]||'`
   # A ".." for each directory in $ac_dir_suffix.
-  ac_top_builddir_sub=`echo "$ac_dir_suffix" | sed 's,/[^\\/]*,/..,g;s,/,,'`
+  ac_top_builddir_sub=`printf "%s\n" "$ac_dir_suffix" | sed 's|/[^\\/]*|/..|g;s|/||'`
   case $ac_top_builddir_sub in
   "") ac_top_builddir_sub=. ac_top_build_prefix= ;;
   *)  ac_top_build_prefix=$ac_top_builddir_sub/ ;;
@@ -23482,12 +20714,12 @@ ac_abs_srcdir=$ac_abs_top_srcdir$ac_dir_suffix
   esac
 _ACEOF
 
-cat >>$CONFIG_STATUS <<\_ACEOF
+cat >>$CONFIG_STATUS <<\_ACEOF || ac_write_fail=1
 # If the template does not know about datarootdir, expand it.
 # FIXME: This hack should be removed a few years after 2.60.
 ac_datarootdir_hack=; ac_datarootdir_seen=
-
-case `sed -n '/datarootdir/ {
+ac_sed_dataroot='
+/datarootdir/ {
   p
   q
 }
@@ -23495,36 +20727,37 @@ case `sed -n '/datarootdir/ {
 /@docdir@/p
 /@infodir@/p
 /@localedir@/p
-/@mandir@/p
-' $ac_file_inputs` in
+/@mandir@/p'
+case `eval "sed -n \"\$ac_sed_dataroot\" $ac_file_inputs"` in
 *datarootdir*) ac_datarootdir_seen=yes;;
 *@datadir@*|*@docdir@*|*@infodir@*|*@localedir@*|*@mandir@*)
-  { echo "$as_me:$LINENO: WARNING: $ac_file_inputs seems to ignore the --datarootdir setting" >&5
-echo "$as_me: WARNING: $ac_file_inputs seems to ignore the --datarootdir setting" >&2;}
+  { printf "%s\n" "$as_me:${as_lineno-$LINENO}: WARNING: $ac_file_inputs seems to ignore the --datarootdir setting" >&5
+printf "%s\n" "$as_me: WARNING: $ac_file_inputs seems to ignore the --datarootdir setting" >&2;}
 _ACEOF
-cat >>$CONFIG_STATUS <<_ACEOF
+cat >>$CONFIG_STATUS <<_ACEOF || ac_write_fail=1
   ac_datarootdir_hack='
   s&@datadir@&$datadir&g
   s&@docdir@&$docdir&g
   s&@infodir@&$infodir&g
   s&@localedir@&$localedir&g
   s&@mandir@&$mandir&g
-    s&\\\${datarootdir}&$datarootdir&g' ;;
+  s&\\\${datarootdir}&$datarootdir&g' ;;
 esac
 _ACEOF
 
 # Neutralize VPATH when `$srcdir' = `.'.
 # Shell code in configure.ac might set extrasub.
 # FIXME: do we really want to maintain this feature?
-cat >>$CONFIG_STATUS <<_ACEOF
-  sed "$ac_vpsub
+cat >>$CONFIG_STATUS <<_ACEOF || ac_write_fail=1
+ac_sed_extra="$ac_vpsub
 $extrasub
 _ACEOF
-cat >>$CONFIG_STATUS <<\_ACEOF
+cat >>$CONFIG_STATUS <<\_ACEOF || ac_write_fail=1
 :t
 /@[a-zA-Z_][a-zA-Z_0-9]*@/!b
-s&@configure_input@&$configure_input&;t t
+s|@configure_input@|$ac_sed_conf_input|;t t
 s&@top_builddir@&$ac_top_builddir_sub&;t t
+s&@top_build_prefix@&$ac_top_build_prefix&;t t
 s&@srcdir@&$ac_srcdir&;t t
 s&@abs_srcdir@&$ac_abs_srcdir&;t t
 s&@top_srcdir@&$ac_top_srcdir&;t t
@@ -23535,149 +20768,84 @@ s&@abs_top_builddir@&$ac_abs_top_builddir&;t t
 s&@INSTALL@&$ac_INSTALL&;t t
 s&@MKDIR_P@&$ac_MKDIR_P&;t t
 $ac_datarootdir_hack
-" $ac_file_inputs | sed -f "$tmp/subs-1.sed" | sed -f "$tmp/subs-2.sed" >$tmp/out
+"
+eval sed \"\$ac_sed_extra\" "$ac_file_inputs" | $AWK -f "$ac_tmp/subs.awk" \
+  >$ac_tmp/out || as_fn_error $? "could not create $ac_file" "$LINENO" 5
 
 test -z "$ac_datarootdir_hack$ac_datarootdir_seen" &&
-  { ac_out=`sed -n '/\${datarootdir}/p' "$tmp/out"`; test -n "$ac_out"; } &&
-  { ac_out=`sed -n '/^[	 ]*datarootdir[	 ]*:*=/p' "$tmp/out"`; test -z "$ac_out"; } &&
-  { echo "$as_me:$LINENO: WARNING: $ac_file contains a reference to the variable \`datarootdir'
-which seems to be undefined.  Please make sure it is defined." >&5
-echo "$as_me: WARNING: $ac_file contains a reference to the variable \`datarootdir'
-which seems to be undefined.  Please make sure it is defined." >&2;}
+  { ac_out=`sed -n '/\${datarootdir}/p' "$ac_tmp/out"`; test -n "$ac_out"; } &&
+  { ac_out=`sed -n '/^[	 ]*datarootdir[	 ]*:*=/p' \
+      "$ac_tmp/out"`; test -z "$ac_out"; } &&
+  { printf "%s\n" "$as_me:${as_lineno-$LINENO}: WARNING: $ac_file contains a reference to the variable \`datarootdir'
+which seems to be undefined.  Please make sure it is defined" >&5
+printf "%s\n" "$as_me: WARNING: $ac_file contains a reference to the variable \`datarootdir'
+which seems to be undefined.  Please make sure it is defined" >&2;}
 
-  rm -f "$tmp/stdin"
+  rm -f "$ac_tmp/stdin"
   case $ac_file in
-  -) cat "$tmp/out"; rm -f "$tmp/out";;
-  *) rm -f "$ac_file"; mv "$tmp/out" $ac_file;;
-  esac
+  -) cat "$ac_tmp/out" && rm -f "$ac_tmp/out";;
+  *) rm -f "$ac_file" && mv "$ac_tmp/out" "$ac_file";;
+  esac \
+  || as_fn_error $? "could not create $ac_file" "$LINENO" 5
  ;;
   :H)
   #
   # CONFIG_HEADER
   #
-_ACEOF
-
-# Transform confdefs.h into a sed script `conftest.defines', that
-# substitutes the proper values into config.h.in to produce config.h.
-rm -f conftest.defines conftest.tail
-# First, append a space to every undef/define line, to ease matching.
-echo 's/$/ /' >conftest.defines
-# Then, protect against being on the right side of a sed subst, or in
-# an unquoted here document, in config.status.  If some macros were
-# called several times there might be several #defines for the same
-# symbol, which is useless.  But do not sort them, since the last
-# AC_DEFINE must be honored.
-ac_word_re=[_$as_cr_Letters][_$as_cr_alnum]*
-# These sed commands are passed to sed as "A NAME B PARAMS C VALUE D", where
-# NAME is the cpp macro being defined, VALUE is the value it is being given.
-# PARAMS is the parameter list in the macro definition--in most cases, it's
-# just an empty string.
-ac_dA='s,^\\([	 #]*\\)[^	 ]*\\([	 ]*'
-ac_dB='\\)[	 (].*,\\1define\\2'
-ac_dC=' '
-ac_dD=' ,'
-
-uniq confdefs.h |
-  sed -n '
-	t rset
-	:rset
-	s/^[	 ]*#[	 ]*define[	 ][	 ]*//
-	t ok
-	d
-	:ok
-	s/[\\&,]/\\&/g
-	s/^\('"$ac_word_re"'\)\(([^()]*)\)[	 ]*\(.*\)/ '"$ac_dA"'\1'"$ac_dB"'\2'"${ac_dC}"'\3'"$ac_dD"'/p
-	s/^\('"$ac_word_re"'\)[	 ]*\(.*\)/'"$ac_dA"'\1'"$ac_dB$ac_dC"'\2'"$ac_dD"'/p
-  ' >>conftest.defines
-
-# Remove the space that was appended to ease matching.
-# Then replace #undef with comments.  This is necessary, for
-# example, in the case of _POSIX_SOURCE, which is predefined and required
-# on some systems where configure will not decide to define it.
-# (The regexp can be short, since the line contains either #define or #undef.)
-echo 's/ $//
-s,^[	 #]*u.*,/* & */,' >>conftest.defines
-
-# Break up conftest.defines:
-ac_max_sed_lines=50
-
-# First sed command is:	 sed -f defines.sed $ac_file_inputs >"$tmp/out1"
-# Second one is:	 sed -f defines.sed "$tmp/out1" >"$tmp/out2"
-# Third one will be:	 sed -f defines.sed "$tmp/out2" >"$tmp/out1"
-# et cetera.
-ac_in='$ac_file_inputs'
-ac_out='"$tmp/out1"'
-ac_nxt='"$tmp/out2"'
-
-while :
-do
-  # Write a here document:
-    cat >>$CONFIG_STATUS <<_ACEOF
-    # First, check the format of the line:
-    cat >"\$tmp/defines.sed" <<\\CEOF
-/^[	 ]*#[	 ]*undef[	 ][	 ]*$ac_word_re[	 ]*\$/b def
-/^[	 ]*#[	 ]*define[	 ][	 ]*$ac_word_re[(	 ]/b def
-b
-:def
-_ACEOF
-  sed ${ac_max_sed_lines}q conftest.defines >>$CONFIG_STATUS
-  echo 'CEOF
-    sed -f "$tmp/defines.sed"' "$ac_in >$ac_out" >>$CONFIG_STATUS
-  ac_in=$ac_out; ac_out=$ac_nxt; ac_nxt=$ac_in
-  sed 1,${ac_max_sed_lines}d conftest.defines >conftest.tail
-  grep . conftest.tail >/dev/null || break
-  rm -f conftest.defines
-  mv conftest.tail conftest.defines
-done
-rm -f conftest.defines conftest.tail
-
-echo "ac_result=$ac_in" >>$CONFIG_STATUS
-cat >>$CONFIG_STATUS <<\_ACEOF
   if test x"$ac_file" != x-; then
-    echo "/* $configure_input  */" >"$tmp/config.h"
-    cat "$ac_result" >>"$tmp/config.h"
-    if diff $ac_file "$tmp/config.h" >/dev/null 2>&1; then
-      { echo "$as_me:$LINENO: $ac_file is unchanged" >&5
-echo "$as_me: $ac_file is unchanged" >&6;}
+    {
+      printf "%s\n" "/* $configure_input  */" >&1 \
+      && eval '$AWK -f "$ac_tmp/defines.awk"' "$ac_file_inputs"
+    } >"$ac_tmp/config.h" \
+      || as_fn_error $? "could not create $ac_file" "$LINENO" 5
+    if diff "$ac_file" "$ac_tmp/config.h" >/dev/null 2>&1; then
+      { printf "%s\n" "$as_me:${as_lineno-$LINENO}: $ac_file is unchanged" >&5
+printf "%s\n" "$as_me: $ac_file is unchanged" >&6;}
     else
-      rm -f $ac_file
-      mv "$tmp/config.h" $ac_file
+      rm -f "$ac_file"
+      mv "$ac_tmp/config.h" "$ac_file" \
+	|| as_fn_error $? "could not create $ac_file" "$LINENO" 5
     fi
   else
-    echo "/* $configure_input  */"
-    cat "$ac_result"
+    printf "%s\n" "/* $configure_input  */" >&1 \
+      && eval '$AWK -f "$ac_tmp/defines.awk"' "$ac_file_inputs" \
+      || as_fn_error $? "could not create -" "$LINENO" 5
   fi
-  rm -f "$tmp/out12"
  ;;
   :L)
   #
   # CONFIG_LINK
   #
 
-  { echo "$as_me:$LINENO: linking $srcdir/$ac_source to $ac_file" >&5
-echo "$as_me: linking $srcdir/$ac_source to $ac_file" >&6;}
+  if test "$ac_source" = "$ac_file" && test "$srcdir" = '.'; then
+    :
+  else
+    # Prefer the file from the source tree if names are identical.
+    if test "$ac_source" = "$ac_file" || test ! -r "$ac_source"; then
+      ac_source=$srcdir/$ac_source
+    fi
 
-  if test ! -r "$srcdir/$ac_source"; then
-    { { echo "$as_me:$LINENO: error: $srcdir/$ac_source: file not found" >&5
-echo "$as_me: error: $srcdir/$ac_source: file not found" >&2;}
-   { (exit 1); exit 1; }; }
+    { printf "%s\n" "$as_me:${as_lineno-$LINENO}: linking $ac_source to $ac_file" >&5
+printf "%s\n" "$as_me: linking $ac_source to $ac_file" >&6;}
+
+    if test ! -r "$ac_source"; then
+      as_fn_error $? "$ac_source: file not found" "$LINENO" 5
+    fi
+    rm -f "$ac_file"
+
+    # Try a relative symlink, then a hard link, then a copy.
+    case $ac_source in
+    [\\/$]* | ?:[\\/]* ) ac_rel_source=$ac_source ;;
+	*) ac_rel_source=$ac_top_build_prefix$ac_source ;;
+    esac
+    ln -s "$ac_rel_source" "$ac_file" 2>/dev/null ||
+      ln "$ac_source" "$ac_file" 2>/dev/null ||
+      cp -p "$ac_source" "$ac_file" ||
+      as_fn_error $? "cannot link or copy $ac_source to $ac_file" "$LINENO" 5
   fi
-  rm -f "$ac_file"
-
-  # Try a relative symlink, then a hard link, then a copy.
-  case $srcdir in
-  [\\/$]* | ?:[\\/]* ) ac_rel_source=$srcdir/$ac_source ;;
-      *) ac_rel_source=$ac_top_build_prefix$srcdir/$ac_source ;;
-  esac
-  ln -s "$ac_rel_source" "$ac_file" 2>/dev/null ||
-    ln "$srcdir/$ac_source" "$ac_file" 2>/dev/null ||
-    cp -p "$srcdir/$ac_source" "$ac_file" ||
-    { { echo "$as_me:$LINENO: error: cannot link or copy $srcdir/$ac_source to $ac_file" >&5
-echo "$as_me: error: cannot link or copy $srcdir/$ac_source to $ac_file" >&2;}
-   { (exit 1); exit 1; }; }
  ;;
-  :C)  { echo "$as_me:$LINENO: executing $ac_file commands" >&5
-echo "$as_me: executing $ac_file commands" >&6;}
+  :C)  { printf "%s\n" "$as_me:${as_lineno-$LINENO}: executing $ac_file commands" >&5
+printf "%s\n" "$as_me: executing $ac_file commands" >&6;}
  ;;
   esac
 
@@ -23754,11 +20922,13 @@ done
 done # for ac_tag
 
 
-{ (exit 0); exit 0; }
+as_fn_exit 0
 _ACEOF
-chmod +x $CONFIG_STATUS
 ac_clean_files=$ac_clean_files_save
 
+test $ac_write_fail = 0 ||
+  as_fn_error $? "write failure creating $CONFIG_STATUS" "$LINENO" 5
+
 
 # configure is writing to config.log, and then calls config.status.
 # config.status does its own redirection, appending to config.log.
@@ -23778,6 +20948,11 @@ if test "$no_create" != yes; then
   exec 5>>config.log
   # Use ||, not &&, to avoid exiting from the if with $? = 1, which
   # would make configure fail if this is the last instruction.
-  $ac_cs_success || { (exit 1); exit 1; }
+  $ac_cs_success || as_fn_exit 1
 fi
+if test -n "$ac_unrecognized_opts" && test "$enable_option_checking" != no; then
+  { printf "%s\n" "$as_me:${as_lineno-$LINENO}: WARNING: unrecognized options: $ac_unrecognized_opts" >&5
+printf "%s\n" "$as_me: WARNING: unrecognized options: $ac_unrecognized_opts" >&2;}
+fi
+
 
diff --git a/configure.in b/configure.in
index 4036565..e198787 100644
--- a/configure.in
+++ b/configure.in
@@ -7,8 +7,9 @@ dnl Modified:    $LastChangedDate: 2009-06-18 14:43:43 -0700 (Thu, 18 Jun 2009)
 dnl Description: autoconfig configuration file
 dnl
 
-AC_INIT(COPYRIGHT)
-AC_CONFIG_HEADER(include/SAMRAI_config.h:config/SAMRAI_config.h.in)
+AC_INIT
+AC_CONFIG_SRCDIR([COPYRIGHT])
+AC_CONFIG_HEADERS([include/SAMRAI_config.h:config/SAMRAI_config.h.in])
 dnl
 dnl Autoheader stuff
 AH_TOP([
@@ -68,7 +69,7 @@ BTNG_AC_LOG_VAR(CONFIG_SHELL)
 AC_CONFIG_AUX_DIR(config)
 
 # Get system type.
-AC_CANONICAL_SYSTEM
+AC_CANONICAL_TARGET
 BTNG_AC_LOG_VAR(target_cpu target_vendor target_os)
 
 dnl SAMRAI has some code specific for the Solaris operating system.
@@ -197,7 +198,7 @@ BTNG_AC_LOG_VAR(with_CXX CXX CCC, after running compiler search)
 
 dnl
 dnl Set up the C compiler.  This macro must come first and be followed
-dnl AC_ISC_POSIX before other compiler tests are run.  See the autoconfig
+dnl AC_SEARCH_LIBS([strerror],[cposix]) before other compiler tests are run.  See the autoconfig
 dnl manual for details.
 dnl
 
@@ -207,7 +208,7 @@ else
    AC_PROG_CC
 fi
 
-AC_ISC_POSIX
+AC_SEARCH_LIBS([strerror],[cposix])
 
 
 dnl
@@ -620,7 +621,7 @@ your LD_LIBRARY_PATH appropriately and run it.
 done
 
 
-if test "$ac_cv_prog_g77" = "yes"; then
+if test "$ac_cv_f77_compiler_gnu" = "yes"; then
    F77_FLAGS="-Wall -Wimplicit -Wunused $F77_FLAGS"
 else
    case $ARCH in
@@ -869,27 +870,23 @@ dnl
 AC_LANG_PUSH([C++])
 BTNG_TYPE_NAMESPACE
 AC_MSG_CHECKING(type ostringstream)
-AC_TRY_COMPILE([#include STL_SSTREAM_HEADER_FILE
+AC_COMPILE_IFELSE([AC_LANG_PROGRAM([[#include STL_SSTREAM_HEADER_FILE
 #ifndef NAMESPACE_IS_BROKEN
 using namespace std;
 #endif
-], [ostringstream oss; oss << 10;]
-,
-AC_MSG_RESULT(ok),
-AC_MSG_RESULT(broken)
+]], [[ostringstream oss; oss << 10;
+]])],[AC_MSG_RESULT(ok)],[AC_MSG_RESULT(broken)
 AC_DEFINE(OSTRINGSTREAM_TYPE_IS_BROKEN,1,The type ostringstream is broken)
-)
+])
 AC_MSG_CHECKING(type ostrstream)
-AC_TRY_COMPILE([#include STL_SSTREAM_HEADER_FILE
+AC_COMPILE_IFELSE([AC_LANG_PROGRAM([[#include STL_SSTREAM_HEADER_FILE
 #ifndef NAMESPACE_IS_BROKEN
 using namespace std;
 #endif
-], [ostrstream oss; oss << 10;]
-,
-AC_MSG_RESULT(ok),
-AC_MSG_RESULT(broken)
+]], [[ostrstream oss; oss << 10;
+]])],[AC_MSG_RESULT(ok)],[AC_MSG_RESULT(broken)
 AC_DEFINE(OSTRSTREAM_TYPE_IS_BROKEN,1,The type ostrstream is broken)
-)
+])
 AC_LANG_POP([C++])
 
 dnl
@@ -903,11 +900,9 @@ dnl
 dnl Checking for mallinfo
 dnl
 AC_MSG_CHECKING(for mallinfo)
-AC_TRY_COMPILE([#include <malloc.h>], void *x=mallinfo,
-  AC_DEFINE(HAVE_MALLINFO, 1, Define if you have the 'mallinfo' function.)
-  AC_MSG_RESULT(yes),
-  AC_MSG_RESULT(no)
-)
+AC_COMPILE_IFELSE([AC_LANG_PROGRAM([[#include <malloc.h>]], [[void *x=mallinfo]])],[AC_DEFINE(HAVE_MALLINFO, 1, Define if you have the 'mallinfo' function.)
+  AC_MSG_RESULT(yes)],[AC_MSG_RESULT(no)
+])
 
 CASC_CXX_ISNAN
 
@@ -1520,37 +1515,37 @@ define(samrai_typical_example_files,['(' \
 -name '*README*' -o -name '*.C' -o -name '*.h' -o -name '*.depend' -o -name '*.i' -o -name '*.m4' -o -name '*.input' \
 -o -name '*.tri' -o -name '*.gzxml' ')'])
 
-SAMRAI_LINK_FILES([ esyscmd(find examples/boundary      samrai_find_excludes samrai_typical_example_files | sort | sed 's/.*/\0:\0/') ])
-SAMRAI_LINK_FILES([ esyscmd(find examples/communication samrai_find_excludes samrai_typical_example_files | sort | sed 's/.*/\0:\0/') ])
-SAMRAI_LINK_FILES([ esyscmd(find examples/ConvDiff      samrai_find_excludes samrai_typical_example_files | sort | sed 's/.*/\0:\0/') ])
-SAMRAI_LINK_FILES([ esyscmd(find examples/dataops       samrai_find_excludes samrai_typical_example_files | sort | sed 's/.*/\0:\0/') ])
-SAMRAI_LINK_FILES([ esyscmd(find examples/Euler         samrai_find_excludes samrai_typical_example_files | sort | sed 's/.*/\0:\0/') ])
-SAMRAI_LINK_FILES([ esyscmd(find examples/emb_bdry      samrai_find_excludes samrai_typical_example_files | sort | sed 's/.*/\0:\0/') ])
-SAMRAI_LINK_FILES([ esyscmd(find examples/nonlinear     samrai_find_excludes samrai_typical_example_files | sort | sed 's/.*/\0:\0/') ])
-SAMRAI_LINK_FILES([ esyscmd(find examples/hypre_poisson samrai_find_excludes samrai_typical_example_files | sort | sed 's/.*/\0:\0/') ])
-SAMRAI_LINK_FILES([ esyscmd(find examples/FAC           samrai_find_excludes samrai_typical_example_files | sort | sed 's/.*/\0:\0/') ])
-SAMRAI_LINK_FILES([ esyscmd(find examples/LinAdv        samrai_find_excludes samrai_typical_example_files | sort | sed 's/.*/\0:\0/') ])
-SAMRAI_LINK_FILES([ esyscmd(find examples/mblkcomm      samrai_find_excludes samrai_typical_example_files | sort | sed 's/.*/\0:\0/') ])
-SAMRAI_LINK_FILES([ esyscmd(find examples/MblkEuler     samrai_find_excludes samrai_typical_example_files | sort | sed 's/.*/\0:\0/') ])
-SAMRAI_LINK_FILES([ esyscmd(find examples/MblkLinAdv    samrai_find_excludes samrai_typical_example_files | sort | sed 's/.*/\0:\0/') ])
-SAMRAI_LINK_FILES([ esyscmd(find examples/memory        samrai_find_excludes samrai_typical_example_files | sort | sed 's/.*/\0:\0/') ])
-SAMRAI_LINK_FILES([ esyscmd(find examples/sundials      samrai_find_excludes samrai_typical_example_files | sort | sed 's/.*/\0:\0/') ])
-SAMRAI_LINK_FILES([ esyscmd(find examples/patchbdrysum  samrai_find_excludes samrai_typical_example_files | sort | sed 's/.*/\0:\0/') ])
-SAMRAI_LINK_FILES([ esyscmd(find examples/timers        samrai_find_excludes samrai_typical_example_files | sort | sed 's/.*/\0:\0/') ])
+SAMRAI_LINK_FILES([ esyscmd(find examples/boundary      samrai_find_excludes samrai_typical_example_files | sort | gsed 's/.*/\0:\0/') ])
+SAMRAI_LINK_FILES([ esyscmd(find examples/communication samrai_find_excludes samrai_typical_example_files | sort | gsed 's/.*/\0:\0/') ])
+SAMRAI_LINK_FILES([ esyscmd(find examples/ConvDiff      samrai_find_excludes samrai_typical_example_files | sort | gsed 's/.*/\0:\0/') ])
+SAMRAI_LINK_FILES([ esyscmd(find examples/dataops       samrai_find_excludes samrai_typical_example_files | sort | gsed 's/.*/\0:\0/') ])
+SAMRAI_LINK_FILES([ esyscmd(find examples/Euler         samrai_find_excludes samrai_typical_example_files | sort | gsed 's/.*/\0:\0/') ])
+SAMRAI_LINK_FILES([ esyscmd(find examples/emb_bdry      samrai_find_excludes samrai_typical_example_files | sort | gsed 's/.*/\0:\0/') ])
+SAMRAI_LINK_FILES([ esyscmd(find examples/nonlinear     samrai_find_excludes samrai_typical_example_files | sort | gsed 's/.*/\0:\0/') ])
+SAMRAI_LINK_FILES([ esyscmd(find examples/hypre_poisson samrai_find_excludes samrai_typical_example_files | sort | gsed 's/.*/\0:\0/') ])
+SAMRAI_LINK_FILES([ esyscmd(find examples/FAC           samrai_find_excludes samrai_typical_example_files | sort | gsed 's/.*/\0:\0/') ])
+SAMRAI_LINK_FILES([ esyscmd(find examples/LinAdv        samrai_find_excludes samrai_typical_example_files | sort | gsed 's/.*/\0:\0/') ])
+SAMRAI_LINK_FILES([ esyscmd(find examples/mblkcomm      samrai_find_excludes samrai_typical_example_files | sort | gsed 's/.*/\0:\0/') ])
+SAMRAI_LINK_FILES([ esyscmd(find examples/MblkEuler     samrai_find_excludes samrai_typical_example_files | sort | gsed 's/.*/\0:\0/') ])
+SAMRAI_LINK_FILES([ esyscmd(find examples/MblkLinAdv    samrai_find_excludes samrai_typical_example_files | sort | gsed 's/.*/\0:\0/') ])
+SAMRAI_LINK_FILES([ esyscmd(find examples/memory        samrai_find_excludes samrai_typical_example_files | sort | gsed 's/.*/\0:\0/') ])
+SAMRAI_LINK_FILES([ esyscmd(find examples/sundials      samrai_find_excludes samrai_typical_example_files | sort | gsed 's/.*/\0:\0/') ])
+SAMRAI_LINK_FILES([ esyscmd(find examples/patchbdrysum  samrai_find_excludes samrai_typical_example_files | sort | gsed 's/.*/\0:\0/') ])
+SAMRAI_LINK_FILES([ esyscmd(find examples/timers        samrai_find_excludes samrai_typical_example_files | sort | gsed 's/.*/\0:\0/') ])
 
 SAMRAI_LINK_FILES([ source/test/async_comm/default.input:source/test/async_comm/default.input ])
 SAMRAI_LINK_FILES([ source/test/clustering/async_br/front2d.input:source/test/clustering/async_br/front2d.input
                     source/test/clustering/async_br/front3d.input:source/test/clustering/async_br/front3d.input ])
 SAMRAI_LINK_FILES([ source/test/dlbg/front2d.input:source/test/dlbg/front2d.input
                     source/test/dlbg/front3d.input:source/test/dlbg/front3d.input ])
-SAMRAI_LINK_FILES([ esyscmd(find source/test/hypre -name \*.input | sort | sed 's/.*/\0:\0/') ])
+SAMRAI_LINK_FILES([ esyscmd(find source/test/hypre -name \*.input | sort | gsed 's/.*/\0:\0/') ])
 SAMRAI_LINK_FILES([ source/test/FAC/inputs:source/test/FAC/inputs ])
 
 dnl Optionally configure with performance directory if it is included.
 define( [performance_dir_exists], [esyscmd( if test -d performance; then echo -n yes; else echo -n no; fi )])
 m4_if(performance_dir_exists, [yes],
 performance_dir=performance
-SAMRAI_LINK_FILES([ esyscmd(find performance/LinAdv        samrai_find_excludes samrai_typical_example_files 2>/dev/null | sort | sed 's/.*/\0:\0/') ]),
+SAMRAI_LINK_FILES([ esyscmd(find performance/LinAdv        samrai_find_excludes samrai_typical_example_files 2>/dev/null | sort | gsed 's/.*/\0:\0/') ]),
 unset performance_dir
 )
 
@@ -1572,12 +1567,13 @@ $MKDIR_P $subdirs
 
 undefine([performance_dir_exists])
 
-AC_OUTPUT([
+AC_CONFIG_FILES([
 Makefile
 config/Makefile.config config/Makefile.config.install
 docs/Makefile docs/Doxyfile docs/devDoxyfile
 ${makefiles}
-],[
+])
+AC_CONFIG_COMMANDS([default],[
 dnl These are the commands that will execute after the file generations.
 dnl They are run by the generated config.status script.
 
@@ -1630,8 +1626,7 @@ for i in $readme; do
    $INSTALL  $srcdir/$i $i
 done
 
-],
-[
+],[
 
 dnl These commands set the environment for commands executing
 dnl after file generations.
@@ -1641,6 +1636,7 @@ sundials_dir=$sundials_dir
 if test ! `cd $srcdir && pwd -P` = `pwd -P`; then
   source_tree_is_not_compile_tree=1
 fi
-]
 
-)
+
+])
+AC_OUTPUT
diff --git a/examples/ConvDiff/ConvDiff.C b/examples/ConvDiff/ConvDiff.C
index 981aca0..888ef16 100644
--- a/examples/ConvDiff/ConvDiff.C
+++ b/examples/ConvDiff/ConvDiff.C
@@ -1298,6 +1298,8 @@ void ConvDiff::checkBoundaryData(int btype,
            << "     " << num_bad_values << " bad VAL values found for\n"
            << "     boundary type " << btype << " at location " << bloc << endl;
       }
+#else
+      NULL_USE(num_bad_values);
 #endif
 
    }
diff --git a/examples/dataops/node_hierops.C b/examples/dataops/node_hierops.C
index 0355177..2bf69d6 100644
--- a/examples/dataops/node_hierops.C
+++ b/examples/dataops/node_hierops.C
@@ -83,10 +83,10 @@ int main( int argc, char *argv[] ) {
 
       hier::BoxArray<2> coarse_domain(2);
       hier::BoxArray<2> fine_domain(2);
-      coarse_domain(0) = coarse0;
-      coarse_domain(1) = coarse1;
-      fine_domain(0) = fine0;
-      fine_domain(1) = fine1;
+      coarse_domain[0] = coarse0;
+      coarse_domain[1] = coarse1;
+      fine_domain[0] = fine0;
+      fine_domain[1] = fine1;
 
       tbox::Pointer<geom::CartesianGridGeometry<2> > geometry = 
 	 new geom::CartesianGridGeometry<2>("CartesianGeometry", lo, hi, coarse_domain);
diff --git a/examples/memory/main.C b/examples/memory/main.C
index 6018db9..b7d1f6e 100644
--- a/examples/memory/main.C
+++ b/examples/memory/main.C
@@ -31,7 +31,7 @@ int main( int argc, char *argv[] )
 //   TAU_PROFILE_SET_NODE(tbox::SAMRAI_MPI::getRank());
 #endif
 
-   tbox::pout << "\n\nAllocating memory in 1MB chunks until we run out...\n" << endl;
+   tbox::pout << "\n\nAllocating memory in 1MB chunks until we run out...\n" << std::endl;
 
    for (int chunk = 1; chunk < MAX_TEST; chunk++) {
       
@@ -39,7 +39,7 @@ int main( int argc, char *argv[] )
  
       double* array = new double[chunk*doubles_in_one_mb];
       if (!array) {
-         tbox::pout << "\nRan out of memory!!" << endl;
+         tbox::pout << "\nRan out of memory!!" << std::endl;
          break;
       }
 
@@ -53,7 +53,7 @@ int main( int argc, char *argv[] )
          
       tbox::pout << "Successfully allocated " << chunk << "MB chunk (" 
            << doubles_in_one_mb*chunk << " doubles)"
-           << endl;
+           << std::endl;
 
       tbox::MemoryUtilities::printMemoryInfo(tbox::pout);
       tbox::MemoryUtilities::recordMemoryInfo();
diff --git a/generate-patch.sh b/generate-patch.sh
new file mode 100644
index 0000000..6db5cfc
--- /dev/null
+++ b/generate-patch.sh
@@ -0,0 +1,3 @@
+#!/bin/bash
+
+git diff --patch 04e1b44598568c22f99de43abedd2006012335ff HEAD
diff --git a/include/ArrayData.C b/include/ArrayData.C
index ebcbb2a..c6625fd 100644
--- a/include/ArrayData.C
+++ b/include/ArrayData.C
@@ -167,11 +167,7 @@ void ArrayData<DIM,TYPE>::copy(const ArrayData<DIM,TYPE>& src,
 
       TYPE* const dst_ptr = d_array.getPointer();
       const TYPE* const src_ptr = src.d_array.getPointer();
-      const int n = d_offset * d_depth;
-      for (int i = 0; i < n; i++) {
-         copyop(dst_ptr[i], src_ptr[i]);
-      }
-
+      copyop(dst_ptr, src_ptr, d_offset * d_depth);
    } else {
 
       const hier::Box<DIM> copybox = box * d_box * src.d_box;
@@ -303,9 +299,7 @@ void ArrayData<DIM,TYPE>::copyDepth(int dst_depth,
 
      TYPE* const dst_ptr_d = dst_ptr + dst_depth*d_offset;
      const TYPE* const src_ptr_d = src_ptr + src_depth*d_offset;
-      for (int i = 0; i < d_offset; i++) {
-         copyop(dst_ptr_d[i], src_ptr_d[i]);
-      }
+     copyop(dst_ptr_d, src_ptr_d, d_offset);
 
    } else {
 
@@ -364,11 +358,7 @@ void ArrayData<DIM,TYPE>::sum(const ArrayData<DIM,TYPE>& src,
 
       TYPE* const dst_ptr = d_array.getPointer();
       const TYPE* const src_ptr = src.d_array.getPointer();
-      const int n = d_offset * d_depth;
-      for (int i = 0; i < n; i++) {
-         sumop(dst_ptr[i], src_ptr[i]);
-      }
-
+      sumop(dst_ptr, src_ptr, d_offset * d_depth);
    } else {
 
       const hier::Box<DIM> copybox = box * d_box * src.d_box;
diff --git a/include/ArrayData.I b/include/ArrayData.I
index eac5c18..d421672 100644
--- a/include/ArrayData.I
+++ b/include/ArrayData.I
@@ -124,11 +124,11 @@ int ArrayData<DIM,TYPE>::getDataStreamSize(
 template<int DIM, class TYPE> inline
 bool ArrayData<DIM,TYPE>::canEstimateStreamSizeFromBox()
 {
-  if ( ( typeid(TYPE) == typeid(bool) ) |
-       ( typeid(TYPE) == typeid(char) ) |
-       ( typeid(TYPE) == typeid(double) ) |
-       ( typeid(TYPE) == typeid(float) ) |
-       ( typeid(TYPE) == typeid(int) ) |
+  if ( ( typeid(TYPE) == typeid(bool) ) ||
+       ( typeid(TYPE) == typeid(char) ) ||
+       ( typeid(TYPE) == typeid(double) ) ||
+       ( typeid(TYPE) == typeid(float) ) ||
+       ( typeid(TYPE) == typeid(int) ) ||
        ( typeid(TYPE) == typeid(dcomplex) ) ) {
       return true;
    } else {
diff --git a/include/ArrayDataBasicOps.h b/include/ArrayDataBasicOps.h
index 4e38c39..1addd9d 100644
--- a/include/ArrayDataBasicOps.h
+++ b/include/ArrayDataBasicOps.h
@@ -52,7 +52,7 @@ public:
     */ 
    ArrayDataBasicOps();
 
-   ~ArrayDataBasicOps<DIM,TYPE>();
+   ~ArrayDataBasicOps();
 
    /**
     * Set dst = alpha * src, elementwise.
diff --git a/include/ArrayDataIterator.h b/include/ArrayDataIterator.h
index 34b9102..331cf10 100644
--- a/include/ArrayDataIterator.h
+++ b/include/ArrayDataIterator.h
@@ -67,7 +67,7 @@ public:
    /**
     * Destructor for the array data iterator.
     */
-   ~ArrayDataIterator<DIM>();
+   ~ArrayDataIterator();
 
    /**
     * Extract the index corresponding to the iterator position in the box.
diff --git a/include/ArrayDataMiscellaneousOpsReal.h b/include/ArrayDataMiscellaneousOpsReal.h
index 5facf88..1fc76e0 100644
--- a/include/ArrayDataMiscellaneousOpsReal.h
+++ b/include/ArrayDataMiscellaneousOpsReal.h
@@ -52,7 +52,7 @@ public:
     */
    ArrayDataMiscellaneousOpsReal();
 
-   ~ArrayDataMiscellaneousOpsReal<DIM,TYPE>();
+   ~ArrayDataMiscellaneousOpsReal();
 
    /**
     * Return 1 if \f$\|data2_i\| > 0\f$ and \f$data1_i * data2_i \leq 0\f$, for
diff --git a/include/ArrayDataNormOpsComplex.h b/include/ArrayDataNormOpsComplex.h
index 72d2ba9..f99143d 100644
--- a/include/ArrayDataNormOpsComplex.h
+++ b/include/ArrayDataNormOpsComplex.h
@@ -48,7 +48,7 @@ public:
     */
    ArrayDataNormOpsComplex();
 
-   ~ArrayDataNormOpsComplex<DIM>();
+   ~ArrayDataNormOpsComplex();
 
    /**
     * Set destination component to norm of source component.  That is, 
diff --git a/include/ArrayDataNormOpsInteger.h b/include/ArrayDataNormOpsInteger.h
index 22dbde4..4543f66 100644
--- a/include/ArrayDataNormOpsInteger.h
+++ b/include/ArrayDataNormOpsInteger.h
@@ -41,7 +41,7 @@ public:
     */
    ArrayDataNormOpsInteger();
 
-   ~ArrayDataNormOpsInteger<DIM>();
+   ~ArrayDataNormOpsInteger();
 
    /**
     * Set destination component to absolute value of source component.  
diff --git a/include/ArrayDataNormOpsReal.h b/include/ArrayDataNormOpsReal.h
index c5519e4..696024c 100644
--- a/include/ArrayDataNormOpsReal.h
+++ b/include/ArrayDataNormOpsReal.h
@@ -52,7 +52,7 @@ public:
     */
    ArrayDataNormOpsReal();
 
-   ~ArrayDataNormOpsReal<DIM,TYPE>();
+   ~ArrayDataNormOpsReal();
 
    /**
     * Return sum of entries in control volume array.
diff --git a/include/ArrayDataOperationUtilities.C b/include/ArrayDataOperationUtilities.C
index 63f3178..a780177 100644
--- a/include/ArrayDataOperationUtilities.C
+++ b/include/ArrayDataOperationUtilities.C
@@ -104,10 +104,7 @@ void ArrayDataOperationUtilities<DIM, TYPE, OP>::doArrayDataOperationOnBox(
        */
 
       for (int nb = 0; nb < num_d0_blocks; nb++) {
-
-         for (int i0 = 0; i0 < box_w[0]; i0++) {
-            op(dst_ptr[dst_counter+i0], src_ptr[src_counter+i0]); 
-         }
+         op(dst_ptr + dst_counter, src_ptr + src_counter, box_w[0]);
          int dim_jump = 0;
 
          /*
@@ -238,10 +235,7 @@ void ArrayDataOperationUtilities<DIM, TYPE, OP>::doArrayDataBufferOperationOnBox
        */
 
       for (int nb = 0; nb < num_d0_blocks; nb++) {
-
-         for (int i0 = 0; i0 < box_w[0]; i0++) {
-            op(dst_ptr[dst_counter+i0], src_ptr[src_counter+i0]); 
-         }
+         op(dst_ptr + dst_counter, src_ptr + src_counter, box_w[0]);
          int dim_jump = 0;
 
          /*
diff --git a/include/BaseGriddingAlgorithm.h b/include/BaseGriddingAlgorithm.h
index 404c3e6..7d63550 100644
--- a/include/BaseGriddingAlgorithm.h
+++ b/include/BaseGriddingAlgorithm.h
@@ -45,7 +45,7 @@ public:
    /*!
     * @brief Virtual destructor for BaseGriddingAlgorithm<DIM>.
     */
-   virtual ~BaseGriddingAlgorithm<DIM>();
+   virtual ~BaseGriddingAlgorithm();
 
    /*!
     * @brief Construct the coarsest level in a hierarchy (i.e., level 0).
diff --git a/include/BergerRigoutsos.h b/include/BergerRigoutsos.h
index 80133d7..9393860 100644
--- a/include/BergerRigoutsos.h
+++ b/include/BergerRigoutsos.h
@@ -74,7 +74,7 @@ public:
    /*!
     * Virtual destructor.
     */
-   virtual ~BergerRigoutsos<DIM>();
+   virtual ~BergerRigoutsos();
 
 
    /*!
diff --git a/include/BinaryTree.h b/include/BinaryTree.h
index a7e17ab..3aaef26 100644
--- a/include/BinaryTree.h
+++ b/include/BinaryTree.h
@@ -45,7 +45,7 @@ public:
    /**
     * The destructor does nothing of public interest.
     */
-   ~BinaryTree<DIM>();
+   ~BinaryTree();
 
    /**
     * Returns true if "box" intersects a patch that is local 
diff --git a/include/BlockGridGeometry.h b/include/BlockGridGeometry.h
index 33488a1..3a58c61 100644
--- a/include/BlockGridGeometry.h
+++ b/include/BlockGridGeometry.h
@@ -61,7 +61,7 @@ public:
     * Destructor for BlockGridGeometry unregisters the object 
     * with the restart manager if previously registered.
     */
-   virtual ~BlockGridGeometry<DIM>();
+   virtual ~BlockGridGeometry();
    
    /**
     * Create and return a pointer to a refined version of this Cartesian grid
diff --git a/include/BlockPatchGeometry.h b/include/BlockPatchGeometry.h
index 067cdd1..cf55fcb 100644
--- a/include/BlockPatchGeometry.h
+++ b/include/BlockPatchGeometry.h
@@ -52,7 +52,7 @@ public:
    /**
     * Destructor for BlockPatchGeometry.
     */
-   ~BlockPatchGeometry<DIM>();
+   ~BlockPatchGeometry();
 
    /**
     * Get the block number for the block on which the patch lies. 
diff --git a/include/BoundaryBox.h b/include/BoundaryBox.h
index 909c7d2..10d6f24 100644
--- a/include/BoundaryBox.h
+++ b/include/BoundaryBox.h
@@ -59,7 +59,7 @@ public:
    /**
     * The destructor for BoundaryBox.
     */
-   ~BoundaryBox<DIM>();
+   ~BoundaryBox();
 
    /**
     * Return a reference to the Box<DIM> member of the boundary box
diff --git a/include/BoundaryLookupTable.C b/include/BoundaryLookupTable.C
index 49a502f..396e74e 100644
--- a/include/BoundaryLookupTable.C
+++ b/include/BoundaryLookupTable.C
@@ -51,7 +51,7 @@ template<int DIM>  BoundaryLookupTable<DIM>::BoundaryLookupTable()
       s_lookup_table_instance = NULL;
    }
    if(s_registered_callback == false) {
-      s_lookup_table_instance = false;
+      s_lookup_table_instance = NULL;
    }
 
    if (d_table[0].isNull()) {
diff --git a/include/BoundaryLookupTable.h b/include/BoundaryLookupTable.h
index 91105bf..edb8e0e 100644
--- a/include/BoundaryLookupTable.h
+++ b/include/BoundaryLookupTable.h
@@ -186,7 +186,7 @@ protected:
     *
     * The destructor deallocates lookup table contents.
     */
-   ~BoundaryLookupTable<DIM>();
+   ~BoundaryLookupTable();
 
 private:
 
diff --git a/include/BoundaryNode.C b/include/BoundaryNode.C
old mode 100644
new mode 100755
diff --git a/include/BoundaryNode.h b/include/BoundaryNode.h
old mode 100644
new mode 100755
diff --git a/include/Box.h b/include/Box.h
index 69ea6b2..71311fa 100644
--- a/include/Box.h
+++ b/include/Box.h
@@ -449,7 +449,7 @@ public:
    /**
     * Destructor for the box iterator.
     */
-   ~BoxIterator<DIM>();
+   ~BoxIterator();
 
    /**
     * @brief Initializer for the box iterator.
diff --git a/include/BoxArray.h b/include/BoxArray.h
index 01d930e..3551385 100644
--- a/include/BoxArray.h
+++ b/include/BoxArray.h
@@ -88,7 +88,7 @@ public:
    /**
     * The BoxArray destructor releases the box array data.
     */
-   ~BoxArray<DIM>();
+   ~BoxArray();
 
    /**
     * Return the number of boxes in the array.
diff --git a/include/BoxGeneratorStrategy.h b/include/BoxGeneratorStrategy.h
index 97168b0..c9a3980 100644
--- a/include/BoxGeneratorStrategy.h
+++ b/include/BoxGeneratorStrategy.h
@@ -41,7 +41,7 @@ public:
    /**
     * Virtual destructor.
     */
-   virtual ~BoxGeneratorStrategy<DIM>();
+   virtual ~BoxGeneratorStrategy();
 
    /**
     * Create list of boxes whose union covers all integer tags on the patch 
diff --git a/include/BoxGeometry.h b/include/BoxGeometry.h
index c777a85..23603de 100644
--- a/include/BoxGeometry.h
+++ b/include/BoxGeometry.h
@@ -76,7 +76,7 @@ public:
    /**
     * The virtual destructor does nothing interesting.
     */
-   virtual ~BoxGeometry<DIM>();
+   virtual ~BoxGeometry();
 
    /**
     * Calculate the overlap between two box geometry objects given the
diff --git a/include/BoxGraph.h b/include/BoxGraph.h
index c8ef118..479845c 100644
--- a/include/BoxGraph.h
+++ b/include/BoxGraph.h
@@ -158,7 +158,7 @@ public:
    /*!
     * The destructor releases privately held resources.
     */
-   ~BoxGraph<DIM>();
+   ~BoxGraph();
 
    /*!
     * @brief Compute the indices of boxes from the src_box_array
diff --git a/include/BoxIOUtility.h b/include/BoxIOUtility.h
index 929e51b..5bf140e 100644
--- a/include/BoxIOUtility.h
+++ b/include/BoxIOUtility.h
@@ -60,7 +60,7 @@ public:
    /**
     * Virtual destructor.
     */
-   virtual ~BoxIOUtility<DIM>();
+   virtual ~BoxIOUtility();
 
    /**
     * Pulls refinement boxes corresponding to the provided level and 
diff --git a/include/BoxList.C b/include/BoxList.C
index 3bb6e02..1695831 100644
--- a/include/BoxList.C
+++ b/include/BoxList.C
@@ -39,13 +39,13 @@ namespace SAMRAI {
 template<int DIM>  BoxList<DIM>::BoxList(const Box<DIM>& box)
 :  tbox::List< Box<DIM> >()
 {
-   addItem(box);
+   this ->addItem(box);
 }
 
 template<int DIM>  BoxList<DIM>::BoxList(const BoxList<DIM>& list)
 :  tbox::List< Box<DIM> >()
 {
-   copyItems(list);
+   this ->copyItems(list);
 }
       
 template<int DIM>  BoxList<DIM>::BoxList(const BoxArray<DIM>& array)
@@ -53,7 +53,7 @@ template<int DIM>  BoxList<DIM>::BoxList(const BoxArray<DIM>& array)
 {
    const int n = array.getNumberOfBoxes();
    for (int i = 0; i < n; i++) {
-      appendItem(array[i]);
+      this ->appendItem(array[i]);
    }
 }
 
@@ -61,7 +61,7 @@ template<int DIM> BoxList<DIM>& BoxList<DIM>::operator=(const BoxList<DIM>& list
 {
    if (this != &list) {
       this -> clearItems();
-      copyItems(list);
+      this ->copyItems(list);
    }
    return(*this);
 }
@@ -145,10 +145,10 @@ template<int DIM> void BoxList<DIM>::simplifyBoxes()
          // Otherwise, burst tryMe and andMe and put on noncanonical
 
             if (!combineDaPuppies) {
-               appendItem(tryMe);
+               this ->appendItem(tryMe);
             } else {
                Box<DIM> andMe = l();
-               removeItem(l);
+               this ->removeItem(l);
                const Index<DIM>& bl = tryMe.lower();
                const Index<DIM>& bh = tryMe.upper();
                Index<DIM> il = andMe.lower();
@@ -199,13 +199,13 @@ template<int DIM> void BoxList<DIM>::burstBoxes(const Box<DIM>& bursty,
       if (bursth(d) > solidh(d)) {
          Index<DIM> newl = burstl;
          newl(d) = solidh(d) + 1;
-         appendItem(Box<DIM>(newl, bursth));
+         this ->appendItem(Box<DIM>(newl, bursth));
          bursth(d) = solidh(d);
       }
       if (burstl(d) < solidl(d)) {
          Index<DIM> newh = bursth;
          newh(d) = solidl(d) - 1;
-         appendItem(Box<DIM>(burstl, newh));
+         this ->appendItem(Box<DIM>(burstl, newh));
          burstl(d) = solidl(d);
       }
    }
@@ -231,7 +231,7 @@ template<int DIM> void BoxList<DIM>::removeIntersections(const Box<DIM>& takeawa
          fragments.burstBoxes(tryme, takeaway, DIM);
       }
    }
-   catenateItems(fragments);
+   this ->catenateItems(fragments);
 }
 
 template<int DIM> void BoxList<DIM>::removeIntersections(const Box<DIM>& box,
@@ -251,7 +251,7 @@ template<int DIM> void BoxList<DIM>::removeIntersections(const Box<DIM>& box,
    if (!(box * takeaway).empty()) {
       BoxList<DIM>::burstBoxes(box, takeaway, DIM);
    } else {
-      appendItem(box);
+      this ->appendItem(box);
    }
 
 }
@@ -284,7 +284,7 @@ template<int DIM> void BoxList<DIM>::intersectBoxes(const Box<DIM>& box)
          intersection.appendItem(overlap);
       }
    }
-   catenateItems(intersection);
+   this ->catenateItems(intersection);
 }
 
 template<int DIM> void BoxList<DIM>::intersectBoxes(const BoxList<DIM>& boxes)
@@ -300,7 +300,7 @@ template<int DIM> void BoxList<DIM>::intersectBoxes(const BoxList<DIM>& boxes)
          }
       }
    }
-   catenateItems(intersection);
+   this ->catenateItems(intersection);
 }
 
 /*
@@ -334,7 +334,7 @@ template<int DIM> void BoxList<DIM>::coalesceBoxes()
 
          if ( tb2().coalesceWith(tb()) ) {
             found_match = true;
-            removeItem(tb);
+            this ->removeItem(tb);
          }
 
          tb2++;
diff --git a/include/BoxList.I b/include/BoxList.I
index e751158..b9fe76c 100644
--- a/include/BoxList.I
+++ b/include/BoxList.I
@@ -30,14 +30,14 @@ template<int DIM> inline
 void BoxList<DIM>::unionBoxes(const Box<DIM>& box)
 {
    if (!box.empty()) {
-      appendItem(box);
+      this->appendItem(box);
    }
 }
 
 template<int DIM> inline
 void BoxList<DIM>::unionBoxes(const BoxList<DIM>& boxes)
 {
-   copyItems(boxes);
+   this->copyItems(boxes);
 }
 
 template<int DIM> inline
diff --git a/include/BoxList.h b/include/BoxList.h
index f624286..a383c2e 100644
--- a/include/BoxList.h
+++ b/include/BoxList.h
@@ -72,7 +72,7 @@ public:
    /**
     * The destructor releases all list storage.
     */
-   ~BoxList<DIM>();
+   ~BoxList();
 
    /**
     * Return integer number of boxes in the box list.  Note that this 
diff --git a/include/BoxOverlap.h b/include/BoxOverlap.h
index 6aa46c3..c2020bf 100644
--- a/include/BoxOverlap.h
+++ b/include/BoxOverlap.h
@@ -49,7 +49,7 @@ public:
    /**
     * The virtual destructor does nothing interesting.
     */
-   virtual ~BoxOverlap<DIM>();
+   virtual ~BoxOverlap();
 
    /**
     * Return true if intersecting boxes have no communication dependencies.
diff --git a/include/BoxTop.h b/include/BoxTop.h
index a57959b..0ee569d 100644
--- a/include/BoxTop.h
+++ b/include/BoxTop.h
@@ -81,7 +81,7 @@ public:
    /*!
     * The destructor releases privately held resources.
     */
-   ~BoxTop<DIM>();
+   ~BoxTop();
 
    /*!
     * @brief Compute the set of boxes that overlap with the specified \b box.
diff --git a/include/BoxTree.h b/include/BoxTree.h
index 9773977..39adc42 100644
--- a/include/BoxTree.h
+++ b/include/BoxTree.h
@@ -124,7 +124,7 @@ public:
    /*!
     * The dtor does nothing interesting.
     */
-   ~BoxTree<DIM>();
+   ~BoxTree();
 
    //! @{
    /*!
diff --git a/include/BoxTreeNode.h b/include/BoxTreeNode.h
index 5e9325f..82a4c2b 100644
--- a/include/BoxTreeNode.h
+++ b/include/BoxTreeNode.h
@@ -78,7 +78,7 @@ public:
    /*!
     * The dtor does nothing even slightly interesting.
     */
-   ~BoxTreeNode<DIM>();
+   ~BoxTreeNode();
 
    /*!
     * @brief Compute the box array indices of boxes that overlap the given \b box.
diff --git a/include/CartesianCellComplexConservativeLinearRefine.h b/include/CartesianCellComplexConservativeLinearRefine.h
index 1c20f5d..029e4bf 100644
--- a/include/CartesianCellComplexConservativeLinearRefine.h
+++ b/include/CartesianCellComplexConservativeLinearRefine.h
@@ -54,7 +54,7 @@ public:
    /**
     * Uninteresting virtual destructor.
     */
-   virtual ~CartesianCellComplexConservativeLinearRefine<DIM>();
+   virtual ~CartesianCellComplexConservativeLinearRefine();
 
    /**
     * Return true if the variable and name string match cell-centered 
diff --git a/include/CartesianCellComplexLinearRefine.h b/include/CartesianCellComplexLinearRefine.h
index 1b60eea..11e2a36 100644
--- a/include/CartesianCellComplexLinearRefine.h
+++ b/include/CartesianCellComplexLinearRefine.h
@@ -49,7 +49,7 @@ public:
    /**
     * Uninteresting virtual destructor.
     */
-   virtual ~CartesianCellComplexLinearRefine<DIM>();
+   virtual ~CartesianCellComplexLinearRefine();
 
    /**
     * Return true if the variable and name string match cell-centered 
diff --git a/include/CartesianCellComplexWeightedAverage.h b/include/CartesianCellComplexWeightedAverage.h
index 09ce951..eba6985 100644
--- a/include/CartesianCellComplexWeightedAverage.h
+++ b/include/CartesianCellComplexWeightedAverage.h
@@ -49,7 +49,7 @@ public:
    /**
     * Uninteresting virtual destructor.
     */
-   virtual ~CartesianCellComplexWeightedAverage<DIM>();
+   virtual ~CartesianCellComplexWeightedAverage();
 
    /**
     * Return true if the variable and name string match cell-centered 
diff --git a/include/CartesianCellDoubleConservativeLinearRefine.h b/include/CartesianCellDoubleConservativeLinearRefine.h
index 63ccbdb..506dfcd 100644
--- a/include/CartesianCellDoubleConservativeLinearRefine.h
+++ b/include/CartesianCellDoubleConservativeLinearRefine.h
@@ -51,7 +51,7 @@ public:
    /**
     * Uninteresting virtual destructor.
     */
-   virtual ~CartesianCellDoubleConservativeLinearRefine<DIM>();
+   virtual ~CartesianCellDoubleConservativeLinearRefine();
 
    /**
     * Return true if the variable and name string match cell-centered 
diff --git a/include/CartesianCellDoubleLinearRefine.h b/include/CartesianCellDoubleLinearRefine.h
index 791c491..e4174de 100644
--- a/include/CartesianCellDoubleLinearRefine.h
+++ b/include/CartesianCellDoubleLinearRefine.h
@@ -49,7 +49,7 @@ public:
    /**
     * Uninteresting virtual destructor.
     */
-   virtual ~CartesianCellDoubleLinearRefine<DIM>();
+   virtual ~CartesianCellDoubleLinearRefine();
 
    /**
     * Return true if the variable and name string match cell-centered 
diff --git a/include/CartesianCellDoubleWeightedAverage.h b/include/CartesianCellDoubleWeightedAverage.h
index c298283..0e7c4da 100644
--- a/include/CartesianCellDoubleWeightedAverage.h
+++ b/include/CartesianCellDoubleWeightedAverage.h
@@ -49,7 +49,7 @@ public:
    /**
     * Uninteresting virtual destructor.
     */
-   virtual ~CartesianCellDoubleWeightedAverage<DIM>();
+   virtual ~CartesianCellDoubleWeightedAverage();
 
    /**
     * Return true if the variable and name string match cell-centered 
diff --git a/include/CartesianCellFloatConservativeLinearRefine.h b/include/CartesianCellFloatConservativeLinearRefine.h
index cbf27ca..2f31fa6 100644
--- a/include/CartesianCellFloatConservativeLinearRefine.h
+++ b/include/CartesianCellFloatConservativeLinearRefine.h
@@ -51,7 +51,7 @@ public:
    /**
     * Uninteresting virtual destructor.
     */
-   virtual ~CartesianCellFloatConservativeLinearRefine<DIM>();
+   virtual ~CartesianCellFloatConservativeLinearRefine();
 
    /**
     * Return true if the variable and name string match cell-centered 
diff --git a/include/CartesianCellFloatLinearRefine.h b/include/CartesianCellFloatLinearRefine.h
index 08e85a2..c752886 100644
--- a/include/CartesianCellFloatLinearRefine.h
+++ b/include/CartesianCellFloatLinearRefine.h
@@ -49,7 +49,7 @@ public:
    /**
     * Uninteresting virtual destructor.
     */
-   virtual ~CartesianCellFloatLinearRefine<DIM>();
+   virtual ~CartesianCellFloatLinearRefine();
 
    /**
     * Return true if the variable and name string match cell-centered 
diff --git a/include/CartesianCellFloatWeightedAverage.h b/include/CartesianCellFloatWeightedAverage.h
index 8532102..0f0b814 100644
--- a/include/CartesianCellFloatWeightedAverage.h
+++ b/include/CartesianCellFloatWeightedAverage.h
@@ -49,7 +49,7 @@ public:
    /**
     * Uninteresting virtual destructor.
     */
-   virtual ~CartesianCellFloatWeightedAverage<DIM>();
+   virtual ~CartesianCellFloatWeightedAverage();
 
    /**
     * Return true if the variable and name string match cell-centered 
diff --git a/include/CartesianEdgeComplexWeightedAverage.h b/include/CartesianEdgeComplexWeightedAverage.h
index 399ab28..944bf9a 100644
--- a/include/CartesianEdgeComplexWeightedAverage.h
+++ b/include/CartesianEdgeComplexWeightedAverage.h
@@ -49,7 +49,7 @@ public:
    /**
     * Uninteresting virtual destructor.
     */
-   virtual ~CartesianEdgeComplexWeightedAverage<DIM>();
+   virtual ~CartesianEdgeComplexWeightedAverage();
 
    /**
     * Return true if the variable and name string match the edge-centered 
diff --git a/include/CartesianEdgeDoubleConservativeLinearRefine.h b/include/CartesianEdgeDoubleConservativeLinearRefine.h
index 4c77d6f..010ae46 100644
--- a/include/CartesianEdgeDoubleConservativeLinearRefine.h
+++ b/include/CartesianEdgeDoubleConservativeLinearRefine.h
@@ -51,7 +51,7 @@ public:
    /**
     * Uninteresting virtual destructor.
     */
-   virtual ~CartesianEdgeDoubleConservativeLinearRefine<DIM>();
+   virtual ~CartesianEdgeDoubleConservativeLinearRefine();
 
    /**
     * Return true if the variable and name string match edge-centered 
diff --git a/include/CartesianEdgeDoubleWeightedAverage.h b/include/CartesianEdgeDoubleWeightedAverage.h
index 90162e1..b6a4b9d 100644
--- a/include/CartesianEdgeDoubleWeightedAverage.h
+++ b/include/CartesianEdgeDoubleWeightedAverage.h
@@ -49,7 +49,7 @@ public:
    /**
     * Uninteresting virtual destructor.
     */
-   virtual ~CartesianEdgeDoubleWeightedAverage<DIM>();
+   virtual ~CartesianEdgeDoubleWeightedAverage();
 
    /**
     * Return true if the variable and name string match the edge-centered 
diff --git a/include/CartesianEdgeFloatConservativeLinearRefine.h b/include/CartesianEdgeFloatConservativeLinearRefine.h
index 96b18bb..40276c1 100644
--- a/include/CartesianEdgeFloatConservativeLinearRefine.h
+++ b/include/CartesianEdgeFloatConservativeLinearRefine.h
@@ -51,7 +51,7 @@ public:
    /**
     * Uninteresting virtual destructor.
     */
-   virtual ~CartesianEdgeFloatConservativeLinearRefine<DIM>();
+   virtual ~CartesianEdgeFloatConservativeLinearRefine();
 
    /**
     * Return true if the variable and name string match edge-centered 
diff --git a/include/CartesianEdgeFloatWeightedAverage.h b/include/CartesianEdgeFloatWeightedAverage.h
index 88003c6..40dc9c3 100644
--- a/include/CartesianEdgeFloatWeightedAverage.h
+++ b/include/CartesianEdgeFloatWeightedAverage.h
@@ -49,7 +49,7 @@ public:
    /**
     * Uninteresting virtual destructor.
     */
-   virtual ~CartesianEdgeFloatWeightedAverage<DIM>();
+   virtual ~CartesianEdgeFloatWeightedAverage();
 
    /**
     * Return true if the variable and name string match the edge-centered 
diff --git a/include/CartesianFaceComplexWeightedAverage.h b/include/CartesianFaceComplexWeightedAverage.h
index 264796d..cacd9c2 100644
--- a/include/CartesianFaceComplexWeightedAverage.h
+++ b/include/CartesianFaceComplexWeightedAverage.h
@@ -48,7 +48,7 @@ public:
    /**
     * Uninteresting virtual destructor.
     */
-   virtual ~CartesianFaceComplexWeightedAverage<DIM>();
+   virtual ~CartesianFaceComplexWeightedAverage();
 
    /**
     * Return true if the variable and name string match the face-centered 
diff --git a/include/CartesianFaceDoubleConservativeLinearRefine.h b/include/CartesianFaceDoubleConservativeLinearRefine.h
index b846442..6e4ad55 100644
--- a/include/CartesianFaceDoubleConservativeLinearRefine.h
+++ b/include/CartesianFaceDoubleConservativeLinearRefine.h
@@ -51,7 +51,7 @@ public:
    /**
     * Uninteresting virtual destructor.
     */
-   virtual ~CartesianFaceDoubleConservativeLinearRefine<DIM>();
+   virtual ~CartesianFaceDoubleConservativeLinearRefine();
 
    /**
     * Return true if the variable and name string match face-centered 
diff --git a/include/CartesianFaceDoubleWeightedAverage.h b/include/CartesianFaceDoubleWeightedAverage.h
index 39c982b..e28491e 100644
--- a/include/CartesianFaceDoubleWeightedAverage.h
+++ b/include/CartesianFaceDoubleWeightedAverage.h
@@ -49,7 +49,7 @@ public:
    /**
     * Uninteresting virtual destructor.
     */
-   virtual ~CartesianFaceDoubleWeightedAverage<DIM>();
+   virtual ~CartesianFaceDoubleWeightedAverage();
 
    /**
     * Return true if the variable and name string match the face-centered 
diff --git a/include/CartesianFaceFloatConservativeLinearRefine.h b/include/CartesianFaceFloatConservativeLinearRefine.h
index c27096e..dcb257e 100644
--- a/include/CartesianFaceFloatConservativeLinearRefine.h
+++ b/include/CartesianFaceFloatConservativeLinearRefine.h
@@ -51,7 +51,7 @@ public:
    /**
     * Uninteresting virtual destructor.
     */
-   virtual ~CartesianFaceFloatConservativeLinearRefine<DIM>();
+   virtual ~CartesianFaceFloatConservativeLinearRefine();
 
    /**
     * Return true if the variable and name string match face-centered 
diff --git a/include/CartesianFaceFloatWeightedAverage.h b/include/CartesianFaceFloatWeightedAverage.h
index 15bdb67..5c368da 100644
--- a/include/CartesianFaceFloatWeightedAverage.h
+++ b/include/CartesianFaceFloatWeightedAverage.h
@@ -49,7 +49,7 @@ public:
    /**
     * Uninteresting virtual destructor.
     */
-   virtual ~CartesianFaceFloatWeightedAverage<DIM>();
+   virtual ~CartesianFaceFloatWeightedAverage();
 
    /**
     * Return true if the variable and name string match the face-centered 
diff --git a/include/CartesianGridGeometry.C b/include/CartesianGridGeometry.C
index 5bf05f5..21627ca 100644
--- a/include/CartesianGridGeometry.C
+++ b/include/CartesianGridGeometry.C
@@ -349,7 +349,7 @@ template<int DIM> void CartesianGridGeometry<DIM>::setGeometryData(
       d_x_up[id] = x_up[id];
    }
 
-   setPhysicalDomain(domain);
+   this->setPhysicalDomain(domain);
 
    hier::Box<DIM> bigbox;
    for (int k =0 ; k < this -> getPhysicalDomain().getNumberOfBoxes(); k++)
@@ -380,32 +380,32 @@ template<int DIM> void CartesianGridGeometry<DIM>::makeStandardOperators()
     * Standard spatial coarsening operators.
     */
 
-   addSpatialCoarsenOperator(new CartesianCellComplexWeightedAverage<DIM>());
-   addSpatialCoarsenOperator(new CartesianEdgeComplexWeightedAverage<DIM>());
-   addSpatialCoarsenOperator(new CartesianFaceComplexWeightedAverage<DIM>());
-   addSpatialCoarsenOperator(new pdat::NodeComplexInjection<DIM>());
-   addSpatialCoarsenOperator(new CartesianOuterfaceComplexWeightedAverage<DIM>());
-   addSpatialCoarsenOperator(new CartesianSideComplexWeightedAverage<DIM>());
+   this->addSpatialCoarsenOperator(new CartesianCellComplexWeightedAverage<DIM>());
+   this->addSpatialCoarsenOperator(new CartesianEdgeComplexWeightedAverage<DIM>());
+   this->addSpatialCoarsenOperator(new CartesianFaceComplexWeightedAverage<DIM>());
+   this->addSpatialCoarsenOperator(new pdat::NodeComplexInjection<DIM>());
+   this->addSpatialCoarsenOperator(new CartesianOuterfaceComplexWeightedAverage<DIM>());
+   this->addSpatialCoarsenOperator(new CartesianSideComplexWeightedAverage<DIM>());
 
-   addSpatialRefineOperator(new pdat::CellComplexConstantRefine<DIM>());
-   addSpatialRefineOperator(new CartesianCellComplexLinearRefine<DIM>());
-   addSpatialRefineOperator(new pdat::EdgeComplexConstantRefine<DIM>());
-   addSpatialRefineOperator(new pdat::FaceComplexConstantRefine<DIM>());
-   addSpatialRefineOperator(new CartesianNodeComplexLinearRefine<DIM>());
-   addSpatialRefineOperator(new pdat::OuterfaceComplexConstantRefine<DIM>());
-   addSpatialRefineOperator(new pdat::SideComplexConstantRefine<DIM>());
+   this->addSpatialRefineOperator(new pdat::CellComplexConstantRefine<DIM>());
+   this->addSpatialRefineOperator(new CartesianCellComplexLinearRefine<DIM>());
+   this->addSpatialRefineOperator(new pdat::EdgeComplexConstantRefine<DIM>());
+   this->addSpatialRefineOperator(new pdat::FaceComplexConstantRefine<DIM>());
+   this->addSpatialRefineOperator(new CartesianNodeComplexLinearRefine<DIM>());
+   this->addSpatialRefineOperator(new pdat::OuterfaceComplexConstantRefine<DIM>());
+   this->addSpatialRefineOperator(new pdat::SideComplexConstantRefine<DIM>());
 
    /*
     * Standard linear time interpolation operators.
     */
 
-   addTimeInterpolateOperator(new pdat::CellComplexLinearTimeInterpolateOp<DIM>());
-   addTimeInterpolateOperator(new pdat::EdgeComplexLinearTimeInterpolateOp<DIM>());
-   addTimeInterpolateOperator(new pdat::FaceComplexLinearTimeInterpolateOp<DIM>());
-   addTimeInterpolateOperator(new pdat::NodeComplexLinearTimeInterpolateOp<DIM>());
-   addTimeInterpolateOperator(new pdat::OuterfaceComplexLinearTimeInterpolateOp<DIM>());
-   addTimeInterpolateOperator(new pdat::OutersideComplexLinearTimeInterpolateOp<DIM>());
-   addTimeInterpolateOperator(new pdat::SideComplexLinearTimeInterpolateOp<DIM>());
+   this->addTimeInterpolateOperator(new pdat::CellComplexLinearTimeInterpolateOp<DIM>());
+   this->addTimeInterpolateOperator(new pdat::EdgeComplexLinearTimeInterpolateOp<DIM>());
+   this->addTimeInterpolateOperator(new pdat::FaceComplexLinearTimeInterpolateOp<DIM>());
+   this->addTimeInterpolateOperator(new pdat::NodeComplexLinearTimeInterpolateOp<DIM>());
+   this->addTimeInterpolateOperator(new pdat::OuterfaceComplexLinearTimeInterpolateOp<DIM>());
+   this->addTimeInterpolateOperator(new pdat::OutersideComplexLinearTimeInterpolateOp<DIM>());
+   this->addTimeInterpolateOperator(new pdat::SideComplexLinearTimeInterpolateOp<DIM>());
 #endif
 
 #ifdef HAVE_FLOAT
@@ -413,85 +413,85 @@ template<int DIM> void CartesianGridGeometry<DIM>::makeStandardOperators()
     * Standard spatial coarsening operators.
     */
 
-   addSpatialCoarsenOperator(new CartesianCellFloatWeightedAverage<DIM>());
-   addSpatialCoarsenOperator(new CartesianEdgeFloatWeightedAverage<DIM>());
-   addSpatialCoarsenOperator(new CartesianFaceFloatWeightedAverage<DIM>());
-   addSpatialCoarsenOperator(new pdat::NodeFloatInjection<DIM>());
-   addSpatialCoarsenOperator(new CartesianOuterfaceFloatWeightedAverage<DIM>());
-   addSpatialCoarsenOperator(new CartesianSideFloatWeightedAverage<DIM>());
+   this->addSpatialCoarsenOperator(new CartesianCellFloatWeightedAverage<DIM>());
+   this->addSpatialCoarsenOperator(new CartesianEdgeFloatWeightedAverage<DIM>());
+   this->addSpatialCoarsenOperator(new CartesianFaceFloatWeightedAverage<DIM>());
+   this->addSpatialCoarsenOperator(new pdat::NodeFloatInjection<DIM>());
+   this->addSpatialCoarsenOperator(new CartesianOuterfaceFloatWeightedAverage<DIM>());
+   this->addSpatialCoarsenOperator(new CartesianSideFloatWeightedAverage<DIM>());
 
    /*
     * Standard spatial refining operators.
     */
 
-   addSpatialRefineOperator(new CartesianCellFloatConservativeLinearRefine<DIM>());
-   addSpatialRefineOperator(new CartesianEdgeFloatConservativeLinearRefine<DIM>());
-   addSpatialRefineOperator(new pdat::EdgeFloatConstantRefine<DIM>());
-   addSpatialRefineOperator(new pdat::CellFloatConstantRefine<DIM>());
-   addSpatialRefineOperator(new CartesianCellFloatLinearRefine<DIM>());
-   addSpatialRefineOperator(new CartesianFaceFloatConservativeLinearRefine<DIM>());
-   addSpatialRefineOperator(new CartesianNodeFloatLinearRefine<DIM>());
-   addSpatialRefineOperator(new pdat::FaceFloatConstantRefine<DIM>());
-   addSpatialRefineOperator(new pdat::OuterfaceFloatConstantRefine<DIM>());
-   addSpatialRefineOperator(new pdat::OuterfaceIntegerConstantRefine<DIM>());
-   addSpatialRefineOperator(new CartesianSideFloatConservativeLinearRefine<DIM>());
-   addSpatialRefineOperator(new pdat::SideFloatConstantRefine<DIM>());
+   this->addSpatialRefineOperator(new CartesianCellFloatConservativeLinearRefine<DIM>());
+   this->addSpatialRefineOperator(new CartesianEdgeFloatConservativeLinearRefine<DIM>());
+   this->addSpatialRefineOperator(new pdat::EdgeFloatConstantRefine<DIM>());
+   this->addSpatialRefineOperator(new pdat::CellFloatConstantRefine<DIM>());
+   this->addSpatialRefineOperator(new CartesianCellFloatLinearRefine<DIM>());
+   this->addSpatialRefineOperator(new CartesianFaceFloatConservativeLinearRefine<DIM>());
+   this->addSpatialRefineOperator(new CartesianNodeFloatLinearRefine<DIM>());
+   this->addSpatialRefineOperator(new pdat::FaceFloatConstantRefine<DIM>());
+   this->addSpatialRefineOperator(new pdat::OuterfaceFloatConstantRefine<DIM>());
+   this->addSpatialRefineOperator(new pdat::OuterfaceIntegerConstantRefine<DIM>());
+   this->addSpatialRefineOperator(new CartesianSideFloatConservativeLinearRefine<DIM>());
+   this->addSpatialRefineOperator(new pdat::SideFloatConstantRefine<DIM>());
 
    /*
     * Standard linear time interpolation operators.
     */
 
-   addTimeInterpolateOperator(new pdat::CellFloatLinearTimeInterpolateOp<DIM>());
-   addTimeInterpolateOperator(new pdat::EdgeFloatLinearTimeInterpolateOp<DIM>());
-   addTimeInterpolateOperator(new pdat::FaceFloatLinearTimeInterpolateOp<DIM>());
-   addTimeInterpolateOperator(new pdat::NodeFloatLinearTimeInterpolateOp<DIM>());
-   addTimeInterpolateOperator(new pdat::OuterfaceFloatLinearTimeInterpolateOp<DIM>());
-   addTimeInterpolateOperator(new pdat::OutersideFloatLinearTimeInterpolateOp<DIM>());
-   addTimeInterpolateOperator(new pdat::SideFloatLinearTimeInterpolateOp<DIM>());
+   this->addTimeInterpolateOperator(new pdat::CellFloatLinearTimeInterpolateOp<DIM>());
+   this->addTimeInterpolateOperator(new pdat::EdgeFloatLinearTimeInterpolateOp<DIM>());
+   this->addTimeInterpolateOperator(new pdat::FaceFloatLinearTimeInterpolateOp<DIM>());
+   this->addTimeInterpolateOperator(new pdat::NodeFloatLinearTimeInterpolateOp<DIM>());
+   this->addTimeInterpolateOperator(new pdat::OuterfaceFloatLinearTimeInterpolateOp<DIM>());
+   this->addTimeInterpolateOperator(new pdat::OutersideFloatLinearTimeInterpolateOp<DIM>());
+   this->addTimeInterpolateOperator(new pdat::SideFloatLinearTimeInterpolateOp<DIM>());
 #endif
 
    /*
     * Standard spatial coarsening operators.
     */
-   addSpatialCoarsenOperator(new CartesianCellDoubleWeightedAverage<DIM>());
-   addSpatialCoarsenOperator(new CartesianEdgeDoubleWeightedAverage<DIM>());
-   addSpatialCoarsenOperator(new CartesianFaceDoubleWeightedAverage<DIM>());
-   addSpatialCoarsenOperator(new pdat::NodeDoubleInjection<DIM>());
-   addSpatialCoarsenOperator(new pdat::NodeIntegerInjection<DIM>());
-   addSpatialCoarsenOperator(new CartesianOuterfaceDoubleWeightedAverage<DIM>());
-   addSpatialCoarsenOperator(new pdat::OuternodeDoubleConstantCoarsen<DIM>());
-   addSpatialCoarsenOperator(new CartesianOutersideDoubleWeightedAverage<DIM>());
-   addSpatialCoarsenOperator(new CartesianSideDoubleWeightedAverage<DIM>());
+   this->addSpatialCoarsenOperator(new CartesianCellDoubleWeightedAverage<DIM>());
+   this->addSpatialCoarsenOperator(new CartesianEdgeDoubleWeightedAverage<DIM>());
+   this->addSpatialCoarsenOperator(new CartesianFaceDoubleWeightedAverage<DIM>());
+   this->addSpatialCoarsenOperator(new pdat::NodeDoubleInjection<DIM>());
+   this->addSpatialCoarsenOperator(new pdat::NodeIntegerInjection<DIM>());
+   this->addSpatialCoarsenOperator(new CartesianOuterfaceDoubleWeightedAverage<DIM>());
+   this->addSpatialCoarsenOperator(new pdat::OuternodeDoubleConstantCoarsen<DIM>());
+   this->addSpatialCoarsenOperator(new CartesianOutersideDoubleWeightedAverage<DIM>());
+   this->addSpatialCoarsenOperator(new CartesianSideDoubleWeightedAverage<DIM>());
 
    /*
     * Standard spatial refining operators.
     */
-   addSpatialRefineOperator(new CartesianCellDoubleConservativeLinearRefine<DIM>());
-   addSpatialRefineOperator(new pdat::CellDoubleConstantRefine<DIM>());
-   addSpatialRefineOperator(new CartesianCellDoubleLinearRefine<DIM>());
-   addSpatialRefineOperator(new CartesianEdgeDoubleConservativeLinearRefine<DIM>());
-   addSpatialRefineOperator(new pdat::EdgeDoubleConstantRefine<DIM>());
-   addSpatialRefineOperator(new pdat::EdgeIntegerConstantRefine<DIM>());
-   addSpatialRefineOperator(new pdat::CellIntegerConstantRefine<DIM>());
-   addSpatialRefineOperator(new CartesianFaceDoubleConservativeLinearRefine<DIM>());
-   addSpatialRefineOperator(new pdat::FaceDoubleConstantRefine<DIM>());
-   addSpatialRefineOperator(new pdat::FaceIntegerConstantRefine<DIM>());
-   addSpatialRefineOperator(new CartesianNodeDoubleLinearRefine<DIM>());
-   addSpatialRefineOperator(new pdat::OuterfaceDoubleConstantRefine<DIM>());
-   addSpatialRefineOperator(new CartesianSideDoubleConservativeLinearRefine<DIM>());
-   addSpatialRefineOperator(new pdat::SideDoubleConstantRefine<DIM>());
-   addSpatialRefineOperator(new pdat::SideIntegerConstantRefine<DIM>());
+   this->addSpatialRefineOperator(new CartesianCellDoubleConservativeLinearRefine<DIM>());
+   this->addSpatialRefineOperator(new pdat::CellDoubleConstantRefine<DIM>());
+   this->addSpatialRefineOperator(new CartesianCellDoubleLinearRefine<DIM>());
+   this->addSpatialRefineOperator(new CartesianEdgeDoubleConservativeLinearRefine<DIM>());
+   this->addSpatialRefineOperator(new pdat::EdgeDoubleConstantRefine<DIM>());
+   this->addSpatialRefineOperator(new pdat::EdgeIntegerConstantRefine<DIM>());
+   this->addSpatialRefineOperator(new pdat::CellIntegerConstantRefine<DIM>());
+   this->addSpatialRefineOperator(new CartesianFaceDoubleConservativeLinearRefine<DIM>());
+   this->addSpatialRefineOperator(new pdat::FaceDoubleConstantRefine<DIM>());
+   this->addSpatialRefineOperator(new pdat::FaceIntegerConstantRefine<DIM>());
+   this->addSpatialRefineOperator(new CartesianNodeDoubleLinearRefine<DIM>());
+   this->addSpatialRefineOperator(new pdat::OuterfaceDoubleConstantRefine<DIM>());
+   this->addSpatialRefineOperator(new CartesianSideDoubleConservativeLinearRefine<DIM>());
+   this->addSpatialRefineOperator(new pdat::SideDoubleConstantRefine<DIM>());
+   this->addSpatialRefineOperator(new pdat::SideIntegerConstantRefine<DIM>());
 
    /*
     * Standard linear time interpolation operators.
     */
-   addTimeInterpolateOperator(new pdat::CellDoubleLinearTimeInterpolateOp<DIM>());
-   addTimeInterpolateOperator(new pdat::EdgeDoubleLinearTimeInterpolateOp<DIM>());
-   addTimeInterpolateOperator(new pdat::FaceDoubleLinearTimeInterpolateOp<DIM>());
-   addTimeInterpolateOperator(new pdat::NodeDoubleLinearTimeInterpolateOp<DIM>());
-   addTimeInterpolateOperator(new pdat::OuterfaceDoubleLinearTimeInterpolateOp<DIM>());
-   addTimeInterpolateOperator(new pdat::OutersideDoubleLinearTimeInterpolateOp<DIM>());
-   addTimeInterpolateOperator(new pdat::SideDoubleLinearTimeInterpolateOp<DIM>());
+   this->addTimeInterpolateOperator(new pdat::CellDoubleLinearTimeInterpolateOp<DIM>());
+   this->addTimeInterpolateOperator(new pdat::EdgeDoubleLinearTimeInterpolateOp<DIM>());
+   this->addTimeInterpolateOperator(new pdat::FaceDoubleLinearTimeInterpolateOp<DIM>());
+   this->addTimeInterpolateOperator(new pdat::NodeDoubleLinearTimeInterpolateOp<DIM>());
+   this->addTimeInterpolateOperator(new pdat::OuterfaceDoubleLinearTimeInterpolateOp<DIM>());
+   this->addTimeInterpolateOperator(new pdat::OutersideDoubleLinearTimeInterpolateOp<DIM>());
+   this->addTimeInterpolateOperator(new pdat::SideDoubleLinearTimeInterpolateOp<DIM>());
 
 }
 
@@ -628,7 +628,7 @@ template<int DIM> void CartesianGridGeometry<DIM>::putToDatabase(
    db->putDoubleArray("d_x_lo", d_x_lo, DIM);
    db->putDoubleArray("d_x_up", d_x_up, DIM);
 
-   hier::IntVector<DIM> level0_shift = getPeriodicShift(hier::IntVector<DIM>(1));
+   hier::IntVector<DIM> level0_shift = this->getPeriodicShift(hier::IntVector<DIM>(1));
    int* temp_shift = level0_shift;
    db->putIntegerArray("d_periodic_shift", temp_shift, DIM);
 
@@ -710,7 +710,7 @@ template<int DIM> void CartesianGridGeometry<DIM>::getFromInput(
 
       setGeometryData(x_lo, x_up, domain);
 
-      initializePeriodicShift(per_bc);
+      this->initializePeriodicShift(per_bc);
 
    }
 }
@@ -752,12 +752,12 @@ template<int DIM> void CartesianGridGeometry<DIM>::getFromRestart()
    db->getDoubleArray("d_x_lo", x_lo, DIM);
    db->getDoubleArray("d_x_up", x_up, DIM);
 
-   setGeometryData(x_lo, x_up, domain);
+   this->setGeometryData(x_lo, x_up, domain);
 
    hier::IntVector<DIM> periodic_shift;
    int* temp_shift = periodic_shift;
    db->getIntegerArray("d_periodic_shift", temp_shift, DIM);
-   initializePeriodicShift(periodic_shift);
+   this->initializePeriodicShift(periodic_shift);
 
    d_using_original_locations = db->getBool("d_using_original_locations");
 }
diff --git a/include/CartesianGridGeometry.h b/include/CartesianGridGeometry.h
index 83f2664..1772c43 100644
--- a/include/CartesianGridGeometry.h
+++ b/include/CartesianGridGeometry.h
@@ -153,7 +153,7 @@ public:
     * data describing grid geometry and unregisters the object with
     * the restart manager if previously registered.
     */
-   virtual ~CartesianGridGeometry<DIM>();
+   virtual ~CartesianGridGeometry();
 
    
    /**
diff --git a/include/CartesianNodeComplexLinearRefine.h b/include/CartesianNodeComplexLinearRefine.h
index c33ad95..8864a7b 100644
--- a/include/CartesianNodeComplexLinearRefine.h
+++ b/include/CartesianNodeComplexLinearRefine.h
@@ -49,7 +49,7 @@ public:
    /**
     * Uninteresting virtual destructor.
     */
-   virtual ~CartesianNodeComplexLinearRefine<DIM>();
+   virtual ~CartesianNodeComplexLinearRefine();
 
    /**
     * Return true if the variable and name string match node-centered 
diff --git a/include/CartesianNodeDoubleLinearRefine.h b/include/CartesianNodeDoubleLinearRefine.h
index b237203..ee61c0e 100644
--- a/include/CartesianNodeDoubleLinearRefine.h
+++ b/include/CartesianNodeDoubleLinearRefine.h
@@ -49,7 +49,7 @@ public:
    /**
     * Uninteresting virtual destructor.
     */
-   virtual ~CartesianNodeDoubleLinearRefine<DIM>();
+   virtual ~CartesianNodeDoubleLinearRefine();
 
    /**
     * Return true if the variable and name string match node-centered 
diff --git a/include/CartesianNodeFloatLinearRefine.h b/include/CartesianNodeFloatLinearRefine.h
index bfb9bc7..93bf126 100644
--- a/include/CartesianNodeFloatLinearRefine.h
+++ b/include/CartesianNodeFloatLinearRefine.h
@@ -49,7 +49,7 @@ public:
    /**
     * Uninteresting virtual destructor.
     */
-   virtual ~CartesianNodeFloatLinearRefine<DIM>();
+   virtual ~CartesianNodeFloatLinearRefine();
 
    /**
     * Return true if the variable and name string match node-centered 
diff --git a/include/CartesianOuterfaceComplexWeightedAverage.h b/include/CartesianOuterfaceComplexWeightedAverage.h
index c8e0cee..fe90c38 100644
--- a/include/CartesianOuterfaceComplexWeightedAverage.h
+++ b/include/CartesianOuterfaceComplexWeightedAverage.h
@@ -49,7 +49,7 @@ public:
    /**
     * Uninteresting virtual destructor.
     */
-   virtual ~CartesianOuterfaceComplexWeightedAverage<DIM>();
+   virtual ~CartesianOuterfaceComplexWeightedAverage();
 
    /**
     * Return true if the variable and name string match the outerface
diff --git a/include/CartesianOuterfaceDoubleWeightedAverage.h b/include/CartesianOuterfaceDoubleWeightedAverage.h
index 1d32c7c..9108094 100644
--- a/include/CartesianOuterfaceDoubleWeightedAverage.h
+++ b/include/CartesianOuterfaceDoubleWeightedAverage.h
@@ -49,7 +49,7 @@ public:
    /**
     * Uninteresting virtual destructor.
     */
-   virtual ~CartesianOuterfaceDoubleWeightedAverage<DIM>();
+   virtual ~CartesianOuterfaceDoubleWeightedAverage();
 
    /**
     * Return true if the variable and name string match the outerface
diff --git a/include/CartesianOuterfaceFloatWeightedAverage.h b/include/CartesianOuterfaceFloatWeightedAverage.h
index 56e7971..8e3ebee 100644
--- a/include/CartesianOuterfaceFloatWeightedAverage.h
+++ b/include/CartesianOuterfaceFloatWeightedAverage.h
@@ -49,7 +49,7 @@ public:
    /**
     * Uninteresting virtual destructor.
     */
-   virtual ~CartesianOuterfaceFloatWeightedAverage<DIM>();
+   virtual ~CartesianOuterfaceFloatWeightedAverage();
 
    /**
     * Return true if the variable and name string match the outerface
diff --git a/include/CartesianOutersideDoubleWeightedAverage.h b/include/CartesianOutersideDoubleWeightedAverage.h
index 6df073c..b3819b0 100644
--- a/include/CartesianOutersideDoubleWeightedAverage.h
+++ b/include/CartesianOutersideDoubleWeightedAverage.h
@@ -49,7 +49,7 @@ public:
    /**
     * Uninteresting virtual destructor.
     */
-   virtual ~CartesianOutersideDoubleWeightedAverage<DIM>();
+   virtual ~CartesianOutersideDoubleWeightedAverage();
 
    /**
     * Return true if the variable and name string match the outerside
diff --git a/include/CartesianPatchGeometry.h b/include/CartesianPatchGeometry.h
index 4bc4732..deb953b 100644
--- a/include/CartesianPatchGeometry.h
+++ b/include/CartesianPatchGeometry.h
@@ -43,7 +43,7 @@ public:
     * patch boundary information to hier::PatchGeometry base class constructor
     * and allocates storage for spatial coordinates on patch.
     */
-   CartesianPatchGeometry<DIM>(
+   CartesianPatchGeometry(
       const hier::IntVector<DIM>& ratio_to_level_zero,
       const tbox::Array< tbox::Array<bool> >& touches_regular_bdry,
       const tbox::Array< tbox::Array<bool> >& touches_periodic_bdry,
@@ -55,7 +55,7 @@ public:
     * Destructor for CartesianPatchGeometry deallocates the
     * storage for spatial coordinates on patch.
     */
-   ~CartesianPatchGeometry<DIM>();
+   ~CartesianPatchGeometry();
 
    /**
     * Return const pointer to dx array for patch. 
diff --git a/include/CartesianRobinBcHelper.h b/include/CartesianRobinBcHelper.h
index 8f3ebc8..49599d6 100644
--- a/include/CartesianRobinBcHelper.h
+++ b/include/CartesianRobinBcHelper.h
@@ -93,7 +93,7 @@ public:
    /*!
     * @brief Destructor.
     */
-   virtual ~CartesianRobinBcHelper<DIM>(void);
+   virtual ~CartesianRobinBcHelper();
 
 
 
diff --git a/include/CartesianSideComplexWeightedAverage.h b/include/CartesianSideComplexWeightedAverage.h
index 5ae0649..a4d5fd5 100644
--- a/include/CartesianSideComplexWeightedAverage.h
+++ b/include/CartesianSideComplexWeightedAverage.h
@@ -49,7 +49,7 @@ public:
    /**
     * Uninteresting virtual destructor.
     */
-   virtual ~CartesianSideComplexWeightedAverage<DIM>();
+   virtual ~CartesianSideComplexWeightedAverage();
 
    /**
     * Return true if the variable and name string match the side-centered 
diff --git a/include/CartesianSideDoubleConservativeLinearRefine.h b/include/CartesianSideDoubleConservativeLinearRefine.h
index e6e9f01..530421c 100644
--- a/include/CartesianSideDoubleConservativeLinearRefine.h
+++ b/include/CartesianSideDoubleConservativeLinearRefine.h
@@ -51,7 +51,7 @@ public:
    /**
     * Uninteresting virtual destructor.
     */
-   virtual ~CartesianSideDoubleConservativeLinearRefine<DIM>();
+   virtual ~CartesianSideDoubleConservativeLinearRefine();
 
    /**
     * Return true if the variable and name string match side-centered 
diff --git a/include/CartesianSideDoubleWeightedAverage.h b/include/CartesianSideDoubleWeightedAverage.h
index 1abac78..92cf15e 100644
--- a/include/CartesianSideDoubleWeightedAverage.h
+++ b/include/CartesianSideDoubleWeightedAverage.h
@@ -49,7 +49,7 @@ public:
    /**
     * Uninteresting virtual destructor.
     */
-   virtual ~CartesianSideDoubleWeightedAverage<DIM>();
+   virtual ~CartesianSideDoubleWeightedAverage();
 
    /**
     * Return true if the variable and name string match the side-centered 
diff --git a/include/CartesianSideFloatConservativeLinearRefine.h b/include/CartesianSideFloatConservativeLinearRefine.h
index 95bc99f..294eae8 100644
--- a/include/CartesianSideFloatConservativeLinearRefine.h
+++ b/include/CartesianSideFloatConservativeLinearRefine.h
@@ -51,7 +51,7 @@ public:
    /**
     * Uninteresting virtual destructor.
     */
-   virtual ~CartesianSideFloatConservativeLinearRefine<DIM>();
+   virtual ~CartesianSideFloatConservativeLinearRefine();
 
    /**
     * Return true if the variable and name string match side-centered 
diff --git a/include/CartesianSideFloatWeightedAverage.h b/include/CartesianSideFloatWeightedAverage.h
index 6d0aed0..ca553a8 100644
--- a/include/CartesianSideFloatWeightedAverage.h
+++ b/include/CartesianSideFloatWeightedAverage.h
@@ -49,7 +49,7 @@ public:
    /**
     * Uninteresting virtual destructor.
     */
-   virtual ~CartesianSideFloatWeightedAverage<DIM>();
+   virtual ~CartesianSideFloatWeightedAverage();
 
    /**
     * Return true if the variable and name string match the side-centered 
diff --git a/include/CartesianVizamraiDataWriter.h b/include/CartesianVizamraiDataWriter.h
index 61dc830..2c29ab1 100644
--- a/include/CartesianVizamraiDataWriter.h
+++ b/include/CartesianVizamraiDataWriter.h
@@ -143,7 +143,7 @@ public:
    /*!
     * The destructor for the writer does nothing interesting.
     */
-   virtual ~CartesianVizamraiDataWriter<DIM>();
+   virtual ~CartesianVizamraiDataWriter();
 
    /*!
     * Set the finest hierarchy level to write to a Vizamrai file. 
diff --git a/include/CellComplexConstantRefine.h b/include/CellComplexConstantRefine.h
index 9732f31..9963522 100644
--- a/include/CellComplexConstantRefine.h
+++ b/include/CellComplexConstantRefine.h
@@ -49,7 +49,7 @@ public:
    /**
     * Uninteresting virtual destructor.
     */
-   virtual ~CellComplexConstantRefine<DIM>();
+   virtual ~CellComplexConstantRefine();
 
    /**
     * Return true if the variable and name string match cell-centered 
diff --git a/include/CellComplexLinearTimeInterpolateOp.h b/include/CellComplexLinearTimeInterpolateOp.h
index 3e09cce..669ccd7 100644
--- a/include/CellComplexLinearTimeInterpolateOp.h
+++ b/include/CellComplexLinearTimeInterpolateOp.h
@@ -46,7 +46,7 @@ public:
    /**
     * Uninteresting virtual destructor.
     */
-   virtual ~CellComplexLinearTimeInterpolateOp<DIM>();
+   virtual ~CellComplexLinearTimeInterpolateOp();
 
    /**
     * Return true if the variable and name string match the standard
diff --git a/include/CellData.h b/include/CellData.h
index 968e5b2..8b42bf0 100644
--- a/include/CellData.h
+++ b/include/CellData.h
@@ -110,7 +110,7 @@ public:
    /*!
     * @brief The virtual destructor for a cell data object.
     */
-   virtual ~CellData<DIM,TYPE>();
+   virtual ~CellData();
 
    /*!
     * @brief Return the depth (e.g., the number of components in each spatial
diff --git a/include/CellDataFactory.h b/include/CellDataFactory.h
index 421991d..5001725 100644
--- a/include/CellDataFactory.h
+++ b/include/CellDataFactory.h
@@ -54,7 +54,7 @@ public:
    /**
     * Virtual destructor for the cell data factory class.
     */
-   virtual ~CellDataFactory<DIM,TYPE>();
+   virtual ~CellDataFactory();
 
    /**
     * @brief Abstract virtual function to clone a patch data factory.
diff --git a/include/CellDoubleConstantRefine.h b/include/CellDoubleConstantRefine.h
index 59d959f..8f2cb34 100644
--- a/include/CellDoubleConstantRefine.h
+++ b/include/CellDoubleConstantRefine.h
@@ -49,7 +49,7 @@ public:
    /**
     * Uninteresting virtual destructor.
     */
-   virtual ~CellDoubleConstantRefine<DIM>();
+   virtual ~CellDoubleConstantRefine();
 
    /**
     * Return true if the variable and name string match cell-centered 
diff --git a/include/CellDoubleLinearTimeInterpolateOp.h b/include/CellDoubleLinearTimeInterpolateOp.h
index fd80efc..883d22f 100644
--- a/include/CellDoubleLinearTimeInterpolateOp.h
+++ b/include/CellDoubleLinearTimeInterpolateOp.h
@@ -46,7 +46,7 @@ public:
    /**
     * Uninteresting virtual destructor.
     */
-   virtual ~CellDoubleLinearTimeInterpolateOp<DIM>();
+   virtual ~CellDoubleLinearTimeInterpolateOp();
 
    /**
     * Return true if the variable and name string match the standard
diff --git a/include/CellFloatConstantRefine.h b/include/CellFloatConstantRefine.h
index a446b49..74907d6 100644
--- a/include/CellFloatConstantRefine.h
+++ b/include/CellFloatConstantRefine.h
@@ -49,7 +49,7 @@ public:
    /**
     * Uninteresting virtual destructor.
     */
-   virtual ~CellFloatConstantRefine<DIM>();
+   virtual ~CellFloatConstantRefine();
 
    /**
     * Return true if the variable and name string match cell-centered 
diff --git a/include/CellFloatLinearTimeInterpolateOp.h b/include/CellFloatLinearTimeInterpolateOp.h
index e7a16bc..bd52fb8 100644
--- a/include/CellFloatLinearTimeInterpolateOp.h
+++ b/include/CellFloatLinearTimeInterpolateOp.h
@@ -46,7 +46,7 @@ public:
    /**
     * Uninteresting virtual destructor.
     */
-   virtual ~CellFloatLinearTimeInterpolateOp<DIM>();
+   virtual ~CellFloatLinearTimeInterpolateOp();
 
    /**
     * Return true if the variable and name string match the standard
diff --git a/include/CellGeometry.h b/include/CellGeometry.h
index e4aa7bd..10d1c16 100644
--- a/include/CellGeometry.h
+++ b/include/CellGeometry.h
@@ -59,7 +59,7 @@ public:
    /*!
     * @brief The virtual destructor does nothing interesting.
     */
-   virtual ~CellGeometry<DIM>();
+   virtual ~CellGeometry();
 
    /*!
     * @brief Compute the overlap in cell-centered index space between 
diff --git a/include/CellIndex.h b/include/CellIndex.h
index 7455900..c37d994 100644
--- a/include/CellIndex.h
+++ b/include/CellIndex.h
@@ -54,7 +54,7 @@ public:
    /**
     * The cell index destructor does nothing interesting.
     */
-   ~CellIndex<DIM>();
+   ~CellIndex();
 
    /**
     * Plus-equals operator for a cell index and an integer vector.
diff --git a/include/CellIntegerConstantRefine.h b/include/CellIntegerConstantRefine.h
index 8740908..16c8b6a 100644
--- a/include/CellIntegerConstantRefine.h
+++ b/include/CellIntegerConstantRefine.h
@@ -49,7 +49,7 @@ public:
    /**
     * Uninteresting virtual destructor.
     */
-   virtual ~CellIntegerConstantRefine<DIM>();
+   virtual ~CellIntegerConstantRefine();
 
    /**
     * Return true if the variable and name string match cell-centered 
diff --git a/include/CellIterator.h b/include/CellIterator.h
index 6859915..5451254 100644
--- a/include/CellIterator.h
+++ b/include/CellIterator.h
@@ -67,7 +67,7 @@ public:
    /**
     * Destructor for the cell iterator.
     */
-   ~CellIterator<DIM>();
+   ~CellIterator();
 
    /**
     * Extract the cell index corresponding to the iterator position in the box.
diff --git a/include/CellOverlap.h b/include/CellOverlap.h
index 32103af..84d8625 100644
--- a/include/CellOverlap.h
+++ b/include/CellOverlap.h
@@ -48,7 +48,7 @@ public:
     * The virtual destructor does nothing interesting except deallocate
     * box data.
     */
-   virtual ~CellOverlap<DIM>();
+   virtual ~CellOverlap();
 
    /**
     * Return whether there is an empty intersection between the two
diff --git a/include/CellPoissonFACOps.h b/include/CellPoissonFACOps.h
index 531969d..42e0a27 100644
--- a/include/CellPoissonFACOps.h
+++ b/include/CellPoissonFACOps.h
@@ -170,7 +170,7 @@ public:
     *
     * Deallocate internal data.
     */
-   ~CellPoissonFACOps<DIM>(void);
+   ~CellPoissonFACOps();
 
 
 
diff --git a/include/CellPoissonFACSolver.h b/include/CellPoissonFACSolver.h
index ed5b883..17a637b 100644
--- a/include/CellPoissonFACSolver.h
+++ b/include/CellPoissonFACSolver.h
@@ -138,7 +138,7 @@ public:
    /*!
     * @brief Destructor.
     */
-   ~CellPoissonFACSolver<DIM>(void);
+   ~CellPoissonFACSolver();
 
 
 
diff --git a/include/CellPoissonHypreSolver.h b/include/CellPoissonHypreSolver.h
index 4029f69..4cf87ae 100644
--- a/include/CellPoissonHypreSolver.h
+++ b/include/CellPoissonHypreSolver.h
@@ -115,7 +115,7 @@ public:
    /*!
     * The Poisson destructor releases all internally managed data.
     */
-   ~CellPoissonHypreSolver<DIM>();
+   ~CellPoissonHypreSolver();
 
    /*!
     * @brief Initialize to a given hierarchy.
diff --git a/include/CellVariable.h b/include/CellVariable.h
index b09a30c..3a7ff35 100644
--- a/include/CellVariable.h
+++ b/include/CellVariable.h
@@ -50,7 +50,7 @@ public:
    /*!
     * @brief Virtual destructor for cell variable objects.
     */
-   virtual ~CellVariable<DIM,TYPE>();
+   virtual ~CellVariable();
 
    /*!
     * @brief Return true indicating that cell data quantities will always 
diff --git a/include/CoarseFineBoundary.h b/include/CoarseFineBoundary.h
index 6a3bf2d..e7318d0 100644
--- a/include/CoarseFineBoundary.h
+++ b/include/CoarseFineBoundary.h
@@ -102,7 +102,7 @@ public:
       int ln,
       const IntVector<DIM>& max_ghost_width);
 
-   ~CoarseFineBoundary<DIM>();
+   ~CoarseFineBoundary();
 
    /*!
     * @brief Construct a CoarseFineBoundary<DIM> object for the specified
diff --git a/include/CoarsenAlgorithm.h b/include/CoarsenAlgorithm.h
index b3f10db..f5b3d00 100644
--- a/include/CoarsenAlgorithm.h
+++ b/include/CoarsenAlgorithm.h
@@ -117,7 +117,7 @@ public:
    /*!
     * The virtual destructor for the algorithm releases all internal storage.
     */
-   virtual ~CoarsenAlgorithm<DIM>();
+   virtual ~CoarsenAlgorithm();
 
    /*!
     * Register a coarsening operation with the coarsening algorithm.  Data
diff --git a/include/CoarsenClasses.h b/include/CoarsenClasses.h
index a0a2781..2a84665 100644
--- a/include/CoarsenClasses.h
+++ b/include/CoarsenClasses.h
@@ -64,7 +64,7 @@ public:
     * The virtual destructor destroys the coarsen data items owned
     * by this object (and the associated CoarsenAlgorithm<DIM> object).
     */
-   virtual ~CoarsenClasses<DIM>();
+   virtual ~CoarsenClasses();
 
    /**
     * Return number of equivalence classes maintained by this object
diff --git a/include/CoarsenCopyTransaction.h b/include/CoarsenCopyTransaction.h
index eb74ca3..8b975ef 100644
--- a/include/CoarsenCopyTransaction.h
+++ b/include/CoarsenCopyTransaction.h
@@ -93,7 +93,7 @@ public:
     * The virtual destructor for the copy transaction releases all
     * memory associated with the transaction.
     */
-   virtual ~CoarsenCopyTransaction<DIM>();
+   virtual ~CoarsenCopyTransaction();
 
    /*!
     * Return a boolean indicating whether this transaction can estimate
diff --git a/include/CoarsenOperator.h b/include/CoarsenOperator.h
index 5d17745..fbbea89 100644
--- a/include/CoarsenOperator.h
+++ b/include/CoarsenOperator.h
@@ -75,7 +75,7 @@ public:
     * The virtual destructor for the coarsening operator does
     * nothing interesting.
     */
-   virtual ~CoarsenOperator<DIM>();
+   virtual ~CoarsenOperator();
 
    /**
     * Return true if the coarsening operation matches the variable and
diff --git a/include/CoarsenPatchStrategy.h b/include/CoarsenPatchStrategy.h
index 896f144..651435b 100644
--- a/include/CoarsenPatchStrategy.h
+++ b/include/CoarsenPatchStrategy.h
@@ -51,7 +51,7 @@ public:
    /*!
     * The virtual destructor for coarsen strategy does nothing interesting.
     */
-   virtual ~CoarsenPatchStrategy<DIM>();
+   virtual ~CoarsenPatchStrategy();
 
    /*!
     * Return maximum stencil width needed over all user-defined
diff --git a/include/CoarsenSchedule.h b/include/CoarsenSchedule.h
index 1f13eb5..b5d8dcf 100644
--- a/include/CoarsenSchedule.h
+++ b/include/CoarsenSchedule.h
@@ -122,7 +122,7 @@ public:
    /*!
     * The virtual destructor for the schedule releases all internal storage.
     */
-   virtual ~CoarsenSchedule<DIM>();
+   virtual ~CoarsenSchedule();
 
    /*!
     * Reset this coarsen schedule to perform data transfers asssociated with
diff --git a/include/CopyOperation.I b/include/CopyOperation.I
index 482004a..224cb5f 100644
--- a/include/CopyOperation.I
+++ b/include/CopyOperation.I
@@ -7,6 +7,8 @@
 // Description:	Copy operation on single array data elements templated on data type
 //
 
+#include <algorithm>
+
 #ifdef DEBUG_NO_INLINE
 #define inline
 #endif
@@ -29,9 +31,13 @@ CopyOperation<TYPE>::~CopyOperation()
 }
 
 template <class TYPE> inline
-void CopyOperation<TYPE>::operator()(TYPE& vdst, const TYPE& vsrc) const
+void CopyOperation<TYPE>::operator()(TYPE* vdst, const TYPE* vsrc, const int size) const
 {
-   vdst = vsrc;
+   // This assumes vdst and vsrc do not overlap, which is reasonable for SAMRAI: there's
+   // no situation in which we would copy data from one part of a patch into another
+   // overlapping part of the same patch.
+   if (vsrc != vdst)
+      std::copy(vsrc, vsrc + size, vdst);
 }
 
 #ifdef DEBUG_NO_INLINE
diff --git a/include/CopyOperation.h b/include/CopyOperation.h
index 7f3c073..b2fa4b7 100644
--- a/include/CopyOperation.h
+++ b/include/CopyOperation.h
@@ -37,7 +37,7 @@ public:
    /*!
     * The operator copies the source value to the destination.
     */
-   void operator()(TYPE& vdst, const TYPE& vsrc) const;
+   void operator()(TYPE* vdst, const TYPE* vsrc, const int size) const;
 
 private:
    CopyOperation(const CopyOperation<TYPE>&);	// not implemented
diff --git a/include/CubesPatchInterface.C b/include/CubesPatchInterface.C
index 874be27..1d4d9bc 100644
--- a/include/CubesPatchInterface.C
+++ b/include/CubesPatchInterface.C
@@ -64,7 +64,7 @@ CubesPatchInterface<DIM>::CubesPatchInterface(
 *******************************************************************
 */
 template<int DIM> 
-CubesPatchInterface<DIM>::~CubesPatchInterface<DIM>()
+CubesPatchInterface<DIM>::~CubesPatchInterface()
 {
 
 }
diff --git a/include/CutCell.C b/include/CutCell.C
old mode 100644
new mode 100755
diff --git a/include/CutCell.h b/include/CutCell.h
old mode 100644
new mode 100755
diff --git a/include/EdgeComplexConstantRefine.h b/include/EdgeComplexConstantRefine.h
index 1c3956e..9982558 100644
--- a/include/EdgeComplexConstantRefine.h
+++ b/include/EdgeComplexConstantRefine.h
@@ -49,7 +49,7 @@ public:
    /**
     * Uninteresting virtual destructor.
     */
-   virtual ~EdgeComplexConstantRefine<DIM>();
+   virtual ~EdgeComplexConstantRefine();
 
    /**
     * Return true if the variable and name string match edge-centered 
diff --git a/include/EdgeComplexLinearTimeInterpolateOp.h b/include/EdgeComplexLinearTimeInterpolateOp.h
index 39495f0..916038e 100644
--- a/include/EdgeComplexLinearTimeInterpolateOp.h
+++ b/include/EdgeComplexLinearTimeInterpolateOp.h
@@ -46,7 +46,7 @@ public:
    /**
     * Uninteresting virtual destructor.
     */
-   virtual ~EdgeComplexLinearTimeInterpolateOp<DIM>();
+   virtual ~EdgeComplexLinearTimeInterpolateOp();
 
    /**
     * Return true if the variable and name string match the standard
diff --git a/include/EdgeData.h b/include/EdgeData.h
index 755aaa6..89bdb0c 100644
--- a/include/EdgeData.h
+++ b/include/EdgeData.h
@@ -129,7 +129,7 @@ public:
    /*!
     * @brief The virtual destructor for an edge data object.
     */
-   virtual ~EdgeData<DIM,TYPE>();
+   virtual ~EdgeData();
 
    /*!
     * @brief Return the depth (e.g., the number of components in each spatial
diff --git a/include/EdgeDataFactory.h b/include/EdgeDataFactory.h
index 7aa5540..0acbbf3 100644
--- a/include/EdgeDataFactory.h
+++ b/include/EdgeDataFactory.h
@@ -55,7 +55,7 @@ public:
    /**
     * Virtual destructor for the edge data factory class.
     */
-   virtual ~EdgeDataFactory<DIM,TYPE>();
+   virtual ~EdgeDataFactory();
 
    /**
     * @brief Abstract virtual function to clone a patch data factory.
diff --git a/include/EdgeDoubleConstantRefine.h b/include/EdgeDoubleConstantRefine.h
index a3e536b..a7584ec 100644
--- a/include/EdgeDoubleConstantRefine.h
+++ b/include/EdgeDoubleConstantRefine.h
@@ -49,7 +49,7 @@ public:
    /**
     * Uninteresting virtual destructor.
     */
-   virtual ~EdgeDoubleConstantRefine<DIM>();
+   virtual ~EdgeDoubleConstantRefine();
 
    /**
     * Return true if the variable and name string match edge-centered 
diff --git a/include/EdgeDoubleLinearTimeInterpolateOp.h b/include/EdgeDoubleLinearTimeInterpolateOp.h
index f371c3d..1fd80e1 100644
--- a/include/EdgeDoubleLinearTimeInterpolateOp.h
+++ b/include/EdgeDoubleLinearTimeInterpolateOp.h
@@ -46,7 +46,7 @@ public:
    /**
     * Uninteresting virtual destructor.
     */
-   virtual ~EdgeDoubleLinearTimeInterpolateOp<DIM>();
+   virtual ~EdgeDoubleLinearTimeInterpolateOp();
 
    /**
     * Return true if the variable and name string match the standard
diff --git a/include/EdgeFloatConstantRefine.h b/include/EdgeFloatConstantRefine.h
index 0256125..14c75d0 100644
--- a/include/EdgeFloatConstantRefine.h
+++ b/include/EdgeFloatConstantRefine.h
@@ -49,7 +49,7 @@ public:
    /**
     * Uninteresting virtual destructor.
     */
-   virtual ~EdgeFloatConstantRefine<DIM>();
+   virtual ~EdgeFloatConstantRefine();
 
    /**
     * Return true if the variable and name string match edge-centered 
diff --git a/include/EdgeFloatLinearTimeInterpolateOp.h b/include/EdgeFloatLinearTimeInterpolateOp.h
index 91efde8..3e86b56 100644
--- a/include/EdgeFloatLinearTimeInterpolateOp.h
+++ b/include/EdgeFloatLinearTimeInterpolateOp.h
@@ -46,7 +46,7 @@ public:
    /**
     * Uninteresting virtual destructor.
     */
-   virtual ~EdgeFloatLinearTimeInterpolateOp<DIM>();
+   virtual ~EdgeFloatLinearTimeInterpolateOp();
 
    /**
     * Return true if the variable and name string match the standard
diff --git a/include/EdgeGeometry.h b/include/EdgeGeometry.h
index cf376e7..485cea9 100644
--- a/include/EdgeGeometry.h
+++ b/include/EdgeGeometry.h
@@ -62,7 +62,7 @@ public:
    /*!
     * @brief The virtual destructor does nothing interesting.
     */
-   virtual ~EdgeGeometry<DIM>();
+   virtual ~EdgeGeometry();
 
    /*!
     * @brief Compute the overlap in edge-centered index space between
diff --git a/include/EdgeIndex.h b/include/EdgeIndex.h
index a567946..5907dc7 100644
--- a/include/EdgeIndex.h
+++ b/include/EdgeIndex.h
@@ -60,7 +60,7 @@ public:
    /**
     * The edge index destructor does nothing interesting.
     */
-   ~EdgeIndex<DIM>();
+   ~EdgeIndex();
 
    /**
     * Get the axis for which this edge index is defined (X=0, Y=1, Z=2).
diff --git a/include/EdgeIntegerConstantRefine.h b/include/EdgeIntegerConstantRefine.h
index ab365e9..bdf124f 100644
--- a/include/EdgeIntegerConstantRefine.h
+++ b/include/EdgeIntegerConstantRefine.h
@@ -49,7 +49,7 @@ public:
    /**
     * Uninteresting virtual destructor.
     */
-   virtual ~EdgeIntegerConstantRefine<DIM>();
+   virtual ~EdgeIntegerConstantRefine();
 
    /**
     * Return true if the variable and name string match edge-centered 
diff --git a/include/EdgeIterator.h b/include/EdgeIterator.h
index a748544..fcee9ec 100644
--- a/include/EdgeIterator.h
+++ b/include/EdgeIterator.h
@@ -67,7 +67,7 @@ public:
    /**
     * Destructor for the edge iterator.
     */
-   ~EdgeIterator<DIM>();
+   ~EdgeIterator();
 
    /**
     * Extract the edge index corresponding to the iterator position in the box.
diff --git a/include/EdgeOverlap.h b/include/EdgeOverlap.h
index 51f1a7c..046ce51 100644
--- a/include/EdgeOverlap.h
+++ b/include/EdgeOverlap.h
@@ -45,7 +45,7 @@ public:
     * The virtual destructor does nothing interesting except deallocate
     * box data.
     */
-   virtual ~EdgeOverlap<DIM>();
+   virtual ~EdgeOverlap();
 
    /**
     * Return whether there is an empty intersection between the two
diff --git a/include/EdgeVariable.h b/include/EdgeVariable.h
index fda956e..fa2031c 100644
--- a/include/EdgeVariable.h
+++ b/include/EdgeVariable.h
@@ -55,7 +55,7 @@ public:
    /*!
     * @brief Virtual destructor for edge variable objects.
     */
-   virtual ~EdgeVariable<DIM,TYPE>();
+   virtual ~EdgeVariable();
 
    /*!
     * @brief Return boolean indicating which edge data values (coarse
diff --git a/include/ElevenPatchInterface.C b/include/ElevenPatchInterface.C
index ff62834..8433dd4 100644
--- a/include/ElevenPatchInterface.C
+++ b/include/ElevenPatchInterface.C
@@ -56,7 +56,7 @@ ElevenPatchInterface<DIM>::ElevenPatchInterface(
 *******************************************************************
 */
 template<int DIM> 
-ElevenPatchInterface<DIM>::~ElevenPatchInterface<DIM>()
+ElevenPatchInterface<DIM>::~ElevenPatchInterface()
 {
   
 }
diff --git a/include/EmbeddedBoundaryGeometry.C b/include/EmbeddedBoundaryGeometry.C
old mode 100644
new mode 100755
index cd81f85..f48513d
--- a/include/EmbeddedBoundaryGeometry.C
+++ b/include/EmbeddedBoundaryGeometry.C
@@ -324,7 +324,7 @@ EmbeddedBoundaryGeometry<DIM>::EmbeddedBoundaryGeometry(
 */
 
 template<int DIM> 
-EmbeddedBoundaryGeometry<DIM>::~EmbeddedBoundaryGeometry<DIM>()
+EmbeddedBoundaryGeometry<DIM>::~EmbeddedBoundaryGeometry()
 {
 }
 
diff --git a/include/EmbeddedBoundaryGeometry.h b/include/EmbeddedBoundaryGeometry.h
old mode 100644
new mode 100755
diff --git a/include/EmbeddedBoundaryShape.C b/include/EmbeddedBoundaryShape.C
index 92a0670..2135bca 100644
--- a/include/EmbeddedBoundaryShape.C
+++ b/include/EmbeddedBoundaryShape.C
@@ -33,7 +33,7 @@ template<int DIM> EmbeddedBoundaryShape<DIM>::EmbeddedBoundaryShape()
 {
 }
 
-template<int DIM> EmbeddedBoundaryShape<DIM>::~EmbeddedBoundaryShape<DIM>()
+template<int DIM> EmbeddedBoundaryShape<DIM>::~EmbeddedBoundaryShape()
 {   
 }
 
diff --git a/include/EmbeddedBoundaryShapePolygon.C b/include/EmbeddedBoundaryShapePolygon.C
index 2e94042..e18aad2 100644
--- a/include/EmbeddedBoundaryShapePolygon.C
+++ b/include/EmbeddedBoundaryShapePolygon.C
@@ -39,7 +39,7 @@ EmbeddedBoundaryShapePolygon<DIM>::EmbeddedBoundaryShapePolygon(
 }
 
 template<int DIM>      
-EmbeddedBoundaryShapePolygon<DIM>::~EmbeddedBoundaryShapePolygon<DIM>()
+EmbeddedBoundaryShapePolygon<DIM>::~EmbeddedBoundaryShapePolygon()
 {  
 }
 
diff --git a/include/EmbeddedBoundaryShapeSphere.h b/include/EmbeddedBoundaryShapeSphere.h
index 0f9664c..f2c0b62 100644
--- a/include/EmbeddedBoundaryShapeSphere.h
+++ b/include/EmbeddedBoundaryShapeSphere.h
@@ -62,7 +62,7 @@ public:
    /*!
     * The destructor does nothing.
     */
-   ~EmbeddedBoundaryShapeSphere<DIM>();
+   ~EmbeddedBoundaryShapeSphere();
 
    /*!
     * Concrete implementation of the isInside() method defined by the
diff --git a/include/EmptyAlgorithmX.C b/include/EmptyAlgorithmX.C
index 9b9795d..98e1e1a 100644
--- a/include/EmptyAlgorithmX.C
+++ b/include/EmptyAlgorithmX.C
@@ -14,6 +14,12 @@
 namespace SAMRAI {
    namespace algs {
       template<int DIM> class Empty {
+	 Empty() :
+	    something(0) 
+	 {
+	 }
+
+	 int something;
       };
 
       template class Empty< NDIM >;
diff --git a/include/EmptyAppUtilsX.C b/include/EmptyAppUtilsX.C
index 93fd14d..995382a 100644
--- a/include/EmptyAppUtilsX.C
+++ b/include/EmptyAppUtilsX.C
@@ -14,6 +14,12 @@
 namespace SAMRAI {
    namespace appu {
       template<int DIM> class Empty {
+	 Empty() :
+	    something(0) 
+	 {
+	 }
+
+	 int something;
       };
 
       template class Empty< NDIM >;
diff --git a/include/EmptyGeometryX.C b/include/EmptyGeometryX.C
index 9165e43..601487c 100644
--- a/include/EmptyGeometryX.C
+++ b/include/EmptyGeometryX.C
@@ -14,6 +14,12 @@
 namespace SAMRAI {
    namespace geom {
       template<int DIM> class Empty {
+	 Empty() :
+	    something(0) 
+	 {
+	 }
+
+	 int something;
       };
 
       template class Empty< NDIM >;
diff --git a/include/EmptyHierarchyX.C b/include/EmptyHierarchyX.C
index d8f8a22..85b1857 100644
--- a/include/EmptyHierarchyX.C
+++ b/include/EmptyHierarchyX.C
@@ -14,6 +14,12 @@
 namespace SAMRAI {
    namespace hier {
       template<int DIM> class Empty {
+	 Empty() :
+	    something(0) 
+	 {
+	 }
+
+	 int something;
       };
 
       template class Empty< NDIM >;
diff --git a/include/EmptyMathOpsX.C b/include/EmptyMathOpsX.C
index 4d14944..40a8801 100644
--- a/include/EmptyMathOpsX.C
+++ b/include/EmptyMathOpsX.C
@@ -14,6 +14,12 @@
 namespace SAMRAI {
    namespace math {
       template<int DIM> class Empty {
+	 Empty() :
+	    something(0) 
+	 {
+	 }
+
+	 int something;
       };
 
       template class Empty< NDIM >;
diff --git a/include/EmptyMeshX.C b/include/EmptyMeshX.C
index f9f513c..d065dff 100644
--- a/include/EmptyMeshX.C
+++ b/include/EmptyMeshX.C
@@ -14,6 +14,12 @@
 namespace SAMRAI {
    namespace mesh {
       template<int DIM> class Empty {
+	 Empty() :
+	    something(0) 
+	 {
+	 }
+
+	 int something;
       };
 
       template class Empty< NDIM >;
diff --git a/include/EmptyPatchDataX.C b/include/EmptyPatchDataX.C
index d696aee..5d9f665 100644
--- a/include/EmptyPatchDataX.C
+++ b/include/EmptyPatchDataX.C
@@ -14,6 +14,12 @@
 namespace SAMRAI {
    namespace pdat {
       template<int DIM> class Empty {
+	 Empty() :
+	    something(0) 
+	 {
+	 }
+
+	 int something;
       };
 
       template class Empty< NDIM >;
diff --git a/include/EmptySolversX.C b/include/EmptySolversX.C
index c0abd23..9190fe7 100644
--- a/include/EmptySolversX.C
+++ b/include/EmptySolversX.C
@@ -14,6 +14,12 @@
 namespace SAMRAI {
    namespace solv {
       template<int DIM> class Empty {
+	 Empty() :
+	    something(0) 
+	 {
+	 }
+
+	 int something;
       };
 
       template class Empty< NDIM >;
diff --git a/include/EmptyTransferX.C b/include/EmptyTransferX.C
index 955f3fb..fed18f1 100644
--- a/include/EmptyTransferX.C
+++ b/include/EmptyTransferX.C
@@ -14,6 +14,12 @@
 namespace SAMRAI {
    namespace xfer {
       template<int DIM> class Empty {
+	 Empty() :
+	    something(0) 
+	 {
+	 }
+
+	 int something;
       };
 
       template class Empty< NDIM >;
diff --git a/include/FACOperatorStrategy.h b/include/FACOperatorStrategy.h
index 09f1d08..29aac61 100644
--- a/include/FACOperatorStrategy.h
+++ b/include/FACOperatorStrategy.h
@@ -49,7 +49,7 @@ public:
    /*!
     * @brief Virtual destructor.
     */
-   virtual ~FACOperatorStrategy<DIM>();
+   virtual ~FACOperatorStrategy();
 
    //@{
    /*!
diff --git a/include/FACPreconditioner.C b/include/FACPreconditioner.C
index af374cd..5843f17 100644
--- a/include/FACPreconditioner.C
+++ b/include/FACPreconditioner.C
@@ -152,18 +152,22 @@ template<int DIM> void FACPreconditioner<DIM>::deallocateSolverState( )
       d_patch_hierarchy.setNull();
 
       if ( d_error_vector ) {
+         d_error_vector->resetLevels(d_error_vector->getCoarsestLevelNumber(), std::min(d_error_vector->getFinestLevelNumber(),d_error_vector->getPatchHierarchy()->getFinestLevelNumber()));
          d_error_vector->freeVectorComponents();
          d_error_vector.setNull();
       }
       if ( d_tmp_error ) {
+         d_tmp_error->resetLevels(d_tmp_error->getCoarsestLevelNumber(), std::min(d_tmp_error->getFinestLevelNumber(),d_tmp_error->getPatchHierarchy()->getFinestLevelNumber()));
          d_tmp_error->freeVectorComponents();
          d_tmp_error.setNull();
       }
       if ( d_residual_vector ) {
+         d_residual_vector->resetLevels(d_residual_vector->getCoarsestLevelNumber(), std::min(d_residual_vector->getFinestLevelNumber(),d_residual_vector->getPatchHierarchy()->getFinestLevelNumber()));
          d_residual_vector->freeVectorComponents();
          d_residual_vector.setNull();
       }
       if ( d_tmp_residual ) {
+         d_tmp_residual->resetLevels(d_tmp_residual->getCoarsestLevelNumber(), std::min(d_tmp_residual->getFinestLevelNumber(),d_tmp_residual->getPatchHierarchy()->getFinestLevelNumber()));
          d_tmp_residual->freeVectorComponents();
          d_tmp_residual.setNull();
       }
diff --git a/include/FACPreconditioner.h b/include/FACPreconditioner.h
index b0de597..877f56e 100644
--- a/include/FACPreconditioner.h
+++ b/include/FACPreconditioner.h
@@ -71,7 +71,7 @@ public:
    /*!
     * Virtual destructor.
     */
-   virtual ~FACPreconditioner<DIM>();
+   virtual ~FACPreconditioner();
 
    /*!
     * @brief Solve linear system Au=f using the FAC algorithm.
diff --git a/include/FaceComplexConstantRefine.h b/include/FaceComplexConstantRefine.h
index 1e69208..f020972 100644
--- a/include/FaceComplexConstantRefine.h
+++ b/include/FaceComplexConstantRefine.h
@@ -49,7 +49,7 @@ public:
    /**
     * Uninteresting virtual destructor.
     */
-   virtual ~FaceComplexConstantRefine<DIM>();
+   virtual ~FaceComplexConstantRefine();
 
    /**
     * Return true if the variable and name string match face-centered 
diff --git a/include/FaceComplexLinearTimeInterpolateOp.h b/include/FaceComplexLinearTimeInterpolateOp.h
index f0edcb3..eeff61c 100644
--- a/include/FaceComplexLinearTimeInterpolateOp.h
+++ b/include/FaceComplexLinearTimeInterpolateOp.h
@@ -46,7 +46,7 @@ public:
    /**
     * Uninteresting virtual destructor.
     */
-   virtual ~FaceComplexLinearTimeInterpolateOp<DIM>();
+   virtual ~FaceComplexLinearTimeInterpolateOp();
 
    /**
     * Return true if the variable and name string match the standard
diff --git a/include/FaceData.h b/include/FaceData.h
index 39043df..d5b1916 100644
--- a/include/FaceData.h
+++ b/include/FaceData.h
@@ -131,7 +131,7 @@ public:
    /*!
     * @brief The virtual destructor for a face data object.
     */
-   virtual ~FaceData<DIM,TYPE>();
+   virtual ~FaceData();
 
    /*!
     * @brief Return the depth (e.g., the number of components in each spatial
diff --git a/include/FaceDataFactory.h b/include/FaceDataFactory.h
index fb56484..0f0dcd3 100644
--- a/include/FaceDataFactory.h
+++ b/include/FaceDataFactory.h
@@ -55,7 +55,7 @@ public:
    /**
     * Virtual destructor for the face data factory class.
     */
-   virtual ~FaceDataFactory<DIM,TYPE>();
+   virtual ~FaceDataFactory();
 
    /**
     * @brief Abstract virtual function to clone a patch data factory.
diff --git a/include/FaceDoubleConstantRefine.h b/include/FaceDoubleConstantRefine.h
index e6c1b68..275fd78 100644
--- a/include/FaceDoubleConstantRefine.h
+++ b/include/FaceDoubleConstantRefine.h
@@ -49,7 +49,7 @@ public:
    /**
     * Uninteresting virtual destructor.
     */
-   virtual ~FaceDoubleConstantRefine<DIM>();
+   virtual ~FaceDoubleConstantRefine();
 
    /**
     * Return true if the variable and name string match face-centered 
diff --git a/include/FaceDoubleLinearTimeInterpolateOp.h b/include/FaceDoubleLinearTimeInterpolateOp.h
index 1653e2a..d5e9da2 100644
--- a/include/FaceDoubleLinearTimeInterpolateOp.h
+++ b/include/FaceDoubleLinearTimeInterpolateOp.h
@@ -46,7 +46,7 @@ public:
    /**
     * Uninteresting virtual destructor.
     */
-   virtual ~FaceDoubleLinearTimeInterpolateOp<DIM>();
+   virtual ~FaceDoubleLinearTimeInterpolateOp();
 
    /**
     * Return true if the variable and name string match the standard
diff --git a/include/FaceFloatConstantRefine.h b/include/FaceFloatConstantRefine.h
index b0296ff..8465a67 100644
--- a/include/FaceFloatConstantRefine.h
+++ b/include/FaceFloatConstantRefine.h
@@ -49,7 +49,7 @@ public:
    /**
     * Uninteresting virtual destructor.
     */
-   virtual ~FaceFloatConstantRefine<DIM>();
+   virtual ~FaceFloatConstantRefine();
 
    /**
     * Return true if the variable and name string match face-centered 
diff --git a/include/FaceFloatLinearTimeInterpolateOp.h b/include/FaceFloatLinearTimeInterpolateOp.h
index bd18aff..ca07533 100644
--- a/include/FaceFloatLinearTimeInterpolateOp.h
+++ b/include/FaceFloatLinearTimeInterpolateOp.h
@@ -46,7 +46,7 @@ public:
    /**
     * Uninteresting virtual destructor.
     */
-   virtual ~FaceFloatLinearTimeInterpolateOp<DIM>();
+   virtual ~FaceFloatLinearTimeInterpolateOp();
 
    /**
     * Return true if the variable and name string match the standard
diff --git a/include/FaceGeometry.h b/include/FaceGeometry.h
index 9e3202f..9719f00 100644
--- a/include/FaceGeometry.h
+++ b/include/FaceGeometry.h
@@ -64,7 +64,7 @@ public:
    /*!
     * @brief The virtual destructor does nothing interesting.
     */
-   virtual ~FaceGeometry<DIM>();
+   virtual ~FaceGeometry();
 
    /*!
     * @brief Compute the overlap in face-centered index space between
diff --git a/include/FaceIndex.h b/include/FaceIndex.h
index d2a3af6..a43e47d 100644
--- a/include/FaceIndex.h
+++ b/include/FaceIndex.h
@@ -59,7 +59,7 @@ public:
    /**
     * The face index destructor does nothing interesting.
     */
-   ~FaceIndex<DIM>();
+   ~FaceIndex();
 
    /**
     * Get the axis for which this face index is defined (X=0, Y=1, Z=2).
diff --git a/include/FaceIntegerConstantRefine.h b/include/FaceIntegerConstantRefine.h
index 4a4d05e..8d203f2 100644
--- a/include/FaceIntegerConstantRefine.h
+++ b/include/FaceIntegerConstantRefine.h
@@ -49,7 +49,7 @@ public:
    /**
     * Uninteresting virtual destructor.
     */
-   virtual ~FaceIntegerConstantRefine<DIM>();
+   virtual ~FaceIntegerConstantRefine();
 
    /**
     * Return true if the variable and name string match face-centered 
diff --git a/include/FaceIterator.h b/include/FaceIterator.h
index e9e5d5f..6d5110d 100644
--- a/include/FaceIterator.h
+++ b/include/FaceIterator.h
@@ -67,7 +67,7 @@ public:
    /**
     * Destructor for the face iterator.
     */
-   ~FaceIterator<DIM>();
+   ~FaceIterator();
 
    /**
     * Extract the face index corresponding to the iterator position in the box.
diff --git a/include/FaceOverlap.h b/include/FaceOverlap.h
index a696176..eb47bd3 100644
--- a/include/FaceOverlap.h
+++ b/include/FaceOverlap.h
@@ -45,7 +45,7 @@ public:
     * The virtual destructor does nothing interesting except deallocate
     * box data.
     */
-   virtual ~FaceOverlap<DIM>();
+   virtual ~FaceOverlap();
 
    /**
     * Return whether there is an empty intersection between the two
diff --git a/include/FaceVariable.h b/include/FaceVariable.h
index ebe1480..5f7ef54 100644
--- a/include/FaceVariable.h
+++ b/include/FaceVariable.h
@@ -62,7 +62,7 @@ public:
    /*!
     * @brief Virtual destructor for face variable objects.
     */
-   virtual ~FaceVariable<DIM,TYPE>();
+   virtual ~FaceVariable();
 
    /*!
     * @brief Return boolean indicating which face data values (coarse
diff --git a/include/Geometry.h b/include/Geometry.h
index 01597bd..7101c8b 100644
--- a/include/Geometry.h
+++ b/include/Geometry.h
@@ -67,7 +67,7 @@ public:
     * The virtual destructor for the geometry base class does
     * nothing interesting.
     */
-   virtual ~Geometry<DIM>();
+   virtual ~Geometry();
 
    /**
     * Add concrete spatial coarsening operator instance to appropriate
diff --git a/include/GhostCellRobinBcCoefs.h b/include/GhostCellRobinBcCoefs.h
index ab8bdc6..a9f32b0 100644
--- a/include/GhostCellRobinBcCoefs.h
+++ b/include/GhostCellRobinBcCoefs.h
@@ -83,7 +83,7 @@ public:
    /*!
     * @brief Destructor.
     */
-   virtual ~GhostCellRobinBcCoefs<DIM>(void);
+   virtual ~GhostCellRobinBcCoefs();
 
 
    /*!
diff --git a/include/GriddingAlgorithm.C b/include/GriddingAlgorithm.C
index 18cc32f..792d323 100644
--- a/include/GriddingAlgorithm.C
+++ b/include/GriddingAlgorithm.C
@@ -1215,6 +1215,10 @@ template<int DIM> void GriddingAlgorithm<DIM>::regridFinerLevel(
          hierarchy->makeNewPatchLevel(fine_level_number, ratio,
                                       fine_boxes, mapping);
 
+         if (d_check_overlapping_patches != 'i') {
+            checkOverlappingPatches( hierarchy->getPatchLevel(fine_level_number) );
+         }
+
          // "false" argument": const bool initial_time = false;
          d_tag_init_strategy->initializeLevelData(hierarchy,
                                                   fine_level_number,
@@ -2624,7 +2628,7 @@ template<int DIM> void GriddingAlgorithm<DIM>::getFromInput(
    }
 
    d_check_overlapping_patches =
-      db->getCharWithDefault( "check_overplapping_patches",
+      db->getCharWithDefault( "check_overlapping_patches",
                               d_check_overlapping_patches );
    if ( d_check_overlapping_patches != 'i' &&
         d_check_overlapping_patches != 'w' &&
diff --git a/include/GriddingAlgorithm.h b/include/GriddingAlgorithm.h
index 5c87e21..2862a4c 100644
--- a/include/GriddingAlgorithm.h
+++ b/include/GriddingAlgorithm.h
@@ -335,7 +335,7 @@ public:
    /*!
     * Virtual destructor for GriddingAlgorithm<DIM>.
     */
-   virtual ~GriddingAlgorithm<DIM>();
+   virtual ~GriddingAlgorithm();
 
    /*!
     * This routine will attempt to construct the coarsest level in an AMR
diff --git a/include/HierarchyCellDataOpsComplex.h b/include/HierarchyCellDataOpsComplex.h
index 79a6afe..0bfaf72 100644
--- a/include/HierarchyCellDataOpsComplex.h
+++ b/include/HierarchyCellDataOpsComplex.h
@@ -78,7 +78,7 @@ public:
    /**
     * Virtual destructor for the HierarchyCellDataOpsComplex<DIM> class.
     */
-   virtual ~HierarchyCellDataOpsComplex<DIM>();
+   virtual ~HierarchyCellDataOpsComplex();
 
    /**
     * Reset patch hierarchy over which operations occur.
diff --git a/include/HierarchyCellDataOpsInteger.h b/include/HierarchyCellDataOpsInteger.h
index 9f5b883..d021eb0 100644
--- a/include/HierarchyCellDataOpsInteger.h
+++ b/include/HierarchyCellDataOpsInteger.h
@@ -77,7 +77,7 @@ public:
    /**
     * Virtual destructor for the HierarchyCellDataOpsInteger<DIM> class.
     */
-   virtual ~HierarchyCellDataOpsInteger<DIM>();
+   virtual ~HierarchyCellDataOpsInteger();
 
    /**
     * Reset patch hierarchy over which operations occur.
diff --git a/include/HierarchyCellDataOpsReal.h b/include/HierarchyCellDataOpsReal.h
index 5998f9f..f8893ff 100644
--- a/include/HierarchyCellDataOpsReal.h
+++ b/include/HierarchyCellDataOpsReal.h
@@ -77,7 +77,7 @@ public:
    /**
     * Virtual destructor for the HierarchyCellDataOpsReal<DIM> class.
     */
-   virtual ~HierarchyCellDataOpsReal<DIM,TYPE>();
+   virtual ~HierarchyCellDataOpsReal();
 
    /**
     * Reset patch hierarchy over which operations occur.
diff --git a/include/HierarchyDataOpsComplex.h b/include/HierarchyDataOpsComplex.h
index f4643a3..9ddb1d5 100644
--- a/include/HierarchyDataOpsComplex.h
+++ b/include/HierarchyDataOpsComplex.h
@@ -55,7 +55,7 @@ public:
    /**
     * Virtual destructor for the HierarchyDataOpsComplex<DIM> class.
     */
-   virtual ~HierarchyDataOpsComplex<DIM>();
+   virtual ~HierarchyDataOpsComplex();
 
    /**
     * Reset patch hierarchy over which operations occur.
diff --git a/include/HierarchyDataOpsInteger.h b/include/HierarchyDataOpsInteger.h
index 2b1eec6..6a18a98 100644
--- a/include/HierarchyDataOpsInteger.h
+++ b/include/HierarchyDataOpsInteger.h
@@ -55,7 +55,7 @@ public:
    /**
     * Virtual destructor for the HierarchyDataOpsInteger<DIM> class.
     */
-   virtual ~HierarchyDataOpsInteger<DIM>();
+   virtual ~HierarchyDataOpsInteger();
 
    /**
     * Reset patch hierarchy over which operations occur.
diff --git a/include/HierarchyDataOpsManager.h b/include/HierarchyDataOpsManager.h
index 596799e..832435e 100644
--- a/include/HierarchyDataOpsManager.h
+++ b/include/HierarchyDataOpsManager.h
@@ -173,7 +173,7 @@ protected:
     * The destructor for HierarchyDataOpsManager<DIM> is protected.  
     * See the comments for the constructor.
     */
-   virtual ~HierarchyDataOpsManager<DIM>();
+   virtual ~HierarchyDataOpsManager();
 
    /**
     * Initialize Singleton instance with instance of subclass.  This function
diff --git a/include/HierarchyDataOpsReal.h b/include/HierarchyDataOpsReal.h
index 6b62f1b..a6e687b 100644
--- a/include/HierarchyDataOpsReal.h
+++ b/include/HierarchyDataOpsReal.h
@@ -56,7 +56,7 @@ public:
    /**
     * Virtual destructor for the HierarchyDataOpsReal<DIM> class.
     */
-   virtual ~HierarchyDataOpsReal<DIM,TYPE>();
+   virtual ~HierarchyDataOpsReal();
 
    /**
     * Reset patch hierarchy over which operations occur.
@@ -329,6 +329,13 @@ public:
                     const int vol_id = -1,
 		    bool local_only=false) const = 0;
 
+   /**
+    * Return the integral of the function represented by the data array.
+    * The return value is the sum \f$\sum_i ( data_i * vol_i )\f$.
+    */
+   virtual TYPE integral(const int data_id,
+                         const int vol_id) const = 0;
+
    /**
     * Return 1 if \f$\|data2_i\| > 0\f$ and \f$data1_i * data2_i \leq 0\f$, for
     * any \f$i\f$ in the set of patch data indices, where \f$cvol_i > 0\f$.  Otherwise,
diff --git a/include/HierarchyEdgeDataOpsComplex.C b/include/HierarchyEdgeDataOpsComplex.C
index 6ac0432..30b1a86 100644
--- a/include/HierarchyEdgeDataOpsComplex.C
+++ b/include/HierarchyEdgeDataOpsComplex.C
@@ -67,11 +67,11 @@ template<int DIM> void HierarchyEdgeDataOpsComplex<DIM>::setPatchHierarchy(
    d_hierarchy = hierarchy;
 }
 
-template<int DIM> void HierarchyEdgeDataOpsComplex<DIM>::resetLevels(
+template<int DIM>
+void HierarchyEdgeDataOpsComplex<DIM>::resetLevels(
    const int coarsest_level,
    const int finest_level)
 {
-   int i;
 #ifdef DEBUG_CHECK_ASSERTIONS
    TBOX_ASSERT(!d_hierarchy.isNull());
    TBOX_ASSERT(   (coarsest_level >= 0)
@@ -82,6 +82,16 @@ template<int DIM> void HierarchyEdgeDataOpsComplex<DIM>::resetLevels(
    d_coarsest_level = coarsest_level;
    d_finest_level = finest_level;
 
+   for (int d = 0; d < DIM; d++) {
+      d_nonoverlapping_edge_boxes[d].resizeArray(0);
+   }
+}
+
+template<int DIM>
+void HierarchyEdgeDataOpsComplex<DIM>::maybeResetOverlappingBoxLists() const
+{
+   if (d_nonoverlapping_edge_boxes[0].size() > 0)
+      return;
    for (int d = 0; d < DIM; d++) {
       d_nonoverlapping_edge_boxes[d].resizeArray(d_finest_level+1);
    }
@@ -93,7 +103,7 @@ template<int DIM> void HierarchyEdgeDataOpsComplex<DIM>::resetLevels(
       for (int nd = 0; nd < DIM; nd++ ) {
          edge_boxes = level->getBoxes();
          const int n = edge_boxes.getNumberOfBoxes();
-         for (i = 0; i < n; i++) {
+         for (int i = 0; i < n; i++) {
             edge_boxes[i] =
                pdat::EdgeGeometry<DIM>::toEdgeBox(edge_boxes[i], nd);
          }
@@ -633,6 +643,7 @@ template<int DIM> int HierarchyEdgeDataOpsComplex<DIM>::numberOfEntries(
           && (d_finest_level >= d_coarsest_level)
           && (d_finest_level <= d_hierarchy->getFinestLevelNumber()) );
 #endif
+   maybeResetOverlappingBoxLists();
 
    int entries = 0;
 
diff --git a/include/HierarchyEdgeDataOpsComplex.h b/include/HierarchyEdgeDataOpsComplex.h
index 5b7d5aa..74bf886 100644
--- a/include/HierarchyEdgeDataOpsComplex.h
+++ b/include/HierarchyEdgeDataOpsComplex.h
@@ -78,7 +78,7 @@ public:
    /**
     * Virtual destructor for the HierarchyEdgeDataOpsComplex<DIM> class.
     */
-   virtual ~HierarchyEdgeDataOpsComplex<DIM>();
+   virtual ~HierarchyEdgeDataOpsComplex();
 
    /**
     * Reset patch hierarchy over which operations occur.
@@ -346,10 +346,20 @@ private:
    tbox::Pointer< hier::PatchHierarchy<DIM> > d_hierarchy;
    int  d_coarsest_level;
    int  d_finest_level; 
-   tbox::Array< tbox::Array< hier::BoxList<DIM> > > d_nonoverlapping_edge_boxes[DIM];
+   mutable tbox::Array< tbox::Array< hier::BoxList<DIM> > > d_nonoverlapping_edge_boxes[DIM];
 
    PatchEdgeDataOpsComplex<DIM> d_patch_ops;
 
+   /*!
+    * Set d_nonoverlapping_side_boxes to the correct value.
+    *
+    * d_nonoverlapping_side_boxes is extremely expensive to compute, and for
+    * whatever reason SAMRAI calls resetLevels() in most linear algebra
+    * functions: this results in, for problems with lots of patches, the
+    * majority of runtime being spent recomputing overlap repeatedly in
+    * solvers when we never actually need the information.
+    */
+   void maybeResetOverlappingBoxLists() const;
 };
 
 }
diff --git a/include/HierarchyEdgeDataOpsInteger.C b/include/HierarchyEdgeDataOpsInteger.C
index e9dfc15..a5af80e 100644
--- a/include/HierarchyEdgeDataOpsInteger.C
+++ b/include/HierarchyEdgeDataOpsInteger.C
@@ -72,7 +72,6 @@ template<int DIM> void HierarchyEdgeDataOpsInteger<DIM>::resetLevels(
    const int coarsest_level,
    const int finest_level)
 {
-   int i;
 #ifdef DEBUG_CHECK_ASSERTIONS
    TBOX_ASSERT(!d_hierarchy.isNull());
    TBOX_ASSERT(   (coarsest_level >= 0)
@@ -83,6 +82,16 @@ template<int DIM> void HierarchyEdgeDataOpsInteger<DIM>::resetLevels(
    d_coarsest_level = coarsest_level;
    d_finest_level = finest_level;
 
+   for (int d = 0; d < DIM; d++) {
+      d_nonoverlapping_edge_boxes[d].resizeArray(0);
+   }
+}
+
+template<int DIM>
+void HierarchyEdgeDataOpsInteger<DIM>::maybeResetOverlappingBoxLists() const
+{
+   if (d_nonoverlapping_edge_boxes[0].size() > 0)
+      return;
    for (int d = 0; d < DIM; d++) {
       d_nonoverlapping_edge_boxes[d].resizeArray(d_finest_level+1);
    }
@@ -94,7 +103,7 @@ template<int DIM> void HierarchyEdgeDataOpsInteger<DIM>::resetLevels(
 
       for (int nd = 0; nd < DIM; nd++ ) {
          edge_boxes = level->getBoxes();
-         for (i = 0; i < n; i++) {
+         for (int i = 0; i < n; i++) {
             edge_boxes[i] =
                pdat::EdgeGeometry<DIM>::toEdgeBox(edge_boxes[i], nd);
          }
@@ -129,6 +138,7 @@ template<int DIM> int HierarchyEdgeDataOpsInteger<DIM>::numberOfEntries(
           && (d_finest_level >= d_coarsest_level)
           && (d_finest_level <= d_hierarchy->getFinestLevelNumber()) );
 #endif
+   maybeResetOverlappingBoxLists();
 
    int entries = 0;
 
diff --git a/include/HierarchyEdgeDataOpsInteger.h b/include/HierarchyEdgeDataOpsInteger.h
index 74e7b1e..db9b32f 100644
--- a/include/HierarchyEdgeDataOpsInteger.h
+++ b/include/HierarchyEdgeDataOpsInteger.h
@@ -77,7 +77,7 @@ public:
    /**
     * Virtual destructor for the HierarchyEdgeDataOpsInteger<DIM> class.
     */
-   virtual ~HierarchyEdgeDataOpsInteger<DIM>();
+   virtual ~HierarchyEdgeDataOpsInteger();
 
    /**
     * Reset patch hierarchy over which operations occur.
@@ -263,10 +263,20 @@ private:
    tbox::Pointer< hier::PatchHierarchy<DIM> > d_hierarchy;
    int  d_coarsest_level;
    int  d_finest_level; 
-   tbox::Array< tbox::Array< hier::BoxList<DIM> > > d_nonoverlapping_edge_boxes[DIM];
+   mutable tbox::Array< tbox::Array< hier::BoxList<DIM> > > d_nonoverlapping_edge_boxes[DIM];
 
    PatchEdgeDataOpsInteger<DIM> d_patch_ops;
 
+   /*!
+    * Set d_nonoverlapping_side_boxes to the correct value.
+    *
+    * d_nonoverlapping_side_boxes is extremely expensive to compute, and for
+    * whatever reason SAMRAI calls resetLevels() in most linear algebra
+    * functions: this results in, for problems with lots of patches, the
+    * majority of runtime being spent recomputing overlap repeatedly in
+    * solvers when we never actually need the information.
+    */
+   void maybeResetOverlappingBoxLists() const;
 };
 
 }
diff --git a/include/HierarchyEdgeDataOpsReal.C b/include/HierarchyEdgeDataOpsReal.C
index 1eab323..2287d8f 100644
--- a/include/HierarchyEdgeDataOpsReal.C
+++ b/include/HierarchyEdgeDataOpsReal.C
@@ -75,7 +75,6 @@ void HierarchyEdgeDataOpsReal<DIM,TYPE>::resetLevels(
    const int coarsest_level,
    const int finest_level)
 {
-   int i;
 #ifdef DEBUG_CHECK_ASSERTIONS
    TBOX_ASSERT(!d_hierarchy.isNull());
    TBOX_ASSERT(   (coarsest_level >= 0)
@@ -86,6 +85,16 @@ void HierarchyEdgeDataOpsReal<DIM,TYPE>::resetLevels(
    d_coarsest_level = coarsest_level;
    d_finest_level = finest_level;
 
+   for (int d = 0; d < DIM; d++) {
+      d_nonoverlapping_edge_boxes[d].resizeArray(0);
+   }
+}
+
+template<int DIM, class TYPE>
+void HierarchyEdgeDataOpsReal<DIM,TYPE>::maybeResetOverlappingBoxLists() const
+{
+   if (d_nonoverlapping_edge_boxes[0].size() > 0)
+      return;
    for (int d = 0; d < DIM; d++) {
       d_nonoverlapping_edge_boxes[d].resizeArray(d_finest_level+1);
    }
@@ -97,7 +106,7 @@ void HierarchyEdgeDataOpsReal<DIM,TYPE>::resetLevels(
 
       for (int nd = 0; nd < DIM; nd++ ) {
          edge_boxes = level->getBoxes();
-         for (i = 0; i < n; i++) {
+         for (int i = 0; i < n; i++) {
             edge_boxes[i] =
                pdat::EdgeGeometry<DIM>::toEdgeBox(edge_boxes[i], nd);
          }
@@ -680,6 +689,7 @@ int HierarchyEdgeDataOpsReal<DIM,TYPE>::numberOfEntries(
           && (d_finest_level >= d_coarsest_level)
           && (d_finest_level <= d_hierarchy->getFinestLevelNumber()) );
 #endif
+   maybeResetOverlappingBoxLists();
 
    int entries = 0;
 
diff --git a/include/HierarchyEdgeDataOpsReal.h b/include/HierarchyEdgeDataOpsReal.h
index dc375ca..e0deaf6 100644
--- a/include/HierarchyEdgeDataOpsReal.h
+++ b/include/HierarchyEdgeDataOpsReal.h
@@ -78,7 +78,7 @@ public:
    /**
     * Virtual destructor for the HierarchyEdgeDataOpsReal<DIM> class.
     */
-   virtual ~HierarchyEdgeDataOpsReal<DIM,TYPE>();
+   virtual ~HierarchyEdgeDataOpsReal();
 
    /**
     * Reset patch hierarchy over which operations occur.
@@ -433,10 +433,20 @@ private:
    tbox::Pointer< hier::PatchHierarchy<DIM> > d_hierarchy;
    int  d_coarsest_level;
    int  d_finest_level; 
-   tbox::Array< tbox::Array< hier::BoxList<DIM> > > d_nonoverlapping_edge_boxes[DIM];
+   mutable tbox::Array< tbox::Array< hier::BoxList<DIM> > > d_nonoverlapping_edge_boxes[DIM];
 
    PatchEdgeDataOpsReal<DIM,TYPE> d_patch_ops;
 
+   /*!
+    * Set d_nonoverlapping_side_boxes to the correct value.
+    *
+    * d_nonoverlapping_side_boxes is extremely expensive to compute, and for
+    * whatever reason SAMRAI calls resetLevels() in most linear algebra
+    * functions: this results in, for problems with lots of patches, the
+    * majority of runtime being spent recomputing overlap repeatedly in
+    * solvers when we never actually need the information.
+    */
+   void maybeResetOverlappingBoxLists() const;
 };
 
 }
diff --git a/include/HierarchyFaceDataOpsComplex.h b/include/HierarchyFaceDataOpsComplex.h
index 3b7a445..ef3696f 100644
--- a/include/HierarchyFaceDataOpsComplex.h
+++ b/include/HierarchyFaceDataOpsComplex.h
@@ -78,7 +78,7 @@ public:
    /**
     * Virtual destructor for the HierarchyFaceDataOpsComplex<DIM> class.
     */
-   virtual ~HierarchyFaceDataOpsComplex<DIM>();
+   virtual ~HierarchyFaceDataOpsComplex();
 
    /**
     * Reset patch hierarchy over which operations occur.
diff --git a/include/HierarchyFaceDataOpsInteger.h b/include/HierarchyFaceDataOpsInteger.h
index 0d5cdcc..fc910b6 100644
--- a/include/HierarchyFaceDataOpsInteger.h
+++ b/include/HierarchyFaceDataOpsInteger.h
@@ -77,7 +77,7 @@ public:
    /**
     * Virtual destructor for the HierarchyFaceDataOpsInteger<DIM> class.
     */
-   virtual ~HierarchyFaceDataOpsInteger<DIM>();
+   virtual ~HierarchyFaceDataOpsInteger();
 
    /**
     * Reset patch hierarchy over which operations occur.
diff --git a/include/HierarchyFaceDataOpsReal.h b/include/HierarchyFaceDataOpsReal.h
index 1a4c9d6..e0b3a95 100644
--- a/include/HierarchyFaceDataOpsReal.h
+++ b/include/HierarchyFaceDataOpsReal.h
@@ -78,7 +78,7 @@ public:
    /**
     * Virtual destructor for the HierarchyFaceDataOpsReal<DIM> class.
     */
-   virtual ~HierarchyFaceDataOpsReal<DIM,TYPE>();
+   virtual ~HierarchyFaceDataOpsReal();
 
    /**
     * Reset patch hierarchy over which operations occur.
diff --git a/include/HierarchyNodeDataOpsComplex.C b/include/HierarchyNodeDataOpsComplex.C
index 6a5f38b..cdf36be 100644
--- a/include/HierarchyNodeDataOpsComplex.C
+++ b/include/HierarchyNodeDataOpsComplex.C
@@ -81,6 +81,14 @@ template<int DIM> void HierarchyNodeDataOpsComplex<DIM>::resetLevels(
    d_coarsest_level = coarsest_level;
    d_finest_level = finest_level;
 
+   d_nonoverlapping_node_boxes.resizeArray(0);
+}
+
+template<int DIM>
+void HierarchyNodeDataOpsComplex<DIM>::maybeResetOverlappingBoxLists() const
+{
+   if (d_nonoverlapping_node_boxes.size() > 0)
+      return;
    d_nonoverlapping_node_boxes.resizeArray(d_finest_level+1);
 
    for (int ln = d_coarsest_level; ln <= d_finest_level; ln++) {
@@ -627,6 +635,7 @@ template<int DIM> int HierarchyNodeDataOpsComplex<DIM>::numberOfEntries(
           && (d_finest_level >= d_coarsest_level)
           && (d_finest_level <= d_hierarchy->getFinestLevelNumber()) );
 #endif
+   maybeResetOverlappingBoxLists();
 
    int entries = 0;
 
diff --git a/include/HierarchyNodeDataOpsComplex.h b/include/HierarchyNodeDataOpsComplex.h
index 2f52b80..1534cb6 100644
--- a/include/HierarchyNodeDataOpsComplex.h
+++ b/include/HierarchyNodeDataOpsComplex.h
@@ -77,7 +77,7 @@ public:
    /**
     * Virtual destructor for the HierarchyNodeDataOpsComplex<DIM> class.
     */
-   virtual ~HierarchyNodeDataOpsComplex<DIM>();
+   virtual ~HierarchyNodeDataOpsComplex();
 
    /**
     * Reset patch hierarchy over which operations occur.
@@ -345,10 +345,20 @@ private:
    tbox::Pointer< hier::PatchHierarchy<DIM> > d_hierarchy;
    int  d_coarsest_level;
    int  d_finest_level; 
-   tbox::Array< tbox::Array< hier::BoxList<DIM> > > d_nonoverlapping_node_boxes;
+   mutable tbox::Array< tbox::Array< hier::BoxList<DIM> > > d_nonoverlapping_node_boxes;
 
    PatchNodeDataOpsComplex<DIM> d_patch_ops;
 
+   /*!
+    * Set d_nonoverlapping_side_boxes to the correct value.
+    *
+    * d_nonoverlapping_side_boxes is extremely expensive to compute, and for
+    * whatever reason SAMRAI calls resetLevels() in most linear algebra
+    * functions: this results in, for problems with lots of patches, the
+    * majority of runtime being spent recomputing overlap repeatedly in
+    * solvers when we never actually need the information.
+    */
+   void maybeResetOverlappingBoxLists() const;
 };
 
 }
diff --git a/include/HierarchyNodeDataOpsInteger.C b/include/HierarchyNodeDataOpsInteger.C
index 667c482..42f3a38 100644
--- a/include/HierarchyNodeDataOpsInteger.C
+++ b/include/HierarchyNodeDataOpsInteger.C
@@ -82,6 +82,14 @@ template<int DIM> void HierarchyNodeDataOpsInteger<DIM>::resetLevels(
    d_coarsest_level = coarsest_level;
    d_finest_level = finest_level;
 
+   d_nonoverlapping_node_boxes.resizeArray(0);
+}
+
+template<int DIM>
+void HierarchyNodeDataOpsInteger<DIM>::maybeResetOverlappingBoxLists() const
+{
+   if (d_nonoverlapping_node_boxes.size() > 0)
+      return;
    d_nonoverlapping_node_boxes.resizeArray(d_finest_level+1);
 
    for (int ln = d_coarsest_level; ln <= d_finest_level; ln++) {
@@ -123,6 +131,7 @@ template<int DIM> int HierarchyNodeDataOpsInteger<DIM>::numberOfEntries(
           && (d_finest_level >= d_coarsest_level)
           && (d_finest_level <= d_hierarchy->getFinestLevelNumber()) );
 #endif
+   maybeResetOverlappingBoxLists();
 
    int entries = 0;
 
diff --git a/include/HierarchyNodeDataOpsInteger.h b/include/HierarchyNodeDataOpsInteger.h
index 6ef3b31..5ffb592 100644
--- a/include/HierarchyNodeDataOpsInteger.h
+++ b/include/HierarchyNodeDataOpsInteger.h
@@ -76,7 +76,7 @@ public:
    /**
     * Virtual destructor for the HierarchyNodeDataOpsInteger<DIM> class.
     */
-   virtual ~HierarchyNodeDataOpsInteger<DIM>();
+   virtual ~HierarchyNodeDataOpsInteger();
 
    /**
     * Reset patch hierarchy over which operations occur.
@@ -262,10 +262,20 @@ private:
    tbox::Pointer< hier::PatchHierarchy<DIM> > d_hierarchy;
    int  d_coarsest_level;
    int  d_finest_level; 
-   tbox::Array< tbox::Array< hier::BoxList<DIM> > > d_nonoverlapping_node_boxes;
+   mutable tbox::Array< tbox::Array< hier::BoxList<DIM> > > d_nonoverlapping_node_boxes;
 
    PatchNodeDataOpsInteger<DIM> d_patch_ops;
 
+   /*!
+    * Set d_nonoverlapping_side_boxes to the correct value.
+    *
+    * d_nonoverlapping_side_boxes is extremely expensive to compute, and for
+    * whatever reason SAMRAI calls resetLevels() in most linear algebra
+    * functions: this results in, for problems with lots of patches, the
+    * majority of runtime being spent recomputing overlap repeatedly in
+    * solvers when we never actually need the information.
+    */
+   void maybeResetOverlappingBoxLists() const;
 };
 
 }
diff --git a/include/HierarchyNodeDataOpsReal.C b/include/HierarchyNodeDataOpsReal.C
index 2cc867c..89a2caa 100644
--- a/include/HierarchyNodeDataOpsReal.C
+++ b/include/HierarchyNodeDataOpsReal.C
@@ -87,6 +87,14 @@ void HierarchyNodeDataOpsReal<DIM,TYPE>::resetLevels(
    d_coarsest_level = coarsest_level;
    d_finest_level = finest_level;
 
+   d_nonoverlapping_node_boxes.resizeArray(0);
+}
+
+template<int DIM, class TYPE>
+void HierarchyNodeDataOpsReal<DIM,TYPE>::maybeResetOverlappingBoxLists() const
+{
+   if (d_nonoverlapping_node_boxes.size() > 0)
+      return;
    d_nonoverlapping_node_boxes.resizeArray(d_finest_level+1);
 
    for (int ln = d_coarsest_level; ln <= d_finest_level; ln++) {
@@ -675,6 +683,7 @@ int HierarchyNodeDataOpsReal<DIM,TYPE>::numberOfEntries(
           && (d_finest_level >= d_coarsest_level)
           && (d_finest_level <= d_hierarchy->getFinestLevelNumber()) );
 #endif
+   maybeResetOverlappingBoxLists();
 
    int entries = 0;
 
diff --git a/include/HierarchyNodeDataOpsReal.h b/include/HierarchyNodeDataOpsReal.h
index 2723e5e..a72698f 100644
--- a/include/HierarchyNodeDataOpsReal.h
+++ b/include/HierarchyNodeDataOpsReal.h
@@ -80,7 +80,7 @@ public:
    /**
     * Virtual destructor for the HierarchyNodeDataOpsReal<DIM> class.
     */
-   virtual ~HierarchyNodeDataOpsReal<DIM,TYPE>();
+   virtual ~HierarchyNodeDataOpsReal();
 
    /**
     * Reset patch hierarchy over which operations occur.
@@ -435,10 +435,20 @@ private:
    tbox::Pointer< hier::PatchHierarchy<DIM> > d_hierarchy;
    int  d_coarsest_level;
    int  d_finest_level; 
-   tbox::Array< tbox::Array< hier::BoxList<DIM> > > d_nonoverlapping_node_boxes;
+   mutable tbox::Array< tbox::Array< hier::BoxList<DIM> > > d_nonoverlapping_node_boxes;
 
    PatchNodeDataOpsReal<DIM,TYPE> d_patch_ops;
 
+   /*!
+    * Set d_nonoverlapping_side_boxes to the correct value.
+    *
+    * d_nonoverlapping_side_boxes is extremely expensive to compute, and for
+    * whatever reason SAMRAI calls resetLevels() in most linear algebra
+    * functions: this results in, for problems with lots of patches, the
+    * majority of runtime being spent recomputing overlap repeatedly in
+    * solvers when we never actually need the information.
+    */
+   void maybeResetOverlappingBoxLists() const;
 };
 
 }
diff --git a/include/HierarchySideDataOpsComplex.C b/include/HierarchySideDataOpsComplex.C
index 0d7e1da..77750e1 100644
--- a/include/HierarchySideDataOpsComplex.C
+++ b/include/HierarchySideDataOpsComplex.C
@@ -71,7 +71,6 @@ template<int DIM> void HierarchySideDataOpsComplex<DIM>::resetLevels(
    const int coarsest_level,
    const int finest_level)
 {
-   int i;
 #ifdef DEBUG_CHECK_ASSERTIONS
    TBOX_ASSERT(!d_hierarchy.isNull());
    TBOX_ASSERT(   (coarsest_level >= 0)
@@ -82,6 +81,16 @@ template<int DIM> void HierarchySideDataOpsComplex<DIM>::resetLevels(
    d_coarsest_level = coarsest_level;
    d_finest_level = finest_level;
 
+   for (int d = 0; d < DIM; d++) {
+      d_nonoverlapping_side_boxes[d].resizeArray(0);
+   }
+}
+
+template<int DIM>
+void HierarchySideDataOpsComplex<DIM>::maybeResetOverlappingBoxLists() const
+{
+   if (d_nonoverlapping_side_boxes[0].size() > 0)
+      return;
    for (int d = 0; d < DIM; d++) {
       d_nonoverlapping_side_boxes[d].resizeArray(d_finest_level+1);
    }
@@ -93,7 +102,7 @@ template<int DIM> void HierarchySideDataOpsComplex<DIM>::resetLevels(
 
       for (int nd = 0; nd < DIM; nd++) {
          side_boxes = level->getBoxes();
-         for (i = 0; i < n; i++) {
+         for (int i = 0; i < n; i++) {
             side_boxes[i] =
                pdat::SideGeometry<DIM>::toSideBox(side_boxes[i], nd);
          }
@@ -635,6 +644,7 @@ template<int DIM> int HierarchySideDataOpsComplex<DIM>::numberOfEntries(
           && (d_finest_level >= d_coarsest_level)
           && (d_finest_level <= d_hierarchy->getFinestLevelNumber()) );
 #endif
+   maybeResetOverlappingBoxLists();
 
    int entries = 0;
 
diff --git a/include/HierarchySideDataOpsComplex.h b/include/HierarchySideDataOpsComplex.h
index fa1c9bc..799317b 100644
--- a/include/HierarchySideDataOpsComplex.h
+++ b/include/HierarchySideDataOpsComplex.h
@@ -78,7 +78,7 @@ public:
    /**
     * Virtual destructor for the HierarchySideDataOpsComplex<DIM> class.
     */
-   virtual ~HierarchySideDataOpsComplex<DIM>();
+   virtual ~HierarchySideDataOpsComplex();
 
    /**
     * Reset patch hierarchy over which operations occur.
@@ -346,10 +346,20 @@ private:
    tbox::Pointer< hier::PatchHierarchy<DIM> > d_hierarchy;
    int  d_coarsest_level;
    int  d_finest_level; 
-   tbox::Array< tbox::Array< hier::BoxList<DIM> > > d_nonoverlapping_side_boxes[DIM];
+   mutable tbox::Array< tbox::Array< hier::BoxList<DIM> > > d_nonoverlapping_side_boxes[DIM];
 
    PatchSideDataOpsComplex<DIM> d_patch_ops;
 
+   /*!
+    * Set d_nonoverlapping_side_boxes to the correct value.
+    *
+    * d_nonoverlapping_side_boxes is extremely expensive to compute, and for
+    * whatever reason SAMRAI calls resetLevels() in most linear algebra
+    * functions: this results in, for problems with lots of patches, the
+    * majority of runtime being spent recomputing overlap repeatedly in
+    * solvers when we never actually need the information.
+    */
+   void maybeResetOverlappingBoxLists() const;
 };
 
 }
diff --git a/include/HierarchySideDataOpsInteger.C b/include/HierarchySideDataOpsInteger.C
index e344a68..b42e08d 100644
--- a/include/HierarchySideDataOpsInteger.C
+++ b/include/HierarchySideDataOpsInteger.C
@@ -72,7 +72,6 @@ template<int DIM> void HierarchySideDataOpsInteger<DIM>::resetLevels(
    const int coarsest_level,
    const int finest_level)
 {
-   int i;
 #ifdef DEBUG_CHECK_ASSERTIONS
    TBOX_ASSERT(!d_hierarchy.isNull());
    TBOX_ASSERT(   (coarsest_level >= 0)
@@ -83,6 +82,16 @@ template<int DIM> void HierarchySideDataOpsInteger<DIM>::resetLevels(
    d_coarsest_level = coarsest_level;
    d_finest_level = finest_level;
 
+   for (int d = 0; d < DIM; d++) {
+      d_nonoverlapping_side_boxes[d].resizeArray(0);
+   }
+}
+
+template<int DIM>
+void HierarchySideDataOpsInteger<DIM>::maybeResetOverlappingBoxLists() const
+{
+   if (d_nonoverlapping_side_boxes[0].size() > 0)
+      return;
    for (int d = 0; d < DIM; d++) {
       d_nonoverlapping_side_boxes[d].resizeArray(d_finest_level+1);
    }
@@ -94,7 +103,7 @@ template<int DIM> void HierarchySideDataOpsInteger<DIM>::resetLevels(
 
       for (int nd = 0; nd < DIM; nd++) {
          side_boxes = level->getBoxes();
-         for (i = 0; i < n; i++) {
+         for (int i = 0; i < n; i++) {
             side_boxes[i] =
                pdat::SideGeometry<DIM>::toSideBox(side_boxes[i], nd);
          }
@@ -129,6 +138,7 @@ template<int DIM> int HierarchySideDataOpsInteger<DIM>::numberOfEntries(
           && (d_finest_level >= d_coarsest_level)
           && (d_finest_level <= d_hierarchy->getFinestLevelNumber()) );
 #endif
+   maybeResetOverlappingBoxLists();
 
    int entries = 0;
 
diff --git a/include/HierarchySideDataOpsInteger.h b/include/HierarchySideDataOpsInteger.h
index 438f44e..be73919 100644
--- a/include/HierarchySideDataOpsInteger.h
+++ b/include/HierarchySideDataOpsInteger.h
@@ -77,7 +77,7 @@ public:
    /**
     * Virtual destructor for the HierarchySideDataOpsInteger<DIM> class.
     */
-   virtual ~HierarchySideDataOpsInteger<DIM>();
+   virtual ~HierarchySideDataOpsInteger();
 
    /**
     * Reset patch hierarchy over which operations occur.
@@ -263,10 +263,20 @@ private:
    tbox::Pointer< hier::PatchHierarchy<DIM> > d_hierarchy;
    int  d_coarsest_level;
    int  d_finest_level; 
-   tbox::Array< tbox::Array< hier::BoxList<DIM> > > d_nonoverlapping_side_boxes[DIM];
+   mutable tbox::Array< tbox::Array< hier::BoxList<DIM> > > d_nonoverlapping_side_boxes[DIM];
 
    PatchSideDataOpsInteger<DIM> d_patch_ops;
 
+   /*!
+    * Set d_nonoverlapping_side_boxes to the correct value.
+    *
+    * d_nonoverlapping_side_boxes is extremely expensive to compute, and for
+    * whatever reason SAMRAI calls resetLevels() in most linear algebra
+    * functions: this results in, for problems with lots of patches, the
+    * majority of runtime being spent recomputing overlap repeatedly in
+    * solvers when we never actually need the information.
+    */
+   void maybeResetOverlappingBoxLists() const;
 };
 
 }
diff --git a/include/HierarchySideDataOpsReal.C b/include/HierarchySideDataOpsReal.C
index 7385ae9..68a4940 100644
--- a/include/HierarchySideDataOpsReal.C
+++ b/include/HierarchySideDataOpsReal.C
@@ -75,7 +75,6 @@ void HierarchySideDataOpsReal<DIM,TYPE>::resetLevels(
    const int coarsest_level,
    const int finest_level)
 {
-   int i;
 #ifdef DEBUG_CHECK_ASSERTIONS
    TBOX_ASSERT(!d_hierarchy.isNull());
    TBOX_ASSERT(   (coarsest_level >= 0)
@@ -86,6 +85,16 @@ void HierarchySideDataOpsReal<DIM,TYPE>::resetLevels(
    d_coarsest_level = coarsest_level;
    d_finest_level = finest_level;
 
+   for (int d = 0; d < DIM; d++) {
+      d_nonoverlapping_side_boxes[d].resizeArray(0);
+   }
+}
+
+template<int DIM, class TYPE>
+void HierarchySideDataOpsReal<DIM,TYPE>::maybeResetOverlappingBoxLists() const
+{
+   if (d_nonoverlapping_side_boxes[0].size() > 0)
+      return;
    for (int d = 0; d < DIM; d++) {
       d_nonoverlapping_side_boxes[d].resizeArray(d_finest_level+1);
    }
@@ -97,7 +106,7 @@ void HierarchySideDataOpsReal<DIM,TYPE>::resetLevels(
 
       for (int nd = 0; nd < DIM; nd++) {
          side_boxes = level->getBoxes();
-         for (i = 0; i < n; i++) {
+         for (int i = 0; i < n; i++) {
             side_boxes[i] =
                pdat::SideGeometry<DIM>::toSideBox(side_boxes[i], nd);
          }
@@ -682,6 +691,7 @@ int HierarchySideDataOpsReal<DIM,TYPE>::numberOfEntries(
           && (d_finest_level >= d_coarsest_level)
           && (d_finest_level <= d_hierarchy->getFinestLevelNumber()) );
 #endif
+   maybeResetOverlappingBoxLists();
 
    int entries = 0;
 
diff --git a/include/HierarchySideDataOpsReal.h b/include/HierarchySideDataOpsReal.h
index 7b23294..6695589 100644
--- a/include/HierarchySideDataOpsReal.h
+++ b/include/HierarchySideDataOpsReal.h
@@ -76,7 +76,7 @@ public:
    /**
     * Virtual destructor for the HierarchySideDataOpsReal<DIM> class.
     */
-   virtual ~HierarchySideDataOpsReal<DIM,TYPE>();
+   virtual ~HierarchySideDataOpsReal();
 
    /**
     * Reset patch hierarchy over which operations occur.
@@ -433,10 +433,20 @@ private:
    tbox::Pointer< hier::PatchHierarchy<DIM> > d_hierarchy;
    int  d_coarsest_level;
    int  d_finest_level; 
-   tbox::Array< tbox::Array< hier::BoxList<DIM> > > d_nonoverlapping_side_boxes[DIM];
+   mutable tbox::Array< tbox::Array< hier::BoxList<DIM> > > d_nonoverlapping_side_boxes[DIM];
 
    PatchSideDataOpsReal<DIM,TYPE> d_patch_ops;
 
+   /*!
+    * Set d_nonoverlapping_side_boxes to the correct value.
+    *
+    * d_nonoverlapping_side_boxes is extremely expensive to compute, and for
+    * whatever reason SAMRAI calls resetLevels() in most linear algebra
+    * functions: this results in, for problems with lots of patches, the
+    * majority of runtime being spent recomputing overlap repeatedly in
+    * solvers when we never actually need the information.
+    */
+   void maybeResetOverlappingBoxLists() const;
 };
 
 }
diff --git a/include/HistogramBox.h b/include/HistogramBox.h
index c99ce5e..48e47a3 100644
--- a/include/HistogramBox.h
+++ b/include/HistogramBox.h
@@ -69,7 +69,7 @@ public:
    /**
     * Destructor for the HistogramBox.
     */
-   ~HistogramBox<DIM>();
+   ~HistogramBox();
 
    /*!
     * Given histogram information in a box region, determine smallest
diff --git a/include/HyperbolicLevelIntegrator.h b/include/HyperbolicLevelIntegrator.h
index 1d6f2f3..8652595 100644
--- a/include/HyperbolicLevelIntegrator.h
+++ b/include/HyperbolicLevelIntegrator.h
@@ -218,7 +218,7 @@ public:
     * The destructor for HyperbolicLevelIntegrator<DIM> unregisters 
     * the integrator object with the restart manager when so registered.
     */
-   virtual ~HyperbolicLevelIntegrator<DIM>();
+   virtual ~HyperbolicLevelIntegrator();
 
    /**
     * Initialize level integrator by by setting the number of time levels 
diff --git a/include/HyperbolicPatchStrategy.h b/include/HyperbolicPatchStrategy.h
index 99b20d4..bdbaf54 100644
--- a/include/HyperbolicPatchStrategy.h
+++ b/include/HyperbolicPatchStrategy.h
@@ -71,7 +71,7 @@ public:
    /**
     * Virtual destructor for HyperbolicPatchStrategy<DIM>.
     */
-   virtual ~HyperbolicPatchStrategy<DIM>();
+   virtual ~HyperbolicPatchStrategy();
 
    /**
     * Register specific variables needed in the numerical routines with the 
diff --git a/include/ImplicitEquationStrategy.h b/include/ImplicitEquationStrategy.h
index baf518e..a0a7a6d 100644
--- a/include/ImplicitEquationStrategy.h
+++ b/include/ImplicitEquationStrategy.h
@@ -47,7 +47,7 @@ public:
    /**
     * Empty destructor for ImplicitEquationStrategy<DIM>
     */
-   virtual ~ImplicitEquationStrategy<DIM>();
+   virtual ~ImplicitEquationStrategy();
 
    /**
     * Add components to the solution vector to define the state of the 
diff --git a/include/ImplicitIntegrator.h b/include/ImplicitIntegrator.h
index 1a63b69..a1e60f2 100644
--- a/include/ImplicitIntegrator.h
+++ b/include/ImplicitIntegrator.h
@@ -93,7 +93,7 @@ public:
    /**
     * Empty destructor for ImplicitIntegrator<DIM>
     */
-   virtual ~ImplicitIntegrator<DIM>();
+   virtual ~ImplicitIntegrator();
 
    /**
     * Initialize state of time integrator.  This includes creating
diff --git a/include/IndexData.I b/include/IndexData.I
index 572a46e..e914729 100644
--- a/include/IndexData.I
+++ b/include/IndexData.I
@@ -117,6 +117,20 @@ const TYPE& IndexIterator<DIM,TYPE,BOX_GEOMETRY>::operator()() const
    return(*d_node->d_item);
 }
 
+template<int DIM, class TYPE, class BOX_GEOMETRY>
+inline
+TYPE& IndexIterator<DIM,TYPE,BOX_GEOMETRY>::getItem()
+{
+   return(*d_node->d_item);
+}
+
+template<int DIM, class TYPE, class BOX_GEOMETRY>
+inline
+const hier::Index<DIM>& IndexIterator<DIM,TYPE,BOX_GEOMETRY>::getIndex() const
+{
+    return(d_node->d_index);
+}
+
 template<int DIM, class TYPE, class BOX_GEOMETRY>
 inline
 IndexIterator<DIM,TYPE,BOX_GEOMETRY>::operator bool() const
diff --git a/include/IndexData.h b/include/IndexData.h
index 37b62fe..76b2d40 100644
--- a/include/IndexData.h
+++ b/include/IndexData.h
@@ -120,7 +120,7 @@ public:
    /**
     * The virtual destructor for an IndexData object.
     */
-   virtual ~IndexData<DIM,TYPE,BOX_GEOMETRY>();
+   virtual ~IndexData();
 
    /**
     * A fast copy between the source and destination.  All data is copied
@@ -390,7 +390,7 @@ public:
       IndexDataNode<DIM,TYPE,BOX_GEOMETRY> *n,
       IndexDataNode<DIM,TYPE,BOX_GEOMETRY> *p);
 
-   virtual ~IndexDataNode<DIM,TYPE,BOX_GEOMETRY>();
+   virtual ~IndexDataNode();
 
 private:
    hier::Index<DIM> d_index;
@@ -451,7 +451,7 @@ public:
    /**
     * Destructor for the index list iterator.
     */
-   ~IndexIterator<DIM,TYPE,BOX_GEOMETRY>();
+   ~IndexIterator();
 
    /**
     * Return the current item in the irregular index set.
@@ -577,7 +577,7 @@ public:
    /**
     * Destructor for the index list iterator.
     */
-   ~ConstIndexIterator<DIM,TYPE,BOX_GEOMETRY>();
+   ~ConstIndexIterator();
 
    /**
     * Return the current item in the irregular index set.
diff --git a/include/IndexDataFactory.h b/include/IndexDataFactory.h
index 151208f..9fdb4d4 100644
--- a/include/IndexDataFactory.h
+++ b/include/IndexDataFactory.h
@@ -51,7 +51,7 @@ public:
    /**
     * Virtual destructor for the irregular data factory class.
     */
-   virtual ~IndexDataFactory<DIM,TYPE,BOX_GEOMETRY>();
+   virtual ~IndexDataFactory();
 
    /**
     * @brief Abstract virtual function to clone a patch data factory.
diff --git a/include/IndexVariable.h b/include/IndexVariable.h
index 81098bf..c89a911 100644
--- a/include/IndexVariable.h
+++ b/include/IndexVariable.h
@@ -54,7 +54,7 @@ public:
    /**
     * Virtual destructor for index variable objects.
     */
-   virtual ~IndexVariable<DIM,TYPE,BOX_GEOMETRY>();
+   virtual ~IndexVariable();
 
    /**
     * Return true so that the index data quantities will always be treated as cell-
diff --git a/include/KINSOL_SAMRAIContext.h b/include/KINSOL_SAMRAIContext.h
index 41ccb83..31c7d7f 100644
--- a/include/KINSOL_SAMRAIContext.h
+++ b/include/KINSOL_SAMRAIContext.h
@@ -175,7 +175,7 @@ public:
     * Destructor for algs::KINSOL_SAMRAIContext destroys the KINSOL 
     * C++ wrapper object and the KINSOL solution vector wrapper.
     */
-   ~KINSOL_SAMRAIContext<DIM>();
+   ~KINSOL_SAMRAIContext();
 
    /**
     * Initialize the state of KINSOL based on vector argument representing 
diff --git a/include/LoadBalanceStrategy.h b/include/LoadBalanceStrategy.h
index 80c4c7d..4cbeaf0 100644
--- a/include/LoadBalanceStrategy.h
+++ b/include/LoadBalanceStrategy.h
@@ -46,7 +46,7 @@ public:
    /*!
     * This virtual destructor does nothing interesting.
     */
-   virtual ~LoadBalanceStrategy<DIM>();
+   virtual ~LoadBalanceStrategy();
 
    /*!
     * Indicate whether load balancing procedure for given level depends on
diff --git a/include/LoadBalancer.h b/include/LoadBalancer.h
index 5251fb2..81ddcd1 100644
--- a/include/LoadBalancer.h
+++ b/include/LoadBalancer.h
@@ -178,7 +178,7 @@ public:
    /*!
     * The virtual destructor releases all internal storage.
     */
-   virtual ~LoadBalancer<DIM>();
+   virtual ~LoadBalancer();
 
    /*!
     * Set the max workload factor for either the specified level or all
diff --git a/include/LocallyActiveDataCoarsenAlgorithm.h b/include/LocallyActiveDataCoarsenAlgorithm.h
index ae15fb7..b67435c 100644
--- a/include/LocallyActiveDataCoarsenAlgorithm.h
+++ b/include/LocallyActiveDataCoarsenAlgorithm.h
@@ -123,7 +123,7 @@ public:
    /*!
     * The virtual destructor for the algorithm releases all internal storage.
     */
-   virtual ~LocallyActiveDataCoarsenAlgorithm<DIM>();
+   virtual ~LocallyActiveDataCoarsenAlgorithm();
 
    /*!
     * Register a coarsening operation with the coarsening algorithm.  Data
diff --git a/include/LocallyActiveDataCoarsenSchedule.h b/include/LocallyActiveDataCoarsenSchedule.h
index 56a5998..c04f5ab 100644
--- a/include/LocallyActiveDataCoarsenSchedule.h
+++ b/include/LocallyActiveDataCoarsenSchedule.h
@@ -127,7 +127,7 @@ public:
    /*!
     * The virtual destructor for the schedule releases all internal storage.
     */
-   virtual ~LocallyActiveDataCoarsenSchedule<DIM>();
+   virtual ~LocallyActiveDataCoarsenSchedule();
 
    /*!
     * Execute the stored communication schedule and perform the data movement.
diff --git a/include/LocallyActiveDataFillBox.h b/include/LocallyActiveDataFillBox.h
index 17f868b..435c620 100644
--- a/include/LocallyActiveDataFillBox.h
+++ b/include/LocallyActiveDataFillBox.h
@@ -79,7 +79,7 @@ public:
    /*!
     * The destructor releases all box and locally-active data storage.
     */
-   virtual ~LocallyActiveDataFillBox<DIM>();
+   virtual ~LocallyActiveDataFillBox();
 
    /*!
     * Return constant reference to box maintained by this object.
diff --git a/include/LocallyActiveDataFillBoxSet.h b/include/LocallyActiveDataFillBoxSet.h
index 9201448..d0738c7 100644
--- a/include/LocallyActiveDataFillBoxSet.h
+++ b/include/LocallyActiveDataFillBoxSet.h
@@ -63,7 +63,7 @@ public:
    /*!
     * The destructor releases all box and locally-active data storage.
     */
-   virtual ~LocallyActiveDataFillBoxSet<DIM>();
+   virtual ~LocallyActiveDataFillBoxSet();
 
    /*!
     * Clears all existing box and locally-active data information for calling object 
diff --git a/include/LocallyActiveDataPatchBoundaryEdgeSum.h b/include/LocallyActiveDataPatchBoundaryEdgeSum.h
index de3a5d9..270842c 100644
--- a/include/LocallyActiveDataPatchBoundaryEdgeSum.h
+++ b/include/LocallyActiveDataPatchBoundaryEdgeSum.h
@@ -109,7 +109,7 @@ public:
    /*!
     *  @brief Destructor for the schedule releases all internal storage.
     */
-   ~LocallyActiveDataPatchBoundaryEdgeSum<DIM>();
+   ~LocallyActiveDataPatchBoundaryEdgeSum();
 
    /*!
     *  @brief Register edge data with given patch data identifier for summing.
diff --git a/include/LocallyActiveDataPatchBoundaryNodeSum.h b/include/LocallyActiveDataPatchBoundaryNodeSum.h
index 86a14b0..ffd5942 100644
--- a/include/LocallyActiveDataPatchBoundaryNodeSum.h
+++ b/include/LocallyActiveDataPatchBoundaryNodeSum.h
@@ -115,7 +115,7 @@ public:
    /*!
     *  @brief Destructor for the schedule releases all internal storage.
     */
-   ~LocallyActiveDataPatchBoundaryNodeSum<DIM>();
+   ~LocallyActiveDataPatchBoundaryNodeSum();
 
    /*!
     *  @brief Register node data with given patch data identifier for summing.
diff --git a/include/LocallyActiveDataPatchLevelManager.h b/include/LocallyActiveDataPatchLevelManager.h
index c424ae7..39677b5 100644
--- a/include/LocallyActiveDataPatchLevelManager.h
+++ b/include/LocallyActiveDataPatchLevelManager.h
@@ -560,7 +560,7 @@ public:
    /*!
     * Destructor for the iterator releases all internal storage.
     */
-   ~LocallyActiveDataPatchLevelIterator<DIM>();
+   ~LocallyActiveDataPatchLevelIterator();
 
    /*!
     * Extract the integer patch index corresponding to the current patch in 
diff --git a/include/LocallyActiveDataRefineAlgorithm.h b/include/LocallyActiveDataRefineAlgorithm.h
index 7bd6c30..aa69d47 100644
--- a/include/LocallyActiveDataRefineAlgorithm.h
+++ b/include/LocallyActiveDataRefineAlgorithm.h
@@ -120,7 +120,7 @@ public:
    /*!
     * The virtual destructor for the algorithm releases all internal storage.
     */
-   virtual ~LocallyActiveDataRefineAlgorithm<DIM>();
+   virtual ~LocallyActiveDataRefineAlgorithm();
 
    /*!
     * Register a refine operation with the refine algorithm object.  This 
diff --git a/include/LocallyActiveDataRefineSchedule.h b/include/LocallyActiveDataRefineSchedule.h
index 5f42b82..ef6aaa3 100644
--- a/include/LocallyActiveDataRefineSchedule.h
+++ b/include/LocallyActiveDataRefineSchedule.h
@@ -203,7 +203,7 @@ public:
    /*!
     * Virtual destructor for the schedule releases all internal storage.
     */
-   virtual ~LocallyActiveDataRefineSchedule<DIM>();
+   virtual ~LocallyActiveDataRefineSchedule();
 
    /*!
     * @brief Execute the stored communication schedule and perform
diff --git a/include/LocationIndexRobinBcCoefs.h b/include/LocationIndexRobinBcCoefs.h
index 9b5e28e..f98f49b 100644
--- a/include/LocationIndexRobinBcCoefs.h
+++ b/include/LocationIndexRobinBcCoefs.h
@@ -92,7 +92,7 @@ public:
    /*!
     * @brief Destructor.
     */
-   virtual ~LocationIndexRobinBcCoefs<DIM>(void);
+   virtual ~LocationIndexRobinBcCoefs();
 
 
    /*!
diff --git a/include/MBDataUtilities.h b/include/MBDataUtilities.h
index 9887ec4..1685e77 100644
--- a/include/MBDataUtilities.h
+++ b/include/MBDataUtilities.h
@@ -45,7 +45,7 @@ public:
     */
    MBDataUtilities();
 
-   virtual ~MBDataUtilities<DIM,TYPE>();
+   virtual ~MBDataUtilities();
 
    /*!
     * @brief Translate and copy cell data from src to dst according the shift
diff --git a/include/MBUtilities.h b/include/MBUtilities.h
index 780476a..7d20a74 100644
--- a/include/MBUtilities.h
+++ b/include/MBUtilities.h
@@ -36,7 +36,7 @@ public:
    /*!
     * Virtual destructor does nothing
     */
-   virtual ~MBUtilities<DIM>();
+   virtual ~MBUtilities();
 
    /*!
     * @brief Copy patch data from src to dst using the shift and rotate
diff --git a/include/MblkPatchBoundaryNodeSum.h b/include/MblkPatchBoundaryNodeSum.h
index f8fe91d..009ebae 100644
--- a/include/MblkPatchBoundaryNodeSum.h
+++ b/include/MblkPatchBoundaryNodeSum.h
@@ -89,7 +89,7 @@ public:
    /*!
     *  @brief Destructor for the schedule releases all internal storage.
     */
-   ~MblkPatchBoundaryNodeSum<DIM>();
+   ~MblkPatchBoundaryNodeSum();
 
    /*!
     *  @brief Register node data with given patch data identifier for summing.
diff --git a/include/MethodOfLinesIntegrator.h b/include/MethodOfLinesIntegrator.h
index d0cc31b..21d741d 100644
--- a/include/MethodOfLinesIntegrator.h
+++ b/include/MethodOfLinesIntegrator.h
@@ -152,7 +152,7 @@ public:
     * The destructor for MethodOfLinesIntegrator<DIM> unregisters
     * the integrator object with the restart manager when so registered.
     */
-   virtual ~MethodOfLinesIntegrator<DIM>();
+   virtual ~MethodOfLinesIntegrator();
 
    /*!
     * Initialize integrator by setting the number of time levels
diff --git a/include/MethodOfLinesPatchStrategy.h b/include/MethodOfLinesPatchStrategy.h
index d121ec1..e9ea5dd 100644
--- a/include/MethodOfLinesPatchStrategy.h
+++ b/include/MethodOfLinesPatchStrategy.h
@@ -61,7 +61,7 @@ public:
    /*!
     * Virtual destructor for MethodOfLinesPatchStrategy<DIM>.
     */
-   virtual ~MethodOfLinesPatchStrategy<DIM>() = 0;
+   virtual ~MethodOfLinesPatchStrategy() = 0;
 
    /*!
     * Register variables specific to the problem to be solved with the 
diff --git a/include/MultiblockCellDataTranslator.h b/include/MultiblockCellDataTranslator.h
index 0d389da..61e9669 100644
--- a/include/MultiblockCellDataTranslator.h
+++ b/include/MultiblockCellDataTranslator.h
@@ -33,7 +33,7 @@ public:
    /*!
     * @brief The virtual destructor does nothing interesting.
     */
-   virtual ~MultiblockCellDataTranslator<DIM,TYPE>();
+   virtual ~MultiblockCellDataTranslator();
 
    virtual void translateAndCopyData(
       hier::Patch<DIM>& dst_patch,
diff --git a/include/MultiblockCoarsenAlgorithm.h b/include/MultiblockCoarsenAlgorithm.h
index 592822f..219d31f 100644
--- a/include/MultiblockCoarsenAlgorithm.h
+++ b/include/MultiblockCoarsenAlgorithm.h
@@ -108,7 +108,7 @@ public:
    /*!
     * The virtual destructor for the algorithm releases all internal storage.
     */
-   virtual ~MultiblockCoarsenAlgorithm<DIM>();
+   virtual ~MultiblockCoarsenAlgorithm();
 
    /*!
     * Register a coarsening operation with the coarsening algorithm.  Data
diff --git a/include/MultiblockCoarsenPatchStrategy.h b/include/MultiblockCoarsenPatchStrategy.h
index b165777..679e122 100644
--- a/include/MultiblockCoarsenPatchStrategy.h
+++ b/include/MultiblockCoarsenPatchStrategy.h
@@ -50,7 +50,7 @@ public:
    /*!
     * The virtual destructor for coarsen strategy does nothing interesting.
     */
-   virtual ~MultiblockCoarsenPatchStrategy<DIM>();
+   virtual ~MultiblockCoarsenPatchStrategy();
 
    /*!
     * Return maximum stencil width needed over all user-defined
diff --git a/include/MultiblockCoarsenSchedule.h b/include/MultiblockCoarsenSchedule.h
index 5f352ef..61d733d 100644
--- a/include/MultiblockCoarsenSchedule.h
+++ b/include/MultiblockCoarsenSchedule.h
@@ -109,7 +109,7 @@ public:
     * @brief The virtual destructor for the schedule releases all internal
     *        storage.
     */
-   virtual ~MultiblockCoarsenSchedule<DIM>();
+   virtual ~MultiblockCoarsenSchedule();
 
    /*!
     * @brief Execute the stored communication schedule and perform the data
diff --git a/include/MultiblockDataTranslator.h b/include/MultiblockDataTranslator.h
index 5af9dc9..5513ae0 100644
--- a/include/MultiblockDataTranslator.h
+++ b/include/MultiblockDataTranslator.h
@@ -38,7 +38,7 @@ public:
    /*!
     * @brief The virtual destructor does nothing interesting.
     */
-   virtual ~MultiblockDataTranslator<DIM>();
+   virtual ~MultiblockDataTranslator();
 
    virtual void translateAndCopyData(
       Patch<DIM>& dst_patch,
diff --git a/include/MultiblockEdgeDataTranslator.h b/include/MultiblockEdgeDataTranslator.h
index 38a1abe..25ac43a 100644
--- a/include/MultiblockEdgeDataTranslator.h
+++ b/include/MultiblockEdgeDataTranslator.h
@@ -34,7 +34,7 @@ public:
    /*!
     * @brief The virtual destructor does nothing interesting.
     */
-   virtual ~MultiblockEdgeDataTranslator<DIM,TYPE>();
+   virtual ~MultiblockEdgeDataTranslator();
 
    virtual void translateAndCopyData(
       hier::Patch<DIM>& dst_patch,
diff --git a/include/MultiblockFaceDataTranslator.h b/include/MultiblockFaceDataTranslator.h
index 289b20c..be67671 100644
--- a/include/MultiblockFaceDataTranslator.h
+++ b/include/MultiblockFaceDataTranslator.h
@@ -34,7 +34,7 @@ public:
    /*!
     * @brief The virtual destructor does nothing interesting.
     */
-   virtual ~MultiblockFaceDataTranslator<DIM,TYPE>();
+   virtual ~MultiblockFaceDataTranslator();
 
    virtual void translateAndCopyData(
       hier::Patch<DIM>& dst_patch,
diff --git a/include/MultiblockGridGeometry.h b/include/MultiblockGridGeometry.h
index d6d0a56..557e8ba 100644
--- a/include/MultiblockGridGeometry.h
+++ b/include/MultiblockGridGeometry.h
@@ -38,7 +38,7 @@ public:
    /*!
     * @brief The virtual destructor does nothing interesting.
     */
-   virtual ~MultiblockGridGeometry<DIM>();
+   virtual ~MultiblockGridGeometry();
 
    tbox::Pointer< hier::GridGeometry<DIM> >& getBlockGeometry(const int block)
    {
diff --git a/include/MultiblockGriddingAlgorithm.h b/include/MultiblockGriddingAlgorithm.h
index 8efc731..b779f36 100644
--- a/include/MultiblockGriddingAlgorithm.h
+++ b/include/MultiblockGriddingAlgorithm.h
@@ -297,7 +297,7 @@ public:
    /*!
     * Virtual destructor for MultiblockGriddingAlgorithm<DIM>.
     */
-   virtual ~MultiblockGriddingAlgorithm<DIM>();
+   virtual ~MultiblockGriddingAlgorithm();
 
    /*!
     * @brief Create level 0 for a hierarchy
diff --git a/include/MultiblockGriddingTagger.h b/include/MultiblockGriddingTagger.h
index 2789156..8f9da14 100644
--- a/include/MultiblockGriddingTagger.h
+++ b/include/MultiblockGriddingTagger.h
@@ -54,7 +54,7 @@ public:
    /*!
     * @brief The virtual destructor does nothing interesting.
     */
-   virtual ~MultiblockGriddingTagger<DIM>();
+   virtual ~MultiblockGriddingTagger();
 
    /*!
     * @brief Set the patch data index for tag data.  This routine
diff --git a/include/MultiblockNodeDataTranslator.h b/include/MultiblockNodeDataTranslator.h
index 0a6f2f6..7093e86 100644
--- a/include/MultiblockNodeDataTranslator.h
+++ b/include/MultiblockNodeDataTranslator.h
@@ -33,7 +33,7 @@ public:
    /*!
     * @brief The virtual destructor does nothing interesting.
     */
-   virtual ~MultiblockNodeDataTranslator<DIM,TYPE>();
+   virtual ~MultiblockNodeDataTranslator();
 
    virtual void translateAndCopyData(
       hier::Patch<DIM>& dst_patch,
diff --git a/include/MultiblockPatchHierarchy.h b/include/MultiblockPatchHierarchy.h
index fc57d45..69d2722 100644
--- a/include/MultiblockPatchHierarchy.h
+++ b/include/MultiblockPatchHierarchy.h
@@ -69,7 +69,7 @@ public:
    /*!
     * @brief Destructor for multiblock
     */
-   ~MultiblockPatchHierarchy<DIM>();
+   ~MultiblockPatchHierarchy();
 
    /*!
     * @brief Get a pointer to a single patch hierarchy represented by
diff --git a/include/MultiblockPatchLevel.h b/include/MultiblockPatchLevel.h
index b0f68ef..4111f40 100644
--- a/include/MultiblockPatchLevel.h
+++ b/include/MultiblockPatchLevel.h
@@ -51,7 +51,7 @@ public:
    /*!
     * Destructor is uninteresting
     */
-   ~MultiblockPatchLevel<DIM>();
+   ~MultiblockPatchLevel();
 
    /*!
     * @brief Return a pointer to the hier::PatchLevel<DIM> associated with the
diff --git a/include/MultiblockRefineAlgorithm.h b/include/MultiblockRefineAlgorithm.h
index 608111e..47978a4 100644
--- a/include/MultiblockRefineAlgorithm.h
+++ b/include/MultiblockRefineAlgorithm.h
@@ -64,7 +64,7 @@ public:
    /*!
     * @brief Destructor
     */
-   ~MultiblockRefineAlgorithm<DIM>();
+   ~MultiblockRefineAlgorithm();
 
    /*!
     * Register a refine operation with the refine algorithm object.  This
diff --git a/include/MultiblockRefinePatchStrategy.h b/include/MultiblockRefinePatchStrategy.h
index a81bf3e..47773f5 100644
--- a/include/MultiblockRefinePatchStrategy.h
+++ b/include/MultiblockRefinePatchStrategy.h
@@ -46,7 +46,7 @@ public:
    /*!
     * The virtual destructor for refine strategy does nothing interesting.
     */
-   virtual ~MultiblockRefinePatchStrategy<DIM>();
+   virtual ~MultiblockRefinePatchStrategy();
 
    /*!
     * @brief Set the physical boundary conditions.
diff --git a/include/MultiblockRefineSchedule.h b/include/MultiblockRefineSchedule.h
index 07e0f26..00bcaa9 100644
--- a/include/MultiblockRefineSchedule.h
+++ b/include/MultiblockRefineSchedule.h
@@ -159,7 +159,7 @@ public:
    /*!
     * Virtual destructor
     */
-   virtual ~MultiblockRefineSchedule<DIM>();
+   virtual ~MultiblockRefineSchedule();
 
    /*!
     * @brief Execute the stored communication schedule and perform the
diff --git a/include/MultiblockSideDataTranslator.h b/include/MultiblockSideDataTranslator.h
index e44f3c3..7852b24 100644
--- a/include/MultiblockSideDataTranslator.h
+++ b/include/MultiblockSideDataTranslator.h
@@ -34,7 +34,7 @@ public:
    /*!
     * @brief The virtual destructor does nothing interesting.
     */
-   virtual ~MultiblockSideDataTranslator<DIM,TYPE>();
+   virtual ~MultiblockSideDataTranslator();
 
    virtual void translateAndCopyData(
       hier::Patch<DIM>& dst_patch,
diff --git a/include/NodeComplexInjection.h b/include/NodeComplexInjection.h
index 32df1a0..e2f4221 100644
--- a/include/NodeComplexInjection.h
+++ b/include/NodeComplexInjection.h
@@ -50,7 +50,7 @@ public:
    /**
     * Uninteresting virtual destructor.
     */
-   virtual ~NodeComplexInjection<DIM>();
+   virtual ~NodeComplexInjection();
 
    /**
     * Return true if the variable and name string match the node-centered
diff --git a/include/NodeComplexLinearTimeInterpolateOp.h b/include/NodeComplexLinearTimeInterpolateOp.h
index 2540031..f1b41f7 100644
--- a/include/NodeComplexLinearTimeInterpolateOp.h
+++ b/include/NodeComplexLinearTimeInterpolateOp.h
@@ -46,7 +46,7 @@ public:
    /**
     * Uninteresting virtual destructor.
     */
-   virtual ~NodeComplexLinearTimeInterpolateOp<DIM>();
+   virtual ~NodeComplexLinearTimeInterpolateOp();
 
    /**
     * Return true if the variable and name string match the standard
diff --git a/include/NodeData.h b/include/NodeData.h
index 8a11e83..ef49c89 100644
--- a/include/NodeData.h
+++ b/include/NodeData.h
@@ -111,7 +111,7 @@ public:
    /*!
     * @brief The virtual destructor for a node data object.
     */
-   virtual ~NodeData<DIM,TYPE>();
+   virtual ~NodeData();
 
    /*!
     * @brief Return the depth (e.g., the number of components in each spatial
diff --git a/include/NodeDataFactory.h b/include/NodeDataFactory.h
index f625f71..2dd9185 100644
--- a/include/NodeDataFactory.h
+++ b/include/NodeDataFactory.h
@@ -55,7 +55,7 @@ public:
    /**
     * Virtual destructor for the node data factory class.
     */
-   virtual ~NodeDataFactory<DIM,TYPE>();
+   virtual ~NodeDataFactory();
 
    /**
     * @brief Abstract virtual function to clone a patch data factory.
diff --git a/include/NodeDoubleInjection.h b/include/NodeDoubleInjection.h
index d170c4d..c4039d1 100644
--- a/include/NodeDoubleInjection.h
+++ b/include/NodeDoubleInjection.h
@@ -50,7 +50,7 @@ public:
    /**
     * Uninteresting virtual destructor.
     */
-   virtual ~NodeDoubleInjection<DIM>();
+   virtual ~NodeDoubleInjection();
 
    /**
     * Return true if the variable and name string match the node-centered
diff --git a/include/NodeDoubleLinearTimeInterpolateOp.h b/include/NodeDoubleLinearTimeInterpolateOp.h
index 4e26af2..6ac6df9 100644
--- a/include/NodeDoubleLinearTimeInterpolateOp.h
+++ b/include/NodeDoubleLinearTimeInterpolateOp.h
@@ -46,7 +46,7 @@ public:
    /**
     * Uninteresting virtual destructor.
     */
-   virtual ~NodeDoubleLinearTimeInterpolateOp<DIM>();
+   virtual ~NodeDoubleLinearTimeInterpolateOp();
 
    /**
     * Return true if the variable and name string match the standard
diff --git a/include/NodeFloatInjection.h b/include/NodeFloatInjection.h
index 2e4f76f..315860f 100644
--- a/include/NodeFloatInjection.h
+++ b/include/NodeFloatInjection.h
@@ -50,7 +50,7 @@ public:
    /**
     * Uninteresting virtual destructor.
     */
-   virtual ~NodeFloatInjection<DIM>();
+   virtual ~NodeFloatInjection();
 
    /**
     * Return true if the variable and name string match the node-centered
diff --git a/include/NodeFloatLinearTimeInterpolateOp.h b/include/NodeFloatLinearTimeInterpolateOp.h
index bb5341e..1e1d66f 100644
--- a/include/NodeFloatLinearTimeInterpolateOp.h
+++ b/include/NodeFloatLinearTimeInterpolateOp.h
@@ -46,7 +46,7 @@ public:
    /**
     * Uninteresting virtual destructor.
     */
-   virtual ~NodeFloatLinearTimeInterpolateOp<DIM>();
+   virtual ~NodeFloatLinearTimeInterpolateOp();
 
    /**
     * Return true if the variable and name string match the standard
diff --git a/include/NodeGeometry.h b/include/NodeGeometry.h
index 860bbce..a125000 100644
--- a/include/NodeGeometry.h
+++ b/include/NodeGeometry.h
@@ -60,7 +60,7 @@ public:
    /*!
     * @brief The virtual destructor does nothing interesting.
     */
-   virtual ~NodeGeometry<DIM>();
+   virtual ~NodeGeometry();
 
    /*!
     * @brief Compute the overlap in node-centered index space between
diff --git a/include/NodeIndex.h b/include/NodeIndex.h
index 4dceb6d..b35ed6b 100644
--- a/include/NodeIndex.h
+++ b/include/NodeIndex.h
@@ -85,7 +85,7 @@ public:
    /**
     * The node index destructor does nothing interesting.
     */
-   ~NodeIndex<DIM>();
+   ~NodeIndex();
 
    /**
     * Plus-equals operator for a node index and an integer vector.
diff --git a/include/NodeIntegerInjection.h b/include/NodeIntegerInjection.h
index f868b12..a48e561 100644
--- a/include/NodeIntegerInjection.h
+++ b/include/NodeIntegerInjection.h
@@ -50,7 +50,7 @@ public:
    /**
     * Uninteresting virtual destructor.
     */
-   virtual ~NodeIntegerInjection<DIM>();
+   virtual ~NodeIntegerInjection();
 
    /**
     * Return true if the variable and name string match the node-centered
diff --git a/include/NodeIterator.h b/include/NodeIterator.h
index 040a2fd..2aad1fd 100644
--- a/include/NodeIterator.h
+++ b/include/NodeIterator.h
@@ -67,7 +67,7 @@ public:
    /**
     * Destructor for the node iterator.
     */
-   ~NodeIterator<DIM>();
+   ~NodeIterator();
 
    /**
     * Extract the node index corresponding to the iterator position in the box.
diff --git a/include/NodeOverlap.h b/include/NodeOverlap.h
index 56df09f..fabef2f 100644
--- a/include/NodeOverlap.h
+++ b/include/NodeOverlap.h
@@ -45,7 +45,7 @@ public:
     * The virtual destructor does nothing interesting except deallocate
     * box data.
     */
-   virtual ~NodeOverlap<DIM>();
+   virtual ~NodeOverlap();
 
    /**
     * Return whether there is an empty intersection between the two
diff --git a/include/NodeVariable.h b/include/NodeVariable.h
index b92a50d..0d4a3a9 100644
--- a/include/NodeVariable.h
+++ b/include/NodeVariable.h
@@ -55,7 +55,7 @@ public:
    /*!
     * @brief Virtual destructor for node variable objects.
     */
-   virtual ~NodeVariable<DIM,TYPE>();
+   virtual ~NodeVariable();
 
    /*!
     * @brief Return boolean indicating which node data values (coarse
diff --git a/include/NonlinearSolverStrategy.h b/include/NonlinearSolverStrategy.h
index 4dcae63..23938bf 100644
--- a/include/NonlinearSolverStrategy.h
+++ b/include/NonlinearSolverStrategy.h
@@ -42,7 +42,7 @@ public:
    /**
     * Empty constructor for algs::NonlinearSolverStrategy.
     */
-   virtual ~NonlinearSolverStrategy<DIM>();
+   virtual ~NonlinearSolverStrategy();
 
    /**
     * Initialize the solver state.  The vector argument represents the
diff --git a/include/OuteredgeData.h b/include/OuteredgeData.h
index dc7d84d..adcd222 100644
--- a/include/OuteredgeData.h
+++ b/include/OuteredgeData.h
@@ -168,7 +168,7 @@ public:
    /*!
     * @brief Virtual destructor for a outeredge data object.
     */
-   virtual ~OuteredgeData<DIM,TYPE>();
+   virtual ~OuteredgeData();
 
    /*!
     * @brief Return the depth (i.e., the number of data values for 
diff --git a/include/OuteredgeDataFactory.h b/include/OuteredgeDataFactory.h
index ee36797..64747b8 100644
--- a/include/OuteredgeDataFactory.h
+++ b/include/OuteredgeDataFactory.h
@@ -55,7 +55,7 @@ public:
     * @brief
     * Virtual destructor for the outeredge data factory class.
     */
-   virtual ~OuteredgeDataFactory<DIM,TYPE>();
+   virtual ~OuteredgeDataFactory();
 
    /**
     * @brief Abstract virtual function to clone a patch data factory.
diff --git a/include/OuteredgeGeometry.h b/include/OuteredgeGeometry.h
index e069d03..1f51116 100644
--- a/include/OuteredgeGeometry.h
+++ b/include/OuteredgeGeometry.h
@@ -70,7 +70,7 @@ public:
    /*!
     * @brief The virtual destructor does nothing interesting.
     */
-   virtual ~OuteredgeGeometry<DIM>();
+   virtual ~OuteredgeGeometry();
 
    /*!
     * @brief Compute the overlap in edge-centered index space on the
diff --git a/include/OuteredgeSumTransaction.h b/include/OuteredgeSumTransaction.h
index 2d2eac6..a0ee98e 100644
--- a/include/OuteredgeSumTransaction.h
+++ b/include/OuteredgeSumTransaction.h
@@ -99,7 +99,7 @@ public:
     * The virtual destructor for the copy transaction releases all
     * memory associated with the transaction.
     */
-   virtual ~OuteredgeSumTransaction<DIM>();
+   virtual ~OuteredgeSumTransaction();
 
    /*!
     * Return a boolean indicating whether this transaction can estimate
diff --git a/include/OuteredgeVariable.h b/include/OuteredgeVariable.h
index e01b58d..681c5a2 100644
--- a/include/OuteredgeVariable.h
+++ b/include/OuteredgeVariable.h
@@ -51,7 +51,7 @@ public:
    /*!
     * @brief Virtual destructor for outeredge variable objects.
     */
-   virtual ~OuteredgeVariable<DIM,TYPE>();
+   virtual ~OuteredgeVariable();
 
    /*!
     * @brief Return a boolean true value indicating that fine patch 
diff --git a/include/OuterfaceComplexConstantRefine.h b/include/OuterfaceComplexConstantRefine.h
index d5a0a24..d8ab1be 100644
--- a/include/OuterfaceComplexConstantRefine.h
+++ b/include/OuterfaceComplexConstantRefine.h
@@ -49,7 +49,7 @@ public:
    /**
     * Uninteresting virtual destructor.
     */
-   virtual ~OuterfaceComplexConstantRefine<DIM>();
+   virtual ~OuterfaceComplexConstantRefine();
 
    /**
     * Return true if the variable and name string match outerface 
diff --git a/include/OuterfaceComplexLinearTimeInterpolateOp.h b/include/OuterfaceComplexLinearTimeInterpolateOp.h
index 5cdc9b6..a23da5c 100644
--- a/include/OuterfaceComplexLinearTimeInterpolateOp.h
+++ b/include/OuterfaceComplexLinearTimeInterpolateOp.h
@@ -48,7 +48,7 @@ public:
    /**
     * Uninteresting virtual destructor.
     */
-   virtual ~OuterfaceComplexLinearTimeInterpolateOp<DIM>();
+   virtual ~OuterfaceComplexLinearTimeInterpolateOp();
 
    /**
     * Return true if the variable and name string match the standard
diff --git a/include/OuterfaceData.h b/include/OuterfaceData.h
index 7ad2335..3dd9d82 100644
--- a/include/OuterfaceData.h
+++ b/include/OuterfaceData.h
@@ -127,7 +127,7 @@ public:
    /*!
     * @brief Virtual destructor for a outerface data object.
     */
-   virtual ~OuterfaceData<DIM,TYPE>();
+   virtual ~OuterfaceData();
 
    /*!
     * @brief Return the depth (i.e., the number of data values for
diff --git a/include/OuterfaceDataFactory.h b/include/OuterfaceDataFactory.h
index 56705f7..1ff67b7 100644
--- a/include/OuterfaceDataFactory.h
+++ b/include/OuterfaceDataFactory.h
@@ -51,7 +51,7 @@ public:
    /**
     * Virtual destructor for the outerface data factory class.
     */
-   virtual ~OuterfaceDataFactory<DIM,TYPE>();
+   virtual ~OuterfaceDataFactory();
 
    /**
     * @brief Abstract virtual function to clone a patch data factory.
diff --git a/include/OuterfaceDoubleConstantRefine.h b/include/OuterfaceDoubleConstantRefine.h
index 97853f7..a68d671 100644
--- a/include/OuterfaceDoubleConstantRefine.h
+++ b/include/OuterfaceDoubleConstantRefine.h
@@ -49,7 +49,7 @@ public:
    /**
     * Uninteresting virtual destructor.
     */
-   virtual ~OuterfaceDoubleConstantRefine<DIM>();
+   virtual ~OuterfaceDoubleConstantRefine();
 
    /**
     * Return true if the variable and name string match outerface 
diff --git a/include/OuterfaceDoubleLinearTimeInterpolateOp.h b/include/OuterfaceDoubleLinearTimeInterpolateOp.h
index 5c96f5d..62634de 100644
--- a/include/OuterfaceDoubleLinearTimeInterpolateOp.h
+++ b/include/OuterfaceDoubleLinearTimeInterpolateOp.h
@@ -48,7 +48,7 @@ public:
    /**
     * Uninteresting virtual destructor.
     */
-   virtual ~OuterfaceDoubleLinearTimeInterpolateOp<DIM>();
+   virtual ~OuterfaceDoubleLinearTimeInterpolateOp();
 
    /**
     * Return true if the variable and name string match the standard
diff --git a/include/OuterfaceFloatConstantRefine.h b/include/OuterfaceFloatConstantRefine.h
index ea7af34..63d8746 100644
--- a/include/OuterfaceFloatConstantRefine.h
+++ b/include/OuterfaceFloatConstantRefine.h
@@ -49,7 +49,7 @@ public:
    /**
     * Uninteresting virtual destructor.
     */
-   virtual ~OuterfaceFloatConstantRefine<DIM>();
+   virtual ~OuterfaceFloatConstantRefine();
 
    /**
     * Return true if the variable and name string match outerface 
diff --git a/include/OuterfaceFloatLinearTimeInterpolateOp.h b/include/OuterfaceFloatLinearTimeInterpolateOp.h
index c587869..63f63a2 100644
--- a/include/OuterfaceFloatLinearTimeInterpolateOp.h
+++ b/include/OuterfaceFloatLinearTimeInterpolateOp.h
@@ -48,7 +48,7 @@ public:
    /**
     * Uninteresting virtual destructor.
     */
-   virtual ~OuterfaceFloatLinearTimeInterpolateOp<DIM>();
+   virtual ~OuterfaceFloatLinearTimeInterpolateOp();
 
    /**
     * Return true if the variable and name string match the standard
diff --git a/include/OuterfaceGeometry.h b/include/OuterfaceGeometry.h
index 3720052..f8a05d5 100644
--- a/include/OuterfaceGeometry.h
+++ b/include/OuterfaceGeometry.h
@@ -58,7 +58,7 @@ public:
    /*!
     * @brief The virtual destructor does nothing interesting.
     */
-   virtual ~OuterfaceGeometry<DIM>();
+   virtual ~OuterfaceGeometry();
  
    /*!
     * @brief Compute the overlap in face-centered index space on the
diff --git a/include/OuterfaceIntegerConstantRefine.h b/include/OuterfaceIntegerConstantRefine.h
index 449dc90..78902e9 100644
--- a/include/OuterfaceIntegerConstantRefine.h
+++ b/include/OuterfaceIntegerConstantRefine.h
@@ -49,7 +49,7 @@ public:
    /**
     * Uninteresting virtual destructor.
     */
-   virtual ~OuterfaceIntegerConstantRefine<DIM>();
+   virtual ~OuterfaceIntegerConstantRefine();
 
    /**
     * Return true if the variable and name string match outerface 
diff --git a/include/OuterfaceVariable.h b/include/OuterfaceVariable.h
index d55cbbd..4c07d2d 100644
--- a/include/OuterfaceVariable.h
+++ b/include/OuterfaceVariable.h
@@ -60,7 +60,7 @@ public:
    /*!
     * @brief Virtual destructor for outerface variable objects.
     */
-   virtual ~OuterfaceVariable<DIM,TYPE>();
+   virtual ~OuterfaceVariable();
  
    /*!
     * @brief Return a boolean true value indicating that fine patch
diff --git a/include/OuternodeData.h b/include/OuternodeData.h
index 209a347..e1f5497 100644
--- a/include/OuternodeData.h
+++ b/include/OuternodeData.h
@@ -143,7 +143,7 @@ public:
    /*!
     * @brief Virtual destructor for a outernode data object.
     */
-   virtual ~OuternodeData<DIM,TYPE>();
+   virtual ~OuternodeData();
 
    /*!
     * @brief Return the depth (e.g., the number of components at each spatial
diff --git a/include/OuternodeDataFactory.h b/include/OuternodeDataFactory.h
index e70b76d..666ae99 100644
--- a/include/OuternodeDataFactory.h
+++ b/include/OuternodeDataFactory.h
@@ -55,7 +55,7 @@ public:
     * @brief
     * Virtual destructor for the outernode data factory class.
     */
-   virtual ~OuternodeDataFactory<DIM,TYPE>();
+   virtual ~OuternodeDataFactory();
 
    /**
     * @brief Abstract virtual function to clone a patch data factory.
diff --git a/include/OuternodeDoubleConstantCoarsen.h b/include/OuternodeDoubleConstantCoarsen.h
index 6fc08d6..5c002a7 100644
--- a/include/OuternodeDoubleConstantCoarsen.h
+++ b/include/OuternodeDoubleConstantCoarsen.h
@@ -54,7 +54,7 @@ public:
    /*!
     * @brief Uninteresting virtual destructor.
     */
-   virtual ~OuternodeDoubleConstantCoarsen<DIM>();
+   virtual ~OuternodeDoubleConstantCoarsen();
 
    /*!
     * @brief Determine if object is for coarsening the specified
diff --git a/include/OuternodeGeometry.h b/include/OuternodeGeometry.h
index 2c3630c..6b8affb 100644
--- a/include/OuternodeGeometry.h
+++ b/include/OuternodeGeometry.h
@@ -58,7 +58,7 @@ public:
    /*!
     * @brief The virtual destructor does nothing interesting.
     */
-   virtual ~OuternodeGeometry<DIM>();
+   virtual ~OuternodeGeometry();
  
    /*!
     * @brief Compute the overlap in node-centered index space on the
diff --git a/include/OuternodeSumTransaction.h b/include/OuternodeSumTransaction.h
index 6f5d523..5a0fa10 100644
--- a/include/OuternodeSumTransaction.h
+++ b/include/OuternodeSumTransaction.h
@@ -95,7 +95,7 @@ public:
     * The virtual destructor for the copy transaction releases all
     * memory associated with the transaction.
     */
-   virtual ~OuternodeSumTransaction<DIM>();
+   virtual ~OuternodeSumTransaction();
 
    /*!
     * Return a boolean indicating whether this transaction can estimate
diff --git a/include/OuternodeVariable.h b/include/OuternodeVariable.h
index b0824f1..3a8b90b 100644
--- a/include/OuternodeVariable.h
+++ b/include/OuternodeVariable.h
@@ -55,7 +55,7 @@ public:
    /*!
     * @brief Virtual destructor for outernode variable objects.
     */
-   virtual ~OuternodeVariable<DIM,TYPE>();
+   virtual ~OuternodeVariable();
  
    /*!
     * @brief Return a boolean true value indicating that fine patch
diff --git a/include/OutersideComplexLinearTimeInterpolateOp.h b/include/OutersideComplexLinearTimeInterpolateOp.h
index 9de037d..99c401a 100644
--- a/include/OutersideComplexLinearTimeInterpolateOp.h
+++ b/include/OutersideComplexLinearTimeInterpolateOp.h
@@ -48,7 +48,7 @@ public:
    /**
     * Uninteresting virtual destructor.
     */
-   virtual ~OutersideComplexLinearTimeInterpolateOp<DIM>();
+   virtual ~OutersideComplexLinearTimeInterpolateOp();
 
    /**
     * Return true if the variable and name string match the standard
diff --git a/include/OutersideData.h b/include/OutersideData.h
index cc6096f..fe413ae 100644
--- a/include/OutersideData.h
+++ b/include/OutersideData.h
@@ -128,7 +128,7 @@ public:
    /*!
     * @brief Virtual destructor for a outerside data object.
     */
-   virtual ~OutersideData<DIM,TYPE>();
+   virtual ~OutersideData();
 
    /*!
     * @brief Return the depth (i.e., the number of data values for
diff --git a/include/OutersideDataFactory.h b/include/OutersideDataFactory.h
index f4cb8d5..17ca380 100644
--- a/include/OutersideDataFactory.h
+++ b/include/OutersideDataFactory.h
@@ -51,7 +51,7 @@ public:
    /**
     * Virtual destructor for the outerside data factory class.
     */
-   virtual ~OutersideDataFactory<DIM,TYPE>();
+   virtual ~OutersideDataFactory();
 
    /**
     * @brief Abstract virtual function to clone a patch data factory.
diff --git a/include/OutersideDoubleLinearTimeInterpolateOp.h b/include/OutersideDoubleLinearTimeInterpolateOp.h
index 2ba17e7..9864bac 100644
--- a/include/OutersideDoubleLinearTimeInterpolateOp.h
+++ b/include/OutersideDoubleLinearTimeInterpolateOp.h
@@ -48,7 +48,7 @@ public:
    /**
     * Uninteresting virtual destructor.
     */
-   virtual ~OutersideDoubleLinearTimeInterpolateOp<DIM>();
+   virtual ~OutersideDoubleLinearTimeInterpolateOp();
 
    /**
     * Return true if the variable and name string match the standard
diff --git a/include/OutersideFloatLinearTimeInterpolateOp.h b/include/OutersideFloatLinearTimeInterpolateOp.h
index fb1f521..41bebe7 100644
--- a/include/OutersideFloatLinearTimeInterpolateOp.h
+++ b/include/OutersideFloatLinearTimeInterpolateOp.h
@@ -48,7 +48,7 @@ public:
    /**
     * Uninteresting virtual destructor.
     */
-   virtual ~OutersideFloatLinearTimeInterpolateOp<DIM>();
+   virtual ~OutersideFloatLinearTimeInterpolateOp();
 
    /**
     * Return true if the variable and name string match the standard
diff --git a/include/OutersideGeometry.h b/include/OutersideGeometry.h
index ae6df2a..d5f9d42 100644
--- a/include/OutersideGeometry.h
+++ b/include/OutersideGeometry.h
@@ -58,7 +58,7 @@ public:
    /*!
     * @brief The virtual destructor does nothing interesting.
     */
-   virtual ~OutersideGeometry<DIM>();
+   virtual ~OutersideGeometry();
 
    /*!
     * @brief Compute the overlap in side-centered index space on the
diff --git a/include/OutersideVariable.h b/include/OutersideVariable.h
index 05ad5d4..fd297f9 100644
--- a/include/OutersideVariable.h
+++ b/include/OutersideVariable.h
@@ -60,7 +60,7 @@ public:
    /*!
     * @brief Virtual destructor for outerside variable objects.
     */
-   virtual ~OutersideVariable<DIM,TYPE>();
+   virtual ~OutersideVariable();
 
    /*!
     * @brief Return a boolean true value indicating that fine patch
diff --git a/include/PETSc_SAMRAIVectorReal.h b/include/PETSc_SAMRAIVectorReal.h
index c1b9af5..44657da 100644
--- a/include/PETSc_SAMRAIVectorReal.h
+++ b/include/PETSc_SAMRAIVectorReal.h
@@ -127,7 +127,7 @@ protected:
     * member function destroyPETScVector, which is used to destroy the PETSc
     * vector and associated "wrapper".
     */
-   virtual ~PETSc_SAMRAIVectorReal<DIM,TYPE>();
+   virtual ~PETSc_SAMRAIVectorReal();
 
 private:
    /*
diff --git a/include/Patch.h b/include/Patch.h
index cefa6e9..8f58d8a 100644
--- a/include/Patch.h
+++ b/include/Patch.h
@@ -74,7 +74,7 @@ public:
    /**
     * Virtual destructor for patch objects.
     */
-   virtual ~Patch<DIM>();
+   virtual ~Patch();
 
    /**
     * Return the box over which this patch is defined.  The components on a
diff --git a/include/PatchBoundaryEdgeSum.h b/include/PatchBoundaryEdgeSum.h
index b7de597..493e69b 100644
--- a/include/PatchBoundaryEdgeSum.h
+++ b/include/PatchBoundaryEdgeSum.h
@@ -106,7 +106,7 @@ public:
    /*!
     *  @brief Destructor for the schedule releases all internal storage.
     */
-   ~PatchBoundaryEdgeSum<DIM>();
+   ~PatchBoundaryEdgeSum();
 
    /*!
     *  @brief Register edge data with given patch data identifier for summing.
diff --git a/include/PatchBoundaryNodeSum.h b/include/PatchBoundaryNodeSum.h
index 626d82f..9ba9d27 100644
--- a/include/PatchBoundaryNodeSum.h
+++ b/include/PatchBoundaryNodeSum.h
@@ -113,7 +113,7 @@ public:
    /*!
     *  @brief Destructor for the schedule releases all internal storage.
     */
-   ~PatchBoundaryNodeSum<DIM>();
+   ~PatchBoundaryNodeSum();
 
    /*!
     *  @brief Register node data with given patch data identifier for summing.
diff --git a/include/PatchCellDataBasicOps.h b/include/PatchCellDataBasicOps.h
index bfd22f3..bb7aefe 100644
--- a/include/PatchCellDataBasicOps.h
+++ b/include/PatchCellDataBasicOps.h
@@ -56,7 +56,7 @@ public:
     */
    PatchCellDataBasicOps();
 
-   virtual ~PatchCellDataBasicOps<DIM,TYPE>();
+   virtual ~PatchCellDataBasicOps();
 
    /**
     * Set dst = alpha * src, elementwise.
diff --git a/include/PatchCellDataMiscellaneousOpsReal.h b/include/PatchCellDataMiscellaneousOpsReal.h
index bb01cd0..e05165e 100644
--- a/include/PatchCellDataMiscellaneousOpsReal.h
+++ b/include/PatchCellDataMiscellaneousOpsReal.h
@@ -68,7 +68,7 @@ public:
     */
    PatchCellDataMiscellaneousOpsReal();
 
-   virtual ~PatchCellDataMiscellaneousOpsReal<DIM,TYPE>();
+   virtual ~PatchCellDataMiscellaneousOpsReal();
 
    /**
     * Return 1 if \f$\|data2_i\| > 0\f$ and \f$data1_i * data2_i \leq 0\f$, for
diff --git a/include/PatchCellDataNormOpsComplex.h b/include/PatchCellDataNormOpsComplex.h
index 36f612f..be9f859 100644
--- a/include/PatchCellDataNormOpsComplex.h
+++ b/include/PatchCellDataNormOpsComplex.h
@@ -64,7 +64,7 @@ public:
     */
    PatchCellDataNormOpsComplex();
 
-   virtual ~PatchCellDataNormOpsComplex<DIM>();
+   virtual ~PatchCellDataNormOpsComplex();
 
    /**
     * Return the number of data values for the cell-centered data object
diff --git a/include/PatchCellDataNormOpsReal.h b/include/PatchCellDataNormOpsReal.h
index 1ac194c..56448ff 100644
--- a/include/PatchCellDataNormOpsReal.h
+++ b/include/PatchCellDataNormOpsReal.h
@@ -68,7 +68,7 @@ public:
     */
    PatchCellDataNormOpsReal();
 
-   virtual ~PatchCellDataNormOpsReal<DIM,TYPE>();
+   virtual ~PatchCellDataNormOpsReal();
 
    /**
     * Return the number of data values for the cell-centered data object
diff --git a/include/PatchCellDataOpsComplex.h b/include/PatchCellDataOpsComplex.h
index 53c9d82..65f7721 100644
--- a/include/PatchCellDataOpsComplex.h
+++ b/include/PatchCellDataOpsComplex.h
@@ -57,7 +57,7 @@ public:
     */
    PatchCellDataOpsComplex();
 
-   virtual ~PatchCellDataOpsComplex<DIM>();
+   virtual ~PatchCellDataOpsComplex();
 
    /**
     * Copy dst data to src data over given box.
diff --git a/include/PatchCellDataOpsInteger.h b/include/PatchCellDataOpsInteger.h
index d9ab15e..93bdfc4 100644
--- a/include/PatchCellDataOpsInteger.h
+++ b/include/PatchCellDataOpsInteger.h
@@ -53,7 +53,7 @@ public:
     */
    PatchCellDataOpsInteger();
 
-   virtual ~PatchCellDataOpsInteger<DIM>();
+   virtual ~PatchCellDataOpsInteger();
 
    /**
     * Return the number of data values for the cell-centered data object
diff --git a/include/PatchCellDataOpsReal.h b/include/PatchCellDataOpsReal.h
index b654db3..f323aa9 100644
--- a/include/PatchCellDataOpsReal.h
+++ b/include/PatchCellDataOpsReal.h
@@ -62,7 +62,7 @@ public:
     */
    PatchCellDataOpsReal();
 
-   virtual ~PatchCellDataOpsReal<DIM,TYPE>();
+   virtual ~PatchCellDataOpsReal();
 
    /**
     * Copy dst data to src data over given box.
diff --git a/include/PatchConfigurationUtilities.h b/include/PatchConfigurationUtilities.h
index 1dc861f..f4d256c 100644
--- a/include/PatchConfigurationUtilities.h
+++ b/include/PatchConfigurationUtilities.h
@@ -98,7 +98,7 @@ public:
    /*!
     * Virtual destructor for utilities objects.
     */
-   virtual ~PatchConfigurationUtilities<DIM>();
+   virtual ~PatchConfigurationUtilities();
 
    /*!
     * Check whether information is set for given level number. 
diff --git a/include/PatchData.h b/include/PatchData.h
index 242e834..45a74ef 100644
--- a/include/PatchData.h
+++ b/include/PatchData.h
@@ -67,7 +67,7 @@ public:
    /**
     * The virtual destructor for a patch data object.
     */
-   virtual ~PatchData<DIM>();
+   virtual ~PatchData();
 
    /**
     * Return the box over which this patch data object is defined.  All
diff --git a/include/PatchDataFactory.h b/include/PatchDataFactory.h
index 8ce4fe5..6d66dfb 100644
--- a/include/PatchDataFactory.h
+++ b/include/PatchDataFactory.h
@@ -83,7 +83,7 @@ public:
     * @brief Virtual destructor for the patch data factory class.
     *
     */
-   virtual ~PatchDataFactory<DIM>();
+   virtual ~PatchDataFactory();
 
    /**
     * @brief Abstract virtual function to clone a patch data factory.
diff --git a/include/PatchDescriptor.h b/include/PatchDescriptor.h
index a8f816d..617aa07 100644
--- a/include/PatchDescriptor.h
+++ b/include/PatchDescriptor.h
@@ -74,7 +74,7 @@ public:
     * The virtual destructor for a patch descriptor deallocates the
     * internal data structures.
     */
-   virtual ~PatchDescriptor<DIM>();
+   virtual ~PatchDescriptor();
 
    /*!
     * Add a new patch data factory and name string identifier to the patch 
diff --git a/include/PatchEdgeDataBasicOps.h b/include/PatchEdgeDataBasicOps.h
index 303f6b0..d4b52c3 100644
--- a/include/PatchEdgeDataBasicOps.h
+++ b/include/PatchEdgeDataBasicOps.h
@@ -56,7 +56,7 @@ public:
     */
    PatchEdgeDataBasicOps();
 
-   virtual ~PatchEdgeDataBasicOps<DIM,TYPE>();
+   virtual ~PatchEdgeDataBasicOps();
 
    /**
     * Set dst = alpha * src, elementwise.
diff --git a/include/PatchEdgeDataMiscellaneousOpsReal.h b/include/PatchEdgeDataMiscellaneousOpsReal.h
index b9b7868..6dc0a8b 100644
--- a/include/PatchEdgeDataMiscellaneousOpsReal.h
+++ b/include/PatchEdgeDataMiscellaneousOpsReal.h
@@ -68,7 +68,7 @@ public:
     */
    PatchEdgeDataMiscellaneousOpsReal();
 
-   virtual ~PatchEdgeDataMiscellaneousOpsReal<DIM,TYPE>();
+   virtual ~PatchEdgeDataMiscellaneousOpsReal();
 
    /**
     * Return 1 if \f$\|data2_i\| > 0\f$ and \f$data1_i * data2_i \leq 0\f$, for
diff --git a/include/PatchEdgeDataNormOpsComplex.h b/include/PatchEdgeDataNormOpsComplex.h
index 0701999..69b2fe7 100644
--- a/include/PatchEdgeDataNormOpsComplex.h
+++ b/include/PatchEdgeDataNormOpsComplex.h
@@ -64,7 +64,7 @@ public:
     */
    PatchEdgeDataNormOpsComplex();
 
-   virtual ~PatchEdgeDataNormOpsComplex<DIM>();
+   virtual ~PatchEdgeDataNormOpsComplex();
 
    /**
     * Return the number of data values for the edge-centered data object
diff --git a/include/PatchEdgeDataNormOpsReal.h b/include/PatchEdgeDataNormOpsReal.h
index 5b0a172..de67b22 100644
--- a/include/PatchEdgeDataNormOpsReal.h
+++ b/include/PatchEdgeDataNormOpsReal.h
@@ -68,7 +68,7 @@ public:
     */
    PatchEdgeDataNormOpsReal();
 
-   virtual ~PatchEdgeDataNormOpsReal<DIM,TYPE>();
+   virtual ~PatchEdgeDataNormOpsReal();
 
    /**
     * Return the number of data values for the edge-centered data object
diff --git a/include/PatchEdgeDataOpsComplex.h b/include/PatchEdgeDataOpsComplex.h
index d065173..21c7de0 100644
--- a/include/PatchEdgeDataOpsComplex.h
+++ b/include/PatchEdgeDataOpsComplex.h
@@ -57,7 +57,7 @@ public:
     */
    PatchEdgeDataOpsComplex();
 
-   virtual ~PatchEdgeDataOpsComplex<DIM>();
+   virtual ~PatchEdgeDataOpsComplex();
 
    /**
     * Copy dst data to src data over given box.
diff --git a/include/PatchEdgeDataOpsInteger.h b/include/PatchEdgeDataOpsInteger.h
index 3104013..c622643 100644
--- a/include/PatchEdgeDataOpsInteger.h
+++ b/include/PatchEdgeDataOpsInteger.h
@@ -52,7 +52,7 @@ public:
     */
    PatchEdgeDataOpsInteger();
 
-   virtual ~PatchEdgeDataOpsInteger<DIM>();
+   virtual ~PatchEdgeDataOpsInteger();
 
    /**
     * Return the number of data values for the edge-centered data object
diff --git a/include/PatchEdgeDataOpsReal.h b/include/PatchEdgeDataOpsReal.h
index d806898..21d815c 100644
--- a/include/PatchEdgeDataOpsReal.h
+++ b/include/PatchEdgeDataOpsReal.h
@@ -62,7 +62,7 @@ public:
     */
    PatchEdgeDataOpsReal();
 
-   virtual ~PatchEdgeDataOpsReal<DIM,TYPE>();
+   virtual ~PatchEdgeDataOpsReal();
 
    /**
     * Copy dst data to src data over given box.
diff --git a/include/PatchFaceDataBasicOps.h b/include/PatchFaceDataBasicOps.h
index 3f018a4..8de8098 100644
--- a/include/PatchFaceDataBasicOps.h
+++ b/include/PatchFaceDataBasicOps.h
@@ -56,7 +56,7 @@ public:
     */
    PatchFaceDataBasicOps();
 
-   virtual ~PatchFaceDataBasicOps<DIM,TYPE>();
+   virtual ~PatchFaceDataBasicOps();
 
    /**
     * Set dst = alpha * src, elementwise.
diff --git a/include/PatchFaceDataMiscellaneousOpsReal.h b/include/PatchFaceDataMiscellaneousOpsReal.h
index 4df4689..7983223 100644
--- a/include/PatchFaceDataMiscellaneousOpsReal.h
+++ b/include/PatchFaceDataMiscellaneousOpsReal.h
@@ -68,7 +68,7 @@ public:
     */
    PatchFaceDataMiscellaneousOpsReal();
 
-   virtual ~PatchFaceDataMiscellaneousOpsReal<DIM,TYPE>();
+   virtual ~PatchFaceDataMiscellaneousOpsReal();
 
    /**
     * Return 1 if \f$\|data2_i\| > 0\f$ and \f$data1_i * data2_i \leq 0\f$, for
diff --git a/include/PatchFaceDataNormOpsComplex.h b/include/PatchFaceDataNormOpsComplex.h
index 0e2c2e4..1469ce6 100644
--- a/include/PatchFaceDataNormOpsComplex.h
+++ b/include/PatchFaceDataNormOpsComplex.h
@@ -64,7 +64,7 @@ public:
     */
    PatchFaceDataNormOpsComplex();
 
-   virtual ~PatchFaceDataNormOpsComplex<DIM>();
+   virtual ~PatchFaceDataNormOpsComplex();
 
    /**
     * Return the number of data values for the face-centered data object
diff --git a/include/PatchFaceDataNormOpsReal.h b/include/PatchFaceDataNormOpsReal.h
index 400376a..f30fcdf 100644
--- a/include/PatchFaceDataNormOpsReal.h
+++ b/include/PatchFaceDataNormOpsReal.h
@@ -68,7 +68,7 @@ public:
     */
    PatchFaceDataNormOpsReal();
 
-   virtual ~PatchFaceDataNormOpsReal<DIM,TYPE>();
+   virtual ~PatchFaceDataNormOpsReal();
 
    /**
     * Return the number of data values for the face-centered data object
diff --git a/include/PatchFaceDataOpsComplex.h b/include/PatchFaceDataOpsComplex.h
index 1603e37..9ecc992 100644
--- a/include/PatchFaceDataOpsComplex.h
+++ b/include/PatchFaceDataOpsComplex.h
@@ -56,7 +56,7 @@ public:
     */
    PatchFaceDataOpsComplex();
 
-   virtual ~PatchFaceDataOpsComplex<DIM>();
+   virtual ~PatchFaceDataOpsComplex();
 
    /**
     * Copy dst data to src data over given box.
diff --git a/include/PatchFaceDataOpsInteger.h b/include/PatchFaceDataOpsInteger.h
index f287f54..21b01ec 100644
--- a/include/PatchFaceDataOpsInteger.h
+++ b/include/PatchFaceDataOpsInteger.h
@@ -52,7 +52,7 @@ public:
     */
    PatchFaceDataOpsInteger();
 
-   virtual ~PatchFaceDataOpsInteger<DIM>();
+   virtual ~PatchFaceDataOpsInteger();
 
    /**
     * Return the number of data values for the face-centered data object
diff --git a/include/PatchFaceDataOpsReal.h b/include/PatchFaceDataOpsReal.h
index 59a8867..a546a56 100644
--- a/include/PatchFaceDataOpsReal.h
+++ b/include/PatchFaceDataOpsReal.h
@@ -62,7 +62,7 @@ public:
     */
    PatchFaceDataOpsReal();
 
-   virtual ~PatchFaceDataOpsReal<DIM,TYPE>();
+   virtual ~PatchFaceDataOpsReal();
 
    /**
     * Copy dst data to src data over given box.
diff --git a/include/PatchFactory.h b/include/PatchFactory.h
index 9a09425..60333d4 100644
--- a/include/PatchFactory.h
+++ b/include/PatchFactory.h
@@ -43,7 +43,7 @@ public:
    /**
     * Virtual destructor for patch factory objects.
     */
-   virtual ~PatchFactory<DIM>();
+   virtual ~PatchFactory();
 
    /**
     * Allocate a patch with the specified domain and patch descriptor.
diff --git a/include/PatchGeometry.h b/include/PatchGeometry.h
index c564e0b..d58d312 100644
--- a/include/PatchGeometry.h
+++ b/include/PatchGeometry.h
@@ -46,7 +46,7 @@ public:
    /**
     * The default constructor for the patch geometry base class.
     */
-   PatchGeometry<DIM>(
+   PatchGeometry(
       const IntVector<DIM>& ratio_to_level_zero,
       const tbox::Array< tbox::Array<bool> >& touches_regular_bdry,
       const tbox::Array< tbox::Array<bool> >& touches_periodic_bdry);
@@ -54,7 +54,7 @@ public:
    /**
     * The virtual destructor for the patch geometry base class.
     */
-   virtual ~PatchGeometry<DIM>();
+   virtual ~PatchGeometry();
 
    /**
     * Return const reference to patch boundary information.
diff --git a/include/PatchHierarchy.h b/include/PatchHierarchy.h
index 126066e..10855b9 100644
--- a/include/PatchHierarchy.h
+++ b/include/PatchHierarchy.h
@@ -69,7 +69,7 @@ public:
    /**
     * Destructor for patch hierarchy objects.
     */
-   ~PatchHierarchy<DIM>();
+   ~PatchHierarchy();
 
 
   /**
diff --git a/include/PatchLevel.C b/include/PatchLevel.C
index 15150cb..42f781a 100644
--- a/include/PatchLevel.C
+++ b/include/PatchLevel.C
@@ -27,7 +27,15 @@
 namespace SAMRAI {
     namespace hier {
 
-static tbox::Pointer<tbox::Timer> t_level_constructor;
+/*
+*************************************************************************
+*                                                                       *
+* Initialization for static data members.                               *
+*                                                                       *
+*************************************************************************
+*/
+template<int DIM> tbox::Pointer<tbox::Timer>
+   PatchLevel<DIM>::t_level_constructor;
 
 /*
  *************************************************************************
@@ -1007,8 +1015,8 @@ template<int DIM> void PatchLevel<DIM>::initializeTimers()
    if ( t_level_constructor.isNull() ) {
       t_level_constructor = tbox::TimerManager::getManager() ->
          getTimer("mesh::PatchLevel::level_constructor");
-   }
    tbox::ShutdownRegistry::registerShutdownRoutine(freeTimers, 254);
+   }
 }
 
 
diff --git a/include/PatchLevel.h b/include/PatchLevel.h
index d5d651b..ebbb23d 100644
--- a/include/PatchLevel.h
+++ b/include/PatchLevel.h
@@ -127,7 +127,7 @@ public:
    /**
     * The virtual destructor for patch level deallocates all patches.
     */
-   virtual ~PatchLevel<DIM>();
+   virtual ~PatchLevel();
 
    /**
     * Return the number of this level in a hierarchy, or the number of
@@ -479,7 +479,10 @@ private:
     */
    void setPatchTouchesBoundaryArrays();
 
-   void initializeTimers();
+   /*!
+    * Allocate static timers.
+    */
+   static void initializeTimers();
 
    /*!
     * Free static timers.
@@ -565,6 +568,11 @@ private:
     * Manages communications in clustering algorithms
     */
    tbox::Pointer< BinaryTree<DIM> > d_binary_tree;
+
+   /*
+    * Timer objects for performance measurement.
+    */
+   static tbox::Pointer<tbox::Timer> t_level_constructor;
 };
 
 /**
@@ -625,7 +633,7 @@ public:
    /**
     * Destructor for the patch level iterator.
     */
-   ~PatchLevelIterator<DIM>();
+   ~PatchLevelIterator();
 
    /**
     * Extract the integer patch index corresponding to the current patch 
diff --git a/include/PatchLevelFactory.h b/include/PatchLevelFactory.h
index 8f2fece..bbda81d 100644
--- a/include/PatchLevelFactory.h
+++ b/include/PatchLevelFactory.h
@@ -42,7 +42,7 @@ public:
    /**
     * Virtual destructor for patch level factory objects.
     */
-   virtual ~PatchLevelFactory<DIM>();
+   virtual ~PatchLevelFactory();
 
    /**
     * Allocate a patch level with the specified boxes and processor mappings.
diff --git a/include/PatchNodeDataBasicOps.h b/include/PatchNodeDataBasicOps.h
index d60d987..db56d8c 100644
--- a/include/PatchNodeDataBasicOps.h
+++ b/include/PatchNodeDataBasicOps.h
@@ -56,7 +56,7 @@ public:
     */
    PatchNodeDataBasicOps();
 
-   virtual ~PatchNodeDataBasicOps<DIM,TYPE>();
+   virtual ~PatchNodeDataBasicOps();
 
    /**
     * Set dst = alpha * src, elementwise.
diff --git a/include/PatchNodeDataMiscellaneousOpsReal.h b/include/PatchNodeDataMiscellaneousOpsReal.h
index 05cc25d..31f81ae 100644
--- a/include/PatchNodeDataMiscellaneousOpsReal.h
+++ b/include/PatchNodeDataMiscellaneousOpsReal.h
@@ -68,7 +68,7 @@ public:
     */
    PatchNodeDataMiscellaneousOpsReal();
 
-   virtual ~PatchNodeDataMiscellaneousOpsReal<DIM,TYPE>();
+   virtual ~PatchNodeDataMiscellaneousOpsReal();
 
    /**
     * Return 1 if \f$\|data2_i\| > 0\f$ and \f$data1_i * data2_i \leq 0\f$, for
diff --git a/include/PatchNodeDataNormOpsComplex.h b/include/PatchNodeDataNormOpsComplex.h
index afb014c..f82507e 100644
--- a/include/PatchNodeDataNormOpsComplex.h
+++ b/include/PatchNodeDataNormOpsComplex.h
@@ -64,7 +64,7 @@ public:
     */
    PatchNodeDataNormOpsComplex();
 
-   virtual ~PatchNodeDataNormOpsComplex<DIM>();
+   virtual ~PatchNodeDataNormOpsComplex();
 
    /**
     * Return the number of data values for the node-centered data object
diff --git a/include/PatchNodeDataNormOpsReal.h b/include/PatchNodeDataNormOpsReal.h
index 14d450e..8d50780 100644
--- a/include/PatchNodeDataNormOpsReal.h
+++ b/include/PatchNodeDataNormOpsReal.h
@@ -68,7 +68,7 @@ public:
     */
    PatchNodeDataNormOpsReal();
 
-   virtual ~PatchNodeDataNormOpsReal<DIM,TYPE>();
+   virtual ~PatchNodeDataNormOpsReal();
 
    /**
     * Return the number of data values for the node-centered data object
diff --git a/include/PatchNodeDataOpsComplex.h b/include/PatchNodeDataOpsComplex.h
index 1258ee1..7a0f8d1 100644
--- a/include/PatchNodeDataOpsComplex.h
+++ b/include/PatchNodeDataOpsComplex.h
@@ -57,7 +57,7 @@ public:
     */
    PatchNodeDataOpsComplex();
 
-   virtual ~PatchNodeDataOpsComplex<DIM>();
+   virtual ~PatchNodeDataOpsComplex();
 
    /**
     * Copy dst data to src data over given box.
diff --git a/include/PatchNodeDataOpsInteger.h b/include/PatchNodeDataOpsInteger.h
index c1f4822..283d69d 100644
--- a/include/PatchNodeDataOpsInteger.h
+++ b/include/PatchNodeDataOpsInteger.h
@@ -52,7 +52,7 @@ public:
     */
    PatchNodeDataOpsInteger();
 
-   virtual ~PatchNodeDataOpsInteger<DIM>();
+   virtual ~PatchNodeDataOpsInteger();
 
    /**
     * Return the number of data values for the node-centered data object
diff --git a/include/PatchNodeDataOpsReal.h b/include/PatchNodeDataOpsReal.h
index a31d46f..411e738 100644
--- a/include/PatchNodeDataOpsReal.h
+++ b/include/PatchNodeDataOpsReal.h
@@ -62,7 +62,7 @@ public:
     */
    PatchNodeDataOpsReal();
 
-   virtual ~PatchNodeDataOpsReal<DIM,TYPE>();
+   virtual ~PatchNodeDataOpsReal();
 
    /**
     * Copy dst data to src data over given box.
diff --git a/include/PatchSideDataBasicOps.h b/include/PatchSideDataBasicOps.h
index 4850ac1..4e19fb4 100644
--- a/include/PatchSideDataBasicOps.h
+++ b/include/PatchSideDataBasicOps.h
@@ -56,7 +56,7 @@ public:
     */
    PatchSideDataBasicOps();
 
-   virtual ~PatchSideDataBasicOps<DIM,TYPE>();
+   virtual ~PatchSideDataBasicOps();
 
    /**
     * Set dst = alpha * src, elementwise.
diff --git a/include/PatchSideDataMiscellaneousOpsReal.h b/include/PatchSideDataMiscellaneousOpsReal.h
index 8a8c8b6..6ba736c 100644
--- a/include/PatchSideDataMiscellaneousOpsReal.h
+++ b/include/PatchSideDataMiscellaneousOpsReal.h
@@ -68,7 +68,7 @@ public:
     */
    PatchSideDataMiscellaneousOpsReal();
 
-   virtual ~PatchSideDataMiscellaneousOpsReal<DIM,TYPE>();
+   virtual ~PatchSideDataMiscellaneousOpsReal();
 
    /**
     * Return 1 if \f$\|data2_i\| > 0\f$ and \f$data1_i * data2_i \leq 0\f$, for
diff --git a/include/PatchSideDataNormOpsComplex.h b/include/PatchSideDataNormOpsComplex.h
index 416071c..d83c2e6 100644
--- a/include/PatchSideDataNormOpsComplex.h
+++ b/include/PatchSideDataNormOpsComplex.h
@@ -64,7 +64,7 @@ public:
     */
    PatchSideDataNormOpsComplex();
 
-   virtual ~PatchSideDataNormOpsComplex<DIM>();
+   virtual ~PatchSideDataNormOpsComplex();
 
    /**
     * Return the number of data values for the side-centered data object
diff --git a/include/PatchSideDataNormOpsReal.h b/include/PatchSideDataNormOpsReal.h
index 0c9dc26..20a4c36 100644
--- a/include/PatchSideDataNormOpsReal.h
+++ b/include/PatchSideDataNormOpsReal.h
@@ -68,7 +68,7 @@ public:
     */
    PatchSideDataNormOpsReal();
 
-   virtual ~PatchSideDataNormOpsReal<DIM,TYPE>();
+   virtual ~PatchSideDataNormOpsReal();
 
    /**
     * Return the number of data values for the side-centered data object
diff --git a/include/PatchSideDataOpsComplex.h b/include/PatchSideDataOpsComplex.h
index 67b02ca..8faba0c 100644
--- a/include/PatchSideDataOpsComplex.h
+++ b/include/PatchSideDataOpsComplex.h
@@ -57,7 +57,7 @@ public:
     */
    PatchSideDataOpsComplex();
 
-   virtual ~PatchSideDataOpsComplex<DIM>();
+   virtual ~PatchSideDataOpsComplex();
 
    /**
     * Copy dst data to src data over given box.
diff --git a/include/PatchSideDataOpsInteger.h b/include/PatchSideDataOpsInteger.h
index fbb3c87..3205972 100644
--- a/include/PatchSideDataOpsInteger.h
+++ b/include/PatchSideDataOpsInteger.h
@@ -52,7 +52,7 @@ public:
     */
    PatchSideDataOpsInteger();
 
-   virtual ~PatchSideDataOpsInteger<DIM>();
+   virtual ~PatchSideDataOpsInteger();
 
    /**
     * Return the number of data values for the side-centered data object
diff --git a/include/PatchSideDataOpsReal.h b/include/PatchSideDataOpsReal.h
index 3c44b26..0793f81 100644
--- a/include/PatchSideDataOpsReal.h
+++ b/include/PatchSideDataOpsReal.h
@@ -62,7 +62,7 @@ public:
     */
    PatchSideDataOpsReal();
 
-   virtual ~PatchSideDataOpsReal<DIM,TYPE>();
+   virtual ~PatchSideDataOpsReal();
 
    /**
     * Copy dst data to src data over given box.
diff --git a/include/RefineAlgorithm.h b/include/RefineAlgorithm.h
index 5323ebe..81a7f52 100644
--- a/include/RefineAlgorithm.h
+++ b/include/RefineAlgorithm.h
@@ -120,7 +120,7 @@ public:
    /*!
     * The virtual destructor for the algorithm releases all internal storage.
     */
-   virtual ~RefineAlgorithm<DIM>();
+   virtual ~RefineAlgorithm();
 
    /*!
     * Register a refine operation with the refine algorithm object.  This 
diff --git a/include/RefineClasses.h b/include/RefineClasses.h
index 6eb5c50..1c26721 100644
--- a/include/RefineClasses.h
+++ b/include/RefineClasses.h
@@ -66,7 +66,7 @@ public:
     * The virtual destructor destroys the refinement data items owned 
     * by this object (and the associated RefineAlgorithm<DIM> object).
     */
-   virtual ~RefineClasses<DIM>();
+   virtual ~RefineClasses();
 
    /**
     * Return number of equivalence classes maintained by this object
diff --git a/include/RefineCopyTransaction.h b/include/RefineCopyTransaction.h
index 58bf391..3b6dc44 100644
--- a/include/RefineCopyTransaction.h
+++ b/include/RefineCopyTransaction.h
@@ -93,7 +93,7 @@ public:
     * The virtual destructor for the copy transaction releases all
     * memory associated with the transaction.
     */
-   virtual ~RefineCopyTransaction<DIM>();
+   virtual ~RefineCopyTransaction();
 
    /*!
     * Return a boolean indicating whether this transaction can estimate
diff --git a/include/RefineOperator.h b/include/RefineOperator.h
index 5984f5b..580098c 100644
--- a/include/RefineOperator.h
+++ b/include/RefineOperator.h
@@ -75,7 +75,7 @@ public:
     * The virtual destructor for the refinement operator does
     * nothing interesting.
     */
-   virtual ~RefineOperator<DIM>();
+   virtual ~RefineOperator();
 
    /**
     * Return true if the refinement operation matches the variable and
diff --git a/include/RefineSchedule.C b/include/RefineSchedule.C
index d4e6a90..d19fb4a 100644
--- a/include/RefineSchedule.C
+++ b/include/RefineSchedule.C
@@ -41,18 +41,6 @@ namespace SAMRAI {
 #define BIG_GHOST_CELL_WIDTH  (10)
 
 
-/*!
- * Timer objects for performance measurement.
- */
-static tbox::Pointer<tbox::Timer> t_fill_data;
-static tbox::Pointer<tbox::Timer> t_recursive_fill;
-static tbox::Pointer<tbox::Timer> t_refine_scratch_data;
-static tbox::Pointer<tbox::Timer> t_gen_sched_n_squared;
-static tbox::Pointer<tbox::Timer> t_gen_sched_box_graph;
-static tbox::Pointer<tbox::Timer> t_gen_sched_box_tree; 
-static tbox::Pointer<tbox::Timer> t_gen_comm_sched;
-static tbox::Pointer<tbox::Timer> t_finish_sched_const;
-
 /*
 *************************************************************************
 *                                                                       *
@@ -67,6 +55,22 @@ template<int DIM> const hier::IntVector<DIM>
    RefineSchedule<DIM>::s_constant_one_intvector = hier::IntVector<DIM>(1);
 template<int DIM> std::string
    RefineSchedule<DIM>::s_schedule_generation_method = "BOX_TREE";
+template<int DIM> tbox::Pointer<tbox::Timer>
+   RefineSchedule<DIM>::t_fill_data;
+template<int DIM> tbox::Pointer<tbox::Timer>
+   RefineSchedule<DIM>::t_recursive_fill;
+template<int DIM> tbox::Pointer<tbox::Timer>
+   RefineSchedule<DIM>::t_refine_scratch_data;
+template<int DIM> tbox::Pointer<tbox::Timer>
+   RefineSchedule<DIM>::t_gen_sched_n_squared;
+template<int DIM> tbox::Pointer<tbox::Timer>
+   RefineSchedule<DIM>::t_gen_sched_box_graph;
+template<int DIM> tbox::Pointer<tbox::Timer>
+   RefineSchedule<DIM>::t_gen_sched_box_tree;
+template<int DIM> tbox::Pointer<tbox::Timer>
+   RefineSchedule<DIM>::t_gen_comm_sched;
+template<int DIM> tbox::Pointer<tbox::Timer>
+   RefineSchedule<DIM>::t_finish_sched_const;
 
 /*
  * ************************************************************************
@@ -809,6 +813,19 @@ template<int DIM> void RefineSchedule<DIM>::fillData(
    d_transaction_factory->setTransactionTime(fill_time);
    d_transaction_factory->setRefineItems(d_refine_items, d_number_refine_items);
 
+   /*
+    * Set the destination level number for the variable fill pattern
+    * objects.
+    */
+   const int num_equiv_classes =
+      d_refine_classes->getNumberOfEquivalenceClasses();
+   for (int nc = 0; nc < num_equiv_classes; nc++) {
+      const typename xfer::RefineClasses<DIM>::Data& rep_item =
+         d_refine_classes->getClassRepresentative(nc);
+      rep_item.d_var_fill_pattern->setTargetPatchLevelNumber(
+         d_dst_level->getLevelNumber());
+   }
+
    /*
     * Check whether scratch data needs to be allocated on the destination
     * level.  Keep track of those allocated components so that they may be
@@ -840,6 +857,16 @@ template<int DIM> void RefineSchedule<DIM>::fillData(
 
    d_dst_level->deallocatePatchData(allocate_vector);
 
+   /*
+    * Reset the destination level number for the variable fill pattern
+    * objects.
+    */
+   for (int nc = 0; nc < num_equiv_classes; nc++) {
+      const typename xfer::RefineClasses<DIM>::Data& rep_item =
+         d_refine_classes->getClassRepresentative(nc);
+      rep_item.d_var_fill_pattern->setTargetPatchLevelNumber(-1);
+   }
+
    /*
     * Unset the refine items for all transactions.  These items are
     * shared by all transaction objects in the communication schedule.
@@ -1887,12 +1914,14 @@ template<int DIM> void RefineSchedule<DIM>::constructScheduleTransactions(
             hier::Box<DIM> src_mask( hier::Box<DIM>::shift( test_mask,-shift) );
 
             tbox::Pointer< hier::BoxOverlap<DIM> > overlap =
-               rep_item.d_var_fill_pattern->calculateOverlap(
+               rep_item.d_var_fill_pattern->calculateOverlapOnLevel(
                   *dst_pdf->getBoxGeometry(dst_box),
                   *src_pdf->getBoxGeometry(src_box),
                   dst_box,
                   src_mask,
-                  true, shift);
+                  true, shift,
+                  dst_level->getLevelNumber(),
+                  src_level->getLevelNumber());
 /*	    tbox::Pointer< hier::BoxOverlap<DIM> > overlap =
 	       dst_pdf->getBoxGeometry(dst_box)
 		      ->calculateOverlap(
@@ -2230,6 +2259,8 @@ template<int DIM> void RefineSchedule<DIM>::printClassData(std::ostream& stream)
 
 /*
 ***********************************************************************
+Allocate static timers and register freeTimers with the shutdown
+registry.
 ***********************************************************************
 */
 template<int DIM>
diff --git a/include/RefineSchedule.h b/include/RefineSchedule.h
index ed4ecb0..bf2f1b8 100644
--- a/include/RefineSchedule.h
+++ b/include/RefineSchedule.h
@@ -197,7 +197,7 @@ public:
    /*!
     * Virtual destructor for the schedule releases all internal storage.
     */
-   virtual ~RefineSchedule<DIM>();
+   virtual ~RefineSchedule();
 
    /*!
     * @brief Reset this refine schedule to perform data transfers
@@ -542,14 +542,16 @@ private:
     */
    void initialCheckRefineClassItems() const;
 
-   void initializeTimers();
-
-
    /*!
     * @brief Set up things for the entire class.
     */
    void firstConstructorTasks();
 
+   /*!
+    * Allocate static timers.
+    */
+   static void initializeTimers();
+
    /*!
     * Free static timers.
     *
@@ -723,7 +725,17 @@ private:
    int d_max_fill_boxes;
    hier::BoxArray<DIM> d_src_masks;
 
-
+   /*!
+    * Timer objects for performance measurement.
+    */
+   static tbox::Pointer<tbox::Timer> t_fill_data;
+   static tbox::Pointer<tbox::Timer> t_recursive_fill;
+   static tbox::Pointer<tbox::Timer> t_refine_scratch_data;
+   static tbox::Pointer<tbox::Timer> t_gen_sched_n_squared;
+   static tbox::Pointer<tbox::Timer> t_gen_sched_box_graph;
+   static tbox::Pointer<tbox::Timer> t_gen_sched_box_tree;
+   static tbox::Pointer<tbox::Timer> t_gen_comm_sched;
+   static tbox::Pointer<tbox::Timer> t_finish_sched_const;
 };
 
 }
diff --git a/include/RefineTimeTransaction.h b/include/RefineTimeTransaction.h
index ac87a24..c852398 100644
--- a/include/RefineTimeTransaction.h
+++ b/include/RefineTimeTransaction.h
@@ -109,7 +109,7 @@ public:
     * The virtual destructor for time transaction releases all
     * memory associated with the transaction.
     */
-   virtual ~RefineTimeTransaction<DIM>();
+   virtual ~RefineTimeTransaction();
 
    /*!
     * Return a boolean indicating whether this transaction can estimate
diff --git a/include/RobinBcCoefStrategy.h b/include/RobinBcCoefStrategy.h
index 21dd969..017ea86 100644
--- a/include/RobinBcCoefStrategy.h
+++ b/include/RobinBcCoefStrategy.h
@@ -57,7 +57,7 @@ public:
    /*!
     * @brief Destructor.
     */
-   virtual ~RobinBcCoefStrategy<DIM>(void);
+   virtual ~RobinBcCoefStrategy();
 
 
    //@{
diff --git a/include/SAMRAIVectorReal.h b/include/SAMRAIVectorReal.h
index b50fc0d..fd73a49 100644
--- a/include/SAMRAIVectorReal.h
+++ b/include/SAMRAIVectorReal.h
@@ -151,7 +151,7 @@ public:
     * some pre-existing patch data objects that must live beyond the 
     * destruction of the vector object.
     */
-   virtual ~SAMRAIVectorReal<DIM,TYPE>();
+   virtual ~SAMRAIVectorReal();
 
    /**
     * Set string identifier for this vector object.
diff --git a/include/SNES_SAMRAIContext.h b/include/SNES_SAMRAIContext.h
index 6db0ea5..6a1765d 100644
--- a/include/SNES_SAMRAIContext.h
+++ b/include/SNES_SAMRAIContext.h
@@ -229,7 +229,7 @@ public:
     * Destructor for solve_SNES_SAMRAIContext destroys the SNES 
     * and the PETSc solution vector wrapper.
     */
-   ~SNES_SAMRAIContext<DIM>();
+   ~SNES_SAMRAIContext();
 
    /*!
     * Return the PETSc nonlinear solver object.
diff --git a/include/SideComplexConstantRefine.h b/include/SideComplexConstantRefine.h
index 5397ec7..6332eaf 100644
--- a/include/SideComplexConstantRefine.h
+++ b/include/SideComplexConstantRefine.h
@@ -49,7 +49,7 @@ public:
    /**
     * Uninteresting virtual destructor.
     */
-   virtual ~SideComplexConstantRefine<DIM>();
+   virtual ~SideComplexConstantRefine();
 
    /**
     * Return true if the variable and name string match side-centered 
diff --git a/include/SideComplexLinearTimeInterpolateOp.h b/include/SideComplexLinearTimeInterpolateOp.h
index 93dc0d5..ddc9ad7 100644
--- a/include/SideComplexLinearTimeInterpolateOp.h
+++ b/include/SideComplexLinearTimeInterpolateOp.h
@@ -46,7 +46,7 @@ public:
    /**
     * Uninteresting virtual destructor.
     */
-   virtual ~SideComplexLinearTimeInterpolateOp<DIM>();
+   virtual ~SideComplexLinearTimeInterpolateOp();
 
    /**
     * Return true if the variable and name string match the standard
diff --git a/include/SideData.h b/include/SideData.h
index 608eac6..2a59d2b 100644
--- a/include/SideData.h
+++ b/include/SideData.h
@@ -143,7 +143,7 @@ public:
    /*!
     * @brief The virtual destructor for a side data object.
     */
-   virtual ~SideData<DIM,TYPE>();
+   virtual ~SideData();
 
    /*!
     * @brief Return constant reference to vector describing which coordinate
diff --git a/include/SideDataFactory.h b/include/SideDataFactory.h
index dba3eda..5d1a46f 100644
--- a/include/SideDataFactory.h
+++ b/include/SideDataFactory.h
@@ -67,7 +67,7 @@ public:
    /**
     * Virtual destructor for the side data factory class.
     */
-   virtual ~SideDataFactory<DIM,TYPE>();
+   virtual ~SideDataFactory();
 
    /**
     * @brief Abstract virtual function to clone a patch data factory.
diff --git a/include/SideDoubleConstantRefine.h b/include/SideDoubleConstantRefine.h
index 921560b..a578638 100644
--- a/include/SideDoubleConstantRefine.h
+++ b/include/SideDoubleConstantRefine.h
@@ -49,7 +49,7 @@ public:
    /**
     * Uninteresting virtual destructor.
     */
-   virtual ~SideDoubleConstantRefine<DIM>();
+   virtual ~SideDoubleConstantRefine();
 
    /**
     * Return true if the variable and name string match side-centered 
diff --git a/include/SideDoubleLinearTimeInterpolateOp.h b/include/SideDoubleLinearTimeInterpolateOp.h
index 5d8a4a5..ce9a7be 100644
--- a/include/SideDoubleLinearTimeInterpolateOp.h
+++ b/include/SideDoubleLinearTimeInterpolateOp.h
@@ -46,7 +46,7 @@ public:
    /**
     * Uninteresting virtual destructor.
     */
-   virtual ~SideDoubleLinearTimeInterpolateOp<DIM>();
+   virtual ~SideDoubleLinearTimeInterpolateOp();
 
    /**
     * Return true if the variable and name string match the standard
diff --git a/include/SideFloatConstantRefine.h b/include/SideFloatConstantRefine.h
index 8a48fce..0d64001 100644
--- a/include/SideFloatConstantRefine.h
+++ b/include/SideFloatConstantRefine.h
@@ -49,7 +49,7 @@ public:
    /**
     * Uninteresting virtual destructor.
     */
-   virtual ~SideFloatConstantRefine<DIM>();
+   virtual ~SideFloatConstantRefine();
 
    /**
     * Return true if the variable and name string match side-centered 
diff --git a/include/SideFloatLinearTimeInterpolateOp.h b/include/SideFloatLinearTimeInterpolateOp.h
index 2119801..a033d4a 100644
--- a/include/SideFloatLinearTimeInterpolateOp.h
+++ b/include/SideFloatLinearTimeInterpolateOp.h
@@ -46,7 +46,7 @@ public:
    /**
     * Uninteresting virtual destructor.
     */
-   virtual ~SideFloatLinearTimeInterpolateOp<DIM>();
+   virtual ~SideFloatLinearTimeInterpolateOp();
 
    /**
     * Return true if the variable and name string match the standard
diff --git a/include/SideGeometry.h b/include/SideGeometry.h
index 85e4ccd..ceba9e8 100644
--- a/include/SideGeometry.h
+++ b/include/SideGeometry.h
@@ -64,7 +64,7 @@ public:
    /*!
     * @brief The virtual destructor does nothing interesting.
     */
-   virtual ~SideGeometry<DIM>();
+   virtual ~SideGeometry();
 
    /*!
     * @brief Compute the overlap in side-centered index space between
diff --git a/include/SideIndex.h b/include/SideIndex.h
index 74c7ac2..3cb152c 100644
--- a/include/SideIndex.h
+++ b/include/SideIndex.h
@@ -59,7 +59,7 @@ public:
    /**
     * The side index destructor does nothing interesting.
     */
-   ~SideIndex<DIM>();
+   ~SideIndex();
 
    /**
     * Get the axis for which this side index is defined (X=0, Y=1, Z=2).
diff --git a/include/SideIntegerConstantRefine.h b/include/SideIntegerConstantRefine.h
index 507de57..977d6bd 100644
--- a/include/SideIntegerConstantRefine.h
+++ b/include/SideIntegerConstantRefine.h
@@ -49,7 +49,7 @@ public:
    /**
     * Uninteresting virtual destructor.
     */
-   virtual ~SideIntegerConstantRefine<DIM>();
+   virtual ~SideIntegerConstantRefine();
 
    /**
     * Return true if the variable and name string match side-centered 
diff --git a/include/SideIterator.h b/include/SideIterator.h
index b2c13df..ac0dcd2 100644
--- a/include/SideIterator.h
+++ b/include/SideIterator.h
@@ -67,7 +67,7 @@ public:
    /**
     * Destructor for the side iterator.
     */
-   ~SideIterator<DIM>();
+   ~SideIterator();
 
    /**
     * Extract the side index corresponding to the iterator position in the box.
diff --git a/include/SideOverlap.h b/include/SideOverlap.h
index f129dc5..57854d3 100644
--- a/include/SideOverlap.h
+++ b/include/SideOverlap.h
@@ -45,7 +45,7 @@ public:
     * The virtual destructor does nothing interesting except deallocate
     * box data.
     */
-   virtual ~SideOverlap<DIM>();
+   virtual ~SideOverlap();
 
    /**
     * Return whether there is an empty intersection between the two
diff --git a/include/SideVariable.C b/include/SideVariable.C
index 190dfd9..c92215c 100644
--- a/include/SideVariable.C
+++ b/include/SideVariable.C
@@ -54,7 +54,7 @@ SideVariable<DIM,TYPE>::SideVariable(
       for (int id = 0; id < DIM; id++) {
          d_directions(id) = ( (direction == id) ? 1 : 0 );  
       }  
-      setPatchDataFactory(new SideDataFactory<DIM,TYPE>(
+      this->setPatchDataFactory(new SideDataFactory<DIM,TYPE>(
                              depth,
                              hier::IntVector<DIM>(0),
                              fine_boundary_represents_var,
diff --git a/include/SideVariable.h b/include/SideVariable.h
index 99bd694..2ead01f 100644
--- a/include/SideVariable.h
+++ b/include/SideVariable.h
@@ -70,7 +70,7 @@ public:
    /*!
     * @brief Virtual destructor for side variable objects.
     */
-   virtual ~SideVariable<DIM,TYPE>();
+   virtual ~SideVariable();
 
    /*!
     * @brief Return constant reference to vector describing which coordinate
diff --git a/include/SimpleCellRobinBcCoefs.h b/include/SimpleCellRobinBcCoefs.h
index d06c1a7..073bd8d 100644
--- a/include/SimpleCellRobinBcCoefs.h
+++ b/include/SimpleCellRobinBcCoefs.h
@@ -69,7 +69,7 @@ public:
    /*!
     * @brief Destructor.
     */
-   virtual ~SimpleCellRobinBcCoefs<DIM>(void);
+   virtual ~SimpleCellRobinBcCoefs();
 
 
 
diff --git a/include/SkeletonCoarsen.h b/include/SkeletonCoarsen.h
index 1f4b79a..3a4c77b 100644
--- a/include/SkeletonCoarsen.h
+++ b/include/SkeletonCoarsen.h
@@ -47,7 +47,7 @@ public:
    /**
     * Uninteresting virtual destructor.
     */
-   virtual ~SkeletonCoarsen<DIM>();
+   virtual ~SkeletonCoarsen();
 
    /**
     * Return true if the variable and name string match cell-centered 
diff --git a/include/SkeletonGridGeometry.h b/include/SkeletonGridGeometry.h
index 8511514..79cfe73 100644
--- a/include/SkeletonGridGeometry.h
+++ b/include/SkeletonGridGeometry.h
@@ -120,7 +120,7 @@ public:
     * Destructor for SkeletonGridGeometry unregisters the object 
     * with the restart manager if previously registered.
     */
-   virtual ~SkeletonGridGeometry<DIM>();
+   virtual ~SkeletonGridGeometry();
    
    /**
     * Create and return a pointer to a refined version of this Cartesian grid
diff --git a/include/SkeletonPatchGeometry.h b/include/SkeletonPatchGeometry.h
index 672bce1..c1bad61 100644
--- a/include/SkeletonPatchGeometry.h
+++ b/include/SkeletonPatchGeometry.h
@@ -51,7 +51,7 @@ public:
    /**
     * Destructor for SkeletonPatchGeometry.
     */
-   ~SkeletonPatchGeometry<DIM>();
+   ~SkeletonPatchGeometry();
 
    /**
     * Print SkeletonPatchGeometry class data.
diff --git a/include/SkeletonRefine.h b/include/SkeletonRefine.h
index cc3d3d9..e860a27 100644
--- a/include/SkeletonRefine.h
+++ b/include/SkeletonRefine.h
@@ -47,7 +47,7 @@ public:
    /**
     * Uninteresting virtual destructor.
     */
-   virtual ~SkeletonRefine<DIM>();
+   virtual ~SkeletonRefine();
 
    /**
     * Return true if the variable and name string match cell-centered 
diff --git a/include/StandardCoarsenTransactionFactory.h b/include/StandardCoarsenTransactionFactory.h
index 37277a6..61d0fb2 100644
--- a/include/StandardCoarsenTransactionFactory.h
+++ b/include/StandardCoarsenTransactionFactory.h
@@ -44,7 +44,7 @@ public:
    /*!
     * @brief Virtual destructor.
     */
-   virtual ~StandardCoarsenTransactionFactory<DIM>();
+   virtual ~StandardCoarsenTransactionFactory();
 
    /*!
     * @brief Set the array of CoarsenClass::Data items used by the transactions.
diff --git a/include/StandardLocallyActiveDataCoarsenTransactionFactory.h b/include/StandardLocallyActiveDataCoarsenTransactionFactory.h
index 7868ce2..4dbecd9 100644
--- a/include/StandardLocallyActiveDataCoarsenTransactionFactory.h
+++ b/include/StandardLocallyActiveDataCoarsenTransactionFactory.h
@@ -47,7 +47,7 @@ public:
    /*!
     * @brief Virtual destructor.
     */
-   virtual ~StandardLocallyActiveDataCoarsenTransactionFactory<DIM>();
+   virtual ~StandardLocallyActiveDataCoarsenTransactionFactory();
 
    /*!
     * @brief Set the array of CoarsenClass::Data items used by the transactions.
diff --git a/include/StandardLocallyActiveDataRefineTransactionFactory.h b/include/StandardLocallyActiveDataRefineTransactionFactory.h
index 79935df..20fed02 100644
--- a/include/StandardLocallyActiveDataRefineTransactionFactory.h
+++ b/include/StandardLocallyActiveDataRefineTransactionFactory.h
@@ -48,7 +48,7 @@ public:
    /*!
     * @brief Virtual destructor.
     */
-   virtual ~StandardLocallyActiveDataRefineTransactionFactory<DIM>();
+   virtual ~StandardLocallyActiveDataRefineTransactionFactory();
 
    /*!
     * @brief Set the array of RefineClass::Data items used by the transactions.
diff --git a/include/StandardRefineTransactionFactory.h b/include/StandardRefineTransactionFactory.h
index 8438976..40d9393 100644
--- a/include/StandardRefineTransactionFactory.h
+++ b/include/StandardRefineTransactionFactory.h
@@ -47,7 +47,7 @@ public:
    /*!
     * @brief Virtual destructor.
     */
-   virtual ~StandardRefineTransactionFactory<DIM>();
+   virtual ~StandardRefineTransactionFactory();
 
    /*!
     * @brief Set the array of RefineClass::Data items used by the transactions.
diff --git a/include/StandardTagAndInitStrategy.h b/include/StandardTagAndInitStrategy.h
index 2870650..0b56f26 100644
--- a/include/StandardTagAndInitStrategy.h
+++ b/include/StandardTagAndInitStrategy.h
@@ -69,7 +69,7 @@ public:
     * Empty destructor for 
     * StandardTagAndInitStrategy<DIM>.
     */
-   virtual ~StandardTagAndInitStrategy<DIM>();
+   virtual ~StandardTagAndInitStrategy();
 
    /**
     * Determine time increment to advance data on level. The 
diff --git a/include/StandardTagAndInitialize.C b/include/StandardTagAndInitialize.C
index 66d7b1d..34b0824 100644
--- a/include/StandardTagAndInitialize.C
+++ b/include/StandardTagAndInitialize.C
@@ -287,7 +287,7 @@ template<int DIM> void StandardTagAndInitialize<DIM>::tagCellsForRefinement(
    if (d_use_refine_boxes) {
 
       hier::BoxArray<DIM> refine_boxes;
-      getUserSuppliedRefineBoxes(refine_boxes, level_number, regrid_time); 
+      this->getUserSuppliedRefineBoxes(refine_boxes, level_number, regrid_time); 
 
       tbox::Pointer< hier::PatchLevel<DIM> > level = 
          hierarchy->getPatchLevel(level_number);
diff --git a/include/StandardTagAndInitialize.h b/include/StandardTagAndInitialize.h
index c5f5077..2e9a3e9 100644
--- a/include/StandardTagAndInitialize.h
+++ b/include/StandardTagAndInitialize.h
@@ -100,7 +100,7 @@ public:
    /*!
     * Virtual destructor for StandardTagAndInitialize<DIM>.
     */
-   virtual ~StandardTagAndInitialize<DIM>();
+   virtual ~StandardTagAndInitialize();
 
    /*!
     * Specifies whether the chosen method advances the solution data 
diff --git a/include/SumOperation.I b/include/SumOperation.I
index 76c77ab..6240c07 100644
--- a/include/SumOperation.I
+++ b/include/SumOperation.I
@@ -29,13 +29,10 @@ SumOperation<TYPE>::~SumOperation()
 }
 
 template <class TYPE> inline
-void SumOperation<TYPE>::operator()(TYPE& vdst, const TYPE& vsrc) const
+void SumOperation<TYPE>::operator()(TYPE* vdst, const TYPE* vsrc, const int size) const
 {
-// Disable Intel warning about conversions
-#ifdef __INTEL_COMPILER
-#pragma warning (disable:810)
-#endif
-   vdst += vsrc;
+   for (int i = 0; i < size; ++i)
+      vdst[i] += vsrc[i];
 }
 
 #ifdef DEBUG_NO_INLINE
diff --git a/include/SumOperation.h b/include/SumOperation.h
index 182ad66..7497ea5 100644
--- a/include/SumOperation.h
+++ b/include/SumOperation.h
@@ -37,7 +37,7 @@ public:
    /*!
     * The operator adds the source value to the destination.
     */
-   void operator()(TYPE& vdst, const TYPE& vsrc) const;
+   void operator()(TYPE* vdst, const TYPE* vsrc, const int size) const;
 
 private:
    SumOperation(const SumOperation<TYPE>&);   // not implemented
diff --git a/include/Sundials_SAMRAIVector.h b/include/Sundials_SAMRAIVector.h
index d29c4a6..91b2116 100644
--- a/include/Sundials_SAMRAIVector.h
+++ b/include/Sundials_SAMRAIVector.h
@@ -106,7 +106,7 @@ protected:
    /*
     * Virtual destructor for Sundials_SAMRAIVector<DIM>.
     */
-   virtual ~Sundials_SAMRAIVector<DIM>();
+   virtual ~Sundials_SAMRAIVector();
 
 private:
    /*
diff --git a/include/TagAndInitializeStrategy.h b/include/TagAndInitializeStrategy.h
index e11b909..5872cbb 100644
--- a/include/TagAndInitializeStrategy.h
+++ b/include/TagAndInitializeStrategy.h
@@ -123,7 +123,7 @@ public:
    /*!
     * Empty destructor for TagAndInitializeStrategy<DIM>.
     */
-   virtual ~TagAndInitializeStrategy<DIM>();
+   virtual ~TagAndInitializeStrategy();
 
    /*!
     * Return user supplied set of refine boxes for specified level number
diff --git a/include/TimeInterpolateOperator.h b/include/TimeInterpolateOperator.h
index 39f2423..b587a47 100644
--- a/include/TimeInterpolateOperator.h
+++ b/include/TimeInterpolateOperator.h
@@ -70,7 +70,7 @@ public:
     * The virtual destructor for the coarsening operator does
     * nothing interesting.
     */
-   virtual ~TimeInterpolateOperator<DIM>();
+   virtual ~TimeInterpolateOperator();
 
    /**
     * Return true if the time interpolation operation matches the
diff --git a/include/TimeRefinementIntegrator.h b/include/TimeRefinementIntegrator.h
index 64a3a97..eb6bab0 100644
--- a/include/TimeRefinementIntegrator.h
+++ b/include/TimeRefinementIntegrator.h
@@ -183,7 +183,7 @@ public:
     * The destructor for TimeRefinementIntegrator<DIM> unregisters 
     * the integrator object with the restart manager when so registered.
     */
-   ~TimeRefinementIntegrator<DIM>();
+   ~TimeRefinementIntegrator();
 
    /*!
     * Set AMR patch hierarchy configuration and data at start of simulation.
diff --git a/include/TimeRefinementLevelStrategy.h b/include/TimeRefinementLevelStrategy.h
index a829869..38b6215 100644
--- a/include/TimeRefinementLevelStrategy.h
+++ b/include/TimeRefinementLevelStrategy.h
@@ -65,7 +65,7 @@ public:
    /**
     * Virtual destructor for TimeRefinementLevelStrategy<DIM>.
     */
-   virtual ~TimeRefinementLevelStrategy<DIM>();
+   virtual ~TimeRefinementLevelStrategy();
 
    /**
     * Initialize the state of the integrator that performs time 
diff --git a/include/Variable.h b/include/Variable.h
index 934d268..070d837 100644
--- a/include/Variable.h
+++ b/include/Variable.h
@@ -87,7 +87,7 @@ public:
    /**
     * Virtual destructor for variable objects.
     */
-   virtual ~Variable<DIM>();
+   virtual ~Variable();
 
    /**
     * Return the instance identifier for this particular variable object.
diff --git a/include/VariableFillPattern.C b/include/VariableFillPattern.C
index cd00635..16caf7c 100644
--- a/include/VariableFillPattern.C
+++ b/include/VariableFillPattern.C
@@ -39,7 +39,33 @@ VariableFillPattern<DIM>::~VariableFillPattern()
 {
 }
 
+template<int DIM>
+tbox::Pointer< hier::BoxOverlap<DIM> >
+VariableFillPattern<DIM>::calculateOverlapOnLevel(const hier::BoxGeometry<DIM>& dst_geometry,
+                                                  const hier::BoxGeometry<DIM>& src_geometry,
+                                                  const hier::Box<DIM>& dst_patch_box,
+                                                  const hier::Box<DIM>& src_mask,
+                                                  const bool overwrite_interior,
+                                                  const hier::IntVector<DIM>& src_offset,
+                                                  const int dst_level_num,
+                                                  const int src_level_num) const
+{
+   NULL_USE(dst_level_num);
+   NULL_USE(src_level_num);
+   return calculateOverlap(dst_geometry,
+                           src_geometry,
+                           dst_patch_box,
+                           src_mask,
+                           overwrite_interior,
+                           src_offset);
+}
 
+template<int DIM>
+void VariableFillPattern<DIM>::setTargetPatchLevelNumber(const int level_num)
+{
+   NULL_USE(level_num);
+   return;
+}
 
 }
 }
diff --git a/include/VariableFillPattern.h b/include/VariableFillPattern.h
index 35c8377..9100093 100644
--- a/include/VariableFillPattern.h
+++ b/include/VariableFillPattern.h
@@ -67,6 +67,47 @@ public:
                     const bool overwrite_interior,
                     const hier::IntVector<DIM>& src_offset) const = 0;
 
+   /*!
+    * This virtual method provides an interface to calculate overlaps between
+    * the destination and source geometries on a specified level of the patch
+    * hierarchy.
+    *
+    * @note A default implementation is provided that simply calls the pure
+    * virtual method calculateOverlap() for implementations that are level
+    * independent.
+    *
+    * @param dst_geometry    geometry object for destination box
+    * @param src_geometry    geometry object for source box
+    * @param dst_patch_box   box for the destination patch
+    * @param src_mask        the source mask, the box resulting from shifting
+    *                        the source box
+    * @param overwrite_interior  controls whether or not to include the
+    *                            destination box interior in the overlap
+    * @param src_offset      the offset between source and destination
+    *                        index space.  src + src_offset = dst
+    * @param dst_level_num   the level of the patch hierarchy on which the
+    *                        dst boxes are located
+    * @param src_level_num   the level of the patch hierarchy on which the
+    *                        src boxes are located
+    *
+    * @return                Pointer to the calculated overlap object
+    */
+   virtual tbox::Pointer< hier::BoxOverlap<DIM> >
+   calculateOverlapOnLevel(const hier::BoxGeometry<DIM>& dst_geometry,
+                           const hier::BoxGeometry<DIM>& src_geometry,
+                           const hier::Box<DIM>& dst_patch_box,
+                           const hier::Box<DIM>& src_mask,
+                           const bool overwrite_interior,
+                           const hier::IntVector<DIM>& src_offset,
+                           const int dst_level_num,
+                           const int src_level_num) const;
+
+   /*!
+    * Set the target patch level number for the variable fill pattern.  The
+    * default implementation is empty.
+    */
+   virtual void setTargetPatchLevelNumber(const int level_num);
+
    /*!
     * Return the maximum ghost width of the boundary stencil.  The default
     * implementation throws an error.
diff --git a/include/VisDerivedDataStrategy.h b/include/VisDerivedDataStrategy.h
index 668b391..418e505 100644
--- a/include/VisDerivedDataStrategy.h
+++ b/include/VisDerivedDataStrategy.h
@@ -67,7 +67,7 @@ public:
    /*!
     * @brief Destructor for VisDerivedDataStrategy<DIM>.
     */
-   virtual ~VisDerivedDataStrategy<DIM>();
+   virtual ~VisDerivedDataStrategy();
 
    /*!
     * @brief This function calculates and packs derived
diff --git a/include/VisItDataWriter.C b/include/VisItDataWriter.C
index edf7d77..b050436 100644
--- a/include/VisItDataWriter.C
+++ b/include/VisItDataWriter.C
@@ -4481,7 +4481,7 @@ template<int DIM> void VisItDataWriter<DIM>::HDFputIntegerArray2D(
 #endif
    herr_t errf;
    if ((nelements0 > 0) && (nelements1 > 0)) {
-      hsize_t dim[] = {nelements0, nelements1};
+      hsize_t dim[] = {static_cast<hsize_t>(nelements0), static_cast<hsize_t>(nelements1)};
       hid_t space = H5Screate_simple(2, dim, NULL);
 #ifdef DEBUG_CHECK_ASSERTIONS
       TBOX_ASSERT(space >= 0);
@@ -4555,7 +4555,7 @@ template<int DIM> void VisItDataWriter<DIM>::HDFputDoubleArray2D(
 #endif
    herr_t errf;
    if ((nelements0 > 0) && (nelements1 > 0)) {
-      hsize_t dim[] = {nelements0, nelements1};
+      hsize_t dim[] = {static_cast<hsize_t>(nelements0), static_cast<hsize_t>(nelements1)};
       hid_t space = H5Screate_simple(2, dim, NULL);
 #ifdef DEBUG_CHECK_ASSERTIONS
       TBOX_ASSERT(space >= 0);
diff --git a/include/VisItDataWriter.h b/include/VisItDataWriter.h
index 78c37a2..4de1a5d 100644
--- a/include/VisItDataWriter.h
+++ b/include/VisItDataWriter.h
@@ -218,7 +218,7 @@ public:
     *
     * The destructor for the writer does nothing interesting.
     */
-   virtual ~VisItDataWriter<DIM>();
+   virtual ~VisItDataWriter();
 
    /*!
     * @brief This method sets the default data writer to use for derived
diff --git a/include/VisMaterialsDataStrategy.h b/include/VisMaterialsDataStrategy.h
index c8b3d3e..917f408 100644
--- a/include/VisMaterialsDataStrategy.h
+++ b/include/VisMaterialsDataStrategy.h
@@ -63,7 +63,7 @@ public:
    /*!
     * @brief Destructor for VisMaterialsDataStrategy<DIM>.
     */
-   virtual ~VisMaterialsDataStrategy<DIM>();
+   virtual ~VisMaterialsDataStrategy();
 
    /*!
     * @brief Enumerated type for the allowable return values
diff --git a/include/tbox/Utilities.h b/include/tbox/Utilities.h
index 8b2bded..47cea96 100644
--- a/include/tbox/Utilities.h
+++ b/include/tbox/Utilities.h
@@ -121,9 +121,7 @@ struct Utilities
  * A null use of a variable, use to avoid GNU compiler 
  * warnings about unused variables.
  */
-#define NULL_USE(variable) do { \
-       if(0) {char *temp = (char *)&variable; temp++;} \
-    } while (0)
+#define NULL_USE(variable) (void)(variable)
 
 /*!
  * Throw an error exception from within any C++ source code.  The 
diff --git a/readme.md b/readme.md
new file mode 100644
index 0000000..0cc74a8
--- /dev/null
+++ b/readme.md
@@ -0,0 +1,7 @@
+# SAMRAI 2.4.4 backports
+
+IBAMR requires this version of SAMRAI, which in turn requires some patches to
+compile with modern toolchains. This repository contains both the current patch
+as well as git history explaining each change in the patch.
+
+To generate the patch run `generate-patch.sh`
diff --git a/samrai-2.4.4-patch-ibamr-0.12.1.patch b/samrai-2.4.4-patch-ibamr-0.12.1.patch
new file mode 100644
index 0000000..2090acc
--- /dev/null
+++ b/samrai-2.4.4-patch-ibamr-0.12.1.patch
@@ -0,0 +1,47802 @@
+diff --git a/config/SAMRAI_config.h.in b/config/SAMRAI_config.h.in
+index 90be02a..9fc760b 100644
+--- a/config/SAMRAI_config.h.in
++++ b/config/SAMRAI_config.h.in
+@@ -1,4 +1,4 @@
+-/* config/SAMRAI_config.h.in.  Generated from configure.in by autoheader.  */
++/* config/SAMRAI_config.h.in.  Generated from configure.ac by autoheader.  */
+ 
+ 
+ 
+@@ -126,9 +126,6 @@
+ /* HAVE_MEMBER_FUNCTION_SPECIALIZATION */
+ #undef HAVE_MEMBER_FUNCTION_SPECIALIZATION
+ 
+-/* Define to 1 if you have the <memory.h> header file. */
+-#undef HAVE_MEMORY_H
+-
+ /* MPI library is present */
+ #undef HAVE_MPI
+ 
+@@ -159,6 +156,9 @@
+ /* Define to 1 if you have the <stdint.h> header file. */
+ #undef HAVE_STDINT_H
+ 
++/* Define to 1 if you have the <stdio.h> header file. */
++#undef HAVE_STDIO_H
++
+ /* Define to 1 if you have the <stdlib.h> header file. */
+ #undef HAVE_STDLIB_H
+ 
+@@ -313,19 +313,19 @@
+ #undef OSTRSTREAM_TYPE_IS_BROKEN
+ 
+ /* Define to the address where bug reports for this package should be sent. */
+-#undef PACKAGE_BUGREPORT
++/* #undef PACKAGE_BUGREPORT */
+ 
+ /* Define to the full name of this package. */
+-#undef PACKAGE_NAME
++/* #undef PACKAGE_NAME */
+ 
+ /* Define to the full name and version of this package. */
+-#undef PACKAGE_STRING
++/* #undef PACKAGE_STRING */
+ 
+ /* Define to the one symbol short name of this package. */
+-#undef PACKAGE_TARNAME
++/* #undef PACKAGE_TARNAME */
+ 
+ /* Define to the version of this package. */
+-#undef PACKAGE_VERSION
++/* #undef PACKAGE_VERSION */
+ 
+ /* Define if restrict is not properly supported */
+ #undef RESTRICT_IS_BROKEN
+diff --git a/config/aclocal.m4 b/config/aclocal.m4
+deleted file mode 100644
+index 2fdf8e2..0000000
+--- a/config/aclocal.m4
++++ /dev/null
+@@ -1,5834 +0,0 @@
+-# generated automatically by aclocal 1.9.6 -*- Autoconf -*-
+-
+-# Copyright (C) 1996, 1997, 1998, 1999, 2000, 2001, 2002, 2003, 2004,
+-# 2005  Free Software Foundation, Inc.
+-# This file is free software; the Free Software Foundation
+-# gives unlimited permission to copy and/or distribute it,
+-# with or without modifications, as long as this notice is preserved.
+-
+-# This program is distributed in the hope that it will be useful,
+-# but WITHOUT ANY WARRANTY, to the extent permitted by law; without
+-# even the implied warranty of MERCHANTABILITY or FITNESS FOR A
+-# PARTICULAR PURPOSE.
+-
+-dnl File arg-with-environment.m4
+-dnl Written by Brian T.N. Gunney
+-dnl gunneyb@llnl.gov
+-dnl $Id: arg-with-environment.m4 155 2007-05-14 22:09:31Z gunney $
+-
+-dnl IMPORTANT NOTE: This macro was originally written to
+-dnl let configure macros check environments so that developers
+-dnl can set up "make distcheck" to activate or deactivate
+-dnl certain packages.  This is largely not needed anymore
+-dnl because recent automake versions (1.5+, maybe?) allows
+-dnl you to specify configure options for the distcheck rule.
+-dnl
+-dnl Therefore, you are encouraged to use the plain autoconf
+-dnl macros (AC_ARC_WITH and AC_ARG_ENABLE).
+-
+-AC_DEFUN([BTNG_ARG_WITH_ENV_WRAPPER],[
+-dnl This is a high-level macro similar to AC_ARG_WITH but it does
+-dnl   a few extra things.
+-dnl
+-dnl It is meant for setting a shell variable using either the
+-dnl   --with-feature configure flag or by setting a shell variable
+-dnl   in the environment.  But its primary goal it to set or unset
+-dnl   the shell variable (arg2).
+-dnl
+-dnl One of several things can happen to the shell variable
+-dnl   when you use this macro, depending first on the configure
+-dnl   option issued:
+-dnl   |
+-dnl   `-- no option given
+-dnl   |   `-- leave shell variable alone, regardless of whether
+-dnl   |       it is set (This is how you avoid
+-dnl   |       having to use the configure option, such as in
+-dnl   |       running the check rule by automake.)
+-dnl   `-- with-feature=no or without-feature
+-dnl   |   `-- unset shell variable, regardless of whether it is set
+-dnl   `-- with-feature=string
+-dnl   |   `-- set shell variable to the string
+-dnl   `-- with-feature or with-feature=yes
+-dnl       `-- if shell variable already set
+-dnl       |   `-- leave it a lone
+-dnl       `-- else if developer gave optional arg4
+-dnl       |   `-- execute optional arg4 to set shell variable
+-dnl       `-- else
+-dnl           `-- set shell variable to blank
+-dnl
+-dnl One of two things can happen to the with_feature variable,
+-dnl   assuming the developer does not change it using arg4.
+-dnl   `-- no option given
+-dnl       `-- with_feature is unset
+-dnl   `-- one of the options referring to "feature" is given
+-dnl       `-- with_feature is set
+-dnl
+-dnl In addition to running AC_ARG_WITH and caching the result, it:
+-dnl   Allows the variable to be set by the environment.  This is
+-dnl     for avoiding having to manually issue configure options
+-dnl     or when manual configure options are not permissible, as
+-dnl     in running "make check".  The environment variable is
+-dnl     checked if the --with-something=something_else option
+-dnl     is not given or given without the equal sign.
+-dnl   Lets you specify command to run if --with-blah is issued
+-dnl     without the equal sign or not issued at all.  In this
+-dnl     case, the environment variable is consulted.  An unset
+-dnl     environment variable is the same as --without-bla.  A set
+-dnl     variable is the same as --with-blah=$value.  If $value is an
+-dnl     empty string, runs optional command (arg5) to set it.
+-dnl   Lets you specify command (arg4) to check the value chosen
+-dnl     to make it is good, before caching it.
+-dnl The arguments to this macro are:
+-dnl   1: Name of what is being sought (the first argument in
+-dnl     AC_ARG_WITH).
+-dnl   2: Name of variable to set (also name of environment variable
+-dnl      to look for if configure option is not issued).
+-dnl   3(optional): Help message.  A generic message is provided if
+-dnl     this argument is empty.
+-dnl   4(optional): Commands to run if configure flag is not specific
+-dnl     and environment variable is not set.  These commands are
+-dnl     run if with_blah is "yes" or "".  They should set or unset
+-dnl     the variable named in arg2, depending on what you want
+-dnl     the default behavior to be in these cases.
+-dnl   5(optional): Quality checking commands, to check if arg2 is good.
+-dnl     This is run before caching result.  Generally, this would issue
+-dnl     a warning or error as appropriate.  For example, if this macro
+-dnl     is used to set the path to a program, you may want to check
+-dnl     if that program exist and is executable.
+-# Start macro BTNG_ARG_WITH_ENV_WRAPPER with args $1 and $2
+-AC_CACHE_CHECK(for $1,btng_cv_prog_[]translit($1,-,_),[
+-AC_ARG_WITH($1,
+-ifelse($3,,[  --with-$1	Specify $1 (same as setting $2 in environment)],[$3]))
+-# Set $2, using environment setting if available
+-#   and if command line is ambiguous.
+-case "$with_[]translit($1,-,_)" in
+-  no[)]
+-    # User explictly turned off $1.
+-    # Ignore value of $2, even if set in the environment.
+-    unset $2
+-    ;;
+-  yes|''[)]
+-    # Flag unissued or ambiguously issued using --with-$1.
+-    # Because the user did not explicitly turn if off,
+-    # try to set $2.
+-    # If environment variable $2 is available, use it.
+-    # If not, try the user-supplied commands to set it.
+-    if test -n "${$2}" ;  then
+-      : Nothing to do here actually, because $2 is already in the environment.
+-    else
+-      ifelse($4,,:,$4)
+-    fi
+-    ;;
+-  *)
+-    # User issued a specific string using --with-$1=non-null-string.
+-    # so that is used to set $2.
+-    $2=$with_[]translit($1,-,_)
+-    ;;
+-esac
+-dnl if test ! "${$2+set}" = set ; then
+-dnl   # $2 is still unset, after processing --with-$1 flag,
+-dnl   # and possibly using optional command to set it.
+-dnl   # At this point, check to make sure it is not required.
+-dnl   # if it is, then we have an error.
+-dnl   case "$with_[]translit($1,-,_)" in
+-dnl     no|'')
+-dnl       : $2 is not set but it is ok because user did not
+-dnl       : explicitly ask for it by issuing --with-$1=something.
+-dnl       ;;
+-dnl     *)
+-dnl       # If user explicitly asked for $1 and we cannot find it[,]
+-dnl       # that is an error
+-dnl       AC_MSG_ERROR(cannot find appropriate value for $2)
+-dnl       ;;
+-dnl   esac
+-dnl fi
+-if test "${$2+set}" = set ; then
+-  # This block executes the quality check commands, if any, for $2.
+-  ifelse($5,,:,$5)
+-fi
+-# Cache the value if it was found.
+-if test "${$2+set}" = set ; then
+-  btng_cv_prog_[]translit($1,-,_)=${$2}
+-fi
+-])
+-dnl This part runs if $2 should be set from cache.
+-# Set $2 from cache.
+-# $2 is not yet set if we grabbed it from cache.
+-if test "${btng_cv_prog_[]translit($1,-,_)+set}" = set ; then
+-  $2=$btng_cv_prog_[]translit($1,-,_)
+-else
+-  unset $2
+-fi
+-# End macro BTNG_ARG_WITH_ENV_WRAPPER with args $2 and $1
+-])
+-
+-
+-
+-
+-AC_DEFUN([BTNG_PATH_PROG],[
+-dnl This is a high-level macro to find paths to certain programs.
+-dnl In addition to (possibly) running AC_ARG_WITH and AC_PATH_PROG it:
+-dnl   Allows the path to be set in an environment variable ($1),
+-dnl     useful for setting configuration during "make check" and
+-dnl     for avoiding manual configure options setting.
+-dnl   Makes sure that the program is executable, if the user explicitly
+-dnl     specified it.
+-dnl The arguments are (similar to AC_PATH_PROG):
+-dnl   1: Variable name to set to the path (used in BTNG_PATH_PROG).
+-dnl   2: Name of program being sought (used in BTNG_PATH_PROG).
+-dnl   3(optional): Commands to set $1 in case neither environment
+-dnl      nor command line options are given.  Defaults to a call to
+-dnl      AC_PATH_PROG($1,$2).
+-dnl   4(optional): Quality check commands to make sure that a
+-dnl      sufficiently good program is found.  Defaults to a simple
+-dnl      check that the program is executable.
+-BTNG_ARG_WITH_ENV_WRAPPER($2,$1,
+-[[  --with-$2=PATH	Specify path to $2 program
+-			(equivalent to setting $1 in environment)]]dnl
+-,
+-[
+-dnl Commands to run if user was not specific.
+-# Just set the variable to blank and check later.
+-$1=
+-],
+-dnl Quality check commands.
+-ifelse($4,,[
+-  # if $1 is an absolute path, make sure it is executable.
+-  if echo "${$1}" | grep '^/' > /dev/null && test ! -x "${$1}"; then
+-    AC_MSG_WARN($2 program ${$1} is not executable.)
+-  fi],$4)
+-)dnl
+-if test "${$1+set}" = set; then
+-  ifelse($3,,[AC_PATH_PROG($1,$2)],$3)
+-fi
+-])
+-
+-
+-
+-
+-AC_DEFUN([BTNG_ARG_WITH_PREFIX],[
+-dnl This is a high-level macro to set the prefix for a
+-dnl previously installed package.
+-dnl The macro arguments are:
+-dnl 1. package name
+-dnl 2. variable to contain installation prefix.
+-dnl 3(optional): Help message.  A generic message is provided if
+-dnl   this argument is empty.
+-dnl 4(optional): Commands to run if configure flag is not specific
+-dnl   and environment variable is not set.  These commands are
+-dnl   run if with_blah is "yes" or "".  They should set or unset
+-dnl   the variable named in arg2, depending on what you want
+-dnl   the defaul behavior to be in these cases.  The default is
+-dnl   to exit with an error.
+-# Start macro BTNG_ARG_WITH_PREFIX
+-BTNG_ARG_WITH_ENV_WRAPPER($1,$2,
+-ifelse([$3],,
+-[[  --with-$1=PATH	Specify prefix where $1 is installed
+-			(equivalent to setting $2 in the environment)]]
+-,[[[$3]]]),
+-ifelse([$4],,
+-[[if test "${with_[]translit($1,-,_)}" = yes ; then
+-  AC_MSG_ERROR([[If you specify --with-$1, you must give it the path as in --with-$1=/installation/path]])
+-fi
+-BTNG_AC_LOG(environment $2 not defined)
+-]],[[[$4]]])
+-)dnl
+-# End macro BTNG_ARG_WITH_PREFIX
+-])
+-
+-
+-
+-
+-dnl $Id: compiler-id.m4 155 2007-05-14 22:09:31Z gunney $
+-
+-dnl Determines which compiler is being used.
+-dnl This check uses the compiler behavior when possible.
+-dnl For some compiler, we resort to a best guess,
+-dnl because we do not know a foolproof way to get the info.
+-
+-dnl Much of the information used here came from the very
+-dnl helpful predef project (http://predef.sourceforge.net/).
+-
+-
+-
+-
+-dnl Simple wrappers to allow using BTNG_INFO_CXX_ID_NAMES and
+-dnl BTNG_INFO_CC_ID_NAMES without arguments.
+-dnl The names CC_ID and CC_VERSION are used for the C compiler id and version.
+-dnl The names CXX_ID and CXX_VERSION are used for the C++ compiler id and version.
+-AC_DEFUN([BTNG_INFO_CXX_ID],[
+-  BTNG_INFO_CXX_ID_NAMES(CXX_ID,CXX_VERSION)
+-])
+-AC_DEFUN([BTNG_INFO_CC_ID],[
+-  BTNG_INFO_CC_ID_NAMES(CC_ID,CC_VERSION)
+-])
+-AC_DEFUN([BTNG_INFO_CC_CXX_ID],[
+-  AC_REQUIRE([BTNG_INFO_CC_ID])
+-  AC_REQUIRE([BTNG_INFO_CXX_ID])
+-])
+-
+-
+-dnl BTNG_INFO_CXX_ID and BTNG_INFO_C_ID determine which C or C++ compiler
+-dnl is being used.
+-# Set the variables CXX_ID or C_ID as follows:
+-# Gnu		-> gnu
+-# SUNWspro	-> sunpro
+-# Dec		-> dec
+-# KCC		-> kai
+-# Intel		-> intel
+-# SGI		-> sgi
+-# IBM xlc	-> xlc
+-
+-
+-AC_DEFUN([BTNG_INFO_CXX_ID_NAMES],
+-dnl Arguments are:
+-dnl 1. Name of variable to set to the ID string.
+-dnl 2. Name of variable to set to the version number.
+-[
+-# Start macro BTNG_INFO_CXX_ID_NAMES
+-  AC_REQUIRE([AC_PROG_CXXCPP])
+-  AC_LANG_SAVE
+-  AC_LANG_CPLUSPLUS
+-  BTNG_AC_LOG(CXXP is $CXX)
+-  BTNG_AC_LOG(CXXCPP is $CXXCPP)
+-
+-  $1=unknown
+-  $2=unknown
+-
+-dnl Do not change the following chain of if blocks into a case statement.
+-dnl We may eventually have a compiler that must be tested in a different
+-dnl method
+-
+-
+-  # Check if it is a Sun compiler.
+-  if test $$1 = unknown; then
+-    BTNG_AC_LOG(checking if $CXX is sunpro)
+-    AC_EGREP_CPP([^0x[0-9]+],__SUNPRO_CC,
+-      $1=sunpro
+-      # SUN compiler defines __SUNPRO_CC to the version number.
+-      echo __SUNPRO_CC > conftest.C
+-      $2=`${CXXCPP} conftest.C | sed -n 2p`
+-      rm -f conftest.C
+-    )
+-  fi
+-
+-
+-  # Check if it is a Intel compiler.
+-  if test $$1 = unknown; then
+-    BTNG_AC_LOG(checking if $CXX is intel)
+-    AC_EGREP_CPP(^yes,
+-#ifdef __INTEL_COMPILER
+-yes;
+-#endif
+-,
+-      $1=intel
+-      # Intel compiler defines __INTEL_COMPILER to the version number.
+-      echo __INTEL_COMPILER > conftest.C
+-      $2=`${CXXCPP} conftest.C | sed -n 2p`
+-      rm -f conftest.C
+-    )
+-  fi
+-
+-
+-  # Check if it is a GNU compiler.
+-  if test $$1 = unknown; then
+-    BTNG_AC_LOG(checking if $CXX is gnu)
+-    AC_EGREP_CPP(^yes,
+-#ifdef __GNUC__
+-yes;
+-#endif
+-,
+-    $1=gnu
+-    # GNU compilers output version number with option --version.
+-    # Alternatively, it also defines the macros __GNUC__,
+-    # GNUC_MINOR__ and __GNUC_PATCHLEVEL__
+-    [[$2=`$CXX --version | sed -e 's/[^0-9]\{0,\}\([^ ]\{1,\}\).\{0,\}/\1/' -e 1q`]]
+-    )
+-  fi
+-
+-
+-  # Check if it is a DEC compiler.
+-  if test $$1 = unknown; then
+-    BTNG_AC_LOG(checking if $CXX is dec)
+-    AC_EGREP_CPP(^1,__DECCXX,
+-      $1=dec
+-      # DEC compiler defines __DECCXX_VER to the version number.
+-      echo __DECCXX_VER > conftest.C
+-      $2=`${CXXCPP} conftest.C | sed -n 2p`
+-      rm -f conftest.C
+-    )
+-  fi
+-
+-
+-  # Check if it is a KAI compiler.
+-  if test $$1 = unknown; then
+-    BTNG_AC_LOG(checking if $CXX is kai)
+-    AC_EGREP_CPP(^1,__KCC,
+-      $1=kai
+-      # KCC compiler defines __KCC_VERSION to the version number.
+-      echo __KCC_VERSION > conftest.C
+-      $2=`${CXXCPP} conftest.C | sed -n 2p`
+-      rm -f conftest.C
+-    )
+-  fi
+-
+-
+-  # Check if it is a SGI compiler.
+-  if test $$1 = unknown; then
+-    BTNG_AC_LOG(checking if $CXX is sgi)
+-    AC_EGREP_CPP(^1,__sgi,
+-      $1=sgi
+-      # SGI compiler defines _COMPILER_VERSION to the version number.
+-      echo _COMPILER_VERSION > conftest.C
+-      $2=`${CXXCPP} conftest.C | sed /^\\#/d`
+-      rm -f conftest.C
+-    )
+-  fi
+-
+-
+-  # Check if it is a IBM compiler.
+-  if test $$1 = unknown; then
+-    BTNG_AC_LOG(checking if $CXX is xlc)
+-    AC_EGREP_CPP(^yes,
+-#ifdef __xlC__
+-yes;
+-#endif
+-,
+-    $1=xlc
+-    # IBM compiler defines __xlC__ to the version number.
+-    echo __xlC__ > conftest.C
+-    $2=`${CXXCPP} conftest.C | sed /^\\#/d`
+-    rm -f conftest.C
+-    )
+-  fi
+-
+-
+-  AC_LANG_RESTORE
+-  BTNG_AC_LOG_VAR(CXX_ID CXX_VERSION)
+-# End macro BTNG_INFO_CXX_ID_NAMES
+-])
+-
+-
+-
+-
+-
+-AC_DEFUN([BTNG_INFO_CC_ID_NAMES],
+-dnl Arguments are:
+-dnl 1. Name of variable to set to the ID string.
+-dnl 2. Name of variable to set to the version number.
+-[
+-# Start macro BTNG_INFO_CC_ID_NAMES
+-  AC_REQUIRE([AC_PROG_CPP])
+-  AC_LANG_SAVE
+-  AC_LANG_C
+-  BTNG_AC_LOG(CC is $CC)
+-  BTNG_AC_LOG(CPP is $CPP)
+-
+-  $1=unknown
+-  $2=unknown
+-
+-dnl Do not change the following chain of if blocks into a case statement.
+-dnl We may eventually have a compiler that must be tested in a different
+-dnl method
+-
+-
+-  # Check if it is a Sun compiler.
+-  if test $$1 = unknown; then
+-    BTNG_AC_LOG(checking if $CC is sunpro)
+-    AC_EGREP_CPP([^ 0x[0-9]+],__SUNPRO_C,
+-      $1=sunpro
+-      # SUN compiler defines __SUNPRO_C to the version number.
+-      echo __SUNPRO_C > conftest.c
+-      $2=`${CPP} ${CPPFLAGS} conftest.c | sed -n -e 's/^ //' -e 2p`
+-      rm -f conftest.c
+-    )
+-  fi
+-
+-
+-  # Check if it is a Intel compiler.
+-  if test $$1 = unknown; then
+-    BTNG_AC_LOG(checking if $CC is intel)
+-    AC_EGREP_CPP(^yes,
+-#ifdef __INTEL_COMPILER
+-yes;
+-#endif
+-,
+-      $1=intel
+-      # Intel compiler defines __INTEL_COMPILER to the version number.
+-      echo __INTEL_COMPILER > conftest.C
+-      $2=`${CPP} conftest.C | sed -n 2p`
+-      rm -f conftest.C
+-    )
+-  fi
+-
+-
+-  # Check if it is a GNU compiler.
+-  if test $$1 = unknown; then
+-    BTNG_AC_LOG(checking if $CC is gnu)
+-    AC_EGREP_CPP(^yes,
+-#ifdef __GNUC__
+-yes;
+-#endif
+-,
+-    $1=gnu
+-    [[$2=`$CC --version | sed -e 's/[^0-9]\{0,\}\([^ ]\{1,\}\).\{0,\}/\1/' -e 1q`]]
+-    )
+-  fi
+-
+-
+-  # Check if it is a DEC compiler.
+-  if test $$1 = unknown; then
+-    BTNG_AC_LOG(checking if $CC is dec)
+-    AC_EGREP_CPP(^ 1,__DECC,
+-      $1=dec
+-      # DEC compiler defines __DECC_VER to the version number.
+-      echo __DECC_VER > conftest.c
+-      $2=`${CPP} ${CPPFLAGS} conftest.c | sed -n -e 's/^ //' -e 2p`
+-      rm -f conftest.c
+-    )
+-  fi
+-
+-
+-  # Check if it is a KAI compiler.
+-  if test $$1 = unknown; then
+-    BTNG_AC_LOG(checking if $CC is kai)
+-    AC_EGREP_CPP(^1,__KCC,
+-      $1=kai
+-      # KCC compiler defines __KCC_VERSION to the version number.
+-      echo __KCC_VERSION > conftest.c
+-      $2=`${CPP} ${CPPFLAGS} conftest.c | sed -n 2p`
+-      rm -f conftest.c
+-    )
+-  fi
+-
+-
+-  # Check if it is a SGI compiler.
+-  if test $$1 = unknown; then
+-    BTNG_AC_LOG(checking if $CC is sgi)
+-    AC_EGREP_CPP(^1,__sgi,
+-      $1=sgi
+-      # SGI compiler defines _COMPILER_VERSION to the version number.
+-      echo _COMPILER_VERSION > conftest.c
+-      $2=`${CPP} ${CPPFLAGS} conftest.c | sed /^\\#/d`
+-      rm -f conftest.c
+-    )
+-  fi
+-
+-
+-  # Check if it is a IBM compiler.
+-  if test $$1 = unknown; then
+-    BTNG_AC_LOG(checking if $CC is xlc)
+-    if echo "$host_os" | grep "aix" >/dev/null ; then
+-      # The wretched IBM shell does not eval correctly,
+-      # so we have to help it with a pre-eval eval statement.
+-      ac_cpp=`eval "echo $ac_cpp"`
+-      save_ac_cpp=$ac_cpp
+-      BTNG_AC_LOG(ac_cpp is temporarily set to $ac_cpp)
+-    else
+-      save_ac_cpp=
+-    fi
+-    BTNG_AC_LOG(ac_cpp is $ac_cpp)
+-    AC_EGREP_CPP(^yes,
+-#ifdef __xlC__
+-yes;
+-#endif
+-,
+-    $1=xlc
+-    # IBM compiler defines __xlC__ to the version number.
+-    echo __xlC__ > conftest.C
+-    $2=`${CPP} conftest.C | sed /^\\#/d`
+-    rm -f conftest.C
+-    )
+-    test "$save_ac_cpp" && ac_cpp=$save_ac_cpp
+-    BTNG_AC_LOG(ac_cpp is restored to $ac_cpp)
+-  fi
+-
+-
+-  AC_LANG_RESTORE
+-  BTNG_AC_LOG_VAR(CC_ID CC_VERSION)
+-# End macro BTNG_INFO_CC_ID_NAMES
+-])
+-
+-dnl $Id: compiling-boolean.m4 155 2007-05-14 22:09:31Z gunney $
+-
+-
+-AC_DEFUN([BTNG_TYPE_BOOL],[
+-
+-# Start macro BTNG_TYPE_BOOL
+-
+-AC_MSG_CHECKING(checking whether bool type is broken)
+-
+-AC_CACHE_VAL(btng_cv_type_bool_broken, [
+-
+-  AC_LANG_SAVE
+-  AC_LANG_CPLUSPLUS
+-
+-  AC_TRY_COMPILE(, bool b = true; ,
+-    # bool is not broken.
+-    btng_cv_type_bool_broken=no
+-    ,
+-    # bool is broken.
+-    btng_cv_type_bool_broken=yes
+-  )	dnl End AC_TRY_COMPILE call
+-
+-  AC_LANG_RESTORE
+-
+-])	dnl End AC_CACHE_VAL call
+-
+-AC_MSG_RESULT($btng_cv_type_bool_broken)
+-
+-if test "$btng_cv_type_bool_broken" = yes; then
+-  AC_DEFINE([BOOL_IS_BROKEN],1,Define if bool type is not properly supported)
+-fi
+-
+-
+-# End macro BTNG_TYPE_BOOL
+-
+-])	dnl End of COMPILE_BOOLEAN_MACRO definition.
+-
+-dnl $Id: compiling-namespace.m4 155 2007-05-14 22:09:31Z gunney $
+-
+-
+-
+-AC_DEFUN([BTNG_TYPE_NAMESPACE],[
+-
+-# Start macro BTNG_TYPE_NAMESPACE
+-
+-AC_MSG_CHECKING(whether namespace is broken)
+-
+-AC_CACHE_VAL(btng_cv_type_namespace_broken, [
+-
+-  dnl AC_LANG_SAVE
+-  dnl AC_LANG_CPLUSPLUS
+-  AC_LANG_PUSH([C++])
+-  AC_TRY_COMPILE(namespace test{ int i; }
+-		, using namespace test;,
+-    # namespace is not broken.
+-    btng_cv_type_namespace_broken=no
+-    ,
+-    # namespace is broken.
+-    btng_cv_type_namespace_broken=yes
+-  )	dnl End AC_TRY_COMPILE call
+-
+-  AC_LANG_POP([C++])
+-  dnl AC_LANG_RESTORE
+-
+-])	dnl End AC_CACHE_VAL call
+-
+-AC_MSG_RESULT($btng_cv_type_namespace_broken)
+-
+-if test "$btng_cv_type_namespace_broken" = yes; then
+-  AC_DEFINE([NAMESPACE_IS_BROKEN],1,Define if namespace is not properly supported)
+-fi
+-
+-
+-# End macro BTNG_TYPE_NAMESPACE
+-
+-])	dnl End of BTNG_TYPE_NAMESPACE definition.
+-
+-AC_DEFUN([BTNG_AC_LOG],[echo "configure:__oline__:" $1 >&AC_FD_CC])
+-
+-AC_DEFUN([BTNG_AC_LOG_VAR],[
+-dnl arg1 is list of variables to log.
+-dnl arg2 (optional) is a label.
+-dnl
+-dnl This macro makes code that write out at configure time
+-dnl label: x is '...'
+-dnl if x is set and
+-dnl label: x is unset
+-dnl otherwise.
+-define([btng_log_label],ifelse($2,,,[$2: ]))
+-btng_log_vars="$1"
+-for btng_log_vars_index in $btng_log_vars ; do
+-  eval "test \"\${${btng_log_vars_index}+set}\" = set"
+-  if test $? = 0; then
+-    btng_log_vars_value="'`eval echo \\${$btng_log_vars_index}`'";
+-  else
+-    btng_log_vars_value="unset";
+-  fi
+-  BTNG_AC_LOG("btng_log_label$btng_log_vars_index is $btng_log_vars_value");
+-dnl
+-dnl This is a shorter version, but it does not work for some Bourne shells
+-dnl due to misinterpretation of the multiple backslashes
+-dnl BTNG_AC_LOG("btng_log_label$btng_log_vars_index is `eval if test \\\"\$\{$btng_log_vars_index+set\}\\\"\; then echo \\\""'"\$\{$btng_log_vars_index\}"'"\\\"\; else echo 'unset'\; fi`")
+-done
+-undefine([btng_log_label])
+-])
+-
+-dnl $Id: support-blas.m4 155 2007-05-14 22:09:31Z gunney $
+-
+-AC_DEFUN([BTNG_VAR_SET_BLAS],[
+-dnl Provides support for the blas library.
+-dnl
+-dnl Arguments are:
+-dnl 1. Name of variable to set to path where blas are installed.
+-dnl    Nothing is done if this variable is unset.
+-dnl    If you only want to look in default locations, set it to blank.
+-dnl 2. Name of the INCLUDES variable similar to the automake INCLUDES variable.
+-dnl    This variable is modified ONLY if it is NOT set.
+-dnl 3. Name of the LIBS variable similar to the automake LIBS variable.
+-dnl    This variable is modified ONLY if it is NOT set.
+-dnl
+-dnl If arg1 is defined, assume that the user wants blas
+-dnl support.  Do so by assigning arg2 and arg3 if they are not defined.
+-dnl
+-if test "${$1+set}" = set ; then
+-  # Modify the output INCLUDES variable, if it is not set.
+-  if test ! "${$2+set}" = set ; then
+-    test -n "${$1}" && $2="-I${$1}/include"
+-  fi
+-  # Modify the output LIBS variable, if it is not set.
+-  if test ! "${$3+set}" = set ; then
+-    # Save LIBS for later recovery.
+-    btng_save_LIBS="$LIBS";
+-    # Extra libraries, if any, required by this check.
+-    btng_extra_libs="$libz_LIBS -lm"
+-    # If path is given, add path to extra flag for library search.
+-    test -n "${$1}" && btng_extra_libs="-L${$1}/lib $btng_extra_libs"
+-    # Look for library.
+-    AC_SEARCH_LIBS([daxpy_],blas,[
+-      BTNG_AC_LOG_VAR(LIBS,After finding blas flag)
+-      # Action if found ...
+-      # Extract modifications to LIB into library-specific LIBS variable.
+-      $3=`echo " $LIBS" | sed "s! $btng_save_LIBS!!"`;
+-      test -n "${$1}" && $3="-L${$1}/lib ${$3}"
+-      BTNG_AC_LOG_VAR($3, Found blas library flag)
+-      ],[
+-      # Action if NOT found ...
+-      BTNG_AC_LOG_VAR($3, Did not find blas library flag)
+-      AC_MSG_WARN(
+-[I could not systematically find the name of
+-the blas library so I am using -lblas instead.])
+-      $3="-lblas"
+-      test -n "${$1}" &&	\
+-	$3="-L${$1}/lib ${$3}"	# Add path flag to output variable.
+-      ],[$btng_extra_libs])
+-    LIBS="$btng_save_LIBS";	# Restore global-use variable.
+-    unset btng_extra_libs
+-    unset btng_save_LIBS
+-  else
+-    BTNG_AC_LOG(Not looking for blas because $3 is already set)
+-  fi
+-fi
+-])dnl
+-
+-
+-
+-
+-AC_DEFUN([BTNG_SUPPORT_BLAS],[
+-dnl Support blas library by setting the variables
+-dnl blas_PREFIX, blas_INCLUDES, and blas_LIBS.
+-dnl Arg1: non-empty if you want the default to be on.
+-dnl
+-# Begin macro BTNG_SUPPORT_BLAS
+-
+-BTNG_ARG_WITH_ENV_WRAPPER(blas, blas_PREFIX,
+-ifelse($1,,
+-[  --with-blas[=PATH]
+-			Use blas and optionally specify where
+-			they are installed.],
+-[  --without-blas	Do not use the blas library.]),
+-if test "${with_blas+set}" = set; then
+-  blas_PREFIX=
+-else
+-ifelse($1,,unset blas_PREFIX,blas_PREFIX=)
+-fi
+-)
+-
+-BTNG_ARG_WITH_PREFIX(blas-includes,blas_INCLUDES,
+-[  --with-blas-includes=STRING
+-			Specify the INCLUDES flags for blas.
+-			If not specified, and --with-blas=PATH is,
+-			this defaults to "-IPATH/include".])dnl
+-
+-BTNG_ARG_WITH_PREFIX(blas-libs,blas_LIBS,
+-[  --with-blas-libs=STRING
+-			Specify LIBS flags for blas.
+-			If not specified, and --with-blas=PATH is,
+-			this defaults to "-LPATH/lib -lblas".])dnl
+-
+-BTNG_VAR_SET_BLAS(blas_PREFIX,blas_INCLUDES,blas_LIBS)
+-
+-BTNG_AC_LOG_VAR(blas_PREFIX blas_INCLUDES blas_LIBS)
+-# End macro BTNG_SUPPORT_BLAS
+-])
+-
+-dnl $Id: support-blaslapack.m4 155 2007-05-14 22:09:31Z gunney $
+-
+-AC_DEFUN([BTNG_SUPPORT_BLASLAPACK],[
+-dnl Support blas and lapack libraries by setting the variables
+-dnl blaslapack_PREFIX, blaslapack_INCLUDES, and blaslapack_LIBS.
+-dnl Arg1: non-empty if you want the default to be on.
+-dnl
+-# Begin macro BTNG_SUPPORT_BLASLAPACK
+-
+-BTNG_ARG_WITH_ENV_WRAPPER(blaslapack, blaslapack_PREFIX,
+-ifelse($1,,
+-[  --with-blaslapack[=PATH]
+-			Use blas and lapack and optionally specify where
+-			they are installed.],
+-[  --without-blaslapack	Do not use the blas and lapack libraries.]),
+-if test "${with_blaslapack+set}" = set; then
+-  blaslapack_PREFIX=
+-else
+-ifelse($1,,unset blaslapack_PREFIX,blaslapack_PREFIX=)
+-fi
+-)
+-
+-BTNG_ARG_WITH_PREFIX(blaslapack-includes,blaslapack_INCLUDES,
+-[  --with-blaslapack-includes=STRING
+-			Specify the INCLUDES flags for blas and lapack.
+-			If not specified, and --with-blaslapack=PATH is,
+-			this defaults to "-IPATH/include".])dnl
+-
+-BTNG_ARG_WITH_PREFIX(blaslapack-libs,blaslapack_LIBS,
+-[  --with-blaslapack-libs=STRING
+-			Specify LIBS flags for blas and lapack.
+-			If not specified, and --with-blaslapack=PATH is,
+-			this defaults to "-LPATH/lib -llapack -lblas".])dnl
+-
+-# Look for blas and lapack flags separately.
+-# Then combine them.
+-if test "${blaslapack_PREFIX+set}" = set; then
+-  blas_PREFIX="$blaslapack_PREFIX"
+-  lapack_PREFIX="$blaslapack_PREFIX"
+-fi
+-BTNG_VAR_SET_BLAS(blas_PREFIX,blas_INCLUDES,blas_LIBS)
+-BTNG_VAR_SET_LAPACK(lapack_PREFIX,lapack_INCLUDES,lapack_LIBS)
+-
+-# Combine include flags from blas and lapack without repeating -I flags.
+-if test -n "$blas_INCLUDES" || test -n "$lapack_INCLUDES" ; then
+-unset blaslapack_INCLUDES
+-for i in $lapack_INCLUDES $blas_INCLUDES ; do
+-  case $i in
+-  -I*) 
+-    echo "${blaslapack_INCLUDES}" | egrep "($i\$|$i[[ 	]] *)" > /dev/null	\
+-      && continue	# already contains the flag we want to add.
+-    blaslapack_INCLUDES="$blaslapack_INCLUDES $i"
+-    ;;
+-  esac
+-done
+-fi
+-
+-# Combine lib flags from blas and lapack without repeating -L flags.
+-if test -n "$blas_LIBS" || test -n "$lapack_LIBS" ; then
+-unset blaslapack_LIBS
+-for i in $lapack_LIBS $blas_LIBS ; do
+-  case $i in
+-  -L*) 
+-    echo "${blaslapack_LIBS}" | egrep "($i\$|$i[[ 	]] *)" > /dev/null	\
+-      && continue	# already contains the flag we want to add.
+-    blaslapack_LIBS="$blaslapack_LIBS $i"
+-    ;;
+-  esac
+-done
+-for i in $lapack_LIBS $blas_LIBS ; do
+-  case $i in
+-  -L*) : ;;
+-  *) blaslapack_LIBS="$blaslapack_LIBS $i";
+-  esac
+-done
+-fi
+-
+-BTNG_AC_LOG_VAR(blaslapack_PREFIX blaslapack_INCLUDES blaslapack_LIBS)
+-# End macro BTNG_SUPPORT_BLASLAPACK
+-])
+-
+-dnl Define macros for supporting HDF5.
+-dnl $Id: support-dl.m4 155 2007-05-14 22:09:31Z gunney $
+-
+-AC_DEFUN([BTNG_VAR_SET_DL],[
+-dnl Provides support for the dl (dynamic loading) library.
+-dnl
+-dnl Arguments are:
+-dnl 1. Name of variable to set to path where dl are installed.
+-dnl    Nothing is done if this variable is unset.
+-dnl    If you only want to look in default locations, set it to blank.
+-dnl 2. Name of the INCLUDES variable similar to the automake INCLUDES variable.
+-dnl    This variable is modified ONLY if it is NOT set and the path
+-dnl    is non-blank.
+-dnl 3. Name of the LIBS variable similar to the automake LIBS variable.
+-dnl    This variable is modified ONLY if it is NOT set.
+-dnl    If the library cannot be found, this remains unset.
+-dnl
+-dnl If arg1 is defined, assume that the user wants dl support.
+-dnl Do so by assigning arg2 and arg3 if they are not defined.
+-dnl
+-# Begin macro BTNG_VAR_SET_DL
+-if test "${$1+set}" = set ; then
+-  # Modify the output INCLUDES variable, if it is not set.
+-  if test ! "${$2+set}" = set ; then
+-    test -n "${$1}" && $2="-I${$1}/include"
+-  fi
+-  # Modify the output LIBS variable, if it is not set.
+-  if test ! "${$3+set}" = set ; then
+-    # Save LIBS for later recovery.
+-    btng_save_LIBS="$LIBS";
+-    # Extra libraries, if any, required by this check.
+-    btng_extra_libs="$libz_LIBS -lm"
+-    # If path is given, add path to extra flag for library search.
+-    test -n "${$1}" && btng_extra_libs="-L${$1}/lib $btng_extra_libs"
+-    # Look for library.
+-    AC_SEARCH_LIBS([dlopen],dl,[
+-      BTNG_AC_LOG_VAR(LIBS,After finding dl flag)
+-      # Action if found ...
+-      # Extract modifications to LIB into library-specific LIBS variable.
+-      $3=`echo " $LIBS" | sed "s! $btng_save_LIBS!!"`;
+-      test -n "${$1}" && $3="-L${$1}/lib ${$3}"
+-      BTNG_AC_LOG_VAR($3, Found dl library flag)
+-      ],[
+-      # Action if NOT found ...
+-      BTNG_AC_LOG_VAR($3, Did not find dl library flag)
+-      ],[$btng_extra_libs])
+-    LIBS="$btng_save_LIBS";	# Restore global-use variable.
+-    unset btng_extra_libs
+-    unset btng_save_LIBS
+-  else
+-    BTNG_AC_LOG(Not looking for dl because $3 is already set)
+-  fi
+-fi
+-# End macro BTNG_VAR_SET_DL
+-])dnl
+-
+-
+-
+-AC_DEFUN([BTNG_SUPPORT_DL],[
+-dnl Support dl library by setting the variables
+-dnl dl_PREFIX, dl_INCLUDES, and dl_LIBS.
+-dnl Arg1: non-empty if you want the default to be on.
+-dnl
+-# Begin macro BTNG_SUPPORT_DL
+-
+-BTNG_ARG_WITH_ENV_WRAPPER(dl, dl_PREFIX,
+-ifelse($1,,
+-[  --with-dl[=PATH]
+-			Use the dynamic loading library and optionally
+-			specify where it is installed.],
+-[  --without-dl		Do not use the dynamic loading library.]),
+-ifelse($1,,unset dl_PREFIX; test "${with_dl+set}" = set && dl_PREFIX=,dl_PREFIX=))
+-
+-BTNG_ARG_WITH_PREFIX(dl-includes,dl_INCLUDES,
+-[  --with-dl-includes=STRING
+-			Specify the INCLUDES flags for dl.
+-			If not specified, and --with-dl=PATH is,
+-			this defaults to "-IPATH/include".])dnl
+-
+-BTNG_ARG_WITH_PREFIX(dl-libs,dl_LIBS,
+-[  --with-dl-libs=STRING
+-			Specify LIBS flags for dl.
+-			If not specified, and --with-dl=PATH is,
+-			this defaults to "-LPATH/lib -ldl".])dnl
+-
+-BTNG_VAR_SET_DL(dl_PREFIX,dl_INCLUDES,dl_LIBS)
+-# End macro BTNG_SUPPORT_DL
+-])
+-
+-dnl $Id: support-hypre.m4 155 2007-05-14 22:09:31Z gunney $
+-
+-dnl Define macros for supporting HYPRE.
+-
+-
+-AC_DEFUN([BTNG_SUPPORT_HYPRE],[
+-dnl Support hypre libraries by setting the variables
+-dnl hypre_PREFIX, hypre_INCLUDES, and hypre_LIBS.
+-dnl Arg1: empty if you want the default to be off.
+-dnl
+-# Begin macro BTNG_SUPPORT_HYPRE
+-BTNG_ARG_WITH_ENV_WRAPPER(hypre, hypre_PREFIX,
+-ifelse($1,,
+-[  --with-hypre[=PATH]	Use HYPRE and optionally specify where it is installed.],
+-[  --without-hypre	Do not use the HYPRe library.]),
+-ifelse($1,,if test "$with_hypre" = '' ; then unset hypre_PREFIX; else hypre_PREFIX=; fi, hypre_PREFIX=)
+-)
+-BTNG_VAR_SET_HYPRE(hypre_PREFIX,hypre_INCLUDES,hypre_LIBS)
+-BTNG_AC_LOG_VAR(hypre_PREFIX hypre_INCLUDES hypre_LIBS)
+-if test "${hypre_PREFIX+set}" = set; then
+-  btng_save_cppflags=$CPPFLAGS
+-
+-  # Add hypre include flags to cpp so we can examine its header file.
+-  CPPFLAGS="$hypre_INCLUDES $CPPFLAGS"
+-  BTNG_AC_LOG_VAR(hypre_INCLUDES CPPFLAGS)
+-
+-  # Check if HYPRE header is ok.
+-  AC_CHECK_HEADER(HYPRE_config.h,:,
+-    [AC_MSG_ERROR(Problems checking HYPRE_config.h)])
+-
+-  # Check if HYPRE was compiled with parallelism.
+-  AC_MSG_CHECKING(if hypre is serial or parallel)
+-  AC_EGREP_CPP([^HYPRE_SEQUENTIAL_IS_DEFINED$], [
+-#include <HYPRE_config.h>
+-#ifdef HYPRE_SEQUENTIAL
+-HYPRE_SEQUENTIAL_IS_DEFINED
+-#endif
+-    ],
+-    hypre_PARALLELISM=serial,
+-    hypre_PARALLELISM=parallel)
+-  AC_MSG_RESULT($hypre_PARALLELISM)
+-
+-  # Reset cpp after checking hypre header file.
+-  CPPFLAGS=$btng_save_cppflags
+-  unset btng_save_cppflags
+-
+-  BTNG_AC_LOG_VAR(CPPFLAGS)
+-  BTNG_AC_LOG_VAR(hypre_config_file hypre_PARALLELISM)
+-fi
+-# End macro BTNG_SUPPORT_HYPRE
+-])
+-
+-
+-AC_DEFUN([BTNG_VAR_SET_HYPRE],[
+-dnl Provides support for the blas and lapack libraries.
+-dnl
+-dnl Arguments are:
+-dnl 1. Name of variable to set to path where hypre is installed.
+-dnl    Nothig is done if this variable is unset.
+-dnl 2. Name of the INCLUDES variable similar to the automake INCLUDES variable.
+-dnl    This variable is modified ONLY if it is NOT set.
+-dnl 3. Name of the LIBS variable similar to the automake LIBS variable.
+-dnl    This variable is modified ONLY if it is NOT set.
+-dnl
+-dnl If arg1 is defined, assume that the user wants blas and lapack
+-dnl support.  Do so by assigning arg2 and arg3 if they are not defined.
+-dnl
+-# Begin macro BTNG_VAR_SET_HYPRE
+-if test "${$1+set}" = set ; then
+-  if test ! "${$2+set}" = set ; then
+-    test -n "${$1}" && $2="-I${$1}/include"
+-  fi
+-  if test ! "${$3+set}" = set ; then
+-    $3='-lHYPRE_sstruct_ls -lHYPRE_sstruct_mv -lHYPRE_struct_ls -lHYPRE_struct_mv -lHYPRE_parcsr_ls -lHYPRE_DistributedMatrixPilutSolver -lHYPRE_ParaSails -lHYPRE_Euclid -lHYPRE_MatrixMatrix -lHYPRE_DistributedMatrix -lHYPRE_IJ_mv -lHYPRE_parcsr_mv -lHYPRE_seq_mv -lHYPRE_krylov -lHYPRE_utilities'
+-    if test -n "${$1}" ; then
+-      for i in ${$3} ; do
+-	tmp_name=`echo $i | sed 's/^-l//'`
+-        if test ! -f "${$1}/lib/lib${tmp_name}.a" && \
+-          test ! -f "${$1}/lib/lib${tmp_name}.so"; then
+-          AC_MSG_WARN(Library file for ${tmp_name} is missing from ${$1}/lib.)
+-        fi
+-      done
+-      $3="-L${$1}/lib ${$3}"
+-    fi
+-  fi
+-fi
+-# End macro BTNG_VAR_SET_HYPRE
+-])dnl
+-
+-dnl $Id: support-ieee-float.m4 155 2007-05-14 22:09:31Z gunney $
+-
+-AC_DEFUN([BTNG_C_IEEE_FLOAT],[
+-dnl Check on certain declarations in the float.h file:
+-dnl FLT_SNAN DBL_SNAN
+-dnl
+-dnl ac_define ..._IS_BROKEN for symbols that are not defined.
+-dnl
+-# Begin macro BTNG_IEEE_FLOAT
+-
+-AC_LANG_C
+-
+-AC_EGREP_CPP([^nan is broken],
+-[#include <float.h>
+-#ifndef NAN
+-nan is broken
+-#endif],
+-AC_DEFINE([NAN_IS_BROKEN],[1],[Define if NAN is not in float.h])
+-BTNG_AC_LOG(["NAN is broken (not in float.h)"]),
+-BTNG_AC_LOG(["NAN is ok (in float.h)"])
+-)
+-
+-AC_EGREP_CPP([^flt snan is broken],
+-[#include <float.h>
+-#ifndef FLT_SNAN
+-flt snan is broken
+-#endif],
+-AC_DEFINE([FLT_SNAN_IS_BROKEN],[1],[Define if FLT_SNAN is not in float.h])
+-BTNG_AC_LOG(["FLT_NAN is broken (not in float.h)"]),
+-BTNG_AC_LOG(["FLT_NAN is ok (in float.h)"])
+-)
+-
+-AC_EGREP_CPP([^dbl snan is broken],
+-[#include <float.h>
+-#ifndef DBL_SNAN
+-dbl snan is broken
+-#endif],
+-AC_DEFINE([DBL_SNAN_IS_BROKEN],[1],[Define if DBL_SNAN is not in float.h])
+-BTNG_AC_LOG(["DBL_NAN is broken (not in float.h)"]),
+-BTNG_AC_LOG(["DBL_NAN is ok (in float.h)"])
+-)
+-
+-AC_EGREP_CPP([^flt snan is broken],
+-[#include <float.h>
+-#ifndef FLT_MAX
+-flt snan is broken
+-#endif],
+-AC_DEFINE([FLT_MAX_IS_BROKEN],[1],[Define if FLT_MAX is not in float.h])
+-BTNG_AC_LOG(["FLT_MAX is broken (not in float.h)"]),
+-BTNG_AC_LOG(["FLT_MAX is ok (in float.h)"])
+-)
+-
+-AC_EGREP_CPP([^dbl snan is broken],
+-[#include <float.h>
+-#ifndef DBL_MAX
+-dbl snan is broken
+-#endif],
+-AC_DEFINE([DBL_MAX_IS_BROKEN],[1],[Define if DBL_MAX is not in float.h])
+-BTNG_AC_LOG(["DBL_MAX is broken (not in float.h)"]),
+-BTNG_AC_LOG(["DBL_MAX is ok (in float.h)"])
+-)
+-
+-# End macro BTNG_IEEE_FLOAT
+-])dnl
+-
+-dnl $Id: support-lapack.m4 155 2007-05-14 22:09:31Z gunney $
+-
+-AC_DEFUN([BTNG_VAR_SET_LAPACK],[
+-dnl Provides support for the lapack library.
+-dnl
+-dnl Arguments are:
+-dnl 1. Name of variable to set to path where lapack are installed.
+-dnl    Nothig is done if this variable is unset.
+-dnl 2. Name of the INCLUDES variable similar to the automake INCLUDES variable.
+-dnl    This variable is modified ONLY if it is NOT set.
+-dnl 3. Name of the LIBS variable similar to the automake LIBS variable.
+-dnl    This variable is modified ONLY if it is NOT set.
+-dnl
+-dnl If arg1 is defined, assume that the user wants lapack
+-dnl support.  Do so by assigning arg2 and arg3 if they are not defined.
+-dnl
+-if test "${$1+set}" = set ; then
+-  # Modify the output INCLUDES variable, if it is not set.
+-  if test ! "${$2+set}" = set ; then
+-    test -n "${$1}" && $2="-I${$1}/include"
+-  fi
+-  # Modify the output LIBS variable, if it is not set.
+-  if test ! "${$3+set}" = set ; then
+-    # Save LIBS for later recovery.
+-    btng_save_LIBS="$LIBS";
+-    # Extra libraries, if any, required by this check.
+-    btng_extra_libs="$libz_LIBS -lm"
+-    # If path is given, add path to extra flag for library search.
+-    test -n "${$1}" && btng_extra_libs="-L${$1}/lib $btng_extra_libs"
+-    # Look for library.
+-    AC_SEARCH_LIBS([xerbla_],lapack,[
+-      BTNG_AC_LOG_VAR(LIBS,After finding lapack flag)
+-      # Action if found ...
+-      # Extract modifications to LIB into library-specific LIBS variable.
+-      $3=`echo " $LIBS" | sed "s! $btng_save_LIBS!!"`;
+-      test -n "${$1}" && $3="-L${$1}/lib ${$3}"
+-      BTNG_AC_LOG_VAR($3, Found lapack library flag)
+-      ],[
+-      # Action if NOT found ...
+-      BTNG_AC_LOG_VAR($3, Did not find lapack library flag)
+-      AC_MSG_WARN(
+-[I could not systematically find the name of
+-the lapack library so I am using -llapack instead.])
+-      $3="-llapack"
+-      test -n "${$1}" &&	\
+-	$3="-L${$1}/lib ${$3}"	# Add path flag to output variable.
+-      ],[$btng_extra_libs])
+-    LIBS="$btng_save_LIBS";	# Restore global-use variable.
+-    unset btng_extra_libs
+-    unset btng_save_LIBS
+-  else
+-    BTNG_AC_LOG(Not looking for lapack because $3 is already set)
+-  fi
+-fi
+-])dnl
+-
+-
+-
+-
+-AC_DEFUN([BTNG_SUPPORT_LAPACK],[
+-dnl Support lapack library by setting the variables
+-dnl lapack_PREFIX, lapack_INCLUDES, and lapack_LIBS.
+-dnl Arg1: non-empty if you want the default to be on.
+-dnl
+-# Begin macro BTNG_SUPPORT_LAPACK
+-
+-BTNG_ARG_WITH_ENV_WRAPPER(lapack, lapack_PREFIX,
+-ifelse($1,,
+-[  --with-lapack[=PATH]
+-			Use lapack and optionally specify where
+-			they are installed.],
+-[  --without-lapack	Do not use the lapack library.]),
+-if test "${with_lapack+set}" = set; then
+-  lapack_PREFIX=
+-else
+-ifelse($1,,unset lapack_PREFIX,lapack_PREFIX=)
+-fi
+-)
+-
+-BTNG_ARG_WITH_PREFIX(lapack-includes,lapack_INCLUDES,
+-[  --with-lapack-includes=STRING
+-			Specify the INCLUDES flags for lapack.
+-			If not specified, and --with-lapack=PATH is,
+-			this defaults to "-IPATH/include".])dnl
+-
+-BTNG_ARG_WITH_PREFIX(lapack-libs,lapack_LIBS,
+-[  --with-lapack-libs=STRING
+-			Specify LIBS flags for lapack.
+-			If not specified, and --with-lapack=PATH is,
+-			this defaults to "-LPATH/lib -llapack".])dnl
+-
+-BTNG_VAR_SET_LAPACK(lapack_PREFIX,lapack_INCLUDES,lapack_LIBS)
+-
+-BTNG_AC_LOG_VAR(lapack_PREFIX lapack_INCLUDES lapack_LIBS)
+-# End macro BTNG_SUPPORT_LAPACK
+-])
+-
+-dnl Define macros for supporting z compression library.
+-dnl $Id: support-libz.m4 155 2007-05-14 22:09:31Z gunney $
+-
+-AC_DEFUN([BTNG_VAR_SET_LIBZ],[
+-dnl Provides support for the z compression library.
+-dnl
+-dnl Arguments are:
+-dnl 1. Name of variable to set to path where z compression library is installed.
+-dnl    Nothing is done if this variable is unset.
+-dnl    If you only want to look in default locations, set it to blank.
+-dnl 2. Name of the INCLUDES variable similar to the automake INCLUDES variable.
+-dnl    This variable is modified ONLY if it is NOT set.
+-dnl 3. Name of the LIBS variable similar to the automake LIBS variable.
+-dnl    This variable is modified ONLY if it is NOT set.
+-dnl
+-dnl If arg1 is defined, assume that the user wants z compression
+-dnl support.  Do so by assigning arg2 and arg3 if they are not defined.
+-dnl
+-# End macro BTNG_VAR_SET_LIBZ
+-if test "${$1+set}" = set ; then
+-  # Modify the output INCLUDES variable, if it is not set.
+-  if test ! "${$2+set}" = set ; then
+-    test -n "${$1}" && $2="-I${$1}/include"
+-  fi
+-  # Modify the output LIBS variable, if it is not set.
+-  if test ! "${$3+set}" = set ; then
+-    # Save LIBS for later recovery.
+-    btng_save_LIBS="$LIBS";
+-    # Extra libraries, if any, required by this check.
+-    btng_extra_libs="$libz_LIBS -lm"
+-    # If path is given, add path to extra flag for library search.
+-    test -n "${$1}" && btng_extra_libs="-L${$1}/lib $btng_extra_libs"
+-    # Look for library.
+-    AC_SEARCH_LIBS([zlibVersion],z,[
+-      BTNG_AC_LOG_VAR(LIBS,After finding libz flag)
+-      # Action if found ...
+-      # Extract modifications to LIB into library-specific LIBS variable.
+-      $3=`echo " $LIBS" | sed "s! $btng_save_LIBS!!"`;
+-      test -n "${$1}" && $3="-L${$1}/lib ${$3}"
+-      BTNG_AC_LOG_VAR($3, Found libz library flag)
+-      ],[
+-      # Action if NOT found ...
+-      BTNG_AC_LOG_VAR($3, Did not find libz library flag)
+-      ],[$btng_extra_libs])
+-    LIBS="$btng_save_LIBS";	# Restore global-use variable.
+-    unset btng_extra_libs
+-    unset btng_save_LIBS
+-  else
+-    BTNG_AC_LOG(Not looking for libz because $3 is already set)
+-  fi
+-fi
+-# End macro BTNG_VAR_SET_LIBZ
+-])dnl
+-
+-
+-
+-AC_DEFUN([BTNG_SUPPORT_LIBZ],[
+-dnl Support z compression library by setting the variables
+-dnl libz_PREFIX, libz_INCLUDES, and libz_LIBS.
+-dnl Arg1: non-empty if you want the default to be on.
+-dnl
+-# Begin macro BTNG_SUPPORT_LIBZ
+-
+-BTNG_ARG_WITH_ENV_WRAPPER(libz, libz_PREFIX,
+-ifelse($1,,
+-[  --with-libz[=PATH]
+-			Use z compression and optionally specify where
+-			it is installed.],
+-[  --without-libz	Do not use the z compression library.]),
+-ifelse($1,,unset libz_PREFIX; test "${with_libz+set}" = set && libz_PREFIX=,libz_PREFIX=))
+-
+-BTNG_ARG_WITH_PREFIX(libz-includes,libz_INCLUDES,
+-[  --with-libz-includes=STRING
+-			Specify the INCLUDES flags for z compression.
+-			If not specified, and --with-libz=PATH is,
+-			this defaults to "-IPATH/include".])dnl
+-
+-BTNG_ARG_WITH_PREFIX(libz-libs,libz_LIBS,
+-[  --with-libz-libs=STRING
+-			Specify LIBS flags for z compression.])dnl
+-
+-BTNG_VAR_SET_LIBZ(libz_PREFIX,libz_INCLUDES,libz_LIBS)
+-# End macro BTNG_SUPPORT_LIBZ
+-])
+-
+-dnl $Id: support-nsl.m4 155 2007-05-14 22:09:31Z gunney $
+-
+-AC_DEFUN([BTNG_VAR_SET_NSL],[
+-dnl Provides support for the nsl library.
+-dnl
+-dnl Arguments are:
+-dnl 1. Name of variable to set to path where nsl are installed.
+-dnl    Nothing is done if this variable is unset.
+-dnl    If you only want to look in default locations, set it to blank.
+-dnl 2. Name of the INCLUDES variable similar to the automake INCLUDES variable.
+-dnl    This variable is modified ONLY if it is NOT set and the path
+-dnl    is non-blank.
+-dnl 3. Name of the LIBS variable similar to the automake LIBS variable.
+-dnl    This variable is modified ONLY if it is NOT set.
+-dnl    If the library cannot be found, this remains unset.
+-dnl
+-dnl If arg1 is defined, assume that the user wants nsl support.
+-dnl Do so by assigning arg2 and arg3 if they are not defined.
+-dnl
+-if test "${$1+set}" = set ; then
+-  # Modify the output INCLUDES variable, if it is not set.
+-  if test ! "${$2+set}" = set ; then
+-    test -n "${$1}" && $2="-I${$1}/include"
+-  fi
+-  # Modify the output LIBS variable, if it is not set.
+-  if test ! "${$3+set}" = set ; then
+-    # Save LIBS for later recovery.
+-    btng_save_LIBS="$LIBS";
+-    # Extra libraries, if any, required by this check.
+-    btng_extra_libs="$libz_LIBS -lm"
+-    # If path is given, add path to extra flag for library search.
+-    test -n "${$1}" && btng_extra_libs="-L${$1}/lib $btng_extra_libs"
+-    # Look for library.
+-    AC_SEARCH_LIBS([getnetname],nsl,[
+-      BTNG_AC_LOG_VAR(LIBS,After finding nsl flag)
+-      # Action if found ...
+-      # Extract modifications to LIB into library-specific LIBS variable.
+-      $3=`echo " $LIBS" | sed "s! $btng_save_LIBS!!"`;
+-      test -n "${$1}" && $3="-L${$1}/lib ${$3}"
+-      BTNG_AC_LOG_VAR($3, Found nsl library flag)
+-      ],[
+-      # Action if NOT found ...
+-      BTNG_AC_LOG_VAR($3, Did not find nsl library flag)
+-      ],[$btng_extra_libs])
+-    LIBS="$btng_save_LIBS";	# Restore global-use variable.
+-    unset btng_extra_libs
+-    unset btng_save_LIBS
+-  else
+-    BTNG_AC_LOG(Not looking for nsl because $3 is already set)
+-  fi
+-fi
+-])dnl
+-
+-
+-
+-AC_DEFUN([BTNG_SUPPORT_NSL],[
+-dnl Support nsl library by setting the variables
+-dnl nsl_PREFIX, nsl_INCLUDES, and nsl_LIBS.
+-dnl Arg1: non-empty if you want the default to be on.
+-dnl
+-# Begin macro BTNG_SUPPORT_NSL
+-
+-BTNG_ARG_WITH_ENV_WRAPPER(nsl, nsl_PREFIX,
+-ifelse($1,,
+-[  --with-nsl[=PATH]
+-			Use nsl and optionally specify where
+-			it is installed.],
+-[  --without-nsl	Do not use the nsl library.]),
+-ifelse($1,,unset nsl_PREFIX; test "${with_nsl+set}" = set && nsl_PREFIX=,nsl_PREFIX=))
+-BTNG_AC_LOG_VAR(nsl_PREFIX nsl_INCLUDES nsl_LIBS, before looking)
+-
+-BTNG_ARG_WITH_PREFIX(nsl-includes,nsl_INCLUDES,
+-[  --with-nsl-includes=STRING
+-			Specify the INCLUDES flags for nsl.
+-			If not specified, and --with-nsl=PATH is,
+-			this defaults to "-IPATH/include".])dnl
+-
+-BTNG_ARG_WITH_PREFIX(nsl-libs,nsl_LIBS,
+-[  --with-nsl-libs=STRING
+-			Specify LIBS flags for nsl.
+-			If not specified, and --with-nsl=PATH is,
+-			this defaults to "-LPATH/lib -lnsl".])dnl
+-
+-BTNG_VAR_SET_NSL(nsl_PREFIX,nsl_INCLUDES,nsl_LIBS)
+-# End macro BTNG_SUPPORT_NSL
+-])
+-
+-dnl $Id: support-petsc.m4 305 2007-12-04 17:03:07Z smithsg $
+-
+-AC_DEFUN([BTNG_SUPPORT_PETSC],[
+-# Begin macro SUPPORT_PETSC
+-dnl Support PETSC by setting PETSC_DIR, PETSC_ARCH,
+-dnl petsc_INCLUDE and petsc_LIBS.
+-dnl Also set PETSC_VERSION_MAJOR, PETSC_VERSION_MINOR and
+-dnl PETSC_VERSION_SUBMINOR to indicate PETSc version.
+-dnl
+-dnl Support --with-petsc-optimize to use optimized PETSC library.
+-dnl Support --with-petsc-mpiuni to use PETSC uniprocessor MPI library.
+-dnl
+-dnl Arg1: non-empty if you want the default to be on.
+-dnl
+-dnl This version supports PETSc-2.1.0 and later.
+-
+-# Set PETSC_DIR to the PETSC root directory.
+-BTNG_ARG_WITH_PREFIX(petsc,PETSC_DIR,
+-ifelse($1,,
+-[[  --with-petsc=PATH	Support PETSc, and specify PETSC top-level directory.
+-			Setting PETSC_DIR is equivalent to this.]],
+-[  --without-petsc	Do not support PETSc.])
+-,
+-# User was not specific about specifying PETSc.
+-ifelse($1,,
+-# PETSc should be off by default.
+-# So if user specified --with-petsc, it should include a path or it is an error.
+-if test "${with_petsc+set}" = set ; then
+-  # User specified --with-petsc ambiguously.
+-  AC_MSG_ERROR([You must specify a path with --with-petsc=...])
+-else
+-  # User did not specify --with-petsc, so turn it off.
+-  unset PETSC_DIR;
+-fi
+-,
+-# PETSc should be on by default.
+-# So require that user say where it is or turn it off.
+-AC_MSG_ERROR([You must specify either --with-petsc=... or --without-petsc.])
+-))
+-
+-# Set version numbers (PETSC_VERSION_...) for use by configure.
+-# Users can directly access these from the PETSc header file.
+-if test "${PETSC_DIR+set}" = set; then
+-[
+-PETSC_VERSION_MAJOR=`sed -e '/^[ \t]\{0,\}#define PETSC_VERSION_MAJOR/!d' -e 's/.\{0,\}[ \t]\{1,\}//' $PETSC_DIR/include/petscversion.h`
+-PETSC_VERSION_MINOR=`sed -e '/^[ \t]\{0,\}#define PETSC_VERSION_MINOR/!d' -e 's/.\{0,\}[ \t]\{1,\}//' $PETSC_DIR/include/petscversion.h`
+-PETSC_VERSION_SUBMINOR=`sed -e '/^[ \t]\{0,\}#define PETSC_VERSION_SUBMINOR/!d' -e 's/.\{0,\}[ \t]\{1,\}//' $PETSC_DIR/include/petscversion.h`
+-]
+-fi
+-BTNG_AC_LOG_VAR(PETSC_VERSION_MAJOR PETSC_VERSION_MINOR PETSC_VERSION_SUBMINOR)
+-
+-# Set PETSC_ARCH.
+-BTNG_ARG_WITH_PREFIX(petsc-arch,PETSC_ARCH,
+-[  --with-petsc-arch=PETSC_ARCH
+-			Specify the PETSC architecture.
+-			If omitted, the output of the petscarch script
+-			in the PETSc directory is used.])
+-
+-# Set PETSC_OPTIMIZE.
+-BTNG_ARG_WITH_ENV_WRAPPER(petsc-optimize,PETSC_OPTIMIZE,
+-[  --with-petsc-optimize
+-			Use the optimized PETSC libraries],
+-# By default, use the debug PETSC library.
+-PETSC_OPTIMIZE=g
+-BTNG_AC_LOG_VAR(with_petsc_optimize)
+-test "$with_petsc_optimize" = yes && PETSC_OPTIMIZE=O
+-)
+-
+-# Set PETSC_MPIUNI.
+-BTNG_ARG_WITH_ENV_WRAPPER(petsc-mpiuni,PETSC_MPIUNI,
+-[  --with-petsc-mpiuni	Use the PETSC uniprocessor MPI library],
+-# By default, do not use the PETSC uniprocessor MPI library.
+-unset PETSC_MPIUNI
+-)
+-
+-# Set PETSC_LIBFILES
+-unset PETSC_LIBFILES
+-AC_ARG_WITH(petsc-libfiles,
+-[  --with-petsc-libfiles
+-			Specify explit PETSc library files instead
+-			of -L and -l flags (may help some debuggers)],
+-test "$with_petsc_libfiles" = yes && PETSC_LIBFILES=yes)
+-
+-
+-if test "${PETSC_DIR+set}" = set; then
+-  # Set up PETSC only if PETSC_DIR is defined.
+-
+-  if test ! -d "$PETSC_DIR"; then
+-    AC_MSG_WARN([PETSC directory ($PETSC_DIR) does not look right])
+-  fi
+-  export PETSC_DIR
+-  if test -z "$PETSC_ARCH"; then
+-    if test -f "$PETSC_DIR/bmake/petscconf"; then
+-	eval `grep PETSC_ARCH $PETSC_DIR/bmake/petscconf`
+-    elif test -x "$PETSC_DIR/bin/petscarch"; then
+-       PETSC_ARCH=`$PETSC_DIR/bin/petscarch`
+-    else
+-       AC_MSG_WARN([PETSC could not determine PETSC_ARCH])
+-    fi    
+-    export PETSC_ARCH
+-  fi
+-  BTNG_AC_LOG_VAR(PETSC_ARCH)
+-  if test ! -d "$PETSC_DIR/bmake/$PETSC_ARCH"; then
+-    AC_MSG_WARN([PETSC architecture ($PETSC_ARCH) does not look right])
+-  fi
+-  if test ! "$PETSC_OPTIMIZE" = g && test ! "$PETSC_OPTIMIZE" = O; then
+-    AC_MSG_ERROR([PETSC optimize should be either g or O])
+-  fi
+-
+-  petsc_INCLUDES="-I$PETSC_DIR/include -I$PETSC_DIR/bmake/$PETSC_ARCH"
+-  petsc_INCLUDES="$petsc_INCLUDES -I$PETSC_DIR/src/vec"
+-  # Currently, I'm not entirely sure why we have to explicitly specify
+-  # the src/vec directory in the include path.  But there is at least
+-  # one required file there that cannot be found in the include directory.
+-
+-# SGS Support latter version of PETSc
+-# Try new structure and then old
+-  if test -d "${PETSC_DIR}/lib/${PETSC_ARCH}"; then
+-    petsc_LIBDIR="${PETSC_DIR}/lib/${PETSC_ARCH}"
+-  elif  test -d "${PETSC_DIR}/lib/lib${PETSC_OPTIMIZE}/${PETSC_ARCH}"; then
+-    petsc_LIBDIR="${PETSC_DIR}/lib/lib${PETSC_OPTIMIZE}/${PETSC_ARCH}"
+-  else 
+-    AC_MSG_WARN([PETSC lib directory does not look as expected])
+-  fi
+-
+-
+-  # Issue the -L flag if not specifying PETSc libraries by file names.
+-  test ! "${PETSC_LIBFILES+set}" = set && petsc_LIBS="-L${petsc_LIBDIR}"
+-
+-  # Build up a list of PETSC library files.
+-# SGS
+-  petsc_libs_ls1=`cd ${petsc_LIBDIR} && echo lib*.*`
+-
+-  if test -n "$petsc_libs_ls1"; then
+-    unset petsc_libs_ls
+-    for i in $petsc_libs_ls1; do
+-      j=`echo $i | sed -e 's/lib//' -e 's/\.a$//' -e 's/\.so$//'`
+-      if echo "$petsc_libs_ls" | grep -v " $j " > /dev/null; then # Note padding!
+-        petsc_libs_ls="$petsc_libs_ls $j ";	# Note space padding!
+-      fi
+-    done
+-  fi
+-  # Remove mpiuni from the list of PETSC libraries unless user asked for it.
+-  if test ! "${PETSC_MPIUNI}" = yes; then
+-    petsc_libs_ls=`echo "$petsc_libs_ls" | sed 's/ mpiuni //g'`
+-  fi
+-  # Move some low-level libraries to the end to ensure resolution
+-  # for linkers that only make one pass.
+-  for i in petscmat petscvec petsc; do
+-    petsc_libs_ls=`echo "$petsc_libs_ls" | sed 's/\(.*\)\( \{0,1\}'"$i"'\{0,1\} \)\(.*\)/\1 \3 \2/g'`
+-  done
+-  # Build up petsc_LIBS string using library names.
+-  BTNG_AC_LOG_VAR(petsc_libs_ls1 petsc_libs_ls)
+-  if test -n "$petsc_libs_ls"; then
+-    if test "${PETSC_LIBFILES+set}" = set; then
+-      for i in $petsc_libs_ls; do
+-# SGS
+-        petsc_LIBS="$petsc_LIBS ${petsc_LIBDIR}/lib${i}.a"
+-      done
+-    else
+-      for i in $petsc_libs_ls; do
+-        petsc_LIBS="$petsc_LIBS -l$i"
+-      done
+-    fi
+-  fi
+-
+-  BTNG_AC_LOG_VAR(PETSC_DIR petsc_INCLUDES petsc_LIBS PETSC_OPTIMIZE PETSC_MPIUNI)
+-
+-fi
+-# End macro SUPPORT_PETSC
+-])
+-
+-dnl $Id: support-restrict.m4 155 2007-05-14 22:09:31Z gunney $
+-
+-
+-
+-AC_DEFUN([BTNG_C_RESTRICT],[
+-
+-# Start macro BTNG_C_RESTRICT
+-
+-AC_MSG_CHECKING(checking whether restrict is broken)
+-
+-AC_CACHE_VAL(btng_cv_c_restrict_broken, [
+-
+-  AC_LANG_PUSH([C++])
+-  AC_TRY_COMPILE([
+-struct array_test {
+-  double *ptr;
+-  int i0;
+-  array_test(double *p, int i);
+-  double &value(int i) const;
+-};
+-array_test::array_test(double *p, int i) : ptr(p), i0(i) {}
+-double &array_test::value(int i) __restrict__ const {
+-  return ptr[i-i0];
+-}
+-    ],[
+-double a[10];
+-array_test at(a,20);
+-at.value(5) = 5;
+-    ],
+-    # restrict is not broken.
+-    btng_cv_c_restrict_broken=no
+-    ,
+-    # restrict is broken.
+-    btng_cv_c_restrict_broken=yes
+-  )	dnl End AC_TRY_COMPILE call
+-
+-  AC_LANG_POP([C++])
+-
+-])	dnl End AC_CACHE_VAL call
+-
+-AC_MSG_RESULT($btng_cv_c_restrict_broken)
+-
+-if test "$btng_cv_c_restrict_broken" = yes; then
+-  AC_DEFINE([RESTRICT_IS_BROKEN],1,Define if restrict is not properly supported)
+-fi
+-
+-
+-# End macro BTNG_C_RESTRICT
+-
+-])	dnl End of BTNG_C_RESTRICT definition.
+-
+-dnl $Id: support-rpath.m4 333 2008-02-08 00:36:14Z smithsg $
+-
+-
+-AC_DEFUN([BTNG_LIBS_ADD_RPATH],[
+-# Begin macro BTNG_LIBS_ADD_RPATH
+-dnl Support RPATH by going in a LIBS string and, for each -L flag,
+-dnl add a flag immediately following it to set the RPATH, for
+-dnl paths that contain shared libraries.
+-dnl
+-dnl arg1 is a LIBS string.
+-dnl arg2 is the name of the variable to set to the new LIBS string.
+-dnl arg3 is non-empty to use id of the C++ compiler instead of the C compiler.
+-
+-
+-dnl Determine which compiler is being used, because
+-dnl the syntax of the RPATH flag depends on the compiler.
+-dnl Use the C++ compiler and assume the C compiler
+-dnl is from the same family.
+-AC_REQUIRE([BTNG_INFO_CC_CXX_ID])
+-
+-
+-AC_ARG_ENABLE(rpath,
+-[  --enable-rpath=SYNTAX	When linking add syntax for rpath for every
+-			-L option that points to a directory with .so
+-			files in it.  If SYNTAX is omitted, an attempt
+-			is made to find out the correct rpath syntax for
+-			the compiler being used.]
+-,,enable_rpath=yes)
+-
+-if test "$enable_rpath" = yes; then
+-  # Determine the proper rpath syntax.
+-
+-  AC_LANG_SAVE
+-
+-  ifelse([$3],,
+-  AC_LANG_C
+-  btng_rpath_compiler_id="$CC_ID",
+-  AC_LANG_CPLUSPLUS
+-  btng_rpath_compiler_id="$CXX_ID"
+-  )
+-
+-
+-  # Unset the rpath syntax variable so we can check on whether we
+-  # found a way to set it.
+-  unset btng_rpath_beginning;
+-
+-  # Determine, based on the compiler, the syntax for specifying RPATH.
+-  # It should be of the form "$btng_rpath_beginning$the_path", where
+-  # btng_rpath_beginning is the compiler-dependent part.
+-  case "$btng_rpath_compiler_id" in
+-    gnu)
+-      # This compiler may use a variable rpath syntax because it may use
+-      # the native loader.
+-      BTNG_LIBS_FIND_RPATH(btng_rpath_beginning,
+-	['---bogus-flag-meant-to-cause-error' '-Wl,-rpath ' '-Wl,-R' '-Wl,-R '])
+-    ;;
+-    intel)
+-      # This compiler may use a variable rpath syntax because it may use
+-      # the native loader.
+-      BTNG_LIBS_FIND_RPATH(btng_rpath_beginning,
+-	['---bogus-flag-meant-to-cause-error' '-Wl,-rpath ' '-Wl,-R' '-Wl,-R '])
+-      if test "$btng_rpath_beginning" = "---bogus-flag-meant-to-cause-error"; then
+-        # Do not rely on the compiler return value to test for syntax
+-        # Guess the syntax assuming the native loader will be used.
+-        case "$host_os" in
+-          linux*) btng_rpath_beginning='-Wl,-rpath ' ;;
+-          sun*|solaris*) btng_rpath_beginning='-R' ;;
+-          osf*) btng_rpath_beginning='-rpath ' ;;
+-          *) btng_rpath_beginning='' ;;
+-        esac
+-        AC_MSG_WARN(
+-  [Your compiler ifelse($3,,$CC,$CXX) returns 0 even when it is
+-  given a bogus flag.  Therefore, I cannot find the proper syntax
+-  for the rpath for this compiler.  I have resorted to a guess that
+-  may not be correct: '$btng_rpath_beginning'.
+-  You can override this by using --enable-rpath=SYNTAX])
+-      fi
+-    ;;
+-    sunpro)
+-      # This compiler may use a variable rpath syntax.
+-      BTNG_LIBS_FIND_RPATH(btng_rpath_beginning,['---bogus-flag-meant-to-cause-error' '-R' '-R '])
+-    ;;
+-    kai)
+-      # The KAI compilers use the system native loader.
+-      #
+-      # On some platforms (PC/Linux at least), this compiler seems
+-      # to return 0 even if it encounters error, thus it can return
+-      # the first guess for the rpath syntax, even if the guess is
+-      # wrong.  We try to catch this by making the first flag bogus.
+-      # If the compiler accepts this flag (by returning 0), we know
+-      # it is wrong and we resort to an alternative method for
+-      # getting the rpath syntax.
+-      BTNG_LIBS_FIND_RPATH(btng_rpath_beginning,
+-	['---bogus-flag-meant-to-cause-error' '-R' '-R ' '-rpath ' '-Wl,-rpath ' '-Wl,-R' '-Wl,-R '])
+-      if test "$btng_rpath_beginning" = "---bogus-flag-meant-to-cause-error"; then
+-        # Do not rely on the compiler return value to test for syntax
+-        # Guess the syntax assuming the native loader will be used.
+-        case "$host_os" in
+-          linux*) btng_rpath_beginning='-Wl,-rpath ' ;;
+-          sun*|solaris*) btng_rpath_beginning='-R' ;;
+-          osf*) btng_rpath_beginning='-rpath ' ;;
+-          *) btng_rpath_beginning='' ;;
+-        esac
+-        AC_MSG_WARN(
+-  [Your compiler ifelse($3,,$CC,$CXX) returns 0 even when it is
+-  given a bogus flag.  Therefore, I cannot find the proper syntax
+-  for the rpath for this compiler.  I have resorted to a guess that
+-  may not be correct: '$btng_rpath_beginning'.
+-  You can override this by using --enable-rpath=SYNTAX])
+-      fi
+-    ;;
+-    *)
+-      BTNG_LIBS_FIND_RPATH(btng_rpath_beginning)
+-    ;;
+-  esac
+-  BTNG_AC_LOG_VAR(host_os CC_ID CXX_ID btng_rpath_compiler_id btng_rpath_beginning, forming rpaths)
+-
+-  AC_LANG_RESTORE
+-
+-  # It is valid to have btng_rpath_beginning be blank.
+-  # but if it is unset, we could not find a way to set it.
+-  if test ! "${btng_rpath_beginning+set}" = set; then
+-    AC_MSG_WARN(I cannot find a working syntax for setting relocatable paths)
+-  fi
+-
+-elif test ! "${enable_rpath}" = no; then
+-
+-  # User has provided the rpath syntax.
+-  btng_rpath_beginning=$enable_rpath
+-
+-fi;	# End block determining the proper rpath syntax.
+-
+-
+-# Use the rpath syntax.
+-if test "${btng_rpath_beginning+set}" = set	\
+-  && test -n "${btng_rpath_beginning}" ; then
+-  # Add the RPATH flags only if we know the syntax for it,
+-  # and if it is needed as indicated by a non-empty btng_rpath_beginning.
+-
+-  # Loop through the flags in $1, looking for the -L flag,
+-  # and append RPATH flag to each one found, if the the
+-  # path specified by the flag includes shared libraries.
+-  for i in ${$1}; do
+-    btng_new_$2="${btng_new_$2} ${i}"
+-    btng_tmp_addl_string=`echo $i | sed 's/^-L//'`
+-    test "$btng_tmp_addl_string" = "$i" && continue	# does not contain -L.
+-    test -d "$btng_tmp_addl_string" || continue;	# directory nonexistent.
+-    test "`echo $btng_tmp_addl_string/*.so`" = "$btng_tmp_addl_string/*.so" \
+-      && continue;	# does not contain shared libraries.
+-    echo "${btng_new_$2}"	\
+-      | grep ".*${btng_rpath_beginning}[[ 	]]*${btng_tmp_addl_string}"	\
+-      > /dev/null	\
+-      && continue	# already contains the flag we want to add.
+-    btng_new_$2="${btng_new_$2} ${btng_rpath_beginning}${btng_tmp_addl_string}"
+-  done
+-  $2="${btng_new_$2}"
+-
+-fi
+-
+-dnl Now, arg2 should be similar to arg1, but with the additional RPATH flags.
+-
+-# End macro BTNG_LIBS_ADD_RPATH
+-])
+-
+-AC_DEFUN([BTNG_LIBS_FIND_RPATH],[
+-# Begin macro BTNG_LIBS_FIND_RPATH
+-dnl Find the correct rpath syntax from the list given in arg1.
+-dnl arg1: variable to set to the syntax string
+-dnl arg2: list of syntaxes to try;
+-dnl   if blank, a large number of syntaxes will be tried.
+-dnl
+-dnl arg1 is list of possible rpath syntaxes to try.
+-define(btng_possible_rpaths,dnl
+-[ifelse($2,,['-R ' '-R' '-rpath ' '-Wl,-rpath ' '-Wl,-R ' '-Wl,-R'],[[$2]])])
+-  btng_save_LIBS="$LIBS";
+-  for i in btng_possible_rpaths; do
+-    LIBS="${i}/usr/local"
+-    AC_TRY_LINK(,,$1="$i", unset $1)
+-    # Intel compiler does not fail on bad args but warning message is
+-    # created. If warning is found in the log then continue searching
+-    # for syntax as the current one is no good.  If warning is not
+-    # found use return status of link attempt to determine if
+-    # parameter was accepted by the compiler.
+-    SEARCH=`echo "ignoring unknown option '${LIBS}'" | sed -e "s/---/-f-/"`
+-    if ( grep "$SEARCH" config.log ) >/dev/null 2>&1
+-    then 
+-	:
+-    else 
+-        if test "${$1+set}" = set; then break; fi
+-    fi
+-  done
+-  LIBS="$btng_save_LIBS"
+-undefine([btng_possible_rpaths])
+-# End macro BTNG_LIBS_FIND_RPATH
+-])
+-
+-dnl Define macros for supporting z compression library.
+-dnl $Id: support-spooles.m4 155 2007-05-14 22:09:31Z gunney $
+-
+-
+-AC_DEFUN([BTNG_SUPPORT_SPOOLES],[
+-dnl Support spooles library by setting the variables
+-dnl spooles_PREFIX, spooles_INCLUDES, and spooles_LIBS.
+-dnl Arg1: non-empty if you want the default to be on.
+-dnl
+-# Begin macro BTNG_SUPPORT_SPOOLES
+-
+-ifelse($1,,unset spooles_PREFIX,spooles_PREFIX=)
+-
+-AC_ARG_WITH(spooles,
+-ifelse($1,,
+-[  --with-spooles[=PATH]
+-			Use spooles library and optionally specify where
+-			it is installed.],
+-[  --without-spooles	Do not use the spooles library.]),
+-if test "${with_spooles+set}" = yes ; then
+-  spooles_PREFIX=
+-elif test "${with_spooles}" = no; then
+-  unset spooles_PREFIX;
+-else
+-  spooles_PREFIX="${with_spooles}"
+-fi
+-)
+-
+-if test "${spooles_PREFIX+set}" = set; then
+-  # Set spooles_LIBS and spooles_INCLUDE if they are not already set.
+-  # Note that we expect library archives and headers to be
+-  # directly under spooles_PREFIX rather than subdirectories
+-  # lib and include of spooles_PREFIX.
+-  if test ! "${spooles_LIBS+set}" = set; then
+-    if test ! "${spooles_PREFIX}" = ''; then
+-      spooles_LIBS="-L${spooles_PREFIX}"
+-    fi
+-    spooles_LIBS="${spooles_LIBS} -lspoolesMPI -lspooles"
+-  fi
+-  if test ! "${spooles_INCLUDES+set}" = set ; then
+-    if test ! "${spooles_PREFIX}" = ''; then
+-      spooles_INCLUDES="-I${spooles_PREFIX}"
+-    fi
+-  fi
+-fi
+-
+-BTNG_AC_LOG_VAR(spooles_PREFIX spooles_LIBS spooles_INCLUDES)
+-
+-# End macro BTNG_SUPPORT_SPOOLES
+-])
+-
+-dnl $Id: variable-header-filenames.m4 155 2007-05-14 22:09:31Z gunney $
+-
+-AC_DEFUN([BTNG_FIND_CORRECT_HEADER_FILENAME],[
+-dnl There is no standard naming convention for STL header files.
+-dnl This macro helps to pick the right name out of a list.
+-dnl Arg1 is the variable to set to the found file name.
+-dnl Arg2 is the list of file names to search
+-dnl Arg3 are additional headers to include (for use by AC_TRY_COMPILE)
+-dnl Arg4 is the code body to test if the included file works.
+-# Start macro $0
+-  AC_LANG_SAVE
+-  AC_LANG_CPLUSPLUS
+-  $1=
+-  AC_REQUIRE([BTNG_TYPE_NAMESPACE])
+-  AC_REQUIRE([BTNG_TYPE_BOOL])
+-  CPPFLAGS_SAVE=$CPPFLAGS
+-  for file in $2; do
+-    AC_CHECK_HEADER($file, btng_header_found=1, unset btng_header_found)
+-    if test -n "$btng_header_found"; then
+-      AC_MSG_CHECKING(whether $file is the header sought)
+-      BTNG_AC_LOG(found header file $file)
+-      CPPFLAGS="$CPPFLAGS_SAVE $CXX_OPTIONS"
+-      AC_TRY_COMPILE(
+-        [
+-/* macro $0 checking for $file */
+-#ifdef BOOL_IS_BROKEN
+-typedef int bool;
+-#define true 1
+-#define false 0
+-#endif
+-	$3
+-        #include <$file>
+-#ifndef NAMESPACE_IS_BROKEN
+-using namespace std;
+-#endif
+-],
+-        $4,
+-	AC_MSG_RESULT(yes)
+-        $1="$file",
+-	AC_MSG_RESULT(no)
+-      )
+-    fi
+-    if test -n "${$1}"; then break; fi
+-  done
+-  AC_LANG_RESTORE
+-  CPPFLAGS=$CPPFLAGS_SAVE
+-# End macro $0
+-])
+-
+-
+-
+-
+-AC_DEFUN([BTNG_TREAT_VARIABLE_HEADER_FILENAME],[
+-dnl BTNG_TREAT_VARIABLE_HEADER_FILENAME is a generic macro
+-dnl used by (and using) other macros in this file.
+-dnl It determines, from a given list, the correct name of
+-dnl a header file required to compile a test code body.
+-dnl It takes a list of possible of the header filenames.
+-dnl It reports whether each header file is the one sought
+-dnl until it finds the one that is.
+-dnl If none of the header filenames work:
+-dnl   It issues a warning.
+-dnl   It defines a ...IS_BROKEN C macro saying so.
+-dnl If it finds the first header filename that works:
+-dnl   It assigns a variable (..._HEADER_FILE) to the
+-dnl   correct filename and call AC_DEFINE for that variable.
+-dnl Arguments are:
+-dnl  1: a single name representing the header sought.
+-dnl  2: a list of possible header filenames.
+-dnl  3: other include lines (for use in AC_TRY_COMPILE).
+-dnl  4: code to test if the header file is the one being sought.
+-dnl
+-# Start macro $0
+-AC_CACHE_VAL(btng_cv_[]translit($1,[-],[_])[]_header_filename, [
+-  AC_ARG_WITH($1-header-file,
+-  [  --with-$1-header-file	Specify name of the $1 header file.],
+-  btng_cv_[]translit($1,[-],[_])[]_header_filename=$with_[]translit($1,[-],[_])[]_header_file,
+-  [BTNG_FIND_CORRECT_HEADER_FILENAME(btng_cv_[]translit($1,[-],[_])[]_header_filename,$2,[$3],[[$4]])]
+-  )
+-])	dnl End AC_CACHE_VAL call
+-# We must be able to find the $1 header file or else.
+-translit($1,[-a-z],[_A-Z])[]_HEADER_FILE="$btng_cv_[]translit($1,[-],[_])[]_header_filename"
+-if test -z "$translit($1,[-a-z],[_A-Z])[]_HEADER_FILE"; then
+-  translit($1,[-],[_])[]_header_is_broken=1
+-  AC_MSG_WARN([cannot find a working $1 header file.
+-      Names tried: $2
+-      If you know the correct hame of this header file,
+-      use the option --with-[]$1[]-header-file=FILENAME
+-      with configure.])
+-  AC_DEFINE(translit($1,[-a-z],[_A-Z])[]_IS_BROKEN,[1],[The $1 header file is broken])
+-  BTNG_AC_LOG(header file $1 is broken)
+-else
+-  unset translit($1,[-],[_])[]_header_is_broken
+-  AC_DEFINE_UNQUOTED(translit($1,[-a-z],[_A-Z])[]_HEADER_FILE,<$translit($1,[-a-z],[_A-Z])[]_HEADER_FILE>,
+-    [Header file for $1])
+-  BTNG_AC_LOG(header file $1 is ok)
+-fi
+-# End macro $0
+-])	dnl end of BTNG_TREAT_VARIABLE_HEADER_FILENAME definition.
+-
+-
+-
+-dnl
+-dnl These are some STL headers with uncertain names.
+-dnl
+-
+-
+-AC_DEFUN([BTNG_STL_STRING_HEADER_FILENAME],[
+-# Start macro $0
+-dnl dnl AC_MSG_CHECKING(name of the STL string header file)
+-BTNG_TREAT_VARIABLE_HEADER_FILENAME([stl-string],
+-  [string strings string.h strings.h string.hxx strings.hxx],,
+-  [std::string s; s = "sample string";])
+-# End macro $0
+-])	dnl end of BTNG_STL_STRING_HEADER_FILENAME definition.
+-
+-
+-AC_DEFUN([BTNG_STL_SET_HEADER_FILENAME],[
+-# Start macro $0
+-dnl AC_MSG_CHECKING(name of the STL set header file)
+-BTNG_TREAT_VARIABLE_HEADER_FILENAME([stl-set], [set set.h set.hxx],,
+-  [set<int> s; s.insert(1);])
+-# End macro $0
+-])	dnl end of BTNG_STL_SET_HEADER_FILENAME definition.
+-
+-
+-AC_DEFUN([BTNG_STL_STACK_HEADER_FILENAME],[
+-# Start macro $0
+-dnl AC_MSG_CHECKING(name of the STL stack header file)
+-AC_REQUIRE([BTNG_INFO_CXX_ID])
+-AC_REQUIRE([BTNG_STL_LIST_HEADER_FILENAME])
+-btng_stl_stack_test_body='[stack<int> s; s.push(1);]'
+-# The Sun compiler version 5.2 does not treat default template
+-# arguments correctly.  The STL standard states that for stack,
+-# only the first argument is required but this Sun compiler
+-# requires the second.
+-if test "$CXX_ID" = "sunpro" && echo "$CXX_VERSION" | grep '^0x420' > /dev/null || test "$CXX_ID" = "sunpro" && echo "$CXX_VERSION" | grep '^0x520' > /dev/null ; then
+-btng_stl_stack_test_body='[stack<int,list<int> > s; s.push(1);]'
+-fi
+-BTNG_TREAT_VARIABLE_HEADER_FILENAME([stl-stack], [stack stack.h stack.hxx],,
+-  [$btng_stl_stack_test_body])
+-# End macro $0
+-])	dnl end of BTNG_STL_STACK_HEADER_FILENAME definition.
+-
+-
+-AC_DEFUN([BTNG_STL_VECTOR_HEADER_FILENAME],[
+-# Start macro $0
+-BTNG_TREAT_VARIABLE_HEADER_FILENAME([stl-vector], [vector vector.h vector.hxx],,
+-[vector<int> v; v.insert(v.begin(),1);
+-vector<char> s; s.insert( s.end(), 10, '\0' );])
+-# End macro $0
+-])	dnl end of BTNG_STL_VECTOR_HEADER_FILENAME definition.
+-
+-
+-AC_DEFUN([BTNG_STL_LIST_HEADER_FILENAME],[
+-# Start macro $0
+-dnl AC_MSG_CHECKING(name of the STL list header file)
+-BTNG_TREAT_VARIABLE_HEADER_FILENAME([stl-list], [list list.h list.hxx],,
+-  [list<int> v; v.insert(v.begin(),1);])
+-# End macro $0
+-])	dnl end of BTNG_STL_LIST_HEADER_FILENAME definition.
+-
+-
+-AC_DEFUN([BTNG_STL_MAP_HEADER_FILENAME],[
+-# Start macro $0
+-dnl AC_MSG_CHECKING(name of the STL map header file)
+-AC_REQUIRE([BTNG_INFO_CXX_ID])
+-btng_stl_map_test_body='[map<int,int> v; v[0]=1;]'
+-# The Sun compiler version 4.2 does not treat default template
+-# arguments correctly.  The STL standard states that for map,
+-# only the first two arguments are required but the Sun compiler
+-# requires the third.
+-test "$CXX_ID" = "sunpro" && echo "$CXX_VERSION" | grep '^0x420' > /dev/null && \
+-btng_stl_map_test_body='[map<int,int,less<int> > v; v[0]=1;]'
+-BTNG_TREAT_VARIABLE_HEADER_FILENAME([stl-map], [map map.h map.hxx],,
+-  [$btng_stl_map_test_body])
+-# End macro $0
+-])	dnl end of BTNG_STL_MAP_HEADER_FILENAME definition.
+-
+-
+-AC_DEFUN([BTNG_STL_ITERATOR_HEADER_FILENAME],[
+-# Start macro $0
+-dnl AC_MSG_CHECKING(name of the STL iterator header file)
+-BTNG_TREAT_VARIABLE_HEADER_FILENAME([stl-iterator],
+-  [iterator iterator.h iterator.hxx],,
+-  [int a[10], size; size=distance(a,a+10);])
+-dnl  [ostream_iterator<int> v(cout," ");])
+-# End macro $0
+-])	dnl end of BTNG_STL_ITERATOR_HEADER_FILENAME definition.
+-
+-
+-AC_DEFUN([BTNG_STL_ALGO_HEADER_FILENAME],[
+-# Start macro $0
+-dnl AC_MSG_CHECKING(name of the STL algo header file)
+-BTNG_TREAT_VARIABLE_HEADER_FILENAME([stl-algo],
+-  [algo algorithm algo.h algorithm.h algo.hxx algorithm.hxx] ,,
+-  [int n[10]; find(n,n+10,0);])
+-# End macro $0
+-])	dnl end of BTNG_STL_ALGO_HEADER_FILENAME definition.
+-
+-
+-AC_DEFUN([BTNG_STL_FUNCTION_HEADER_FILENAME],[
+-# Start macro $0
+-dnl AC_MSG_CHECKING(name of the STL numeric header file)
+-BTNG_TREAT_VARIABLE_HEADER_FILENAME([stl-function],
+-  [function function.h function.hxx] ,,
+-  [int a=1, b=2, c; plus<int> adder; c=adder(a,b);])
+-# End macro $0
+-])	dnl end of BTNG_STL_FUNCTION_HEADER_FILENAME definition.
+-
+-
+-AC_DEFUN([BTNG_STL_NUMERIC_HEADER_FILENAME],[
+-# Start macro $0
+-dnl AC_MSG_CHECKING(name of the STL numeric header file)
+-BTNG_TREAT_VARIABLE_HEADER_FILENAME([stl-numeric],
+-  [numeric numeric.h numeric.hxx] ,,
+-  [int n[10]; iota(n,n+10,0);])
+-# End macro $0
+-])	dnl end of BTNG_STL_NUMERIC_HEADER_FILENAME definition.
+-
+-
+-AC_DEFUN([BTNG_STL_SSTREAM_HEADER_FILENAME],[
+-# Start macro $0
+-dnl AC_MSG_CHECKING(name of the STL string stream header file)
+-btng_stl_sstream_test_body='/* New syntax */ istringstream ist("a string");'
+-dnl We think that the sun 4.2 compiler does not support the syntax,
+-dnl but we're not absolutely sure.
+-test "$CXX_ID" = "sunpro" && echo "$CXX_VERSION" | grep '^0x420' > /dev/null && \
+-btng_stl_sstream_test_body='/* Old syntax */ char i[[10]]; istrstream ist(i);'
+-test "$CXX_ID" = "gnu" && echo "$CXX_VERSION" | grep '^2.95.2' > /dev/null && \
+-btng_stl_sstream_test_body='/* Old syntax */ char i[[10]]; istrstream ist(i);'
+-BTNG_TREAT_VARIABLE_HEADER_FILENAME([stl-sstream],
+-  [sstream stringstream strstream sstream.h stringstream.h strstream.h sstream.hxx stringstream.hxx strstream.hxx] ,,
+-  [$btng_stl_sstream_test_body] )
+-# End macro $0
+-])      dnl end of BTNG_STL_SSTREAM_HEADER_FILENAME definition.
+-
+-
+-AC_DEFUN([BTNG_STL_MULTIMAP_HEADER_FILENAME],[
+-# Start macro $0
+-dnl AC_MSG_CHECKING(name of the STL multimap header file)
+-AC_REQUIRE([BTNG_INFO_CXX_ID])
+-btng_stl_multimap_test_body='[multimap<int,int > v; pair<const int,int> thePair(0,1); v.insert(thePair);]'
+-test "$CXX_ID" = "sunpro" && echo "$CXX_VERSION" | grep '^0x420' > /dev/null && \
+-btng_stl_multimap_test_body='[multimap<int,int,less<int> > v; pair<const int,int> thePair(0,1); v.insert(thePair);]'
+-BTNG_TREAT_VARIABLE_HEADER_FILENAME([stl-multimap],
+-    [multimap mmap multimap.h mmap.h multimap.hxx mmap.hxx map map.h map.hxx],,
+-    [$btng_stl_multimap_test_body])
+-# End macro $0
+-])      dnl end of BTNG_STL_MULTIMAP_HEADER_FILENAME definition.
+-
+-
+-AC_DEFUN([BTNG_STL_PAIR_HEADER_FILENAME],[
+-# Start macro $0
+-dnl AC_MSG_CHECKING(name of the STL pair header file)
+-BTNG_TREAT_VARIABLE_HEADER_FILENAME([stl-pair], [pair pair.h pair.hxx],,
+-  [pair<int,int> s(0,1);])
+-# End macro $0
+-])      dnl end of BTNG_STL_PAIR_HEADER_FILENAME definition.
+-
+-
+-
+-
+-dnl
+-dnl These are some stream-related headers with uncertain names.
+-dnl
+-
+-
+-AC_DEFUN([BTNG_IOSTREAM_HEADER_FILENAME],[
+-# Start macro $0
+-dnl AC_MSG_CHECKING(name of the iostream header file)
+-BTNG_TREAT_VARIABLE_HEADER_FILENAME([iostream],
+-  [iostream iostream.h iostream.hxx],,
+-  [ostream &co=cout; // test ostream declaration
+-   istream &ci=cin; // test istream declaration
+-   cout<<"test"<<endl; // test extraction operator
+-   ])
+-# End macro $0
+-])	dnl end of BTNG_IOSTREAM_HEADER_FILENAME definition.
+-
+-
+-AC_DEFUN([BTNG_FSTREAM_HEADER_FILENAME],[
+-# Start macro $0
+-dnl AC_MSG_CHECKING(name of the fstream header file)
+-BTNG_TREAT_VARIABLE_HEADER_FILENAME([fstream],
+-  [fstream fstream.h fstream.hxx],,
+-  [fstream iost("theStream",ios::app);])
+-# End macro $0
+-])	dnl end of BTNG_FSTREAM_HEADER_FILENAME definition.
+-
+-
+-AC_DEFUN([BTNG_IOMANIP_HEADER_FILENAME],[
+-# Start macro $0
+-dnl AC_MSG_CHECKING(name of the iomanip header file)
+-AC_REQUIRE([BTNG_IOSTREAM_HEADER_FILENAME])
+-BTNG_TREAT_VARIABLE_HEADER_FILENAME([iomanip],
+-  [iomanip iomanip.h iomanip.hxx],[#include IOSTREAM_HEADER_FILE],
+-  [cout<<setw(13)<<endl;])
+-# End macro $0
+-])	dnl end of BTNG_IOMANIP_HEADER_FILENAME definition.
+-
+-
+-dnl
+-dnl CASC C++ autoconf macros
+-dnl
+-dnl The following macros test various features of the C++ compiler, including:
+-dnl
+-dnl	- boolean types
+-dnl	- namespace construct
+-dnl	- template-based complex numbers
+-dnl	- sstream.h header file with class ostringstream
+-dnl	- new placement operator
+-dnl	- explicit template instantiation
+-dnl	- standard member function specialization
+-dnl	- standard static data instantiation
+-dnl	- standard static data specialization
+-dnl	- static data specialization via pragmas
+-dnl
+-
+-dnl
+-dnl Check whether the C++ compiler supports the boolean built-in type.
+-dnl
+-dnl Variable:	casc_cv_cxx_have_bool = (yes|no)
+-dnl Defines:	(HAVE|LACKS)_BOOL
+-dnl
+-
+-AC_DEFUN([CASC_CXX_BOOL], [
+-   AC_REQUIRE([AC_PROG_CXX])
+-   AC_MSG_CHECKING(whether ${CXX} supports bool)
+-
+-   AC_CACHE_VAL(casc_cv_cxx_have_bool, [
+-      AC_LANG_SAVE
+-      AC_LANG_CPLUSPLUS
+-      AC_TRY_COMPILE([
+-bool b = true;
+-         ], [/* empty */],
+-         casc_cv_cxx_have_bool=yes,
+-         casc_cv_cxx_have_bool=no)
+-      AC_LANG_RESTORE
+-   ])
+-   AC_MSG_RESULT($casc_cv_cxx_have_bool)
+-
+-   if test "$casc_cv_cxx_have_bool" = yes; then
+-      AC_DEFINE([HAVE_BOOL],[1],[HAVE_BOOL])
+-   else
+-      AC_DEFINE([LACKS_BOOL],[1],[LACKS_BOOL])
+-   fi
+-])
+-
+-dnl
+-dnl Check whether the C++ compiler supports the ANSI/ISO namespace construct.
+-dnl
+-dnl Variable:	casc_cv_cxx_have_namespace = (yes|no)
+-dnl Defines:	(HAVE|LACKS)_NAMESPACE
+-dnl
+-
+-AC_DEFUN([CASC_CXX_NAMESPACE], [
+-   AC_REQUIRE([AC_PROG_CXX])
+-   AC_MSG_CHECKING(whether ${CXX} supports namespace)
+-
+-   AC_CACHE_VAL(casc_cv_cxx_have_namespace, [
+-      AC_LANG_SAVE
+-      AC_LANG_CPLUSPLUS
+-      AC_TRY_LINK([
+-namespace test {
+-   int t();
+-   int t() { return 0; } 
+-}
+-using namespace test;
+-int foo() { int x = t(); x++; return x; }
+-         ], [/* empty */],
+-         casc_cv_cxx_have_namespace=yes,
+-         casc_cv_cxx_have_namespace=no)
+-      AC_LANG_RESTORE
+-   ])
+-   AC_MSG_RESULT($casc_cv_cxx_have_namespace)
+-
+-   if test "$casc_cv_cxx_have_namespace" = yes; then
+-      AC_DEFINE([HAVE_NAMESPACE],[1],[HAVE_NAMESPACE])
+-   else
+-      AC_DEFINE([LACKS_NAMESPACE],[1],[LACKS_NAMESPACE])
+-   fi
+-])
+-
+-dnl
+-dnl Check whether the C++ compiler supports cmath
+-dnl
+-dnl Variable:	casc_cv_cxx_have_cmath = (yes|no)
+-dnl Defines:	(HAVE|LACKS)_CMATH
+-dnl
+-
+-AC_DEFUN([CASC_CXX_CMATH], [
+-   AC_REQUIRE([AC_PROG_CXX])
+-   AC_MSG_CHECKING(whether ${CXX} supports cmath)
+-
+-   AC_CACHE_VAL(casc_cv_cxx_have_cmath, [
+-      AC_LANG_SAVE
+-      AC_LANG_CPLUSPLUS
+-         AC_TRY_COMPILE([
+-#include <cmath>
+-void foo() {
+-   double temp = std::sin(0.0);
+-}
+-            ], [/* empty */],
+-            casc_cv_cxx_have_cmath=yes,
+-            casc_cv_cxx_have_cmath=no)
+-         AC_LANG_RESTORE
+-      ])
+-
+-   AC_MSG_RESULT($casc_cv_cxx_have_cmath)
+-
+-   if test "$casc_cv_cxx_have_cmath" = yes; then
+-      AC_DEFINE([HAVE_CMATH],[1],[HAVE_CMATH])
+-   else
+-      AC_DEFINE([LACKS_CMATH],[1],[LACKS_CMATH])
+-   fi
+-])
+-
+-dnl
+-dnl Check whether the C++ compiler supports template-based complex numbers.
+-dnl
+-dnl Variable:	casc_cv_cxx_have_template_comlex = (yes|no)
+-dnl Defines:	(HAVE|LACKS)_TEMPLATE_COMPLEX
+-dnl
+-
+-AC_DEFUN([CASC_CXX_TEMPLATE_COMPLEX], [
+-   AC_REQUIRE([AC_PROG_CXX])
+-   AC_MSG_CHECKING(whether ${CXX} supports template-based complex numbers)
+-
+-   AC_CACHE_VAL(casc_cv_cxx_have_template_complex, [
+-      AC_LANG_SAVE
+-      AC_LANG_CPLUSPLUS
+-      AC_TRY_COMPILE([
+-#include <complex.h>
+-void foo() {
+-   complex<double> a(0.0, 1.0);
+-}
+-         ], [/* empty */],
+-         casc_cv_cxx_have_template_complex=yes,
+-         casc_cv_cxx_have_template_complex=no)
+-      AC_LANG_RESTORE
+-   ])
+-
+-   AC_MSG_RESULT($casc_cv_cxx_have_template_complex)
+-
+-   if test "$casc_cv_cxx_have_template_complex" = yes; then
+-      AC_DEFINE([HAVE_TEMPLATE_COMPLEX],[1],[HAVE_TEMPLATE_COMPLEX])
+-   else
+-      AC_MSG_CHECKING(whether ${CXX} supports ISO template-based complex numbers)
+-      AC_CACHE_VAL(casc_cv_cxx_have_template_complex_std, [
+-         AC_LANG_SAVE
+-         AC_LANG_CPLUSPLUS
+-         AC_TRY_COMPILE([
+-#include <complex>
+-void foo() {
+-   std::complex<double> a(0.0, 1.0);
+-}
+-            ], [/* empty */],
+-            casc_cv_cxx_have_template_complex_std=yes,
+-            casc_cv_cxx_have_template_complex_std=no)
+-         AC_LANG_RESTORE
+-      ])
+-
+-      AC_MSG_RESULT($casc_cv_cxx_have_template_complex_std)
+-
+-      if test "$casc_cv_cxx_have_template_complex_std" = yes; then
+-         AC_DEFINE([HAVE_TEMPLATE_COMPLEX],[1],[HAVE_TEMPLATE_COMPLEX])
+-      else
+-         AC_DEFINE([LACKS_TEMPLATE_COMPLEX],[1],[LACKS_TEMPLATE_COMPLEX])
+-      fi
+-   fi
+-])
+-
+-dnl
+-dnl Check whether the C++ compiler supports sstream.h and class ostringstream.
+-dnl
+-dnl Variable:	casc_cv_cxx_have_sstream = (yes|no)
+-dnl Defines:	(HAVE|LACKS)_SSTREAM
+-dnl             NOTE: Also defines (HAVE|LACKS)_ISO_SSTREAM if compiler 
+-dnl                   supports or does not support std ISO header file 
+-dnl                   <sstream>.  This can be used determine a certain 
+-dnl                   level of compiler support for std ISO header files. 
+-dnl                   It is not intended to apply to all compilers.
+-dnl
+-
+-AC_DEFUN([CASC_CXX_SSTREAM], [
+-   AC_REQUIRE([AC_PROG_CXX])
+-   AC_MSG_CHECKING(whether ${CXX} supports sstream.h and class ostringstream)
+-
+-   AC_CACHE_VAL(casc_cv_cxx_have_sstream, [
+-      AC_LANG_SAVE
+-      AC_LANG_CPLUSPLUS
+-      AC_TRY_COMPILE([
+-#include <sstream.h>
+-void foo() {
+-//   char buffer[100];
+-//   std::ostringstream os(buffer, 100);
+-//   os << "hello, world...";
+-   std::ostringstream out;
+-   double f = 5.0;
+-   int    g = 1;
+-   out << "(" << f << "<some string>" << g << ")";
+-}
+-         ], [/* empty */],
+-         casc_cv_cxx_have_sstream=yes,
+-         casc_cv_cxx_have_sstream=no)
+-      AC_LANG_RESTORE
+-   ])
+-
+-   AC_MSG_RESULT($casc_cv_cxx_have_sstream)
+-
+-   if test "$casc_cv_cxx_have_sstream" = yes; then
+-      AC_DEFINE([HAVE_SSTREAM],[1],[HAVE_SSTREAM])
+-   else
+-        AC_MSG_CHECKING(whether ${CXX} supports sstream and class ostringstream)
+-	AC_CACHE_VAL(casc_cv_cxx_have_sstream_std, [
+-        AC_LANG_SAVE
+-        AC_LANG_CPLUSPLUS
+-        AC_TRY_COMPILE([
+-#include <sstream>
+-void foo() {
+-//   char buffer[100];
+-//   std::ostringstream os(buffer, 100);
+-//   os << "hello, world...";
+-   std::ostringstream out;
+-   double f = 5.0;
+-   int    g = 1;
+-   out << "(" << f << "<some string>" << g << ")";
+-}
+-         ], [/* empty */],
+-        casc_cv_cxx_have_sstream_std=yes,
+-        casc_cv_cxx_have_sstream_std=no)
+-        AC_LANG_RESTORE
+-        ])
+-
+-      AC_MSG_RESULT($casc_cv_cxx_have_sstream_std)
+-
+-      if test "$casc_cv_cxx_have_sstream_std" = yes; then
+-         AC_DEFINE([HAVE_SSTREAM],[1],[HAVE_SSTREAM])
+-         AC_DEFINE([HAVE_ISO_SSTREAM],[1],[HAVE_ISO_SSTREAM])
+-      else
+-         AC_DEFINE([LACKS_SSTREAM],[1],[LACKS_SSTREAM])
+-         AC_DEFINE([LACK_ISO_SSTREAM],[1],[LACK_ISO_SSTREAM])
+-      fi
+-   fi
+-])
+-
+-dnl
+-dnl Check if left is supported
+-dnl
+-dnl Variable:	casc_cv_cxx_have_iomanip_left = (yes|no)
+-dnl Defines:	(HAVE|LACKS)_IOMANIP_LEFT
+-
+-AC_DEFUN([CASC_CXX_IOMANIP_LEFT], [
+-   AC_REQUIRE([AC_PROG_CXX])
+-   AC_MSG_CHECKING(whether ${CXX} defines the iomanip left operator)
+-
+-   AC_CACHE_VAL(casc_cv_cxx_have_iomanip_left, [
+-      AC_LANG_SAVE
+-      AC_LANG_CPLUSPLUS
+-      AC_TRY_LINK([
+-#include <iostream>
+-#include <iomanip>
+-using namespace std;
+-
+-void foo() 
+-{
+-   cout << left << 12.1;
+-}
+-         ], [/* empty */],
+-         casc_cv_cxx_have_iomanip_left=yes,
+-         casc_cv_cxx_have_iomanip_left=no)
+-      AC_LANG_RESTORE
+-   ])
+-   AC_MSG_RESULT($casc_cv_cxx_have_iomanip_left)
+-
+-   if test "$casc_cv_cxx_have_iomanip_left" = yes; then
+-      AC_DEFINE([HAVE_IOMANIP_LEFT],[1],[HAVE_IOMANIP_LEFT])
+-   else
+-      AC_DEFINE([LACKS_IOMANIP_LEFT],[1],[LACKS_IOMANIP_LEFT])
+-   fi
+-])
+-
+-
+-dnl
+-dnl Check whether the C++ compiler defines the new placement operator.
+-dnl
+-dnl Variable:	casc_cv_cxx_have_new_placement_operator = (yes|no)
+-dnl Defines:	(HAVE|LACKS)_NEW_PLACEMENT_OPERATOR
+-dnl
+-
+-AC_DEFUN([CASC_CXX_NEW_PLACEMENT_OPERATOR], [
+-   AC_REQUIRE([AC_PROG_CXX])
+-   AC_MSG_CHECKING(whether ${CXX} defines the new placement operator)
+-
+-   AC_CACHE_VAL(casc_cv_cxx_have_new_placement_operator, [
+-      AC_LANG_SAVE
+-      AC_LANG_CPLUSPLUS
+-      AC_TRY_LINK([
+-#include <new>
+-void trynew() {
+-   void *ptr = 0;
+-   double *data = new (ptr) double;
+-}
+-         ], [/* empty */],
+-         casc_cv_cxx_have_new_placement_operator=yes,
+-         casc_cv_cxx_have_new_placement_operator=no)
+-      AC_LANG_RESTORE
+-   ])
+-
+-   AC_MSG_RESULT($casc_cv_cxx_have_new_placement_operator)
+-
+-   if test "$casc_cv_cxx_have_new_placement_operator" = yes; then
+-      AC_DEFINE([HAVE_NEW_PLACEMENT_OPERATOR],[1],[HAVE_NEW_PLACEMENT_OPERATOR])
+-   else
+-      AC_DEFINE([LACKS_NEW_PLACEMENT_OPERATOR],[1],[LACKS_NEW_PLACEMENT_OPERATOR])
+-   fi
+-])
+-
+-dnl
+-dnl Check whether the C++ compiler supports explicit template instantiation.
+-dnl
+-dnl Variable:	casc_cv_cxx_have_explicit_template_instantiation = (yes|no)
+-dnl Defines:	(HAVE|LACKS)_EXPLICIT_TEMPLATE_INSTANTIATION
+-dnl
+-dnl The explicit template instantiation syntax forces the compiler to
+-dnl instantiate a template of the specified type.  For example,
+-dnl
+-dnl	template <class T> class Pointer {
+-dnl	   public: T *value;
+-dnl	};
+-dnl	#ifndef LACKS_EXPLICIT_TEMPLATE_INSTANTIATION
+-dnl	template class Pointer<int>;
+-dnl	#endif
+-dnl
+-dnl will create the code for a Pointer of type int.  If this syntax is
+-dnl not allowed, then the compiler must define some other mechanism for
+-dnl automatically generating template code.
+-dnl
+-
+-AC_DEFUN([CASC_CXX_EXPLICIT_TEMPLATE_INSTANTIATION], [
+-   AC_REQUIRE([AC_PROG_CXX])
+-   AC_MSG_CHECKING(whether ${CXX} supports explicit template instantiation)
+-   AC_CACHE_VAL(casc_cv_cxx_have_explicit_template_instantiation, [
+-      AC_LANG_SAVE
+-      AC_LANG_CPLUSPLUS
+-      AC_TRY_COMPILE([
+-template <class T> class Pointer { public: T *value; };
+-template class Pointer<int>;
+-         ], [/* empty */],
+-         casc_cv_cxx_have_explicit_template_instantiation=yes,
+-         casc_cv_cxx_have_explicit_template_instantiation=no)
+-      AC_LANG_RESTORE
+-   ])
+-   AC_MSG_RESULT($casc_cv_cxx_have_explicit_template_instantiation)
+-
+-   if test "$casc_cv_cxx_have_explicit_template_instantiation" = yes; then
+-      AC_DEFINE([HAVE_EXPLICIT_TEMPLATE_INSTANTIATION],[1],[HAVE_EXPLICIT_TEMPLATE_INSTANTIATION])
+-   else
+-      AC_DEFINE([LACKS_EXPLICIT_TEMPLATE_INSTANTIATION],[1],[LACKS_EXPLICIT_TEMPLATE_INSTANTIATION])
+-   fi
+-])
+-
+-dnl
+-dnl Check whether the C++ compiler supports member function specialization.
+-dnl
+-dnl Variable:	casc_cv_cxx_have_member_function_specialization = (yes|no)
+-dnl Defines:	(HAVE|LACKS)_MEMBER_FUNCTION_SPECIALIZATION
+-dnl
+-dnl The ANSI/ISO member function specialization syntax is used when defining
+-dnl a specialized member function of a template class.  For example:
+-dnl
+-dnl	template <class T> class Pointer {
+-dnl	   public: void foo();
+-dnl	};
+-dnl	#ifndef LACKS_MEMBER_FUNCTION_SPECIALIZATION
+-dnl	template <>
+-dnl	#endif
+-dnl     void Pointer<int>::foo() { }
+-dnl
+-dnl will define the specialized version of Pointer<int>::foo().  Some
+-dnl compilers such as GNU g++ cannot parse the template <> syntax.
+-dnl
+-
+-AC_DEFUN([CASC_CXX_MEMBER_FUNCTION_SPECIALIZATION], [
+-   AC_REQUIRE([AC_PROG_CXX])
+-   AC_MSG_CHECKING(whether ${CXX} supports member function specialization)
+-   AC_CACHE_VAL(casc_cv_cxx_have_member_function_specialization, [
+-      AC_LANG_SAVE
+-      AC_LANG_CPLUSPLUS
+-      AC_TRY_COMPILE([
+-template <class T> class Pointer { public: void foo(); };
+-template <> void Pointer<int>::foo();
+-template <> void Pointer<int>::foo() { }
+-         ], [/* empty */],
+-         casc_cv_cxx_have_member_function_specialization=yes,
+-         casc_cv_cxx_have_member_function_specialization=no)
+-      AC_LANG_RESTORE
+-   ])
+-
+-   dnl ASCI Red compiles but does not generate the code so manually
+-   dnl set this
+-   case $ARCH in
+-      ipsc2)
+-         casc_cv_cxx_have_member_function_specialization=no
+-         ;;
+-   esac
+-
+-   AC_MSG_RESULT($casc_cv_cxx_have_member_function_specialization)
+-   if test "$casc_cv_cxx_have_member_function_specialization" = yes; then
+-      AC_DEFINE([HAVE_MEMBER_FUNCTION_SPECIALIZATION],[1],[HAVE_MEMBER_FUNCTION_SPECIALIZATION])
+-   else
+-      AC_DEFINE([LACKS_MEMBER_FUNCTION_SPECIALIZATION],[1],[LACKS_MEMBER_FUNCTION_SPECIALIZATION])
+-   fi
+-
+-])
+-
+-dnl
+-dnl Check whether the C++ compiler supports static data instantiation.
+-dnl
+-dnl Variable:	casc_cv_cxx_have_static_data_instantiation = (yes|no)
+-dnl Defines:	(HAVE|LACKS)_STATIC_DATA_INSTANTIATION
+-dnl
+-dnl The ANSI/ISO specifies that the default values of the static data members
+-dnl of a template class may be defined as follows:
+-dnl
+-dnl	template <class T> class Pointer {
+-dnl	   public: static T *s_test;
+-dnl	};
+-dnl	#ifndef LACKS_STATIC_DATA_INSTANTIATION
+-dnl	template <class T> T* Pointer<T>::s_test = (T*) 0;
+-dnl	#endif
+-dnl
+-dnl Some compilers such as GNU g++ cannot parse the generic static data member
+-dnl instantiation syntax and require that static data members for type T be
+-dnl explicitly specified to instantiate the data member.
+-
+-AC_DEFUN([CASC_CXX_STATIC_DATA_INSTANTIATION], [
+-   AC_REQUIRE([AC_PROG_CXX])
+-   AC_MSG_CHECKING(whether ${CXX} supports static data instantiation)
+-   AC_CACHE_VAL(casc_cv_cxx_have_static_data_instantiation, [
+-      AC_LANG_SAVE
+-      AC_LANG_CPLUSPLUS
+-      AC_TRY_COMPILE([
+-template <class T> class Pointer { public: void foo(); };
+-template <> void Pointer<int>::foo() { }
+-         ], [/* empty */],
+-         casc_cv_cxx_have_static_data_instantiation=yes,
+-         casc_cv_cxx_have_static_data_instantiation=no)
+-      AC_LANG_RESTORE
+-   ])
+-   AC_MSG_RESULT($casc_cv_cxx_have_static_data_instantiation)
+-   if test "$casc_cv_cxx_have_static_data_instantiation" = yes; then
+-      AC_DEFINE([HAVE_STATIC_DATA_INSTANTIATION],[1],[HAVE_STATIC_DATA_INSTANTIATION])
+-   else
+-      AC_DEFINE([LACKS_STATIC_DATA_INSTANTIATION],[1],[LACKS_STATIC_DATA_INSTANTIATION])
+-   fi
+-])
+-
+-dnl
+-dnl Check whether the C++ compiler supports standard static data specialization.
+-dnl
+-dnl Variable:	casc_cv_cxx_have_standard_static_data_specialization = (yes|no)
+-dnl Defines:	(HAVE|LACKS)_STANDARD_STATIC_DATA_SPECIALIZATION
+-dnl
+-dnl The ANSI/ISO specifies that static data members of a template class may
+-dnl be specialized as follows:
+-dnl
+-dnl	template <class T> class Pointer {
+-dnl	   public: static T *s_test;
+-dnl	};
+-dnl	template <> int *Pointer<int>::s_test;
+-dnl	template <> int *Pointer<int>::s_test = (int*) 0;
+-dnl	template class Pointer<int>;
+-dnl
+-dnl Some compilers such as GNU g++ and older versions of KCC cannot parse
+-dnl this syntax and use other methods (such as pragmas or different syntax).
+-dnl
+-
+-AC_DEFUN([CASC_CXX_STANDARD_STATIC_DATA_SPECIALIZATION], [
+-   AC_REQUIRE([AC_PROG_CXX])
+-   AC_MSG_CHECKING(whether ${CXX} supports standard static data specialization)
+-   AC_CACHE_VAL(casc_cv_cxx_have_standard_static_data_specialization, [
+-      AC_LANG_SAVE
+-      AC_LANG_CPLUSPLUS
+-      AC_TRY_COMPILE([
+-template <class T> class Pointer { public: static T *s_test; };
+-template <> int *Pointer<int>::s_test;
+-int test() { Pointer<int> P; return(*P.s_test); }
+-template <> int *Pointer<int>::s_test = (int*) 0;
+-template class Pointer<int>;
+-         ], [/* empty */],
+-         casc_cv_cxx_have_standard_static_data_specialization=yes,
+-         casc_cv_cxx_have_standard_static_data_specialization=no)
+-      AC_LANG_RESTORE
+-   ])
+-   AC_MSG_RESULT($casc_cv_cxx_have_standard_static_data_specialization)
+-   if test "$casc_cv_cxx_have_standard_static_data_specialization" = yes; then
+-      AC_DEFINE([HAVE_STANDARD_STATIC_DATA_SPECIALIZATION],[1],[HAVE_STANDARD_STATIC_DATA_SPECIALIZATION])
+-   else
+-      AC_DEFINE([LACKS_STANDARD_STATIC_DATA_SPECIALIZATION],[1],[LACKS_STANDARD_STATIC_DATA_SPECIALIZATION])
+-   fi
+-])
+-
+-dnl
+-dnl Check whether the C++ compiler supports pragma static data specialization.
+-dnl
+-dnl Variable:	casc_cv_cxx_have_pragma_static_data_specialization = (yes|no)
+-dnl Defines:	(HAVE|LACKS)_PRAGMA_STATIC_DATA_SPECIALIZATION
+-dnl
+-dnl Some compilers support the specialization of a static data member of a
+-dnl template class using the following syntax:
+-dnl
+-dnl	template <class T> class Pointer {
+-dnl	   public: static T *s_test;
+-dnl	};
+-dnl	#pragma do_not_instantiate int *Pointer<int>::s_test
+-dnl	template <> int *Pointer<int>::s_test = (int*) 0;
+-dnl	template class Pointer<int>;
+-dnl
+-dnl This syntax is supported by older versions of KCC.  Note that this
+-dnl macro should be used ONLY if the standard static data specialization
+-dnl syntax fails.
+-dnl
+-
+-AC_DEFUN([CASC_CXX_PRAGMA_STATIC_DATA_SPECIALIZATION], [
+-   AC_REQUIRE([AC_PROG_CXX])
+-   AC_MSG_CHECKING(whether ${CXX} supports pragma static data specialization)
+-   AC_CACHE_VAL(casc_cv_cxx_have_pragma_static_data_specialization, [
+-      AC_LANG_SAVE
+-      AC_LANG_CPLUSPLUS
+-      AC_TRY_COMPILE([
+-template <class T> class Pointer { public: static T *s_test; };
+-#pragma do_not_instantiate int *Pointer<int>::s_test
+-int test() { Pointer<int> P; return(*P.s_test); }
+-template <> int *Pointer<int>::s_test = (int*) 0;
+-template class Pointer<int>;
+-         ], [/* empty */],
+-         casc_cv_cxx_have_pragma_static_data_specialization=yes,
+-         casc_cv_cxx_have_pragma_static_data_specialization=no)
+-      AC_LANG_RESTORE
+-   ])
+-   AC_MSG_RESULT($casc_cv_cxx_have_pragma_static_data_specialization)
+-   if test "$casc_cv_cxx_have_pragma_static_data_specialization" = yes; then
+-      AC_DEFINE([HAVE_PRAGMA_STATIC_DATA_SPECIALIZATION],[1],[HAVE_PRAGMA_STATIC_DATA_SPECIALIZATION])
+-   else
+-      AC_DEFINE([LACKS_PRAGMA_STATIC_DATA_SPECIALIZATION],[1],[LACKS_PRAGMA_STATIC_DATA_SPECIALIZATION])
+-   fi
+-])
+-
+-dnl
+-dnl Check whether the C++ compiler supports exception handling.
+-dnl
+-dnl Variable:	casc_cv_cxx_have_exception_handling = (yes|no)
+-dnl Defines:	(HAVE|LACKS)_EXCEPTION_HANDLING
+-dnl
+-dnl Compilers that support exception handling will support the following  
+-dnl operation: 
+-dnl
+-dnl static void byebye(int error) {
+-dnl    fprintf(stderr, "floating point exception\n");   abort(); 
+-dnl }
+-dnl int main(int argc, char** argv) {
+-dnl    unsigned short fpu_flags = _FPU_DEFAULT;
+-dnl    fpu_flags &= ~_FPU_MASK_IM;  /* Execption on Invalid operation */
+-dnl    fpu_flags &= ~_FPU_MASK_ZM;  /* Execption on Division by zero  */
+-dnl    fpu_flags &= ~_FPU_MASK_OM;  /* Execption on Overflow */
+-dnl    _FPU_SETCW(fpu_flags);
+-dnl    signal(SIGFPE, byebye);  /* Invoke byebye when above occurs */
+-dnl }
+-dnl
+-dnl
+-AC_DEFUN([CASC_CXX_EXCEPTION_HANDLING], [
+-    AC_REQUIRE([AC_PROG_CXX])
+-    AC_MSG_CHECKING(whether ${CXX} supports exception handling)
+-    AC_CACHE_VAL(casc_cxx_have_exception_handling, [
+-       AC_LANG_SAVE
+-       AC_LANG_CPLUSPLUS
+-       AC_TRY_COMPILE([
+-#include <fpu_control.h>
+-#include <signal.h>
+-static void byebye(int error) { }
+-void foo() {
+-   unsigned short fpu_flags = _FPU_DEFAULT;
+-   fpu_flags &= ~_FPU_MASK_IM;  /* Execption on Invalid operation */
+-   fpu_flags &= ~_FPU_MASK_ZM;  /* Execption on Division by zero  */
+-   fpu_flags &= ~_FPU_MASK_OM;  /* Execption on Overflow */
+-   _FPU_SETCW(fpu_flags);
+-   signal(SIGFPE, byebye);
+-}
+-         ], [/* empty */],
+-         casc_cxx_have_exception_handling=yes,
+-         casc_cxx_have_exception_handling=no)
+-       AC_LANG_RESTORE
+-    ])
+-    AC_MSG_RESULT($casc_cxx_have_exception_handling)
+-    if test "$casc_cxx_have_exception_handling" = yes; then
+-       AC_DEFINE([HAVE_EXCEPTION_HANDLING],[1],[HAVE_EXCEPTION_HANDLING])
+-    else
+-       AC_DEFINE([LACKS_EXCEPTION_HANDLING],[1],[LACKS_EXCEPTION_HANDLING])
+-    fi
+-])
+-
+-
+-dnl
+-dnl Determines which form of isnan is present
+-dnl 
+-dnl Defines:	(HAVE|LACKS)_CMATH_ISNAN
+-dnl             (HAVE|LACKS)_ISNAN
+-dnl  	        (HAVE|LACKS)_ISNAND
+-dnl  	        (HAVE|LACKS)_INLINE_ISNAND
+-dnl
+-dnl isnan is part of C99 spec and not necessarily available under
+-dnl ISO C++.  Test for some other possible functions.
+-dnl
+-AC_DEFUN([CASC_CXX_ISNAN], [
+-   AC_REQUIRE([AC_PROG_CXX])
+-   AC_MSG_CHECKING(checking for isnan in cmath)
+-
+-   AC_LANG_SAVE
+-   AC_LANG_CPLUSPLUS
+-   AC_TRY_COMPILE([ #include <cmath> ], 
+-      [ int test = std::isnan(0.0); ],
+-      casc_cv_cxx_have_isnan=yes,
+-      casc_cv_cxx_have_isnan=no)
+-   AC_LANG_RESTORE
+-
+-   AC_MSG_RESULT($casc_cv_cxx_have_isnan)
+-
+-   if test "$casc_cv_cxx_have_isnan" = yes; then
+-      AC_DEFINE([HAVE_CMATH_ISNAN],[1],[HAVE_CMATH_ISNAN])
+-   else
+-      AC_DEFINE([LACKS_CMATH_ISNAN],[1],[LACKS_CMATH_ISNAN])
+-
+-      AC_MSG_CHECKING(checking for isnan in math.h)
+-
+-      AC_LANG_SAVE
+-      AC_LANG_CPLUSPLUS
+-      AC_TRY_COMPILE([#include <math.h>], 
+-         [int test = isnan(0.0);],
+-         casc_cv_cxx_have_isnan=yes,
+-         casc_cv_cxx_have_isnan=no)
+-      AC_LANG_RESTORE
+-
+-      AC_MSG_RESULT($casc_cv_cxx_have_isnan)
+-
+-      if test "$casc_cv_cxx_have_isnan" = yes; then
+-         AC_DEFINE([HAVE_ISNAN],[1],[HAVE_ISNAN])
+-      else
+-         AC_DEFINE([LACKS_ISNAN],[1],[LACKS_ISNAN])
+-
+-         AC_MSG_CHECKING(checking for __isnand)
+-
+-         AC_LANG_SAVE
+-         AC_LANG_CPLUSPLUS
+-         AC_TRY_COMPILE([#include <math.h>],
+-            [int test = __isnand(0.0);],
+-            casc_cv_cxx_have_isnand=yes,
+-            casc_cv_cxx_have_isnand=no)
+-         AC_LANG_RESTORE
+-  
+-         AC_MSG_RESULT($casc_cv_cxx_have_isnand)
+-         if test "$casc_cv_cxx_have_isnand" = yes; then
+-            AC_DEFINE([HAVE_ISNAND],[1],[HAVE_ISNAND])
+-         else
+-            AC_DEFINE([LACKS_ISNAND],[1],[LACKS_ISNAND])
+-
+-            AC_MSG_CHECKING(checking for __inline_isnand)
+-
+-            AC_LANG_SAVE
+-            AC_LANG_CPLUSPLUS
+-            AC_TRY_COMPILE([#include <math.h>],
+-                 [int test = __inline_isnand(0.0);],
+-                casc_cv_cxx_have_inline_isnan=yes,
+-                casc_cv_cxx_have_inline_isnan=no)
+-              AC_LANG_RESTORE
+-
+-            AC_MSG_RESULT($casc_cv_cxx_have_inline_isnan)
+-            if test "$casc_cv_cxx_have_inline_isnan" = yes; then
+-               AC_DEFINE([HAVE_INLINE_ISNAND],[1],[HAVE_INLINE_ISNAND])
+-            else
+-               AC_DEFINE([LACKS_INLINE_ISNAND],[1],[LACKS_INLINE_ISNAND])
+-           fi
+-	fi
+-      fi
+-   fi
+-])
+-
+-
+-dnl
+-dnl Check whether the GNU C++ compiler needs float NAN templates
+-dnl
+-dnl Variable:	casc_cv_cxx_have_isnan_template = (yes|no)
+-dnl Defines:	(HAVE|LACKS)_ISNAN_TEMPLATE
+-dnl
+-
+-AC_DEFUN([CASC_CXX_ISNAN_TEMPLATE], [
+-   AC_REQUIRE([AC_PROG_CXX])
+-   AC_MSG_CHECKING(whether ${CXX} needs isnan templates)
+-
+-   AC_CACHE_VAL(casc_cv_cxx_have_isnan_template, [
+-      AC_LANG_SAVE
+-      AC_LANG_CPLUSPLUS
+-      AC_TRY_COMPILE([
+-
+-#include <complex>
+-
+-template int __gnu_cxx::isnan<float>(float);
+-template int __gnu_cxx::__capture_isnan<float>(float);
+-         ], [/* empty */],
+-         casc_cv_cxx_have_isnan_template=yes,
+-         casc_cv_cxx_have_isnan_template=no)
+-      AC_LANG_RESTORE
+-   ])
+-   AC_MSG_RESULT($casc_cv_cxx_have_isnan_template)
+-
+-   if test "$casc_cv_cxx_have_isnan_template" = yes; then
+-      AC_DEFINE([HAVE_ISNAN_TEMPLATE],[1],[HAVE_ISNAN_TEMPLATE])
+-   else
+-      AC_DEFINE([LACKS_ISNAN_TEMPLATE],[1],[LACKS_ISNAN_TEMPLATE])
+-   fi
+-])
+-
+-
+-dnl ******************************************************************
+-dnl * CASC_PROG_F77 searches the PATH for an available Fortran 77
+-dnl * compiler. It assigns the name of the compiler to F77.
+-dnl ******************************************************************
+-
+-AC_DEFUN([CASC_PROG_F77],
+-[
+-   if test -z "$F77"; then
+-      AC_CHECK_PROGS(F77, f77 g77 xlf cf77 if77 nf77)
+-      test -z "$F77" && AC_MSG_ERROR([no acceptable f77 found in \$PATH])
+-      FFLAGS="-g -O"
+-      AC_SUBST(FFLAGS)
+-   fi
+-])dnl
+-
+-
+-dnl **********************************************************************
+-dnl * CASC_PROG_FPP searches the PATH for a preprocessor for Fortran files
+-dnl * with preprocessor directives
+-dnl **********************************************************************
+-
+-AC_DEFUN([CASC_PROG_FPP],
+-[
+-   AC_CHECK_PROGS(FPP, fpp cpp "$CC -E" "cc -E" "gcc -E")
+-   test -z "$FPP" && AC_MSG_ERROR([no acceptable fpp found in \$PATH])
+-])dnl
+-
+-
+-dnl **********************************************************************
+-dnl * CASC_CHECK_F77_PP checks whether the preprocessor needs to
+-dnl * be called before calling the compiler for Fortran files with
+-dnl * preprocessor directives.  If the preprocessor is necessary,
+-dnl * F77NEEDSPP is set to "yes", otherwise it is set to "no"
+-dnl **********************************************************************
+-
+-AC_DEFUN([CASC_CHECK_F77_PP],
+-[
+-   AC_REQUIRE([CASC_PROG_F77])
+-
+-   rm -f testpp.o
+-
+-   AC_MSG_CHECKING(whether $FPP needs to be called before $F77)
+-
+-   # This is a dumb little fortran program with C preprocessor calls
+-   # It will compile only if $F77 has a built-in preprocessor
+-
+-   cat > testpp.F << EOF
+-#define FOO 3
+-	program testpp
+-	integer num
+-        integer sum
+-        num = FOO
+-#ifdef FOO
+-        sum = num + num
+-#else
+-        sum = num + num + num
+-#endif
+-        end 
+-EOF
+-
+-   # Compile the program and set $F77NEEDSPP appropriately
+-   $F77 -DBAR -c testpp.F  > /dev/null 2>&1
+-   if test -f testpp.o; then 
+-      F77NEEDSPP=no 
+-   else 
+-      F77NEEDSPP=yes 
+-   fi
+-
+-   AC_MSG_RESULT($F77NEEDSPP)
+-   rm -f testpp.o testpp.F
+-
+-   AC_SUBST(F77NEEDSPP)
+-])dnl
+-
+-
+-
+-dnl **********************************************************************
+-dnl * CASC_CHECK_LIB_FORTRAN(LIBRARY, [, ACTION-IF-FOUND [,
+-dnl *                        ACTION-IF-NOT-FOUND [, OTHER-LIBRARIEs]]])
+-dnl * 
+-dnl * Checks whether LIBRARY can be used to link a sample C function
+-dnl * that contains a call to a sample Fortran 77 function. If linking
+-dnl * is successful, ACTION-IF-FOUND is executed, otherwise
+-dnl * ACTION-IF-NOT-FOUND is executed.  The default for ACTION-IF-FOUND is
+-dnl * to add -lLIBRARY to $LIBS.  The default for ACTION-IF-NOT-FOUND is
+-dnl * nothing.  OTHER-LIBRARIES can include the full names of libraries in
+-dnl * the current directory, -l flags specifying other libraries, -L tags
+-dnl * specifying the location of libraries (This macro may not check the
+-dnl * same lib directories as would be checked by the linker by default on
+-dnl * the command line.), and/or the names of object files, all separated
+-dnl * by a space, whatever might be necessary for successful linkage.
+-dnl **********************************************************************
+-
+-AC_DEFUN([CASC_CHECK_LIB_FORTRAN],
+-[
+-   # This macro needs a f77 compiler and knowledge of the name-mangling scheme
+-   AC_REQUIRE([CASC_PROG_F77])
+-   AC_REQUIRE([PAC_GET_FORTNAMES])
+-
+-   if test -z "$FORTRANNAMES" ; then
+-      NAMESTYLE="FORTRANNOUNDERSCORE"
+-   else
+-      NAMESTYLE=$FORTRANNAMES
+-   fi
+-
+-   # This is a little subroutine to be called later by a C main function
+-   cat > testflib_.f << EOF
+-        subroutine testflib(i)
+-        integer i
+-        print *, "This tests which libraries work"
+-        return
+-        end
+-EOF
+-
+-   $F77 -c testflib_.f > /dev/null 2>&1
+-
+-   # Mangle testflib's name appropriatiately
+-   case $NAMESTYLE in
+-      FORTRANDOUBLEUNDERSCORE)
+-         THIS_FUNCTION=testflib_;;
+-
+-      FORTRANUNDERSCORE)
+-         THIS_FUNCTION=testflib_;;
+-
+-      FORTRANCAPS)
+-         THIS_FUNCTION=TESTFLIB;;
+-
+-      FORTRANNOUNDERSCORE)
+-         THIS_FUNCTION=testflib;;
+-
+-   esac
+-
+-   # Checks if the LIBRARY from the argument list can be used to link
+-   # a C test program with testflib
+-   AC_CHECK_LIB($1, $THIS_FUNCTION, $2, $3, testflib_.o $4)
+-
+-   rm -f testflib_.o testflib_.f
+-
+-])dnl
+-
+-
+-dnl ********************************************************************* 
+-dnl * CASC_SET_F77LIBS sets the necessary library flags for linking C and
+-dnl * Fortran 77 codes with the C linker.  The necessary -l flags are put 
+-dnl * into the variable F77LIBS, and the necessary -L flags are put into  
+-dnl * the variable F77LIBDIRS.  This macro first checks to see if the
+-dnl * shell variable $F77LIBS is already set.  If so, the preset value is
+-dnl * used.  Otherwise this macro only works for known architectures.
+-dnl *********************************************************************
+-
+-AC_DEFUN([CASC_SET_F77LIBS],
+-[
+-   AC_REQUIRE([CASC_GUESS_ARCH])
+-   AC_REQUIRE([CASC_PROG_F77])
+-
+-   if test -z "$casc_f77_libs"; then
+-      case $ARCH in 
+-         sun4 | solaris)
+-            case $F77 in
+-               *g77)
+-                   CASC_CHECK_LIB_FORTRAN(f2c,
+-                                          F77LIBDIRS="-L/home/casc/g77/lib"
+-                                          F77LIBS="-lf2c"
+-                                          , ,
+-                                          -L/home/casc/g77/lib -lf2c);;
+-               *)
+-                  CASC_CHECK_LIB_FORTRAN(sunmath,
+-                                   F77LIBDIRS="-L/opt/SUNWspro/SC5.0/lib"
+-                                   F77LIBS="-lF77 -lsunmath"
+-                                   , ,
+-                                   -L/opt/SUNWspro/SC5.0/lib -lF77 -lsunmath);;
+-               esac
+-         ;;
+-         alpha)
+-            CASC_CHECK_LIB_FORTRAN(for, F77LIBS="-lfor", , );;
+-
+-         rs6000)
+-            CASC_CHECK_LIB_FORTRAN(xlf90, F77LIBS="-lxlf90", , );;
+-
+-         IRIX64 | iris4d)
+-            CASC_CHECK_LIB_FORTRAN(I77, 
+-                                  F77LIBS="-lF77 -lU77 -lI77 -lisam", ,
+-                                  -lF77 -lU77 -lI77 -lisam);;
+-
+-         *)
+-            AC_MSG_WARN(
+-[unable to set F77LIBFLAGS.  They must be set as a shell variable or
+- with a command-line option])
+-         ;;             
+-
+-      esac
+-
+-   else
+-      if test -n "$casc_f77_lib_dirs"; then
+-         for casc_lib_dir in $casc_f77_lib_dirs; do
+-            F77LIBDIRS="-L$casc_lib_dir $F77LIBDIRS"       
+-         done
+-      fi
+-
+-      for casc_lib in $casc_f77_libs; do
+-         F77LIBS="$F77LIBS -l$casc_lib"
+-      done
+-   fi
+-
+-   F77LIBFLAGS="$F77LIBDIRS $F77LIBS"
+-])dnl
+-
+-
+-dnl *********************************************************************
+-dnl * CASC_FIND_F77LIBS may be a replacement for CASC_SET_F77LIBS.  This
+-dnl * macro automatically finds the flags necessary to located the 
+-dnl * libraries needed for a Fortran/C interface.  It is more robust than
+-dnl * CASC_SET_F77LIBS, because it is not based on the architecture name.
+-dnl * The test is performed directly on the Fortran compiler using the
+-dnl * macro LF_FLIBS. When CASC_FIND_F77LIBS is included in configure.in,
+-dnl * it will set the variable F77LIBFLAGS to be a list of flags, which 
+-dnl * will probably be a set of -L, -R, -l, and -u flags, as well as
+-dnl * perhaps the absolute paths of some libraries.  The drawback to this
+-dnl * macro is that it will usually insert some flags (mostly -L flags) 
+-dnl * that aren't needed, but hopefully they will be harmless.  I haven't
+-dnl * seen the extra flags that are included by this macro break anything
+-dnl * yet.  Hopefully more testing on more machines will give confidence
+-dnl * that this really works and will be able to set up the Fortran links
+-dnl * on an unknown system.  If this macro sets up nothing, then
+-dnl * CASC_SET_F77LIBS is called as a backup
+-dnl *********************************************************************
+-
+-AC_DEFUN([CASC_FIND_F77LIBS],
+-[
+-   AC_CACHE_CHECK([for Fortran libraries], casc_cv_f77flags,
+-   [
+-      if test -z "$F77LIBFLAGS"; then
+-         dnl * LF_FLIBS creates variable $flibs_result containing a list of 
+-         dnl * flags related to the Fortran compiler
+-         LF_FLIBS
+-         for casc_flag in $flibs_result; do
+-
+-            dnl * Here we sort the flags in $flibs_result
+-            case $casc_flag in
+-            [-l* | /*)]
+-               casc_f77_libs="$casc_f77_libs $casc_flag"
+-            ;;
+-            [-L*)]
+-               casc_f77_dirs="$casc_flag $casc_f77_dirs"
+-            ;;
+-            [*)]
+-               casc_other_flags="$casc_other_flags $casc_flag"
+-            ;;
+-            esac
+-         done
+-
+-         F77LIBFLAGS="$casc_other_flags $casc_f77_dirs"
+-
+-
+-         if test -n "`echo $F77LIBFLAGS | grep '\-R/'`"; then
+-            F77LIBFLAGS=`echo $F77LIBFLAGS | sed 's/-R\//-R \//'`
+-         fi
+-	 
+-	 dnl Strip off quotes.  This was needed for mpi wrappers.
+-         dnl This is potentially bad.
+-         F77LIBFLAGS=`echo $F77LIBFLAGS | sed 's/\"//'`
+-         casc_f77_libs=`echo $casc_f77_libs | sed 's/\"//'`
+-
+-         dnl * each -l flag is checked using CASC_CHECK_LIB_FORTRAN, until
+-         dnl * successful linking of a test program is accomplished, at which
+-         dnl * time the loop is broken.  If successful linking does not occur,
+-         dnl * CASC_CHECK_LIB will check for the library's existence and add
+-         dnl * to F77LIBFLAGS if it exists.  All libraries listed by explicit
+-         dnl * path are added to F77LIBFLAGS
+-         for casc_flag in $casc_f77_libs; do
+-
+-            case $casc_flag in
+-
+-            [/*)]
+-               if test -f "$casc_flag"; then
+-                  F77LIBFLAGS="$F77LIBFLAGS $casc_flag"
+-               fi
+-            ;;
+-
+-            [-l*)]
+-
+-               casc_lib_name=`echo "$casc_flag" | sed 's/-l//g'`
+-               CASC_CHECK_LIB_FORTRAN($casc_lib_name,
+-                  F77LIBFLAGS="$F77LIBFLAGS $casc_flag"
+-                  casc_result=yes,
+-                  F77LIBFLAGS="$F77LIBFLAGS $casc_flag",
+-                  $F77LIBFLAGS)
+- 
+-            if test "$casc_result" = yes; then 
+-               casc_result=
+-               break
+-            fi
+-            ;;
+-         esac
+-         done
+- 
+-         # if this macro didn't work call CASC_SET_F77LIBS
+-         if test -z "$F77LIBFLAGS"; then
+-            CASC_SET_F77LIBS
+-
+-         fi        
+-
+-         dnl if PGI remove the include of the gcc libs, 
+-         dnl causes problem with Intel compilers
+-         if test -n "`echo $F77 | grep pgf77`"; then
+-            F77LIBFLAGS=`echo $F77LIBFLAGS | sed 's/-lgcc//g'`
+-         fi
+-
+-         dnl * On IBM don't use the links to poe library directories coming
+-         dnl * out of the fortran compiler
+-         if test -n "`echo $F77LIBFLAGS | grep xlf`"; then
+-             F77LIBFLAGS=`echo $F77LIBFLAGS | sed 's/-L\/lib\/threads//g'`
+-             F77LIBFLAGS=`echo $F77LIBFLAGS | sed 's/-L\/usr\/lpp\/ppe.poe\/lib\/threads//g'`
+-             F77LIBFLAGS=`echo $F77LIBFLAGS | sed 's/-L\/usr\/lpp\/ppe.poe\/lib\/ip//g'`
+-             F77LIBFLAGS=`echo $F77LIBFLAGS | sed 's/-L\/usr\/lpp\/ppe.poe\/lib//g'`
+-             F77LIBFLAGS=`echo $F77LIBFLAGS | sed 's/-L\/usr\/lpp\/ppe.poe\/lib//g'`
+-             F77LIBFLAGS=`echo $F77LIBFLAGS | sed 's/-lmpi_r//g'`
+-             F77LIBFLAGS=`echo $F77LIBFLAGS | sed 's/-lvtd_r//g'`
+-         fi
+-      fi
+-
+-      casc_cv_f77flags=$F77LIBFLAGS
+-   ])
+-
+-   dnl in case we are getting library flags from cached values
+-   F77LIBFLAGS=$casc_cv_f77flags
+-
+-   AC_SUBST(F77LIBFLAGS)
+-
+-])dnl
+-
+-
+-dnl * The following are macros copied from outside sources
+-
+-
+-dnl ********************************************************************
+-dnl * CASC_GET_FORTNAMES is a wrapper for the macro PAC_GET_FORTNAMES.
+-dnl * The two can be used interchangeably.
+-dnl *
+-dnl * PAC_GET_FORTNAMES is distributed with mpich.  It checks what format
+-dnl * is used to call Fortran subroutines in C functions.  This macro
+-dnl * defines the shell variable $FORTRANNAMES and creates -D  
+-dnl * preprocessor flags that tell what the Fortran name-mangling is.  The
+-dnl * preprocessor macros defined are FORTRAN_DOUBLE_UNDERSCORE,
+-dnl * FORTRAN_UNDERSCORE, FORTRAN_CAPS, and FORTRAN_NO_UNDERSCORE.  The
+-dnl * possible values for FORTRANNAMES are the same words without
+-dnl * underscores.
+-dnl * 
+-dnl * Changes:
+-dnl *    AC_DEFINE lines to define preprocessor macros that are assigned
+-dnl *    to DEFS added by Noah Elliott May 18, 1998
+-dnl ********************************************************************
+-
+-AC_DEFUN([CASC_GET_FORTNAMES],
+-[
+-   PAC_GET_FORTNAMES
+-])dnl
+-
+-AC_DEFUN([PAC_GET_FORTNAMES],[
+-   # Check for strange behavior of Fortran.  For example, some FreeBSD
+-   # systems use f2c to implement f77, and the version of f2c that they
+-   # use generates TWO (!!!) trailing underscores 
+-   # Currently, WDEF is not used but could be...
+-   #
+-   # Eventually, we want to be able to override the choices here and
+-   # force a particular form.  This is particularly useful in systems
+-   # where a Fortran compiler option is used to force a particular
+-   # external name format (rs6000 xlf, for example).
+-   cat > confftest.f <<EOF
+-       subroutine mpir_init_fop( a )
+-       integer a
+-       a = 1
+-       return
+-       end
+-EOF
+-   $F77 $FFLAGS -c confftest.f > /dev/null 2>&1
+-   if test ! -s confftest.o ; then
+-        AC_MSG_ERROR([Unable to compile a Fortran test program])
+-        NOF77=1
+-        HAS_FORTRAN=0
+-   elif test -z "$FORTRANNAMES" ; then
+-    # We have to be careful here, since the name may occur in several  
+-    # forms.  We try to handle this by testing for several forms
+-    # directly.
+-    if test $arch_CRAY ; then
+-     # Cray doesn't accept -a ...
+-     nameform1=`strings confftest.o | grep mpir_init_fop_  | head -1`
+-     nameform2=`strings confftest.o | grep MPIR_INIT_FOP   | head -1`
+-     nameform3=`strings confftest.o | grep mpir_init_fop   | head -1`
+-     nameform4=`strings confftest.o | grep mpir_init_fop__ | head -1`
+-    else
+-     nameform1=`strings -a confftest.o | grep mpir_init_fop_  | head -1`
+-     nameform2=`strings -a confftest.o | grep MPIR_INIT_FOP   | head -1`
+-     nameform3=`strings -a confftest.o | grep mpir_init_fop   | head -1`
+-     nameform4=`strings -a confftest.o | grep mpir_init_fop__ | head -1`
+-    fi
+-    /bin/rm -f confftest.f confftest.o
+-    AC_MSG_CHECKING(Fortran external names)
+-    if test -n "$nameform4" ; then
+-        AC_DEFINE([FORTRAN_DOUBLE_UNDERSCORE],[1],[FORTRAN_DOUBLE_UNDERSCORE])
+-        AC_MSG_RESULT(lowercase with one or two trailing underscores)
+-        FORTRANNAMES="FORTRANDOUBLEUNDERSCORE"
+-    elif test -n "$nameform1" ; then
+-        # We don't set this in CFLAGS; it is a default case
+-        AC_DEFINE([FORTRAN_UNDERSCORE],[1],[FORTRAN_UNDERSCORE])
+-        AC_MSG_RESULT(lowercase with a trailing underscore)
+-        FORTRANNAMES="FORTRANUNDERSCORE"
+-    elif test -n "$nameform2" ; then
+-        AC_DEFINE([FORTRAN_CAPS],[1],[FORTRAN_CAPS])
+-        AC_MSG_RESULT(uppercase)
+-        FORTRANNAMES="FORTRANCAPS"
+-    elif test -n "$nameform3" ; then
+-        AC_DEFINE([FORTRAN_NO_UNDERSCORE],[1],[FORTRAN_NO_UNDERSCORE])
+-        AC_MSG_RESULT(lowercase)
+-        FORTRANNAMES="FORTRANNOUNDERSCORE"
+-    else
+-        AC_MSG_RESULT(unknown)
+-#       print_error "If you have problems linking, try using the -nof77 option"
+-#        print_error "to configure and rebuild MPICH."
+-        NOF77=1
+-        HAS_FORTRAN=0
+-    fi
+-    fi
+-    rm -f confftest.f confftest.o
+-    if test -n "$FORTRANNAMES" ; then
+-        WDEF="-D$FORTRANNAMES"
+-    fi  
+-    ])dnl
+-
+-
+-dnl ****************************************************************
+-dnl * LF_FLIBS was copied from E. Gkioulekas' autotools package for use in
+-dnl * CASC_FIND_F77LIBS.  It's probably not good to be used all by itself.
+-dnl * It uses the output the Fortran compiler gives when given a -v flag
+-dnl * to produce a list of flags that the Fortran compiler uses.  From
+-dnl * this list CASC_FIND_F77LIBS sets up the Fortran/C interface flags.
+-dnl *
+-dnl * Changes:
+-dnl * AC_SUBST(FLIBS) suppressed by N. Elliott 7-10-98
+-dnl *****************************************************************
+-   
+-AC_DEFUN([LF_FLIBS],[
+-  dnl AC_MSG_CHECKING(for Fortran libraries)
+-  dnl
+-  dnl Write a minimal program and compile it with -v. I don't know
+-  dnl what to do if your compiler doesn't have -v
+-  dnl
+-  dnl changequote(, )dnl
+-  echo "      END" > conftest.f
+-  foutput=`${F77-f77} -v -o conftest conftest.f 2>&1`
+-  dnl
+-  dnl The easiest thing to do for xlf output is to replace all the commas
+-  dnl with spaces.  Try to only do that if the output is really from xlf,
+-  dnl since doing that causes problems on other systems.
+-  dnl
+-  xlf_p=`echo $foutput | grep xlfentry`
+-  if test -n "$xlf_p"; then
+-    foutput=`echo $foutput | sed 's/,/ /g'`
+-  fi
+-  ifc_p=`echo $foutput | grep ifc`
+-  ifort_p=`echo $foutput | grep ifort`
+-  if test -n "$ifort_p" -o -n "$ifc_p"; then
+-    foutput=`echo $foutput | sed 's/\\\/ \-u\/ \___get\/ /g'`
+-  fi
+-  dnl
+-  ld_run_path=`echo $foutput | \
+-
+-    [sed -n -e 's/^.*LD_RUN_PATH *= *\([^ ]*\).*/\1/p'`]
+-  dnl
+-  dnl We are only supposed to find this on Solaris systems...
+-  dnl Uh, the run path should be absolute, shouldn't it?
+-  dnl
+-  case "$ld_run_path" in
+-
+-    /*)
+-
+-      if test "$ac_cv_prog_gcc" = yes; then
+-
+-        ld_run_path="-Xlinker -R -Xlinker $ld_run_path"
+-      else
+-        ld_run_path="-R $ld_run_path"
+-      fi
+-    ;;
+-
+-    *)
+-      ld_run_path=
+-    ;;
+-  esac
+-
+-  dnl
+-  flibs=
+-  lflags=
+-  dnl
+-  dnl If want_arg is set, we know we want the arg to be added to the list,
+-  dnl so we don't have to examine it.
+-  dnl
+-  want_arg=
+-  dnl
+-  for arg in $foutput; do
+-    old_want_arg=$want_arg
+-    want_arg=
+-  dnl
+-  dnl None of the options that take arguments expect the argument to
+-  dnl start with a -, so pretend we didn't see anything special.
+-  dnl
+-    if test -n "$old_want_arg"; then
+-      case "$arg" in
+-        -*)
+-        old_want_arg=
+-        ;;
+-      esac
+-    fi
+-
+-    case "$old_want_arg" in
+-      '')
+-        case $arg in
+-        /*.a)
+-          exists=false
+-          for f in $lflags; do
+-            if test x$arg = x$f; then
+-              exists=true
+-            fi
+-          done
+-          if $exists; then
+-            arg=
+-          else
+-            lflags="$lflags $arg"
+-          fi
+-        ;;
+-        -bI:*)
+-          exists=false
+-          for f in $lflags; do
+-            if test x$arg = x$f; then
+-              exists=true
+-            fi
+-          done
+-          if $exists; then
+-            arg=
+-          else
+-            if test "$ac_cv_prog_gcc" = yes; then
+-              lflags="$lflags -Xlinker $arg"
+-            else
+-              lflags="$lflags $arg"
+-            fi
+-          fi
+-        ;;
+-        -lang* | -lcrt0.o | -lc )
+-          arg=
+-        ;;
+-        [-[lLR])]
+-          want_arg=$arg
+-          arg=
+-        ;;
+-        [-[lLR]*)]
+-          exists=false
+-          for f in $lflags; do
+-            if test x$arg = x$f; then
+-              exists=true
+-            fi
+-          done
+-          if $exists; then
+-            arg=
+-          else
+-            case "$arg" in
+-              -lkernel32)
+-                case "$canonical_host_type" in
+-                  *-*-cygwin32)
+-                  ;;
+-                  *)
+-                    lflags="$lflags $arg"
+-                  ;;
+-                esac
+-              ;;
+-              -lm)
+-              ;;
+-              *)
+-                lflags="$lflags $arg"
+-              ;;
+-            esac
+-          fi
+-        ;;
+-        -u)
+-          want_arg=$arg
+-          arg=
+-        ;;
+-        -Y)
+-          want_arg=$arg
+-          arg=
+-        ;;
+-        *)
+-          arg=
+-        ;;
+-        esac
+-      ;;
+-      [-[lLR])]
+-        arg="$old_want_arg $arg"
+-      ;;
+-      -u)
+-        arg="-u $arg"
+-      ;;
+-      -Y)
+-
+-  dnl
+-  dnl Should probably try to ensure unique directory options here too.
+-  dnl This probably only applies to Solaris systems, and then will only
+-  dnl work with gcc...
+-  dnl
+-        arg=`echo $arg | sed -e 's%^P,%%'`
+-        SAVE_IFS=$IFS
+-        IFS=:
+-        list=
+-        for elt in $arg; do
+-        list="$list -L$elt"
+-        done
+-        IFS=$SAVE_IFS
+-        arg="$list"
+-      ;;
+-    esac
+-  dnl
+-
+-    if test -n "$arg"; then
+-      flibs="$flibs $arg"
+-    fi
+-  done
+-  if test -n "$ld_run_path"; then
+-    flibs_result="$ld_run_path $flibs"
+-  else
+-    flibs_result="$flibs"
+-  fi
+-  dnl changequote([, ])dnl
+-  rm -f conftest.f conftest.o conftest
+-  dnl
+-  dnl Phew! Done! Now, output the result
+-  dnl
+-
+-  FLIBS="$flibs_result"
+-  dnl AC_MSG_RESULT([$FLIBS])
+-dnl  AC_SUBST(FLIBS)
+-])dnl
+-
+-
+-dnl Define a macro for supporting HDF5
+-
+-AC_DEFUN([CASC_SUPPORT_HDF5],[
+-
+-# Begin CASC_SUPPORT_HDF5
+-# Defines hdf5_PREFIX hdf5_INCLUDES and hdf5_LIBS if with-hdf5 is specified.
+-AC_ARG_WITH(hdf5,
+-[ --with-hdf5[=PATH]  Use HDF5 and optionally specify where HDF5 is installed.],
+-, with_hdf5=no)
+-
+-case "$with_hdf5" in
+-  no)
+-    AC_MSG_NOTICE([configuring without HDF5 support])
+-    : Do nothing
+-  ;;
+-  yes)
+-    # HDF5 install path was not specified.
+-    # Look in a couple of standard locations to probe if 
+-    # HDF5 header files are there.
+-    AC_MSG_CHECKING([for HDF5 installation])
+-    for dir in /usr /usr/local; do
+-      if test -f ${dir}/include/hdf5.h; then
+-        hdf5_PREFIX=${dir}
+-        break
+-      fi
+-    done
+-    AC_MSG_RESULT([$hdf5_PREFIX])
+-  ;;
+-  *)
+-    # HDF5 install path was specified.
+-    AC_MSG_CHECKING([for HDF5 installation])
+-
+-    if test -f ${with_hdf5}/include/hdf5.h; then
+-        hdf5_PREFIX=$with_hdf5
+-        hdf5_INCLUDES="-I${hdf5_PREFIX}/include"
+-        hdf5_LIBS="-L${hdf5_PREFIX}/lib -lhdf5"
+-        AC_MSG_RESULT([$hdf5_PREFIX])
+-    else
+-        AC_MSG_RESULT([$hdf5_PREFIX])
+-        AC_MSG_ERROR([HDF5 not found in $with_hdf5])
+-    fi
+-  ;;
+-esac
+-
+-
+-
+-# Test compiling an HDF application
+-
+-# NOTE that AC_SEARCH_LIBS didn't work completely so
+-# use a more complicated example program to see
+-# if that will catch when HDF is not working.
+-if test "${hdf5_PREFIX+set}" = set; then
+-
+-   AC_REQUIRE([AC_PROG_CXX])
+-   AC_MSG_CHECKING(whether HDF5 link works)
+-   AC_LANG_PUSH(C++)
+-   CASC_PUSH_COMPILER_STATE
+-   # NOTE lib z and m were from BTNG macro.
+-   LIBS="${LIBS} ${hdf5_LIBS} $libz_LIBS -lm "
+-   CXXFLAGS="${CXXFLAGS} ${hdf5_INCLUDES}"
+-   AC_LINK_IFELSE([
+-      #include "hdf5.h"
+-      #define FILE "file.h5"
+-
+-      int main() {
+-
+-         hid_t       file_id;   /* file identifier */
+-         herr_t      status;
+-
+-         /* Create a new file using default properties. */
+-         file_id = H5Fcreate(FILE, H5F_ACC_TRUNC, H5P_DEFAULT, H5P_DEFAULT);
+-
+-         /* Terminate access to the file. */
+-         status = H5Fclose(file_id); 
+-     }
+-      ], 
+-      casc_hdf5_compile=yes,
+-      casc_hdf5_compile=no)
+-   CASC_POP_COMPILER_STATE
+-   AC_LANG_POP
+-   AC_MSG_RESULT($casc_hdf5_compile)
+-
+-   if test "$casc_hdf5_compile" = no; then
+-      AC_MSG_ERROR([HDF5 compile/link test failed])
+-   fi
+-fi
+-
+-# END CASC_SUPPORT_HDF5
+-
+-])dnl End definition of CASC_SUPPORT_HDF5
+-
+-
+-
+-
+-dnl *********************************************************************
+-dnl * CASC_ADD_LIB(LIBRARY, FUNCTION, DIRECTORY-LIST[, PREFIX[, 
+-dnl *              ACTION-IF-FOUND[, ACTION-IF-NOT-FOUND]]])
+-dnl * checks first if LIBRARY is available on the linking search path and
+-dnl * if FUNCTION can be linked with LIBRARY.  If so, -lLIBRARY is added
+-dnl * to the variable [PREFIX]LIBS. (i.e., if prefix is LD, -llibrary is
+-dnl * added to LDLIBS.)  If not, checks whitespace-separated
+-dnl * DIRECTORY-LIST to see if LIBRARY exists in a specified directory and
+-dnl * can be linked with FUNCTION.  If so, the first directory where
+-dnl * linking is successful is added to the front of [PREFIX]LIBDIRS, and
+-dnl * -lLIBRARY is added to the end of [PREFIX]LIBS.  If no prefix is
+-dnl * specified, the directories and libraries are added to LIBS and
+-dnl * LIBDIRS, respectively.  If the order of -l flags on the linking
+-dnl * lines is important, CASC_ADD_LIB should be called for each library
+-dnl * in the order they should appear on linking lines.  Mere existence of
+-dnl * LIBRARY in the search path or in a specified directory can usually
+-dnl * be determined by entering 'main' for FUNCTION.  Optional argument
+-dnl * ACTION-IF-FOUND contains additional instructions to execute as soon
+-dnl * as LIBRARY is found in any directory.  Optional argument
+-dnl * ACTION-IF-NOT-FOUND contains instructions to execute if LIBRARY is
+-dnl * not found anywhere.
+-dnl **********************************************************************
+-
+-AC_DEFUN([CASC_ADD_LIB],
+-[
+-   # define some macros to hopefully improve readability
+-   define([m_THESE_LIBS],[$4LIBS])
+-   define([m_THESE_LIBDIRS],[$4LIBDIRS])
+-
+-   # check for the library from first argument.  If linking is successful
+-   # the first time, the job is done, otherwise loop through DIRECTORY-LIST
+-   AC_CHECK_LIB($1, $2, m_THESE_LIBS="$m_THESE_LIBS -l$1"
+-                          casc_lib_found=yes 
+-                          ifelse([$5], , , [$5]),
+-
+-      dnl * If library not found
+-      for casc_lib_dir in $3; do
+-
+-         AC_CHECK_LIB($1, $2, 
+-            m_THESE_LIBDIRS="-L$casc_lib_dir $m_THESE_LIBDIRS"
+-            m_THESE_LIBS="$m_THESE_LIBS -l$1"
+-            casc_lib_found=yes
+-            ifelse([$5], , , [$5])
+-            break
+-            , ,
+-            -L$casc_lib_dir $m_THESE_LIBDIRS $m_THESE_LIBS -l$1, no)
+-      done
+-      , $m_THESE_LIBDIRS $m_THESE_LIBS, no)  dnl * last two arguments for
+-                                             dnl * first check
+-
+-   # ACTION-IF-NOT_FOUND for when the library is found nowhere
+-   ifelse([$6], , ,
+-      if test "$casc_lib_found" != "yes"; then
+-         [$6]
+-      fi
+-   )
+-
+-   unset casc_lib_found
+-
+-   undefine([m_THESE_LIBS])
+-   undefine([m_THESE_LIBDIRS])
+-
+-])dnl
+-
+-
+-dnl ***********************************************************************
+-dnl CASC_CHECK_LIB(LIBRARY, FUNCTION [, ACTION-IF-FOUND [, ACTION-IF-NOT-FOUND
+-dnl              [, OTHER-LIBRARIES [, CACHE-CHOICE]]]])
+-dnl * This is the same as AC_CHECK_LIB, except when it tests for LIBRARY
+-dnl * it puts the flag -lLIBRARY after $LIBS and OTHER-LIBRARIES.  The Sun
+-dnl * cc compiler does not search for LIBRARY in any directories specified
+-dnl * by -L in OTHER-LIBRARIES when -lLIBRARY is listed first.  The
+-dnl * functionality of this macro is the same as that of AC_CHECK_LIB in
+-dnl * the Autoconf documentation.  
+-dnl * CACHE-CHOICE [$6]added by N. Elliott, 6-24-98.  If CACHE-CHOICE is 'no',
+-dnl * the results of this test are not cached.  CACHE-CHOICE should be
+-dnl * used only when this test is called recursively.
+-dnl *
+-dnl * CASC_CHECK_LIB_OLD is an older version of this macro which doesn't
+-dnl * seem to work with newer versions of autoconf
+-dnl **********************************************************************
+-
+-AC_DEFUN([CASC_CHECK_LIB],
+-[
+-dnl AC_MSG_CHECKING([for $2 in -l$1])
+-dnl Use a cache variable name containing both the library and function name,
+-dnl because the test really is for library $1 defining function $2, not
+-dnl just for library $1.  Separate tests with the same $1 and different $2s
+-dnl may have different results.
+-ac_lib_var=`echo $1['_']$2 | sed 'y%./+-%__p_%'`
+-AC_CACHE_VAL(ac_cv_lib_$ac_lib_var,
+-[ac_save_LIBS="$LIBS"
+-LIBS="$5 $LIBS -l$1"
+-AC_TRY_LINK(dnl
+-ifelse(AC_LANG, [FORTRAN77], ,
+-ifelse([$2], [main], , dnl Avoid conflicting decl of main.
+-[/* Override any gcc2 internal prototype to avoid an error.  */
+-]ifelse(AC_LANG, CPLUSPLUS, [#ifdef __cplusplus
+-extern "C"
+-#endif
+-])dnl
+-[/* We use char because int might match the return type of a gcc2
+-    builtin and then its argument prototype would still apply.  */
+-char $2();
+-])),
+-            [$2()],
+-            eval "ac_cv_lib_$ac_lib_var=yes",
+-            eval "ac_cv_lib_$ac_lib_var=no")   
+-LIBS="$ac_save_LIBS"
+-])dnl 
+-if eval "test \"`echo '$ac_cv_lib_'$ac_lib_var`\" = yes"; then
+-  :
+-  dnl AC_MSG_RESULT(yes)
+-  ifelse([$3], ,
+-[changequote(, )dnl
+-  ac_tr_lib=HAVE_LIB`echo $1 | sed -e 's/[^a-zA-Z0-9_]/_/g' \
+-    -e 'y/abcdefghijklmnopqrstuvwxyz/ABCDEFGHIJKLMNOPQRSTUVWXYZ/'`
+-changequote([, ])dnl
+-  AC_DEFINE_UNQUOTED($ac_tr_lib)
+-  LIBS="-l$1 $LIBS" 
+-], [$3])
+-else
+- : 
+-  dnl AC_MSG_RESULT(no)
+-ifelse([$4], , , [
+-ifelse([$6], no, unset ac_cv_lib_$ac_lib_var)  
+-$4
+-])dnl
+-fi
+-ifelse([$6], no, unset ac_cv_lib_$ac_lib_var)
+-])dnl
+-
+-
+-
+-AC_DEFUN([CASC_CHECK_LIB_OLD],
+-[AC_MSG_CHECKING([for -l$1])
+-dnl Use a cache variable name containing both the library and function name,
+-dnl because the test really is for library $1 defining function $2, not
+-dnl just for library $1.  Separate tests with the same $1 and different $2s
+-dnl may have different results.
+-ac_lib_var=`echo $1['_']$2 | tr './+\055' '__p_'`
+-AC_CACHE_VAL(ac_cv_lib_$ac_lib_var,
+-[ac_save_LIBS="$LIBS"
+-LIBS="$5 $LIBS -l$1"
+-AC_TRY_LINK(dnl
+-ifelse([$2], [main], , dnl Avoid conflicting decl of main.
+-[/* Override any gcc2 internal prototype to avoid an error.  */
+-]ifelse(AC_LANG, CPLUSPLUS, [#ifdef __cplusplus 
+-extern "C"
+-#endif
+-])dnl
+-[/* We use char because int might match the return type of a gcc2
+-    builtin and then its argument prototype would still apply.  */
+-char $2();
+-]),
+-            [$2()],
+-            eval "ac_cv_lib_$ac_lib_var=yes",
+-            eval "ac_cv_lib_$ac_lib_var=no")dnl
+-LIBS="$ac_save_LIBS"
+-])dnl
+-if eval "test \"`echo '$ac_cv_lib_'$ac_lib_var`\" = yes"; then
+-  AC_MSG_RESULT(yes)  
+-  ifelse([$3], ,
+-[changequote(, )dnl
+-  ac_tr_lib=HAVE_LIB`echo $1 | tr 'abcdefghijklmnopqrstuvwxyz' 'ABCDEFGHIJKLMNOPQRSTUVWXYZ'`
+-changequote([, ])dnl
+-  AC_DEFINE_UNQUOTED($ac_tr_lib)
+-  LIBS="-l$1 $LIBS"
+-], [
+-ifelse([$6], no, unset ac_cv_lib_$ac_lib_var)
+-$3])
+-else
+-  AC_MSG_RESULT(no) 
+-ifelse([$4], , , [
+-ifelse([$6], no, unset ac_cv_lib_$ac_lib_var)
+-$4
+-])dnl
+-fi
+-ifelse([$6], no, unset ac_cv_lib_$ac_lib_var)
+-])
+-
+-
+-
+-dnl *********************************************************************
+-dnl * CASC_CHECK_HEADER(HEADER-FILE, DIRECTORY-LIST[, ACTION-IF-FOUND[,
+-dnl *                   ACTION-IF-NOT-FOUND]])
+-dnl * This macro is an alternative to AC_CHECK_HEADER.  It does
+-dnl * essentially the same thing, but it allows the user to specify
+-dnl * a directory list if HEADER-FILE can not be found in the current path
+-dnl * for #includes, and it adds to the variable INCLUDES the first
+-dnl * directory in DIRECTORY-LIST from where HEADER-FILE can be included.
+-dnl *********************************************************************
+-
+-AC_DEFUN([CASC_CHECK_HEADER],
+-[
+-   dnl * loop through the directory list.  The first iteration leaves the
+-   dnl * casc_dir variable empty to check if the header can be #included
+-   dnl * without specifying a directory.
+-   for casc_dir in '' $2 ; do
+-      if test -n "$casc_dir"; then
+-         casc_header=$casc_dir/$1
+-      else
+-         casc_header=$1
+-      fi
+-
+-      dnl * Check for the header.  Add the necessary -I flag to INCLUDES
+-      AC_CHECK_HEADER( $casc_header,
+-         if test -n "$casc_dir"; then
+-            INCLUDES="$INCLUDES -I$casc_dir"
+-         fi
+-         casc_header_found=yes
+-         ifelse([$3], , , [$3])
+-         break )
+-
+-   done
+-
+-   dnl * This takes care of the action if not found
+-   ifelse([$4], , ,
+-      if test "$casc_header_found" != "yes"; then
+-         [$4]
+-      fi
+-   )
+-
+-   unset casc_header_found
+-])dnl
+-
+-
+-dnl **********************************************************************
+-dnl * CASC_CREATE_PACKAGE_OPTION(PACKAGE-NAME[, DIR-LIST[, FILE]])
+-dnl * This is a general macro that creates a configure command-line option
+-dnl * called `--with-PACKAGE-NAME-dir' which will allow the user to
+-dnl * specify the location of the installation of an outside software
+-dnl * package, such as PETSc or ISIS++.  After a check to make sure the
+-dnl * given directory is valid (see below for discussion of validity), the
+-dnl * directory's path is stored in the shell variable PACKAGE-NAME_DIR.
+-dnl * For example, to allow the user to specify the location of PETSc,
+-dnl * place `CASC_CREATE_PACKAGE_OPTION(PETSC)' in configure.in.  Then the
+-dnl * user, if configuring on the CASC Sun cluster, would type `configure
+-dnl * --with-PETSC-dir=/home/casc/petsc', and the directory's path would
+-dnl * be stored in PETSC_DIR.  With this macro, the user is also permitted
+-dnl * to set the variable PACKAGE-NAME_DIR in the environment before
+-dnl * running configure, but any choice made on the command line would
+-dnl * override any preset values.  
+-dnl *
+-dnl * This macro takes an optional second argument, DIR-LIST, which is a
+-dnl * whitespace-separated list of directories where the developer thinks
+-dnl * PACKAGE-NAME might be installed.  If DIR-LIST is given, and the user
+-dnl * does not use the `--with' option to give the location of
+-dnl * PACKAGE-NAME (or if the directory given by the user does not exist),
+-dnl * then configure will assign to PACKAGE-NAME_DIR the path of the first
+-dnl * directory in DIR-LIST that is valid.
+-dnl *
+-dnl * Validity:  The optional third argument to this macro is FILE, which
+-dnl * should be either the name of a file in the top directory of the
+-dnl * package in question or the relative path of a file in a subdirectory
+-dnl * of the package.  If the argument FILE is given, then configure will
+-dnl * consider a user specified directory or a directory from DIR-LIST 
+-dnl * valid only if FILE exists in the directory.  If this argument is not
+-dnl * given, then configure will consider a directory valid simply if it
+-dnl * is indeed a directory.  FILE should be a file with a unique name
+-dnl * that can be expected to exist in the same location in any 
+-dnl * installation of the package in question.  If you know of no such
+-dnl * file, do not include a third argument when invoking this macro.
+-dnl * 
+-dnl * This macro also gives the user the command-line option
+-dnl * `--without-PACKAGE-NAME-dir', which, when invoked, will leave the
+-dnl * variable PACKAGE-NAME_DIR empty.  This option should be invoked when
+-dnl * the user wants to exclude a package from the configuration.
+-dnl * 
+-dnl * NOTE:  Since PACKAGE-NAME is used as part of both a command-line
+-dnl * option and a variable name, it MUST consist of only alphanumeric
+-dnl * characters.  PACKAGE-NAME is only a label, so it need not conform to
+-dnl * any existing directory or file name.  I would recommend that it be
+-dnl * all caps, as it becomes part of the name of a variable that is
+-dnl * substituted into the Makefile.
+-dnl **********************************************************************
+-
+-AC_DEFUN([CASC_CREATE_PACKAGE_OPTION],
+-[
+-   AC_MSG_CHECKING([for $1 directory])
+-
+-   dnl * $1 stands for the PACKAGE-NAME.  If [$1]_DIR has been set in the
+-   dnl * environment, give its value to casc_env_[$1]_dir, and clear
+-   dnl * [$1]_DIR.  The environmental value will ultimately be reassigned
+-   dnl * to [$1]_DIR if it is valid and no command-line options are able
+-   dnl * to change [$1]_DIR to a valid directory.  The environmental value
+-   dnl * will also be used even if it is invalid, if the command-line
+-   dnl * options and the DIRECTORY-LIST are both unable to generate a
+-   dnl * valid value.
+-   casc_result=
+-   casc_env_[$1]_dir=$[$1]_DIR
+-   [$1]_DIR=
+-
+-   AC_ARG_WITH($1-dir, 
+-[  --with-$1-dir=DIR    $1 is installed in directory DIR
+-  --without-$1-dir     do not look for $1],
+-
+-               if test "$withval" = "no"; then
+-                  casc_result="configuring without [$1]"
+-                  [$1]_DIR=
+-               fi
+-               , )
+-
+-   dnl * If "--without-$1-dir" was given, then [$1]_DIR is left blank.
+-   dnl * Otherwise there is the following procedure to try to give
+-   dnl * [$1]_DIR a valid value:
+-   dnl *
+-   dnl * if "--with-$1-dir" was given
+-   dnl *    if the argument to "--with-$1-dir" is valid
+-   dnl *       assign the argument to [$1]_DIR
+-   dnl *    endif
+-   dnl * endif
+-   dnl *
+-   dnl * if a value for [$1]_DIR has not yet been found
+-   dnl *    if [$1]_DIR from the environment exists and is valid
+-   dnl *       assign the environmental value to [$1]_DIR
+-   dnl *    endif
+-   dnl * endif
+-   dnl *
+-   dnl * if [$1]_DIR still has no value
+-   dnl *    if the macro was given a DIRECTORY-LIST argument
+-   dnl *       for each directory in the list
+-   dnl *          if the directory is valid
+-   dnl *             assign the directory to [$1]_DIR
+-   dnl *             break loop
+-   dnl *          else
+-   dnl *             continue loop
+-   dnl *          endif
+-   dnl *       end loop
+-   dnl *       if [$1]_DIR still doesn't have a value
+-   dnl *          casc_result="none"
+-   dnl *       else
+-   dnl *          casc_result=$[$1]_DIR
+-   dnl *       endif
+-   dnl *    else
+-   dnl *       casc_result="none"
+-   dnl *    endif
+-   dnl * endif
+-
+-   if test "$with_[$1]_dir" != "no"; then
+-
+-      if test -d "$with_[$1]_dir"; then
+-
+-         ifelse([$3], , ,
+-            if test -f $with_[$1]_dir/[$3]; then)
+-
+-               casc_result="$with_[$1]_dir"
+-               [$1]_DIR="$casc_result"
+-
+-         ifelse([$3], , ,
+-            fi)
+-      fi
+-
+-      if test -z "$casc_result"; then
+-
+-         if test -d "$casc_env_[$1]_dir"; then
+-
+-            ifelse([$3], , ,
+-               if test -f $casc_env_[$1]_dir/[$3]; then)
+-
+-                  casc_result="$casc_env_[$1]_dir"
+-                  [$1]_DIR="$casc_result"
+-
+-            ifelse([$3], , ,
+-               fi)
+-         fi
+-      fi
+-
+-
+-
+-      if test -z "$casc_result"; then
+-         [$1]_DIR=
+-   
+-         ifelse([$2], ,
+-            casc_result="none" ,
+-
+-            for casc_dir in $2; do
+-
+-               if test -d "$casc_dir"; then
+-
+-                  ifelse([$3], , ,
+-                     if test -f $casc_dir/[$3]; then)
+-
+-                        $1_DIR=$casc_dir
+-
+-                        break
+-
+-                  ifelse([$3], , ,
+-                     fi)
+-               fi
+-            done
+-
+-            if test -z "$[$1]_DIR"; then
+-               casc_result="none"
+-
+-            else
+-               casc_result="$[$1]_DIR"
+-            fi
+-         )
+-      fi
+-   fi
+-
+-   dnl * $casc_result either is a valid value for [$1]_DIR or "none".
+-   dnl * if none, then assign the original environmental value of
+-   dnl * [$1]_DIR, whatever it may be, to casc_result and [$1]_DIR.  If
+-   dnl * there was no environmental value, then $casc_result remains
+-   dnl * "none" and [$1]_DIR is left empty.
+-
+-   if test "$casc_result" = "none"; then
+-
+-      if test -n "$casc_env_[$1]_dir"; then
+-
+-         casc_result="$casc_env_[$1]_dir"
+-         [$1]_DIR="$casc_result"
+-      fi
+-   fi
+-
+-   AC_MSG_RESULT($casc_result)
+-   AC_SUBST([$1]_DIR)
+-])
+-
+-
+-dnl smr_ARG_WITHLIB from FVWM by S. Robbins 
+-dnl Allow argument for optional libraries; wraps AC_ARG_WITH, to
+-dnl provide a "--with-foo-lib" option in the configure script, where foo
+-dnl is presumed to be a library name.  The argument given by the user
+-dnl (i.e. "bar" in ./configure --with-foo-lib=bar) may be one of four 
+-dnl things:
+-dnl     * boolean (no, yes or blank): whether to use library or not
+-dnl     * file: assumed to be the name of the library
+-dnl     * directory: assumed to *contain* the library
+-dnl     * a quoted, space-separated list of linker flags needed to link
+-dnl       with this library.  (To be used if this library requires
+-dnl       linker flags other than the normal `-L' and `-l' flags.)
+-dnl 
+-dnl The argument is sanity-checked.  If all is well, two variables are
+-dnl set: "with_foo" (value is yes, no, or maybe), and "foo_LIBFLAGS" (value
+-dnl is either blank, a file, -lfoo, '-L/some/dir -lfoo', or whatever 
+-dnl linker flags the user gives). The idea is: the first tells you whether
+-dnl the library is to be used or not (or the user didn't specify one way
+-dnl or the other) and the second to put on the command line for linking
+-dnl with the library.
+-dnl
+-dnl Usage:
+-dnl smr_ARG_WITHLIB(name, libname, description)
+-dnl 
+-dnl name                name for --with argument ("foo" for libfoo)
+-dnl libname             (optional) actual name of library,
+-dnl                     if different from name
+-dnl description         (optional) used to construct help string
+-dnl 
+-dnl Changes:  Changed some identifier names.
+-dnl           --with-foo-library is now --with-foo-lib
+-dnl           foo_LIBS is now foo_LIBFLAGS
+-dnl           Fourth posibility for argument to --with-foo-lib added
+-dnl           Documentation above changed to reflect these changes
+-dnl           Noah Elliott, October 1998
+-
+-
+-AC_DEFUN([CASC_SMR_ARG_WITHLIB],
+-[
+-   smr_ARG_WITHLIB([$1],[$2],[$3])
+-])dnl
+-
+-AC_DEFUN([smr_ARG_WITHLIB], [
+-
+-ifelse($2, , smr_lib=[$1], smr_lib=[$2]) 
+-    
+-AC_ARG_WITH([$1]-lib,
+-ifelse($3, ,
+-[  --with-$1-lib[=PATH]       use $1 library], 
+-[  --with-$1-lib[=PATH]       use $1 library ($3)]),
+-[
+-    if test "$withval" = yes; then
+-        with_[$1]=yes
+-        [$1]_LIBFLAGS="-l${smr_lib}"
+-    elif test "$withval" = no; then
+-        with_[$1]=no
+-        [$1]_LIBFLAGS=
+-    else
+-        with_[$1]=yes
+-        if test -f "$withval"; then
+-            [$1]_LIBFLAGS=$withval
+-        elif test -d "$withval"; then
+-            [$1]_LIBFLAGS="-L$withval -l${smr_lib}"
+-        else
+-            case $withval in
+-            -*)
+-               [$1]_LIBFLAGS="$withval"
+-            ;;
+-            *)
+-               AC_MSG_ERROR(
+-                  [argument must be boolean, file, directory, or compiler flags]
+-                           )
+-            ;;
+-            esac
+-        fi
+-    fi
+-], [
+-    with_[$1]=maybe
+-    [$1]_LIBFLAGS="-l${smr_lib}"
+-])])
+-
+-    
+-dnl smr_ARG_WITHINCLUDES from FVWM by S. Robbins
+-dnl Check if the include files for a library are accessible, and
+-dnl define the variable "name_INCLUDE" with the proper "-I" flag for
+-dnl the compiler.  The user has a chance to specify the includes
+-dnl location, using "--with-foo-include".
+-dnl 
+-dnl This should be used *after* smr_ARG_WITHLIB *and* AC_CHECK_LIB are
+-dnl successful.
+-dnl 
+-dnl Usage:
+-dnl smr_ARG_WITHINCLUDES(name, header, extra-flags)
+-dnl 
+-dnl name                library name, MUST same as used with smr_ARG_WITHLIB
+-dnl header              a header file required for using the lib
+-dnl extra-flags         (optional) flags required when compiling the
+-dnl                     header, typically more includes; for ex. X_CFLAGS
+-dnl
+-dnl Changes:  Changed some identifier names.
+-dnl           --with-foo-includes is now --with-foo-include
+-dnl           name_CFLAGS is now name_INCLUDE
+-dnl           Documentation above changed to reflect these changes
+-dnl           Noah Elliott, October 1998
+-
+-AC_DEFUN([CASC_SMR_ARG_WITHINCLUDES],
+-[
+-   smr_ARG_WITHINCLUDES([$1], [$2], [$3])
+-])dnl
+-
+-AC_DEFUN([smr_ARG_WITHINCLUDES], [
+-
+-AC_ARG_WITH([$1]-include,
+-[  --with-$1-include=DIR  set directory for $1 headers],
+-[
+-    if test -d "$withval"; then
+-        [$1]_INCLUDE="-I${withval}"
+-    else
+-        AC_MSG_ERROR(argument must be a directory)
+-    fi])
+-
+-dnl This bit of logic comes from autoconf's AC_PROG_CC macro.  We need
+-dnl to put the given include directory into CPPFLAGS temporarily, but
+-dnl then restore CPPFLAGS to its old value.
+-dnl 
+-smr_test_CPPFLAGS="${CPPFLAGS+set}"
+-smr_save_CPPFLAGS="$CPPFLAGS"
+-CPPFLAGS="$CPPFLAGS ${[$1]_CFLAGS}"
+-
+-    ifelse($3, , , CPPFLAGS="$CPPFLAGS [$3]")
+-    AC_CHECK_HEADERS($2)
+-   
+-if test "$smr_test_CPPFLAGS" = set; then
+-    CPPFLAGS=$smr_save_CPPFLAGS
+-else
+-    unset CPPFLAGS
+-fi
+-])
+-    
+-        
+-dnl smr_CHECK_LIB from FVWM by S. Robbins
+-dnl Probe for an optional library.  This macro creates both
+-dnl --with-foo-lib and --with-foo-include options for the configure
+-dnl script.  If --with-foo-lib is *not* specified, the default is to
+-dnl probe for the library, and use it if found.
+-dnl
+-dnl Usage:
+-dnl smr_CHECK_LIB(name, libname, desc, func, header, x-libs, x-flags)
+-dnl 
+-dnl name        name for --with options
+-dnl libname     (optional) real name of library, if different from
+-dnl             above
+-dnl desc        (optional) short descr. of library, for help string
+-dnl func        function of library, to probe for
+-dnl header      (optional) header required for using library
+-dnl x-libs      (optional) extra libraries, if needed to link with lib
+-dnl x-flags     (optional) extra flags, if needed to include header files
+-dnl
+-dnl Changes:  identifier names and documentation modified to reflect
+-dnl           changes to smr_ARG_WITHLIB and smr_ARG_WITHINCLUDES
+-dnl           Noah Elliott, October 1998
+-
+-AC_DEFUN([CASC_SMR_CHECK_LIB],
+-[
+-   smr_CHECK_LIB([$1], [$2], [$3], [$4], [$5], [$6], [$7])
+-])dnl
+-
+-AC_DEFUN([smr_CHECK_LIB],
+-[   
+-ifelse($2, , smr_lib=[$1], smr_lib=[$2])
+-ifelse($5, , , smr_header=[$5])
+-smr_ARG_WITHLIB($1,$2,$3)
+-if test "$with_$1" != no; then
+-    AC_CHECK_LIB($smr_lib, $4,
+-        smr_havelib=yes, smr_havelib=no,
+-        ifelse($6, , ${$1_LIBFLAGS}, [${$1_LIBFLAGS} $6]))
+-    if test "$smr_havelib" = yes -a "$smr_header" != ""; then
+-        smr_ARG_WITHINCLUDES($1, $smr_header, $7)
+-        smr_safe=`echo "$smr_header" | sed 'y%./+-%__p_%'`
+-        if eval "test \"`echo '$ac_cv_header_'$smr_safe`\" != yes"; then
+-            smr_havelib=no
+-        fi
+-    fi
+-    if test "$smr_havelib" = yes; then
+-        AC_MSG_RESULT(Using $1 library)
+-    else
+-        $1_LIBFLAGS=
+-        $1_INCLUDE=
+-        if test "$with_$1" = maybe; then
+-            AC_MSG_RESULT(Not using $1 library)
+-        else
+-            AC_MSG_WARN(Requested $1 library not found!)
+-        fi
+-    fi
+-fi])
+-
+-
+-dnl **********************************************************************
+-dnl * CASC_CONFIG_OUTPUT_LIST(DIR-LIST[, OUTPUT-FILE])
+-dnl *
+-dnl * The intent of this macro is to make configure handle the possibility
+-dnl * that a portion of the directory tree of a project may not be
+-dnl * present.  This will modify the argument list of AC_OUTPUT to contain
+-dnl * only output file names for which corresponding input files exist.
+-dnl * If you are not concerned about the possible absence of the necessary
+-dnl * input (.in) files, it is better to not use this macro and to
+-dnl * explicitly list all of the output files in a call to AC_OUTPUT.
+-dnl * Also, If you wish to create a file Foo from a file with a name
+-dnl * other than Foo.in, this macro will not work, and you must use
+-dnl * AC_OUTPUT.
+-dnl *
+-dnl * This macro checks for the existence of the file OUTPUT-FILE.in in
+-dnl * each directory specified in the whitespace-separated DIR-LIST.  
+-dnl * (Directories should be specified by relative path from the directory 
+-dnl * containing configure.in.) If OUTPUT-FILE is not specified, the
+-dnl * default is 'Makefile'.  For each directory that contains 
+-dnl * OUTPUT-FILE.in, the relative path of OUTPUT-FILE is added to the 
+-dnl * shell variable OUTPUT-FILE_list.  When AC_OUTPUT is called,
+-dnl * '$OUTPUT-FILE_list' should be included in the argument list.  So if
+-dnl * you have a directory tree and each subdirectory contains a 
+-dnl * Makefile.in, DIR-LIST should be a list of every subdirectory and
+-dnl * OUTPUT-FILE can be omitted, because 'Makefile' is the default.  When
+-dnl * configure runs, it will check for the existence of a Makefile.in in
+-dnl * each directory in DIR-LIST, and if so, the relative path of each
+-dnl * intended Makefile will be added to the variable Makefile_list.
+-dnl *
+-dnl * This macro can be called multiple times, if there are files other
+-dnl * than Makefile.in with a .in suffix other that are intended to be 
+-dnl * processed by configure. 
+-dnl *
+-dnl * Example
+-dnl *     If directories dir1 and dir2 both contain a file named Foo.in, 
+-dnl *     and you wish to use configure to create a file named Foo in each
+-dnl *     directory, then call 
+-dnl *     CASC_CONFIG_OUTPUT_LIST(dir1 dir2, Foo)
+-dnl *     If you also called this macro for Makefile as described above,
+-dnl *     you should call
+-dnl *     AC_OUTPUT($Makefile_list $Foo_list)
+-dnl *     at the end of configure.in .
+-dnl *********************************************************************
+-
+-
+-AC_DEFUN([CASC_CONFIG_OUTPUT_LIST],
+-[
+-   dnl * m_OUTPUT_LIST is a macro to store the name of the variable
+-   dnl * which will contain the list of output files
+-   define([m_OUTPUT_LIST], ifelse([$2], , Makefile_list, [$2_list]))
+-
+-   if test -z "$srcdir"; then
+-      srcdir=.
+-   fi
+-
+-   dnl * use "Makefile" if second argument not given
+-   if test -n "$2"; then
+-      casc_output_file=$2
+-   else   
+-      casc_output_file=Makefile
+-   fi   
+-      
+-   dnl * Add a file to the output list if its ".in" file exists.
+-   for casc_dir in $1; do
+-      if test -f $srcdir/$casc_dir/$casc_output_file.in; then
+-         m_OUTPUT_LIST="$m_OUTPUT_LIST $casc_dir/$casc_output_file"
+-      fi
+-   done
+-])dnl
+-
+-
+-dnl **********************************************************************
+-dnl * CASC_GUESS_ARCH
+-dnl * Guesses a one-word name for the current architecture, unless ARCH
+-dnl * has been preset.  This is an alternative to the built-in macro
+-dnl * AC_CANONICAL_HOST, which gives a three-word name.  Uses the utility
+-dnl * 'tarch', which is a Bourne shell script that should be in the same  
+-dnl * directory as the configure script.  If tarch is not present or if it
+-dnl * fails, ARCH is set to the value, if any, of shell variable HOSTTYPE,
+-dnl * otherwise ARCH is set to "unknown".
+-dnl **********************************************************************
+-
+-AC_DEFUN([CASC_GUESS_ARCH],
+-[
+-   AC_MSG_CHECKING(the architecture)
+-
+-   dnl * $ARCH could already be set in the environment or earlier in configure
+-   dnl * Use the preset value if it exists, otherwise go throug the procedure
+-   if test -z "$ARCH"; then
+-
+-      dnl * configure searches for the tool "tarch".  It should be in the
+-      dnl * same directory as configure.in, but a couple of other places
+-      dnl * will be checked.  casc_tarch stores a relative path for "tarch".
+-      casc_tarch_dir=
+-      for casc_dir in $srcdir $srcdir/.. $srcdir/../.. $srcdir/config; do
+-         if test -f $casc_dir/tarch; then
+-            casc_tarch_dir=$casc_dir
+-            casc_tarch=$casc_tarch_dir/tarch
+-            break
+-         fi
+-      done
+-
+-      dnl * if tarch was not found or doesn't work, try using env variable
+-      dnl * $HOSTTYPE
+-      if test -z "$casc_tarch_dir"; then
+-         AC_MSG_WARN(cannot find tarch, using \$HOSTTYPE as the architecture)
+-         ARCH=$HOSTTYPE
+-      else
+-         ARCH="`$casc_tarch`"
+-
+-         if test -z "$ARCH" || test "$ARCH" = "unknown"; then
+-            ARCH=$HOSTTYPE
+-         fi
+-      fi
+-
+-      dnl * if $ARCH is still empty, give it the value "unknown".
+-      if test -z "$ARCH"; then
+-         ARCH=unknown
+-         AC_MSG_WARN(architecture is unknown)
+-      else
+-         AC_MSG_RESULT($ARCH)
+-      fi    
+-   else
+-      AC_MSG_RESULT($ARCH)
+-   fi
+-
+-   AC_SUBST(ARCH)
+-
+-])dnl
+-
+-
+-dnl **********************************************************************
+-dnl * CASC_SET_SUFFIX_RULES is not like the other macros in aclocal.m4
+-dnl * because it does not run any kind of test on the system on which it
+-dnl * is running.  All it does is create several variables which contain
+-dnl * the text of some simple implicit suffix rules that can be
+-dnl * substituted into Makefile.in.  The suffix rules that come from the
+-dnl * macro all deal with compiling a source file into an object file.  If
+-dnl * this macro is called in configure.in, then if `@CRULE@' is placed in
+-dnl * Makefile.in, the following will appear in the generated Makefile:
+-dnl *
+-dnl * .c.o:
+-dnl *         @echo "Making (c) " $@ 
+-dnl *         @${CC} -o $@ -c ${CFLAGS} $<	
+-dnl *
+-dnl * The following is a list of the variables created by this macro and
+-dnl * the corresponding suffixes of the files that each implicit rule 
+-dnl * deals with.
+-dnl *
+-dnl * CRULE       --   .c
+-dnl * CXXRULE     --   .cxx
+-dnl * CPPRULE     --   .cpp
+-dnl * CCRULE      --   .cc
+-dnl * CAPCRULE    --   .C
+-dnl * F77RULE     --   .f
+-dnl *
+-dnl * There are four suffix rules for C++ files because of the different
+-dnl * suffixes that can be used for C++.  Only use the one which
+-dnl * corresponds to the suffix you use for your C++ files.
+-dnl *
+-dnl * The rules created by this macro require you to use the following
+-dnl * conventions for Makefile variables:
+-dnl *
+-dnl * CC        = C compiler
+-dnl * CXX       = C++ compiler
+-dnl * F77       = Fortran 77 compiler
+-dnl * CFLAGS    = C compiler flags
+-dnl * CXXFLAGS  = C++ compiler flags
+-dnl * FFLAGS    = Fortran 77 compiler flags
+-dnl **********************************************************************
+-
+-AC_DEFUN([CASC_SET_SUFFIX_RULES],
+-[
+-   dnl * Things weren't working whenever "$@" showed up in the script, so
+-   dnl * I made the symbol $at_sign to signify '@'
+-   at_sign=@
+-
+-   dnl * All of the backslashes are used to handle the $'s and the
+-   dnl * newlines which get passed through echo and sed.
+-
+-   CRULE=`echo ".c.o:\\\\
+-\t@echo \"Making (c) \" \\$$at_sign \\\\
+-\t@\\${CC} -o \\$$at_sign -c \\${CFLAGS} \$<"`
+-
+-   AC_SUBST(CRULE)
+-
+-   CXXRULE=`echo ".cxx.o:\\\\
+-\t@echo \"Making (c++) \" \\$$at_sign \\\\
+-\t@\\${CXX} -o \\$$at_sign -c \\${CXXFLAGS} \$<"`
+-
+-   AC_SUBST(CXXRULE)
+-
+-   CPPRULE=`echo ".cpp.o:\\\\
+-\t@echo \"Making (c++) \" \\$$at_sign \\\\
+-\t@\\${CXX} -o \\$$at_sign -c \\${CXXFLAGS} \$<"`
+-
+-   AC_SUBST(CPPRULE)
+-
+-   CCRULE=`echo ".cc.o:\\\\
+-\t@echo \"Making (c++) \" \\$$at_sign \\\\
+-\t@\\${CXX} -o \\$$at_sign -c \\${CXXFLAGS} \$<"`
+-
+-   AC_SUBST(CCRULE)
+-
+-   CAPCRULE=`echo ".C.o:\\\\
+-\t@echo \"Making (c++) \" \\$$at_sign \\\\
+-\t@\\${CXX} -o \\$$at_sign -c \\${CXXFLAGS} \$<"`
+-
+-   AC_SUBST(CAPCRULE)
+-
+-   F77RULE=`echo ".f.o:\\\\
+-\t@echo \"Making (f) \" \\$$at_sign \\\\
+-\t@\\${F77} -o \\$$at_sign -c \\${FFLAGS} \$<"`
+-
+-   AC_SUBST(F77RULE)
+-
+-])
+-
+-dnl Macro to save compiler state flags for invoking dnl compiler tests
+-dnl NOTE that this is NOT currently a stack so can dnl only be called
+-dnl in push/pop order.  push push pop pop dnl will fail
+-AC_DEFUN([CASC_PUSH_COMPILER_STATE],[
+-   casc_save_LIBS=$LIBS
+-   casc_save_CXXFLAGS=$CXXFLAGS
+-])
+-
+-dnl Macro to restore compiler state flags for invoking
+-dnl compiler tests
+-AC_DEFUN([CASC_POP_COMPILER_STATE],[
+-   LIBS=$casc_save_LIBS
+-   unset casc_save_LIBS
+-   CXXFLAGS=$casc_save_CXXFLAGS
+-   unset casc_save_CXXFLAGS
+-])
+-
+-dnl ********************************************************************
+-dnl * CASC_PROG_MPICC searches the PATH for an available MPI C compiler
+-dnl * wraparound.  It assigns the name to MPICC.
+-dnl ********************************************************************
+-
+-AC_DEFUN([CASC_PROG_MPICC],
+-[
+-   AC_CHECK_PROGS(MPICC, mpcc mpicc tmcc hcc)
+-   test -z "$MPICC" && AC_MSG_ERROR([no acceptable mpicc found in \$PATH])
+-])dnl
+-
+-
+-dnl ********************************************************************
+-dnl * CASC_PROG_MPICXX searches the PATH for an available MPI C++ 
+-dnl * compiler wraparound.  It assigns the name to MPICXX.
+-dnl ********************************************************************
+-
+-AC_DEFUN([CASC_PROG_MPICXX],
+-[
+-   AC_CHECK_PROGS(MPICXX, mpKCC mpCC mpig++ mpiCC hcp)
+-   test -z "$MPICXX" && AC_MSG_ERROR([no acceptable mpic++ found in \$PATH])
+-])dnl
+-
+-
+-dnl **********************************************************************
+-dnl * CASC_PROG_MPIF77 searches the PATH for an available MPI Fortran 77 
+-dnl * compiler wraparound.  It assigns the name to MPIF77.
+-dnl **********************************************************************
+-
+-AC_DEFUN([CASC_PROG_MPIF77],
+-[
+-   AC_CHECK_PROGS(MPIF77, mpf77 mpxlf mpif77 mpixlf tmf77 hf77)
+-   test -z "$MPIF77" && AC_MSG_ERROR([no acceptable mpif77 found in \$PATH])
+-])dnl
+-
+-
+-dnl ***********************************************************************
+-dnl * CASC_CHECK_MPIF77_PP checks whether the preprocessor needs to
+-dnl * be called before calling the compiler for Fortran files with
+-dnl * preprocessor directives and MPI function calls.  If the preprocessor
+-dnl * is necessary, MPIF77NEEDSPP is set to "yes", otherwise it is set to
+-dnl * "no"
+-dnl ***********************************************************************
+-
+-AC_DEFUN([CASC_CHECK_MPIF77_PP],
+-[
+-   AC_REQUIRE([CASC_PROG_MPIF77])
+-
+-   rm -f testppmp.o
+-
+-   AC_MSG_CHECKING(whether $FPP needs to be called before $MPIF77)
+-
+-   # This follows the same procedur as CASC_CHECK_F77_PP, except it tests
+-   # $MPIF77 using a test program that includes MPI functions.
+-
+-   cat > testppmp.F <<EOF
+-#define FOO 3
+-	program testppmp
+-	include 'mpif.h'
+-	integer rank,size,mpierr,sum
+-	call MPI_INIT(mpierr)
+-	call MPI_COMM_SIZE(MPI_COMM_WORLD,size,mpierr)
+-	call MPI_COMM_RANK(MPI_COMM_WORLD,rank,mpierr)
+-#ifdef FORTRAN_NO_UNDERSCORE
+-        sum = rank + size
+-#else
+-        sum = rank + rank
+-#endif
+-        call MPI_FINALIZE(mpierr)
+-        end 
+-EOF
+-
+-   $MPIF77 -DBAR -c testppmp.F 
+-   if test -f testppmp.o; then 
+-      MPIF77NEEDSPP=no 
+-   else 
+-      MPIF77NEEDSPP=yes 
+-   fi
+-
+-   echo $MPIF77NEEDSPP
+-   rm -f testppmp.o testppmp.F
+-   AC_SUBST(MPIF77NEEDSPP)
+-])dnl
+-
+-
+-dnl *********************************************************************
+-dnl * CASC_SET_MPI sets up the needed MPI library and directory flags.   
+-dnl * The location of the file mpi.h is put into the variable MPIINCLUDE
+-dnl * as a -I flag.  The -l flags that specify the needed libraries and
+-dnl * the -L flags that specify the paths of those libraries are placed in
+-dnl * the variables MPILIBS and MPILIBDIRS, respectively.  To set the MPI
+-dnl * libraries and directories manually, use the --with-mpi-include,
+-dnl * --with-mpi-libs, and --with-mpi-lib-dirs command-line options when
+-dnl * invoking configure.  Only one directory should be specified with
+-dnl * --with-mpi-include, while any number of directories can be specified
+-dnl * by --with-mpi-lib-dirs.  Any number of libraries can be specified
+-dnl * with --with-mpi-libs, and the libraries must be referred to by their 
+-dnl * base names, so libmpi.a is just mpi.  It is adviseable to use all 
+-dnl * three --with flags whenever one is used, because it is likely that
+-dnl * when one is chosen it will mess up the automatic choices for the
+-dnl * other two.  If the architecture is unknown, or if the needed MPI
+-dnl * settings for the current architecture are not known, then the naive
+-dnl * settings of MPILIBS="-lmpi" and MPILIBDIRS="-L/usr/local/mpi/lib"
+-dnl * are tested, and if they exist they are used, otherwise the MPILIB*
+-dnl * variables are left blank.  In the case of rs6000, the variable
+-dnl * MPIFLAGS is also set. 
+-dnl **********************************************************************
+- 
+-AC_DEFUN([CASC_SET_MPI],
+-[
+-
+-   dnl * If called from within CASC_FIND_MPI, then the configure-line
+-   dnl * options will already exist.  This ifdef creates them otherwise.
+-   ifdef([AC_PROVIDE_CASC_FIND_MPI], ,
+-      [AC_ARG_WITH(mpi-include, [  --with-mpi-include=DIR  mpi.h is in DIR],
+-                  casc_mpi_include_dir=$withval)
+-
+-      AC_ARG_WITH(mpi-libs, 
+-[  --with-mpi-libs=LIBS    LIBS is space-separated list of library names
+-                          needed for MPI, e.g. \"nsl socket mpi\"],
+-                  casc_mpi_libs=$withval)
+-
+-      AC_ARG_WITH(mpi-lib-dirs, 
+-[  --with-mpi-lib-dirs=DIRS
+-                          DIRS is space-separated list of directories
+-                          containing the libraries specified by
+-                          \`--with-mpi-libs', e.g \"/usr/lib /usr/local/mpi/lib\"],
+-                  casc_mpi_lib_dirs=$withval)]
+-   )
+-
+-   if test -z "$casc_mpi_libs"; then
+-      AC_REQUIRE([CASC_GUESS_ARCH])
+-
+-      dnl * Set everything to known values
+-      case $ARCH in
+-
+-         sun4 | solaris)
+-            case $F77 in
+-               *g77)
+-                   if test -z "$casc_mpi_include_dir"; then
+-                      casc_mpi_include_dir=/usr/local/mpi/lam/h
+-                   fi
+-                   
+-                   if test -z "$casc_mpi_lib_dirs"; then
+-                      casc_mpi_lib_dirs="/usr/local/mpi/lam/lib"
+-                   fi
+-
+-                   casc_mpi_libs="socket mpi trillium args tstdio t";;
+-
+-               *)
+-
+-                  if test -z "$casc_mpi_include_dir"; then
+-                     MPIINCLUDE="-I/usr/local/mpi/mpich/include \
+-                                 -I/usr/local/mpi/mpich/lib/solaris/ch_p4"
+-                  fi
+-
+-                  if test -z "$casc_mpi_lib_dirs"; then
+-                     casc_mpi_lib_dirs="/usr/local/mpi/mpich/lib/solaris/ch_p4 \
+-                                       /usr/lib"
+-                  fi
+-            
+-               casc_mpi_libs="nsl socket mpi";;
+-               esac
+-
+-            if test -z "$MPIINCLUDE"; then
+-               AC_CHECK_HEADER($casc_mpi_include_dir/mpi.h,
+-                               MPIINCLUDE="-I$casc_mpi_include_dir")
+-            fi
+-         ;;
+-
+-         alpha)
+-            if test -z "$casc_mpi_include_dir"; then
+-               casc_mpi_include_dir=/usr/local/mpi/include
+-            fi
+-            AC_CHECK_HEADER($casc_mpi_include_dir/mpi.h,
+-                               MPIINCLUDE="-I$casc_mpi_include_dir")
+-
+-            if test -z "$casc_mpi_lib_dirs"; then
+-               casc_mpi_lib_dirs="/usr/local/mpi/lib/alpha/ch_shmem \
+-                                  /usr/local/lib"
+-            fi
+-
+-            casc_mpi_libs="mpich gs";;
+-
+-         rs6000) 
+-
+-dnl            if test -z "$casc_mpi_include_dir"; then
+-dnl               casc_mpi_include_dir=/usr/lpp/ppe.poe/include
+-dnl            fi
+-dnl            AC_CHECK_HEADER($casc_mpi_include_dir/mpi.h,
+-dnl                               MPIINCLUDE="-I$casc_mpi_include_dir")
+-
+-dnl            if test -z "$casc_mpi_lib_dirs"; then
+-dnl               casc_mpi_lib_dirs=/usr/lpp/ppe.poe/lib
+-dnl            fi
+-
+-            casc_mpi_libs=mpi
+-
+-            MPIFLAGS="-binitfini:poe_remote_main";;
+-
+-         IRIX64 | iris4d) 
+-            if test -z "$casc_mpi_include_dir"; then
+-               casc_mpi_include_dir=/usr/local/mpi/include
+-            fi
+-            AC_CHECK_HEADER($casc_mpi_include_dir/mpi.h,
+-                               MPIINCLUDE="-I$casc_mpi_include_dir")
+-
+-            if test -z "$casc_mpi_lib_dirs"; then
+-               casc_mpi_lib_dirs=/usr/local/mpi/lib/IRIX64/ch_p4
+-            fi
+-
+-            casc_mpi_libs=mpi;; 
+-        
+-         *)
+-AC_MSG_WARN([trying naive MPI settings - can use --with flags to change])
+-            if test -z "$casc_mpi_include_dir"; then
+-               casc_mpi_include_dir=/usr/local/mpi/include
+-            fi
+-            AC_CHECK_HEADER($casc_mpi_include_dir/mpi.h,
+-                               MPIINCLUDE="-I$casc_mpi_include_dir")
+-
+-            if test -z "$casc_mpi_lib_dirs"; then
+-               casc_mpi_lib_dirs=/usr/local/mpi/lib
+-            fi
+-            casc_mpi_libs=mpi ;;
+-      esac
+-
+-      for casc_lib in $casc_mpi_libs; do
+-         CASC_ADD_LIB($casc_lib, main, $casc_mpi_lib_dirs, MPI)
+-      done
+-
+-   else
+-      if test -n "$casc_mpi_include_dir"; then
+-         MPIINCLUDE="-I$casc_mpi_include_dir"
+-      else
+-         MPIINCLUDE=
+-      fi
+-
+-      if test -n "$casc_mpi_lib_dirs"; then
+-         for casc_lib_dir in $casc_mpi_lib_dirs; do
+-            MPILIBDIRS="-L$casc_lib_dir $MPILIBDIRS"
+-         done
+-      else
+-         MPILIBDIRS=
+-      fi
+-
+-      for casc_lib in $casc_mpi_libs; do
+-         MPILIBS="$MPILIBS -l$casc_lib"
+-      done
+-   fi
+-])dnl
+-
+-
+-dnl ********************************************************************
+-dnl * CASC_FIND_MPI will determine the libraries, directories, and other
+-dnl * flags needed to compile and link programs with MPI function calls.
+-dnl * This macro runs tests on the script found by the CASC_PROG_MPICC
+-dnl * macro.  If there is no such mpicc-type script in the PATH and
+-dnl * MPICC is not set manually, then this macro will not work.
+-dnl *
+-dnl * One may question why these settings would need to be determined if
+-dnl * there already is mpicc available, and that is a valid question.  I
+-dnl * can think of a couple of reasons one may want to use these settings 
+-dnl * rather than using mpicc directly.  First, these settings allow you
+-dnl * to choose the C compiler you wish to use rather than using whatever
+-dnl * compiler is written into mpicc.  Also, the settings determined by
+-dnl * this macro should also work with C++ and Fortran compilers, so you
+-dnl * won't need to have mpiCC and mpif77 alongside mpicc.  This is
+-dnl * especially helpful on systems that don't have mpiCC.  The advantage
+-dnl * of this macro over CASC_SET_MPI is that this one doesn't require
+-dnl * a test of the machine type and thus will hopefully work on unknown
+-dnl * architectures.  The main disadvantage is that it relies on mpicc.
+-dnl *
+-dnl * --with-mpi-include, --with-mpi-libs, and --with-mpi-lib-dirs can be
+-dnl * used to manually override the automatic test, just as with
+-dnl * CASC_SET_MPI.  If any one of these three options are used, the
+-dnl * automatic test will not be run, so it is best to call all three
+-dnl * whenever one is called.  In addition, the option --with-mpi-flags is
+-dnl * available here to set any other flags that may be needed, but it
+-dnl * does not override the automatic test.  Flags set by --with-mpi-flags
+-dnl * will be added to the variable MPIFLAGS.  This way, if the macro, for
+-dnl * whatever reason, leaves off a necessary flag, the flag can be added 
+-dnl * to MPIFLAGS without eliminating anything else.  The other variables
+-dnl * set are MPIINCLUDE, MPILIBS, and MPILIBDIRS, just as in 
+-dnl * CASC_SET_MPI.  This macro also incorporates CASC_SET_MPI as a backup
+-dnl * plan, where if there is no mpicc, it will use the settings
+-dnl * determined by architecture name in CASC_SET_MPI
+-dnl ********************************************************************
+-
+-AC_DEFUN([CASC_FIND_MPI],
+-[
+-
+-   casc_find_mpi_cache_used=yes
+-
+-   AC_CACHE_VAL(casc_cv_mpi_include, casc_find_mpi_cache_used=no)
+-   AC_CACHE_VAL(casc_cv_mpi_libs, casc_find_mpi_cache_used=no)
+-   AC_CACHE_VAL(casc_cv_mpi_lib_dirs, casc_find_mpi_cache_used=no)
+-   AC_CACHE_VAL(casc_cv_mpi_flags, casc_find_mpi_cache_used=no)
+-
+-   if test "$casc_find_mpi_cache_used" = "yes"; then
+-      AC_MSG_CHECKING(for location of mpi.h)
+-      MPIINCLUDE=$casc_cv_mpi_include
+-      AC_MSG_RESULT("\(cached\) $MPIINCLUDE")
+-
+-      AC_MSG_CHECKING(for MPI library directories)
+-      MPILIBDIRS=$casc_cv_mpi_lib_dirs
+-      AC_MSG_RESULT("\(cached\) $MPILIBDIRS")
+-
+-      AC_MSG_CHECKING(for MPI libraries)
+-      MPILIBS=$casc_cv_mpi_libs
+-      AC_MSG_RESULT("\(cached\) $MPILIBS")
+-
+-      AC_MSG_CHECKING(for other MPI-related flags)
+-      MPIFLAGS=$casc_cv_mpi_flags
+-      AC_MSG_RESULT("\(cached\) $MPIFLAGS")
+-   else
+-   
+-
+-      dnl * Set up user options.  If user uses any of the fist three options,
+-      dnl * then automatic tests are not run.
+-
+-      casc_user_chose_mpi=no
+-      AC_ARG_WITH(mpi-include, [  --with-mpi-include=DIR  mpi.h is in DIR],
+-                  for mpi_dir in $withval; do
+-                     MPIINCLUDE="$MPIINCLUDE -I$withval"
+-                  done; casc_user_chose_mpi=yes)
+-
+-      AC_ARG_WITH(mpi-libs,
+-[  --with-mpi-libs=LIBS    LIBS is space-separated list of library names 
+-                          needed for MPI, e.g. \"nsl socket mpi\"],  
+-                  for mpi_lib in $withval; do
+-                     MPILIBS="$MPILIBS -l$mpi_lib"
+-                  done; casc_user_chose_mpi=yes)
+-
+-
+-      AC_ARG_WITH(mpi-lib-dirs,
+-[  --with-mpi-lib-dirs=DIRS
+-                          DIRS is space-separated list of directories
+-                          containing the libraries specified by
+-                          \`--with-mpi-libs', e.g \"/usr/lib /usr/local/mpi/lib\"],
+-                  for mpi_lib_dir in $withval; do
+-                     MPILIBDIRS="-L$mpi_lib_dir $MPILIBDIRS"
+-                  done; casc_user_chose_mpi=yes)
+-
+-      dnl * --with-mpi-flags only adds to automatic selections, 
+-      dnl * does not override
+-
+-      AC_ARG_WITH(mpi-flags,
+-[  --with-mpi-flags=FLAGS  FLAGS is space-separated list of whatever flags other
+-                          than -l and -L are needed to link with mpi libraries],
+-                          MPIFLAGS=$withval)
+-
+-
+-      if test "$casc_user_chose_mpi" = "no"; then
+-
+-      dnl * Find an MPICC.  If there is none, call CASC_SET_MPI to choose MPI
+-      dnl * settings based on architecture name.  If CASC_SET_MPI fails,
+-      dnl * print warning message.  Manual MPI settings must be used.
+-
+-         AC_ARG_WITH(MPICC,
+-[  --with-MPICC=ARG        ARG is mpicc or similar MPI C compiling tool],
+-            MPICC=$withval,
+-            [AC_CHECK_PROGS(MPICC, mpcc mpicc tmcc hcc)])
+-
+-         if test -z "$MPICC"; then
+-            AC_MSG_WARN([no acceptable mpicc found in \$PATH])
+-            CASC_SET_MPI
+-            if test -z "$MPILIBS"; then
+-             AC_MSG_WARN([MPI not found - must set manually using --with flags])
+-            fi
+-
+-         dnl * When $MPICC is there, run the automatic test
+-         dnl * here begins the hairy stuff
+-
+-         else      
+- 
+-            dnl changequote(, )dnl
+-  
+-            dnl * Create a minimal MPI program.  It will be compiled using
+-            dnl * $MPICC with verbose output.
+-            cat > mpconftest.c << EOF
+-#include "mpi.h"
+-
+-main(int argc, char **argv)
+-{
+-   int rank, size;
+-   MPI_Init(&argc, &argv);
+-   MPI_Comm_size(MPI_COMM_WORLD, &size);
+-   MPI_Comm_rank(MPI_COMM_WORLD, &rank);
+-   MPI_Finalize();
+-   return 0;
+-}
+-EOF
+-
+-            casc_mplibs=
+-            casc_mplibdirs=
+-            casc_flags=
+-            casc_lmpi_exists=no
+-
+-            dnl * These are various ways to produce verbose output from $MPICC
+-            dnl * All of their outputs are stuffed into variable
+-            dnl * $casc_mpoutput
+-
+-            for casc_command in "$MPICC -show"\
+-                                "$MPICC -v"\
+-                                "$MPICC -#"\
+-                                "$MPICC"; do
+-
+-               casc_this_output=`$casc_command mpconftest.c -o mpconftest 2>&1`
+-
+-               dnl * If $MPICC uses xlc, then commas must be removed from output
+-               xlc_p=`echo $casc_this_output | grep xlcentry`
+-               if test -n "$xlc_p"; then
+-                  casc_this_output=`echo $casc_this_output | sed 's/,/ /g'`
+-               fi
+-
+-               dnl * Turn on flag once -lmpi is found in output
+-               lmpi_p=`echo $casc_this_output | grep "\-lmpi"`
+-               if test -n "$lmpi_p"; then
+-                  casc_lmpi_exists=yes
+-               fi
+-
+-               casc_mpoutput="$casc_mpoutput $casc_this_output"
+-               casc_this_output=
+-
+-            done
+-
+-            rm -rf mpconftest*
+-
+-            dnl * little test to identify $CC as IBM's xlc
+-            echo "main() {}" > cc_conftest.c
+-            cc_output=`${CC-cc} -v -o cc_conftest cc_conftest.c 2>&1`
+-            xlc_p=`echo $cc_output | grep xlcentry`
+-            if test -n "$xlc_p"; then
+-               casc_compiler_is_xlc=yes
+-            fi 
+-            rm -rf cc_conftest*
+-
+-            dnl * $MPICC might not produce '-lmpi', but we still need it.
+-            dnl * Add -lmpi to $casc_mplibs if it was never found
+-            if test "$casc_lmpi_exists" = "no"; then
+-               casc_mplibs="-lmpi"
+-            else
+-               casc_mplibs=
+-            fi
+-
+-            casc_want_arg=
+-
+-            dnl * Loop through every word in output to find possible flags.
+-            dnl * If the word is the absolute path of a library, it is added
+-            dnl * to $casc_flags.  Any "-llib", "-L/dir", "-R/dir" and
+-            dnl * "-I/dir" is kept.  If '-l', '-L', '-R', '-I', '-u', or '-Y'
+-            dnl * appears alone, then the next word is checked.  If the next
+-            dnl * word is another flag beginning with '-', then the first
+-            dnl * word is discarded.  If the next word is anything else, then
+-            dnl * the two words are coupled in the $casc_arg variable.
+-            dnl * "-binitfini:poe_remote_main" is a flag needed especially
+-            dnl * for IBM MPI, and it is always kept if it is found.
+-            dnl * Any other word is discarded.  Also, after a word is found
+-            dnl * and kept once, it is discarded if it appears again
+-
+-            for casc_arg in $casc_mpoutput; do
+- 
+-               casc_old_want_arg=$casc_want_arg
+-               casc_want_arg=  
+-
+-               if test -n "$casc_old_want_arg"; then
+-                  case "$casc_arg" in
+-                  [-*)]
+-                     casc_old_want_arg=
+-                  ;;
+-                  esac
+-               fi
+-
+-               case "$casc_old_want_arg" in
+-               ['')]
+-                  case $casc_arg in
+-                  [/*.a)]
+-                     exists=false
+-                     for f in $casc_flags; do
+-                        if test x$casc_arg = x$f; then
+-                           exists=true
+-                        fi
+-                     done
+-                     if $exists; then
+-                        casc_arg=
+-                     else
+-                        casc_flags="$casc_flags $casc_arg"
+-                     fi
+-                  ;;
+-                  [-binitfini:poe_remote_main)]
+-                     exists=false
+-                     for f in $casc_flags; do
+-                        if test x$casc_arg = x$f; then
+-                           exists=true
+-                        fi
+-                     done
+-                     if $exists; then
+-                        casc_arg=
+-                     else
+-                        casc_flags="$casc_flags $casc_arg"
+-                     fi
+-                  ;;
+-                  [-lang*)]
+-                     casc_arg=
+-                  ;;
+-                  [-[lLR])]
+-                     casc_want_arg=$casc_arg
+-                     casc_arg=
+-                  ;;
+-                  [-[lLR]*)]
+-                     exists=false
+-                     for f in $casc_flags; do
+-                        if test x$casc_arg = x$f; then
+-                           exists=true
+-                        fi
+-                     done
+-                     if $exists; then
+-                        casc_arg=
+-                     else
+-                       casc_flags="$casc_flags $casc_arg"
+-                     fi
+-                  ;;
+-                 [-u)]
+-                     casc_want_arg=$casc_arg
+-                     casc_arg=
+-                  ;;
+-                  [-Y)]
+-                     casc_want_arg=$casc_arg
+-                     casc_arg=
+-                  ;;
+-                  [-I)]
+-                     casc_want_arg=$casc_arg
+-                     casc_arg=
+-                  ;;
+-                  [-I*)]
+-                     exists=false
+-                     for f in $casc_flags; do
+-                        if test x$casc_arg = x$f; then
+-                           exists=true
+-                        fi
+-                     done
+-                     if $exists; then
+-                        casc_arg=
+-                     else
+-                        casc_flags="$casc_flags $casc_arg"
+-                     fi
+-                  ;;
+-                  [*)]
+-                     casc_arg=
+-                  ;;
+-                  esac
+-
+-               ;;
+-               [-[lLRI])]
+-                  casc_arg="casc_old_want_arg $casc_arg"
+-               ;;
+-               [-u)]
+-                  casc_arg="-u $casc_arg"
+-               ;;
+-               [-Y)]
+-                  casc_arg=`echo $casc_arg | sed -e 's%^P,%%'`
+-                  SAVE_IFS=$IFS
+-                  IFS=:
+-                  casc_list=
+-                  for casc_elt in $casc_arg; do
+-                     casc_list="$casc_list -L$casc_elt"
+-                  done
+-                  IFS=$SAVE_IFS
+-                  casc_arg="$casc_list"
+-               ;;
+-               esac
+-
+-               dnl * Still inside the big for loop, we separate each flag
+-               dnl * into includes, libdirs, libs, flags
+-               if test -n "$casc_arg"; then
+-                  case $casc_arg in
+-                  [-I*)]
+-
+-                     dnl * if the directory given in this flag contains mpi.h
+-                     dnl * then the flag is assigned to $MPIINCLUDE
+-                     if test -z "$MPIINCLUDE"; then
+-                        casc_cppflags="$casc_cppflags $casc_arg"
+-                        casc_include_dir=`echo "$casc_arg" | sed 's/-I//g'` 
+-
+-                        SAVE_CPPFLAGS="$CPPFLAGS"
+-                        CPPFLAGS="$casc_cppflags"
+-                        dnl changequote([, ])dnl
+-
+-                        unset ac_cv_header_mpi_h
+-                        AC_CHECK_HEADER(mpi.h,
+-                                        MPIINCLUDE="$casc_cppflags")
+-
+-                        dnl changequote(, )dnl
+-                        CPPFLAGS="$SAVE_CPPFLAGS"
+-
+-                     else
+-                        casc_arg=
+-                     fi
+-                  ;;
+-                  [-[LR]*)]
+-
+-                     dnl * These are the lib directory flags
+-                     casc_mplibdirs="$casc_mplibdirs $casc_arg"
+-                  ;;
+-                  [-l* | /*)]
+-
+-                     dnl * These are the libraries
+-                     casc_mplibs="$casc_mplibs $casc_arg"
+-                  ;;
+-                  [-binitfini:poe_remote_main)]
+-                     if test "$casc_compiler_is_xlc" = "yes"; then
+-                        casc_mpflags="$casc_mpflags $casc_arg"
+-                     fi
+-                  ;;
+-                  [*)]
+-                     dnl * any other flag that has been kept goes here
+-                     casc_mpflags="$casc_mpflags $casc_arg"
+-                  ;;
+-                  esac
+-
+-                  dnl * Upcoming test needs $LIBS to contain the flags 
+-                  dnl * we've found
+-                  LIBS_SAVE=$LIBS
+-                  LIBS="$MPIINCLUDE $casc_mpflags $casc_mplibdirs $casc_mplibs"
+-
+-                  if test -n "`echo $LIBS | grep '\-R/'`"; then
+-                     LIBS=`echo $LIBS | sed 's/-R\//-R \//'`
+-                  fi
+-
+-                  dnl changequote([, ])dnl
+-
+-
+-                  dnl * Test to see if flags found up to this point are
+-                  dnl * sufficient to compile and link test program.  If not,
+-                  dnl * the loop keeps going to the next word
+-                  AC_LANG_PUSH(C)
+-                  AC_TRY_LINK(
+-dnl                     ifelse(AC_LANG, [C++],
+-
+-dnl [#ifdef __cplusplus
+-dnl extern "C"
+-dnl #endif
+-dnl ])dnl
+-[#include "mpi.h"
+-], [int rank, size;
+-   int argc;
+-   char **argv;
+-   MPI_Init(&argc, &argv);
+-   MPI_Comm_size(MPI_COMM_WORLD, &size);
+-   MPI_Comm_rank(MPI_COMM_WORLD, &rank);
+-   MPI_Finalize();
+-],
+-                     casc_result=yes)
+-                  AC_LANG_POP(C)
+-                  LIBS=$LIBS_SAVE
+-
+-                  if test "$casc_result" = yes; then
+-                     casc_result=
+-                     break
+-                  fi
+-               fi
+-            done
+-
+-            dnl * After loop is done, set variables to be substituted
+-            MPILIBS=$casc_mplibs
+-            MPILIBDIRS=$casc_mplibdirs
+-            MPIFLAGS="$MPIFLAGS $casc_mpflags"
+-
+-            dnl * IBM MPI uses /usr/lpp/ppe.poe/libc.a instead of /lib/libc.a
+-            dnl * so we need to make sure that -L/lib is not part of the 
+-            dnl * linking line when we use IBM MPI.  This only appears in
+-            dnl * configure when CASC_FIND_MPI is called first.
+-	    dnl            ifdef([AC_PROVIDE_CASC_FIND_F77LIBS], 
+-            dnl               if test -n "`echo $F77LIBFLAGS | grep '\-L/lib '`"; then
+-            dnl                  if test -n "`echo $F77LIBFLAGS | grep xlf`"; then
+-            dnl                     F77LIBFLAGS=`echo $F77LIBFLAGS | sed 's/-L\/lib //g'`
+-            dnl                  fi
+-            dnl               fi
+-            dnl            )
+-
+-            if test -n "`echo $MPILIBS | grep pmpich`" &&
+-               test -z "`echo $MPILIBS | grep pthread`"; then
+-                  LIBS_SAVE=$LIBS
+-                  LIBS="$MPIINCLUDE $MPIFLAGS $MPILIBDIRS $MPILIBS -lpthread"
+-                  AC_LANG_PUSH(C)
+-                  AC_TRY_LINK(
+-dnl                     ifelse(AC_LANG, [C++],
+-
+-dnl [#ifdef __cplusplus
+-dnl extern "C"
+-dnl #endif
+-dnl ])dnl
+-[#include "mpi.h"
+-], [int rank, size;
+-   int argc;
+-   char **argv;
+-   MPI_Init(&argc, &argv);
+-   MPI_Comm_size(MPI_COMM_WORLD, &size);
+-   MPI_Comm_rank(MPI_COMM_WORLD, &rank);
+-   MPI_Finalize();
+-],
+-                     MPILIBS="$MPILIBS -lpthread")
+-                  AC_LANG_POP(C)
+-                  LIBS=$LIBS_SAVE
+-            fi
+-
+-            AC_MSG_CHECKING(for MPI include directories)
+-            AC_MSG_RESULT($MPIINCLUDE)
+-            AC_MSG_CHECKING(for MPI library directories)
+-            AC_MSG_RESULT($MPILIBDIRS)
+-            AC_MSG_CHECKING(for MPI libraries)
+-            AC_MSG_RESULT($MPILIBS)
+-            AC_MSG_CHECKING(for other MPI-related flags)
+-            AC_MSG_RESULT($MPIFLAGS)
+-         fi
+-      fi
+-
+-      AC_CACHE_VAL(casc_cv_mpi_include, casc_cv_mpi_include=$MPIINCLUDE)
+-      AC_CACHE_VAL(casc_cv_mpi_lib_dirs, casc_cv_mpi_lib_dirs=$MPILIBDIRS)
+-      AC_CACHE_VAL(casc_cv_mpi_libs, casc_cv_mpi_libs=$MPILIBS)
+-      AC_CACHE_VAL(casc_cv_mpi_flags, casc_cv_mpi_flags=$MPIFLAGS)
+-   fi
+-
+-   AC_SUBST(MPIINCLUDE)
+-   AC_SUBST(MPILIBDIRS)
+-   AC_SUBST(MPILIBS)
+-   AC_SUBST(MPIFLAGS)
+-
+-])dnl
+-
+-dnl ********************************************************************
+-dnl * CASC_FIND_MPI_ALPHA is a special case of CASC_FIND_MPI for the
+-dnl * compass cluster.  The original CASC_FIND_MPI looks for existence 
+-dnl * of mpCC and mpiCC.  If the former is found it uses native (proprietary) 
+-dnl * mpi and if the latter is found, it uses mpich.  The DECs are a 
+-dnl * special case because mpCC does not exist and mpiCC does, but we want
+-dnl * to use the native version by default.  Therefore, the original macro 
+-dnl * did not work for this case so I added this one to deal with it.
+-dnl * AMW 9/00
+-dnl ********************************************************************
+-
+-AC_DEFUN([CASC_FIND_MPI_ALPHA],
+-[
+-
+-   casc_find_mpi_cache_used=yes
+-
+-   AC_CACHE_VAL(casc_cv_mpi_include, casc_find_mpi_cache_used=no)
+-   AC_CACHE_VAL(casc_cv_mpi_libs, casc_find_mpi_cache_used=no)
+-   AC_CACHE_VAL(casc_cv_mpi_lib_dirs, casc_find_mpi_cache_used=no)
+-   AC_CACHE_VAL(casc_cv_mpi_flags, casc_find_mpi_cache_used=no)
+-
+-   if test "$casc_find_mpi_cache_used" = "yes"; then
+-      AC_MSG_CHECKING(for location of mpi.h)
+-      MPIINCLUDE=$casc_cv_mpi_include
+-      AC_MSG_RESULT("\(cached\) $MPIINCLUDE")
+-
+-      AC_MSG_CHECKING(for MPI library directories)
+-      MPILIBDIRS=$casc_cv_mpi_lib_dirs
+-      AC_MSG_RESULT("\(cached\) $MPILIBDIRS")
+-
+-      AC_MSG_CHECKING(for MPI libraries)
+-      MPILIBS=$casc_cv_mpi_libs
+-      AC_MSG_RESULT("\(cached\) $MPILIBS")
+-
+-      AC_MSG_CHECKING(for other MPI-related flags)
+-      MPIFLAGS=$casc_cv_mpi_flags
+-      AC_MSG_RESULT("\(cached\) $MPIFLAGS")
+-   else
+-   
+-
+-      dnl * Set up user options.  If user uses any of the fist three options,
+-      dnl * then automatic tests are not run.
+-
+-      casc_user_chose_mpi=no
+-      AC_ARG_WITH(mpi-include, [  --with-mpi-include=DIR  mpi.h is in DIR],
+-                  for mpi_dir in $withval; do
+-                     MPIINCLUDE="$MPIINCLUDE -I$withval"
+-                  done; casc_user_chose_mpi=yes)
+-
+-      AC_ARG_WITH(mpi-libs,
+-[  --with-mpi-libs=LIBS    LIBS is space-separated list of library names 
+-                          needed for MPI, e.g. \"nsl socket mpi\"],  
+-                  for mpi_lib in $withval; do
+-                     MPILIBS="$MPILIBS -l$mpi_lib"
+-                  done; casc_user_chose_mpi=yes)
+-
+-
+-      AC_ARG_WITH(mpi-lib-dirs,
+-[  --with-mpi-lib-dirs=DIRS
+-                          DIRS is space-separated list of directories
+-                          containing the libraries specified by
+-                          \`--with-mpi-libs', e.g \"/usr/lib /usr/local/mpi/lib\"],
+-                  for mpi_lib_dir in $withval; do
+-                     MPILIBDIRS="-L$mpi_lib_dir $MPILIBDIRS"
+-                  done; casc_user_chose_mpi=yes)
+-
+-      dnl * --with-mpi-flags only adds to automatic selections, 
+-      dnl * does not override
+-
+-      AC_ARG_WITH(mpi-flags,
+-[  --with-mpi-flags=FLAGS  FLAGS is space-separated list of whatever flags other
+-                          than -l and -L are needed to link with mpi libraries],
+-                          MPIFLAGS=$withval)
+-
+-
+-      if test "$casc_user_chose_mpi" = "no"; then
+- 
+-         dnl * Set defaults for Compass cluster here.  This is the point where
+-         dnl * we call CASC_SET_MPI in CASC_FIND_MPI macro. 
+- 
+-         casc_mpi_include_dir=
+-         casc_mpi_lib_dirs=
+-         casc_mpi_libs="mpi rt rpc gs pthread"
+-
+-         for casc_incl_dir in $casc_mpi_include_dir; do
+-            MPIINCLUDE="-I$casc_incl_dir $MPIINCLUDE"
+-         done
+-         for casc_lib_dir in $casc_mpi_lib_dirs; do
+-            MPILIBDIRS="-L$casc_lib_dir $MPILIBDIRS"
+-         done
+-         for casc_lib in $casc_mpi_libs; do
+-            MPILIBS="$MPILIBS -l$casc_lib"
+-         done
+-      fi
+-
+-
+-      AC_MSG_CHECKING(for MPI include directories)
+-      AC_MSG_RESULT($MPIINCLUDE)
+-      AC_MSG_CHECKING(for MPI library directories)
+-      AC_MSG_RESULT($MPILIBDIRS)
+-      AC_MSG_CHECKING(for MPI libraries)
+-      AC_MSG_RESULT($MPILIBS)
+-      AC_MSG_CHECKING(for other MPI-related flags)
+-      AC_MSG_RESULT($MPIFLAGS)
+-
+-   fi
+-
+-])dnl
+-
+-
+-
+-dnl Define a macro for supporting SILO
+-
+-AC_DEFUN([CASC_SUPPORT_SILO],[
+-
+-# Begin CASC_SUPPORT_SILO
+-# Defines silo_PREFIX silo_INCLUDES and silo_LIBS if with-silo is specified.
+-AC_ARG_WITH(silo,
+-[ --with-silo[=PATH]  Use SILO and optionally specify where SILO is installed.],
+-, with_silo=no)
+-
+-case "$with_silo" in
+-  no)
+-    AC_MSG_NOTICE([configuring without SILO support])
+-    : Do nothing
+-  ;;
+-  yes)
+-    # SILO install path was not specified.
+-    # Look in a couple of standard locations to probe if 
+-    # SILO header files are there.
+-    AC_MSG_CHECKING([for SILO installation])
+-    for dir in /usr /usr/local; do
+-      if test -f ${dir}/include/silo.h; then
+-        silo_PREFIX=${dir}
+-        break
+-      fi
+-    done
+-    AC_MSG_RESULT([$silo_PREFIX])
+-  ;;
+-  *)
+-    # SILO install path was specified.
+-    AC_MSG_CHECKING([for SILO installation])
+-    silo_PREFIX=$with_silo
+-    silo_INCLUDES="-I${silo_PREFIX}/include"
+-    if test -f ${silo_PREFIX}/include/silo.h; then
+-        AC_MSG_RESULT([$silo_PREFIX])
+-    else
+-        AC_MSG_RESULT([$silo_PREFIX])
+-        AC_MSG_ERROR([SILO not found in $with_silo])
+-    fi
+-  ;;
+-esac
+-
+-# Determine which SILO library is built
+-if test "${silo_PREFIX+set}" = set; then
+-   AC_MSG_CHECKING([for SILO library])
+-   if test -f ${silo_PREFIX}/lib/libsilo.a; then
+-      silo_LIBS='-lsilo'
+-      AC_MSG_RESULT([using $silo_LIBS])
+-   elif test -f ${silo_PREFIX}/lib/libsiloh5.a; then
+-      silo_LIBS='-lsiloh5'
+-      AC_MSG_RESULT([using $silo_LIBS])
+-   else
+-      AC_MSG_RESULT([using $silo_LIBS])
+-      AC_MSG_ERROR([Could not fine silo library in $silo_PREFIX])
+-   fi
+-
+-   silo_LIBS="-L${silo_PREFIX}/lib ${silo_LIBS}"
+-fi
+-
+-# END CASC_SUPPORT_SILO
+-
+-])dnl End definition of CASC_SUPPORT_SILO
+-
+-dnl Define a macro for supporting generalized serial-parallel run.
+-
+-
+-AC_DEFUN([SAMRAI_SERPA],[
+-dnl Support a generalized way to run a program in serial or parallel mode.
+-dnl (serpa is serial + parallel).
+-dnl
+-dnl Arg1: name (may include relative path) to give to shell script created.
+-dnl   If omitted, the name will be serpa-run, in the top level directory.
+-dnl
+-dnl This macro brings out an automake bug.  See "IMPORTANT NOTE:" below
+-dnl for comments and how to circumvent.
+-
+-# Begin macro $0
+-
+-
+-# The generalized script needs to know about the system
+-# so it can form the appropriate parallel run command line.
+-AC_REQUIRE([AC_CANONICAL_TARGET])
+-
+-
+-dnl The parallel run program (usually mpirun) is hardwired for now,
+-dnl but it should be more flexible.
+-dnl I plan to eventualy use the following variable,
+-dnl but it is not currently used.
+-AC_ARG_WITH(parallel-run-bin,[
+-  --with-parallel-run-bin=STRING
+-		Specify the parallel run binary (i.e., mpirun, dmpirun,
+-		poe, etc) to be used in the serial-parallel run script.
+-],[
+-case "$with_parallel_run_bin" in
+-  no)
+-    # Set PARALLEL_RUN_BIN to blank to remove it from the serpa-run script.
+-    PARALLEL_RUN_BIN=;;
+-  yes)
+-    # Unset the variable PARALLEL_RUN_BIN so it is guessed in the next step.
+-    unset PARALLEL_RUN_BIN;
+-    ;;
+-  *)
+-    # Set PARALLEL_RUN_BIN to user specification.
+-    PARALLEL_RUN_BIN="$with_parallel_run_bin"
+-    ;;
+-esac
+-BTNG_AC_LOG_VAR(with_parallel_run_bin PARALLEL_RUN_BIN target_os, with-parallel-run-bin given)
+-
+-],[
+-unset PARALLEL_RUN_BIN;
+-BTNG_AC_LOG_VAR(with_parallel_run_bin PARALLEL_RUN_BIN target_os, with-parallel-run-bin NOT given)
+-])
+-# If PARALLEL_RUN_BIN is unset, guess it.
+-if test ! "${PARALLEL_RUN_BIN+set}" = set; then
+-  case "$target_os" in
+-    osf*) PARALLEL_RUN_BIN=dmpirun
+-    ;;
+-    *) PARALLEL_RUN_BIN=mpirun
+-    ;;
+-  esac
+-  BTNG_AC_LOG_VAR(with_parallel_run_bin PARALLEL_RUN_BIN target_os, after setting PARALLEL_RUN_BIN)
+-fi
+-AC_SUBST(PARALLEL_RUN_BIN)
+-
+-
+-define(btng_serpa_run_fn,ifelse($1,,serpa-run,$1))
+-dnl Create serpa-run.in file (at autoconf time, before configure time)
+-dnl File serpa-run.in will be used at configure time to create serpa-run
+-dnl in the compile tree.
+-syscmd([ file_name=']btng_serpa_run_fn[' cat <<'__EOM__'> ${file_name}.in
+-#!/bin/sh
+-
+-# This script runs an executable program serially or in parallel.
+-
+-# The syntax for running programs in parallel differs from platform to platform,
+-# software to software.  This script automatically uses the correct syntax for
+-# the environments that it knows about.  For the environments it does not know,
+-# it has a default that may work.
+-
+-# This script defines the set of tests to put the program through.
+-# This set is parametrized by these variables:
+-# nproc_list: space- or comma-separated list of number of processors to use.
+-
+-
+-# The name and directory of this script
+-# (Do not rely on existence of dirname and basename programs.)
+-script_name=`echo ${0} | sed -e 's:.*/::'`;
+-dir_name=`echo ${0} | sed -e 's:^\([^/]*\)$:./\1:' -e 's:/[^/]*$::'`;
+-
+-# Define a way to gracefully die from within this script.
+-# The die function is similar to Perl's.
+-# Arguments are: <exit_value> <exit_message>
+-die () {
+-    echo "ERROR_MESSAGE_FROM ${script_name}:"
+-    if [ -n "${2}" ]; then echo "Error ${2}"; fi
+-    if [ -n "${1}" ]; then exit ${1}; fi
+-    exit 99
+-}
+-
+-
+-# When no argument is given, print the help message and exit.
+-if [ "${1}" = '-h' ] || [ "${1}" = '--help' ] || [ ${#} -lt 2 ] ; then
+-  cat <<-_EOF_
+-	Usage: ${script_name} <list of nproc> <program name>
+-
+-	This is a generalized script to run a program in serial
+-	and/or parallel.
+-
+-	The number of processors are given by <list of nproc>,
+-	which must be a comma- or space-delimited list of integers.
+-	Example: "${script_name} 1,2,5 parallel_program" runs
+-	parallel_program 3 times with 1, 2 and 5 processors in turn.
+-
+-	The special case of number of processors = 0 means to run serially.
+-	This differs from one processor in that one processor means to run
+-	in parallel, but with one processor.
+-
+-	This script exits with an error if any instance of
+-	running the program fails.
+-
+-	If SERPA_REDIRECT_OUTPUT_TO is defined in the environment,
+-	standard output of the program is redirected there.
+-	If SERPA_REDIRECT_ERRORS_TO is defined in the environment,
+-	error output of the program is redirected there.
+-	Outputs directly from THIS script are NOT affected
+-	by these environment variables.
+-
+-	If SERPA_MAX_FAILS is defined, ${script_name} will
+-	continue until that many failures before exiting.
+-	The default is 1 failure (${script_name} exits on the
+-	first failure).  The exit value will always be the
+-	failure count.
+-
+-	When a serial run os made, if SERPA_PERFORMANCE_FILE
+-	is defined and is the name of a file, that file is searched
+-	for performance data.  The run is timed and the result
+-	is compared to the performance data found.
+-	_EOF_
+-exit
+-fi
+-
+-# How to invoke a GNU compatible time command
+-if [ -z "${SERPA_GNUTIME}" ]; then
+-    SERPA_GNUTIME=/usr/bin/time
+-fi
+-
+-# Percent difference for performance comparisons
+-if [ -z "${SERPA_DIFFERENCE}" ]; then
+-    SERPA_DIFFERENCE=0.1
+-fi
+-
+-
+-# Check the redirection environment variables.
+-# See the help message for how these are used.
+-if [ -n "${SERPA_REDIRECT_OUTPUT_TO}" ]; then
+-  output_redirection_string="1> ${SERPA_REDIRECT_OUTPUT_TO}"
+-else
+-  unset output_redirection_string
+-fi
+-if [ -n "${SERPA_REDIRECT_ERRORS_TO}" ]; then
+-  errors_redirection_string="2> ${SERPA_REDIRECT_ERRORS_TO}"
+-else
+-  unset errors_redirection_string
+-fi
+-
+-# Save the arguments for later reference.
+-serpa_args="${@}"
+-
+-
+-# Get the number of processors from the first argument of this script.
+-nproc_list=${1}; shift;
+-# We allow comma-delimited lists, so we now remove those commas.
+-echo ${nproc_list} | grep '^[0-9 ,]\{1,\}$' > /dev/null	\
+-  || die 1 "Invalid number of processors list '${nproc_list}'"
+-nproc_list=`echo ${nproc_list} | sed 's/,/ /g'`
+-
+-# Get the program name from the next argument of this script.
+-program=${1}; shift;
+-test -x ${program} || die 1 "No execute permission on '${program}'"
+-
+-
+-# Determine host name for use below.
+-if [ ${?}{HOST} ]; then
+-  HOST=`uname -n`
+-  export HOST
+-fi
+-
+-
+-# Use additional_env to specify additional environments that
+-# should be set before running.  Although you can, do not use
+-# this to set environments for programs.  It is meant to be
+-# environments for the parallel execution program such as
+-# mpirun.
+-additional_env=
+-
+-
+-# Variables required for using parallelrun.  These may not be needed,
+-# but if they are needed and unset, there will be an error.
+-# Some of these strings are determined at configure time.
+-parallelrun_prog="@PARALLEL_RUN_BIN@";	# Name of parallelrun program.
+-
+-
+-# Determine what platform we are on.
+-target_cpu=@target_cpu@
+-target_os=@target_os@
+-target_vendor=@target_vendor@
+-
+-
+-# Determine the machine file name.
+-serpa_machine_file='serpa.machines'
+-
+-
+-# Define a function to run a program in parallel.
+-# We have to do this because different environments require different syntaxes.
+-# The function arguments are:
+-#   program name
+-#   number of processor
+-#
+-# We define the function in a big if-else statement based on the
+-# target computer.  We assume that there is a one-to-one correspondence.
+-# If there is not, there may have to be a nested if-structure.
+-#
+-if echo "${HOST}" | egrep '^(blue|frost)[0-9]' > /dev/null ; then
+-
+-  # For blue, a specific singleton platform.
+-  run_multiproc () {
+-    MP_RESD="YES"
+-    MP_HOSTFILE=""
+-    MP_EUILIB=us
+-    MP_EUIDEVICE=css0
+-    export MP_RESD MP_HOSTFILE MP_EUILIB MP_EUIDEVICE
+-  # IBM shell functions eat their parameters after the first assignment
+-  # from them so save the parameters first.
+-    case "${HOST}" in
+-      blue*) proc_per_node=4;;
+-      frost*) proc_per_node=16;;
+-    esac
+-    program=${1}; nproc=${2}; shift 2
+-    nodes=`expr 1 + \( ${nproc} - 1 \) / ${proc_per_node}`
+-    com="${additional_env} ${parallelrun_prog} ${program}"
+-    com="${com} -rmpool 0 -nodes ${nodes} -procs ${nproc} ${@}"
+-    # com="${program} ${@} -procs ${nproc}"
+-    echo ${com}
+-    eval ${com} ${output_redirection_string} ${errors_redirection_string}
+-    return ${?}
+-  }
+-
+-elif echo "${HOST}" | grep '^tc2k' > /dev/null ; then
+-
+-  # For tc2k, a specific singleton platform (contributed by Brian Miller).
+-  run_multiproc () {
+-    program=${1}; nproc=${2}; shift 2
+-    com="${additional_env} prun -n ${nproc} ${program} ${@}"
+-    com="${program} ${@} -p ${nproc}"
+-    echo ${com}
+-    eval ${com} ${output_redirection_string} ${errors_redirection_string}
+-    return ${?}
+-  }
+-
+-elif echo "${HOST}" | egrep '^(mcr|pengra|thunder)[0-9]' > /dev/null ; then
+-
+-  # For LC Linux clusters using srun.
+-  run_multiproc () {
+-    program=${1}; nproc=${2}; shift 2
+-    com="${additional_env} srun -n${nproc} -p pdebug ${program} ${@}"
+-    echo ${com}
+-    eval ${com} ${output_redirection_string} ${errors_redirection_string}
+-    return ${?}
+-  }
+-
+-elif echo "${target_os}" | grep '^osf'	> /dev/null ; then
+-
+-  # For Dec OSF.
+-  run_multiproc () {
+-    program=${1}; nproc=${2}; shift 2
+-    com="${additional_env} dmpirun -np ${nproc} ${program} ${@}"
+-    echo ${com}
+-    eval ${com} ${output_redirection_string} ${errors_redirection_string}
+-    return ${?}
+-  }
+-
+-elif echo "${target_os}" | grep '^solaris' > /dev/null	\
+-  || echo "${target_os}" | grep '^irix' > /dev/null	\
+-  || echo "${target_os}" | grep '^linux' > /dev/null	\
+-  ; then
+-
+-  # Most platforms fall into this case.
+-  run_multiproc () {
+-    program=${1}; nproc=${2}; shift 2
+-    com="${additional_env} ${parallelrun_prog}"
+-    com="${com} -machinefile ${dir_name}/${serpa_machine_file} -np ${nproc} ${program} ${@}"
+-    echo ${com}
+-    eval ${com} ${output_redirection_string} ${errors_redirection_string}
+-    return ${?}
+-  }
+-
+-else
+-
+-  # Simplest case.
+-  # This is generic.  It may not work, but it is our best guess
+-  # without knowledge of the system.
+-  run_multiproc () {
+-    program=${1}; nproc=${2}; shift 2
+-    com="${additional_env} ${program} -np ${nproc} ${@}"
+-    echo ${com}
+-    eval ${com} ${output_redirection_string} ${errors_redirection_string}
+-    return ${?}
+-  }
+-
+-fi
+-
+-
+-# Initialize the failure count.
+-serpa_num_failures=0
+-test -z "${SERPA_MAX_FAILS}" && SERPA_MAX_FAILS=1
+-
+-# Run the program.
+-for nproc in ${nproc_list}; do
+-  cat <<-_EOM_
+-	${script_name}================================================
+-	RUNNING: ${script_name} ${nproc} ${program} ${@}
+-	${script_name}::::::::::::::::::::::::::::::::::::::::::::::::
+-	_EOM_
+-  if test "${nproc}" = 0 ; then
+-    # Run serially.
+-
+-    # If performance file exists then with performance testing
+-    # otherwise do a normal sequential run
+-    if test "${SERPA_PERFORMANCE_FILE+set}" = set &&
+-       test -f "${SERPA_PERFORMANCE_FILE}"; then
+-
+-	# Run with performance check. 
+-	com="${additional_env} ${program} ${@}"
+-	echo "${com}"
+-	${SERPA_GNUTIME} -o $$.time -f "%e %t" ${com} \
+-	    ${output_redirection_string} ${errors_redirection_string}
+-	exit_value=${?}
+-
+-	# Parse temporary file to get recorded time/memory usage
+-	read etime memory < $$.time
+-	rm $$.time
+-	
+-	# Report the run time/memory usage 
+-	echo "serpa-perf ${nproc} <${com}> ${etime} ${memory}"
+-
+-	# Check if time is out of bounds
+-	search=`grep "serpa-perf ${nproc} <${com}>" ${SERPA_PERFORMANCE_FILE}`
+-	if test "$?" = "0";then
+-	    search=`echo $search | sed 's/.*>//'`
+-	    read compare_time compare_memory <<EOF	    
+-$search
+-EOF
+-        else
+-	    compare_time=999999
+-	    compare_memory=0
+-	fi
+-
+-	difference=`bc -l <<EOF
+-a=${etime}
+-b=${compare_time}
+-t=${SERPA_DIFFERENCE}
+-d=a-b
+-if ( d < 0 ) {
+-	d = -d
+-}
+-p=d/b
+-print (p < t), "\n"
+-EOF`
+-	if test "${difference}" = "1"; then
+-	    echo "PERFORMANCE PASSED: target ${compare_time} (seconds) current ${etime} sec"
+-	else
+-	    echo "PERFORMANCE FAIL: target ${compare_time} (seconds) current ${etime}"
+-	fi
+-
+-	# Currently don't do memory check since it is not reporting anything.
+-
+-    else
+-	# Run without performance testing
+-	com="${additional_env} ${program} ${@}"
+-	echo "${com}"
+-	eval ${com} ${output_redirection_string} ${errors_redirection_string}
+-	exit_value=${?}
+-    fi
+-  else
+-    # Because parallel runs sometimes fails due to problems unrelated
+-    # to the program, we give it several tries before declaring failure.
+-    if test -z "${SERPA_PARALLEL_TRIES}"; then SERPA_PARALLEL_TRIES=1; fi
+-    c=1
+-    while test ${c} -le ${SERPA_PARALLEL_TRIES} ; do
+-      if test ${c} -gt 1 ; then
+-        echo "possibly failed.  TRY number ${c}"
+-      fi
+-      run_multiproc ${program} ${nproc} "${@}"
+-      exit_value=${?}
+-      if [ ${exit_value} = 0 ]; then
+-        break
+-      fi
+-      c=`expr ${c} + 1`
+-    done
+-  fi
+-  # Report pass or fail.
+-  # pf_string=FAILED; test "${exit_value}" = 0 && pf_string=PASSED
+-  pf_string=FAILED; test "${exit_value}" = 0 && pf_string=COMPLETED
+-  cat <<-_EOM_
+-	${script_name}::::::::::::::::::::::::::::::::::::::::::::::::
+-	${pf_string}: ${script_name} ${nproc} ${program} ${@}
+-	${script_name}================================================
+-	_EOM_
+-  # Count failures and possibly exit.
+-  if test ${exit_value} -ne 0 ; then
+-    serpa_num_failures=`expr ${serpa_num_failures} + 1`;
+-    if test ${serpa_num_failures} -eq ${SERPA_MAX_FAILS}; then
+-      die 1 "FAIL running ${program} with ${nproc} processors"
+-    fi
+-  fi
+-done
+-
+-if test ${serpa_num_failures} -eq 0; then
+-  echo "${script_name} ${serpa_args} passed."
+-else
+-  echo "${script_name} ${serpa_args} had ${serpa_num_failures} failures."
+-fi
+-exit ${serpa_num_failures}
+-
+-# End of script.
+-__EOM__
+-])dnl End of macro to create serpa-run.in
+-
+-
+-dnl Create the configured file from its .in version.
+-dnl AC_CONFIG_FILES( btng_serpa_run_fn, chmod +x btng_serpa_run_fn )
+-dnl IMPORTANT NOTE:
+-dnl Using the defined symbol btng_serpa_run_fn in AC_CONFIG_FILES
+-dnl causes automake to complain that btng_serpa_run_fn.in is not found.
+-dnl Since that symbol is a defined m4 macro, this is an automake deficiency.
+-dnl Until this is fixed, the above AC_CONFIG_FILES usage will not
+-dnl work!  You must call AC_CONFIG_FILES with the actual names of
+-dnl the file instead of the m4-defined symbol btng_serpa_run_fn.
+-
+-
+-
+-AC_CONFIG_COMMANDS([create-serpa-machine-file],[
+-# Generate a machine file if needed.
+-if test ! -r "$serpa_machine_file" ; then
+-  # Set the serpa machine file name to be in the same directory as
+-  # the serpa-run script.
+-  btng_serpa_dir_name=`echo ']btng_serpa_run_fn[' | sed -e ['s:^\([^/]*\)$:./\1:'] -e ['s:/[^/]*$::']`;
+-  btng_serpa_machine_file="${btng_serpa_dir_name}/serpa.machines"
+-  hostname="`hostname`"
+-  cat <<-__EOF__>"$btng_serpa_machine_file"
+-	$hostname
+-	$hostname
+-	$hostname
+-	$hostname
+-	__EOF__
+-fi
+-],[
+-dnl Settings to make before running the above.
+-])
+-
+-
+-# Add the serpa machine file to the clean list.
+-btng_serpa_dir_name=`echo ']btng_serpa_run_fn[' | sed -e ['s:^\([^/]*\)$:./\1:'] -e ['s:/[^/]*$::']`;
+-btng_serpa_machine_file="${btng_serpa_dir_name}/serpa.machines"
+-DISTCLEANFILES="$DISTCLEANFILES ${btng_serpa_machine_file}"
+-BTNG_AC_LOG_VAR(btng_serpa_machine_file DISTCLEANFILES, in support-serpa-run)
+-
+-
+-undefine([btng_serpa_run_fn])
+-
+-
+-# End macro $0
+-])dnl End BTNG_SUPPORT_SERPA macro.
+-
+-AC_DEFUN([SAMRAI_SPLIT_LIBS_STRING],[
+-dnl
+-dnl Macro SAMRAI_SPLIT_LIBS_STRING
+-dnl Written by Brian Gunney.
+-dnl
+-dnl This macro takes an automake-style LIBS string (arg1) and
+-dnl splits it into the -L part (arg2, what SAMRAI usually calls
+-dnl LIB_PATH) and -l part (arg3, what SAMRAI calls LIB_NAME).
+-dnl The rest are also lumped into the LIB_NAME part, for lack
+-dnl of generality in the SAMRAI distinction.
+-dnl
+-dnl I think the SAMRAI format is limitting because not all parts
+-dnl if the LIBS strings can be recategorized into LIB_PATH and
+-dnl LIB_NAME parts.  But this macro allows us to use macros that
+-dnl conform to the standard automake format.  BTNG.
+-dnl
+-# Split $1 into the LIB_PATH part ($2) and the LIB_NAME part ($3)
+-if test -n "${$1}"; then
+-  for i in ${$1}; do
+-    case "$i" in
+-    -L*) $2="${$2} $i" ;;
+-    *) $3="${$3} $i" ;;
+-    esac
+-  done
+-fi
+-])
+-
+diff --git a/config/config.guess b/config/config.guess
+index 6bdac8d..1972fda 100755
+--- a/config/config.guess
++++ b/config/config.guess
+@@ -1,13 +1,12 @@
+ #! /bin/sh
+ # Attempt to guess a canonical system name.
+-#   Copyright (C) 1992, 1993, 1994, 1995, 1996, 1997, 1998, 1999,
+-#   2000, 2001, 2002, 2003 Free Software Foundation, Inc.
++#   Copyright 1992-2021 Free Software Foundation, Inc.
+ 
+-timestamp='2003-05-09'
++timestamp='2021-01-25'
+ 
+ # This file is free software; you can redistribute it and/or modify it
+ # under the terms of the GNU General Public License as published by
+-# the Free Software Foundation; either version 2 of the License, or
++# the Free Software Foundation; either version 3 of the License, or
+ # (at your option) any later version.
+ #
+ # This program is distributed in the hope that it will be useful, but
+@@ -16,33 +15,31 @@ timestamp='2003-05-09'
+ # General Public License for more details.
+ #
+ # You should have received a copy of the GNU General Public License
+-# along with this program; if not, write to the Free Software
+-# Foundation, Inc., 59 Temple Place - Suite 330, Boston, MA 02111-1307, USA.
++# along with this program; if not, see <https://www.gnu.org/licenses/>.
+ #
+ # As a special exception to the GNU General Public License, if you
+ # distribute this file as part of a program that contains a
+ # configuration script generated by Autoconf, you may include it under
+-# the same distribution terms that you use for the rest of that program.
+-
+-# Originally written by Per Bothner <per@bothner.com>.
+-# Please send patches to <config-patches@gnu.org>.  Submit a context
+-# diff and a properly formatted ChangeLog entry.
++# the same distribution terms that you use for the rest of that
++# program.  This Exception is an additional permission under section 7
++# of the GNU General Public License, version 3 ("GPLv3").
++#
++# Originally written by Per Bothner; maintained since 2000 by Ben Elliston.
+ #
+-# This script attempts to guess a canonical system name similar to
+-# config.sub.  If it succeeds, it prints the system name on stdout, and
+-# exits with 0.  Otherwise, it exits with 1.
++# You can get the latest version of this script from:
++# https://git.savannah.gnu.org/cgit/config.git/plain/config.guess
+ #
+-# The plan is that this can be called by configure scripts if you
+-# don't specify an explicit build system type.
++# Please send patches to <config-patches@gnu.org>.
++
+ 
+-me=`echo "$0" | sed -e 's,.*/,,'`
++me=$(echo "$0" | sed -e 's,.*/,,')
+ 
+ usage="\
+ Usage: $0 [OPTION]
+ 
+ Output the configuration name of the system \`$me' is run on.
+ 
+-Operation modes:
++Options:
+   -h, --help         print this help, then exit
+   -t, --time-stamp   print date of last modification, then exit
+   -v, --version      print version number, then exit
+@@ -53,8 +50,7 @@ version="\
+ GNU config.guess ($timestamp)
+ 
+ Originally written by Per Bothner.
+-Copyright (C) 1992, 1993, 1994, 1995, 1996, 1997, 1998, 1999, 2000, 2001
+-Free Software Foundation, Inc.
++Copyright 1992-2021 Free Software Foundation, Inc.
+ 
+ This is free software; see the source for copying conditions.  There is NO
+ warranty; not even for MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE."
+@@ -66,11 +62,11 @@ Try \`$me --help' for more information."
+ while test $# -gt 0 ; do
+   case $1 in
+     --time-stamp | --time* | -t )
+-       echo "$timestamp" ; exit 0 ;;
++       echo "$timestamp" ; exit ;;
+     --version | -v )
+-       echo "$version" ; exit 0 ;;
++       echo "$version" ; exit ;;
+     --help | --h* | -h )
+-       echo "$usage"; exit 0 ;;
++       echo "$usage"; exit ;;
+     -- )     # Stop option processing
+        shift; break ;;
+     - )	# Use stdin as input.
+@@ -88,8 +84,6 @@ if test $# != 0; then
+   exit 1
+ fi
+ 
+-trap 'exit 1' 1 2 15
+-
+ # CC_FOR_BUILD -- compiler used by this script. Note that the use of a
+ # compiler to aid in system detection is discouraged as it requires
+ # temporary files to be created and, as you can see below, it is a
+@@ -100,47 +94,92 @@ trap 'exit 1' 1 2 15
+ 
+ # Portable tmp directory creation inspired by the Autoconf team.
+ 
+-set_cc_for_build='
+-trap "exitcode=\$?; (rm -f \$tmpfiles 2>/dev/null; rmdir \$tmp 2>/dev/null) && exit \$exitcode" 0 ;
+-trap "rm -f \$tmpfiles 2>/dev/null; rmdir \$tmp 2>/dev/null; exit 1" 1 2 13 15 ;
+-: ${TMPDIR=/tmp} ;
+- { tmp=`(umask 077 && mktemp -d -q "$TMPDIR/cgXXXXXX") 2>/dev/null` && test -n "$tmp" && test -d "$tmp" ; } ||
+- { test -n "$RANDOM" && tmp=$TMPDIR/cg$$-$RANDOM && (umask 077 && mkdir $tmp) ; } ||
+- { echo "$me: cannot create a temporary directory in $TMPDIR" >&2 ; exit 1 ; } ;
+-dummy=$tmp/dummy ;
+-tmpfiles="$dummy.c $dummy.o $dummy.rel $dummy" ;
+-case $CC_FOR_BUILD,$HOST_CC,$CC in
+- ,,)    echo "int x;" > $dummy.c ;
+-	for c in cc gcc c89 c99 ; do
+-	  if ($c -c -o $dummy.o $dummy.c) >/dev/null 2>&1 ; then
+-	     CC_FOR_BUILD="$c"; break ;
+-	  fi ;
+-	done ;
+-	if test x"$CC_FOR_BUILD" = x ; then
+-	  CC_FOR_BUILD=no_compiler_found ;
+-	fi
+-	;;
+- ,,*)   CC_FOR_BUILD=$CC ;;
+- ,*,*)  CC_FOR_BUILD=$HOST_CC ;;
+-esac ;'
++tmp=
++# shellcheck disable=SC2172
++trap 'test -z "$tmp" || rm -fr "$tmp"' 0 1 2 13 15
++
++set_cc_for_build() {
++    # prevent multiple calls if $tmp is already set
++    test "$tmp" && return 0
++    : "${TMPDIR=/tmp}"
++    # shellcheck disable=SC2039
++    { tmp=$( (umask 077 && mktemp -d "$TMPDIR/cgXXXXXX") 2>/dev/null) && test -n "$tmp" && test -d "$tmp" ; } ||
++	{ test -n "$RANDOM" && tmp=$TMPDIR/cg$$-$RANDOM && (umask 077 && mkdir "$tmp" 2>/dev/null) ; } ||
++	{ tmp=$TMPDIR/cg-$$ && (umask 077 && mkdir "$tmp" 2>/dev/null) && echo "Warning: creating insecure temp directory" >&2 ; } ||
++	{ echo "$me: cannot create a temporary directory in $TMPDIR" >&2 ; exit 1 ; }
++    dummy=$tmp/dummy
++    case ${CC_FOR_BUILD-},${HOST_CC-},${CC-} in
++	,,)    echo "int x;" > "$dummy.c"
++	       for driver in cc gcc c89 c99 ; do
++		   if ($driver -c -o "$dummy.o" "$dummy.c") >/dev/null 2>&1 ; then
++		       CC_FOR_BUILD="$driver"
++		       break
++		   fi
++	       done
++	       if test x"$CC_FOR_BUILD" = x ; then
++		   CC_FOR_BUILD=no_compiler_found
++	       fi
++	       ;;
++	,,*)   CC_FOR_BUILD=$CC ;;
++	,*,*)  CC_FOR_BUILD=$HOST_CC ;;
++    esac
++}
+ 
+ # This is needed to find uname on a Pyramid OSx when run in the BSD universe.
+ # (ghazi@noc.rutgers.edu 1994-08-24)
+-if (test -f /.attbin/uname) >/dev/null 2>&1 ; then
++if test -f /.attbin/uname ; then
+ 	PATH=$PATH:/.attbin ; export PATH
+ fi
+ 
+-UNAME_MACHINE=`(uname -m) 2>/dev/null` || UNAME_MACHINE=unknown
+-UNAME_RELEASE=`(uname -r) 2>/dev/null` || UNAME_RELEASE=unknown
+-UNAME_SYSTEM=`(uname -s) 2>/dev/null`  || UNAME_SYSTEM=unknown
+-UNAME_VERSION=`(uname -v) 2>/dev/null` || UNAME_VERSION=unknown
++UNAME_MACHINE=$( (uname -m) 2>/dev/null) || UNAME_MACHINE=unknown
++UNAME_RELEASE=$( (uname -r) 2>/dev/null) || UNAME_RELEASE=unknown
++UNAME_SYSTEM=$( (uname -s) 2>/dev/null) || UNAME_SYSTEM=unknown
++UNAME_VERSION=$( (uname -v) 2>/dev/null) || UNAME_VERSION=unknown
++
++case "$UNAME_SYSTEM" in
++Linux|GNU|GNU/*)
++	LIBC=unknown
++
++	set_cc_for_build
++	cat <<-EOF > "$dummy.c"
++	#include <features.h>
++	#if defined(__UCLIBC__)
++	LIBC=uclibc
++	#elif defined(__dietlibc__)
++	LIBC=dietlibc
++	#elif defined(__GLIBC__)
++	LIBC=gnu
++	#else
++	#include <stdarg.h>
++	/* First heuristic to detect musl libc.  */
++	#ifdef __DEFINED_va_list
++	LIBC=musl
++	#endif
++	#endif
++	EOF
++	eval "$($CC_FOR_BUILD -E "$dummy.c" 2>/dev/null | grep '^LIBC' | sed 's, ,,g')"
++
++	# Second heuristic to detect musl libc.
++	if [ "$LIBC" = unknown ] &&
++	   command -v ldd >/dev/null &&
++	   ldd --version 2>&1 | grep -q ^musl; then
++		LIBC=musl
++	fi
++
++	# If the system lacks a compiler, then just pick glibc.
++	# We could probably try harder.
++	if [ "$LIBC" = unknown ]; then
++		LIBC=gnu
++	fi
++	;;
++esac
+ 
+ # Note: order is significant - the case branches are not exclusive.
+ 
+-case "${UNAME_MACHINE}:${UNAME_SYSTEM}:${UNAME_RELEASE}:${UNAME_VERSION}" in
++case "$UNAME_MACHINE:$UNAME_SYSTEM:$UNAME_RELEASE:$UNAME_VERSION" in
+     *:NetBSD:*:*)
+ 	# NetBSD (nbsd) targets should (where applicable) match one or
+-	# more of the tupples: *-*-netbsdelf*, *-*-netbsdaout*,
++	# more of the tuples: *-*-netbsdelf*, *-*-netbsdaout*,
+ 	# *-*-netbsdecoff* and *-*-netbsd*.  For targets that recently
+ 	# switched to ELF, *-*-netbsd* would select the old
+ 	# object file format.  This provides both forward
+@@ -149,23 +188,34 @@ case "${UNAME_MACHINE}:${UNAME_SYSTEM}:${UNAME_RELEASE}:${UNAME_VERSION}" in
+ 	#
+ 	# Note: NetBSD doesn't particularly care about the vendor
+ 	# portion of the name.  We always set it to "unknown".
+-	sysctl="sysctl -n hw.machine_arch"
+-	UNAME_MACHINE_ARCH=`(/sbin/$sysctl 2>/dev/null || \
+-	    /usr/sbin/$sysctl 2>/dev/null || echo unknown)`
+-	case "${UNAME_MACHINE_ARCH}" in
++	UNAME_MACHINE_ARCH=$( (uname -p 2>/dev/null || \
++	    /sbin/sysctl -n hw.machine_arch 2>/dev/null || \
++	    /usr/sbin/sysctl -n hw.machine_arch 2>/dev/null || \
++	    echo unknown))
++	case "$UNAME_MACHINE_ARCH" in
++	    aarch64eb) machine=aarch64_be-unknown ;;
+ 	    armeb) machine=armeb-unknown ;;
+ 	    arm*) machine=arm-unknown ;;
+ 	    sh3el) machine=shl-unknown ;;
+ 	    sh3eb) machine=sh-unknown ;;
+-	    *) machine=${UNAME_MACHINE_ARCH}-unknown ;;
++	    sh5el) machine=sh5le-unknown ;;
++	    earmv*)
++		arch=$(echo "$UNAME_MACHINE_ARCH" | sed -e 's,^e\(armv[0-9]\).*$,\1,')
++		endian=$(echo "$UNAME_MACHINE_ARCH" | sed -ne 's,^.*\(eb\)$,\1,p')
++		machine="${arch}${endian}"-unknown
++		;;
++	    *) machine="$UNAME_MACHINE_ARCH"-unknown ;;
+ 	esac
+ 	# The Operating System including object format, if it has switched
+-	# to ELF recently, or will in the future.
+-	case "${UNAME_MACHINE_ARCH}" in
++	# to ELF recently (or will in the future) and ABI.
++	case "$UNAME_MACHINE_ARCH" in
++	    earm*)
++		os=netbsdelf
++		;;
+ 	    arm*|i386|m68k|ns32k|sh3*|sparc|vax)
+-		eval $set_cc_for_build
++		set_cc_for_build
+ 		if echo __ELF__ | $CC_FOR_BUILD -E - 2>/dev/null \
+-			| grep __ELF__ >/dev/null
++			| grep -q __ELF__
+ 		then
+ 		    # Once all utilities can be ECOFF (netbsdecoff) or a.out (netbsdaout).
+ 		    # Return netbsd for either.  FIX?
+@@ -175,7 +225,14 @@ case "${UNAME_MACHINE}:${UNAME_SYSTEM}:${UNAME_RELEASE}:${UNAME_VERSION}" in
+ 		fi
+ 		;;
+ 	    *)
+-	        os=netbsd
++		os=netbsd
++		;;
++	esac
++	# Determine ABI tags.
++	case "$UNAME_MACHINE_ARCH" in
++	    earm*)
++		expr='s/^earmv[0-9]/-eabi/;s/eb$//'
++		abi=$(echo "$UNAME_MACHINE_ARCH" | sed -e "$expr")
+ 		;;
+ 	esac
+ 	# The OS release
+@@ -183,189 +240,223 @@ case "${UNAME_MACHINE}:${UNAME_SYSTEM}:${UNAME_RELEASE}:${UNAME_VERSION}" in
+ 	# thus, need a distinct triplet. However, they do not need
+ 	# kernel version information, so it can be replaced with a
+ 	# suitable tag, in the style of linux-gnu.
+-	case "${UNAME_VERSION}" in
++	case "$UNAME_VERSION" in
+ 	    Debian*)
+ 		release='-gnu'
+ 		;;
+ 	    *)
+-		release=`echo ${UNAME_RELEASE}|sed -e 's/[-_].*/\./'`
++		release=$(echo "$UNAME_RELEASE" | sed -e 's/[-_].*//' | cut -d. -f1,2)
+ 		;;
+ 	esac
+ 	# Since CPU_TYPE-MANUFACTURER-KERNEL-OPERATING_SYSTEM:
+ 	# contains redundant information, the shorter form:
+ 	# CPU_TYPE-MANUFACTURER-OPERATING_SYSTEM is used.
+-	echo "${machine}-${os}${release}"
+-	exit 0 ;;
+-    amiga:OpenBSD:*:*)
+-	echo m68k-unknown-openbsd${UNAME_RELEASE}
+-	exit 0 ;;
+-    arc:OpenBSD:*:*)
+-	echo mipsel-unknown-openbsd${UNAME_RELEASE}
+-	exit 0 ;;
+-    hp300:OpenBSD:*:*)
+-	echo m68k-unknown-openbsd${UNAME_RELEASE}
+-	exit 0 ;;
+-    mac68k:OpenBSD:*:*)
+-	echo m68k-unknown-openbsd${UNAME_RELEASE}
+-	exit 0 ;;
+-    macppc:OpenBSD:*:*)
+-	echo powerpc-unknown-openbsd${UNAME_RELEASE}
+-	exit 0 ;;
+-    mvme68k:OpenBSD:*:*)
+-	echo m68k-unknown-openbsd${UNAME_RELEASE}
+-	exit 0 ;;
+-    mvme88k:OpenBSD:*:*)
+-	echo m88k-unknown-openbsd${UNAME_RELEASE}
+-	exit 0 ;;
+-    mvmeppc:OpenBSD:*:*)
+-	echo powerpc-unknown-openbsd${UNAME_RELEASE}
+-	exit 0 ;;
+-    pmax:OpenBSD:*:*)
+-	echo mipsel-unknown-openbsd${UNAME_RELEASE}
+-	exit 0 ;;
+-    sgi:OpenBSD:*:*)
+-	echo mipseb-unknown-openbsd${UNAME_RELEASE}
+-	exit 0 ;;
+-    sun3:OpenBSD:*:*)
+-	echo m68k-unknown-openbsd${UNAME_RELEASE}
+-	exit 0 ;;
+-    wgrisc:OpenBSD:*:*)
+-	echo mipsel-unknown-openbsd${UNAME_RELEASE}
+-	exit 0 ;;
++	echo "$machine-${os}${release}${abi-}"
++	exit ;;
++    *:Bitrig:*:*)
++	UNAME_MACHINE_ARCH=$(arch | sed 's/Bitrig.//')
++	echo "$UNAME_MACHINE_ARCH"-unknown-bitrig"$UNAME_RELEASE"
++	exit ;;
+     *:OpenBSD:*:*)
+-	echo ${UNAME_MACHINE}-unknown-openbsd${UNAME_RELEASE}
+-	exit 0 ;;
++	UNAME_MACHINE_ARCH=$(arch | sed 's/OpenBSD.//')
++	echo "$UNAME_MACHINE_ARCH"-unknown-openbsd"$UNAME_RELEASE"
++	exit ;;
++    *:LibertyBSD:*:*)
++	UNAME_MACHINE_ARCH=$(arch | sed 's/^.*BSD\.//')
++	echo "$UNAME_MACHINE_ARCH"-unknown-libertybsd"$UNAME_RELEASE"
++	exit ;;
++    *:MidnightBSD:*:*)
++	echo "$UNAME_MACHINE"-unknown-midnightbsd"$UNAME_RELEASE"
++	exit ;;
++    *:ekkoBSD:*:*)
++	echo "$UNAME_MACHINE"-unknown-ekkobsd"$UNAME_RELEASE"
++	exit ;;
++    *:SolidBSD:*:*)
++	echo "$UNAME_MACHINE"-unknown-solidbsd"$UNAME_RELEASE"
++	exit ;;
++    *:OS108:*:*)
++	echo "$UNAME_MACHINE"-unknown-os108_"$UNAME_RELEASE"
++	exit ;;
++    macppc:MirBSD:*:*)
++	echo powerpc-unknown-mirbsd"$UNAME_RELEASE"
++	exit ;;
++    *:MirBSD:*:*)
++	echo "$UNAME_MACHINE"-unknown-mirbsd"$UNAME_RELEASE"
++	exit ;;
++    *:Sortix:*:*)
++	echo "$UNAME_MACHINE"-unknown-sortix
++	exit ;;
++    *:Twizzler:*:*)
++	echo "$UNAME_MACHINE"-unknown-twizzler
++	exit ;;
++    *:Redox:*:*)
++	echo "$UNAME_MACHINE"-unknown-redox
++	exit ;;
++    mips:OSF1:*.*)
++	echo mips-dec-osf1
++	exit ;;
+     alpha:OSF1:*:*)
+-	if test $UNAME_RELEASE = "V4.0"; then
+-		UNAME_RELEASE=`/usr/sbin/sizer -v | awk '{print $3}'`
+-	fi
++	case $UNAME_RELEASE in
++	*4.0)
++		UNAME_RELEASE=$(/usr/sbin/sizer -v | awk '{print $3}')
++		;;
++	*5.*)
++		UNAME_RELEASE=$(/usr/sbin/sizer -v | awk '{print $4}')
++		;;
++	esac
+ 	# According to Compaq, /usr/sbin/psrinfo has been available on
+ 	# OSF/1 and Tru64 systems produced since 1995.  I hope that
+ 	# covers most systems running today.  This code pipes the CPU
+ 	# types through head -n 1, so we only detect the type of CPU 0.
+-	ALPHA_CPU_TYPE=`/usr/sbin/psrinfo -v | sed -n -e 's/^  The alpha \(.*\) processor.*$/\1/p' | head -n 1`
++	ALPHA_CPU_TYPE=$(/usr/sbin/psrinfo -v | sed -n -e 's/^  The alpha \(.*\) processor.*$/\1/p' | head -n 1)
+ 	case "$ALPHA_CPU_TYPE" in
+ 	    "EV4 (21064)")
+-		UNAME_MACHINE="alpha" ;;
++		UNAME_MACHINE=alpha ;;
+ 	    "EV4.5 (21064)")
+-		UNAME_MACHINE="alpha" ;;
++		UNAME_MACHINE=alpha ;;
+ 	    "LCA4 (21066/21068)")
+-		UNAME_MACHINE="alpha" ;;
++		UNAME_MACHINE=alpha ;;
+ 	    "EV5 (21164)")
+-		UNAME_MACHINE="alphaev5" ;;
++		UNAME_MACHINE=alphaev5 ;;
+ 	    "EV5.6 (21164A)")
+-		UNAME_MACHINE="alphaev56" ;;
++		UNAME_MACHINE=alphaev56 ;;
+ 	    "EV5.6 (21164PC)")
+-		UNAME_MACHINE="alphapca56" ;;
++		UNAME_MACHINE=alphapca56 ;;
+ 	    "EV5.7 (21164PC)")
+-		UNAME_MACHINE="alphapca57" ;;
++		UNAME_MACHINE=alphapca57 ;;
+ 	    "EV6 (21264)")
+-		UNAME_MACHINE="alphaev6" ;;
++		UNAME_MACHINE=alphaev6 ;;
+ 	    "EV6.7 (21264A)")
+-		UNAME_MACHINE="alphaev67" ;;
++		UNAME_MACHINE=alphaev67 ;;
+ 	    "EV6.8CB (21264C)")
+-		UNAME_MACHINE="alphaev68" ;;
++		UNAME_MACHINE=alphaev68 ;;
+ 	    "EV6.8AL (21264B)")
+-		UNAME_MACHINE="alphaev68" ;;
++		UNAME_MACHINE=alphaev68 ;;
+ 	    "EV6.8CX (21264D)")
+-		UNAME_MACHINE="alphaev68" ;;
++		UNAME_MACHINE=alphaev68 ;;
+ 	    "EV6.9A (21264/EV69A)")
+-		UNAME_MACHINE="alphaev69" ;;
++		UNAME_MACHINE=alphaev69 ;;
+ 	    "EV7 (21364)")
+-		UNAME_MACHINE="alphaev7" ;;
++		UNAME_MACHINE=alphaev7 ;;
+ 	    "EV7.9 (21364A)")
+-		UNAME_MACHINE="alphaev79" ;;
++		UNAME_MACHINE=alphaev79 ;;
+ 	esac
++	# A Pn.n version is a patched version.
+ 	# A Vn.n version is a released version.
+ 	# A Tn.n version is a released field test version.
+ 	# A Xn.n version is an unreleased experimental baselevel.
+ 	# 1.2 uses "1.2" for uname -r.
+-	echo ${UNAME_MACHINE}-dec-osf`echo ${UNAME_RELEASE} | sed -e 's/^[VTX]//' | tr 'ABCDEFGHIJKLMNOPQRSTUVWXYZ' 'abcdefghijklmnopqrstuvwxyz'`
+-	exit 0 ;;
+-    Alpha\ *:Windows_NT*:*)
+-	# How do we know it's Interix rather than the generic POSIX subsystem?
+-	# Should we change UNAME_MACHINE based on the output of uname instead
+-	# of the specific Alpha model?
+-	echo alpha-pc-interix
+-	exit 0 ;;
+-    21064:Windows_NT:50:3)
+-	echo alpha-dec-winnt3.5
+-	exit 0 ;;
++	echo "$UNAME_MACHINE"-dec-osf"$(echo "$UNAME_RELEASE" | sed -e 's/^[PVTX]//' | tr ABCDEFGHIJKLMNOPQRSTUVWXYZ abcdefghijklmnopqrstuvwxyz)"
++	# Reset EXIT trap before exiting to avoid spurious non-zero exit code.
++	exitcode=$?
++	trap '' 0
++	exit $exitcode ;;
+     Amiga*:UNIX_System_V:4.0:*)
+ 	echo m68k-unknown-sysv4
+-	exit 0;;
++	exit ;;
+     *:[Aa]miga[Oo][Ss]:*:*)
+-	echo ${UNAME_MACHINE}-unknown-amigaos
+-	exit 0 ;;
++	echo "$UNAME_MACHINE"-unknown-amigaos
++	exit ;;
+     *:[Mm]orph[Oo][Ss]:*:*)
+-	echo ${UNAME_MACHINE}-unknown-morphos
+-	exit 0 ;;
++	echo "$UNAME_MACHINE"-unknown-morphos
++	exit ;;
+     *:OS/390:*:*)
+ 	echo i370-ibm-openedition
+-	exit 0 ;;
++	exit ;;
++    *:z/VM:*:*)
++	echo s390-ibm-zvmoe
++	exit ;;
++    *:OS400:*:*)
++	echo powerpc-ibm-os400
++	exit ;;
+     arm:RISC*:1.[012]*:*|arm:riscix:1.[012]*:*)
+-	echo arm-acorn-riscix${UNAME_RELEASE}
+-	exit 0;;
++	echo arm-acorn-riscix"$UNAME_RELEASE"
++	exit ;;
++    arm*:riscos:*:*|arm*:RISCOS:*:*)
++	echo arm-unknown-riscos
++	exit ;;
+     SR2?01:HI-UX/MPP:*:* | SR8000:HI-UX/MPP:*:*)
+ 	echo hppa1.1-hitachi-hiuxmpp
+-	exit 0;;
++	exit ;;
+     Pyramid*:OSx*:*:* | MIS*:OSx*:*:* | MIS*:SMP_DC-OSx*:*:*)
+ 	# akee@wpdis03.wpafb.af.mil (Earle F. Ake) contributed MIS and NILE.
+-	if test "`(/bin/universe) 2>/dev/null`" = att ; then
++	if test "$( (/bin/universe) 2>/dev/null)" = att ; then
+ 		echo pyramid-pyramid-sysv3
+ 	else
+ 		echo pyramid-pyramid-bsd
+ 	fi
+-	exit 0 ;;
++	exit ;;
+     NILE*:*:*:dcosx)
+ 	echo pyramid-pyramid-svr4
+-	exit 0 ;;
+-    DRS?6000:UNIX_SV:4.2*:7*)
+-	case `/usr/bin/uname -p` in
+-	    sparc) echo sparc-icl-nx7 && exit 0 ;;
++	exit ;;
++    DRS?6000:unix:4.0:6*)
++	echo sparc-icl-nx6
++	exit ;;
++    DRS?6000:UNIX_SV:4.2*:7* | DRS?6000:isis:4.2*:7*)
++	case $(/usr/bin/uname -p) in
++	    sparc) echo sparc-icl-nx7; exit ;;
+ 	esac ;;
++    s390x:SunOS:*:*)
++	echo "$UNAME_MACHINE"-ibm-solaris2"$(echo "$UNAME_RELEASE" | sed -e 's/[^.]*//')"
++	exit ;;
+     sun4H:SunOS:5.*:*)
+-	echo sparc-hal-solaris2`echo ${UNAME_RELEASE}|sed -e 's/[^.]*//'`
+-	exit 0 ;;
++	echo sparc-hal-solaris2"$(echo "$UNAME_RELEASE"|sed -e 's/[^.]*//')"
++	exit ;;
+     sun4*:SunOS:5.*:* | tadpole*:SunOS:5.*:*)
+-	echo sparc-sun-solaris2`echo ${UNAME_RELEASE}|sed -e 's/[^.]*//'`
+-	exit 0 ;;
+-    i86pc:SunOS:5.*:*)
+-	echo i386-pc-solaris2`echo ${UNAME_RELEASE}|sed -e 's/[^.]*//'`
+-	exit 0 ;;
++	echo sparc-sun-solaris2"$(echo "$UNAME_RELEASE" | sed -e 's/[^.]*//')"
++	exit ;;
++    i86pc:AuroraUX:5.*:* | i86xen:AuroraUX:5.*:*)
++	echo i386-pc-auroraux"$UNAME_RELEASE"
++	exit ;;
++    i86pc:SunOS:5.*:* | i86xen:SunOS:5.*:*)
++	set_cc_for_build
++	SUN_ARCH=i386
++	# If there is a compiler, see if it is configured for 64-bit objects.
++	# Note that the Sun cc does not turn __LP64__ into 1 like gcc does.
++	# This test works for both compilers.
++	if test "$CC_FOR_BUILD" != no_compiler_found; then
++	    if (echo '#ifdef __amd64'; echo IS_64BIT_ARCH; echo '#endif') | \
++		(CCOPTS="" $CC_FOR_BUILD -E - 2>/dev/null) | \
++		grep IS_64BIT_ARCH >/dev/null
++	    then
++		SUN_ARCH=x86_64
++	    fi
++	fi
++	echo "$SUN_ARCH"-pc-solaris2"$(echo "$UNAME_RELEASE"|sed -e 's/[^.]*//')"
++	exit ;;
+     sun4*:SunOS:6*:*)
+ 	# According to config.sub, this is the proper way to canonicalize
+ 	# SunOS6.  Hard to guess exactly what SunOS6 will be like, but
+ 	# it's likely to be more like Solaris than SunOS4.
+-	echo sparc-sun-solaris3`echo ${UNAME_RELEASE}|sed -e 's/[^.]*//'`
+-	exit 0 ;;
++	echo sparc-sun-solaris3"$(echo "$UNAME_RELEASE"|sed -e 's/[^.]*//')"
++	exit ;;
+     sun4*:SunOS:*:*)
+-	case "`/usr/bin/arch -k`" in
++	case "$(/usr/bin/arch -k)" in
+ 	    Series*|S4*)
+-		UNAME_RELEASE=`uname -v`
++		UNAME_RELEASE=$(uname -v)
+ 		;;
+ 	esac
+ 	# Japanese Language versions have a version number like `4.1.3-JL'.
+-	echo sparc-sun-sunos`echo ${UNAME_RELEASE}|sed -e 's/-/_/'`
+-	exit 0 ;;
++	echo sparc-sun-sunos"$(echo "$UNAME_RELEASE"|sed -e 's/-/_/')"
++	exit ;;
+     sun3*:SunOS:*:*)
+-	echo m68k-sun-sunos${UNAME_RELEASE}
+-	exit 0 ;;
++	echo m68k-sun-sunos"$UNAME_RELEASE"
++	exit ;;
+     sun*:*:4.2BSD:*)
+-	UNAME_RELEASE=`(sed 1q /etc/motd | awk '{print substr($5,1,3)}') 2>/dev/null`
+-	test "x${UNAME_RELEASE}" = "x" && UNAME_RELEASE=3
+-	case "`/bin/arch`" in
++	UNAME_RELEASE=$( (sed 1q /etc/motd | awk '{print substr($5,1,3)}') 2>/dev/null)
++	test "x$UNAME_RELEASE" = x && UNAME_RELEASE=3
++	case "$(/bin/arch)" in
+ 	    sun3)
+-		echo m68k-sun-sunos${UNAME_RELEASE}
++		echo m68k-sun-sunos"$UNAME_RELEASE"
+ 		;;
+ 	    sun4)
+-		echo sparc-sun-sunos${UNAME_RELEASE}
++		echo sparc-sun-sunos"$UNAME_RELEASE"
+ 		;;
+ 	esac
+-	exit 0 ;;
++	exit ;;
+     aushp:SunOS:*:*)
+-	echo sparc-auspex-sunos${UNAME_RELEASE}
+-	exit 0 ;;
++	echo sparc-auspex-sunos"$UNAME_RELEASE"
++	exit ;;
+     # The situation for MiNT is a little confusing.  The machine name
+     # can be virtually everything (everything which is not
+     # "atarist" or "atariste" at least should have a processor
+@@ -375,41 +466,44 @@ case "${UNAME_MACHINE}:${UNAME_SYSTEM}:${UNAME_RELEASE}:${UNAME_VERSION}" in
+     # MiNT.  But MiNT is downward compatible to TOS, so this should
+     # be no problem.
+     atarist[e]:*MiNT:*:* | atarist[e]:*mint:*:* | atarist[e]:*TOS:*:*)
+-        echo m68k-atari-mint${UNAME_RELEASE}
+-	exit 0 ;;
++	echo m68k-atari-mint"$UNAME_RELEASE"
++	exit ;;
+     atari*:*MiNT:*:* | atari*:*mint:*:* | atarist[e]:*TOS:*:*)
+-	echo m68k-atari-mint${UNAME_RELEASE}
+-        exit 0 ;;
++	echo m68k-atari-mint"$UNAME_RELEASE"
++	exit ;;
+     *falcon*:*MiNT:*:* | *falcon*:*mint:*:* | *falcon*:*TOS:*:*)
+-        echo m68k-atari-mint${UNAME_RELEASE}
+-	exit 0 ;;
++	echo m68k-atari-mint"$UNAME_RELEASE"
++	exit ;;
+     milan*:*MiNT:*:* | milan*:*mint:*:* | *milan*:*TOS:*:*)
+-        echo m68k-milan-mint${UNAME_RELEASE}
+-        exit 0 ;;
++	echo m68k-milan-mint"$UNAME_RELEASE"
++	exit ;;
+     hades*:*MiNT:*:* | hades*:*mint:*:* | *hades*:*TOS:*:*)
+-        echo m68k-hades-mint${UNAME_RELEASE}
+-        exit 0 ;;
++	echo m68k-hades-mint"$UNAME_RELEASE"
++	exit ;;
+     *:*MiNT:*:* | *:*mint:*:* | *:*TOS:*:*)
+-        echo m68k-unknown-mint${UNAME_RELEASE}
+-        exit 0 ;;
++	echo m68k-unknown-mint"$UNAME_RELEASE"
++	exit ;;
++    m68k:machten:*:*)
++	echo m68k-apple-machten"$UNAME_RELEASE"
++	exit ;;
+     powerpc:machten:*:*)
+-	echo powerpc-apple-machten${UNAME_RELEASE}
+-	exit 0 ;;
++	echo powerpc-apple-machten"$UNAME_RELEASE"
++	exit ;;
+     RISC*:Mach:*:*)
+ 	echo mips-dec-mach_bsd4.3
+-	exit 0 ;;
++	exit ;;
+     RISC*:ULTRIX:*:*)
+-	echo mips-dec-ultrix${UNAME_RELEASE}
+-	exit 0 ;;
++	echo mips-dec-ultrix"$UNAME_RELEASE"
++	exit ;;
+     VAX*:ULTRIX*:*:*)
+-	echo vax-dec-ultrix${UNAME_RELEASE}
+-	exit 0 ;;
++	echo vax-dec-ultrix"$UNAME_RELEASE"
++	exit ;;
+     2020:CLIX:*:* | 2430:CLIX:*:*)
+-	echo clipper-intergraph-clix${UNAME_RELEASE}
+-	exit 0 ;;
++	echo clipper-intergraph-clix"$UNAME_RELEASE"
++	exit ;;
+     mips:*:*:UMIPS | mips:*:*:RISCos)
+-	eval $set_cc_for_build
+-	sed 's/^	//' << EOF >$dummy.c
++	set_cc_for_build
++	sed 's/^	//' << EOF > "$dummy.c"
+ #ifdef __cplusplus
+ #include <stdio.h>  /* for printf() prototype */
+ 	int main (int argc, char *argv[]) {
+@@ -418,94 +512,95 @@ case "${UNAME_MACHINE}:${UNAME_SYSTEM}:${UNAME_RELEASE}:${UNAME_VERSION}" in
+ #endif
+ 	#if defined (host_mips) && defined (MIPSEB)
+ 	#if defined (SYSTYPE_SYSV)
+-	  printf ("mips-mips-riscos%ssysv\n", argv[1]); exit (0);
++	  printf ("mips-mips-riscos%ssysv\\n", argv[1]); exit (0);
+ 	#endif
+ 	#if defined (SYSTYPE_SVR4)
+-	  printf ("mips-mips-riscos%ssvr4\n", argv[1]); exit (0);
++	  printf ("mips-mips-riscos%ssvr4\\n", argv[1]); exit (0);
+ 	#endif
+ 	#if defined (SYSTYPE_BSD43) || defined(SYSTYPE_BSD)
+-	  printf ("mips-mips-riscos%sbsd\n", argv[1]); exit (0);
++	  printf ("mips-mips-riscos%sbsd\\n", argv[1]); exit (0);
+ 	#endif
+ 	#endif
+ 	  exit (-1);
+ 	}
+ EOF
+-	$CC_FOR_BUILD -o $dummy $dummy.c \
+-	  && $dummy `echo "${UNAME_RELEASE}" | sed -n 's/\([0-9]*\).*/\1/p'` \
+-	  && exit 0
+-	echo mips-mips-riscos${UNAME_RELEASE}
+-	exit 0 ;;
++	$CC_FOR_BUILD -o "$dummy" "$dummy.c" &&
++	  dummyarg=$(echo "$UNAME_RELEASE" | sed -n 's/\([0-9]*\).*/\1/p') &&
++	  SYSTEM_NAME=$("$dummy" "$dummyarg") &&
++	    { echo "$SYSTEM_NAME"; exit; }
++	echo mips-mips-riscos"$UNAME_RELEASE"
++	exit ;;
+     Motorola:PowerMAX_OS:*:*)
+ 	echo powerpc-motorola-powermax
+-	exit 0 ;;
++	exit ;;
+     Motorola:*:4.3:PL8-*)
+ 	echo powerpc-harris-powermax
+-	exit 0 ;;
++	exit ;;
+     Night_Hawk:*:*:PowerMAX_OS | Synergy:PowerMAX_OS:*:*)
+ 	echo powerpc-harris-powermax
+-	exit 0 ;;
++	exit ;;
+     Night_Hawk:Power_UNIX:*:*)
+ 	echo powerpc-harris-powerunix
+-	exit 0 ;;
++	exit ;;
+     m88k:CX/UX:7*:*)
+ 	echo m88k-harris-cxux7
+-	exit 0 ;;
++	exit ;;
+     m88k:*:4*:R4*)
+ 	echo m88k-motorola-sysv4
+-	exit 0 ;;
++	exit ;;
+     m88k:*:3*:R3*)
+ 	echo m88k-motorola-sysv3
+-	exit 0 ;;
++	exit ;;
+     AViiON:dgux:*:*)
+-        # DG/UX returns AViiON for all architectures
+-        UNAME_PROCESSOR=`/usr/bin/uname -p`
+-	if [ $UNAME_PROCESSOR = mc88100 ] || [ $UNAME_PROCESSOR = mc88110 ]
++	# DG/UX returns AViiON for all architectures
++	UNAME_PROCESSOR=$(/usr/bin/uname -p)
++	if test "$UNAME_PROCESSOR" = mc88100 || test "$UNAME_PROCESSOR" = mc88110
+ 	then
+-	    if [ ${TARGET_BINARY_INTERFACE}x = m88kdguxelfx ] || \
+-	       [ ${TARGET_BINARY_INTERFACE}x = x ]
++	    if test "$TARGET_BINARY_INTERFACE"x = m88kdguxelfx || \
++	       test "$TARGET_BINARY_INTERFACE"x = x
+ 	    then
+-		echo m88k-dg-dgux${UNAME_RELEASE}
++		echo m88k-dg-dgux"$UNAME_RELEASE"
+ 	    else
+-		echo m88k-dg-dguxbcs${UNAME_RELEASE}
++		echo m88k-dg-dguxbcs"$UNAME_RELEASE"
+ 	    fi
+ 	else
+-	    echo i586-dg-dgux${UNAME_RELEASE}
++	    echo i586-dg-dgux"$UNAME_RELEASE"
+ 	fi
+- 	exit 0 ;;
++	exit ;;
+     M88*:DolphinOS:*:*)	# DolphinOS (SVR3)
+ 	echo m88k-dolphin-sysv3
+-	exit 0 ;;
++	exit ;;
+     M88*:*:R3*:*)
+ 	# Delta 88k system running SVR3
+ 	echo m88k-motorola-sysv3
+-	exit 0 ;;
++	exit ;;
+     XD88*:*:*:*) # Tektronix XD88 system running UTekV (SVR3)
+ 	echo m88k-tektronix-sysv3
+-	exit 0 ;;
++	exit ;;
+     Tek43[0-9][0-9]:UTek:*:*) # Tektronix 4300 system running UTek (BSD)
+ 	echo m68k-tektronix-bsd
+-	exit 0 ;;
++	exit ;;
+     *:IRIX*:*:*)
+-	echo mips-sgi-irix`echo ${UNAME_RELEASE}|sed -e 's/-/_/g'`
+-	exit 0 ;;
++	echo mips-sgi-irix"$(echo "$UNAME_RELEASE"|sed -e 's/-/_/g')"
++	exit ;;
+     ????????:AIX?:[12].1:2)   # AIX 2.2.1 or AIX 2.1.1 is RT/PC AIX.
+-	echo romp-ibm-aix      # uname -m gives an 8 hex-code CPU id
+-	exit 0 ;;              # Note that: echo "'`uname -s`'" gives 'AIX '
++	echo romp-ibm-aix     # uname -m gives an 8 hex-code CPU id
++	exit ;;               # Note that: echo "'$(uname -s)'" gives 'AIX '
+     i*86:AIX:*:*)
+ 	echo i386-ibm-aix
+-	exit 0 ;;
++	exit ;;
+     ia64:AIX:*:*)
+-	if [ -x /usr/bin/oslevel ] ; then
+-		IBM_REV=`/usr/bin/oslevel`
++	if test -x /usr/bin/oslevel ; then
++		IBM_REV=$(/usr/bin/oslevel)
+ 	else
+-		IBM_REV=${UNAME_VERSION}.${UNAME_RELEASE}
++		IBM_REV="$UNAME_VERSION.$UNAME_RELEASE"
+ 	fi
+-	echo ${UNAME_MACHINE}-ibm-aix${IBM_REV}
+-	exit 0 ;;
++	echo "$UNAME_MACHINE"-ibm-aix"$IBM_REV"
++	exit ;;
+     *:AIX:2:3)
+ 	if grep bos325 /usr/include/stdio.h >/dev/null 2>&1; then
+-		eval $set_cc_for_build
+-		sed 's/^		//' << EOF >$dummy.c
++		set_cc_for_build
++		sed 's/^		//' << EOF > "$dummy.c"
+ 		#include <sys/systemcfg.h>
+ 
+ 		main()
+@@ -516,128 +611,143 @@ EOF
+ 			exit(0);
+ 			}
+ EOF
+-		$CC_FOR_BUILD -o $dummy $dummy.c && $dummy && exit 0
+-		echo rs6000-ibm-aix3.2.5
++		if $CC_FOR_BUILD -o "$dummy" "$dummy.c" && SYSTEM_NAME=$("$dummy")
++		then
++			echo "$SYSTEM_NAME"
++		else
++			echo rs6000-ibm-aix3.2.5
++		fi
+ 	elif grep bos324 /usr/include/stdio.h >/dev/null 2>&1; then
+ 		echo rs6000-ibm-aix3.2.4
+ 	else
+ 		echo rs6000-ibm-aix3.2
+ 	fi
+-	exit 0 ;;
+-    *:AIX:*:[45])
+-	IBM_CPU_ID=`/usr/sbin/lsdev -C -c processor -S available | sed 1q | awk '{ print $1 }'`
+-	if /usr/sbin/lsattr -El ${IBM_CPU_ID} | grep ' POWER' >/dev/null 2>&1; then
++	exit ;;
++    *:AIX:*:[4567])
++	IBM_CPU_ID=$(/usr/sbin/lsdev -C -c processor -S available | sed 1q | awk '{ print $1 }')
++	if /usr/sbin/lsattr -El "$IBM_CPU_ID" | grep ' POWER' >/dev/null 2>&1; then
+ 		IBM_ARCH=rs6000
+ 	else
+ 		IBM_ARCH=powerpc
+ 	fi
+-	if [ -x /usr/bin/oslevel ] ; then
+-		IBM_REV=`/usr/bin/oslevel`
++	if test -x /usr/bin/lslpp ; then
++		IBM_REV=$(/usr/bin/lslpp -Lqc bos.rte.libc |
++			   awk -F: '{ print $3 }' | sed s/[0-9]*$/0/)
+ 	else
+-		IBM_REV=${UNAME_VERSION}.${UNAME_RELEASE}
++		IBM_REV="$UNAME_VERSION.$UNAME_RELEASE"
+ 	fi
+-	echo ${IBM_ARCH}-ibm-aix${IBM_REV}
+-	exit 0 ;;
++	echo "$IBM_ARCH"-ibm-aix"$IBM_REV"
++	exit ;;
+     *:AIX:*:*)
+ 	echo rs6000-ibm-aix
+-	exit 0 ;;
+-    ibmrt:4.4BSD:*|romp-ibm:BSD:*)
++	exit ;;
++    ibmrt:4.4BSD:*|romp-ibm:4.4BSD:*)
+ 	echo romp-ibm-bsd4.4
+-	exit 0 ;;
++	exit ;;
+     ibmrt:*BSD:*|romp-ibm:BSD:*)            # covers RT/PC BSD and
+-	echo romp-ibm-bsd${UNAME_RELEASE}   # 4.3 with uname added to
+-	exit 0 ;;                           # report: romp-ibm BSD 4.3
++	echo romp-ibm-bsd"$UNAME_RELEASE"   # 4.3 with uname added to
++	exit ;;                             # report: romp-ibm BSD 4.3
+     *:BOSX:*:*)
+ 	echo rs6000-bull-bosx
+-	exit 0 ;;
++	exit ;;
+     DPX/2?00:B.O.S.:*:*)
+ 	echo m68k-bull-sysv3
+-	exit 0 ;;
++	exit ;;
+     9000/[34]??:4.3bsd:1.*:*)
+ 	echo m68k-hp-bsd
+-	exit 0 ;;
++	exit ;;
+     hp300:4.4BSD:*:* | 9000/[34]??:4.3bsd:2.*:*)
+ 	echo m68k-hp-bsd4.4
+-	exit 0 ;;
++	exit ;;
+     9000/[34678]??:HP-UX:*:*)
+-	HPUX_REV=`echo ${UNAME_RELEASE}|sed -e 's/[^.]*.[0B]*//'`
+-	case "${UNAME_MACHINE}" in
+-	    9000/31? )            HP_ARCH=m68000 ;;
+-	    9000/[34]?? )         HP_ARCH=m68k ;;
++	HPUX_REV=$(echo "$UNAME_RELEASE"|sed -e 's/[^.]*.[0B]*//')
++	case "$UNAME_MACHINE" in
++	    9000/31?)            HP_ARCH=m68000 ;;
++	    9000/[34]??)         HP_ARCH=m68k ;;
+ 	    9000/[678][0-9][0-9])
+-		if [ -x /usr/bin/getconf ]; then
+-		    sc_cpu_version=`/usr/bin/getconf SC_CPU_VERSION 2>/dev/null`
+-                    sc_kernel_bits=`/usr/bin/getconf SC_KERNEL_BITS 2>/dev/null`
+-                    case "${sc_cpu_version}" in
+-                      523) HP_ARCH="hppa1.0" ;; # CPU_PA_RISC1_0
+-                      528) HP_ARCH="hppa1.1" ;; # CPU_PA_RISC1_1
+-                      532)                      # CPU_PA_RISC2_0
+-                        case "${sc_kernel_bits}" in
+-                          32) HP_ARCH="hppa2.0n" ;;
+-                          64) HP_ARCH="hppa2.0w" ;;
+-			  '') HP_ARCH="hppa2.0" ;;   # HP-UX 10.20
+-                        esac ;;
+-                    esac
++		if test -x /usr/bin/getconf; then
++		    sc_cpu_version=$(/usr/bin/getconf SC_CPU_VERSION 2>/dev/null)
++		    sc_kernel_bits=$(/usr/bin/getconf SC_KERNEL_BITS 2>/dev/null)
++		    case "$sc_cpu_version" in
++		      523) HP_ARCH=hppa1.0 ;; # CPU_PA_RISC1_0
++		      528) HP_ARCH=hppa1.1 ;; # CPU_PA_RISC1_1
++		      532)                      # CPU_PA_RISC2_0
++			case "$sc_kernel_bits" in
++			  32) HP_ARCH=hppa2.0n ;;
++			  64) HP_ARCH=hppa2.0w ;;
++			  '') HP_ARCH=hppa2.0 ;;   # HP-UX 10.20
++			esac ;;
++		    esac
+ 		fi
+-		if [ "${HP_ARCH}" = "" ]; then
+-		    eval $set_cc_for_build
+-		    sed 's/^              //' << EOF >$dummy.c
++		if test "$HP_ARCH" = ""; then
++		    set_cc_for_build
++		    sed 's/^		//' << EOF > "$dummy.c"
+ 
+-              #define _HPUX_SOURCE
+-              #include <stdlib.h>
+-              #include <unistd.h>
++		#define _HPUX_SOURCE
++		#include <stdlib.h>
++		#include <unistd.h>
+ 
+-              int main ()
+-              {
+-              #if defined(_SC_KERNEL_BITS)
+-                  long bits = sysconf(_SC_KERNEL_BITS);
+-              #endif
+-                  long cpu  = sysconf (_SC_CPU_VERSION);
++		int main ()
++		{
++		#if defined(_SC_KERNEL_BITS)
++		    long bits = sysconf(_SC_KERNEL_BITS);
++		#endif
++		    long cpu  = sysconf (_SC_CPU_VERSION);
+ 
+-                  switch (cpu)
+-              	{
+-              	case CPU_PA_RISC1_0: puts ("hppa1.0"); break;
+-              	case CPU_PA_RISC1_1: puts ("hppa1.1"); break;
+-              	case CPU_PA_RISC2_0:
+-              #if defined(_SC_KERNEL_BITS)
+-              	    switch (bits)
+-              		{
+-              		case 64: puts ("hppa2.0w"); break;
+-              		case 32: puts ("hppa2.0n"); break;
+-              		default: puts ("hppa2.0"); break;
+-              		} break;
+-              #else  /* !defined(_SC_KERNEL_BITS) */
+-              	    puts ("hppa2.0"); break;
+-              #endif
+-              	default: puts ("hppa1.0"); break;
+-              	}
+-                  exit (0);
+-              }
++		    switch (cpu)
++			{
++			case CPU_PA_RISC1_0: puts ("hppa1.0"); break;
++			case CPU_PA_RISC1_1: puts ("hppa1.1"); break;
++			case CPU_PA_RISC2_0:
++		#if defined(_SC_KERNEL_BITS)
++			    switch (bits)
++				{
++				case 64: puts ("hppa2.0w"); break;
++				case 32: puts ("hppa2.0n"); break;
++				default: puts ("hppa2.0"); break;
++				} break;
++		#else  /* !defined(_SC_KERNEL_BITS) */
++			    puts ("hppa2.0"); break;
++		#endif
++			default: puts ("hppa1.0"); break;
++			}
++		    exit (0);
++		}
+ EOF
+-		    (CCOPTS= $CC_FOR_BUILD -o $dummy $dummy.c 2>/dev/null) && HP_ARCH=`$dummy`
++		    (CCOPTS="" $CC_FOR_BUILD -o "$dummy" "$dummy.c" 2>/dev/null) && HP_ARCH=$("$dummy")
+ 		    test -z "$HP_ARCH" && HP_ARCH=hppa
+ 		fi ;;
+ 	esac
+-	if [ ${HP_ARCH} = "hppa2.0w" ]
++	if test "$HP_ARCH" = hppa2.0w
+ 	then
+-	    # avoid double evaluation of $set_cc_for_build
+-	    test -n "$CC_FOR_BUILD" || eval $set_cc_for_build
+-	    if echo __LP64__ | (CCOPTS= $CC_FOR_BUILD -E -) | grep __LP64__ >/dev/null
++	    set_cc_for_build
++
++	    # hppa2.0w-hp-hpux* has a 64-bit kernel and a compiler generating
++	    # 32-bit code.  hppa64-hp-hpux* has the same kernel and a compiler
++	    # generating 64-bit code.  GNU and HP use different nomenclature:
++	    #
++	    # $ CC_FOR_BUILD=cc ./config.guess
++	    # => hppa2.0w-hp-hpux11.23
++	    # $ CC_FOR_BUILD="cc +DA2.0w" ./config.guess
++	    # => hppa64-hp-hpux11.23
++
++	    if echo __LP64__ | (CCOPTS="" $CC_FOR_BUILD -E - 2>/dev/null) |
++		grep -q __LP64__
+ 	    then
+-		HP_ARCH="hppa2.0w"
++		HP_ARCH=hppa2.0w
+ 	    else
+-		HP_ARCH="hppa64"
++		HP_ARCH=hppa64
+ 	    fi
+ 	fi
+-	echo ${HP_ARCH}-hp-hpux${HPUX_REV}
+-	exit 0 ;;
++	echo "$HP_ARCH"-hp-hpux"$HPUX_REV"
++	exit ;;
+     ia64:HP-UX:*:*)
+-	HPUX_REV=`echo ${UNAME_RELEASE}|sed -e 's/[^.]*.[0B]*//'`
+-	echo ia64-hp-hpux${HPUX_REV}
+-	exit 0 ;;
++	HPUX_REV=$(echo "$UNAME_RELEASE"|sed -e 's/[^.]*.[0B]*//')
++	echo ia64-hp-hpux"$HPUX_REV"
++	exit ;;
+     3050*:HI-UX:*:*)
+-	eval $set_cc_for_build
+-	sed 's/^	//' << EOF >$dummy.c
++	set_cc_for_build
++	sed 's/^	//' << EOF > "$dummy.c"
+ 	#include <unistd.h>
+ 	int
+ 	main ()
+@@ -662,334 +772,414 @@ EOF
+ 	  exit (0);
+ 	}
+ EOF
+-	$CC_FOR_BUILD -o $dummy $dummy.c && $dummy && exit 0
++	$CC_FOR_BUILD -o "$dummy" "$dummy.c" && SYSTEM_NAME=$("$dummy") &&
++		{ echo "$SYSTEM_NAME"; exit; }
+ 	echo unknown-hitachi-hiuxwe2
+-	exit 0 ;;
+-    9000/7??:4.3bsd:*:* | 9000/8?[79]:4.3bsd:*:* )
++	exit ;;
++    9000/7??:4.3bsd:*:* | 9000/8?[79]:4.3bsd:*:*)
+ 	echo hppa1.1-hp-bsd
+-	exit 0 ;;
++	exit ;;
+     9000/8??:4.3bsd:*:*)
+ 	echo hppa1.0-hp-bsd
+-	exit 0 ;;
++	exit ;;
+     *9??*:MPE/iX:*:* | *3000*:MPE/iX:*:*)
+ 	echo hppa1.0-hp-mpeix
+-	exit 0 ;;
+-    hp7??:OSF1:*:* | hp8?[79]:OSF1:*:* )
++	exit ;;
++    hp7??:OSF1:*:* | hp8?[79]:OSF1:*:*)
+ 	echo hppa1.1-hp-osf
+-	exit 0 ;;
++	exit ;;
+     hp8??:OSF1:*:*)
+ 	echo hppa1.0-hp-osf
+-	exit 0 ;;
++	exit ;;
+     i*86:OSF1:*:*)
+-	if [ -x /usr/sbin/sysversion ] ; then
+-	    echo ${UNAME_MACHINE}-unknown-osf1mk
++	if test -x /usr/sbin/sysversion ; then
++	    echo "$UNAME_MACHINE"-unknown-osf1mk
+ 	else
+-	    echo ${UNAME_MACHINE}-unknown-osf1
++	    echo "$UNAME_MACHINE"-unknown-osf1
+ 	fi
+-	exit 0 ;;
++	exit ;;
+     parisc*:Lites*:*:*)
+ 	echo hppa1.1-hp-lites
+-	exit 0 ;;
++	exit ;;
+     C1*:ConvexOS:*:* | convex:ConvexOS:C1*:*)
+ 	echo c1-convex-bsd
+-        exit 0 ;;
++	exit ;;
+     C2*:ConvexOS:*:* | convex:ConvexOS:C2*:*)
+ 	if getsysinfo -f scalar_acc
+ 	then echo c32-convex-bsd
+ 	else echo c2-convex-bsd
+ 	fi
+-        exit 0 ;;
++	exit ;;
+     C34*:ConvexOS:*:* | convex:ConvexOS:C34*:*)
+ 	echo c34-convex-bsd
+-        exit 0 ;;
++	exit ;;
+     C38*:ConvexOS:*:* | convex:ConvexOS:C38*:*)
+ 	echo c38-convex-bsd
+-        exit 0 ;;
++	exit ;;
+     C4*:ConvexOS:*:* | convex:ConvexOS:C4*:*)
+ 	echo c4-convex-bsd
+-        exit 0 ;;
++	exit ;;
+     CRAY*Y-MP:*:*:*)
+-	echo ymp-cray-unicos${UNAME_RELEASE} | sed -e 's/\.[^.]*$/.X/'
+-	exit 0 ;;
++	echo ymp-cray-unicos"$UNAME_RELEASE" | sed -e 's/\.[^.]*$/.X/'
++	exit ;;
+     CRAY*[A-Z]90:*:*:*)
+-	echo ${UNAME_MACHINE}-cray-unicos${UNAME_RELEASE} \
++	echo "$UNAME_MACHINE"-cray-unicos"$UNAME_RELEASE" \
+ 	| sed -e 's/CRAY.*\([A-Z]90\)/\1/' \
+ 	      -e y/ABCDEFGHIJKLMNOPQRSTUVWXYZ/abcdefghijklmnopqrstuvwxyz/ \
+ 	      -e 's/\.[^.]*$/.X/'
+-	exit 0 ;;
++	exit ;;
+     CRAY*TS:*:*:*)
+-	echo t90-cray-unicos${UNAME_RELEASE} | sed -e 's/\.[^.]*$/.X/'
+-	exit 0 ;;
++	echo t90-cray-unicos"$UNAME_RELEASE" | sed -e 's/\.[^.]*$/.X/'
++	exit ;;
+     CRAY*T3E:*:*:*)
+-	echo alphaev5-cray-unicosmk${UNAME_RELEASE} | sed -e 's/\.[^.]*$/.X/'
+-	exit 0 ;;
++	echo alphaev5-cray-unicosmk"$UNAME_RELEASE" | sed -e 's/\.[^.]*$/.X/'
++	exit ;;
+     CRAY*SV1:*:*:*)
+-	echo sv1-cray-unicos${UNAME_RELEASE} | sed -e 's/\.[^.]*$/.X/'
+-	exit 0 ;;
++	echo sv1-cray-unicos"$UNAME_RELEASE" | sed -e 's/\.[^.]*$/.X/'
++	exit ;;
+     *:UNICOS/mp:*:*)
+-	echo nv1-cray-unicosmp${UNAME_RELEASE} | sed -e 's/\.[^.]*$/.X/' 
+-	exit 0 ;;
++	echo craynv-cray-unicosmp"$UNAME_RELEASE" | sed -e 's/\.[^.]*$/.X/'
++	exit ;;
+     F30[01]:UNIX_System_V:*:* | F700:UNIX_System_V:*:*)
+-	FUJITSU_PROC=`uname -m | tr 'ABCDEFGHIJKLMNOPQRSTUVWXYZ' 'abcdefghijklmnopqrstuvwxyz'`
+-        FUJITSU_SYS=`uname -p | tr 'ABCDEFGHIJKLMNOPQRSTUVWXYZ' 'abcdefghijklmnopqrstuvwxyz' | sed -e 's/\///'`
+-        FUJITSU_REL=`echo ${UNAME_RELEASE} | sed -e 's/ /_/'`
+-        echo "${FUJITSU_PROC}-fujitsu-${FUJITSU_SYS}${FUJITSU_REL}"
+-        exit 0 ;;
++	FUJITSU_PROC=$(uname -m | tr ABCDEFGHIJKLMNOPQRSTUVWXYZ abcdefghijklmnopqrstuvwxyz)
++	FUJITSU_SYS=$(uname -p | tr ABCDEFGHIJKLMNOPQRSTUVWXYZ abcdefghijklmnopqrstuvwxyz | sed -e 's/\///')
++	FUJITSU_REL=$(echo "$UNAME_RELEASE" | sed -e 's/ /_/')
++	echo "${FUJITSU_PROC}-fujitsu-${FUJITSU_SYS}${FUJITSU_REL}"
++	exit ;;
++    5000:UNIX_System_V:4.*:*)
++	FUJITSU_SYS=$(uname -p | tr ABCDEFGHIJKLMNOPQRSTUVWXYZ abcdefghijklmnopqrstuvwxyz | sed -e 's/\///')
++	FUJITSU_REL=$(echo "$UNAME_RELEASE" | tr ABCDEFGHIJKLMNOPQRSTUVWXYZ abcdefghijklmnopqrstuvwxyz | sed -e 's/ /_/')
++	echo "sparc-fujitsu-${FUJITSU_SYS}${FUJITSU_REL}"
++	exit ;;
+     i*86:BSD/386:*:* | i*86:BSD/OS:*:* | *:Ascend\ Embedded/OS:*:*)
+-	echo ${UNAME_MACHINE}-pc-bsdi${UNAME_RELEASE}
+-	exit 0 ;;
++	echo "$UNAME_MACHINE"-pc-bsdi"$UNAME_RELEASE"
++	exit ;;
+     sparc*:BSD/OS:*:*)
+-	echo sparc-unknown-bsdi${UNAME_RELEASE}
+-	exit 0 ;;
++	echo sparc-unknown-bsdi"$UNAME_RELEASE"
++	exit ;;
+     *:BSD/OS:*:*)
+-	echo ${UNAME_MACHINE}-unknown-bsdi${UNAME_RELEASE}
+-	exit 0 ;;
+-    *:FreeBSD:*:*|*:GNU/FreeBSD:*:*)
+-	# Determine whether the default compiler uses glibc.
+-	eval $set_cc_for_build
+-	sed 's/^	//' << EOF >$dummy.c
+-	#include <features.h>
+-	#if __GLIBC__ >= 2
+-	LIBC=gnu
+-	#else
+-	LIBC=
+-	#endif
+-EOF
+-	eval `$CC_FOR_BUILD -E $dummy.c 2>/dev/null | grep ^LIBC=`
+-	echo ${UNAME_MACHINE}-unknown-freebsd`echo ${UNAME_RELEASE}|sed -e 's/[-(].*//'`${LIBC:+-$LIBC}
+-	exit 0 ;;
++	echo "$UNAME_MACHINE"-unknown-bsdi"$UNAME_RELEASE"
++	exit ;;
++    arm:FreeBSD:*:*)
++	UNAME_PROCESSOR=$(uname -p)
++	set_cc_for_build
++	if echo __ARM_PCS_VFP | $CC_FOR_BUILD -E - 2>/dev/null \
++	    | grep -q __ARM_PCS_VFP
++	then
++	    echo "${UNAME_PROCESSOR}"-unknown-freebsd"$(echo ${UNAME_RELEASE}|sed -e 's/[-(].*//')"-gnueabi
++	else
++	    echo "${UNAME_PROCESSOR}"-unknown-freebsd"$(echo ${UNAME_RELEASE}|sed -e 's/[-(].*//')"-gnueabihf
++	fi
++	exit ;;
++    *:FreeBSD:*:*)
++	UNAME_PROCESSOR=$(/usr/bin/uname -p)
++	case "$UNAME_PROCESSOR" in
++	    amd64)
++		UNAME_PROCESSOR=x86_64 ;;
++	    i386)
++		UNAME_PROCESSOR=i586 ;;
++	esac
++	echo "$UNAME_PROCESSOR"-unknown-freebsd"$(echo "$UNAME_RELEASE"|sed -e 's/[-(].*//')"
++	exit ;;
+     i*:CYGWIN*:*)
+-	echo ${UNAME_MACHINE}-pc-cygwin
+-	exit 0 ;;
+-    i*:MINGW*:*)
+-	echo ${UNAME_MACHINE}-pc-mingw32
+-	exit 0 ;;
++	echo "$UNAME_MACHINE"-pc-cygwin
++	exit ;;
++    *:MINGW64*:*)
++	echo "$UNAME_MACHINE"-pc-mingw64
++	exit ;;
++    *:MINGW*:*)
++	echo "$UNAME_MACHINE"-pc-mingw32
++	exit ;;
++    *:MSYS*:*)
++	echo "$UNAME_MACHINE"-pc-msys
++	exit ;;
+     i*:PW*:*)
+-	echo ${UNAME_MACHINE}-pc-pw32
+-	exit 0 ;;
+-    x86:Interix*:3*)
+-	echo i586-pc-interix3
+-	exit 0 ;;
+-    [345]86:Windows_95:* | [345]86:Windows_98:* | [345]86:Windows_NT:*)
+-	echo i${UNAME_MACHINE}-pc-mks
+-	exit 0 ;;
+-    i*:Windows_NT*:* | Pentium*:Windows_NT*:*)
+-	# How do we know it's Interix rather than the generic POSIX subsystem?
+-	# It also conflicts with pre-2.0 versions of AT&T UWIN. Should we
+-	# UNAME_MACHINE based on the output of uname instead of i386?
+-	echo i586-pc-interix
+-	exit 0 ;;
++	echo "$UNAME_MACHINE"-pc-pw32
++	exit ;;
++    *:Interix*:*)
++	case "$UNAME_MACHINE" in
++	    x86)
++		echo i586-pc-interix"$UNAME_RELEASE"
++		exit ;;
++	    authenticamd | genuineintel | EM64T)
++		echo x86_64-unknown-interix"$UNAME_RELEASE"
++		exit ;;
++	    IA64)
++		echo ia64-unknown-interix"$UNAME_RELEASE"
++		exit ;;
++	esac ;;
+     i*:UWIN*:*)
+-	echo ${UNAME_MACHINE}-pc-uwin
+-	exit 0 ;;
+-    p*:CYGWIN*:*)
+-	echo powerpcle-unknown-cygwin
+-	exit 0 ;;
++	echo "$UNAME_MACHINE"-pc-uwin
++	exit ;;
++    amd64:CYGWIN*:*:* | x86_64:CYGWIN*:*:*)
++	echo x86_64-pc-cygwin
++	exit ;;
+     prep*:SunOS:5.*:*)
+-	echo powerpcle-unknown-solaris2`echo ${UNAME_RELEASE}|sed -e 's/[^.]*//'`
+-	exit 0 ;;
++	echo powerpcle-unknown-solaris2"$(echo "$UNAME_RELEASE"|sed -e 's/[^.]*//')"
++	exit ;;
+     *:GNU:*:*)
+-	echo `echo ${UNAME_MACHINE}|sed -e 's,[-/].*$,,'`-unknown-gnu`echo ${UNAME_RELEASE}|sed -e 's,/.*$,,'`
+-	exit 0 ;;
+-    i*86:Minix:*:*)
+-	echo ${UNAME_MACHINE}-pc-minix
+-	exit 0 ;;
++	# the GNU system
++	echo "$(echo "$UNAME_MACHINE"|sed -e 's,[-/].*$,,')-unknown-$LIBC$(echo "$UNAME_RELEASE"|sed -e 's,/.*$,,')"
++	exit ;;
++    *:GNU/*:*:*)
++	# other systems with GNU libc and userland
++	echo "$UNAME_MACHINE-unknown-$(echo "$UNAME_SYSTEM" | sed 's,^[^/]*/,,' | tr "[:upper:]" "[:lower:]")$(echo "$UNAME_RELEASE"|sed -e 's/[-(].*//')-$LIBC"
++	exit ;;
++    *:Minix:*:*)
++	echo "$UNAME_MACHINE"-unknown-minix
++	exit ;;
++    aarch64:Linux:*:*)
++	echo "$UNAME_MACHINE"-unknown-linux-"$LIBC"
++	exit ;;
++    aarch64_be:Linux:*:*)
++	UNAME_MACHINE=aarch64_be
++	echo "$UNAME_MACHINE"-unknown-linux-"$LIBC"
++	exit ;;
++    alpha:Linux:*:*)
++	case $(sed -n '/^cpu model/s/^.*: \(.*\)/\1/p' /proc/cpuinfo 2>/dev/null) in
++	  EV5)   UNAME_MACHINE=alphaev5 ;;
++	  EV56)  UNAME_MACHINE=alphaev56 ;;
++	  PCA56) UNAME_MACHINE=alphapca56 ;;
++	  PCA57) UNAME_MACHINE=alphapca56 ;;
++	  EV6)   UNAME_MACHINE=alphaev6 ;;
++	  EV67)  UNAME_MACHINE=alphaev67 ;;
++	  EV68*) UNAME_MACHINE=alphaev68 ;;
++	esac
++	objdump --private-headers /bin/sh | grep -q ld.so.1
++	if test "$?" = 0 ; then LIBC=gnulibc1 ; fi
++	echo "$UNAME_MACHINE"-unknown-linux-"$LIBC"
++	exit ;;
++    arc:Linux:*:* | arceb:Linux:*:*)
++	echo "$UNAME_MACHINE"-unknown-linux-"$LIBC"
++	exit ;;
+     arm*:Linux:*:*)
+-	echo ${UNAME_MACHINE}-unknown-linux-gnu
+-	exit 0 ;;
++	set_cc_for_build
++	if echo __ARM_EABI__ | $CC_FOR_BUILD -E - 2>/dev/null \
++	    | grep -q __ARM_EABI__
++	then
++	    echo "$UNAME_MACHINE"-unknown-linux-"$LIBC"
++	else
++	    if echo __ARM_PCS_VFP | $CC_FOR_BUILD -E - 2>/dev/null \
++		| grep -q __ARM_PCS_VFP
++	    then
++		echo "$UNAME_MACHINE"-unknown-linux-"$LIBC"eabi
++	    else
++		echo "$UNAME_MACHINE"-unknown-linux-"$LIBC"eabihf
++	    fi
++	fi
++	exit ;;
++    avr32*:Linux:*:*)
++	echo "$UNAME_MACHINE"-unknown-linux-"$LIBC"
++	exit ;;
++    cris:Linux:*:*)
++	echo "$UNAME_MACHINE"-axis-linux-"$LIBC"
++	exit ;;
++    crisv32:Linux:*:*)
++	echo "$UNAME_MACHINE"-axis-linux-"$LIBC"
++	exit ;;
++    e2k:Linux:*:*)
++	echo "$UNAME_MACHINE"-unknown-linux-"$LIBC"
++	exit ;;
++    frv:Linux:*:*)
++	echo "$UNAME_MACHINE"-unknown-linux-"$LIBC"
++	exit ;;
++    hexagon:Linux:*:*)
++	echo "$UNAME_MACHINE"-unknown-linux-"$LIBC"
++	exit ;;
++    i*86:Linux:*:*)
++	echo "$UNAME_MACHINE"-pc-linux-"$LIBC"
++	exit ;;
+     ia64:Linux:*:*)
+-	echo ${UNAME_MACHINE}-unknown-linux-gnu
+-	exit 0 ;;
++	echo "$UNAME_MACHINE"-unknown-linux-"$LIBC"
++	exit ;;
++    k1om:Linux:*:*)
++	echo "$UNAME_MACHINE"-unknown-linux-"$LIBC"
++	exit ;;
++    loongarch32:Linux:*:* | loongarch64:Linux:*:* | loongarchx32:Linux:*:*)
++	echo "$UNAME_MACHINE"-unknown-linux-"$LIBC"
++	exit ;;
++    m32r*:Linux:*:*)
++	echo "$UNAME_MACHINE"-unknown-linux-"$LIBC"
++	exit ;;
+     m68*:Linux:*:*)
+-	echo ${UNAME_MACHINE}-unknown-linux-gnu
+-	exit 0 ;;
+-    mips:Linux:*:*)
+-	eval $set_cc_for_build
+-	sed 's/^	//' << EOF >$dummy.c
++	echo "$UNAME_MACHINE"-unknown-linux-"$LIBC"
++	exit ;;
++    mips:Linux:*:* | mips64:Linux:*:*)
++	set_cc_for_build
++	IS_GLIBC=0
++	test x"${LIBC}" = xgnu && IS_GLIBC=1
++	sed 's/^	//' << EOF > "$dummy.c"
+ 	#undef CPU
+ 	#undef mips
+ 	#undef mipsel
+-	#if defined(__MIPSEL__) || defined(__MIPSEL) || defined(_MIPSEL) || defined(MIPSEL)
+-	CPU=mipsel
++	#undef mips64
++	#undef mips64el
++	#if ${IS_GLIBC} && defined(_ABI64)
++	LIBCABI=gnuabi64
+ 	#else
+-	#if defined(__MIPSEB__) || defined(__MIPSEB) || defined(_MIPSEB) || defined(MIPSEB)
+-	CPU=mips
++	#if ${IS_GLIBC} && defined(_ABIN32)
++	LIBCABI=gnuabin32
+ 	#else
+-	CPU=
++	LIBCABI=${LIBC}
+ 	#endif
+ 	#endif
+-EOF
+-	eval `$CC_FOR_BUILD -E $dummy.c 2>/dev/null | grep ^CPU=`
+-	test x"${CPU}" != x && echo "${CPU}-unknown-linux-gnu" && exit 0
+-	;;
+-    mips64:Linux:*:*)
+-	eval $set_cc_for_build
+-	sed 's/^	//' << EOF >$dummy.c
+-	#undef CPU
+-	#undef mips64
+-	#undef mips64el
++
++	#if ${IS_GLIBC} && defined(__mips64) && defined(__mips_isa_rev) && __mips_isa_rev>=6
++	CPU=mipsisa64r6
++	#else
++	#if ${IS_GLIBC} && !defined(__mips64) && defined(__mips_isa_rev) && __mips_isa_rev>=6
++	CPU=mipsisa32r6
++	#else
++	#if defined(__mips64)
++	CPU=mips64
++	#else
++	CPU=mips
++	#endif
++	#endif
++	#endif
++
+ 	#if defined(__MIPSEL__) || defined(__MIPSEL) || defined(_MIPSEL) || defined(MIPSEL)
+-	CPU=mips64el
++	MIPS_ENDIAN=el
+ 	#else
+ 	#if defined(__MIPSEB__) || defined(__MIPSEB) || defined(_MIPSEB) || defined(MIPSEB)
+-	CPU=mips64
++	MIPS_ENDIAN=
+ 	#else
+-	CPU=
++	MIPS_ENDIAN=
+ 	#endif
+ 	#endif
+ EOF
+-	eval `$CC_FOR_BUILD -E $dummy.c 2>/dev/null | grep ^CPU=`
+-	test x"${CPU}" != x && echo "${CPU}-unknown-linux-gnu" && exit 0
++	eval "$($CC_FOR_BUILD -E "$dummy.c" 2>/dev/null | grep '^CPU\|^MIPS_ENDIAN\|^LIBCABI')"
++	test "x$CPU" != x && { echo "$CPU${MIPS_ENDIAN}-unknown-linux-$LIBCABI"; exit; }
+ 	;;
+-    ppc:Linux:*:*)
+-	echo powerpc-unknown-linux-gnu
+-	exit 0 ;;
+-    ppc64:Linux:*:*)
+-	echo powerpc64-unknown-linux-gnu
+-	exit 0 ;;
+-    alpha:Linux:*:*)
+-	case `sed -n '/^cpu model/s/^.*: \(.*\)/\1/p' < /proc/cpuinfo` in
+-	  EV5)   UNAME_MACHINE=alphaev5 ;;
+-	  EV56)  UNAME_MACHINE=alphaev56 ;;
+-	  PCA56) UNAME_MACHINE=alphapca56 ;;
+-	  PCA57) UNAME_MACHINE=alphapca56 ;;
+-	  EV6)   UNAME_MACHINE=alphaev6 ;;
+-	  EV67)  UNAME_MACHINE=alphaev67 ;;
+-	  EV68*) UNAME_MACHINE=alphaev68 ;;
+-        esac
+-	objdump --private-headers /bin/sh | grep ld.so.1 >/dev/null
+-	if test "$?" = 0 ; then LIBC="libc1" ; else LIBC="" ; fi
+-	echo ${UNAME_MACHINE}-unknown-linux-gnu${LIBC}
+-	exit 0 ;;
++    mips64el:Linux:*:*)
++	echo "$UNAME_MACHINE"-unknown-linux-"$LIBC"
++	exit ;;
++    openrisc*:Linux:*:*)
++	echo or1k-unknown-linux-"$LIBC"
++	exit ;;
++    or32:Linux:*:* | or1k*:Linux:*:*)
++	echo "$UNAME_MACHINE"-unknown-linux-"$LIBC"
++	exit ;;
++    padre:Linux:*:*)
++	echo sparc-unknown-linux-"$LIBC"
++	exit ;;
++    parisc64:Linux:*:* | hppa64:Linux:*:*)
++	echo hppa64-unknown-linux-"$LIBC"
++	exit ;;
+     parisc:Linux:*:* | hppa:Linux:*:*)
+ 	# Look for CPU level
+-	case `grep '^cpu[^a-z]*:' /proc/cpuinfo 2>/dev/null | cut -d' ' -f2` in
+-	  PA7*) echo hppa1.1-unknown-linux-gnu ;;
+-	  PA8*) echo hppa2.0-unknown-linux-gnu ;;
+-	  *)    echo hppa-unknown-linux-gnu ;;
++	case $(grep '^cpu[^a-z]*:' /proc/cpuinfo 2>/dev/null | cut -d' ' -f2) in
++	  PA7*) echo hppa1.1-unknown-linux-"$LIBC" ;;
++	  PA8*) echo hppa2.0-unknown-linux-"$LIBC" ;;
++	  *)    echo hppa-unknown-linux-"$LIBC" ;;
+ 	esac
+-	exit 0 ;;
+-    parisc64:Linux:*:* | hppa64:Linux:*:*)
+-	echo hppa64-unknown-linux-gnu
+-	exit 0 ;;
++	exit ;;
++    ppc64:Linux:*:*)
++	echo powerpc64-unknown-linux-"$LIBC"
++	exit ;;
++    ppc:Linux:*:*)
++	echo powerpc-unknown-linux-"$LIBC"
++	exit ;;
++    ppc64le:Linux:*:*)
++	echo powerpc64le-unknown-linux-"$LIBC"
++	exit ;;
++    ppcle:Linux:*:*)
++	echo powerpcle-unknown-linux-"$LIBC"
++	exit ;;
++    riscv32:Linux:*:* | riscv32be:Linux:*:* | riscv64:Linux:*:* | riscv64be:Linux:*:*)
++	echo "$UNAME_MACHINE"-unknown-linux-"$LIBC"
++	exit ;;
+     s390:Linux:*:* | s390x:Linux:*:*)
+-	echo ${UNAME_MACHINE}-ibm-linux
+-	exit 0 ;;
++	echo "$UNAME_MACHINE"-ibm-linux-"$LIBC"
++	exit ;;
++    sh64*:Linux:*:*)
++	echo "$UNAME_MACHINE"-unknown-linux-"$LIBC"
++	exit ;;
+     sh*:Linux:*:*)
+-	echo ${UNAME_MACHINE}-unknown-linux-gnu
+-	exit 0 ;;
++	echo "$UNAME_MACHINE"-unknown-linux-"$LIBC"
++	exit ;;
+     sparc:Linux:*:* | sparc64:Linux:*:*)
+-	echo ${UNAME_MACHINE}-unknown-linux-gnu
+-	exit 0 ;;
++	echo "$UNAME_MACHINE"-unknown-linux-"$LIBC"
++	exit ;;
++    tile*:Linux:*:*)
++	echo "$UNAME_MACHINE"-unknown-linux-"$LIBC"
++	exit ;;
++    vax:Linux:*:*)
++	echo "$UNAME_MACHINE"-dec-linux-"$LIBC"
++	exit ;;
+     x86_64:Linux:*:*)
+-	echo x86_64-unknown-linux-gnu
+-	exit 0 ;;
+-    i*86:Linux:*:*)
+-	# The BFD linker knows what the default object file format is, so
+-	# first see if it will tell us. cd to the root directory to prevent
+-	# problems with other programs or directories called `ld' in the path.
+-	# Set LC_ALL=C to ensure ld outputs messages in English.
+-	ld_supported_targets=`cd /; LC_ALL=C ld --help 2>&1 \
+-			 | sed -ne '/supported targets:/!d
+-				    s/[ 	][ 	]*/ /g
+-				    s/.*supported targets: *//
+-				    s/ .*//
+-				    p'`
+-        case "$ld_supported_targets" in
+-	  elf32-i386)
+-		TENTATIVE="${UNAME_MACHINE}-pc-linux-gnu"
+-		;;
+-	  a.out-i386-linux)
+-		echo "${UNAME_MACHINE}-pc-linux-gnuaout"
+-		exit 0 ;;
+-	  coff-i386)
+-		echo "${UNAME_MACHINE}-pc-linux-gnucoff"
+-		exit 0 ;;
+-	  "")
+-		# Either a pre-BFD a.out linker (linux-gnuoldld) or
+-		# one that does not give us useful --help.
+-		echo "${UNAME_MACHINE}-pc-linux-gnuoldld"
+-		exit 0 ;;
+-	esac
+-	# Determine whether the default compiler is a.out or elf
+-	eval $set_cc_for_build
+-	sed 's/^	//' << EOF >$dummy.c
+-	#include <features.h>
+-	#ifdef __ELF__
+-	# ifdef __GLIBC__
+-	#  if __GLIBC__ >= 2
+-	LIBC=gnu
+-	#  else
+-	LIBC=gnulibc1
+-	#  endif
+-	# else
+-	LIBC=gnulibc1
+-	# endif
+-	#else
+-	#ifdef __INTEL_COMPILER
+-	LIBC=gnu
+-	#else
+-	LIBC=gnuaout
+-	#endif
+-	#endif
+-EOF
+-	eval `$CC_FOR_BUILD -E $dummy.c 2>/dev/null | grep ^LIBC=`
+-	test x"${LIBC}" != x && echo "${UNAME_MACHINE}-pc-linux-${LIBC}" && exit 0
+-	test x"${TENTATIVE}" != x && echo "${TENTATIVE}" && exit 0
+-	;;
++	set_cc_for_build
++	LIBCABI=$LIBC
++	if test "$CC_FOR_BUILD" != no_compiler_found; then
++	    if (echo '#ifdef __ILP32__'; echo IS_X32; echo '#endif') | \
++		(CCOPTS="" $CC_FOR_BUILD -E - 2>/dev/null) | \
++		grep IS_X32 >/dev/null
++	    then
++		LIBCABI="$LIBC"x32
++	    fi
++	fi
++	echo "$UNAME_MACHINE"-pc-linux-"$LIBCABI"
++	exit ;;
++    xtensa*:Linux:*:*)
++	echo "$UNAME_MACHINE"-unknown-linux-"$LIBC"
++	exit ;;
+     i*86:DYNIX/ptx:4*:*)
+ 	# ptx 4.0 does uname -s correctly, with DYNIX/ptx in there.
+ 	# earlier versions are messed up and put the nodename in both
+ 	# sysname and nodename.
+ 	echo i386-sequent-sysv4
+-	exit 0 ;;
++	exit ;;
+     i*86:UNIX_SV:4.2MP:2.*)
+-        # Unixware is an offshoot of SVR4, but it has its own version
+-        # number series starting with 2...
+-        # I am not positive that other SVR4 systems won't match this,
++	# Unixware is an offshoot of SVR4, but it has its own version
++	# number series starting with 2...
++	# I am not positive that other SVR4 systems won't match this,
+ 	# I just have to hope.  -- rms.
+-        # Use sysv4.2uw... so that sysv4* matches it.
+-	echo ${UNAME_MACHINE}-pc-sysv4.2uw${UNAME_VERSION}
+-	exit 0 ;;
++	# Use sysv4.2uw... so that sysv4* matches it.
++	echo "$UNAME_MACHINE"-pc-sysv4.2uw"$UNAME_VERSION"
++	exit ;;
+     i*86:OS/2:*:*)
+ 	# If we were able to find `uname', then EMX Unix compatibility
+ 	# is probably installed.
+-	echo ${UNAME_MACHINE}-pc-os2-emx
+-	exit 0 ;;
++	echo "$UNAME_MACHINE"-pc-os2-emx
++	exit ;;
+     i*86:XTS-300:*:STOP)
+-	echo ${UNAME_MACHINE}-unknown-stop
+-	exit 0 ;;
++	echo "$UNAME_MACHINE"-unknown-stop
++	exit ;;
+     i*86:atheos:*:*)
+-	echo ${UNAME_MACHINE}-unknown-atheos
+-	exit 0 ;;
+-    i*86:LynxOS:2.*:* | i*86:LynxOS:3.[01]*:* | i*86:LynxOS:4.0*:*)
+-	echo i386-unknown-lynxos${UNAME_RELEASE}
+-	exit 0 ;;
++	echo "$UNAME_MACHINE"-unknown-atheos
++	exit ;;
++    i*86:syllable:*:*)
++	echo "$UNAME_MACHINE"-pc-syllable
++	exit ;;
++    i*86:LynxOS:2.*:* | i*86:LynxOS:3.[01]*:* | i*86:LynxOS:4.[02]*:*)
++	echo i386-unknown-lynxos"$UNAME_RELEASE"
++	exit ;;
+     i*86:*DOS:*:*)
+-	echo ${UNAME_MACHINE}-pc-msdosdjgpp
+-	exit 0 ;;
+-    i*86:*:4.*:* | i*86:SYSTEM_V:4.*:*)
+-	UNAME_REL=`echo ${UNAME_RELEASE} | sed 's/\/MP$//'`
++	echo "$UNAME_MACHINE"-pc-msdosdjgpp
++	exit ;;
++    i*86:*:4.*:*)
++	UNAME_REL=$(echo "$UNAME_RELEASE" | sed 's/\/MP$//')
+ 	if grep Novell /usr/include/link.h >/dev/null 2>/dev/null; then
+-		echo ${UNAME_MACHINE}-univel-sysv${UNAME_REL}
++		echo "$UNAME_MACHINE"-univel-sysv"$UNAME_REL"
+ 	else
+-		echo ${UNAME_MACHINE}-pc-sysv${UNAME_REL}
++		echo "$UNAME_MACHINE"-pc-sysv"$UNAME_REL"
+ 	fi
+-	exit 0 ;;
+-    i*86:*:5:[78]*)
+-	case `/bin/uname -X | grep "^Machine"` in
++	exit ;;
++    i*86:*:5:[678]*)
++	# UnixWare 7.x, OpenUNIX and OpenServer 6.
++	case $(/bin/uname -X | grep "^Machine") in
+ 	    *486*)	     UNAME_MACHINE=i486 ;;
+ 	    *Pentium)	     UNAME_MACHINE=i586 ;;
+ 	    *Pent*|*Celeron) UNAME_MACHINE=i686 ;;
+ 	esac
+-	echo ${UNAME_MACHINE}-unknown-sysv${UNAME_RELEASE}${UNAME_SYSTEM}${UNAME_VERSION}
+-	exit 0 ;;
++	echo "$UNAME_MACHINE-unknown-sysv${UNAME_RELEASE}${UNAME_SYSTEM}${UNAME_VERSION}"
++	exit ;;
+     i*86:*:3.2:*)
+ 	if test -f /usr/options/cb.name; then
+-		UNAME_REL=`sed -n 's/.*Version //p' </usr/options/cb.name`
+-		echo ${UNAME_MACHINE}-pc-isc$UNAME_REL
++		UNAME_REL=$(sed -n 's/.*Version //p' </usr/options/cb.name)
++		echo "$UNAME_MACHINE"-pc-isc"$UNAME_REL"
+ 	elif /bin/uname -X 2>/dev/null >/dev/null ; then
+-		UNAME_REL=`(/bin/uname -X|grep Release|sed -e 's/.*= //')`
++		UNAME_REL=$( (/bin/uname -X|grep Release|sed -e 's/.*= //'))
+ 		(/bin/uname -X|grep i80486 >/dev/null) && UNAME_MACHINE=i486
+ 		(/bin/uname -X|grep '^Machine.*Pentium' >/dev/null) \
+ 			&& UNAME_MACHINE=i586
+@@ -997,208 +1187,329 @@ EOF
+ 			&& UNAME_MACHINE=i686
+ 		(/bin/uname -X|grep '^Machine.*Pentium Pro' >/dev/null) \
+ 			&& UNAME_MACHINE=i686
+-		echo ${UNAME_MACHINE}-pc-sco$UNAME_REL
++		echo "$UNAME_MACHINE"-pc-sco"$UNAME_REL"
+ 	else
+-		echo ${UNAME_MACHINE}-pc-sysv32
++		echo "$UNAME_MACHINE"-pc-sysv32
+ 	fi
+-	exit 0 ;;
++	exit ;;
+     pc:*:*:*)
+ 	# Left here for compatibility:
+-        # uname -m prints for DJGPP always 'pc', but it prints nothing about
+-        # the processor, so we play safe by assuming i386.
+-	echo i386-pc-msdosdjgpp
+-        exit 0 ;;
++	# uname -m prints for DJGPP always 'pc', but it prints nothing about
++	# the processor, so we play safe by assuming i586.
++	# Note: whatever this is, it MUST be the same as what config.sub
++	# prints for the "djgpp" host, or else GDB configure will decide that
++	# this is a cross-build.
++	echo i586-pc-msdosdjgpp
++	exit ;;
+     Intel:Mach:3*:*)
+ 	echo i386-pc-mach3
+-	exit 0 ;;
++	exit ;;
+     paragon:*:*:*)
+ 	echo i860-intel-osf1
+-	exit 0 ;;
++	exit ;;
+     i860:*:4.*:*) # i860-SVR4
+ 	if grep Stardent /usr/include/sys/uadmin.h >/dev/null 2>&1 ; then
+-	  echo i860-stardent-sysv${UNAME_RELEASE} # Stardent Vistra i860-SVR4
++	  echo i860-stardent-sysv"$UNAME_RELEASE" # Stardent Vistra i860-SVR4
+ 	else # Add other i860-SVR4 vendors below as they are discovered.
+-	  echo i860-unknown-sysv${UNAME_RELEASE}  # Unknown i860-SVR4
++	  echo i860-unknown-sysv"$UNAME_RELEASE"  # Unknown i860-SVR4
+ 	fi
+-	exit 0 ;;
++	exit ;;
+     mini*:CTIX:SYS*5:*)
+ 	# "miniframe"
+ 	echo m68010-convergent-sysv
+-	exit 0 ;;
++	exit ;;
+     mc68k:UNIX:SYSTEM5:3.51m)
+ 	echo m68k-convergent-sysv
+-	exit 0 ;;
++	exit ;;
+     M680?0:D-NIX:5.3:*)
+ 	echo m68k-diab-dnix
+-	exit 0 ;;
+-    M68*:*:R3V[567]*:*)
+-	test -r /sysV68 && echo 'm68k-motorola-sysv' && exit 0 ;;
+-    3[34]??:*:4.0:3.0 | 3[34]??A:*:4.0:3.0 | 3[34]??,*:*:4.0:3.0 | 3[34]??/*:*:4.0:3.0 | 4400:*:4.0:3.0 | 4850:*:4.0:3.0 | SKA40:*:4.0:3.0 | SDS2:*:4.0:3.0 | SHG2:*:4.0:3.0)
++	exit ;;
++    M68*:*:R3V[5678]*:*)
++	test -r /sysV68 && { echo 'm68k-motorola-sysv'; exit; } ;;
++    3[345]??:*:4.0:3.0 | 3[34]??A:*:4.0:3.0 | 3[34]??,*:*:4.0:3.0 | 3[34]??/*:*:4.0:3.0 | 4400:*:4.0:3.0 | 4850:*:4.0:3.0 | SKA40:*:4.0:3.0 | SDS2:*:4.0:3.0 | SHG2:*:4.0:3.0 | S7501*:*:4.0:3.0)
+ 	OS_REL=''
+ 	test -r /etc/.relid \
+-	&& OS_REL=.`sed -n 's/[^ ]* [^ ]* \([0-9][0-9]\).*/\1/p' < /etc/.relid`
++	&& OS_REL=.$(sed -n 's/[^ ]* [^ ]* \([0-9][0-9]\).*/\1/p' < /etc/.relid)
+ 	/bin/uname -p 2>/dev/null | grep 86 >/dev/null \
+-	  && echo i486-ncr-sysv4.3${OS_REL} && exit 0
++	  && { echo i486-ncr-sysv4.3"$OS_REL"; exit; }
+ 	/bin/uname -p 2>/dev/null | /bin/grep entium >/dev/null \
+-	  && echo i586-ncr-sysv4.3${OS_REL} && exit 0 ;;
++	  && { echo i586-ncr-sysv4.3"$OS_REL"; exit; } ;;
+     3[34]??:*:4.0:* | 3[34]??,*:*:4.0:*)
+-        /bin/uname -p 2>/dev/null | grep 86 >/dev/null \
+-          && echo i486-ncr-sysv4 && exit 0 ;;
++	/bin/uname -p 2>/dev/null | grep 86 >/dev/null \
++	  && { echo i486-ncr-sysv4; exit; } ;;
++    NCR*:*:4.2:* | MPRAS*:*:4.2:*)
++	OS_REL='.3'
++	test -r /etc/.relid \
++	    && OS_REL=.$(sed -n 's/[^ ]* [^ ]* \([0-9][0-9]\).*/\1/p' < /etc/.relid)
++	/bin/uname -p 2>/dev/null | grep 86 >/dev/null \
++	    && { echo i486-ncr-sysv4.3"$OS_REL"; exit; }
++	/bin/uname -p 2>/dev/null | /bin/grep entium >/dev/null \
++	    && { echo i586-ncr-sysv4.3"$OS_REL"; exit; }
++	/bin/uname -p 2>/dev/null | /bin/grep pteron >/dev/null \
++	    && { echo i586-ncr-sysv4.3"$OS_REL"; exit; } ;;
+     m68*:LynxOS:2.*:* | m68*:LynxOS:3.0*:*)
+-	echo m68k-unknown-lynxos${UNAME_RELEASE}
+-	exit 0 ;;
++	echo m68k-unknown-lynxos"$UNAME_RELEASE"
++	exit ;;
+     mc68030:UNIX_System_V:4.*:*)
+ 	echo m68k-atari-sysv4
+-	exit 0 ;;
++	exit ;;
+     TSUNAMI:LynxOS:2.*:*)
+-	echo sparc-unknown-lynxos${UNAME_RELEASE}
+-	exit 0 ;;
++	echo sparc-unknown-lynxos"$UNAME_RELEASE"
++	exit ;;
+     rs6000:LynxOS:2.*:*)
+-	echo rs6000-unknown-lynxos${UNAME_RELEASE}
+-	exit 0 ;;
+-    PowerPC:LynxOS:2.*:* | PowerPC:LynxOS:3.[01]*:* | PowerPC:LynxOS:4.0*:*)
+-	echo powerpc-unknown-lynxos${UNAME_RELEASE}
+-	exit 0 ;;
++	echo rs6000-unknown-lynxos"$UNAME_RELEASE"
++	exit ;;
++    PowerPC:LynxOS:2.*:* | PowerPC:LynxOS:3.[01]*:* | PowerPC:LynxOS:4.[02]*:*)
++	echo powerpc-unknown-lynxos"$UNAME_RELEASE"
++	exit ;;
+     SM[BE]S:UNIX_SV:*:*)
+-	echo mips-dde-sysv${UNAME_RELEASE}
+-	exit 0 ;;
++	echo mips-dde-sysv"$UNAME_RELEASE"
++	exit ;;
+     RM*:ReliantUNIX-*:*:*)
+ 	echo mips-sni-sysv4
+-	exit 0 ;;
++	exit ;;
+     RM*:SINIX-*:*:*)
+ 	echo mips-sni-sysv4
+-	exit 0 ;;
++	exit ;;
+     *:SINIX-*:*:*)
+ 	if uname -p 2>/dev/null >/dev/null ; then
+-		UNAME_MACHINE=`(uname -p) 2>/dev/null`
+-		echo ${UNAME_MACHINE}-sni-sysv4
++		UNAME_MACHINE=$( (uname -p) 2>/dev/null)
++		echo "$UNAME_MACHINE"-sni-sysv4
+ 	else
+ 		echo ns32k-sni-sysv
+ 	fi
+-	exit 0 ;;
+-    PENTIUM:*:4.0*:*) # Unisys `ClearPath HMP IX 4000' SVR4/MP effort
+-                      # says <Richard.M.Bartel@ccMail.Census.GOV>
+-        echo i586-unisys-sysv4
+-        exit 0 ;;
++	exit ;;
++    PENTIUM:*:4.0*:*)	# Unisys `ClearPath HMP IX 4000' SVR4/MP effort
++			# says <Richard.M.Bartel@ccMail.Census.GOV>
++	echo i586-unisys-sysv4
++	exit ;;
+     *:UNIX_System_V:4*:FTX*)
+ 	# From Gerald Hewes <hewes@openmarket.com>.
+ 	# How about differentiating between stratus architectures? -djm
+ 	echo hppa1.1-stratus-sysv4
+-	exit 0 ;;
++	exit ;;
+     *:*:*:FTX*)
+ 	# From seanf@swdc.stratus.com.
+ 	echo i860-stratus-sysv4
+-	exit 0 ;;
++	exit ;;
++    i*86:VOS:*:*)
++	# From Paul.Green@stratus.com.
++	echo "$UNAME_MACHINE"-stratus-vos
++	exit ;;
+     *:VOS:*:*)
+ 	# From Paul.Green@stratus.com.
+ 	echo hppa1.1-stratus-vos
+-	exit 0 ;;
++	exit ;;
+     mc68*:A/UX:*:*)
+-	echo m68k-apple-aux${UNAME_RELEASE}
+-	exit 0 ;;
++	echo m68k-apple-aux"$UNAME_RELEASE"
++	exit ;;
+     news*:NEWS-OS:6*:*)
+ 	echo mips-sony-newsos6
+-	exit 0 ;;
++	exit ;;
+     R[34]000:*System_V*:*:* | R4000:UNIX_SYSV:*:* | R*000:UNIX_SV:*:*)
+-	if [ -d /usr/nec ]; then
+-	        echo mips-nec-sysv${UNAME_RELEASE}
++	if test -d /usr/nec; then
++		echo mips-nec-sysv"$UNAME_RELEASE"
+ 	else
+-	        echo mips-unknown-sysv${UNAME_RELEASE}
++		echo mips-unknown-sysv"$UNAME_RELEASE"
+ 	fi
+-        exit 0 ;;
++	exit ;;
+     BeBox:BeOS:*:*)	# BeOS running on hardware made by Be, PPC only.
+ 	echo powerpc-be-beos
+-	exit 0 ;;
++	exit ;;
+     BeMac:BeOS:*:*)	# BeOS running on Mac or Mac clone, PPC only.
+ 	echo powerpc-apple-beos
+-	exit 0 ;;
++	exit ;;
+     BePC:BeOS:*:*)	# BeOS running on Intel PC compatible.
+ 	echo i586-pc-beos
+-	exit 0 ;;
++	exit ;;
++    BePC:Haiku:*:*)	# Haiku running on Intel PC compatible.
++	echo i586-pc-haiku
++	exit ;;
++    x86_64:Haiku:*:*)
++	echo x86_64-unknown-haiku
++	exit ;;
+     SX-4:SUPER-UX:*:*)
+-	echo sx4-nec-superux${UNAME_RELEASE}
+-	exit 0 ;;
++	echo sx4-nec-superux"$UNAME_RELEASE"
++	exit ;;
+     SX-5:SUPER-UX:*:*)
+-	echo sx5-nec-superux${UNAME_RELEASE}
+-	exit 0 ;;
++	echo sx5-nec-superux"$UNAME_RELEASE"
++	exit ;;
+     SX-6:SUPER-UX:*:*)
+-	echo sx6-nec-superux${UNAME_RELEASE}
+-	exit 0 ;;
++	echo sx6-nec-superux"$UNAME_RELEASE"
++	exit ;;
++    SX-7:SUPER-UX:*:*)
++	echo sx7-nec-superux"$UNAME_RELEASE"
++	exit ;;
++    SX-8:SUPER-UX:*:*)
++	echo sx8-nec-superux"$UNAME_RELEASE"
++	exit ;;
++    SX-8R:SUPER-UX:*:*)
++	echo sx8r-nec-superux"$UNAME_RELEASE"
++	exit ;;
++    SX-ACE:SUPER-UX:*:*)
++	echo sxace-nec-superux"$UNAME_RELEASE"
++	exit ;;
+     Power*:Rhapsody:*:*)
+-	echo powerpc-apple-rhapsody${UNAME_RELEASE}
+-	exit 0 ;;
++	echo powerpc-apple-rhapsody"$UNAME_RELEASE"
++	exit ;;
+     *:Rhapsody:*:*)
+-	echo ${UNAME_MACHINE}-apple-rhapsody${UNAME_RELEASE}
+-	exit 0 ;;
++	echo "$UNAME_MACHINE"-apple-rhapsody"$UNAME_RELEASE"
++	exit ;;
++    arm64:Darwin:*:*)
++	echo aarch64-apple-darwin"$UNAME_RELEASE"
++	exit ;;
+     *:Darwin:*:*)
+-	case `uname -p` in
+-	    *86) UNAME_PROCESSOR=i686 ;;
+-	    powerpc) UNAME_PROCESSOR=powerpc ;;
++	UNAME_PROCESSOR=$(uname -p)
++	case $UNAME_PROCESSOR in
++	    unknown) UNAME_PROCESSOR=powerpc ;;
+ 	esac
+-	echo ${UNAME_PROCESSOR}-apple-darwin${UNAME_RELEASE}
+-	exit 0 ;;
++	if command -v xcode-select > /dev/null 2> /dev/null && \
++		! xcode-select --print-path > /dev/null 2> /dev/null ; then
++	    # Avoid executing cc if there is no toolchain installed as
++	    # cc will be a stub that puts up a graphical alert
++	    # prompting the user to install developer tools.
++	    CC_FOR_BUILD=no_compiler_found
++	else
++	    set_cc_for_build
++	fi
++	if test "$CC_FOR_BUILD" != no_compiler_found; then
++	    if (echo '#ifdef __LP64__'; echo IS_64BIT_ARCH; echo '#endif') | \
++		   (CCOPTS="" $CC_FOR_BUILD -E - 2>/dev/null) | \
++		   grep IS_64BIT_ARCH >/dev/null
++	    then
++		case $UNAME_PROCESSOR in
++		    i386) UNAME_PROCESSOR=x86_64 ;;
++		    powerpc) UNAME_PROCESSOR=powerpc64 ;;
++		esac
++	    fi
++	    # On 10.4-10.6 one might compile for PowerPC via gcc -arch ppc
++	    if (echo '#ifdef __POWERPC__'; echo IS_PPC; echo '#endif') | \
++		   (CCOPTS="" $CC_FOR_BUILD -E - 2>/dev/null) | \
++		   grep IS_PPC >/dev/null
++	    then
++		UNAME_PROCESSOR=powerpc
++	    fi
++	elif test "$UNAME_PROCESSOR" = i386 ; then
++	    # uname -m returns i386 or x86_64
++	    UNAME_PROCESSOR=$UNAME_MACHINE
++	fi
++	echo "$UNAME_PROCESSOR"-apple-darwin"$UNAME_RELEASE"
++	exit ;;
+     *:procnto*:*:* | *:QNX:[0123456789]*:*)
+-	UNAME_PROCESSOR=`uname -p`
+-	if test "$UNAME_PROCESSOR" = "x86"; then
++	UNAME_PROCESSOR=$(uname -p)
++	if test "$UNAME_PROCESSOR" = x86; then
+ 		UNAME_PROCESSOR=i386
+ 		UNAME_MACHINE=pc
+ 	fi
+-	echo ${UNAME_PROCESSOR}-${UNAME_MACHINE}-nto-qnx${UNAME_RELEASE}
+-	exit 0 ;;
++	echo "$UNAME_PROCESSOR"-"$UNAME_MACHINE"-nto-qnx"$UNAME_RELEASE"
++	exit ;;
+     *:QNX:*:4*)
+ 	echo i386-pc-qnx
+-	exit 0 ;;
+-    NSR-[DGKLNPTVW]:NONSTOP_KERNEL:*:*)
+-	echo nsr-tandem-nsk${UNAME_RELEASE}
+-	exit 0 ;;
++	exit ;;
++    NEO-*:NONSTOP_KERNEL:*:*)
++	echo neo-tandem-nsk"$UNAME_RELEASE"
++	exit ;;
++    NSE-*:NONSTOP_KERNEL:*:*)
++	echo nse-tandem-nsk"$UNAME_RELEASE"
++	exit ;;
++    NSR-*:NONSTOP_KERNEL:*:*)
++	echo nsr-tandem-nsk"$UNAME_RELEASE"
++	exit ;;
++    NSV-*:NONSTOP_KERNEL:*:*)
++	echo nsv-tandem-nsk"$UNAME_RELEASE"
++	exit ;;
++    NSX-*:NONSTOP_KERNEL:*:*)
++	echo nsx-tandem-nsk"$UNAME_RELEASE"
++	exit ;;
+     *:NonStop-UX:*:*)
+ 	echo mips-compaq-nonstopux
+-	exit 0 ;;
++	exit ;;
+     BS2000:POSIX*:*:*)
+ 	echo bs2000-siemens-sysv
+-	exit 0 ;;
++	exit ;;
+     DS/*:UNIX_System_V:*:*)
+-	echo ${UNAME_MACHINE}-${UNAME_SYSTEM}-${UNAME_RELEASE}
+-	exit 0 ;;
++	echo "$UNAME_MACHINE"-"$UNAME_SYSTEM"-"$UNAME_RELEASE"
++	exit ;;
+     *:Plan9:*:*)
+ 	# "uname -m" is not consistent, so use $cputype instead. 386
+ 	# is converted to i386 for consistency with other x86
+ 	# operating systems.
+-	if test "$cputype" = "386"; then
++	# shellcheck disable=SC2154
++	if test "$cputype" = 386; then
+ 	    UNAME_MACHINE=i386
+ 	else
+ 	    UNAME_MACHINE="$cputype"
+ 	fi
+-	echo ${UNAME_MACHINE}-unknown-plan9
+-	exit 0 ;;
++	echo "$UNAME_MACHINE"-unknown-plan9
++	exit ;;
+     *:TOPS-10:*:*)
+ 	echo pdp10-unknown-tops10
+-	exit 0 ;;
++	exit ;;
+     *:TENEX:*:*)
+ 	echo pdp10-unknown-tenex
+-	exit 0 ;;
++	exit ;;
+     KS10:TOPS-20:*:* | KL10:TOPS-20:*:* | TYPE4:TOPS-20:*:*)
+ 	echo pdp10-dec-tops20
+-	exit 0 ;;
++	exit ;;
+     XKL-1:TOPS-20:*:* | TYPE5:TOPS-20:*:*)
+ 	echo pdp10-xkl-tops20
+-	exit 0 ;;
++	exit ;;
+     *:TOPS-20:*:*)
+ 	echo pdp10-unknown-tops20
+-	exit 0 ;;
++	exit ;;
+     *:ITS:*:*)
+ 	echo pdp10-unknown-its
+-	exit 0 ;;
++	exit ;;
++    SEI:*:*:SEIUX)
++	echo mips-sei-seiux"$UNAME_RELEASE"
++	exit ;;
++    *:DragonFly:*:*)
++	echo "$UNAME_MACHINE"-unknown-dragonfly"$(echo "$UNAME_RELEASE"|sed -e 's/[-(].*//')"
++	exit ;;
++    *:*VMS:*:*)
++	UNAME_MACHINE=$( (uname -p) 2>/dev/null)
++	case "$UNAME_MACHINE" in
++	    A*) echo alpha-dec-vms ; exit ;;
++	    I*) echo ia64-dec-vms ; exit ;;
++	    V*) echo vax-dec-vms ; exit ;;
++	esac ;;
++    *:XENIX:*:SysV)
++	echo i386-pc-xenix
++	exit ;;
++    i*86:skyos:*:*)
++	echo "$UNAME_MACHINE"-pc-skyos"$(echo "$UNAME_RELEASE" | sed -e 's/ .*$//')"
++	exit ;;
++    i*86:rdos:*:*)
++	echo "$UNAME_MACHINE"-pc-rdos
++	exit ;;
++    *:AROS:*:*)
++	echo "$UNAME_MACHINE"-unknown-aros
++	exit ;;
++    x86_64:VMkernel:*:*)
++	echo "$UNAME_MACHINE"-unknown-esx
++	exit ;;
++    amd64:Isilon\ OneFS:*:*)
++	echo x86_64-unknown-onefs
++	exit ;;
++    *:Unleashed:*:*)
++	echo "$UNAME_MACHINE"-unknown-unleashed"$UNAME_RELEASE"
++	exit ;;
+ esac
+ 
+-#echo '(No uname command or uname output not recognized.)' 1>&2
+-#echo "${UNAME_MACHINE}:${UNAME_SYSTEM}:${UNAME_RELEASE}:${UNAME_VERSION}" 1>&2
+-
+-eval $set_cc_for_build
+-cat >$dummy.c <<EOF
++# No uname command or uname output not recognized.
++set_cc_for_build
++cat > "$dummy.c" <<EOF
+ #ifdef _SEQUENT_
+-# include <sys/types.h>
+-# include <sys/utsname.h>
++#include <sys/types.h>
++#include <sys/utsname.h>
++#endif
++#if defined(ultrix) || defined(_ultrix) || defined(__ultrix) || defined(__ultrix__)
++#if defined (vax) || defined (__vax) || defined (__vax__) || defined(mips) || defined(__mips) || defined(__mips__) || defined(MIPS) || defined(__MIPS__)
++#include <signal.h>
++#if defined(_SIZE_T_) || defined(SIGLOST)
++#include <sys/utsname.h>
++#endif
++#endif
+ #endif
+ main ()
+ {
+@@ -1211,28 +1522,20 @@ main ()
+ #include <sys/param.h>
+   printf ("m68k-sony-newsos%s\n",
+ #ifdef NEWSOS4
+-          "4"
++  "4"
+ #else
+-	  ""
++  ""
+ #endif
+-         ); exit (0);
++  ); exit (0);
+ #endif
+ #endif
+ 
+-#if defined (__arm) && defined (__acorn) && defined (__unix)
+-  printf ("arm-acorn-riscix"); exit (0);
+-#endif
+-
+-#if defined (hp300) && !defined (hpux)
+-  printf ("m68k-hp-bsd\n"); exit (0);
+-#endif
+-
+ #if defined (NeXT)
+ #if !defined (__ARCHITECTURE__)
+ #define __ARCHITECTURE__ "m68k"
+ #endif
+   int version;
+-  version=`(hostinfo | sed -n 's/.*NeXT Mach \([0-9]*\).*/\1/p') 2>/dev/null`;
++  version=$( (hostinfo | sed -n 's/.*NeXT Mach \([0-9]*\).*/\1/p') 2>/dev/null);
+   if (version < 4)
+     printf ("%s-next-nextstep%d\n", __ARCHITECTURE__, version);
+   else
+@@ -1266,39 +1569,54 @@ main ()
+ #endif
+ 
+ #if defined (_SEQUENT_)
+-    struct utsname un;
+-
+-    uname(&un);
+-
+-    if (strncmp(un.version, "V2", 2) == 0) {
+-	printf ("i386-sequent-ptx2\n"); exit (0);
+-    }
+-    if (strncmp(un.version, "V1", 2) == 0) { /* XXX is V1 correct? */
+-	printf ("i386-sequent-ptx1\n"); exit (0);
+-    }
+-    printf ("i386-sequent-ptx\n"); exit (0);
++  struct utsname un;
+ 
++  uname(&un);
++  if (strncmp(un.version, "V2", 2) == 0) {
++    printf ("i386-sequent-ptx2\n"); exit (0);
++  }
++  if (strncmp(un.version, "V1", 2) == 0) { /* XXX is V1 correct? */
++    printf ("i386-sequent-ptx1\n"); exit (0);
++  }
++  printf ("i386-sequent-ptx\n"); exit (0);
+ #endif
+ 
+ #if defined (vax)
+-# if !defined (ultrix)
+-#  include <sys/param.h>
+-#  if defined (BSD)
+-#   if BSD == 43
+-      printf ("vax-dec-bsd4.3\n"); exit (0);
+-#   else
+-#    if BSD == 199006
+-      printf ("vax-dec-bsd4.3reno\n"); exit (0);
+-#    else
+-      printf ("vax-dec-bsd\n"); exit (0);
+-#    endif
+-#   endif
+-#  else
+-    printf ("vax-dec-bsd\n"); exit (0);
+-#  endif
+-# else
+-    printf ("vax-dec-ultrix\n"); exit (0);
+-# endif
++#if !defined (ultrix)
++#include <sys/param.h>
++#if defined (BSD)
++#if BSD == 43
++  printf ("vax-dec-bsd4.3\n"); exit (0);
++#else
++#if BSD == 199006
++  printf ("vax-dec-bsd4.3reno\n"); exit (0);
++#else
++  printf ("vax-dec-bsd\n"); exit (0);
++#endif
++#endif
++#else
++  printf ("vax-dec-bsd\n"); exit (0);
++#endif
++#else
++#if defined(_SIZE_T_) || defined(SIGLOST)
++  struct utsname un;
++  uname (&un);
++  printf ("vax-dec-ultrix%s\n", un.release); exit (0);
++#else
++  printf ("vax-dec-ultrix\n"); exit (0);
++#endif
++#endif
++#endif
++#if defined(ultrix) || defined(_ultrix) || defined(__ultrix) || defined(__ultrix__)
++#if defined(mips) || defined(__mips) || defined(__mips__) || defined(MIPS) || defined(__MIPS__)
++#if defined(_SIZE_T_) || defined(SIGLOST)
++  struct utsname *un;
++  uname (&un);
++  printf ("mips-dec-ultrix%s\n", un.release); exit (0);
++#else
++  printf ("mips-dec-ultrix\n"); exit (0);
++#endif
++#endif
+ #endif
+ 
+ #if defined (alliant) && defined (i860)
+@@ -1309,79 +1627,73 @@ main ()
+ }
+ EOF
+ 
+-$CC_FOR_BUILD -o $dummy $dummy.c 2>/dev/null && $dummy && exit 0
++$CC_FOR_BUILD -o "$dummy" "$dummy.c" 2>/dev/null && SYSTEM_NAME=$($dummy) &&
++	{ echo "$SYSTEM_NAME"; exit; }
+ 
+ # Apollos put the system type in the environment.
++test -d /usr/apollo && { echo "$ISP-apollo-$SYSTYPE"; exit; }
+ 
+-test -d /usr/apollo && { echo ${ISP}-apollo-${SYSTYPE}; exit 0; }
++echo "$0: unable to guess system type" >&2
+ 
+-# Convex versions that predate uname can use getsysinfo(1)
++case "$UNAME_MACHINE:$UNAME_SYSTEM" in
++    mips:Linux | mips64:Linux)
++	# If we got here on MIPS GNU/Linux, output extra information.
++	cat >&2 <<EOF
+ 
+-if [ -x /usr/convex/getsysinfo ]
+-then
+-    case `getsysinfo -f cpu_type` in
+-    c1*)
+-	echo c1-convex-bsd
+-	exit 0 ;;
+-    c2*)
+-	if getsysinfo -f scalar_acc
+-	then echo c32-convex-bsd
+-	else echo c2-convex-bsd
+-	fi
+-	exit 0 ;;
+-    c34*)
+-	echo c34-convex-bsd
+-	exit 0 ;;
+-    c38*)
+-	echo c38-convex-bsd
+-	exit 0 ;;
+-    c4*)
+-	echo c4-convex-bsd
+-	exit 0 ;;
+-    esac
+-fi
++NOTE: MIPS GNU/Linux systems require a C compiler to fully recognize
++the system type. Please install a C compiler and try again.
++EOF
++	;;
++esac
+ 
+ cat >&2 <<EOF
+-$0: unable to guess system type
+ 
+-This script, last modified $timestamp, has failed to recognize
+-the operating system you are using. It is advised that you
+-download the most up to date version of the config scripts from
++This script (version $timestamp), has failed to recognize the
++operating system you are using. If your script is old, overwrite *all*
++copies of config.guess and config.sub with the latest versions from:
+ 
+-    ftp://ftp.gnu.org/pub/gnu/config/
++  https://git.savannah.gnu.org/cgit/config.git/plain/config.guess
++and
++  https://git.savannah.gnu.org/cgit/config.git/plain/config.sub
++EOF
+ 
+-If the version you run ($0) is already up to date, please
+-send the following data and any information you think might be
+-pertinent to <config-patches@gnu.org> in order to provide the needed
+-information to handle your system.
++year=$(echo $timestamp | sed 's,-.*,,')
++# shellcheck disable=SC2003
++if test "$(expr "$(date +%Y)" - "$year")" -lt 3 ; then
++   cat >&2 <<EOF
++
++If $0 has already been updated, send the following data and any
++information you think might be pertinent to config-patches@gnu.org to
++provide the necessary information to handle your system.
+ 
+ config.guess timestamp = $timestamp
+ 
+-uname -m = `(uname -m) 2>/dev/null || echo unknown`
+-uname -r = `(uname -r) 2>/dev/null || echo unknown`
+-uname -s = `(uname -s) 2>/dev/null || echo unknown`
+-uname -v = `(uname -v) 2>/dev/null || echo unknown`
++uname -m = $( (uname -m) 2>/dev/null || echo unknown)
++uname -r = $( (uname -r) 2>/dev/null || echo unknown)
++uname -s = $( (uname -s) 2>/dev/null || echo unknown)
++uname -v = $( (uname -v) 2>/dev/null || echo unknown)
+ 
+-/usr/bin/uname -p = `(/usr/bin/uname -p) 2>/dev/null`
+-/bin/uname -X     = `(/bin/uname -X) 2>/dev/null`
++/usr/bin/uname -p = $( (/usr/bin/uname -p) 2>/dev/null)
++/bin/uname -X     = $( (/bin/uname -X) 2>/dev/null)
+ 
+-hostinfo               = `(hostinfo) 2>/dev/null`
+-/bin/universe          = `(/bin/universe) 2>/dev/null`
+-/usr/bin/arch -k       = `(/usr/bin/arch -k) 2>/dev/null`
+-/bin/arch              = `(/bin/arch) 2>/dev/null`
+-/usr/bin/oslevel       = `(/usr/bin/oslevel) 2>/dev/null`
+-/usr/convex/getsysinfo = `(/usr/convex/getsysinfo) 2>/dev/null`
++hostinfo               = $( (hostinfo) 2>/dev/null)
++/bin/universe          = $( (/bin/universe) 2>/dev/null)
++/usr/bin/arch -k       = $( (/usr/bin/arch -k) 2>/dev/null)
++/bin/arch              = $( (/bin/arch) 2>/dev/null)
++/usr/bin/oslevel       = $( (/usr/bin/oslevel) 2>/dev/null)
++/usr/convex/getsysinfo = $( (/usr/convex/getsysinfo) 2>/dev/null)
+ 
+-UNAME_MACHINE = ${UNAME_MACHINE}
+-UNAME_RELEASE = ${UNAME_RELEASE}
+-UNAME_SYSTEM  = ${UNAME_SYSTEM}
+-UNAME_VERSION = ${UNAME_VERSION}
++UNAME_MACHINE = "$UNAME_MACHINE"
++UNAME_RELEASE = "$UNAME_RELEASE"
++UNAME_SYSTEM  = "$UNAME_SYSTEM"
++UNAME_VERSION = "$UNAME_VERSION"
+ EOF
++fi
+ 
+ exit 1
+ 
+ # Local variables:
+-# eval: (add-hook 'write-file-hooks 'time-stamp)
++# eval: (add-hook 'before-save-hook 'time-stamp)
+ # time-stamp-start: "timestamp='"
+ # time-stamp-format: "%:y-%02m-%02d"
+ # time-stamp-end: "'"
+diff --git a/config/config.sub b/config/config.sub
+index fe4f1ed..63c1f1c 100755
+--- a/config/config.sub
++++ b/config/config.sub
+@@ -1,42 +1,40 @@
+ #! /bin/sh
+ # Configuration validation subroutine script.
+-#   Copyright (C) 1992, 1993, 1994, 1995, 1996, 1997, 1998, 1999,
+-#   2000, 2001, 2002, 2003 Free Software Foundation, Inc.
++#   Copyright 1992-2021 Free Software Foundation, Inc.
+ 
+-timestamp='2003-05-09'
++timestamp='2021-01-08'
+ 
+-# This file is (in principle) common to ALL GNU software.
+-# The presence of a machine in this file suggests that SOME GNU software
+-# can handle that machine.  It does not imply ALL GNU software can.
+-#
+-# This file is free software; you can redistribute it and/or modify
+-# it under the terms of the GNU General Public License as published by
+-# the Free Software Foundation; either version 2 of the License, or
++# This file is free software; you can redistribute it and/or modify it
++# under the terms of the GNU General Public License as published by
++# the Free Software Foundation; either version 3 of the License, or
+ # (at your option) any later version.
+ #
+-# This program is distributed in the hope that it will be useful,
+-# but WITHOUT ANY WARRANTY; without even the implied warranty of
+-# MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
+-# GNU General Public License for more details.
++# This program is distributed in the hope that it will be useful, but
++# WITHOUT ANY WARRANTY; without even the implied warranty of
++# MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU
++# General Public License for more details.
+ #
+ # You should have received a copy of the GNU General Public License
+-# along with this program; if not, write to the Free Software
+-# Foundation, Inc., 59 Temple Place - Suite 330,
+-# Boston, MA 02111-1307, USA.
+-
++# along with this program; if not, see <https://www.gnu.org/licenses/>.
++#
+ # As a special exception to the GNU General Public License, if you
+ # distribute this file as part of a program that contains a
+ # configuration script generated by Autoconf, you may include it under
+-# the same distribution terms that you use for the rest of that program.
++# the same distribution terms that you use for the rest of that
++# program.  This Exception is an additional permission under section 7
++# of the GNU General Public License, version 3 ("GPLv3").
+ 
+-# Please send patches to <config-patches@gnu.org>.  Submit a context
+-# diff and a properly formatted ChangeLog entry.
++
++# Please send patches to <config-patches@gnu.org>.
+ #
+ # Configuration subroutine to validate and canonicalize a configuration type.
+ # Supply the specified configuration type as an argument.
+ # If it is invalid, we print an error message on stderr and exit with code 1.
+ # Otherwise, we print the canonical config type on stdout and succeed.
+ 
++# You can get the latest version of this script from:
++# https://git.savannah.gnu.org/cgit/config.git/plain/config.sub
++
+ # This file is supposed to be the same for all GNU packages
+ # and recognize all the CPU types, system types and aliases
+ # that are meaningful with *any* GNU software.
+@@ -52,15 +50,14 @@ timestamp='2003-05-09'
+ #	CPU_TYPE-MANUFACTURER-KERNEL-OPERATING_SYSTEM
+ # It is wrong to echo any other type of specification.
+ 
+-me=`echo "$0" | sed -e 's,.*/,,'`
++me=$(echo "$0" | sed -e 's,.*/,,')
+ 
+ usage="\
+-Usage: $0 [OPTION] CPU-MFR-OPSYS
+-       $0 [OPTION] ALIAS
++Usage: $0 [OPTION] CPU-MFR-OPSYS or ALIAS
+ 
+ Canonicalize a configuration name.
+ 
+-Operation modes:
++Options:
+   -h, --help         print this help, then exit
+   -t, --time-stamp   print date of last modification, then exit
+   -v, --version      print version number, then exit
+@@ -70,8 +67,7 @@ Report bugs and patches to <config-patches@gnu.org>."
+ version="\
+ GNU config.sub ($timestamp)
+ 
+-Copyright (C) 1992, 1993, 1994, 1995, 1996, 1997, 1998, 1999, 2000, 2001
+-Free Software Foundation, Inc.
++Copyright 1992-2021 Free Software Foundation, Inc.
+ 
+ This is free software; see the source for copying conditions.  There is NO
+ warranty; not even for MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE."
+@@ -83,23 +79,23 @@ Try \`$me --help' for more information."
+ while test $# -gt 0 ; do
+   case $1 in
+     --time-stamp | --time* | -t )
+-       echo "$timestamp" ; exit 0 ;;
++       echo "$timestamp" ; exit ;;
+     --version | -v )
+-       echo "$version" ; exit 0 ;;
++       echo "$version" ; exit ;;
+     --help | --h* | -h )
+-       echo "$usage"; exit 0 ;;
++       echo "$usage"; exit ;;
+     -- )     # Stop option processing
+        shift; break ;;
+     - )	# Use stdin as input.
+        break ;;
+     -* )
+-       echo "$me: invalid option $1$help"
++       echo "$me: invalid option $1$help" >&2
+        exit 1 ;;
+ 
+     *local*)
+        # First pass through any local machine types.
+-       echo $1
+-       exit 0;;
++       echo "$1"
++       exit ;;
+ 
+     * )
+        break ;;
+@@ -114,972 +110,1169 @@ case $# in
+     exit 1;;
+ esac
+ 
+-# Separate what the user gave into CPU-COMPANY and OS or KERNEL-OS (if any).
+-# Here we must recognize all the valid KERNEL-OS combinations.
+-maybe_os=`echo $1 | sed 's/^\(.*\)-\([^-]*-[^-]*\)$/\2/'`
+-case $maybe_os in
+-  nto-qnx* | linux-gnu* | freebsd*-gnu* | netbsd*-gnu* | storm-chaos* | os2-emx* | rtmk-nova*)
+-    os=-$maybe_os
+-    basic_machine=`echo $1 | sed 's/^\(.*\)-\([^-]*-[^-]*\)$/\1/'`
+-    ;;
+-  *)
+-    basic_machine=`echo $1 | sed 's/-[^-]*$//'`
+-    if [ $basic_machine != $1 ]
+-    then os=`echo $1 | sed 's/.*-/-/'`
+-    else os=; fi
+-    ;;
+-esac
++# Split fields of configuration type
++# shellcheck disable=SC2162
++IFS="-" read field1 field2 field3 field4 <<EOF
++$1
++EOF
+ 
+-### Let's recognize common machines as not being operating systems so
+-### that things like config.sub decstation-3100 work.  We also
+-### recognize some manufacturers as not being operating systems, so we
+-### can provide default operating systems below.
+-case $os in
+-	-sun*os*)
+-		# Prevent following clause from handling this invalid input.
+-		;;
+-	-dec* | -mips* | -sequent* | -encore* | -pc532* | -sgi* | -sony* | \
+-	-att* | -7300* | -3300* | -delta* | -motorola* | -sun[234]* | \
+-	-unicom* | -ibm* | -next | -hp | -isi* | -apollo | -altos* | \
+-	-convergent* | -ncr* | -news | -32* | -3600* | -3100* | -hitachi* |\
+-	-c[123]* | -convex* | -sun | -crds | -omron* | -dg | -ultra | -tti* | \
+-	-harris | -dolphin | -highlevel | -gould | -cbm | -ns | -masscomp | \
+-	-apple | -axis)
+-		os=
+-		basic_machine=$1
+-		;;
+-	-sim | -cisco | -oki | -wec | -winbond)
+-		os=
+-		basic_machine=$1
+-		;;
+-	-scout)
+-		;;
+-	-wrs)
+-		os=-vxworks
+-		basic_machine=$1
+-		;;
+-	-chorusos*)
+-		os=-chorusos
+-		basic_machine=$1
+-		;;
+- 	-chorusrdb)
+- 		os=-chorusrdb
+-		basic_machine=$1
+- 		;;
+-	-hiux*)
+-		os=-hiuxwe2
+-		;;
+-	-sco5)
+-		os=-sco3.2v5
+-		basic_machine=`echo $1 | sed -e 's/86-.*/86-pc/'`
+-		;;
+-	-sco4)
+-		os=-sco3.2v4
+-		basic_machine=`echo $1 | sed -e 's/86-.*/86-pc/'`
+-		;;
+-	-sco3.2.[4-9]*)
+-		os=`echo $os | sed -e 's/sco3.2./sco3.2v/'`
+-		basic_machine=`echo $1 | sed -e 's/86-.*/86-pc/'`
+-		;;
+-	-sco3.2v[4-9]*)
+-		# Don't forget version if it is 3.2v4 or newer.
+-		basic_machine=`echo $1 | sed -e 's/86-.*/86-pc/'`
++# Separate into logical components for further validation
++case $1 in
++	*-*-*-*-*)
++		echo Invalid configuration \`"$1"\': more than four components >&2
++		exit 1
+ 		;;
+-	-sco*)
+-		os=-sco3.2v2
+-		basic_machine=`echo $1 | sed -e 's/86-.*/86-pc/'`
++	*-*-*-*)
++		basic_machine=$field1-$field2
++		basic_os=$field3-$field4
+ 		;;
+-	-udk*)
+-		basic_machine=`echo $1 | sed -e 's/86-.*/86-pc/'`
++	*-*-*)
++		# Ambiguous whether COMPANY is present, or skipped and KERNEL-OS is two
++		# parts
++		maybe_os=$field2-$field3
++		case $maybe_os in
++			nto-qnx* | linux-* | uclinux-uclibc* \
++			| uclinux-gnu* | kfreebsd*-gnu* | knetbsd*-gnu* | netbsd*-gnu* \
++			| netbsd*-eabi* | kopensolaris*-gnu* | cloudabi*-eabi* \
++			| storm-chaos* | os2-emx* | rtmk-nova*)
++				basic_machine=$field1
++				basic_os=$maybe_os
++				;;
++			android-linux)
++				basic_machine=$field1-unknown
++				basic_os=linux-android
++				;;
++			*)
++				basic_machine=$field1-$field2
++				basic_os=$field3
++				;;
++		esac
+ 		;;
+-	-isc)
+-		os=-isc2.2
+-		basic_machine=`echo $1 | sed -e 's/86-.*/86-pc/'`
++	*-*)
++		# A lone config we happen to match not fitting any pattern
++		case $field1-$field2 in
++			decstation-3100)
++				basic_machine=mips-dec
++				basic_os=
++				;;
++			*-*)
++				# Second component is usually, but not always the OS
++				case $field2 in
++					# Prevent following clause from handling this valid os
++					sun*os*)
++						basic_machine=$field1
++						basic_os=$field2
++						;;
++					# Manufacturers
++					dec* | mips* | sequent* | encore* | pc533* | sgi* | sony* \
++					| att* | 7300* | 3300* | delta* | motorola* | sun[234]* \
++					| unicom* | ibm* | next | hp | isi* | apollo | altos* \
++					| convergent* | ncr* | news | 32* | 3600* | 3100* \
++					| hitachi* | c[123]* | convex* | sun | crds | omron* | dg \
++					| ultra | tti* | harris | dolphin | highlevel | gould \
++					| cbm | ns | masscomp | apple | axis | knuth | cray \
++					| microblaze* | sim | cisco \
++					| oki | wec | wrs | winbond)
++						basic_machine=$field1-$field2
++						basic_os=
++						;;
++					*)
++						basic_machine=$field1
++						basic_os=$field2
++						;;
++				esac
++			;;
++		esac
+ 		;;
+-	-clix*)
+-		basic_machine=clipper-intergraph
++	*)
++		# Convert single-component short-hands not valid as part of
++		# multi-component configurations.
++		case $field1 in
++			386bsd)
++				basic_machine=i386-pc
++				basic_os=bsd
++				;;
++			a29khif)
++				basic_machine=a29k-amd
++				basic_os=udi
++				;;
++			adobe68k)
++				basic_machine=m68010-adobe
++				basic_os=scout
++				;;
++			alliant)
++				basic_machine=fx80-alliant
++				basic_os=
++				;;
++			altos | altos3068)
++				basic_machine=m68k-altos
++				basic_os=
++				;;
++			am29k)
++				basic_machine=a29k-none
++				basic_os=bsd
++				;;
++			amdahl)
++				basic_machine=580-amdahl
++				basic_os=sysv
++				;;
++			amiga)
++				basic_machine=m68k-unknown
++				basic_os=
++				;;
++			amigaos | amigados)
++				basic_machine=m68k-unknown
++				basic_os=amigaos
++				;;
++			amigaunix | amix)
++				basic_machine=m68k-unknown
++				basic_os=sysv4
++				;;
++			apollo68)
++				basic_machine=m68k-apollo
++				basic_os=sysv
++				;;
++			apollo68bsd)
++				basic_machine=m68k-apollo
++				basic_os=bsd
++				;;
++			aros)
++				basic_machine=i386-pc
++				basic_os=aros
++				;;
++			aux)
++				basic_machine=m68k-apple
++				basic_os=aux
++				;;
++			balance)
++				basic_machine=ns32k-sequent
++				basic_os=dynix
++				;;
++			blackfin)
++				basic_machine=bfin-unknown
++				basic_os=linux
++				;;
++			cegcc)
++				basic_machine=arm-unknown
++				basic_os=cegcc
++				;;
++			convex-c1)
++				basic_machine=c1-convex
++				basic_os=bsd
++				;;
++			convex-c2)
++				basic_machine=c2-convex
++				basic_os=bsd
++				;;
++			convex-c32)
++				basic_machine=c32-convex
++				basic_os=bsd
++				;;
++			convex-c34)
++				basic_machine=c34-convex
++				basic_os=bsd
++				;;
++			convex-c38)
++				basic_machine=c38-convex
++				basic_os=bsd
++				;;
++			cray)
++				basic_machine=j90-cray
++				basic_os=unicos
++				;;
++			crds | unos)
++				basic_machine=m68k-crds
++				basic_os=
++				;;
++			da30)
++				basic_machine=m68k-da30
++				basic_os=
++				;;
++			decstation | pmax | pmin | dec3100 | decstatn)
++				basic_machine=mips-dec
++				basic_os=
++				;;
++			delta88)
++				basic_machine=m88k-motorola
++				basic_os=sysv3
++				;;
++			dicos)
++				basic_machine=i686-pc
++				basic_os=dicos
++				;;
++			djgpp)
++				basic_machine=i586-pc
++				basic_os=msdosdjgpp
++				;;
++			ebmon29k)
++				basic_machine=a29k-amd
++				basic_os=ebmon
++				;;
++			es1800 | OSE68k | ose68k | ose | OSE)
++				basic_machine=m68k-ericsson
++				basic_os=ose
++				;;
++			gmicro)
++				basic_machine=tron-gmicro
++				basic_os=sysv
++				;;
++			go32)
++				basic_machine=i386-pc
++				basic_os=go32
++				;;
++			h8300hms)
++				basic_machine=h8300-hitachi
++				basic_os=hms
++				;;
++			h8300xray)
++				basic_machine=h8300-hitachi
++				basic_os=xray
++				;;
++			h8500hms)
++				basic_machine=h8500-hitachi
++				basic_os=hms
++				;;
++			harris)
++				basic_machine=m88k-harris
++				basic_os=sysv3
++				;;
++			hp300 | hp300hpux)
++				basic_machine=m68k-hp
++				basic_os=hpux
++				;;
++			hp300bsd)
++				basic_machine=m68k-hp
++				basic_os=bsd
++				;;
++			hppaosf)
++				basic_machine=hppa1.1-hp
++				basic_os=osf
++				;;
++			hppro)
++				basic_machine=hppa1.1-hp
++				basic_os=proelf
++				;;
++			i386mach)
++				basic_machine=i386-mach
++				basic_os=mach
++				;;
++			isi68 | isi)
++				basic_machine=m68k-isi
++				basic_os=sysv
++				;;
++			m68knommu)
++				basic_machine=m68k-unknown
++				basic_os=linux
++				;;
++			magnum | m3230)
++				basic_machine=mips-mips
++				basic_os=sysv
++				;;
++			merlin)
++				basic_machine=ns32k-utek
++				basic_os=sysv
++				;;
++			mingw64)
++				basic_machine=x86_64-pc
++				basic_os=mingw64
++				;;
++			mingw32)
++				basic_machine=i686-pc
++				basic_os=mingw32
++				;;
++			mingw32ce)
++				basic_machine=arm-unknown
++				basic_os=mingw32ce
++				;;
++			monitor)
++				basic_machine=m68k-rom68k
++				basic_os=coff
++				;;
++			morphos)
++				basic_machine=powerpc-unknown
++				basic_os=morphos
++				;;
++			moxiebox)
++				basic_machine=moxie-unknown
++				basic_os=moxiebox
++				;;
++			msdos)
++				basic_machine=i386-pc
++				basic_os=msdos
++				;;
++			msys)
++				basic_machine=i686-pc
++				basic_os=msys
++				;;
++			mvs)
++				basic_machine=i370-ibm
++				basic_os=mvs
++				;;
++			nacl)
++				basic_machine=le32-unknown
++				basic_os=nacl
++				;;
++			ncr3000)
++				basic_machine=i486-ncr
++				basic_os=sysv4
++				;;
++			netbsd386)
++				basic_machine=i386-pc
++				basic_os=netbsd
++				;;
++			netwinder)
++				basic_machine=armv4l-rebel
++				basic_os=linux
++				;;
++			news | news700 | news800 | news900)
++				basic_machine=m68k-sony
++				basic_os=newsos
++				;;
++			news1000)
++				basic_machine=m68030-sony
++				basic_os=newsos
++				;;
++			necv70)
++				basic_machine=v70-nec
++				basic_os=sysv
++				;;
++			nh3000)
++				basic_machine=m68k-harris
++				basic_os=cxux
++				;;
++			nh[45]000)
++				basic_machine=m88k-harris
++				basic_os=cxux
++				;;
++			nindy960)
++				basic_machine=i960-intel
++				basic_os=nindy
++				;;
++			mon960)
++				basic_machine=i960-intel
++				basic_os=mon960
++				;;
++			nonstopux)
++				basic_machine=mips-compaq
++				basic_os=nonstopux
++				;;
++			os400)
++				basic_machine=powerpc-ibm
++				basic_os=os400
++				;;
++			OSE68000 | ose68000)
++				basic_machine=m68000-ericsson
++				basic_os=ose
++				;;
++			os68k)
++				basic_machine=m68k-none
++				basic_os=os68k
++				;;
++			paragon)
++				basic_machine=i860-intel
++				basic_os=osf
++				;;
++			parisc)
++				basic_machine=hppa-unknown
++				basic_os=linux
++				;;
++			psp)
++				basic_machine=mipsallegrexel-sony
++				basic_os=psp
++				;;
++			pw32)
++				basic_machine=i586-unknown
++				basic_os=pw32
++				;;
++			rdos | rdos64)
++				basic_machine=x86_64-pc
++				basic_os=rdos
++				;;
++			rdos32)
++				basic_machine=i386-pc
++				basic_os=rdos
++				;;
++			rom68k)
++				basic_machine=m68k-rom68k
++				basic_os=coff
++				;;
++			sa29200)
++				basic_machine=a29k-amd
++				basic_os=udi
++				;;
++			sei)
++				basic_machine=mips-sei
++				basic_os=seiux
++				;;
++			sequent)
++				basic_machine=i386-sequent
++				basic_os=
++				;;
++			sps7)
++				basic_machine=m68k-bull
++				basic_os=sysv2
++				;;
++			st2000)
++				basic_machine=m68k-tandem
++				basic_os=
++				;;
++			stratus)
++				basic_machine=i860-stratus
++				basic_os=sysv4
++				;;
++			sun2)
++				basic_machine=m68000-sun
++				basic_os=
++				;;
++			sun2os3)
++				basic_machine=m68000-sun
++				basic_os=sunos3
++				;;
++			sun2os4)
++				basic_machine=m68000-sun
++				basic_os=sunos4
++				;;
++			sun3)
++				basic_machine=m68k-sun
++				basic_os=
++				;;
++			sun3os3)
++				basic_machine=m68k-sun
++				basic_os=sunos3
++				;;
++			sun3os4)
++				basic_machine=m68k-sun
++				basic_os=sunos4
++				;;
++			sun4)
++				basic_machine=sparc-sun
++				basic_os=
++				;;
++			sun4os3)
++				basic_machine=sparc-sun
++				basic_os=sunos3
++				;;
++			sun4os4)
++				basic_machine=sparc-sun
++				basic_os=sunos4
++				;;
++			sun4sol2)
++				basic_machine=sparc-sun
++				basic_os=solaris2
++				;;
++			sun386 | sun386i | roadrunner)
++				basic_machine=i386-sun
++				basic_os=
++				;;
++			sv1)
++				basic_machine=sv1-cray
++				basic_os=unicos
++				;;
++			symmetry)
++				basic_machine=i386-sequent
++				basic_os=dynix
++				;;
++			t3e)
++				basic_machine=alphaev5-cray
++				basic_os=unicos
++				;;
++			t90)
++				basic_machine=t90-cray
++				basic_os=unicos
++				;;
++			toad1)
++				basic_machine=pdp10-xkl
++				basic_os=tops20
++				;;
++			tpf)
++				basic_machine=s390x-ibm
++				basic_os=tpf
++				;;
++			udi29k)
++				basic_machine=a29k-amd
++				basic_os=udi
++				;;
++			ultra3)
++				basic_machine=a29k-nyu
++				basic_os=sym1
++				;;
++			v810 | necv810)
++				basic_machine=v810-nec
++				basic_os=none
++				;;
++			vaxv)
++				basic_machine=vax-dec
++				basic_os=sysv
++				;;
++			vms)
++				basic_machine=vax-dec
++				basic_os=vms
++				;;
++			vsta)
++				basic_machine=i386-pc
++				basic_os=vsta
++				;;
++			vxworks960)
++				basic_machine=i960-wrs
++				basic_os=vxworks
++				;;
++			vxworks68)
++				basic_machine=m68k-wrs
++				basic_os=vxworks
++				;;
++			vxworks29k)
++				basic_machine=a29k-wrs
++				basic_os=vxworks
++				;;
++			xbox)
++				basic_machine=i686-pc
++				basic_os=mingw32
++				;;
++			ymp)
++				basic_machine=ymp-cray
++				basic_os=unicos
++				;;
++			*)
++				basic_machine=$1
++				basic_os=
++				;;
++		esac
+ 		;;
+-	-isc*)
+-		basic_machine=`echo $1 | sed -e 's/86-.*/86-pc/'`
++esac
++
++# Decode 1-component or ad-hoc basic machines
++case $basic_machine in
++	# Here we handle the default manufacturer of certain CPU types.  It is in
++	# some cases the only manufacturer, in others, it is the most popular.
++	w89k)
++		cpu=hppa1.1
++		vendor=winbond
+ 		;;
+-	-lynx*)
+-		os=-lynxos
++	op50n)
++		cpu=hppa1.1
++		vendor=oki
+ 		;;
+-	-ptx*)
+-		basic_machine=`echo $1 | sed -e 's/86-.*/86-sequent/'`
++	op60c)
++		cpu=hppa1.1
++		vendor=oki
+ 		;;
+-	-windowsnt*)
+-		os=`echo $os | sed -e 's/windowsnt/winnt/'`
++	ibm*)
++		cpu=i370
++		vendor=ibm
+ 		;;
+-	-psos*)
+-		os=-psos
++	orion105)
++		cpu=clipper
++		vendor=highlevel
+ 		;;
+-	-mint | -mint[0-9]*)
+-		basic_machine=m68k-atari
+-		os=-mint
++	mac | mpw | mac-mpw)
++		cpu=m68k
++		vendor=apple
+ 		;;
+-esac
+-
+-# Decode aliases for certain CPU-COMPANY combinations.
+-case $basic_machine in
+-	# Recognize the basic CPU types without company name.
+-	# Some are omitted here because they have special meanings below.
+-	1750a | 580 \
+-	| a29k \
+-	| alpha | alphaev[4-8] | alphaev56 | alphaev6[78] | alphapca5[67] \
+-	| alpha64 | alpha64ev[4-8] | alpha64ev56 | alpha64ev6[78] | alpha64pca5[67] \
+-	| arc | arm | arm[bl]e | arme[lb] | armv[2345] | armv[345][lb] | avr \
+-	| clipper \
+-	| d10v | d30v | dlx | dsp16xx \
+-	| fr30 | frv \
+-	| h8300 | h8500 | hppa | hppa1.[01] | hppa2.0 | hppa2.0[nw] | hppa64 \
+-	| i370 | i860 | i960 | ia64 \
+-	| ip2k \
+-	| m32r | m68000 | m68k | m88k | mcore \
+-	| mips | mipsbe | mipseb | mipsel | mipsle \
+-	| mips16 \
+-	| mips64 | mips64el \
+-	| mips64vr | mips64vrel \
+-	| mips64orion | mips64orionel \
+-	| mips64vr4100 | mips64vr4100el \
+-	| mips64vr4300 | mips64vr4300el \
+-	| mips64vr5000 | mips64vr5000el \
+-	| mipsisa32 | mipsisa32el \
+-	| mipsisa32r2 | mipsisa32r2el \
+-	| mipsisa64 | mipsisa64el \
+-	| mipsisa64sb1 | mipsisa64sb1el \
+-	| mipsisa64sr71k | mipsisa64sr71kel \
+-	| mipstx39 | mipstx39el \
+-	| mn10200 | mn10300 \
+-	| msp430 \
+-	| ns16k | ns32k \
+-	| openrisc | or32 \
+-	| pdp10 | pdp11 | pj | pjl \
+-	| powerpc | powerpc64 | powerpc64le | powerpcle | ppcbe \
+-	| pyramid \
+-	| sh | sh[1234] | sh[23]e | sh[34]eb | shbe | shle | sh[1234]le | sh3ele \
+-	| sh64 | sh64le \
+-	| sparc | sparc64 | sparc86x | sparclet | sparclite | sparcv9 | sparcv9b \
+-	| strongarm \
+-	| tahoe | thumb | tic80 | tron \
+-	| v850 | v850e \
+-	| we32k \
+-	| x86 | xscale | xstormy16 | xtensa \
+-	| z8k)
+-		basic_machine=$basic_machine-unknown
+-		;;
+-	m6811 | m68hc11 | m6812 | m68hc12)
+-		# Motorola 68HC11/12.
+-		basic_machine=$basic_machine-unknown
+-		os=-none
+-		;;
+-	m88110 | m680[12346]0 | m683?2 | m68360 | m5200 | v70 | w65 | z8k)
++	pmac | pmac-mpw)
++		cpu=powerpc
++		vendor=apple
+ 		;;
+ 
+-	# We use `pc' rather than `unknown'
+-	# because (1) that's what they normally are, and
+-	# (2) the word "unknown" tends to confuse beginning users.
+-	i*86 | x86_64)
+-	  basic_machine=$basic_machine-pc
+-	  ;;
+-	# Object if more than one company name word.
+-	*-*-*)
+-		echo Invalid configuration \`$1\': machine \`$basic_machine\' not recognized 1>&2
+-		exit 1
+-		;;
+-	# Recognize the basic CPU types with company name.
+-	580-* \
+-	| a29k-* \
+-	| alpha-* | alphaev[4-8]-* | alphaev56-* | alphaev6[78]-* \
+-	| alpha64-* | alpha64ev[4-8]-* | alpha64ev56-* | alpha64ev6[78]-* \
+-	| alphapca5[67]-* | alpha64pca5[67]-* | arc-* \
+-	| arm-*  | armbe-* | armle-* | armeb-* | armv*-* \
+-	| avr-* \
+-	| bs2000-* \
+-	| c[123]* | c30-* | [cjt]90-* | c4x-* | c54x-* | c55x-* | c6x-* \
+-	| clipper-* | cydra-* \
+-	| d10v-* | d30v-* | dlx-* \
+-	| elxsi-* \
+-	| f30[01]-* | f700-* | fr30-* | frv-* | fx80-* \
+-	| h8300-* | h8500-* \
+-	| hppa-* | hppa1.[01]-* | hppa2.0-* | hppa2.0[nw]-* | hppa64-* \
+-	| i*86-* | i860-* | i960-* | ia64-* \
+-	| ip2k-* \
+-	| m32r-* \
+-	| m68000-* | m680[012346]0-* | m68360-* | m683?2-* | m68k-* \
+-	| m88110-* | m88k-* | mcore-* \
+-	| mips-* | mipsbe-* | mipseb-* | mipsel-* | mipsle-* \
+-	| mips16-* \
+-	| mips64-* | mips64el-* \
+-	| mips64vr-* | mips64vrel-* \
+-	| mips64orion-* | mips64orionel-* \
+-	| mips64vr4100-* | mips64vr4100el-* \
+-	| mips64vr4300-* | mips64vr4300el-* \
+-	| mips64vr5000-* | mips64vr5000el-* \
+-	| mipsisa32-* | mipsisa32el-* \
+-	| mipsisa32r2-* | mipsisa32r2el-* \
+-	| mipsisa64-* | mipsisa64el-* \
+-	| mipsisa64sb1-* | mipsisa64sb1el-* \
+-	| mipsisa64sr71k-* | mipsisa64sr71kel-* \
+-	| mipstx39-* | mipstx39el-* \
+-	| msp430-* \
+-	| none-* | np1-* | nv1-* | ns16k-* | ns32k-* \
+-	| orion-* \
+-	| pdp10-* | pdp11-* | pj-* | pjl-* | pn-* | power-* \
+-	| powerpc-* | powerpc64-* | powerpc64le-* | powerpcle-* | ppcbe-* \
+-	| pyramid-* \
+-	| romp-* | rs6000-* \
+-	| sh-* | sh[1234]-* | sh[23]e-* | sh[34]eb-* | shbe-* \
+-	| shle-* | sh[1234]le-* | sh3ele-* | sh64-* | sh64le-* \
+-	| sparc-* | sparc64-* | sparc86x-* | sparclet-* | sparclite-* \
+-	| sparcv9-* | sparcv9b-* | strongarm-* | sv1-* | sx?-* \
+-	| tahoe-* | thumb-* \
+-	| tic30-* | tic4x-* | tic54x-* | tic55x-* | tic6x-* | tic80-* \
+-	| tron-* \
+-	| v850-* | v850e-* | vax-* \
+-	| we32k-* \
+-	| x86-* | x86_64-* | xps100-* | xscale-* | xstormy16-* \
+-	| xtensa-* \
+-	| ymp-* \
+-	| z8k-*)
+-		;;
+ 	# Recognize the various machine names and aliases which stand
+ 	# for a CPU type and a company and sometimes even an OS.
+-	386bsd)
+-		basic_machine=i386-unknown
+-		os=-bsd
+-		;;
+ 	3b1 | 7300 | 7300-att | att-7300 | pc7300 | safari | unixpc)
+-		basic_machine=m68000-att
++		cpu=m68000
++		vendor=att
+ 		;;
+ 	3b*)
+-		basic_machine=we32k-att
+-		;;
+-	a29khif)
+-		basic_machine=a29k-amd
+-		os=-udi
+-		;;
+-	adobe68k)
+-		basic_machine=m68010-adobe
+-		os=-scout
+-		;;
+-	alliant | fx80)
+-		basic_machine=fx80-alliant
+-		;;
+-	altos | altos3068)
+-		basic_machine=m68k-altos
+-		;;
+-	am29k)
+-		basic_machine=a29k-none
+-		os=-bsd
+-		;;
+-	amd64)
+-		basic_machine=x86_64-pc
+-		;;
+-	amdahl)
+-		basic_machine=580-amdahl
+-		os=-sysv
+-		;;
+-	amiga | amiga-*)
+-		basic_machine=m68k-unknown
+-		;;
+-	amigaos | amigados)
+-		basic_machine=m68k-unknown
+-		os=-amigaos
++		cpu=we32k
++		vendor=att
+ 		;;
+-	amigaunix | amix)
+-		basic_machine=m68k-unknown
+-		os=-sysv4
+-		;;
+-	apollo68)
+-		basic_machine=m68k-apollo
+-		os=-sysv
+-		;;
+-	apollo68bsd)
+-		basic_machine=m68k-apollo
+-		os=-bsd
+-		;;
+-	aux)
+-		basic_machine=m68k-apple
+-		os=-aux
+-		;;
+-	balance)
+-		basic_machine=ns32k-sequent
+-		os=-dynix
+-		;;
+-	c90)
+-		basic_machine=c90-cray
+-		os=-unicos
+-		;;
+-	convex-c1)
+-		basic_machine=c1-convex
+-		os=-bsd
+-		;;
+-	convex-c2)
+-		basic_machine=c2-convex
+-		os=-bsd
+-		;;
+-	convex-c32)
+-		basic_machine=c32-convex
+-		os=-bsd
+-		;;
+-	convex-c34)
+-		basic_machine=c34-convex
+-		os=-bsd
+-		;;
+-	convex-c38)
+-		basic_machine=c38-convex
+-		os=-bsd
+-		;;
+-	cray | j90)
+-		basic_machine=j90-cray
+-		os=-unicos
+-		;;
+-	crds | unos)
+-		basic_machine=m68k-crds
+-		;;
+-	cris | cris-* | etrax*)
+-		basic_machine=cris-axis
+-		;;
+-	da30 | da30-*)
+-		basic_machine=m68k-da30
+-		;;
+-	decstation | decstation-3100 | pmax | pmax-* | pmin | dec3100 | decstatn)
+-		basic_machine=mips-dec
++	bluegene*)
++		cpu=powerpc
++		vendor=ibm
++		basic_os=cnk
+ 		;;
+ 	decsystem10* | dec10*)
+-		basic_machine=pdp10-dec
+-		os=-tops10
++		cpu=pdp10
++		vendor=dec
++		basic_os=tops10
+ 		;;
+ 	decsystem20* | dec20*)
+-		basic_machine=pdp10-dec
+-		os=-tops20
++		cpu=pdp10
++		vendor=dec
++		basic_os=tops20
+ 		;;
+ 	delta | 3300 | motorola-3300 | motorola-delta \
+ 	      | 3300-motorola | delta-motorola)
+-		basic_machine=m68k-motorola
+-		;;
+-	delta88)
+-		basic_machine=m88k-motorola
+-		os=-sysv3
+-		;;
+-	dpx20 | dpx20-*)
+-		basic_machine=rs6000-bull
+-		os=-bosx
+-		;;
+-	dpx2* | dpx2*-bull)
+-		basic_machine=m68k-bull
+-		os=-sysv3
++		cpu=m68k
++		vendor=motorola
+ 		;;
+-	ebmon29k)
+-		basic_machine=a29k-amd
+-		os=-ebmon
+-		;;
+-	elxsi)
+-		basic_machine=elxsi-elxsi
+-		os=-bsd
++	dpx2*)
++		cpu=m68k
++		vendor=bull
++		basic_os=sysv3
+ 		;;
+ 	encore | umax | mmax)
+-		basic_machine=ns32k-encore
++		cpu=ns32k
++		vendor=encore
+ 		;;
+-	es1800 | OSE68k | ose68k | ose | OSE)
+-		basic_machine=m68k-ericsson
+-		os=-ose
++	elxsi)
++		cpu=elxsi
++		vendor=elxsi
++		basic_os=${basic_os:-bsd}
+ 		;;
+ 	fx2800)
+-		basic_machine=i860-alliant
++		cpu=i860
++		vendor=alliant
+ 		;;
+ 	genix)
+-		basic_machine=ns32k-ns
+-		;;
+-	gmicro)
+-		basic_machine=tron-gmicro
+-		os=-sysv
+-		;;
+-	go32)
+-		basic_machine=i386-pc
+-		os=-go32
++		cpu=ns32k
++		vendor=ns
+ 		;;
+ 	h3050r* | hiux*)
+-		basic_machine=hppa1.1-hitachi
+-		os=-hiuxwe2
+-		;;
+-	h8300hms)
+-		basic_machine=h8300-hitachi
+-		os=-hms
+-		;;
+-	h8300xray)
+-		basic_machine=h8300-hitachi
+-		os=-xray
+-		;;
+-	h8500hms)
+-		basic_machine=h8500-hitachi
+-		os=-hms
+-		;;
+-	harris)
+-		basic_machine=m88k-harris
+-		os=-sysv3
+-		;;
+-	hp300-*)
+-		basic_machine=m68k-hp
+-		;;
+-	hp300bsd)
+-		basic_machine=m68k-hp
+-		os=-bsd
+-		;;
+-	hp300hpux)
+-		basic_machine=m68k-hp
+-		os=-hpux
++		cpu=hppa1.1
++		vendor=hitachi
++		basic_os=hiuxwe2
+ 		;;
+ 	hp3k9[0-9][0-9] | hp9[0-9][0-9])
+-		basic_machine=hppa1.0-hp
++		cpu=hppa1.0
++		vendor=hp
+ 		;;
+ 	hp9k2[0-9][0-9] | hp9k31[0-9])
+-		basic_machine=m68000-hp
++		cpu=m68000
++		vendor=hp
+ 		;;
+ 	hp9k3[2-9][0-9])
+-		basic_machine=m68k-hp
++		cpu=m68k
++		vendor=hp
+ 		;;
+ 	hp9k6[0-9][0-9] | hp6[0-9][0-9])
+-		basic_machine=hppa1.0-hp
++		cpu=hppa1.0
++		vendor=hp
+ 		;;
+ 	hp9k7[0-79][0-9] | hp7[0-79][0-9])
+-		basic_machine=hppa1.1-hp
++		cpu=hppa1.1
++		vendor=hp
+ 		;;
+ 	hp9k78[0-9] | hp78[0-9])
+ 		# FIXME: really hppa2.0-hp
+-		basic_machine=hppa1.1-hp
++		cpu=hppa1.1
++		vendor=hp
+ 		;;
+ 	hp9k8[67]1 | hp8[67]1 | hp9k80[24] | hp80[24] | hp9k8[78]9 | hp8[78]9 | hp9k893 | hp893)
+ 		# FIXME: really hppa2.0-hp
+-		basic_machine=hppa1.1-hp
++		cpu=hppa1.1
++		vendor=hp
+ 		;;
+ 	hp9k8[0-9][13679] | hp8[0-9][13679])
+-		basic_machine=hppa1.1-hp
++		cpu=hppa1.1
++		vendor=hp
+ 		;;
+ 	hp9k8[0-9][0-9] | hp8[0-9][0-9])
+-		basic_machine=hppa1.0-hp
+-		;;
+-	hppa-next)
+-		os=-nextstep3
+-		;;
+-	hppaosf)
+-		basic_machine=hppa1.1-hp
+-		os=-osf
++		cpu=hppa1.0
++		vendor=hp
+ 		;;
+-	hppro)
+-		basic_machine=hppa1.1-hp
+-		os=-proelf
+-		;;
+-	i370-ibm* | ibm*)
+-		basic_machine=i370-ibm
+-		;;
+-# I'm not sure what "Sysv32" means.  Should this be sysv3.2?
+ 	i*86v32)
+-		basic_machine=`echo $1 | sed -e 's/86.*/86-pc/'`
+-		os=-sysv32
++		cpu=$(echo "$1" | sed -e 's/86.*/86/')
++		vendor=pc
++		basic_os=sysv32
+ 		;;
+ 	i*86v4*)
+-		basic_machine=`echo $1 | sed -e 's/86.*/86-pc/'`
+-		os=-sysv4
++		cpu=$(echo "$1" | sed -e 's/86.*/86/')
++		vendor=pc
++		basic_os=sysv4
+ 		;;
+ 	i*86v)
+-		basic_machine=`echo $1 | sed -e 's/86.*/86-pc/'`
+-		os=-sysv
++		cpu=$(echo "$1" | sed -e 's/86.*/86/')
++		vendor=pc
++		basic_os=sysv
+ 		;;
+ 	i*86sol2)
+-		basic_machine=`echo $1 | sed -e 's/86.*/86-pc/'`
+-		os=-solaris2
+-		;;
+-	i386mach)
+-		basic_machine=i386-mach
+-		os=-mach
++		cpu=$(echo "$1" | sed -e 's/86.*/86/')
++		vendor=pc
++		basic_os=solaris2
+ 		;;
+-	i386-vsta | vsta)
+-		basic_machine=i386-unknown
+-		os=-vsta
++	j90 | j90-cray)
++		cpu=j90
++		vendor=cray
++		basic_os=${basic_os:-unicos}
+ 		;;
+ 	iris | iris4d)
+-		basic_machine=mips-sgi
+-		case $os in
+-		    -irix*)
++		cpu=mips
++		vendor=sgi
++		case $basic_os in
++		    irix*)
+ 			;;
+ 		    *)
+-			os=-irix4
++			basic_os=irix4
+ 			;;
+ 		esac
+ 		;;
+-	isi68 | isi)
+-		basic_machine=m68k-isi
+-		os=-sysv
+-		;;
+-	m88k-omron*)
+-		basic_machine=m88k-omron
+-		;;
+-	magnum | m3230)
+-		basic_machine=mips-mips
+-		os=-sysv
+-		;;
+-	merlin)
+-		basic_machine=ns32k-utek
+-		os=-sysv
+-		;;
+-	mingw32)
+-		basic_machine=i386-pc
+-		os=-mingw32
+-		;;
+ 	miniframe)
+-		basic_machine=m68000-convergent
+-		;;
+-	*mint | -mint[0-9]* | *MiNT | *MiNT[0-9]*)
+-		basic_machine=m68k-atari
+-		os=-mint
+-		;;
+-	mips3*-*)
+-		basic_machine=`echo $basic_machine | sed -e 's/mips3/mips64/'`
+-		;;
+-	mips3*)
+-		basic_machine=`echo $basic_machine | sed -e 's/mips3/mips64/'`-unknown
+-		;;
+-	mmix*)
+-		basic_machine=mmix-knuth
+-		os=-mmixware
+-		;;
+-	monitor)
+-		basic_machine=m68k-rom68k
+-		os=-coff
++		cpu=m68000
++		vendor=convergent
+ 		;;
+-	morphos)
+-		basic_machine=powerpc-unknown
+-		os=-morphos
+-		;;
+-	msdos)
+-		basic_machine=i386-pc
+-		os=-msdos
+-		;;
+-	mvs)
+-		basic_machine=i370-ibm
+-		os=-mvs
+-		;;
+-	ncr3000)
+-		basic_machine=i486-ncr
+-		os=-sysv4
+-		;;
+-	netbsd386)
+-		basic_machine=i386-unknown
+-		os=-netbsd
+-		;;
+-	netwinder)
+-		basic_machine=armv4l-rebel
+-		os=-linux
+-		;;
+-	news | news700 | news800 | news900)
+-		basic_machine=m68k-sony
+-		os=-newsos
+-		;;
+-	news1000)
+-		basic_machine=m68030-sony
+-		os=-newsos
++	*mint | mint[0-9]* | *MiNT | *MiNT[0-9]*)
++		cpu=m68k
++		vendor=atari
++		basic_os=mint
+ 		;;
+ 	news-3600 | risc-news)
+-		basic_machine=mips-sony
+-		os=-newsos
+-		;;
+-	necv70)
+-		basic_machine=v70-nec
+-		os=-sysv
+-		;;
+-	next | m*-next )
+-		basic_machine=m68k-next
+-		case $os in
+-		    -nextstep* )
++		cpu=mips
++		vendor=sony
++		basic_os=newsos
++		;;
++	next | m*-next)
++		cpu=m68k
++		vendor=next
++		case $basic_os in
++		    openstep*)
++		        ;;
++		    nextstep*)
+ 			;;
+-		    -ns2*)
+-		      os=-nextstep2
++		    ns2*)
++		      basic_os=nextstep2
+ 			;;
+ 		    *)
+-		      os=-nextstep3
++		      basic_os=nextstep3
+ 			;;
+ 		esac
+ 		;;
+-	nh3000)
+-		basic_machine=m68k-harris
+-		os=-cxux
+-		;;
+-	nh[45]000)
+-		basic_machine=m88k-harris
+-		os=-cxux
+-		;;
+-	nindy960)
+-		basic_machine=i960-intel
+-		os=-nindy
+-		;;
+-	mon960)
+-		basic_machine=i960-intel
+-		os=-mon960
+-		;;
+-	nonstopux)
+-		basic_machine=mips-compaq
+-		os=-nonstopux
+-		;;
+ 	np1)
+-		basic_machine=np1-gould
+-		;;
+-	nv1)
+-		basic_machine=nv1-cray
+-		os=-unicosmp
+-		;;
+-	nsr-tandem)
+-		basic_machine=nsr-tandem
++		cpu=np1
++		vendor=gould
+ 		;;
+ 	op50n-* | op60c-*)
+-		basic_machine=hppa1.1-oki
+-		os=-proelf
+-		;;
+-	or32 | or32-*)
+-		basic_machine=or32-unknown
+-		os=-coff
+-		;;
+-	OSE68000 | ose68000)
+-		basic_machine=m68000-ericsson
+-		os=-ose
+-		;;
+-	os68k)
+-		basic_machine=m68k-none
+-		os=-os68k
++		cpu=hppa1.1
++		vendor=oki
++		basic_os=proelf
+ 		;;
+ 	pa-hitachi)
+-		basic_machine=hppa1.1-hitachi
+-		os=-hiuxwe2
+-		;;
+-	paragon)
+-		basic_machine=i860-intel
+-		os=-osf
++		cpu=hppa1.1
++		vendor=hitachi
++		basic_os=hiuxwe2
+ 		;;
+ 	pbd)
+-		basic_machine=sparc-tti
++		cpu=sparc
++		vendor=tti
+ 		;;
+ 	pbb)
+-		basic_machine=m68k-tti
+-		;;
+-	pc532 | pc532-*)
+-		basic_machine=ns32k-pc532
+-		;;
+-	pentium | p5 | k5 | k6 | nexgen | viac3)
+-		basic_machine=i586-pc
++		cpu=m68k
++		vendor=tti
+ 		;;
+-	pentiumpro | p6 | 6x86 | athlon | athlon_*)
+-		basic_machine=i686-pc
+-		;;
+-	pentiumii | pentium2)
+-		basic_machine=i686-pc
+-		;;
+-	pentium-* | p5-* | k5-* | k6-* | nexgen-* | viac3-*)
+-		basic_machine=i586-`echo $basic_machine | sed 's/^[^-]*-//'`
+-		;;
+-	pentiumpro-* | p6-* | 6x86-* | athlon-*)
+-		basic_machine=i686-`echo $basic_machine | sed 's/^[^-]*-//'`
+-		;;
+-	pentiumii-* | pentium2-*)
+-		basic_machine=i686-`echo $basic_machine | sed 's/^[^-]*-//'`
++	pc532)
++		cpu=ns32k
++		vendor=pc532
+ 		;;
+ 	pn)
+-		basic_machine=pn-gould
++		cpu=pn
++		vendor=gould
+ 		;;
+-	power)	basic_machine=power-ibm
++	power)
++		cpu=power
++		vendor=ibm
+ 		;;
+-	ppc)	basic_machine=powerpc-unknown
++	ps2)
++		cpu=i386
++		vendor=ibm
+ 		;;
+-	ppc-*)	basic_machine=powerpc-`echo $basic_machine | sed 's/^[^-]*-//'`
++	rm[46]00)
++		cpu=mips
++		vendor=siemens
+ 		;;
+-	ppcle | powerpclittle | ppc-le | powerpc-little)
+-		basic_machine=powerpcle-unknown
++	rtpc | rtpc-*)
++		cpu=romp
++		vendor=ibm
+ 		;;
+-	ppcle-* | powerpclittle-*)
+-		basic_machine=powerpcle-`echo $basic_machine | sed 's/^[^-]*-//'`
++	sde)
++		cpu=mipsisa32
++		vendor=sde
++		basic_os=${basic_os:-elf}
+ 		;;
+-	ppc64)	basic_machine=powerpc64-unknown
++	simso-wrs)
++		cpu=sparclite
++		vendor=wrs
++		basic_os=vxworks
+ 		;;
+-	ppc64-*) basic_machine=powerpc64-`echo $basic_machine | sed 's/^[^-]*-//'`
++	tower | tower-32)
++		cpu=m68k
++		vendor=ncr
+ 		;;
+-	ppc64le | powerpc64little | ppc64-le | powerpc64-little)
+-		basic_machine=powerpc64le-unknown
++	vpp*|vx|vx-*)
++		cpu=f301
++		vendor=fujitsu
+ 		;;
+-	ppc64le-* | powerpc64little-*)
+-		basic_machine=powerpc64le-`echo $basic_machine | sed 's/^[^-]*-//'`
++	w65)
++		cpu=w65
++		vendor=wdc
+ 		;;
+-	ps2)
+-		basic_machine=i386-ibm
++	w89k-*)
++		cpu=hppa1.1
++		vendor=winbond
++		basic_os=proelf
+ 		;;
+-	pw32)
+-		basic_machine=i586-unknown
+-		os=-pw32
++	none)
++		cpu=none
++		vendor=none
+ 		;;
+-	rom68k)
+-		basic_machine=m68k-rom68k
+-		os=-coff
++	leon|leon[3-9])
++		cpu=sparc
++		vendor=$basic_machine
+ 		;;
+-	rm[46]00)
+-		basic_machine=mips-siemens
++	leon-*|leon[3-9]-*)
++		cpu=sparc
++		vendor=$(echo "$basic_machine" | sed 's/-.*//')
+ 		;;
+-	rtpc | rtpc-*)
+-		basic_machine=romp-ibm
++
++	*-*)
++		# shellcheck disable=SC2162
++		IFS="-" read cpu vendor <<EOF
++$basic_machine
++EOF
+ 		;;
+-	s390 | s390-*)
+-		basic_machine=s390-ibm
++	# We use `pc' rather than `unknown'
++	# because (1) that's what they normally are, and
++	# (2) the word "unknown" tends to confuse beginning users.
++	i*86 | x86_64)
++		cpu=$basic_machine
++		vendor=pc
+ 		;;
+-	s390x | s390x-*)
+-		basic_machine=s390x-ibm
++	# These rules are duplicated from below for sake of the special case above;
++	# i.e. things that normalized to x86 arches should also default to "pc"
++	pc98)
++		cpu=i386
++		vendor=pc
+ 		;;
+-	sa29200)
+-		basic_machine=a29k-amd
+-		os=-udi
++	x64 | amd64)
++		cpu=x86_64
++		vendor=pc
+ 		;;
+-	sb1)
+-		basic_machine=mipsisa64sb1-unknown
++	# Recognize the basic CPU types without company name.
++	*)
++		cpu=$basic_machine
++		vendor=unknown
+ 		;;
+-	sb1el)
+-		basic_machine=mipsisa64sb1el-unknown
++esac
++
++unset -v basic_machine
++
++# Decode basic machines in the full and proper CPU-Company form.
++case $cpu-$vendor in
++	# Here we handle the default manufacturer of certain CPU types in canonical form. It is in
++	# some cases the only manufacturer, in others, it is the most popular.
++	craynv-unknown)
++		vendor=cray
++		basic_os=${basic_os:-unicosmp}
+ 		;;
+-	sequent)
+-		basic_machine=i386-sequent
++	c90-unknown | c90-cray)
++		vendor=cray
++		basic_os=${Basic_os:-unicos}
+ 		;;
+-	sh)
+-		basic_machine=sh-hitachi
+-		os=-hms
++	fx80-unknown)
++		vendor=alliant
+ 		;;
+-	sparclite-wrs | simso-wrs)
+-		basic_machine=sparclite-wrs
+-		os=-vxworks
++	romp-unknown)
++		vendor=ibm
+ 		;;
+-	sps7)
+-		basic_machine=m68k-bull
+-		os=-sysv2
++	mmix-unknown)
++		vendor=knuth
+ 		;;
+-	spur)
+-		basic_machine=spur-unknown
++	microblaze-unknown | microblazeel-unknown)
++		vendor=xilinx
+ 		;;
+-	st2000)
+-		basic_machine=m68k-tandem
++	rs6000-unknown)
++		vendor=ibm
+ 		;;
+-	stratus)
+-		basic_machine=i860-stratus
+-		os=-sysv4
++	vax-unknown)
++		vendor=dec
+ 		;;
+-	sun2)
+-		basic_machine=m68000-sun
++	pdp11-unknown)
++		vendor=dec
+ 		;;
+-	sun2os3)
+-		basic_machine=m68000-sun
+-		os=-sunos3
++	we32k-unknown)
++		vendor=att
+ 		;;
+-	sun2os4)
+-		basic_machine=m68000-sun
+-		os=-sunos4
++	cydra-unknown)
++		vendor=cydrome
+ 		;;
+-	sun3os3)
+-		basic_machine=m68k-sun
+-		os=-sunos3
++	i370-ibm*)
++		vendor=ibm
+ 		;;
+-	sun3os4)
+-		basic_machine=m68k-sun
+-		os=-sunos4
++	orion-unknown)
++		vendor=highlevel
+ 		;;
+-	sun4os3)
+-		basic_machine=sparc-sun
+-		os=-sunos3
++	xps-unknown | xps100-unknown)
++		cpu=xps100
++		vendor=honeywell
+ 		;;
+-	sun4os4)
+-		basic_machine=sparc-sun
+-		os=-sunos4
++
++	# Here we normalize CPU types with a missing or matching vendor
++	dpx20-unknown | dpx20-bull)
++		cpu=rs6000
++		vendor=bull
++		basic_os=${basic_os:-bosx}
+ 		;;
+-	sun4sol2)
+-		basic_machine=sparc-sun
+-		os=-solaris2
++
++	# Here we normalize CPU types irrespective of the vendor
++	amd64-*)
++		cpu=x86_64
+ 		;;
+-	sun3 | sun3-*)
+-		basic_machine=m68k-sun
++	blackfin-*)
++		cpu=bfin
++		basic_os=linux
+ 		;;
+-	sun4)
+-		basic_machine=sparc-sun
++	c54x-*)
++		cpu=tic54x
+ 		;;
+-	sun386 | sun386i | roadrunner)
+-		basic_machine=i386-sun
++	c55x-*)
++		cpu=tic55x
+ 		;;
+-	sv1)
+-		basic_machine=sv1-cray
+-		os=-unicos
++	c6x-*)
++		cpu=tic6x
+ 		;;
+-	symmetry)
+-		basic_machine=i386-sequent
+-		os=-dynix
++	e500v[12]-*)
++		cpu=powerpc
++		basic_os=${basic_os}"spe"
+ 		;;
+-	t3e)
+-		basic_machine=alphaev5-cray
+-		os=-unicos
++	mips3*-*)
++		cpu=mips64
+ 		;;
+-	t90)
+-		basic_machine=t90-cray
+-		os=-unicos
++	ms1-*)
++		cpu=mt
+ 		;;
+-        tic4x | c4x*)
+-		basic_machine=tic4x-unknown
+-		os=-coff
++	m68knommu-*)
++		cpu=m68k
++		basic_os=linux
+ 		;;
+-	tic54x | c54x*)
+-		basic_machine=tic54x-unknown
+-		os=-coff
++	m9s12z-* | m68hcs12z-* | hcs12z-* | s12z-*)
++		cpu=s12z
+ 		;;
+-	tic55x | c55x*)
+-		basic_machine=tic55x-unknown
+-		os=-coff
++	openrisc-*)
++		cpu=or32
+ 		;;
+-	tic6x | c6x*)
+-		basic_machine=tic6x-unknown
+-		os=-coff
++	parisc-*)
++		cpu=hppa
++		basic_os=linux
+ 		;;
+-	tx39)
+-		basic_machine=mipstx39-unknown
++	pentium-* | p5-* | k5-* | k6-* | nexgen-* | viac3-*)
++		cpu=i586
+ 		;;
+-	tx39el)
+-		basic_machine=mipstx39el-unknown
++	pentiumpro-* | p6-* | 6x86-* | athlon-* | athalon_*-*)
++		cpu=i686
+ 		;;
+-	toad1)
+-		basic_machine=pdp10-xkl
+-		os=-tops20
++	pentiumii-* | pentium2-* | pentiumiii-* | pentium3-*)
++		cpu=i686
+ 		;;
+-	tower | tower-32)
+-		basic_machine=m68k-ncr
++	pentium4-*)
++		cpu=i786
+ 		;;
+-	udi29k)
+-		basic_machine=a29k-amd
+-		os=-udi
++	pc98-*)
++		cpu=i386
+ 		;;
+-	ultra3)
+-		basic_machine=a29k-nyu
+-		os=-sym1
++	ppc-* | ppcbe-*)
++		cpu=powerpc
+ 		;;
+-	v810 | necv810)
+-		basic_machine=v810-nec
+-		os=-none
++	ppcle-* | powerpclittle-*)
++		cpu=powerpcle
+ 		;;
+-	vaxv)
+-		basic_machine=vax-dec
+-		os=-sysv
++	ppc64-*)
++		cpu=powerpc64
+ 		;;
+-	vms)
+-		basic_machine=vax-dec
+-		os=-vms
++	ppc64le-* | powerpc64little-*)
++		cpu=powerpc64le
+ 		;;
+-	vpp*|vx|vx-*)
+-		basic_machine=f301-fujitsu
++	sb1-*)
++		cpu=mipsisa64sb1
+ 		;;
+-	vxworks960)
+-		basic_machine=i960-wrs
+-		os=-vxworks
++	sb1el-*)
++		cpu=mipsisa64sb1el
+ 		;;
+-	vxworks68)
+-		basic_machine=m68k-wrs
+-		os=-vxworks
++	sh5e[lb]-*)
++		cpu=$(echo "$cpu" | sed 's/^\(sh.\)e\(.\)$/\1\2e/')
+ 		;;
+-	vxworks29k)
+-		basic_machine=a29k-wrs
+-		os=-vxworks
++	spur-*)
++		cpu=spur
+ 		;;
+-	w65*)
+-		basic_machine=w65-wdc
+-		os=-none
++	strongarm-* | thumb-*)
++		cpu=arm
+ 		;;
+-	w89k-*)
+-		basic_machine=hppa1.1-winbond
+-		os=-proelf
++	tx39-*)
++		cpu=mipstx39
+ 		;;
+-	xps | xps100)
+-		basic_machine=xps100-honeywell
++	tx39el-*)
++		cpu=mipstx39el
+ 		;;
+-	ymp)
+-		basic_machine=ymp-cray
+-		os=-unicos
++	x64-*)
++		cpu=x86_64
+ 		;;
+-	z8k-*-coff)
+-		basic_machine=z8k-unknown
+-		os=-sim
++	xscale-* | xscalee[bl]-*)
++		cpu=$(echo "$cpu" | sed 's/^xscale/arm/')
+ 		;;
+-	none)
+-		basic_machine=none-none
+-		os=-none
++	arm64-*)
++		cpu=aarch64
+ 		;;
+ 
+-# Here we handle the default manufacturer of certain CPU types.  It is in
+-# some cases the only manufacturer, in others, it is the most popular.
+-	w89k)
+-		basic_machine=hppa1.1-winbond
+-		;;
+-	op50n)
+-		basic_machine=hppa1.1-oki
+-		;;
+-	op60c)
+-		basic_machine=hppa1.1-oki
+-		;;
+-	romp)
+-		basic_machine=romp-ibm
+-		;;
+-	rs6000)
+-		basic_machine=rs6000-ibm
+-		;;
+-	vax)
+-		basic_machine=vax-dec
+-		;;
+-	pdp10)
+-		# there are many clones, so DEC is not a safe bet
+-		basic_machine=pdp10-unknown
++	# Recognize the canonical CPU Types that limit and/or modify the
++	# company names they are paired with.
++	cr16-*)
++		basic_os=${basic_os:-elf}
+ 		;;
+-	pdp11)
+-		basic_machine=pdp11-dec
++	crisv32-* | etraxfs*-*)
++		cpu=crisv32
++		vendor=axis
+ 		;;
+-	we32k)
+-		basic_machine=we32k-att
++	cris-* | etrax*-*)
++		cpu=cris
++		vendor=axis
+ 		;;
+-	sh3 | sh4 | sh[34]eb | sh[1234]le | sh[23]ele)
+-		basic_machine=sh-unknown
++	crx-*)
++		basic_os=${basic_os:-elf}
+ 		;;
+-	sh64)
+-		basic_machine=sh64-unknown
++	neo-tandem)
++		cpu=neo
++		vendor=tandem
+ 		;;
+-	sparc | sparcv9 | sparcv9b)
+-		basic_machine=sparc-sun
++	nse-tandem)
++		cpu=nse
++		vendor=tandem
+ 		;;
+-	cydra)
+-		basic_machine=cydra-cydrome
+-		;;
+-	orion)
+-		basic_machine=orion-highlevel
++	nsr-tandem)
++		cpu=nsr
++		vendor=tandem
+ 		;;
+-	orion105)
+-		basic_machine=clipper-highlevel
++	nsv-tandem)
++		cpu=nsv
++		vendor=tandem
+ 		;;
+-	mac | mpw | mac-mpw)
+-		basic_machine=m68k-apple
++	nsx-tandem)
++		cpu=nsx
++		vendor=tandem
+ 		;;
+-	pmac | pmac-mpw)
+-		basic_machine=powerpc-apple
++	mipsallegrexel-sony)
++		cpu=mipsallegrexel
++		vendor=sony
+ 		;;
+-	*-unknown)
+-		# Make sure to match an already-canonicalized machine name.
++	tile*-*)
++		basic_os=${basic_os:-linux-gnu}
+ 		;;
++
+ 	*)
+-		echo Invalid configuration \`$1\': machine \`$basic_machine\' not recognized 1>&2
+-		exit 1
++		# Recognize the canonical CPU types that are allowed with any
++		# company name.
++		case $cpu in
++			1750a | 580 \
++			| a29k \
++			| aarch64 | aarch64_be \
++			| abacus \
++			| alpha | alphaev[4-8] | alphaev56 | alphaev6[78] \
++			| alpha64 | alpha64ev[4-8] | alpha64ev56 | alpha64ev6[78] \
++			| alphapca5[67] | alpha64pca5[67] \
++			| am33_2.0 \
++			| amdgcn \
++			| arc | arceb \
++			| arm | arm[lb]e | arme[lb] | armv* \
++			| avr | avr32 \
++			| asmjs \
++			| ba \
++			| be32 | be64 \
++			| bfin | bpf | bs2000 \
++			| c[123]* | c30 | [cjt]90 | c4x \
++			| c8051 | clipper | craynv | csky | cydra \
++			| d10v | d30v | dlx | dsp16xx \
++			| e2k | elxsi | epiphany \
++			| f30[01] | f700 | fido | fr30 | frv | ft32 | fx80 \
++			| h8300 | h8500 \
++			| hppa | hppa1.[01] | hppa2.0 | hppa2.0[nw] | hppa64 \
++			| hexagon \
++			| i370 | i*86 | i860 | i960 | ia16 | ia64 \
++			| ip2k | iq2000 \
++			| k1om \
++			| le32 | le64 \
++			| lm32 \
++			| loongarch32 | loongarch64 | loongarchx32 \
++			| m32c | m32r | m32rle \
++			| m5200 | m68000 | m680[012346]0 | m68360 | m683?2 | m68k \
++			| m6811 | m68hc11 | m6812 | m68hc12 | m68hcs12x \
++			| m88110 | m88k | maxq | mb | mcore | mep | metag \
++			| microblaze | microblazeel \
++			| mips | mipsbe | mipseb | mipsel | mipsle \
++			| mips16 \
++			| mips64 | mips64eb | mips64el \
++			| mips64octeon | mips64octeonel \
++			| mips64orion | mips64orionel \
++			| mips64r5900 | mips64r5900el \
++			| mips64vr | mips64vrel \
++			| mips64vr4100 | mips64vr4100el \
++			| mips64vr4300 | mips64vr4300el \
++			| mips64vr5000 | mips64vr5000el \
++			| mips64vr5900 | mips64vr5900el \
++			| mipsisa32 | mipsisa32el \
++			| mipsisa32r2 | mipsisa32r2el \
++			| mipsisa32r6 | mipsisa32r6el \
++			| mipsisa64 | mipsisa64el \
++			| mipsisa64r2 | mipsisa64r2el \
++			| mipsisa64r6 | mipsisa64r6el \
++			| mipsisa64sb1 | mipsisa64sb1el \
++			| mipsisa64sr71k | mipsisa64sr71kel \
++			| mipsr5900 | mipsr5900el \
++			| mipstx39 | mipstx39el \
++			| mmix \
++			| mn10200 | mn10300 \
++			| moxie \
++			| mt \
++			| msp430 \
++			| nds32 | nds32le | nds32be \
++			| nfp \
++			| nios | nios2 | nios2eb | nios2el \
++			| none | np1 | ns16k | ns32k | nvptx \
++			| open8 \
++			| or1k* \
++			| or32 \
++			| orion \
++			| picochip \
++			| pdp10 | pdp11 | pj | pjl | pn | power \
++			| powerpc | powerpc64 | powerpc64le | powerpcle | powerpcspe \
++			| pru \
++			| pyramid \
++			| riscv | riscv32 | riscv32be | riscv64 | riscv64be \
++			| rl78 | romp | rs6000 | rx \
++			| s390 | s390x \
++			| score \
++			| sh | shl \
++			| sh[1234] | sh[24]a | sh[24]ae[lb] | sh[23]e | she[lb] | sh[lb]e \
++			| sh[1234]e[lb] |  sh[12345][lb]e | sh[23]ele | sh64 | sh64le \
++			| sparc | sparc64 | sparc64b | sparc64v | sparc86x | sparclet \
++			| sparclite \
++			| sparcv8 | sparcv9 | sparcv9b | sparcv9v | sv1 | sx* \
++			| spu \
++			| tahoe \
++			| thumbv7* \
++			| tic30 | tic4x | tic54x | tic55x | tic6x | tic80 \
++			| tron \
++			| ubicom32 \
++			| v70 | v850 | v850e | v850e1 | v850es | v850e2 | v850e2v3 \
++			| vax \
++			| visium \
++			| w65 \
++			| wasm32 | wasm64 \
++			| we32k \
++			| x86 | x86_64 | xc16x | xgate | xps100 \
++			| xstormy16 | xtensa* \
++			| ymp \
++			| z8k | z80)
++				;;
++
++			*)
++				echo Invalid configuration \`"$1"\': machine \`"$cpu-$vendor"\' not recognized 1>&2
++				exit 1
++				;;
++		esac
+ 		;;
+ esac
+ 
+ # Here we canonicalize certain aliases for manufacturers.
+-case $basic_machine in
+-	*-digital*)
+-		basic_machine=`echo $basic_machine | sed 's/digital.*/dec/'`
++case $vendor in
++	digital*)
++		vendor=dec
+ 		;;
+-	*-commodore*)
+-		basic_machine=`echo $basic_machine | sed 's/commodore.*/cbm/'`
++	commodore*)
++		vendor=cbm
+ 		;;
+ 	*)
+ 		;;
+@@ -1087,174 +1280,213 @@ esac
+ 
+ # Decode manufacturer-specific aliases for certain operating systems.
+ 
+-if [ x"$os" != x"" ]
++if test x$basic_os != x
+ then
++
++# First recognize some ad-hoc caes, or perhaps split kernel-os, or else just
++# set os.
++case $basic_os in
++	gnu/linux*)
++		kernel=linux
++		os=$(echo $basic_os | sed -e 's|gnu/linux|gnu|')
++		;;
++	os2-emx)
++		kernel=os2
++		os=$(echo $basic_os | sed -e 's|os2-emx|emx|')
++		;;
++	nto-qnx*)
++		kernel=nto
++		os=$(echo $basic_os | sed -e 's|nto-qnx|qnx|')
++		;;
++	*-*)
++		# shellcheck disable=SC2162
++		IFS="-" read kernel os <<EOF
++$basic_os
++EOF
++		;;
++	# Default OS when just kernel was specified
++	nto*)
++		kernel=nto
++		os=$(echo $basic_os | sed -e 's|nto|qnx|')
++		;;
++	linux*)
++		kernel=linux
++		os=$(echo $basic_os | sed -e 's|linux|gnu|')
++		;;
++	*)
++		kernel=
++		os=$basic_os
++		;;
++esac
++
++# Now, normalize the OS (knowing we just have one component, it's not a kernel,
++# etc.)
+ case $os in
+-        # First match some system type aliases
+-        # that might get confused with valid system types.
+-	# -solaris* is a basic system type, with this one exception.
+-	-solaris1 | -solaris1.*)
+-		os=`echo $os | sed -e 's|solaris1|sunos4|'`
++	# First match some system type aliases that might get confused
++	# with valid system types.
++	# solaris* is a basic system type, with this one exception.
++	auroraux)
++		os=auroraux
+ 		;;
+-	-solaris)
+-		os=-solaris2
++	bluegene*)
++		os=cnk
+ 		;;
+-	-svr4*)
+-		os=-sysv4
++	solaris1 | solaris1.*)
++		os=$(echo $os | sed -e 's|solaris1|sunos4|')
+ 		;;
+-	-unixware*)
+-		os=-sysv4.2uw
++	solaris)
++		os=solaris2
+ 		;;
+-	-gnu/linux*)
+-		os=`echo $os | sed -e 's|gnu/linux|linux-gnu|'`
++	unixware*)
++		os=sysv4.2uw
+ 		;;
+-	# First accept the basic system types.
+-	# The portable systems comes first.
+-	# Each alternative MUST END IN A *, to match a version number.
+-	# -sysv* is not here because it comes later, after sysvr4.
+-	-gnu* | -bsd* | -mach* | -minix* | -genix* | -ultrix* | -irix* \
+-	      | -*vms* | -sco* | -esix* | -isc* | -aix* | -sunos | -sunos[34]*\
+-	      | -hpux* | -unos* | -osf* | -luna* | -dgux* | -solaris* | -sym* \
+-	      | -amigaos* | -amigados* | -msdos* | -newsos* | -unicos* | -aof* \
+-	      | -aos* \
+-	      | -nindy* | -vxsim* | -vxworks* | -ebmon* | -hms* | -mvs* \
+-	      | -clix* | -riscos* | -uniplus* | -iris* | -rtu* | -xenix* \
+-	      | -hiux* | -386bsd* | -netbsd* | -openbsd* | -freebsd* | -riscix* \
+-	      | -lynxos* | -bosx* | -nextstep* | -cxux* | -aout* | -elf* | -oabi* \
+-	      | -ptx* | -coff* | -ecoff* | -winnt* | -domain* | -vsta* \
+-	      | -udi* | -eabi* | -lites* | -ieee* | -go32* | -aux* \
+-	      | -chorusos* | -chorusrdb* \
+-	      | -cygwin* | -pe* | -psos* | -moss* | -proelf* | -rtems* \
+-	      | -mingw32* | -linux-gnu* | -uxpv* | -beos* | -mpeix* | -udk* \
+-	      | -interix* | -uwin* | -mks* | -rhapsody* | -darwin* | -opened* \
+-	      | -openstep* | -oskit* | -conix* | -pw32* | -nonstopux* \
+-	      | -storm-chaos* | -tops10* | -tenex* | -tops20* | -its* \
+-	      | -os2* | -vos* | -palmos* | -uclinux* | -nucleus* \
+-	      | -morphos* | -superux* | -rtmk* | -rtmk-nova* | -windiss* \
+-	      | -powermax* | -dnix*)
+-	# Remember, each alternative MUST END IN *, to match a version number.
+-		;;
+-	-qnx*)
+-		case $basic_machine in
+-		    x86-* | i*86-*)
+-			;;
+-		    *)
+-			os=-nto$os
+-			;;
+-		esac
++	# es1800 is here to avoid being matched by es* (a different OS)
++	es1800*)
++		os=ose
+ 		;;
+-	-nto-qnx*)
++	# Some version numbers need modification
++	chorusos*)
++		os=chorusos
+ 		;;
+-	-nto*)
+-		os=`echo $os | sed -e 's|nto|nto-qnx|'`
++	isc)
++		os=isc2.2
+ 		;;
+-	-sim | -es1800* | -hms* | -xray | -os68k* | -none* | -v88r* \
+-	      | -windows* | -osx | -abug | -netware* | -os9* | -beos* \
+-	      | -macos* | -mpw* | -magic* | -mmixware* | -mon960* | -lnews*)
++	sco6)
++		os=sco5v6
+ 		;;
+-	-mac*)
+-		os=`echo $os | sed -e 's|mac|macos|'`
++	sco5)
++		os=sco3.2v5
+ 		;;
+-	-linux*)
+-		os=`echo $os | sed -e 's|linux|linux-gnu|'`
++	sco4)
++		os=sco3.2v4
+ 		;;
+-	-sunos5*)
+-		os=`echo $os | sed -e 's|sunos5|solaris2|'`
++	sco3.2.[4-9]*)
++		os=$(echo $os | sed -e 's/sco3.2./sco3.2v/')
+ 		;;
+-	-sunos6*)
+-		os=`echo $os | sed -e 's|sunos6|solaris3|'`
++	sco*v* | scout)
++		# Don't match below
+ 		;;
+-	-opened*)
+-		os=-openedition
++	sco*)
++		os=sco3.2v2
+ 		;;
+-	-wince*)
+-		os=-wince
++	psos*)
++		os=psos
+ 		;;
+-	-osfrose*)
+-		os=-osfrose
++	qnx*)
++		os=qnx
+ 		;;
+-	-osf*)
+-		os=-osf
++	hiux*)
++		os=hiuxwe2
+ 		;;
+-	-utek*)
+-		os=-bsd
++	lynx*178)
++		os=lynxos178
+ 		;;
+-	-dynix*)
+-		os=-bsd
++	lynx*5)
++		os=lynxos5
+ 		;;
+-	-acis*)
+-		os=-aos
++	lynxos*)
++		# don't get caught up in next wildcard
+ 		;;
+-	-atheos*)
+-		os=-atheos
++	lynx*)
++		os=lynxos
+ 		;;
+-	-386bsd)
+-		os=-bsd
++	mac[0-9]*)
++		os=$(echo "$os" | sed -e 's|mac|macos|')
+ 		;;
+-	-ctix* | -uts*)
+-		os=-sysv
++	opened*)
++		os=openedition
+ 		;;
+-	-nova*)
+-		os=-rtmk-nova
++	os400*)
++		os=os400
+ 		;;
+-	-ns2 )
+-		os=-nextstep2
++	sunos5*)
++		os=$(echo "$os" | sed -e 's|sunos5|solaris2|')
+ 		;;
+-	-nsk*)
+-		os=-nsk
++	sunos6*)
++		os=$(echo "$os" | sed -e 's|sunos6|solaris3|')
+ 		;;
+-	# Preserve the version number of sinix5.
+-	-sinix5.*)
+-		os=`echo $os | sed -e 's|sinix|sysv|'`
++	wince*)
++		os=wince
+ 		;;
+-	-sinix*)
+-		os=-sysv4
++	utek*)
++		os=bsd
+ 		;;
+-	-triton*)
+-		os=-sysv3
++	dynix*)
++		os=bsd
+ 		;;
+-	-oss*)
+-		os=-sysv3
++	acis*)
++		os=aos
+ 		;;
+-	-svr4)
+-		os=-sysv4
++	atheos*)
++		os=atheos
+ 		;;
+-	-svr3)
+-		os=-sysv3
++	syllable*)
++		os=syllable
+ 		;;
+-	-sysvr4)
+-		os=-sysv4
++	386bsd)
++		os=bsd
++		;;
++	ctix* | uts*)
++		os=sysv
++		;;
++	nova*)
++		os=rtmk-nova
++		;;
++	ns2)
++		os=nextstep2
++		;;
++	# Preserve the version number of sinix5.
++	sinix5.*)
++		os=$(echo $os | sed -e 's|sinix|sysv|')
+ 		;;
+-	# This must come after -sysvr4.
+-	-sysv*)
++	sinix*)
++		os=sysv4
+ 		;;
+-	-ose*)
+-		os=-ose
++	tpf*)
++		os=tpf
+ 		;;
+-	-es1800*)
+-		os=-ose
++	triton*)
++		os=sysv3
+ 		;;
+-	-xenix)
+-		os=-xenix
++	oss*)
++		os=sysv3
+ 		;;
+-	-*mint | -mint[0-9]* | -*MiNT | -MiNT[0-9]*)
+-		os=-mint
++	svr4*)
++		os=sysv4
+ 		;;
+-	-aros*)
+-		os=-aros
++	svr3)
++		os=sysv3
+ 		;;
+-	-kaos*)
+-		os=-kaos
++	sysvr4)
++		os=sysv4
+ 		;;
+-	-none)
++	ose*)
++		os=ose
++		;;
++	*mint | mint[0-9]* | *MiNT | MiNT[0-9]*)
++		os=mint
++		;;
++	dicos*)
++		os=dicos
++		;;
++	pikeos*)
++		# Until real need of OS specific support for
++		# particular features comes up, bare metal
++		# configurations are quite functional.
++		case $cpu in
++		    arm*)
++			os=eabi
++			;;
++		    *)
++			os=elf
++			;;
++		esac
+ 		;;
+ 	*)
+-		# Get rid of the `-' at the beginning of $os.
+-		os=`echo $os | sed 's/[^-]*-//'`
+-		echo Invalid configuration \`$1\': system \`$os\' not recognized 1>&2
+-		exit 1
++		# No normalization, but not necessarily accepted, that comes below.
+ 		;;
+ esac
++
+ else
+ 
+ # Here we handle the default operating systems that come with various machines.
+@@ -1267,225 +1499,361 @@ else
+ # will signal an error saying that MANUFACTURER isn't an operating
+ # system, and we'll never get to this point.
+ 
+-case $basic_machine in
++kernel=
++case $cpu-$vendor in
++	score-*)
++		os=elf
++		;;
++	spu-*)
++		os=elf
++		;;
+ 	*-acorn)
+-		os=-riscix1.2
++		os=riscix1.2
+ 		;;
+ 	arm*-rebel)
+-		os=-linux
++		kernel=linux
++		os=gnu
+ 		;;
+ 	arm*-semi)
+-		os=-aout
++		os=aout
++		;;
++	c4x-* | tic4x-*)
++		os=coff
++		;;
++	c8051-*)
++		os=elf
++		;;
++	clipper-intergraph)
++		os=clix
++		;;
++	hexagon-*)
++		os=elf
++		;;
++	tic54x-*)
++		os=coff
++		;;
++	tic55x-*)
++		os=coff
++		;;
++	tic6x-*)
++		os=coff
+ 		;;
+ 	# This must come before the *-dec entry.
+ 	pdp10-*)
+-		os=-tops20
++		os=tops20
+ 		;;
+ 	pdp11-*)
+-		os=-none
++		os=none
+ 		;;
+ 	*-dec | vax-*)
+-		os=-ultrix4.2
++		os=ultrix4.2
+ 		;;
+ 	m68*-apollo)
+-		os=-domain
++		os=domain
+ 		;;
+ 	i386-sun)
+-		os=-sunos4.0.2
++		os=sunos4.0.2
+ 		;;
+ 	m68000-sun)
+-		os=-sunos3
+-		# This also exists in the configure program, but was not the
+-		# default.
+-		# os=-sunos4
++		os=sunos3
+ 		;;
+ 	m68*-cisco)
+-		os=-aout
++		os=aout
++		;;
++	mep-*)
++		os=elf
+ 		;;
+ 	mips*-cisco)
+-		os=-elf
++		os=elf
+ 		;;
+ 	mips*-*)
+-		os=-elf
++		os=elf
+ 		;;
+ 	or32-*)
+-		os=-coff
++		os=coff
+ 		;;
+ 	*-tti)	# must be before sparc entry or we get the wrong os.
+-		os=-sysv3
++		os=sysv3
+ 		;;
+ 	sparc-* | *-sun)
+-		os=-sunos4.1.1
++		os=sunos4.1.1
++		;;
++	pru-*)
++		os=elf
+ 		;;
+ 	*-be)
+-		os=-beos
++		os=beos
+ 		;;
+ 	*-ibm)
+-		os=-aix
++		os=aix
++		;;
++	*-knuth)
++		os=mmixware
+ 		;;
+ 	*-wec)
+-		os=-proelf
++		os=proelf
+ 		;;
+ 	*-winbond)
+-		os=-proelf
++		os=proelf
+ 		;;
+ 	*-oki)
+-		os=-proelf
++		os=proelf
+ 		;;
+ 	*-hp)
+-		os=-hpux
++		os=hpux
+ 		;;
+ 	*-hitachi)
+-		os=-hiux
++		os=hiux
+ 		;;
+ 	i860-* | *-att | *-ncr | *-altos | *-motorola | *-convergent)
+-		os=-sysv
++		os=sysv
+ 		;;
+ 	*-cbm)
+-		os=-amigaos
++		os=amigaos
+ 		;;
+ 	*-dg)
+-		os=-dgux
++		os=dgux
+ 		;;
+ 	*-dolphin)
+-		os=-sysv3
++		os=sysv3
+ 		;;
+ 	m68k-ccur)
+-		os=-rtu
++		os=rtu
+ 		;;
+ 	m88k-omron*)
+-		os=-luna
++		os=luna
+ 		;;
+-	*-next )
+-		os=-nextstep
++	*-next)
++		os=nextstep
+ 		;;
+ 	*-sequent)
+-		os=-ptx
++		os=ptx
+ 		;;
+ 	*-crds)
+-		os=-unos
++		os=unos
+ 		;;
+ 	*-ns)
+-		os=-genix
++		os=genix
+ 		;;
+ 	i370-*)
+-		os=-mvs
+-		;;
+-	*-next)
+-		os=-nextstep3
++		os=mvs
+ 		;;
+ 	*-gould)
+-		os=-sysv
++		os=sysv
+ 		;;
+ 	*-highlevel)
+-		os=-bsd
++		os=bsd
+ 		;;
+ 	*-encore)
+-		os=-bsd
++		os=bsd
+ 		;;
+ 	*-sgi)
+-		os=-irix
++		os=irix
+ 		;;
+ 	*-siemens)
+-		os=-sysv4
++		os=sysv4
+ 		;;
+ 	*-masscomp)
+-		os=-rtu
++		os=rtu
+ 		;;
+ 	f30[01]-fujitsu | f700-fujitsu)
+-		os=-uxpv
++		os=uxpv
+ 		;;
+ 	*-rom68k)
+-		os=-coff
++		os=coff
+ 		;;
+ 	*-*bug)
+-		os=-coff
++		os=coff
+ 		;;
+ 	*-apple)
+-		os=-macos
++		os=macos
+ 		;;
+ 	*-atari*)
+-		os=-mint
++		os=mint
++		;;
++	*-wrs)
++		os=vxworks
+ 		;;
+ 	*)
+-		os=-none
++		os=none
+ 		;;
+ esac
++
+ fi
+ 
++# Now, validate our (potentially fixed-up) OS.
++case $os in
++	# Sometimes we do "kernel-libc", so those need to count as OSes.
++	musl* | newlib* | uclibc*)
++		;;
++	# Likewise for "kernel-abi"
++	eabi* | gnueabi*)
++		;;
++	# VxWorks passes extra cpu info in the 4th filed.
++	simlinux | simwindows | spe)
++		;;
++	# Now accept the basic system types.
++	# The portable systems comes first.
++	# Each alternative MUST end in a * to match a version number.
++	gnu* | android* | bsd* | mach* | minix* | genix* | ultrix* | irix* \
++	     | *vms* | esix* | aix* | cnk* | sunos | sunos[34]* \
++	     | hpux* | unos* | osf* | luna* | dgux* | auroraux* | solaris* \
++	     | sym* |  plan9* | psp* | sim* | xray* | os68k* | v88r* \
++	     | hiux* | abug | nacl* | netware* | windows* \
++	     | os9* | macos* | osx* | ios* \
++	     | mpw* | magic* | mmixware* | mon960* | lnews* \
++	     | amigaos* | amigados* | msdos* | newsos* | unicos* | aof* \
++	     | aos* | aros* | cloudabi* | sortix* | twizzler* \
++	     | nindy* | vxsim* | vxworks* | ebmon* | hms* | mvs* \
++	     | clix* | riscos* | uniplus* | iris* | isc* | rtu* | xenix* \
++	     | mirbsd* | netbsd* | dicos* | openedition* | ose* \
++	     | bitrig* | openbsd* | solidbsd* | libertybsd* | os108* \
++	     | ekkobsd* | freebsd* | riscix* | lynxos* | os400* \
++	     | bosx* | nextstep* | cxux* | aout* | elf* | oabi* \
++	     | ptx* | coff* | ecoff* | winnt* | domain* | vsta* \
++	     | udi* | lites* | ieee* | go32* | aux* | hcos* \
++	     | chorusrdb* | cegcc* | glidix* \
++	     | cygwin* | msys* | pe* | moss* | proelf* | rtems* \
++	     | midipix* | mingw32* | mingw64* | mint* \
++	     | uxpv* | beos* | mpeix* | udk* | moxiebox* \
++	     | interix* | uwin* | mks* | rhapsody* | darwin* \
++	     | openstep* | oskit* | conix* | pw32* | nonstopux* \
++	     | storm-chaos* | tops10* | tenex* | tops20* | its* \
++	     | os2* | vos* | palmos* | uclinux* | nucleus* | morphos* \
++	     | scout* | superux* | sysv* | rtmk* | tpf* | windiss* \
++	     | powermax* | dnix* | nx6 | nx7 | sei* | dragonfly* \
++	     | skyos* | haiku* | rdos* | toppers* | drops* | es* \
++	     | onefs* | tirtos* | phoenix* | fuchsia* | redox* | bme* \
++	     | midnightbsd* | amdhsa* | unleashed* | emscripten* | wasi* \
++	     | nsk* | powerunix* | genode* | zvmoe* | qnx* | emx*)
++		;;
++	# This one is extra strict with allowed versions
++	sco3.2v2 | sco3.2v[4-9]* | sco5v6*)
++		# Don't forget version if it is 3.2v4 or newer.
++		;;
++	none)
++		;;
++	*)
++		echo Invalid configuration \`"$1"\': OS \`"$os"\' not recognized 1>&2
++		exit 1
++		;;
++esac
++
++# As a final step for OS-related things, validate the OS-kernel combination
++# (given a valid OS), if there is a kernel.
++case $kernel-$os in
++	linux-gnu* | linux-dietlibc* | linux-android* | linux-newlib* | linux-musl* | linux-uclibc* )
++		;;
++	uclinux-uclibc* )
++		;;
++	-dietlibc* | -newlib* | -musl* | -uclibc* )
++		# These are just libc implementations, not actual OSes, and thus
++		# require a kernel.
++		echo "Invalid configuration \`$1': libc \`$os' needs explicit kernel." 1>&2
++		exit 1
++		;;
++	kfreebsd*-gnu* | kopensolaris*-gnu*)
++		;;
++	vxworks-simlinux | vxworks-simwindows | vxworks-spe)
++		;;
++	nto-qnx*)
++		;;
++	os2-emx)
++		;;
++	*-eabi* | *-gnueabi*)
++		;;
++	-*)
++		# Blank kernel with real OS is always fine.
++		;;
++	*-*)
++		echo "Invalid configuration \`$1': Kernel \`$kernel' not known to work with OS \`$os'." 1>&2
++		exit 1
++		;;
++esac
++
+ # Here we handle the case where we know the os, and the CPU type, but not the
+ # manufacturer.  We pick the logical manufacturer.
+-vendor=unknown
+-case $basic_machine in
+-	*-unknown)
+-		case $os in
+-			-riscix*)
++case $vendor in
++	unknown)
++		case $cpu-$os in
++			*-riscix*)
+ 				vendor=acorn
+ 				;;
+-			-sunos*)
++			*-sunos*)
+ 				vendor=sun
+ 				;;
+-			-aix*)
++			*-cnk* | *-aix*)
+ 				vendor=ibm
+ 				;;
+-			-beos*)
++			*-beos*)
+ 				vendor=be
+ 				;;
+-			-hpux*)
++			*-hpux*)
+ 				vendor=hp
+ 				;;
+-			-mpeix*)
++			*-mpeix*)
+ 				vendor=hp
+ 				;;
+-			-hiux*)
++			*-hiux*)
+ 				vendor=hitachi
+ 				;;
+-			-unos*)
++			*-unos*)
+ 				vendor=crds
+ 				;;
+-			-dgux*)
++			*-dgux*)
+ 				vendor=dg
+ 				;;
+-			-luna*)
++			*-luna*)
+ 				vendor=omron
+ 				;;
+-			-genix*)
++			*-genix*)
+ 				vendor=ns
+ 				;;
+-			-mvs* | -opened*)
++			*-clix*)
++				vendor=intergraph
++				;;
++			*-mvs* | *-opened*)
+ 				vendor=ibm
+ 				;;
+-			-ptx*)
++			*-os400*)
++				vendor=ibm
++				;;
++			s390-* | s390x-*)
++				vendor=ibm
++				;;
++			*-ptx*)
+ 				vendor=sequent
+ 				;;
+-			-vxsim* | -vxworks* | -windiss*)
++			*-tpf*)
++				vendor=ibm
++				;;
++			*-vxsim* | *-vxworks* | *-windiss*)
+ 				vendor=wrs
+ 				;;
+-			-aux*)
++			*-aux*)
+ 				vendor=apple
+ 				;;
+-			-hms*)
++			*-hms*)
+ 				vendor=hitachi
+ 				;;
+-			-mpw* | -macos*)
++			*-mpw* | *-macos*)
+ 				vendor=apple
+ 				;;
+-			-*mint | -mint[0-9]* | -*MiNT | -MiNT[0-9]*)
++			*-*mint | *-mint[0-9]* | *-*MiNT | *-MiNT[0-9]*)
+ 				vendor=atari
+ 				;;
+-			-vos*)
++			*-vos*)
+ 				vendor=stratus
+ 				;;
+ 		esac
+-		basic_machine=`echo $basic_machine | sed "s/unknown/$vendor/"`
+ 		;;
+ esac
+ 
+-echo $basic_machine$os
+-exit 0
++echo "$cpu-$vendor-${kernel:+$kernel-}$os"
++exit
+ 
+ # Local variables:
+-# eval: (add-hook 'write-file-hooks 'time-stamp)
++# eval: (add-hook 'before-save-hook 'time-stamp)
+ # time-stamp-start: "timestamp='"
+ # time-stamp-format: "%:y-%02m-%02d"
+ # time-stamp-end: "'"
+diff --git a/config/install-sh b/config/install-sh
+index e9de238..ec298b5 100755
+--- a/config/install-sh
++++ b/config/install-sh
+@@ -1,251 +1,541 @@
+ #!/bin/sh
+-#
+ # install - install a program, script, or datafile
+-# This comes from X11R5 (mit/util/scripts/install.sh).
++
++scriptversion=2020-11-14.01; # UTC
++
++# This originates from X11R5 (mit/util/scripts/install.sh), which was
++# later released in X11R6 (xc/config/util/install.sh) with the
++# following copyright and license.
++#
++# Copyright (C) 1994 X Consortium
++#
++# Permission is hereby granted, free of charge, to any person obtaining a copy
++# of this software and associated documentation files (the "Software"), to
++# deal in the Software without restriction, including without limitation the
++# rights to use, copy, modify, merge, publish, distribute, sublicense, and/or
++# sell copies of the Software, and to permit persons to whom the Software is
++# furnished to do so, subject to the following conditions:
++#
++# The above copyright notice and this permission notice shall be included in
++# all copies or substantial portions of the Software.
++#
++# THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
++# IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
++# FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT.  IN NO EVENT SHALL THE
++# X CONSORTIUM BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER LIABILITY, WHETHER IN
++# AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM, OUT OF OR IN CONNEC-
++# TION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE SOFTWARE.
+ #
+-# Copyright 1991 by the Massachusetts Institute of Technology
++# Except as contained in this notice, the name of the X Consortium shall not
++# be used in advertising or otherwise to promote the sale, use or other deal-
++# ings in this Software without prior written authorization from the X Consor-
++# tium.
+ #
+-# Permission to use, copy, modify, distribute, and sell this software and its
+-# documentation for any purpose is hereby granted without fee, provided that
+-# the above copyright notice appear in all copies and that both that
+-# copyright notice and this permission notice appear in supporting
+-# documentation, and that the name of M.I.T. not be used in advertising or
+-# publicity pertaining to distribution of the software without specific,
+-# written prior permission.  M.I.T. makes no representations about the
+-# suitability of this software for any purpose.  It is provided "as is"
+-# without express or implied warranty.
++#
++# FSF changes to this file are in the public domain.
+ #
+ # Calling this script install-sh is preferred over install.sh, to prevent
+-# `make' implicit rules from creating a file called install from it
++# 'make' implicit rules from creating a file called install from it
+ # when there is no Makefile.
+ #
+ # This script is compatible with the BSD install script, but was written
+-# from scratch.  It can only install one file at a time, a restriction
+-# shared with many OS's install programs.
++# from scratch.
++
++tab='	'
++nl='
++'
++IFS=" $tab$nl"
+ 
++# Set DOITPROG to "echo" to test this script.
+ 
+-# set DOITPROG to echo to test this script
++doit=${DOITPROG-}
++doit_exec=${doit:-exec}
+ 
+-# Don't use :- since 4.3BSD and earlier shells don't like it.
+-doit="${DOITPROG-}"
++# Put in absolute file names if you don't have them in your path;
++# or use environment vars.
+ 
++chgrpprog=${CHGRPPROG-chgrp}
++chmodprog=${CHMODPROG-chmod}
++chownprog=${CHOWNPROG-chown}
++cmpprog=${CMPPROG-cmp}
++cpprog=${CPPROG-cp}
++mkdirprog=${MKDIRPROG-mkdir}
++mvprog=${MVPROG-mv}
++rmprog=${RMPROG-rm}
++stripprog=${STRIPPROG-strip}
+ 
+-# put in absolute paths if you don't have them in your path; or use env. vars.
++posix_mkdir=
+ 
+-mvprog="${MVPROG-mv}"
+-cpprog="${CPPROG-cp}"
+-chmodprog="${CHMODPROG-chmod}"
+-chownprog="${CHOWNPROG-chown}"
+-chgrpprog="${CHGRPPROG-chgrp}"
+-stripprog="${STRIPPROG-strip}"
+-rmprog="${RMPROG-rm}"
+-mkdirprog="${MKDIRPROG-mkdir}"
++# Desired mode of installed file.
++mode=0755
+ 
+-transformbasename=""
+-transform_arg=""
+-instcmd="$mvprog"
+-chmodcmd="$chmodprog 0755"
+-chowncmd=""
+-chgrpcmd=""
+-stripcmd=""
++# Create dirs (including intermediate dirs) using mode 755.
++# This is like GNU 'install' as of coreutils 8.32 (2020).
++mkdir_umask=22
++
++backupsuffix=
++chgrpcmd=
++chmodcmd=$chmodprog
++chowncmd=
++mvcmd=$mvprog
+ rmcmd="$rmprog -f"
+-mvcmd="$mvprog"
+-src=""
+-dst=""
+-dir_arg=""
+-
+-while [ x"$1" != x ]; do
+-    case $1 in
+-	-c) instcmd="$cpprog"
+-	    shift
+-	    continue;;
+-
+-	-d) dir_arg=true
+-	    shift
+-	    continue;;
+-
+-	-m) chmodcmd="$chmodprog $2"
+-	    shift
+-	    shift
+-	    continue;;
+-
+-	-o) chowncmd="$chownprog $2"
+-	    shift
+-	    shift
+-	    continue;;
+-
+-	-g) chgrpcmd="$chgrpprog $2"
+-	    shift
+-	    shift
+-	    continue;;
+-
+-	-s) stripcmd="$stripprog"
+-	    shift
+-	    continue;;
+-
+-	-t=*) transformarg=`echo $1 | sed 's/-t=//'`
+-	    shift
+-	    continue;;
+-
+-	-b=*) transformbasename=`echo $1 | sed 's/-b=//'`
+-	    shift
+-	    continue;;
+-
+-	*)  if [ x"$src" = x ]
+-	    then
+-		src=$1
+-	    else
+-		# this colon is to work around a 386BSD /bin/sh bug
+-		:
+-		dst=$1
+-	    fi
+-	    shift
+-	    continue;;
+-    esac
+-done
++stripcmd=
+ 
+-if [ x"$src" = x ]
+-then
+-	echo "install:	no input file specified"
+-	exit 1
+-else
+-	true
+-fi
++src=
++dst=
++dir_arg=
++dst_arg=
+ 
+-if [ x"$dir_arg" != x ]; then
+-	dst=$src
+-	src=""
+-	
+-	if [ -d $dst ]; then
+-		instcmd=:
+-		chmodcmd=""
+-	else
+-		instcmd=mkdir
+-	fi
+-else
++copy_on_change=false
++is_target_a_directory=possibly
+ 
+-# Waiting for this to be detected by the "$instcmd $src $dsttmp" command
+-# might cause directories to be created, which would be especially bad 
+-# if $src (and thus $dsttmp) contains '*'.
++usage="\
++Usage: $0 [OPTION]... [-T] SRCFILE DSTFILE
++   or: $0 [OPTION]... SRCFILES... DIRECTORY
++   or: $0 [OPTION]... -t DIRECTORY SRCFILES...
++   or: $0 [OPTION]... -d DIRECTORIES...
+ 
+-	if [ -f $src -o -d $src ]
+-	then
+-		true
+-	else
+-		echo "install:  $src does not exist"
+-		exit 1
+-	fi
+-	
+-	if [ x"$dst" = x ]
+-	then
+-		echo "install:	no destination specified"
+-		exit 1
+-	else
+-		true
+-	fi
++In the 1st form, copy SRCFILE to DSTFILE.
++In the 2nd and 3rd, copy all SRCFILES to DIRECTORY.
++In the 4th, create DIRECTORIES.
+ 
+-# If destination is a directory, append the input filename; if your system
+-# does not like double slashes in filenames, you may need to add some logic
++Options:
++     --help     display this help and exit.
++     --version  display version info and exit.
+ 
+-	if [ -d $dst ]
+-	then
+-		dst="$dst"/`basename $src`
+-	else
+-		true
+-	fi
+-fi
++  -c            (ignored)
++  -C            install only if different (preserve data modification time)
++  -d            create directories instead of installing files.
++  -g GROUP      $chgrpprog installed files to GROUP.
++  -m MODE       $chmodprog installed files to MODE.
++  -o USER       $chownprog installed files to USER.
++  -p            pass -p to $cpprog.
++  -s            $stripprog installed files.
++  -S SUFFIX     attempt to back up existing files, with suffix SUFFIX.
++  -t DIRECTORY  install into DIRECTORY.
++  -T            report an error if DSTFILE is a directory.
+ 
+-## this sed command emulates the dirname command
+-dstdir=`echo $dst | sed -e 's,[^/]*$,,;s,/$,,;s,^$,.,'`
++Environment variables override the default commands:
++  CHGRPPROG CHMODPROG CHOWNPROG CMPPROG CPPROG MKDIRPROG MVPROG
++  RMPROG STRIPPROG
+ 
+-# Make sure that the destination directory exists.
+-#  this part is taken from Noah Friedman's mkinstalldirs script
++By default, rm is invoked with -f; when overridden with RMPROG,
++it's up to you to specify -f if you want it.
+ 
+-# Skip lots of stat calls in the usual case.
+-if [ ! -d "$dstdir" ]; then
+-defaultIFS='	
+-'
+-IFS="${IFS-${defaultIFS}}"
++If -S is not specified, no backups are attempted.
+ 
+-oIFS="${IFS}"
+-# Some sh's can't handle IFS=/ for some reason.
+-IFS='%'
+-set - `echo ${dstdir} | sed -e 's@/@%@g' -e 's@^%@/@'`
+-IFS="${oIFS}"
++Email bug reports to bug-automake@gnu.org.
++Automake home page: https://www.gnu.org/software/automake/
++"
+ 
+-pathcomp=''
++while test $# -ne 0; do
++  case $1 in
++    -c) ;;
+ 
+-while [ $# -ne 0 ] ; do
+-	pathcomp="${pathcomp}${1}"
+-	shift
++    -C) copy_on_change=true;;
+ 
+-	if [ ! -d "${pathcomp}" ] ;
+-        then
+-		$mkdirprog "${pathcomp}"
+-	else
+-		true
+-	fi
++    -d) dir_arg=true;;
+ 
+-	pathcomp="${pathcomp}/"
+-done
+-fi
++    -g) chgrpcmd="$chgrpprog $2"
++        shift;;
+ 
+-if [ x"$dir_arg" != x ]
+-then
+-	$doit $instcmd $dst &&
++    --help) echo "$usage"; exit $?;;
+ 
+-	if [ x"$chowncmd" != x ]; then $doit $chowncmd $dst; else true ; fi &&
+-	if [ x"$chgrpcmd" != x ]; then $doit $chgrpcmd $dst; else true ; fi &&
+-	if [ x"$stripcmd" != x ]; then $doit $stripcmd $dst; else true ; fi &&
+-	if [ x"$chmodcmd" != x ]; then $doit $chmodcmd $dst; else true ; fi
+-else
++    -m) mode=$2
++        case $mode in
++          *' '* | *"$tab"* | *"$nl"* | *'*'* | *'?'* | *'['*)
++            echo "$0: invalid mode: $mode" >&2
++            exit 1;;
++        esac
++        shift;;
+ 
+-# If we're going to rename the final executable, determine the name now.
++    -o) chowncmd="$chownprog $2"
++        shift;;
+ 
+-	if [ x"$transformarg" = x ] 
+-	then
+-		dstfile=`basename $dst`
+-	else
+-		dstfile=`basename $dst $transformbasename | 
+-			sed $transformarg`$transformbasename
+-	fi
++    -p) cpprog="$cpprog -p";;
+ 
+-# don't allow the sed command to completely eliminate the filename
++    -s) stripcmd=$stripprog;;
+ 
+-	if [ x"$dstfile" = x ] 
+-	then
+-		dstfile=`basename $dst`
+-	else
+-		true
+-	fi
++    -S) backupsuffix="$2"
++        shift;;
+ 
+-# Make a temp file name in the proper directory.
++    -t)
++        is_target_a_directory=always
++        dst_arg=$2
++        # Protect names problematic for 'test' and other utilities.
++        case $dst_arg in
++          -* | [=\(\)!]) dst_arg=./$dst_arg;;
++        esac
++        shift;;
+ 
+-	dsttmp=$dstdir/#inst.$$#
++    -T) is_target_a_directory=never;;
+ 
+-# Move or copy the file name to the temp name
++    --version) echo "$0 $scriptversion"; exit $?;;
+ 
+-	$doit $instcmd $src $dsttmp &&
++    --) shift
++        break;;
+ 
+-	trap "rm -f ${dsttmp}" 0 &&
++    -*) echo "$0: invalid option: $1" >&2
++        exit 1;;
+ 
+-# and set any options; do chmod last to preserve setuid bits
++    *)  break;;
++  esac
++  shift
++done
+ 
+-# If any of these fail, we abort the whole thing.  If we want to
+-# ignore errors from any of these, just make sure not to ignore
+-# errors from the above "$doit $instcmd $src $dsttmp" command.
++# We allow the use of options -d and -T together, by making -d
++# take the precedence; this is for compatibility with GNU install.
+ 
+-	if [ x"$chowncmd" != x ]; then $doit $chowncmd $dsttmp; else true;fi &&
+-	if [ x"$chgrpcmd" != x ]; then $doit $chgrpcmd $dsttmp; else true;fi &&
+-	if [ x"$stripcmd" != x ]; then $doit $stripcmd $dsttmp; else true;fi &&
+-	if [ x"$chmodcmd" != x ]; then $doit $chmodcmd $dsttmp; else true;fi &&
++if test -n "$dir_arg"; then
++  if test -n "$dst_arg"; then
++    echo "$0: target directory not allowed when installing a directory." >&2
++    exit 1
++  fi
++fi
+ 
+-# Now rename the file to the real destination.
++if test $# -ne 0 && test -z "$dir_arg$dst_arg"; then
++  # When -d is used, all remaining arguments are directories to create.
++  # When -t is used, the destination is already specified.
++  # Otherwise, the last argument is the destination.  Remove it from $@.
++  for arg
++  do
++    if test -n "$dst_arg"; then
++      # $@ is not empty: it contains at least $arg.
++      set fnord "$@" "$dst_arg"
++      shift # fnord
++    fi
++    shift # arg
++    dst_arg=$arg
++    # Protect names problematic for 'test' and other utilities.
++    case $dst_arg in
++      -* | [=\(\)!]) dst_arg=./$dst_arg;;
++    esac
++  done
++fi
++
++if test $# -eq 0; then
++  if test -z "$dir_arg"; then
++    echo "$0: no input file specified." >&2
++    exit 1
++  fi
++  # It's OK to call 'install-sh -d' without argument.
++  # This can happen when creating conditional directories.
++  exit 0
++fi
++
++if test -z "$dir_arg"; then
++  if test $# -gt 1 || test "$is_target_a_directory" = always; then
++    if test ! -d "$dst_arg"; then
++      echo "$0: $dst_arg: Is not a directory." >&2
++      exit 1
++    fi
++  fi
++fi
+ 
+-	$doit $rmcmd -f $dstdir/$dstfile &&
+-	$doit $mvcmd $dsttmp $dstdir/$dstfile 
++if test -z "$dir_arg"; then
++  do_exit='(exit $ret); exit $ret'
++  trap "ret=129; $do_exit" 1
++  trap "ret=130; $do_exit" 2
++  trap "ret=141; $do_exit" 13
++  trap "ret=143; $do_exit" 15
++
++  # Set umask so as not to create temps with too-generous modes.
++  # However, 'strip' requires both read and write access to temps.
++  case $mode in
++    # Optimize common cases.
++    *644) cp_umask=133;;
++    *755) cp_umask=22;;
++
++    *[0-7])
++      if test -z "$stripcmd"; then
++        u_plus_rw=
++      else
++        u_plus_rw='% 200'
++      fi
++      cp_umask=`expr '(' 777 - $mode % 1000 ')' $u_plus_rw`;;
++    *)
++      if test -z "$stripcmd"; then
++        u_plus_rw=
++      else
++        u_plus_rw=,u+rw
++      fi
++      cp_umask=$mode$u_plus_rw;;
++  esac
++fi
+ 
+-fi &&
++for src
++do
++  # Protect names problematic for 'test' and other utilities.
++  case $src in
++    -* | [=\(\)!]) src=./$src;;
++  esac
++
++  if test -n "$dir_arg"; then
++    dst=$src
++    dstdir=$dst
++    test -d "$dstdir"
++    dstdir_status=$?
++    # Don't chown directories that already exist.
++    if test $dstdir_status = 0; then
++      chowncmd=""
++    fi
++  else
++
++    # Waiting for this to be detected by the "$cpprog $src $dsttmp" command
++    # might cause directories to be created, which would be especially bad
++    # if $src (and thus $dsttmp) contains '*'.
++    if test ! -f "$src" && test ! -d "$src"; then
++      echo "$0: $src does not exist." >&2
++      exit 1
++    fi
++
++    if test -z "$dst_arg"; then
++      echo "$0: no destination specified." >&2
++      exit 1
++    fi
++    dst=$dst_arg
++
++    # If destination is a directory, append the input filename.
++    if test -d "$dst"; then
++      if test "$is_target_a_directory" = never; then
++        echo "$0: $dst_arg: Is a directory" >&2
++        exit 1
++      fi
++      dstdir=$dst
++      dstbase=`basename "$src"`
++      case $dst in
++	*/) dst=$dst$dstbase;;
++	*)  dst=$dst/$dstbase;;
++      esac
++      dstdir_status=0
++    else
++      dstdir=`dirname "$dst"`
++      test -d "$dstdir"
++      dstdir_status=$?
++    fi
++  fi
++
++  case $dstdir in
++    */) dstdirslash=$dstdir;;
++    *)  dstdirslash=$dstdir/;;
++  esac
++
++  obsolete_mkdir_used=false
++
++  if test $dstdir_status != 0; then
++    case $posix_mkdir in
++      '')
++        # With -d, create the new directory with the user-specified mode.
++        # Otherwise, rely on $mkdir_umask.
++        if test -n "$dir_arg"; then
++          mkdir_mode=-m$mode
++        else
++          mkdir_mode=
++        fi
++
++        posix_mkdir=false
++	# The $RANDOM variable is not portable (e.g., dash).  Use it
++	# here however when possible just to lower collision chance.
++	tmpdir=${TMPDIR-/tmp}/ins$RANDOM-$$
++
++	trap '
++	  ret=$?
++	  rmdir "$tmpdir/a/b" "$tmpdir/a" "$tmpdir" 2>/dev/null
++	  exit $ret
++	' 0
++
++	# Because "mkdir -p" follows existing symlinks and we likely work
++	# directly in world-writeable /tmp, make sure that the '$tmpdir'
++	# directory is successfully created first before we actually test
++	# 'mkdir -p'.
++	if (umask $mkdir_umask &&
++	    $mkdirprog $mkdir_mode "$tmpdir" &&
++	    exec $mkdirprog $mkdir_mode -p -- "$tmpdir/a/b") >/dev/null 2>&1
++	then
++	  if test -z "$dir_arg" || {
++	       # Check for POSIX incompatibilities with -m.
++	       # HP-UX 11.23 and IRIX 6.5 mkdir -m -p sets group- or
++	       # other-writable bit of parent directory when it shouldn't.
++	       # FreeBSD 6.1 mkdir -m -p sets mode of existing directory.
++	       test_tmpdir="$tmpdir/a"
++	       ls_ld_tmpdir=`ls -ld "$test_tmpdir"`
++	       case $ls_ld_tmpdir in
++		 d????-?r-*) different_mode=700;;
++		 d????-?--*) different_mode=755;;
++		 *) false;;
++	       esac &&
++	       $mkdirprog -m$different_mode -p -- "$test_tmpdir" && {
++		 ls_ld_tmpdir_1=`ls -ld "$test_tmpdir"`
++		 test "$ls_ld_tmpdir" = "$ls_ld_tmpdir_1"
++	       }
++	     }
++	  then posix_mkdir=:
++	  fi
++	  rmdir "$tmpdir/a/b" "$tmpdir/a" "$tmpdir"
++	else
++	  # Remove any dirs left behind by ancient mkdir implementations.
++	  rmdir ./$mkdir_mode ./-p ./-- "$tmpdir" 2>/dev/null
++	fi
++	trap '' 0;;
++    esac
+ 
++    if
++      $posix_mkdir && (
++        umask $mkdir_umask &&
++        $doit_exec $mkdirprog $mkdir_mode -p -- "$dstdir"
++      )
++    then :
++    else
++
++      # mkdir does not conform to POSIX,
++      # or it failed possibly due to a race condition.  Create the
++      # directory the slow way, step by step, checking for races as we go.
++
++      case $dstdir in
++        /*) prefix='/';;
++        [-=\(\)!]*) prefix='./';;
++        *)  prefix='';;
++      esac
++
++      oIFS=$IFS
++      IFS=/
++      set -f
++      set fnord $dstdir
++      shift
++      set +f
++      IFS=$oIFS
++
++      prefixes=
++
++      for d
++      do
++        test X"$d" = X && continue
++
++        prefix=$prefix$d
++        if test -d "$prefix"; then
++          prefixes=
++        else
++          if $posix_mkdir; then
++            (umask $mkdir_umask &&
++             $doit_exec $mkdirprog $mkdir_mode -p -- "$dstdir") && break
++            # Don't fail if two instances are running concurrently.
++            test -d "$prefix" || exit 1
++          else
++            case $prefix in
++              *\'*) qprefix=`echo "$prefix" | sed "s/'/'\\\\\\\\''/g"`;;
++              *) qprefix=$prefix;;
++            esac
++            prefixes="$prefixes '$qprefix'"
++          fi
++        fi
++        prefix=$prefix/
++      done
++
++      if test -n "$prefixes"; then
++        # Don't fail if two instances are running concurrently.
++        (umask $mkdir_umask &&
++         eval "\$doit_exec \$mkdirprog $prefixes") ||
++          test -d "$dstdir" || exit 1
++        obsolete_mkdir_used=true
++      fi
++    fi
++  fi
++
++  if test -n "$dir_arg"; then
++    { test -z "$chowncmd" || $doit $chowncmd "$dst"; } &&
++    { test -z "$chgrpcmd" || $doit $chgrpcmd "$dst"; } &&
++    { test "$obsolete_mkdir_used$chowncmd$chgrpcmd" = false ||
++      test -z "$chmodcmd" || $doit $chmodcmd $mode "$dst"; } || exit 1
++  else
++
++    # Make a couple of temp file names in the proper directory.
++    dsttmp=${dstdirslash}_inst.$$_
++    rmtmp=${dstdirslash}_rm.$$_
++
++    # Trap to clean up those temp files at exit.
++    trap 'ret=$?; rm -f "$dsttmp" "$rmtmp" && exit $ret' 0
++
++    # Copy the file name to the temp name.
++    (umask $cp_umask &&
++     { test -z "$stripcmd" || {
++	 # Create $dsttmp read-write so that cp doesn't create it read-only,
++	 # which would cause strip to fail.
++	 if test -z "$doit"; then
++	   : >"$dsttmp" # No need to fork-exec 'touch'.
++	 else
++	   $doit touch "$dsttmp"
++	 fi
++       }
++     } &&
++     $doit_exec $cpprog "$src" "$dsttmp") &&
++
++    # and set any options; do chmod last to preserve setuid bits.
++    #
++    # If any of these fail, we abort the whole thing.  If we want to
++    # ignore errors from any of these, just make sure not to ignore
++    # errors from the above "$doit $cpprog $src $dsttmp" command.
++    #
++    { test -z "$chowncmd" || $doit $chowncmd "$dsttmp"; } &&
++    { test -z "$chgrpcmd" || $doit $chgrpcmd "$dsttmp"; } &&
++    { test -z "$stripcmd" || $doit $stripcmd "$dsttmp"; } &&
++    { test -z "$chmodcmd" || $doit $chmodcmd $mode "$dsttmp"; } &&
++
++    # If -C, don't bother to copy if it wouldn't change the file.
++    if $copy_on_change &&
++       old=`LC_ALL=C ls -dlL "$dst"     2>/dev/null` &&
++       new=`LC_ALL=C ls -dlL "$dsttmp"  2>/dev/null` &&
++       set -f &&
++       set X $old && old=:$2:$4:$5:$6 &&
++       set X $new && new=:$2:$4:$5:$6 &&
++       set +f &&
++       test "$old" = "$new" &&
++       $cmpprog "$dst" "$dsttmp" >/dev/null 2>&1
++    then
++      rm -f "$dsttmp"
++    else
++      # If $backupsuffix is set, and the file being installed
++      # already exists, attempt a backup.  Don't worry if it fails,
++      # e.g., if mv doesn't support -f.
++      if test -n "$backupsuffix" && test -f "$dst"; then
++        $doit $mvcmd -f "$dst" "$dst$backupsuffix" 2>/dev/null
++      fi
++
++      # Rename the file to the real destination.
++      $doit $mvcmd -f "$dsttmp" "$dst" 2>/dev/null ||
++
++      # The rename failed, perhaps because mv can't rename something else
++      # to itself, or perhaps because mv is so ancient that it does not
++      # support -f.
++      {
++        # Now remove or move aside any old file at destination location.
++        # We try this two ways since rm can't unlink itself on some
++        # systems and the destination file might be busy for other
++        # reasons.  In this case, the final cleanup might fail but the new
++        # file should still install successfully.
++        {
++          test ! -f "$dst" ||
++          $doit $rmcmd "$dst" 2>/dev/null ||
++          { $doit $mvcmd -f "$dst" "$rmtmp" 2>/dev/null &&
++            { $doit $rmcmd "$rmtmp" 2>/dev/null; :; }
++          } ||
++          { echo "$0: cannot unlink or rename $dst" >&2
++            (exit 1); exit 1
++          }
++        } &&
++
++        # Now rename the file to the real destination.
++        $doit $mvcmd "$dsttmp" "$dst"
++      }
++    fi || exit 1
++
++    trap '' 0
++  fi
++done
+ 
+-exit 0
++# Local variables:
++# eval: (add-hook 'before-save-hook 'time-stamp)
++# time-stamp-start: "scriptversion="
++# time-stamp-format: "%:y-%02m-%02d.%02H"
++# time-stamp-time-zone: "UTC0"
++# time-stamp-end: "; # UTC"
++# End:
+diff --git a/configure b/configure
+index 633a02f..a28c9ce 100755
+--- a/configure
++++ b/configure
+@@ -1,82 +1,102 @@
+ #! /bin/sh
+ # Guess values for system-dependent variables and create Makefiles.
+-# Generated by GNU Autoconf 2.61.
++# Generated by GNU Autoconf 2.71.
++#
++#
++# Copyright (C) 1992-1996, 1998-2017, 2020-2021 Free Software Foundation,
++# Inc.
++#
+ #
+-# Copyright (C) 1992, 1993, 1994, 1995, 1996, 1998, 1999, 2000, 2001,
+-# 2002, 2003, 2004, 2005, 2006 Free Software Foundation, Inc.
+ # This configure script is free software; the Free Software Foundation
+ # gives unlimited permission to copy, distribute and modify it.
+-## --------------------- ##
+-## M4sh Initialization.  ##
+-## --------------------- ##
++## -------------------- ##
++## M4sh Initialization. ##
++## -------------------- ##
+ 
+ # Be more Bourne compatible
+ DUALCASE=1; export DUALCASE # for MKS sh
+-if test -n "${ZSH_VERSION+set}" && (emulate sh) >/dev/null 2>&1; then
++as_nop=:
++if test ${ZSH_VERSION+y} && (emulate sh) >/dev/null 2>&1
++then :
+   emulate sh
+   NULLCMD=:
+-  # Zsh 3.x and 4.x performs word splitting on ${1+"$@"}, which
++  # Pre-4.2 versions of Zsh do word splitting on ${1+"$@"}, which
+   # is contrary to our usage.  Disable this feature.
+   alias -g '${1+"$@"}'='"$@"'
+   setopt NO_GLOB_SUBST
+-else
+-  case `(set -o) 2>/dev/null` in
+-  *posix*) set -o posix ;;
++else $as_nop
++  case `(set -o) 2>/dev/null` in #(
++  *posix*) :
++    set -o posix ;; #(
++  *) :
++     ;;
+ esac
+-
+ fi
+ 
+ 
+ 
++# Reset variables that may have inherited troublesome values from
++# the environment.
+ 
+-# PATH needs CR
+-# Avoid depending upon Character Ranges.
+-as_cr_letters='abcdefghijklmnopqrstuvwxyz'
+-as_cr_LETTERS='ABCDEFGHIJKLMNOPQRSTUVWXYZ'
+-as_cr_Letters=$as_cr_letters$as_cr_LETTERS
+-as_cr_digits='0123456789'
+-as_cr_alnum=$as_cr_Letters$as_cr_digits
++# IFS needs to be set, to space, tab, and newline, in precisely that order.
++# (If _AS_PATH_WALK were called with IFS unset, it would have the
++# side effect of setting IFS to empty, thus disabling word splitting.)
++# Quoting is to prevent editors from complaining about space-tab.
++as_nl='
++'
++export as_nl
++IFS=" ""	$as_nl"
+ 
+-# The user is always right.
+-if test "${PATH_SEPARATOR+set}" != set; then
+-  echo "#! /bin/sh" >conf$$.sh
+-  echo  "exit 0"   >>conf$$.sh
+-  chmod +x conf$$.sh
+-  if (PATH="/nonexistent;."; conf$$.sh) >/dev/null 2>&1; then
+-    PATH_SEPARATOR=';'
+-  else
+-    PATH_SEPARATOR=:
+-  fi
+-  rm -f conf$$.sh
+-fi
++PS1='$ '
++PS2='> '
++PS4='+ '
+ 
+-# Support unset when possible.
+-if ( (MAIL=60; unset MAIL) || exit) >/dev/null 2>&1; then
+-  as_unset=unset
+-else
+-  as_unset=false
+-fi
++# Ensure predictable behavior from utilities with locale-dependent output.
++LC_ALL=C
++export LC_ALL
++LANGUAGE=C
++export LANGUAGE
++
++# We cannot yet rely on "unset" to work, but we need these variables
++# to be unset--not just set to an empty or harmless value--now, to
++# avoid bugs in old shells (e.g. pre-3.0 UWIN ksh).  This construct
++# also avoids known problems related to "unset" and subshell syntax
++# in other old shells (e.g. bash 2.01 and pdksh 5.2.14).
++for as_var in BASH_ENV ENV MAIL MAILPATH CDPATH
++do eval test \${$as_var+y} \
++  && ( (unset $as_var) || exit 1) >/dev/null 2>&1 && unset $as_var || :
++done
+ 
++# Ensure that fds 0, 1, and 2 are open.
++if (exec 3>&0) 2>/dev/null; then :; else exec 0</dev/null; fi
++if (exec 3>&1) 2>/dev/null; then :; else exec 1>/dev/null; fi
++if (exec 3>&2)            ; then :; else exec 2>/dev/null; fi
++
++# The user is always right.
++if ${PATH_SEPARATOR+false} :; then
++  PATH_SEPARATOR=:
++  (PATH='/bin;/bin'; FPATH=$PATH; sh -c :) >/dev/null 2>&1 && {
++    (PATH='/bin:/bin'; FPATH=$PATH; sh -c :) >/dev/null 2>&1 ||
++      PATH_SEPARATOR=';'
++  }
++fi
+ 
+-# IFS
+-# We need space, tab and new line, in precisely that order.  Quoting is
+-# there to prevent editors from complaining about space-tab.
+-# (If _AS_PATH_WALK were called with IFS unset, it would disable word
+-# splitting by setting IFS to empty value.)
+-as_nl='
+-'
+-IFS=" ""	$as_nl"
+ 
+ # Find who we are.  Look in the path if we contain no directory separator.
+-case $0 in
++as_myself=
++case $0 in #((
+   *[\\/]* ) as_myself=$0 ;;
+   *) as_save_IFS=$IFS; IFS=$PATH_SEPARATOR
+ for as_dir in $PATH
+ do
+   IFS=$as_save_IFS
+-  test -z "$as_dir" && as_dir=.
+-  test -r "$as_dir/$0" && as_myself=$as_dir/$0 && break
+-done
++  case $as_dir in #(((
++    '') as_dir=./ ;;
++    */) ;;
++    *) as_dir=$as_dir/ ;;
++  esac
++    test -r "$as_dir$0" && as_myself=$as_dir$0 && break
++  done
+ IFS=$as_save_IFS
+ 
+      ;;
+@@ -87,354 +107,386 @@ if test "x$as_myself" = x; then
+   as_myself=$0
+ fi
+ if test ! -f "$as_myself"; then
+-  echo "$as_myself: error: cannot find myself; rerun with an absolute file name" >&2
+-  { (exit 1); exit 1; }
+-fi
+-
+-# Work around bugs in pre-3.0 UWIN ksh.
+-for as_var in ENV MAIL MAILPATH
+-do ($as_unset $as_var) >/dev/null 2>&1 && $as_unset $as_var
+-done
+-PS1='$ '
+-PS2='> '
+-PS4='+ '
+-
+-# NLS nuisances.
+-for as_var in \
+-  LANG LANGUAGE LC_ADDRESS LC_ALL LC_COLLATE LC_CTYPE LC_IDENTIFICATION \
+-  LC_MEASUREMENT LC_MESSAGES LC_MONETARY LC_NAME LC_NUMERIC LC_PAPER \
+-  LC_TELEPHONE LC_TIME
+-do
+-  if (set +x; test -z "`(eval $as_var=C; export $as_var) 2>&1`"); then
+-    eval $as_var=C; export $as_var
+-  else
+-    ($as_unset $as_var) >/dev/null 2>&1 && $as_unset $as_var
++  printf "%s\n" "$as_myself: error: cannot find myself; rerun with an absolute file name" >&2
++  exit 1
++fi
++
++
++# Use a proper internal environment variable to ensure we don't fall
++  # into an infinite loop, continuously re-executing ourselves.
++  if test x"${_as_can_reexec}" != xno && test "x$CONFIG_SHELL" != x; then
++    _as_can_reexec=no; export _as_can_reexec;
++    # We cannot yet assume a decent shell, so we have to provide a
++# neutralization value for shells without unset; and this also
++# works around shells that cannot unset nonexistent variables.
++# Preserve -v and -x to the replacement shell.
++BASH_ENV=/dev/null
++ENV=/dev/null
++(unset BASH_ENV) >/dev/null 2>&1 && unset BASH_ENV ENV
++case $- in # ((((
++  *v*x* | *x*v* ) as_opts=-vx ;;
++  *v* ) as_opts=-v ;;
++  *x* ) as_opts=-x ;;
++  * ) as_opts= ;;
++esac
++exec $CONFIG_SHELL $as_opts "$as_myself" ${1+"$@"}
++# Admittedly, this is quite paranoid, since all the known shells bail
++# out after a failed `exec'.
++printf "%s\n" "$0: could not re-execute with $CONFIG_SHELL" >&2
++exit 255
+   fi
+-done
+-
+-# Required to use basename.
+-if expr a : '\(a\)' >/dev/null 2>&1 &&
+-   test "X`expr 00001 : '.*\(...\)'`" = X001; then
+-  as_expr=expr
+-else
+-  as_expr=false
+-fi
+-
+-if (basename -- /) >/dev/null 2>&1 && test "X`basename -- / 2>&1`" = "X/"; then
+-  as_basename=basename
+-else
+-  as_basename=false
+-fi
+-
+-
+-# Name of the executable.
+-as_me=`$as_basename -- "$0" ||
+-$as_expr X/"$0" : '.*/\([^/][^/]*\)/*$' \| \
+-	 X"$0" : 'X\(//\)$' \| \
+-	 X"$0" : 'X\(/\)' \| . 2>/dev/null ||
+-echo X/"$0" |
+-    sed '/^.*\/\([^/][^/]*\)\/*$/{
+-	    s//\1/
+-	    q
+-	  }
+-	  /^X\/\(\/\/\)$/{
+-	    s//\1/
+-	    q
+-	  }
+-	  /^X\/\(\/\).*/{
+-	    s//\1/
+-	    q
+-	  }
+-	  s/.*/./; q'`
+-
+-# CDPATH.
+-$as_unset CDPATH
+-
+-
++  # We don't want this to propagate to other subprocesses.
++          { _as_can_reexec=; unset _as_can_reexec;}
+ if test "x$CONFIG_SHELL" = x; then
+-  if (eval ":") 2>/dev/null; then
+-  as_have_required=yes
+-else
+-  as_have_required=no
++  as_bourne_compatible="as_nop=:
++if test \${ZSH_VERSION+y} && (emulate sh) >/dev/null 2>&1
++then :
++  emulate sh
++  NULLCMD=:
++  # Pre-4.2 versions of Zsh do word splitting on \${1+\"\$@\"}, which
++  # is contrary to our usage.  Disable this feature.
++  alias -g '\${1+\"\$@\"}'='\"\$@\"'
++  setopt NO_GLOB_SUBST
++else \$as_nop
++  case \`(set -o) 2>/dev/null\` in #(
++  *posix*) :
++    set -o posix ;; #(
++  *) :
++     ;;
++esac
+ fi
+-
+-  if test $as_have_required = yes && 	 (eval ":
+-(as_func_return () {
+-  (exit \$1)
+-}
+-as_func_success () {
+-  as_func_return 0
+-}
+-as_func_failure () {
+-  as_func_return 1
+-}
+-as_func_ret_success () {
+-  return 0
+-}
+-as_func_ret_failure () {
+-  return 1
+-}
++"
++  as_required="as_fn_return () { (exit \$1); }
++as_fn_success () { as_fn_return 0; }
++as_fn_failure () { as_fn_return 1; }
++as_fn_ret_success () { return 0; }
++as_fn_ret_failure () { return 1; }
+ 
+ exitcode=0
+-if as_func_success; then
+-  :
+-else
+-  exitcode=1
+-  echo as_func_success failed.
+-fi
+-
+-if as_func_failure; then
+-  exitcode=1
+-  echo as_func_failure succeeded.
+-fi
+-
+-if as_func_ret_success; then
+-  :
+-else
+-  exitcode=1
+-  echo as_func_ret_success failed.
+-fi
+-
+-if as_func_ret_failure; then
+-  exitcode=1
+-  echo as_func_ret_failure succeeded.
+-fi
+-
+-if ( set x; as_func_ret_success y && test x = \"\$1\" ); then
+-  :
+-else
+-  exitcode=1
+-  echo positional parameters were not saved.
++as_fn_success || { exitcode=1; echo as_fn_success failed.; }
++as_fn_failure && { exitcode=1; echo as_fn_failure succeeded.; }
++as_fn_ret_success || { exitcode=1; echo as_fn_ret_success failed.; }
++as_fn_ret_failure && { exitcode=1; echo as_fn_ret_failure succeeded.; }
++if ( set x; as_fn_ret_success y && test x = \"\$1\" )
++then :
++
++else \$as_nop
++  exitcode=1; echo positional parameters were not saved.
++fi
++test x\$exitcode = x0 || exit 1
++blah=\$(echo \$(echo blah))
++test x\"\$blah\" = xblah || exit 1
++test -x / || exit 1"
++  as_suggested="  as_lineno_1=";as_suggested=$as_suggested$LINENO;as_suggested=$as_suggested" as_lineno_1a=\$LINENO
++  as_lineno_2=";as_suggested=$as_suggested$LINENO;as_suggested=$as_suggested" as_lineno_2a=\$LINENO
++  eval 'test \"x\$as_lineno_1'\$as_run'\" != \"x\$as_lineno_2'\$as_run'\" &&
++  test \"x\`expr \$as_lineno_1'\$as_run' + 1\`\" = \"x\$as_lineno_2'\$as_run'\"' || exit 1
++test \$(( 1 + 1 )) = 2 || exit 1"
++  if (eval "$as_required") 2>/dev/null
++then :
++  as_have_required=yes
++else $as_nop
++  as_have_required=no
+ fi
++  if test x$as_have_required = xyes && (eval "$as_suggested") 2>/dev/null
++then :
+ 
+-test \$exitcode = 0) || { (exit 1); exit 1; }
+-
+-(
+-  as_lineno_1=\$LINENO
+-  as_lineno_2=\$LINENO
+-  test \"x\$as_lineno_1\" != \"x\$as_lineno_2\" &&
+-  test \"x\`expr \$as_lineno_1 + 1\`\" = \"x\$as_lineno_2\") || { (exit 1); exit 1; }
+-") 2> /dev/null; then
+-  :
+-else
+-  as_candidate_shells=
+-    as_save_IFS=$IFS; IFS=$PATH_SEPARATOR
++else $as_nop
++  as_save_IFS=$IFS; IFS=$PATH_SEPARATOR
++as_found=false
+ for as_dir in /bin$PATH_SEPARATOR/usr/bin$PATH_SEPARATOR$PATH
+ do
+   IFS=$as_save_IFS
+-  test -z "$as_dir" && as_dir=.
+-  case $as_dir in
++  case $as_dir in #(((
++    '') as_dir=./ ;;
++    */) ;;
++    *) as_dir=$as_dir/ ;;
++  esac
++  as_found=:
++  case $as_dir in #(
+ 	 /*)
+ 	   for as_base in sh bash ksh sh5; do
+-	     as_candidate_shells="$as_candidate_shells $as_dir/$as_base"
++	     # Try only shells that exist, to save several forks.
++	     as_shell=$as_dir$as_base
++	     if { test -f "$as_shell" || test -f "$as_shell.exe"; } &&
++		    as_run=a "$as_shell" -c "$as_bourne_compatible""$as_required" 2>/dev/null
++then :
++  CONFIG_SHELL=$as_shell as_have_required=yes
++		   if as_run=a "$as_shell" -c "$as_bourne_compatible""$as_suggested" 2>/dev/null
++then :
++  break 2
++fi
++fi
+ 	   done;;
+        esac
++  as_found=false
+ done
+ IFS=$as_save_IFS
++if $as_found
++then :
+ 
+-
+-      for as_shell in $as_candidate_shells $SHELL; do
+-	 # Try only shells that exist, to save several forks.
+-	 if { test -f "$as_shell" || test -f "$as_shell.exe"; } &&
+-		{ ("$as_shell") 2> /dev/null <<\_ASEOF
+-if test -n "${ZSH_VERSION+set}" && (emulate sh) >/dev/null 2>&1; then
+-  emulate sh
+-  NULLCMD=:
+-  # Zsh 3.x and 4.x performs word splitting on ${1+"$@"}, which
+-  # is contrary to our usage.  Disable this feature.
+-  alias -g '${1+"$@"}'='"$@"'
+-  setopt NO_GLOB_SUBST
+-else
+-  case `(set -o) 2>/dev/null` in
+-  *posix*) set -o posix ;;
+-esac
+-
++else $as_nop
++  if { test -f "$SHELL" || test -f "$SHELL.exe"; } &&
++	      as_run=a "$SHELL" -c "$as_bourne_compatible""$as_required" 2>/dev/null
++then :
++  CONFIG_SHELL=$SHELL as_have_required=yes
+ fi
+-
+-
+-:
+-_ASEOF
+-}; then
+-  CONFIG_SHELL=$as_shell
+-	       as_have_required=yes
+-	       if { "$as_shell" 2> /dev/null <<\_ASEOF
+-if test -n "${ZSH_VERSION+set}" && (emulate sh) >/dev/null 2>&1; then
+-  emulate sh
+-  NULLCMD=:
+-  # Zsh 3.x and 4.x performs word splitting on ${1+"$@"}, which
+-  # is contrary to our usage.  Disable this feature.
+-  alias -g '${1+"$@"}'='"$@"'
+-  setopt NO_GLOB_SUBST
+-else
+-  case `(set -o) 2>/dev/null` in
+-  *posix*) set -o posix ;;
+-esac
+-
+ fi
+ 
+ 
+-:
+-(as_func_return () {
+-  (exit $1)
+-}
+-as_func_success () {
+-  as_func_return 0
+-}
+-as_func_failure () {
+-  as_func_return 1
+-}
+-as_func_ret_success () {
+-  return 0
+-}
+-as_func_ret_failure () {
+-  return 1
+-}
+-
+-exitcode=0
+-if as_func_success; then
+-  :
+-else
+-  exitcode=1
+-  echo as_func_success failed.
+-fi
+-
+-if as_func_failure; then
+-  exitcode=1
+-  echo as_func_failure succeeded.
+-fi
+-
+-if as_func_ret_success; then
+-  :
+-else
+-  exitcode=1
+-  echo as_func_ret_success failed.
+-fi
+-
+-if as_func_ret_failure; then
+-  exitcode=1
+-  echo as_func_ret_failure succeeded.
+-fi
+-
+-if ( set x; as_func_ret_success y && test x = "$1" ); then
+-  :
+-else
+-  exitcode=1
+-  echo positional parameters were not saved.
++      if test "x$CONFIG_SHELL" != x
++then :
++  export CONFIG_SHELL
++             # We cannot yet assume a decent shell, so we have to provide a
++# neutralization value for shells without unset; and this also
++# works around shells that cannot unset nonexistent variables.
++# Preserve -v and -x to the replacement shell.
++BASH_ENV=/dev/null
++ENV=/dev/null
++(unset BASH_ENV) >/dev/null 2>&1 && unset BASH_ENV ENV
++case $- in # ((((
++  *v*x* | *x*v* ) as_opts=-vx ;;
++  *v* ) as_opts=-v ;;
++  *x* ) as_opts=-x ;;
++  * ) as_opts= ;;
++esac
++exec $CONFIG_SHELL $as_opts "$as_myself" ${1+"$@"}
++# Admittedly, this is quite paranoid, since all the known shells bail
++# out after a failed `exec'.
++printf "%s\n" "$0: could not re-execute with $CONFIG_SHELL" >&2
++exit 255
++fi
++
++    if test x$as_have_required = xno
++then :
++  printf "%s\n" "$0: This script requires a shell more modern than all"
++  printf "%s\n" "$0: the shells that I found on your system."
++  if test ${ZSH_VERSION+y} ; then
++    printf "%s\n" "$0: In particular, zsh $ZSH_VERSION has bugs and should"
++    printf "%s\n" "$0: be upgraded to zsh 4.3.4 or later."
++  else
++    printf "%s\n" "$0: Please tell bug-autoconf@gnu.org about your system,
++$0: including any error possibly output before this
++$0: message. Then install a modern shell, or manually run
++$0: the script under such a shell if you do have one."
++  fi
++  exit 1
+ fi
+-
+-test $exitcode = 0) || { (exit 1); exit 1; }
+-
+-(
+-  as_lineno_1=$LINENO
+-  as_lineno_2=$LINENO
+-  test "x$as_lineno_1" != "x$as_lineno_2" &&
+-  test "x`expr $as_lineno_1 + 1`" = "x$as_lineno_2") || { (exit 1); exit 1; }
+-
+-_ASEOF
+-}; then
+-  break
+ fi
+-
+ fi
++SHELL=${CONFIG_SHELL-/bin/sh}
++export SHELL
++# Unset more variables known to interfere with behavior of common tools.
++CLICOLOR_FORCE= GREP_OPTIONS=
++unset CLICOLOR_FORCE GREP_OPTIONS
+ 
+-      done
+-
+-      if test "x$CONFIG_SHELL" != x; then
+-  for as_var in BASH_ENV ENV
+-        do ($as_unset $as_var) >/dev/null 2>&1 && $as_unset $as_var
+-        done
+-        export CONFIG_SHELL
+-        exec "$CONFIG_SHELL" "$as_myself" ${1+"$@"}
+-fi
++## --------------------- ##
++## M4sh Shell Functions. ##
++## --------------------- ##
++# as_fn_unset VAR
++# ---------------
++# Portably unset VAR.
++as_fn_unset ()
++{
++  { eval $1=; unset $1;}
++}
++as_unset=as_fn_unset
+ 
+ 
+-    if test $as_have_required = no; then
+-  echo This script requires a shell more modern than all the
+-      echo shells that I found on your system.  Please install a
+-      echo modern shell, or manually run the script under such a
+-      echo shell if you do have one.
+-      { (exit 1); exit 1; }
+-fi
++# as_fn_set_status STATUS
++# -----------------------
++# Set $? to STATUS, without forking.
++as_fn_set_status ()
++{
++  return $1
++} # as_fn_set_status
+ 
++# as_fn_exit STATUS
++# -----------------
++# Exit the shell with STATUS, even in a "trap 0" or "set -e" context.
++as_fn_exit ()
++{
++  set +e
++  as_fn_set_status $1
++  exit $1
++} # as_fn_exit
++# as_fn_nop
++# ---------
++# Do nothing but, unlike ":", preserve the value of $?.
++as_fn_nop ()
++{
++  return $?
++}
++as_nop=as_fn_nop
+ 
+-fi
++# as_fn_mkdir_p
++# -------------
++# Create "$as_dir" as a directory, including parents if necessary.
++as_fn_mkdir_p ()
++{
+ 
+-fi
++  case $as_dir in #(
++  -*) as_dir=./$as_dir;;
++  esac
++  test -d "$as_dir" || eval $as_mkdir_p || {
++    as_dirs=
++    while :; do
++      case $as_dir in #(
++      *\'*) as_qdir=`printf "%s\n" "$as_dir" | sed "s/'/'\\\\\\\\''/g"`;; #'(
++      *) as_qdir=$as_dir;;
++      esac
++      as_dirs="'$as_qdir' $as_dirs"
++      as_dir=`$as_dirname -- "$as_dir" ||
++$as_expr X"$as_dir" : 'X\(.*[^/]\)//*[^/][^/]*/*$' \| \
++	 X"$as_dir" : 'X\(//\)[^/]' \| \
++	 X"$as_dir" : 'X\(//\)$' \| \
++	 X"$as_dir" : 'X\(/\)' \| . 2>/dev/null ||
++printf "%s\n" X"$as_dir" |
++    sed '/^X\(.*[^/]\)\/\/*[^/][^/]*\/*$/{
++	    s//\1/
++	    q
++	  }
++	  /^X\(\/\/\)[^/].*/{
++	    s//\1/
++	    q
++	  }
++	  /^X\(\/\/\)$/{
++	    s//\1/
++	    q
++	  }
++	  /^X\(\/\).*/{
++	    s//\1/
++	    q
++	  }
++	  s/.*/./; q'`
++      test -d "$as_dir" && break
++    done
++    test -z "$as_dirs" || eval "mkdir $as_dirs"
++  } || test -d "$as_dir" || as_fn_error $? "cannot create directory $as_dir"
+ 
+ 
++} # as_fn_mkdir_p
+ 
+-(eval "as_func_return () {
+-  (exit \$1)
+-}
+-as_func_success () {
+-  as_func_return 0
+-}
+-as_func_failure () {
+-  as_func_return 1
+-}
+-as_func_ret_success () {
+-  return 0
+-}
+-as_func_ret_failure () {
+-  return 1
++# as_fn_executable_p FILE
++# -----------------------
++# Test if FILE is an executable regular file.
++as_fn_executable_p ()
++{
++  test -f "$1" && test -x "$1"
++} # as_fn_executable_p
++# as_fn_append VAR VALUE
++# ----------------------
++# Append the text in VALUE to the end of the definition contained in VAR. Take
++# advantage of any shell optimizations that allow amortized linear growth over
++# repeated appends, instead of the typical quadratic growth present in naive
++# implementations.
++if (eval "as_var=1; as_var+=2; test x\$as_var = x12") 2>/dev/null
++then :
++  eval 'as_fn_append ()
++  {
++    eval $1+=\$2
++  }'
++else $as_nop
++  as_fn_append ()
++  {
++    eval $1=\$$1\$2
++  }
++fi # as_fn_append
++
++# as_fn_arith ARG...
++# ------------------
++# Perform arithmetic evaluation on the ARGs, and store the result in the
++# global $as_val. Take advantage of shells that can avoid forks. The arguments
++# must be portable across $(()) and expr.
++if (eval "test \$(( 1 + 1 )) = 2") 2>/dev/null
++then :
++  eval 'as_fn_arith ()
++  {
++    as_val=$(( $* ))
++  }'
++else $as_nop
++  as_fn_arith ()
++  {
++    as_val=`expr "$@" || test $? -eq 1`
++  }
++fi # as_fn_arith
++
++# as_fn_nop
++# ---------
++# Do nothing but, unlike ":", preserve the value of $?.
++as_fn_nop ()
++{
++  return $?
+ }
++as_nop=as_fn_nop
++
++# as_fn_error STATUS ERROR [LINENO LOG_FD]
++# ----------------------------------------
++# Output "`basename $0`: error: ERROR" to stderr. If LINENO and LOG_FD are
++# provided, also output the error to LOG_FD, referencing LINENO. Then exit the
++# script with STATUS, using 1 if that was 0.
++as_fn_error ()
++{
++  as_status=$1; test $as_status -eq 0 && as_status=1
++  if test "$4"; then
++    as_lineno=${as_lineno-"$3"} as_lineno_stack=as_lineno_stack=$as_lineno_stack
++    printf "%s\n" "$as_me:${as_lineno-$LINENO}: error: $2" >&$4
++  fi
++  printf "%s\n" "$as_me: error: $2" >&2
++  as_fn_exit $as_status
++} # as_fn_error
+ 
+-exitcode=0
+-if as_func_success; then
+-  :
++if expr a : '\(a\)' >/dev/null 2>&1 &&
++   test "X`expr 00001 : '.*\(...\)'`" = X001; then
++  as_expr=expr
+ else
+-  exitcode=1
+-  echo as_func_success failed.
+-fi
+-
+-if as_func_failure; then
+-  exitcode=1
+-  echo as_func_failure succeeded.
++  as_expr=false
+ fi
+ 
+-if as_func_ret_success; then
+-  :
++if (basename -- /) >/dev/null 2>&1 && test "X`basename -- / 2>&1`" = "X/"; then
++  as_basename=basename
+ else
+-  exitcode=1
+-  echo as_func_ret_success failed.
+-fi
+-
+-if as_func_ret_failure; then
+-  exitcode=1
+-  echo as_func_ret_failure succeeded.
++  as_basename=false
+ fi
+ 
+-if ( set x; as_func_ret_success y && test x = \"\$1\" ); then
+-  :
++if (as_dir=`dirname -- /` && test "X$as_dir" = X/) >/dev/null 2>&1; then
++  as_dirname=dirname
+ else
+-  exitcode=1
+-  echo positional parameters were not saved.
++  as_dirname=false
+ fi
+ 
+-test \$exitcode = 0") || {
+-  echo No shell found that supports shell functions.
+-  echo Please tell autoconf@gnu.org about your system,
+-  echo including any error possibly output before this
+-  echo message
+-}
+-
++as_me=`$as_basename -- "$0" ||
++$as_expr X/"$0" : '.*/\([^/][^/]*\)/*$' \| \
++	 X"$0" : 'X\(//\)$' \| \
++	 X"$0" : 'X\(/\)' \| . 2>/dev/null ||
++printf "%s\n" X/"$0" |
++    sed '/^.*\/\([^/][^/]*\)\/*$/{
++	    s//\1/
++	    q
++	  }
++	  /^X\/\(\/\/\)$/{
++	    s//\1/
++	    q
++	  }
++	  /^X\/\(\/\).*/{
++	    s//\1/
++	    q
++	  }
++	  s/.*/./; q'`
+ 
++# Avoid depending upon Character Ranges.
++as_cr_letters='abcdefghijklmnopqrstuvwxyz'
++as_cr_LETTERS='ABCDEFGHIJKLMNOPQRSTUVWXYZ'
++as_cr_Letters=$as_cr_letters$as_cr_LETTERS
++as_cr_digits='0123456789'
++as_cr_alnum=$as_cr_Letters$as_cr_digits
+ 
+-  as_lineno_1=$LINENO
+-  as_lineno_2=$LINENO
+-  test "x$as_lineno_1" != "x$as_lineno_2" &&
+-  test "x`expr $as_lineno_1 + 1`" = "x$as_lineno_2" || {
+ 
+-  # Create $as_me.lineno as a copy of $as_myself, but with $LINENO
+-  # uniformly replaced by the line number.  The first 'sed' inserts a
+-  # line-number line after each line using $LINENO; the second 'sed'
+-  # does the real work.  The second script uses 'N' to pair each
+-  # line-number line with the line containing $LINENO, and appends
+-  # trailing '-' during substitution so that $LINENO is not a special
+-  # case at line end.
+-  # (Raja R Harinath suggested sed '=', and Paul Eggert wrote the
+-  # scripts with optimization help from Paolo Bonzini.  Blame Lee
+-  # E. McMahon (1931-1989) for sed's syntax.  :-)
++  as_lineno_1=$LINENO as_lineno_1a=$LINENO
++  as_lineno_2=$LINENO as_lineno_2a=$LINENO
++  eval 'test "x$as_lineno_1'$as_run'" != "x$as_lineno_2'$as_run'" &&
++  test "x`expr $as_lineno_1'$as_run' + 1`" = "x$as_lineno_2'$as_run'"' || {
++  # Blame Lee E. McMahon (1931-1989) for sed's syntax.  :-)
+   sed -n '
+     p
+     /[$]LINENO/=
+@@ -451,9 +503,12 @@ test \$exitcode = 0") || {
+       s/-\n.*//
+     ' >$as_me.lineno &&
+   chmod +x "$as_me.lineno" ||
+-    { echo "$as_me: error: cannot create $as_me.lineno; rerun with a POSIX shell" >&2
+-   { (exit 1); exit 1; }; }
++    { printf "%s\n" "$as_me: error: cannot create $as_me.lineno; rerun with a POSIX shell" >&2; as_fn_exit 1; }
+ 
++  # If we had to re-execute with $CONFIG_SHELL, we're ensured to have
++  # already done that, so ensure we don't try to do so again and fall
++  # in an infinite loop.  This has already happened in practice.
++  _as_can_reexec=no; export _as_can_reexec
+   # Don't try to exec as it changes $[0], causing all sort of problems
+   # (the dirname of $[0] is not the place where we might find the
+   # original and so on.  Autoconf is especially sensitive to this).
+@@ -463,83 +518,65 @@ test \$exitcode = 0") || {
+ }
+ 
+ 
+-if (as_dir=`dirname -- /` && test "X$as_dir" = X/) >/dev/null 2>&1; then
+-  as_dirname=dirname
+-else
+-  as_dirname=false
+-fi
+-
++# Determine whether it's possible to make 'echo' print without a newline.
++# These variables are no longer used directly by Autoconf, but are AC_SUBSTed
++# for compatibility with existing Makefiles.
+ ECHO_C= ECHO_N= ECHO_T=
+-case `echo -n x` in
++case `echo -n x` in #(((((
+ -n*)
+-  case `echo 'x\c'` in
++  case `echo 'xy\c'` in
+   *c*) ECHO_T='	';;	# ECHO_T is single tab character.
+-  *)   ECHO_C='\c';;
++  xy)  ECHO_C='\c';;
++  *)   echo `echo ksh88 bug on AIX 6.1` > /dev/null
++       ECHO_T='	';;
+   esac;;
+ *)
+   ECHO_N='-n';;
+ esac
+ 
+-if expr a : '\(a\)' >/dev/null 2>&1 &&
+-   test "X`expr 00001 : '.*\(...\)'`" = X001; then
+-  as_expr=expr
+-else
+-  as_expr=false
+-fi
++# For backward compatibility with old third-party macros, we provide
++# the shell variables $as_echo and $as_echo_n.  New code should use
++# AS_ECHO(["message"]) and AS_ECHO_N(["message"]), respectively.
++as_echo='printf %s\n'
++as_echo_n='printf %s'
++
+ 
+ rm -f conf$$ conf$$.exe conf$$.file
+ if test -d conf$$.dir; then
+   rm -f conf$$.dir/conf$$.file
+ else
+   rm -f conf$$.dir
+-  mkdir conf$$.dir
+-fi
+-echo >conf$$.file
+-if ln -s conf$$.file conf$$ 2>/dev/null; then
+-  as_ln_s='ln -s'
+-  # ... but there are two gotchas:
+-  # 1) On MSYS, both `ln -s file dir' and `ln file dir' fail.
+-  # 2) DJGPP < 2.04 has no symlinks; `ln -s' creates a wrapper executable.
+-  # In both cases, we have to default to `cp -p'.
+-  ln -s conf$$.file conf$$.dir 2>/dev/null && test ! -f conf$$.exe ||
+-    as_ln_s='cp -p'
+-elif ln conf$$.file conf$$ 2>/dev/null; then
+-  as_ln_s=ln
++  mkdir conf$$.dir 2>/dev/null
++fi
++if (echo >conf$$.file) 2>/dev/null; then
++  if ln -s conf$$.file conf$$ 2>/dev/null; then
++    as_ln_s='ln -s'
++    # ... but there are two gotchas:
++    # 1) On MSYS, both `ln -s file dir' and `ln file dir' fail.
++    # 2) DJGPP < 2.04 has no symlinks; `ln -s' creates a wrapper executable.
++    # In both cases, we have to default to `cp -pR'.
++    ln -s conf$$.file conf$$.dir 2>/dev/null && test ! -f conf$$.exe ||
++      as_ln_s='cp -pR'
++  elif ln conf$$.file conf$$ 2>/dev/null; then
++    as_ln_s=ln
++  else
++    as_ln_s='cp -pR'
++  fi
+ else
+-  as_ln_s='cp -p'
++  as_ln_s='cp -pR'
+ fi
+ rm -f conf$$ conf$$.exe conf$$.dir/conf$$.file conf$$.file
+ rmdir conf$$.dir 2>/dev/null
+ 
+ if mkdir -p . 2>/dev/null; then
+-  as_mkdir_p=:
++  as_mkdir_p='mkdir -p "$as_dir"'
+ else
+   test -d ./-p && rmdir ./-p
+   as_mkdir_p=false
+ fi
+ 
+-if test -x / >/dev/null 2>&1; then
+-  as_test_x='test -x'
+-else
+-  if ls -dL / >/dev/null 2>&1; then
+-    as_ls_L_option=L
+-  else
+-    as_ls_L_option=
+-  fi
+-  as_test_x='
+-    eval sh -c '\''
+-      if test -d "$1"; then
+-        test -d "$1/.";
+-      else
+-	case $1 in
+-        -*)set "./$1";;
+-	esac;
+-	case `ls -ld'$as_ls_L_option' "$1" 2>/dev/null` in
+-	???[sx]*):;;*)false;;esac;fi
+-    '\'' sh
+-  '
+-fi
+-as_executable_p=$as_test_x
++as_test_x='test -x'
++as_executable_p=as_fn_executable_p
+ 
+ # Sed expression to map a string onto a valid CPP name.
+ as_tr_cpp="eval sed 'y%*$as_cr_letters%P$as_cr_LETTERS%;s%[^_$as_cr_alnum]%_%g'"
+@@ -548,11 +585,11 @@ as_tr_cpp="eval sed 'y%*$as_cr_letters%P$as_cr_LETTERS%;s%[^_$as_cr_alnum]%_%g'"
+ as_tr_sh="eval sed 'y%*+%pp%;s%[^_$as_cr_alnum]%_%g'"
+ 
+ 
+-
+-exec 7<&0 </dev/null 6>&1
++test -n "$DJDIR" || exec 7<&0 </dev/null
++exec 6>&1
+ 
+ # Name of the host.
+-# hostname on some systems (SVR3.2, Linux) returns a bogus exit status,
++# hostname on some systems (SVR3.2, old GNU/Linux) returns a bogus exit status,
+ # so uname gets run too.
+ ac_hostname=`(hostname || uname -n) 2>/dev/null | sed 1q`
+ 
+@@ -567,167 +604,235 @@ cross_compiling=no
+ subdirs=
+ MFLAGS=
+ MAKEFLAGS=
+-SHELL=${CONFIG_SHELL-/bin/sh}
+ 
+ # Identity of this package.
+-PACKAGE_NAME=
+-PACKAGE_TARNAME=
+-PACKAGE_VERSION=
+-PACKAGE_STRING=
+-PACKAGE_BUGREPORT=
++PACKAGE_NAME=''
++PACKAGE_TARNAME=''
++PACKAGE_VERSION=''
++PACKAGE_STRING=''
++PACKAGE_BUGREPORT=''
++PACKAGE_URL=''
+ 
+ ac_unique_file="COPYRIGHT"
+ # Factoring default headers for most tests.
+ ac_includes_default="\
+-#include <stdio.h>
+-#ifdef HAVE_SYS_TYPES_H
+-# include <sys/types.h>
++#include <stddef.h>
++#ifdef HAVE_STDIO_H
++# include <stdio.h>
+ #endif
+-#ifdef HAVE_SYS_STAT_H
+-# include <sys/stat.h>
+-#endif
+-#ifdef STDC_HEADERS
++#ifdef HAVE_STDLIB_H
+ # include <stdlib.h>
+-# include <stddef.h>
+-#else
+-# ifdef HAVE_STDLIB_H
+-#  include <stdlib.h>
+-# endif
+ #endif
+ #ifdef HAVE_STRING_H
+-# if !defined STDC_HEADERS && defined HAVE_MEMORY_H
+-#  include <memory.h>
+-# endif
+ # include <string.h>
+ #endif
+-#ifdef HAVE_STRINGS_H
+-# include <strings.h>
+-#endif
+ #ifdef HAVE_INTTYPES_H
+ # include <inttypes.h>
+ #endif
+ #ifdef HAVE_STDINT_H
+ # include <stdint.h>
+ #endif
++#ifdef HAVE_STRINGS_H
++# include <strings.h>
++#endif
++#ifdef HAVE_SYS_TYPES_H
++# include <sys/types.h>
++#endif
++#ifdef HAVE_SYS_STAT_H
++# include <sys/stat.h>
++#endif
+ #ifdef HAVE_UNISTD_H
+ # include <unistd.h>
+ #endif"
+ 
+-ac_subst_vars='SHELL
+-PATH_SEPARATOR
+-PACKAGE_NAME
+-PACKAGE_TARNAME
+-PACKAGE_VERSION
+-PACKAGE_STRING
+-PACKAGE_BUGREPORT
+-exec_prefix
+-prefix
+-program_transform_name
+-bindir
+-sbindir
+-libexecdir
+-datarootdir
+-datadir
+-sysconfdir
+-sharedstatedir
+-localstatedir
+-includedir
+-oldincludedir
+-docdir
+-infodir
+-htmldir
+-dvidir
+-pdfdir
+-psdir
+-libdir
+-localedir
+-mandir
+-DEFS
+-ECHO_C
+-ECHO_N
+-ECHO_T
+-LIBS
+-build_alias
+-host_alias
+-target_alias
+-build
+-build_cpu
+-build_vendor
+-build_os
+-host
+-host_cpu
+-host_vendor
+-host_os
+-target
+-target_cpu
+-target_vendor
+-target_os
+-ARCH
+-CXX
+-CXXFLAGS
+-LDFLAGS
+-CPPFLAGS
+-ac_ct_CXX
+-EXEEXT
+-OBJEXT
+-CC
+-CFLAGS
+-ac_ct_CC
+-AR
+-M4
+-INSTALL_PROGRAM
+-INSTALL_SCRIPT
+-INSTALL_DATA
+-CPP
+-GREP
+-EGREP
+-CXXCPP
+-CXX_FLAGS_NO_TEMPLATE_INST
+-IMPLICIT_TEMPLATE_INSTANTIATION
+-DEPENDS_ON_TEMPLATE_IMPLEMENTATION
+-DEVELOPER_MAKEFILE
+-SAMRAI_OPTIONAL_LIBS
+-SAMRAI_ENABLE_SPECIAL
+-F77
+-FFLAGS
+-F77LIBFLAGS
+-ac_ct_F77
+-FLIBS
+-XMKMF
+-X_CFLAGS
+-X_PRE_LIBS
+-X_LIBS
+-X_EXTRA_LIBS
+-DOXYGEN_BIN
+-HAVE_DOT
+-DOT_PATH
+-dox_output_dir
+-SAMRAI_PERL
+-MPICC
+-MPIINCLUDE
+-MPILIBDIRS
+-MPILIBS
+-MPIFLAGS
+-SUNDIALS_C_FILES
+-PARALLEL_RUN_BIN
+-TEST_NPROCS
+-INSTDIR
+-SAMRAI_TARGET
+-TAU_INCLUDE
+-XARGS
+-F77_FLAGS
+-C_FLAGS
+-CXX_FLAGS
+-LD_FLAGS
+-CXXLD_FLAGS
+-LIB_SUFFIX
+-SRCDIR_COMPILE_PREFIX
+-INC_PATH
+-LIB_PATH
+-LIB_NAME
++ac_header_cxx_list=
++ac_subst_vars='LTLIBOBJS
+ LIBOBJS
+-LTLIBOBJS'
++LIB_NAME
++LIB_PATH
++INC_PATH
++SRCDIR_COMPILE_PREFIX
++LIB_SUFFIX
++CXXLD_FLAGS
++LD_FLAGS
++CXX_FLAGS
++C_FLAGS
++F77_FLAGS
++XARGS
++TAU_INCLUDE
++SAMRAI_TARGET
++INSTDIR
++TEST_NPROCS
++PARALLEL_RUN_BIN
++SUNDIALS_C_FILES
++MPIFLAGS
++MPILIBS
++MPILIBDIRS
++MPIINCLUDE
++MPICC
++SAMRAI_PERL
++dox_output_dir
++DOT_PATH
++HAVE_DOT
++DOXYGEN_BIN
++X_EXTRA_LIBS
++X_LIBS
++X_PRE_LIBS
++X_CFLAGS
++XMKMF
++FLIBS
++ac_ct_F77
++F77LIBFLAGS
++FFLAGS
++F77
++SAMRAI_ENABLE_SPECIAL
++SAMRAI_OPTIONAL_LIBS
++DEVELOPER_MAKEFILE
++DEPENDS_ON_TEMPLATE_IMPLEMENTATION
++IMPLICIT_TEMPLATE_INSTANTIATION
++CXX_FLAGS_NO_TEMPLATE_INST
++CXXCPP
++EGREP
++GREP
++CPP
++MKDIR_P
++INSTALL_DATA
++INSTALL_SCRIPT
++INSTALL_PROGRAM
++M4
++AR
++ac_ct_CC
++CFLAGS
++CC
++OBJEXT
++EXEEXT
++ac_ct_CXX
++CPPFLAGS
++LDFLAGS
++CXXFLAGS
++CXX
++ARCH
++target_os
++target_vendor
++target_cpu
++target
++host_os
++host_vendor
++host_cpu
++host
++build_os
++build_vendor
++build_cpu
++build
++target_alias
++host_alias
++build_alias
++LIBS
++ECHO_T
++ECHO_N
++ECHO_C
++DEFS
++mandir
++localedir
++libdir
++psdir
++pdfdir
++dvidir
++htmldir
++infodir
++docdir
++oldincludedir
++includedir
++runstatedir
++localstatedir
++sharedstatedir
++sysconfdir
++datadir
++datarootdir
++libexecdir
++sbindir
++bindir
++program_transform_name
++prefix
++exec_prefix
++PACKAGE_URL
++PACKAGE_BUGREPORT
++PACKAGE_STRING
++PACKAGE_VERSION
++PACKAGE_TARNAME
++PACKAGE_NAME
++PATH_SEPARATOR
++SHELL'
+ ac_subst_files=''
++ac_user_opts='
++enable_option_checking
++enable_char
++enable_float
++enable_bool
++enable_dcomplex
++enable_vpath
++enable_noxargs
++enable_shared
++enable_xdr
++enable_developer_makefile
++with_CC
++with_CXX
++with_F77
++with_M4
++with_AR
++with_vampir
++with_tau
++enable_deprecated
++with_MPI
++with_HDF5
++with_PETSC
++enable_implicit_template_instantiation
++enable_opt
++enable_debug
++enable_fortran_mangling_override
++with_x
++with_doxygen
++with_dot_dir
++with_dox_output_dir
++with_perl
++with_iostream_header_file
++with_iomanip_header_file
++with_stl_sstream_header_file
++with_dl
++with_dl_includes
++with_dl_libs
++with_nsl
++with_nsl_includes
++with_nsl_libs
++with_libz
++with_libz_includes
++with_libz_libs
++with_blaslapack
++with_blaslapack_includes
++with_blaslapack_libs
++with_mpi
++with_mpi_include
++with_mpi_libs
++with_mpi_lib_dirs
++with_mpi_flags
++with_MPICC
++with_hdf5
++with_silo
++with_hypre
++with_superlu_lib
++with_spooles
++with_petsc
++with_petsc_arch
++with_petsc_optimize
++with_petsc_mpiuni
++with_petsc_libfiles
++with_sundials
++with_cubes
++with_eleven
++enable_rpath
++with_parallel_run_bin
++enable_test_nprocs
++'
+       ac_precious_vars='build_alias
+ host_alias
+ target_alias
+@@ -749,6 +854,8 @@ XMKMF'
+ # Initialize some variables set by options.
+ ac_init_help=
+ ac_init_version=false
++ac_unrecognized_opts=
++ac_unrecognized_sep=
+ # The variables have the same names as the options, with
+ # dashes changed to underlines.
+ cache_file=/dev/null
+@@ -780,6 +887,7 @@ datadir='${datarootdir}'
+ sysconfdir='${prefix}/etc'
+ sharedstatedir='${prefix}/com'
+ localstatedir='${prefix}/var'
++runstatedir='${localstatedir}/run'
+ includedir='${prefix}/include'
+ oldincludedir='/usr/include'
+ docdir='${datarootdir}/doc/${PACKAGE}'
+@@ -804,12 +912,11 @@ do
+   fi
+ 
+   case $ac_option in
+-  *=*)	ac_optarg=`expr "X$ac_option" : '[^=]*=\(.*\)'` ;;
+-  *)	ac_optarg=yes ;;
++  *=?*) ac_optarg=`expr "X$ac_option" : '[^=]*=\(.*\)'` ;;
++  *=)   ac_optarg= ;;
++  *)    ac_optarg=yes ;;
+   esac
+ 
+-  # Accept the important Cygnus configure options, so we can diagnose typos.
+-
+   case $ac_dashdash$ac_option in
+   --)
+     ac_dashdash=yes ;;
+@@ -847,13 +954,20 @@ do
+     datarootdir=$ac_optarg ;;
+ 
+   -disable-* | --disable-*)
+-    ac_feature=`expr "x$ac_option" : 'x-*disable-\(.*\)'`
++    ac_useropt=`expr "x$ac_option" : 'x-*disable-\(.*\)'`
+     # Reject names that are not valid shell variable names.
+-    expr "x$ac_feature" : ".*[^-._$as_cr_alnum]" >/dev/null &&
+-      { echo "$as_me: error: invalid feature name: $ac_feature" >&2
+-   { (exit 1); exit 1; }; }
+-    ac_feature=`echo $ac_feature | sed 's/[-.]/_/g'`
+-    eval enable_$ac_feature=no ;;
++    expr "x$ac_useropt" : ".*[^-+._$as_cr_alnum]" >/dev/null &&
++      as_fn_error $? "invalid feature name: \`$ac_useropt'"
++    ac_useropt_orig=$ac_useropt
++    ac_useropt=`printf "%s\n" "$ac_useropt" | sed 's/[-+.]/_/g'`
++    case $ac_user_opts in
++      *"
++"enable_$ac_useropt"
++"*) ;;
++      *) ac_unrecognized_opts="$ac_unrecognized_opts$ac_unrecognized_sep--disable-$ac_useropt_orig"
++	 ac_unrecognized_sep=', ';;
++    esac
++    eval enable_$ac_useropt=no ;;
+ 
+   -docdir | --docdir | --docdi | --doc | --do)
+     ac_prev=docdir ;;
+@@ -866,13 +980,20 @@ do
+     dvidir=$ac_optarg ;;
+ 
+   -enable-* | --enable-*)
+-    ac_feature=`expr "x$ac_option" : 'x-*enable-\([^=]*\)'`
++    ac_useropt=`expr "x$ac_option" : 'x-*enable-\([^=]*\)'`
+     # Reject names that are not valid shell variable names.
+-    expr "x$ac_feature" : ".*[^-._$as_cr_alnum]" >/dev/null &&
+-      { echo "$as_me: error: invalid feature name: $ac_feature" >&2
+-   { (exit 1); exit 1; }; }
+-    ac_feature=`echo $ac_feature | sed 's/[-.]/_/g'`
+-    eval enable_$ac_feature=\$ac_optarg ;;
++    expr "x$ac_useropt" : ".*[^-+._$as_cr_alnum]" >/dev/null &&
++      as_fn_error $? "invalid feature name: \`$ac_useropt'"
++    ac_useropt_orig=$ac_useropt
++    ac_useropt=`printf "%s\n" "$ac_useropt" | sed 's/[-+.]/_/g'`
++    case $ac_user_opts in
++      *"
++"enable_$ac_useropt"
++"*) ;;
++      *) ac_unrecognized_opts="$ac_unrecognized_opts$ac_unrecognized_sep--enable-$ac_useropt_orig"
++	 ac_unrecognized_sep=', ';;
++    esac
++    eval enable_$ac_useropt=\$ac_optarg ;;
+ 
+   -exec-prefix | --exec_prefix | --exec-prefix | --exec-prefi \
+   | --exec-pref | --exec-pre | --exec-pr | --exec-p | --exec- \
+@@ -1017,6 +1138,15 @@ do
+   | -silent | --silent | --silen | --sile | --sil)
+     silent=yes ;;
+ 
++  -runstatedir | --runstatedir | --runstatedi | --runstated \
++  | --runstate | --runstat | --runsta | --runst | --runs \
++  | --run | --ru | --r)
++    ac_prev=runstatedir ;;
++  -runstatedir=* | --runstatedir=* | --runstatedi=* | --runstated=* \
++  | --runstate=* | --runstat=* | --runsta=* | --runst=* | --runs=* \
++  | --run=* | --ru=* | --r=*)
++    runstatedir=$ac_optarg ;;
++
+   -sbindir | --sbindir | --sbindi | --sbind | --sbin | --sbi | --sb)
+     ac_prev=sbindir ;;
+   -sbindir=* | --sbindir=* | --sbindi=* | --sbind=* | --sbin=* \
+@@ -1063,22 +1193,36 @@ do
+     ac_init_version=: ;;
+ 
+   -with-* | --with-*)
+-    ac_package=`expr "x$ac_option" : 'x-*with-\([^=]*\)'`
++    ac_useropt=`expr "x$ac_option" : 'x-*with-\([^=]*\)'`
+     # Reject names that are not valid shell variable names.
+-    expr "x$ac_package" : ".*[^-._$as_cr_alnum]" >/dev/null &&
+-      { echo "$as_me: error: invalid package name: $ac_package" >&2
+-   { (exit 1); exit 1; }; }
+-    ac_package=`echo $ac_package | sed 's/[-.]/_/g'`
+-    eval with_$ac_package=\$ac_optarg ;;
++    expr "x$ac_useropt" : ".*[^-+._$as_cr_alnum]" >/dev/null &&
++      as_fn_error $? "invalid package name: \`$ac_useropt'"
++    ac_useropt_orig=$ac_useropt
++    ac_useropt=`printf "%s\n" "$ac_useropt" | sed 's/[-+.]/_/g'`
++    case $ac_user_opts in
++      *"
++"with_$ac_useropt"
++"*) ;;
++      *) ac_unrecognized_opts="$ac_unrecognized_opts$ac_unrecognized_sep--with-$ac_useropt_orig"
++	 ac_unrecognized_sep=', ';;
++    esac
++    eval with_$ac_useropt=\$ac_optarg ;;
+ 
+   -without-* | --without-*)
+-    ac_package=`expr "x$ac_option" : 'x-*without-\(.*\)'`
++    ac_useropt=`expr "x$ac_option" : 'x-*without-\(.*\)'`
+     # Reject names that are not valid shell variable names.
+-    expr "x$ac_package" : ".*[^-._$as_cr_alnum]" >/dev/null &&
+-      { echo "$as_me: error: invalid package name: $ac_package" >&2
+-   { (exit 1); exit 1; }; }
+-    ac_package=`echo $ac_package | sed 's/[-.]/_/g'`
+-    eval with_$ac_package=no ;;
++    expr "x$ac_useropt" : ".*[^-+._$as_cr_alnum]" >/dev/null &&
++      as_fn_error $? "invalid package name: \`$ac_useropt'"
++    ac_useropt_orig=$ac_useropt
++    ac_useropt=`printf "%s\n" "$ac_useropt" | sed 's/[-+.]/_/g'`
++    case $ac_user_opts in
++      *"
++"with_$ac_useropt"
++"*) ;;
++      *) ac_unrecognized_opts="$ac_unrecognized_opts$ac_unrecognized_sep--without-$ac_useropt_orig"
++	 ac_unrecognized_sep=', ';;
++    esac
++    eval with_$ac_useropt=no ;;
+ 
+   --x)
+     # Obsolete; use --with-x.
+@@ -1098,26 +1242,26 @@ do
+   | --x-librar=* | --x-libra=* | --x-libr=* | --x-lib=* | --x-li=* | --x-l=*)
+     x_libraries=$ac_optarg ;;
+ 
+-  -*) { echo "$as_me: error: unrecognized option: $ac_option
+-Try \`$0 --help' for more information." >&2
+-   { (exit 1); exit 1; }; }
++  -*) as_fn_error $? "unrecognized option: \`$ac_option'
++Try \`$0 --help' for more information"
+     ;;
+ 
+   *=*)
+     ac_envvar=`expr "x$ac_option" : 'x\([^=]*\)='`
+     # Reject names that are not valid shell variable names.
+-    expr "x$ac_envvar" : ".*[^_$as_cr_alnum]" >/dev/null &&
+-      { echo "$as_me: error: invalid variable name: $ac_envvar" >&2
+-   { (exit 1); exit 1; }; }
++    case $ac_envvar in #(
++      '' | [0-9]* | *[!_$as_cr_alnum]* )
++      as_fn_error $? "invalid variable name: \`$ac_envvar'" ;;
++    esac
+     eval $ac_envvar=\$ac_optarg
+     export $ac_envvar ;;
+ 
+   *)
+     # FIXME: should be removed in autoconf 3.0.
+-    echo "$as_me: WARNING: you should use --build, --host, --target" >&2
++    printf "%s\n" "$as_me: WARNING: you should use --build, --host, --target" >&2
+     expr "x$ac_option" : ".*[^-._$as_cr_alnum]" >/dev/null &&
+-      echo "$as_me: WARNING: invalid host type: $ac_option" >&2
+-    : ${build_alias=$ac_option} ${host_alias=$ac_option} ${target_alias=$ac_option}
++      printf "%s\n" "$as_me: WARNING: invalid host type: $ac_option" >&2
++    : "${build_alias=$ac_option} ${host_alias=$ac_option} ${target_alias=$ac_option}"
+     ;;
+ 
+   esac
+@@ -1125,23 +1269,36 @@ done
+ 
+ if test -n "$ac_prev"; then
+   ac_option=--`echo $ac_prev | sed 's/_/-/g'`
+-  { echo "$as_me: error: missing argument to $ac_option" >&2
+-   { (exit 1); exit 1; }; }
++  as_fn_error $? "missing argument to $ac_option"
++fi
++
++if test -n "$ac_unrecognized_opts"; then
++  case $enable_option_checking in
++    no) ;;
++    fatal) as_fn_error $? "unrecognized options: $ac_unrecognized_opts" ;;
++    *)     printf "%s\n" "$as_me: WARNING: unrecognized options: $ac_unrecognized_opts" >&2 ;;
++  esac
+ fi
+ 
+-# Be sure to have absolute directory names.
++# Check all directory arguments for consistency.
+ for ac_var in	exec_prefix prefix bindir sbindir libexecdir datarootdir \
+ 		datadir sysconfdir sharedstatedir localstatedir includedir \
+ 		oldincludedir docdir infodir htmldir dvidir pdfdir psdir \
+-		libdir localedir mandir
++		libdir localedir mandir runstatedir
+ do
+   eval ac_val=\$$ac_var
++  # Remove trailing slashes.
++  case $ac_val in
++    */ )
++      ac_val=`expr "X$ac_val" : 'X\(.*[^/]\)' \| "X$ac_val" : 'X\(.*\)'`
++      eval $ac_var=\$ac_val;;
++  esac
++  # Be sure to have absolute directory names.
+   case $ac_val in
+     [\\/$]* | ?:[\\/]* )  continue;;
+     NONE | '' ) case $ac_var in *prefix ) continue;; esac;;
+   esac
+-  { echo "$as_me: error: expected an absolute directory name for --$ac_var: $ac_val" >&2
+-   { (exit 1); exit 1; }; }
++  as_fn_error $? "expected an absolute directory name for --$ac_var: $ac_val"
+ done
+ 
+ # There might be people who depend on the old broken behavior: `$host'
+@@ -1155,8 +1312,6 @@ target=$target_alias
+ if test "x$host_alias" != x; then
+   if test "x$build_alias" = x; then
+     cross_compiling=maybe
+-    echo "$as_me: WARNING: If you wanted to set the --build type, don't use --host.
+-    If a cross compiler is detected then cross compile mode will be used." >&2
+   elif test "x$build_alias" != "x$host_alias"; then
+     cross_compiling=yes
+   fi
+@@ -1171,23 +1326,21 @@ test "$silent" = yes && exec 6>/dev/null
+ ac_pwd=`pwd` && test -n "$ac_pwd" &&
+ ac_ls_di=`ls -di .` &&
+ ac_pwd_ls_di=`cd "$ac_pwd" && ls -di .` ||
+-  { echo "$as_me: error: Working directory cannot be determined" >&2
+-   { (exit 1); exit 1; }; }
++  as_fn_error $? "working directory cannot be determined"
+ test "X$ac_ls_di" = "X$ac_pwd_ls_di" ||
+-  { echo "$as_me: error: pwd does not report name of working directory" >&2
+-   { (exit 1); exit 1; }; }
++  as_fn_error $? "pwd does not report name of working directory"
+ 
+ 
+ # Find the source files, if location was not specified.
+ if test -z "$srcdir"; then
+   ac_srcdir_defaulted=yes
+   # Try the directory containing this script, then the parent directory.
+-  ac_confdir=`$as_dirname -- "$0" ||
+-$as_expr X"$0" : 'X\(.*[^/]\)//*[^/][^/]*/*$' \| \
+-	 X"$0" : 'X\(//\)[^/]' \| \
+-	 X"$0" : 'X\(//\)$' \| \
+-	 X"$0" : 'X\(/\)' \| . 2>/dev/null ||
+-echo X"$0" |
++  ac_confdir=`$as_dirname -- "$as_myself" ||
++$as_expr X"$as_myself" : 'X\(.*[^/]\)//*[^/][^/]*/*$' \| \
++	 X"$as_myself" : 'X\(//\)[^/]' \| \
++	 X"$as_myself" : 'X\(//\)$' \| \
++	 X"$as_myself" : 'X\(/\)' \| . 2>/dev/null ||
++printf "%s\n" X"$as_myself" |
+     sed '/^X\(.*[^/]\)\/\/*[^/][^/]*\/*$/{
+ 	    s//\1/
+ 	    q
+@@ -1214,13 +1367,11 @@ else
+ fi
+ if test ! -r "$srcdir/$ac_unique_file"; then
+   test "$ac_srcdir_defaulted" = yes && srcdir="$ac_confdir or .."
+-  { echo "$as_me: error: cannot find sources ($ac_unique_file) in $srcdir" >&2
+-   { (exit 1); exit 1; }; }
++  as_fn_error $? "cannot find sources ($ac_unique_file) in $srcdir"
+ fi
+ ac_msg="sources are in $srcdir, but \`cd $srcdir' does not work"
+ ac_abs_confdir=`(
+-	cd "$srcdir" && test -r "./$ac_unique_file" || { echo "$as_me: error: $ac_msg" >&2
+-   { (exit 1); exit 1; }; }
++	cd "$srcdir" && test -r "./$ac_unique_file" || as_fn_error $? "$ac_msg"
+ 	pwd)`
+ # When building in place, set srcdir=.
+ if test "$ac_abs_confdir" = "$ac_pwd"; then
+@@ -1260,7 +1411,7 @@ Configuration:
+       --help=short        display options specific to this package
+       --help=recursive    display the short help of all the included packages
+   -V, --version           display version information and exit
+-  -q, --quiet, --silent   do not print \`checking...' messages
++  -q, --quiet, --silent   do not print \`checking ...' messages
+       --cache-file=FILE   cache test results in FILE [disabled]
+   -C, --config-cache      alias for \`--cache-file=config.cache'
+   -n, --no-create         do not create output files
+@@ -1268,9 +1419,9 @@ Configuration:
+ 
+ Installation directories:
+   --prefix=PREFIX         install architecture-independent files in PREFIX
+-			  [$ac_default_prefix]
++                          [$ac_default_prefix]
+   --exec-prefix=EPREFIX   install architecture-dependent files in EPREFIX
+-			  [PREFIX]
++                          [PREFIX]
+ 
+ By default, \`make install' will install all the files in
+ \`$ac_default_prefix/bin', \`$ac_default_prefix/lib' etc.  You can specify
+@@ -1280,25 +1431,26 @@ for instance \`--prefix=\$HOME'.
+ For better control, use the options below.
+ 
+ Fine tuning of the installation directories:
+-  --bindir=DIR           user executables [EPREFIX/bin]
+-  --sbindir=DIR          system admin executables [EPREFIX/sbin]
+-  --libexecdir=DIR       program executables [EPREFIX/libexec]
+-  --sysconfdir=DIR       read-only single-machine data [PREFIX/etc]
+-  --sharedstatedir=DIR   modifiable architecture-independent data [PREFIX/com]
+-  --localstatedir=DIR    modifiable single-machine data [PREFIX/var]
+-  --libdir=DIR           object code libraries [EPREFIX/lib]
+-  --includedir=DIR       C header files [PREFIX/include]
+-  --oldincludedir=DIR    C header files for non-gcc [/usr/include]
+-  --datarootdir=DIR      read-only arch.-independent data root [PREFIX/share]
+-  --datadir=DIR          read-only architecture-independent data [DATAROOTDIR]
+-  --infodir=DIR          info documentation [DATAROOTDIR/info]
+-  --localedir=DIR        locale-dependent data [DATAROOTDIR/locale]
+-  --mandir=DIR           man documentation [DATAROOTDIR/man]
+-  --docdir=DIR           documentation root [DATAROOTDIR/doc/PACKAGE]
+-  --htmldir=DIR          html documentation [DOCDIR]
+-  --dvidir=DIR           dvi documentation [DOCDIR]
+-  --pdfdir=DIR           pdf documentation [DOCDIR]
+-  --psdir=DIR            ps documentation [DOCDIR]
++  --bindir=DIR            user executables [EPREFIX/bin]
++  --sbindir=DIR           system admin executables [EPREFIX/sbin]
++  --libexecdir=DIR        program executables [EPREFIX/libexec]
++  --sysconfdir=DIR        read-only single-machine data [PREFIX/etc]
++  --sharedstatedir=DIR    modifiable architecture-independent data [PREFIX/com]
++  --localstatedir=DIR     modifiable single-machine data [PREFIX/var]
++  --runstatedir=DIR       modifiable per-process data [LOCALSTATEDIR/run]
++  --libdir=DIR            object code libraries [EPREFIX/lib]
++  --includedir=DIR        C header files [PREFIX/include]
++  --oldincludedir=DIR     C header files for non-gcc [/usr/include]
++  --datarootdir=DIR       read-only arch.-independent data root [PREFIX/share]
++  --datadir=DIR           read-only architecture-independent data [DATAROOTDIR]
++  --infodir=DIR           info documentation [DATAROOTDIR/info]
++  --localedir=DIR         locale-dependent data [DATAROOTDIR/locale]
++  --mandir=DIR            man documentation [DATAROOTDIR/man]
++  --docdir=DIR            documentation root [DATAROOTDIR/doc/PACKAGE]
++  --htmldir=DIR           html documentation [DOCDIR]
++  --dvidir=DIR            dvi documentation [DOCDIR]
++  --pdfdir=DIR            pdf documentation [DOCDIR]
++  --psdir=DIR             ps documentation [DOCDIR]
+ _ACEOF
+ 
+   cat <<\_ACEOF
+@@ -1319,6 +1471,7 @@ if test -n "$ac_init_help"; then
+   cat <<\_ACEOF
+ 
+ Optional Features:
++  --disable-option-checking  ignore unrecognized --enable/--with options
+   --disable-FEATURE       do not include FEATURE (same as --enable-FEATURE=no)
+   --enable-FEATURE[=ARG]  include FEATURE [ARG=yes]
+   --enable-char           build char patch datatypes
+@@ -1460,7 +1613,7 @@ Some influential environment variables:
+   LDFLAGS     linker flags, e.g. -L<lib dir> if you have libraries in a
+               nonstandard directory <lib dir>
+   LIBS        libraries to pass to the linker, e.g. -l<library>
+-  CPPFLAGS    C/C++/Objective C preprocessor flags, e.g. -I<include dir> if
++  CPPFLAGS    (Objective) C/C++ preprocessor flags, e.g. -I<include dir> if
+               you have headers in a nonstandard directory <include dir>
+   CC          C compiler command
+   CFLAGS      C compiler flags
+@@ -1473,6 +1626,7 @@ Some influential environment variables:
+ Use these variables to override the choices made by `configure' or to help
+ it to find libraries and programs with nonstandard names/locations.
+ 
++Report bugs to the package provider.
+ _ACEOF
+ ac_status=$?
+ fi
+@@ -1480,15 +1634,17 @@ fi
+ if test "$ac_init_help" = "recursive"; then
+   # If there are subdirs, report their specific --help.
+   for ac_dir in : $ac_subdirs_all; do test "x$ac_dir" = x: && continue
+-    test -d "$ac_dir" || continue
++    test -d "$ac_dir" ||
++      { cd "$srcdir" && ac_pwd=`pwd` && srcdir=. && test -d "$ac_dir"; } ||
++      continue
+     ac_builddir=.
+ 
+ case "$ac_dir" in
+ .) ac_dir_suffix= ac_top_builddir_sub=. ac_top_build_prefix= ;;
+ *)
+-  ac_dir_suffix=/`echo "$ac_dir" | sed 's,^\.[\\/],,'`
++  ac_dir_suffix=/`printf "%s\n" "$ac_dir" | sed 's|^\.[\\/]||'`
+   # A ".." for each directory in $ac_dir_suffix.
+-  ac_top_builddir_sub=`echo "$ac_dir_suffix" | sed 's,/[^\\/]*,/..,g;s,/,,'`
++  ac_top_builddir_sub=`printf "%s\n" "$ac_dir_suffix" | sed 's|/[^\\/]*|/..|g;s|/||'`
+   case $ac_top_builddir_sub in
+   "") ac_top_builddir_sub=. ac_top_build_prefix= ;;
+   *)  ac_top_build_prefix=$ac_top_builddir_sub/ ;;
+@@ -1516,7 +1672,8 @@ esac
+ ac_abs_srcdir=$ac_abs_top_srcdir$ac_dir_suffix
+ 
+     cd "$ac_dir" || { ac_status=$?; continue; }
+-    # Check for guested configure.
++    # Check for configure.gnu first; this name is used for a wrapper for
++    # Metaconfig's "Configure" on case-insensitive file systems.
+     if test -f "$ac_srcdir/configure.gnu"; then
+       echo &&
+       $SHELL "$ac_srcdir/configure.gnu" --help=recursive
+@@ -1524,33 +1681,479 @@ ac_abs_srcdir=$ac_abs_top_srcdir$ac_dir_suffix
+       echo &&
+       $SHELL "$ac_srcdir/configure" --help=recursive
+     else
+-      echo "$as_me: WARNING: no configuration information is in $ac_dir" >&2
++      printf "%s\n" "$as_me: WARNING: no configuration information is in $ac_dir" >&2
+     fi || ac_status=$?
+     cd "$ac_pwd" || { ac_status=$?; break; }
+   done
+ fi
+ 
+-test -n "$ac_init_help" && exit $ac_status
+-if $ac_init_version; then
+-  cat <<\_ACEOF
+-configure
+-generated by GNU Autoconf 2.61
++test -n "$ac_init_help" && exit $ac_status
++if $ac_init_version; then
++  cat <<\_ACEOF
++configure
++generated by GNU Autoconf 2.71
++
++Copyright (C) 2021 Free Software Foundation, Inc.
++This configure script is free software; the Free Software Foundation
++gives unlimited permission to copy, distribute and modify it.
++_ACEOF
++  exit
++fi
++
++## ------------------------ ##
++## Autoconf initialization. ##
++## ------------------------ ##
++
++# ac_fn_cxx_try_compile LINENO
++# ----------------------------
++# Try to compile conftest.$ac_ext, and return whether this succeeded.
++ac_fn_cxx_try_compile ()
++{
++  as_lineno=${as_lineno-"$1"} as_lineno_stack=as_lineno_stack=$as_lineno_stack
++  rm -f conftest.$ac_objext conftest.beam
++  if { { ac_try="$ac_compile"
++case "(($ac_try" in
++  *\"* | *\`* | *\\*) ac_try_echo=\$ac_try;;
++  *) ac_try_echo=$ac_try;;
++esac
++eval ac_try_echo="\"\$as_me:${as_lineno-$LINENO}: $ac_try_echo\""
++printf "%s\n" "$ac_try_echo"; } >&5
++  (eval "$ac_compile") 2>conftest.err
++  ac_status=$?
++  if test -s conftest.err; then
++    grep -v '^ *+' conftest.err >conftest.er1
++    cat conftest.er1 >&5
++    mv -f conftest.er1 conftest.err
++  fi
++  printf "%s\n" "$as_me:${as_lineno-$LINENO}: \$? = $ac_status" >&5
++  test $ac_status = 0; } && {
++	 test -z "$ac_cxx_werror_flag" ||
++	 test ! -s conftest.err
++       } && test -s conftest.$ac_objext
++then :
++  ac_retval=0
++else $as_nop
++  printf "%s\n" "$as_me: failed program was:" >&5
++sed 's/^/| /' conftest.$ac_ext >&5
++
++	ac_retval=1
++fi
++  eval $as_lineno_stack; ${as_lineno_stack:+:} unset as_lineno
++  as_fn_set_status $ac_retval
++
++} # ac_fn_cxx_try_compile
++
++# ac_fn_c_try_compile LINENO
++# --------------------------
++# Try to compile conftest.$ac_ext, and return whether this succeeded.
++ac_fn_c_try_compile ()
++{
++  as_lineno=${as_lineno-"$1"} as_lineno_stack=as_lineno_stack=$as_lineno_stack
++  rm -f conftest.$ac_objext conftest.beam
++  if { { ac_try="$ac_compile"
++case "(($ac_try" in
++  *\"* | *\`* | *\\*) ac_try_echo=\$ac_try;;
++  *) ac_try_echo=$ac_try;;
++esac
++eval ac_try_echo="\"\$as_me:${as_lineno-$LINENO}: $ac_try_echo\""
++printf "%s\n" "$ac_try_echo"; } >&5
++  (eval "$ac_compile") 2>conftest.err
++  ac_status=$?
++  if test -s conftest.err; then
++    grep -v '^ *+' conftest.err >conftest.er1
++    cat conftest.er1 >&5
++    mv -f conftest.er1 conftest.err
++  fi
++  printf "%s\n" "$as_me:${as_lineno-$LINENO}: \$? = $ac_status" >&5
++  test $ac_status = 0; } && {
++	 test -z "$ac_c_werror_flag" ||
++	 test ! -s conftest.err
++       } && test -s conftest.$ac_objext
++then :
++  ac_retval=0
++else $as_nop
++  printf "%s\n" "$as_me: failed program was:" >&5
++sed 's/^/| /' conftest.$ac_ext >&5
++
++	ac_retval=1
++fi
++  eval $as_lineno_stack; ${as_lineno_stack:+:} unset as_lineno
++  as_fn_set_status $ac_retval
++
++} # ac_fn_c_try_compile
++
++# ac_fn_c_try_link LINENO
++# -----------------------
++# Try to link conftest.$ac_ext, and return whether this succeeded.
++ac_fn_c_try_link ()
++{
++  as_lineno=${as_lineno-"$1"} as_lineno_stack=as_lineno_stack=$as_lineno_stack
++  rm -f conftest.$ac_objext conftest.beam conftest$ac_exeext
++  if { { ac_try="$ac_link"
++case "(($ac_try" in
++  *\"* | *\`* | *\\*) ac_try_echo=\$ac_try;;
++  *) ac_try_echo=$ac_try;;
++esac
++eval ac_try_echo="\"\$as_me:${as_lineno-$LINENO}: $ac_try_echo\""
++printf "%s\n" "$ac_try_echo"; } >&5
++  (eval "$ac_link") 2>conftest.err
++  ac_status=$?
++  if test -s conftest.err; then
++    grep -v '^ *+' conftest.err >conftest.er1
++    cat conftest.er1 >&5
++    mv -f conftest.er1 conftest.err
++  fi
++  printf "%s\n" "$as_me:${as_lineno-$LINENO}: \$? = $ac_status" >&5
++  test $ac_status = 0; } && {
++	 test -z "$ac_c_werror_flag" ||
++	 test ! -s conftest.err
++       } && test -s conftest$ac_exeext && {
++	 test "$cross_compiling" = yes ||
++	 test -x conftest$ac_exeext
++       }
++then :
++  ac_retval=0
++else $as_nop
++  printf "%s\n" "$as_me: failed program was:" >&5
++sed 's/^/| /' conftest.$ac_ext >&5
++
++	ac_retval=1
++fi
++  # Delete the IPA/IPO (Inter Procedural Analysis/Optimization) information
++  # created by the PGI compiler (conftest_ipa8_conftest.oo), as it would
++  # interfere with the next link command; also delete a directory that is
++  # left behind by Apple's compiler.  We do this before executing the actions.
++  rm -rf conftest.dSYM conftest_ipa8_conftest.oo
++  eval $as_lineno_stack; ${as_lineno_stack:+:} unset as_lineno
++  as_fn_set_status $ac_retval
++
++} # ac_fn_c_try_link
++
++# ac_fn_c_try_cpp LINENO
++# ----------------------
++# Try to preprocess conftest.$ac_ext, and return whether this succeeded.
++ac_fn_c_try_cpp ()
++{
++  as_lineno=${as_lineno-"$1"} as_lineno_stack=as_lineno_stack=$as_lineno_stack
++  if { { ac_try="$ac_cpp conftest.$ac_ext"
++case "(($ac_try" in
++  *\"* | *\`* | *\\*) ac_try_echo=\$ac_try;;
++  *) ac_try_echo=$ac_try;;
++esac
++eval ac_try_echo="\"\$as_me:${as_lineno-$LINENO}: $ac_try_echo\""
++printf "%s\n" "$ac_try_echo"; } >&5
++  (eval "$ac_cpp conftest.$ac_ext") 2>conftest.err
++  ac_status=$?
++  if test -s conftest.err; then
++    grep -v '^ *+' conftest.err >conftest.er1
++    cat conftest.er1 >&5
++    mv -f conftest.er1 conftest.err
++  fi
++  printf "%s\n" "$as_me:${as_lineno-$LINENO}: \$? = $ac_status" >&5
++  test $ac_status = 0; } > conftest.i && {
++	 test -z "$ac_c_preproc_warn_flag$ac_c_werror_flag" ||
++	 test ! -s conftest.err
++       }
++then :
++  ac_retval=0
++else $as_nop
++  printf "%s\n" "$as_me: failed program was:" >&5
++sed 's/^/| /' conftest.$ac_ext >&5
++
++    ac_retval=1
++fi
++  eval $as_lineno_stack; ${as_lineno_stack:+:} unset as_lineno
++  as_fn_set_status $ac_retval
++
++} # ac_fn_c_try_cpp
++
++# ac_fn_cxx_try_cpp LINENO
++# ------------------------
++# Try to preprocess conftest.$ac_ext, and return whether this succeeded.
++ac_fn_cxx_try_cpp ()
++{
++  as_lineno=${as_lineno-"$1"} as_lineno_stack=as_lineno_stack=$as_lineno_stack
++  if { { ac_try="$ac_cpp conftest.$ac_ext"
++case "(($ac_try" in
++  *\"* | *\`* | *\\*) ac_try_echo=\$ac_try;;
++  *) ac_try_echo=$ac_try;;
++esac
++eval ac_try_echo="\"\$as_me:${as_lineno-$LINENO}: $ac_try_echo\""
++printf "%s\n" "$ac_try_echo"; } >&5
++  (eval "$ac_cpp conftest.$ac_ext") 2>conftest.err
++  ac_status=$?
++  if test -s conftest.err; then
++    grep -v '^ *+' conftest.err >conftest.er1
++    cat conftest.er1 >&5
++    mv -f conftest.er1 conftest.err
++  fi
++  printf "%s\n" "$as_me:${as_lineno-$LINENO}: \$? = $ac_status" >&5
++  test $ac_status = 0; } > conftest.i && {
++	 test -z "$ac_cxx_preproc_warn_flag$ac_cxx_werror_flag" ||
++	 test ! -s conftest.err
++       }
++then :
++  ac_retval=0
++else $as_nop
++  printf "%s\n" "$as_me: failed program was:" >&5
++sed 's/^/| /' conftest.$ac_ext >&5
++
++    ac_retval=1
++fi
++  eval $as_lineno_stack; ${as_lineno_stack:+:} unset as_lineno
++  as_fn_set_status $ac_retval
++
++} # ac_fn_cxx_try_cpp
++
++# ac_fn_cxx_try_link LINENO
++# -------------------------
++# Try to link conftest.$ac_ext, and return whether this succeeded.
++ac_fn_cxx_try_link ()
++{
++  as_lineno=${as_lineno-"$1"} as_lineno_stack=as_lineno_stack=$as_lineno_stack
++  rm -f conftest.$ac_objext conftest.beam conftest$ac_exeext
++  if { { ac_try="$ac_link"
++case "(($ac_try" in
++  *\"* | *\`* | *\\*) ac_try_echo=\$ac_try;;
++  *) ac_try_echo=$ac_try;;
++esac
++eval ac_try_echo="\"\$as_me:${as_lineno-$LINENO}: $ac_try_echo\""
++printf "%s\n" "$ac_try_echo"; } >&5
++  (eval "$ac_link") 2>conftest.err
++  ac_status=$?
++  if test -s conftest.err; then
++    grep -v '^ *+' conftest.err >conftest.er1
++    cat conftest.er1 >&5
++    mv -f conftest.er1 conftest.err
++  fi
++  printf "%s\n" "$as_me:${as_lineno-$LINENO}: \$? = $ac_status" >&5
++  test $ac_status = 0; } && {
++	 test -z "$ac_cxx_werror_flag" ||
++	 test ! -s conftest.err
++       } && test -s conftest$ac_exeext && {
++	 test "$cross_compiling" = yes ||
++	 test -x conftest$ac_exeext
++       }
++then :
++  ac_retval=0
++else $as_nop
++  printf "%s\n" "$as_me: failed program was:" >&5
++sed 's/^/| /' conftest.$ac_ext >&5
++
++	ac_retval=1
++fi
++  # Delete the IPA/IPO (Inter Procedural Analysis/Optimization) information
++  # created by the PGI compiler (conftest_ipa8_conftest.oo), as it would
++  # interfere with the next link command; also delete a directory that is
++  # left behind by Apple's compiler.  We do this before executing the actions.
++  rm -rf conftest.dSYM conftest_ipa8_conftest.oo
++  eval $as_lineno_stack; ${as_lineno_stack:+:} unset as_lineno
++  as_fn_set_status $ac_retval
++
++} # ac_fn_cxx_try_link
++
++# ac_fn_f77_try_compile LINENO
++# ----------------------------
++# Try to compile conftest.$ac_ext, and return whether this succeeded.
++ac_fn_f77_try_compile ()
++{
++  as_lineno=${as_lineno-"$1"} as_lineno_stack=as_lineno_stack=$as_lineno_stack
++  rm -f conftest.$ac_objext conftest.beam
++  if { { ac_try="$ac_compile"
++case "(($ac_try" in
++  *\"* | *\`* | *\\*) ac_try_echo=\$ac_try;;
++  *) ac_try_echo=$ac_try;;
++esac
++eval ac_try_echo="\"\$as_me:${as_lineno-$LINENO}: $ac_try_echo\""
++printf "%s\n" "$ac_try_echo"; } >&5
++  (eval "$ac_compile") 2>conftest.err
++  ac_status=$?
++  if test -s conftest.err; then
++    grep -v '^ *+' conftest.err >conftest.er1
++    cat conftest.er1 >&5
++    mv -f conftest.er1 conftest.err
++  fi
++  printf "%s\n" "$as_me:${as_lineno-$LINENO}: \$? = $ac_status" >&5
++  test $ac_status = 0; } && {
++	 test -z "$ac_f77_werror_flag" ||
++	 test ! -s conftest.err
++       } && test -s conftest.$ac_objext
++then :
++  ac_retval=0
++else $as_nop
++  printf "%s\n" "$as_me: failed program was:" >&5
++sed 's/^/| /' conftest.$ac_ext >&5
++
++	ac_retval=1
++fi
++  eval $as_lineno_stack; ${as_lineno_stack:+:} unset as_lineno
++  as_fn_set_status $ac_retval
++
++} # ac_fn_f77_try_compile
++
++# ac_fn_c_check_func LINENO FUNC VAR
++# ----------------------------------
++# Tests whether FUNC exists, setting the cache variable VAR accordingly
++ac_fn_c_check_func ()
++{
++  as_lineno=${as_lineno-"$1"} as_lineno_stack=as_lineno_stack=$as_lineno_stack
++  { printf "%s\n" "$as_me:${as_lineno-$LINENO}: checking for $2" >&5
++printf %s "checking for $2... " >&6; }
++if eval test \${$3+y}
++then :
++  printf %s "(cached) " >&6
++else $as_nop
++  cat confdefs.h - <<_ACEOF >conftest.$ac_ext
++/* end confdefs.h.  */
++/* Define $2 to an innocuous variant, in case <limits.h> declares $2.
++   For example, HP-UX 11i <limits.h> declares gettimeofday.  */
++#define $2 innocuous_$2
++
++/* System header to define __stub macros and hopefully few prototypes,
++   which can conflict with char $2 (); below.  */
++
++#include <limits.h>
++#undef $2
++
++/* Override any GCC internal prototype to avoid an error.
++   Use char because int might match the return type of a GCC
++   builtin and then its argument prototype would still apply.  */
++#ifdef __cplusplus
++extern "C"
++#endif
++char $2 ();
++/* The GNU C library defines this for functions which it implements
++    to always fail with ENOSYS.  Some functions are actually named
++    something starting with __ and the normal name is an alias.  */
++#if defined __stub_$2 || defined __stub___$2
++choke me
++#endif
++
++#ifdef F77_DUMMY_MAIN
++
++#  ifdef __cplusplus
++     extern "C"
++#  endif
++   int F77_DUMMY_MAIN() { return 1; }
++
++#endif
++int
++main (void)
++{
++return $2 ();
++  ;
++  return 0;
++}
++_ACEOF
++if ac_fn_c_try_link "$LINENO"
++then :
++  eval "$3=yes"
++else $as_nop
++  eval "$3=no"
++fi
++rm -f core conftest.err conftest.$ac_objext conftest.beam \
++    conftest$ac_exeext conftest.$ac_ext
++fi
++eval ac_res=\$$3
++	       { printf "%s\n" "$as_me:${as_lineno-$LINENO}: result: $ac_res" >&5
++printf "%s\n" "$ac_res" >&6; }
++  eval $as_lineno_stack; ${as_lineno_stack:+:} unset as_lineno
++
++} # ac_fn_c_check_func
++
++# ac_fn_cxx_check_header_compile LINENO HEADER VAR INCLUDES
++# ---------------------------------------------------------
++# Tests whether HEADER exists and can be compiled using the include files in
++# INCLUDES, setting the cache variable VAR accordingly.
++ac_fn_cxx_check_header_compile ()
++{
++  as_lineno=${as_lineno-"$1"} as_lineno_stack=as_lineno_stack=$as_lineno_stack
++  { printf "%s\n" "$as_me:${as_lineno-$LINENO}: checking for $2" >&5
++printf %s "checking for $2... " >&6; }
++if eval test \${$3+y}
++then :
++  printf %s "(cached) " >&6
++else $as_nop
++  cat confdefs.h - <<_ACEOF >conftest.$ac_ext
++/* end confdefs.h.  */
++$4
++#include <$2>
++_ACEOF
++if ac_fn_cxx_try_compile "$LINENO"
++then :
++  eval "$3=yes"
++else $as_nop
++  eval "$3=no"
++fi
++rm -f core conftest.err conftest.$ac_objext conftest.beam conftest.$ac_ext
++fi
++eval ac_res=\$$3
++	       { printf "%s\n" "$as_me:${as_lineno-$LINENO}: result: $ac_res" >&5
++printf "%s\n" "$ac_res" >&6; }
++  eval $as_lineno_stack; ${as_lineno_stack:+:} unset as_lineno
++
++} # ac_fn_cxx_check_header_compile
+ 
+-Copyright (C) 1992, 1993, 1994, 1995, 1996, 1998, 1999, 2000, 2001,
+-2002, 2003, 2004, 2005, 2006 Free Software Foundation, Inc.
+-This configure script is free software; the Free Software Foundation
+-gives unlimited permission to copy, distribute and modify it.
++# ac_fn_c_check_header_compile LINENO HEADER VAR INCLUDES
++# -------------------------------------------------------
++# Tests whether HEADER exists and can be compiled using the include files in
++# INCLUDES, setting the cache variable VAR accordingly.
++ac_fn_c_check_header_compile ()
++{
++  as_lineno=${as_lineno-"$1"} as_lineno_stack=as_lineno_stack=$as_lineno_stack
++  { printf "%s\n" "$as_me:${as_lineno-$LINENO}: checking for $2" >&5
++printf %s "checking for $2... " >&6; }
++if eval test \${$3+y}
++then :
++  printf %s "(cached) " >&6
++else $as_nop
++  cat confdefs.h - <<_ACEOF >conftest.$ac_ext
++/* end confdefs.h.  */
++$4
++#include <$2>
+ _ACEOF
+-  exit
++if ac_fn_c_try_compile "$LINENO"
++then :
++  eval "$3=yes"
++else $as_nop
++  eval "$3=no"
+ fi
++rm -f core conftest.err conftest.$ac_objext conftest.beam conftest.$ac_ext
++fi
++eval ac_res=\$$3
++	       { printf "%s\n" "$as_me:${as_lineno-$LINENO}: result: $ac_res" >&5
++printf "%s\n" "$ac_res" >&6; }
++  eval $as_lineno_stack; ${as_lineno_stack:+:} unset as_lineno
++
++} # ac_fn_c_check_header_compile
++ac_configure_args_raw=
++for ac_arg
++do
++  case $ac_arg in
++  *\'*)
++    ac_arg=`printf "%s\n" "$ac_arg" | sed "s/'/'\\\\\\\\''/g"` ;;
++  esac
++  as_fn_append ac_configure_args_raw " '$ac_arg'"
++done
++
++case $ac_configure_args_raw in
++  *$as_nl*)
++    ac_safe_unquote= ;;
++  *)
++    ac_unsafe_z='|&;<>()$`\\"*?[ ''	' # This string ends in space, tab.
++    ac_unsafe_a="$ac_unsafe_z#~"
++    ac_safe_unquote="s/ '\\([^$ac_unsafe_a][^$ac_unsafe_z]*\\)'/ \\1/g"
++    ac_configure_args_raw=`      printf "%s\n" "$ac_configure_args_raw" | sed "$ac_safe_unquote"`;;
++esac
++
+ cat >config.log <<_ACEOF
+ This file contains any messages produced by compilers while
+ running configure, to aid debugging if configure makes a mistake.
+ 
+ It was created by $as_me, which was
+-generated by GNU Autoconf 2.61.  Invocation command line was
++generated by GNU Autoconf 2.71.  Invocation command line was
+ 
+-  $ $0 $@
++  $ $0$ac_configure_args_raw
+ 
+ _ACEOF
+ exec 5>>config.log
+@@ -1583,9 +2186,13 @@ as_save_IFS=$IFS; IFS=$PATH_SEPARATOR
+ for as_dir in $PATH
+ do
+   IFS=$as_save_IFS
+-  test -z "$as_dir" && as_dir=.
+-  echo "PATH: $as_dir"
+-done
++  case $as_dir in #(((
++    '') as_dir=./ ;;
++    */) ;;
++    *) as_dir=$as_dir/ ;;
++  esac
++    printf "%s\n" "PATH: $as_dir"
++  done
+ IFS=$as_save_IFS
+ 
+ } >&5
+@@ -1619,12 +2226,12 @@ do
+     | -silent | --silent | --silen | --sile | --sil)
+       continue ;;
+     *\'*)
+-      ac_arg=`echo "$ac_arg" | sed "s/'/'\\\\\\\\''/g"` ;;
++      ac_arg=`printf "%s\n" "$ac_arg" | sed "s/'/'\\\\\\\\''/g"` ;;
+     esac
+     case $ac_pass in
+-    1) ac_configure_args0="$ac_configure_args0 '$ac_arg'" ;;
++    1) as_fn_append ac_configure_args0 " '$ac_arg'" ;;
+     2)
+-      ac_configure_args1="$ac_configure_args1 '$ac_arg'"
++      as_fn_append ac_configure_args1 " '$ac_arg'"
+       if test $ac_must_keep_next = true; then
+ 	ac_must_keep_next=false # Got value, back to normal.
+       else
+@@ -1640,13 +2247,13 @@ do
+ 	  -* ) ac_must_keep_next=true ;;
+ 	esac
+       fi
+-      ac_configure_args="$ac_configure_args '$ac_arg'"
++      as_fn_append ac_configure_args " '$ac_arg'"
+       ;;
+     esac
+   done
+ done
+-$as_unset ac_configure_args0 || test "${ac_configure_args0+set}" != set || { ac_configure_args0=; export ac_configure_args0; }
+-$as_unset ac_configure_args1 || test "${ac_configure_args1+set}" != set || { ac_configure_args1=; export ac_configure_args1; }
++{ ac_configure_args0=; unset ac_configure_args0;}
++{ ac_configure_args1=; unset ac_configure_args1;}
+ 
+ # When interrupted or exit'd, cleanup temporary files, and complete
+ # config.log.  We remove comments because anyway the quotes in there
+@@ -1654,170 +2261,795 @@ $as_unset ac_configure_args1 || test "${ac_configure_args1+set}" != set || { ac_
+ # WARNING: Use '\'' to represent an apostrophe within the trap.
+ # WARNING: Do not start the trap code with a newline, due to a FreeBSD 4.0 bug.
+ trap 'exit_status=$?
++  # Sanitize IFS.
++  IFS=" ""	$as_nl"
+   # Save into config.log some information that might help in debugging.
+   {
+     echo
+ 
+-    cat <<\_ASBOX
+-## ---------------- ##
+-## Cache variables. ##
+-## ---------------- ##
+-_ASBOX
+-    echo
+-    # The following way of writing the cache mishandles newlines in values,
+-(
+-  for ac_var in `(set) 2>&1 | sed -n '\''s/^\([a-zA-Z_][a-zA-Z0-9_]*\)=.*/\1/p'\''`; do
+-    eval ac_val=\$$ac_var
+-    case $ac_val in #(
+-    *${as_nl}*)
+-      case $ac_var in #(
+-      *_cv_*) { echo "$as_me:$LINENO: WARNING: Cache variable $ac_var contains a newline." >&5
+-echo "$as_me: WARNING: Cache variable $ac_var contains a newline." >&2;} ;;
+-      esac
+-      case $ac_var in #(
+-      _ | IFS | as_nl) ;; #(
+-      *) $as_unset $ac_var ;;
+-      esac ;;
+-    esac
+-  done
+-  (set) 2>&1 |
+-    case $as_nl`(ac_space='\'' '\''; set) 2>&1` in #(
+-    *${as_nl}ac_space=\ *)
+-      sed -n \
+-	"s/'\''/'\''\\\\'\'''\''/g;
+-	  s/^\\([_$as_cr_alnum]*_cv_[_$as_cr_alnum]*\\)=\\(.*\\)/\\1='\''\\2'\''/p"
+-      ;; #(
+-    *)
+-      sed -n "/^[_$as_cr_alnum]*_cv_[_$as_cr_alnum]*=/p"
+-      ;;
+-    esac |
+-    sort
+-)
+-    echo
++    printf "%s\n" "## ---------------- ##
++## Cache variables. ##
++## ---------------- ##"
++    echo
++    # The following way of writing the cache mishandles newlines in values,
++(
++  for ac_var in `(set) 2>&1 | sed -n '\''s/^\([a-zA-Z_][a-zA-Z0-9_]*\)=.*/\1/p'\''`; do
++    eval ac_val=\$$ac_var
++    case $ac_val in #(
++    *${as_nl}*)
++      case $ac_var in #(
++      *_cv_*) { printf "%s\n" "$as_me:${as_lineno-$LINENO}: WARNING: cache variable $ac_var contains a newline" >&5
++printf "%s\n" "$as_me: WARNING: cache variable $ac_var contains a newline" >&2;} ;;
++      esac
++      case $ac_var in #(
++      _ | IFS | as_nl) ;; #(
++      BASH_ARGV | BASH_SOURCE) eval $ac_var= ;; #(
++      *) { eval $ac_var=; unset $ac_var;} ;;
++      esac ;;
++    esac
++  done
++  (set) 2>&1 |
++    case $as_nl`(ac_space='\'' '\''; set) 2>&1` in #(
++    *${as_nl}ac_space=\ *)
++      sed -n \
++	"s/'\''/'\''\\\\'\'''\''/g;
++	  s/^\\([_$as_cr_alnum]*_cv_[_$as_cr_alnum]*\\)=\\(.*\\)/\\1='\''\\2'\''/p"
++      ;; #(
++    *)
++      sed -n "/^[_$as_cr_alnum]*_cv_[_$as_cr_alnum]*=/p"
++      ;;
++    esac |
++    sort
++)
++    echo
++
++    printf "%s\n" "## ----------------- ##
++## Output variables. ##
++## ----------------- ##"
++    echo
++    for ac_var in $ac_subst_vars
++    do
++      eval ac_val=\$$ac_var
++      case $ac_val in
++      *\'\''*) ac_val=`printf "%s\n" "$ac_val" | sed "s/'\''/'\''\\\\\\\\'\'''\''/g"`;;
++      esac
++      printf "%s\n" "$ac_var='\''$ac_val'\''"
++    done | sort
++    echo
++
++    if test -n "$ac_subst_files"; then
++      printf "%s\n" "## ------------------- ##
++## File substitutions. ##
++## ------------------- ##"
++      echo
++      for ac_var in $ac_subst_files
++      do
++	eval ac_val=\$$ac_var
++	case $ac_val in
++	*\'\''*) ac_val=`printf "%s\n" "$ac_val" | sed "s/'\''/'\''\\\\\\\\'\'''\''/g"`;;
++	esac
++	printf "%s\n" "$ac_var='\''$ac_val'\''"
++      done | sort
++      echo
++    fi
++
++    if test -s confdefs.h; then
++      printf "%s\n" "## ----------- ##
++## confdefs.h. ##
++## ----------- ##"
++      echo
++      cat confdefs.h
++      echo
++    fi
++    test "$ac_signal" != 0 &&
++      printf "%s\n" "$as_me: caught signal $ac_signal"
++    printf "%s\n" "$as_me: exit $exit_status"
++  } >&5
++  rm -f core *.core core.conftest.* &&
++    rm -f -r conftest* confdefs* conf$$* $ac_clean_files &&
++    exit $exit_status
++' 0
++for ac_signal in 1 2 13 15; do
++  trap 'ac_signal='$ac_signal'; as_fn_exit 1' $ac_signal
++done
++ac_signal=0
++
++# confdefs.h avoids OS command line length limits that DEFS can exceed.
++rm -f -r conftest* confdefs.h
++
++printf "%s\n" "/* confdefs.h */" > confdefs.h
++
++# Predefined preprocessor variables.
++
++printf "%s\n" "#define PACKAGE_NAME \"$PACKAGE_NAME\"" >>confdefs.h
++
++printf "%s\n" "#define PACKAGE_TARNAME \"$PACKAGE_TARNAME\"" >>confdefs.h
++
++printf "%s\n" "#define PACKAGE_VERSION \"$PACKAGE_VERSION\"" >>confdefs.h
++
++printf "%s\n" "#define PACKAGE_STRING \"$PACKAGE_STRING\"" >>confdefs.h
++
++printf "%s\n" "#define PACKAGE_BUGREPORT \"$PACKAGE_BUGREPORT\"" >>confdefs.h
++
++printf "%s\n" "#define PACKAGE_URL \"$PACKAGE_URL\"" >>confdefs.h
++
++
++# Let the site file select an alternate cache file if it wants to.
++# Prefer an explicitly selected file to automatically selected ones.
++if test -n "$CONFIG_SITE"; then
++  ac_site_files="$CONFIG_SITE"
++elif test "x$prefix" != xNONE; then
++  ac_site_files="$prefix/share/config.site $prefix/etc/config.site"
++else
++  ac_site_files="$ac_default_prefix/share/config.site $ac_default_prefix/etc/config.site"
++fi
++
++for ac_site_file in $ac_site_files
++do
++  case $ac_site_file in #(
++  */*) :
++     ;; #(
++  *) :
++    ac_site_file=./$ac_site_file ;;
++esac
++  if test -f "$ac_site_file" && test -r "$ac_site_file"; then
++    { printf "%s\n" "$as_me:${as_lineno-$LINENO}: loading site script $ac_site_file" >&5
++printf "%s\n" "$as_me: loading site script $ac_site_file" >&6;}
++    sed 's/^/| /' "$ac_site_file" >&5
++    . "$ac_site_file" \
++      || { { printf "%s\n" "$as_me:${as_lineno-$LINENO}: error: in \`$ac_pwd':" >&5
++printf "%s\n" "$as_me: error: in \`$ac_pwd':" >&2;}
++as_fn_error $? "failed to load site script $ac_site_file
++See \`config.log' for more details" "$LINENO" 5; }
++  fi
++done
++
++if test -r "$cache_file"; then
++  # Some versions of bash will fail to source /dev/null (special files
++  # actually), so we avoid doing that.  DJGPP emulates it as a regular file.
++  if test /dev/null != "$cache_file" && test -f "$cache_file"; then
++    { printf "%s\n" "$as_me:${as_lineno-$LINENO}: loading cache $cache_file" >&5
++printf "%s\n" "$as_me: loading cache $cache_file" >&6;}
++    case $cache_file in
++      [\\/]* | ?:[\\/]* ) . "$cache_file";;
++      *)                      . "./$cache_file";;
++    esac
++  fi
++else
++  { printf "%s\n" "$as_me:${as_lineno-$LINENO}: creating cache $cache_file" >&5
++printf "%s\n" "$as_me: creating cache $cache_file" >&6;}
++  >$cache_file
++fi
++
++# Test code for whether the C++ compiler supports C++98 (global declarations)
++ac_cxx_conftest_cxx98_globals='
++// Does the compiler advertise C++98 conformance?
++#if !defined __cplusplus || __cplusplus < 199711L
++# error "Compiler does not advertise C++98 conformance"
++#endif
++
++// These inclusions are to reject old compilers that
++// lack the unsuffixed header files.
++#include <cstdlib>
++#include <exception>
++
++// <cassert> and <cstring> are *not* freestanding headers in C++98.
++extern void assert (int);
++namespace std {
++  extern int strcmp (const char *, const char *);
++}
++
++// Namespaces, exceptions, and templates were all added after "C++ 2.0".
++using std::exception;
++using std::strcmp;
++
++namespace {
++
++void test_exception_syntax()
++{
++  try {
++    throw "test";
++  } catch (const char *s) {
++    // Extra parentheses suppress a warning when building autoconf itself,
++    // due to lint rules shared with more typical C programs.
++    assert (!(strcmp) (s, "test"));
++  }
++}
++
++template <typename T> struct test_template
++{
++  T const val;
++  explicit test_template(T t) : val(t) {}
++  template <typename U> T add(U u) { return static_cast<T>(u) + val; }
++};
++
++} // anonymous namespace
++'
++
++# Test code for whether the C++ compiler supports C++98 (body of main)
++ac_cxx_conftest_cxx98_main='
++  assert (argc);
++  assert (! argv[0]);
++{
++  test_exception_syntax ();
++  test_template<double> tt (2.0);
++  assert (tt.add (4) == 6.0);
++  assert (true && !false);
++}
++'
++
++# Test code for whether the C++ compiler supports C++11 (global declarations)
++ac_cxx_conftest_cxx11_globals='
++// Does the compiler advertise C++ 2011 conformance?
++#if !defined __cplusplus || __cplusplus < 201103L
++# error "Compiler does not advertise C++11 conformance"
++#endif
++
++namespace cxx11test
++{
++  constexpr int get_val() { return 20; }
++
++  struct testinit
++  {
++    int i;
++    double d;
++  };
++
++  class delegate
++  {
++  public:
++    delegate(int n) : n(n) {}
++    delegate(): delegate(2354) {}
++
++    virtual int getval() { return this->n; };
++  protected:
++    int n;
++  };
++
++  class overridden : public delegate
++  {
++  public:
++    overridden(int n): delegate(n) {}
++    virtual int getval() override final { return this->n * 2; }
++  };
++
++  class nocopy
++  {
++  public:
++    nocopy(int i): i(i) {}
++    nocopy() = default;
++    nocopy(const nocopy&) = delete;
++    nocopy & operator=(const nocopy&) = delete;
++  private:
++    int i;
++  };
++
++  // for testing lambda expressions
++  template <typename Ret, typename Fn> Ret eval(Fn f, Ret v)
++  {
++    return f(v);
++  }
++
++  // for testing variadic templates and trailing return types
++  template <typename V> auto sum(V first) -> V
++  {
++    return first;
++  }
++  template <typename V, typename... Args> auto sum(V first, Args... rest) -> V
++  {
++    return first + sum(rest...);
++  }
++}
++'
++
++# Test code for whether the C++ compiler supports C++11 (body of main)
++ac_cxx_conftest_cxx11_main='
++{
++  // Test auto and decltype
++  auto a1 = 6538;
++  auto a2 = 48573953.4;
++  auto a3 = "String literal";
++
++  int total = 0;
++  for (auto i = a3; *i; ++i) { total += *i; }
++
++  decltype(a2) a4 = 34895.034;
++}
++{
++  // Test constexpr
++  short sa[cxx11test::get_val()] = { 0 };
++}
++{
++  // Test initializer lists
++  cxx11test::testinit il = { 4323, 435234.23544 };
++}
++{
++  // Test range-based for
++  int array[] = {9, 7, 13, 15, 4, 18, 12, 10, 5, 3,
++                 14, 19, 17, 8, 6, 20, 16, 2, 11, 1};
++  for (auto &x : array) { x += 23; }
++}
++{
++  // Test lambda expressions
++  using cxx11test::eval;
++  assert (eval ([](int x) { return x*2; }, 21) == 42);
++  double d = 2.0;
++  assert (eval ([&](double x) { return d += x; }, 3.0) == 5.0);
++  assert (d == 5.0);
++  assert (eval ([=](double x) mutable { return d += x; }, 4.0) == 9.0);
++  assert (d == 5.0);
++}
++{
++  // Test use of variadic templates
++  using cxx11test::sum;
++  auto a = sum(1);
++  auto b = sum(1, 2);
++  auto c = sum(1.0, 2.0, 3.0);
++}
++{
++  // Test constructor delegation
++  cxx11test::delegate d1;
++  cxx11test::delegate d2();
++  cxx11test::delegate d3(45);
++}
++{
++  // Test override and final
++  cxx11test::overridden o1(55464);
++}
++{
++  // Test nullptr
++  char *c = nullptr;
++}
++{
++  // Test template brackets
++  test_template<::test_template<int>> v(test_template<int>(12));
++}
++{
++  // Unicode literals
++  char const *utf8 = u8"UTF-8 string \u2500";
++  char16_t const *utf16 = u"UTF-8 string \u2500";
++  char32_t const *utf32 = U"UTF-32 string \u2500";
++}
++'
++
++# Test code for whether the C compiler supports C++11 (complete).
++ac_cxx_conftest_cxx11_program="${ac_cxx_conftest_cxx98_globals}
++${ac_cxx_conftest_cxx11_globals}
++
++int
++main (int argc, char **argv)
++{
++  int ok = 0;
++  ${ac_cxx_conftest_cxx98_main}
++  ${ac_cxx_conftest_cxx11_main}
++  return ok;
++}
++"
++
++# Test code for whether the C compiler supports C++98 (complete).
++ac_cxx_conftest_cxx98_program="${ac_cxx_conftest_cxx98_globals}
++int
++main (int argc, char **argv)
++{
++  int ok = 0;
++  ${ac_cxx_conftest_cxx98_main}
++  return ok;
++}
++"
++
++# Test code for whether the C compiler supports C89 (global declarations)
++ac_c_conftest_c89_globals='
++/* Does the compiler advertise C89 conformance?
++   Do not test the value of __STDC__, because some compilers set it to 0
++   while being otherwise adequately conformant. */
++#if !defined __STDC__
++# error "Compiler does not advertise C89 conformance"
++#endif
++
++#include <stddef.h>
++#include <stdarg.h>
++struct stat;
++/* Most of the following tests are stolen from RCS 5.7 src/conf.sh.  */
++struct buf { int x; };
++struct buf * (*rcsopen) (struct buf *, struct stat *, int);
++static char *e (p, i)
++     char **p;
++     int i;
++{
++  return p[i];
++}
++static char *f (char * (*g) (char **, int), char **p, ...)
++{
++  char *s;
++  va_list v;
++  va_start (v,p);
++  s = g (p, va_arg (v,int));
++  va_end (v);
++  return s;
++}
++
++/* OSF 4.0 Compaq cc is some sort of almost-ANSI by default.  It has
++   function prototypes and stuff, but not \xHH hex character constants.
++   These do not provoke an error unfortunately, instead are silently treated
++   as an "x".  The following induces an error, until -std is added to get
++   proper ANSI mode.  Curiously \x00 != x always comes out true, for an
++   array size at least.  It is necessary to write \x00 == 0 to get something
++   that is true only with -std.  */
++int osf4_cc_array ['\''\x00'\'' == 0 ? 1 : -1];
++
++/* IBM C 6 for AIX is almost-ANSI by default, but it replaces macro parameters
++   inside strings and character constants.  */
++#define FOO(x) '\''x'\''
++int xlc6_cc_array[FOO(a) == '\''x'\'' ? 1 : -1];
++
++int test (int i, double x);
++struct s1 {int (*f) (int a);};
++struct s2 {int (*f) (double a);};
++int pairnames (int, char **, int *(*)(struct buf *, struct stat *, int),
++               int, int);'
++
++# Test code for whether the C compiler supports C89 (body of main).
++ac_c_conftest_c89_main='
++ok |= (argc == 0 || f (e, argv, 0) != argv[0] || f (e, argv, 1) != argv[1]);
++'
++
++# Test code for whether the C compiler supports C99 (global declarations)
++ac_c_conftest_c99_globals='
++// Does the compiler advertise C99 conformance?
++#if !defined __STDC_VERSION__ || __STDC_VERSION__ < 199901L
++# error "Compiler does not advertise C99 conformance"
++#endif
++
++#include <stdbool.h>
++extern int puts (const char *);
++extern int printf (const char *, ...);
++extern int dprintf (int, const char *, ...);
++extern void *malloc (size_t);
++
++// Check varargs macros.  These examples are taken from C99 6.10.3.5.
++// dprintf is used instead of fprintf to avoid needing to declare
++// FILE and stderr.
++#define debug(...) dprintf (2, __VA_ARGS__)
++#define showlist(...) puts (#__VA_ARGS__)
++#define report(test,...) ((test) ? puts (#test) : printf (__VA_ARGS__))
++static void
++test_varargs_macros (void)
++{
++  int x = 1234;
++  int y = 5678;
++  debug ("Flag");
++  debug ("X = %d\n", x);
++  showlist (The first, second, and third items.);
++  report (x>y, "x is %d but y is %d", x, y);
++}
++
++// Check long long types.
++#define BIG64 18446744073709551615ull
++#define BIG32 4294967295ul
++#define BIG_OK (BIG64 / BIG32 == 4294967297ull && BIG64 % BIG32 == 0)
++#if !BIG_OK
++  #error "your preprocessor is broken"
++#endif
++#if BIG_OK
++#else
++  #error "your preprocessor is broken"
++#endif
++static long long int bignum = -9223372036854775807LL;
++static unsigned long long int ubignum = BIG64;
++
++struct incomplete_array
++{
++  int datasize;
++  double data[];
++};
++
++struct named_init {
++  int number;
++  const wchar_t *name;
++  double average;
++};
++
++typedef const char *ccp;
++
++static inline int
++test_restrict (ccp restrict text)
++{
++  // See if C++-style comments work.
++  // Iterate through items via the restricted pointer.
++  // Also check for declarations in for loops.
++  for (unsigned int i = 0; *(text+i) != '\''\0'\''; ++i)
++    continue;
++  return 0;
++}
++
++// Check varargs and va_copy.
++static bool
++test_varargs (const char *format, ...)
++{
++  va_list args;
++  va_start (args, format);
++  va_list args_copy;
++  va_copy (args_copy, args);
++
++  const char *str = "";
++  int number = 0;
++  float fnumber = 0;
++
++  while (*format)
++    {
++      switch (*format++)
++	{
++	case '\''s'\'': // string
++	  str = va_arg (args_copy, const char *);
++	  break;
++	case '\''d'\'': // int
++	  number = va_arg (args_copy, int);
++	  break;
++	case '\''f'\'': // float
++	  fnumber = va_arg (args_copy, double);
++	  break;
++	default:
++	  break;
++	}
++    }
++  va_end (args_copy);
++  va_end (args);
++
++  return *str && number && fnumber;
++}
++'
++
++# Test code for whether the C compiler supports C99 (body of main).
++ac_c_conftest_c99_main='
++  // Check bool.
++  _Bool success = false;
++  success |= (argc != 0);
++
++  // Check restrict.
++  if (test_restrict ("String literal") == 0)
++    success = true;
++  char *restrict newvar = "Another string";
++
++  // Check varargs.
++  success &= test_varargs ("s, d'\'' f .", "string", 65, 34.234);
++  test_varargs_macros ();
++
++  // Check flexible array members.
++  struct incomplete_array *ia =
++    malloc (sizeof (struct incomplete_array) + (sizeof (double) * 10));
++  ia->datasize = 10;
++  for (int i = 0; i < ia->datasize; ++i)
++    ia->data[i] = i * 1.234;
++
++  // Check named initializers.
++  struct named_init ni = {
++    .number = 34,
++    .name = L"Test wide string",
++    .average = 543.34343,
++  };
++
++  ni.number = 58;
++
++  int dynamic_array[ni.number];
++  dynamic_array[0] = argv[0][0];
++  dynamic_array[ni.number - 1] = 543;
++
++  // work around unused variable warnings
++  ok |= (!success || bignum == 0LL || ubignum == 0uLL || newvar[0] == '\''x'\''
++	 || dynamic_array[ni.number - 1] != 543);
++'
+ 
+-    cat <<\_ASBOX
+-## ----------------- ##
+-## Output variables. ##
+-## ----------------- ##
+-_ASBOX
+-    echo
+-    for ac_var in $ac_subst_vars
+-    do
+-      eval ac_val=\$$ac_var
+-      case $ac_val in
+-      *\'\''*) ac_val=`echo "$ac_val" | sed "s/'\''/'\''\\\\\\\\'\'''\''/g"`;;
+-      esac
+-      echo "$ac_var='\''$ac_val'\''"
+-    done | sort
+-    echo
++# Test code for whether the C compiler supports C11 (global declarations)
++ac_c_conftest_c11_globals='
++// Does the compiler advertise C11 conformance?
++#if !defined __STDC_VERSION__ || __STDC_VERSION__ < 201112L
++# error "Compiler does not advertise C11 conformance"
++#endif
+ 
+-    if test -n "$ac_subst_files"; then
+-      cat <<\_ASBOX
+-## ------------------- ##
+-## File substitutions. ##
+-## ------------------- ##
+-_ASBOX
+-      echo
+-      for ac_var in $ac_subst_files
+-      do
+-	eval ac_val=\$$ac_var
+-	case $ac_val in
+-	*\'\''*) ac_val=`echo "$ac_val" | sed "s/'\''/'\''\\\\\\\\'\'''\''/g"`;;
+-	esac
+-	echo "$ac_var='\''$ac_val'\''"
+-      done | sort
+-      echo
+-    fi
++// Check _Alignas.
++char _Alignas (double) aligned_as_double;
++char _Alignas (0) no_special_alignment;
++extern char aligned_as_int;
++char _Alignas (0) _Alignas (int) aligned_as_int;
+ 
+-    if test -s confdefs.h; then
+-      cat <<\_ASBOX
+-## ----------- ##
+-## confdefs.h. ##
+-## ----------- ##
+-_ASBOX
+-      echo
+-      cat confdefs.h
+-      echo
+-    fi
+-    test "$ac_signal" != 0 &&
+-      echo "$as_me: caught signal $ac_signal"
+-    echo "$as_me: exit $exit_status"
+-  } >&5
+-  rm -f core *.core core.conftest.* &&
+-    rm -f -r conftest* confdefs* conf$$* $ac_clean_files &&
+-    exit $exit_status
+-' 0
+-for ac_signal in 1 2 13 15; do
+-  trap 'ac_signal='$ac_signal'; { (exit 1); exit 1; }' $ac_signal
+-done
+-ac_signal=0
++// Check _Alignof.
++enum
++{
++  int_alignment = _Alignof (int),
++  int_array_alignment = _Alignof (int[100]),
++  char_alignment = _Alignof (char)
++};
++_Static_assert (0 < -_Alignof (int), "_Alignof is signed");
+ 
+-# confdefs.h avoids OS command line length limits that DEFS can exceed.
+-rm -f -r conftest* confdefs.h
++// Check _Noreturn.
++int _Noreturn does_not_return (void) { for (;;) continue; }
+ 
+-# Predefined preprocessor variables.
++// Check _Static_assert.
++struct test_static_assert
++{
++  int x;
++  _Static_assert (sizeof (int) <= sizeof (long int),
++                  "_Static_assert does not work in struct");
++  long int y;
++};
+ 
+-cat >>confdefs.h <<_ACEOF
+-#define PACKAGE_NAME "$PACKAGE_NAME"
+-_ACEOF
++// Check UTF-8 literals.
++#define u8 syntax error!
++char const utf8_literal[] = u8"happens to be ASCII" "another string";
+ 
++// Check duplicate typedefs.
++typedef long *long_ptr;
++typedef long int *long_ptr;
++typedef long_ptr long_ptr;
+ 
+-cat >>confdefs.h <<_ACEOF
+-#define PACKAGE_TARNAME "$PACKAGE_TARNAME"
+-_ACEOF
++// Anonymous structures and unions -- taken from C11 6.7.2.1 Example 1.
++struct anonymous
++{
++  union {
++    struct { int i; int j; };
++    struct { int k; long int l; } w;
++  };
++  int m;
++} v1;
++'
+ 
++# Test code for whether the C compiler supports C11 (body of main).
++ac_c_conftest_c11_main='
++  _Static_assert ((offsetof (struct anonymous, i)
++		   == offsetof (struct anonymous, w.k)),
++		  "Anonymous union alignment botch");
++  v1.i = 2;
++  v1.w.k = 5;
++  ok |= v1.i != 5;
++'
+ 
+-cat >>confdefs.h <<_ACEOF
+-#define PACKAGE_VERSION "$PACKAGE_VERSION"
+-_ACEOF
++# Test code for whether the C compiler supports C11 (complete).
++ac_c_conftest_c11_program="${ac_c_conftest_c89_globals}
++${ac_c_conftest_c99_globals}
++${ac_c_conftest_c11_globals}
+ 
++int
++main (int argc, char **argv)
++{
++  int ok = 0;
++  ${ac_c_conftest_c89_main}
++  ${ac_c_conftest_c99_main}
++  ${ac_c_conftest_c11_main}
++  return ok;
++}
++"
+ 
+-cat >>confdefs.h <<_ACEOF
+-#define PACKAGE_STRING "$PACKAGE_STRING"
+-_ACEOF
++# Test code for whether the C compiler supports C99 (complete).
++ac_c_conftest_c99_program="${ac_c_conftest_c89_globals}
++${ac_c_conftest_c99_globals}
+ 
++int
++main (int argc, char **argv)
++{
++  int ok = 0;
++  ${ac_c_conftest_c89_main}
++  ${ac_c_conftest_c99_main}
++  return ok;
++}
++"
+ 
+-cat >>confdefs.h <<_ACEOF
+-#define PACKAGE_BUGREPORT "$PACKAGE_BUGREPORT"
+-_ACEOF
++# Test code for whether the C compiler supports C89 (complete).
++ac_c_conftest_c89_program="${ac_c_conftest_c89_globals}
+ 
++int
++main (int argc, char **argv)
++{
++  int ok = 0;
++  ${ac_c_conftest_c89_main}
++  return ok;
++}
++"
+ 
+-# Let the site file select an alternate cache file if it wants to.
+-# Prefer explicitly selected file to automatically selected ones.
+-if test -n "$CONFIG_SITE"; then
+-  set x "$CONFIG_SITE"
+-elif test "x$prefix" != xNONE; then
+-  set x "$prefix/share/config.site" "$prefix/etc/config.site"
+-else
+-  set x "$ac_default_prefix/share/config.site" \
+-	"$ac_default_prefix/etc/config.site"
+-fi
+-shift
+-for ac_site_file
++as_fn_append ac_header_cxx_list " stdio.h stdio_h HAVE_STDIO_H"
++as_fn_append ac_header_cxx_list " stdlib.h stdlib_h HAVE_STDLIB_H"
++as_fn_append ac_header_cxx_list " string.h string_h HAVE_STRING_H"
++as_fn_append ac_header_cxx_list " inttypes.h inttypes_h HAVE_INTTYPES_H"
++as_fn_append ac_header_cxx_list " stdint.h stdint_h HAVE_STDINT_H"
++as_fn_append ac_header_cxx_list " strings.h strings_h HAVE_STRINGS_H"
++as_fn_append ac_header_cxx_list " sys/stat.h sys_stat_h HAVE_SYS_STAT_H"
++as_fn_append ac_header_cxx_list " sys/types.h sys_types_h HAVE_SYS_TYPES_H"
++as_fn_append ac_header_cxx_list " unistd.h unistd_h HAVE_UNISTD_H"
++
++# Auxiliary files required by this configure script.
++ac_aux_files="install-sh config.guess config.sub"
++
++# Locations in which to look for auxiliary files.
++ac_aux_dir_candidates="${srcdir}/config"
++
++# Search for a directory containing all of the required auxiliary files,
++# $ac_aux_files, from the $PATH-style list $ac_aux_dir_candidates.
++# If we don't find one directory that contains all the files we need,
++# we report the set of missing files from the *first* directory in
++# $ac_aux_dir_candidates and give up.
++ac_missing_aux_files=""
++ac_first_candidate=:
++printf "%s\n" "$as_me:${as_lineno-$LINENO}: looking for aux files: $ac_aux_files" >&5
++as_save_IFS=$IFS; IFS=$PATH_SEPARATOR
++as_found=false
++for as_dir in $ac_aux_dir_candidates
+ do
+-  if test -r "$ac_site_file"; then
+-    { echo "$as_me:$LINENO: loading site script $ac_site_file" >&5
+-echo "$as_me: loading site script $ac_site_file" >&6;}
+-    sed 's/^/| /' "$ac_site_file" >&5
+-    . "$ac_site_file"
++  IFS=$as_save_IFS
++  case $as_dir in #(((
++    '') as_dir=./ ;;
++    */) ;;
++    *) as_dir=$as_dir/ ;;
++  esac
++  as_found=:
++
++  printf "%s\n" "$as_me:${as_lineno-$LINENO}:  trying $as_dir" >&5
++  ac_aux_dir_found=yes
++  ac_install_sh=
++  for ac_aux in $ac_aux_files
++  do
++    # As a special case, if "install-sh" is required, that requirement
++    # can be satisfied by any of "install-sh", "install.sh", or "shtool",
++    # and $ac_install_sh is set appropriately for whichever one is found.
++    if test x"$ac_aux" = x"install-sh"
++    then
++      if test -f "${as_dir}install-sh"; then
++        printf "%s\n" "$as_me:${as_lineno-$LINENO}:   ${as_dir}install-sh found" >&5
++        ac_install_sh="${as_dir}install-sh -c"
++      elif test -f "${as_dir}install.sh"; then
++        printf "%s\n" "$as_me:${as_lineno-$LINENO}:   ${as_dir}install.sh found" >&5
++        ac_install_sh="${as_dir}install.sh -c"
++      elif test -f "${as_dir}shtool"; then
++        printf "%s\n" "$as_me:${as_lineno-$LINENO}:   ${as_dir}shtool found" >&5
++        ac_install_sh="${as_dir}shtool install -c"
++      else
++        ac_aux_dir_found=no
++        if $ac_first_candidate; then
++          ac_missing_aux_files="${ac_missing_aux_files} install-sh"
++        else
++          break
++        fi
++      fi
++    else
++      if test -f "${as_dir}${ac_aux}"; then
++        printf "%s\n" "$as_me:${as_lineno-$LINENO}:   ${as_dir}${ac_aux} found" >&5
++      else
++        ac_aux_dir_found=no
++        if $ac_first_candidate; then
++          ac_missing_aux_files="${ac_missing_aux_files} ${ac_aux}"
++        else
++          break
++        fi
++      fi
++    fi
++  done
++  if test "$ac_aux_dir_found" = yes; then
++    ac_aux_dir="$as_dir"
++    break
+   fi
++  ac_first_candidate=false
++
++  as_found=false
+ done
++IFS=$as_save_IFS
++if $as_found
++then :
+ 
+-if test -r "$cache_file"; then
+-  # Some versions of bash will fail to source /dev/null (special
+-  # files actually), so we avoid doing that.
+-  if test -f "$cache_file"; then
+-    { echo "$as_me:$LINENO: loading cache $cache_file" >&5
+-echo "$as_me: loading cache $cache_file" >&6;}
+-    case $cache_file in
+-      [\\/]* | ?:[\\/]* ) . "$cache_file";;
+-      *)                      . "./$cache_file";;
+-    esac
+-  fi
+-else
+-  { echo "$as_me:$LINENO: creating cache $cache_file" >&5
+-echo "$as_me: creating cache $cache_file" >&6;}
+-  >$cache_file
++else $as_nop
++  as_fn_error $? "cannot find required auxiliary files:$ac_missing_aux_files" "$LINENO" 5
++fi
++
++
++# These three variables are undocumented and unsupported,
++# and are intended to be withdrawn in a future Autoconf release.
++# They can cause serious problems if a builder's source tree is in a directory
++# whose full name contains unusual characters.
++if test -f "${ac_aux_dir}config.guess"; then
++  ac_config_guess="$SHELL ${ac_aux_dir}config.guess"
++fi
++if test -f "${ac_aux_dir}config.sub"; then
++  ac_config_sub="$SHELL ${ac_aux_dir}config.sub"
++fi
++if test -f "$ac_aux_dir/configure"; then
++  ac_configure="$SHELL ${ac_aux_dir}configure"
+ fi
+ 
+ # Check that the precious variables saved in the cache have kept the same
+@@ -1830,60 +3062,57 @@ for ac_var in $ac_precious_vars; do
+   eval ac_new_val=\$ac_env_${ac_var}_value
+   case $ac_old_set,$ac_new_set in
+     set,)
+-      { echo "$as_me:$LINENO: error: \`$ac_var' was set to \`$ac_old_val' in the previous run" >&5
+-echo "$as_me: error: \`$ac_var' was set to \`$ac_old_val' in the previous run" >&2;}
++      { printf "%s\n" "$as_me:${as_lineno-$LINENO}: error: \`$ac_var' was set to \`$ac_old_val' in the previous run" >&5
++printf "%s\n" "$as_me: error: \`$ac_var' was set to \`$ac_old_val' in the previous run" >&2;}
+       ac_cache_corrupted=: ;;
+     ,set)
+-      { echo "$as_me:$LINENO: error: \`$ac_var' was not set in the previous run" >&5
+-echo "$as_me: error: \`$ac_var' was not set in the previous run" >&2;}
++      { printf "%s\n" "$as_me:${as_lineno-$LINENO}: error: \`$ac_var' was not set in the previous run" >&5
++printf "%s\n" "$as_me: error: \`$ac_var' was not set in the previous run" >&2;}
+       ac_cache_corrupted=: ;;
+     ,);;
+     *)
+       if test "x$ac_old_val" != "x$ac_new_val"; then
+-	{ echo "$as_me:$LINENO: error: \`$ac_var' has changed since the previous run:" >&5
+-echo "$as_me: error: \`$ac_var' has changed since the previous run:" >&2;}
+-	{ echo "$as_me:$LINENO:   former value:  $ac_old_val" >&5
+-echo "$as_me:   former value:  $ac_old_val" >&2;}
+-	{ echo "$as_me:$LINENO:   current value: $ac_new_val" >&5
+-echo "$as_me:   current value: $ac_new_val" >&2;}
+-	ac_cache_corrupted=:
++	# differences in whitespace do not lead to failure.
++	ac_old_val_w=`echo x $ac_old_val`
++	ac_new_val_w=`echo x $ac_new_val`
++	if test "$ac_old_val_w" != "$ac_new_val_w"; then
++	  { printf "%s\n" "$as_me:${as_lineno-$LINENO}: error: \`$ac_var' has changed since the previous run:" >&5
++printf "%s\n" "$as_me: error: \`$ac_var' has changed since the previous run:" >&2;}
++	  ac_cache_corrupted=:
++	else
++	  { printf "%s\n" "$as_me:${as_lineno-$LINENO}: warning: ignoring whitespace changes in \`$ac_var' since the previous run:" >&5
++printf "%s\n" "$as_me: warning: ignoring whitespace changes in \`$ac_var' since the previous run:" >&2;}
++	  eval $ac_var=\$ac_old_val
++	fi
++	{ printf "%s\n" "$as_me:${as_lineno-$LINENO}:   former value:  \`$ac_old_val'" >&5
++printf "%s\n" "$as_me:   former value:  \`$ac_old_val'" >&2;}
++	{ printf "%s\n" "$as_me:${as_lineno-$LINENO}:   current value: \`$ac_new_val'" >&5
++printf "%s\n" "$as_me:   current value: \`$ac_new_val'" >&2;}
+       fi;;
+   esac
+   # Pass precious variables to config.status.
+   if test "$ac_new_set" = set; then
+     case $ac_new_val in
+-    *\'*) ac_arg=$ac_var=`echo "$ac_new_val" | sed "s/'/'\\\\\\\\''/g"` ;;
++    *\'*) ac_arg=$ac_var=`printf "%s\n" "$ac_new_val" | sed "s/'/'\\\\\\\\''/g"` ;;
+     *) ac_arg=$ac_var=$ac_new_val ;;
+     esac
+     case " $ac_configure_args " in
+       *" '$ac_arg' "*) ;; # Avoid dups.  Use of quotes ensures accuracy.
+-      *) ac_configure_args="$ac_configure_args '$ac_arg'" ;;
++      *) as_fn_append ac_configure_args " '$ac_arg'" ;;
+     esac
+   fi
+ done
+ if $ac_cache_corrupted; then
+-  { echo "$as_me:$LINENO: error: changes in the environment can compromise the build" >&5
+-echo "$as_me: error: changes in the environment can compromise the build" >&2;}
+-  { { echo "$as_me:$LINENO: error: run \`make distclean' and/or \`rm $cache_file' and start over" >&5
+-echo "$as_me: error: run \`make distclean' and/or \`rm $cache_file' and start over" >&2;}
+-   { (exit 1); exit 1; }; }
++  { printf "%s\n" "$as_me:${as_lineno-$LINENO}: error: in \`$ac_pwd':" >&5
++printf "%s\n" "$as_me: error: in \`$ac_pwd':" >&2;}
++  { printf "%s\n" "$as_me:${as_lineno-$LINENO}: error: changes in the environment can compromise the build" >&5
++printf "%s\n" "$as_me: error: changes in the environment can compromise the build" >&2;}
++  as_fn_error $? "run \`${MAKE-make} distclean' and/or \`rm $cache_file'
++	    and start over" "$LINENO" 5
+ fi
+-
+-
+-
+-
+-
+-
+-
+-
+-
+-
+-
+-
+-
+-
+-
+-
++## -------------------- ##
++## Main body of script. ##
++## -------------------- ##
+ 
+ ac_ext=c
+ ac_cpp='$CPP $CPPFLAGS'
+@@ -1892,9 +3121,8 @@ ac_link='$CC -o conftest$ac_exeext $CFLAGS $CPPFLAGS $LDFLAGS conftest.$ac_ext $
+ ac_compiler_gnu=$ac_cv_c_compiler_gnu
+ 
+ 
+-ac_config_headers="$ac_config_headers include/SAMRAI_config.h:config/SAMRAI_config.h.in"
+-
+ 
++ac_config_headers="$ac_config_headers include/SAMRAI_config.h:config/SAMRAI_config.h.in"
+ 
+ 
+ 
+@@ -1909,75 +3137,41 @@ for btng_log_vars_index in $btng_log_vars ; do
+   else
+     btng_log_vars_value="unset";
+   fi
+-  echo "configure:1912:" "$btng_log_vars_index is $btng_log_vars_value" >&5;
++  echo "configure:3140:" "$btng_log_vars_index is $btng_log_vars_value" >&5;
+ done
+ 
+ 
+ 
+-ac_aux_dir=
+-for ac_dir in config "$srcdir"/config; do
+-  if test -f "$ac_dir/install-sh"; then
+-    ac_aux_dir=$ac_dir
+-    ac_install_sh="$ac_aux_dir/install-sh -c"
+-    break
+-  elif test -f "$ac_dir/install.sh"; then
+-    ac_aux_dir=$ac_dir
+-    ac_install_sh="$ac_aux_dir/install.sh -c"
+-    break
+-  elif test -f "$ac_dir/shtool"; then
+-    ac_aux_dir=$ac_dir
+-    ac_install_sh="$ac_aux_dir/shtool install -c"
+-    break
+-  fi
+-done
+-if test -z "$ac_aux_dir"; then
+-  { { echo "$as_me:$LINENO: error: cannot find install-sh or install.sh in config \"$srcdir\"/config" >&5
+-echo "$as_me: error: cannot find install-sh or install.sh in config \"$srcdir\"/config" >&2;}
+-   { (exit 1); exit 1; }; }
+-fi
+ 
+-# These three variables are undocumented and unsupported,
+-# and are intended to be withdrawn in a future Autoconf release.
+-# They can cause serious problems if a builder's source tree is in a directory
+-# whose full name contains unusual characters.
+-ac_config_guess="$SHELL $ac_aux_dir/config.guess"  # Please don't use this var.
+-ac_config_sub="$SHELL $ac_aux_dir/config.sub"  # Please don't use this var.
+-ac_configure="$SHELL $ac_aux_dir/configure"  # Please don't use this var.
+ 
++# Get system type.
+ 
+ 
+-# Get system type.
+-# Make sure we can run config.sub.
+-$SHELL "$ac_aux_dir/config.sub" sun4 >/dev/null 2>&1 ||
+-  { { echo "$as_me:$LINENO: error: cannot run $SHELL $ac_aux_dir/config.sub" >&5
+-echo "$as_me: error: cannot run $SHELL $ac_aux_dir/config.sub" >&2;}
+-   { (exit 1); exit 1; }; }
+-
+-{ echo "$as_me:$LINENO: checking build system type" >&5
+-echo $ECHO_N "checking build system type... $ECHO_C" >&6; }
+-if test "${ac_cv_build+set}" = set; then
+-  echo $ECHO_N "(cached) $ECHO_C" >&6
+-else
++
++  # Make sure we can run config.sub.
++$SHELL "${ac_aux_dir}config.sub" sun4 >/dev/null 2>&1 ||
++  as_fn_error $? "cannot run $SHELL ${ac_aux_dir}config.sub" "$LINENO" 5
++
++{ printf "%s\n" "$as_me:${as_lineno-$LINENO}: checking build system type" >&5
++printf %s "checking build system type... " >&6; }
++if test ${ac_cv_build+y}
++then :
++  printf %s "(cached) " >&6
++else $as_nop
+   ac_build_alias=$build_alias
+ test "x$ac_build_alias" = x &&
+-  ac_build_alias=`$SHELL "$ac_aux_dir/config.guess"`
++  ac_build_alias=`$SHELL "${ac_aux_dir}config.guess"`
+ test "x$ac_build_alias" = x &&
+-  { { echo "$as_me:$LINENO: error: cannot guess build type; you must specify one" >&5
+-echo "$as_me: error: cannot guess build type; you must specify one" >&2;}
+-   { (exit 1); exit 1; }; }
+-ac_cv_build=`$SHELL "$ac_aux_dir/config.sub" $ac_build_alias` ||
+-  { { echo "$as_me:$LINENO: error: $SHELL $ac_aux_dir/config.sub $ac_build_alias failed" >&5
+-echo "$as_me: error: $SHELL $ac_aux_dir/config.sub $ac_build_alias failed" >&2;}
+-   { (exit 1); exit 1; }; }
++  as_fn_error $? "cannot guess build type; you must specify one" "$LINENO" 5
++ac_cv_build=`$SHELL "${ac_aux_dir}config.sub" $ac_build_alias` ||
++  as_fn_error $? "$SHELL ${ac_aux_dir}config.sub $ac_build_alias failed" "$LINENO" 5
+ 
+ fi
+-{ echo "$as_me:$LINENO: result: $ac_cv_build" >&5
+-echo "${ECHO_T}$ac_cv_build" >&6; }
++{ printf "%s\n" "$as_me:${as_lineno-$LINENO}: result: $ac_cv_build" >&5
++printf "%s\n" "$ac_cv_build" >&6; }
+ case $ac_cv_build in
+ *-*-*) ;;
+-*) { { echo "$as_me:$LINENO: error: invalid value of canonical build" >&5
+-echo "$as_me: error: invalid value of canonical build" >&2;}
+-   { (exit 1); exit 1; }; };;
++*) as_fn_error $? "invalid value of canonical build" "$LINENO" 5;;
+ esac
+ build=$ac_cv_build
+ ac_save_IFS=$IFS; IFS='-'
+@@ -1993,28 +3187,25 @@ IFS=$ac_save_IFS
+ case $build_os in *\ *) build_os=`echo "$build_os" | sed 's/ /-/g'`;; esac
+ 
+ 
+-{ echo "$as_me:$LINENO: checking host system type" >&5
+-echo $ECHO_N "checking host system type... $ECHO_C" >&6; }
+-if test "${ac_cv_host+set}" = set; then
+-  echo $ECHO_N "(cached) $ECHO_C" >&6
+-else
++{ printf "%s\n" "$as_me:${as_lineno-$LINENO}: checking host system type" >&5
++printf %s "checking host system type... " >&6; }
++if test ${ac_cv_host+y}
++then :
++  printf %s "(cached) " >&6
++else $as_nop
+   if test "x$host_alias" = x; then
+   ac_cv_host=$ac_cv_build
+ else
+-  ac_cv_host=`$SHELL "$ac_aux_dir/config.sub" $host_alias` ||
+-    { { echo "$as_me:$LINENO: error: $SHELL $ac_aux_dir/config.sub $host_alias failed" >&5
+-echo "$as_me: error: $SHELL $ac_aux_dir/config.sub $host_alias failed" >&2;}
+-   { (exit 1); exit 1; }; }
++  ac_cv_host=`$SHELL "${ac_aux_dir}config.sub" $host_alias` ||
++    as_fn_error $? "$SHELL ${ac_aux_dir}config.sub $host_alias failed" "$LINENO" 5
+ fi
+ 
+ fi
+-{ echo "$as_me:$LINENO: result: $ac_cv_host" >&5
+-echo "${ECHO_T}$ac_cv_host" >&6; }
++{ printf "%s\n" "$as_me:${as_lineno-$LINENO}: result: $ac_cv_host" >&5
++printf "%s\n" "$ac_cv_host" >&6; }
+ case $ac_cv_host in
+ *-*-*) ;;
+-*) { { echo "$as_me:$LINENO: error: invalid value of canonical host" >&5
+-echo "$as_me: error: invalid value of canonical host" >&2;}
+-   { (exit 1); exit 1; }; };;
++*) as_fn_error $? "invalid value of canonical host" "$LINENO" 5;;
+ esac
+ host=$ac_cv_host
+ ac_save_IFS=$IFS; IFS='-'
+@@ -2030,28 +3221,25 @@ IFS=$ac_save_IFS
+ case $host_os in *\ *) host_os=`echo "$host_os" | sed 's/ /-/g'`;; esac
+ 
+ 
+-{ echo "$as_me:$LINENO: checking target system type" >&5
+-echo $ECHO_N "checking target system type... $ECHO_C" >&6; }
+-if test "${ac_cv_target+set}" = set; then
+-  echo $ECHO_N "(cached) $ECHO_C" >&6
+-else
++{ printf "%s\n" "$as_me:${as_lineno-$LINENO}: checking target system type" >&5
++printf %s "checking target system type... " >&6; }
++if test ${ac_cv_target+y}
++then :
++  printf %s "(cached) " >&6
++else $as_nop
+   if test "x$target_alias" = x; then
+   ac_cv_target=$ac_cv_host
+ else
+-  ac_cv_target=`$SHELL "$ac_aux_dir/config.sub" $target_alias` ||
+-    { { echo "$as_me:$LINENO: error: $SHELL $ac_aux_dir/config.sub $target_alias failed" >&5
+-echo "$as_me: error: $SHELL $ac_aux_dir/config.sub $target_alias failed" >&2;}
+-   { (exit 1); exit 1; }; }
++  ac_cv_target=`$SHELL "${ac_aux_dir}config.sub" $target_alias` ||
++    as_fn_error $? "$SHELL ${ac_aux_dir}config.sub $target_alias failed" "$LINENO" 5
+ fi
+ 
+ fi
+-{ echo "$as_me:$LINENO: result: $ac_cv_target" >&5
+-echo "${ECHO_T}$ac_cv_target" >&6; }
++{ printf "%s\n" "$as_me:${as_lineno-$LINENO}: result: $ac_cv_target" >&5
++printf "%s\n" "$ac_cv_target" >&6; }
+ case $ac_cv_target in
+ *-*-*) ;;
+-*) { { echo "$as_me:$LINENO: error: invalid value of canonical target" >&5
+-echo "$as_me: error: invalid value of canonical target" >&2;}
+-   { (exit 1); exit 1; }; };;
++*) as_fn_error $? "invalid value of canonical target" "$LINENO" 5;;
+ esac
+ target=$ac_cv_target
+ ac_save_IFS=$IFS; IFS='-'
+@@ -2083,7 +3271,7 @@ for btng_log_vars_index in $btng_log_vars ; do
+   else
+     btng_log_vars_value="unset";
+   fi
+-  echo "configure:2086:" "$btng_log_vars_index is $btng_log_vars_value" >&5;
++  echo "configure:3274:" "$btng_log_vars_index is $btng_log_vars_value" >&5;
+ done
+ 
+ 
+@@ -2091,111 +3279,126 @@ done
+ case "$host_os" in
+   solaris*)
+ 
+-cat >>confdefs.h <<\_ACEOF
+-#define HOST_OS_IS_SOLARIS 1
+-_ACEOF
++printf "%s\n" "#define HOST_OS_IS_SOLARIS 1" >>confdefs.h
+ 
+ esac
+ 
+ 
+ # Check whether --enable-char was given.
+-if test "${enable_char+set}" = set; then
++if test ${enable_char+y}
++then :
+   enableval=$enable_char;
+ fi
+ 
+ # Check whether --enable-float was given.
+-if test "${enable_float+set}" = set; then
++if test ${enable_float+y}
++then :
+   enableval=$enable_float;
+ fi
+ 
+ # Check whether --enable-bool was given.
+-if test "${enable_bool+set}" = set; then
++if test ${enable_bool+y}
++then :
+   enableval=$enable_bool;
+ fi
+ 
+ # Check whether --enable-dcomplex was given.
+-if test "${enable_dcomplex+set}" = set; then
++if test ${enable_dcomplex+y}
++then :
+   enableval=$enable_dcomplex;
+ fi
+ 
+ 
+ # Check whether --enable-vpath was given.
+-if test "${enable_vpath+set}" = set; then
++if test ${enable_vpath+y}
++then :
+   enableval=$enable_vpath;
+ fi
+ 
+ # Check whether --enable-noxargs was given.
+-if test "${enable_noxargs+set}" = set; then
++if test ${enable_noxargs+y}
++then :
+   enableval=$enable_noxargs;
+ fi
+ 
+ # Check whether --enable-shared was given.
+-if test "${enable_shared+set}" = set; then
++if test ${enable_shared+y}
++then :
+   enableval=$enable_shared;
+ fi
+ 
+ # Check whether --enable-xdr was given.
+-if test "${enable_xdr+set}" = set; then
++if test ${enable_xdr+y}
++then :
+   enableval=$enable_xdr;
+-else
++else $as_nop
+   enable_xdr="no"
+ 
+ fi
+ 
+ # Check whether --enable-developer_makefile was given.
+-if test "${enable_developer_makefile+set}" = set; then
++if test ${enable_developer_makefile+y}
++then :
+   enableval=$enable_developer_makefile;
+-else
++else $as_nop
+   enable_developer_makefile="no"
+ 
+ fi
+ 
+ 
+ # Check whether --with-CC was given.
+-if test "${with_CC+set}" = set; then
++if test ${with_CC+y}
++then :
+   withval=$with_CC;
+ fi
+ 
+ 
+ # Check whether --with-CXX was given.
+-if test "${with_CXX+set}" = set; then
++if test ${with_CXX+y}
++then :
+   withval=$with_CXX;
+ fi
+ 
+ 
+ # Check whether --with-F77 was given.
+-if test "${with_F77+set}" = set; then
++if test ${with_F77+y}
++then :
+   withval=$with_F77;
+ fi
+ 
+ 
+ # Check whether --with-M4 was given.
+-if test "${with_M4+set}" = set; then
++if test ${with_M4+y}
++then :
+   withval=$with_M4;
+ fi
+ 
+ 
+ # Check whether --with-AR was given.
+-if test "${with_AR+set}" = set; then
++if test ${with_AR+y}
++then :
+   withval=$with_AR;
+ fi
+ 
+ 
+ # Check whether --with-vampir was given.
+-if test "${with_vampir+set}" = set; then
++if test ${with_vampir+y}
++then :
+   withval=$with_vampir;
+ fi
+ 
+ 
+ # Check whether --with-tau was given.
+-if test "${with_tau+set}" = set; then
++if test ${with_tau+y}
++then :
+   withval=$with_tau;
+ fi
+ 
+ # Check whether --enable-deprecated was given.
+-if test "${enable_deprecated+set}" = set; then
++if test ${enable_deprecated+y}
++then :
+   enableval=$enable_deprecated;
+-else
++else $as_nop
+   enable_deprecated="yes"
+ 
+ fi
+@@ -2203,32 +3406,26 @@ fi
+ 
+ 
+ # Check whether --with-MPI was given.
+-if test "${with_MPI+set}" = set; then
+-  withval=$with_MPI; { { echo "$as_me:$LINENO: error: Obsolete option for MPI used!!
+-You should use lower-case.  Do 'configure --help' for help." >&5
+-echo "$as_me: error: Obsolete option for MPI used!!
+-You should use lower-case.  Do 'configure --help' for help." >&2;}
+-   { (exit 1); exit 1; }; }
++if test ${with_MPI+y}
++then :
++  withval=$with_MPI; as_fn_error $? "Obsolete option for MPI used!!
++You should use lower-case.  Do 'configure --help' for help." "$LINENO" 5
+ fi
+ 
+ 
+ # Check whether --with-HDF5 was given.
+-if test "${with_HDF5+set}" = set; then
+-  withval=$with_HDF5; { { echo "$as_me:$LINENO: error: Obsolete option for HDF5 used!!
+-You should use lower-case.  Do 'configure --help' for help." >&5
+-echo "$as_me: error: Obsolete option for HDF5 used!!
+-You should use lower-case.  Do 'configure --help' for help." >&2;}
+-   { (exit 1); exit 1; }; }
++if test ${with_HDF5+y}
++then :
++  withval=$with_HDF5; as_fn_error $? "Obsolete option for HDF5 used!!
++You should use lower-case.  Do 'configure --help' for help." "$LINENO" 5
+ fi
+ 
+ 
+ # Check whether --with-PETSC was given.
+-if test "${with_PETSC+set}" = set; then
+-  withval=$with_PETSC; { { echo "$as_me:$LINENO: error: Obsolete option for PETSC used!!
+-You should use lower-case.  Do 'configure --help' for help." >&5
+-echo "$as_me: error: Obsolete option for PETSC used!!
+-You should use lower-case.  Do 'configure --help' for help." >&2;}
+-   { (exit 1); exit 1; }; }
++if test ${with_PETSC+y}
++then :
++  withval=$with_PETSC; as_fn_error $? "Obsolete option for PETSC used!!
++You should use lower-case.  Do 'configure --help' for help." "$LINENO" 5
+ fi
+ 
+ 
+@@ -2259,15 +3456,15 @@ for btng_log_vars_index in $btng_log_vars ; do
+   else
+     btng_log_vars_value="unset";
+   fi
+-  echo "configure:2262:" "$btng_log_vars_index is $btng_log_vars_value" >&5;
++  echo "configure:3459:" "$btng_log_vars_index is $btng_log_vars_value" >&5;
+ done
+ 
+ 
+ 
+ 
+ 
+-   { echo "$as_me:$LINENO: checking the architecture" >&5
+-echo $ECHO_N "checking the architecture... $ECHO_C" >&6; }
++   { printf "%s\n" "$as_me:${as_lineno-$LINENO}: checking the architecture" >&5
++printf %s "checking the architecture... " >&6; }
+ 
+          if test -z "$ARCH"; then
+ 
+@@ -2281,8 +3478,8 @@ echo $ECHO_N "checking the architecture... $ECHO_C" >&6; }
+       done
+ 
+                   if test -z "$casc_tarch_dir"; then
+-         { echo "$as_me:$LINENO: WARNING: cannot find tarch" >&5
+-echo "$as_me: WARNING: cannot find tarch" >&2;}
++         { printf "%s\n" "$as_me:${as_lineno-$LINENO}: WARNING: cannot find tarch" >&5
++printf "%s\n" "$as_me: WARNING: cannot find tarch" >&2;}
+          ARCH=$HOSTTYPE
+       else
+          ARCH="`$casc_tarch`"
+@@ -2294,15 +3491,15 @@ echo "$as_me: WARNING: cannot find tarch" >&2;}
+ 
+             if test -z "$ARCH"; then
+          ARCH=unknown
+-         { echo "$as_me:$LINENO: WARNING: architecture is unknown" >&5
+-echo "$as_me: WARNING: architecture is unknown" >&2;}
++         { printf "%s\n" "$as_me:${as_lineno-$LINENO}: WARNING: architecture is unknown" >&5
++printf "%s\n" "$as_me: WARNING: architecture is unknown" >&2;}
+       else
+-         { echo "$as_me:$LINENO: result: $ARCH" >&5
+-echo "${ECHO_T}$ARCH" >&6; }
++         { printf "%s\n" "$as_me:${as_lineno-$LINENO}: result: $ARCH" >&5
++printf "%s\n" "$ARCH" >&6; }
+       fi
+    else
+-      { echo "$as_me:$LINENO: result: $ARCH" >&5
+-echo "${ECHO_T}$ARCH" >&6; }
++      { printf "%s\n" "$as_me:${as_lineno-$LINENO}: result: $ARCH" >&5
++printf "%s\n" "$ARCH" >&6; }
+    fi
+ 
+ 
+@@ -2318,7 +3515,7 @@ for btng_log_vars_index in $btng_log_vars ; do
+   else
+     btng_log_vars_value="unset";
+   fi
+-  echo "configure:2321:" "$btng_log_vars_index is $btng_log_vars_value" >&5;
++  echo "configure:3518:" "$btng_log_vars_index is $btng_log_vars_value" >&5;
+ done
+ 
+ 
+@@ -2344,10 +3541,16 @@ for btng_log_vars_index in $btng_log_vars ; do
+   else
+     btng_log_vars_value="unset";
+   fi
+-  echo "configure:2347:" "before running compiler search: $btng_log_vars_index is $btng_log_vars_value" >&5;
++  echo "configure:3544:" "before running compiler search: $btng_log_vars_index is $btng_log_vars_value" >&5;
+ done
+ 
+ 
++
++
++
++
++
++
+ ac_ext=cpp
+ ac_cpp='$CXXCPP $CPPFLAGS'
+ ac_compile='$CXX -c $CXXFLAGS $CPPFLAGS conftest.$ac_ext >&5'
+@@ -2362,11 +3565,12 @@ if test -z "$CXX"; then
+   do
+     # Extract the first word of "$ac_tool_prefix$ac_prog", so it can be a program name with args.
+ set dummy $ac_tool_prefix$ac_prog; ac_word=$2
+-{ echo "$as_me:$LINENO: checking for $ac_word" >&5
+-echo $ECHO_N "checking for $ac_word... $ECHO_C" >&6; }
+-if test "${ac_cv_prog_CXX+set}" = set; then
+-  echo $ECHO_N "(cached) $ECHO_C" >&6
+-else
++{ printf "%s\n" "$as_me:${as_lineno-$LINENO}: checking for $ac_word" >&5
++printf %s "checking for $ac_word... " >&6; }
++if test ${ac_cv_prog_CXX+y}
++then :
++  printf %s "(cached) " >&6
++else $as_nop
+   if test -n "$CXX"; then
+   ac_cv_prog_CXX="$CXX" # Let the user override the test.
+ else
+@@ -2374,26 +3578,30 @@ as_save_IFS=$IFS; IFS=$PATH_SEPARATOR
+ for as_dir in $PATH
+ do
+   IFS=$as_save_IFS
+-  test -z "$as_dir" && as_dir=.
+-  for ac_exec_ext in '' $ac_executable_extensions; do
+-  if { test -f "$as_dir/$ac_word$ac_exec_ext" && $as_test_x "$as_dir/$ac_word$ac_exec_ext"; }; then
++  case $as_dir in #(((
++    '') as_dir=./ ;;
++    */) ;;
++    *) as_dir=$as_dir/ ;;
++  esac
++    for ac_exec_ext in '' $ac_executable_extensions; do
++  if as_fn_executable_p "$as_dir$ac_word$ac_exec_ext"; then
+     ac_cv_prog_CXX="$ac_tool_prefix$ac_prog"
+-    echo "$as_me:$LINENO: found $as_dir/$ac_word$ac_exec_ext" >&5
++    printf "%s\n" "$as_me:${as_lineno-$LINENO}: found $as_dir$ac_word$ac_exec_ext" >&5
+     break 2
+   fi
+ done
+-done
++  done
+ IFS=$as_save_IFS
+ 
+ fi
+ fi
+ CXX=$ac_cv_prog_CXX
+ if test -n "$CXX"; then
+-  { echo "$as_me:$LINENO: result: $CXX" >&5
+-echo "${ECHO_T}$CXX" >&6; }
++  { printf "%s\n" "$as_me:${as_lineno-$LINENO}: result: $CXX" >&5
++printf "%s\n" "$CXX" >&6; }
+ else
+-  { echo "$as_me:$LINENO: result: no" >&5
+-echo "${ECHO_T}no" >&6; }
++  { printf "%s\n" "$as_me:${as_lineno-$LINENO}: result: no" >&5
++printf "%s\n" "no" >&6; }
+ fi
+ 
+ 
+@@ -2406,11 +3614,12 @@ if test -z "$CXX"; then
+ do
+   # Extract the first word of "$ac_prog", so it can be a program name with args.
+ set dummy $ac_prog; ac_word=$2
+-{ echo "$as_me:$LINENO: checking for $ac_word" >&5
+-echo $ECHO_N "checking for $ac_word... $ECHO_C" >&6; }
+-if test "${ac_cv_prog_ac_ct_CXX+set}" = set; then
+-  echo $ECHO_N "(cached) $ECHO_C" >&6
+-else
++{ printf "%s\n" "$as_me:${as_lineno-$LINENO}: checking for $ac_word" >&5
++printf %s "checking for $ac_word... " >&6; }
++if test ${ac_cv_prog_ac_ct_CXX+y}
++then :
++  printf %s "(cached) " >&6
++else $as_nop
+   if test -n "$ac_ct_CXX"; then
+   ac_cv_prog_ac_ct_CXX="$ac_ct_CXX" # Let the user override the test.
+ else
+@@ -2418,26 +3627,30 @@ as_save_IFS=$IFS; IFS=$PATH_SEPARATOR
+ for as_dir in $PATH
+ do
+   IFS=$as_save_IFS
+-  test -z "$as_dir" && as_dir=.
+-  for ac_exec_ext in '' $ac_executable_extensions; do
+-  if { test -f "$as_dir/$ac_word$ac_exec_ext" && $as_test_x "$as_dir/$ac_word$ac_exec_ext"; }; then
++  case $as_dir in #(((
++    '') as_dir=./ ;;
++    */) ;;
++    *) as_dir=$as_dir/ ;;
++  esac
++    for ac_exec_ext in '' $ac_executable_extensions; do
++  if as_fn_executable_p "$as_dir$ac_word$ac_exec_ext"; then
+     ac_cv_prog_ac_ct_CXX="$ac_prog"
+-    echo "$as_me:$LINENO: found $as_dir/$ac_word$ac_exec_ext" >&5
++    printf "%s\n" "$as_me:${as_lineno-$LINENO}: found $as_dir$ac_word$ac_exec_ext" >&5
+     break 2
+   fi
+ done
+-done
++  done
+ IFS=$as_save_IFS
+ 
+ fi
+ fi
+ ac_ct_CXX=$ac_cv_prog_ac_ct_CXX
+ if test -n "$ac_ct_CXX"; then
+-  { echo "$as_me:$LINENO: result: $ac_ct_CXX" >&5
+-echo "${ECHO_T}$ac_ct_CXX" >&6; }
++  { printf "%s\n" "$as_me:${as_lineno-$LINENO}: result: $ac_ct_CXX" >&5
++printf "%s\n" "$ac_ct_CXX" >&6; }
+ else
+-  { echo "$as_me:$LINENO: result: no" >&5
+-echo "${ECHO_T}no" >&6; }
++  { printf "%s\n" "$as_me:${as_lineno-$LINENO}: result: no" >&5
++printf "%s\n" "no" >&6; }
+ fi
+ 
+ 
+@@ -2449,12 +3662,8 @@ done
+   else
+     case $cross_compiling:$ac_tool_warned in
+ yes:)
+-{ echo "$as_me:$LINENO: WARNING: In the future, Autoconf will not detect cross-tools
+-whose name does not start with the host triplet.  If you think this
+-configuration is useful to you, please write to autoconf@gnu.org." >&5
+-echo "$as_me: WARNING: In the future, Autoconf will not detect cross-tools
+-whose name does not start with the host triplet.  If you think this
+-configuration is useful to you, please write to autoconf@gnu.org." >&2;}
++{ printf "%s\n" "$as_me:${as_lineno-$LINENO}: WARNING: using cross tools not prefixed with host triplet" >&5
++printf "%s\n" "$as_me: WARNING: using cross tools not prefixed with host triplet" >&2;}
+ ac_tool_warned=yes ;;
+ esac
+     CXX=$ac_ct_CXX
+@@ -2464,48 +3673,35 @@ fi
+   fi
+ fi
+ # Provide some information about the compiler.
+-echo "$as_me:$LINENO: checking for C++ compiler version" >&5
+-ac_compiler=`set X $ac_compile; echo $2`
+-{ (ac_try="$ac_compiler --version >&5"
+-case "(($ac_try" in
+-  *\"* | *\`* | *\\*) ac_try_echo=\$ac_try;;
+-  *) ac_try_echo=$ac_try;;
+-esac
+-eval "echo \"\$as_me:$LINENO: $ac_try_echo\"") >&5
+-  (eval "$ac_compiler --version >&5") 2>&5
+-  ac_status=$?
+-  echo "$as_me:$LINENO: \$? = $ac_status" >&5
+-  (exit $ac_status); }
+-{ (ac_try="$ac_compiler -v >&5"
+-case "(($ac_try" in
+-  *\"* | *\`* | *\\*) ac_try_echo=\$ac_try;;
+-  *) ac_try_echo=$ac_try;;
+-esac
+-eval "echo \"\$as_me:$LINENO: $ac_try_echo\"") >&5
+-  (eval "$ac_compiler -v >&5") 2>&5
+-  ac_status=$?
+-  echo "$as_me:$LINENO: \$? = $ac_status" >&5
+-  (exit $ac_status); }
+-{ (ac_try="$ac_compiler -V >&5"
++printf "%s\n" "$as_me:${as_lineno-$LINENO}: checking for C++ compiler version" >&5
++set X $ac_compile
++ac_compiler=$2
++for ac_option in --version -v -V -qversion; do
++  { { ac_try="$ac_compiler $ac_option >&5"
+ case "(($ac_try" in
+   *\"* | *\`* | *\\*) ac_try_echo=\$ac_try;;
+   *) ac_try_echo=$ac_try;;
+ esac
+-eval "echo \"\$as_me:$LINENO: $ac_try_echo\"") >&5
+-  (eval "$ac_compiler -V >&5") 2>&5
++eval ac_try_echo="\"\$as_me:${as_lineno-$LINENO}: $ac_try_echo\""
++printf "%s\n" "$ac_try_echo"; } >&5
++  (eval "$ac_compiler $ac_option >&5") 2>conftest.err
+   ac_status=$?
+-  echo "$as_me:$LINENO: \$? = $ac_status" >&5
+-  (exit $ac_status); }
++  if test -s conftest.err; then
++    sed '10a\
++... rest of stderr output deleted ...
++         10q' conftest.err >conftest.er1
++    cat conftest.er1 >&5
++  fi
++  rm -f conftest.er1 conftest.err
++  printf "%s\n" "$as_me:${as_lineno-$LINENO}: \$? = $ac_status" >&5
++  test $ac_status = 0; }
++done
+ 
+-cat >conftest.$ac_ext <<_ACEOF
+-/* confdefs.h.  */
+-_ACEOF
+-cat confdefs.h >>conftest.$ac_ext
+-cat >>conftest.$ac_ext <<_ACEOF
++cat confdefs.h - <<_ACEOF >conftest.$ac_ext
+ /* end confdefs.h.  */
+ 
+ int
+-main ()
++main (void)
+ {
+ 
+   ;
+@@ -2513,42 +3709,39 @@ main ()
+ }
+ _ACEOF
+ ac_clean_files_save=$ac_clean_files
+-ac_clean_files="$ac_clean_files a.out a.exe b.out"
++ac_clean_files="$ac_clean_files a.out a.out.dSYM a.exe b.out"
+ # Try to create an executable without -o first, disregard a.out.
+ # It will help us diagnose broken compilers, and finding out an intuition
+ # of exeext.
+-{ echo "$as_me:$LINENO: checking for C++ compiler default output file name" >&5
+-echo $ECHO_N "checking for C++ compiler default output file name... $ECHO_C" >&6; }
+-ac_link_default=`echo "$ac_link" | sed 's/ -o *conftest[^ ]*//'`
+-#
+-# List of possible output files, starting from the most likely.
+-# The algorithm is not robust to junk in `.', hence go to wildcards (a.*)
+-# only as a last resort.  b.out is created by i960 compilers.
+-ac_files='a_out.exe a.exe conftest.exe a.out conftest a.* conftest.* b.out'
+-#
+-# The IRIX 6 linker writes into existing files which may not be
+-# executable, retaining their permissions.  Remove them first so a
+-# subsequent execution test works.
++{ printf "%s\n" "$as_me:${as_lineno-$LINENO}: checking whether the C++ compiler works" >&5
++printf %s "checking whether the C++ compiler works... " >&6; }
++ac_link_default=`printf "%s\n" "$ac_link" | sed 's/ -o *conftest[^ ]*//'`
++
++# The possible output files:
++ac_files="a.out conftest.exe conftest a.exe a_out.exe b.out conftest.*"
++
+ ac_rmfiles=
+ for ac_file in $ac_files
+ do
+   case $ac_file in
+-    *.$ac_ext | *.xcoff | *.tds | *.d | *.pdb | *.xSYM | *.bb | *.bbg | *.map | *.inf | *.o | *.obj ) ;;
++    *.$ac_ext | *.xcoff | *.tds | *.d | *.pdb | *.xSYM | *.bb | *.bbg | *.map | *.inf | *.dSYM | *.o | *.obj ) ;;
+     * ) ac_rmfiles="$ac_rmfiles $ac_file";;
+   esac
+ done
+ rm -f $ac_rmfiles
+ 
+-if { (ac_try="$ac_link_default"
++if { { ac_try="$ac_link_default"
+ case "(($ac_try" in
+   *\"* | *\`* | *\\*) ac_try_echo=\$ac_try;;
+   *) ac_try_echo=$ac_try;;
+ esac
+-eval "echo \"\$as_me:$LINENO: $ac_try_echo\"") >&5
++eval ac_try_echo="\"\$as_me:${as_lineno-$LINENO}: $ac_try_echo\""
++printf "%s\n" "$ac_try_echo"; } >&5
+   (eval "$ac_link_default") 2>&5
+   ac_status=$?
+-  echo "$as_me:$LINENO: \$? = $ac_status" >&5
+-  (exit $ac_status); }; then
++  printf "%s\n" "$as_me:${as_lineno-$LINENO}: \$? = $ac_status" >&5
++  test $ac_status = 0; }
++then :
+   # Autoconf-2.13 could set the ac_cv_exeext variable to `no'.
+ # So ignore a value of `no', otherwise this would lead to `EXEEXT = no'
+ # in a Makefile.  We should not override ac_cv_exeext if it was cached,
+@@ -2558,14 +3751,14 @@ for ac_file in $ac_files ''
+ do
+   test -f "$ac_file" || continue
+   case $ac_file in
+-    *.$ac_ext | *.xcoff | *.tds | *.d | *.pdb | *.xSYM | *.bb | *.bbg | *.map | *.inf | *.o | *.obj )
++    *.$ac_ext | *.xcoff | *.tds | *.d | *.pdb | *.xSYM | *.bb | *.bbg | *.map | *.inf | *.dSYM | *.o | *.obj )
+ 	;;
+     [ab].out )
+ 	# We found the default executable, but exeext='' is most
+ 	# certainly right.
+ 	break;;
+     *.* )
+-        if test "${ac_cv_exeext+set}" = set && test "$ac_cv_exeext" != no;
++	if test ${ac_cv_exeext+y} && test "$ac_cv_exeext" != no;
+ 	then :; else
+ 	   ac_cv_exeext=`expr "$ac_file" : '[^.]*\(\..*\)'`
+ 	fi
+@@ -2581,81 +3774,46 @@ do
+ done
+ test "$ac_cv_exeext" = no && ac_cv_exeext=
+ 
+-else
++else $as_nop
+   ac_file=''
+ fi
+-
+-{ echo "$as_me:$LINENO: result: $ac_file" >&5
+-echo "${ECHO_T}$ac_file" >&6; }
+-if test -z "$ac_file"; then
+-  echo "$as_me: failed program was:" >&5
++if test -z "$ac_file"
++then :
++  { printf "%s\n" "$as_me:${as_lineno-$LINENO}: result: no" >&5
++printf "%s\n" "no" >&6; }
++printf "%s\n" "$as_me: failed program was:" >&5
+ sed 's/^/| /' conftest.$ac_ext >&5
+ 
+-{ { echo "$as_me:$LINENO: error: C++ compiler cannot create executables
+-See \`config.log' for more details." >&5
+-echo "$as_me: error: C++ compiler cannot create executables
+-See \`config.log' for more details." >&2;}
+-   { (exit 77); exit 77; }; }
+-fi
+-
++{ { printf "%s\n" "$as_me:${as_lineno-$LINENO}: error: in \`$ac_pwd':" >&5
++printf "%s\n" "$as_me: error: in \`$ac_pwd':" >&2;}
++as_fn_error 77 "C++ compiler cannot create executables
++See \`config.log' for more details" "$LINENO" 5; }
++else $as_nop
++  { printf "%s\n" "$as_me:${as_lineno-$LINENO}: result: yes" >&5
++printf "%s\n" "yes" >&6; }
++fi
++{ printf "%s\n" "$as_me:${as_lineno-$LINENO}: checking for C++ compiler default output file name" >&5
++printf %s "checking for C++ compiler default output file name... " >&6; }
++{ printf "%s\n" "$as_me:${as_lineno-$LINENO}: result: $ac_file" >&5
++printf "%s\n" "$ac_file" >&6; }
+ ac_exeext=$ac_cv_exeext
+ 
+-# Check that the compiler produces executables we can run.  If not, either
+-# the compiler is broken, or we cross compile.
+-{ echo "$as_me:$LINENO: checking whether the C++ compiler works" >&5
+-echo $ECHO_N "checking whether the C++ compiler works... $ECHO_C" >&6; }
+-# FIXME: These cross compiler hacks should be removed for Autoconf 3.0
+-# If not cross compiling, check that we can run a simple program.
+-if test "$cross_compiling" != yes; then
+-  if { ac_try='./$ac_file'
+-  { (case "(($ac_try" in
+-  *\"* | *\`* | *\\*) ac_try_echo=\$ac_try;;
+-  *) ac_try_echo=$ac_try;;
+-esac
+-eval "echo \"\$as_me:$LINENO: $ac_try_echo\"") >&5
+-  (eval "$ac_try") 2>&5
+-  ac_status=$?
+-  echo "$as_me:$LINENO: \$? = $ac_status" >&5
+-  (exit $ac_status); }; }; then
+-    cross_compiling=no
+-  else
+-    if test "$cross_compiling" = maybe; then
+-	cross_compiling=yes
+-    else
+-	{ { echo "$as_me:$LINENO: error: cannot run C++ compiled programs.
+-If you meant to cross compile, use \`--host'.
+-See \`config.log' for more details." >&5
+-echo "$as_me: error: cannot run C++ compiled programs.
+-If you meant to cross compile, use \`--host'.
+-See \`config.log' for more details." >&2;}
+-   { (exit 1); exit 1; }; }
+-    fi
+-  fi
+-fi
+-{ echo "$as_me:$LINENO: result: yes" >&5
+-echo "${ECHO_T}yes" >&6; }
+-
+-rm -f a.out a.exe conftest$ac_cv_exeext b.out
++rm -f -r a.out a.out.dSYM a.exe conftest$ac_cv_exeext b.out
+ ac_clean_files=$ac_clean_files_save
+-# Check that the compiler produces executables we can run.  If not, either
+-# the compiler is broken, or we cross compile.
+-{ echo "$as_me:$LINENO: checking whether we are cross compiling" >&5
+-echo $ECHO_N "checking whether we are cross compiling... $ECHO_C" >&6; }
+-{ echo "$as_me:$LINENO: result: $cross_compiling" >&5
+-echo "${ECHO_T}$cross_compiling" >&6; }
+-
+-{ echo "$as_me:$LINENO: checking for suffix of executables" >&5
+-echo $ECHO_N "checking for suffix of executables... $ECHO_C" >&6; }
+-if { (ac_try="$ac_link"
++{ printf "%s\n" "$as_me:${as_lineno-$LINENO}: checking for suffix of executables" >&5
++printf %s "checking for suffix of executables... " >&6; }
++if { { ac_try="$ac_link"
+ case "(($ac_try" in
+   *\"* | *\`* | *\\*) ac_try_echo=\$ac_try;;
+   *) ac_try_echo=$ac_try;;
+ esac
+-eval "echo \"\$as_me:$LINENO: $ac_try_echo\"") >&5
++eval ac_try_echo="\"\$as_me:${as_lineno-$LINENO}: $ac_try_echo\""
++printf "%s\n" "$ac_try_echo"; } >&5
+   (eval "$ac_link") 2>&5
+   ac_status=$?
+-  echo "$as_me:$LINENO: \$? = $ac_status" >&5
+-  (exit $ac_status); }; then
++  printf "%s\n" "$as_me:${as_lineno-$LINENO}: \$? = $ac_status" >&5
++  test $ac_status = 0; }
++then :
+   # If both `conftest.exe' and `conftest' are `present' (well, observable)
+ # catch `conftest.exe'.  For instance with Cygwin, `ls conftest' will
+ # work properly (i.e., refer to `conftest.exe'), while it won't with
+@@ -2663,41 +3821,95 @@ eval "echo \"\$as_me:$LINENO: $ac_try_echo\"") >&5
+ for ac_file in conftest.exe conftest conftest.*; do
+   test -f "$ac_file" || continue
+   case $ac_file in
+-    *.$ac_ext | *.xcoff | *.tds | *.d | *.pdb | *.xSYM | *.bb | *.bbg | *.map | *.inf | *.o | *.obj ) ;;
++    *.$ac_ext | *.xcoff | *.tds | *.d | *.pdb | *.xSYM | *.bb | *.bbg | *.map | *.inf | *.dSYM | *.o | *.obj ) ;;
+     *.* ) ac_cv_exeext=`expr "$ac_file" : '[^.]*\(\..*\)'`
+ 	  break;;
+     * ) break;;
+   esac
+ done
+-else
+-  { { echo "$as_me:$LINENO: error: cannot compute suffix of executables: cannot compile and link
+-See \`config.log' for more details." >&5
+-echo "$as_me: error: cannot compute suffix of executables: cannot compile and link
+-See \`config.log' for more details." >&2;}
+-   { (exit 1); exit 1; }; }
++else $as_nop
++  { { printf "%s\n" "$as_me:${as_lineno-$LINENO}: error: in \`$ac_pwd':" >&5
++printf "%s\n" "$as_me: error: in \`$ac_pwd':" >&2;}
++as_fn_error $? "cannot compute suffix of executables: cannot compile and link
++See \`config.log' for more details" "$LINENO" 5; }
++fi
++rm -f conftest conftest$ac_cv_exeext
++{ printf "%s\n" "$as_me:${as_lineno-$LINENO}: result: $ac_cv_exeext" >&5
++printf "%s\n" "$ac_cv_exeext" >&6; }
++
++rm -f conftest.$ac_ext
++EXEEXT=$ac_cv_exeext
++ac_exeext=$EXEEXT
++cat confdefs.h - <<_ACEOF >conftest.$ac_ext
++/* end confdefs.h.  */
++#include <stdio.h>
++int
++main (void)
++{
++FILE *f = fopen ("conftest.out", "w");
++ return ferror (f) || fclose (f) != 0;
++
++  ;
++  return 0;
++}
++_ACEOF
++ac_clean_files="$ac_clean_files conftest.out"
++# Check that the compiler produces executables we can run.  If not, either
++# the compiler is broken, or we cross compile.
++{ printf "%s\n" "$as_me:${as_lineno-$LINENO}: checking whether we are cross compiling" >&5
++printf %s "checking whether we are cross compiling... " >&6; }
++if test "$cross_compiling" != yes; then
++  { { ac_try="$ac_link"
++case "(($ac_try" in
++  *\"* | *\`* | *\\*) ac_try_echo=\$ac_try;;
++  *) ac_try_echo=$ac_try;;
++esac
++eval ac_try_echo="\"\$as_me:${as_lineno-$LINENO}: $ac_try_echo\""
++printf "%s\n" "$ac_try_echo"; } >&5
++  (eval "$ac_link") 2>&5
++  ac_status=$?
++  printf "%s\n" "$as_me:${as_lineno-$LINENO}: \$? = $ac_status" >&5
++  test $ac_status = 0; }
++  if { ac_try='./conftest$ac_cv_exeext'
++  { { case "(($ac_try" in
++  *\"* | *\`* | *\\*) ac_try_echo=\$ac_try;;
++  *) ac_try_echo=$ac_try;;
++esac
++eval ac_try_echo="\"\$as_me:${as_lineno-$LINENO}: $ac_try_echo\""
++printf "%s\n" "$ac_try_echo"; } >&5
++  (eval "$ac_try") 2>&5
++  ac_status=$?
++  printf "%s\n" "$as_me:${as_lineno-$LINENO}: \$? = $ac_status" >&5
++  test $ac_status = 0; }; }; then
++    cross_compiling=no
++  else
++    if test "$cross_compiling" = maybe; then
++	cross_compiling=yes
++    else
++	{ { printf "%s\n" "$as_me:${as_lineno-$LINENO}: error: in \`$ac_pwd':" >&5
++printf "%s\n" "$as_me: error: in \`$ac_pwd':" >&2;}
++as_fn_error 77 "cannot run C++ compiled programs.
++If you meant to cross compile, use \`--host'.
++See \`config.log' for more details" "$LINENO" 5; }
++    fi
++  fi
+ fi
++{ printf "%s\n" "$as_me:${as_lineno-$LINENO}: result: $cross_compiling" >&5
++printf "%s\n" "$cross_compiling" >&6; }
+ 
+-rm -f conftest$ac_cv_exeext
+-{ echo "$as_me:$LINENO: result: $ac_cv_exeext" >&5
+-echo "${ECHO_T}$ac_cv_exeext" >&6; }
+-
+-rm -f conftest.$ac_ext
+-EXEEXT=$ac_cv_exeext
+-ac_exeext=$EXEEXT
+-{ echo "$as_me:$LINENO: checking for suffix of object files" >&5
+-echo $ECHO_N "checking for suffix of object files... $ECHO_C" >&6; }
+-if test "${ac_cv_objext+set}" = set; then
+-  echo $ECHO_N "(cached) $ECHO_C" >&6
+-else
+-  cat >conftest.$ac_ext <<_ACEOF
+-/* confdefs.h.  */
+-_ACEOF
+-cat confdefs.h >>conftest.$ac_ext
+-cat >>conftest.$ac_ext <<_ACEOF
++rm -f conftest.$ac_ext conftest$ac_cv_exeext conftest.out
++ac_clean_files=$ac_clean_files_save
++{ printf "%s\n" "$as_me:${as_lineno-$LINENO}: checking for suffix of object files" >&5
++printf %s "checking for suffix of object files... " >&6; }
++if test ${ac_cv_objext+y}
++then :
++  printf %s "(cached) " >&6
++else $as_nop
++  cat confdefs.h - <<_ACEOF >conftest.$ac_ext
+ /* end confdefs.h.  */
+ 
+ int
+-main ()
++main (void)
+ {
+ 
+   ;
+@@ -2705,55 +3917,52 @@ main ()
+ }
+ _ACEOF
+ rm -f conftest.o conftest.obj
+-if { (ac_try="$ac_compile"
++if { { ac_try="$ac_compile"
+ case "(($ac_try" in
+   *\"* | *\`* | *\\*) ac_try_echo=\$ac_try;;
+   *) ac_try_echo=$ac_try;;
+ esac
+-eval "echo \"\$as_me:$LINENO: $ac_try_echo\"") >&5
++eval ac_try_echo="\"\$as_me:${as_lineno-$LINENO}: $ac_try_echo\""
++printf "%s\n" "$ac_try_echo"; } >&5
+   (eval "$ac_compile") 2>&5
+   ac_status=$?
+-  echo "$as_me:$LINENO: \$? = $ac_status" >&5
+-  (exit $ac_status); }; then
++  printf "%s\n" "$as_me:${as_lineno-$LINENO}: \$? = $ac_status" >&5
++  test $ac_status = 0; }
++then :
+   for ac_file in conftest.o conftest.obj conftest.*; do
+   test -f "$ac_file" || continue;
+   case $ac_file in
+-    *.$ac_ext | *.xcoff | *.tds | *.d | *.pdb | *.xSYM | *.bb | *.bbg | *.map | *.inf ) ;;
++    *.$ac_ext | *.xcoff | *.tds | *.d | *.pdb | *.xSYM | *.bb | *.bbg | *.map | *.inf | *.dSYM ) ;;
+     *) ac_cv_objext=`expr "$ac_file" : '.*\.\(.*\)'`
+        break;;
+   esac
+ done
+-else
+-  echo "$as_me: failed program was:" >&5
++else $as_nop
++  printf "%s\n" "$as_me: failed program was:" >&5
+ sed 's/^/| /' conftest.$ac_ext >&5
+ 
+-{ { echo "$as_me:$LINENO: error: cannot compute suffix of object files: cannot compile
+-See \`config.log' for more details." >&5
+-echo "$as_me: error: cannot compute suffix of object files: cannot compile
+-See \`config.log' for more details." >&2;}
+-   { (exit 1); exit 1; }; }
++{ { printf "%s\n" "$as_me:${as_lineno-$LINENO}: error: in \`$ac_pwd':" >&5
++printf "%s\n" "$as_me: error: in \`$ac_pwd':" >&2;}
++as_fn_error $? "cannot compute suffix of object files: cannot compile
++See \`config.log' for more details" "$LINENO" 5; }
+ fi
+-
+ rm -f conftest.$ac_cv_objext conftest.$ac_ext
+ fi
+-{ echo "$as_me:$LINENO: result: $ac_cv_objext" >&5
+-echo "${ECHO_T}$ac_cv_objext" >&6; }
++{ printf "%s\n" "$as_me:${as_lineno-$LINENO}: result: $ac_cv_objext" >&5
++printf "%s\n" "$ac_cv_objext" >&6; }
+ OBJEXT=$ac_cv_objext
+ ac_objext=$OBJEXT
+-{ echo "$as_me:$LINENO: checking whether we are using the GNU C++ compiler" >&5
+-echo $ECHO_N "checking whether we are using the GNU C++ compiler... $ECHO_C" >&6; }
+-if test "${ac_cv_cxx_compiler_gnu+set}" = set; then
+-  echo $ECHO_N "(cached) $ECHO_C" >&6
+-else
+-  cat >conftest.$ac_ext <<_ACEOF
+-/* confdefs.h.  */
+-_ACEOF
+-cat confdefs.h >>conftest.$ac_ext
+-cat >>conftest.$ac_ext <<_ACEOF
++{ printf "%s\n" "$as_me:${as_lineno-$LINENO}: checking whether the compiler supports GNU C++" >&5
++printf %s "checking whether the compiler supports GNU C++... " >&6; }
++if test ${ac_cv_cxx_compiler_gnu+y}
++then :
++  printf %s "(cached) " >&6
++else $as_nop
++  cat confdefs.h - <<_ACEOF >conftest.$ac_ext
+ /* end confdefs.h.  */
+ 
+ int
+-main ()
++main (void)
+ {
+ #ifndef __GNUC__
+        choke me
+@@ -2763,178 +3972,95 @@ main ()
+   return 0;
+ }
+ _ACEOF
+-rm -f conftest.$ac_objext
+-if { (ac_try="$ac_compile"
+-case "(($ac_try" in
+-  *\"* | *\`* | *\\*) ac_try_echo=\$ac_try;;
+-  *) ac_try_echo=$ac_try;;
+-esac
+-eval "echo \"\$as_me:$LINENO: $ac_try_echo\"") >&5
+-  (eval "$ac_compile") 2>conftest.er1
+-  ac_status=$?
+-  grep -v '^ *+' conftest.er1 >conftest.err
+-  rm -f conftest.er1
+-  cat conftest.err >&5
+-  echo "$as_me:$LINENO: \$? = $ac_status" >&5
+-  (exit $ac_status); } && {
+-	 test -z "$ac_cxx_werror_flag" ||
+-	 test ! -s conftest.err
+-       } && test -s conftest.$ac_objext; then
++if ac_fn_cxx_try_compile "$LINENO"
++then :
+   ac_compiler_gnu=yes
+-else
+-  echo "$as_me: failed program was:" >&5
+-sed 's/^/| /' conftest.$ac_ext >&5
+-
+-	ac_compiler_gnu=no
++else $as_nop
++  ac_compiler_gnu=no
+ fi
+-
+-rm -f core conftest.err conftest.$ac_objext conftest.$ac_ext
++rm -f core conftest.err conftest.$ac_objext conftest.beam conftest.$ac_ext
+ ac_cv_cxx_compiler_gnu=$ac_compiler_gnu
+ 
+ fi
+-{ echo "$as_me:$LINENO: result: $ac_cv_cxx_compiler_gnu" >&5
+-echo "${ECHO_T}$ac_cv_cxx_compiler_gnu" >&6; }
+-GXX=`test $ac_compiler_gnu = yes && echo yes`
+-ac_test_CXXFLAGS=${CXXFLAGS+set}
+-ac_save_CXXFLAGS=$CXXFLAGS
+-{ echo "$as_me:$LINENO: checking whether $CXX accepts -g" >&5
+-echo $ECHO_N "checking whether $CXX accepts -g... $ECHO_C" >&6; }
+-if test "${ac_cv_prog_cxx_g+set}" = set; then
+-  echo $ECHO_N "(cached) $ECHO_C" >&6
++{ printf "%s\n" "$as_me:${as_lineno-$LINENO}: result: $ac_cv_cxx_compiler_gnu" >&5
++printf "%s\n" "$ac_cv_cxx_compiler_gnu" >&6; }
++ac_compiler_gnu=$ac_cv_cxx_compiler_gnu
++
++if test $ac_compiler_gnu = yes; then
++  GXX=yes
+ else
++  GXX=
++fi
++ac_test_CXXFLAGS=${CXXFLAGS+y}
++ac_save_CXXFLAGS=$CXXFLAGS
++{ printf "%s\n" "$as_me:${as_lineno-$LINENO}: checking whether $CXX accepts -g" >&5
++printf %s "checking whether $CXX accepts -g... " >&6; }
++if test ${ac_cv_prog_cxx_g+y}
++then :
++  printf %s "(cached) " >&6
++else $as_nop
+   ac_save_cxx_werror_flag=$ac_cxx_werror_flag
+    ac_cxx_werror_flag=yes
+    ac_cv_prog_cxx_g=no
+    CXXFLAGS="-g"
+-   cat >conftest.$ac_ext <<_ACEOF
+-/* confdefs.h.  */
+-_ACEOF
+-cat confdefs.h >>conftest.$ac_ext
+-cat >>conftest.$ac_ext <<_ACEOF
++   cat confdefs.h - <<_ACEOF >conftest.$ac_ext
+ /* end confdefs.h.  */
+ 
+ int
+-main ()
++main (void)
+ {
+ 
+   ;
+   return 0;
+ }
+ _ACEOF
+-rm -f conftest.$ac_objext
+-if { (ac_try="$ac_compile"
+-case "(($ac_try" in
+-  *\"* | *\`* | *\\*) ac_try_echo=\$ac_try;;
+-  *) ac_try_echo=$ac_try;;
+-esac
+-eval "echo \"\$as_me:$LINENO: $ac_try_echo\"") >&5
+-  (eval "$ac_compile") 2>conftest.er1
+-  ac_status=$?
+-  grep -v '^ *+' conftest.er1 >conftest.err
+-  rm -f conftest.er1
+-  cat conftest.err >&5
+-  echo "$as_me:$LINENO: \$? = $ac_status" >&5
+-  (exit $ac_status); } && {
+-	 test -z "$ac_cxx_werror_flag" ||
+-	 test ! -s conftest.err
+-       } && test -s conftest.$ac_objext; then
++if ac_fn_cxx_try_compile "$LINENO"
++then :
+   ac_cv_prog_cxx_g=yes
+-else
+-  echo "$as_me: failed program was:" >&5
+-sed 's/^/| /' conftest.$ac_ext >&5
+-
+-	CXXFLAGS=""
+-      cat >conftest.$ac_ext <<_ACEOF
+-/* confdefs.h.  */
+-_ACEOF
+-cat confdefs.h >>conftest.$ac_ext
+-cat >>conftest.$ac_ext <<_ACEOF
++else $as_nop
++  CXXFLAGS=""
++      cat confdefs.h - <<_ACEOF >conftest.$ac_ext
+ /* end confdefs.h.  */
+ 
+ int
+-main ()
++main (void)
+ {
+ 
+   ;
+   return 0;
+ }
+ _ACEOF
+-rm -f conftest.$ac_objext
+-if { (ac_try="$ac_compile"
+-case "(($ac_try" in
+-  *\"* | *\`* | *\\*) ac_try_echo=\$ac_try;;
+-  *) ac_try_echo=$ac_try;;
+-esac
+-eval "echo \"\$as_me:$LINENO: $ac_try_echo\"") >&5
+-  (eval "$ac_compile") 2>conftest.er1
+-  ac_status=$?
+-  grep -v '^ *+' conftest.er1 >conftest.err
+-  rm -f conftest.er1
+-  cat conftest.err >&5
+-  echo "$as_me:$LINENO: \$? = $ac_status" >&5
+-  (exit $ac_status); } && {
+-	 test -z "$ac_cxx_werror_flag" ||
+-	 test ! -s conftest.err
+-       } && test -s conftest.$ac_objext; then
+-  :
+-else
+-  echo "$as_me: failed program was:" >&5
+-sed 's/^/| /' conftest.$ac_ext >&5
++if ac_fn_cxx_try_compile "$LINENO"
++then :
+ 
+-	ac_cxx_werror_flag=$ac_save_cxx_werror_flag
++else $as_nop
++  ac_cxx_werror_flag=$ac_save_cxx_werror_flag
+ 	 CXXFLAGS="-g"
+-	 cat >conftest.$ac_ext <<_ACEOF
+-/* confdefs.h.  */
+-_ACEOF
+-cat confdefs.h >>conftest.$ac_ext
+-cat >>conftest.$ac_ext <<_ACEOF
++	 cat confdefs.h - <<_ACEOF >conftest.$ac_ext
+ /* end confdefs.h.  */
+ 
+ int
+-main ()
++main (void)
+ {
+ 
+   ;
+   return 0;
+ }
+ _ACEOF
+-rm -f conftest.$ac_objext
+-if { (ac_try="$ac_compile"
+-case "(($ac_try" in
+-  *\"* | *\`* | *\\*) ac_try_echo=\$ac_try;;
+-  *) ac_try_echo=$ac_try;;
+-esac
+-eval "echo \"\$as_me:$LINENO: $ac_try_echo\"") >&5
+-  (eval "$ac_compile") 2>conftest.er1
+-  ac_status=$?
+-  grep -v '^ *+' conftest.er1 >conftest.err
+-  rm -f conftest.er1
+-  cat conftest.err >&5
+-  echo "$as_me:$LINENO: \$? = $ac_status" >&5
+-  (exit $ac_status); } && {
+-	 test -z "$ac_cxx_werror_flag" ||
+-	 test ! -s conftest.err
+-       } && test -s conftest.$ac_objext; then
++if ac_fn_cxx_try_compile "$LINENO"
++then :
+   ac_cv_prog_cxx_g=yes
+-else
+-  echo "$as_me: failed program was:" >&5
+-sed 's/^/| /' conftest.$ac_ext >&5
+-
+-
+ fi
+-
+-rm -f core conftest.err conftest.$ac_objext conftest.$ac_ext
++rm -f core conftest.err conftest.$ac_objext conftest.beam conftest.$ac_ext
+ fi
+-
+-rm -f core conftest.err conftest.$ac_objext conftest.$ac_ext
++rm -f core conftest.err conftest.$ac_objext conftest.beam conftest.$ac_ext
+ fi
+-
+-rm -f core conftest.err conftest.$ac_objext conftest.$ac_ext
++rm -f core conftest.err conftest.$ac_objext conftest.beam conftest.$ac_ext
+    ac_cxx_werror_flag=$ac_save_cxx_werror_flag
+ fi
+-{ echo "$as_me:$LINENO: result: $ac_cv_prog_cxx_g" >&5
+-echo "${ECHO_T}$ac_cv_prog_cxx_g" >&6; }
+-if test "$ac_test_CXXFLAGS" = set; then
++{ printf "%s\n" "$as_me:${as_lineno-$LINENO}: result: $ac_cv_prog_cxx_g" >&5
++printf "%s\n" "$ac_cv_prog_cxx_g" >&6; }
++if test $ac_test_CXXFLAGS; then
+   CXXFLAGS=$ac_save_CXXFLAGS
+ elif test $ac_cv_prog_cxx_g = yes; then
+   if test "$GXX" = yes; then
+@@ -2949,6 +4075,100 @@ else
+     CXXFLAGS=
+   fi
+ fi
++ac_prog_cxx_stdcxx=no
++if test x$ac_prog_cxx_stdcxx = xno
++then :
++  { printf "%s\n" "$as_me:${as_lineno-$LINENO}: checking for $CXX option to enable C++11 features" >&5
++printf %s "checking for $CXX option to enable C++11 features... " >&6; }
++if test ${ac_cv_prog_cxx_11+y}
++then :
++  printf %s "(cached) " >&6
++else $as_nop
++  ac_cv_prog_cxx_11=no
++ac_save_CXX=$CXX
++cat confdefs.h - <<_ACEOF >conftest.$ac_ext
++/* end confdefs.h.  */
++$ac_cxx_conftest_cxx11_program
++_ACEOF
++for ac_arg in '' -std=gnu++11 -std=gnu++0x -std=c++11 -std=c++0x -qlanglvl=extended0x -AA
++do
++  CXX="$ac_save_CXX $ac_arg"
++  if ac_fn_cxx_try_compile "$LINENO"
++then :
++  ac_cv_prog_cxx_cxx11=$ac_arg
++fi
++rm -f core conftest.err conftest.$ac_objext conftest.beam
++  test "x$ac_cv_prog_cxx_cxx11" != "xno" && break
++done
++rm -f conftest.$ac_ext
++CXX=$ac_save_CXX
++fi
++
++if test "x$ac_cv_prog_cxx_cxx11" = xno
++then :
++  { printf "%s\n" "$as_me:${as_lineno-$LINENO}: result: unsupported" >&5
++printf "%s\n" "unsupported" >&6; }
++else $as_nop
++  if test "x$ac_cv_prog_cxx_cxx11" = x
++then :
++  { printf "%s\n" "$as_me:${as_lineno-$LINENO}: result: none needed" >&5
++printf "%s\n" "none needed" >&6; }
++else $as_nop
++  { printf "%s\n" "$as_me:${as_lineno-$LINENO}: result: $ac_cv_prog_cxx_cxx11" >&5
++printf "%s\n" "$ac_cv_prog_cxx_cxx11" >&6; }
++     CXX="$CXX $ac_cv_prog_cxx_cxx11"
++fi
++  ac_cv_prog_cxx_stdcxx=$ac_cv_prog_cxx_cxx11
++  ac_prog_cxx_stdcxx=cxx11
++fi
++fi
++if test x$ac_prog_cxx_stdcxx = xno
++then :
++  { printf "%s\n" "$as_me:${as_lineno-$LINENO}: checking for $CXX option to enable C++98 features" >&5
++printf %s "checking for $CXX option to enable C++98 features... " >&6; }
++if test ${ac_cv_prog_cxx_98+y}
++then :
++  printf %s "(cached) " >&6
++else $as_nop
++  ac_cv_prog_cxx_98=no
++ac_save_CXX=$CXX
++cat confdefs.h - <<_ACEOF >conftest.$ac_ext
++/* end confdefs.h.  */
++$ac_cxx_conftest_cxx98_program
++_ACEOF
++for ac_arg in '' -std=gnu++98 -std=c++98 -qlanglvl=extended -AA
++do
++  CXX="$ac_save_CXX $ac_arg"
++  if ac_fn_cxx_try_compile "$LINENO"
++then :
++  ac_cv_prog_cxx_cxx98=$ac_arg
++fi
++rm -f core conftest.err conftest.$ac_objext conftest.beam
++  test "x$ac_cv_prog_cxx_cxx98" != "xno" && break
++done
++rm -f conftest.$ac_ext
++CXX=$ac_save_CXX
++fi
++
++if test "x$ac_cv_prog_cxx_cxx98" = xno
++then :
++  { printf "%s\n" "$as_me:${as_lineno-$LINENO}: result: unsupported" >&5
++printf "%s\n" "unsupported" >&6; }
++else $as_nop
++  if test "x$ac_cv_prog_cxx_cxx98" = x
++then :
++  { printf "%s\n" "$as_me:${as_lineno-$LINENO}: result: none needed" >&5
++printf "%s\n" "none needed" >&6; }
++else $as_nop
++  { printf "%s\n" "$as_me:${as_lineno-$LINENO}: result: $ac_cv_prog_cxx_cxx98" >&5
++printf "%s\n" "$ac_cv_prog_cxx_cxx98" >&6; }
++     CXX="$CXX $ac_cv_prog_cxx_cxx98"
++fi
++  ac_cv_prog_cxx_stdcxx=$ac_cv_prog_cxx_cxx98
++  ac_prog_cxx_stdcxx=cxx98
++fi
++fi
++
+ ac_ext=c
+ ac_cpp='$CPP $CPPFLAGS'
+ ac_compile='$CC -c $CFLAGS $CPPFLAGS conftest.$ac_ext >&5'
+@@ -2965,7 +4185,7 @@ for btng_log_vars_index in $btng_log_vars ; do
+   else
+     btng_log_vars_value="unset";
+   fi
+-  echo "configure:2968:" "after running compiler search: $btng_log_vars_index is $btng_log_vars_value" >&5;
++  echo "configure:4188:" "after running compiler search: $btng_log_vars_index is $btng_log_vars_value" >&5;
+ done
+ 
+ 
+@@ -2974,7 +4194,16 @@ done
+ if test -n "$with_CC"; then
+    CC=$with_CC
+ else
+-   ac_ext=c
++
++
++
++
++
++
++
++
++
++ac_ext=c
+ ac_cpp='$CPP $CPPFLAGS'
+ ac_compile='$CC -c $CFLAGS $CPPFLAGS conftest.$ac_ext >&5'
+ ac_link='$CC -o conftest$ac_exeext $CFLAGS $CPPFLAGS $LDFLAGS conftest.$ac_ext $LIBS >&5'
+@@ -2982,11 +4211,12 @@ ac_compiler_gnu=$ac_cv_c_compiler_gnu
+ if test -n "$ac_tool_prefix"; then
+   # Extract the first word of "${ac_tool_prefix}gcc", so it can be a program name with args.
+ set dummy ${ac_tool_prefix}gcc; ac_word=$2
+-{ echo "$as_me:$LINENO: checking for $ac_word" >&5
+-echo $ECHO_N "checking for $ac_word... $ECHO_C" >&6; }
+-if test "${ac_cv_prog_CC+set}" = set; then
+-  echo $ECHO_N "(cached) $ECHO_C" >&6
+-else
++{ printf "%s\n" "$as_me:${as_lineno-$LINENO}: checking for $ac_word" >&5
++printf %s "checking for $ac_word... " >&6; }
++if test ${ac_cv_prog_CC+y}
++then :
++  printf %s "(cached) " >&6
++else $as_nop
+   if test -n "$CC"; then
+   ac_cv_prog_CC="$CC" # Let the user override the test.
+ else
+@@ -2994,26 +4224,30 @@ as_save_IFS=$IFS; IFS=$PATH_SEPARATOR
+ for as_dir in $PATH
+ do
+   IFS=$as_save_IFS
+-  test -z "$as_dir" && as_dir=.
+-  for ac_exec_ext in '' $ac_executable_extensions; do
+-  if { test -f "$as_dir/$ac_word$ac_exec_ext" && $as_test_x "$as_dir/$ac_word$ac_exec_ext"; }; then
++  case $as_dir in #(((
++    '') as_dir=./ ;;
++    */) ;;
++    *) as_dir=$as_dir/ ;;
++  esac
++    for ac_exec_ext in '' $ac_executable_extensions; do
++  if as_fn_executable_p "$as_dir$ac_word$ac_exec_ext"; then
+     ac_cv_prog_CC="${ac_tool_prefix}gcc"
+-    echo "$as_me:$LINENO: found $as_dir/$ac_word$ac_exec_ext" >&5
++    printf "%s\n" "$as_me:${as_lineno-$LINENO}: found $as_dir$ac_word$ac_exec_ext" >&5
+     break 2
+   fi
+ done
+-done
++  done
+ IFS=$as_save_IFS
+ 
+ fi
+ fi
+ CC=$ac_cv_prog_CC
+ if test -n "$CC"; then
+-  { echo "$as_me:$LINENO: result: $CC" >&5
+-echo "${ECHO_T}$CC" >&6; }
++  { printf "%s\n" "$as_me:${as_lineno-$LINENO}: result: $CC" >&5
++printf "%s\n" "$CC" >&6; }
+ else
+-  { echo "$as_me:$LINENO: result: no" >&5
+-echo "${ECHO_T}no" >&6; }
++  { printf "%s\n" "$as_me:${as_lineno-$LINENO}: result: no" >&5
++printf "%s\n" "no" >&6; }
+ fi
+ 
+ 
+@@ -3022,11 +4256,12 @@ if test -z "$ac_cv_prog_CC"; then
+   ac_ct_CC=$CC
+   # Extract the first word of "gcc", so it can be a program name with args.
+ set dummy gcc; ac_word=$2
+-{ echo "$as_me:$LINENO: checking for $ac_word" >&5
+-echo $ECHO_N "checking for $ac_word... $ECHO_C" >&6; }
+-if test "${ac_cv_prog_ac_ct_CC+set}" = set; then
+-  echo $ECHO_N "(cached) $ECHO_C" >&6
+-else
++{ printf "%s\n" "$as_me:${as_lineno-$LINENO}: checking for $ac_word" >&5
++printf %s "checking for $ac_word... " >&6; }
++if test ${ac_cv_prog_ac_ct_CC+y}
++then :
++  printf %s "(cached) " >&6
++else $as_nop
+   if test -n "$ac_ct_CC"; then
+   ac_cv_prog_ac_ct_CC="$ac_ct_CC" # Let the user override the test.
+ else
+@@ -3034,26 +4269,30 @@ as_save_IFS=$IFS; IFS=$PATH_SEPARATOR
+ for as_dir in $PATH
+ do
+   IFS=$as_save_IFS
+-  test -z "$as_dir" && as_dir=.
+-  for ac_exec_ext in '' $ac_executable_extensions; do
+-  if { test -f "$as_dir/$ac_word$ac_exec_ext" && $as_test_x "$as_dir/$ac_word$ac_exec_ext"; }; then
++  case $as_dir in #(((
++    '') as_dir=./ ;;
++    */) ;;
++    *) as_dir=$as_dir/ ;;
++  esac
++    for ac_exec_ext in '' $ac_executable_extensions; do
++  if as_fn_executable_p "$as_dir$ac_word$ac_exec_ext"; then
+     ac_cv_prog_ac_ct_CC="gcc"
+-    echo "$as_me:$LINENO: found $as_dir/$ac_word$ac_exec_ext" >&5
++    printf "%s\n" "$as_me:${as_lineno-$LINENO}: found $as_dir$ac_word$ac_exec_ext" >&5
+     break 2
+   fi
+ done
+-done
++  done
+ IFS=$as_save_IFS
+ 
+ fi
+ fi
+ ac_ct_CC=$ac_cv_prog_ac_ct_CC
+ if test -n "$ac_ct_CC"; then
+-  { echo "$as_me:$LINENO: result: $ac_ct_CC" >&5
+-echo "${ECHO_T}$ac_ct_CC" >&6; }
++  { printf "%s\n" "$as_me:${as_lineno-$LINENO}: result: $ac_ct_CC" >&5
++printf "%s\n" "$ac_ct_CC" >&6; }
+ else
+-  { echo "$as_me:$LINENO: result: no" >&5
+-echo "${ECHO_T}no" >&6; }
++  { printf "%s\n" "$as_me:${as_lineno-$LINENO}: result: no" >&5
++printf "%s\n" "no" >&6; }
+ fi
+ 
+   if test "x$ac_ct_CC" = x; then
+@@ -3061,12 +4300,8 @@ fi
+   else
+     case $cross_compiling:$ac_tool_warned in
+ yes:)
+-{ echo "$as_me:$LINENO: WARNING: In the future, Autoconf will not detect cross-tools
+-whose name does not start with the host triplet.  If you think this
+-configuration is useful to you, please write to autoconf@gnu.org." >&5
+-echo "$as_me: WARNING: In the future, Autoconf will not detect cross-tools
+-whose name does not start with the host triplet.  If you think this
+-configuration is useful to you, please write to autoconf@gnu.org." >&2;}
++{ printf "%s\n" "$as_me:${as_lineno-$LINENO}: WARNING: using cross tools not prefixed with host triplet" >&5
++printf "%s\n" "$as_me: WARNING: using cross tools not prefixed with host triplet" >&2;}
+ ac_tool_warned=yes ;;
+ esac
+     CC=$ac_ct_CC
+@@ -3079,11 +4314,12 @@ if test -z "$CC"; then
+           if test -n "$ac_tool_prefix"; then
+     # Extract the first word of "${ac_tool_prefix}cc", so it can be a program name with args.
+ set dummy ${ac_tool_prefix}cc; ac_word=$2
+-{ echo "$as_me:$LINENO: checking for $ac_word" >&5
+-echo $ECHO_N "checking for $ac_word... $ECHO_C" >&6; }
+-if test "${ac_cv_prog_CC+set}" = set; then
+-  echo $ECHO_N "(cached) $ECHO_C" >&6
+-else
++{ printf "%s\n" "$as_me:${as_lineno-$LINENO}: checking for $ac_word" >&5
++printf %s "checking for $ac_word... " >&6; }
++if test ${ac_cv_prog_CC+y}
++then :
++  printf %s "(cached) " >&6
++else $as_nop
+   if test -n "$CC"; then
+   ac_cv_prog_CC="$CC" # Let the user override the test.
+ else
+@@ -3091,26 +4327,30 @@ as_save_IFS=$IFS; IFS=$PATH_SEPARATOR
+ for as_dir in $PATH
+ do
+   IFS=$as_save_IFS
+-  test -z "$as_dir" && as_dir=.
+-  for ac_exec_ext in '' $ac_executable_extensions; do
+-  if { test -f "$as_dir/$ac_word$ac_exec_ext" && $as_test_x "$as_dir/$ac_word$ac_exec_ext"; }; then
++  case $as_dir in #(((
++    '') as_dir=./ ;;
++    */) ;;
++    *) as_dir=$as_dir/ ;;
++  esac
++    for ac_exec_ext in '' $ac_executable_extensions; do
++  if as_fn_executable_p "$as_dir$ac_word$ac_exec_ext"; then
+     ac_cv_prog_CC="${ac_tool_prefix}cc"
+-    echo "$as_me:$LINENO: found $as_dir/$ac_word$ac_exec_ext" >&5
++    printf "%s\n" "$as_me:${as_lineno-$LINENO}: found $as_dir$ac_word$ac_exec_ext" >&5
+     break 2
+   fi
+ done
+-done
++  done
+ IFS=$as_save_IFS
+ 
+ fi
+ fi
+ CC=$ac_cv_prog_CC
+ if test -n "$CC"; then
+-  { echo "$as_me:$LINENO: result: $CC" >&5
+-echo "${ECHO_T}$CC" >&6; }
++  { printf "%s\n" "$as_me:${as_lineno-$LINENO}: result: $CC" >&5
++printf "%s\n" "$CC" >&6; }
+ else
+-  { echo "$as_me:$LINENO: result: no" >&5
+-echo "${ECHO_T}no" >&6; }
++  { printf "%s\n" "$as_me:${as_lineno-$LINENO}: result: no" >&5
++printf "%s\n" "no" >&6; }
+ fi
+ 
+ 
+@@ -3119,11 +4359,12 @@ fi
+ if test -z "$CC"; then
+   # Extract the first word of "cc", so it can be a program name with args.
+ set dummy cc; ac_word=$2
+-{ echo "$as_me:$LINENO: checking for $ac_word" >&5
+-echo $ECHO_N "checking for $ac_word... $ECHO_C" >&6; }
+-if test "${ac_cv_prog_CC+set}" = set; then
+-  echo $ECHO_N "(cached) $ECHO_C" >&6
+-else
++{ printf "%s\n" "$as_me:${as_lineno-$LINENO}: checking for $ac_word" >&5
++printf %s "checking for $ac_word... " >&6; }
++if test ${ac_cv_prog_CC+y}
++then :
++  printf %s "(cached) " >&6
++else $as_nop
+   if test -n "$CC"; then
+   ac_cv_prog_CC="$CC" # Let the user override the test.
+ else
+@@ -3132,19 +4373,23 @@ as_save_IFS=$IFS; IFS=$PATH_SEPARATOR
+ for as_dir in $PATH
+ do
+   IFS=$as_save_IFS
+-  test -z "$as_dir" && as_dir=.
+-  for ac_exec_ext in '' $ac_executable_extensions; do
+-  if { test -f "$as_dir/$ac_word$ac_exec_ext" && $as_test_x "$as_dir/$ac_word$ac_exec_ext"; }; then
+-    if test "$as_dir/$ac_word$ac_exec_ext" = "/usr/ucb/cc"; then
++  case $as_dir in #(((
++    '') as_dir=./ ;;
++    */) ;;
++    *) as_dir=$as_dir/ ;;
++  esac
++    for ac_exec_ext in '' $ac_executable_extensions; do
++  if as_fn_executable_p "$as_dir$ac_word$ac_exec_ext"; then
++    if test "$as_dir$ac_word$ac_exec_ext" = "/usr/ucb/cc"; then
+        ac_prog_rejected=yes
+        continue
+      fi
+     ac_cv_prog_CC="cc"
+-    echo "$as_me:$LINENO: found $as_dir/$ac_word$ac_exec_ext" >&5
++    printf "%s\n" "$as_me:${as_lineno-$LINENO}: found $as_dir$ac_word$ac_exec_ext" >&5
+     break 2
+   fi
+ done
+-done
++  done
+ IFS=$as_save_IFS
+ 
+ if test $ac_prog_rejected = yes; then
+@@ -3156,18 +4401,18 @@ if test $ac_prog_rejected = yes; then
+     # However, it has the same basename, so the bogon will be chosen
+     # first if we set CC to just the basename; use the full file name.
+     shift
+-    ac_cv_prog_CC="$as_dir/$ac_word${1+' '}$@"
++    ac_cv_prog_CC="$as_dir$ac_word${1+' '}$@"
+   fi
+ fi
+ fi
+ fi
+ CC=$ac_cv_prog_CC
+ if test -n "$CC"; then
+-  { echo "$as_me:$LINENO: result: $CC" >&5
+-echo "${ECHO_T}$CC" >&6; }
++  { printf "%s\n" "$as_me:${as_lineno-$LINENO}: result: $CC" >&5
++printf "%s\n" "$CC" >&6; }
+ else
+-  { echo "$as_me:$LINENO: result: no" >&5
+-echo "${ECHO_T}no" >&6; }
++  { printf "%s\n" "$as_me:${as_lineno-$LINENO}: result: no" >&5
++printf "%s\n" "no" >&6; }
+ fi
+ 
+ 
+@@ -3178,11 +4423,12 @@ if test -z "$CC"; then
+   do
+     # Extract the first word of "$ac_tool_prefix$ac_prog", so it can be a program name with args.
+ set dummy $ac_tool_prefix$ac_prog; ac_word=$2
+-{ echo "$as_me:$LINENO: checking for $ac_word" >&5
+-echo $ECHO_N "checking for $ac_word... $ECHO_C" >&6; }
+-if test "${ac_cv_prog_CC+set}" = set; then
+-  echo $ECHO_N "(cached) $ECHO_C" >&6
+-else
++{ printf "%s\n" "$as_me:${as_lineno-$LINENO}: checking for $ac_word" >&5
++printf %s "checking for $ac_word... " >&6; }
++if test ${ac_cv_prog_CC+y}
++then :
++  printf %s "(cached) " >&6
++else $as_nop
+   if test -n "$CC"; then
+   ac_cv_prog_CC="$CC" # Let the user override the test.
+ else
+@@ -3190,26 +4436,30 @@ as_save_IFS=$IFS; IFS=$PATH_SEPARATOR
+ for as_dir in $PATH
+ do
+   IFS=$as_save_IFS
+-  test -z "$as_dir" && as_dir=.
+-  for ac_exec_ext in '' $ac_executable_extensions; do
+-  if { test -f "$as_dir/$ac_word$ac_exec_ext" && $as_test_x "$as_dir/$ac_word$ac_exec_ext"; }; then
++  case $as_dir in #(((
++    '') as_dir=./ ;;
++    */) ;;
++    *) as_dir=$as_dir/ ;;
++  esac
++    for ac_exec_ext in '' $ac_executable_extensions; do
++  if as_fn_executable_p "$as_dir$ac_word$ac_exec_ext"; then
+     ac_cv_prog_CC="$ac_tool_prefix$ac_prog"
+-    echo "$as_me:$LINENO: found $as_dir/$ac_word$ac_exec_ext" >&5
++    printf "%s\n" "$as_me:${as_lineno-$LINENO}: found $as_dir$ac_word$ac_exec_ext" >&5
+     break 2
+   fi
+ done
+-done
++  done
+ IFS=$as_save_IFS
+ 
+ fi
+ fi
+ CC=$ac_cv_prog_CC
+ if test -n "$CC"; then
+-  { echo "$as_me:$LINENO: result: $CC" >&5
+-echo "${ECHO_T}$CC" >&6; }
++  { printf "%s\n" "$as_me:${as_lineno-$LINENO}: result: $CC" >&5
++printf "%s\n" "$CC" >&6; }
+ else
+-  { echo "$as_me:$LINENO: result: no" >&5
+-echo "${ECHO_T}no" >&6; }
++  { printf "%s\n" "$as_me:${as_lineno-$LINENO}: result: no" >&5
++printf "%s\n" "no" >&6; }
+ fi
+ 
+ 
+@@ -3222,11 +4472,12 @@ if test -z "$CC"; then
+ do
+   # Extract the first word of "$ac_prog", so it can be a program name with args.
+ set dummy $ac_prog; ac_word=$2
+-{ echo "$as_me:$LINENO: checking for $ac_word" >&5
+-echo $ECHO_N "checking for $ac_word... $ECHO_C" >&6; }
+-if test "${ac_cv_prog_ac_ct_CC+set}" = set; then
+-  echo $ECHO_N "(cached) $ECHO_C" >&6
+-else
++{ printf "%s\n" "$as_me:${as_lineno-$LINENO}: checking for $ac_word" >&5
++printf %s "checking for $ac_word... " >&6; }
++if test ${ac_cv_prog_ac_ct_CC+y}
++then :
++  printf %s "(cached) " >&6
++else $as_nop
+   if test -n "$ac_ct_CC"; then
+   ac_cv_prog_ac_ct_CC="$ac_ct_CC" # Let the user override the test.
+ else
+@@ -3234,26 +4485,30 @@ as_save_IFS=$IFS; IFS=$PATH_SEPARATOR
+ for as_dir in $PATH
+ do
+   IFS=$as_save_IFS
+-  test -z "$as_dir" && as_dir=.
+-  for ac_exec_ext in '' $ac_executable_extensions; do
+-  if { test -f "$as_dir/$ac_word$ac_exec_ext" && $as_test_x "$as_dir/$ac_word$ac_exec_ext"; }; then
++  case $as_dir in #(((
++    '') as_dir=./ ;;
++    */) ;;
++    *) as_dir=$as_dir/ ;;
++  esac
++    for ac_exec_ext in '' $ac_executable_extensions; do
++  if as_fn_executable_p "$as_dir$ac_word$ac_exec_ext"; then
+     ac_cv_prog_ac_ct_CC="$ac_prog"
+-    echo "$as_me:$LINENO: found $as_dir/$ac_word$ac_exec_ext" >&5
++    printf "%s\n" "$as_me:${as_lineno-$LINENO}: found $as_dir$ac_word$ac_exec_ext" >&5
+     break 2
+   fi
+ done
+-done
++  done
+ IFS=$as_save_IFS
+ 
+ fi
+ fi
+ ac_ct_CC=$ac_cv_prog_ac_ct_CC
+ if test -n "$ac_ct_CC"; then
+-  { echo "$as_me:$LINENO: result: $ac_ct_CC" >&5
+-echo "${ECHO_T}$ac_ct_CC" >&6; }
++  { printf "%s\n" "$as_me:${as_lineno-$LINENO}: result: $ac_ct_CC" >&5
++printf "%s\n" "$ac_ct_CC" >&6; }
+ else
+-  { echo "$as_me:$LINENO: result: no" >&5
+-echo "${ECHO_T}no" >&6; }
++  { printf "%s\n" "$as_me:${as_lineno-$LINENO}: result: no" >&5
++printf "%s\n" "no" >&6; }
+ fi
+ 
+ 
+@@ -3265,12 +4520,8 @@ done
+   else
+     case $cross_compiling:$ac_tool_warned in
+ yes:)
+-{ echo "$as_me:$LINENO: WARNING: In the future, Autoconf will not detect cross-tools
+-whose name does not start with the host triplet.  If you think this
+-configuration is useful to you, please write to autoconf@gnu.org." >&5
+-echo "$as_me: WARNING: In the future, Autoconf will not detect cross-tools
+-whose name does not start with the host triplet.  If you think this
+-configuration is useful to you, please write to autoconf@gnu.org." >&2;}
++{ printf "%s\n" "$as_me:${as_lineno-$LINENO}: WARNING: using cross tools not prefixed with host triplet" >&5
++printf "%s\n" "$as_me: WARNING: using cross tools not prefixed with host triplet" >&2;}
+ ac_tool_warned=yes ;;
+ esac
+     CC=$ac_ct_CC
+@@ -3278,62 +4529,153 @@ esac
+ fi
+ 
+ fi
++if test -z "$CC"; then
++  if test -n "$ac_tool_prefix"; then
++  # Extract the first word of "${ac_tool_prefix}clang", so it can be a program name with args.
++set dummy ${ac_tool_prefix}clang; ac_word=$2
++{ printf "%s\n" "$as_me:${as_lineno-$LINENO}: checking for $ac_word" >&5
++printf %s "checking for $ac_word... " >&6; }
++if test ${ac_cv_prog_CC+y}
++then :
++  printf %s "(cached) " >&6
++else $as_nop
++  if test -n "$CC"; then
++  ac_cv_prog_CC="$CC" # Let the user override the test.
++else
++as_save_IFS=$IFS; IFS=$PATH_SEPARATOR
++for as_dir in $PATH
++do
++  IFS=$as_save_IFS
++  case $as_dir in #(((
++    '') as_dir=./ ;;
++    */) ;;
++    *) as_dir=$as_dir/ ;;
++  esac
++    for ac_exec_ext in '' $ac_executable_extensions; do
++  if as_fn_executable_p "$as_dir$ac_word$ac_exec_ext"; then
++    ac_cv_prog_CC="${ac_tool_prefix}clang"
++    printf "%s\n" "$as_me:${as_lineno-$LINENO}: found $as_dir$ac_word$ac_exec_ext" >&5
++    break 2
++  fi
++done
++  done
++IFS=$as_save_IFS
+ 
++fi
++fi
++CC=$ac_cv_prog_CC
++if test -n "$CC"; then
++  { printf "%s\n" "$as_me:${as_lineno-$LINENO}: result: $CC" >&5
++printf "%s\n" "$CC" >&6; }
++else
++  { printf "%s\n" "$as_me:${as_lineno-$LINENO}: result: no" >&5
++printf "%s\n" "no" >&6; }
++fi
+ 
+-test -z "$CC" && { { echo "$as_me:$LINENO: error: no acceptable C compiler found in \$PATH
+-See \`config.log' for more details." >&5
+-echo "$as_me: error: no acceptable C compiler found in \$PATH
+-See \`config.log' for more details." >&2;}
+-   { (exit 1); exit 1; }; }
+ 
+-# Provide some information about the compiler.
+-echo "$as_me:$LINENO: checking for C compiler version" >&5
+-ac_compiler=`set X $ac_compile; echo $2`
+-{ (ac_try="$ac_compiler --version >&5"
+-case "(($ac_try" in
+-  *\"* | *\`* | *\\*) ac_try_echo=\$ac_try;;
+-  *) ac_try_echo=$ac_try;;
+-esac
+-eval "echo \"\$as_me:$LINENO: $ac_try_echo\"") >&5
+-  (eval "$ac_compiler --version >&5") 2>&5
+-  ac_status=$?
+-  echo "$as_me:$LINENO: \$? = $ac_status" >&5
+-  (exit $ac_status); }
+-{ (ac_try="$ac_compiler -v >&5"
+-case "(($ac_try" in
+-  *\"* | *\`* | *\\*) ac_try_echo=\$ac_try;;
+-  *) ac_try_echo=$ac_try;;
++fi
++if test -z "$ac_cv_prog_CC"; then
++  ac_ct_CC=$CC
++  # Extract the first word of "clang", so it can be a program name with args.
++set dummy clang; ac_word=$2
++{ printf "%s\n" "$as_me:${as_lineno-$LINENO}: checking for $ac_word" >&5
++printf %s "checking for $ac_word... " >&6; }
++if test ${ac_cv_prog_ac_ct_CC+y}
++then :
++  printf %s "(cached) " >&6
++else $as_nop
++  if test -n "$ac_ct_CC"; then
++  ac_cv_prog_ac_ct_CC="$ac_ct_CC" # Let the user override the test.
++else
++as_save_IFS=$IFS; IFS=$PATH_SEPARATOR
++for as_dir in $PATH
++do
++  IFS=$as_save_IFS
++  case $as_dir in #(((
++    '') as_dir=./ ;;
++    */) ;;
++    *) as_dir=$as_dir/ ;;
++  esac
++    for ac_exec_ext in '' $ac_executable_extensions; do
++  if as_fn_executable_p "$as_dir$ac_word$ac_exec_ext"; then
++    ac_cv_prog_ac_ct_CC="clang"
++    printf "%s\n" "$as_me:${as_lineno-$LINENO}: found $as_dir$ac_word$ac_exec_ext" >&5
++    break 2
++  fi
++done
++  done
++IFS=$as_save_IFS
++
++fi
++fi
++ac_ct_CC=$ac_cv_prog_ac_ct_CC
++if test -n "$ac_ct_CC"; then
++  { printf "%s\n" "$as_me:${as_lineno-$LINENO}: result: $ac_ct_CC" >&5
++printf "%s\n" "$ac_ct_CC" >&6; }
++else
++  { printf "%s\n" "$as_me:${as_lineno-$LINENO}: result: no" >&5
++printf "%s\n" "no" >&6; }
++fi
++
++  if test "x$ac_ct_CC" = x; then
++    CC=""
++  else
++    case $cross_compiling:$ac_tool_warned in
++yes:)
++{ printf "%s\n" "$as_me:${as_lineno-$LINENO}: WARNING: using cross tools not prefixed with host triplet" >&5
++printf "%s\n" "$as_me: WARNING: using cross tools not prefixed with host triplet" >&2;}
++ac_tool_warned=yes ;;
+ esac
+-eval "echo \"\$as_me:$LINENO: $ac_try_echo\"") >&5
+-  (eval "$ac_compiler -v >&5") 2>&5
+-  ac_status=$?
+-  echo "$as_me:$LINENO: \$? = $ac_status" >&5
+-  (exit $ac_status); }
+-{ (ac_try="$ac_compiler -V >&5"
++    CC=$ac_ct_CC
++  fi
++else
++  CC="$ac_cv_prog_CC"
++fi
++
++fi
++
++
++test -z "$CC" && { { printf "%s\n" "$as_me:${as_lineno-$LINENO}: error: in \`$ac_pwd':" >&5
++printf "%s\n" "$as_me: error: in \`$ac_pwd':" >&2;}
++as_fn_error $? "no acceptable C compiler found in \$PATH
++See \`config.log' for more details" "$LINENO" 5; }
++
++# Provide some information about the compiler.
++printf "%s\n" "$as_me:${as_lineno-$LINENO}: checking for C compiler version" >&5
++set X $ac_compile
++ac_compiler=$2
++for ac_option in --version -v -V -qversion -version; do
++  { { ac_try="$ac_compiler $ac_option >&5"
+ case "(($ac_try" in
+   *\"* | *\`* | *\\*) ac_try_echo=\$ac_try;;
+   *) ac_try_echo=$ac_try;;
+ esac
+-eval "echo \"\$as_me:$LINENO: $ac_try_echo\"") >&5
+-  (eval "$ac_compiler -V >&5") 2>&5
++eval ac_try_echo="\"\$as_me:${as_lineno-$LINENO}: $ac_try_echo\""
++printf "%s\n" "$ac_try_echo"; } >&5
++  (eval "$ac_compiler $ac_option >&5") 2>conftest.err
+   ac_status=$?
+-  echo "$as_me:$LINENO: \$? = $ac_status" >&5
+-  (exit $ac_status); }
++  if test -s conftest.err; then
++    sed '10a\
++... rest of stderr output deleted ...
++         10q' conftest.err >conftest.er1
++    cat conftest.er1 >&5
++  fi
++  rm -f conftest.er1 conftest.err
++  printf "%s\n" "$as_me:${as_lineno-$LINENO}: \$? = $ac_status" >&5
++  test $ac_status = 0; }
++done
+ 
+-{ echo "$as_me:$LINENO: checking whether we are using the GNU C compiler" >&5
+-echo $ECHO_N "checking whether we are using the GNU C compiler... $ECHO_C" >&6; }
+-if test "${ac_cv_c_compiler_gnu+set}" = set; then
+-  echo $ECHO_N "(cached) $ECHO_C" >&6
+-else
+-  cat >conftest.$ac_ext <<_ACEOF
+-/* confdefs.h.  */
+-_ACEOF
+-cat confdefs.h >>conftest.$ac_ext
+-cat >>conftest.$ac_ext <<_ACEOF
++{ printf "%s\n" "$as_me:${as_lineno-$LINENO}: checking whether the compiler supports GNU C" >&5
++printf %s "checking whether the compiler supports GNU C... " >&6; }
++if test ${ac_cv_c_compiler_gnu+y}
++then :
++  printf %s "(cached) " >&6
++else $as_nop
++  cat confdefs.h - <<_ACEOF >conftest.$ac_ext
+ /* end confdefs.h.  */
+ 
+ int
+-main ()
++main (void)
+ {
+ #ifndef __GNUC__
+        choke me
+@@ -3343,178 +4685,95 @@ main ()
+   return 0;
+ }
+ _ACEOF
+-rm -f conftest.$ac_objext
+-if { (ac_try="$ac_compile"
+-case "(($ac_try" in
+-  *\"* | *\`* | *\\*) ac_try_echo=\$ac_try;;
+-  *) ac_try_echo=$ac_try;;
+-esac
+-eval "echo \"\$as_me:$LINENO: $ac_try_echo\"") >&5
+-  (eval "$ac_compile") 2>conftest.er1
+-  ac_status=$?
+-  grep -v '^ *+' conftest.er1 >conftest.err
+-  rm -f conftest.er1
+-  cat conftest.err >&5
+-  echo "$as_me:$LINENO: \$? = $ac_status" >&5
+-  (exit $ac_status); } && {
+-	 test -z "$ac_c_werror_flag" ||
+-	 test ! -s conftest.err
+-       } && test -s conftest.$ac_objext; then
++if ac_fn_c_try_compile "$LINENO"
++then :
+   ac_compiler_gnu=yes
+-else
+-  echo "$as_me: failed program was:" >&5
+-sed 's/^/| /' conftest.$ac_ext >&5
+-
+-	ac_compiler_gnu=no
++else $as_nop
++  ac_compiler_gnu=no
+ fi
+-
+-rm -f core conftest.err conftest.$ac_objext conftest.$ac_ext
++rm -f core conftest.err conftest.$ac_objext conftest.beam conftest.$ac_ext
+ ac_cv_c_compiler_gnu=$ac_compiler_gnu
+ 
+ fi
+-{ echo "$as_me:$LINENO: result: $ac_cv_c_compiler_gnu" >&5
+-echo "${ECHO_T}$ac_cv_c_compiler_gnu" >&6; }
+-GCC=`test $ac_compiler_gnu = yes && echo yes`
+-ac_test_CFLAGS=${CFLAGS+set}
+-ac_save_CFLAGS=$CFLAGS
+-{ echo "$as_me:$LINENO: checking whether $CC accepts -g" >&5
+-echo $ECHO_N "checking whether $CC accepts -g... $ECHO_C" >&6; }
+-if test "${ac_cv_prog_cc_g+set}" = set; then
+-  echo $ECHO_N "(cached) $ECHO_C" >&6
++{ printf "%s\n" "$as_me:${as_lineno-$LINENO}: result: $ac_cv_c_compiler_gnu" >&5
++printf "%s\n" "$ac_cv_c_compiler_gnu" >&6; }
++ac_compiler_gnu=$ac_cv_c_compiler_gnu
++
++if test $ac_compiler_gnu = yes; then
++  GCC=yes
+ else
++  GCC=
++fi
++ac_test_CFLAGS=${CFLAGS+y}
++ac_save_CFLAGS=$CFLAGS
++{ printf "%s\n" "$as_me:${as_lineno-$LINENO}: checking whether $CC accepts -g" >&5
++printf %s "checking whether $CC accepts -g... " >&6; }
++if test ${ac_cv_prog_cc_g+y}
++then :
++  printf %s "(cached) " >&6
++else $as_nop
+   ac_save_c_werror_flag=$ac_c_werror_flag
+    ac_c_werror_flag=yes
+    ac_cv_prog_cc_g=no
+    CFLAGS="-g"
+-   cat >conftest.$ac_ext <<_ACEOF
+-/* confdefs.h.  */
+-_ACEOF
+-cat confdefs.h >>conftest.$ac_ext
+-cat >>conftest.$ac_ext <<_ACEOF
++   cat confdefs.h - <<_ACEOF >conftest.$ac_ext
+ /* end confdefs.h.  */
+ 
+ int
+-main ()
++main (void)
+ {
+ 
+   ;
+   return 0;
+ }
+ _ACEOF
+-rm -f conftest.$ac_objext
+-if { (ac_try="$ac_compile"
+-case "(($ac_try" in
+-  *\"* | *\`* | *\\*) ac_try_echo=\$ac_try;;
+-  *) ac_try_echo=$ac_try;;
+-esac
+-eval "echo \"\$as_me:$LINENO: $ac_try_echo\"") >&5
+-  (eval "$ac_compile") 2>conftest.er1
+-  ac_status=$?
+-  grep -v '^ *+' conftest.er1 >conftest.err
+-  rm -f conftest.er1
+-  cat conftest.err >&5
+-  echo "$as_me:$LINENO: \$? = $ac_status" >&5
+-  (exit $ac_status); } && {
+-	 test -z "$ac_c_werror_flag" ||
+-	 test ! -s conftest.err
+-       } && test -s conftest.$ac_objext; then
++if ac_fn_c_try_compile "$LINENO"
++then :
+   ac_cv_prog_cc_g=yes
+-else
+-  echo "$as_me: failed program was:" >&5
+-sed 's/^/| /' conftest.$ac_ext >&5
+-
+-	CFLAGS=""
+-      cat >conftest.$ac_ext <<_ACEOF
+-/* confdefs.h.  */
+-_ACEOF
+-cat confdefs.h >>conftest.$ac_ext
+-cat >>conftest.$ac_ext <<_ACEOF
++else $as_nop
++  CFLAGS=""
++      cat confdefs.h - <<_ACEOF >conftest.$ac_ext
+ /* end confdefs.h.  */
+ 
+ int
+-main ()
++main (void)
+ {
+ 
+-  ;
+-  return 0;
+-}
+-_ACEOF
+-rm -f conftest.$ac_objext
+-if { (ac_try="$ac_compile"
+-case "(($ac_try" in
+-  *\"* | *\`* | *\\*) ac_try_echo=\$ac_try;;
+-  *) ac_try_echo=$ac_try;;
+-esac
+-eval "echo \"\$as_me:$LINENO: $ac_try_echo\"") >&5
+-  (eval "$ac_compile") 2>conftest.er1
+-  ac_status=$?
+-  grep -v '^ *+' conftest.er1 >conftest.err
+-  rm -f conftest.er1
+-  cat conftest.err >&5
+-  echo "$as_me:$LINENO: \$? = $ac_status" >&5
+-  (exit $ac_status); } && {
+-	 test -z "$ac_c_werror_flag" ||
+-	 test ! -s conftest.err
+-       } && test -s conftest.$ac_objext; then
+-  :
+-else
+-  echo "$as_me: failed program was:" >&5
+-sed 's/^/| /' conftest.$ac_ext >&5
+-
+-	ac_c_werror_flag=$ac_save_c_werror_flag
+-	 CFLAGS="-g"
+-	 cat >conftest.$ac_ext <<_ACEOF
+-/* confdefs.h.  */
++  ;
++  return 0;
++}
+ _ACEOF
+-cat confdefs.h >>conftest.$ac_ext
+-cat >>conftest.$ac_ext <<_ACEOF
++if ac_fn_c_try_compile "$LINENO"
++then :
++
++else $as_nop
++  ac_c_werror_flag=$ac_save_c_werror_flag
++	 CFLAGS="-g"
++	 cat confdefs.h - <<_ACEOF >conftest.$ac_ext
+ /* end confdefs.h.  */
+ 
+ int
+-main ()
++main (void)
+ {
+ 
+   ;
+   return 0;
+ }
+ _ACEOF
+-rm -f conftest.$ac_objext
+-if { (ac_try="$ac_compile"
+-case "(($ac_try" in
+-  *\"* | *\`* | *\\*) ac_try_echo=\$ac_try;;
+-  *) ac_try_echo=$ac_try;;
+-esac
+-eval "echo \"\$as_me:$LINENO: $ac_try_echo\"") >&5
+-  (eval "$ac_compile") 2>conftest.er1
+-  ac_status=$?
+-  grep -v '^ *+' conftest.er1 >conftest.err
+-  rm -f conftest.er1
+-  cat conftest.err >&5
+-  echo "$as_me:$LINENO: \$? = $ac_status" >&5
+-  (exit $ac_status); } && {
+-	 test -z "$ac_c_werror_flag" ||
+-	 test ! -s conftest.err
+-       } && test -s conftest.$ac_objext; then
++if ac_fn_c_try_compile "$LINENO"
++then :
+   ac_cv_prog_cc_g=yes
+-else
+-  echo "$as_me: failed program was:" >&5
+-sed 's/^/| /' conftest.$ac_ext >&5
+-
+-
+ fi
+-
+-rm -f core conftest.err conftest.$ac_objext conftest.$ac_ext
++rm -f core conftest.err conftest.$ac_objext conftest.beam conftest.$ac_ext
+ fi
+-
+-rm -f core conftest.err conftest.$ac_objext conftest.$ac_ext
++rm -f core conftest.err conftest.$ac_objext conftest.beam conftest.$ac_ext
+ fi
+-
+-rm -f core conftest.err conftest.$ac_objext conftest.$ac_ext
++rm -f core conftest.err conftest.$ac_objext conftest.beam conftest.$ac_ext
+    ac_c_werror_flag=$ac_save_c_werror_flag
+ fi
+-{ echo "$as_me:$LINENO: result: $ac_cv_prog_cc_g" >&5
+-echo "${ECHO_T}$ac_cv_prog_cc_g" >&6; }
+-if test "$ac_test_CFLAGS" = set; then
++{ printf "%s\n" "$as_me:${as_lineno-$LINENO}: result: $ac_cv_prog_cc_g" >&5
++printf "%s\n" "$ac_cv_prog_cc_g" >&6; }
++if test $ac_test_CFLAGS; then
+   CFLAGS=$ac_save_CFLAGS
+ elif test $ac_cv_prog_cc_g = yes; then
+   if test "$GCC" = yes; then
+@@ -3529,120 +4788,145 @@ else
+     CFLAGS=
+   fi
+ fi
+-{ echo "$as_me:$LINENO: checking for $CC option to accept ISO C89" >&5
+-echo $ECHO_N "checking for $CC option to accept ISO C89... $ECHO_C" >&6; }
+-if test "${ac_cv_prog_cc_c89+set}" = set; then
+-  echo $ECHO_N "(cached) $ECHO_C" >&6
+-else
+-  ac_cv_prog_cc_c89=no
++ac_prog_cc_stdc=no
++if test x$ac_prog_cc_stdc = xno
++then :
++  { printf "%s\n" "$as_me:${as_lineno-$LINENO}: checking for $CC option to enable C11 features" >&5
++printf %s "checking for $CC option to enable C11 features... " >&6; }
++if test ${ac_cv_prog_cc_c11+y}
++then :
++  printf %s "(cached) " >&6
++else $as_nop
++  ac_cv_prog_cc_c11=no
+ ac_save_CC=$CC
+-cat >conftest.$ac_ext <<_ACEOF
+-/* confdefs.h.  */
+-_ACEOF
+-cat confdefs.h >>conftest.$ac_ext
+-cat >>conftest.$ac_ext <<_ACEOF
++cat confdefs.h - <<_ACEOF >conftest.$ac_ext
+ /* end confdefs.h.  */
+-#include <stdarg.h>
+-#include <stdio.h>
+-#include <sys/types.h>
+-#include <sys/stat.h>
+-/* Most of the following tests are stolen from RCS 5.7's src/conf.sh.  */
+-struct buf { int x; };
+-FILE * (*rcsopen) (struct buf *, struct stat *, int);
+-static char *e (p, i)
+-     char **p;
+-     int i;
+-{
+-  return p[i];
+-}
+-static char *f (char * (*g) (char **, int), char **p, ...)
+-{
+-  char *s;
+-  va_list v;
+-  va_start (v,p);
+-  s = g (p, va_arg (v,int));
+-  va_end (v);
+-  return s;
+-}
+-
+-/* OSF 4.0 Compaq cc is some sort of almost-ANSI by default.  It has
+-   function prototypes and stuff, but not '\xHH' hex character constants.
+-   These don't provoke an error unfortunately, instead are silently treated
+-   as 'x'.  The following induces an error, until -std is added to get
+-   proper ANSI mode.  Curiously '\x00'!='x' always comes out true, for an
+-   array size at least.  It's necessary to write '\x00'==0 to get something
+-   that's true only with -std.  */
+-int osf4_cc_array ['\x00' == 0 ? 1 : -1];
++$ac_c_conftest_c11_program
++_ACEOF
++for ac_arg in '' -std=gnu11
++do
++  CC="$ac_save_CC $ac_arg"
++  if ac_fn_c_try_compile "$LINENO"
++then :
++  ac_cv_prog_cc_c11=$ac_arg
++fi
++rm -f core conftest.err conftest.$ac_objext conftest.beam
++  test "x$ac_cv_prog_cc_c11" != "xno" && break
++done
++rm -f conftest.$ac_ext
++CC=$ac_save_CC
++fi
+ 
+-/* IBM C 6 for AIX is almost-ANSI by default, but it replaces macro parameters
+-   inside strings and character constants.  */
+-#define FOO(x) 'x'
+-int xlc6_cc_array[FOO(a) == 'x' ? 1 : -1];
++if test "x$ac_cv_prog_cc_c11" = xno
++then :
++  { printf "%s\n" "$as_me:${as_lineno-$LINENO}: result: unsupported" >&5
++printf "%s\n" "unsupported" >&6; }
++else $as_nop
++  if test "x$ac_cv_prog_cc_c11" = x
++then :
++  { printf "%s\n" "$as_me:${as_lineno-$LINENO}: result: none needed" >&5
++printf "%s\n" "none needed" >&6; }
++else $as_nop
++  { printf "%s\n" "$as_me:${as_lineno-$LINENO}: result: $ac_cv_prog_cc_c11" >&5
++printf "%s\n" "$ac_cv_prog_cc_c11" >&6; }
++     CC="$CC $ac_cv_prog_cc_c11"
++fi
++  ac_cv_prog_cc_stdc=$ac_cv_prog_cc_c11
++  ac_prog_cc_stdc=c11
++fi
++fi
++if test x$ac_prog_cc_stdc = xno
++then :
++  { printf "%s\n" "$as_me:${as_lineno-$LINENO}: checking for $CC option to enable C99 features" >&5
++printf %s "checking for $CC option to enable C99 features... " >&6; }
++if test ${ac_cv_prog_cc_c99+y}
++then :
++  printf %s "(cached) " >&6
++else $as_nop
++  ac_cv_prog_cc_c99=no
++ac_save_CC=$CC
++cat confdefs.h - <<_ACEOF >conftest.$ac_ext
++/* end confdefs.h.  */
++$ac_c_conftest_c99_program
++_ACEOF
++for ac_arg in '' -std=gnu99 -std=c99 -c99 -qlanglvl=extc1x -qlanglvl=extc99 -AC99 -D_STDC_C99=
++do
++  CC="$ac_save_CC $ac_arg"
++  if ac_fn_c_try_compile "$LINENO"
++then :
++  ac_cv_prog_cc_c99=$ac_arg
++fi
++rm -f core conftest.err conftest.$ac_objext conftest.beam
++  test "x$ac_cv_prog_cc_c99" != "xno" && break
++done
++rm -f conftest.$ac_ext
++CC=$ac_save_CC
++fi
+ 
+-int test (int i, double x);
+-struct s1 {int (*f) (int a);};
+-struct s2 {int (*f) (double a);};
+-int pairnames (int, char **, FILE *(*)(struct buf *, struct stat *, int), int, int);
+-int argc;
+-char **argv;
+-int
+-main ()
+-{
+-return f (e, argv, 0) != argv[0]  ||  f (e, argv, 1) != argv[1];
+-  ;
+-  return 0;
+-}
++if test "x$ac_cv_prog_cc_c99" = xno
++then :
++  { printf "%s\n" "$as_me:${as_lineno-$LINENO}: result: unsupported" >&5
++printf "%s\n" "unsupported" >&6; }
++else $as_nop
++  if test "x$ac_cv_prog_cc_c99" = x
++then :
++  { printf "%s\n" "$as_me:${as_lineno-$LINENO}: result: none needed" >&5
++printf "%s\n" "none needed" >&6; }
++else $as_nop
++  { printf "%s\n" "$as_me:${as_lineno-$LINENO}: result: $ac_cv_prog_cc_c99" >&5
++printf "%s\n" "$ac_cv_prog_cc_c99" >&6; }
++     CC="$CC $ac_cv_prog_cc_c99"
++fi
++  ac_cv_prog_cc_stdc=$ac_cv_prog_cc_c99
++  ac_prog_cc_stdc=c99
++fi
++fi
++if test x$ac_prog_cc_stdc = xno
++then :
++  { printf "%s\n" "$as_me:${as_lineno-$LINENO}: checking for $CC option to enable C89 features" >&5
++printf %s "checking for $CC option to enable C89 features... " >&6; }
++if test ${ac_cv_prog_cc_c89+y}
++then :
++  printf %s "(cached) " >&6
++else $as_nop
++  ac_cv_prog_cc_c89=no
++ac_save_CC=$CC
++cat confdefs.h - <<_ACEOF >conftest.$ac_ext
++/* end confdefs.h.  */
++$ac_c_conftest_c89_program
+ _ACEOF
+-for ac_arg in '' -qlanglvl=extc89 -qlanglvl=ansi -std \
+-	-Ae "-Aa -D_HPUX_SOURCE" "-Xc -D__EXTENSIONS__"
++for ac_arg in '' -qlanglvl=extc89 -qlanglvl=ansi -std -Ae "-Aa -D_HPUX_SOURCE" "-Xc -D__EXTENSIONS__"
+ do
+   CC="$ac_save_CC $ac_arg"
+-  rm -f conftest.$ac_objext
+-if { (ac_try="$ac_compile"
+-case "(($ac_try" in
+-  *\"* | *\`* | *\\*) ac_try_echo=\$ac_try;;
+-  *) ac_try_echo=$ac_try;;
+-esac
+-eval "echo \"\$as_me:$LINENO: $ac_try_echo\"") >&5
+-  (eval "$ac_compile") 2>conftest.er1
+-  ac_status=$?
+-  grep -v '^ *+' conftest.er1 >conftest.err
+-  rm -f conftest.er1
+-  cat conftest.err >&5
+-  echo "$as_me:$LINENO: \$? = $ac_status" >&5
+-  (exit $ac_status); } && {
+-	 test -z "$ac_c_werror_flag" ||
+-	 test ! -s conftest.err
+-       } && test -s conftest.$ac_objext; then
++  if ac_fn_c_try_compile "$LINENO"
++then :
+   ac_cv_prog_cc_c89=$ac_arg
+-else
+-  echo "$as_me: failed program was:" >&5
+-sed 's/^/| /' conftest.$ac_ext >&5
+-
+-
+ fi
+-
+-rm -f core conftest.err conftest.$ac_objext
++rm -f core conftest.err conftest.$ac_objext conftest.beam
+   test "x$ac_cv_prog_cc_c89" != "xno" && break
+ done
+ rm -f conftest.$ac_ext
+ CC=$ac_save_CC
+-
+ fi
+-# AC_CACHE_VAL
+-case "x$ac_cv_prog_cc_c89" in
+-  x)
+-    { echo "$as_me:$LINENO: result: none needed" >&5
+-echo "${ECHO_T}none needed" >&6; } ;;
+-  xno)
+-    { echo "$as_me:$LINENO: result: unsupported" >&5
+-echo "${ECHO_T}unsupported" >&6; } ;;
+-  *)
+-    CC="$CC $ac_cv_prog_cc_c89"
+-    { echo "$as_me:$LINENO: result: $ac_cv_prog_cc_c89" >&5
+-echo "${ECHO_T}$ac_cv_prog_cc_c89" >&6; } ;;
+-esac
+ 
++if test "x$ac_cv_prog_cc_c89" = xno
++then :
++  { printf "%s\n" "$as_me:${as_lineno-$LINENO}: result: unsupported" >&5
++printf "%s\n" "unsupported" >&6; }
++else $as_nop
++  if test "x$ac_cv_prog_cc_c89" = x
++then :
++  { printf "%s\n" "$as_me:${as_lineno-$LINENO}: result: none needed" >&5
++printf "%s\n" "none needed" >&6; }
++else $as_nop
++  { printf "%s\n" "$as_me:${as_lineno-$LINENO}: result: $ac_cv_prog_cc_c89" >&5
++printf "%s\n" "$ac_cv_prog_cc_c89" >&6; }
++     CC="$CC $ac_cv_prog_cc_c89"
++fi
++  ac_cv_prog_cc_stdc=$ac_cv_prog_cc_c89
++  ac_prog_cc_stdc=c89
++fi
++fi
+ 
+ ac_ext=c
+ ac_cpp='$CPP $CPPFLAGS'
+@@ -3653,85 +4937,61 @@ ac_compiler_gnu=$ac_cv_c_compiler_gnu
+ fi
+ 
+ 
+-{ echo "$as_me:$LINENO: checking for library containing strerror" >&5
+-echo $ECHO_N "checking for library containing strerror... $ECHO_C" >&6; }
+-if test "${ac_cv_search_strerror+set}" = set; then
+-  echo $ECHO_N "(cached) $ECHO_C" >&6
+-else
++{ printf "%s\n" "$as_me:${as_lineno-$LINENO}: checking for library containing strerror" >&5
++printf %s "checking for library containing strerror... " >&6; }
++if test ${ac_cv_search_strerror+y}
++then :
++  printf %s "(cached) " >&6
++else $as_nop
+   ac_func_search_save_LIBS=$LIBS
+-cat >conftest.$ac_ext <<_ACEOF
+-/* confdefs.h.  */
+-_ACEOF
+-cat confdefs.h >>conftest.$ac_ext
+-cat >>conftest.$ac_ext <<_ACEOF
++cat confdefs.h - <<_ACEOF >conftest.$ac_ext
+ /* end confdefs.h.  */
+ 
+ /* Override any GCC internal prototype to avoid an error.
+    Use char because int might match the return type of a GCC
+    builtin and then its argument prototype would still apply.  */
+-#ifdef __cplusplus
+-extern "C"
+-#endif
+ char strerror ();
+ int
+-main ()
++main (void)
+ {
+ return strerror ();
+   ;
+   return 0;
+ }
+ _ACEOF
+-for ac_lib in '' cposix; do
++for ac_lib in '' cposix
++do
+   if test -z "$ac_lib"; then
+     ac_res="none required"
+   else
+     ac_res=-l$ac_lib
+     LIBS="-l$ac_lib  $ac_func_search_save_LIBS"
+   fi
+-  rm -f conftest.$ac_objext conftest$ac_exeext
+-if { (ac_try="$ac_link"
+-case "(($ac_try" in
+-  *\"* | *\`* | *\\*) ac_try_echo=\$ac_try;;
+-  *) ac_try_echo=$ac_try;;
+-esac
+-eval "echo \"\$as_me:$LINENO: $ac_try_echo\"") >&5
+-  (eval "$ac_link") 2>conftest.er1
+-  ac_status=$?
+-  grep -v '^ *+' conftest.er1 >conftest.err
+-  rm -f conftest.er1
+-  cat conftest.err >&5
+-  echo "$as_me:$LINENO: \$? = $ac_status" >&5
+-  (exit $ac_status); } && {
+-	 test -z "$ac_c_werror_flag" ||
+-	 test ! -s conftest.err
+-       } && test -s conftest$ac_exeext &&
+-       $as_test_x conftest$ac_exeext; then
++  if ac_fn_c_try_link "$LINENO"
++then :
+   ac_cv_search_strerror=$ac_res
+-else
+-  echo "$as_me: failed program was:" >&5
+-sed 's/^/| /' conftest.$ac_ext >&5
+-
+-
+ fi
+-
+-rm -f core conftest.err conftest.$ac_objext conftest_ipa8_conftest.oo \
+-      conftest$ac_exeext
+-  if test "${ac_cv_search_strerror+set}" = set; then
++rm -f core conftest.err conftest.$ac_objext conftest.beam \
++    conftest$ac_exeext
++  if test ${ac_cv_search_strerror+y}
++then :
+   break
+ fi
+ done
+-if test "${ac_cv_search_strerror+set}" = set; then
+-  :
+-else
++if test ${ac_cv_search_strerror+y}
++then :
++
++else $as_nop
+   ac_cv_search_strerror=no
+ fi
+ rm conftest.$ac_ext
+ LIBS=$ac_func_search_save_LIBS
+ fi
+-{ echo "$as_me:$LINENO: result: $ac_cv_search_strerror" >&5
+-echo "${ECHO_T}$ac_cv_search_strerror" >&6; }
++{ printf "%s\n" "$as_me:${as_lineno-$LINENO}: result: $ac_cv_search_strerror" >&5
++printf "%s\n" "$ac_cv_search_strerror" >&6; }
+ ac_res=$ac_cv_search_strerror
+-if test "$ac_res" != no; then
++if test "$ac_res" != no
++then :
+   test "$ac_res" = "none required" || LIBS="$ac_res $LIBS"
+ 
+ fi
+@@ -3743,11 +5003,12 @@ for ac_prog in $with_AR ar
+ do
+   # Extract the first word of "$ac_prog", so it can be a program name with args.
+ set dummy $ac_prog; ac_word=$2
+-{ echo "$as_me:$LINENO: checking for $ac_word" >&5
+-echo $ECHO_N "checking for $ac_word... $ECHO_C" >&6; }
+-if test "${ac_cv_prog_AR+set}" = set; then
+-  echo $ECHO_N "(cached) $ECHO_C" >&6
+-else
++{ printf "%s\n" "$as_me:${as_lineno-$LINENO}: checking for $ac_word" >&5
++printf %s "checking for $ac_word... " >&6; }
++if test ${ac_cv_prog_AR+y}
++then :
++  printf %s "(cached) " >&6
++else $as_nop
+   if test -n "$AR"; then
+   ac_cv_prog_AR="$AR" # Let the user override the test.
+ else
+@@ -3755,26 +5016,30 @@ as_save_IFS=$IFS; IFS=$PATH_SEPARATOR
+ for as_dir in $PATH
+ do
+   IFS=$as_save_IFS
+-  test -z "$as_dir" && as_dir=.
+-  for ac_exec_ext in '' $ac_executable_extensions; do
+-  if { test -f "$as_dir/$ac_word$ac_exec_ext" && $as_test_x "$as_dir/$ac_word$ac_exec_ext"; }; then
++  case $as_dir in #(((
++    '') as_dir=./ ;;
++    */) ;;
++    *) as_dir=$as_dir/ ;;
++  esac
++    for ac_exec_ext in '' $ac_executable_extensions; do
++  if as_fn_executable_p "$as_dir$ac_word$ac_exec_ext"; then
+     ac_cv_prog_AR="$ac_prog"
+-    echo "$as_me:$LINENO: found $as_dir/$ac_word$ac_exec_ext" >&5
++    printf "%s\n" "$as_me:${as_lineno-$LINENO}: found $as_dir$ac_word$ac_exec_ext" >&5
+     break 2
+   fi
+ done
+-done
++  done
+ IFS=$as_save_IFS
+ 
+ fi
+ fi
+ AR=$ac_cv_prog_AR
+ if test -n "$AR"; then
+-  { echo "$as_me:$LINENO: result: $AR" >&5
+-echo "${ECHO_T}$AR" >&6; }
++  { printf "%s\n" "$as_me:${as_lineno-$LINENO}: result: $AR" >&5
++printf "%s\n" "$AR" >&6; }
+ else
+-  { echo "$as_me:$LINENO: result: no" >&5
+-echo "${ECHO_T}no" >&6; }
++  { printf "%s\n" "$as_me:${as_lineno-$LINENO}: result: no" >&5
++printf "%s\n" "no" >&6; }
+ fi
+ 
+ 
+@@ -3782,9 +5047,7 @@ fi
+ done
+ 
+ if test -z "$AR"; then
+-   { { echo "$as_me:$LINENO: error: ar archiver not found - specify with --with-m4=ARG" >&5
+-echo "$as_me: error: ar archiver not found - specify with --with-m4=ARG" >&2;}
+-   { (exit 1); exit 1; }; }
++   as_fn_error $? "ar archiver not found - specify with --with-m4=ARG" "$LINENO" 5
+ fi
+ 
+ 
+@@ -3792,11 +5055,12 @@ for ac_prog in $with_M4 gm4 m4
+ do
+   # Extract the first word of "$ac_prog", so it can be a program name with args.
+ set dummy $ac_prog; ac_word=$2
+-{ echo "$as_me:$LINENO: checking for $ac_word" >&5
+-echo $ECHO_N "checking for $ac_word... $ECHO_C" >&6; }
+-if test "${ac_cv_prog_M4+set}" = set; then
+-  echo $ECHO_N "(cached) $ECHO_C" >&6
+-else
++{ printf "%s\n" "$as_me:${as_lineno-$LINENO}: checking for $ac_word" >&5
++printf %s "checking for $ac_word... " >&6; }
++if test ${ac_cv_prog_M4+y}
++then :
++  printf %s "(cached) " >&6
++else $as_nop
+   if test -n "$M4"; then
+   ac_cv_prog_M4="$M4" # Let the user override the test.
+ else
+@@ -3804,26 +5068,30 @@ as_save_IFS=$IFS; IFS=$PATH_SEPARATOR
+ for as_dir in $PATH
+ do
+   IFS=$as_save_IFS
+-  test -z "$as_dir" && as_dir=.
+-  for ac_exec_ext in '' $ac_executable_extensions; do
+-  if { test -f "$as_dir/$ac_word$ac_exec_ext" && $as_test_x "$as_dir/$ac_word$ac_exec_ext"; }; then
++  case $as_dir in #(((
++    '') as_dir=./ ;;
++    */) ;;
++    *) as_dir=$as_dir/ ;;
++  esac
++    for ac_exec_ext in '' $ac_executable_extensions; do
++  if as_fn_executable_p "$as_dir$ac_word$ac_exec_ext"; then
+     ac_cv_prog_M4="$ac_prog"
+-    echo "$as_me:$LINENO: found $as_dir/$ac_word$ac_exec_ext" >&5
++    printf "%s\n" "$as_me:${as_lineno-$LINENO}: found $as_dir$ac_word$ac_exec_ext" >&5
+     break 2
+   fi
+ done
+-done
++  done
+ IFS=$as_save_IFS
+ 
+ fi
+ fi
+ M4=$ac_cv_prog_M4
+ if test -n "$M4"; then
+-  { echo "$as_me:$LINENO: result: $M4" >&5
+-echo "${ECHO_T}$M4" >&6; }
++  { printf "%s\n" "$as_me:${as_lineno-$LINENO}: result: $M4" >&5
++printf "%s\n" "$M4" >&6; }
+ else
+-  { echo "$as_me:$LINENO: result: no" >&5
+-echo "${ECHO_T}no" >&6; }
++  { printf "%s\n" "$as_me:${as_lineno-$LINENO}: result: no" >&5
++printf "%s\n" "no" >&6; }
+ fi
+ 
+ 
+@@ -3831,14 +5099,13 @@ fi
+ done
+ 
+ if test -z "$M4"; then
+-   { { echo "$as_me:$LINENO: error: m4 preprocessor not found - specify with --with-M4=ARG" >&5
+-echo "$as_me: error: m4 preprocessor not found - specify with --with-M4=ARG" >&2;}
+-   { (exit 1); exit 1; }; }
++   as_fn_error $? "m4 preprocessor not found - specify with --with-M4=ARG" "$LINENO" 5
+ fi
+ 
+ 
+ 
+-# Find a good install program.  We prefer a C program (faster),
++
++  # Find a good install program.  We prefer a C program (faster),
+ # so one script is as good as another.  But avoid the broken or
+ # incompatible versions:
+ # SysV /etc/install, /usr/sbin/install
+@@ -3851,22 +5118,28 @@ fi
+ # SVR4 /usr/ucb/install, which tries to use the nonexistent group "staff"
+ # OS/2's system install, which has a completely different semantic
+ # ./install, which can be erroneously created by make from ./install.sh.
+-{ echo "$as_me:$LINENO: checking for a BSD-compatible install" >&5
+-echo $ECHO_N "checking for a BSD-compatible install... $ECHO_C" >&6; }
++# Reject install programs that cannot install multiple files.
++{ printf "%s\n" "$as_me:${as_lineno-$LINENO}: checking for a BSD-compatible install" >&5
++printf %s "checking for a BSD-compatible install... " >&6; }
+ if test -z "$INSTALL"; then
+-if test "${ac_cv_path_install+set}" = set; then
+-  echo $ECHO_N "(cached) $ECHO_C" >&6
+-else
++if test ${ac_cv_path_install+y}
++then :
++  printf %s "(cached) " >&6
++else $as_nop
+   as_save_IFS=$IFS; IFS=$PATH_SEPARATOR
+ for as_dir in $PATH
+ do
+   IFS=$as_save_IFS
+-  test -z "$as_dir" && as_dir=.
+-  # Account for people who put trailing slashes in PATH elements.
+-case $as_dir/ in
+-  ./ | .// | /cC/* | \
++  case $as_dir in #(((
++    '') as_dir=./ ;;
++    */) ;;
++    *) as_dir=$as_dir/ ;;
++  esac
++    # Account for fact that we put trailing slashes in our PATH walk.
++case $as_dir in #((
++  ./ | /[cC]/* | \
+   /etc/* | /usr/sbin/* | /usr/etc/* | /sbin/* | /usr/afsws/bin/* | \
+-  ?:\\/os2\\/install\\/* | ?:\\/OS2\\/INSTALL\\/* | \
++  ?:[\\/]os2[\\/]install[\\/]* | ?:[\\/]OS2[\\/]INSTALL[\\/]* | \
+   /usr/ucb/* ) ;;
+   *)
+     # OSF1 and SCO ODT 3.0 have their own names for install.
+@@ -3874,30 +5147,42 @@ case $as_dir/ in
+     # by default.
+     for ac_prog in ginstall scoinst install; do
+       for ac_exec_ext in '' $ac_executable_extensions; do
+-	if { test -f "$as_dir/$ac_prog$ac_exec_ext" && $as_test_x "$as_dir/$ac_prog$ac_exec_ext"; }; then
++	if as_fn_executable_p "$as_dir$ac_prog$ac_exec_ext"; then
+ 	  if test $ac_prog = install &&
+-	    grep dspmsg "$as_dir/$ac_prog$ac_exec_ext" >/dev/null 2>&1; then
++	    grep dspmsg "$as_dir$ac_prog$ac_exec_ext" >/dev/null 2>&1; then
+ 	    # AIX install.  It has an incompatible calling convention.
+ 	    :
+ 	  elif test $ac_prog = install &&
+-	    grep pwplus "$as_dir/$ac_prog$ac_exec_ext" >/dev/null 2>&1; then
++	    grep pwplus "$as_dir$ac_prog$ac_exec_ext" >/dev/null 2>&1; then
+ 	    # program-specific install script used by HP pwplus--don't use.
+ 	    :
+ 	  else
+-	    ac_cv_path_install="$as_dir/$ac_prog$ac_exec_ext -c"
+-	    break 3
++	    rm -rf conftest.one conftest.two conftest.dir
++	    echo one > conftest.one
++	    echo two > conftest.two
++	    mkdir conftest.dir
++	    if "$as_dir$ac_prog$ac_exec_ext" -c conftest.one conftest.two "`pwd`/conftest.dir/" &&
++	      test -s conftest.one && test -s conftest.two &&
++	      test -s conftest.dir/conftest.one &&
++	      test -s conftest.dir/conftest.two
++	    then
++	      ac_cv_path_install="$as_dir$ac_prog$ac_exec_ext -c"
++	      break 3
++	    fi
+ 	  fi
+ 	fi
+       done
+     done
+     ;;
+ esac
+-done
++
++  done
+ IFS=$as_save_IFS
+ 
++rm -rf conftest.one conftest.two conftest.dir
+ 
+ fi
+-  if test "${ac_cv_path_install+set}" = set; then
++  if test ${ac_cv_path_install+y}; then
+     INSTALL=$ac_cv_path_install
+   else
+     # As a last resort, use the slow shell script.  Don't cache a
+@@ -3907,8 +5192,8 @@ fi
+     INSTALL=$ac_install_sh
+   fi
+ fi
+-{ echo "$as_me:$LINENO: result: $INSTALL" >&5
+-echo "${ECHO_T}$INSTALL" >&6; }
++{ printf "%s\n" "$as_me:${as_lineno-$LINENO}: result: $INSTALL" >&5
++printf "%s\n" "$INSTALL" >&6; }
+ 
+ # Use test -z because SunOS4 sh mishandles braces in ${var-val}.
+ # It thinks the first close brace ends the variable substitution.
+@@ -3919,58 +5204,60 @@ test -z "$INSTALL_SCRIPT" && INSTALL_SCRIPT='${INSTALL}'
+ test -z "$INSTALL_DATA" && INSTALL_DATA='${INSTALL} -m 644'
+ 
+ if test -z "$INSTALL"; then
+-   { { echo "$as_me:$LINENO: error: install not found" >&5
+-echo "$as_me: error: install not found" >&2;}
+-   { (exit 1); exit 1; }; }
++   as_fn_error $? "install not found" "$LINENO" 5
+ fi
+ 
+ 
+-{ echo "$as_me:$LINENO: checking for a thread-safe mkdir -p" >&5
+-echo $ECHO_N "checking for a thread-safe mkdir -p... $ECHO_C" >&6; }
++
++  { printf "%s\n" "$as_me:${as_lineno-$LINENO}: checking for a race-free mkdir -p" >&5
++printf %s "checking for a race-free mkdir -p... " >&6; }
+ if test -z "$MKDIR_P"; then
+-  if test "${ac_cv_path_mkdir+set}" = set; then
+-  echo $ECHO_N "(cached) $ECHO_C" >&6
+-else
++  if test ${ac_cv_path_mkdir+y}
++then :
++  printf %s "(cached) " >&6
++else $as_nop
+   as_save_IFS=$IFS; IFS=$PATH_SEPARATOR
+ for as_dir in $PATH$PATH_SEPARATOR/opt/sfw/bin
+ do
+   IFS=$as_save_IFS
+-  test -z "$as_dir" && as_dir=.
+-  for ac_prog in mkdir gmkdir; do
++  case $as_dir in #(((
++    '') as_dir=./ ;;
++    */) ;;
++    *) as_dir=$as_dir/ ;;
++  esac
++    for ac_prog in mkdir gmkdir; do
+ 	 for ac_exec_ext in '' $ac_executable_extensions; do
+-	   { test -f "$as_dir/$ac_prog$ac_exec_ext" && $as_test_x "$as_dir/$ac_prog$ac_exec_ext"; } || continue
+-	   case `"$as_dir/$ac_prog$ac_exec_ext" --version 2>&1` in #(
+-	     'mkdir (GNU coreutils) '* | \
+-	     'mkdir (coreutils) '* | \
++	   as_fn_executable_p "$as_dir$ac_prog$ac_exec_ext" || continue
++	   case `"$as_dir$ac_prog$ac_exec_ext" --version 2>&1` in #(
++	     'mkdir ('*'coreutils) '* | \
++	     'BusyBox '* | \
+ 	     'mkdir (fileutils) '4.1*)
+-	       ac_cv_path_mkdir=$as_dir/$ac_prog$ac_exec_ext
++	       ac_cv_path_mkdir=$as_dir$ac_prog$ac_exec_ext
+ 	       break 3;;
+ 	   esac
+ 	 done
+        done
+-done
++  done
+ IFS=$as_save_IFS
+ 
+ fi
+ 
+-  if test "${ac_cv_path_mkdir+set}" = set; then
++  test -d ./--version && rmdir ./--version
++  if test ${ac_cv_path_mkdir+y}; then
+     MKDIR_P="$ac_cv_path_mkdir -p"
+   else
+     # As a last resort, use the slow shell script.  Don't cache a
+     # value for MKDIR_P within a source directory, because that will
+     # break other packages using the cache if that directory is
+     # removed, or if the value is a relative name.
+-    test -d ./--version && rmdir ./--version
+     MKDIR_P="$ac_install_sh -d"
+   fi
+ fi
+-{ echo "$as_me:$LINENO: result: $MKDIR_P" >&5
+-echo "${ECHO_T}$MKDIR_P" >&6; }
++{ printf "%s\n" "$as_me:${as_lineno-$LINENO}: result: $MKDIR_P" >&5
++printf "%s\n" "$MKDIR_P" >&6; }
+ 
+ if test -z "$MKDIR_P"; then
+-   { { echo "$as_me:$LINENO: error: mkdir not found" >&5
+-echo "$as_me: error: mkdir not found" >&2;}
+-   { (exit 1); exit 1; }; }
++   as_fn_error $? "mkdir not found" "$LINENO" 5
+ fi
+ 
+ 
+@@ -3979,111 +5266,63 @@ ac_cpp='$CPP $CPPFLAGS'
+ ac_compile='$CC -c $CFLAGS $CPPFLAGS conftest.$ac_ext >&5'
+ ac_link='$CC -o conftest$ac_exeext $CFLAGS $CPPFLAGS $LDFLAGS conftest.$ac_ext $LIBS >&5'
+ ac_compiler_gnu=$ac_cv_c_compiler_gnu
+-{ echo "$as_me:$LINENO: checking how to run the C preprocessor" >&5
+-echo $ECHO_N "checking how to run the C preprocessor... $ECHO_C" >&6; }
++{ printf "%s\n" "$as_me:${as_lineno-$LINENO}: checking how to run the C preprocessor" >&5
++printf %s "checking how to run the C preprocessor... " >&6; }
+ # On Suns, sometimes $CPP names a directory.
+ if test -n "$CPP" && test -d "$CPP"; then
+   CPP=
+ fi
+ if test -z "$CPP"; then
+-  if test "${ac_cv_prog_CPP+set}" = set; then
+-  echo $ECHO_N "(cached) $ECHO_C" >&6
+-else
+-      # Double quotes because CPP needs to be expanded
+-    for CPP in "$CC -E" "$CC -E -traditional-cpp" "/lib/cpp"
++  if test ${ac_cv_prog_CPP+y}
++then :
++  printf %s "(cached) " >&6
++else $as_nop
++      # Double quotes because $CC needs to be expanded
++    for CPP in "$CC -E" "$CC -E -traditional-cpp" cpp /lib/cpp
+     do
+       ac_preproc_ok=false
+ for ac_c_preproc_warn_flag in '' yes
+ do
+   # Use a header file that comes with gcc, so configuring glibc
+   # with a fresh cross-compiler works.
+-  # Prefer <limits.h> to <assert.h> if __STDC__ is defined, since
+-  # <limits.h> exists even on freestanding compilers.
+   # On the NeXT, cc -E runs the code through the compiler's parser,
+   # not just through cpp. "Syntax error" is here to catch this case.
+-  cat >conftest.$ac_ext <<_ACEOF
+-/* confdefs.h.  */
+-_ACEOF
+-cat confdefs.h >>conftest.$ac_ext
+-cat >>conftest.$ac_ext <<_ACEOF
++  cat confdefs.h - <<_ACEOF >conftest.$ac_ext
+ /* end confdefs.h.  */
+-#ifdef __STDC__
+-# include <limits.h>
+-#else
+-# include <assert.h>
+-#endif
++#include <limits.h>
+ 		     Syntax error
+ _ACEOF
+-if { (ac_try="$ac_cpp conftest.$ac_ext"
+-case "(($ac_try" in
+-  *\"* | *\`* | *\\*) ac_try_echo=\$ac_try;;
+-  *) ac_try_echo=$ac_try;;
+-esac
+-eval "echo \"\$as_me:$LINENO: $ac_try_echo\"") >&5
+-  (eval "$ac_cpp conftest.$ac_ext") 2>conftest.er1
+-  ac_status=$?
+-  grep -v '^ *+' conftest.er1 >conftest.err
+-  rm -f conftest.er1
+-  cat conftest.err >&5
+-  echo "$as_me:$LINENO: \$? = $ac_status" >&5
+-  (exit $ac_status); } >/dev/null && {
+-	 test -z "$ac_c_preproc_warn_flag$ac_c_werror_flag" ||
+-	 test ! -s conftest.err
+-       }; then
+-  :
+-else
+-  echo "$as_me: failed program was:" >&5
+-sed 's/^/| /' conftest.$ac_ext >&5
++if ac_fn_c_try_cpp "$LINENO"
++then :
+ 
++else $as_nop
+   # Broken: fails on valid input.
+ continue
+ fi
+-
+-rm -f conftest.err conftest.$ac_ext
++rm -f conftest.err conftest.i conftest.$ac_ext
+ 
+   # OK, works on sane cases.  Now check whether nonexistent headers
+   # can be detected and how.
+-  cat >conftest.$ac_ext <<_ACEOF
+-/* confdefs.h.  */
+-_ACEOF
+-cat confdefs.h >>conftest.$ac_ext
+-cat >>conftest.$ac_ext <<_ACEOF
++  cat confdefs.h - <<_ACEOF >conftest.$ac_ext
+ /* end confdefs.h.  */
+ #include <ac_nonexistent.h>
+ _ACEOF
+-if { (ac_try="$ac_cpp conftest.$ac_ext"
+-case "(($ac_try" in
+-  *\"* | *\`* | *\\*) ac_try_echo=\$ac_try;;
+-  *) ac_try_echo=$ac_try;;
+-esac
+-eval "echo \"\$as_me:$LINENO: $ac_try_echo\"") >&5
+-  (eval "$ac_cpp conftest.$ac_ext") 2>conftest.er1
+-  ac_status=$?
+-  grep -v '^ *+' conftest.er1 >conftest.err
+-  rm -f conftest.er1
+-  cat conftest.err >&5
+-  echo "$as_me:$LINENO: \$? = $ac_status" >&5
+-  (exit $ac_status); } >/dev/null && {
+-	 test -z "$ac_c_preproc_warn_flag$ac_c_werror_flag" ||
+-	 test ! -s conftest.err
+-       }; then
++if ac_fn_c_try_cpp "$LINENO"
++then :
+   # Broken: success on invalid input.
+ continue
+-else
+-  echo "$as_me: failed program was:" >&5
+-sed 's/^/| /' conftest.$ac_ext >&5
+-
++else $as_nop
+   # Passes both tests.
+ ac_preproc_ok=:
+ break
+ fi
+-
+-rm -f conftest.err conftest.$ac_ext
++rm -f conftest.err conftest.i conftest.$ac_ext
+ 
+ done
+ # Because of `break', _AC_PREPROC_IFELSE's cleaning code was skipped.
+-rm -f conftest.err conftest.$ac_ext
+-if $ac_preproc_ok; then
++rm -f conftest.i conftest.err conftest.$ac_ext
++if $ac_preproc_ok
++then :
+   break
+ fi
+ 
+@@ -4095,107 +5334,57 @@ fi
+ else
+   ac_cv_prog_CPP=$CPP
+ fi
+-{ echo "$as_me:$LINENO: result: $CPP" >&5
+-echo "${ECHO_T}$CPP" >&6; }
++{ printf "%s\n" "$as_me:${as_lineno-$LINENO}: result: $CPP" >&5
++printf "%s\n" "$CPP" >&6; }
+ ac_preproc_ok=false
+ for ac_c_preproc_warn_flag in '' yes
+ do
+   # Use a header file that comes with gcc, so configuring glibc
+   # with a fresh cross-compiler works.
+-  # Prefer <limits.h> to <assert.h> if __STDC__ is defined, since
+-  # <limits.h> exists even on freestanding compilers.
+   # On the NeXT, cc -E runs the code through the compiler's parser,
+   # not just through cpp. "Syntax error" is here to catch this case.
+-  cat >conftest.$ac_ext <<_ACEOF
+-/* confdefs.h.  */
+-_ACEOF
+-cat confdefs.h >>conftest.$ac_ext
+-cat >>conftest.$ac_ext <<_ACEOF
++  cat confdefs.h - <<_ACEOF >conftest.$ac_ext
+ /* end confdefs.h.  */
+-#ifdef __STDC__
+-# include <limits.h>
+-#else
+-# include <assert.h>
+-#endif
++#include <limits.h>
+ 		     Syntax error
+ _ACEOF
+-if { (ac_try="$ac_cpp conftest.$ac_ext"
+-case "(($ac_try" in
+-  *\"* | *\`* | *\\*) ac_try_echo=\$ac_try;;
+-  *) ac_try_echo=$ac_try;;
+-esac
+-eval "echo \"\$as_me:$LINENO: $ac_try_echo\"") >&5
+-  (eval "$ac_cpp conftest.$ac_ext") 2>conftest.er1
+-  ac_status=$?
+-  grep -v '^ *+' conftest.er1 >conftest.err
+-  rm -f conftest.er1
+-  cat conftest.err >&5
+-  echo "$as_me:$LINENO: \$? = $ac_status" >&5
+-  (exit $ac_status); } >/dev/null && {
+-	 test -z "$ac_c_preproc_warn_flag$ac_c_werror_flag" ||
+-	 test ! -s conftest.err
+-       }; then
+-  :
+-else
+-  echo "$as_me: failed program was:" >&5
+-sed 's/^/| /' conftest.$ac_ext >&5
++if ac_fn_c_try_cpp "$LINENO"
++then :
+ 
++else $as_nop
+   # Broken: fails on valid input.
+ continue
+ fi
+-
+-rm -f conftest.err conftest.$ac_ext
++rm -f conftest.err conftest.i conftest.$ac_ext
+ 
+   # OK, works on sane cases.  Now check whether nonexistent headers
+   # can be detected and how.
+-  cat >conftest.$ac_ext <<_ACEOF
+-/* confdefs.h.  */
+-_ACEOF
+-cat confdefs.h >>conftest.$ac_ext
+-cat >>conftest.$ac_ext <<_ACEOF
++  cat confdefs.h - <<_ACEOF >conftest.$ac_ext
+ /* end confdefs.h.  */
+ #include <ac_nonexistent.h>
+ _ACEOF
+-if { (ac_try="$ac_cpp conftest.$ac_ext"
+-case "(($ac_try" in
+-  *\"* | *\`* | *\\*) ac_try_echo=\$ac_try;;
+-  *) ac_try_echo=$ac_try;;
+-esac
+-eval "echo \"\$as_me:$LINENO: $ac_try_echo\"") >&5
+-  (eval "$ac_cpp conftest.$ac_ext") 2>conftest.er1
+-  ac_status=$?
+-  grep -v '^ *+' conftest.er1 >conftest.err
+-  rm -f conftest.er1
+-  cat conftest.err >&5
+-  echo "$as_me:$LINENO: \$? = $ac_status" >&5
+-  (exit $ac_status); } >/dev/null && {
+-	 test -z "$ac_c_preproc_warn_flag$ac_c_werror_flag" ||
+-	 test ! -s conftest.err
+-       }; then
++if ac_fn_c_try_cpp "$LINENO"
++then :
+   # Broken: success on invalid input.
+ continue
+-else
+-  echo "$as_me: failed program was:" >&5
+-sed 's/^/| /' conftest.$ac_ext >&5
+-
++else $as_nop
+   # Passes both tests.
+ ac_preproc_ok=:
+ break
+ fi
+-
+-rm -f conftest.err conftest.$ac_ext
++rm -f conftest.err conftest.i conftest.$ac_ext
+ 
+ done
+ # Because of `break', _AC_PREPROC_IFELSE's cleaning code was skipped.
+-rm -f conftest.err conftest.$ac_ext
+-if $ac_preproc_ok; then
+-  :
+-else
+-  { { echo "$as_me:$LINENO: error: C preprocessor \"$CPP\" fails sanity check
+-See \`config.log' for more details." >&5
+-echo "$as_me: error: C preprocessor \"$CPP\" fails sanity check
+-See \`config.log' for more details." >&2;}
+-   { (exit 1); exit 1; }; }
++rm -f conftest.i conftest.err conftest.$ac_ext
++if $ac_preproc_ok
++then :
++
++else $as_nop
++  { { printf "%s\n" "$as_me:${as_lineno-$LINENO}: error: in \`$ac_pwd':" >&5
++printf "%s\n" "$as_me: error: in \`$ac_pwd':" >&2;}
++as_fn_error $? "C preprocessor \"$CPP\" fails sanity check
++See \`config.log' for more details" "$LINENO" 5; }
+ fi
+ 
+ ac_ext=c
+@@ -4205,45 +5394,46 @@ ac_link='$CC -o conftest$ac_exeext $CFLAGS $CPPFLAGS $LDFLAGS conftest.$ac_ext $
+ ac_compiler_gnu=$ac_cv_c_compiler_gnu
+ 
+ 
+-{ echo "$as_me:$LINENO: checking for grep that handles long lines and -e" >&5
+-echo $ECHO_N "checking for grep that handles long lines and -e... $ECHO_C" >&6; }
+-if test "${ac_cv_path_GREP+set}" = set; then
+-  echo $ECHO_N "(cached) $ECHO_C" >&6
+-else
+-  # Extract the first word of "grep ggrep" to use in msg output
+-if test -z "$GREP"; then
+-set dummy grep ggrep; ac_prog_name=$2
+-if test "${ac_cv_path_GREP+set}" = set; then
+-  echo $ECHO_N "(cached) $ECHO_C" >&6
+-else
++{ printf "%s\n" "$as_me:${as_lineno-$LINENO}: checking for grep that handles long lines and -e" >&5
++printf %s "checking for grep that handles long lines and -e... " >&6; }
++if test ${ac_cv_path_GREP+y}
++then :
++  printf %s "(cached) " >&6
++else $as_nop
++  if test -z "$GREP"; then
+   ac_path_GREP_found=false
+-# Loop through the user's path and test for each of PROGNAME-LIST
+-as_save_IFS=$IFS; IFS=$PATH_SEPARATOR
++  # Loop through the user's path and test for each of PROGNAME-LIST
++  as_save_IFS=$IFS; IFS=$PATH_SEPARATOR
+ for as_dir in $PATH$PATH_SEPARATOR/usr/xpg4/bin
+ do
+   IFS=$as_save_IFS
+-  test -z "$as_dir" && as_dir=.
+-  for ac_prog in grep ggrep; do
+-  for ac_exec_ext in '' $ac_executable_extensions; do
+-    ac_path_GREP="$as_dir/$ac_prog$ac_exec_ext"
+-    { test -f "$ac_path_GREP" && $as_test_x "$ac_path_GREP"; } || continue
+-    # Check for GNU ac_path_GREP and select it if it is found.
++  case $as_dir in #(((
++    '') as_dir=./ ;;
++    */) ;;
++    *) as_dir=$as_dir/ ;;
++  esac
++    for ac_prog in grep ggrep
++   do
++    for ac_exec_ext in '' $ac_executable_extensions; do
++      ac_path_GREP="$as_dir$ac_prog$ac_exec_ext"
++      as_fn_executable_p "$ac_path_GREP" || continue
++# Check for GNU ac_path_GREP and select it if it is found.
+   # Check for GNU $ac_path_GREP
+ case `"$ac_path_GREP" --version 2>&1` in
+ *GNU*)
+   ac_cv_path_GREP="$ac_path_GREP" ac_path_GREP_found=:;;
+ *)
+   ac_count=0
+-  echo $ECHO_N "0123456789$ECHO_C" >"conftest.in"
++  printf %s 0123456789 >"conftest.in"
+   while :
+   do
+     cat "conftest.in" "conftest.in" >"conftest.tmp"
+     mv "conftest.tmp" "conftest.in"
+     cp "conftest.in" "conftest.nl"
+-    echo 'GREP' >> "conftest.nl"
++    printf "%s\n" 'GREP' >> "conftest.nl"
+     "$ac_path_GREP" -e 'GREP$' -e '-(cannot match)-' < "conftest.nl" >"conftest.out" 2>/dev/null || break
+     diff "conftest.out" "conftest.nl" >/dev/null 2>&1 || break
+-    ac_count=`expr $ac_count + 1`
++    as_fn_arith $ac_count + 1 && ac_count=$as_val
+     if test $ac_count -gt ${ac_path_GREP_max-0}; then
+       # Best one so far, save it but keep looking for a better one
+       ac_cv_path_GREP="$ac_path_GREP"
+@@ -4255,77 +5445,67 @@ case `"$ac_path_GREP" --version 2>&1` in
+   rm -f conftest.in conftest.tmp conftest.nl conftest.out;;
+ esac
+ 
+-
+-    $ac_path_GREP_found && break 3
++      $ac_path_GREP_found && break 3
++    done
++  done
+   done
+-done
+-
+-done
+ IFS=$as_save_IFS
+-
+-
+-fi
+-
+-GREP="$ac_cv_path_GREP"
+-if test -z "$GREP"; then
+-  { { echo "$as_me:$LINENO: error: no acceptable $ac_prog_name could be found in $PATH$PATH_SEPARATOR/usr/xpg4/bin" >&5
+-echo "$as_me: error: no acceptable $ac_prog_name could be found in $PATH$PATH_SEPARATOR/usr/xpg4/bin" >&2;}
+-   { (exit 1); exit 1; }; }
+-fi
+-
++  if test -z "$ac_cv_path_GREP"; then
++    as_fn_error $? "no acceptable grep could be found in $PATH$PATH_SEPARATOR/usr/xpg4/bin" "$LINENO" 5
++  fi
+ else
+   ac_cv_path_GREP=$GREP
+ fi
+ 
+-
+ fi
+-{ echo "$as_me:$LINENO: result: $ac_cv_path_GREP" >&5
+-echo "${ECHO_T}$ac_cv_path_GREP" >&6; }
++{ printf "%s\n" "$as_me:${as_lineno-$LINENO}: result: $ac_cv_path_GREP" >&5
++printf "%s\n" "$ac_cv_path_GREP" >&6; }
+  GREP="$ac_cv_path_GREP"
+ 
+ 
+-{ echo "$as_me:$LINENO: checking for egrep" >&5
+-echo $ECHO_N "checking for egrep... $ECHO_C" >&6; }
+-if test "${ac_cv_path_EGREP+set}" = set; then
+-  echo $ECHO_N "(cached) $ECHO_C" >&6
+-else
++{ printf "%s\n" "$as_me:${as_lineno-$LINENO}: checking for egrep" >&5
++printf %s "checking for egrep... " >&6; }
++if test ${ac_cv_path_EGREP+y}
++then :
++  printf %s "(cached) " >&6
++else $as_nop
+   if echo a | $GREP -E '(a|b)' >/dev/null 2>&1
+    then ac_cv_path_EGREP="$GREP -E"
+    else
+-     # Extract the first word of "egrep" to use in msg output
+-if test -z "$EGREP"; then
+-set dummy egrep; ac_prog_name=$2
+-if test "${ac_cv_path_EGREP+set}" = set; then
+-  echo $ECHO_N "(cached) $ECHO_C" >&6
+-else
++     if test -z "$EGREP"; then
+   ac_path_EGREP_found=false
+-# Loop through the user's path and test for each of PROGNAME-LIST
+-as_save_IFS=$IFS; IFS=$PATH_SEPARATOR
++  # Loop through the user's path and test for each of PROGNAME-LIST
++  as_save_IFS=$IFS; IFS=$PATH_SEPARATOR
+ for as_dir in $PATH$PATH_SEPARATOR/usr/xpg4/bin
+ do
+   IFS=$as_save_IFS
+-  test -z "$as_dir" && as_dir=.
+-  for ac_prog in egrep; do
+-  for ac_exec_ext in '' $ac_executable_extensions; do
+-    ac_path_EGREP="$as_dir/$ac_prog$ac_exec_ext"
+-    { test -f "$ac_path_EGREP" && $as_test_x "$ac_path_EGREP"; } || continue
+-    # Check for GNU ac_path_EGREP and select it if it is found.
++  case $as_dir in #(((
++    '') as_dir=./ ;;
++    */) ;;
++    *) as_dir=$as_dir/ ;;
++  esac
++    for ac_prog in egrep
++   do
++    for ac_exec_ext in '' $ac_executable_extensions; do
++      ac_path_EGREP="$as_dir$ac_prog$ac_exec_ext"
++      as_fn_executable_p "$ac_path_EGREP" || continue
++# Check for GNU ac_path_EGREP and select it if it is found.
+   # Check for GNU $ac_path_EGREP
+ case `"$ac_path_EGREP" --version 2>&1` in
+ *GNU*)
+   ac_cv_path_EGREP="$ac_path_EGREP" ac_path_EGREP_found=:;;
+ *)
+   ac_count=0
+-  echo $ECHO_N "0123456789$ECHO_C" >"conftest.in"
++  printf %s 0123456789 >"conftest.in"
+   while :
+   do
+     cat "conftest.in" "conftest.in" >"conftest.tmp"
+     mv "conftest.tmp" "conftest.in"
+     cp "conftest.in" "conftest.nl"
+-    echo 'EGREP' >> "conftest.nl"
++    printf "%s\n" 'EGREP' >> "conftest.nl"
+     "$ac_path_EGREP" 'EGREP$' < "conftest.nl" >"conftest.out" 2>/dev/null || break
+     diff "conftest.out" "conftest.nl" >/dev/null 2>&1 || break
+-    ac_count=`expr $ac_count + 1`
++    as_fn_arith $ac_count + 1 && ac_count=$as_val
+     if test $ac_count -gt ${ac_path_EGREP_max-0}; then
+       # Best one so far, save it but keep looking for a better one
+       ac_cv_path_EGREP="$ac_path_EGREP"
+@@ -4337,33 +5517,22 @@ case `"$ac_path_EGREP" --version 2>&1` in
+   rm -f conftest.in conftest.tmp conftest.nl conftest.out;;
+ esac
+ 
+-
+-    $ac_path_EGREP_found && break 3
++      $ac_path_EGREP_found && break 3
++    done
++  done
+   done
+-done
+-
+-done
+ IFS=$as_save_IFS
+-
+-
+-fi
+-
+-EGREP="$ac_cv_path_EGREP"
+-if test -z "$EGREP"; then
+-  { { echo "$as_me:$LINENO: error: no acceptable $ac_prog_name could be found in $PATH$PATH_SEPARATOR/usr/xpg4/bin" >&5
+-echo "$as_me: error: no acceptable $ac_prog_name could be found in $PATH$PATH_SEPARATOR/usr/xpg4/bin" >&2;}
+-   { (exit 1); exit 1; }; }
+-fi
+-
++  if test -z "$ac_cv_path_EGREP"; then
++    as_fn_error $? "no acceptable egrep could be found in $PATH$PATH_SEPARATOR/usr/xpg4/bin" "$LINENO" 5
++  fi
+ else
+   ac_cv_path_EGREP=$EGREP
+ fi
+ 
+-
+    fi
+ fi
+-{ echo "$as_me:$LINENO: result: $ac_cv_path_EGREP" >&5
+-echo "${ECHO_T}$ac_cv_path_EGREP" >&6; }
++{ printf "%s\n" "$as_me:${as_lineno-$LINENO}: result: $ac_cv_path_EGREP" >&5
++printf "%s\n" "$ac_cv_path_EGREP" >&6; }
+  EGREP="$ac_cv_path_EGREP"
+ 
+ 
+@@ -4378,8 +5547,8 @@ ac_compile='$CC -c $CFLAGS $CPPFLAGS conftest.$ac_ext >&5'
+ ac_link='$CC -o conftest$ac_exeext $CFLAGS $CPPFLAGS $LDFLAGS conftest.$ac_ext $LIBS >&5'
+ ac_compiler_gnu=$ac_cv_c_compiler_gnu
+ 
+-  echo "configure:4381:" CC is $CC >&5
+-  echo "configure:4382:" CPP is $CPP >&5
++  echo "configure:5550:" CC is $CC >&5
++  echo "configure:5551:" CPP is $CPP >&5
+ 
+   CC_ID=unknown
+   CC_VERSION=unknown
+@@ -4388,17 +5557,14 @@ ac_compiler_gnu=$ac_cv_c_compiler_gnu
+ 
+   # Check if it is a Sun compiler.
+   if test $CC_ID = unknown; then
+-    echo "configure:4391:" checking if $CC is sunpro >&5
+-    cat >conftest.$ac_ext <<_ACEOF
+-/* confdefs.h.  */
+-_ACEOF
+-cat confdefs.h >>conftest.$ac_ext
+-cat >>conftest.$ac_ext <<_ACEOF
++    echo "configure:5560:" checking if $CC is sunpro >&5
++    cat confdefs.h - <<_ACEOF >conftest.$ac_ext
+ /* end confdefs.h.  */
+ __SUNPRO_C
+ _ACEOF
+ if (eval "$ac_cpp conftest.$ac_ext") 2>&5 |
+-  $EGREP "^ 0x[0-9]+" >/dev/null 2>&1; then
++  $EGREP "^ 0x[0-9]+" >/dev/null 2>&1
++then :
+   CC_ID=sunpro
+       # SUN compiler defines __SUNPRO_C to the version number.
+       echo __SUNPRO_C > conftest.c
+@@ -4406,19 +5572,15 @@ if (eval "$ac_cpp conftest.$ac_ext") 2>&5 |
+       rm -f conftest.c
+ 
+ fi
+-rm -f conftest*
++rm -rf conftest*
+ 
+   fi
+ 
+ 
+   # Check if it is a Intel compiler.
+   if test $CC_ID = unknown; then
+-    echo "configure:4416:" checking if $CC is intel >&5
+-    cat >conftest.$ac_ext <<_ACEOF
+-/* confdefs.h.  */
+-_ACEOF
+-cat confdefs.h >>conftest.$ac_ext
+-cat >>conftest.$ac_ext <<_ACEOF
++    echo "configure:5582:" checking if $CC is intel >&5
++    cat confdefs.h - <<_ACEOF >conftest.$ac_ext
+ /* end confdefs.h.  */
+ #ifdef __INTEL_COMPILER
+ yes;
+@@ -4426,7 +5588,8 @@ yes;
+ 
+ _ACEOF
+ if (eval "$ac_cpp conftest.$ac_ext") 2>&5 |
+-  $EGREP "^yes" >/dev/null 2>&1; then
++  $EGREP "^yes" >/dev/null 2>&1
++then :
+   CC_ID=intel
+       # Intel compiler defines __INTEL_COMPILER to the version number.
+       echo __INTEL_COMPILER > conftest.C
+@@ -4434,19 +5597,15 @@ if (eval "$ac_cpp conftest.$ac_ext") 2>&5 |
+       rm -f conftest.C
+ 
+ fi
+-rm -f conftest*
++rm -rf conftest*
+ 
+   fi
+ 
+ 
+   # Check if it is a GNU compiler.
+   if test $CC_ID = unknown; then
+-    echo "configure:4444:" checking if $CC is gnu >&5
+-    cat >conftest.$ac_ext <<_ACEOF
+-/* confdefs.h.  */
+-_ACEOF
+-cat confdefs.h >>conftest.$ac_ext
+-cat >>conftest.$ac_ext <<_ACEOF
++    echo "configure:5607:" checking if $CC is gnu >&5
++    cat confdefs.h - <<_ACEOF >conftest.$ac_ext
+ /* end confdefs.h.  */
+ #ifdef __GNUC__
+ yes;
+@@ -4454,29 +5613,27 @@ yes;
+ 
+ _ACEOF
+ if (eval "$ac_cpp conftest.$ac_ext") 2>&5 |
+-  $EGREP "^yes" >/dev/null 2>&1; then
++  $EGREP "^yes" >/dev/null 2>&1
++then :
+   CC_ID=gnu
+     CC_VERSION=`$CC --version | sed -e 's/[^0-9]\{0,\}\([^ ]\{1,\}\).\{0,\}/\1/' -e 1q`
+ 
+ fi
+-rm -f conftest*
++rm -rf conftest*
+ 
+   fi
+ 
+ 
+   # Check if it is a DEC compiler.
+   if test $CC_ID = unknown; then
+-    echo "configure:4469:" checking if $CC is dec >&5
+-    cat >conftest.$ac_ext <<_ACEOF
+-/* confdefs.h.  */
+-_ACEOF
+-cat confdefs.h >>conftest.$ac_ext
+-cat >>conftest.$ac_ext <<_ACEOF
++    echo "configure:5629:" checking if $CC is dec >&5
++    cat confdefs.h - <<_ACEOF >conftest.$ac_ext
+ /* end confdefs.h.  */
+ __DECC
+ _ACEOF
+ if (eval "$ac_cpp conftest.$ac_ext") 2>&5 |
+-  $EGREP "^ 1" >/dev/null 2>&1; then
++  $EGREP "^ 1" >/dev/null 2>&1
++then :
+   CC_ID=dec
+       # DEC compiler defines __DECC_VER to the version number.
+       echo __DECC_VER > conftest.c
+@@ -4484,24 +5641,21 @@ if (eval "$ac_cpp conftest.$ac_ext") 2>&5 |
+       rm -f conftest.c
+ 
+ fi
+-rm -f conftest*
++rm -rf conftest*
+ 
+   fi
+ 
+ 
+   # Check if it is a KAI compiler.
+   if test $CC_ID = unknown; then
+-    echo "configure:4494:" checking if $CC is kai >&5
+-    cat >conftest.$ac_ext <<_ACEOF
+-/* confdefs.h.  */
+-_ACEOF
+-cat confdefs.h >>conftest.$ac_ext
+-cat >>conftest.$ac_ext <<_ACEOF
++    echo "configure:5651:" checking if $CC is kai >&5
++    cat confdefs.h - <<_ACEOF >conftest.$ac_ext
+ /* end confdefs.h.  */
+ __KCC
+ _ACEOF
+ if (eval "$ac_cpp conftest.$ac_ext") 2>&5 |
+-  $EGREP "^1" >/dev/null 2>&1; then
++  $EGREP "^1" >/dev/null 2>&1
++then :
+   CC_ID=kai
+       # KCC compiler defines __KCC_VERSION to the version number.
+       echo __KCC_VERSION > conftest.c
+@@ -4509,24 +5663,21 @@ if (eval "$ac_cpp conftest.$ac_ext") 2>&5 |
+       rm -f conftest.c
+ 
+ fi
+-rm -f conftest*
++rm -rf conftest*
+ 
+   fi
+ 
+ 
+   # Check if it is a SGI compiler.
+   if test $CC_ID = unknown; then
+-    echo "configure:4519:" checking if $CC is sgi >&5
+-    cat >conftest.$ac_ext <<_ACEOF
+-/* confdefs.h.  */
+-_ACEOF
+-cat confdefs.h >>conftest.$ac_ext
+-cat >>conftest.$ac_ext <<_ACEOF
++    echo "configure:5673:" checking if $CC is sgi >&5
++    cat confdefs.h - <<_ACEOF >conftest.$ac_ext
+ /* end confdefs.h.  */
+ __sgi
+ _ACEOF
+ if (eval "$ac_cpp conftest.$ac_ext") 2>&5 |
+-  $EGREP "^1" >/dev/null 2>&1; then
++  $EGREP "^1" >/dev/null 2>&1
++then :
+   CC_ID=sgi
+       # SGI compiler defines _COMPILER_VERSION to the version number.
+       echo _COMPILER_VERSION > conftest.c
+@@ -4534,29 +5685,25 @@ if (eval "$ac_cpp conftest.$ac_ext") 2>&5 |
+       rm -f conftest.c
+ 
+ fi
+-rm -f conftest*
++rm -rf conftest*
+ 
+   fi
+ 
+ 
+   # Check if it is a IBM compiler.
+   if test $CC_ID = unknown; then
+-    echo "configure:4544:" checking if $CC is xlc >&5
++    echo "configure:5695:" checking if $CC is xlc >&5
+     if echo "$host_os" | grep "aix" >/dev/null ; then
+       # The wretched IBM shell does not eval correctly,
+       # so we have to help it with a pre-eval eval statement.
+       ac_cpp=`eval "echo $ac_cpp"`
+       save_ac_cpp=$ac_cpp
+-      echo "configure:4550:" ac_cpp is temporarily set to $ac_cpp >&5
++      echo "configure:5701:" ac_cpp is temporarily set to $ac_cpp >&5
+     else
+       save_ac_cpp=
+     fi
+-    echo "configure:4554:" ac_cpp is $ac_cpp >&5
+-    cat >conftest.$ac_ext <<_ACEOF
+-/* confdefs.h.  */
+-_ACEOF
+-cat confdefs.h >>conftest.$ac_ext
+-cat >>conftest.$ac_ext <<_ACEOF
++    echo "configure:5705:" ac_cpp is $ac_cpp >&5
++    cat confdefs.h - <<_ACEOF >conftest.$ac_ext
+ /* end confdefs.h.  */
+ #ifdef __xlC__
+ yes;
+@@ -4564,7 +5711,8 @@ yes;
+ 
+ _ACEOF
+ if (eval "$ac_cpp conftest.$ac_ext") 2>&5 |
+-  $EGREP "^yes" >/dev/null 2>&1; then
++  $EGREP "^yes" >/dev/null 2>&1
++then :
+   CC_ID=xlc
+     # IBM compiler defines __xlC__ to the version number.
+     echo __xlC__ > conftest.C
+@@ -4572,10 +5720,10 @@ if (eval "$ac_cpp conftest.$ac_ext") 2>&5 |
+     rm -f conftest.C
+ 
+ fi
+-rm -f conftest*
++rm -rf conftest*
+ 
+     test "$save_ac_cpp" && ac_cpp=$save_ac_cpp
+-    echo "configure:4578:" ac_cpp is restored to $ac_cpp >&5
++    echo "configure:5726:" ac_cpp is restored to $ac_cpp >&5
+   fi
+ 
+ 
+@@ -4595,7 +5743,7 @@ for btng_log_vars_index in $btng_log_vars ; do
+   else
+     btng_log_vars_value="unset";
+   fi
+-  echo "configure:4598:" "$btng_log_vars_index is $btng_log_vars_value" >&5;
++  echo "configure:5746:" "$btng_log_vars_index is $btng_log_vars_value" >&5;
+ done
+ 
+ 
+@@ -4607,107 +5755,59 @@ ac_cpp='$CXXCPP $CPPFLAGS'
+ ac_compile='$CXX -c $CXXFLAGS $CPPFLAGS conftest.$ac_ext >&5'
+ ac_link='$CXX -o conftest$ac_exeext $CXXFLAGS $CPPFLAGS $LDFLAGS conftest.$ac_ext $LIBS >&5'
+ ac_compiler_gnu=$ac_cv_cxx_compiler_gnu
+-{ echo "$as_me:$LINENO: checking how to run the C++ preprocessor" >&5
+-echo $ECHO_N "checking how to run the C++ preprocessor... $ECHO_C" >&6; }
++{ printf "%s\n" "$as_me:${as_lineno-$LINENO}: checking how to run the C++ preprocessor" >&5
++printf %s "checking how to run the C++ preprocessor... " >&6; }
+ if test -z "$CXXCPP"; then
+-  if test "${ac_cv_prog_CXXCPP+set}" = set; then
+-  echo $ECHO_N "(cached) $ECHO_C" >&6
+-else
+-      # Double quotes because CXXCPP needs to be expanded
+-    for CXXCPP in "$CXX -E" "/lib/cpp"
++  if test ${ac_cv_prog_CXXCPP+y}
++then :
++  printf %s "(cached) " >&6
++else $as_nop
++      # Double quotes because $CXX needs to be expanded
++    for CXXCPP in "$CXX -E" cpp /lib/cpp
+     do
+       ac_preproc_ok=false
+ for ac_cxx_preproc_warn_flag in '' yes
+ do
+   # Use a header file that comes with gcc, so configuring glibc
+   # with a fresh cross-compiler works.
+-  # Prefer <limits.h> to <assert.h> if __STDC__ is defined, since
+-  # <limits.h> exists even on freestanding compilers.
+   # On the NeXT, cc -E runs the code through the compiler's parser,
+   # not just through cpp. "Syntax error" is here to catch this case.
+-  cat >conftest.$ac_ext <<_ACEOF
+-/* confdefs.h.  */
+-_ACEOF
+-cat confdefs.h >>conftest.$ac_ext
+-cat >>conftest.$ac_ext <<_ACEOF
++  cat confdefs.h - <<_ACEOF >conftest.$ac_ext
+ /* end confdefs.h.  */
+-#ifdef __STDC__
+-# include <limits.h>
+-#else
+-# include <assert.h>
+-#endif
++#include <limits.h>
+ 		     Syntax error
+ _ACEOF
+-if { (ac_try="$ac_cpp conftest.$ac_ext"
+-case "(($ac_try" in
+-  *\"* | *\`* | *\\*) ac_try_echo=\$ac_try;;
+-  *) ac_try_echo=$ac_try;;
+-esac
+-eval "echo \"\$as_me:$LINENO: $ac_try_echo\"") >&5
+-  (eval "$ac_cpp conftest.$ac_ext") 2>conftest.er1
+-  ac_status=$?
+-  grep -v '^ *+' conftest.er1 >conftest.err
+-  rm -f conftest.er1
+-  cat conftest.err >&5
+-  echo "$as_me:$LINENO: \$? = $ac_status" >&5
+-  (exit $ac_status); } >/dev/null && {
+-	 test -z "$ac_cxx_preproc_warn_flag$ac_cxx_werror_flag" ||
+-	 test ! -s conftest.err
+-       }; then
+-  :
+-else
+-  echo "$as_me: failed program was:" >&5
+-sed 's/^/| /' conftest.$ac_ext >&5
++if ac_fn_cxx_try_cpp "$LINENO"
++then :
+ 
++else $as_nop
+   # Broken: fails on valid input.
+ continue
+ fi
+-
+-rm -f conftest.err conftest.$ac_ext
++rm -f conftest.err conftest.i conftest.$ac_ext
+ 
+   # OK, works on sane cases.  Now check whether nonexistent headers
+   # can be detected and how.
+-  cat >conftest.$ac_ext <<_ACEOF
+-/* confdefs.h.  */
+-_ACEOF
+-cat confdefs.h >>conftest.$ac_ext
+-cat >>conftest.$ac_ext <<_ACEOF
++  cat confdefs.h - <<_ACEOF >conftest.$ac_ext
+ /* end confdefs.h.  */
+ #include <ac_nonexistent.h>
+ _ACEOF
+-if { (ac_try="$ac_cpp conftest.$ac_ext"
+-case "(($ac_try" in
+-  *\"* | *\`* | *\\*) ac_try_echo=\$ac_try;;
+-  *) ac_try_echo=$ac_try;;
+-esac
+-eval "echo \"\$as_me:$LINENO: $ac_try_echo\"") >&5
+-  (eval "$ac_cpp conftest.$ac_ext") 2>conftest.er1
+-  ac_status=$?
+-  grep -v '^ *+' conftest.er1 >conftest.err
+-  rm -f conftest.er1
+-  cat conftest.err >&5
+-  echo "$as_me:$LINENO: \$? = $ac_status" >&5
+-  (exit $ac_status); } >/dev/null && {
+-	 test -z "$ac_cxx_preproc_warn_flag$ac_cxx_werror_flag" ||
+-	 test ! -s conftest.err
+-       }; then
++if ac_fn_cxx_try_cpp "$LINENO"
++then :
+   # Broken: success on invalid input.
+ continue
+-else
+-  echo "$as_me: failed program was:" >&5
+-sed 's/^/| /' conftest.$ac_ext >&5
+-
++else $as_nop
+   # Passes both tests.
+ ac_preproc_ok=:
+ break
+ fi
+-
+-rm -f conftest.err conftest.$ac_ext
++rm -f conftest.err conftest.i conftest.$ac_ext
+ 
+ done
+ # Because of `break', _AC_PREPROC_IFELSE's cleaning code was skipped.
+-rm -f conftest.err conftest.$ac_ext
+-if $ac_preproc_ok; then
++rm -f conftest.i conftest.err conftest.$ac_ext
++if $ac_preproc_ok
++then :
+   break
+ fi
+ 
+@@ -4719,107 +5819,57 @@ fi
+ else
+   ac_cv_prog_CXXCPP=$CXXCPP
+ fi
+-{ echo "$as_me:$LINENO: result: $CXXCPP" >&5
+-echo "${ECHO_T}$CXXCPP" >&6; }
++{ printf "%s\n" "$as_me:${as_lineno-$LINENO}: result: $CXXCPP" >&5
++printf "%s\n" "$CXXCPP" >&6; }
+ ac_preproc_ok=false
+ for ac_cxx_preproc_warn_flag in '' yes
+ do
+   # Use a header file that comes with gcc, so configuring glibc
+   # with a fresh cross-compiler works.
+-  # Prefer <limits.h> to <assert.h> if __STDC__ is defined, since
+-  # <limits.h> exists even on freestanding compilers.
+   # On the NeXT, cc -E runs the code through the compiler's parser,
+   # not just through cpp. "Syntax error" is here to catch this case.
+-  cat >conftest.$ac_ext <<_ACEOF
+-/* confdefs.h.  */
+-_ACEOF
+-cat confdefs.h >>conftest.$ac_ext
+-cat >>conftest.$ac_ext <<_ACEOF
++  cat confdefs.h - <<_ACEOF >conftest.$ac_ext
+ /* end confdefs.h.  */
+-#ifdef __STDC__
+-# include <limits.h>
+-#else
+-# include <assert.h>
+-#endif
++#include <limits.h>
+ 		     Syntax error
+ _ACEOF
+-if { (ac_try="$ac_cpp conftest.$ac_ext"
+-case "(($ac_try" in
+-  *\"* | *\`* | *\\*) ac_try_echo=\$ac_try;;
+-  *) ac_try_echo=$ac_try;;
+-esac
+-eval "echo \"\$as_me:$LINENO: $ac_try_echo\"") >&5
+-  (eval "$ac_cpp conftest.$ac_ext") 2>conftest.er1
+-  ac_status=$?
+-  grep -v '^ *+' conftest.er1 >conftest.err
+-  rm -f conftest.er1
+-  cat conftest.err >&5
+-  echo "$as_me:$LINENO: \$? = $ac_status" >&5
+-  (exit $ac_status); } >/dev/null && {
+-	 test -z "$ac_cxx_preproc_warn_flag$ac_cxx_werror_flag" ||
+-	 test ! -s conftest.err
+-       }; then
+-  :
+-else
+-  echo "$as_me: failed program was:" >&5
+-sed 's/^/| /' conftest.$ac_ext >&5
++if ac_fn_cxx_try_cpp "$LINENO"
++then :
+ 
++else $as_nop
+   # Broken: fails on valid input.
+ continue
+ fi
+-
+-rm -f conftest.err conftest.$ac_ext
++rm -f conftest.err conftest.i conftest.$ac_ext
+ 
+   # OK, works on sane cases.  Now check whether nonexistent headers
+   # can be detected and how.
+-  cat >conftest.$ac_ext <<_ACEOF
+-/* confdefs.h.  */
+-_ACEOF
+-cat confdefs.h >>conftest.$ac_ext
+-cat >>conftest.$ac_ext <<_ACEOF
++  cat confdefs.h - <<_ACEOF >conftest.$ac_ext
+ /* end confdefs.h.  */
+ #include <ac_nonexistent.h>
+ _ACEOF
+-if { (ac_try="$ac_cpp conftest.$ac_ext"
+-case "(($ac_try" in
+-  *\"* | *\`* | *\\*) ac_try_echo=\$ac_try;;
+-  *) ac_try_echo=$ac_try;;
+-esac
+-eval "echo \"\$as_me:$LINENO: $ac_try_echo\"") >&5
+-  (eval "$ac_cpp conftest.$ac_ext") 2>conftest.er1
+-  ac_status=$?
+-  grep -v '^ *+' conftest.er1 >conftest.err
+-  rm -f conftest.er1
+-  cat conftest.err >&5
+-  echo "$as_me:$LINENO: \$? = $ac_status" >&5
+-  (exit $ac_status); } >/dev/null && {
+-	 test -z "$ac_cxx_preproc_warn_flag$ac_cxx_werror_flag" ||
+-	 test ! -s conftest.err
+-       }; then
++if ac_fn_cxx_try_cpp "$LINENO"
++then :
+   # Broken: success on invalid input.
+ continue
+-else
+-  echo "$as_me: failed program was:" >&5
+-sed 's/^/| /' conftest.$ac_ext >&5
+-
++else $as_nop
+   # Passes both tests.
+ ac_preproc_ok=:
+ break
+ fi
+-
+-rm -f conftest.err conftest.$ac_ext
++rm -f conftest.err conftest.i conftest.$ac_ext
+ 
+ done
+ # Because of `break', _AC_PREPROC_IFELSE's cleaning code was skipped.
+-rm -f conftest.err conftest.$ac_ext
+-if $ac_preproc_ok; then
+-  :
+-else
+-  { { echo "$as_me:$LINENO: error: C++ preprocessor \"$CXXCPP\" fails sanity check
+-See \`config.log' for more details." >&5
+-echo "$as_me: error: C++ preprocessor \"$CXXCPP\" fails sanity check
+-See \`config.log' for more details." >&2;}
+-   { (exit 1); exit 1; }; }
++rm -f conftest.i conftest.err conftest.$ac_ext
++if $ac_preproc_ok
++then :
++
++else $as_nop
++  { { printf "%s\n" "$as_me:${as_lineno-$LINENO}: error: in \`$ac_pwd':" >&5
++printf "%s\n" "$as_me: error: in \`$ac_pwd':" >&2;}
++as_fn_error $? "C++ preprocessor \"$CXXCPP\" fails sanity check
++See \`config.log' for more details" "$LINENO" 5; }
+ fi
+ 
+ ac_ext=c
+@@ -4841,8 +5891,8 @@ ac_compile='$CXX -c $CXXFLAGS $CPPFLAGS conftest.$ac_ext >&5'
+ ac_link='$CXX -o conftest$ac_exeext $CXXFLAGS $CPPFLAGS $LDFLAGS conftest.$ac_ext $LIBS >&5'
+ ac_compiler_gnu=$ac_cv_cxx_compiler_gnu
+ 
+-  echo "configure:4844:" CXXP is $CXX >&5
+-  echo "configure:4845:" CXXCPP is $CXXCPP >&5
++  echo "configure:5894:" CXXP is $CXX >&5
++  echo "configure:5895:" CXXCPP is $CXXCPP >&5
+ 
+   CXX_ID=unknown
+   CXX_VERSION=unknown
+@@ -4851,17 +5901,14 @@ ac_compiler_gnu=$ac_cv_cxx_compiler_gnu
+ 
+   # Check if it is a Sun compiler.
+   if test $CXX_ID = unknown; then
+-    echo "configure:4854:" checking if $CXX is sunpro >&5
+-    cat >conftest.$ac_ext <<_ACEOF
+-/* confdefs.h.  */
+-_ACEOF
+-cat confdefs.h >>conftest.$ac_ext
+-cat >>conftest.$ac_ext <<_ACEOF
++    echo "configure:5904:" checking if $CXX is sunpro >&5
++    cat confdefs.h - <<_ACEOF >conftest.$ac_ext
+ /* end confdefs.h.  */
+ __SUNPRO_CC
+ _ACEOF
+ if (eval "$ac_cpp conftest.$ac_ext") 2>&5 |
+-  $EGREP "^0x[0-9]+" >/dev/null 2>&1; then
++  $EGREP "^0x[0-9]+" >/dev/null 2>&1
++then :
+   CXX_ID=sunpro
+       # SUN compiler defines __SUNPRO_CC to the version number.
+       echo __SUNPRO_CC > conftest.C
+@@ -4869,19 +5916,15 @@ if (eval "$ac_cpp conftest.$ac_ext") 2>&5 |
+       rm -f conftest.C
+ 
+ fi
+-rm -f conftest*
++rm -rf conftest*
+ 
+   fi
+ 
+ 
+   # Check if it is a Intel compiler.
+   if test $CXX_ID = unknown; then
+-    echo "configure:4879:" checking if $CXX is intel >&5
+-    cat >conftest.$ac_ext <<_ACEOF
+-/* confdefs.h.  */
+-_ACEOF
+-cat confdefs.h >>conftest.$ac_ext
+-cat >>conftest.$ac_ext <<_ACEOF
++    echo "configure:5926:" checking if $CXX is intel >&5
++    cat confdefs.h - <<_ACEOF >conftest.$ac_ext
+ /* end confdefs.h.  */
+ #ifdef __INTEL_COMPILER
+ yes;
+@@ -4889,7 +5932,8 @@ yes;
+ 
+ _ACEOF
+ if (eval "$ac_cpp conftest.$ac_ext") 2>&5 |
+-  $EGREP "^yes" >/dev/null 2>&1; then
++  $EGREP "^yes" >/dev/null 2>&1
++then :
+   CXX_ID=intel
+       # Intel compiler defines __INTEL_COMPILER to the version number.
+       echo __INTEL_COMPILER > conftest.C
+@@ -4897,19 +5941,15 @@ if (eval "$ac_cpp conftest.$ac_ext") 2>&5 |
+       rm -f conftest.C
+ 
+ fi
+-rm -f conftest*
++rm -rf conftest*
+ 
+   fi
+ 
+ 
+   # Check if it is a GNU compiler.
+   if test $CXX_ID = unknown; then
+-    echo "configure:4907:" checking if $CXX is gnu >&5
+-    cat >conftest.$ac_ext <<_ACEOF
+-/* confdefs.h.  */
+-_ACEOF
+-cat confdefs.h >>conftest.$ac_ext
+-cat >>conftest.$ac_ext <<_ACEOF
++    echo "configure:5951:" checking if $CXX is gnu >&5
++    cat confdefs.h - <<_ACEOF >conftest.$ac_ext
+ /* end confdefs.h.  */
+ #ifdef __GNUC__
+ yes;
+@@ -4917,7 +5957,8 @@ yes;
+ 
+ _ACEOF
+ if (eval "$ac_cpp conftest.$ac_ext") 2>&5 |
+-  $EGREP "^yes" >/dev/null 2>&1; then
++  $EGREP "^yes" >/dev/null 2>&1
++then :
+   CXX_ID=gnu
+     # GNU compilers output version number with option --version.
+     # Alternatively, it also defines the macros __GNUC__,
+@@ -4925,24 +5966,21 @@ if (eval "$ac_cpp conftest.$ac_ext") 2>&5 |
+     CXX_VERSION=`$CXX --version | sed -e 's/[^0-9]\{0,\}\([^ ]\{1,\}\).\{0,\}/\1/' -e 1q`
+ 
+ fi
+-rm -f conftest*
++rm -rf conftest*
+ 
+   fi
+ 
+ 
+   # Check if it is a DEC compiler.
+   if test $CXX_ID = unknown; then
+-    echo "configure:4935:" checking if $CXX is dec >&5
+-    cat >conftest.$ac_ext <<_ACEOF
+-/* confdefs.h.  */
+-_ACEOF
+-cat confdefs.h >>conftest.$ac_ext
+-cat >>conftest.$ac_ext <<_ACEOF
++    echo "configure:5976:" checking if $CXX is dec >&5
++    cat confdefs.h - <<_ACEOF >conftest.$ac_ext
+ /* end confdefs.h.  */
+ __DECCXX
+ _ACEOF
+ if (eval "$ac_cpp conftest.$ac_ext") 2>&5 |
+-  $EGREP "^1" >/dev/null 2>&1; then
++  $EGREP "^1" >/dev/null 2>&1
++then :
+   CXX_ID=dec
+       # DEC compiler defines __DECCXX_VER to the version number.
+       echo __DECCXX_VER > conftest.C
+@@ -4950,24 +5988,21 @@ if (eval "$ac_cpp conftest.$ac_ext") 2>&5 |
+       rm -f conftest.C
+ 
+ fi
+-rm -f conftest*
++rm -rf conftest*
+ 
+   fi
+ 
+ 
+   # Check if it is a KAI compiler.
+   if test $CXX_ID = unknown; then
+-    echo "configure:4960:" checking if $CXX is kai >&5
+-    cat >conftest.$ac_ext <<_ACEOF
+-/* confdefs.h.  */
+-_ACEOF
+-cat confdefs.h >>conftest.$ac_ext
+-cat >>conftest.$ac_ext <<_ACEOF
++    echo "configure:5998:" checking if $CXX is kai >&5
++    cat confdefs.h - <<_ACEOF >conftest.$ac_ext
+ /* end confdefs.h.  */
+ __KCC
+ _ACEOF
+ if (eval "$ac_cpp conftest.$ac_ext") 2>&5 |
+-  $EGREP "^1" >/dev/null 2>&1; then
++  $EGREP "^1" >/dev/null 2>&1
++then :
+   CXX_ID=kai
+       # KCC compiler defines __KCC_VERSION to the version number.
+       echo __KCC_VERSION > conftest.C
+@@ -4975,24 +6010,21 @@ if (eval "$ac_cpp conftest.$ac_ext") 2>&5 |
+       rm -f conftest.C
+ 
+ fi
+-rm -f conftest*
++rm -rf conftest*
+ 
+   fi
+ 
+ 
+   # Check if it is a SGI compiler.
+   if test $CXX_ID = unknown; then
+-    echo "configure:4985:" checking if $CXX is sgi >&5
+-    cat >conftest.$ac_ext <<_ACEOF
+-/* confdefs.h.  */
+-_ACEOF
+-cat confdefs.h >>conftest.$ac_ext
+-cat >>conftest.$ac_ext <<_ACEOF
++    echo "configure:6020:" checking if $CXX is sgi >&5
++    cat confdefs.h - <<_ACEOF >conftest.$ac_ext
+ /* end confdefs.h.  */
+ __sgi
+ _ACEOF
+ if (eval "$ac_cpp conftest.$ac_ext") 2>&5 |
+-  $EGREP "^1" >/dev/null 2>&1; then
++  $EGREP "^1" >/dev/null 2>&1
++then :
+   CXX_ID=sgi
+       # SGI compiler defines _COMPILER_VERSION to the version number.
+       echo _COMPILER_VERSION > conftest.C
+@@ -5000,19 +6032,15 @@ if (eval "$ac_cpp conftest.$ac_ext") 2>&5 |
+       rm -f conftest.C
+ 
+ fi
+-rm -f conftest*
++rm -rf conftest*
+ 
+   fi
+ 
+ 
+   # Check if it is a IBM compiler.
+   if test $CXX_ID = unknown; then
+-    echo "configure:5010:" checking if $CXX is xlc >&5
+-    cat >conftest.$ac_ext <<_ACEOF
+-/* confdefs.h.  */
+-_ACEOF
+-cat confdefs.h >>conftest.$ac_ext
+-cat >>conftest.$ac_ext <<_ACEOF
++    echo "configure:6042:" checking if $CXX is xlc >&5
++    cat confdefs.h - <<_ACEOF >conftest.$ac_ext
+ /* end confdefs.h.  */
+ #ifdef __xlC__
+ yes;
+@@ -5020,7 +6048,8 @@ yes;
+ 
+ _ACEOF
+ if (eval "$ac_cpp conftest.$ac_ext") 2>&5 |
+-  $EGREP "^yes" >/dev/null 2>&1; then
++  $EGREP "^yes" >/dev/null 2>&1
++then :
+   CXX_ID=xlc
+     # IBM compiler defines __xlC__ to the version number.
+     echo __xlC__ > conftest.C
+@@ -5028,7 +6057,7 @@ if (eval "$ac_cpp conftest.$ac_ext") 2>&5 |
+     rm -f conftest.C
+ 
+ fi
+-rm -f conftest*
++rm -rf conftest*
+ 
+   fi
+ 
+@@ -5049,7 +6078,7 @@ for btng_log_vars_index in $btng_log_vars ; do
+   else
+     btng_log_vars_value="unset";
+   fi
+-  echo "configure:5052:" "$btng_log_vars_index is $btng_log_vars_value" >&5;
++  echo "configure:6081:" "$btng_log_vars_index is $btng_log_vars_value" >&5;
+ done
+ 
+ 
+@@ -5064,11 +6093,11 @@ done
+ case $CXX_ID in
+ gnu|xlc|intel) ;;
+ *)
+-  { echo "$as_me:$LINENO: WARNING:
++  { printf "%s\n" "$as_me:${as_lineno-$LINENO}: WARNING:
+ You are using a C++ compiler unsupported by SAMRAI
+ You are on your own!
+ " >&5
+-echo "$as_me: WARNING:
++printf "%s\n" "$as_me: WARNING:
+ You are using a C++ compiler unsupported by SAMRAI
+ You are on your own!
+ " >&2;}
+@@ -5080,7 +6109,7 @@ for i in "$CXX" "$CC" ; do
+   baseprog=`echo $i | awk '{print $1}'`
+   prog=`which $baseprog`
+   if echo "$prog" | grep -v '^/usr/bin/' > /dev/null; then
+-    { echo "$as_me:$LINENO: NOTIFICATION:
++    { printf "%s\n" "$as_me:${as_lineno-$LINENO}: NOTIFICATION:
+ 
+ The compiler $i has an unusual path.
+ This may cause link problems if you don't also have the associated
+@@ -5089,7 +6118,7 @@ that path in your LD_LIBRARY_PATH, the compiler checks may not run
+ properly.  In that case, you may want to stop this process now, set
+ your LD_LIBRARY_PATH appropriately and run it.
+ " >&5
+-echo "$as_me: NOTIFICATION:
++printf "%s\n" "$as_me: NOTIFICATION:
+ 
+ The compiler $i has an unusual path.
+ This may cause link problems if you don't also have the associated
+@@ -5104,12 +6133,13 @@ done
+ 
+ 
+ 
+-   { echo "$as_me:$LINENO: checking whether ${CXX} supports namespace" >&5
+-echo $ECHO_N "checking whether ${CXX} supports namespace... $ECHO_C" >&6; }
++   { printf "%s\n" "$as_me:${as_lineno-$LINENO}: checking whether ${CXX} supports namespace" >&5
++printf %s "checking whether ${CXX} supports namespace... " >&6; }
+ 
+-   if test "${casc_cv_cxx_have_namespace+set}" = set; then
+-  echo $ECHO_N "(cached) $ECHO_C" >&6
+-else
++   if test ${casc_cv_cxx_have_namespace+y}
++then :
++  printf %s "(cached) " >&6
++else $as_nop
+ 
+ 
+       ac_ext=cpp
+@@ -5118,11 +6148,7 @@ ac_compile='$CXX -c $CXXFLAGS $CPPFLAGS conftest.$ac_ext >&5'
+ ac_link='$CXX -o conftest$ac_exeext $CXXFLAGS $CPPFLAGS $LDFLAGS conftest.$ac_ext $LIBS >&5'
+ ac_compiler_gnu=$ac_cv_cxx_compiler_gnu
+ 
+-      cat >conftest.$ac_ext <<_ACEOF
+-/* confdefs.h.  */
+-_ACEOF
+-cat confdefs.h >>conftest.$ac_ext
+-cat >>conftest.$ac_ext <<_ACEOF
++      cat confdefs.h - <<_ACEOF >conftest.$ac_ext
+ /* end confdefs.h.  */
+ 
+ namespace test {
+@@ -5133,41 +6159,21 @@ using namespace test;
+ int foo() { int x = t(); x++; return x; }
+ 
+ int
+-main ()
++main (void)
+ {
+ /* empty */
+   ;
+   return 0;
+ }
+ _ACEOF
+-rm -f conftest.$ac_objext conftest$ac_exeext
+-if { (ac_try="$ac_link"
+-case "(($ac_try" in
+-  *\"* | *\`* | *\\*) ac_try_echo=\$ac_try;;
+-  *) ac_try_echo=$ac_try;;
+-esac
+-eval "echo \"\$as_me:$LINENO: $ac_try_echo\"") >&5
+-  (eval "$ac_link") 2>conftest.er1
+-  ac_status=$?
+-  grep -v '^ *+' conftest.er1 >conftest.err
+-  rm -f conftest.er1
+-  cat conftest.err >&5
+-  echo "$as_me:$LINENO: \$? = $ac_status" >&5
+-  (exit $ac_status); } && {
+-	 test -z "$ac_cxx_werror_flag" ||
+-	 test ! -s conftest.err
+-       } && test -s conftest$ac_exeext &&
+-       $as_test_x conftest$ac_exeext; then
++if ac_fn_cxx_try_link "$LINENO"
++then :
+   casc_cv_cxx_have_namespace=yes
+-else
+-  echo "$as_me: failed program was:" >&5
+-sed 's/^/| /' conftest.$ac_ext >&5
+-
+-	casc_cv_cxx_have_namespace=no
++else $as_nop
++  casc_cv_cxx_have_namespace=no
+ fi
+-
+-rm -f core conftest.err conftest.$ac_objext conftest_ipa8_conftest.oo \
+-      conftest$ac_exeext conftest.$ac_ext
++rm -f core conftest.err conftest.$ac_objext conftest.beam \
++    conftest$ac_exeext conftest.$ac_ext
+       ac_ext=c
+ ac_cpp='$CPP $CPPFLAGS'
+ ac_compile='$CC -c $CFLAGS $CPPFLAGS conftest.$ac_ext >&5'
+@@ -5177,31 +6183,28 @@ ac_compiler_gnu=$ac_cv_c_compiler_gnu
+ 
+ fi
+ 
+-   { echo "$as_me:$LINENO: result: $casc_cv_cxx_have_namespace" >&5
+-echo "${ECHO_T}$casc_cv_cxx_have_namespace" >&6; }
++   { printf "%s\n" "$as_me:${as_lineno-$LINENO}: result: $casc_cv_cxx_have_namespace" >&5
++printf "%s\n" "$casc_cv_cxx_have_namespace" >&6; }
+ 
+    if test "$casc_cv_cxx_have_namespace" = yes; then
+ 
+-cat >>confdefs.h <<\_ACEOF
+-#define HAVE_NAMESPACE 1
+-_ACEOF
++printf "%s\n" "#define HAVE_NAMESPACE 1" >>confdefs.h
+ 
+    else
+ 
+-cat >>confdefs.h <<\_ACEOF
+-#define LACKS_NAMESPACE 1
+-_ACEOF
++printf "%s\n" "#define LACKS_NAMESPACE 1" >>confdefs.h
+ 
+    fi
+ 
+ 
+ 
+-   { echo "$as_me:$LINENO: checking whether ${CXX} supports template-based complex numbers" >&5
+-echo $ECHO_N "checking whether ${CXX} supports template-based complex numbers... $ECHO_C" >&6; }
++   { printf "%s\n" "$as_me:${as_lineno-$LINENO}: checking whether ${CXX} supports template-based complex numbers" >&5
++printf %s "checking whether ${CXX} supports template-based complex numbers... " >&6; }
+ 
+-   if test "${casc_cv_cxx_have_template_complex+set}" = set; then
+-  echo $ECHO_N "(cached) $ECHO_C" >&6
+-else
++   if test ${casc_cv_cxx_have_template_complex+y}
++then :
++  printf %s "(cached) " >&6
++else $as_nop
+ 
+ 
+       ac_ext=cpp
+@@ -5210,11 +6213,7 @@ ac_compile='$CXX -c $CXXFLAGS $CPPFLAGS conftest.$ac_ext >&5'
+ ac_link='$CXX -o conftest$ac_exeext $CXXFLAGS $CPPFLAGS $LDFLAGS conftest.$ac_ext $LIBS >&5'
+ ac_compiler_gnu=$ac_cv_cxx_compiler_gnu
+ 
+-      cat >conftest.$ac_ext <<_ACEOF
+-/* confdefs.h.  */
+-_ACEOF
+-cat confdefs.h >>conftest.$ac_ext
+-cat >>conftest.$ac_ext <<_ACEOF
++      cat confdefs.h - <<_ACEOF >conftest.$ac_ext
+ /* end confdefs.h.  */
+ 
+ #include <complex.h>
+@@ -5223,39 +6222,20 @@ void foo() {
+ }
+ 
+ int
+-main ()
++main (void)
+ {
+ /* empty */
+   ;
+   return 0;
+ }
+ _ACEOF
+-rm -f conftest.$ac_objext
+-if { (ac_try="$ac_compile"
+-case "(($ac_try" in
+-  *\"* | *\`* | *\\*) ac_try_echo=\$ac_try;;
+-  *) ac_try_echo=$ac_try;;
+-esac
+-eval "echo \"\$as_me:$LINENO: $ac_try_echo\"") >&5
+-  (eval "$ac_compile") 2>conftest.er1
+-  ac_status=$?
+-  grep -v '^ *+' conftest.er1 >conftest.err
+-  rm -f conftest.er1
+-  cat conftest.err >&5
+-  echo "$as_me:$LINENO: \$? = $ac_status" >&5
+-  (exit $ac_status); } && {
+-	 test -z "$ac_cxx_werror_flag" ||
+-	 test ! -s conftest.err
+-       } && test -s conftest.$ac_objext; then
++if ac_fn_cxx_try_compile "$LINENO"
++then :
+   casc_cv_cxx_have_template_complex=yes
+-else
+-  echo "$as_me: failed program was:" >&5
+-sed 's/^/| /' conftest.$ac_ext >&5
+-
+-	casc_cv_cxx_have_template_complex=no
++else $as_nop
++  casc_cv_cxx_have_template_complex=no
+ fi
+-
+-rm -f core conftest.err conftest.$ac_objext conftest.$ac_ext
++rm -f core conftest.err conftest.$ac_objext conftest.beam conftest.$ac_ext
+       ac_ext=c
+ ac_cpp='$CPP $CPPFLAGS'
+ ac_compile='$CC -c $CFLAGS $CPPFLAGS conftest.$ac_ext >&5'
+@@ -5266,21 +6246,20 @@ ac_compiler_gnu=$ac_cv_c_compiler_gnu
+ fi
+ 
+ 
+-   { echo "$as_me:$LINENO: result: $casc_cv_cxx_have_template_complex" >&5
+-echo "${ECHO_T}$casc_cv_cxx_have_template_complex" >&6; }
++   { printf "%s\n" "$as_me:${as_lineno-$LINENO}: result: $casc_cv_cxx_have_template_complex" >&5
++printf "%s\n" "$casc_cv_cxx_have_template_complex" >&6; }
+ 
+    if test "$casc_cv_cxx_have_template_complex" = yes; then
+ 
+-cat >>confdefs.h <<\_ACEOF
+-#define HAVE_TEMPLATE_COMPLEX 1
+-_ACEOF
++printf "%s\n" "#define HAVE_TEMPLATE_COMPLEX 1" >>confdefs.h
+ 
+    else
+-      { echo "$as_me:$LINENO: checking whether ${CXX} supports ISO template-based complex numbers" >&5
+-echo $ECHO_N "checking whether ${CXX} supports ISO template-based complex numbers... $ECHO_C" >&6; }
+-      if test "${casc_cv_cxx_have_template_complex_std+set}" = set; then
+-  echo $ECHO_N "(cached) $ECHO_C" >&6
+-else
++      { printf "%s\n" "$as_me:${as_lineno-$LINENO}: checking whether ${CXX} supports ISO template-based complex numbers" >&5
++printf %s "checking whether ${CXX} supports ISO template-based complex numbers... " >&6; }
++      if test ${casc_cv_cxx_have_template_complex_std+y}
++then :
++  printf %s "(cached) " >&6
++else $as_nop
+ 
+ 
+          ac_ext=cpp
+@@ -5289,11 +6268,7 @@ ac_compile='$CXX -c $CXXFLAGS $CPPFLAGS conftest.$ac_ext >&5'
+ ac_link='$CXX -o conftest$ac_exeext $CXXFLAGS $CPPFLAGS $LDFLAGS conftest.$ac_ext $LIBS >&5'
+ ac_compiler_gnu=$ac_cv_cxx_compiler_gnu
+ 
+-         cat >conftest.$ac_ext <<_ACEOF
+-/* confdefs.h.  */
+-_ACEOF
+-cat confdefs.h >>conftest.$ac_ext
+-cat >>conftest.$ac_ext <<_ACEOF
++         cat confdefs.h - <<_ACEOF >conftest.$ac_ext
+ /* end confdefs.h.  */
+ 
+ #include <complex>
+@@ -5302,39 +6277,20 @@ void foo() {
+ }
+ 
+ int
+-main ()
++main (void)
+ {
+ /* empty */
+   ;
+   return 0;
+ }
+ _ACEOF
+-rm -f conftest.$ac_objext
+-if { (ac_try="$ac_compile"
+-case "(($ac_try" in
+-  *\"* | *\`* | *\\*) ac_try_echo=\$ac_try;;
+-  *) ac_try_echo=$ac_try;;
+-esac
+-eval "echo \"\$as_me:$LINENO: $ac_try_echo\"") >&5
+-  (eval "$ac_compile") 2>conftest.er1
+-  ac_status=$?
+-  grep -v '^ *+' conftest.er1 >conftest.err
+-  rm -f conftest.er1
+-  cat conftest.err >&5
+-  echo "$as_me:$LINENO: \$? = $ac_status" >&5
+-  (exit $ac_status); } && {
+-	 test -z "$ac_cxx_werror_flag" ||
+-	 test ! -s conftest.err
+-       } && test -s conftest.$ac_objext; then
++if ac_fn_cxx_try_compile "$LINENO"
++then :
+   casc_cv_cxx_have_template_complex_std=yes
+-else
+-  echo "$as_me: failed program was:" >&5
+-sed 's/^/| /' conftest.$ac_ext >&5
+-
+-	casc_cv_cxx_have_template_complex_std=no
++else $as_nop
++  casc_cv_cxx_have_template_complex_std=no
+ fi
+-
+-rm -f core conftest.err conftest.$ac_objext conftest.$ac_ext
++rm -f core conftest.err conftest.$ac_objext conftest.beam conftest.$ac_ext
+          ac_ext=c
+ ac_cpp='$CPP $CPPFLAGS'
+ ac_compile='$CC -c $CFLAGS $CPPFLAGS conftest.$ac_ext >&5'
+@@ -5345,32 +6301,29 @@ ac_compiler_gnu=$ac_cv_c_compiler_gnu
+ fi
+ 
+ 
+-      { echo "$as_me:$LINENO: result: $casc_cv_cxx_have_template_complex_std" >&5
+-echo "${ECHO_T}$casc_cv_cxx_have_template_complex_std" >&6; }
++      { printf "%s\n" "$as_me:${as_lineno-$LINENO}: result: $casc_cv_cxx_have_template_complex_std" >&5
++printf "%s\n" "$casc_cv_cxx_have_template_complex_std" >&6; }
+ 
+       if test "$casc_cv_cxx_have_template_complex_std" = yes; then
+ 
+-cat >>confdefs.h <<\_ACEOF
+-#define HAVE_TEMPLATE_COMPLEX 1
+-_ACEOF
++printf "%s\n" "#define HAVE_TEMPLATE_COMPLEX 1" >>confdefs.h
+ 
+       else
+ 
+-cat >>confdefs.h <<\_ACEOF
+-#define LACKS_TEMPLATE_COMPLEX 1
+-_ACEOF
++printf "%s\n" "#define LACKS_TEMPLATE_COMPLEX 1" >>confdefs.h
+ 
+       fi
+    fi
+ 
+ 
+ 
+-   { echo "$as_me:$LINENO: checking whether ${CXX} supports sstream.h and class ostringstream" >&5
+-echo $ECHO_N "checking whether ${CXX} supports sstream.h and class ostringstream... $ECHO_C" >&6; }
++   { printf "%s\n" "$as_me:${as_lineno-$LINENO}: checking whether ${CXX} supports sstream.h and class ostringstream" >&5
++printf %s "checking whether ${CXX} supports sstream.h and class ostringstream... " >&6; }
+ 
+-   if test "${casc_cv_cxx_have_sstream+set}" = set; then
+-  echo $ECHO_N "(cached) $ECHO_C" >&6
+-else
++   if test ${casc_cv_cxx_have_sstream+y}
++then :
++  printf %s "(cached) " >&6
++else $as_nop
+ 
+ 
+       ac_ext=cpp
+@@ -5379,11 +6332,7 @@ ac_compile='$CXX -c $CXXFLAGS $CPPFLAGS conftest.$ac_ext >&5'
+ ac_link='$CXX -o conftest$ac_exeext $CXXFLAGS $CPPFLAGS $LDFLAGS conftest.$ac_ext $LIBS >&5'
+ ac_compiler_gnu=$ac_cv_cxx_compiler_gnu
+ 
+-      cat >conftest.$ac_ext <<_ACEOF
+-/* confdefs.h.  */
+-_ACEOF
+-cat confdefs.h >>conftest.$ac_ext
+-cat >>conftest.$ac_ext <<_ACEOF
++      cat confdefs.h - <<_ACEOF >conftest.$ac_ext
+ /* end confdefs.h.  */
+ 
+ #include <sstream.h>
+@@ -5398,39 +6347,20 @@ void foo() {
+ }
+ 
+ int
+-main ()
++main (void)
+ {
+ /* empty */
+   ;
+   return 0;
+ }
+ _ACEOF
+-rm -f conftest.$ac_objext
+-if { (ac_try="$ac_compile"
+-case "(($ac_try" in
+-  *\"* | *\`* | *\\*) ac_try_echo=\$ac_try;;
+-  *) ac_try_echo=$ac_try;;
+-esac
+-eval "echo \"\$as_me:$LINENO: $ac_try_echo\"") >&5
+-  (eval "$ac_compile") 2>conftest.er1
+-  ac_status=$?
+-  grep -v '^ *+' conftest.er1 >conftest.err
+-  rm -f conftest.er1
+-  cat conftest.err >&5
+-  echo "$as_me:$LINENO: \$? = $ac_status" >&5
+-  (exit $ac_status); } && {
+-	 test -z "$ac_cxx_werror_flag" ||
+-	 test ! -s conftest.err
+-       } && test -s conftest.$ac_objext; then
++if ac_fn_cxx_try_compile "$LINENO"
++then :
+   casc_cv_cxx_have_sstream=yes
+-else
+-  echo "$as_me: failed program was:" >&5
+-sed 's/^/| /' conftest.$ac_ext >&5
+-
+-	casc_cv_cxx_have_sstream=no
++else $as_nop
++  casc_cv_cxx_have_sstream=no
+ fi
+-
+-rm -f core conftest.err conftest.$ac_objext conftest.$ac_ext
++rm -f core conftest.err conftest.$ac_objext conftest.beam conftest.$ac_ext
+       ac_ext=c
+ ac_cpp='$CPP $CPPFLAGS'
+ ac_compile='$CC -c $CFLAGS $CPPFLAGS conftest.$ac_ext >&5'
+@@ -5441,21 +6371,20 @@ ac_compiler_gnu=$ac_cv_c_compiler_gnu
+ fi
+ 
+ 
+-   { echo "$as_me:$LINENO: result: $casc_cv_cxx_have_sstream" >&5
+-echo "${ECHO_T}$casc_cv_cxx_have_sstream" >&6; }
++   { printf "%s\n" "$as_me:${as_lineno-$LINENO}: result: $casc_cv_cxx_have_sstream" >&5
++printf "%s\n" "$casc_cv_cxx_have_sstream" >&6; }
+ 
+    if test "$casc_cv_cxx_have_sstream" = yes; then
+ 
+-cat >>confdefs.h <<\_ACEOF
+-#define HAVE_SSTREAM 1
+-_ACEOF
++printf "%s\n" "#define HAVE_SSTREAM 1" >>confdefs.h
+ 
+    else
+-        { echo "$as_me:$LINENO: checking whether ${CXX} supports sstream and class ostringstream" >&5
+-echo $ECHO_N "checking whether ${CXX} supports sstream and class ostringstream... $ECHO_C" >&6; }
+-	if test "${casc_cv_cxx_have_sstream_std+set}" = set; then
+-  echo $ECHO_N "(cached) $ECHO_C" >&6
+-else
++        { printf "%s\n" "$as_me:${as_lineno-$LINENO}: checking whether ${CXX} supports sstream and class ostringstream" >&5
++printf %s "checking whether ${CXX} supports sstream and class ostringstream... " >&6; }
++	if test ${casc_cv_cxx_have_sstream_std+y}
++then :
++  printf %s "(cached) " >&6
++else $as_nop
+ 
+ 
+         ac_ext=cpp
+@@ -5464,11 +6393,7 @@ ac_compile='$CXX -c $CXXFLAGS $CPPFLAGS conftest.$ac_ext >&5'
+ ac_link='$CXX -o conftest$ac_exeext $CXXFLAGS $CPPFLAGS $LDFLAGS conftest.$ac_ext $LIBS >&5'
+ ac_compiler_gnu=$ac_cv_cxx_compiler_gnu
+ 
+-        cat >conftest.$ac_ext <<_ACEOF
+-/* confdefs.h.  */
+-_ACEOF
+-cat confdefs.h >>conftest.$ac_ext
+-cat >>conftest.$ac_ext <<_ACEOF
++        cat confdefs.h - <<_ACEOF >conftest.$ac_ext
+ /* end confdefs.h.  */
+ 
+ #include <sstream>
+@@ -5483,39 +6408,20 @@ void foo() {
+ }
+ 
+ int
+-main ()
++main (void)
+ {
+ /* empty */
+   ;
+   return 0;
+ }
+ _ACEOF
+-rm -f conftest.$ac_objext
+-if { (ac_try="$ac_compile"
+-case "(($ac_try" in
+-  *\"* | *\`* | *\\*) ac_try_echo=\$ac_try;;
+-  *) ac_try_echo=$ac_try;;
+-esac
+-eval "echo \"\$as_me:$LINENO: $ac_try_echo\"") >&5
+-  (eval "$ac_compile") 2>conftest.er1
+-  ac_status=$?
+-  grep -v '^ *+' conftest.er1 >conftest.err
+-  rm -f conftest.er1
+-  cat conftest.err >&5
+-  echo "$as_me:$LINENO: \$? = $ac_status" >&5
+-  (exit $ac_status); } && {
+-	 test -z "$ac_cxx_werror_flag" ||
+-	 test ! -s conftest.err
+-       } && test -s conftest.$ac_objext; then
++if ac_fn_cxx_try_compile "$LINENO"
++then :
+   casc_cv_cxx_have_sstream_std=yes
+-else
+-  echo "$as_me: failed program was:" >&5
+-sed 's/^/| /' conftest.$ac_ext >&5
+-
+-	casc_cv_cxx_have_sstream_std=no
++else $as_nop
++  casc_cv_cxx_have_sstream_std=no
+ fi
+-
+-rm -f core conftest.err conftest.$ac_objext conftest.$ac_ext
++rm -f core conftest.err conftest.$ac_objext conftest.beam conftest.$ac_ext
+         ac_ext=c
+ ac_cpp='$CPP $CPPFLAGS'
+ ac_compile='$CC -c $CFLAGS $CPPFLAGS conftest.$ac_ext >&5'
+@@ -5526,42 +6432,35 @@ ac_compiler_gnu=$ac_cv_c_compiler_gnu
+ fi
+ 
+ 
+-      { echo "$as_me:$LINENO: result: $casc_cv_cxx_have_sstream_std" >&5
+-echo "${ECHO_T}$casc_cv_cxx_have_sstream_std" >&6; }
++      { printf "%s\n" "$as_me:${as_lineno-$LINENO}: result: $casc_cv_cxx_have_sstream_std" >&5
++printf "%s\n" "$casc_cv_cxx_have_sstream_std" >&6; }
+ 
+       if test "$casc_cv_cxx_have_sstream_std" = yes; then
+ 
+-cat >>confdefs.h <<\_ACEOF
+-#define HAVE_SSTREAM 1
+-_ACEOF
++printf "%s\n" "#define HAVE_SSTREAM 1" >>confdefs.h
+ 
+ 
+-cat >>confdefs.h <<\_ACEOF
+-#define HAVE_ISO_SSTREAM 1
+-_ACEOF
++printf "%s\n" "#define HAVE_ISO_SSTREAM 1" >>confdefs.h
+ 
+       else
+ 
+-cat >>confdefs.h <<\_ACEOF
+-#define LACKS_SSTREAM 1
+-_ACEOF
++printf "%s\n" "#define LACKS_SSTREAM 1" >>confdefs.h
+ 
+ 
+-cat >>confdefs.h <<\_ACEOF
+-#define LACK_ISO_SSTREAM 1
+-_ACEOF
++printf "%s\n" "#define LACK_ISO_SSTREAM 1" >>confdefs.h
+ 
+       fi
+    fi
+ 
+ 
+ 
+-   { echo "$as_me:$LINENO: checking whether ${CXX} defines the iomanip left operator" >&5
+-echo $ECHO_N "checking whether ${CXX} defines the iomanip left operator... $ECHO_C" >&6; }
++   { printf "%s\n" "$as_me:${as_lineno-$LINENO}: checking whether ${CXX} defines the iomanip left operator" >&5
++printf %s "checking whether ${CXX} defines the iomanip left operator... " >&6; }
+ 
+-   if test "${casc_cv_cxx_have_iomanip_left+set}" = set; then
+-  echo $ECHO_N "(cached) $ECHO_C" >&6
+-else
++   if test ${casc_cv_cxx_have_iomanip_left+y}
++then :
++  printf %s "(cached) " >&6
++else $as_nop
+ 
+ 
+       ac_ext=cpp
+@@ -5570,11 +6469,7 @@ ac_compile='$CXX -c $CXXFLAGS $CPPFLAGS conftest.$ac_ext >&5'
+ ac_link='$CXX -o conftest$ac_exeext $CXXFLAGS $CPPFLAGS $LDFLAGS conftest.$ac_ext $LIBS >&5'
+ ac_compiler_gnu=$ac_cv_cxx_compiler_gnu
+ 
+-      cat >conftest.$ac_ext <<_ACEOF
+-/* confdefs.h.  */
+-_ACEOF
+-cat confdefs.h >>conftest.$ac_ext
+-cat >>conftest.$ac_ext <<_ACEOF
++      cat confdefs.h - <<_ACEOF >conftest.$ac_ext
+ /* end confdefs.h.  */
+ 
+ #include <iostream>
+@@ -5587,41 +6482,21 @@ void foo()
+ }
+ 
+ int
+-main ()
++main (void)
+ {
+ /* empty */
+   ;
+   return 0;
+ }
+ _ACEOF
+-rm -f conftest.$ac_objext conftest$ac_exeext
+-if { (ac_try="$ac_link"
+-case "(($ac_try" in
+-  *\"* | *\`* | *\\*) ac_try_echo=\$ac_try;;
+-  *) ac_try_echo=$ac_try;;
+-esac
+-eval "echo \"\$as_me:$LINENO: $ac_try_echo\"") >&5
+-  (eval "$ac_link") 2>conftest.er1
+-  ac_status=$?
+-  grep -v '^ *+' conftest.er1 >conftest.err
+-  rm -f conftest.er1
+-  cat conftest.err >&5
+-  echo "$as_me:$LINENO: \$? = $ac_status" >&5
+-  (exit $ac_status); } && {
+-	 test -z "$ac_cxx_werror_flag" ||
+-	 test ! -s conftest.err
+-       } && test -s conftest$ac_exeext &&
+-       $as_test_x conftest$ac_exeext; then
++if ac_fn_cxx_try_link "$LINENO"
++then :
+   casc_cv_cxx_have_iomanip_left=yes
+-else
+-  echo "$as_me: failed program was:" >&5
+-sed 's/^/| /' conftest.$ac_ext >&5
+-
+-	casc_cv_cxx_have_iomanip_left=no
++else $as_nop
++  casc_cv_cxx_have_iomanip_left=no
+ fi
+-
+-rm -f core conftest.err conftest.$ac_objext conftest_ipa8_conftest.oo \
+-      conftest$ac_exeext conftest.$ac_ext
++rm -f core conftest.err conftest.$ac_objext conftest.beam \
++    conftest$ac_exeext conftest.$ac_ext
+       ac_ext=c
+ ac_cpp='$CPP $CPPFLAGS'
+ ac_compile='$CC -c $CFLAGS $CPPFLAGS conftest.$ac_ext >&5'
+@@ -5631,31 +6506,28 @@ ac_compiler_gnu=$ac_cv_c_compiler_gnu
+ 
+ fi
+ 
+-   { echo "$as_me:$LINENO: result: $casc_cv_cxx_have_iomanip_left" >&5
+-echo "${ECHO_T}$casc_cv_cxx_have_iomanip_left" >&6; }
++   { printf "%s\n" "$as_me:${as_lineno-$LINENO}: result: $casc_cv_cxx_have_iomanip_left" >&5
++printf "%s\n" "$casc_cv_cxx_have_iomanip_left" >&6; }
+ 
+    if test "$casc_cv_cxx_have_iomanip_left" = yes; then
+ 
+-cat >>confdefs.h <<\_ACEOF
+-#define HAVE_IOMANIP_LEFT 1
+-_ACEOF
++printf "%s\n" "#define HAVE_IOMANIP_LEFT 1" >>confdefs.h
+ 
+    else
+ 
+-cat >>confdefs.h <<\_ACEOF
+-#define LACKS_IOMANIP_LEFT 1
+-_ACEOF
++printf "%s\n" "#define LACKS_IOMANIP_LEFT 1" >>confdefs.h
+ 
+    fi
+ 
+ 
+ 
+-   { echo "$as_me:$LINENO: checking whether ${CXX} defines the new placement operator" >&5
+-echo $ECHO_N "checking whether ${CXX} defines the new placement operator... $ECHO_C" >&6; }
++   { printf "%s\n" "$as_me:${as_lineno-$LINENO}: checking whether ${CXX} defines the new placement operator" >&5
++printf %s "checking whether ${CXX} defines the new placement operator... " >&6; }
+ 
+-   if test "${casc_cv_cxx_have_new_placement_operator+set}" = set; then
+-  echo $ECHO_N "(cached) $ECHO_C" >&6
+-else
++   if test ${casc_cv_cxx_have_new_placement_operator+y}
++then :
++  printf %s "(cached) " >&6
++else $as_nop
+ 
+ 
+       ac_ext=cpp
+@@ -5664,11 +6536,7 @@ ac_compile='$CXX -c $CXXFLAGS $CPPFLAGS conftest.$ac_ext >&5'
+ ac_link='$CXX -o conftest$ac_exeext $CXXFLAGS $CPPFLAGS $LDFLAGS conftest.$ac_ext $LIBS >&5'
+ ac_compiler_gnu=$ac_cv_cxx_compiler_gnu
+ 
+-      cat >conftest.$ac_ext <<_ACEOF
+-/* confdefs.h.  */
+-_ACEOF
+-cat confdefs.h >>conftest.$ac_ext
+-cat >>conftest.$ac_ext <<_ACEOF
++      cat confdefs.h - <<_ACEOF >conftest.$ac_ext
+ /* end confdefs.h.  */
+ 
+ #include <new>
+@@ -5678,41 +6546,21 @@ void trynew() {
+ }
+ 
+ int
+-main ()
++main (void)
+ {
+ /* empty */
+   ;
+   return 0;
+ }
+ _ACEOF
+-rm -f conftest.$ac_objext conftest$ac_exeext
+-if { (ac_try="$ac_link"
+-case "(($ac_try" in
+-  *\"* | *\`* | *\\*) ac_try_echo=\$ac_try;;
+-  *) ac_try_echo=$ac_try;;
+-esac
+-eval "echo \"\$as_me:$LINENO: $ac_try_echo\"") >&5
+-  (eval "$ac_link") 2>conftest.er1
+-  ac_status=$?
+-  grep -v '^ *+' conftest.er1 >conftest.err
+-  rm -f conftest.er1
+-  cat conftest.err >&5
+-  echo "$as_me:$LINENO: \$? = $ac_status" >&5
+-  (exit $ac_status); } && {
+-	 test -z "$ac_cxx_werror_flag" ||
+-	 test ! -s conftest.err
+-       } && test -s conftest$ac_exeext &&
+-       $as_test_x conftest$ac_exeext; then
++if ac_fn_cxx_try_link "$LINENO"
++then :
+   casc_cv_cxx_have_new_placement_operator=yes
+-else
+-  echo "$as_me: failed program was:" >&5
+-sed 's/^/| /' conftest.$ac_ext >&5
+-
+-	casc_cv_cxx_have_new_placement_operator=no
++else $as_nop
++  casc_cv_cxx_have_new_placement_operator=no
+ fi
+-
+-rm -f core conftest.err conftest.$ac_objext conftest_ipa8_conftest.oo \
+-      conftest$ac_exeext conftest.$ac_ext
++rm -f core conftest.err conftest.$ac_objext conftest.beam \
++    conftest$ac_exeext conftest.$ac_ext
+       ac_ext=c
+ ac_cpp='$CPP $CPPFLAGS'
+ ac_compile='$CC -c $CFLAGS $CPPFLAGS conftest.$ac_ext >&5'
+@@ -5723,30 +6571,27 @@ ac_compiler_gnu=$ac_cv_c_compiler_gnu
+ fi
+ 
+ 
+-   { echo "$as_me:$LINENO: result: $casc_cv_cxx_have_new_placement_operator" >&5
+-echo "${ECHO_T}$casc_cv_cxx_have_new_placement_operator" >&6; }
++   { printf "%s\n" "$as_me:${as_lineno-$LINENO}: result: $casc_cv_cxx_have_new_placement_operator" >&5
++printf "%s\n" "$casc_cv_cxx_have_new_placement_operator" >&6; }
+ 
+    if test "$casc_cv_cxx_have_new_placement_operator" = yes; then
+ 
+-cat >>confdefs.h <<\_ACEOF
+-#define HAVE_NEW_PLACEMENT_OPERATOR 1
+-_ACEOF
++printf "%s\n" "#define HAVE_NEW_PLACEMENT_OPERATOR 1" >>confdefs.h
+ 
+    else
+ 
+-cat >>confdefs.h <<\_ACEOF
+-#define LACKS_NEW_PLACEMENT_OPERATOR 1
+-_ACEOF
++printf "%s\n" "#define LACKS_NEW_PLACEMENT_OPERATOR 1" >>confdefs.h
+ 
+    fi
+ 
+ 
+ 
+-   { echo "$as_me:$LINENO: checking whether ${CXX} supports member function specialization" >&5
+-echo $ECHO_N "checking whether ${CXX} supports member function specialization... $ECHO_C" >&6; }
+-   if test "${casc_cv_cxx_have_member_function_specialization+set}" = set; then
+-  echo $ECHO_N "(cached) $ECHO_C" >&6
+-else
++   { printf "%s\n" "$as_me:${as_lineno-$LINENO}: checking whether ${CXX} supports member function specialization" >&5
++printf %s "checking whether ${CXX} supports member function specialization... " >&6; }
++   if test ${casc_cv_cxx_have_member_function_specialization+y}
++then :
++  printf %s "(cached) " >&6
++else $as_nop
+ 
+ 
+       ac_ext=cpp
+@@ -5755,11 +6600,7 @@ ac_compile='$CXX -c $CXXFLAGS $CPPFLAGS conftest.$ac_ext >&5'
+ ac_link='$CXX -o conftest$ac_exeext $CXXFLAGS $CPPFLAGS $LDFLAGS conftest.$ac_ext $LIBS >&5'
+ ac_compiler_gnu=$ac_cv_cxx_compiler_gnu
+ 
+-      cat >conftest.$ac_ext <<_ACEOF
+-/* confdefs.h.  */
+-_ACEOF
+-cat confdefs.h >>conftest.$ac_ext
+-cat >>conftest.$ac_ext <<_ACEOF
++      cat confdefs.h - <<_ACEOF >conftest.$ac_ext
+ /* end confdefs.h.  */
+ 
+ template <class T> class Pointer { public: void foo(); };
+@@ -5767,39 +6608,20 @@ template <> void Pointer<int>::foo();
+ template <> void Pointer<int>::foo() { }
+ 
+ int
+-main ()
++main (void)
+ {
+ /* empty */
+   ;
+   return 0;
+ }
+ _ACEOF
+-rm -f conftest.$ac_objext
+-if { (ac_try="$ac_compile"
+-case "(($ac_try" in
+-  *\"* | *\`* | *\\*) ac_try_echo=\$ac_try;;
+-  *) ac_try_echo=$ac_try;;
+-esac
+-eval "echo \"\$as_me:$LINENO: $ac_try_echo\"") >&5
+-  (eval "$ac_compile") 2>conftest.er1
+-  ac_status=$?
+-  grep -v '^ *+' conftest.er1 >conftest.err
+-  rm -f conftest.er1
+-  cat conftest.err >&5
+-  echo "$as_me:$LINENO: \$? = $ac_status" >&5
+-  (exit $ac_status); } && {
+-	 test -z "$ac_cxx_werror_flag" ||
+-	 test ! -s conftest.err
+-       } && test -s conftest.$ac_objext; then
++if ac_fn_cxx_try_compile "$LINENO"
++then :
+   casc_cv_cxx_have_member_function_specialization=yes
+-else
+-  echo "$as_me: failed program was:" >&5
+-sed 's/^/| /' conftest.$ac_ext >&5
+-
+-	casc_cv_cxx_have_member_function_specialization=no
++else $as_nop
++  casc_cv_cxx_have_member_function_specialization=no
+ fi
+-
+-rm -f core conftest.err conftest.$ac_objext conftest.$ac_ext
++rm -f core conftest.err conftest.$ac_objext conftest.beam conftest.$ac_ext
+       ac_ext=c
+ ac_cpp='$CPP $CPPFLAGS'
+ ac_compile='$CC -c $CFLAGS $CPPFLAGS conftest.$ac_ext >&5'
+@@ -5816,30 +6638,27 @@ fi
+          ;;
+    esac
+ 
+-   { echo "$as_me:$LINENO: result: $casc_cv_cxx_have_member_function_specialization" >&5
+-echo "${ECHO_T}$casc_cv_cxx_have_member_function_specialization" >&6; }
++   { printf "%s\n" "$as_me:${as_lineno-$LINENO}: result: $casc_cv_cxx_have_member_function_specialization" >&5
++printf "%s\n" "$casc_cv_cxx_have_member_function_specialization" >&6; }
+    if test "$casc_cv_cxx_have_member_function_specialization" = yes; then
+ 
+-cat >>confdefs.h <<\_ACEOF
+-#define HAVE_MEMBER_FUNCTION_SPECIALIZATION 1
+-_ACEOF
++printf "%s\n" "#define HAVE_MEMBER_FUNCTION_SPECIALIZATION 1" >>confdefs.h
+ 
+    else
+ 
+-cat >>confdefs.h <<\_ACEOF
+-#define LACKS_MEMBER_FUNCTION_SPECIALIZATION 1
+-_ACEOF
++printf "%s\n" "#define LACKS_MEMBER_FUNCTION_SPECIALIZATION 1" >>confdefs.h
+ 
+    fi
+ 
+ 
+ 
+ 
+-   { echo "$as_me:$LINENO: checking whether ${CXX} supports static data instantiation" >&5
+-echo $ECHO_N "checking whether ${CXX} supports static data instantiation... $ECHO_C" >&6; }
+-   if test "${casc_cv_cxx_have_static_data_instantiation+set}" = set; then
+-  echo $ECHO_N "(cached) $ECHO_C" >&6
+-else
++   { printf "%s\n" "$as_me:${as_lineno-$LINENO}: checking whether ${CXX} supports static data instantiation" >&5
++printf %s "checking whether ${CXX} supports static data instantiation... " >&6; }
++   if test ${casc_cv_cxx_have_static_data_instantiation+y}
++then :
++  printf %s "(cached) " >&6
++else $as_nop
+ 
+ 
+       ac_ext=cpp
+@@ -5848,50 +6667,27 @@ ac_compile='$CXX -c $CXXFLAGS $CPPFLAGS conftest.$ac_ext >&5'
+ ac_link='$CXX -o conftest$ac_exeext $CXXFLAGS $CPPFLAGS $LDFLAGS conftest.$ac_ext $LIBS >&5'
+ ac_compiler_gnu=$ac_cv_cxx_compiler_gnu
+ 
+-      cat >conftest.$ac_ext <<_ACEOF
+-/* confdefs.h.  */
+-_ACEOF
+-cat confdefs.h >>conftest.$ac_ext
+-cat >>conftest.$ac_ext <<_ACEOF
++      cat confdefs.h - <<_ACEOF >conftest.$ac_ext
+ /* end confdefs.h.  */
+ 
+ template <class T> class Pointer { public: void foo(); };
+ template <> void Pointer<int>::foo() { }
+ 
+ int
+-main ()
++main (void)
+ {
+ /* empty */
+   ;
+   return 0;
+ }
+ _ACEOF
+-rm -f conftest.$ac_objext
+-if { (ac_try="$ac_compile"
+-case "(($ac_try" in
+-  *\"* | *\`* | *\\*) ac_try_echo=\$ac_try;;
+-  *) ac_try_echo=$ac_try;;
+-esac
+-eval "echo \"\$as_me:$LINENO: $ac_try_echo\"") >&5
+-  (eval "$ac_compile") 2>conftest.er1
+-  ac_status=$?
+-  grep -v '^ *+' conftest.er1 >conftest.err
+-  rm -f conftest.er1
+-  cat conftest.err >&5
+-  echo "$as_me:$LINENO: \$? = $ac_status" >&5
+-  (exit $ac_status); } && {
+-	 test -z "$ac_cxx_werror_flag" ||
+-	 test ! -s conftest.err
+-       } && test -s conftest.$ac_objext; then
++if ac_fn_cxx_try_compile "$LINENO"
++then :
+   casc_cv_cxx_have_static_data_instantiation=yes
+-else
+-  echo "$as_me: failed program was:" >&5
+-sed 's/^/| /' conftest.$ac_ext >&5
+-
+-	casc_cv_cxx_have_static_data_instantiation=no
++else $as_nop
++  casc_cv_cxx_have_static_data_instantiation=no
+ fi
+-
+-rm -f core conftest.err conftest.$ac_objext conftest.$ac_ext
++rm -f core conftest.err conftest.$ac_objext conftest.beam conftest.$ac_ext
+       ac_ext=c
+ ac_cpp='$CPP $CPPFLAGS'
+ ac_compile='$CC -c $CFLAGS $CPPFLAGS conftest.$ac_ext >&5'
+@@ -5901,29 +6697,26 @@ ac_compiler_gnu=$ac_cv_c_compiler_gnu
+ 
+ fi
+ 
+-   { echo "$as_me:$LINENO: result: $casc_cv_cxx_have_static_data_instantiation" >&5
+-echo "${ECHO_T}$casc_cv_cxx_have_static_data_instantiation" >&6; }
++   { printf "%s\n" "$as_me:${as_lineno-$LINENO}: result: $casc_cv_cxx_have_static_data_instantiation" >&5
++printf "%s\n" "$casc_cv_cxx_have_static_data_instantiation" >&6; }
+    if test "$casc_cv_cxx_have_static_data_instantiation" = yes; then
+ 
+-cat >>confdefs.h <<\_ACEOF
+-#define HAVE_STATIC_DATA_INSTANTIATION 1
+-_ACEOF
++printf "%s\n" "#define HAVE_STATIC_DATA_INSTANTIATION 1" >>confdefs.h
+ 
+    else
+ 
+-cat >>confdefs.h <<\_ACEOF
+-#define LACKS_STATIC_DATA_INSTANTIATION 1
+-_ACEOF
++printf "%s\n" "#define LACKS_STATIC_DATA_INSTANTIATION 1" >>confdefs.h
+ 
+    fi
+ 
+ 
+ 
+-    { echo "$as_me:$LINENO: checking whether ${CXX} supports exception handling" >&5
+-echo $ECHO_N "checking whether ${CXX} supports exception handling... $ECHO_C" >&6; }
+-    if test "${casc_cxx_have_exception_handling+set}" = set; then
+-  echo $ECHO_N "(cached) $ECHO_C" >&6
+-else
++    { printf "%s\n" "$as_me:${as_lineno-$LINENO}: checking whether ${CXX} supports exception handling" >&5
++printf %s "checking whether ${CXX} supports exception handling... " >&6; }
++    if test ${casc_cxx_have_exception_handling+y}
++then :
++  printf %s "(cached) " >&6
++else $as_nop
+ 
+ 
+        ac_ext=cpp
+@@ -5932,11 +6725,7 @@ ac_compile='$CXX -c $CXXFLAGS $CPPFLAGS conftest.$ac_ext >&5'
+ ac_link='$CXX -o conftest$ac_exeext $CXXFLAGS $CPPFLAGS $LDFLAGS conftest.$ac_ext $LIBS >&5'
+ ac_compiler_gnu=$ac_cv_cxx_compiler_gnu
+ 
+-       cat >conftest.$ac_ext <<_ACEOF
+-/* confdefs.h.  */
+-_ACEOF
+-cat confdefs.h >>conftest.$ac_ext
+-cat >>conftest.$ac_ext <<_ACEOF
++       cat confdefs.h - <<_ACEOF >conftest.$ac_ext
+ /* end confdefs.h.  */
+ 
+ #include <fpu_control.h>
+@@ -5952,39 +6741,20 @@ void foo() {
+ }
+ 
+ int
+-main ()
++main (void)
+ {
+ /* empty */
+   ;
+   return 0;
+ }
+ _ACEOF
+-rm -f conftest.$ac_objext
+-if { (ac_try="$ac_compile"
+-case "(($ac_try" in
+-  *\"* | *\`* | *\\*) ac_try_echo=\$ac_try;;
+-  *) ac_try_echo=$ac_try;;
+-esac
+-eval "echo \"\$as_me:$LINENO: $ac_try_echo\"") >&5
+-  (eval "$ac_compile") 2>conftest.er1
+-  ac_status=$?
+-  grep -v '^ *+' conftest.er1 >conftest.err
+-  rm -f conftest.er1
+-  cat conftest.err >&5
+-  echo "$as_me:$LINENO: \$? = $ac_status" >&5
+-  (exit $ac_status); } && {
+-	 test -z "$ac_cxx_werror_flag" ||
+-	 test ! -s conftest.err
+-       } && test -s conftest.$ac_objext; then
++if ac_fn_cxx_try_compile "$LINENO"
++then :
+   casc_cxx_have_exception_handling=yes
+-else
+-  echo "$as_me: failed program was:" >&5
+-sed 's/^/| /' conftest.$ac_ext >&5
+-
+-	casc_cxx_have_exception_handling=no
++else $as_nop
++  casc_cxx_have_exception_handling=no
+ fi
+-
+-rm -f core conftest.err conftest.$ac_objext conftest.$ac_ext
++rm -f core conftest.err conftest.$ac_objext conftest.beam conftest.$ac_ext
+        ac_ext=c
+ ac_cpp='$CPP $CPPFLAGS'
+ ac_compile='$CC -c $CFLAGS $CPPFLAGS conftest.$ac_ext >&5'
+@@ -5994,29 +6764,26 @@ ac_compiler_gnu=$ac_cv_c_compiler_gnu
+ 
+ fi
+ 
+-    { echo "$as_me:$LINENO: result: $casc_cxx_have_exception_handling" >&5
+-echo "${ECHO_T}$casc_cxx_have_exception_handling" >&6; }
++    { printf "%s\n" "$as_me:${as_lineno-$LINENO}: result: $casc_cxx_have_exception_handling" >&5
++printf "%s\n" "$casc_cxx_have_exception_handling" >&6; }
+     if test "$casc_cxx_have_exception_handling" = yes; then
+ 
+-cat >>confdefs.h <<\_ACEOF
+-#define HAVE_EXCEPTION_HANDLING 1
+-_ACEOF
++printf "%s\n" "#define HAVE_EXCEPTION_HANDLING 1" >>confdefs.h
+ 
+     else
+ 
+-cat >>confdefs.h <<\_ACEOF
+-#define LACKS_EXCEPTION_HANDLING 1
+-_ACEOF
++printf "%s\n" "#define LACKS_EXCEPTION_HANDLING 1" >>confdefs.h
+ 
+     fi
+ 
+ 
+ 
+-   { echo "$as_me:$LINENO: checking whether ${CXX} supports standard static data specialization" >&5
+-echo $ECHO_N "checking whether ${CXX} supports standard static data specialization... $ECHO_C" >&6; }
+-   if test "${casc_cv_cxx_have_standard_static_data_specialization+set}" = set; then
+-  echo $ECHO_N "(cached) $ECHO_C" >&6
+-else
++   { printf "%s\n" "$as_me:${as_lineno-$LINENO}: checking whether ${CXX} supports standard static data specialization" >&5
++printf %s "checking whether ${CXX} supports standard static data specialization... " >&6; }
++   if test ${casc_cv_cxx_have_standard_static_data_specialization+y}
++then :
++  printf %s "(cached) " >&6
++else $as_nop
+ 
+ 
+       ac_ext=cpp
+@@ -6025,11 +6792,7 @@ ac_compile='$CXX -c $CXXFLAGS $CPPFLAGS conftest.$ac_ext >&5'
+ ac_link='$CXX -o conftest$ac_exeext $CXXFLAGS $CPPFLAGS $LDFLAGS conftest.$ac_ext $LIBS >&5'
+ ac_compiler_gnu=$ac_cv_cxx_compiler_gnu
+ 
+-      cat >conftest.$ac_ext <<_ACEOF
+-/* confdefs.h.  */
+-_ACEOF
+-cat confdefs.h >>conftest.$ac_ext
+-cat >>conftest.$ac_ext <<_ACEOF
++      cat confdefs.h - <<_ACEOF >conftest.$ac_ext
+ /* end confdefs.h.  */
+ 
+ template <class T> class Pointer { public: static T *s_test; };
+@@ -6039,39 +6802,20 @@ template <> int *Pointer<int>::s_test = (int*) 0;
+ template class Pointer<int>;
+ 
+ int
+-main ()
++main (void)
+ {
+ /* empty */
+   ;
+   return 0;
+ }
+ _ACEOF
+-rm -f conftest.$ac_objext
+-if { (ac_try="$ac_compile"
+-case "(($ac_try" in
+-  *\"* | *\`* | *\\*) ac_try_echo=\$ac_try;;
+-  *) ac_try_echo=$ac_try;;
+-esac
+-eval "echo \"\$as_me:$LINENO: $ac_try_echo\"") >&5
+-  (eval "$ac_compile") 2>conftest.er1
+-  ac_status=$?
+-  grep -v '^ *+' conftest.er1 >conftest.err
+-  rm -f conftest.er1
+-  cat conftest.err >&5
+-  echo "$as_me:$LINENO: \$? = $ac_status" >&5
+-  (exit $ac_status); } && {
+-	 test -z "$ac_cxx_werror_flag" ||
+-	 test ! -s conftest.err
+-       } && test -s conftest.$ac_objext; then
++if ac_fn_cxx_try_compile "$LINENO"
++then :
+   casc_cv_cxx_have_standard_static_data_specialization=yes
+-else
+-  echo "$as_me: failed program was:" >&5
+-sed 's/^/| /' conftest.$ac_ext >&5
+-
+-	casc_cv_cxx_have_standard_static_data_specialization=no
++else $as_nop
++  casc_cv_cxx_have_standard_static_data_specialization=no
+ fi
+-
+-rm -f core conftest.err conftest.$ac_objext conftest.$ac_ext
++rm -f core conftest.err conftest.$ac_objext conftest.beam conftest.$ac_ext
+       ac_ext=c
+ ac_cpp='$CPP $CPPFLAGS'
+ ac_compile='$CC -c $CFLAGS $CPPFLAGS conftest.$ac_ext >&5'
+@@ -6081,30 +6825,27 @@ ac_compiler_gnu=$ac_cv_c_compiler_gnu
+ 
+ fi
+ 
+-   { echo "$as_me:$LINENO: result: $casc_cv_cxx_have_standard_static_data_specialization" >&5
+-echo "${ECHO_T}$casc_cv_cxx_have_standard_static_data_specialization" >&6; }
++   { printf "%s\n" "$as_me:${as_lineno-$LINENO}: result: $casc_cv_cxx_have_standard_static_data_specialization" >&5
++printf "%s\n" "$casc_cv_cxx_have_standard_static_data_specialization" >&6; }
+    if test "$casc_cv_cxx_have_standard_static_data_specialization" = yes; then
+ 
+-cat >>confdefs.h <<\_ACEOF
+-#define HAVE_STANDARD_STATIC_DATA_SPECIALIZATION 1
+-_ACEOF
++printf "%s\n" "#define HAVE_STANDARD_STATIC_DATA_SPECIALIZATION 1" >>confdefs.h
+ 
+    else
+ 
+-cat >>confdefs.h <<\_ACEOF
+-#define LACKS_STANDARD_STATIC_DATA_SPECIALIZATION 1
+-_ACEOF
++printf "%s\n" "#define LACKS_STANDARD_STATIC_DATA_SPECIALIZATION 1" >>confdefs.h
+ 
+    fi
+ 
+ if test "$casc_cv_cxx_have_standard_static_data_specialization" = "no"; then
+ 
+ 
+-   { echo "$as_me:$LINENO: checking whether ${CXX} supports pragma static data specialization" >&5
+-echo $ECHO_N "checking whether ${CXX} supports pragma static data specialization... $ECHO_C" >&6; }
+-   if test "${casc_cv_cxx_have_pragma_static_data_specialization+set}" = set; then
+-  echo $ECHO_N "(cached) $ECHO_C" >&6
+-else
++   { printf "%s\n" "$as_me:${as_lineno-$LINENO}: checking whether ${CXX} supports pragma static data specialization" >&5
++printf %s "checking whether ${CXX} supports pragma static data specialization... " >&6; }
++   if test ${casc_cv_cxx_have_pragma_static_data_specialization+y}
++then :
++  printf %s "(cached) " >&6
++else $as_nop
+ 
+ 
+       ac_ext=cpp
+@@ -6113,11 +6854,7 @@ ac_compile='$CXX -c $CXXFLAGS $CPPFLAGS conftest.$ac_ext >&5'
+ ac_link='$CXX -o conftest$ac_exeext $CXXFLAGS $CPPFLAGS $LDFLAGS conftest.$ac_ext $LIBS >&5'
+ ac_compiler_gnu=$ac_cv_cxx_compiler_gnu
+ 
+-      cat >conftest.$ac_ext <<_ACEOF
+-/* confdefs.h.  */
+-_ACEOF
+-cat confdefs.h >>conftest.$ac_ext
+-cat >>conftest.$ac_ext <<_ACEOF
++      cat confdefs.h - <<_ACEOF >conftest.$ac_ext
+ /* end confdefs.h.  */
+ 
+ template <class T> class Pointer { public: static T *s_test; };
+@@ -6127,39 +6864,20 @@ template <> int *Pointer<int>::s_test = (int*) 0;
+ template class Pointer<int>;
+ 
+ int
+-main ()
++main (void)
+ {
+ /* empty */
+   ;
+   return 0;
+ }
+ _ACEOF
+-rm -f conftest.$ac_objext
+-if { (ac_try="$ac_compile"
+-case "(($ac_try" in
+-  *\"* | *\`* | *\\*) ac_try_echo=\$ac_try;;
+-  *) ac_try_echo=$ac_try;;
+-esac
+-eval "echo \"\$as_me:$LINENO: $ac_try_echo\"") >&5
+-  (eval "$ac_compile") 2>conftest.er1
+-  ac_status=$?
+-  grep -v '^ *+' conftest.er1 >conftest.err
+-  rm -f conftest.er1
+-  cat conftest.err >&5
+-  echo "$as_me:$LINENO: \$? = $ac_status" >&5
+-  (exit $ac_status); } && {
+-	 test -z "$ac_cxx_werror_flag" ||
+-	 test ! -s conftest.err
+-       } && test -s conftest.$ac_objext; then
++if ac_fn_cxx_try_compile "$LINENO"
++then :
+   casc_cv_cxx_have_pragma_static_data_specialization=yes
+-else
+-  echo "$as_me: failed program was:" >&5
+-sed 's/^/| /' conftest.$ac_ext >&5
+-
+-	casc_cv_cxx_have_pragma_static_data_specialization=no
++else $as_nop
++  casc_cv_cxx_have_pragma_static_data_specialization=no
+ fi
+-
+-rm -f core conftest.err conftest.$ac_objext conftest.$ac_ext
++rm -f core conftest.err conftest.$ac_objext conftest.beam conftest.$ac_ext
+       ac_ext=c
+ ac_cpp='$CPP $CPPFLAGS'
+ ac_compile='$CC -c $CFLAGS $CPPFLAGS conftest.$ac_ext >&5'
+@@ -6169,19 +6887,15 @@ ac_compiler_gnu=$ac_cv_c_compiler_gnu
+ 
+ fi
+ 
+-   { echo "$as_me:$LINENO: result: $casc_cv_cxx_have_pragma_static_data_specialization" >&5
+-echo "${ECHO_T}$casc_cv_cxx_have_pragma_static_data_specialization" >&6; }
++   { printf "%s\n" "$as_me:${as_lineno-$LINENO}: result: $casc_cv_cxx_have_pragma_static_data_specialization" >&5
++printf "%s\n" "$casc_cv_cxx_have_pragma_static_data_specialization" >&6; }
+    if test "$casc_cv_cxx_have_pragma_static_data_specialization" = yes; then
+ 
+-cat >>confdefs.h <<\_ACEOF
+-#define HAVE_PRAGMA_STATIC_DATA_SPECIALIZATION 1
+-_ACEOF
++printf "%s\n" "#define HAVE_PRAGMA_STATIC_DATA_SPECIALIZATION 1" >>confdefs.h
+ 
+    else
+ 
+-cat >>confdefs.h <<\_ACEOF
+-#define LACKS_PRAGMA_STATIC_DATA_SPECIALIZATION 1
+-_ACEOF
++printf "%s\n" "#define LACKS_PRAGMA_STATIC_DATA_SPECIALIZATION 1" >>confdefs.h
+ 
+    fi
+ 
+@@ -6189,12 +6903,13 @@ fi
+ 
+ 
+ 
+-   { echo "$as_me:$LINENO: checking whether ${CXX} supports cmath" >&5
+-echo $ECHO_N "checking whether ${CXX} supports cmath... $ECHO_C" >&6; }
++   { printf "%s\n" "$as_me:${as_lineno-$LINENO}: checking whether ${CXX} supports cmath" >&5
++printf %s "checking whether ${CXX} supports cmath... " >&6; }
+ 
+-   if test "${casc_cv_cxx_have_cmath+set}" = set; then
+-  echo $ECHO_N "(cached) $ECHO_C" >&6
+-else
++   if test ${casc_cv_cxx_have_cmath+y}
++then :
++  printf %s "(cached) " >&6
++else $as_nop
+ 
+ 
+       ac_ext=cpp
+@@ -6203,11 +6918,7 @@ ac_compile='$CXX -c $CXXFLAGS $CPPFLAGS conftest.$ac_ext >&5'
+ ac_link='$CXX -o conftest$ac_exeext $CXXFLAGS $CPPFLAGS $LDFLAGS conftest.$ac_ext $LIBS >&5'
+ ac_compiler_gnu=$ac_cv_cxx_compiler_gnu
+ 
+-         cat >conftest.$ac_ext <<_ACEOF
+-/* confdefs.h.  */
+-_ACEOF
+-cat confdefs.h >>conftest.$ac_ext
+-cat >>conftest.$ac_ext <<_ACEOF
++         cat confdefs.h - <<_ACEOF >conftest.$ac_ext
+ /* end confdefs.h.  */
+ 
+ #include <cmath>
+@@ -6216,39 +6927,20 @@ void foo() {
+ }
+ 
+ int
+-main ()
++main (void)
+ {
+ /* empty */
+   ;
+   return 0;
+ }
+ _ACEOF
+-rm -f conftest.$ac_objext
+-if { (ac_try="$ac_compile"
+-case "(($ac_try" in
+-  *\"* | *\`* | *\\*) ac_try_echo=\$ac_try;;
+-  *) ac_try_echo=$ac_try;;
+-esac
+-eval "echo \"\$as_me:$LINENO: $ac_try_echo\"") >&5
+-  (eval "$ac_compile") 2>conftest.er1
+-  ac_status=$?
+-  grep -v '^ *+' conftest.er1 >conftest.err
+-  rm -f conftest.er1
+-  cat conftest.err >&5
+-  echo "$as_me:$LINENO: \$? = $ac_status" >&5
+-  (exit $ac_status); } && {
+-	 test -z "$ac_cxx_werror_flag" ||
+-	 test ! -s conftest.err
+-       } && test -s conftest.$ac_objext; then
++if ac_fn_cxx_try_compile "$LINENO"
++then :
+   casc_cv_cxx_have_cmath=yes
+-else
+-  echo "$as_me: failed program was:" >&5
+-sed 's/^/| /' conftest.$ac_ext >&5
+-
+-	casc_cv_cxx_have_cmath=no
++else $as_nop
++  casc_cv_cxx_have_cmath=no
+ fi
+-
+-rm -f core conftest.err conftest.$ac_objext conftest.$ac_ext
++rm -f core conftest.err conftest.$ac_objext conftest.beam conftest.$ac_ext
+          ac_ext=c
+ ac_cpp='$CPP $CPPFLAGS'
+ ac_compile='$CC -c $CFLAGS $CPPFLAGS conftest.$ac_ext >&5'
+@@ -6259,32 +6951,29 @@ ac_compiler_gnu=$ac_cv_c_compiler_gnu
+ fi
+ 
+ 
+-   { echo "$as_me:$LINENO: result: $casc_cv_cxx_have_cmath" >&5
+-echo "${ECHO_T}$casc_cv_cxx_have_cmath" >&6; }
++   { printf "%s\n" "$as_me:${as_lineno-$LINENO}: result: $casc_cv_cxx_have_cmath" >&5
++printf "%s\n" "$casc_cv_cxx_have_cmath" >&6; }
+ 
+    if test "$casc_cv_cxx_have_cmath" = yes; then
+ 
+-cat >>confdefs.h <<\_ACEOF
+-#define HAVE_CMATH 1
+-_ACEOF
++printf "%s\n" "#define HAVE_CMATH 1" >>confdefs.h
+ 
+    else
+ 
+-cat >>confdefs.h <<\_ACEOF
+-#define LACKS_CMATH 1
+-_ACEOF
++printf "%s\n" "#define LACKS_CMATH 1" >>confdefs.h
+ 
+    fi
+ 
+ 
+ 
+ 
+-   { echo "$as_me:$LINENO: checking whether ${CXX} needs isnan templates" >&5
+-echo $ECHO_N "checking whether ${CXX} needs isnan templates... $ECHO_C" >&6; }
++   { printf "%s\n" "$as_me:${as_lineno-$LINENO}: checking whether ${CXX} needs isnan templates" >&5
++printf %s "checking whether ${CXX} needs isnan templates... " >&6; }
+ 
+-   if test "${casc_cv_cxx_have_isnan_template+set}" = set; then
+-  echo $ECHO_N "(cached) $ECHO_C" >&6
+-else
++   if test ${casc_cv_cxx_have_isnan_template+y}
++then :
++  printf %s "(cached) " >&6
++else $as_nop
+ 
+ 
+       ac_ext=cpp
+@@ -6293,11 +6982,7 @@ ac_compile='$CXX -c $CXXFLAGS $CPPFLAGS conftest.$ac_ext >&5'
+ ac_link='$CXX -o conftest$ac_exeext $CXXFLAGS $CPPFLAGS $LDFLAGS conftest.$ac_ext $LIBS >&5'
+ ac_compiler_gnu=$ac_cv_cxx_compiler_gnu
+ 
+-      cat >conftest.$ac_ext <<_ACEOF
+-/* confdefs.h.  */
+-_ACEOF
+-cat confdefs.h >>conftest.$ac_ext
+-cat >>conftest.$ac_ext <<_ACEOF
++      cat confdefs.h - <<_ACEOF >conftest.$ac_ext
+ /* end confdefs.h.  */
+ 
+ 
+@@ -6307,39 +6992,20 @@ template int __gnu_cxx::isnan<float>(float);
+ template int __gnu_cxx::__capture_isnan<float>(float);
+ 
+ int
+-main ()
++main (void)
+ {
+ /* empty */
+   ;
+   return 0;
+ }
+ _ACEOF
+-rm -f conftest.$ac_objext
+-if { (ac_try="$ac_compile"
+-case "(($ac_try" in
+-  *\"* | *\`* | *\\*) ac_try_echo=\$ac_try;;
+-  *) ac_try_echo=$ac_try;;
+-esac
+-eval "echo \"\$as_me:$LINENO: $ac_try_echo\"") >&5
+-  (eval "$ac_compile") 2>conftest.er1
+-  ac_status=$?
+-  grep -v '^ *+' conftest.er1 >conftest.err
+-  rm -f conftest.er1
+-  cat conftest.err >&5
+-  echo "$as_me:$LINENO: \$? = $ac_status" >&5
+-  (exit $ac_status); } && {
+-	 test -z "$ac_cxx_werror_flag" ||
+-	 test ! -s conftest.err
+-       } && test -s conftest.$ac_objext; then
++if ac_fn_cxx_try_compile "$LINENO"
++then :
+   casc_cv_cxx_have_isnan_template=yes
+-else
+-  echo "$as_me: failed program was:" >&5
+-sed 's/^/| /' conftest.$ac_ext >&5
+-
+-	casc_cv_cxx_have_isnan_template=no
++else $as_nop
++  casc_cv_cxx_have_isnan_template=no
+ fi
+-
+-rm -f core conftest.err conftest.$ac_objext conftest.$ac_ext
++rm -f core conftest.err conftest.$ac_objext conftest.beam conftest.$ac_ext
+       ac_ext=c
+ ac_cpp='$CPP $CPPFLAGS'
+ ac_compile='$CC -c $CFLAGS $CPPFLAGS conftest.$ac_ext >&5'
+@@ -6349,20 +7015,16 @@ ac_compiler_gnu=$ac_cv_c_compiler_gnu
+ 
+ fi
+ 
+-   { echo "$as_me:$LINENO: result: $casc_cv_cxx_have_isnan_template" >&5
+-echo "${ECHO_T}$casc_cv_cxx_have_isnan_template" >&6; }
++   { printf "%s\n" "$as_me:${as_lineno-$LINENO}: result: $casc_cv_cxx_have_isnan_template" >&5
++printf "%s\n" "$casc_cv_cxx_have_isnan_template" >&6; }
+ 
+    if test "$casc_cv_cxx_have_isnan_template" = yes; then
+ 
+-cat >>confdefs.h <<\_ACEOF
+-#define HAVE_ISNAN_TEMPLATE 1
+-_ACEOF
++printf "%s\n" "#define HAVE_ISNAN_TEMPLATE 1" >>confdefs.h
+ 
+    else
+ 
+-cat >>confdefs.h <<\_ACEOF
+-#define LACKS_ISNAN_TEMPLATE 1
+-_ACEOF
++printf "%s\n" "#define LACKS_ISNAN_TEMPLATE 1" >>confdefs.h
+ 
+    fi
+ 
+@@ -6373,10 +7035,11 @@ _ACEOF
+ 
+ IMPLICIT_TEMPLATE_INSTANTIATION="no"
+ # Check whether --enable-implicit-template-instantiation was given.
+-if test "${enable_implicit_template_instantiation+set}" = set; then
++if test ${enable_implicit_template_instantiation+y}
++then :
+   enableval=$enable_implicit_template_instantiation; IMPLICIT_TEMPLATE_INSTANTIATION="yes"
+ 
+-else
++else $as_nop
+   enable_implicit_template_instantiation=no
+ 
+ fi
+@@ -6437,9 +7100,7 @@ case $CXX_ID in
+       ;;
+    intel)
+       #  compiler requires template includes
+-      cat >>confdefs.h <<\_ACEOF
+-#define INCLUDE_TEMPLATE_IMPLEMENTATION 1
+-_ACEOF
++      printf "%s\n" "#define INCLUDE_TEMPLATE_IMPLEMENTATION 1" >>confdefs.h
+ 
+       case $ARCH in
+          LINUX)
+@@ -6457,9 +7118,7 @@ _ACEOF
+       ;;
+     *)
+       # By default include the template impls during compile
+-      cat >>confdefs.h <<\_ACEOF
+-#define INCLUDE_TEMPLATE_IMPLEMENTATION 1
+-_ACEOF
++      printf "%s\n" "#define INCLUDE_TEMPLATE_IMPLEMENTATION 1" >>confdefs.h
+ 
+ esac
+ 
+@@ -6512,25 +7171,19 @@ case $CXX_ID in
+       DEPENDS_ON_TEMPLATE_IMPLEMENTATION="no"
+       #  compiler requires template includes
+ 
+-cat >>confdefs.h <<\_ACEOF
+-#define INCLUDE_TEMPLATE_IMPLEMENTATION 1
+-_ACEOF
++printf "%s\n" "#define INCLUDE_TEMPLATE_IMPLEMENTATION 1" >>confdefs.h
+ 
+       ;;
+    *)
+       # By default include the template impls during compile
+ 
+-cat >>confdefs.h <<\_ACEOF
+-#define INCLUDE_TEMPLATE_IMPLEMENTATION 1
+-_ACEOF
++printf "%s\n" "#define INCLUDE_TEMPLATE_IMPLEMENTATION 1" >>confdefs.h
+ 
+ esac
+ 
+ if test "${enable_implicit_template_instantiation}" = 'yes'; then
+ 
+-cat >>confdefs.h <<\_ACEOF
+-#define INCLUDE_TEMPLATE_IMPLEMENTATION 1
+-_ACEOF
++printf "%s\n" "#define INCLUDE_TEMPLATE_IMPLEMENTATION 1" >>confdefs.h
+ 
+    DEPENDS_ON_TEMPLATE_IMPLEMENTATION="yes"
+ fi
+@@ -6547,7 +7200,8 @@ fi
+ 
+ 
+ # Check whether --enable-opt was given.
+-if test "${enable_opt+set}" = set; then
++if test ${enable_opt+y}
++then :
+   enableval=$enable_opt; case "$enable_opt" in
+    no) opt_switches= ;;
+    yes)
+@@ -6563,7 +7217,7 @@ if test "${enable_opt+set}" = set; then
+       esac ;;
+    *) opt_switches="$enable_opt" ;;
+ esac
+-else
++else $as_nop
+   opt_switches=
+ fi
+ 
+@@ -6575,7 +7229,8 @@ if test -n "$opt_switches" ; then
+ fi
+ 
+ # Check whether --enable-debug was given.
+-if test "${enable_debug+set}" = set; then
++if test ${enable_debug+y}
++then :
+   enableval=$enable_debug; case "$enable_debug" in
+    no) debug_switches= ;;
+    yes)
+@@ -6588,22 +7243,16 @@ case "$enable_debug" in
+    no) ;;
+    *)
+ 
+-cat >>confdefs.h <<\_ACEOF
+-#define DEBUG_NO_INLINE 1
+-_ACEOF
++printf "%s\n" "#define DEBUG_NO_INLINE 1" >>confdefs.h
+ 
+ 
+-cat >>confdefs.h <<\_ACEOF
+-#define DEBUG_CHECK_ASSERTIONS 1
+-_ACEOF
++printf "%s\n" "#define DEBUG_CHECK_ASSERTIONS 1" >>confdefs.h
+ 
+ 
+-cat >>confdefs.h <<\_ACEOF
+-#define DEBUG_INITIALIZE_UNDEFINED 1
+-_ACEOF
++printf "%s\n" "#define DEBUG_INITIALIZE_UNDEFINED 1" >>confdefs.h
+ 
+ esac
+-else
++else $as_nop
+   debug_switches=-g
+ fi
+ 
+@@ -6625,7 +7274,7 @@ for btng_log_vars_index in $btng_log_vars ; do
+   else
+     btng_log_vars_value="unset";
+   fi
+-  echo "configure:6628:" "$btng_log_vars_index is $btng_log_vars_value" >&5;
++  echo "configure:7277:" "$btng_log_vars_index is $btng_log_vars_value" >&5;
+ done
+ 
+ 
+@@ -6636,9 +7285,7 @@ SAMRAI_ENABLE_SPECIAL="no"
+ if test "$enable_char" = "yes"; then
+    SAMRAI_OPTIONAL_LIBS="libchar"
+ 
+-cat >>confdefs.h <<\_ACEOF
+-#define HAVE_CHAR 1
+-_ACEOF
++printf "%s\n" "#define HAVE_CHAR 1" >>confdefs.h
+ 
+ fi
+ 
+@@ -6646,9 +7293,7 @@ if test "$enable_bool" = "yes"; then
+    SAMRAI_OPTIONAL_LIBS="libbool $SAMRAI_OPTIONAL_LIBS"
+    SAMRAI_ENABLE_SPECIAL="yes"
+ 
+-cat >>confdefs.h <<\_ACEOF
+-#define HAVE_BOOL 1
+-_ACEOF
++printf "%s\n" "#define HAVE_BOOL 1" >>confdefs.h
+ 
+ fi
+ 
+@@ -6656,9 +7301,7 @@ if test "$enable_float" = "yes"; then
+    SAMRAI_OPTIONAL_LIBS="libfloat $SAMRAI_OPTIONAL_LIBS"
+    SAMRAI_ENABLE_SPECIAL="yes"
+ 
+-cat >>confdefs.h <<\_ACEOF
+-#define HAVE_FLOAT 1
+-_ACEOF
++printf "%s\n" "#define HAVE_FLOAT 1" >>confdefs.h
+ 
+ fi
+ 
+@@ -6666,9 +7309,7 @@ if test "$enable_dcomplex" = "yes"; then
+    SAMRAI_OPTIONAL_LIBS="libdcomplex $SAMRAI_OPTIONAL_LIBS"
+    SAMRAI_ENABLE_SPECIAL="yes"
+ 
+-cat >>confdefs.h <<\_ACEOF
+-#define HAVE_DCOMPLEX 1
+-_ACEOF
++printf "%s\n" "#define HAVE_DCOMPLEX 1" >>confdefs.h
+ 
+ fi
+ 
+@@ -6684,11 +7325,12 @@ if test -n "$with_F77"; then
+ do
+   # Extract the first word of "$ac_prog", so it can be a program name with args.
+ set dummy $ac_prog; ac_word=$2
+-{ echo "$as_me:$LINENO: checking for $ac_word" >&5
+-echo $ECHO_N "checking for $ac_word... $ECHO_C" >&6; }
+-if test "${ac_cv_prog_F77+set}" = set; then
+-  echo $ECHO_N "(cached) $ECHO_C" >&6
+-else
++{ printf "%s\n" "$as_me:${as_lineno-$LINENO}: checking for $ac_word" >&5
++printf %s "checking for $ac_word... " >&6; }
++if test ${ac_cv_prog_F77+y}
++then :
++  printf %s "(cached) " >&6
++else $as_nop
+   if test -n "$F77"; then
+   ac_cv_prog_F77="$F77" # Let the user override the test.
+ else
+@@ -6696,26 +7338,30 @@ as_save_IFS=$IFS; IFS=$PATH_SEPARATOR
+ for as_dir in $PATH
+ do
+   IFS=$as_save_IFS
+-  test -z "$as_dir" && as_dir=.
+-  for ac_exec_ext in '' $ac_executable_extensions; do
+-  if { test -f "$as_dir/$ac_word$ac_exec_ext" && $as_test_x "$as_dir/$ac_word$ac_exec_ext"; }; then
++  case $as_dir in #(((
++    '') as_dir=./ ;;
++    */) ;;
++    *) as_dir=$as_dir/ ;;
++  esac
++    for ac_exec_ext in '' $ac_executable_extensions; do
++  if as_fn_executable_p "$as_dir$ac_word$ac_exec_ext"; then
+     ac_cv_prog_F77="$ac_prog"
+-    echo "$as_me:$LINENO: found $as_dir/$ac_word$ac_exec_ext" >&5
++    printf "%s\n" "$as_me:${as_lineno-$LINENO}: found $as_dir$ac_word$ac_exec_ext" >&5
+     break 2
+   fi
+ done
+-done
++  done
+ IFS=$as_save_IFS
+ 
+ fi
+ fi
+ F77=$ac_cv_prog_F77
+ if test -n "$F77"; then
+-  { echo "$as_me:$LINENO: result: $F77" >&5
+-echo "${ECHO_T}$F77" >&6; }
++  { printf "%s\n" "$as_me:${as_lineno-$LINENO}: result: $F77" >&5
++printf "%s\n" "$F77" >&6; }
+ else
+-  { echo "$as_me:$LINENO: result: no" >&5
+-echo "${ECHO_T}no" >&6; }
++  { printf "%s\n" "$as_me:${as_lineno-$LINENO}: result: no" >&5
++printf "%s\n" "no" >&6; }
+ fi
+ 
+ 
+@@ -6729,11 +7375,12 @@ else
+ do
+   # Extract the first word of "$ac_prog", so it can be a program name with args.
+ set dummy $ac_prog; ac_word=$2
+-{ echo "$as_me:$LINENO: checking for $ac_word" >&5
+-echo $ECHO_N "checking for $ac_word... $ECHO_C" >&6; }
+-if test "${ac_cv_prog_F77+set}" = set; then
+-  echo $ECHO_N "(cached) $ECHO_C" >&6
+-else
++{ printf "%s\n" "$as_me:${as_lineno-$LINENO}: checking for $ac_word" >&5
++printf %s "checking for $ac_word... " >&6; }
++if test ${ac_cv_prog_F77+y}
++then :
++  printf %s "(cached) " >&6
++else $as_nop
+   if test -n "$F77"; then
+   ac_cv_prog_F77="$F77" # Let the user override the test.
+ else
+@@ -6741,26 +7388,30 @@ as_save_IFS=$IFS; IFS=$PATH_SEPARATOR
+ for as_dir in $PATH
+ do
+   IFS=$as_save_IFS
+-  test -z "$as_dir" && as_dir=.
+-  for ac_exec_ext in '' $ac_executable_extensions; do
+-  if { test -f "$as_dir/$ac_word$ac_exec_ext" && $as_test_x "$as_dir/$ac_word$ac_exec_ext"; }; then
++  case $as_dir in #(((
++    '') as_dir=./ ;;
++    */) ;;
++    *) as_dir=$as_dir/ ;;
++  esac
++    for ac_exec_ext in '' $ac_executable_extensions; do
++  if as_fn_executable_p "$as_dir$ac_word$ac_exec_ext"; then
+     ac_cv_prog_F77="$ac_prog"
+-    echo "$as_me:$LINENO: found $as_dir/$ac_word$ac_exec_ext" >&5
++    printf "%s\n" "$as_me:${as_lineno-$LINENO}: found $as_dir$ac_word$ac_exec_ext" >&5
+     break 2
+   fi
+ done
+-done
++  done
+ IFS=$as_save_IFS
+ 
+ fi
+ fi
+ F77=$ac_cv_prog_F77
+ if test -n "$F77"; then
+-  { echo "$as_me:$LINENO: result: $F77" >&5
+-echo "${ECHO_T}$F77" >&6; }
++  { printf "%s\n" "$as_me:${as_lineno-$LINENO}: result: $F77" >&5
++printf "%s\n" "$F77" >&6; }
+ else
+-  { echo "$as_me:$LINENO: result: no" >&5
+-echo "${ECHO_T}no" >&6; }
++  { printf "%s\n" "$as_me:${as_lineno-$LINENO}: result: no" >&5
++printf "%s\n" "no" >&6; }
+ fi
+ 
+ 
+@@ -6775,11 +7426,12 @@ done
+ do
+   # Extract the first word of "$ac_prog", so it can be a program name with args.
+ set dummy $ac_prog; ac_word=$2
+-{ echo "$as_me:$LINENO: checking for $ac_word" >&5
+-echo $ECHO_N "checking for $ac_word... $ECHO_C" >&6; }
+-if test "${ac_cv_prog_F77+set}" = set; then
+-  echo $ECHO_N "(cached) $ECHO_C" >&6
+-else
++{ printf "%s\n" "$as_me:${as_lineno-$LINENO}: checking for $ac_word" >&5
++printf %s "checking for $ac_word... " >&6; }
++if test ${ac_cv_prog_F77+y}
++then :
++  printf %s "(cached) " >&6
++else $as_nop
+   if test -n "$F77"; then
+   ac_cv_prog_F77="$F77" # Let the user override the test.
+ else
+@@ -6787,26 +7439,30 @@ as_save_IFS=$IFS; IFS=$PATH_SEPARATOR
+ for as_dir in $PATH
+ do
+   IFS=$as_save_IFS
+-  test -z "$as_dir" && as_dir=.
+-  for ac_exec_ext in '' $ac_executable_extensions; do
+-  if { test -f "$as_dir/$ac_word$ac_exec_ext" && $as_test_x "$as_dir/$ac_word$ac_exec_ext"; }; then
++  case $as_dir in #(((
++    '') as_dir=./ ;;
++    */) ;;
++    *) as_dir=$as_dir/ ;;
++  esac
++    for ac_exec_ext in '' $ac_executable_extensions; do
++  if as_fn_executable_p "$as_dir$ac_word$ac_exec_ext"; then
+     ac_cv_prog_F77="$ac_prog"
+-    echo "$as_me:$LINENO: found $as_dir/$ac_word$ac_exec_ext" >&5
++    printf "%s\n" "$as_me:${as_lineno-$LINENO}: found $as_dir$ac_word$ac_exec_ext" >&5
+     break 2
+   fi
+ done
+-done
++  done
+ IFS=$as_save_IFS
+ 
+ fi
+ fi
+ F77=$ac_cv_prog_F77
+ if test -n "$F77"; then
+-  { echo "$as_me:$LINENO: result: $F77" >&5
+-echo "${ECHO_T}$F77" >&6; }
++  { printf "%s\n" "$as_me:${as_lineno-$LINENO}: result: $F77" >&5
++printf "%s\n" "$F77" >&6; }
+ else
+-  { echo "$as_me:$LINENO: result: no" >&5
+-echo "${ECHO_T}no" >&6; }
++  { printf "%s\n" "$as_me:${as_lineno-$LINENO}: result: no" >&5
++printf "%s\n" "no" >&6; }
+ fi
+ 
+ 
+@@ -6817,9 +7473,7 @@ done
+    fi
+ fi
+ 
+-test -z "$F77" && { { echo "$as_me:$LINENO: error: no acceptable Fortran found in $PATH" >&5
+-echo "$as_me: error: no acceptable Fortran found in $PATH" >&2;}
+-   { (exit 1); exit 1; }; }
++test -z "$F77" && as_fn_error $? "no acceptable Fortran found in $PATH" "$LINENO" 5
+ 
+ 
+ btng_log_vars="F77"
+@@ -6830,7 +7484,7 @@ for btng_log_vars_index in $btng_log_vars ; do
+   else
+     btng_log_vars_value="unset";
+   fi
+-  echo "configure:6833:" "$btng_log_vars_index is $btng_log_vars_value" >&5;
++  echo "configure:7487:" "$btng_log_vars_index is $btng_log_vars_value" >&5;
+ done
+ 
+ 
+@@ -6838,7 +7492,7 @@ done
+ # Warn user about unusual compiler paths and LD_LIBRARY_PATH
+ for i in `which $F77` ; do
+   if echo "$i" | grep -v '^/usr/bin/' > /dev/null; then
+-    { echo "$as_me:$LINENO: NOTIFICATION:
++    { printf "%s\n" "$as_me:${as_lineno-$LINENO}: NOTIFICATION:
+ 
+ The compiler $i has an unusual path.
+ This may cause link problems if you don't also have the associated
+@@ -6847,7 +7501,7 @@ that path in your LD_LIBRARY_PATH, the compiler checks may not run
+ properly.  In that case, you may want to stop this process now, set
+ your LD_LIBRARY_PATH appropriately and run it.
+ " >&5
+-echo "$as_me: NOTIFICATION:
++printf "%s\n" "$as_me: NOTIFICATION:
+ 
+ The compiler $i has an unusual path.
+ This may cause link problems if you don't also have the associated
+@@ -6887,11 +7541,12 @@ case $ARCH in
+ do
+   # Extract the first word of "$ac_prog", so it can be a program name with args.
+ set dummy $ac_prog; ac_word=$2
+-{ echo "$as_me:$LINENO: checking for $ac_word" >&5
+-echo $ECHO_N "checking for $ac_word... $ECHO_C" >&6; }
+-if test "${ac_cv_prog_F77+set}" = set; then
+-  echo $ECHO_N "(cached) $ECHO_C" >&6
+-else
++{ printf "%s\n" "$as_me:${as_lineno-$LINENO}: checking for $ac_word" >&5
++printf %s "checking for $ac_word... " >&6; }
++if test ${ac_cv_prog_F77+y}
++then :
++  printf %s "(cached) " >&6
++else $as_nop
+   if test -n "$F77"; then
+   ac_cv_prog_F77="$F77" # Let the user override the test.
+ else
+@@ -6899,35 +7554,37 @@ as_save_IFS=$IFS; IFS=$PATH_SEPARATOR
+ for as_dir in $PATH
+ do
+   IFS=$as_save_IFS
+-  test -z "$as_dir" && as_dir=.
+-  for ac_exec_ext in '' $ac_executable_extensions; do
+-  if { test -f "$as_dir/$ac_word$ac_exec_ext" && $as_test_x "$as_dir/$ac_word$ac_exec_ext"; }; then
++  case $as_dir in #(((
++    '') as_dir=./ ;;
++    */) ;;
++    *) as_dir=$as_dir/ ;;
++  esac
++    for ac_exec_ext in '' $ac_executable_extensions; do
++  if as_fn_executable_p "$as_dir$ac_word$ac_exec_ext"; then
+     ac_cv_prog_F77="$ac_prog"
+-    echo "$as_me:$LINENO: found $as_dir/$ac_word$ac_exec_ext" >&5
++    printf "%s\n" "$as_me:${as_lineno-$LINENO}: found $as_dir$ac_word$ac_exec_ext" >&5
+     break 2
+   fi
+ done
+-done
++  done
+ IFS=$as_save_IFS
+ 
+ fi
+ fi
+ F77=$ac_cv_prog_F77
+ if test -n "$F77"; then
+-  { echo "$as_me:$LINENO: result: $F77" >&5
+-echo "${ECHO_T}$F77" >&6; }
++  { printf "%s\n" "$as_me:${as_lineno-$LINENO}: result: $F77" >&5
++printf "%s\n" "$F77" >&6; }
+ else
+-  { echo "$as_me:$LINENO: result: no" >&5
+-echo "${ECHO_T}no" >&6; }
++  { printf "%s\n" "$as_me:${as_lineno-$LINENO}: result: no" >&5
++printf "%s\n" "no" >&6; }
+ fi
+ 
+ 
+   test -n "$F77" && break
+ done
+ 
+-      test -z "$F77" && { { echo "$as_me:$LINENO: error: no acceptable f77 found in \$PATH" >&5
+-echo "$as_me: error: no acceptable f77 found in \$PATH" >&2;}
+-   { (exit 1); exit 1; }; }
++      test -z "$F77" && as_fn_error $? "no acceptable f77 found in \$PATH" "$LINENO" 5
+       FFLAGS="-g -O"
+ 
+    fi
+@@ -6951,9 +7608,7 @@ echo "$as_me: error: no acceptable f77 found in \$PATH" >&2;}
+ EOF
+    $F77 $FFLAGS -c confftest.f > /dev/null 2>&1
+    if test ! -s confftest.o ; then
+-        { { echo "$as_me:$LINENO: error: Unable to compile a Fortran test program" >&5
+-echo "$as_me: error: Unable to compile a Fortran test program" >&2;}
+-   { (exit 1); exit 1; }; }
++        as_fn_error $? "Unable to compile a Fortran test program" "$LINENO" 5
+         NOF77=1
+         HAS_FORTRAN=0
+    elif test -z "$FORTRANNAMES" ; then
+@@ -6973,48 +7628,40 @@ echo "$as_me: error: Unable to compile a Fortran test program" >&2;}
+      nameform4=`strings -a confftest.o | grep mpir_init_fop__ | head -1`
+     fi
+     /bin/rm -f confftest.f confftest.o
+-    { echo "$as_me:$LINENO: checking Fortran external names" >&5
+-echo $ECHO_N "checking Fortran external names... $ECHO_C" >&6; }
++    { printf "%s\n" "$as_me:${as_lineno-$LINENO}: checking Fortran external names" >&5
++printf %s "checking Fortran external names... " >&6; }
+     if test -n "$nameform4" ; then
+ 
+-cat >>confdefs.h <<\_ACEOF
+-#define FORTRAN_DOUBLE_UNDERSCORE 1
+-_ACEOF
++printf "%s\n" "#define FORTRAN_DOUBLE_UNDERSCORE 1" >>confdefs.h
+ 
+-        { echo "$as_me:$LINENO: result: lowercase with one or two trailing underscores" >&5
+-echo "${ECHO_T}lowercase with one or two trailing underscores" >&6; }
++        { printf "%s\n" "$as_me:${as_lineno-$LINENO}: result: lowercase with one or two trailing underscores" >&5
++printf "%s\n" "lowercase with one or two trailing underscores" >&6; }
+         FORTRANNAMES="FORTRANDOUBLEUNDERSCORE"
+     elif test -n "$nameform1" ; then
+         # We don't set this in CFLAGS; it is a default case
+ 
+-cat >>confdefs.h <<\_ACEOF
+-#define FORTRAN_UNDERSCORE 1
+-_ACEOF
++printf "%s\n" "#define FORTRAN_UNDERSCORE 1" >>confdefs.h
+ 
+-        { echo "$as_me:$LINENO: result: lowercase with a trailing underscore" >&5
+-echo "${ECHO_T}lowercase with a trailing underscore" >&6; }
++        { printf "%s\n" "$as_me:${as_lineno-$LINENO}: result: lowercase with a trailing underscore" >&5
++printf "%s\n" "lowercase with a trailing underscore" >&6; }
+         FORTRANNAMES="FORTRANUNDERSCORE"
+     elif test -n "$nameform2" ; then
+ 
+-cat >>confdefs.h <<\_ACEOF
+-#define FORTRAN_CAPS 1
+-_ACEOF
++printf "%s\n" "#define FORTRAN_CAPS 1" >>confdefs.h
+ 
+-        { echo "$as_me:$LINENO: result: uppercase" >&5
+-echo "${ECHO_T}uppercase" >&6; }
++        { printf "%s\n" "$as_me:${as_lineno-$LINENO}: result: uppercase" >&5
++printf "%s\n" "uppercase" >&6; }
+         FORTRANNAMES="FORTRANCAPS"
+     elif test -n "$nameform3" ; then
+ 
+-cat >>confdefs.h <<\_ACEOF
+-#define FORTRAN_NO_UNDERSCORE 1
+-_ACEOF
++printf "%s\n" "#define FORTRAN_NO_UNDERSCORE 1" >>confdefs.h
+ 
+-        { echo "$as_me:$LINENO: result: lowercase" >&5
+-echo "${ECHO_T}lowercase" >&6; }
++        { printf "%s\n" "$as_me:${as_lineno-$LINENO}: result: lowercase" >&5
++printf "%s\n" "lowercase" >&6; }
+         FORTRANNAMES="FORTRANNOUNDERSCORE"
+     else
+-        { echo "$as_me:$LINENO: result: unknown" >&5
+-echo "${ECHO_T}unknown" >&6; }
++        { printf "%s\n" "$as_me:${as_lineno-$LINENO}: result: unknown" >&5
++printf "%s\n" "unknown" >&6; }
+ #       print_error "If you have problems linking, try using the -nof77 option"
+ #        print_error "to configure and rebuild MPICH."
+         NOF77=1
+@@ -7027,11 +7674,12 @@ echo "${ECHO_T}unknown" >&6; }
+     fi
+ 
+ 
+-   { echo "$as_me:$LINENO: checking for Fortran libraries" >&5
+-echo $ECHO_N "checking for Fortran libraries... $ECHO_C" >&6; }
+-if test "${casc_cv_f77flags+set}" = set; then
+-  echo $ECHO_N "(cached) $ECHO_C" >&6
+-else
++   { printf "%s\n" "$as_me:${as_lineno-$LINENO}: checking for Fortran libraries" >&5
++printf %s "checking for Fortran libraries... " >&6; }
++if test ${casc_cv_f77flags+y}
++then :
++  printf %s "(cached) " >&6
++else $as_nop
+ 
+       if test -z "$F77LIBFLAGS"; then
+ 
+@@ -7192,7 +7840,7 @@ else
+   fi
+     rm -f conftest.f conftest.o conftest
+ 
+-  FLIBS="$flibs_result"
++  FLIBS="" # We never use FLIBS and it sometimes has quotes it in it, so disable it completely
+ 
+          for casc_flag in $flibs_result; do
+ 
+@@ -7272,73 +7920,48 @@ EOF
+ 
+    # Checks if the LIBRARY from the argument list can be used to link
+    # a C test program with testflib
+-   as_ac_Lib=`echo "ac_cv_lib_$casc_lib_name''_$THIS_FUNCTION" | $as_tr_sh`
+-{ echo "$as_me:$LINENO: checking for $THIS_FUNCTION in -l$casc_lib_name" >&5
+-echo $ECHO_N "checking for $THIS_FUNCTION in -l$casc_lib_name... $ECHO_C" >&6; }
+-if { as_var=$as_ac_Lib; eval "test \"\${$as_var+set}\" = set"; }; then
+-  echo $ECHO_N "(cached) $ECHO_C" >&6
+-else
++   as_ac_Lib=`printf "%s\n" "ac_cv_lib_$casc_lib_name""_$THIS_FUNCTION" | $as_tr_sh`
++{ printf "%s\n" "$as_me:${as_lineno-$LINENO}: checking for $THIS_FUNCTION in -l$casc_lib_name" >&5
++printf %s "checking for $THIS_FUNCTION in -l$casc_lib_name... " >&6; }
++if eval test \${$as_ac_Lib+y}
++then :
++  printf %s "(cached) " >&6
++else $as_nop
+   ac_check_lib_save_LIBS=$LIBS
+ LIBS="-l$casc_lib_name testflib_.o $F77LIBFLAGS $LIBS"
+-cat >conftest.$ac_ext <<_ACEOF
+-/* confdefs.h.  */
+-_ACEOF
+-cat confdefs.h >>conftest.$ac_ext
+-cat >>conftest.$ac_ext <<_ACEOF
++cat confdefs.h - <<_ACEOF >conftest.$ac_ext
+ /* end confdefs.h.  */
+ 
+ /* Override any GCC internal prototype to avoid an error.
+    Use char because int might match the return type of a GCC
+    builtin and then its argument prototype would still apply.  */
+-#ifdef __cplusplus
+-extern "C"
+-#endif
+ char $THIS_FUNCTION ();
+ int
+-main ()
++main (void)
+ {
+ return $THIS_FUNCTION ();
+   ;
+   return 0;
+ }
+ _ACEOF
+-rm -f conftest.$ac_objext conftest$ac_exeext
+-if { (ac_try="$ac_link"
+-case "(($ac_try" in
+-  *\"* | *\`* | *\\*) ac_try_echo=\$ac_try;;
+-  *) ac_try_echo=$ac_try;;
+-esac
+-eval "echo \"\$as_me:$LINENO: $ac_try_echo\"") >&5
+-  (eval "$ac_link") 2>conftest.er1
+-  ac_status=$?
+-  grep -v '^ *+' conftest.er1 >conftest.err
+-  rm -f conftest.er1
+-  cat conftest.err >&5
+-  echo "$as_me:$LINENO: \$? = $ac_status" >&5
+-  (exit $ac_status); } && {
+-	 test -z "$ac_c_werror_flag" ||
+-	 test ! -s conftest.err
+-       } && test -s conftest$ac_exeext &&
+-       $as_test_x conftest$ac_exeext; then
++if ac_fn_c_try_link "$LINENO"
++then :
+   eval "$as_ac_Lib=yes"
+-else
+-  echo "$as_me: failed program was:" >&5
+-sed 's/^/| /' conftest.$ac_ext >&5
+-
+-	eval "$as_ac_Lib=no"
++else $as_nop
++  eval "$as_ac_Lib=no"
+ fi
+-
+-rm -f core conftest.err conftest.$ac_objext conftest_ipa8_conftest.oo \
+-      conftest$ac_exeext conftest.$ac_ext
++rm -f core conftest.err conftest.$ac_objext conftest.beam \
++    conftest$ac_exeext conftest.$ac_ext
+ LIBS=$ac_check_lib_save_LIBS
+ fi
+-ac_res=`eval echo '${'$as_ac_Lib'}'`
+-	       { echo "$as_me:$LINENO: result: $ac_res" >&5
+-echo "${ECHO_T}$ac_res" >&6; }
+-if test `eval echo '${'$as_ac_Lib'}'` = yes; then
++eval ac_res=\$$as_ac_Lib
++	       { printf "%s\n" "$as_me:${as_lineno-$LINENO}: result: $ac_res" >&5
++printf "%s\n" "$ac_res" >&6; }
++if eval test \"x\$"$as_ac_Lib"\" = x"yes"
++then :
+   F77LIBFLAGS="$F77LIBFLAGS $casc_flag"
+                   casc_result=yes
+-else
++else $as_nop
+   F77LIBFLAGS="$F77LIBFLAGS $casc_flag"
+ fi
+ 
+@@ -7406,70 +8029,45 @@ EOF
+ 
+    # Checks if the LIBRARY from the argument list can be used to link
+    # a C test program with testflib
+-   as_ac_Lib=`echo "ac_cv_lib_f2c_$THIS_FUNCTION" | $as_tr_sh`
+-{ echo "$as_me:$LINENO: checking for $THIS_FUNCTION in -lf2c" >&5
+-echo $ECHO_N "checking for $THIS_FUNCTION in -lf2c... $ECHO_C" >&6; }
+-if { as_var=$as_ac_Lib; eval "test \"\${$as_var+set}\" = set"; }; then
+-  echo $ECHO_N "(cached) $ECHO_C" >&6
+-else
++   as_ac_Lib=`printf "%s\n" "ac_cv_lib_f2c_$THIS_FUNCTION" | $as_tr_sh`
++{ printf "%s\n" "$as_me:${as_lineno-$LINENO}: checking for $THIS_FUNCTION in -lf2c" >&5
++printf %s "checking for $THIS_FUNCTION in -lf2c... " >&6; }
++if eval test \${$as_ac_Lib+y}
++then :
++  printf %s "(cached) " >&6
++else $as_nop
+   ac_check_lib_save_LIBS=$LIBS
+ LIBS="-lf2c testflib_.o -L/home/casc/g77/lib -lf2c $LIBS"
+-cat >conftest.$ac_ext <<_ACEOF
+-/* confdefs.h.  */
+-_ACEOF
+-cat confdefs.h >>conftest.$ac_ext
+-cat >>conftest.$ac_ext <<_ACEOF
++cat confdefs.h - <<_ACEOF >conftest.$ac_ext
+ /* end confdefs.h.  */
+ 
+ /* Override any GCC internal prototype to avoid an error.
+    Use char because int might match the return type of a GCC
+    builtin and then its argument prototype would still apply.  */
+-#ifdef __cplusplus
+-extern "C"
+-#endif
+ char $THIS_FUNCTION ();
+ int
+-main ()
++main (void)
+ {
+ return $THIS_FUNCTION ();
+   ;
+   return 0;
+ }
+ _ACEOF
+-rm -f conftest.$ac_objext conftest$ac_exeext
+-if { (ac_try="$ac_link"
+-case "(($ac_try" in
+-  *\"* | *\`* | *\\*) ac_try_echo=\$ac_try;;
+-  *) ac_try_echo=$ac_try;;
+-esac
+-eval "echo \"\$as_me:$LINENO: $ac_try_echo\"") >&5
+-  (eval "$ac_link") 2>conftest.er1
+-  ac_status=$?
+-  grep -v '^ *+' conftest.er1 >conftest.err
+-  rm -f conftest.er1
+-  cat conftest.err >&5
+-  echo "$as_me:$LINENO: \$? = $ac_status" >&5
+-  (exit $ac_status); } && {
+-	 test -z "$ac_c_werror_flag" ||
+-	 test ! -s conftest.err
+-       } && test -s conftest$ac_exeext &&
+-       $as_test_x conftest$ac_exeext; then
++if ac_fn_c_try_link "$LINENO"
++then :
+   eval "$as_ac_Lib=yes"
+-else
+-  echo "$as_me: failed program was:" >&5
+-sed 's/^/| /' conftest.$ac_ext >&5
+-
+-	eval "$as_ac_Lib=no"
++else $as_nop
++  eval "$as_ac_Lib=no"
+ fi
+-
+-rm -f core conftest.err conftest.$ac_objext conftest_ipa8_conftest.oo \
+-      conftest$ac_exeext conftest.$ac_ext
++rm -f core conftest.err conftest.$ac_objext conftest.beam \
++    conftest$ac_exeext conftest.$ac_ext
+ LIBS=$ac_check_lib_save_LIBS
+ fi
+-ac_res=`eval echo '${'$as_ac_Lib'}'`
+-	       { echo "$as_me:$LINENO: result: $ac_res" >&5
+-echo "${ECHO_T}$ac_res" >&6; }
+-if test `eval echo '${'$as_ac_Lib'}'` = yes; then
++eval ac_res=\$$as_ac_Lib
++	       { printf "%s\n" "$as_me:${as_lineno-$LINENO}: result: $ac_res" >&5
++printf "%s\n" "$ac_res" >&6; }
++if eval test \"x\$"$as_ac_Lib"\" = x"yes"
++then :
+   F77LIBDIRS="-L/home/casc/g77/lib"
+                                           F77LIBS="-lf2c"
+ 
+@@ -7520,70 +8118,45 @@ EOF
+ 
+    # Checks if the LIBRARY from the argument list can be used to link
+    # a C test program with testflib
+-   as_ac_Lib=`echo "ac_cv_lib_sunmath_$THIS_FUNCTION" | $as_tr_sh`
+-{ echo "$as_me:$LINENO: checking for $THIS_FUNCTION in -lsunmath" >&5
+-echo $ECHO_N "checking for $THIS_FUNCTION in -lsunmath... $ECHO_C" >&6; }
+-if { as_var=$as_ac_Lib; eval "test \"\${$as_var+set}\" = set"; }; then
+-  echo $ECHO_N "(cached) $ECHO_C" >&6
+-else
++   as_ac_Lib=`printf "%s\n" "ac_cv_lib_sunmath_$THIS_FUNCTION" | $as_tr_sh`
++{ printf "%s\n" "$as_me:${as_lineno-$LINENO}: checking for $THIS_FUNCTION in -lsunmath" >&5
++printf %s "checking for $THIS_FUNCTION in -lsunmath... " >&6; }
++if eval test \${$as_ac_Lib+y}
++then :
++  printf %s "(cached) " >&6
++else $as_nop
+   ac_check_lib_save_LIBS=$LIBS
+ LIBS="-lsunmath testflib_.o -L/opt/SUNWspro/SC5.0/lib -lF77 -lsunmath $LIBS"
+-cat >conftest.$ac_ext <<_ACEOF
+-/* confdefs.h.  */
+-_ACEOF
+-cat confdefs.h >>conftest.$ac_ext
+-cat >>conftest.$ac_ext <<_ACEOF
++cat confdefs.h - <<_ACEOF >conftest.$ac_ext
+ /* end confdefs.h.  */
+ 
+ /* Override any GCC internal prototype to avoid an error.
+    Use char because int might match the return type of a GCC
+    builtin and then its argument prototype would still apply.  */
+-#ifdef __cplusplus
+-extern "C"
+-#endif
+ char $THIS_FUNCTION ();
+ int
+-main ()
++main (void)
+ {
+ return $THIS_FUNCTION ();
+   ;
+   return 0;
+ }
+ _ACEOF
+-rm -f conftest.$ac_objext conftest$ac_exeext
+-if { (ac_try="$ac_link"
+-case "(($ac_try" in
+-  *\"* | *\`* | *\\*) ac_try_echo=\$ac_try;;
+-  *) ac_try_echo=$ac_try;;
+-esac
+-eval "echo \"\$as_me:$LINENO: $ac_try_echo\"") >&5
+-  (eval "$ac_link") 2>conftest.er1
+-  ac_status=$?
+-  grep -v '^ *+' conftest.er1 >conftest.err
+-  rm -f conftest.er1
+-  cat conftest.err >&5
+-  echo "$as_me:$LINENO: \$? = $ac_status" >&5
+-  (exit $ac_status); } && {
+-	 test -z "$ac_c_werror_flag" ||
+-	 test ! -s conftest.err
+-       } && test -s conftest$ac_exeext &&
+-       $as_test_x conftest$ac_exeext; then
++if ac_fn_c_try_link "$LINENO"
++then :
+   eval "$as_ac_Lib=yes"
+-else
+-  echo "$as_me: failed program was:" >&5
+-sed 's/^/| /' conftest.$ac_ext >&5
+-
+-	eval "$as_ac_Lib=no"
++else $as_nop
++  eval "$as_ac_Lib=no"
+ fi
+-
+-rm -f core conftest.err conftest.$ac_objext conftest_ipa8_conftest.oo \
+-      conftest$ac_exeext conftest.$ac_ext
++rm -f core conftest.err conftest.$ac_objext conftest.beam \
++    conftest$ac_exeext conftest.$ac_ext
+ LIBS=$ac_check_lib_save_LIBS
+ fi
+-ac_res=`eval echo '${'$as_ac_Lib'}'`
+-	       { echo "$as_me:$LINENO: result: $ac_res" >&5
+-echo "${ECHO_T}$ac_res" >&6; }
+-if test `eval echo '${'$as_ac_Lib'}'` = yes; then
++eval ac_res=\$$as_ac_Lib
++	       { printf "%s\n" "$as_me:${as_lineno-$LINENO}: result: $ac_res" >&5
++printf "%s\n" "$ac_res" >&6; }
++if eval test \"x\$"$as_ac_Lib"\" = x"yes"
++then :
+   F77LIBDIRS="-L/opt/SUNWspro/SC5.0/lib"
+                                    F77LIBS="-lF77 -lsunmath"
+ 
+@@ -7636,70 +8209,45 @@ EOF
+ 
+    # Checks if the LIBRARY from the argument list can be used to link
+    # a C test program with testflib
+-   as_ac_Lib=`echo "ac_cv_lib_for_$THIS_FUNCTION" | $as_tr_sh`
+-{ echo "$as_me:$LINENO: checking for $THIS_FUNCTION in -lfor" >&5
+-echo $ECHO_N "checking for $THIS_FUNCTION in -lfor... $ECHO_C" >&6; }
+-if { as_var=$as_ac_Lib; eval "test \"\${$as_var+set}\" = set"; }; then
+-  echo $ECHO_N "(cached) $ECHO_C" >&6
+-else
++   as_ac_Lib=`printf "%s\n" "ac_cv_lib_for_$THIS_FUNCTION" | $as_tr_sh`
++{ printf "%s\n" "$as_me:${as_lineno-$LINENO}: checking for $THIS_FUNCTION in -lfor" >&5
++printf %s "checking for $THIS_FUNCTION in -lfor... " >&6; }
++if eval test \${$as_ac_Lib+y}
++then :
++  printf %s "(cached) " >&6
++else $as_nop
+   ac_check_lib_save_LIBS=$LIBS
+ LIBS="-lfor testflib_.o  $LIBS"
+-cat >conftest.$ac_ext <<_ACEOF
+-/* confdefs.h.  */
+-_ACEOF
+-cat confdefs.h >>conftest.$ac_ext
+-cat >>conftest.$ac_ext <<_ACEOF
++cat confdefs.h - <<_ACEOF >conftest.$ac_ext
+ /* end confdefs.h.  */
+ 
+ /* Override any GCC internal prototype to avoid an error.
+    Use char because int might match the return type of a GCC
+    builtin and then its argument prototype would still apply.  */
+-#ifdef __cplusplus
+-extern "C"
+-#endif
+ char $THIS_FUNCTION ();
+ int
+-main ()
++main (void)
+ {
+ return $THIS_FUNCTION ();
+   ;
+   return 0;
+ }
+ _ACEOF
+-rm -f conftest.$ac_objext conftest$ac_exeext
+-if { (ac_try="$ac_link"
+-case "(($ac_try" in
+-  *\"* | *\`* | *\\*) ac_try_echo=\$ac_try;;
+-  *) ac_try_echo=$ac_try;;
+-esac
+-eval "echo \"\$as_me:$LINENO: $ac_try_echo\"") >&5
+-  (eval "$ac_link") 2>conftest.er1
+-  ac_status=$?
+-  grep -v '^ *+' conftest.er1 >conftest.err
+-  rm -f conftest.er1
+-  cat conftest.err >&5
+-  echo "$as_me:$LINENO: \$? = $ac_status" >&5
+-  (exit $ac_status); } && {
+-	 test -z "$ac_c_werror_flag" ||
+-	 test ! -s conftest.err
+-       } && test -s conftest$ac_exeext &&
+-       $as_test_x conftest$ac_exeext; then
++if ac_fn_c_try_link "$LINENO"
++then :
+   eval "$as_ac_Lib=yes"
+-else
+-  echo "$as_me: failed program was:" >&5
+-sed 's/^/| /' conftest.$ac_ext >&5
+-
+-	eval "$as_ac_Lib=no"
++else $as_nop
++  eval "$as_ac_Lib=no"
+ fi
+-
+-rm -f core conftest.err conftest.$ac_objext conftest_ipa8_conftest.oo \
+-      conftest$ac_exeext conftest.$ac_ext
++rm -f core conftest.err conftest.$ac_objext conftest.beam \
++    conftest$ac_exeext conftest.$ac_ext
+ LIBS=$ac_check_lib_save_LIBS
+ fi
+-ac_res=`eval echo '${'$as_ac_Lib'}'`
+-	       { echo "$as_me:$LINENO: result: $ac_res" >&5
+-echo "${ECHO_T}$ac_res" >&6; }
+-if test `eval echo '${'$as_ac_Lib'}'` = yes; then
++eval ac_res=\$$as_ac_Lib
++	       { printf "%s\n" "$as_me:${as_lineno-$LINENO}: result: $ac_res" >&5
++printf "%s\n" "$ac_res" >&6; }
++if eval test \"x\$"$as_ac_Lib"\" = x"yes"
++then :
+   F77LIBS="-lfor"
+ fi
+ 
+@@ -7749,70 +8297,45 @@ EOF
+ 
+    # Checks if the LIBRARY from the argument list can be used to link
+    # a C test program with testflib
+-   as_ac_Lib=`echo "ac_cv_lib_xlf90_$THIS_FUNCTION" | $as_tr_sh`
+-{ echo "$as_me:$LINENO: checking for $THIS_FUNCTION in -lxlf90" >&5
+-echo $ECHO_N "checking for $THIS_FUNCTION in -lxlf90... $ECHO_C" >&6; }
+-if { as_var=$as_ac_Lib; eval "test \"\${$as_var+set}\" = set"; }; then
+-  echo $ECHO_N "(cached) $ECHO_C" >&6
+-else
++   as_ac_Lib=`printf "%s\n" "ac_cv_lib_xlf90_$THIS_FUNCTION" | $as_tr_sh`
++{ printf "%s\n" "$as_me:${as_lineno-$LINENO}: checking for $THIS_FUNCTION in -lxlf90" >&5
++printf %s "checking for $THIS_FUNCTION in -lxlf90... " >&6; }
++if eval test \${$as_ac_Lib+y}
++then :
++  printf %s "(cached) " >&6
++else $as_nop
+   ac_check_lib_save_LIBS=$LIBS
+ LIBS="-lxlf90 testflib_.o  $LIBS"
+-cat >conftest.$ac_ext <<_ACEOF
+-/* confdefs.h.  */
+-_ACEOF
+-cat confdefs.h >>conftest.$ac_ext
+-cat >>conftest.$ac_ext <<_ACEOF
++cat confdefs.h - <<_ACEOF >conftest.$ac_ext
+ /* end confdefs.h.  */
+ 
+ /* Override any GCC internal prototype to avoid an error.
+    Use char because int might match the return type of a GCC
+    builtin and then its argument prototype would still apply.  */
+-#ifdef __cplusplus
+-extern "C"
+-#endif
+ char $THIS_FUNCTION ();
+ int
+-main ()
++main (void)
+ {
+ return $THIS_FUNCTION ();
+   ;
+   return 0;
+ }
+ _ACEOF
+-rm -f conftest.$ac_objext conftest$ac_exeext
+-if { (ac_try="$ac_link"
+-case "(($ac_try" in
+-  *\"* | *\`* | *\\*) ac_try_echo=\$ac_try;;
+-  *) ac_try_echo=$ac_try;;
+-esac
+-eval "echo \"\$as_me:$LINENO: $ac_try_echo\"") >&5
+-  (eval "$ac_link") 2>conftest.er1
+-  ac_status=$?
+-  grep -v '^ *+' conftest.er1 >conftest.err
+-  rm -f conftest.er1
+-  cat conftest.err >&5
+-  echo "$as_me:$LINENO: \$? = $ac_status" >&5
+-  (exit $ac_status); } && {
+-	 test -z "$ac_c_werror_flag" ||
+-	 test ! -s conftest.err
+-       } && test -s conftest$ac_exeext &&
+-       $as_test_x conftest$ac_exeext; then
++if ac_fn_c_try_link "$LINENO"
++then :
+   eval "$as_ac_Lib=yes"
+-else
+-  echo "$as_me: failed program was:" >&5
+-sed 's/^/| /' conftest.$ac_ext >&5
+-
+-	eval "$as_ac_Lib=no"
++else $as_nop
++  eval "$as_ac_Lib=no"
+ fi
+-
+-rm -f core conftest.err conftest.$ac_objext conftest_ipa8_conftest.oo \
+-      conftest$ac_exeext conftest.$ac_ext
++rm -f core conftest.err conftest.$ac_objext conftest.beam \
++    conftest$ac_exeext conftest.$ac_ext
+ LIBS=$ac_check_lib_save_LIBS
+ fi
+-ac_res=`eval echo '${'$as_ac_Lib'}'`
+-	       { echo "$as_me:$LINENO: result: $ac_res" >&5
+-echo "${ECHO_T}$ac_res" >&6; }
+-if test `eval echo '${'$as_ac_Lib'}'` = yes; then
++eval ac_res=\$$as_ac_Lib
++	       { printf "%s\n" "$as_me:${as_lineno-$LINENO}: result: $ac_res" >&5
++printf "%s\n" "$ac_res" >&6; }
++if eval test \"x\$"$as_ac_Lib"\" = x"yes"
++then :
+   F77LIBS="-lxlf90"
+ fi
+ 
+@@ -7862,70 +8385,45 @@ EOF
+ 
+    # Checks if the LIBRARY from the argument list can be used to link
+    # a C test program with testflib
+-   as_ac_Lib=`echo "ac_cv_lib_I77_$THIS_FUNCTION" | $as_tr_sh`
+-{ echo "$as_me:$LINENO: checking for $THIS_FUNCTION in -lI77" >&5
+-echo $ECHO_N "checking for $THIS_FUNCTION in -lI77... $ECHO_C" >&6; }
+-if { as_var=$as_ac_Lib; eval "test \"\${$as_var+set}\" = set"; }; then
+-  echo $ECHO_N "(cached) $ECHO_C" >&6
+-else
++   as_ac_Lib=`printf "%s\n" "ac_cv_lib_I77_$THIS_FUNCTION" | $as_tr_sh`
++{ printf "%s\n" "$as_me:${as_lineno-$LINENO}: checking for $THIS_FUNCTION in -lI77" >&5
++printf %s "checking for $THIS_FUNCTION in -lI77... " >&6; }
++if eval test \${$as_ac_Lib+y}
++then :
++  printf %s "(cached) " >&6
++else $as_nop
+   ac_check_lib_save_LIBS=$LIBS
+ LIBS="-lI77 testflib_.o -lF77 -lU77 -lI77 -lisam $LIBS"
+-cat >conftest.$ac_ext <<_ACEOF
+-/* confdefs.h.  */
+-_ACEOF
+-cat confdefs.h >>conftest.$ac_ext
+-cat >>conftest.$ac_ext <<_ACEOF
++cat confdefs.h - <<_ACEOF >conftest.$ac_ext
+ /* end confdefs.h.  */
+ 
+ /* Override any GCC internal prototype to avoid an error.
+    Use char because int might match the return type of a GCC
+    builtin and then its argument prototype would still apply.  */
+-#ifdef __cplusplus
+-extern "C"
+-#endif
+ char $THIS_FUNCTION ();
+ int
+-main ()
++main (void)
+ {
+ return $THIS_FUNCTION ();
+   ;
+   return 0;
+ }
+ _ACEOF
+-rm -f conftest.$ac_objext conftest$ac_exeext
+-if { (ac_try="$ac_link"
+-case "(($ac_try" in
+-  *\"* | *\`* | *\\*) ac_try_echo=\$ac_try;;
+-  *) ac_try_echo=$ac_try;;
+-esac
+-eval "echo \"\$as_me:$LINENO: $ac_try_echo\"") >&5
+-  (eval "$ac_link") 2>conftest.er1
+-  ac_status=$?
+-  grep -v '^ *+' conftest.er1 >conftest.err
+-  rm -f conftest.er1
+-  cat conftest.err >&5
+-  echo "$as_me:$LINENO: \$? = $ac_status" >&5
+-  (exit $ac_status); } && {
+-	 test -z "$ac_c_werror_flag" ||
+-	 test ! -s conftest.err
+-       } && test -s conftest$ac_exeext &&
+-       $as_test_x conftest$ac_exeext; then
++if ac_fn_c_try_link "$LINENO"
++then :
+   eval "$as_ac_Lib=yes"
+-else
+-  echo "$as_me: failed program was:" >&5
+-sed 's/^/| /' conftest.$ac_ext >&5
+-
+-	eval "$as_ac_Lib=no"
++else $as_nop
++  eval "$as_ac_Lib=no"
+ fi
+-
+-rm -f core conftest.err conftest.$ac_objext conftest_ipa8_conftest.oo \
+-      conftest$ac_exeext conftest.$ac_ext
++rm -f core conftest.err conftest.$ac_objext conftest.beam \
++    conftest$ac_exeext conftest.$ac_ext
+ LIBS=$ac_check_lib_save_LIBS
+ fi
+-ac_res=`eval echo '${'$as_ac_Lib'}'`
+-	       { echo "$as_me:$LINENO: result: $ac_res" >&5
+-echo "${ECHO_T}$ac_res" >&6; }
+-if test `eval echo '${'$as_ac_Lib'}'` = yes; then
++eval ac_res=\$$as_ac_Lib
++	       { printf "%s\n" "$as_me:${as_lineno-$LINENO}: result: $ac_res" >&5
++printf "%s\n" "$ac_res" >&6; }
++if eval test \"x\$"$as_ac_Lib"\" = x"yes"
++then :
+   F77LIBS="-lF77 -lU77 -lI77 -lisam"
+ fi
+ 
+@@ -7935,9 +8433,9 @@ fi
+ ;;
+ 
+          *)
+-            { echo "$as_me:$LINENO: WARNING: unable to set F77LIBFLAGS.  They must be set as a shell variable or
++            { printf "%s\n" "$as_me:${as_lineno-$LINENO}: WARNING: unable to set F77LIBFLAGS.  They must be set as a shell variable or
+  with a command-line option" >&5
+-echo "$as_me: WARNING: unable to set F77LIBFLAGS.  They must be set as a shell variable or
++printf "%s\n" "$as_me: WARNING: unable to set F77LIBFLAGS.  They must be set as a shell variable or
+  with a command-line option" >&2;}
+          ;;
+ 
+@@ -7978,8 +8476,8 @@ echo "$as_me: WARNING: unable to set F77LIBFLAGS.  They must be set as a shell v
+       casc_cv_f77flags=$F77LIBFLAGS
+ 
+ fi
+-{ echo "$as_me:$LINENO: result: $casc_cv_f77flags" >&5
+-echo "${ECHO_T}$casc_cv_f77flags" >&6; }
++{ printf "%s\n" "$as_me:${as_lineno-$LINENO}: result: $casc_cv_f77flags" >&5
++printf "%s\n" "$casc_cv_f77flags" >&6; }
+ 
+       F77LIBFLAGS=$casc_cv_f77flags
+ 
+@@ -8000,11 +8498,12 @@ echo "${ECHO_T}$casc_cv_f77flags" >&6; }
+       ;;
+    LINUX)
+ 
+-   { echo "$as_me:$LINENO: checking for Fortran libraries" >&5
+-echo $ECHO_N "checking for Fortran libraries... $ECHO_C" >&6; }
+-if test "${casc_cv_f77flags+set}" = set; then
+-  echo $ECHO_N "(cached) $ECHO_C" >&6
+-else
++   { printf "%s\n" "$as_me:${as_lineno-$LINENO}: checking for Fortran libraries" >&5
++printf %s "checking for Fortran libraries... " >&6; }
++if test ${casc_cv_f77flags+y}
++then :
++  printf %s "(cached) " >&6
++else $as_nop
+ 
+       if test -z "$F77LIBFLAGS"; then
+ 
+@@ -8165,7 +8664,7 @@ else
+   fi
+     rm -f conftest.f conftest.o conftest
+ 
+-  FLIBS="$flibs_result"
++  FLIBS="" # We never use FLIBS and it sometimes has quotes it in it, so disable it completely
+ 
+          for casc_flag in $flibs_result; do
+ 
+@@ -8245,73 +8744,48 @@ EOF
+ 
+    # Checks if the LIBRARY from the argument list can be used to link
+    # a C test program with testflib
+-   as_ac_Lib=`echo "ac_cv_lib_$casc_lib_name''_$THIS_FUNCTION" | $as_tr_sh`
+-{ echo "$as_me:$LINENO: checking for $THIS_FUNCTION in -l$casc_lib_name" >&5
+-echo $ECHO_N "checking for $THIS_FUNCTION in -l$casc_lib_name... $ECHO_C" >&6; }
+-if { as_var=$as_ac_Lib; eval "test \"\${$as_var+set}\" = set"; }; then
+-  echo $ECHO_N "(cached) $ECHO_C" >&6
+-else
++   as_ac_Lib=`printf "%s\n" "ac_cv_lib_$casc_lib_name""_$THIS_FUNCTION" | $as_tr_sh`
++{ printf "%s\n" "$as_me:${as_lineno-$LINENO}: checking for $THIS_FUNCTION in -l$casc_lib_name" >&5
++printf %s "checking for $THIS_FUNCTION in -l$casc_lib_name... " >&6; }
++if eval test \${$as_ac_Lib+y}
++then :
++  printf %s "(cached) " >&6
++else $as_nop
+   ac_check_lib_save_LIBS=$LIBS
+ LIBS="-l$casc_lib_name testflib_.o $F77LIBFLAGS $LIBS"
+-cat >conftest.$ac_ext <<_ACEOF
+-/* confdefs.h.  */
+-_ACEOF
+-cat confdefs.h >>conftest.$ac_ext
+-cat >>conftest.$ac_ext <<_ACEOF
++cat confdefs.h - <<_ACEOF >conftest.$ac_ext
+ /* end confdefs.h.  */
+ 
+ /* Override any GCC internal prototype to avoid an error.
+    Use char because int might match the return type of a GCC
+    builtin and then its argument prototype would still apply.  */
+-#ifdef __cplusplus
+-extern "C"
+-#endif
+ char $THIS_FUNCTION ();
+ int
+-main ()
++main (void)
+ {
+ return $THIS_FUNCTION ();
+   ;
+   return 0;
+ }
+ _ACEOF
+-rm -f conftest.$ac_objext conftest$ac_exeext
+-if { (ac_try="$ac_link"
+-case "(($ac_try" in
+-  *\"* | *\`* | *\\*) ac_try_echo=\$ac_try;;
+-  *) ac_try_echo=$ac_try;;
+-esac
+-eval "echo \"\$as_me:$LINENO: $ac_try_echo\"") >&5
+-  (eval "$ac_link") 2>conftest.er1
+-  ac_status=$?
+-  grep -v '^ *+' conftest.er1 >conftest.err
+-  rm -f conftest.er1
+-  cat conftest.err >&5
+-  echo "$as_me:$LINENO: \$? = $ac_status" >&5
+-  (exit $ac_status); } && {
+-	 test -z "$ac_c_werror_flag" ||
+-	 test ! -s conftest.err
+-       } && test -s conftest$ac_exeext &&
+-       $as_test_x conftest$ac_exeext; then
++if ac_fn_c_try_link "$LINENO"
++then :
+   eval "$as_ac_Lib=yes"
+-else
+-  echo "$as_me: failed program was:" >&5
+-sed 's/^/| /' conftest.$ac_ext >&5
+-
+-	eval "$as_ac_Lib=no"
++else $as_nop
++  eval "$as_ac_Lib=no"
+ fi
+-
+-rm -f core conftest.err conftest.$ac_objext conftest_ipa8_conftest.oo \
+-      conftest$ac_exeext conftest.$ac_ext
++rm -f core conftest.err conftest.$ac_objext conftest.beam \
++    conftest$ac_exeext conftest.$ac_ext
+ LIBS=$ac_check_lib_save_LIBS
+ fi
+-ac_res=`eval echo '${'$as_ac_Lib'}'`
+-	       { echo "$as_me:$LINENO: result: $ac_res" >&5
+-echo "${ECHO_T}$ac_res" >&6; }
+-if test `eval echo '${'$as_ac_Lib'}'` = yes; then
++eval ac_res=\$$as_ac_Lib
++	       { printf "%s\n" "$as_me:${as_lineno-$LINENO}: result: $ac_res" >&5
++printf "%s\n" "$ac_res" >&6; }
++if eval test \"x\$"$as_ac_Lib"\" = x"yes"
++then :
+   F77LIBFLAGS="$F77LIBFLAGS $casc_flag"
+                   casc_result=yes
+-else
++else $as_nop
+   F77LIBFLAGS="$F77LIBFLAGS $casc_flag"
+ fi
+ 
+@@ -8379,70 +8853,45 @@ EOF
+ 
+    # Checks if the LIBRARY from the argument list can be used to link
+    # a C test program with testflib
+-   as_ac_Lib=`echo "ac_cv_lib_f2c_$THIS_FUNCTION" | $as_tr_sh`
+-{ echo "$as_me:$LINENO: checking for $THIS_FUNCTION in -lf2c" >&5
+-echo $ECHO_N "checking for $THIS_FUNCTION in -lf2c... $ECHO_C" >&6; }
+-if { as_var=$as_ac_Lib; eval "test \"\${$as_var+set}\" = set"; }; then
+-  echo $ECHO_N "(cached) $ECHO_C" >&6
+-else
++   as_ac_Lib=`printf "%s\n" "ac_cv_lib_f2c_$THIS_FUNCTION" | $as_tr_sh`
++{ printf "%s\n" "$as_me:${as_lineno-$LINENO}: checking for $THIS_FUNCTION in -lf2c" >&5
++printf %s "checking for $THIS_FUNCTION in -lf2c... " >&6; }
++if eval test \${$as_ac_Lib+y}
++then :
++  printf %s "(cached) " >&6
++else $as_nop
+   ac_check_lib_save_LIBS=$LIBS
+ LIBS="-lf2c testflib_.o -L/home/casc/g77/lib -lf2c $LIBS"
+-cat >conftest.$ac_ext <<_ACEOF
+-/* confdefs.h.  */
+-_ACEOF
+-cat confdefs.h >>conftest.$ac_ext
+-cat >>conftest.$ac_ext <<_ACEOF
++cat confdefs.h - <<_ACEOF >conftest.$ac_ext
+ /* end confdefs.h.  */
+ 
+ /* Override any GCC internal prototype to avoid an error.
+    Use char because int might match the return type of a GCC
+    builtin and then its argument prototype would still apply.  */
+-#ifdef __cplusplus
+-extern "C"
+-#endif
+ char $THIS_FUNCTION ();
+ int
+-main ()
++main (void)
+ {
+ return $THIS_FUNCTION ();
+   ;
+   return 0;
+ }
+ _ACEOF
+-rm -f conftest.$ac_objext conftest$ac_exeext
+-if { (ac_try="$ac_link"
+-case "(($ac_try" in
+-  *\"* | *\`* | *\\*) ac_try_echo=\$ac_try;;
+-  *) ac_try_echo=$ac_try;;
+-esac
+-eval "echo \"\$as_me:$LINENO: $ac_try_echo\"") >&5
+-  (eval "$ac_link") 2>conftest.er1
+-  ac_status=$?
+-  grep -v '^ *+' conftest.er1 >conftest.err
+-  rm -f conftest.er1
+-  cat conftest.err >&5
+-  echo "$as_me:$LINENO: \$? = $ac_status" >&5
+-  (exit $ac_status); } && {
+-	 test -z "$ac_c_werror_flag" ||
+-	 test ! -s conftest.err
+-       } && test -s conftest$ac_exeext &&
+-       $as_test_x conftest$ac_exeext; then
++if ac_fn_c_try_link "$LINENO"
++then :
+   eval "$as_ac_Lib=yes"
+-else
+-  echo "$as_me: failed program was:" >&5
+-sed 's/^/| /' conftest.$ac_ext >&5
+-
+-	eval "$as_ac_Lib=no"
++else $as_nop
++  eval "$as_ac_Lib=no"
+ fi
+-
+-rm -f core conftest.err conftest.$ac_objext conftest_ipa8_conftest.oo \
+-      conftest$ac_exeext conftest.$ac_ext
++rm -f core conftest.err conftest.$ac_objext conftest.beam \
++    conftest$ac_exeext conftest.$ac_ext
+ LIBS=$ac_check_lib_save_LIBS
+ fi
+-ac_res=`eval echo '${'$as_ac_Lib'}'`
+-	       { echo "$as_me:$LINENO: result: $ac_res" >&5
+-echo "${ECHO_T}$ac_res" >&6; }
+-if test `eval echo '${'$as_ac_Lib'}'` = yes; then
++eval ac_res=\$$as_ac_Lib
++	       { printf "%s\n" "$as_me:${as_lineno-$LINENO}: result: $ac_res" >&5
++printf "%s\n" "$ac_res" >&6; }
++if eval test \"x\$"$as_ac_Lib"\" = x"yes"
++then :
+   F77LIBDIRS="-L/home/casc/g77/lib"
+                                           F77LIBS="-lf2c"
+ 
+@@ -8493,70 +8942,45 @@ EOF
+ 
+    # Checks if the LIBRARY from the argument list can be used to link
+    # a C test program with testflib
+-   as_ac_Lib=`echo "ac_cv_lib_sunmath_$THIS_FUNCTION" | $as_tr_sh`
+-{ echo "$as_me:$LINENO: checking for $THIS_FUNCTION in -lsunmath" >&5
+-echo $ECHO_N "checking for $THIS_FUNCTION in -lsunmath... $ECHO_C" >&6; }
+-if { as_var=$as_ac_Lib; eval "test \"\${$as_var+set}\" = set"; }; then
+-  echo $ECHO_N "(cached) $ECHO_C" >&6
+-else
++   as_ac_Lib=`printf "%s\n" "ac_cv_lib_sunmath_$THIS_FUNCTION" | $as_tr_sh`
++{ printf "%s\n" "$as_me:${as_lineno-$LINENO}: checking for $THIS_FUNCTION in -lsunmath" >&5
++printf %s "checking for $THIS_FUNCTION in -lsunmath... " >&6; }
++if eval test \${$as_ac_Lib+y}
++then :
++  printf %s "(cached) " >&6
++else $as_nop
+   ac_check_lib_save_LIBS=$LIBS
+ LIBS="-lsunmath testflib_.o -L/opt/SUNWspro/SC5.0/lib -lF77 -lsunmath $LIBS"
+-cat >conftest.$ac_ext <<_ACEOF
+-/* confdefs.h.  */
+-_ACEOF
+-cat confdefs.h >>conftest.$ac_ext
+-cat >>conftest.$ac_ext <<_ACEOF
++cat confdefs.h - <<_ACEOF >conftest.$ac_ext
+ /* end confdefs.h.  */
+ 
+ /* Override any GCC internal prototype to avoid an error.
+    Use char because int might match the return type of a GCC
+    builtin and then its argument prototype would still apply.  */
+-#ifdef __cplusplus
+-extern "C"
+-#endif
+ char $THIS_FUNCTION ();
+ int
+-main ()
++main (void)
+ {
+ return $THIS_FUNCTION ();
+   ;
+   return 0;
+ }
+ _ACEOF
+-rm -f conftest.$ac_objext conftest$ac_exeext
+-if { (ac_try="$ac_link"
+-case "(($ac_try" in
+-  *\"* | *\`* | *\\*) ac_try_echo=\$ac_try;;
+-  *) ac_try_echo=$ac_try;;
+-esac
+-eval "echo \"\$as_me:$LINENO: $ac_try_echo\"") >&5
+-  (eval "$ac_link") 2>conftest.er1
+-  ac_status=$?
+-  grep -v '^ *+' conftest.er1 >conftest.err
+-  rm -f conftest.er1
+-  cat conftest.err >&5
+-  echo "$as_me:$LINENO: \$? = $ac_status" >&5
+-  (exit $ac_status); } && {
+-	 test -z "$ac_c_werror_flag" ||
+-	 test ! -s conftest.err
+-       } && test -s conftest$ac_exeext &&
+-       $as_test_x conftest$ac_exeext; then
++if ac_fn_c_try_link "$LINENO"
++then :
+   eval "$as_ac_Lib=yes"
+-else
+-  echo "$as_me: failed program was:" >&5
+-sed 's/^/| /' conftest.$ac_ext >&5
+-
+-	eval "$as_ac_Lib=no"
++else $as_nop
++  eval "$as_ac_Lib=no"
+ fi
+-
+-rm -f core conftest.err conftest.$ac_objext conftest_ipa8_conftest.oo \
+-      conftest$ac_exeext conftest.$ac_ext
++rm -f core conftest.err conftest.$ac_objext conftest.beam \
++    conftest$ac_exeext conftest.$ac_ext
+ LIBS=$ac_check_lib_save_LIBS
+ fi
+-ac_res=`eval echo '${'$as_ac_Lib'}'`
+-	       { echo "$as_me:$LINENO: result: $ac_res" >&5
+-echo "${ECHO_T}$ac_res" >&6; }
+-if test `eval echo '${'$as_ac_Lib'}'` = yes; then
++eval ac_res=\$$as_ac_Lib
++	       { printf "%s\n" "$as_me:${as_lineno-$LINENO}: result: $ac_res" >&5
++printf "%s\n" "$ac_res" >&6; }
++if eval test \"x\$"$as_ac_Lib"\" = x"yes"
++then :
+   F77LIBDIRS="-L/opt/SUNWspro/SC5.0/lib"
+                                    F77LIBS="-lF77 -lsunmath"
+ 
+@@ -8609,70 +9033,45 @@ EOF
+ 
+    # Checks if the LIBRARY from the argument list can be used to link
+    # a C test program with testflib
+-   as_ac_Lib=`echo "ac_cv_lib_for_$THIS_FUNCTION" | $as_tr_sh`
+-{ echo "$as_me:$LINENO: checking for $THIS_FUNCTION in -lfor" >&5
+-echo $ECHO_N "checking for $THIS_FUNCTION in -lfor... $ECHO_C" >&6; }
+-if { as_var=$as_ac_Lib; eval "test \"\${$as_var+set}\" = set"; }; then
+-  echo $ECHO_N "(cached) $ECHO_C" >&6
+-else
++   as_ac_Lib=`printf "%s\n" "ac_cv_lib_for_$THIS_FUNCTION" | $as_tr_sh`
++{ printf "%s\n" "$as_me:${as_lineno-$LINENO}: checking for $THIS_FUNCTION in -lfor" >&5
++printf %s "checking for $THIS_FUNCTION in -lfor... " >&6; }
++if eval test \${$as_ac_Lib+y}
++then :
++  printf %s "(cached) " >&6
++else $as_nop
+   ac_check_lib_save_LIBS=$LIBS
+ LIBS="-lfor testflib_.o  $LIBS"
+-cat >conftest.$ac_ext <<_ACEOF
+-/* confdefs.h.  */
+-_ACEOF
+-cat confdefs.h >>conftest.$ac_ext
+-cat >>conftest.$ac_ext <<_ACEOF
++cat confdefs.h - <<_ACEOF >conftest.$ac_ext
+ /* end confdefs.h.  */
+ 
+ /* Override any GCC internal prototype to avoid an error.
+    Use char because int might match the return type of a GCC
+    builtin and then its argument prototype would still apply.  */
+-#ifdef __cplusplus
+-extern "C"
+-#endif
+ char $THIS_FUNCTION ();
+ int
+-main ()
++main (void)
+ {
+ return $THIS_FUNCTION ();
+   ;
+   return 0;
+ }
+ _ACEOF
+-rm -f conftest.$ac_objext conftest$ac_exeext
+-if { (ac_try="$ac_link"
+-case "(($ac_try" in
+-  *\"* | *\`* | *\\*) ac_try_echo=\$ac_try;;
+-  *) ac_try_echo=$ac_try;;
+-esac
+-eval "echo \"\$as_me:$LINENO: $ac_try_echo\"") >&5
+-  (eval "$ac_link") 2>conftest.er1
+-  ac_status=$?
+-  grep -v '^ *+' conftest.er1 >conftest.err
+-  rm -f conftest.er1
+-  cat conftest.err >&5
+-  echo "$as_me:$LINENO: \$? = $ac_status" >&5
+-  (exit $ac_status); } && {
+-	 test -z "$ac_c_werror_flag" ||
+-	 test ! -s conftest.err
+-       } && test -s conftest$ac_exeext &&
+-       $as_test_x conftest$ac_exeext; then
++if ac_fn_c_try_link "$LINENO"
++then :
+   eval "$as_ac_Lib=yes"
+-else
+-  echo "$as_me: failed program was:" >&5
+-sed 's/^/| /' conftest.$ac_ext >&5
+-
+-	eval "$as_ac_Lib=no"
++else $as_nop
++  eval "$as_ac_Lib=no"
+ fi
+-
+-rm -f core conftest.err conftest.$ac_objext conftest_ipa8_conftest.oo \
+-      conftest$ac_exeext conftest.$ac_ext
++rm -f core conftest.err conftest.$ac_objext conftest.beam \
++    conftest$ac_exeext conftest.$ac_ext
+ LIBS=$ac_check_lib_save_LIBS
+ fi
+-ac_res=`eval echo '${'$as_ac_Lib'}'`
+-	       { echo "$as_me:$LINENO: result: $ac_res" >&5
+-echo "${ECHO_T}$ac_res" >&6; }
+-if test `eval echo '${'$as_ac_Lib'}'` = yes; then
++eval ac_res=\$$as_ac_Lib
++	       { printf "%s\n" "$as_me:${as_lineno-$LINENO}: result: $ac_res" >&5
++printf "%s\n" "$ac_res" >&6; }
++if eval test \"x\$"$as_ac_Lib"\" = x"yes"
++then :
+   F77LIBS="-lfor"
+ fi
+ 
+@@ -8722,70 +9121,45 @@ EOF
+ 
+    # Checks if the LIBRARY from the argument list can be used to link
+    # a C test program with testflib
+-   as_ac_Lib=`echo "ac_cv_lib_xlf90_$THIS_FUNCTION" | $as_tr_sh`
+-{ echo "$as_me:$LINENO: checking for $THIS_FUNCTION in -lxlf90" >&5
+-echo $ECHO_N "checking for $THIS_FUNCTION in -lxlf90... $ECHO_C" >&6; }
+-if { as_var=$as_ac_Lib; eval "test \"\${$as_var+set}\" = set"; }; then
+-  echo $ECHO_N "(cached) $ECHO_C" >&6
+-else
++   as_ac_Lib=`printf "%s\n" "ac_cv_lib_xlf90_$THIS_FUNCTION" | $as_tr_sh`
++{ printf "%s\n" "$as_me:${as_lineno-$LINENO}: checking for $THIS_FUNCTION in -lxlf90" >&5
++printf %s "checking for $THIS_FUNCTION in -lxlf90... " >&6; }
++if eval test \${$as_ac_Lib+y}
++then :
++  printf %s "(cached) " >&6
++else $as_nop
+   ac_check_lib_save_LIBS=$LIBS
+ LIBS="-lxlf90 testflib_.o  $LIBS"
+-cat >conftest.$ac_ext <<_ACEOF
+-/* confdefs.h.  */
+-_ACEOF
+-cat confdefs.h >>conftest.$ac_ext
+-cat >>conftest.$ac_ext <<_ACEOF
++cat confdefs.h - <<_ACEOF >conftest.$ac_ext
+ /* end confdefs.h.  */
+ 
+ /* Override any GCC internal prototype to avoid an error.
+    Use char because int might match the return type of a GCC
+    builtin and then its argument prototype would still apply.  */
+-#ifdef __cplusplus
+-extern "C"
+-#endif
+ char $THIS_FUNCTION ();
+ int
+-main ()
++main (void)
+ {
+ return $THIS_FUNCTION ();
+   ;
+   return 0;
+ }
+ _ACEOF
+-rm -f conftest.$ac_objext conftest$ac_exeext
+-if { (ac_try="$ac_link"
+-case "(($ac_try" in
+-  *\"* | *\`* | *\\*) ac_try_echo=\$ac_try;;
+-  *) ac_try_echo=$ac_try;;
+-esac
+-eval "echo \"\$as_me:$LINENO: $ac_try_echo\"") >&5
+-  (eval "$ac_link") 2>conftest.er1
+-  ac_status=$?
+-  grep -v '^ *+' conftest.er1 >conftest.err
+-  rm -f conftest.er1
+-  cat conftest.err >&5
+-  echo "$as_me:$LINENO: \$? = $ac_status" >&5
+-  (exit $ac_status); } && {
+-	 test -z "$ac_c_werror_flag" ||
+-	 test ! -s conftest.err
+-       } && test -s conftest$ac_exeext &&
+-       $as_test_x conftest$ac_exeext; then
++if ac_fn_c_try_link "$LINENO"
++then :
+   eval "$as_ac_Lib=yes"
+-else
+-  echo "$as_me: failed program was:" >&5
+-sed 's/^/| /' conftest.$ac_ext >&5
+-
+-	eval "$as_ac_Lib=no"
++else $as_nop
++  eval "$as_ac_Lib=no"
+ fi
+-
+-rm -f core conftest.err conftest.$ac_objext conftest_ipa8_conftest.oo \
+-      conftest$ac_exeext conftest.$ac_ext
++rm -f core conftest.err conftest.$ac_objext conftest.beam \
++    conftest$ac_exeext conftest.$ac_ext
+ LIBS=$ac_check_lib_save_LIBS
+ fi
+-ac_res=`eval echo '${'$as_ac_Lib'}'`
+-	       { echo "$as_me:$LINENO: result: $ac_res" >&5
+-echo "${ECHO_T}$ac_res" >&6; }
+-if test `eval echo '${'$as_ac_Lib'}'` = yes; then
++eval ac_res=\$$as_ac_Lib
++	       { printf "%s\n" "$as_me:${as_lineno-$LINENO}: result: $ac_res" >&5
++printf "%s\n" "$ac_res" >&6; }
++if eval test \"x\$"$as_ac_Lib"\" = x"yes"
++then :
+   F77LIBS="-lxlf90"
+ fi
+ 
+@@ -8835,70 +9209,45 @@ EOF
+ 
+    # Checks if the LIBRARY from the argument list can be used to link
+    # a C test program with testflib
+-   as_ac_Lib=`echo "ac_cv_lib_I77_$THIS_FUNCTION" | $as_tr_sh`
+-{ echo "$as_me:$LINENO: checking for $THIS_FUNCTION in -lI77" >&5
+-echo $ECHO_N "checking for $THIS_FUNCTION in -lI77... $ECHO_C" >&6; }
+-if { as_var=$as_ac_Lib; eval "test \"\${$as_var+set}\" = set"; }; then
+-  echo $ECHO_N "(cached) $ECHO_C" >&6
+-else
++   as_ac_Lib=`printf "%s\n" "ac_cv_lib_I77_$THIS_FUNCTION" | $as_tr_sh`
++{ printf "%s\n" "$as_me:${as_lineno-$LINENO}: checking for $THIS_FUNCTION in -lI77" >&5
++printf %s "checking for $THIS_FUNCTION in -lI77... " >&6; }
++if eval test \${$as_ac_Lib+y}
++then :
++  printf %s "(cached) " >&6
++else $as_nop
+   ac_check_lib_save_LIBS=$LIBS
+ LIBS="-lI77 testflib_.o -lF77 -lU77 -lI77 -lisam $LIBS"
+-cat >conftest.$ac_ext <<_ACEOF
+-/* confdefs.h.  */
+-_ACEOF
+-cat confdefs.h >>conftest.$ac_ext
+-cat >>conftest.$ac_ext <<_ACEOF
++cat confdefs.h - <<_ACEOF >conftest.$ac_ext
+ /* end confdefs.h.  */
+ 
+ /* Override any GCC internal prototype to avoid an error.
+    Use char because int might match the return type of a GCC
+    builtin and then its argument prototype would still apply.  */
+-#ifdef __cplusplus
+-extern "C"
+-#endif
+ char $THIS_FUNCTION ();
+ int
+-main ()
++main (void)
+ {
+ return $THIS_FUNCTION ();
+   ;
+   return 0;
+ }
+ _ACEOF
+-rm -f conftest.$ac_objext conftest$ac_exeext
+-if { (ac_try="$ac_link"
+-case "(($ac_try" in
+-  *\"* | *\`* | *\\*) ac_try_echo=\$ac_try;;
+-  *) ac_try_echo=$ac_try;;
+-esac
+-eval "echo \"\$as_me:$LINENO: $ac_try_echo\"") >&5
+-  (eval "$ac_link") 2>conftest.er1
+-  ac_status=$?
+-  grep -v '^ *+' conftest.er1 >conftest.err
+-  rm -f conftest.er1
+-  cat conftest.err >&5
+-  echo "$as_me:$LINENO: \$? = $ac_status" >&5
+-  (exit $ac_status); } && {
+-	 test -z "$ac_c_werror_flag" ||
+-	 test ! -s conftest.err
+-       } && test -s conftest$ac_exeext &&
+-       $as_test_x conftest$ac_exeext; then
++if ac_fn_c_try_link "$LINENO"
++then :
+   eval "$as_ac_Lib=yes"
+-else
+-  echo "$as_me: failed program was:" >&5
+-sed 's/^/| /' conftest.$ac_ext >&5
+-
+-	eval "$as_ac_Lib=no"
++else $as_nop
++  eval "$as_ac_Lib=no"
+ fi
+-
+-rm -f core conftest.err conftest.$ac_objext conftest_ipa8_conftest.oo \
+-      conftest$ac_exeext conftest.$ac_ext
++rm -f core conftest.err conftest.$ac_objext conftest.beam \
++    conftest$ac_exeext conftest.$ac_ext
+ LIBS=$ac_check_lib_save_LIBS
+ fi
+-ac_res=`eval echo '${'$as_ac_Lib'}'`
+-	       { echo "$as_me:$LINENO: result: $ac_res" >&5
+-echo "${ECHO_T}$ac_res" >&6; }
+-if test `eval echo '${'$as_ac_Lib'}'` = yes; then
++eval ac_res=\$$as_ac_Lib
++	       { printf "%s\n" "$as_me:${as_lineno-$LINENO}: result: $ac_res" >&5
++printf "%s\n" "$ac_res" >&6; }
++if eval test \"x\$"$as_ac_Lib"\" = x"yes"
++then :
+   F77LIBS="-lF77 -lU77 -lI77 -lisam"
+ fi
+ 
+@@ -8908,9 +9257,9 @@ fi
+ ;;
+ 
+          *)
+-            { echo "$as_me:$LINENO: WARNING: unable to set F77LIBFLAGS.  They must be set as a shell variable or
++            { printf "%s\n" "$as_me:${as_lineno-$LINENO}: WARNING: unable to set F77LIBFLAGS.  They must be set as a shell variable or
+  with a command-line option" >&5
+-echo "$as_me: WARNING: unable to set F77LIBFLAGS.  They must be set as a shell variable or
++printf "%s\n" "$as_me: WARNING: unable to set F77LIBFLAGS.  They must be set as a shell variable or
+  with a command-line option" >&2;}
+          ;;
+ 
+@@ -8951,8 +9300,8 @@ echo "$as_me: WARNING: unable to set F77LIBFLAGS.  They must be set as a shell v
+       casc_cv_f77flags=$F77LIBFLAGS
+ 
+ fi
+-{ echo "$as_me:$LINENO: result: $casc_cv_f77flags" >&5
+-echo "${ECHO_T}$casc_cv_f77flags" >&6; }
++{ printf "%s\n" "$as_me:${as_lineno-$LINENO}: result: $casc_cv_f77flags" >&5
++printf "%s\n" "$casc_cv_f77flags" >&6; }
+ 
+       F77LIBFLAGS=$casc_cv_f77flags
+ 
+@@ -8967,11 +9316,12 @@ echo "${ECHO_T}$casc_cv_f77flags" >&6; }
+       ;;
+    *)
+ 
+-   { echo "$as_me:$LINENO: checking for Fortran libraries" >&5
+-echo $ECHO_N "checking for Fortran libraries... $ECHO_C" >&6; }
+-if test "${casc_cv_f77flags+set}" = set; then
+-  echo $ECHO_N "(cached) $ECHO_C" >&6
+-else
++   { printf "%s\n" "$as_me:${as_lineno-$LINENO}: checking for Fortran libraries" >&5
++printf %s "checking for Fortran libraries... " >&6; }
++if test ${casc_cv_f77flags+y}
++then :
++  printf %s "(cached) " >&6
++else $as_nop
+ 
+       if test -z "$F77LIBFLAGS"; then
+ 
+@@ -9132,7 +9482,7 @@ else
+   fi
+     rm -f conftest.f conftest.o conftest
+ 
+-  FLIBS="$flibs_result"
++  FLIBS="" # We never use FLIBS and it sometimes has quotes it in it, so disable it completely
+ 
+          for casc_flag in $flibs_result; do
+ 
+@@ -9212,73 +9562,48 @@ EOF
+ 
+    # Checks if the LIBRARY from the argument list can be used to link
+    # a C test program with testflib
+-   as_ac_Lib=`echo "ac_cv_lib_$casc_lib_name''_$THIS_FUNCTION" | $as_tr_sh`
+-{ echo "$as_me:$LINENO: checking for $THIS_FUNCTION in -l$casc_lib_name" >&5
+-echo $ECHO_N "checking for $THIS_FUNCTION in -l$casc_lib_name... $ECHO_C" >&6; }
+-if { as_var=$as_ac_Lib; eval "test \"\${$as_var+set}\" = set"; }; then
+-  echo $ECHO_N "(cached) $ECHO_C" >&6
+-else
++   as_ac_Lib=`printf "%s\n" "ac_cv_lib_$casc_lib_name""_$THIS_FUNCTION" | $as_tr_sh`
++{ printf "%s\n" "$as_me:${as_lineno-$LINENO}: checking for $THIS_FUNCTION in -l$casc_lib_name" >&5
++printf %s "checking for $THIS_FUNCTION in -l$casc_lib_name... " >&6; }
++if eval test \${$as_ac_Lib+y}
++then :
++  printf %s "(cached) " >&6
++else $as_nop
+   ac_check_lib_save_LIBS=$LIBS
+ LIBS="-l$casc_lib_name testflib_.o $F77LIBFLAGS $LIBS"
+-cat >conftest.$ac_ext <<_ACEOF
+-/* confdefs.h.  */
+-_ACEOF
+-cat confdefs.h >>conftest.$ac_ext
+-cat >>conftest.$ac_ext <<_ACEOF
++cat confdefs.h - <<_ACEOF >conftest.$ac_ext
+ /* end confdefs.h.  */
+ 
+ /* Override any GCC internal prototype to avoid an error.
+    Use char because int might match the return type of a GCC
+    builtin and then its argument prototype would still apply.  */
+-#ifdef __cplusplus
+-extern "C"
+-#endif
+ char $THIS_FUNCTION ();
+ int
+-main ()
++main (void)
+ {
+ return $THIS_FUNCTION ();
+   ;
+   return 0;
+ }
+ _ACEOF
+-rm -f conftest.$ac_objext conftest$ac_exeext
+-if { (ac_try="$ac_link"
+-case "(($ac_try" in
+-  *\"* | *\`* | *\\*) ac_try_echo=\$ac_try;;
+-  *) ac_try_echo=$ac_try;;
+-esac
+-eval "echo \"\$as_me:$LINENO: $ac_try_echo\"") >&5
+-  (eval "$ac_link") 2>conftest.er1
+-  ac_status=$?
+-  grep -v '^ *+' conftest.er1 >conftest.err
+-  rm -f conftest.er1
+-  cat conftest.err >&5
+-  echo "$as_me:$LINENO: \$? = $ac_status" >&5
+-  (exit $ac_status); } && {
+-	 test -z "$ac_c_werror_flag" ||
+-	 test ! -s conftest.err
+-       } && test -s conftest$ac_exeext &&
+-       $as_test_x conftest$ac_exeext; then
++if ac_fn_c_try_link "$LINENO"
++then :
+   eval "$as_ac_Lib=yes"
+-else
+-  echo "$as_me: failed program was:" >&5
+-sed 's/^/| /' conftest.$ac_ext >&5
+-
+-	eval "$as_ac_Lib=no"
++else $as_nop
++  eval "$as_ac_Lib=no"
+ fi
+-
+-rm -f core conftest.err conftest.$ac_objext conftest_ipa8_conftest.oo \
+-      conftest$ac_exeext conftest.$ac_ext
++rm -f core conftest.err conftest.$ac_objext conftest.beam \
++    conftest$ac_exeext conftest.$ac_ext
+ LIBS=$ac_check_lib_save_LIBS
+ fi
+-ac_res=`eval echo '${'$as_ac_Lib'}'`
+-	       { echo "$as_me:$LINENO: result: $ac_res" >&5
+-echo "${ECHO_T}$ac_res" >&6; }
+-if test `eval echo '${'$as_ac_Lib'}'` = yes; then
++eval ac_res=\$$as_ac_Lib
++	       { printf "%s\n" "$as_me:${as_lineno-$LINENO}: result: $ac_res" >&5
++printf "%s\n" "$ac_res" >&6; }
++if eval test \"x\$"$as_ac_Lib"\" = x"yes"
++then :
+   F77LIBFLAGS="$F77LIBFLAGS $casc_flag"
+                   casc_result=yes
+-else
++else $as_nop
+   F77LIBFLAGS="$F77LIBFLAGS $casc_flag"
+ fi
+ 
+@@ -9346,70 +9671,45 @@ EOF
+ 
+    # Checks if the LIBRARY from the argument list can be used to link
+    # a C test program with testflib
+-   as_ac_Lib=`echo "ac_cv_lib_f2c_$THIS_FUNCTION" | $as_tr_sh`
+-{ echo "$as_me:$LINENO: checking for $THIS_FUNCTION in -lf2c" >&5
+-echo $ECHO_N "checking for $THIS_FUNCTION in -lf2c... $ECHO_C" >&6; }
+-if { as_var=$as_ac_Lib; eval "test \"\${$as_var+set}\" = set"; }; then
+-  echo $ECHO_N "(cached) $ECHO_C" >&6
+-else
++   as_ac_Lib=`printf "%s\n" "ac_cv_lib_f2c_$THIS_FUNCTION" | $as_tr_sh`
++{ printf "%s\n" "$as_me:${as_lineno-$LINENO}: checking for $THIS_FUNCTION in -lf2c" >&5
++printf %s "checking for $THIS_FUNCTION in -lf2c... " >&6; }
++if eval test \${$as_ac_Lib+y}
++then :
++  printf %s "(cached) " >&6
++else $as_nop
+   ac_check_lib_save_LIBS=$LIBS
+ LIBS="-lf2c testflib_.o -L/home/casc/g77/lib -lf2c $LIBS"
+-cat >conftest.$ac_ext <<_ACEOF
+-/* confdefs.h.  */
+-_ACEOF
+-cat confdefs.h >>conftest.$ac_ext
+-cat >>conftest.$ac_ext <<_ACEOF
++cat confdefs.h - <<_ACEOF >conftest.$ac_ext
+ /* end confdefs.h.  */
+ 
+ /* Override any GCC internal prototype to avoid an error.
+    Use char because int might match the return type of a GCC
+    builtin and then its argument prototype would still apply.  */
+-#ifdef __cplusplus
+-extern "C"
+-#endif
+ char $THIS_FUNCTION ();
+ int
+-main ()
++main (void)
+ {
+ return $THIS_FUNCTION ();
+   ;
+   return 0;
+ }
+-_ACEOF
+-rm -f conftest.$ac_objext conftest$ac_exeext
+-if { (ac_try="$ac_link"
+-case "(($ac_try" in
+-  *\"* | *\`* | *\\*) ac_try_echo=\$ac_try;;
+-  *) ac_try_echo=$ac_try;;
+-esac
+-eval "echo \"\$as_me:$LINENO: $ac_try_echo\"") >&5
+-  (eval "$ac_link") 2>conftest.er1
+-  ac_status=$?
+-  grep -v '^ *+' conftest.er1 >conftest.err
+-  rm -f conftest.er1
+-  cat conftest.err >&5
+-  echo "$as_me:$LINENO: \$? = $ac_status" >&5
+-  (exit $ac_status); } && {
+-	 test -z "$ac_c_werror_flag" ||
+-	 test ! -s conftest.err
+-       } && test -s conftest$ac_exeext &&
+-       $as_test_x conftest$ac_exeext; then
++_ACEOF
++if ac_fn_c_try_link "$LINENO"
++then :
+   eval "$as_ac_Lib=yes"
+-else
+-  echo "$as_me: failed program was:" >&5
+-sed 's/^/| /' conftest.$ac_ext >&5
+-
+-	eval "$as_ac_Lib=no"
++else $as_nop
++  eval "$as_ac_Lib=no"
+ fi
+-
+-rm -f core conftest.err conftest.$ac_objext conftest_ipa8_conftest.oo \
+-      conftest$ac_exeext conftest.$ac_ext
++rm -f core conftest.err conftest.$ac_objext conftest.beam \
++    conftest$ac_exeext conftest.$ac_ext
+ LIBS=$ac_check_lib_save_LIBS
+ fi
+-ac_res=`eval echo '${'$as_ac_Lib'}'`
+-	       { echo "$as_me:$LINENO: result: $ac_res" >&5
+-echo "${ECHO_T}$ac_res" >&6; }
+-if test `eval echo '${'$as_ac_Lib'}'` = yes; then
++eval ac_res=\$$as_ac_Lib
++	       { printf "%s\n" "$as_me:${as_lineno-$LINENO}: result: $ac_res" >&5
++printf "%s\n" "$ac_res" >&6; }
++if eval test \"x\$"$as_ac_Lib"\" = x"yes"
++then :
+   F77LIBDIRS="-L/home/casc/g77/lib"
+                                           F77LIBS="-lf2c"
+ 
+@@ -9460,70 +9760,45 @@ EOF
+ 
+    # Checks if the LIBRARY from the argument list can be used to link
+    # a C test program with testflib
+-   as_ac_Lib=`echo "ac_cv_lib_sunmath_$THIS_FUNCTION" | $as_tr_sh`
+-{ echo "$as_me:$LINENO: checking for $THIS_FUNCTION in -lsunmath" >&5
+-echo $ECHO_N "checking for $THIS_FUNCTION in -lsunmath... $ECHO_C" >&6; }
+-if { as_var=$as_ac_Lib; eval "test \"\${$as_var+set}\" = set"; }; then
+-  echo $ECHO_N "(cached) $ECHO_C" >&6
+-else
++   as_ac_Lib=`printf "%s\n" "ac_cv_lib_sunmath_$THIS_FUNCTION" | $as_tr_sh`
++{ printf "%s\n" "$as_me:${as_lineno-$LINENO}: checking for $THIS_FUNCTION in -lsunmath" >&5
++printf %s "checking for $THIS_FUNCTION in -lsunmath... " >&6; }
++if eval test \${$as_ac_Lib+y}
++then :
++  printf %s "(cached) " >&6
++else $as_nop
+   ac_check_lib_save_LIBS=$LIBS
+ LIBS="-lsunmath testflib_.o -L/opt/SUNWspro/SC5.0/lib -lF77 -lsunmath $LIBS"
+-cat >conftest.$ac_ext <<_ACEOF
+-/* confdefs.h.  */
+-_ACEOF
+-cat confdefs.h >>conftest.$ac_ext
+-cat >>conftest.$ac_ext <<_ACEOF
++cat confdefs.h - <<_ACEOF >conftest.$ac_ext
+ /* end confdefs.h.  */
+ 
+ /* Override any GCC internal prototype to avoid an error.
+    Use char because int might match the return type of a GCC
+    builtin and then its argument prototype would still apply.  */
+-#ifdef __cplusplus
+-extern "C"
+-#endif
+ char $THIS_FUNCTION ();
+ int
+-main ()
++main (void)
+ {
+ return $THIS_FUNCTION ();
+   ;
+   return 0;
+ }
+ _ACEOF
+-rm -f conftest.$ac_objext conftest$ac_exeext
+-if { (ac_try="$ac_link"
+-case "(($ac_try" in
+-  *\"* | *\`* | *\\*) ac_try_echo=\$ac_try;;
+-  *) ac_try_echo=$ac_try;;
+-esac
+-eval "echo \"\$as_me:$LINENO: $ac_try_echo\"") >&5
+-  (eval "$ac_link") 2>conftest.er1
+-  ac_status=$?
+-  grep -v '^ *+' conftest.er1 >conftest.err
+-  rm -f conftest.er1
+-  cat conftest.err >&5
+-  echo "$as_me:$LINENO: \$? = $ac_status" >&5
+-  (exit $ac_status); } && {
+-	 test -z "$ac_c_werror_flag" ||
+-	 test ! -s conftest.err
+-       } && test -s conftest$ac_exeext &&
+-       $as_test_x conftest$ac_exeext; then
++if ac_fn_c_try_link "$LINENO"
++then :
+   eval "$as_ac_Lib=yes"
+-else
+-  echo "$as_me: failed program was:" >&5
+-sed 's/^/| /' conftest.$ac_ext >&5
+-
+-	eval "$as_ac_Lib=no"
++else $as_nop
++  eval "$as_ac_Lib=no"
+ fi
+-
+-rm -f core conftest.err conftest.$ac_objext conftest_ipa8_conftest.oo \
+-      conftest$ac_exeext conftest.$ac_ext
++rm -f core conftest.err conftest.$ac_objext conftest.beam \
++    conftest$ac_exeext conftest.$ac_ext
+ LIBS=$ac_check_lib_save_LIBS
+ fi
+-ac_res=`eval echo '${'$as_ac_Lib'}'`
+-	       { echo "$as_me:$LINENO: result: $ac_res" >&5
+-echo "${ECHO_T}$ac_res" >&6; }
+-if test `eval echo '${'$as_ac_Lib'}'` = yes; then
++eval ac_res=\$$as_ac_Lib
++	       { printf "%s\n" "$as_me:${as_lineno-$LINENO}: result: $ac_res" >&5
++printf "%s\n" "$ac_res" >&6; }
++if eval test \"x\$"$as_ac_Lib"\" = x"yes"
++then :
+   F77LIBDIRS="-L/opt/SUNWspro/SC5.0/lib"
+                                    F77LIBS="-lF77 -lsunmath"
+ 
+@@ -9576,70 +9851,45 @@ EOF
+ 
+    # Checks if the LIBRARY from the argument list can be used to link
+    # a C test program with testflib
+-   as_ac_Lib=`echo "ac_cv_lib_for_$THIS_FUNCTION" | $as_tr_sh`
+-{ echo "$as_me:$LINENO: checking for $THIS_FUNCTION in -lfor" >&5
+-echo $ECHO_N "checking for $THIS_FUNCTION in -lfor... $ECHO_C" >&6; }
+-if { as_var=$as_ac_Lib; eval "test \"\${$as_var+set}\" = set"; }; then
+-  echo $ECHO_N "(cached) $ECHO_C" >&6
+-else
++   as_ac_Lib=`printf "%s\n" "ac_cv_lib_for_$THIS_FUNCTION" | $as_tr_sh`
++{ printf "%s\n" "$as_me:${as_lineno-$LINENO}: checking for $THIS_FUNCTION in -lfor" >&5
++printf %s "checking for $THIS_FUNCTION in -lfor... " >&6; }
++if eval test \${$as_ac_Lib+y}
++then :
++  printf %s "(cached) " >&6
++else $as_nop
+   ac_check_lib_save_LIBS=$LIBS
+ LIBS="-lfor testflib_.o  $LIBS"
+-cat >conftest.$ac_ext <<_ACEOF
+-/* confdefs.h.  */
+-_ACEOF
+-cat confdefs.h >>conftest.$ac_ext
+-cat >>conftest.$ac_ext <<_ACEOF
++cat confdefs.h - <<_ACEOF >conftest.$ac_ext
+ /* end confdefs.h.  */
+ 
+ /* Override any GCC internal prototype to avoid an error.
+    Use char because int might match the return type of a GCC
+    builtin and then its argument prototype would still apply.  */
+-#ifdef __cplusplus
+-extern "C"
+-#endif
+ char $THIS_FUNCTION ();
+ int
+-main ()
++main (void)
+ {
+ return $THIS_FUNCTION ();
+   ;
+   return 0;
+ }
+ _ACEOF
+-rm -f conftest.$ac_objext conftest$ac_exeext
+-if { (ac_try="$ac_link"
+-case "(($ac_try" in
+-  *\"* | *\`* | *\\*) ac_try_echo=\$ac_try;;
+-  *) ac_try_echo=$ac_try;;
+-esac
+-eval "echo \"\$as_me:$LINENO: $ac_try_echo\"") >&5
+-  (eval "$ac_link") 2>conftest.er1
+-  ac_status=$?
+-  grep -v '^ *+' conftest.er1 >conftest.err
+-  rm -f conftest.er1
+-  cat conftest.err >&5
+-  echo "$as_me:$LINENO: \$? = $ac_status" >&5
+-  (exit $ac_status); } && {
+-	 test -z "$ac_c_werror_flag" ||
+-	 test ! -s conftest.err
+-       } && test -s conftest$ac_exeext &&
+-       $as_test_x conftest$ac_exeext; then
++if ac_fn_c_try_link "$LINENO"
++then :
+   eval "$as_ac_Lib=yes"
+-else
+-  echo "$as_me: failed program was:" >&5
+-sed 's/^/| /' conftest.$ac_ext >&5
+-
+-	eval "$as_ac_Lib=no"
++else $as_nop
++  eval "$as_ac_Lib=no"
+ fi
+-
+-rm -f core conftest.err conftest.$ac_objext conftest_ipa8_conftest.oo \
+-      conftest$ac_exeext conftest.$ac_ext
++rm -f core conftest.err conftest.$ac_objext conftest.beam \
++    conftest$ac_exeext conftest.$ac_ext
+ LIBS=$ac_check_lib_save_LIBS
+ fi
+-ac_res=`eval echo '${'$as_ac_Lib'}'`
+-	       { echo "$as_me:$LINENO: result: $ac_res" >&5
+-echo "${ECHO_T}$ac_res" >&6; }
+-if test `eval echo '${'$as_ac_Lib'}'` = yes; then
++eval ac_res=\$$as_ac_Lib
++	       { printf "%s\n" "$as_me:${as_lineno-$LINENO}: result: $ac_res" >&5
++printf "%s\n" "$ac_res" >&6; }
++if eval test \"x\$"$as_ac_Lib"\" = x"yes"
++then :
+   F77LIBS="-lfor"
+ fi
+ 
+@@ -9689,70 +9939,45 @@ EOF
+ 
+    # Checks if the LIBRARY from the argument list can be used to link
+    # a C test program with testflib
+-   as_ac_Lib=`echo "ac_cv_lib_xlf90_$THIS_FUNCTION" | $as_tr_sh`
+-{ echo "$as_me:$LINENO: checking for $THIS_FUNCTION in -lxlf90" >&5
+-echo $ECHO_N "checking for $THIS_FUNCTION in -lxlf90... $ECHO_C" >&6; }
+-if { as_var=$as_ac_Lib; eval "test \"\${$as_var+set}\" = set"; }; then
+-  echo $ECHO_N "(cached) $ECHO_C" >&6
+-else
++   as_ac_Lib=`printf "%s\n" "ac_cv_lib_xlf90_$THIS_FUNCTION" | $as_tr_sh`
++{ printf "%s\n" "$as_me:${as_lineno-$LINENO}: checking for $THIS_FUNCTION in -lxlf90" >&5
++printf %s "checking for $THIS_FUNCTION in -lxlf90... " >&6; }
++if eval test \${$as_ac_Lib+y}
++then :
++  printf %s "(cached) " >&6
++else $as_nop
+   ac_check_lib_save_LIBS=$LIBS
+ LIBS="-lxlf90 testflib_.o  $LIBS"
+-cat >conftest.$ac_ext <<_ACEOF
+-/* confdefs.h.  */
+-_ACEOF
+-cat confdefs.h >>conftest.$ac_ext
+-cat >>conftest.$ac_ext <<_ACEOF
++cat confdefs.h - <<_ACEOF >conftest.$ac_ext
+ /* end confdefs.h.  */
+ 
+ /* Override any GCC internal prototype to avoid an error.
+    Use char because int might match the return type of a GCC
+    builtin and then its argument prototype would still apply.  */
+-#ifdef __cplusplus
+-extern "C"
+-#endif
+ char $THIS_FUNCTION ();
+ int
+-main ()
++main (void)
+ {
+ return $THIS_FUNCTION ();
+   ;
+   return 0;
+ }
+ _ACEOF
+-rm -f conftest.$ac_objext conftest$ac_exeext
+-if { (ac_try="$ac_link"
+-case "(($ac_try" in
+-  *\"* | *\`* | *\\*) ac_try_echo=\$ac_try;;
+-  *) ac_try_echo=$ac_try;;
+-esac
+-eval "echo \"\$as_me:$LINENO: $ac_try_echo\"") >&5
+-  (eval "$ac_link") 2>conftest.er1
+-  ac_status=$?
+-  grep -v '^ *+' conftest.er1 >conftest.err
+-  rm -f conftest.er1
+-  cat conftest.err >&5
+-  echo "$as_me:$LINENO: \$? = $ac_status" >&5
+-  (exit $ac_status); } && {
+-	 test -z "$ac_c_werror_flag" ||
+-	 test ! -s conftest.err
+-       } && test -s conftest$ac_exeext &&
+-       $as_test_x conftest$ac_exeext; then
++if ac_fn_c_try_link "$LINENO"
++then :
+   eval "$as_ac_Lib=yes"
+-else
+-  echo "$as_me: failed program was:" >&5
+-sed 's/^/| /' conftest.$ac_ext >&5
+-
+-	eval "$as_ac_Lib=no"
++else $as_nop
++  eval "$as_ac_Lib=no"
+ fi
+-
+-rm -f core conftest.err conftest.$ac_objext conftest_ipa8_conftest.oo \
+-      conftest$ac_exeext conftest.$ac_ext
++rm -f core conftest.err conftest.$ac_objext conftest.beam \
++    conftest$ac_exeext conftest.$ac_ext
+ LIBS=$ac_check_lib_save_LIBS
+ fi
+-ac_res=`eval echo '${'$as_ac_Lib'}'`
+-	       { echo "$as_me:$LINENO: result: $ac_res" >&5
+-echo "${ECHO_T}$ac_res" >&6; }
+-if test `eval echo '${'$as_ac_Lib'}'` = yes; then
++eval ac_res=\$$as_ac_Lib
++	       { printf "%s\n" "$as_me:${as_lineno-$LINENO}: result: $ac_res" >&5
++printf "%s\n" "$ac_res" >&6; }
++if eval test \"x\$"$as_ac_Lib"\" = x"yes"
++then :
+   F77LIBS="-lxlf90"
+ fi
+ 
+@@ -9802,70 +10027,45 @@ EOF
+ 
+    # Checks if the LIBRARY from the argument list can be used to link
+    # a C test program with testflib
+-   as_ac_Lib=`echo "ac_cv_lib_I77_$THIS_FUNCTION" | $as_tr_sh`
+-{ echo "$as_me:$LINENO: checking for $THIS_FUNCTION in -lI77" >&5
+-echo $ECHO_N "checking for $THIS_FUNCTION in -lI77... $ECHO_C" >&6; }
+-if { as_var=$as_ac_Lib; eval "test \"\${$as_var+set}\" = set"; }; then
+-  echo $ECHO_N "(cached) $ECHO_C" >&6
+-else
++   as_ac_Lib=`printf "%s\n" "ac_cv_lib_I77_$THIS_FUNCTION" | $as_tr_sh`
++{ printf "%s\n" "$as_me:${as_lineno-$LINENO}: checking for $THIS_FUNCTION in -lI77" >&5
++printf %s "checking for $THIS_FUNCTION in -lI77... " >&6; }
++if eval test \${$as_ac_Lib+y}
++then :
++  printf %s "(cached) " >&6
++else $as_nop
+   ac_check_lib_save_LIBS=$LIBS
+ LIBS="-lI77 testflib_.o -lF77 -lU77 -lI77 -lisam $LIBS"
+-cat >conftest.$ac_ext <<_ACEOF
+-/* confdefs.h.  */
+-_ACEOF
+-cat confdefs.h >>conftest.$ac_ext
+-cat >>conftest.$ac_ext <<_ACEOF
++cat confdefs.h - <<_ACEOF >conftest.$ac_ext
+ /* end confdefs.h.  */
+ 
+ /* Override any GCC internal prototype to avoid an error.
+    Use char because int might match the return type of a GCC
+    builtin and then its argument prototype would still apply.  */
+-#ifdef __cplusplus
+-extern "C"
+-#endif
+ char $THIS_FUNCTION ();
+ int
+-main ()
++main (void)
+ {
+ return $THIS_FUNCTION ();
+   ;
+   return 0;
+ }
+ _ACEOF
+-rm -f conftest.$ac_objext conftest$ac_exeext
+-if { (ac_try="$ac_link"
+-case "(($ac_try" in
+-  *\"* | *\`* | *\\*) ac_try_echo=\$ac_try;;
+-  *) ac_try_echo=$ac_try;;
+-esac
+-eval "echo \"\$as_me:$LINENO: $ac_try_echo\"") >&5
+-  (eval "$ac_link") 2>conftest.er1
+-  ac_status=$?
+-  grep -v '^ *+' conftest.er1 >conftest.err
+-  rm -f conftest.er1
+-  cat conftest.err >&5
+-  echo "$as_me:$LINENO: \$? = $ac_status" >&5
+-  (exit $ac_status); } && {
+-	 test -z "$ac_c_werror_flag" ||
+-	 test ! -s conftest.err
+-       } && test -s conftest$ac_exeext &&
+-       $as_test_x conftest$ac_exeext; then
++if ac_fn_c_try_link "$LINENO"
++then :
+   eval "$as_ac_Lib=yes"
+-else
+-  echo "$as_me: failed program was:" >&5
+-sed 's/^/| /' conftest.$ac_ext >&5
+-
+-	eval "$as_ac_Lib=no"
++else $as_nop
++  eval "$as_ac_Lib=no"
+ fi
+-
+-rm -f core conftest.err conftest.$ac_objext conftest_ipa8_conftest.oo \
+-      conftest$ac_exeext conftest.$ac_ext
++rm -f core conftest.err conftest.$ac_objext conftest.beam \
++    conftest$ac_exeext conftest.$ac_ext
+ LIBS=$ac_check_lib_save_LIBS
+ fi
+-ac_res=`eval echo '${'$as_ac_Lib'}'`
+-	       { echo "$as_me:$LINENO: result: $ac_res" >&5
+-echo "${ECHO_T}$ac_res" >&6; }
+-if test `eval echo '${'$as_ac_Lib'}'` = yes; then
++eval ac_res=\$$as_ac_Lib
++	       { printf "%s\n" "$as_me:${as_lineno-$LINENO}: result: $ac_res" >&5
++printf "%s\n" "$ac_res" >&6; }
++if eval test \"x\$"$as_ac_Lib"\" = x"yes"
++then :
+   F77LIBS="-lF77 -lU77 -lI77 -lisam"
+ fi
+ 
+@@ -9875,9 +10075,9 @@ fi
+ ;;
+ 
+          *)
+-            { echo "$as_me:$LINENO: WARNING: unable to set F77LIBFLAGS.  They must be set as a shell variable or
++            { printf "%s\n" "$as_me:${as_lineno-$LINENO}: WARNING: unable to set F77LIBFLAGS.  They must be set as a shell variable or
+  with a command-line option" >&5
+-echo "$as_me: WARNING: unable to set F77LIBFLAGS.  They must be set as a shell variable or
++printf "%s\n" "$as_me: WARNING: unable to set F77LIBFLAGS.  They must be set as a shell variable or
+  with a command-line option" >&2;}
+          ;;
+ 
+@@ -9918,8 +10118,8 @@ echo "$as_me: WARNING: unable to set F77LIBFLAGS.  They must be set as a shell v
+       casc_cv_f77flags=$F77LIBFLAGS
+ 
+ fi
+-{ echo "$as_me:$LINENO: result: $casc_cv_f77flags" >&5
+-echo "${ECHO_T}$casc_cv_f77flags" >&6; }
++{ printf "%s\n" "$as_me:${as_lineno-$LINENO}: result: $casc_cv_f77flags" >&5
++printf "%s\n" "$casc_cv_f77flags" >&6; }
+ 
+       F77LIBFLAGS=$casc_cv_f77flags
+ 
+@@ -9939,7 +10139,7 @@ for btng_log_vars_index in $btng_log_vars ; do
+   else
+     btng_log_vars_value="unset";
+   fi
+-  echo "configure:9942:" "after appending F77LIBFLAGS to LIB_NAME: $btng_log_vars_index is $btng_log_vars_value" >&5;
++  echo "configure:10142:" "after appending F77LIBFLAGS to LIB_NAME: $btng_log_vars_index is $btng_log_vars_value" >&5;
+ done
+ 
+ 
+@@ -9949,15 +10149,16 @@ ac_compile='$F77 -c $FFLAGS conftest.$ac_ext >&5'
+ ac_link='$F77 -o conftest$ac_exeext $FFLAGS $LDFLAGS conftest.$ac_ext $LIBS >&5'
+ ac_compiler_gnu=$ac_cv_f77_compiler_gnu
+ if test -n "$ac_tool_prefix"; then
+-  for ac_prog in g77 xlf f77 frt pgf77 cf77 fort77 fl32 af77 xlf90 f90 pgf90 pghpf epcf90 gfortran g95 xlf95 f95 fort ifort ifc efc pgf95 lf95 ftn
++  for ac_prog in g77 xlf f77 frt pgf77 cf77 fort77 fl32 af77 xlf90 f90 pgf90 pghpf epcf90 gfortran g95 xlf95 f95 fort ifort ifc efc pgfortran pgf95 lf95 ftn nagfor
+   do
+     # Extract the first word of "$ac_tool_prefix$ac_prog", so it can be a program name with args.
+ set dummy $ac_tool_prefix$ac_prog; ac_word=$2
+-{ echo "$as_me:$LINENO: checking for $ac_word" >&5
+-echo $ECHO_N "checking for $ac_word... $ECHO_C" >&6; }
+-if test "${ac_cv_prog_F77+set}" = set; then
+-  echo $ECHO_N "(cached) $ECHO_C" >&6
+-else
++{ printf "%s\n" "$as_me:${as_lineno-$LINENO}: checking for $ac_word" >&5
++printf %s "checking for $ac_word... " >&6; }
++if test ${ac_cv_prog_F77+y}
++then :
++  printf %s "(cached) " >&6
++else $as_nop
+   if test -n "$F77"; then
+   ac_cv_prog_F77="$F77" # Let the user override the test.
+ else
+@@ -9965,26 +10166,30 @@ as_save_IFS=$IFS; IFS=$PATH_SEPARATOR
+ for as_dir in $PATH
+ do
+   IFS=$as_save_IFS
+-  test -z "$as_dir" && as_dir=.
+-  for ac_exec_ext in '' $ac_executable_extensions; do
+-  if { test -f "$as_dir/$ac_word$ac_exec_ext" && $as_test_x "$as_dir/$ac_word$ac_exec_ext"; }; then
++  case $as_dir in #(((
++    '') as_dir=./ ;;
++    */) ;;
++    *) as_dir=$as_dir/ ;;
++  esac
++    for ac_exec_ext in '' $ac_executable_extensions; do
++  if as_fn_executable_p "$as_dir$ac_word$ac_exec_ext"; then
+     ac_cv_prog_F77="$ac_tool_prefix$ac_prog"
+-    echo "$as_me:$LINENO: found $as_dir/$ac_word$ac_exec_ext" >&5
++    printf "%s\n" "$as_me:${as_lineno-$LINENO}: found $as_dir$ac_word$ac_exec_ext" >&5
+     break 2
+   fi
+ done
+-done
++  done
+ IFS=$as_save_IFS
+ 
+ fi
+ fi
+ F77=$ac_cv_prog_F77
+ if test -n "$F77"; then
+-  { echo "$as_me:$LINENO: result: $F77" >&5
+-echo "${ECHO_T}$F77" >&6; }
++  { printf "%s\n" "$as_me:${as_lineno-$LINENO}: result: $F77" >&5
++printf "%s\n" "$F77" >&6; }
+ else
+-  { echo "$as_me:$LINENO: result: no" >&5
+-echo "${ECHO_T}no" >&6; }
++  { printf "%s\n" "$as_me:${as_lineno-$LINENO}: result: no" >&5
++printf "%s\n" "no" >&6; }
+ fi
+ 
+ 
+@@ -9993,15 +10198,16 @@ fi
+ fi
+ if test -z "$F77"; then
+   ac_ct_F77=$F77
+-  for ac_prog in g77 xlf f77 frt pgf77 cf77 fort77 fl32 af77 xlf90 f90 pgf90 pghpf epcf90 gfortran g95 xlf95 f95 fort ifort ifc efc pgf95 lf95 ftn
++  for ac_prog in g77 xlf f77 frt pgf77 cf77 fort77 fl32 af77 xlf90 f90 pgf90 pghpf epcf90 gfortran g95 xlf95 f95 fort ifort ifc efc pgfortran pgf95 lf95 ftn nagfor
+ do
+   # Extract the first word of "$ac_prog", so it can be a program name with args.
+ set dummy $ac_prog; ac_word=$2
+-{ echo "$as_me:$LINENO: checking for $ac_word" >&5
+-echo $ECHO_N "checking for $ac_word... $ECHO_C" >&6; }
+-if test "${ac_cv_prog_ac_ct_F77+set}" = set; then
+-  echo $ECHO_N "(cached) $ECHO_C" >&6
+-else
++{ printf "%s\n" "$as_me:${as_lineno-$LINENO}: checking for $ac_word" >&5
++printf %s "checking for $ac_word... " >&6; }
++if test ${ac_cv_prog_ac_ct_F77+y}
++then :
++  printf %s "(cached) " >&6
++else $as_nop
+   if test -n "$ac_ct_F77"; then
+   ac_cv_prog_ac_ct_F77="$ac_ct_F77" # Let the user override the test.
+ else
+@@ -10009,26 +10215,30 @@ as_save_IFS=$IFS; IFS=$PATH_SEPARATOR
+ for as_dir in $PATH
+ do
+   IFS=$as_save_IFS
+-  test -z "$as_dir" && as_dir=.
+-  for ac_exec_ext in '' $ac_executable_extensions; do
+-  if { test -f "$as_dir/$ac_word$ac_exec_ext" && $as_test_x "$as_dir/$ac_word$ac_exec_ext"; }; then
++  case $as_dir in #(((
++    '') as_dir=./ ;;
++    */) ;;
++    *) as_dir=$as_dir/ ;;
++  esac
++    for ac_exec_ext in '' $ac_executable_extensions; do
++  if as_fn_executable_p "$as_dir$ac_word$ac_exec_ext"; then
+     ac_cv_prog_ac_ct_F77="$ac_prog"
+-    echo "$as_me:$LINENO: found $as_dir/$ac_word$ac_exec_ext" >&5
++    printf "%s\n" "$as_me:${as_lineno-$LINENO}: found $as_dir$ac_word$ac_exec_ext" >&5
+     break 2
+   fi
+ done
+-done
++  done
+ IFS=$as_save_IFS
+ 
+ fi
+ fi
+ ac_ct_F77=$ac_cv_prog_ac_ct_F77
+ if test -n "$ac_ct_F77"; then
+-  { echo "$as_me:$LINENO: result: $ac_ct_F77" >&5
+-echo "${ECHO_T}$ac_ct_F77" >&6; }
++  { printf "%s\n" "$as_me:${as_lineno-$LINENO}: result: $ac_ct_F77" >&5
++printf "%s\n" "$ac_ct_F77" >&6; }
+ else
+-  { echo "$as_me:$LINENO: result: no" >&5
+-echo "${ECHO_T}no" >&6; }
++  { printf "%s\n" "$as_me:${as_lineno-$LINENO}: result: no" >&5
++printf "%s\n" "no" >&6; }
+ fi
+ 
+ 
+@@ -10040,12 +10250,8 @@ done
+   else
+     case $cross_compiling:$ac_tool_warned in
+ yes:)
+-{ echo "$as_me:$LINENO: WARNING: In the future, Autoconf will not detect cross-tools
+-whose name does not start with the host triplet.  If you think this
+-configuration is useful to you, please write to autoconf@gnu.org." >&5
+-echo "$as_me: WARNING: In the future, Autoconf will not detect cross-tools
+-whose name does not start with the host triplet.  If you think this
+-configuration is useful to you, please write to autoconf@gnu.org." >&2;}
++{ printf "%s\n" "$as_me:${as_lineno-$LINENO}: WARNING: using cross tools not prefixed with host triplet" >&5
++printf "%s\n" "$as_me: WARNING: using cross tools not prefixed with host triplet" >&2;}
+ ac_tool_warned=yes ;;
+ esac
+     F77=$ac_ct_F77
+@@ -10054,50 +10260,42 @@ fi
+ 
+ 
+ # Provide some information about the compiler.
+-echo "$as_me:$LINENO: checking for Fortran 77 compiler version" >&5
+-ac_compiler=`set X $ac_compile; echo $2`
+-{ (ac_try="$ac_compiler --version >&5"
+-case "(($ac_try" in
+-  *\"* | *\`* | *\\*) ac_try_echo=\$ac_try;;
+-  *) ac_try_echo=$ac_try;;
+-esac
+-eval "echo \"\$as_me:$LINENO: $ac_try_echo\"") >&5
+-  (eval "$ac_compiler --version >&5") 2>&5
+-  ac_status=$?
+-  echo "$as_me:$LINENO: \$? = $ac_status" >&5
+-  (exit $ac_status); }
+-{ (ac_try="$ac_compiler -v >&5"
+-case "(($ac_try" in
+-  *\"* | *\`* | *\\*) ac_try_echo=\$ac_try;;
+-  *) ac_try_echo=$ac_try;;
+-esac
+-eval "echo \"\$as_me:$LINENO: $ac_try_echo\"") >&5
+-  (eval "$ac_compiler -v >&5") 2>&5
+-  ac_status=$?
+-  echo "$as_me:$LINENO: \$? = $ac_status" >&5
+-  (exit $ac_status); }
+-{ (ac_try="$ac_compiler -V >&5"
++printf "%s\n" "$as_me:${as_lineno-$LINENO}: checking for Fortran 77 compiler version" >&5
++set X $ac_compile
++ac_compiler=$2
++for ac_option in --version -v -V -qversion; do
++  { { ac_try="$ac_compiler $ac_option >&5"
+ case "(($ac_try" in
+   *\"* | *\`* | *\\*) ac_try_echo=\$ac_try;;
+   *) ac_try_echo=$ac_try;;
+ esac
+-eval "echo \"\$as_me:$LINENO: $ac_try_echo\"") >&5
+-  (eval "$ac_compiler -V >&5") 2>&5
++eval ac_try_echo="\"\$as_me:${as_lineno-$LINENO}: $ac_try_echo\""
++printf "%s\n" "$ac_try_echo"; } >&5
++  (eval "$ac_compiler $ac_option >&5") 2>conftest.err
+   ac_status=$?
+-  echo "$as_me:$LINENO: \$? = $ac_status" >&5
+-  (exit $ac_status); }
++  if test -s conftest.err; then
++    sed '10a\
++... rest of stderr output deleted ...
++         10q' conftest.err >conftest.er1
++    cat conftest.er1 >&5
++  fi
++  rm -f conftest.er1 conftest.err
++  printf "%s\n" "$as_me:${as_lineno-$LINENO}: \$? = $ac_status" >&5
++  test $ac_status = 0; }
++done
+ rm -f a.out
+ 
+ # If we don't use `.F' as extension, the preprocessor is not run on the
+ # input file.  (Note that this only needs to work for GNU compilers.)
+ ac_save_ext=$ac_ext
+ ac_ext=F
+-{ echo "$as_me:$LINENO: checking whether we are using the GNU Fortran 77 compiler" >&5
+-echo $ECHO_N "checking whether we are using the GNU Fortran 77 compiler... $ECHO_C" >&6; }
+-if test "${ac_cv_f77_compiler_gnu+set}" = set; then
+-  echo $ECHO_N "(cached) $ECHO_C" >&6
+-else
+-  cat >conftest.$ac_ext <<_ACEOF
++{ printf "%s\n" "$as_me:${as_lineno-$LINENO}: checking whether the compiler supports GNU Fortran 77" >&5
++printf %s "checking whether the compiler supports GNU Fortran 77... " >&6; }
++if test ${ac_cv_f77_compiler_gnu+y}
++then :
++  printf %s "(cached) " >&6
++else $as_nop
++  cat > conftest.$ac_ext <<_ACEOF
+       program main
+ #ifndef __GNUC__
+        choke me
+@@ -10105,83 +10303,48 @@ else
+ 
+       end
+ _ACEOF
+-rm -f conftest.$ac_objext
+-if { (ac_try="$ac_compile"
+-case "(($ac_try" in
+-  *\"* | *\`* | *\\*) ac_try_echo=\$ac_try;;
+-  *) ac_try_echo=$ac_try;;
+-esac
+-eval "echo \"\$as_me:$LINENO: $ac_try_echo\"") >&5
+-  (eval "$ac_compile") 2>conftest.er1
+-  ac_status=$?
+-  grep -v '^ *+' conftest.er1 >conftest.err
+-  rm -f conftest.er1
+-  cat conftest.err >&5
+-  echo "$as_me:$LINENO: \$? = $ac_status" >&5
+-  (exit $ac_status); } && {
+-	 test -z "$ac_f77_werror_flag" ||
+-	 test ! -s conftest.err
+-       } && test -s conftest.$ac_objext; then
++if ac_fn_f77_try_compile "$LINENO"
++then :
+   ac_compiler_gnu=yes
+-else
+-  echo "$as_me: failed program was:" >&5
+-sed 's/^/| /' conftest.$ac_ext >&5
+-
+-	ac_compiler_gnu=no
++else $as_nop
++  ac_compiler_gnu=no
+ fi
+-
+-rm -f core conftest.err conftest.$ac_objext conftest.$ac_ext
++rm -f core conftest.err conftest.$ac_objext conftest.beam conftest.$ac_ext
+ ac_cv_f77_compiler_gnu=$ac_compiler_gnu
+ 
+ fi
+-{ echo "$as_me:$LINENO: result: $ac_cv_f77_compiler_gnu" >&5
+-echo "${ECHO_T}$ac_cv_f77_compiler_gnu" >&6; }
++{ printf "%s\n" "$as_me:${as_lineno-$LINENO}: result: $ac_cv_f77_compiler_gnu" >&5
++printf "%s\n" "$ac_cv_f77_compiler_gnu" >&6; }
++ac_compiler_gnu=$ac_cv_f77_compiler_gnu
++
+ ac_ext=$ac_save_ext
+-ac_test_FFLAGS=${FFLAGS+set}
++ac_test_FFLAGS=${FFLAGS+y}
+ ac_save_FFLAGS=$FFLAGS
+ FFLAGS=
+-{ echo "$as_me:$LINENO: checking whether $F77 accepts -g" >&5
+-echo $ECHO_N "checking whether $F77 accepts -g... $ECHO_C" >&6; }
+-if test "${ac_cv_prog_f77_g+set}" = set; then
+-  echo $ECHO_N "(cached) $ECHO_C" >&6
+-else
++{ printf "%s\n" "$as_me:${as_lineno-$LINENO}: checking whether $F77 accepts -g" >&5
++printf %s "checking whether $F77 accepts -g... " >&6; }
++if test ${ac_cv_prog_f77_g+y}
++then :
++  printf %s "(cached) " >&6
++else $as_nop
+   FFLAGS=-g
+-cat >conftest.$ac_ext <<_ACEOF
++cat > conftest.$ac_ext <<_ACEOF
+       program main
+ 
+       end
+ _ACEOF
+-rm -f conftest.$ac_objext
+-if { (ac_try="$ac_compile"
+-case "(($ac_try" in
+-  *\"* | *\`* | *\\*) ac_try_echo=\$ac_try;;
+-  *) ac_try_echo=$ac_try;;
+-esac
+-eval "echo \"\$as_me:$LINENO: $ac_try_echo\"") >&5
+-  (eval "$ac_compile") 2>conftest.er1
+-  ac_status=$?
+-  grep -v '^ *+' conftest.er1 >conftest.err
+-  rm -f conftest.er1
+-  cat conftest.err >&5
+-  echo "$as_me:$LINENO: \$? = $ac_status" >&5
+-  (exit $ac_status); } && {
+-	 test -z "$ac_f77_werror_flag" ||
+-	 test ! -s conftest.err
+-       } && test -s conftest.$ac_objext; then
++if ac_fn_f77_try_compile "$LINENO"
++then :
+   ac_cv_prog_f77_g=yes
+-else
+-  echo "$as_me: failed program was:" >&5
+-sed 's/^/| /' conftest.$ac_ext >&5
+-
+-	ac_cv_prog_f77_g=no
++else $as_nop
++  ac_cv_prog_f77_g=no
+ fi
+-
+-rm -f core conftest.err conftest.$ac_objext conftest.$ac_ext
++rm -f core conftest.err conftest.$ac_objext conftest.beam conftest.$ac_ext
+ 
+ fi
+-{ echo "$as_me:$LINENO: result: $ac_cv_prog_f77_g" >&5
+-echo "${ECHO_T}$ac_cv_prog_f77_g" >&6; }
+-if test "$ac_test_FFLAGS" = set; then
++{ printf "%s\n" "$as_me:${as_lineno-$LINENO}: result: $ac_cv_prog_f77_g" >&5
++printf "%s\n" "$ac_cv_prog_f77_g" >&6; }
++if test $ac_test_FFLAGS; then
+   FFLAGS=$ac_save_FFLAGS
+ elif test $ac_cv_prog_f77_g = yes; then
+   if test "x$ac_cv_f77_compiler_gnu" = xyes; then
+@@ -10197,7 +10360,11 @@ else
+   fi
+ fi
+ 
+-G77=`test $ac_compiler_gnu = yes && echo yes`
++if test $ac_compiler_gnu = yes; then
++  G77=yes
++else
++  G77=
++fi
+ ac_ext=c
+ ac_cpp='$CPP $CPPFLAGS'
+ ac_compile='$CC -c $CFLAGS $CPPFLAGS conftest.$ac_ext >&5'
+@@ -10209,37 +10376,23 @@ ac_ext=f
+ ac_compile='$F77 -c $FFLAGS conftest.$ac_ext >&5'
+ ac_link='$F77 -o conftest$ac_exeext $FFLAGS $LDFLAGS conftest.$ac_ext $LIBS >&5'
+ ac_compiler_gnu=$ac_cv_f77_compiler_gnu
+-{ echo "$as_me:$LINENO: checking how to get verbose linking output from $F77" >&5
+-echo $ECHO_N "checking how to get verbose linking output from $F77... $ECHO_C" >&6; }
+-if test "${ac_cv_prog_f77_v+set}" = set; then
+-  echo $ECHO_N "(cached) $ECHO_C" >&6
+-else
+-  cat >conftest.$ac_ext <<_ACEOF
++{ printf "%s\n" "$as_me:${as_lineno-$LINENO}: checking how to get verbose linking output from $F77" >&5
++printf %s "checking how to get verbose linking output from $F77... " >&6; }
++if test ${ac_cv_prog_f77_v+y}
++then :
++  printf %s "(cached) " >&6
++else $as_nop
++  cat > conftest.$ac_ext <<_ACEOF
+       program main
+ 
+       end
+ _ACEOF
+-rm -f conftest.$ac_objext
+-if { (ac_try="$ac_compile"
+-case "(($ac_try" in
+-  *\"* | *\`* | *\\*) ac_try_echo=\$ac_try;;
+-  *) ac_try_echo=$ac_try;;
+-esac
+-eval "echo \"\$as_me:$LINENO: $ac_try_echo\"") >&5
+-  (eval "$ac_compile") 2>conftest.er1
+-  ac_status=$?
+-  grep -v '^ *+' conftest.er1 >conftest.err
+-  rm -f conftest.er1
+-  cat conftest.err >&5
+-  echo "$as_me:$LINENO: \$? = $ac_status" >&5
+-  (exit $ac_status); } && {
+-	 test -z "$ac_f77_werror_flag" ||
+-	 test ! -s conftest.err
+-       } && test -s conftest.$ac_objext; then
++if ac_fn_f77_try_compile "$LINENO"
++then :
+   ac_cv_prog_f77_v=
+ # Try some options frequently used verbose output
+ for ac_verb in -v -verbose --verbose -V -\#\#\#; do
+-  cat >conftest.$ac_ext <<_ACEOF
++  cat > conftest.$ac_ext <<_ACEOF
+       program main
+ 
+       end
+@@ -10253,27 +10406,38 @@ ac_save_FFLAGS=$FFLAGS
+ FFLAGS="$FFLAGS $ac_verb"
+ eval "set x $ac_link"
+ shift
+-echo "$as_me:$LINENO: $*" >&5
+-ac_f77_v_output=`eval $ac_link 5>&1 2>&1 | grep -v 'Driving:'`
+-echo "$ac_f77_v_output" >&5
++printf "%s\n" "$as_me:${as_lineno-$LINENO}: $*" >&5
++# gfortran 4.3 outputs lines setting COLLECT_GCC_OPTIONS, COMPILER_PATH,
++# LIBRARY_PATH; skip all such settings.
++ac_f77_v_output=`eval $ac_link 5>&1 2>&1 |
++  sed '/^Driving:/d; /^Configured with:/d;
++      '"/^[_$as_cr_Letters][_$as_cr_alnum]*=/d"`
++printf "%s\n" "$ac_f77_v_output" >&5
+ FFLAGS=$ac_save_FFLAGS
+ 
+-rm -f conftest*
++rm -rf conftest*
+ 
+ # On HP/UX there is a line like: "LPATH is: /foo:/bar:/baz" where
+ # /foo, /bar, and /baz are search directories for the Fortran linker.
+ # Here, we change these into -L/foo -L/bar -L/baz (and put it first):
+ ac_f77_v_output="`echo $ac_f77_v_output |
+ 	grep 'LPATH is:' |
+-	sed 's,.*LPATH is\(: *[^ ]*\).*,\1,;s,: */, -L/,g'` $ac_f77_v_output"
++	sed 's|.*LPATH is\(: *[^ ]*\).*|\1|;s|: */| -L/|g'` $ac_f77_v_output"
+ 
+ # FIXME: we keep getting bitten by quoted arguments; a more general fix
+ #        that detects unbalanced quotes in FLIBS should be implemented
+ #        and (ugh) tested at some point.
+ case $ac_f77_v_output in
+-  # If we are using xlf then replace all the commas with spaces.
++  # With xlf replace commas with spaces,
++  # and remove "-link" and closing parenthesis.
+   *xlfentry*)
+-    ac_f77_v_output=`echo $ac_f77_v_output | sed 's/,/ /g'` ;;
++    ac_f77_v_output=`echo $ac_f77_v_output |
++      sed '
++        s/,/ /g
++        s/ -link / /g
++        s/) *$//
++      '
++    ` ;;
+ 
+   # With Intel ifc, ignore the quoted -mGLOB_options_string stuff (quoted
+   # $LIBS confuse us, and the libraries appear later in the output anyway).
+@@ -10285,9 +10449,19 @@ case $ac_f77_v_output in
+   # Doubly-quoted arguments were reported for "PGF90/x86 Linux/x86 5.0-2".
+   *-cmdline\ * | *-ignore\ * | *-def\ *)
+     ac_f77_v_output=`echo $ac_f77_v_output | sed "\
+-        s/-cmdline  *'[^']*'/ /g; s/-cmdline  *\"[^\"]*\"/ /g
+-        s/-ignore  *'[^']*'/ /g; s/-ignore  *\"[^\"]*\"/ /g
+-        s/-def  *'[^']*'/ /g; s/-def  *\"[^\"]*\"/ /g"` ;;
++	s/-cmdline  *'[^']*'/ /g; s/-cmdline  *\"[^\"]*\"/ /g
++	s/-ignore  *'[^']*'/ /g; s/-ignore  *\"[^\"]*\"/ /g
++	s/-def  *'[^']*'/ /g; s/-def  *\"[^\"]*\"/ /g"` ;;
++
++  # If we are using fort77 (the f2c wrapper) then filter output and delete quotes.
++  *fort77*f2c*gcc*)
++    ac_f77_v_output=`echo "$ac_f77_v_output" | sed -n '
++        /:[	 ]\+Running[	 ]\{1,\}"gcc"/{
++          /"-c"/d
++          /[.]c"*/d
++          s/^.*"gcc"/"gcc"/
++          s/"//gp
++        }'` ;;
+ 
+   # If we are using Cray Fortran then delete quotes.
+   *cft90*)
+@@ -10298,39 +10472,36 @@ esac
+   # look for -l* and *.a constructs in the output
+   for ac_arg in $ac_f77_v_output; do
+      case $ac_arg in
+-        [\\/]*.a | ?:[\\/]*.a | -[lLRu]*)
+-          ac_cv_prog_f77_v=$ac_verb
+-          break 2 ;;
++	[\\/]*.a | ?:[\\/]*.a | -[lLRu]*)
++	  ac_cv_prog_f77_v=$ac_verb
++	  break 2 ;;
+      esac
+   done
+ done
+ if test -z "$ac_cv_prog_f77_v"; then
+-   { echo "$as_me:$LINENO: WARNING: cannot determine how to obtain linking information from $F77" >&5
+-echo "$as_me: WARNING: cannot determine how to obtain linking information from $F77" >&2;}
++   { printf "%s\n" "$as_me:${as_lineno-$LINENO}: WARNING: cannot determine how to obtain linking information from $F77" >&5
++printf "%s\n" "$as_me: WARNING: cannot determine how to obtain linking information from $F77" >&2;}
+ fi
+-else
+-  echo "$as_me: failed program was:" >&5
+-sed 's/^/| /' conftest.$ac_ext >&5
+-
+-	{ echo "$as_me:$LINENO: WARNING: compilation failed" >&5
+-echo "$as_me: WARNING: compilation failed" >&2;}
++else $as_nop
++  { printf "%s\n" "$as_me:${as_lineno-$LINENO}: WARNING: compilation failed" >&5
++printf "%s\n" "$as_me: WARNING: compilation failed" >&2;}
+ fi
+-
+-rm -f core conftest.err conftest.$ac_objext conftest.$ac_ext
++rm -f core conftest.err conftest.$ac_objext conftest.beam conftest.$ac_ext
+ 
+ fi
+-{ echo "$as_me:$LINENO: result: $ac_cv_prog_f77_v" >&5
+-echo "${ECHO_T}$ac_cv_prog_f77_v" >&6; }
+-{ echo "$as_me:$LINENO: checking for Fortran 77 libraries of $F77" >&5
+-echo $ECHO_N "checking for Fortran 77 libraries of $F77... $ECHO_C" >&6; }
+-if test "${ac_cv_f77_libs+set}" = set; then
+-  echo $ECHO_N "(cached) $ECHO_C" >&6
+-else
++{ printf "%s\n" "$as_me:${as_lineno-$LINENO}: result: $ac_cv_prog_f77_v" >&5
++printf "%s\n" "$ac_cv_prog_f77_v" >&6; }
++{ printf "%s\n" "$as_me:${as_lineno-$LINENO}: checking for Fortran 77 libraries of $F77" >&5
++printf %s "checking for Fortran 77 libraries of $F77... " >&6; }
++if test ${ac_cv_f77_libs+y}
++then :
++  printf %s "(cached) " >&6
++else $as_nop
+   if test "x$FLIBS" != "x"; then
+   ac_cv_f77_libs="$FLIBS" # Let the user override the test.
+ else
+ 
+-cat >conftest.$ac_ext <<_ACEOF
++cat > conftest.$ac_ext <<_ACEOF
+       program main
+ 
+       end
+@@ -10344,27 +10515,38 @@ ac_save_FFLAGS=$FFLAGS
+ FFLAGS="$FFLAGS $ac_cv_prog_f77_v"
+ eval "set x $ac_link"
+ shift
+-echo "$as_me:$LINENO: $*" >&5
+-ac_f77_v_output=`eval $ac_link 5>&1 2>&1 | grep -v 'Driving:'`
+-echo "$ac_f77_v_output" >&5
++printf "%s\n" "$as_me:${as_lineno-$LINENO}: $*" >&5
++# gfortran 4.3 outputs lines setting COLLECT_GCC_OPTIONS, COMPILER_PATH,
++# LIBRARY_PATH; skip all such settings.
++ac_f77_v_output=`eval $ac_link 5>&1 2>&1 |
++  sed '/^Driving:/d; /^Configured with:/d;
++      '"/^[_$as_cr_Letters][_$as_cr_alnum]*=/d"`
++printf "%s\n" "$ac_f77_v_output" >&5
+ FFLAGS=$ac_save_FFLAGS
+ 
+-rm -f conftest*
++rm -rf conftest*
+ 
+ # On HP/UX there is a line like: "LPATH is: /foo:/bar:/baz" where
+ # /foo, /bar, and /baz are search directories for the Fortran linker.
+ # Here, we change these into -L/foo -L/bar -L/baz (and put it first):
+ ac_f77_v_output="`echo $ac_f77_v_output |
+ 	grep 'LPATH is:' |
+-	sed 's,.*LPATH is\(: *[^ ]*\).*,\1,;s,: */, -L/,g'` $ac_f77_v_output"
++	sed 's|.*LPATH is\(: *[^ ]*\).*|\1|;s|: */| -L/|g'` $ac_f77_v_output"
+ 
+ # FIXME: we keep getting bitten by quoted arguments; a more general fix
+ #        that detects unbalanced quotes in FLIBS should be implemented
+ #        and (ugh) tested at some point.
+ case $ac_f77_v_output in
+-  # If we are using xlf then replace all the commas with spaces.
++  # With xlf replace commas with spaces,
++  # and remove "-link" and closing parenthesis.
+   *xlfentry*)
+-    ac_f77_v_output=`echo $ac_f77_v_output | sed 's/,/ /g'` ;;
++    ac_f77_v_output=`echo $ac_f77_v_output |
++      sed '
++        s/,/ /g
++        s/ -link / /g
++        s/) *$//
++      '
++    ` ;;
+ 
+   # With Intel ifc, ignore the quoted -mGLOB_options_string stuff (quoted
+   # $LIBS confuse us, and the libraries appear later in the output anyway).
+@@ -10376,9 +10558,19 @@ case $ac_f77_v_output in
+   # Doubly-quoted arguments were reported for "PGF90/x86 Linux/x86 5.0-2".
+   *-cmdline\ * | *-ignore\ * | *-def\ *)
+     ac_f77_v_output=`echo $ac_f77_v_output | sed "\
+-        s/-cmdline  *'[^']*'/ /g; s/-cmdline  *\"[^\"]*\"/ /g
+-        s/-ignore  *'[^']*'/ /g; s/-ignore  *\"[^\"]*\"/ /g
+-        s/-def  *'[^']*'/ /g; s/-def  *\"[^\"]*\"/ /g"` ;;
++	s/-cmdline  *'[^']*'/ /g; s/-cmdline  *\"[^\"]*\"/ /g
++	s/-ignore  *'[^']*'/ /g; s/-ignore  *\"[^\"]*\"/ /g
++	s/-def  *'[^']*'/ /g; s/-def  *\"[^\"]*\"/ /g"` ;;
++
++  # If we are using fort77 (the f2c wrapper) then filter output and delete quotes.
++  *fort77*f2c*gcc*)
++    ac_f77_v_output=`echo "$ac_f77_v_output" | sed -n '
++        /:[	 ]\+Running[	 ]\{1,\}"gcc"/{
++          /"-c"/d
++          /[.]c"*/d
++          s/^.*"gcc"/"gcc"/
++          s/"//gp
++        }'` ;;
+ 
+   # If we are using Cray Fortran then delete quotes.
+   *cft90*)
+@@ -10397,8 +10589,8 @@ while test $# != 1; do
+   shift
+   ac_arg=$1
+   case $ac_arg in
+-        [\\/]*.a | ?:[\\/]*.a)
+-            ac_exists=false
++	[\\/]*.a | ?:[\\/]*.a)
++	    ac_exists=false
+   for ac_i in $ac_cv_f77_libs; do
+     if test x"$ac_arg" = x"$ac_i"; then
+       ac_exists=true
+@@ -10406,15 +10598,15 @@ while test $# != 1; do
+     fi
+   done
+ 
+-  if test x"$ac_exists" = xtrue; then
+-  :
+-else
++  if test x"$ac_exists" = xtrue
++then :
++
++else $as_nop
+   ac_cv_f77_libs="$ac_cv_f77_libs $ac_arg"
+ fi
+-
+-          ;;
+-        -bI:*)
+-            ac_exists=false
++	  ;;
++	-bI:*)
++	    ac_exists=false
+   for ac_i in $ac_cv_f77_libs; do
+     if test x"$ac_arg" = x"$ac_i"; then
+       ac_exists=true
+@@ -10422,9 +10614,10 @@ fi
+     fi
+   done
+ 
+-  if test x"$ac_exists" = xtrue; then
+-  :
+-else
++  if test x"$ac_exists" = xtrue
++then :
++
++else $as_nop
+   if test "$ac_compiler_gnu" = yes; then
+   for ac_link_opt in $ac_arg; do
+     ac_cv_f77_libs="$ac_cv_f77_libs -Xlinker $ac_link_opt"
+@@ -10433,18 +10626,37 @@ else
+   ac_cv_f77_libs="$ac_cv_f77_libs $ac_arg"
+ fi
+ fi
++	  ;;
++	  # Ignore these flags.
++	-lang* | -lcrt*.o | -lc | -lgcc* | -lSystem | -libmil | -little \
++	  |-LANG:=* | -LIST:* | -LNO:* | -link)
++	  ;;
++	-lkernel32)
++	  # Ignore this library only on Windows-like systems.
++	  case $host_os in
++	  cygwin* | msys* ) ;;
++	  *)
++	    ac_exists=false
++  for ac_i in $ac_cv_f77_libs; do
++    if test x"$ac_arg" = x"$ac_i"; then
++      ac_exists=true
++      break
++    fi
++  done
++
++  if test x"$ac_exists" = xtrue
++then :
+ 
+-          ;;
+-          # Ignore these flags.
+-        -lang* | -lcrt*.o | -lc | -lgcc* | -lSystem | -libmil | -LANG:=* | -LIST:* | -LNO:*)
+-          ;;
+-        -lkernel32)
+-          test x"$CYGWIN" != xyes && ac_cv_f77_libs="$ac_cv_f77_libs $ac_arg"
+-          ;;
+-        -[LRuYz])
+-          # These flags, when seen by themselves, take an argument.
+-          # We remove the space between option and argument and re-iterate
+-          # unless we find an empty arg or a new option (starting with -)
++else $as_nop
++  ac_cv_f77_libs="$ac_cv_f77_libs $ac_arg"
++fi
++	    ;;
++	  esac
++	  ;;
++	-[LRuYz])
++	  # These flags, when seen by themselves, take an argument.
++	  # We remove the space between option and argument and re-iterate
++	  # unless we find an empty arg or a new option (starting with -)
+ 	  case $2 in
+ 	     "" | -*);;
+ 	     *)
+@@ -10453,10 +10665,10 @@ fi
+ 		set X $ac_arg "$@"
+ 		;;
+ 	  esac
+-          ;;
+-        -YP,*)
+-          for ac_j in `echo $ac_arg | sed -e 's/-YP,/-L/;s/:/ -L/g'`; do
+-              ac_exists=false
++	  ;;
++	-YP,*)
++	  for ac_j in `printf "%s\n" "$ac_arg" | sed -e 's/-YP,/-L/;s/:/ -L/g'`; do
++	      ac_exists=false
+   for ac_i in $ac_cv_f77_libs; do
+     if test x"$ac_j" = x"$ac_i"; then
+       ac_exists=true
+@@ -10464,17 +10676,17 @@ fi
+     fi
+   done
+ 
+-  if test x"$ac_exists" = xtrue; then
+-  :
+-else
++  if test x"$ac_exists" = xtrue
++then :
++
++else $as_nop
+   ac_arg="$ac_arg $ac_j"
+-                               ac_cv_f77_libs="$ac_cv_f77_libs $ac_j"
++			       ac_cv_f77_libs="$ac_cv_f77_libs $ac_j"
+ fi
+-
+-          done
+-          ;;
+-        -[lLR]*)
+-            ac_exists=false
++	  done
++	  ;;
++	-[lLR]*)
++	    ac_exists=false
+   for ac_i in $ac_cv_f77_libs; do
+     if test x"$ac_arg" = x"$ac_i"; then
+       ac_exists=true
+@@ -10482,17 +10694,18 @@ fi
+     fi
+   done
+ 
+-  if test x"$ac_exists" = xtrue; then
+-  :
+-else
++  if test x"$ac_exists" = xtrue
++then :
++
++else $as_nop
+   ac_cv_f77_libs="$ac_cv_f77_libs $ac_arg"
+ fi
+-
+-          ;;
++	  ;;
+ 	-zallextract*| -zdefaultextract)
+ 	  ac_cv_f77_libs="$ac_cv_f77_libs $ac_arg"
+ 	  ;;
+-          # Ignore everything else.
++	-mllvm) ${2+shift};; # Defend against 'clang -mllvm -loopopt=0'.
++	  # Ignore everything else.
+   esac
+ done
+ # restore positional arguments
+@@ -10503,10 +10716,10 @@ set X $ac_save_positional; shift
+ # must begin with a "/").
+ case `(uname -sr) 2>/dev/null` in
+    "SunOS 5"*)
+-      ac_ld_run_path=`echo $ac_f77_v_output |
+-                        sed -n 's,^.*LD_RUN_PATH *= *\(/[^ ]*\).*$,-R\1,p'`
++      ac_ld_run_path=`printf "%s\n" "$ac_f77_v_output" |
++			sed -n 's,^.*LD_RUN_PATH *= *\(/[^ ]*\).*$,-R\1,p'`
+       test "x$ac_ld_run_path" != x &&
+-        if test "$ac_compiler_gnu" = yes; then
++	if test "$ac_compiler_gnu" = yes; then
+   for ac_link_opt in $ac_ld_run_path; do
+     ac_cv_f77_libs="$ac_cv_f77_libs -Xlinker $ac_link_opt"
+   done
+@@ -10518,9 +10731,9 @@ esac
+ fi # test "x$[]_AC_LANG_PREFIX[]LIBS" = "x"
+ 
+ fi
+-{ echo "$as_me:$LINENO: result: $ac_cv_f77_libs" >&5
+-echo "${ECHO_T}$ac_cv_f77_libs" >&6; }
+-FLIBS="$ac_cv_f77_libs"
++{ printf "%s\n" "$as_me:${as_lineno-$LINENO}: result: $ac_cv_f77_libs" >&5
++printf "%s\n" "$ac_cv_f77_libs" >&6; }
++FLIBS="" # We never use FLIBS and it sometimes has quotes it in it, so disable it completely
+ 
+ 
+ ac_ext=c
+@@ -10534,11 +10747,12 @@ ac_compile='$F77 -c $FFLAGS conftest.$ac_ext >&5'
+ ac_link='$F77 -o conftest$ac_exeext $FFLAGS $LDFLAGS conftest.$ac_ext $LIBS >&5'
+ ac_compiler_gnu=$ac_cv_f77_compiler_gnu
+ 
+-{ echo "$as_me:$LINENO: checking for dummy main to link with Fortran 77 libraries" >&5
+-echo $ECHO_N "checking for dummy main to link with Fortran 77 libraries... $ECHO_C" >&6; }
+-if test "${ac_cv_f77_dummy_main+set}" = set; then
+-  echo $ECHO_N "(cached) $ECHO_C" >&6
+-else
++{ printf "%s\n" "$as_me:${as_lineno-$LINENO}: checking for dummy main to link with Fortran 77 libraries" >&5
++printf %s "checking for dummy main to link with Fortran 77 libraries... " >&6; }
++if test ${ac_cv_f77_dummy_main+y}
++then :
++  printf %s "(cached) " >&6
++else $as_nop
+   ac_f77_dm_save_LIBS=$LIBS
+  LIBS="$LIBS $FLIBS"
+  ac_fortran_dm_var=F77_DUMMY_MAIN
+@@ -10549,11 +10763,7 @@ ac_link='$CC -o conftest$ac_exeext $CFLAGS $CPPFLAGS $LDFLAGS conftest.$ac_ext $
+ ac_compiler_gnu=$ac_cv_c_compiler_gnu
+ 
+  # First, try linking without a dummy main:
+- cat >conftest.$ac_ext <<_ACEOF
+-/* confdefs.h.  */
+-_ACEOF
+-cat confdefs.h >>conftest.$ac_ext
+-cat >>conftest.$ac_ext <<_ACEOF
++ cat confdefs.h - <<_ACEOF >conftest.$ac_ext
+ /* end confdefs.h.  */
+ 
+ #ifdef F77_DUMMY_MAIN
+@@ -10565,49 +10775,25 @@ cat >>conftest.$ac_ext <<_ACEOF
+ 
+ #endif
+ int
+-main ()
++main (void)
+ {
+ 
+   ;
+   return 0;
+ }
+ _ACEOF
+-rm -f conftest.$ac_objext conftest$ac_exeext
+-if { (ac_try="$ac_link"
+-case "(($ac_try" in
+-  *\"* | *\`* | *\\*) ac_try_echo=\$ac_try;;
+-  *) ac_try_echo=$ac_try;;
+-esac
+-eval "echo \"\$as_me:$LINENO: $ac_try_echo\"") >&5
+-  (eval "$ac_link") 2>conftest.er1
+-  ac_status=$?
+-  grep -v '^ *+' conftest.er1 >conftest.err
+-  rm -f conftest.er1
+-  cat conftest.err >&5
+-  echo "$as_me:$LINENO: \$? = $ac_status" >&5
+-  (exit $ac_status); } && {
+-	 test -z "$ac_c_werror_flag" ||
+-	 test ! -s conftest.err
+-       } && test -s conftest$ac_exeext &&
+-       $as_test_x conftest$ac_exeext; then
++if ac_fn_c_try_link "$LINENO"
++then :
+   ac_cv_fortran_dummy_main=none
+-else
+-  echo "$as_me: failed program was:" >&5
+-sed 's/^/| /' conftest.$ac_ext >&5
+-
+-	ac_cv_fortran_dummy_main=unknown
++else $as_nop
++  ac_cv_fortran_dummy_main=unknown
+ fi
+-
+-rm -f core conftest.err conftest.$ac_objext conftest_ipa8_conftest.oo \
+-      conftest$ac_exeext conftest.$ac_ext
++rm -f core conftest.err conftest.$ac_objext conftest.beam \
++    conftest$ac_exeext conftest.$ac_ext
+ 
+  if test $ac_cv_fortran_dummy_main = unknown; then
+    for ac_func in MAIN__ MAIN_ __main MAIN _MAIN __MAIN main_ main__ _main; do
+-     cat >conftest.$ac_ext <<_ACEOF
+-/* confdefs.h.  */
+-_ACEOF
+-cat confdefs.h >>conftest.$ac_ext
+-cat >>conftest.$ac_ext <<_ACEOF
++     cat confdefs.h - <<_ACEOF >conftest.$ac_ext
+ /* end confdefs.h.  */
+ #define $ac_fortran_dm_var $ac_func
+ #ifdef F77_DUMMY_MAIN
+@@ -10619,41 +10805,19 @@ cat >>conftest.$ac_ext <<_ACEOF
+ 
+ #endif
+ int
+-main ()
++main (void)
+ {
+ 
+   ;
+   return 0;
+ }
+ _ACEOF
+-rm -f conftest.$ac_objext conftest$ac_exeext
+-if { (ac_try="$ac_link"
+-case "(($ac_try" in
+-  *\"* | *\`* | *\\*) ac_try_echo=\$ac_try;;
+-  *) ac_try_echo=$ac_try;;
+-esac
+-eval "echo \"\$as_me:$LINENO: $ac_try_echo\"") >&5
+-  (eval "$ac_link") 2>conftest.er1
+-  ac_status=$?
+-  grep -v '^ *+' conftest.er1 >conftest.err
+-  rm -f conftest.er1
+-  cat conftest.err >&5
+-  echo "$as_me:$LINENO: \$? = $ac_status" >&5
+-  (exit $ac_status); } && {
+-	 test -z "$ac_c_werror_flag" ||
+-	 test ! -s conftest.err
+-       } && test -s conftest$ac_exeext &&
+-       $as_test_x conftest$ac_exeext; then
++if ac_fn_c_try_link "$LINENO"
++then :
+   ac_cv_fortran_dummy_main=$ac_func; break
+-else
+-  echo "$as_me: failed program was:" >&5
+-sed 's/^/| /' conftest.$ac_ext >&5
+-
+-
+ fi
+-
+-rm -f core conftest.err conftest.$ac_objext conftest_ipa8_conftest.oo \
+-      conftest$ac_exeext conftest.$ac_ext
++rm -f core conftest.err conftest.$ac_objext conftest.beam \
++    conftest$ac_exeext conftest.$ac_ext
+    done
+  fi
+  ac_ext=f
+@@ -10661,37 +10825,32 @@ ac_compile='$F77 -c $FFLAGS conftest.$ac_ext >&5'
+ ac_link='$F77 -o conftest$ac_exeext $FFLAGS $LDFLAGS conftest.$ac_ext $LIBS >&5'
+ ac_compiler_gnu=$ac_cv_f77_compiler_gnu
+  ac_cv_f77_dummy_main=$ac_cv_fortran_dummy_main
+- rm -f conftest*
++ rm -rf conftest*
+  LIBS=$ac_f77_dm_save_LIBS
+ 
+ fi
+-{ echo "$as_me:$LINENO: result: $ac_cv_f77_dummy_main" >&5
+-echo "${ECHO_T}$ac_cv_f77_dummy_main" >&6; }
++{ printf "%s\n" "$as_me:${as_lineno-$LINENO}: result: $ac_cv_f77_dummy_main" >&5
++printf "%s\n" "$ac_cv_f77_dummy_main" >&6; }
+ F77_DUMMY_MAIN=$ac_cv_f77_dummy_main
+-if test "$F77_DUMMY_MAIN" != unknown; then
++if test "$F77_DUMMY_MAIN" != unknown
++then :
+   if test $F77_DUMMY_MAIN != none; then
+ 
+-cat >>confdefs.h <<_ACEOF
+-#define F77_DUMMY_MAIN $F77_DUMMY_MAIN
+-_ACEOF
++printf "%s\n" "#define F77_DUMMY_MAIN $F77_DUMMY_MAIN" >>confdefs.h
+ 
+   if test "x$ac_cv_fc_dummy_main" = "x$ac_cv_f77_dummy_main"; then
+ 
+-cat >>confdefs.h <<\_ACEOF
+-#define FC_DUMMY_MAIN_EQ_F77 1
+-_ACEOF
++printf "%s\n" "#define FC_DUMMY_MAIN_EQ_F77 1" >>confdefs.h
+ 
+   fi
+ fi
+-else
+-  { { echo "$as_me:$LINENO: error: linking to Fortran libraries from C fails
+-See \`config.log' for more details." >&5
+-echo "$as_me: error: linking to Fortran libraries from C fails
+-See \`config.log' for more details." >&2;}
+-   { (exit 1); exit 1; }; }
++else $as_nop
++  { { printf "%s\n" "$as_me:${as_lineno-$LINENO}: error: in \`$ac_pwd':" >&5
++printf "%s\n" "$as_me: error: in \`$ac_pwd':" >&2;}
++as_fn_error $? "linking to Fortran libraries from C fails
++See \`config.log' for more details" "$LINENO" 5; }
+ fi
+ 
+-
+ ac_ext=c
+ ac_cpp='$CPP $CPPFLAGS'
+ ac_compile='$CC -c $CFLAGS $CPPFLAGS conftest.$ac_ext >&5'
+@@ -10702,12 +10861,13 @@ ac_ext=f
+ ac_compile='$F77 -c $FFLAGS conftest.$ac_ext >&5'
+ ac_link='$F77 -o conftest$ac_exeext $FFLAGS $LDFLAGS conftest.$ac_ext $LIBS >&5'
+ ac_compiler_gnu=$ac_cv_f77_compiler_gnu
+-{ echo "$as_me:$LINENO: checking for Fortran 77 name-mangling scheme" >&5
+-echo $ECHO_N "checking for Fortran 77 name-mangling scheme... $ECHO_C" >&6; }
+-if test "${ac_cv_f77_mangling+set}" = set; then
+-  echo $ECHO_N "(cached) $ECHO_C" >&6
+-else
+-  cat >conftest.$ac_ext <<_ACEOF
++{ printf "%s\n" "$as_me:${as_lineno-$LINENO}: checking for Fortran 77 name-mangling scheme" >&5
++printf %s "checking for Fortran 77 name-mangling scheme... " >&6; }
++if test ${ac_cv_f77_mangling+y}
++then :
++  printf %s "(cached) " >&6
++else $as_nop
++  cat > conftest.$ac_ext <<_ACEOF
+       subroutine foobar()
+       return
+       end
+@@ -10715,23 +10875,8 @@ else
+       return
+       end
+ _ACEOF
+-rm -f conftest.$ac_objext
+-if { (ac_try="$ac_compile"
+-case "(($ac_try" in
+-  *\"* | *\`* | *\\*) ac_try_echo=\$ac_try;;
+-  *) ac_try_echo=$ac_try;;
+-esac
+-eval "echo \"\$as_me:$LINENO: $ac_try_echo\"") >&5
+-  (eval "$ac_compile") 2>conftest.er1
+-  ac_status=$?
+-  grep -v '^ *+' conftest.er1 >conftest.err
+-  rm -f conftest.er1
+-  cat conftest.err >&5
+-  echo "$as_me:$LINENO: \$? = $ac_status" >&5
+-  (exit $ac_status); } && {
+-	 test -z "$ac_f77_werror_flag" ||
+-	 test ! -s conftest.err
+-       } && test -s conftest.$ac_objext; then
++if ac_fn_f77_try_compile "$LINENO"
++then :
+   mv conftest.$ac_objext cfortran_test.$ac_objext
+ 
+   ac_save_LIBS=$LIBS
+@@ -10746,19 +10891,12 @@ ac_compiler_gnu=$ac_cv_c_compiler_gnu
+   for ac_foobar in foobar FOOBAR; do
+     for ac_underscore in "" "_"; do
+       ac_func="$ac_foobar$ac_underscore"
+-      cat >conftest.$ac_ext <<_ACEOF
+-/* confdefs.h.  */
+-_ACEOF
+-cat confdefs.h >>conftest.$ac_ext
+-cat >>conftest.$ac_ext <<_ACEOF
++      cat confdefs.h - <<_ACEOF >conftest.$ac_ext
+ /* end confdefs.h.  */
+ 
+ /* Override any GCC internal prototype to avoid an error.
+    Use char because int might match the return type of a GCC
+    builtin and then its argument prototype would still apply.  */
+-#ifdef __cplusplus
+-extern "C"
+-#endif
+ char $ac_func ();
+ #ifdef F77_DUMMY_MAIN
+ 
+@@ -10769,41 +10907,19 @@ char $ac_func ();
+ 
+ #endif
+ int
+-main ()
++main (void)
+ {
+ return $ac_func ();
+   ;
+   return 0;
+ }
+ _ACEOF
+-rm -f conftest.$ac_objext conftest$ac_exeext
+-if { (ac_try="$ac_link"
+-case "(($ac_try" in
+-  *\"* | *\`* | *\\*) ac_try_echo=\$ac_try;;
+-  *) ac_try_echo=$ac_try;;
+-esac
+-eval "echo \"\$as_me:$LINENO: $ac_try_echo\"") >&5
+-  (eval "$ac_link") 2>conftest.er1
+-  ac_status=$?
+-  grep -v '^ *+' conftest.er1 >conftest.err
+-  rm -f conftest.er1
+-  cat conftest.err >&5
+-  echo "$as_me:$LINENO: \$? = $ac_status" >&5
+-  (exit $ac_status); } && {
+-	 test -z "$ac_c_werror_flag" ||
+-	 test ! -s conftest.err
+-       } && test -s conftest$ac_exeext &&
+-       $as_test_x conftest$ac_exeext; then
++if ac_fn_c_try_link "$LINENO"
++then :
+   ac_success=yes; break 2
+-else
+-  echo "$as_me: failed program was:" >&5
+-sed 's/^/| /' conftest.$ac_ext >&5
+-
+-
+ fi
+-
+-rm -f core conftest.err conftest.$ac_objext conftest_ipa8_conftest.oo \
+-      conftest$ac_exeext conftest.$ac_ext
++rm -f core conftest.err conftest.$ac_objext conftest.beam \
++    conftest$ac_exeext conftest.$ac_ext
+     done
+   done
+   ac_ext=f
+@@ -10831,19 +10947,12 @@ ac_compiler_gnu=$ac_cv_c_compiler_gnu
+      ac_success_extra=no
+      for ac_extra in "" "_"; do
+ 	ac_func="$ac_foo_bar$ac_underscore$ac_extra"
+-	cat >conftest.$ac_ext <<_ACEOF
+-/* confdefs.h.  */
+-_ACEOF
+-cat confdefs.h >>conftest.$ac_ext
+-cat >>conftest.$ac_ext <<_ACEOF
++	cat confdefs.h - <<_ACEOF >conftest.$ac_ext
+ /* end confdefs.h.  */
+ 
+ /* Override any GCC internal prototype to avoid an error.
+    Use char because int might match the return type of a GCC
+    builtin and then its argument prototype would still apply.  */
+-#ifdef __cplusplus
+-extern "C"
+-#endif
+ char $ac_func ();
+ #ifdef F77_DUMMY_MAIN
+ 
+@@ -10854,41 +10963,19 @@ char $ac_func ();
+ 
+ #endif
+ int
+-main ()
++main (void)
+ {
+ return $ac_func ();
+   ;
+   return 0;
+ }
+ _ACEOF
+-rm -f conftest.$ac_objext conftest$ac_exeext
+-if { (ac_try="$ac_link"
+-case "(($ac_try" in
+-  *\"* | *\`* | *\\*) ac_try_echo=\$ac_try;;
+-  *) ac_try_echo=$ac_try;;
+-esac
+-eval "echo \"\$as_me:$LINENO: $ac_try_echo\"") >&5
+-  (eval "$ac_link") 2>conftest.er1
+-  ac_status=$?
+-  grep -v '^ *+' conftest.er1 >conftest.err
+-  rm -f conftest.er1
+-  cat conftest.err >&5
+-  echo "$as_me:$LINENO: \$? = $ac_status" >&5
+-  (exit $ac_status); } && {
+-	 test -z "$ac_c_werror_flag" ||
+-	 test ! -s conftest.err
+-       } && test -s conftest$ac_exeext &&
+-       $as_test_x conftest$ac_exeext; then
++if ac_fn_c_try_link "$LINENO"
++then :
+   ac_success_extra=yes; break
+-else
+-  echo "$as_me: failed program was:" >&5
+-sed 's/^/| /' conftest.$ac_ext >&5
+-
+-
+ fi
+-
+-rm -f core conftest.err conftest.$ac_objext conftest_ipa8_conftest.oo \
+-      conftest$ac_exeext conftest.$ac_ext
++rm -f core conftest.err conftest.$ac_objext conftest.beam \
++    conftest$ac_exeext conftest.$ac_ext
+      done
+      ac_ext=f
+ ac_compile='$F77 -c $FFLAGS conftest.$ac_ext >&5'
+@@ -10897,16 +10984,16 @@ ac_compiler_gnu=$ac_cv_f77_compiler_gnu
+ 
+      if test "$ac_success_extra" = "yes"; then
+ 	ac_cv_f77_mangling="$ac_case case"
+-        if test -z "$ac_underscore"; then
+-           ac_cv_f77_mangling="$ac_cv_f77_mangling, no underscore"
++	if test -z "$ac_underscore"; then
++	   ac_cv_f77_mangling="$ac_cv_f77_mangling, no underscore"
+ 	else
+-           ac_cv_f77_mangling="$ac_cv_f77_mangling, underscore"
+-        fi
+-        if test -z "$ac_extra"; then
+-           ac_cv_f77_mangling="$ac_cv_f77_mangling, no extra underscore"
++	   ac_cv_f77_mangling="$ac_cv_f77_mangling, underscore"
++	fi
++	if test -z "$ac_extra"; then
++	   ac_cv_f77_mangling="$ac_cv_f77_mangling, no extra underscore"
+ 	else
+-           ac_cv_f77_mangling="$ac_cv_f77_mangling, extra underscore"
+-        fi
++	   ac_cv_f77_mangling="$ac_cv_f77_mangling, extra underscore"
++	fi
+       else
+ 	ac_cv_f77_mangling="unknown"
+       fi
+@@ -10915,23 +11002,19 @@ ac_compiler_gnu=$ac_cv_f77_compiler_gnu
+   fi
+ 
+   LIBS=$ac_save_LIBS
+-  rm -f cfortran_test* conftest*
+-else
+-  echo "$as_me: failed program was:" >&5
+-sed 's/^/| /' conftest.$ac_ext >&5
+-
+-	{ { echo "$as_me:$LINENO: error: cannot compile a simple Fortran program
+-See \`config.log' for more details." >&5
+-echo "$as_me: error: cannot compile a simple Fortran program
+-See \`config.log' for more details." >&2;}
+-   { (exit 1); exit 1; }; }
++  rm -rf conftest*
++  rm -f cfortran_test*
++else $as_nop
++  { { printf "%s\n" "$as_me:${as_lineno-$LINENO}: error: in \`$ac_pwd':" >&5
++printf "%s\n" "$as_me: error: in \`$ac_pwd':" >&2;}
++as_fn_error $? "cannot compile a simple Fortran program
++See \`config.log' for more details" "$LINENO" 5; }
+ fi
+-
+-rm -f core conftest.err conftest.$ac_objext conftest.$ac_ext
++rm -f core conftest.err conftest.$ac_objext conftest.beam conftest.$ac_ext
+ 
+ fi
+-{ echo "$as_me:$LINENO: result: $ac_cv_f77_mangling" >&5
+-echo "${ECHO_T}$ac_cv_f77_mangling" >&6; }
++{ printf "%s\n" "$as_me:${as_lineno-$LINENO}: result: $ac_cv_f77_mangling" >&5
++printf "%s\n" "$ac_cv_f77_mangling" >&6; }
+ 
+ ac_ext=c
+ ac_cpp='$CPP $CPPFLAGS'
+@@ -10943,85 +11026,51 @@ ac_ext=f
+ ac_compile='$F77 -c $FFLAGS conftest.$ac_ext >&5'
+ ac_link='$F77 -o conftest$ac_exeext $FFLAGS $LDFLAGS conftest.$ac_ext $LIBS >&5'
+ ac_compiler_gnu=$ac_cv_f77_compiler_gnu
+-
+-
+ case $ac_cv_f77_mangling in
+   "lower case, no underscore, no extra underscore")
+-          cat >>confdefs.h <<\_ACEOF
+-#define F77_FUNC(name,NAME) name
+-_ACEOF
++	  printf "%s\n" "#define F77_FUNC(name,NAME) name" >>confdefs.h
+ 
+-          cat >>confdefs.h <<\_ACEOF
+-#define F77_FUNC_(name,NAME) name
+-_ACEOF
++	  printf "%s\n" "#define F77_FUNC_(name,NAME) name" >>confdefs.h
+  ;;
+   "lower case, no underscore, extra underscore")
+-          cat >>confdefs.h <<\_ACEOF
+-#define F77_FUNC(name,NAME) name
+-_ACEOF
++	  printf "%s\n" "#define F77_FUNC(name,NAME) name" >>confdefs.h
+ 
+-          cat >>confdefs.h <<\_ACEOF
+-#define F77_FUNC_(name,NAME) name ## _
+-_ACEOF
++	  printf "%s\n" "#define F77_FUNC_(name,NAME) name ## _" >>confdefs.h
+  ;;
+   "lower case, underscore, no extra underscore")
+-          cat >>confdefs.h <<\_ACEOF
+-#define F77_FUNC(name,NAME) name ## _
+-_ACEOF
++	  printf "%s\n" "#define F77_FUNC(name,NAME) name ## _" >>confdefs.h
+ 
+-          cat >>confdefs.h <<\_ACEOF
+-#define F77_FUNC_(name,NAME) name ## _
+-_ACEOF
++	  printf "%s\n" "#define F77_FUNC_(name,NAME) name ## _" >>confdefs.h
+  ;;
+   "lower case, underscore, extra underscore")
+-          cat >>confdefs.h <<\_ACEOF
+-#define F77_FUNC(name,NAME) name ## _
+-_ACEOF
++	  printf "%s\n" "#define F77_FUNC(name,NAME) name ## _" >>confdefs.h
+ 
+-          cat >>confdefs.h <<\_ACEOF
+-#define F77_FUNC_(name,NAME) name ## __
+-_ACEOF
++	  printf "%s\n" "#define F77_FUNC_(name,NAME) name ## __" >>confdefs.h
+  ;;
+   "upper case, no underscore, no extra underscore")
+-          cat >>confdefs.h <<\_ACEOF
+-#define F77_FUNC(name,NAME) NAME
+-_ACEOF
++	  printf "%s\n" "#define F77_FUNC(name,NAME) NAME" >>confdefs.h
+ 
+-          cat >>confdefs.h <<\_ACEOF
+-#define F77_FUNC_(name,NAME) NAME
+-_ACEOF
++	  printf "%s\n" "#define F77_FUNC_(name,NAME) NAME" >>confdefs.h
+  ;;
+   "upper case, no underscore, extra underscore")
+-          cat >>confdefs.h <<\_ACEOF
+-#define F77_FUNC(name,NAME) NAME
+-_ACEOF
++	  printf "%s\n" "#define F77_FUNC(name,NAME) NAME" >>confdefs.h
+ 
+-          cat >>confdefs.h <<\_ACEOF
+-#define F77_FUNC_(name,NAME) NAME ## _
+-_ACEOF
++	  printf "%s\n" "#define F77_FUNC_(name,NAME) NAME ## _" >>confdefs.h
+  ;;
+   "upper case, underscore, no extra underscore")
+-          cat >>confdefs.h <<\_ACEOF
+-#define F77_FUNC(name,NAME) NAME ## _
+-_ACEOF
++	  printf "%s\n" "#define F77_FUNC(name,NAME) NAME ## _" >>confdefs.h
+ 
+-          cat >>confdefs.h <<\_ACEOF
+-#define F77_FUNC_(name,NAME) NAME ## _
+-_ACEOF
++	  printf "%s\n" "#define F77_FUNC_(name,NAME) NAME ## _" >>confdefs.h
+  ;;
+   "upper case, underscore, extra underscore")
+-          cat >>confdefs.h <<\_ACEOF
+-#define F77_FUNC(name,NAME) NAME ## _
+-_ACEOF
++	  printf "%s\n" "#define F77_FUNC(name,NAME) NAME ## _" >>confdefs.h
+ 
+-          cat >>confdefs.h <<\_ACEOF
+-#define F77_FUNC_(name,NAME) NAME ## __
+-_ACEOF
++	  printf "%s\n" "#define F77_FUNC_(name,NAME) NAME ## __" >>confdefs.h
+  ;;
+   *)
+-          { echo "$as_me:$LINENO: WARNING: unknown Fortran name-mangling scheme" >&5
+-echo "$as_me: WARNING: unknown Fortran name-mangling scheme" >&2;}
+-          ;;
++	  { printf "%s\n" "$as_me:${as_lineno-$LINENO}: WARNING: unknown Fortran name-mangling scheme" >&5
++printf "%s\n" "$as_me: WARNING: unknown Fortran name-mangling scheme" >&2;}
++	  ;;
+ esac
+ 
+ ac_ext=c
+@@ -11031,31 +11080,33 @@ ac_link='$CC -o conftest$ac_exeext $CFLAGS $CPPFLAGS $LDFLAGS conftest.$ac_ext $
+ ac_compiler_gnu=$ac_cv_c_compiler_gnu
+ 
+ 
+-{ echo "$as_me:$LINENO: checking whether to kludge override fortran name mangling results" >&5
+-echo $ECHO_N "checking whether to kludge override fortran name mangling results... $ECHO_C" >&6; }
++{ printf "%s\n" "$as_me:${as_lineno-$LINENO}: checking whether to kludge override fortran name mangling results" >&5
++printf %s "checking whether to kludge override fortran name mangling results... " >&6; }
+ # Check whether --enable-fortran-mangling-override was given.
+-if test "${enable_fortran_mangling_override+set}" = set; then
++if test ${enable_fortran_mangling_override+y}
++then :
+   enableval=$enable_fortran_mangling_override; case "$enable_fortran_mangling_override" in
+   yes)
+-  { echo "$as_me:$LINENO: result: yes" >&5
+-echo "${ECHO_T}yes" >&6; }
++  { printf "%s\n" "$as_me:${as_lineno-$LINENO}: result: yes" >&5
++printf "%s\n" "yes" >&6; }
+   sed -e 's/^\(#define F77_FUNC.\{1,\}\)/\1 ## _/' confdefs.h > confdefs1.h
+   mv confdefs1.h confdefs.h
+ esac
+-else
+-  { echo "$as_me:$LINENO: result: no" >&5
+-echo "${ECHO_T}no" >&6; }
++else $as_nop
++  { printf "%s\n" "$as_me:${as_lineno-$LINENO}: result: no" >&5
++printf "%s\n" "no" >&6; }
+ fi
+ 
+ 
+ 
+ if test "${with_x+set}" = set; then
+-   { echo "$as_me:$LINENO: checking for X" >&5
+-echo $ECHO_N "checking for X... $ECHO_C" >&6; }
++   { printf "%s\n" "$as_me:${as_lineno-$LINENO}: checking for X" >&5
++printf %s "checking for X... " >&6; }
+ 
+ 
+ # Check whether --with-x was given.
+-if test "${with_x+set}" = set; then
++if test ${with_x+y}
++then :
+   withval=$with_x;
+ fi
+ 
+@@ -11065,15 +11116,50 @@ if test "x$with_x" = xno; then
+   have_x=disabled
+ else
+   case $x_includes,$x_libraries in #(
+-    *\'*) { { echo "$as_me:$LINENO: error: Cannot use X directory names containing '" >&5
+-echo "$as_me: error: Cannot use X directory names containing '" >&2;}
+-   { (exit 1); exit 1; }; };; #(
+-    *,NONE | NONE,*) if test "${ac_cv_have_x+set}" = set; then
+-  echo $ECHO_N "(cached) $ECHO_C" >&6
+-else
++    *\'*) as_fn_error $? "cannot use X directory names containing '" "$LINENO" 5;; #(
++    *,NONE | NONE,*) if test ${ac_cv_have_x+y}
++then :
++  printf %s "(cached) " >&6
++else $as_nop
+   # One or both of the vars are not set, and there is no cached value.
+-ac_x_includes=no ac_x_libraries=no
+-rm -f -r conftest.dir
++ac_x_includes=no
++ac_x_libraries=no
++# Do we need to do anything special at all?
++ac_save_LIBS=$LIBS
++LIBS="-lX11 $LIBS"
++cat confdefs.h - <<_ACEOF >conftest.$ac_ext
++/* end confdefs.h.  */
++#include <X11/Xlib.h>
++#ifdef F77_DUMMY_MAIN
++
++#  ifdef __cplusplus
++     extern "C"
++#  endif
++   int F77_DUMMY_MAIN() { return 1; }
++
++#endif
++int
++main (void)
++{
++XrmInitialize ()
++  ;
++  return 0;
++}
++_ACEOF
++if ac_fn_c_try_link "$LINENO"
++then :
++  # We can compile and link X programs with no special options.
++  ac_x_includes=
++  ac_x_libraries=
++fi
++rm -f core conftest.err conftest.$ac_objext conftest.beam \
++    conftest$ac_exeext conftest.$ac_ext
++LIBS="$ac_save_LIBS"
++# If that didn't work, only try xmkmf and file system searches
++# for native compilation.
++if test x"$ac_x_includes" = xno && test "$cross_compiling" = no
++then :
++  rm -f -r conftest.dir
+ if mkdir conftest.dir; then
+   cd conftest.dir
+   cat >Imakefile <<'_ACEOF'
+@@ -11085,12 +11171,12 @@ libdir:
+ 	@echo libdir='${LIBDIR}'
+ _ACEOF
+   if (export CC; ${XMKMF-xmkmf}) >/dev/null 2>/dev/null && test -f Makefile; then
+-    # GNU make sometimes prints "make[1]: Entering...", which would confuse us.
++    # GNU make sometimes prints "make[1]: Entering ...", which would confuse us.
+     for ac_var in incroot usrlibdir libdir; do
+       eval "ac_im_$ac_var=\`\${MAKE-make} $ac_var 2>/dev/null | sed -n 's/^$ac_var=//p'\`"
+     done
+     # Open Windows xmkmf reportedly sets LIBDIR instead of USRLIBDIR.
+-    for ac_extension in a so sl; do
++    for ac_extension in a so sl dylib la dll; do
+       if test ! -f "$ac_im_usrlibdir/libX11.$ac_extension" &&
+ 	 test -f "$ac_im_libdir/libX11.$ac_extension"; then
+ 	ac_im_usrlibdir=$ac_im_libdir; break
+@@ -11104,7 +11190,7 @@ _ACEOF
+ 	*) test -f "$ac_im_incroot/X11/Xos.h" && ac_x_includes=$ac_im_incroot;;
+     esac
+     case $ac_im_usrlibdir in
+-	/usr/lib | /lib) ;;
++	/usr/lib | /usr/lib64 | /lib | /lib64) ;;
+ 	*) test -d "$ac_im_usrlibdir" && ac_x_libraries=$ac_im_usrlibdir ;;
+     esac
+   fi
+@@ -11112,29 +11198,35 @@ _ACEOF
+   rm -f -r conftest.dir
+ fi
+ 
+-# Standard set of common directories for X headers.
++  # Standard set of common directories for X headers.
+ # Check X11 before X11Rn because it is often a symlink to the current release.
+ ac_x_header_dirs='
+ /usr/X11/include
++/usr/X11R7/include
+ /usr/X11R6/include
+ /usr/X11R5/include
+ /usr/X11R4/include
+ 
+ /usr/include/X11
++/usr/include/X11R7
+ /usr/include/X11R6
+ /usr/include/X11R5
+ /usr/include/X11R4
+ 
+ /usr/local/X11/include
++/usr/local/X11R7/include
+ /usr/local/X11R6/include
+ /usr/local/X11R5/include
+ /usr/local/X11R4/include
+ 
+ /usr/local/include/X11
++/usr/local/include/X11R7
+ /usr/local/include/X11R6
+ /usr/local/include/X11R5
+ /usr/local/include/X11R4
+ 
++/opt/X11/include
++
+ /usr/X386/include
+ /usr/x386/include
+ /usr/XFree86/include/X11
+@@ -11152,36 +11244,15 @@ ac_x_header_dirs='
+ if test "$ac_x_includes" = no; then
+   # Guess where to find include files, by looking for Xlib.h.
+   # First, try using that file with no special directory specified.
+-  cat >conftest.$ac_ext <<_ACEOF
+-/* confdefs.h.  */
+-_ACEOF
+-cat confdefs.h >>conftest.$ac_ext
+-cat >>conftest.$ac_ext <<_ACEOF
++  cat confdefs.h - <<_ACEOF >conftest.$ac_ext
+ /* end confdefs.h.  */
+ #include <X11/Xlib.h>
+ _ACEOF
+-if { (ac_try="$ac_cpp conftest.$ac_ext"
+-case "(($ac_try" in
+-  *\"* | *\`* | *\\*) ac_try_echo=\$ac_try;;
+-  *) ac_try_echo=$ac_try;;
+-esac
+-eval "echo \"\$as_me:$LINENO: $ac_try_echo\"") >&5
+-  (eval "$ac_cpp conftest.$ac_ext") 2>conftest.er1
+-  ac_status=$?
+-  grep -v '^ *+' conftest.er1 >conftest.err
+-  rm -f conftest.er1
+-  cat conftest.err >&5
+-  echo "$as_me:$LINENO: \$? = $ac_status" >&5
+-  (exit $ac_status); } >/dev/null && {
+-	 test -z "$ac_c_preproc_warn_flag$ac_c_werror_flag" ||
+-	 test ! -s conftest.err
+-       }; then
++if ac_fn_c_try_cpp "$LINENO"
++then :
+   # We can compile using X headers with no special include directory.
+ ac_x_includes=
+-else
+-  echo "$as_me: failed program was:" >&5
+-sed 's/^/| /' conftest.$ac_ext >&5
+-
++else $as_nop
+   for ac_dir in $ac_x_header_dirs; do
+   if test -r "$ac_dir/X11/Xlib.h"; then
+     ac_x_includes=$ac_dir
+@@ -11189,8 +11260,7 @@ sed 's/^/| /' conftest.$ac_ext >&5
+   fi
+ done
+ fi
+-
+-rm -f conftest.err conftest.$ac_ext
++rm -f conftest.err conftest.i conftest.$ac_ext
+ fi # $ac_x_includes = no
+ 
+ if test "$ac_x_libraries" = no; then
+@@ -11198,324 +11268,10 @@ if test "$ac_x_libraries" = no; then
+   # See if we find them without any special options.
+   # Don't add to $LIBS permanently.
+   ac_save_LIBS=$LIBS
+-  LIBS="-lX11 $LIBS"
+-  cat >conftest.$ac_ext <<_ACEOF
+-/* confdefs.h.  */
+-_ACEOF
+-cat confdefs.h >>conftest.$ac_ext
+-cat >>conftest.$ac_ext <<_ACEOF
+-/* end confdefs.h.  */
+-#include <X11/Xlib.h>
+-#ifdef F77_DUMMY_MAIN
+-
+-#  ifdef __cplusplus
+-     extern "C"
+-#  endif
+-   int F77_DUMMY_MAIN() { return 1; }
+-
+-#endif
+-int
+-main ()
+-{
+-XrmInitialize ()
+-  ;
+-  return 0;
+-}
+-_ACEOF
+-rm -f conftest.$ac_objext conftest$ac_exeext
+-if { (ac_try="$ac_link"
+-case "(($ac_try" in
+-  *\"* | *\`* | *\\*) ac_try_echo=\$ac_try;;
+-  *) ac_try_echo=$ac_try;;
+-esac
+-eval "echo \"\$as_me:$LINENO: $ac_try_echo\"") >&5
+-  (eval "$ac_link") 2>conftest.er1
+-  ac_status=$?
+-  grep -v '^ *+' conftest.er1 >conftest.err
+-  rm -f conftest.er1
+-  cat conftest.err >&5
+-  echo "$as_me:$LINENO: \$? = $ac_status" >&5
+-  (exit $ac_status); } && {
+-	 test -z "$ac_c_werror_flag" ||
+-	 test ! -s conftest.err
+-       } && test -s conftest$ac_exeext &&
+-       $as_test_x conftest$ac_exeext; then
+-  LIBS=$ac_save_LIBS
+-# We can link X programs with no special library path.
+-ac_x_libraries=
+-else
+-  echo "$as_me: failed program was:" >&5
+-sed 's/^/| /' conftest.$ac_ext >&5
+-
+-	LIBS=$ac_save_LIBS
+-for ac_dir in `echo "$ac_x_includes $ac_x_header_dirs" | sed s/include/lib/g`
+-do
+-  # Don't even attempt the hair of trying to link an X program!
+-  for ac_extension in a so sl; do
+-    if test -r "$ac_dir/libX11.$ac_extension"; then
+-      ac_x_libraries=$ac_dir
+-      break 2
+-    fi
+-  done
+-done
+-fi
+-
+-rm -f core conftest.err conftest.$ac_objext conftest_ipa8_conftest.oo \
+-      conftest$ac_exeext conftest.$ac_ext
+-fi # $ac_x_libraries = no
+-
+-case $ac_x_includes,$ac_x_libraries in #(
+-  no,* | *,no | *\'*)
+-    # Didn't find X, or a directory has "'" in its name.
+-    ac_cv_have_x="have_x=no";; #(
+-  *)
+-    # Record where we found X for the cache.
+-    ac_cv_have_x="have_x=yes\
+-	ac_x_includes='$ac_x_includes'\
+-	ac_x_libraries='$ac_x_libraries'"
+-esac
+-fi
+-;; #(
+-    *) have_x=yes;;
+-  esac
+-  eval "$ac_cv_have_x"
+-fi # $with_x != no
+-
+-if test "$have_x" != yes; then
+-  { echo "$as_me:$LINENO: result: $have_x" >&5
+-echo "${ECHO_T}$have_x" >&6; }
+-  no_x=yes
+-else
+-  # If each of the values was on the command line, it overrides each guess.
+-  test "x$x_includes" = xNONE && x_includes=$ac_x_includes
+-  test "x$x_libraries" = xNONE && x_libraries=$ac_x_libraries
+-  # Update the cache value to reflect the command line values.
+-  ac_cv_have_x="have_x=yes\
+-	ac_x_includes='$x_includes'\
+-	ac_x_libraries='$x_libraries'"
+-  { echo "$as_me:$LINENO: result: libraries $x_libraries, headers $x_includes" >&5
+-echo "${ECHO_T}libraries $x_libraries, headers $x_includes" >&6; }
+-fi
+-
+-if test "$no_x" = yes; then
+-  # Not all programs may use this symbol, but it does not hurt to define it.
+-
+-cat >>confdefs.h <<\_ACEOF
+-#define X_DISPLAY_MISSING 1
+-_ACEOF
+-
+-  X_CFLAGS= X_PRE_LIBS= X_LIBS= X_EXTRA_LIBS=
+-else
+-  if test -n "$x_includes"; then
+-    X_CFLAGS="$X_CFLAGS -I$x_includes"
+-  fi
+-
+-  # It would also be nice to do this for all -L options, not just this one.
+-  if test -n "$x_libraries"; then
+-    X_LIBS="$X_LIBS -L$x_libraries"
+-    # For Solaris; some versions of Sun CC require a space after -R and
+-    # others require no space.  Words are not sufficient . . . .
+-    { echo "$as_me:$LINENO: checking whether -R must be followed by a space" >&5
+-echo $ECHO_N "checking whether -R must be followed by a space... $ECHO_C" >&6; }
+-    ac_xsave_LIBS=$LIBS; LIBS="$LIBS -R$x_libraries"
+-    ac_xsave_c_werror_flag=$ac_c_werror_flag
+-    ac_c_werror_flag=yes
+-    cat >conftest.$ac_ext <<_ACEOF
+-/* confdefs.h.  */
+-_ACEOF
+-cat confdefs.h >>conftest.$ac_ext
+-cat >>conftest.$ac_ext <<_ACEOF
+-/* end confdefs.h.  */
+-
+-#ifdef F77_DUMMY_MAIN
+-
+-#  ifdef __cplusplus
+-     extern "C"
+-#  endif
+-   int F77_DUMMY_MAIN() { return 1; }
+-
+-#endif
+-int
+-main ()
+-{
+-
+-  ;
+-  return 0;
+-}
+-_ACEOF
+-rm -f conftest.$ac_objext conftest$ac_exeext
+-if { (ac_try="$ac_link"
+-case "(($ac_try" in
+-  *\"* | *\`* | *\\*) ac_try_echo=\$ac_try;;
+-  *) ac_try_echo=$ac_try;;
+-esac
+-eval "echo \"\$as_me:$LINENO: $ac_try_echo\"") >&5
+-  (eval "$ac_link") 2>conftest.er1
+-  ac_status=$?
+-  grep -v '^ *+' conftest.er1 >conftest.err
+-  rm -f conftest.er1
+-  cat conftest.err >&5
+-  echo "$as_me:$LINENO: \$? = $ac_status" >&5
+-  (exit $ac_status); } && {
+-	 test -z "$ac_c_werror_flag" ||
+-	 test ! -s conftest.err
+-       } && test -s conftest$ac_exeext &&
+-       $as_test_x conftest$ac_exeext; then
+-  { echo "$as_me:$LINENO: result: no" >&5
+-echo "${ECHO_T}no" >&6; }
+-       X_LIBS="$X_LIBS -R$x_libraries"
+-else
+-  echo "$as_me: failed program was:" >&5
+-sed 's/^/| /' conftest.$ac_ext >&5
+-
+-	LIBS="$ac_xsave_LIBS -R $x_libraries"
+-       cat >conftest.$ac_ext <<_ACEOF
+-/* confdefs.h.  */
+-_ACEOF
+-cat confdefs.h >>conftest.$ac_ext
+-cat >>conftest.$ac_ext <<_ACEOF
+-/* end confdefs.h.  */
+-
+-#ifdef F77_DUMMY_MAIN
+-
+-#  ifdef __cplusplus
+-     extern "C"
+-#  endif
+-   int F77_DUMMY_MAIN() { return 1; }
+-
+-#endif
+-int
+-main ()
+-{
+-
+-  ;
+-  return 0;
+-}
+-_ACEOF
+-rm -f conftest.$ac_objext conftest$ac_exeext
+-if { (ac_try="$ac_link"
+-case "(($ac_try" in
+-  *\"* | *\`* | *\\*) ac_try_echo=\$ac_try;;
+-  *) ac_try_echo=$ac_try;;
+-esac
+-eval "echo \"\$as_me:$LINENO: $ac_try_echo\"") >&5
+-  (eval "$ac_link") 2>conftest.er1
+-  ac_status=$?
+-  grep -v '^ *+' conftest.er1 >conftest.err
+-  rm -f conftest.er1
+-  cat conftest.err >&5
+-  echo "$as_me:$LINENO: \$? = $ac_status" >&5
+-  (exit $ac_status); } && {
+-	 test -z "$ac_c_werror_flag" ||
+-	 test ! -s conftest.err
+-       } && test -s conftest$ac_exeext &&
+-       $as_test_x conftest$ac_exeext; then
+-  { echo "$as_me:$LINENO: result: yes" >&5
+-echo "${ECHO_T}yes" >&6; }
+-	  X_LIBS="$X_LIBS -R $x_libraries"
+-else
+-  echo "$as_me: failed program was:" >&5
+-sed 's/^/| /' conftest.$ac_ext >&5
+-
+-	{ echo "$as_me:$LINENO: result: neither works" >&5
+-echo "${ECHO_T}neither works" >&6; }
+-fi
+-
+-rm -f core conftest.err conftest.$ac_objext conftest_ipa8_conftest.oo \
+-      conftest$ac_exeext conftest.$ac_ext
+-fi
+-
+-rm -f core conftest.err conftest.$ac_objext conftest_ipa8_conftest.oo \
+-      conftest$ac_exeext conftest.$ac_ext
+-    ac_c_werror_flag=$ac_xsave_c_werror_flag
+-    LIBS=$ac_xsave_LIBS
+-  fi
+-
+-  # Check for system-dependent libraries X programs must link with.
+-  # Do this before checking for the system-independent R6 libraries
+-  # (-lICE), since we may need -lsocket or whatever for X linking.
+-
+-  if test "$ISC" = yes; then
+-    X_EXTRA_LIBS="$X_EXTRA_LIBS -lnsl_s -linet"
+-  else
+-    # Martyn Johnson says this is needed for Ultrix, if the X
+-    # libraries were built with DECnet support.  And Karl Berry says
+-    # the Alpha needs dnet_stub (dnet does not exist).
+-    ac_xsave_LIBS="$LIBS"; LIBS="$LIBS $X_LIBS -lX11"
+-    cat >conftest.$ac_ext <<_ACEOF
+-/* confdefs.h.  */
+-_ACEOF
+-cat confdefs.h >>conftest.$ac_ext
+-cat >>conftest.$ac_ext <<_ACEOF
+-/* end confdefs.h.  */
+-
+-/* Override any GCC internal prototype to avoid an error.
+-   Use char because int might match the return type of a GCC
+-   builtin and then its argument prototype would still apply.  */
+-#ifdef __cplusplus
+-extern "C"
+-#endif
+-char XOpenDisplay ();
+-#ifdef F77_DUMMY_MAIN
+-
+-#  ifdef __cplusplus
+-     extern "C"
+-#  endif
+-   int F77_DUMMY_MAIN() { return 1; }
+-
+-#endif
+-int
+-main ()
+-{
+-return XOpenDisplay ();
+-  ;
+-  return 0;
+-}
+-_ACEOF
+-rm -f conftest.$ac_objext conftest$ac_exeext
+-if { (ac_try="$ac_link"
+-case "(($ac_try" in
+-  *\"* | *\`* | *\\*) ac_try_echo=\$ac_try;;
+-  *) ac_try_echo=$ac_try;;
+-esac
+-eval "echo \"\$as_me:$LINENO: $ac_try_echo\"") >&5
+-  (eval "$ac_link") 2>conftest.er1
+-  ac_status=$?
+-  grep -v '^ *+' conftest.er1 >conftest.err
+-  rm -f conftest.er1
+-  cat conftest.err >&5
+-  echo "$as_me:$LINENO: \$? = $ac_status" >&5
+-  (exit $ac_status); } && {
+-	 test -z "$ac_c_werror_flag" ||
+-	 test ! -s conftest.err
+-       } && test -s conftest$ac_exeext &&
+-       $as_test_x conftest$ac_exeext; then
+-  :
+-else
+-  echo "$as_me: failed program was:" >&5
+-sed 's/^/| /' conftest.$ac_ext >&5
+-
+-	{ echo "$as_me:$LINENO: checking for dnet_ntoa in -ldnet" >&5
+-echo $ECHO_N "checking for dnet_ntoa in -ldnet... $ECHO_C" >&6; }
+-if test "${ac_cv_lib_dnet_dnet_ntoa+set}" = set; then
+-  echo $ECHO_N "(cached) $ECHO_C" >&6
+-else
+-  ac_check_lib_save_LIBS=$LIBS
+-LIBS="-ldnet  $LIBS"
+-cat >conftest.$ac_ext <<_ACEOF
+-/* confdefs.h.  */
+-_ACEOF
+-cat confdefs.h >>conftest.$ac_ext
+-cat >>conftest.$ac_ext <<_ACEOF
+-/* end confdefs.h.  */
+-
+-/* Override any GCC internal prototype to avoid an error.
+-   Use char because int might match the return type of a GCC
+-   builtin and then its argument prototype would still apply.  */
+-#ifdef __cplusplus
+-extern "C"
+-#endif
+-char dnet_ntoa ();
++  LIBS="-lX11 $LIBS"
++  cat confdefs.h - <<_ACEOF >conftest.$ac_ext
++/* end confdefs.h.  */
++#include <X11/Xlib.h>
+ #ifdef F77_DUMMY_MAIN
+ 
+ #  ifdef __cplusplus
+@@ -11525,71 +11281,94 @@ char dnet_ntoa ();
+ 
+ #endif
+ int
+-main ()
++main (void)
+ {
+-return dnet_ntoa ();
++XrmInitialize ()
+   ;
+   return 0;
+ }
+ _ACEOF
+-rm -f conftest.$ac_objext conftest$ac_exeext
+-if { (ac_try="$ac_link"
+-case "(($ac_try" in
+-  *\"* | *\`* | *\\*) ac_try_echo=\$ac_try;;
+-  *) ac_try_echo=$ac_try;;
+-esac
+-eval "echo \"\$as_me:$LINENO: $ac_try_echo\"") >&5
+-  (eval "$ac_link") 2>conftest.er1
+-  ac_status=$?
+-  grep -v '^ *+' conftest.er1 >conftest.err
+-  rm -f conftest.er1
+-  cat conftest.err >&5
+-  echo "$as_me:$LINENO: \$? = $ac_status" >&5
+-  (exit $ac_status); } && {
+-	 test -z "$ac_c_werror_flag" ||
+-	 test ! -s conftest.err
+-       } && test -s conftest$ac_exeext &&
+-       $as_test_x conftest$ac_exeext; then
+-  ac_cv_lib_dnet_dnet_ntoa=yes
+-else
+-  echo "$as_me: failed program was:" >&5
+-sed 's/^/| /' conftest.$ac_ext >&5
+-
+-	ac_cv_lib_dnet_dnet_ntoa=no
++if ac_fn_c_try_link "$LINENO"
++then :
++  LIBS=$ac_save_LIBS
++# We can link X programs with no special library path.
++ac_x_libraries=
++else $as_nop
++  LIBS=$ac_save_LIBS
++for ac_dir in `printf "%s\n" "$ac_x_includes $ac_x_header_dirs" | sed s/include/lib/g`
++do
++  # Don't even attempt the hair of trying to link an X program!
++  for ac_extension in a so sl dylib la dll; do
++    if test -r "$ac_dir/libX11.$ac_extension"; then
++      ac_x_libraries=$ac_dir
++      break 2
++    fi
++  done
++done
+ fi
++rm -f core conftest.err conftest.$ac_objext conftest.beam \
++    conftest$ac_exeext conftest.$ac_ext
++fi # $ac_x_libraries = no
+ 
+-rm -f core conftest.err conftest.$ac_objext conftest_ipa8_conftest.oo \
+-      conftest$ac_exeext conftest.$ac_ext
+-LIBS=$ac_check_lib_save_LIBS
+ fi
+-{ echo "$as_me:$LINENO: result: $ac_cv_lib_dnet_dnet_ntoa" >&5
+-echo "${ECHO_T}$ac_cv_lib_dnet_dnet_ntoa" >&6; }
+-if test $ac_cv_lib_dnet_dnet_ntoa = yes; then
+-  X_EXTRA_LIBS="$X_EXTRA_LIBS -ldnet"
++# Record the results.
++case $ac_x_includes,$ac_x_libraries in #(
++  no,* | *,no | *\'*) :
++    # Didn't find X, or a directory has "'" in its name.
++    ac_cv_have_x="have_x=no" ;; #(
++  *) :
++    # Record where we found X for the cache.
++    ac_cv_have_x="have_x=yes\
++	ac_x_includes='$ac_x_includes'\
++	ac_x_libraries='$ac_x_libraries'" ;;
++esac
+ fi
++;; #(
++    *) have_x=yes;;
++  esac
++  eval "$ac_cv_have_x"
++fi # $with_x != no
+ 
+-    if test $ac_cv_lib_dnet_dnet_ntoa = no; then
+-      { echo "$as_me:$LINENO: checking for dnet_ntoa in -ldnet_stub" >&5
+-echo $ECHO_N "checking for dnet_ntoa in -ldnet_stub... $ECHO_C" >&6; }
+-if test "${ac_cv_lib_dnet_stub_dnet_ntoa+set}" = set; then
+-  echo $ECHO_N "(cached) $ECHO_C" >&6
++if test "$have_x" != yes; then
++  { printf "%s\n" "$as_me:${as_lineno-$LINENO}: result: $have_x" >&5
++printf "%s\n" "$have_x" >&6; }
++  no_x=yes
+ else
+-  ac_check_lib_save_LIBS=$LIBS
+-LIBS="-ldnet_stub  $LIBS"
+-cat >conftest.$ac_ext <<_ACEOF
+-/* confdefs.h.  */
+-_ACEOF
+-cat confdefs.h >>conftest.$ac_ext
+-cat >>conftest.$ac_ext <<_ACEOF
++  # If each of the values was on the command line, it overrides each guess.
++  test "x$x_includes" = xNONE && x_includes=$ac_x_includes
++  test "x$x_libraries" = xNONE && x_libraries=$ac_x_libraries
++  # Update the cache value to reflect the command line values.
++  ac_cv_have_x="have_x=yes\
++	ac_x_includes='$x_includes'\
++	ac_x_libraries='$x_libraries'"
++  { printf "%s\n" "$as_me:${as_lineno-$LINENO}: result: libraries $x_libraries, headers $x_includes" >&5
++printf "%s\n" "libraries $x_libraries, headers $x_includes" >&6; }
++fi
++
++if test "$no_x" = yes; then
++  # Not all programs may use this symbol, but it does not hurt to define it.
++
++printf "%s\n" "#define X_DISPLAY_MISSING 1" >>confdefs.h
++
++  X_CFLAGS= X_PRE_LIBS= X_LIBS= X_EXTRA_LIBS=
++else
++  if test -n "$x_includes"; then
++    X_CFLAGS="$X_CFLAGS -I$x_includes"
++  fi
++
++  # It would also be nice to do this for all -L options, not just this one.
++  if test -n "$x_libraries"; then
++    X_LIBS="$X_LIBS -L$x_libraries"
++    # For Solaris; some versions of Sun CC require a space after -R and
++    # others require no space.  Words are not sufficient . . . .
++    { printf "%s\n" "$as_me:${as_lineno-$LINENO}: checking whether -R must be followed by a space" >&5
++printf %s "checking whether -R must be followed by a space... " >&6; }
++    ac_xsave_LIBS=$LIBS; LIBS="$LIBS -R$x_libraries"
++    ac_xsave_c_werror_flag=$ac_c_werror_flag
++    ac_c_werror_flag=yes
++    cat confdefs.h - <<_ACEOF >conftest.$ac_ext
+ /* end confdefs.h.  */
+ 
+-/* Override any GCC internal prototype to avoid an error.
+-   Use char because int might match the return type of a GCC
+-   builtin and then its argument prototype would still apply.  */
+-#ifdef __cplusplus
+-extern "C"
+-#endif
+-char dnet_ntoa ();
+ #ifdef F77_DUMMY_MAIN
+ 
+ #  ifdef __cplusplus
+@@ -11599,105 +11378,22 @@ char dnet_ntoa ();
+ 
+ #endif
+ int
+-main ()
++main (void)
+ {
+-return dnet_ntoa ();
++
+   ;
+   return 0;
+ }
+ _ACEOF
+-rm -f conftest.$ac_objext conftest$ac_exeext
+-if { (ac_try="$ac_link"
+-case "(($ac_try" in
+-  *\"* | *\`* | *\\*) ac_try_echo=\$ac_try;;
+-  *) ac_try_echo=$ac_try;;
+-esac
+-eval "echo \"\$as_me:$LINENO: $ac_try_echo\"") >&5
+-  (eval "$ac_link") 2>conftest.er1
+-  ac_status=$?
+-  grep -v '^ *+' conftest.er1 >conftest.err
+-  rm -f conftest.er1
+-  cat conftest.err >&5
+-  echo "$as_me:$LINENO: \$? = $ac_status" >&5
+-  (exit $ac_status); } && {
+-	 test -z "$ac_c_werror_flag" ||
+-	 test ! -s conftest.err
+-       } && test -s conftest$ac_exeext &&
+-       $as_test_x conftest$ac_exeext; then
+-  ac_cv_lib_dnet_stub_dnet_ntoa=yes
+-else
+-  echo "$as_me: failed program was:" >&5
+-sed 's/^/| /' conftest.$ac_ext >&5
+-
+-	ac_cv_lib_dnet_stub_dnet_ntoa=no
+-fi
+-
+-rm -f core conftest.err conftest.$ac_objext conftest_ipa8_conftest.oo \
+-      conftest$ac_exeext conftest.$ac_ext
+-LIBS=$ac_check_lib_save_LIBS
+-fi
+-{ echo "$as_me:$LINENO: result: $ac_cv_lib_dnet_stub_dnet_ntoa" >&5
+-echo "${ECHO_T}$ac_cv_lib_dnet_stub_dnet_ntoa" >&6; }
+-if test $ac_cv_lib_dnet_stub_dnet_ntoa = yes; then
+-  X_EXTRA_LIBS="$X_EXTRA_LIBS -ldnet_stub"
+-fi
+-
+-    fi
+-fi
+-
+-rm -f core conftest.err conftest.$ac_objext conftest_ipa8_conftest.oo \
+-      conftest$ac_exeext conftest.$ac_ext
+-    LIBS="$ac_xsave_LIBS"
+-
+-    # msh@cis.ufl.edu says -lnsl (and -lsocket) are needed for his 386/AT,
+-    # to get the SysV transport functions.
+-    # Chad R. Larson says the Pyramis MIS-ES running DC/OSx (SVR4)
+-    # needs -lnsl.
+-    # The nsl library prevents programs from opening the X display
+-    # on Irix 5.2, according to T.E. Dickey.
+-    # The functions gethostbyname, getservbyname, and inet_addr are
+-    # in -lbsd on LynxOS 3.0.1/i386, according to Lars Hecking.
+-    { echo "$as_me:$LINENO: checking for gethostbyname" >&5
+-echo $ECHO_N "checking for gethostbyname... $ECHO_C" >&6; }
+-if test "${ac_cv_func_gethostbyname+set}" = set; then
+-  echo $ECHO_N "(cached) $ECHO_C" >&6
+-else
+-  cat >conftest.$ac_ext <<_ACEOF
+-/* confdefs.h.  */
+-_ACEOF
+-cat confdefs.h >>conftest.$ac_ext
+-cat >>conftest.$ac_ext <<_ACEOF
++if ac_fn_c_try_link "$LINENO"
++then :
++  { printf "%s\n" "$as_me:${as_lineno-$LINENO}: result: no" >&5
++printf "%s\n" "no" >&6; }
++       X_LIBS="$X_LIBS -R$x_libraries"
++else $as_nop
++  LIBS="$ac_xsave_LIBS -R $x_libraries"
++       cat confdefs.h - <<_ACEOF >conftest.$ac_ext
+ /* end confdefs.h.  */
+-/* Define gethostbyname to an innocuous variant, in case <limits.h> declares gethostbyname.
+-   For example, HP-UX 11i <limits.h> declares gettimeofday.  */
+-#define gethostbyname innocuous_gethostbyname
+-
+-/* System header to define __stub macros and hopefully few prototypes,
+-    which can conflict with char gethostbyname (); below.
+-    Prefer <limits.h> to <assert.h> if __STDC__ is defined, since
+-    <limits.h> exists even on freestanding compilers.  */
+-
+-#ifdef __STDC__
+-# include <limits.h>
+-#else
+-# include <assert.h>
+-#endif
+-
+-#undef gethostbyname
+-
+-/* Override any GCC internal prototype to avoid an error.
+-   Use char because int might match the return type of a GCC
+-   builtin and then its argument prototype would still apply.  */
+-#ifdef __cplusplus
+-extern "C"
+-#endif
+-char gethostbyname ();
+-/* The GNU C library defines this for functions which it implements
+-    to always fail with ENOSYS.  Some functions are actually named
+-    something starting with __ and the normal name is an alias.  */
+-#if defined __stub_gethostbyname || defined __stub___gethostbyname
+-choke me
+-#endif
+ 
+ #ifdef F77_DUMMY_MAIN
+ 
+@@ -11708,67 +11404,49 @@ choke me
+ 
+ #endif
+ int
+-main ()
++main (void)
+ {
+-return gethostbyname ();
++
+   ;
+   return 0;
+ }
+ _ACEOF
+-rm -f conftest.$ac_objext conftest$ac_exeext
+-if { (ac_try="$ac_link"
+-case "(($ac_try" in
+-  *\"* | *\`* | *\\*) ac_try_echo=\$ac_try;;
+-  *) ac_try_echo=$ac_try;;
+-esac
+-eval "echo \"\$as_me:$LINENO: $ac_try_echo\"") >&5
+-  (eval "$ac_link") 2>conftest.er1
+-  ac_status=$?
+-  grep -v '^ *+' conftest.er1 >conftest.err
+-  rm -f conftest.er1
+-  cat conftest.err >&5
+-  echo "$as_me:$LINENO: \$? = $ac_status" >&5
+-  (exit $ac_status); } && {
+-	 test -z "$ac_c_werror_flag" ||
+-	 test ! -s conftest.err
+-       } && test -s conftest$ac_exeext &&
+-       $as_test_x conftest$ac_exeext; then
+-  ac_cv_func_gethostbyname=yes
+-else
+-  echo "$as_me: failed program was:" >&5
+-sed 's/^/| /' conftest.$ac_ext >&5
+-
+-	ac_cv_func_gethostbyname=no
++if ac_fn_c_try_link "$LINENO"
++then :
++  { printf "%s\n" "$as_me:${as_lineno-$LINENO}: result: yes" >&5
++printf "%s\n" "yes" >&6; }
++	  X_LIBS="$X_LIBS -R $x_libraries"
++else $as_nop
++  { printf "%s\n" "$as_me:${as_lineno-$LINENO}: result: neither works" >&5
++printf "%s\n" "neither works" >&6; }
+ fi
+-
+-rm -f core conftest.err conftest.$ac_objext conftest_ipa8_conftest.oo \
+-      conftest$ac_exeext conftest.$ac_ext
++rm -f core conftest.err conftest.$ac_objext conftest.beam \
++    conftest$ac_exeext conftest.$ac_ext
+ fi
+-{ echo "$as_me:$LINENO: result: $ac_cv_func_gethostbyname" >&5
+-echo "${ECHO_T}$ac_cv_func_gethostbyname" >&6; }
++rm -f core conftest.err conftest.$ac_objext conftest.beam \
++    conftest$ac_exeext conftest.$ac_ext
++    ac_c_werror_flag=$ac_xsave_c_werror_flag
++    LIBS=$ac_xsave_LIBS
++  fi
+ 
+-    if test $ac_cv_func_gethostbyname = no; then
+-      { echo "$as_me:$LINENO: checking for gethostbyname in -lnsl" >&5
+-echo $ECHO_N "checking for gethostbyname in -lnsl... $ECHO_C" >&6; }
+-if test "${ac_cv_lib_nsl_gethostbyname+set}" = set; then
+-  echo $ECHO_N "(cached) $ECHO_C" >&6
+-else
+-  ac_check_lib_save_LIBS=$LIBS
+-LIBS="-lnsl  $LIBS"
+-cat >conftest.$ac_ext <<_ACEOF
+-/* confdefs.h.  */
+-_ACEOF
+-cat confdefs.h >>conftest.$ac_ext
+-cat >>conftest.$ac_ext <<_ACEOF
++  # Check for system-dependent libraries X programs must link with.
++  # Do this before checking for the system-independent R6 libraries
++  # (-lICE), since we may need -lsocket or whatever for X linking.
++
++  if test "$ISC" = yes; then
++    X_EXTRA_LIBS="$X_EXTRA_LIBS -lnsl_s -linet"
++  else
++    # Martyn Johnson says this is needed for Ultrix, if the X
++    # libraries were built with DECnet support.  And Karl Berry says
++    # the Alpha needs dnet_stub (dnet does not exist).
++    ac_xsave_LIBS="$LIBS"; LIBS="$LIBS $X_LIBS -lX11"
++    cat confdefs.h - <<_ACEOF >conftest.$ac_ext
+ /* end confdefs.h.  */
+ 
+ /* Override any GCC internal prototype to avoid an error.
+    Use char because int might match the return type of a GCC
+    builtin and then its argument prototype would still apply.  */
+-#ifdef __cplusplus
+-extern "C"
+-#endif
+-char gethostbyname ();
++char XOpenDisplay ();
+ #ifdef F77_DUMMY_MAIN
+ 
+ #  ifdef __cplusplus
+@@ -11778,71 +11456,32 @@ char gethostbyname ();
+ 
+ #endif
+ int
+-main ()
++main (void)
+ {
+-return gethostbyname ();
++return XOpenDisplay ();
+   ;
+   return 0;
+ }
+ _ACEOF
+-rm -f conftest.$ac_objext conftest$ac_exeext
+-if { (ac_try="$ac_link"
+-case "(($ac_try" in
+-  *\"* | *\`* | *\\*) ac_try_echo=\$ac_try;;
+-  *) ac_try_echo=$ac_try;;
+-esac
+-eval "echo \"\$as_me:$LINENO: $ac_try_echo\"") >&5
+-  (eval "$ac_link") 2>conftest.er1
+-  ac_status=$?
+-  grep -v '^ *+' conftest.er1 >conftest.err
+-  rm -f conftest.er1
+-  cat conftest.err >&5
+-  echo "$as_me:$LINENO: \$? = $ac_status" >&5
+-  (exit $ac_status); } && {
+-	 test -z "$ac_c_werror_flag" ||
+-	 test ! -s conftest.err
+-       } && test -s conftest$ac_exeext &&
+-       $as_test_x conftest$ac_exeext; then
+-  ac_cv_lib_nsl_gethostbyname=yes
+-else
+-  echo "$as_me: failed program was:" >&5
+-sed 's/^/| /' conftest.$ac_ext >&5
+-
+-	ac_cv_lib_nsl_gethostbyname=no
+-fi
+-
+-rm -f core conftest.err conftest.$ac_objext conftest_ipa8_conftest.oo \
+-      conftest$ac_exeext conftest.$ac_ext
+-LIBS=$ac_check_lib_save_LIBS
+-fi
+-{ echo "$as_me:$LINENO: result: $ac_cv_lib_nsl_gethostbyname" >&5
+-echo "${ECHO_T}$ac_cv_lib_nsl_gethostbyname" >&6; }
+-if test $ac_cv_lib_nsl_gethostbyname = yes; then
+-  X_EXTRA_LIBS="$X_EXTRA_LIBS -lnsl"
+-fi
++if ac_fn_c_try_link "$LINENO"
++then :
+ 
+-      if test $ac_cv_lib_nsl_gethostbyname = no; then
+-	{ echo "$as_me:$LINENO: checking for gethostbyname in -lbsd" >&5
+-echo $ECHO_N "checking for gethostbyname in -lbsd... $ECHO_C" >&6; }
+-if test "${ac_cv_lib_bsd_gethostbyname+set}" = set; then
+-  echo $ECHO_N "(cached) $ECHO_C" >&6
+-else
++else $as_nop
++  { printf "%s\n" "$as_me:${as_lineno-$LINENO}: checking for dnet_ntoa in -ldnet" >&5
++printf %s "checking for dnet_ntoa in -ldnet... " >&6; }
++if test ${ac_cv_lib_dnet_dnet_ntoa+y}
++then :
++  printf %s "(cached) " >&6
++else $as_nop
+   ac_check_lib_save_LIBS=$LIBS
+-LIBS="-lbsd  $LIBS"
+-cat >conftest.$ac_ext <<_ACEOF
+-/* confdefs.h.  */
+-_ACEOF
+-cat confdefs.h >>conftest.$ac_ext
+-cat >>conftest.$ac_ext <<_ACEOF
++LIBS="-ldnet  $LIBS"
++cat confdefs.h - <<_ACEOF >conftest.$ac_ext
+ /* end confdefs.h.  */
+ 
+ /* Override any GCC internal prototype to avoid an error.
+    Use char because int might match the return type of a GCC
+    builtin and then its argument prototype would still apply.  */
+-#ifdef __cplusplus
+-extern "C"
+-#endif
+-char gethostbyname ();
++char dnet_ntoa ();
+ #ifdef F77_DUMMY_MAIN
+ 
+ #  ifdef __cplusplus
+@@ -11852,101 +11491,46 @@ char gethostbyname ();
+ 
+ #endif
+ int
+-main ()
++main (void)
+ {
+-return gethostbyname ();
++return dnet_ntoa ();
+   ;
+   return 0;
+ }
+ _ACEOF
+-rm -f conftest.$ac_objext conftest$ac_exeext
+-if { (ac_try="$ac_link"
+-case "(($ac_try" in
+-  *\"* | *\`* | *\\*) ac_try_echo=\$ac_try;;
+-  *) ac_try_echo=$ac_try;;
+-esac
+-eval "echo \"\$as_me:$LINENO: $ac_try_echo\"") >&5
+-  (eval "$ac_link") 2>conftest.er1
+-  ac_status=$?
+-  grep -v '^ *+' conftest.er1 >conftest.err
+-  rm -f conftest.er1
+-  cat conftest.err >&5
+-  echo "$as_me:$LINENO: \$? = $ac_status" >&5
+-  (exit $ac_status); } && {
+-	 test -z "$ac_c_werror_flag" ||
+-	 test ! -s conftest.err
+-       } && test -s conftest$ac_exeext &&
+-       $as_test_x conftest$ac_exeext; then
+-  ac_cv_lib_bsd_gethostbyname=yes
+-else
+-  echo "$as_me: failed program was:" >&5
+-sed 's/^/| /' conftest.$ac_ext >&5
+-
+-	ac_cv_lib_bsd_gethostbyname=no
++if ac_fn_c_try_link "$LINENO"
++then :
++  ac_cv_lib_dnet_dnet_ntoa=yes
++else $as_nop
++  ac_cv_lib_dnet_dnet_ntoa=no
+ fi
+-
+-rm -f core conftest.err conftest.$ac_objext conftest_ipa8_conftest.oo \
+-      conftest$ac_exeext conftest.$ac_ext
++rm -f core conftest.err conftest.$ac_objext conftest.beam \
++    conftest$ac_exeext conftest.$ac_ext
+ LIBS=$ac_check_lib_save_LIBS
+ fi
+-{ echo "$as_me:$LINENO: result: $ac_cv_lib_bsd_gethostbyname" >&5
+-echo "${ECHO_T}$ac_cv_lib_bsd_gethostbyname" >&6; }
+-if test $ac_cv_lib_bsd_gethostbyname = yes; then
+-  X_EXTRA_LIBS="$X_EXTRA_LIBS -lbsd"
++{ printf "%s\n" "$as_me:${as_lineno-$LINENO}: result: $ac_cv_lib_dnet_dnet_ntoa" >&5
++printf "%s\n" "$ac_cv_lib_dnet_dnet_ntoa" >&6; }
++if test "x$ac_cv_lib_dnet_dnet_ntoa" = xyes
++then :
++  X_EXTRA_LIBS="$X_EXTRA_LIBS -ldnet"
+ fi
+ 
+-      fi
+-    fi
+-
+-    # lieder@skyler.mavd.honeywell.com says without -lsocket,
+-    # socket/setsockopt and other routines are undefined under SCO ODT
+-    # 2.0.  But -lsocket is broken on IRIX 5.2 (and is not necessary
+-    # on later versions), says Simon Leinen: it contains gethostby*
+-    # variants that don't use the name server (or something).  -lsocket
+-    # must be given before -lnsl if both are needed.  We assume that
+-    # if connect needs -lnsl, so does gethostbyname.
+-    { echo "$as_me:$LINENO: checking for connect" >&5
+-echo $ECHO_N "checking for connect... $ECHO_C" >&6; }
+-if test "${ac_cv_func_connect+set}" = set; then
+-  echo $ECHO_N "(cached) $ECHO_C" >&6
+-else
+-  cat >conftest.$ac_ext <<_ACEOF
+-/* confdefs.h.  */
+-_ACEOF
+-cat confdefs.h >>conftest.$ac_ext
+-cat >>conftest.$ac_ext <<_ACEOF
+-/* end confdefs.h.  */
+-/* Define connect to an innocuous variant, in case <limits.h> declares connect.
+-   For example, HP-UX 11i <limits.h> declares gettimeofday.  */
+-#define connect innocuous_connect
+-
+-/* System header to define __stub macros and hopefully few prototypes,
+-    which can conflict with char connect (); below.
+-    Prefer <limits.h> to <assert.h> if __STDC__ is defined, since
+-    <limits.h> exists even on freestanding compilers.  */
+-
+-#ifdef __STDC__
+-# include <limits.h>
+-#else
+-# include <assert.h>
+-#endif
+-
+-#undef connect
+-
+-/* Override any GCC internal prototype to avoid an error.
+-   Use char because int might match the return type of a GCC
+-   builtin and then its argument prototype would still apply.  */
+-#ifdef __cplusplus
+-extern "C"
+-#endif
+-char connect ();
+-/* The GNU C library defines this for functions which it implements
+-    to always fail with ENOSYS.  Some functions are actually named
+-    something starting with __ and the normal name is an alias.  */
+-#if defined __stub_connect || defined __stub___connect
+-choke me
+-#endif
++    if test $ac_cv_lib_dnet_dnet_ntoa = no; then
++      { printf "%s\n" "$as_me:${as_lineno-$LINENO}: checking for dnet_ntoa in -ldnet_stub" >&5
++printf %s "checking for dnet_ntoa in -ldnet_stub... " >&6; }
++if test ${ac_cv_lib_dnet_stub_dnet_ntoa+y}
++then :
++  printf %s "(cached) " >&6
++else $as_nop
++  ac_check_lib_save_LIBS=$LIBS
++LIBS="-ldnet_stub  $LIBS"
++cat confdefs.h - <<_ACEOF >conftest.$ac_ext
++/* end confdefs.h.  */
+ 
++/* Override any GCC internal prototype to avoid an error.
++   Use char because int might match the return type of a GCC
++   builtin and then its argument prototype would still apply.  */
++char dnet_ntoa ();
+ #ifdef F77_DUMMY_MAIN
+ 
+ #  ifdef __cplusplus
+@@ -11956,67 +11540,66 @@ choke me
+ 
+ #endif
+ int
+-main ()
++main (void)
+ {
+-return connect ();
++return dnet_ntoa ();
+   ;
+   return 0;
+ }
+ _ACEOF
+-rm -f conftest.$ac_objext conftest$ac_exeext
+-if { (ac_try="$ac_link"
+-case "(($ac_try" in
+-  *\"* | *\`* | *\\*) ac_try_echo=\$ac_try;;
+-  *) ac_try_echo=$ac_try;;
+-esac
+-eval "echo \"\$as_me:$LINENO: $ac_try_echo\"") >&5
+-  (eval "$ac_link") 2>conftest.er1
+-  ac_status=$?
+-  grep -v '^ *+' conftest.er1 >conftest.err
+-  rm -f conftest.er1
+-  cat conftest.err >&5
+-  echo "$as_me:$LINENO: \$? = $ac_status" >&5
+-  (exit $ac_status); } && {
+-	 test -z "$ac_c_werror_flag" ||
+-	 test ! -s conftest.err
+-       } && test -s conftest$ac_exeext &&
+-       $as_test_x conftest$ac_exeext; then
+-  ac_cv_func_connect=yes
+-else
+-  echo "$as_me: failed program was:" >&5
+-sed 's/^/| /' conftest.$ac_ext >&5
++if ac_fn_c_try_link "$LINENO"
++then :
++  ac_cv_lib_dnet_stub_dnet_ntoa=yes
++else $as_nop
++  ac_cv_lib_dnet_stub_dnet_ntoa=no
++fi
++rm -f core conftest.err conftest.$ac_objext conftest.beam \
++    conftest$ac_exeext conftest.$ac_ext
++LIBS=$ac_check_lib_save_LIBS
++fi
++{ printf "%s\n" "$as_me:${as_lineno-$LINENO}: result: $ac_cv_lib_dnet_stub_dnet_ntoa" >&5
++printf "%s\n" "$ac_cv_lib_dnet_stub_dnet_ntoa" >&6; }
++if test "x$ac_cv_lib_dnet_stub_dnet_ntoa" = xyes
++then :
++  X_EXTRA_LIBS="$X_EXTRA_LIBS -ldnet_stub"
++fi
+ 
+-	ac_cv_func_connect=no
++    fi
+ fi
++rm -f core conftest.err conftest.$ac_objext conftest.beam \
++    conftest$ac_exeext conftest.$ac_ext
++    LIBS="$ac_xsave_LIBS"
++
++    # msh@cis.ufl.edu says -lnsl (and -lsocket) are needed for his 386/AT,
++    # to get the SysV transport functions.
++    # Chad R. Larson says the Pyramis MIS-ES running DC/OSx (SVR4)
++    # needs -lnsl.
++    # The nsl library prevents programs from opening the X display
++    # on Irix 5.2, according to T.E. Dickey.
++    # The functions gethostbyname, getservbyname, and inet_addr are
++    # in -lbsd on LynxOS 3.0.1/i386, according to Lars Hecking.
++    ac_fn_c_check_func "$LINENO" "gethostbyname" "ac_cv_func_gethostbyname"
++if test "x$ac_cv_func_gethostbyname" = xyes
++then :
+ 
+-rm -f core conftest.err conftest.$ac_objext conftest_ipa8_conftest.oo \
+-      conftest$ac_exeext conftest.$ac_ext
+ fi
+-{ echo "$as_me:$LINENO: result: $ac_cv_func_connect" >&5
+-echo "${ECHO_T}$ac_cv_func_connect" >&6; }
+ 
+-    if test $ac_cv_func_connect = no; then
+-      { echo "$as_me:$LINENO: checking for connect in -lsocket" >&5
+-echo $ECHO_N "checking for connect in -lsocket... $ECHO_C" >&6; }
+-if test "${ac_cv_lib_socket_connect+set}" = set; then
+-  echo $ECHO_N "(cached) $ECHO_C" >&6
+-else
++    if test $ac_cv_func_gethostbyname = no; then
++      { printf "%s\n" "$as_me:${as_lineno-$LINENO}: checking for gethostbyname in -lnsl" >&5
++printf %s "checking for gethostbyname in -lnsl... " >&6; }
++if test ${ac_cv_lib_nsl_gethostbyname+y}
++then :
++  printf %s "(cached) " >&6
++else $as_nop
+   ac_check_lib_save_LIBS=$LIBS
+-LIBS="-lsocket $X_EXTRA_LIBS $LIBS"
+-cat >conftest.$ac_ext <<_ACEOF
+-/* confdefs.h.  */
+-_ACEOF
+-cat confdefs.h >>conftest.$ac_ext
+-cat >>conftest.$ac_ext <<_ACEOF
++LIBS="-lnsl  $LIBS"
++cat confdefs.h - <<_ACEOF >conftest.$ac_ext
+ /* end confdefs.h.  */
+ 
+ /* Override any GCC internal prototype to avoid an error.
+    Use char because int might match the return type of a GCC
+    builtin and then its argument prototype would still apply.  */
+-#ifdef __cplusplus
+-extern "C"
+-#endif
+-char connect ();
++char gethostbyname ();
+ #ifdef F77_DUMMY_MAIN
+ 
+ #  ifdef __cplusplus
+@@ -12026,94 +11609,46 @@ char connect ();
+ 
+ #endif
+ int
+-main ()
++main (void)
+ {
+-return connect ();
++return gethostbyname ();
+   ;
+   return 0;
+ }
+ _ACEOF
+-rm -f conftest.$ac_objext conftest$ac_exeext
+-if { (ac_try="$ac_link"
+-case "(($ac_try" in
+-  *\"* | *\`* | *\\*) ac_try_echo=\$ac_try;;
+-  *) ac_try_echo=$ac_try;;
+-esac
+-eval "echo \"\$as_me:$LINENO: $ac_try_echo\"") >&5
+-  (eval "$ac_link") 2>conftest.er1
+-  ac_status=$?
+-  grep -v '^ *+' conftest.er1 >conftest.err
+-  rm -f conftest.er1
+-  cat conftest.err >&5
+-  echo "$as_me:$LINENO: \$? = $ac_status" >&5
+-  (exit $ac_status); } && {
+-	 test -z "$ac_c_werror_flag" ||
+-	 test ! -s conftest.err
+-       } && test -s conftest$ac_exeext &&
+-       $as_test_x conftest$ac_exeext; then
+-  ac_cv_lib_socket_connect=yes
+-else
+-  echo "$as_me: failed program was:" >&5
+-sed 's/^/| /' conftest.$ac_ext >&5
+-
+-	ac_cv_lib_socket_connect=no
++if ac_fn_c_try_link "$LINENO"
++then :
++  ac_cv_lib_nsl_gethostbyname=yes
++else $as_nop
++  ac_cv_lib_nsl_gethostbyname=no
+ fi
+-
+-rm -f core conftest.err conftest.$ac_objext conftest_ipa8_conftest.oo \
+-      conftest$ac_exeext conftest.$ac_ext
++rm -f core conftest.err conftest.$ac_objext conftest.beam \
++    conftest$ac_exeext conftest.$ac_ext
+ LIBS=$ac_check_lib_save_LIBS
+ fi
+-{ echo "$as_me:$LINENO: result: $ac_cv_lib_socket_connect" >&5
+-echo "${ECHO_T}$ac_cv_lib_socket_connect" >&6; }
+-if test $ac_cv_lib_socket_connect = yes; then
+-  X_EXTRA_LIBS="-lsocket $X_EXTRA_LIBS"
++{ printf "%s\n" "$as_me:${as_lineno-$LINENO}: result: $ac_cv_lib_nsl_gethostbyname" >&5
++printf "%s\n" "$ac_cv_lib_nsl_gethostbyname" >&6; }
++if test "x$ac_cv_lib_nsl_gethostbyname" = xyes
++then :
++  X_EXTRA_LIBS="$X_EXTRA_LIBS -lnsl"
+ fi
+ 
+-    fi
+-
+-    # Guillermo Gomez says -lposix is necessary on A/UX.
+-    { echo "$as_me:$LINENO: checking for remove" >&5
+-echo $ECHO_N "checking for remove... $ECHO_C" >&6; }
+-if test "${ac_cv_func_remove+set}" = set; then
+-  echo $ECHO_N "(cached) $ECHO_C" >&6
+-else
+-  cat >conftest.$ac_ext <<_ACEOF
+-/* confdefs.h.  */
+-_ACEOF
+-cat confdefs.h >>conftest.$ac_ext
+-cat >>conftest.$ac_ext <<_ACEOF
++      if test $ac_cv_lib_nsl_gethostbyname = no; then
++	{ printf "%s\n" "$as_me:${as_lineno-$LINENO}: checking for gethostbyname in -lbsd" >&5
++printf %s "checking for gethostbyname in -lbsd... " >&6; }
++if test ${ac_cv_lib_bsd_gethostbyname+y}
++then :
++  printf %s "(cached) " >&6
++else $as_nop
++  ac_check_lib_save_LIBS=$LIBS
++LIBS="-lbsd  $LIBS"
++cat confdefs.h - <<_ACEOF >conftest.$ac_ext
+ /* end confdefs.h.  */
+-/* Define remove to an innocuous variant, in case <limits.h> declares remove.
+-   For example, HP-UX 11i <limits.h> declares gettimeofday.  */
+-#define remove innocuous_remove
+-
+-/* System header to define __stub macros and hopefully few prototypes,
+-    which can conflict with char remove (); below.
+-    Prefer <limits.h> to <assert.h> if __STDC__ is defined, since
+-    <limits.h> exists even on freestanding compilers.  */
+-
+-#ifdef __STDC__
+-# include <limits.h>
+-#else
+-# include <assert.h>
+-#endif
+-
+-#undef remove
+ 
+ /* Override any GCC internal prototype to avoid an error.
+    Use char because int might match the return type of a GCC
+    builtin and then its argument prototype would still apply.  */
+-#ifdef __cplusplus
+-extern "C"
+-#endif
+-char remove ();
+-/* The GNU C library defines this for functions which it implements
+-    to always fail with ENOSYS.  Some functions are actually named
+-    something starting with __ and the normal name is an alias.  */
+-#if defined __stub_remove || defined __stub___remove
+-choke me
+-#endif
+-
++char gethostbyname ();
+ #ifdef F77_DUMMY_MAIN
+ 
+ #  ifdef __cplusplus
+@@ -12123,67 +11658,62 @@ choke me
+ 
+ #endif
+ int
+-main ()
++main (void)
+ {
+-return remove ();
++return gethostbyname ();
+   ;
+   return 0;
+ }
+ _ACEOF
+-rm -f conftest.$ac_objext conftest$ac_exeext
+-if { (ac_try="$ac_link"
+-case "(($ac_try" in
+-  *\"* | *\`* | *\\*) ac_try_echo=\$ac_try;;
+-  *) ac_try_echo=$ac_try;;
+-esac
+-eval "echo \"\$as_me:$LINENO: $ac_try_echo\"") >&5
+-  (eval "$ac_link") 2>conftest.er1
+-  ac_status=$?
+-  grep -v '^ *+' conftest.er1 >conftest.err
+-  rm -f conftest.er1
+-  cat conftest.err >&5
+-  echo "$as_me:$LINENO: \$? = $ac_status" >&5
+-  (exit $ac_status); } && {
+-	 test -z "$ac_c_werror_flag" ||
+-	 test ! -s conftest.err
+-       } && test -s conftest$ac_exeext &&
+-       $as_test_x conftest$ac_exeext; then
+-  ac_cv_func_remove=yes
+-else
+-  echo "$as_me: failed program was:" >&5
+-sed 's/^/| /' conftest.$ac_ext >&5
+-
+-	ac_cv_func_remove=no
++if ac_fn_c_try_link "$LINENO"
++then :
++  ac_cv_lib_bsd_gethostbyname=yes
++else $as_nop
++  ac_cv_lib_bsd_gethostbyname=no
++fi
++rm -f core conftest.err conftest.$ac_objext conftest.beam \
++    conftest$ac_exeext conftest.$ac_ext
++LIBS=$ac_check_lib_save_LIBS
+ fi
++{ printf "%s\n" "$as_me:${as_lineno-$LINENO}: result: $ac_cv_lib_bsd_gethostbyname" >&5
++printf "%s\n" "$ac_cv_lib_bsd_gethostbyname" >&6; }
++if test "x$ac_cv_lib_bsd_gethostbyname" = xyes
++then :
++  X_EXTRA_LIBS="$X_EXTRA_LIBS -lbsd"
++fi
++
++      fi
++    fi
++
++    # lieder@skyler.mavd.honeywell.com says without -lsocket,
++    # socket/setsockopt and other routines are undefined under SCO ODT
++    # 2.0.  But -lsocket is broken on IRIX 5.2 (and is not necessary
++    # on later versions), says Simon Leinen: it contains gethostby*
++    # variants that don't use the name server (or something).  -lsocket
++    # must be given before -lnsl if both are needed.  We assume that
++    # if connect needs -lnsl, so does gethostbyname.
++    ac_fn_c_check_func "$LINENO" "connect" "ac_cv_func_connect"
++if test "x$ac_cv_func_connect" = xyes
++then :
+ 
+-rm -f core conftest.err conftest.$ac_objext conftest_ipa8_conftest.oo \
+-      conftest$ac_exeext conftest.$ac_ext
+ fi
+-{ echo "$as_me:$LINENO: result: $ac_cv_func_remove" >&5
+-echo "${ECHO_T}$ac_cv_func_remove" >&6; }
+ 
+-    if test $ac_cv_func_remove = no; then
+-      { echo "$as_me:$LINENO: checking for remove in -lposix" >&5
+-echo $ECHO_N "checking for remove in -lposix... $ECHO_C" >&6; }
+-if test "${ac_cv_lib_posix_remove+set}" = set; then
+-  echo $ECHO_N "(cached) $ECHO_C" >&6
+-else
++    if test $ac_cv_func_connect = no; then
++      { printf "%s\n" "$as_me:${as_lineno-$LINENO}: checking for connect in -lsocket" >&5
++printf %s "checking for connect in -lsocket... " >&6; }
++if test ${ac_cv_lib_socket_connect+y}
++then :
++  printf %s "(cached) " >&6
++else $as_nop
+   ac_check_lib_save_LIBS=$LIBS
+-LIBS="-lposix  $LIBS"
+-cat >conftest.$ac_ext <<_ACEOF
+-/* confdefs.h.  */
+-_ACEOF
+-cat confdefs.h >>conftest.$ac_ext
+-cat >>conftest.$ac_ext <<_ACEOF
++LIBS="-lsocket $X_EXTRA_LIBS $LIBS"
++cat confdefs.h - <<_ACEOF >conftest.$ac_ext
+ /* end confdefs.h.  */
+ 
+ /* Override any GCC internal prototype to avoid an error.
+    Use char because int might match the return type of a GCC
+    builtin and then its argument prototype would still apply.  */
+-#ifdef __cplusplus
+-extern "C"
+-#endif
+-char remove ();
++char connect ();
+ #ifdef F77_DUMMY_MAIN
+ 
+ #  ifdef __cplusplus
+@@ -12193,94 +11723,55 @@ char remove ();
+ 
+ #endif
+ int
+-main ()
++main (void)
+ {
+-return remove ();
++return connect ();
+   ;
+   return 0;
+ }
+ _ACEOF
+-rm -f conftest.$ac_objext conftest$ac_exeext
+-if { (ac_try="$ac_link"
+-case "(($ac_try" in
+-  *\"* | *\`* | *\\*) ac_try_echo=\$ac_try;;
+-  *) ac_try_echo=$ac_try;;
+-esac
+-eval "echo \"\$as_me:$LINENO: $ac_try_echo\"") >&5
+-  (eval "$ac_link") 2>conftest.er1
+-  ac_status=$?
+-  grep -v '^ *+' conftest.er1 >conftest.err
+-  rm -f conftest.er1
+-  cat conftest.err >&5
+-  echo "$as_me:$LINENO: \$? = $ac_status" >&5
+-  (exit $ac_status); } && {
+-	 test -z "$ac_c_werror_flag" ||
+-	 test ! -s conftest.err
+-       } && test -s conftest$ac_exeext &&
+-       $as_test_x conftest$ac_exeext; then
+-  ac_cv_lib_posix_remove=yes
+-else
+-  echo "$as_me: failed program was:" >&5
+-sed 's/^/| /' conftest.$ac_ext >&5
+-
+-	ac_cv_lib_posix_remove=no
++if ac_fn_c_try_link "$LINENO"
++then :
++  ac_cv_lib_socket_connect=yes
++else $as_nop
++  ac_cv_lib_socket_connect=no
+ fi
+-
+-rm -f core conftest.err conftest.$ac_objext conftest_ipa8_conftest.oo \
+-      conftest$ac_exeext conftest.$ac_ext
++rm -f core conftest.err conftest.$ac_objext conftest.beam \
++    conftest$ac_exeext conftest.$ac_ext
+ LIBS=$ac_check_lib_save_LIBS
+ fi
+-{ echo "$as_me:$LINENO: result: $ac_cv_lib_posix_remove" >&5
+-echo "${ECHO_T}$ac_cv_lib_posix_remove" >&6; }
+-if test $ac_cv_lib_posix_remove = yes; then
+-  X_EXTRA_LIBS="$X_EXTRA_LIBS -lposix"
++{ printf "%s\n" "$as_me:${as_lineno-$LINENO}: result: $ac_cv_lib_socket_connect" >&5
++printf "%s\n" "$ac_cv_lib_socket_connect" >&6; }
++if test "x$ac_cv_lib_socket_connect" = xyes
++then :
++  X_EXTRA_LIBS="-lsocket $X_EXTRA_LIBS"
+ fi
+ 
+     fi
+ 
+-    # BSDI BSD/OS 2.1 needs -lipc for XOpenDisplay.
+-    { echo "$as_me:$LINENO: checking for shmat" >&5
+-echo $ECHO_N "checking for shmat... $ECHO_C" >&6; }
+-if test "${ac_cv_func_shmat+set}" = set; then
+-  echo $ECHO_N "(cached) $ECHO_C" >&6
+-else
+-  cat >conftest.$ac_ext <<_ACEOF
+-/* confdefs.h.  */
+-_ACEOF
+-cat confdefs.h >>conftest.$ac_ext
+-cat >>conftest.$ac_ext <<_ACEOF
+-/* end confdefs.h.  */
+-/* Define shmat to an innocuous variant, in case <limits.h> declares shmat.
+-   For example, HP-UX 11i <limits.h> declares gettimeofday.  */
+-#define shmat innocuous_shmat
+-
+-/* System header to define __stub macros and hopefully few prototypes,
+-    which can conflict with char shmat (); below.
+-    Prefer <limits.h> to <assert.h> if __STDC__ is defined, since
+-    <limits.h> exists even on freestanding compilers.  */
++    # Guillermo Gomez says -lposix is necessary on A/UX.
++    ac_fn_c_check_func "$LINENO" "remove" "ac_cv_func_remove"
++if test "x$ac_cv_func_remove" = xyes
++then :
+ 
+-#ifdef __STDC__
+-# include <limits.h>
+-#else
+-# include <assert.h>
+-#endif
++fi
+ 
+-#undef shmat
++    if test $ac_cv_func_remove = no; then
++      { printf "%s\n" "$as_me:${as_lineno-$LINENO}: checking for remove in -lposix" >&5
++printf %s "checking for remove in -lposix... " >&6; }
++if test ${ac_cv_lib_posix_remove+y}
++then :
++  printf %s "(cached) " >&6
++else $as_nop
++  ac_check_lib_save_LIBS=$LIBS
++LIBS="-lposix  $LIBS"
++cat confdefs.h - <<_ACEOF >conftest.$ac_ext
++/* end confdefs.h.  */
+ 
+ /* Override any GCC internal prototype to avoid an error.
+    Use char because int might match the return type of a GCC
+    builtin and then its argument prototype would still apply.  */
+-#ifdef __cplusplus
+-extern "C"
+-#endif
+-char shmat ();
+-/* The GNU C library defines this for functions which it implements
+-    to always fail with ENOSYS.  Some functions are actually named
+-    something starting with __ and the normal name is an alias.  */
+-#if defined __stub_shmat || defined __stub___shmat
+-choke me
+-#endif
+-
++char remove ();
+ #ifdef F77_DUMMY_MAIN
+ 
+ #  ifdef __cplusplus
+@@ -12290,66 +11781,54 @@ choke me
+ 
+ #endif
+ int
+-main ()
++main (void)
+ {
+-return shmat ();
++return remove ();
+   ;
+   return 0;
+ }
+ _ACEOF
+-rm -f conftest.$ac_objext conftest$ac_exeext
+-if { (ac_try="$ac_link"
+-case "(($ac_try" in
+-  *\"* | *\`* | *\\*) ac_try_echo=\$ac_try;;
+-  *) ac_try_echo=$ac_try;;
+-esac
+-eval "echo \"\$as_me:$LINENO: $ac_try_echo\"") >&5
+-  (eval "$ac_link") 2>conftest.er1
+-  ac_status=$?
+-  grep -v '^ *+' conftest.er1 >conftest.err
+-  rm -f conftest.er1
+-  cat conftest.err >&5
+-  echo "$as_me:$LINENO: \$? = $ac_status" >&5
+-  (exit $ac_status); } && {
+-	 test -z "$ac_c_werror_flag" ||
+-	 test ! -s conftest.err
+-       } && test -s conftest$ac_exeext &&
+-       $as_test_x conftest$ac_exeext; then
+-  ac_cv_func_shmat=yes
+-else
+-  echo "$as_me: failed program was:" >&5
+-sed 's/^/| /' conftest.$ac_ext >&5
+-
+-	ac_cv_func_shmat=no
++if ac_fn_c_try_link "$LINENO"
++then :
++  ac_cv_lib_posix_remove=yes
++else $as_nop
++  ac_cv_lib_posix_remove=no
+ fi
++rm -f core conftest.err conftest.$ac_objext conftest.beam \
++    conftest$ac_exeext conftest.$ac_ext
++LIBS=$ac_check_lib_save_LIBS
++fi
++{ printf "%s\n" "$as_me:${as_lineno-$LINENO}: result: $ac_cv_lib_posix_remove" >&5
++printf "%s\n" "$ac_cv_lib_posix_remove" >&6; }
++if test "x$ac_cv_lib_posix_remove" = xyes
++then :
++  X_EXTRA_LIBS="$X_EXTRA_LIBS -lposix"
++fi
++
++    fi
++
++    # BSDI BSD/OS 2.1 needs -lipc for XOpenDisplay.
++    ac_fn_c_check_func "$LINENO" "shmat" "ac_cv_func_shmat"
++if test "x$ac_cv_func_shmat" = xyes
++then :
+ 
+-rm -f core conftest.err conftest.$ac_objext conftest_ipa8_conftest.oo \
+-      conftest$ac_exeext conftest.$ac_ext
+ fi
+-{ echo "$as_me:$LINENO: result: $ac_cv_func_shmat" >&5
+-echo "${ECHO_T}$ac_cv_func_shmat" >&6; }
+ 
+     if test $ac_cv_func_shmat = no; then
+-      { echo "$as_me:$LINENO: checking for shmat in -lipc" >&5
+-echo $ECHO_N "checking for shmat in -lipc... $ECHO_C" >&6; }
+-if test "${ac_cv_lib_ipc_shmat+set}" = set; then
+-  echo $ECHO_N "(cached) $ECHO_C" >&6
+-else
++      { printf "%s\n" "$as_me:${as_lineno-$LINENO}: checking for shmat in -lipc" >&5
++printf %s "checking for shmat in -lipc... " >&6; }
++if test ${ac_cv_lib_ipc_shmat+y}
++then :
++  printf %s "(cached) " >&6
++else $as_nop
+   ac_check_lib_save_LIBS=$LIBS
+ LIBS="-lipc  $LIBS"
+-cat >conftest.$ac_ext <<_ACEOF
+-/* confdefs.h.  */
+-_ACEOF
+-cat confdefs.h >>conftest.$ac_ext
+-cat >>conftest.$ac_ext <<_ACEOF
++cat confdefs.h - <<_ACEOF >conftest.$ac_ext
+ /* end confdefs.h.  */
+ 
+ /* Override any GCC internal prototype to avoid an error.
+    Use char because int might match the return type of a GCC
+    builtin and then its argument prototype would still apply.  */
+-#ifdef __cplusplus
+-extern "C"
+-#endif
+ char shmat ();
+ #ifdef F77_DUMMY_MAIN
+ 
+@@ -12360,46 +11839,27 @@ char shmat ();
+ 
+ #endif
+ int
+-main ()
++main (void)
+ {
+ return shmat ();
+   ;
+   return 0;
+ }
+ _ACEOF
+-rm -f conftest.$ac_objext conftest$ac_exeext
+-if { (ac_try="$ac_link"
+-case "(($ac_try" in
+-  *\"* | *\`* | *\\*) ac_try_echo=\$ac_try;;
+-  *) ac_try_echo=$ac_try;;
+-esac
+-eval "echo \"\$as_me:$LINENO: $ac_try_echo\"") >&5
+-  (eval "$ac_link") 2>conftest.er1
+-  ac_status=$?
+-  grep -v '^ *+' conftest.er1 >conftest.err
+-  rm -f conftest.er1
+-  cat conftest.err >&5
+-  echo "$as_me:$LINENO: \$? = $ac_status" >&5
+-  (exit $ac_status); } && {
+-	 test -z "$ac_c_werror_flag" ||
+-	 test ! -s conftest.err
+-       } && test -s conftest$ac_exeext &&
+-       $as_test_x conftest$ac_exeext; then
++if ac_fn_c_try_link "$LINENO"
++then :
+   ac_cv_lib_ipc_shmat=yes
+-else
+-  echo "$as_me: failed program was:" >&5
+-sed 's/^/| /' conftest.$ac_ext >&5
+-
+-	ac_cv_lib_ipc_shmat=no
++else $as_nop
++  ac_cv_lib_ipc_shmat=no
+ fi
+-
+-rm -f core conftest.err conftest.$ac_objext conftest_ipa8_conftest.oo \
+-      conftest$ac_exeext conftest.$ac_ext
++rm -f core conftest.err conftest.$ac_objext conftest.beam \
++    conftest$ac_exeext conftest.$ac_ext
+ LIBS=$ac_check_lib_save_LIBS
+ fi
+-{ echo "$as_me:$LINENO: result: $ac_cv_lib_ipc_shmat" >&5
+-echo "${ECHO_T}$ac_cv_lib_ipc_shmat" >&6; }
+-if test $ac_cv_lib_ipc_shmat = yes; then
++{ printf "%s\n" "$as_me:${as_lineno-$LINENO}: result: $ac_cv_lib_ipc_shmat" >&5
++printf "%s\n" "$ac_cv_lib_ipc_shmat" >&6; }
++if test "x$ac_cv_lib_ipc_shmat" = xyes
++then :
+   X_EXTRA_LIBS="$X_EXTRA_LIBS -lipc"
+ fi
+ 
+@@ -12415,26 +11875,20 @@ fi
+   # These have to be linked with before -lX11, unlike the other
+   # libraries we check for below, so use a different variable.
+   # John Interrante, Karl Berry
+-  { echo "$as_me:$LINENO: checking for IceConnectionNumber in -lICE" >&5
+-echo $ECHO_N "checking for IceConnectionNumber in -lICE... $ECHO_C" >&6; }
+-if test "${ac_cv_lib_ICE_IceConnectionNumber+set}" = set; then
+-  echo $ECHO_N "(cached) $ECHO_C" >&6
+-else
++  { printf "%s\n" "$as_me:${as_lineno-$LINENO}: checking for IceConnectionNumber in -lICE" >&5
++printf %s "checking for IceConnectionNumber in -lICE... " >&6; }
++if test ${ac_cv_lib_ICE_IceConnectionNumber+y}
++then :
++  printf %s "(cached) " >&6
++else $as_nop
+   ac_check_lib_save_LIBS=$LIBS
+ LIBS="-lICE $X_EXTRA_LIBS $LIBS"
+-cat >conftest.$ac_ext <<_ACEOF
+-/* confdefs.h.  */
+-_ACEOF
+-cat confdefs.h >>conftest.$ac_ext
+-cat >>conftest.$ac_ext <<_ACEOF
++cat confdefs.h - <<_ACEOF >conftest.$ac_ext
+ /* end confdefs.h.  */
+ 
+ /* Override any GCC internal prototype to avoid an error.
+    Use char because int might match the return type of a GCC
+    builtin and then its argument prototype would still apply.  */
+-#ifdef __cplusplus
+-extern "C"
+-#endif
+ char IceConnectionNumber ();
+ #ifdef F77_DUMMY_MAIN
+ 
+@@ -12445,46 +11899,27 @@ char IceConnectionNumber ();
+ 
+ #endif
+ int
+-main ()
++main (void)
+ {
+ return IceConnectionNumber ();
+   ;
+   return 0;
+ }
+ _ACEOF
+-rm -f conftest.$ac_objext conftest$ac_exeext
+-if { (ac_try="$ac_link"
+-case "(($ac_try" in
+-  *\"* | *\`* | *\\*) ac_try_echo=\$ac_try;;
+-  *) ac_try_echo=$ac_try;;
+-esac
+-eval "echo \"\$as_me:$LINENO: $ac_try_echo\"") >&5
+-  (eval "$ac_link") 2>conftest.er1
+-  ac_status=$?
+-  grep -v '^ *+' conftest.er1 >conftest.err
+-  rm -f conftest.er1
+-  cat conftest.err >&5
+-  echo "$as_me:$LINENO: \$? = $ac_status" >&5
+-  (exit $ac_status); } && {
+-	 test -z "$ac_c_werror_flag" ||
+-	 test ! -s conftest.err
+-       } && test -s conftest$ac_exeext &&
+-       $as_test_x conftest$ac_exeext; then
++if ac_fn_c_try_link "$LINENO"
++then :
+   ac_cv_lib_ICE_IceConnectionNumber=yes
+-else
+-  echo "$as_me: failed program was:" >&5
+-sed 's/^/| /' conftest.$ac_ext >&5
+-
+-	ac_cv_lib_ICE_IceConnectionNumber=no
++else $as_nop
++  ac_cv_lib_ICE_IceConnectionNumber=no
+ fi
+-
+-rm -f core conftest.err conftest.$ac_objext conftest_ipa8_conftest.oo \
+-      conftest$ac_exeext conftest.$ac_ext
++rm -f core conftest.err conftest.$ac_objext conftest.beam \
++    conftest$ac_exeext conftest.$ac_ext
+ LIBS=$ac_check_lib_save_LIBS
+ fi
+-{ echo "$as_me:$LINENO: result: $ac_cv_lib_ICE_IceConnectionNumber" >&5
+-echo "${ECHO_T}$ac_cv_lib_ICE_IceConnectionNumber" >&6; }
+-if test $ac_cv_lib_ICE_IceConnectionNumber = yes; then
++{ printf "%s\n" "$as_me:${as_lineno-$LINENO}: result: $ac_cv_lib_ICE_IceConnectionNumber" >&5
++printf "%s\n" "$ac_cv_lib_ICE_IceConnectionNumber" >&6; }
++if test "x$ac_cv_lib_ICE_IceConnectionNumber" = xyes
++then :
+   X_PRE_LIBS="$X_PRE_LIBS -lSM -lICE"
+ fi
+ 
+@@ -12493,18 +11928,14 @@ fi
+ fi
+ 
+    if test "yes" = "$no_x"; then
+-      { echo "$as_me:$LINENO: NOTIFICATION: SAMRAI configured without the X11 library" >&5
+-echo "$as_me: NOTIFICATION: SAMRAI configured without the X11 library" >&6;}
++      { printf "%s\n" "$as_me:${as_lineno-$LINENO}: NOTIFICATION: SAMRAI configured without the X11 library" >&5
++printf "%s\n" "$as_me: NOTIFICATION: SAMRAI configured without the X11 library" >&6;}
+ 
+-cat >>confdefs.h <<\_ACEOF
+-#define LACKS_X11 1
+-_ACEOF
++printf "%s\n" "#define LACKS_X11 1" >>confdefs.h
+ 
+    else
+ 
+-cat >>confdefs.h <<\_ACEOF
+-#define HAVE_X11 1
+-_ACEOF
++printf "%s\n" "#define HAVE_X11 1" >>confdefs.h
+ 
+       X_LIBS=`echo $X_LIBS | sed 's/-R\//-R \//'`
+       if test -n "$x_includes"; then
+@@ -12514,12 +11945,10 @@ _ACEOF
+       LIB_NAME="$X_PRE_LIBS -lX11 $X_EXTRA_LIBS $LIB_NAME"
+    fi
+ else
+-   { echo "$as_me:$LINENO: NOTIFICATION: SAMRAI configured without the X11 library" >&5
+-echo "$as_me: NOTIFICATION: SAMRAI configured without the X11 library" >&6;}
++   { printf "%s\n" "$as_me:${as_lineno-$LINENO}: NOTIFICATION: SAMRAI configured without the X11 library" >&5
++printf "%s\n" "$as_me: NOTIFICATION: SAMRAI configured without the X11 library" >&6;}
+ 
+-cat >>confdefs.h <<\_ACEOF
+-#define LACKS_X11 1
+-_ACEOF
++printf "%s\n" "#define LACKS_X11 1" >>confdefs.h
+ 
+ fi
+ 
+@@ -12548,15 +11977,17 @@ fi
+ 
+ 
+ # Start macro BTNG_ARG_WITH_ENV_WRAPPER with args doxygen and DOXYGEN_BIN
+-{ echo "$as_me:$LINENO: checking for doxygen" >&5
+-echo $ECHO_N "checking for doxygen... $ECHO_C" >&6; }
+-if test "${btng_cv_prog_doxygen+set}" = set; then
+-  echo $ECHO_N "(cached) $ECHO_C" >&6
+-else
++{ printf "%s\n" "$as_me:${as_lineno-$LINENO}: checking for doxygen" >&5
++printf %s "checking for doxygen... " >&6; }
++if test ${btng_cv_prog_doxygen+y}
++then :
++  printf %s "(cached) " >&6
++else $as_nop
+ 
+ 
+ # Check whether --with-doxygen was given.
+-if test "${with_doxygen+set}" = set; then
++if test ${with_doxygen+y}
++then :
+   withval=$with_doxygen;
+ fi
+ 
+@@ -12592,8 +12023,8 @@ if test "${DOXYGEN_BIN+set}" = set ; then
+   # This block executes the quality check commands, if any, for DOXYGEN_BIN.
+   # if DOXYGEN_BIN is an absolute path, make sure it is executable.
+   if echo "${DOXYGEN_BIN}" | grep '^/' > /dev/null && test ! -x "${DOXYGEN_BIN}"; then
+-    { echo "$as_me:$LINENO: WARNING: doxygen program ${DOXYGEN_BIN} is not executable." >&5
+-echo "$as_me: WARNING: doxygen program ${DOXYGEN_BIN} is not executable." >&2;}
++    { printf "%s\n" "$as_me:${as_lineno-$LINENO}: WARNING: doxygen program ${DOXYGEN_BIN} is not executable." >&5
++printf "%s\n" "$as_me: WARNING: doxygen program ${DOXYGEN_BIN} is not executable." >&2;}
+   fi
+ 
+ fi
+@@ -12603,8 +12034,8 @@ if test "${DOXYGEN_BIN+set}" = set ; then
+ fi
+ 
+ fi
+-{ echo "$as_me:$LINENO: result: $btng_cv_prog_doxygen" >&5
+-echo "${ECHO_T}$btng_cv_prog_doxygen" >&6; }
++{ printf "%s\n" "$as_me:${as_lineno-$LINENO}: result: $btng_cv_prog_doxygen" >&5
++printf "%s\n" "$btng_cv_prog_doxygen" >&6; }
+ # Set DOXYGEN_BIN from cache.
+ # DOXYGEN_BIN is not yet set if we grabbed it from cache.
+ if test "${btng_cv_prog_doxygen+set}" = set ; then
+@@ -12616,11 +12047,12 @@ fi
+ if test "${DOXYGEN_BIN+set}" = set; then
+   # Extract the first word of "doxygen", so it can be a program name with args.
+ set dummy doxygen; ac_word=$2
+-{ echo "$as_me:$LINENO: checking for $ac_word" >&5
+-echo $ECHO_N "checking for $ac_word... $ECHO_C" >&6; }
+-if test "${ac_cv_path_DOXYGEN_BIN+set}" = set; then
+-  echo $ECHO_N "(cached) $ECHO_C" >&6
+-else
++{ printf "%s\n" "$as_me:${as_lineno-$LINENO}: checking for $ac_word" >&5
++printf %s "checking for $ac_word... " >&6; }
++if test ${ac_cv_path_DOXYGEN_BIN+y}
++then :
++  printf %s "(cached) " >&6
++else $as_nop
+   case $DOXYGEN_BIN in
+   [\\/]* | ?:[\\/]*)
+   ac_cv_path_DOXYGEN_BIN="$DOXYGEN_BIN" # Let the user override the test with a path.
+@@ -12630,15 +12062,19 @@ else
+ for as_dir in $PATH
+ do
+   IFS=$as_save_IFS
+-  test -z "$as_dir" && as_dir=.
+-  for ac_exec_ext in '' $ac_executable_extensions; do
+-  if { test -f "$as_dir/$ac_word$ac_exec_ext" && $as_test_x "$as_dir/$ac_word$ac_exec_ext"; }; then
+-    ac_cv_path_DOXYGEN_BIN="$as_dir/$ac_word$ac_exec_ext"
+-    echo "$as_me:$LINENO: found $as_dir/$ac_word$ac_exec_ext" >&5
++  case $as_dir in #(((
++    '') as_dir=./ ;;
++    */) ;;
++    *) as_dir=$as_dir/ ;;
++  esac
++    for ac_exec_ext in '' $ac_executable_extensions; do
++  if as_fn_executable_p "$as_dir$ac_word$ac_exec_ext"; then
++    ac_cv_path_DOXYGEN_BIN="$as_dir$ac_word$ac_exec_ext"
++    printf "%s\n" "$as_me:${as_lineno-$LINENO}: found $as_dir$ac_word$ac_exec_ext" >&5
+     break 2
+   fi
+ done
+-done
++  done
+ IFS=$as_save_IFS
+ 
+   ;;
+@@ -12646,11 +12082,11 @@ esac
+ fi
+ DOXYGEN_BIN=$ac_cv_path_DOXYGEN_BIN
+ if test -n "$DOXYGEN_BIN"; then
+-  { echo "$as_me:$LINENO: result: $DOXYGEN_BIN" >&5
+-echo "${ECHO_T}$DOXYGEN_BIN" >&6; }
++  { printf "%s\n" "$as_me:${as_lineno-$LINENO}: result: $DOXYGEN_BIN" >&5
++printf "%s\n" "$DOXYGEN_BIN" >&6; }
+ else
+-  { echo "$as_me:$LINENO: result: no" >&5
+-echo "${ECHO_T}no" >&6; }
++  { printf "%s\n" "$as_me:${as_lineno-$LINENO}: result: no" >&5
++printf "%s\n" "no" >&6; }
+ fi
+ 
+ 
+@@ -12666,7 +12102,7 @@ for btng_log_vars_index in $btng_log_vars ; do
+   else
+     btng_log_vars_value="unset";
+   fi
+-  echo "configure:12669:" "$btng_log_vars_index is $btng_log_vars_value" >&5;
++  echo "configure:12105:" "$btng_log_vars_index is $btng_log_vars_value" >&5;
+ done
+ 
+ 
+@@ -12674,9 +12110,10 @@ done
+ 
+ 
+ # Check whether --with-dot-dir was given.
+-if test "${with_dot_dir+set}" = set; then
++if test ${with_dot_dir+y}
++then :
+   withval=$with_dot_dir;
+-else
++else $as_nop
+   unset with_dot_dir
+ fi
+ 
+@@ -12697,12 +12134,12 @@ elif test "${with_dot_dir}" = no; then
+ else
+   # Make sure valid path is specified.  Enable dot.
+   if test ! -d ${with_dot_dir}; then
+-     { echo "$as_me:$LINENO: WARNING:
++     { printf "%s\n" "$as_me:${as_lineno-$LINENO}: WARNING:
+ Invalid path given for dot executable: ${with_dot_dir}.
+ Path does not exist.
+ You can expect doxygen documentation generation to not work properly.
+ " >&5
+-echo "$as_me: WARNING:
++printf "%s\n" "$as_me: WARNING:
+ Invalid path given for dot executable: ${with_dot_dir}.
+ Path does not exist.
+ You can expect doxygen documentation generation to not work properly.
+@@ -12721,7 +12158,7 @@ for btng_log_vars_index in $btng_log_vars ; do
+   else
+     btng_log_vars_value="unset";
+   fi
+-  echo "configure:12724:" "$btng_log_vars_index is $btng_log_vars_value" >&5;
++  echo "configure:12161:" "$btng_log_vars_index is $btng_log_vars_value" >&5;
+ done
+ 
+ 
+@@ -12731,15 +12168,14 @@ done
+ 
+ 
+ # Check whether --with-dox-output-dir was given.
+-if test "${with_dox_output_dir+set}" = set; then
++if test ${with_dox_output_dir+y}
++then :
+   withval=$with_dox_output_dir;
+ fi
+ 
+ if test -n "$with_dox_output_dir"; then
+   if echo "$with_dox_output_dir" | grep -v '^/' ; then
+-    { { echo "$as_me:$LINENO: error: You must give a full path with --with-dox-output-dir=DIR" >&5
+-echo "$as_me: error: You must give a full path with --with-dox-output-dir=DIR" >&2;}
+-   { (exit 1); exit 1; }; }
++    as_fn_error $? "You must give a full path with --with-dox-output-dir=DIR" "$LINENO" 5
+   fi
+   dox_output_dir="$with_dox_output_dir"
+   # Make sure dox_output_dir ends with / so because the doxygen
+@@ -12752,15 +12188,17 @@ fi
+ 
+ 
+ # Start macro BTNG_ARG_WITH_ENV_WRAPPER with args perl and SAMRAI_PERL
+-{ echo "$as_me:$LINENO: checking for perl" >&5
+-echo $ECHO_N "checking for perl... $ECHO_C" >&6; }
+-if test "${btng_cv_prog_perl+set}" = set; then
+-  echo $ECHO_N "(cached) $ECHO_C" >&6
+-else
++{ printf "%s\n" "$as_me:${as_lineno-$LINENO}: checking for perl" >&5
++printf %s "checking for perl... " >&6; }
++if test ${btng_cv_prog_perl+y}
++then :
++  printf %s "(cached) " >&6
++else $as_nop
+ 
+ 
+ # Check whether --with-perl was given.
+-if test "${with_perl+set}" = set; then
++if test ${with_perl+y}
++then :
+   withval=$with_perl;
+ fi
+ 
+@@ -12796,8 +12234,8 @@ if test "${SAMRAI_PERL+set}" = set ; then
+   # This block executes the quality check commands, if any, for SAMRAI_PERL.
+   # if SAMRAI_PERL is an absolute path, make sure it is executable.
+   if echo "${SAMRAI_PERL}" | grep '^/' > /dev/null && test ! -x "${SAMRAI_PERL}"; then
+-    { echo "$as_me:$LINENO: WARNING: perl program ${SAMRAI_PERL} is not executable." >&5
+-echo "$as_me: WARNING: perl program ${SAMRAI_PERL} is not executable." >&2;}
++    { printf "%s\n" "$as_me:${as_lineno-$LINENO}: WARNING: perl program ${SAMRAI_PERL} is not executable." >&5
++printf "%s\n" "$as_me: WARNING: perl program ${SAMRAI_PERL} is not executable." >&2;}
+   fi
+ 
+ fi
+@@ -12807,8 +12245,8 @@ if test "${SAMRAI_PERL+set}" = set ; then
+ fi
+ 
+ fi
+-{ echo "$as_me:$LINENO: result: $btng_cv_prog_perl" >&5
+-echo "${ECHO_T}$btng_cv_prog_perl" >&6; }
++{ printf "%s\n" "$as_me:${as_lineno-$LINENO}: result: $btng_cv_prog_perl" >&5
++printf "%s\n" "$btng_cv_prog_perl" >&6; }
+ # Set SAMRAI_PERL from cache.
+ # SAMRAI_PERL is not yet set if we grabbed it from cache.
+ if test "${btng_cv_prog_perl+set}" = set ; then
+@@ -12820,11 +12258,12 @@ fi
+ if test "${SAMRAI_PERL+set}" = set; then
+   # Extract the first word of "perl", so it can be a program name with args.
+ set dummy perl; ac_word=$2
+-{ echo "$as_me:$LINENO: checking for $ac_word" >&5
+-echo $ECHO_N "checking for $ac_word... $ECHO_C" >&6; }
+-if test "${ac_cv_path_SAMRAI_PERL+set}" = set; then
+-  echo $ECHO_N "(cached) $ECHO_C" >&6
+-else
++{ printf "%s\n" "$as_me:${as_lineno-$LINENO}: checking for $ac_word" >&5
++printf %s "checking for $ac_word... " >&6; }
++if test ${ac_cv_path_SAMRAI_PERL+y}
++then :
++  printf %s "(cached) " >&6
++else $as_nop
+   case $SAMRAI_PERL in
+   [\\/]* | ?:[\\/]*)
+   ac_cv_path_SAMRAI_PERL="$SAMRAI_PERL" # Let the user override the test with a path.
+@@ -12834,15 +12273,19 @@ else
+ for as_dir in $PATH
+ do
+   IFS=$as_save_IFS
+-  test -z "$as_dir" && as_dir=.
+-  for ac_exec_ext in '' $ac_executable_extensions; do
+-  if { test -f "$as_dir/$ac_word$ac_exec_ext" && $as_test_x "$as_dir/$ac_word$ac_exec_ext"; }; then
+-    ac_cv_path_SAMRAI_PERL="$as_dir/$ac_word$ac_exec_ext"
+-    echo "$as_me:$LINENO: found $as_dir/$ac_word$ac_exec_ext" >&5
++  case $as_dir in #(((
++    '') as_dir=./ ;;
++    */) ;;
++    *) as_dir=$as_dir/ ;;
++  esac
++    for ac_exec_ext in '' $ac_executable_extensions; do
++  if as_fn_executable_p "$as_dir$ac_word$ac_exec_ext"; then
++    ac_cv_path_SAMRAI_PERL="$as_dir$ac_word$ac_exec_ext"
++    printf "%s\n" "$as_me:${as_lineno-$LINENO}: found $as_dir$ac_word$ac_exec_ext" >&5
+     break 2
+   fi
+ done
+-done
++  done
+ IFS=$as_save_IFS
+ 
+   ;;
+@@ -12850,11 +12293,11 @@ esac
+ fi
+ SAMRAI_PERL=$ac_cv_path_SAMRAI_PERL
+ if test -n "$SAMRAI_PERL"; then
+-  { echo "$as_me:$LINENO: result: $SAMRAI_PERL" >&5
+-echo "${ECHO_T}$SAMRAI_PERL" >&6; }
++  { printf "%s\n" "$as_me:${as_lineno-$LINENO}: result: $SAMRAI_PERL" >&5
++printf "%s\n" "$SAMRAI_PERL" >&6; }
+ else
+-  { echo "$as_me:$LINENO: result: no" >&5
+-echo "${ECHO_T}no" >&6; }
++  { printf "%s\n" "$as_me:${as_lineno-$LINENO}: result: no" >&5
++printf "%s\n" "no" >&6; }
+ fi
+ 
+ 
+@@ -12870,58 +12313,55 @@ for btng_log_vars_index in $btng_log_vars ; do
+   else
+     btng_log_vars_value="unset";
+   fi
+-  echo "configure:12873:" "$btng_log_vars_index is $btng_log_vars_value" >&5;
++  echo "configure:12316:" "$btng_log_vars_index is $btng_log_vars_value" >&5;
+ done
+ 
+ 
+ 
+-echo "configure:12878:" begin stringize >&5
+-{ echo "$as_me:$LINENO: checking for preprocessor stringizing operator" >&5
+-echo $ECHO_N "checking for preprocessor stringizing operator... $ECHO_C" >&6; }
+-if test "${ac_cv_c_stringize+set}" = set; then
+-  echo $ECHO_N "(cached) $ECHO_C" >&6
+-else
+-  cat >conftest.$ac_ext <<_ACEOF
+-/* confdefs.h.  */
+-_ACEOF
+-cat confdefs.h >>conftest.$ac_ext
+-cat >>conftest.$ac_ext <<_ACEOF
++echo "configure:12321:" begin stringize >&5
++{ printf "%s\n" "$as_me:${as_lineno-$LINENO}: checking for preprocessor stringizing operator" >&5
++printf %s "checking for preprocessor stringizing operator... " >&6; }
++if test ${ac_cv_c_stringize+y}
++then :
++  printf %s "(cached) " >&6
++else $as_nop
++  cat confdefs.h - <<_ACEOF >conftest.$ac_ext
+ /* end confdefs.h.  */
+ #define x(y) #y
+ 
+ char *s = x(teststring);
+ _ACEOF
+ if (eval "$ac_cpp conftest.$ac_ext") 2>&5 |
+-  $EGREP "#teststring" >/dev/null 2>&1; then
++  $EGREP "#teststring" >/dev/null 2>&1
++then :
+   ac_cv_c_stringize=no
+-else
++else $as_nop
+   ac_cv_c_stringize=yes
+ fi
+-rm -f conftest*
++rm -rf conftest*
+ 
+ fi
+-{ echo "$as_me:$LINENO: result: $ac_cv_c_stringize" >&5
+-echo "${ECHO_T}$ac_cv_c_stringize" >&6; }
++{ printf "%s\n" "$as_me:${as_lineno-$LINENO}: result: $ac_cv_c_stringize" >&5
++printf "%s\n" "$ac_cv_c_stringize" >&6; }
+ if test $ac_cv_c_stringize = yes; then
+ 
+-cat >>confdefs.h <<\_ACEOF
+-#define HAVE_STRINGIZE 1
+-_ACEOF
++printf "%s\n" "#define HAVE_STRINGIZE 1" >>confdefs.h
+ 
+ fi
+ 
+-echo "configure:12913:" end stringize >&5
++echo "configure:12352:" end stringize >&5
+ 
+ 
+ 
+ # Start macro BTNG_C_RESTRICT
+ 
+-{ echo "$as_me:$LINENO: checking checking whether restrict is broken" >&5
+-echo $ECHO_N "checking checking whether restrict is broken... $ECHO_C" >&6; }
++{ printf "%s\n" "$as_me:${as_lineno-$LINENO}: checking checking whether restrict is broken" >&5
++printf %s "checking checking whether restrict is broken... " >&6; }
+ 
+-if test "${btng_cv_c_restrict_broken+set}" = set; then
+-  echo $ECHO_N "(cached) $ECHO_C" >&6
+-else
++if test ${btng_cv_c_restrict_broken+y}
++then :
++  printf %s "(cached) " >&6
++else $as_nop
+ 
+ 
+   ac_ext=cpp
+@@ -12930,11 +12370,7 @@ ac_compile='$CXX -c $CXXFLAGS $CPPFLAGS conftest.$ac_ext >&5'
+ ac_link='$CXX -o conftest$ac_exeext $CXXFLAGS $CPPFLAGS $LDFLAGS conftest.$ac_ext $LIBS >&5'
+ ac_compiler_gnu=$ac_cv_cxx_compiler_gnu
+ 
+-  cat >conftest.$ac_ext <<_ACEOF
+-/* confdefs.h.  */
+-_ACEOF
+-cat confdefs.h >>conftest.$ac_ext
+-cat >>conftest.$ac_ext <<_ACEOF
++  cat confdefs.h - <<_ACEOF >conftest.$ac_ext
+ /* end confdefs.h.  */
+ 
+ struct array_test {
+@@ -12957,47 +12393,28 @@ double &array_test::value(int i) __restrict__ const {
+ 
+ #endif
+ int
+-main ()
++main (void)
+ {
+ 
+ double a[10];
+ array_test at(a,20);
+ at.value(5) = 5;
+-
+-  ;
+-  return 0;
+-}
+-_ACEOF
+-rm -f conftest.$ac_objext
+-if { (ac_try="$ac_compile"
+-case "(($ac_try" in
+-  *\"* | *\`* | *\\*) ac_try_echo=\$ac_try;;
+-  *) ac_try_echo=$ac_try;;
+-esac
+-eval "echo \"\$as_me:$LINENO: $ac_try_echo\"") >&5
+-  (eval "$ac_compile") 2>conftest.er1
+-  ac_status=$?
+-  grep -v '^ *+' conftest.er1 >conftest.err
+-  rm -f conftest.er1
+-  cat conftest.err >&5
+-  echo "$as_me:$LINENO: \$? = $ac_status" >&5
+-  (exit $ac_status); } && {
+-	 test -z "$ac_cxx_werror_flag" ||
+-	 test ! -s conftest.err
+-       } && test -s conftest.$ac_objext; then
++
++  ;
++  return 0;
++}
++_ACEOF
++if ac_fn_cxx_try_compile "$LINENO"
++then :
+   # restrict is not broken.
+     btng_cv_c_restrict_broken=no
+ 
+-else
+-  echo "$as_me: failed program was:" >&5
+-sed 's/^/| /' conftest.$ac_ext >&5
+-
+-	# restrict is broken.
++else $as_nop
++  # restrict is broken.
+     btng_cv_c_restrict_broken=yes
+ 
+ fi
+-
+-rm -f core conftest.err conftest.$ac_objext conftest.$ac_ext
++rm -f core conftest.err conftest.$ac_objext conftest.beam conftest.$ac_ext
+   ac_ext=c
+ ac_cpp='$CPP $CPPFLAGS'
+ ac_compile='$CC -c $CFLAGS $CPPFLAGS conftest.$ac_ext >&5'
+@@ -13008,14 +12425,12 @@ ac_compiler_gnu=$ac_cv_c_compiler_gnu
+ 
+ fi
+ 
+-{ echo "$as_me:$LINENO: result: $btng_cv_c_restrict_broken" >&5
+-echo "${ECHO_T}$btng_cv_c_restrict_broken" >&6; }
++{ printf "%s\n" "$as_me:${as_lineno-$LINENO}: result: $btng_cv_c_restrict_broken" >&5
++printf "%s\n" "$btng_cv_c_restrict_broken" >&6; }
+ 
+ if test "$btng_cv_c_restrict_broken" = yes; then
+ 
+-cat >>confdefs.h <<\_ACEOF
+-#define RESTRICT_IS_BROKEN 1
+-_ACEOF
++printf "%s\n" "#define RESTRICT_IS_BROKEN 1" >>confdefs.h
+ 
+ fi
+ 
+@@ -13028,12 +12443,13 @@ fi
+ 
+ # Start macro BTNG_TYPE_NAMESPACE
+ 
+-{ echo "$as_me:$LINENO: checking whether namespace is broken" >&5
+-echo $ECHO_N "checking whether namespace is broken... $ECHO_C" >&6; }
++{ printf "%s\n" "$as_me:${as_lineno-$LINENO}: checking whether namespace is broken" >&5
++printf %s "checking whether namespace is broken... " >&6; }
+ 
+-if test "${btng_cv_type_namespace_broken+set}" = set; then
+-  echo $ECHO_N "(cached) $ECHO_C" >&6
+-else
++if test ${btng_cv_type_namespace_broken+y}
++then :
++  printf %s "(cached) " >&6
++else $as_nop
+ 
+ 
+       ac_ext=cpp
+@@ -13042,11 +12458,7 @@ ac_compile='$CXX -c $CXXFLAGS $CPPFLAGS conftest.$ac_ext >&5'
+ ac_link='$CXX -o conftest$ac_exeext $CXXFLAGS $CPPFLAGS $LDFLAGS conftest.$ac_ext $LIBS >&5'
+ ac_compiler_gnu=$ac_cv_cxx_compiler_gnu
+ 
+-  cat >conftest.$ac_ext <<_ACEOF
+-/* confdefs.h.  */
+-_ACEOF
+-cat confdefs.h >>conftest.$ac_ext
+-cat >>conftest.$ac_ext <<_ACEOF
++  cat confdefs.h - <<_ACEOF >conftest.$ac_ext
+ /* end confdefs.h.  */
+ namespace test{ int i; }
+ 
+@@ -13059,43 +12471,24 @@ namespace test{ int i; }
+ 
+ #endif
+ int
+-main ()
++main (void)
+ {
+ using namespace test;
+   ;
+   return 0;
+ }
+ _ACEOF
+-rm -f conftest.$ac_objext
+-if { (ac_try="$ac_compile"
+-case "(($ac_try" in
+-  *\"* | *\`* | *\\*) ac_try_echo=\$ac_try;;
+-  *) ac_try_echo=$ac_try;;
+-esac
+-eval "echo \"\$as_me:$LINENO: $ac_try_echo\"") >&5
+-  (eval "$ac_compile") 2>conftest.er1
+-  ac_status=$?
+-  grep -v '^ *+' conftest.er1 >conftest.err
+-  rm -f conftest.er1
+-  cat conftest.err >&5
+-  echo "$as_me:$LINENO: \$? = $ac_status" >&5
+-  (exit $ac_status); } && {
+-	 test -z "$ac_cxx_werror_flag" ||
+-	 test ! -s conftest.err
+-       } && test -s conftest.$ac_objext; then
++if ac_fn_cxx_try_compile "$LINENO"
++then :
+   # namespace is not broken.
+     btng_cv_type_namespace_broken=no
+ 
+-else
+-  echo "$as_me: failed program was:" >&5
+-sed 's/^/| /' conftest.$ac_ext >&5
+-
+-	# namespace is broken.
++else $as_nop
++  # namespace is broken.
+     btng_cv_type_namespace_broken=yes
+ 
+ fi
+-
+-rm -f core conftest.err conftest.$ac_objext conftest.$ac_ext
++rm -f core conftest.err conftest.$ac_objext conftest.beam conftest.$ac_ext
+   ac_ext=cpp
+ ac_cpp='$CXXCPP $CPPFLAGS'
+ ac_compile='$CXX -c $CXXFLAGS $CPPFLAGS conftest.$ac_ext >&5'
+@@ -13106,14 +12499,12 @@ ac_compiler_gnu=$ac_cv_cxx_compiler_gnu
+ 
+ fi
+ 
+-{ echo "$as_me:$LINENO: result: $btng_cv_type_namespace_broken" >&5
+-echo "${ECHO_T}$btng_cv_type_namespace_broken" >&6; }
++{ printf "%s\n" "$as_me:${as_lineno-$LINENO}: result: $btng_cv_type_namespace_broken" >&5
++printf "%s\n" "$btng_cv_type_namespace_broken" >&6; }
+ 
+ if test "$btng_cv_type_namespace_broken" = yes; then
+ 
+-cat >>confdefs.h <<\_ACEOF
+-#define NAMESPACE_IS_BROKEN 1
+-_ACEOF
++printf "%s\n" "#define NAMESPACE_IS_BROKEN 1" >>confdefs.h
+ 
+ fi
+ 
+@@ -13125,12 +12516,13 @@ fi
+ 
+ # Start macro BTNG_TYPE_BOOL
+ 
+-{ echo "$as_me:$LINENO: checking checking whether bool type is broken" >&5
+-echo $ECHO_N "checking checking whether bool type is broken... $ECHO_C" >&6; }
++{ printf "%s\n" "$as_me:${as_lineno-$LINENO}: checking checking whether bool type is broken" >&5
++printf %s "checking checking whether bool type is broken... " >&6; }
+ 
+-if test "${btng_cv_type_bool_broken+set}" = set; then
+-  echo $ECHO_N "(cached) $ECHO_C" >&6
+-else
++if test ${btng_cv_type_bool_broken+y}
++then :
++  printf %s "(cached) " >&6
++else $as_nop
+ 
+ 
+ 
+@@ -13141,11 +12533,7 @@ ac_link='$CXX -o conftest$ac_exeext $CXXFLAGS $CPPFLAGS $LDFLAGS conftest.$ac_ex
+ ac_compiler_gnu=$ac_cv_cxx_compiler_gnu
+ 
+ 
+-  cat >conftest.$ac_ext <<_ACEOF
+-/* confdefs.h.  */
+-_ACEOF
+-cat confdefs.h >>conftest.$ac_ext
+-cat >>conftest.$ac_ext <<_ACEOF
++  cat confdefs.h - <<_ACEOF >conftest.$ac_ext
+ /* end confdefs.h.  */
+ 
+ #ifdef F77_DUMMY_MAIN
+@@ -13157,43 +12545,24 @@ cat >>conftest.$ac_ext <<_ACEOF
+ 
+ #endif
+ int
+-main ()
++main (void)
+ {
+ bool b = true;
+   ;
+   return 0;
+ }
+ _ACEOF
+-rm -f conftest.$ac_objext
+-if { (ac_try="$ac_compile"
+-case "(($ac_try" in
+-  *\"* | *\`* | *\\*) ac_try_echo=\$ac_try;;
+-  *) ac_try_echo=$ac_try;;
+-esac
+-eval "echo \"\$as_me:$LINENO: $ac_try_echo\"") >&5
+-  (eval "$ac_compile") 2>conftest.er1
+-  ac_status=$?
+-  grep -v '^ *+' conftest.er1 >conftest.err
+-  rm -f conftest.er1
+-  cat conftest.err >&5
+-  echo "$as_me:$LINENO: \$? = $ac_status" >&5
+-  (exit $ac_status); } && {
+-	 test -z "$ac_cxx_werror_flag" ||
+-	 test ! -s conftest.err
+-       } && test -s conftest.$ac_objext; then
++if ac_fn_cxx_try_compile "$LINENO"
++then :
+   # bool is not broken.
+     btng_cv_type_bool_broken=no
+ 
+-else
+-  echo "$as_me: failed program was:" >&5
+-sed 's/^/| /' conftest.$ac_ext >&5
+-
+-	# bool is broken.
++else $as_nop
++  # bool is broken.
+     btng_cv_type_bool_broken=yes
+ 
+ fi
+-
+-rm -f core conftest.err conftest.$ac_objext conftest.$ac_ext
++rm -f core conftest.err conftest.$ac_objext conftest.beam conftest.$ac_ext
+   ac_ext=cpp
+ ac_cpp='$CXXCPP $CPPFLAGS'
+ ac_compile='$CXX -c $CXXFLAGS $CPPFLAGS conftest.$ac_ext >&5'
+@@ -13204,14 +12573,12 @@ ac_compiler_gnu=$ac_cv_cxx_compiler_gnu
+ 
+ fi
+ 
+-{ echo "$as_me:$LINENO: result: $btng_cv_type_bool_broken" >&5
+-echo "${ECHO_T}$btng_cv_type_bool_broken" >&6; }
++{ printf "%s\n" "$as_me:${as_lineno-$LINENO}: result: $btng_cv_type_bool_broken" >&5
++printf "%s\n" "$btng_cv_type_bool_broken" >&6; }
+ 
+ if test "$btng_cv_type_bool_broken" = yes; then
+ 
+-cat >>confdefs.h <<\_ACEOF
+-#define BOOL_IS_BROKEN 1
+-_ACEOF
++printf "%s\n" "#define BOOL_IS_BROKEN 1" >>confdefs.h
+ 
+ fi
+ 
+@@ -13219,270 +12586,50 @@ fi
+ # End macro BTNG_TYPE_BOOL
+ 
+ 
+-{ echo "$as_me:$LINENO: checking for ANSI C header files" >&5
+-echo $ECHO_N "checking for ANSI C header files... $ECHO_C" >&6; }
+-if test "${ac_cv_header_stdc+set}" = set; then
+-  echo $ECHO_N "(cached) $ECHO_C" >&6
+-else
+-  cat >conftest.$ac_ext <<_ACEOF
+-/* confdefs.h.  */
+-_ACEOF
+-cat confdefs.h >>conftest.$ac_ext
+-cat >>conftest.$ac_ext <<_ACEOF
+-/* end confdefs.h.  */
+-#include <stdlib.h>
+-#include <stdarg.h>
+-#include <string.h>
+-#include <float.h>
+-
+-#ifdef F77_DUMMY_MAIN
+-
+-#  ifdef __cplusplus
+-     extern "C"
+-#  endif
+-   int F77_DUMMY_MAIN() { return 1; }
+-
+-#endif
+-int
+-main ()
+-{
+-
+-  ;
+-  return 0;
+-}
+-_ACEOF
+-rm -f conftest.$ac_objext
+-if { (ac_try="$ac_compile"
+-case "(($ac_try" in
+-  *\"* | *\`* | *\\*) ac_try_echo=\$ac_try;;
+-  *) ac_try_echo=$ac_try;;
+-esac
+-eval "echo \"\$as_me:$LINENO: $ac_try_echo\"") >&5
+-  (eval "$ac_compile") 2>conftest.er1
+-  ac_status=$?
+-  grep -v '^ *+' conftest.er1 >conftest.err
+-  rm -f conftest.er1
+-  cat conftest.err >&5
+-  echo "$as_me:$LINENO: \$? = $ac_status" >&5
+-  (exit $ac_status); } && {
+-	 test -z "$ac_cxx_werror_flag" ||
+-	 test ! -s conftest.err
+-       } && test -s conftest.$ac_objext; then
+-  ac_cv_header_stdc=yes
+-else
+-  echo "$as_me: failed program was:" >&5
+-sed 's/^/| /' conftest.$ac_ext >&5
+-
+-	ac_cv_header_stdc=no
+-fi
+-
+-rm -f core conftest.err conftest.$ac_objext conftest.$ac_ext
+-
+-if test $ac_cv_header_stdc = yes; then
+-  # SunOS 4.x string.h does not declare mem*, contrary to ANSI.
+-  cat >conftest.$ac_ext <<_ACEOF
+-/* confdefs.h.  */
+-_ACEOF
+-cat confdefs.h >>conftest.$ac_ext
+-cat >>conftest.$ac_ext <<_ACEOF
+-/* end confdefs.h.  */
+-#include <string.h>
+-
+-_ACEOF
+-if (eval "$ac_cpp conftest.$ac_ext") 2>&5 |
+-  $EGREP "memchr" >/dev/null 2>&1; then
+-  :
+-else
+-  ac_cv_header_stdc=no
+-fi
+-rm -f conftest*
+-
+-fi
+-
+-if test $ac_cv_header_stdc = yes; then
+-  # ISC 2.0.2 stdlib.h does not declare free, contrary to ANSI.
+-  cat >conftest.$ac_ext <<_ACEOF
+-/* confdefs.h.  */
+-_ACEOF
+-cat confdefs.h >>conftest.$ac_ext
+-cat >>conftest.$ac_ext <<_ACEOF
+-/* end confdefs.h.  */
+-#include <stdlib.h>
+-
+-_ACEOF
+-if (eval "$ac_cpp conftest.$ac_ext") 2>&5 |
+-  $EGREP "free" >/dev/null 2>&1; then
+-  :
+-else
+-  ac_cv_header_stdc=no
+-fi
+-rm -f conftest*
+-
+-fi
+-
+-if test $ac_cv_header_stdc = yes; then
+-  # /bin/cc in Irix-4.0.5 gets non-ANSI ctype macros unless using -ansi.
+-  if test "$cross_compiling" = yes; then
+-  :
+-else
+-  cat >conftest.$ac_ext <<_ACEOF
+-/* confdefs.h.  */
+-_ACEOF
+-cat confdefs.h >>conftest.$ac_ext
+-cat >>conftest.$ac_ext <<_ACEOF
+-/* end confdefs.h.  */
+-#include <ctype.h>
+-#include <stdlib.h>
+-#if ((' ' & 0x0FF) == 0x020)
+-# define ISLOWER(c) ('a' <= (c) && (c) <= 'z')
+-# define TOUPPER(c) (ISLOWER(c) ? 'A' + ((c) - 'a') : (c))
+-#else
+-# define ISLOWER(c) \
+-		   (('a' <= (c) && (c) <= 'i') \
+-		     || ('j' <= (c) && (c) <= 'r') \
+-		     || ('s' <= (c) && (c) <= 'z'))
+-# define TOUPPER(c) (ISLOWER(c) ? ((c) | 0x40) : (c))
+-#endif
+-
+-#define XOR(e, f) (((e) && !(f)) || (!(e) && (f)))
+-int
+-main ()
+-{
+-  int i;
+-  for (i = 0; i < 256; i++)
+-    if (XOR (islower (i), ISLOWER (i))
+-	|| toupper (i) != TOUPPER (i))
+-      return 2;
+-  return 0;
+-}
+-_ACEOF
+-rm -f conftest$ac_exeext
+-if { (ac_try="$ac_link"
+-case "(($ac_try" in
+-  *\"* | *\`* | *\\*) ac_try_echo=\$ac_try;;
+-  *) ac_try_echo=$ac_try;;
+-esac
+-eval "echo \"\$as_me:$LINENO: $ac_try_echo\"") >&5
+-  (eval "$ac_link") 2>&5
+-  ac_status=$?
+-  echo "$as_me:$LINENO: \$? = $ac_status" >&5
+-  (exit $ac_status); } && { ac_try='./conftest$ac_exeext'
+-  { (case "(($ac_try" in
+-  *\"* | *\`* | *\\*) ac_try_echo=\$ac_try;;
+-  *) ac_try_echo=$ac_try;;
+-esac
+-eval "echo \"\$as_me:$LINENO: $ac_try_echo\"") >&5
+-  (eval "$ac_try") 2>&5
+-  ac_status=$?
+-  echo "$as_me:$LINENO: \$? = $ac_status" >&5
+-  (exit $ac_status); }; }; then
+-  :
+-else
+-  echo "$as_me: program exited with status $ac_status" >&5
+-echo "$as_me: failed program was:" >&5
+-sed 's/^/| /' conftest.$ac_ext >&5
+-
+-( exit $ac_status )
+-ac_cv_header_stdc=no
+-fi
+-rm -f core *.core core.conftest.* gmon.out bb.out conftest$ac_exeext conftest.$ac_objext conftest.$ac_ext
+-fi
+-
+-
+-fi
+-fi
+-{ echo "$as_me:$LINENO: result: $ac_cv_header_stdc" >&5
+-echo "${ECHO_T}$ac_cv_header_stdc" >&6; }
+-if test $ac_cv_header_stdc = yes; then
+-
+-cat >>confdefs.h <<\_ACEOF
+-#define STDC_HEADERS 1
+-_ACEOF
+-
+-fi
+-
+-# On IRIX 5.3, sys/types and inttypes.h are conflicting.
+-
+-
+-
++ac_header= ac_cache=
++for ac_item in $ac_header_cxx_list
++do
++  if test $ac_cache; then
++    ac_fn_cxx_check_header_compile "$LINENO" $ac_header ac_cv_header_$ac_cache "$ac_includes_default"
++    if eval test \"x\$ac_cv_header_$ac_cache\" = xyes; then
++      printf "%s\n" "#define $ac_item 1" >> confdefs.h
++    fi
++    ac_header= ac_cache=
++  elif test $ac_header; then
++    ac_cache=$ac_item
++  else
++    ac_header=$ac_item
++  fi
++done
+ 
+ 
+ 
+ 
+ 
+ 
+-for ac_header in sys/types.h sys/stat.h stdlib.h string.h memory.h strings.h \
+-		  inttypes.h stdint.h unistd.h
+-do
+-as_ac_Header=`echo "ac_cv_header_$ac_header" | $as_tr_sh`
+-{ echo "$as_me:$LINENO: checking for $ac_header" >&5
+-echo $ECHO_N "checking for $ac_header... $ECHO_C" >&6; }
+-if { as_var=$as_ac_Header; eval "test \"\${$as_var+set}\" = set"; }; then
+-  echo $ECHO_N "(cached) $ECHO_C" >&6
+-else
+-  cat >conftest.$ac_ext <<_ACEOF
+-/* confdefs.h.  */
+-_ACEOF
+-cat confdefs.h >>conftest.$ac_ext
+-cat >>conftest.$ac_ext <<_ACEOF
+-/* end confdefs.h.  */
+-$ac_includes_default
+ 
+-#include <$ac_header>
+-_ACEOF
+-rm -f conftest.$ac_objext
+-if { (ac_try="$ac_compile"
+-case "(($ac_try" in
+-  *\"* | *\`* | *\\*) ac_try_echo=\$ac_try;;
+-  *) ac_try_echo=$ac_try;;
+-esac
+-eval "echo \"\$as_me:$LINENO: $ac_try_echo\"") >&5
+-  (eval "$ac_compile") 2>conftest.er1
+-  ac_status=$?
+-  grep -v '^ *+' conftest.er1 >conftest.err
+-  rm -f conftest.er1
+-  cat conftest.err >&5
+-  echo "$as_me:$LINENO: \$? = $ac_status" >&5
+-  (exit $ac_status); } && {
+-	 test -z "$ac_cxx_werror_flag" ||
+-	 test ! -s conftest.err
+-       } && test -s conftest.$ac_objext; then
+-  eval "$as_ac_Header=yes"
+-else
+-  echo "$as_me: failed program was:" >&5
+-sed 's/^/| /' conftest.$ac_ext >&5
+ 
+-	eval "$as_ac_Header=no"
+-fi
++if test $ac_cv_header_stdlib_h = yes && test $ac_cv_header_string_h = yes
++then :
+ 
+-rm -f core conftest.err conftest.$ac_objext conftest.$ac_ext
+-fi
+-ac_res=`eval echo '${'$as_ac_Header'}'`
+-	       { echo "$as_me:$LINENO: result: $ac_res" >&5
+-echo "${ECHO_T}$ac_res" >&6; }
+-if test `eval echo '${'$as_ac_Header'}'` = yes; then
+-  cat >>confdefs.h <<_ACEOF
+-#define `echo "HAVE_$ac_header" | $as_tr_cpp` 1
+-_ACEOF
++printf "%s\n" "#define STDC_HEADERS 1" >>confdefs.h
+ 
+ fi
+ 
+-done
+-
+-
+-
+ # Start macro BTNG_IOSTREAM_HEADER_FILENAME
+ 
+ # Start macro BTNG_TREAT_VARIABLE_HEADER_FILENAME
+-if test "${btng_cv_iostream_header_filename+set}" = set; then
+-  echo $ECHO_N "(cached) $ECHO_C" >&6
+-else
++if test ${btng_cv_iostream_header_filename+y}
++then :
++  printf %s "(cached) " >&6
++else $as_nop
+ 
+ 
+ # Check whether --with-iostream-header-file was given.
+-if test "${with_iostream_header_file+set}" = set; then
++if test ${with_iostream_header_file+y}
++then :
+   withval=$with_iostream_header_file; btng_cv_iostream_header_filename=$with_iostream_header_file
+-else
++else $as_nop
+ 
+ # Start macro BTNG_FIND_CORRECT_HEADER_FILENAME
+ 
+@@ -13497,151 +12644,21 @@ ac_compiler_gnu=$ac_cv_cxx_compiler_gnu
+ 
+   CPPFLAGS_SAVE=$CPPFLAGS
+   for file in iostream iostream.h iostream.hxx; do
+-    as_ac_Header=`echo "ac_cv_header_$file" | $as_tr_sh`
+-if { as_var=$as_ac_Header; eval "test \"\${$as_var+set}\" = set"; }; then
+-  { echo "$as_me:$LINENO: checking for $file" >&5
+-echo $ECHO_N "checking for $file... $ECHO_C" >&6; }
+-if { as_var=$as_ac_Header; eval "test \"\${$as_var+set}\" = set"; }; then
+-  echo $ECHO_N "(cached) $ECHO_C" >&6
+-fi
+-ac_res=`eval echo '${'$as_ac_Header'}'`
+-	       { echo "$as_me:$LINENO: result: $ac_res" >&5
+-echo "${ECHO_T}$ac_res" >&6; }
+-else
+-  # Is the header compilable?
+-{ echo "$as_me:$LINENO: checking $file usability" >&5
+-echo $ECHO_N "checking $file usability... $ECHO_C" >&6; }
+-cat >conftest.$ac_ext <<_ACEOF
+-/* confdefs.h.  */
+-_ACEOF
+-cat confdefs.h >>conftest.$ac_ext
+-cat >>conftest.$ac_ext <<_ACEOF
+-/* end confdefs.h.  */
+-$ac_includes_default
+-#include <$file>
+-_ACEOF
+-rm -f conftest.$ac_objext
+-if { (ac_try="$ac_compile"
+-case "(($ac_try" in
+-  *\"* | *\`* | *\\*) ac_try_echo=\$ac_try;;
+-  *) ac_try_echo=$ac_try;;
+-esac
+-eval "echo \"\$as_me:$LINENO: $ac_try_echo\"") >&5
+-  (eval "$ac_compile") 2>conftest.er1
+-  ac_status=$?
+-  grep -v '^ *+' conftest.er1 >conftest.err
+-  rm -f conftest.er1
+-  cat conftest.err >&5
+-  echo "$as_me:$LINENO: \$? = $ac_status" >&5
+-  (exit $ac_status); } && {
+-	 test -z "$ac_cxx_werror_flag" ||
+-	 test ! -s conftest.err
+-       } && test -s conftest.$ac_objext; then
+-  ac_header_compiler=yes
+-else
+-  echo "$as_me: failed program was:" >&5
+-sed 's/^/| /' conftest.$ac_ext >&5
+-
+-	ac_header_compiler=no
+-fi
+-
+-rm -f core conftest.err conftest.$ac_objext conftest.$ac_ext
+-{ echo "$as_me:$LINENO: result: $ac_header_compiler" >&5
+-echo "${ECHO_T}$ac_header_compiler" >&6; }
+-
+-# Is the header present?
+-{ echo "$as_me:$LINENO: checking $file presence" >&5
+-echo $ECHO_N "checking $file presence... $ECHO_C" >&6; }
+-cat >conftest.$ac_ext <<_ACEOF
+-/* confdefs.h.  */
+-_ACEOF
+-cat confdefs.h >>conftest.$ac_ext
+-cat >>conftest.$ac_ext <<_ACEOF
+-/* end confdefs.h.  */
+-#include <$file>
+-_ACEOF
+-if { (ac_try="$ac_cpp conftest.$ac_ext"
+-case "(($ac_try" in
+-  *\"* | *\`* | *\\*) ac_try_echo=\$ac_try;;
+-  *) ac_try_echo=$ac_try;;
+-esac
+-eval "echo \"\$as_me:$LINENO: $ac_try_echo\"") >&5
+-  (eval "$ac_cpp conftest.$ac_ext") 2>conftest.er1
+-  ac_status=$?
+-  grep -v '^ *+' conftest.er1 >conftest.err
+-  rm -f conftest.er1
+-  cat conftest.err >&5
+-  echo "$as_me:$LINENO: \$? = $ac_status" >&5
+-  (exit $ac_status); } >/dev/null && {
+-	 test -z "$ac_cxx_preproc_warn_flag$ac_cxx_werror_flag" ||
+-	 test ! -s conftest.err
+-       }; then
+-  ac_header_preproc=yes
+-else
+-  echo "$as_me: failed program was:" >&5
+-sed 's/^/| /' conftest.$ac_ext >&5
+-
+-  ac_header_preproc=no
+-fi
+-
+-rm -f conftest.err conftest.$ac_ext
+-{ echo "$as_me:$LINENO: result: $ac_header_preproc" >&5
+-echo "${ECHO_T}$ac_header_preproc" >&6; }
+-
+-# So?  What about this header?
+-case $ac_header_compiler:$ac_header_preproc:$ac_cxx_preproc_warn_flag in
+-  yes:no: )
+-    { echo "$as_me:$LINENO: WARNING: $file: accepted by the compiler, rejected by the preprocessor!" >&5
+-echo "$as_me: WARNING: $file: accepted by the compiler, rejected by the preprocessor!" >&2;}
+-    { echo "$as_me:$LINENO: WARNING: $file: proceeding with the compiler's result" >&5
+-echo "$as_me: WARNING: $file: proceeding with the compiler's result" >&2;}
+-    ac_header_preproc=yes
+-    ;;
+-  no:yes:* )
+-    { echo "$as_me:$LINENO: WARNING: $file: present but cannot be compiled" >&5
+-echo "$as_me: WARNING: $file: present but cannot be compiled" >&2;}
+-    { echo "$as_me:$LINENO: WARNING: $file:     check for missing prerequisite headers?" >&5
+-echo "$as_me: WARNING: $file:     check for missing prerequisite headers?" >&2;}
+-    { echo "$as_me:$LINENO: WARNING: $file: see the Autoconf documentation" >&5
+-echo "$as_me: WARNING: $file: see the Autoconf documentation" >&2;}
+-    { echo "$as_me:$LINENO: WARNING: $file:     section \"Present But Cannot Be Compiled\"" >&5
+-echo "$as_me: WARNING: $file:     section \"Present But Cannot Be Compiled\"" >&2;}
+-    { echo "$as_me:$LINENO: WARNING: $file: proceeding with the preprocessor's result" >&5
+-echo "$as_me: WARNING: $file: proceeding with the preprocessor's result" >&2;}
+-    { echo "$as_me:$LINENO: WARNING: $file: in the future, the compiler will take precedence" >&5
+-echo "$as_me: WARNING: $file: in the future, the compiler will take precedence" >&2;}
+-
+-    ;;
+-esac
+-{ echo "$as_me:$LINENO: checking for $file" >&5
+-echo $ECHO_N "checking for $file... $ECHO_C" >&6; }
+-if { as_var=$as_ac_Header; eval "test \"\${$as_var+set}\" = set"; }; then
+-  echo $ECHO_N "(cached) $ECHO_C" >&6
+-else
+-  eval "$as_ac_Header=\$ac_header_preproc"
+-fi
+-ac_res=`eval echo '${'$as_ac_Header'}'`
+-	       { echo "$as_me:$LINENO: result: $ac_res" >&5
+-echo "${ECHO_T}$ac_res" >&6; }
+-
+-fi
+-if test `eval echo '${'$as_ac_Header'}'` = yes; then
++    as_ac_Header=`printf "%s\n" "ac_cv_header_$file" | $as_tr_sh`
++ac_fn_cxx_check_header_compile "$LINENO" "$file" "$as_ac_Header" "$ac_includes_default"
++if eval test \"x\$"$as_ac_Header"\" = x"yes"
++then :
+   btng_header_found=1
+-else
++else $as_nop
+   unset btng_header_found
+ fi
+ 
+-
+     if test -n "$btng_header_found"; then
+-      { echo "$as_me:$LINENO: checking whether $file is the header sought" >&5
+-echo $ECHO_N "checking whether $file is the header sought... $ECHO_C" >&6; }
+-      echo "configure:13638:" found header file $file >&5
++      { printf "%s\n" "$as_me:${as_lineno-$LINENO}: checking whether $file is the header sought" >&5
++printf %s "checking whether $file is the header sought... " >&6; }
++      echo "configure:12659:" found header file $file >&5
+       CPPFLAGS="$CPPFLAGS_SAVE $CXX_OPTIONS"
+-      cat >conftest.$ac_ext <<_ACEOF
+-/* confdefs.h.  */
+-_ACEOF
+-cat confdefs.h >>conftest.$ac_ext
+-cat >>conftest.$ac_ext <<_ACEOF
++      cat confdefs.h - <<_ACEOF >conftest.$ac_ext
+ /* end confdefs.h.  */
+ 
+ /* macro BTNG_FIND_CORRECT_HEADER_FILENAME checking for $file */
+@@ -13665,7 +12682,7 @@ using namespace std;
+ 
+ #endif
+ int
+-main ()
++main (void)
+ {
+ ostream &co=cout; // test ostream declaration
+    istream &ci=cin; // test istream declaration
+@@ -13675,36 +12692,17 @@ ostream &co=cout; // test ostream declaration
+   return 0;
+ }
+ _ACEOF
+-rm -f conftest.$ac_objext
+-if { (ac_try="$ac_compile"
+-case "(($ac_try" in
+-  *\"* | *\`* | *\\*) ac_try_echo=\$ac_try;;
+-  *) ac_try_echo=$ac_try;;
+-esac
+-eval "echo \"\$as_me:$LINENO: $ac_try_echo\"") >&5
+-  (eval "$ac_compile") 2>conftest.er1
+-  ac_status=$?
+-  grep -v '^ *+' conftest.er1 >conftest.err
+-  rm -f conftest.er1
+-  cat conftest.err >&5
+-  echo "$as_me:$LINENO: \$? = $ac_status" >&5
+-  (exit $ac_status); } && {
+-	 test -z "$ac_cxx_werror_flag" ||
+-	 test ! -s conftest.err
+-       } && test -s conftest.$ac_objext; then
+-  { echo "$as_me:$LINENO: result: yes" >&5
+-echo "${ECHO_T}yes" >&6; }
++if ac_fn_cxx_try_compile "$LINENO"
++then :
++  { printf "%s\n" "$as_me:${as_lineno-$LINENO}: result: yes" >&5
++printf "%s\n" "yes" >&6; }
+         btng_cv_iostream_header_filename="$file"
+-else
+-  echo "$as_me: failed program was:" >&5
+-sed 's/^/| /' conftest.$ac_ext >&5
+-
+-	{ echo "$as_me:$LINENO: result: no" >&5
+-echo "${ECHO_T}no" >&6; }
++else $as_nop
++  { printf "%s\n" "$as_me:${as_lineno-$LINENO}: result: no" >&5
++printf "%s\n" "no" >&6; }
+ 
+ fi
+-
+-rm -f core conftest.err conftest.$ac_objext conftest.$ac_ext
++rm -f core conftest.err conftest.$ac_objext conftest.beam conftest.$ac_ext
+     fi
+     if test -n "${btng_cv_iostream_header_filename}"; then break; fi
+   done
+@@ -13726,30 +12724,26 @@ fi
+ IOSTREAM_HEADER_FILE="$btng_cv_iostream_header_filename"
+ if test -z "$IOSTREAM_HEADER_FILE"; then
+   iostream_header_is_broken=1
+-  { echo "$as_me:$LINENO: WARNING: cannot find a working iostream header file.
++  { printf "%s\n" "$as_me:${as_lineno-$LINENO}: WARNING: cannot find a working iostream header file.
+       Names tried: iostream iostream.h iostream.hxx
+       If you know the correct hame of this header file,
+       use the option --with-iostream-header-file=FILENAME
+       with configure." >&5
+-echo "$as_me: WARNING: cannot find a working iostream header file.
++printf "%s\n" "$as_me: WARNING: cannot find a working iostream header file.
+       Names tried: iostream iostream.h iostream.hxx
+       If you know the correct hame of this header file,
+       use the option --with-iostream-header-file=FILENAME
+       with configure." >&2;}
+ 
+-cat >>confdefs.h <<\_ACEOF
+-#define IOSTREAM_IS_BROKEN 1
+-_ACEOF
++printf "%s\n" "#define IOSTREAM_IS_BROKEN 1" >>confdefs.h
+ 
+-  echo "configure:13744:" header file iostream is broken >&5
++  echo "configure:12740:" header file iostream is broken >&5
+ else
+   unset iostream_header_is_broken
+ 
+-cat >>confdefs.h <<_ACEOF
+-#define IOSTREAM_HEADER_FILE <$IOSTREAM_HEADER_FILE>
+-_ACEOF
++printf "%s\n" "#define IOSTREAM_HEADER_FILE <$IOSTREAM_HEADER_FILE>" >>confdefs.h
+ 
+-  echo "configure:13752:" header file iostream is ok >&5
++  echo "configure:12746:" header file iostream is ok >&5
+ fi
+ # End macro BTNG_TREAT_VARIABLE_HEADER_FILENAME
+ 
+@@ -13759,175 +12753,47 @@ fi
+ # Start macro BTNG_IOMANIP_HEADER_FILENAME
+ 
+ 
+-# Start macro BTNG_TREAT_VARIABLE_HEADER_FILENAME
+-if test "${btng_cv_iomanip_header_filename+set}" = set; then
+-  echo $ECHO_N "(cached) $ECHO_C" >&6
+-else
+-
+-
+-# Check whether --with-iomanip-header-file was given.
+-if test "${with_iomanip_header_file+set}" = set; then
+-  withval=$with_iomanip_header_file; btng_cv_iomanip_header_filename=$with_iomanip_header_file
+-else
+-
+-# Start macro BTNG_FIND_CORRECT_HEADER_FILENAME
+-
+-  ac_ext=cpp
+-ac_cpp='$CXXCPP $CPPFLAGS'
+-ac_compile='$CXX -c $CXXFLAGS $CPPFLAGS conftest.$ac_ext >&5'
+-ac_link='$CXX -o conftest$ac_exeext $CXXFLAGS $CPPFLAGS $LDFLAGS conftest.$ac_ext $LIBS >&5'
+-ac_compiler_gnu=$ac_cv_cxx_compiler_gnu
+-
+-  btng_cv_iomanip_header_filename=
+-
+-
+-  CPPFLAGS_SAVE=$CPPFLAGS
+-  for file in iomanip iomanip.h iomanip.hxx; do
+-    as_ac_Header=`echo "ac_cv_header_$file" | $as_tr_sh`
+-if { as_var=$as_ac_Header; eval "test \"\${$as_var+set}\" = set"; }; then
+-  { echo "$as_me:$LINENO: checking for $file" >&5
+-echo $ECHO_N "checking for $file... $ECHO_C" >&6; }
+-if { as_var=$as_ac_Header; eval "test \"\${$as_var+set}\" = set"; }; then
+-  echo $ECHO_N "(cached) $ECHO_C" >&6
+-fi
+-ac_res=`eval echo '${'$as_ac_Header'}'`
+-	       { echo "$as_me:$LINENO: result: $ac_res" >&5
+-echo "${ECHO_T}$ac_res" >&6; }
+-else
+-  # Is the header compilable?
+-{ echo "$as_me:$LINENO: checking $file usability" >&5
+-echo $ECHO_N "checking $file usability... $ECHO_C" >&6; }
+-cat >conftest.$ac_ext <<_ACEOF
+-/* confdefs.h.  */
+-_ACEOF
+-cat confdefs.h >>conftest.$ac_ext
+-cat >>conftest.$ac_ext <<_ACEOF
+-/* end confdefs.h.  */
+-$ac_includes_default
+-#include <$file>
+-_ACEOF
+-rm -f conftest.$ac_objext
+-if { (ac_try="$ac_compile"
+-case "(($ac_try" in
+-  *\"* | *\`* | *\\*) ac_try_echo=\$ac_try;;
+-  *) ac_try_echo=$ac_try;;
+-esac
+-eval "echo \"\$as_me:$LINENO: $ac_try_echo\"") >&5
+-  (eval "$ac_compile") 2>conftest.er1
+-  ac_status=$?
+-  grep -v '^ *+' conftest.er1 >conftest.err
+-  rm -f conftest.er1
+-  cat conftest.err >&5
+-  echo "$as_me:$LINENO: \$? = $ac_status" >&5
+-  (exit $ac_status); } && {
+-	 test -z "$ac_cxx_werror_flag" ||
+-	 test ! -s conftest.err
+-       } && test -s conftest.$ac_objext; then
+-  ac_header_compiler=yes
+-else
+-  echo "$as_me: failed program was:" >&5
+-sed 's/^/| /' conftest.$ac_ext >&5
+-
+-	ac_header_compiler=no
+-fi
++# Start macro BTNG_TREAT_VARIABLE_HEADER_FILENAME
++if test ${btng_cv_iomanip_header_filename+y}
++then :
++  printf %s "(cached) " >&6
++else $as_nop
+ 
+-rm -f core conftest.err conftest.$ac_objext conftest.$ac_ext
+-{ echo "$as_me:$LINENO: result: $ac_header_compiler" >&5
+-echo "${ECHO_T}$ac_header_compiler" >&6; }
+ 
+-# Is the header present?
+-{ echo "$as_me:$LINENO: checking $file presence" >&5
+-echo $ECHO_N "checking $file presence... $ECHO_C" >&6; }
+-cat >conftest.$ac_ext <<_ACEOF
+-/* confdefs.h.  */
+-_ACEOF
+-cat confdefs.h >>conftest.$ac_ext
+-cat >>conftest.$ac_ext <<_ACEOF
+-/* end confdefs.h.  */
+-#include <$file>
+-_ACEOF
+-if { (ac_try="$ac_cpp conftest.$ac_ext"
+-case "(($ac_try" in
+-  *\"* | *\`* | *\\*) ac_try_echo=\$ac_try;;
+-  *) ac_try_echo=$ac_try;;
+-esac
+-eval "echo \"\$as_me:$LINENO: $ac_try_echo\"") >&5
+-  (eval "$ac_cpp conftest.$ac_ext") 2>conftest.er1
+-  ac_status=$?
+-  grep -v '^ *+' conftest.er1 >conftest.err
+-  rm -f conftest.er1
+-  cat conftest.err >&5
+-  echo "$as_me:$LINENO: \$? = $ac_status" >&5
+-  (exit $ac_status); } >/dev/null && {
+-	 test -z "$ac_cxx_preproc_warn_flag$ac_cxx_werror_flag" ||
+-	 test ! -s conftest.err
+-       }; then
+-  ac_header_preproc=yes
+-else
+-  echo "$as_me: failed program was:" >&5
+-sed 's/^/| /' conftest.$ac_ext >&5
++# Check whether --with-iomanip-header-file was given.
++if test ${with_iomanip_header_file+y}
++then :
++  withval=$with_iomanip_header_file; btng_cv_iomanip_header_filename=$with_iomanip_header_file
++else $as_nop
+ 
+-  ac_header_preproc=no
+-fi
++# Start macro BTNG_FIND_CORRECT_HEADER_FILENAME
+ 
+-rm -f conftest.err conftest.$ac_ext
+-{ echo "$as_me:$LINENO: result: $ac_header_preproc" >&5
+-echo "${ECHO_T}$ac_header_preproc" >&6; }
++  ac_ext=cpp
++ac_cpp='$CXXCPP $CPPFLAGS'
++ac_compile='$CXX -c $CXXFLAGS $CPPFLAGS conftest.$ac_ext >&5'
++ac_link='$CXX -o conftest$ac_exeext $CXXFLAGS $CPPFLAGS $LDFLAGS conftest.$ac_ext $LIBS >&5'
++ac_compiler_gnu=$ac_cv_cxx_compiler_gnu
+ 
+-# So?  What about this header?
+-case $ac_header_compiler:$ac_header_preproc:$ac_cxx_preproc_warn_flag in
+-  yes:no: )
+-    { echo "$as_me:$LINENO: WARNING: $file: accepted by the compiler, rejected by the preprocessor!" >&5
+-echo "$as_me: WARNING: $file: accepted by the compiler, rejected by the preprocessor!" >&2;}
+-    { echo "$as_me:$LINENO: WARNING: $file: proceeding with the compiler's result" >&5
+-echo "$as_me: WARNING: $file: proceeding with the compiler's result" >&2;}
+-    ac_header_preproc=yes
+-    ;;
+-  no:yes:* )
+-    { echo "$as_me:$LINENO: WARNING: $file: present but cannot be compiled" >&5
+-echo "$as_me: WARNING: $file: present but cannot be compiled" >&2;}
+-    { echo "$as_me:$LINENO: WARNING: $file:     check for missing prerequisite headers?" >&5
+-echo "$as_me: WARNING: $file:     check for missing prerequisite headers?" >&2;}
+-    { echo "$as_me:$LINENO: WARNING: $file: see the Autoconf documentation" >&5
+-echo "$as_me: WARNING: $file: see the Autoconf documentation" >&2;}
+-    { echo "$as_me:$LINENO: WARNING: $file:     section \"Present But Cannot Be Compiled\"" >&5
+-echo "$as_me: WARNING: $file:     section \"Present But Cannot Be Compiled\"" >&2;}
+-    { echo "$as_me:$LINENO: WARNING: $file: proceeding with the preprocessor's result" >&5
+-echo "$as_me: WARNING: $file: proceeding with the preprocessor's result" >&2;}
+-    { echo "$as_me:$LINENO: WARNING: $file: in the future, the compiler will take precedence" >&5
+-echo "$as_me: WARNING: $file: in the future, the compiler will take precedence" >&2;}
++  btng_cv_iomanip_header_filename=
+ 
+-    ;;
+-esac
+-{ echo "$as_me:$LINENO: checking for $file" >&5
+-echo $ECHO_N "checking for $file... $ECHO_C" >&6; }
+-if { as_var=$as_ac_Header; eval "test \"\${$as_var+set}\" = set"; }; then
+-  echo $ECHO_N "(cached) $ECHO_C" >&6
+-else
+-  eval "$as_ac_Header=\$ac_header_preproc"
+-fi
+-ac_res=`eval echo '${'$as_ac_Header'}'`
+-	       { echo "$as_me:$LINENO: result: $ac_res" >&5
+-echo "${ECHO_T}$ac_res" >&6; }
+ 
+-fi
+-if test `eval echo '${'$as_ac_Header'}'` = yes; then
++  CPPFLAGS_SAVE=$CPPFLAGS
++  for file in iomanip iomanip.h iomanip.hxx; do
++    as_ac_Header=`printf "%s\n" "ac_cv_header_$file" | $as_tr_sh`
++ac_fn_cxx_check_header_compile "$LINENO" "$file" "$as_ac_Header" "$ac_includes_default"
++if eval test \"x\$"$as_ac_Header"\" = x"yes"
++then :
+   btng_header_found=1
+-else
++else $as_nop
+   unset btng_header_found
+ fi
+ 
+-
+     if test -n "$btng_header_found"; then
+-      { echo "$as_me:$LINENO: checking whether $file is the header sought" >&5
+-echo $ECHO_N "checking whether $file is the header sought... $ECHO_C" >&6; }
+-      echo "configure:13924:" found header file $file >&5
++      { printf "%s\n" "$as_me:${as_lineno-$LINENO}: checking whether $file is the header sought" >&5
++printf %s "checking whether $file is the header sought... " >&6; }
++      echo "configure:12794:" found header file $file >&5
+       CPPFLAGS="$CPPFLAGS_SAVE $CXX_OPTIONS"
+-      cat >conftest.$ac_ext <<_ACEOF
+-/* confdefs.h.  */
+-_ACEOF
+-cat confdefs.h >>conftest.$ac_ext
+-cat >>conftest.$ac_ext <<_ACEOF
++      cat confdefs.h - <<_ACEOF >conftest.$ac_ext
+ /* end confdefs.h.  */
+ 
+ /* macro BTNG_FIND_CORRECT_HEADER_FILENAME checking for $file */
+@@ -13951,43 +12817,24 @@ using namespace std;
+ 
+ #endif
+ int
+-main ()
++main (void)
+ {
+ cout<<setw(13)<<endl;
+   ;
+   return 0;
+ }
+ _ACEOF
+-rm -f conftest.$ac_objext
+-if { (ac_try="$ac_compile"
+-case "(($ac_try" in
+-  *\"* | *\`* | *\\*) ac_try_echo=\$ac_try;;
+-  *) ac_try_echo=$ac_try;;
+-esac
+-eval "echo \"\$as_me:$LINENO: $ac_try_echo\"") >&5
+-  (eval "$ac_compile") 2>conftest.er1
+-  ac_status=$?
+-  grep -v '^ *+' conftest.er1 >conftest.err
+-  rm -f conftest.er1
+-  cat conftest.err >&5
+-  echo "$as_me:$LINENO: \$? = $ac_status" >&5
+-  (exit $ac_status); } && {
+-	 test -z "$ac_cxx_werror_flag" ||
+-	 test ! -s conftest.err
+-       } && test -s conftest.$ac_objext; then
+-  { echo "$as_me:$LINENO: result: yes" >&5
+-echo "${ECHO_T}yes" >&6; }
++if ac_fn_cxx_try_compile "$LINENO"
++then :
++  { printf "%s\n" "$as_me:${as_lineno-$LINENO}: result: yes" >&5
++printf "%s\n" "yes" >&6; }
+         btng_cv_iomanip_header_filename="$file"
+-else
+-  echo "$as_me: failed program was:" >&5
+-sed 's/^/| /' conftest.$ac_ext >&5
+-
+-	{ echo "$as_me:$LINENO: result: no" >&5
+-echo "${ECHO_T}no" >&6; }
++else $as_nop
++  { printf "%s\n" "$as_me:${as_lineno-$LINENO}: result: no" >&5
++printf "%s\n" "no" >&6; }
+ 
+ fi
+-
+-rm -f core conftest.err conftest.$ac_objext conftest.$ac_ext
++rm -f core conftest.err conftest.$ac_objext conftest.beam conftest.$ac_ext
+     fi
+     if test -n "${btng_cv_iomanip_header_filename}"; then break; fi
+   done
+@@ -14009,30 +12856,26 @@ fi
+ IOMANIP_HEADER_FILE="$btng_cv_iomanip_header_filename"
+ if test -z "$IOMANIP_HEADER_FILE"; then
+   iomanip_header_is_broken=1
+-  { echo "$as_me:$LINENO: WARNING: cannot find a working iomanip header file.
++  { printf "%s\n" "$as_me:${as_lineno-$LINENO}: WARNING: cannot find a working iomanip header file.
+       Names tried: iomanip iomanip.h iomanip.hxx
+       If you know the correct hame of this header file,
+       use the option --with-iomanip-header-file=FILENAME
+       with configure." >&5
+-echo "$as_me: WARNING: cannot find a working iomanip header file.
++printf "%s\n" "$as_me: WARNING: cannot find a working iomanip header file.
+       Names tried: iomanip iomanip.h iomanip.hxx
+       If you know the correct hame of this header file,
+       use the option --with-iomanip-header-file=FILENAME
+       with configure." >&2;}
+ 
+-cat >>confdefs.h <<\_ACEOF
+-#define IOMANIP_IS_BROKEN 1
+-_ACEOF
++printf "%s\n" "#define IOMANIP_IS_BROKEN 1" >>confdefs.h
+ 
+-  echo "configure:14027:" header file iomanip is broken >&5
++  echo "configure:12872:" header file iomanip is broken >&5
+ else
+   unset iomanip_header_is_broken
+ 
+-cat >>confdefs.h <<_ACEOF
+-#define IOMANIP_HEADER_FILE <$IOMANIP_HEADER_FILE>
+-_ACEOF
++printf "%s\n" "#define IOMANIP_HEADER_FILE <$IOMANIP_HEADER_FILE>" >>confdefs.h
+ 
+-  echo "configure:14035:" header file iomanip is ok >&5
++  echo "configure:12878:" header file iomanip is ok >&5
+ fi
+ # End macro BTNG_TREAT_VARIABLE_HEADER_FILENAME
+ 
+@@ -14043,15 +12886,17 @@ fi
+ # Start macro BTNG_IOSTREAM_HEADER_FILENAME
+ 
+ # Start macro BTNG_TREAT_VARIABLE_HEADER_FILENAME
+-if test "${btng_cv_iostream_header_filename+set}" = set; then
+-  echo $ECHO_N "(cached) $ECHO_C" >&6
+-else
++if test ${btng_cv_iostream_header_filename+y}
++then :
++  printf %s "(cached) " >&6
++else $as_nop
+ 
+ 
+ # Check whether --with-iostream-header-file was given.
+-if test "${with_iostream_header_file+set}" = set; then
++if test ${with_iostream_header_file+y}
++then :
+   withval=$with_iostream_header_file; btng_cv_iostream_header_filename=$with_iostream_header_file
+-else
++else $as_nop
+ 
+ # Start macro BTNG_FIND_CORRECT_HEADER_FILENAME
+ 
+@@ -14066,151 +12911,21 @@ ac_compiler_gnu=$ac_cv_cxx_compiler_gnu
+ 
+   CPPFLAGS_SAVE=$CPPFLAGS
+   for file in iostream iostream.h iostream.hxx; do
+-    as_ac_Header=`echo "ac_cv_header_$file" | $as_tr_sh`
+-if { as_var=$as_ac_Header; eval "test \"\${$as_var+set}\" = set"; }; then
+-  { echo "$as_me:$LINENO: checking for $file" >&5
+-echo $ECHO_N "checking for $file... $ECHO_C" >&6; }
+-if { as_var=$as_ac_Header; eval "test \"\${$as_var+set}\" = set"; }; then
+-  echo $ECHO_N "(cached) $ECHO_C" >&6
+-fi
+-ac_res=`eval echo '${'$as_ac_Header'}'`
+-	       { echo "$as_me:$LINENO: result: $ac_res" >&5
+-echo "${ECHO_T}$ac_res" >&6; }
+-else
+-  # Is the header compilable?
+-{ echo "$as_me:$LINENO: checking $file usability" >&5
+-echo $ECHO_N "checking $file usability... $ECHO_C" >&6; }
+-cat >conftest.$ac_ext <<_ACEOF
+-/* confdefs.h.  */
+-_ACEOF
+-cat confdefs.h >>conftest.$ac_ext
+-cat >>conftest.$ac_ext <<_ACEOF
+-/* end confdefs.h.  */
+-$ac_includes_default
+-#include <$file>
+-_ACEOF
+-rm -f conftest.$ac_objext
+-if { (ac_try="$ac_compile"
+-case "(($ac_try" in
+-  *\"* | *\`* | *\\*) ac_try_echo=\$ac_try;;
+-  *) ac_try_echo=$ac_try;;
+-esac
+-eval "echo \"\$as_me:$LINENO: $ac_try_echo\"") >&5
+-  (eval "$ac_compile") 2>conftest.er1
+-  ac_status=$?
+-  grep -v '^ *+' conftest.er1 >conftest.err
+-  rm -f conftest.er1
+-  cat conftest.err >&5
+-  echo "$as_me:$LINENO: \$? = $ac_status" >&5
+-  (exit $ac_status); } && {
+-	 test -z "$ac_cxx_werror_flag" ||
+-	 test ! -s conftest.err
+-       } && test -s conftest.$ac_objext; then
+-  ac_header_compiler=yes
+-else
+-  echo "$as_me: failed program was:" >&5
+-sed 's/^/| /' conftest.$ac_ext >&5
+-
+-	ac_header_compiler=no
+-fi
+-
+-rm -f core conftest.err conftest.$ac_objext conftest.$ac_ext
+-{ echo "$as_me:$LINENO: result: $ac_header_compiler" >&5
+-echo "${ECHO_T}$ac_header_compiler" >&6; }
+-
+-# Is the header present?
+-{ echo "$as_me:$LINENO: checking $file presence" >&5
+-echo $ECHO_N "checking $file presence... $ECHO_C" >&6; }
+-cat >conftest.$ac_ext <<_ACEOF
+-/* confdefs.h.  */
+-_ACEOF
+-cat confdefs.h >>conftest.$ac_ext
+-cat >>conftest.$ac_ext <<_ACEOF
+-/* end confdefs.h.  */
+-#include <$file>
+-_ACEOF
+-if { (ac_try="$ac_cpp conftest.$ac_ext"
+-case "(($ac_try" in
+-  *\"* | *\`* | *\\*) ac_try_echo=\$ac_try;;
+-  *) ac_try_echo=$ac_try;;
+-esac
+-eval "echo \"\$as_me:$LINENO: $ac_try_echo\"") >&5
+-  (eval "$ac_cpp conftest.$ac_ext") 2>conftest.er1
+-  ac_status=$?
+-  grep -v '^ *+' conftest.er1 >conftest.err
+-  rm -f conftest.er1
+-  cat conftest.err >&5
+-  echo "$as_me:$LINENO: \$? = $ac_status" >&5
+-  (exit $ac_status); } >/dev/null && {
+-	 test -z "$ac_cxx_preproc_warn_flag$ac_cxx_werror_flag" ||
+-	 test ! -s conftest.err
+-       }; then
+-  ac_header_preproc=yes
+-else
+-  echo "$as_me: failed program was:" >&5
+-sed 's/^/| /' conftest.$ac_ext >&5
+-
+-  ac_header_preproc=no
+-fi
+-
+-rm -f conftest.err conftest.$ac_ext
+-{ echo "$as_me:$LINENO: result: $ac_header_preproc" >&5
+-echo "${ECHO_T}$ac_header_preproc" >&6; }
+-
+-# So?  What about this header?
+-case $ac_header_compiler:$ac_header_preproc:$ac_cxx_preproc_warn_flag in
+-  yes:no: )
+-    { echo "$as_me:$LINENO: WARNING: $file: accepted by the compiler, rejected by the preprocessor!" >&5
+-echo "$as_me: WARNING: $file: accepted by the compiler, rejected by the preprocessor!" >&2;}
+-    { echo "$as_me:$LINENO: WARNING: $file: proceeding with the compiler's result" >&5
+-echo "$as_me: WARNING: $file: proceeding with the compiler's result" >&2;}
+-    ac_header_preproc=yes
+-    ;;
+-  no:yes:* )
+-    { echo "$as_me:$LINENO: WARNING: $file: present but cannot be compiled" >&5
+-echo "$as_me: WARNING: $file: present but cannot be compiled" >&2;}
+-    { echo "$as_me:$LINENO: WARNING: $file:     check for missing prerequisite headers?" >&5
+-echo "$as_me: WARNING: $file:     check for missing prerequisite headers?" >&2;}
+-    { echo "$as_me:$LINENO: WARNING: $file: see the Autoconf documentation" >&5
+-echo "$as_me: WARNING: $file: see the Autoconf documentation" >&2;}
+-    { echo "$as_me:$LINENO: WARNING: $file:     section \"Present But Cannot Be Compiled\"" >&5
+-echo "$as_me: WARNING: $file:     section \"Present But Cannot Be Compiled\"" >&2;}
+-    { echo "$as_me:$LINENO: WARNING: $file: proceeding with the preprocessor's result" >&5
+-echo "$as_me: WARNING: $file: proceeding with the preprocessor's result" >&2;}
+-    { echo "$as_me:$LINENO: WARNING: $file: in the future, the compiler will take precedence" >&5
+-echo "$as_me: WARNING: $file: in the future, the compiler will take precedence" >&2;}
+-
+-    ;;
+-esac
+-{ echo "$as_me:$LINENO: checking for $file" >&5
+-echo $ECHO_N "checking for $file... $ECHO_C" >&6; }
+-if { as_var=$as_ac_Header; eval "test \"\${$as_var+set}\" = set"; }; then
+-  echo $ECHO_N "(cached) $ECHO_C" >&6
+-else
+-  eval "$as_ac_Header=\$ac_header_preproc"
+-fi
+-ac_res=`eval echo '${'$as_ac_Header'}'`
+-	       { echo "$as_me:$LINENO: result: $ac_res" >&5
+-echo "${ECHO_T}$ac_res" >&6; }
+-
+-fi
+-if test `eval echo '${'$as_ac_Header'}'` = yes; then
++    as_ac_Header=`printf "%s\n" "ac_cv_header_$file" | $as_tr_sh`
++ac_fn_cxx_check_header_compile "$LINENO" "$file" "$as_ac_Header" "$ac_includes_default"
++if eval test \"x\$"$as_ac_Header"\" = x"yes"
++then :
+   btng_header_found=1
+-else
++else $as_nop
+   unset btng_header_found
+ fi
+ 
+-
+     if test -n "$btng_header_found"; then
+-      { echo "$as_me:$LINENO: checking whether $file is the header sought" >&5
+-echo $ECHO_N "checking whether $file is the header sought... $ECHO_C" >&6; }
+-      echo "configure:14207:" found header file $file >&5
++      { printf "%s\n" "$as_me:${as_lineno-$LINENO}: checking whether $file is the header sought" >&5
++printf %s "checking whether $file is the header sought... " >&6; }
++      echo "configure:12926:" found header file $file >&5
+       CPPFLAGS="$CPPFLAGS_SAVE $CXX_OPTIONS"
+-      cat >conftest.$ac_ext <<_ACEOF
+-/* confdefs.h.  */
+-_ACEOF
+-cat confdefs.h >>conftest.$ac_ext
+-cat >>conftest.$ac_ext <<_ACEOF
++      cat confdefs.h - <<_ACEOF >conftest.$ac_ext
+ /* end confdefs.h.  */
+ 
+ /* macro BTNG_FIND_CORRECT_HEADER_FILENAME checking for $file */
+@@ -14234,7 +12949,7 @@ using namespace std;
+ 
+ #endif
+ int
+-main ()
++main (void)
+ {
+ ostream &co=cout; // test ostream declaration
+    istream &ci=cin; // test istream declaration
+@@ -14244,36 +12959,17 @@ ostream &co=cout; // test ostream declaration
+   return 0;
+ }
+ _ACEOF
+-rm -f conftest.$ac_objext
+-if { (ac_try="$ac_compile"
+-case "(($ac_try" in
+-  *\"* | *\`* | *\\*) ac_try_echo=\$ac_try;;
+-  *) ac_try_echo=$ac_try;;
+-esac
+-eval "echo \"\$as_me:$LINENO: $ac_try_echo\"") >&5
+-  (eval "$ac_compile") 2>conftest.er1
+-  ac_status=$?
+-  grep -v '^ *+' conftest.er1 >conftest.err
+-  rm -f conftest.er1
+-  cat conftest.err >&5
+-  echo "$as_me:$LINENO: \$? = $ac_status" >&5
+-  (exit $ac_status); } && {
+-	 test -z "$ac_cxx_werror_flag" ||
+-	 test ! -s conftest.err
+-       } && test -s conftest.$ac_objext; then
+-  { echo "$as_me:$LINENO: result: yes" >&5
+-echo "${ECHO_T}yes" >&6; }
++if ac_fn_cxx_try_compile "$LINENO"
++then :
++  { printf "%s\n" "$as_me:${as_lineno-$LINENO}: result: yes" >&5
++printf "%s\n" "yes" >&6; }
+         btng_cv_iostream_header_filename="$file"
+-else
+-  echo "$as_me: failed program was:" >&5
+-sed 's/^/| /' conftest.$ac_ext >&5
+-
+-	{ echo "$as_me:$LINENO: result: no" >&5
+-echo "${ECHO_T}no" >&6; }
++else $as_nop
++  { printf "%s\n" "$as_me:${as_lineno-$LINENO}: result: no" >&5
++printf "%s\n" "no" >&6; }
+ 
+ fi
+-
+-rm -f core conftest.err conftest.$ac_objext conftest.$ac_ext
++rm -f core conftest.err conftest.$ac_objext conftest.beam conftest.$ac_ext
+     fi
+     if test -n "${btng_cv_iostream_header_filename}"; then break; fi
+   done
+@@ -14295,30 +12991,26 @@ fi
+ IOSTREAM_HEADER_FILE="$btng_cv_iostream_header_filename"
+ if test -z "$IOSTREAM_HEADER_FILE"; then
+   iostream_header_is_broken=1
+-  { echo "$as_me:$LINENO: WARNING: cannot find a working iostream header file.
++  { printf "%s\n" "$as_me:${as_lineno-$LINENO}: WARNING: cannot find a working iostream header file.
+       Names tried: iostream iostream.h iostream.hxx
+       If you know the correct hame of this header file,
+       use the option --with-iostream-header-file=FILENAME
+       with configure." >&5
+-echo "$as_me: WARNING: cannot find a working iostream header file.
++printf "%s\n" "$as_me: WARNING: cannot find a working iostream header file.
+       Names tried: iostream iostream.h iostream.hxx
+       If you know the correct hame of this header file,
+       use the option --with-iostream-header-file=FILENAME
+       with configure." >&2;}
+ 
+-cat >>confdefs.h <<\_ACEOF
+-#define IOSTREAM_IS_BROKEN 1
+-_ACEOF
++printf "%s\n" "#define IOSTREAM_IS_BROKEN 1" >>confdefs.h
+ 
+-  echo "configure:14313:" header file iostream is broken >&5
++  echo "configure:13007:" header file iostream is broken >&5
+ else
+   unset iostream_header_is_broken
+ 
+-cat >>confdefs.h <<_ACEOF
+-#define IOSTREAM_HEADER_FILE <$IOSTREAM_HEADER_FILE>
+-_ACEOF
++printf "%s\n" "#define IOSTREAM_HEADER_FILE <$IOSTREAM_HEADER_FILE>" >>confdefs.h
+ 
+-  echo "configure:14321:" header file iostream is ok >&5
++  echo "configure:13013:" header file iostream is ok >&5
+ fi
+ # End macro BTNG_TREAT_VARIABLE_HEADER_FILENAME
+ 
+@@ -14334,15 +13026,17 @@ test "$CXX_ID" = "gnu" && echo "$CXX_VERSION" | grep '^2.95.2' > /dev/null && \
+ btng_stl_sstream_test_body='/* Old syntax */ char i[10]; istrstream ist(i);'
+ 
+ # Start macro BTNG_TREAT_VARIABLE_HEADER_FILENAME
+-if test "${btng_cv_stl_sstream_header_filename+set}" = set; then
+-  echo $ECHO_N "(cached) $ECHO_C" >&6
+-else
++if test ${btng_cv_stl_sstream_header_filename+y}
++then :
++  printf %s "(cached) " >&6
++else $as_nop
+ 
+ 
+ # Check whether --with-stl-sstream-header-file was given.
+-if test "${with_stl_sstream_header_file+set}" = set; then
++if test ${with_stl_sstream_header_file+y}
++then :
+   withval=$with_stl_sstream_header_file; btng_cv_stl_sstream_header_filename=$with_stl_sstream_header_file
+-else
++else $as_nop
+ 
+ # Start macro BTNG_FIND_CORRECT_HEADER_FILENAME
+ 
+@@ -14357,151 +13051,21 @@ ac_compiler_gnu=$ac_cv_cxx_compiler_gnu
+ 
+   CPPFLAGS_SAVE=$CPPFLAGS
+   for file in sstream stringstream strstream sstream.h stringstream.h strstream.h sstream.hxx stringstream.hxx strstream.hxx ; do
+-    as_ac_Header=`echo "ac_cv_header_$file" | $as_tr_sh`
+-if { as_var=$as_ac_Header; eval "test \"\${$as_var+set}\" = set"; }; then
+-  { echo "$as_me:$LINENO: checking for $file" >&5
+-echo $ECHO_N "checking for $file... $ECHO_C" >&6; }
+-if { as_var=$as_ac_Header; eval "test \"\${$as_var+set}\" = set"; }; then
+-  echo $ECHO_N "(cached) $ECHO_C" >&6
+-fi
+-ac_res=`eval echo '${'$as_ac_Header'}'`
+-	       { echo "$as_me:$LINENO: result: $ac_res" >&5
+-echo "${ECHO_T}$ac_res" >&6; }
+-else
+-  # Is the header compilable?
+-{ echo "$as_me:$LINENO: checking $file usability" >&5
+-echo $ECHO_N "checking $file usability... $ECHO_C" >&6; }
+-cat >conftest.$ac_ext <<_ACEOF
+-/* confdefs.h.  */
+-_ACEOF
+-cat confdefs.h >>conftest.$ac_ext
+-cat >>conftest.$ac_ext <<_ACEOF
+-/* end confdefs.h.  */
+-$ac_includes_default
+-#include <$file>
+-_ACEOF
+-rm -f conftest.$ac_objext
+-if { (ac_try="$ac_compile"
+-case "(($ac_try" in
+-  *\"* | *\`* | *\\*) ac_try_echo=\$ac_try;;
+-  *) ac_try_echo=$ac_try;;
+-esac
+-eval "echo \"\$as_me:$LINENO: $ac_try_echo\"") >&5
+-  (eval "$ac_compile") 2>conftest.er1
+-  ac_status=$?
+-  grep -v '^ *+' conftest.er1 >conftest.err
+-  rm -f conftest.er1
+-  cat conftest.err >&5
+-  echo "$as_me:$LINENO: \$? = $ac_status" >&5
+-  (exit $ac_status); } && {
+-	 test -z "$ac_cxx_werror_flag" ||
+-	 test ! -s conftest.err
+-       } && test -s conftest.$ac_objext; then
+-  ac_header_compiler=yes
+-else
+-  echo "$as_me: failed program was:" >&5
+-sed 's/^/| /' conftest.$ac_ext >&5
+-
+-	ac_header_compiler=no
+-fi
+-
+-rm -f core conftest.err conftest.$ac_objext conftest.$ac_ext
+-{ echo "$as_me:$LINENO: result: $ac_header_compiler" >&5
+-echo "${ECHO_T}$ac_header_compiler" >&6; }
+-
+-# Is the header present?
+-{ echo "$as_me:$LINENO: checking $file presence" >&5
+-echo $ECHO_N "checking $file presence... $ECHO_C" >&6; }
+-cat >conftest.$ac_ext <<_ACEOF
+-/* confdefs.h.  */
+-_ACEOF
+-cat confdefs.h >>conftest.$ac_ext
+-cat >>conftest.$ac_ext <<_ACEOF
+-/* end confdefs.h.  */
+-#include <$file>
+-_ACEOF
+-if { (ac_try="$ac_cpp conftest.$ac_ext"
+-case "(($ac_try" in
+-  *\"* | *\`* | *\\*) ac_try_echo=\$ac_try;;
+-  *) ac_try_echo=$ac_try;;
+-esac
+-eval "echo \"\$as_me:$LINENO: $ac_try_echo\"") >&5
+-  (eval "$ac_cpp conftest.$ac_ext") 2>conftest.er1
+-  ac_status=$?
+-  grep -v '^ *+' conftest.er1 >conftest.err
+-  rm -f conftest.er1
+-  cat conftest.err >&5
+-  echo "$as_me:$LINENO: \$? = $ac_status" >&5
+-  (exit $ac_status); } >/dev/null && {
+-	 test -z "$ac_cxx_preproc_warn_flag$ac_cxx_werror_flag" ||
+-	 test ! -s conftest.err
+-       }; then
+-  ac_header_preproc=yes
+-else
+-  echo "$as_me: failed program was:" >&5
+-sed 's/^/| /' conftest.$ac_ext >&5
+-
+-  ac_header_preproc=no
+-fi
+-
+-rm -f conftest.err conftest.$ac_ext
+-{ echo "$as_me:$LINENO: result: $ac_header_preproc" >&5
+-echo "${ECHO_T}$ac_header_preproc" >&6; }
+-
+-# So?  What about this header?
+-case $ac_header_compiler:$ac_header_preproc:$ac_cxx_preproc_warn_flag in
+-  yes:no: )
+-    { echo "$as_me:$LINENO: WARNING: $file: accepted by the compiler, rejected by the preprocessor!" >&5
+-echo "$as_me: WARNING: $file: accepted by the compiler, rejected by the preprocessor!" >&2;}
+-    { echo "$as_me:$LINENO: WARNING: $file: proceeding with the compiler's result" >&5
+-echo "$as_me: WARNING: $file: proceeding with the compiler's result" >&2;}
+-    ac_header_preproc=yes
+-    ;;
+-  no:yes:* )
+-    { echo "$as_me:$LINENO: WARNING: $file: present but cannot be compiled" >&5
+-echo "$as_me: WARNING: $file: present but cannot be compiled" >&2;}
+-    { echo "$as_me:$LINENO: WARNING: $file:     check for missing prerequisite headers?" >&5
+-echo "$as_me: WARNING: $file:     check for missing prerequisite headers?" >&2;}
+-    { echo "$as_me:$LINENO: WARNING: $file: see the Autoconf documentation" >&5
+-echo "$as_me: WARNING: $file: see the Autoconf documentation" >&2;}
+-    { echo "$as_me:$LINENO: WARNING: $file:     section \"Present But Cannot Be Compiled\"" >&5
+-echo "$as_me: WARNING: $file:     section \"Present But Cannot Be Compiled\"" >&2;}
+-    { echo "$as_me:$LINENO: WARNING: $file: proceeding with the preprocessor's result" >&5
+-echo "$as_me: WARNING: $file: proceeding with the preprocessor's result" >&2;}
+-    { echo "$as_me:$LINENO: WARNING: $file: in the future, the compiler will take precedence" >&5
+-echo "$as_me: WARNING: $file: in the future, the compiler will take precedence" >&2;}
+-
+-    ;;
+-esac
+-{ echo "$as_me:$LINENO: checking for $file" >&5
+-echo $ECHO_N "checking for $file... $ECHO_C" >&6; }
+-if { as_var=$as_ac_Header; eval "test \"\${$as_var+set}\" = set"; }; then
+-  echo $ECHO_N "(cached) $ECHO_C" >&6
+-else
+-  eval "$as_ac_Header=\$ac_header_preproc"
+-fi
+-ac_res=`eval echo '${'$as_ac_Header'}'`
+-	       { echo "$as_me:$LINENO: result: $ac_res" >&5
+-echo "${ECHO_T}$ac_res" >&6; }
+-
+-fi
+-if test `eval echo '${'$as_ac_Header'}'` = yes; then
++    as_ac_Header=`printf "%s\n" "ac_cv_header_$file" | $as_tr_sh`
++ac_fn_cxx_check_header_compile "$LINENO" "$file" "$as_ac_Header" "$ac_includes_default"
++if eval test \"x\$"$as_ac_Header"\" = x"yes"
++then :
+   btng_header_found=1
+-else
++else $as_nop
+   unset btng_header_found
+ fi
+ 
+-
+     if test -n "$btng_header_found"; then
+-      { echo "$as_me:$LINENO: checking whether $file is the header sought" >&5
+-echo $ECHO_N "checking whether $file is the header sought... $ECHO_C" >&6; }
+-      echo "configure:14498:" found header file $file >&5
++      { printf "%s\n" "$as_me:${as_lineno-$LINENO}: checking whether $file is the header sought" >&5
++printf %s "checking whether $file is the header sought... " >&6; }
++      echo "configure:13066:" found header file $file >&5
+       CPPFLAGS="$CPPFLAGS_SAVE $CXX_OPTIONS"
+-      cat >conftest.$ac_ext <<_ACEOF
+-/* confdefs.h.  */
+-_ACEOF
+-cat confdefs.h >>conftest.$ac_ext
+-cat >>conftest.$ac_ext <<_ACEOF
++      cat confdefs.h - <<_ACEOF >conftest.$ac_ext
+ /* end confdefs.h.  */
+ 
+ /* macro BTNG_FIND_CORRECT_HEADER_FILENAME checking for $file */
+@@ -14525,43 +13089,24 @@ using namespace std;
+ 
+ #endif
+ int
+-main ()
++main (void)
+ {
+ $btng_stl_sstream_test_body
+   ;
+   return 0;
+ }
+ _ACEOF
+-rm -f conftest.$ac_objext
+-if { (ac_try="$ac_compile"
+-case "(($ac_try" in
+-  *\"* | *\`* | *\\*) ac_try_echo=\$ac_try;;
+-  *) ac_try_echo=$ac_try;;
+-esac
+-eval "echo \"\$as_me:$LINENO: $ac_try_echo\"") >&5
+-  (eval "$ac_compile") 2>conftest.er1
+-  ac_status=$?
+-  grep -v '^ *+' conftest.er1 >conftest.err
+-  rm -f conftest.er1
+-  cat conftest.err >&5
+-  echo "$as_me:$LINENO: \$? = $ac_status" >&5
+-  (exit $ac_status); } && {
+-	 test -z "$ac_cxx_werror_flag" ||
+-	 test ! -s conftest.err
+-       } && test -s conftest.$ac_objext; then
+-  { echo "$as_me:$LINENO: result: yes" >&5
+-echo "${ECHO_T}yes" >&6; }
++if ac_fn_cxx_try_compile "$LINENO"
++then :
++  { printf "%s\n" "$as_me:${as_lineno-$LINENO}: result: yes" >&5
++printf "%s\n" "yes" >&6; }
+         btng_cv_stl_sstream_header_filename="$file"
+-else
+-  echo "$as_me: failed program was:" >&5
+-sed 's/^/| /' conftest.$ac_ext >&5
+-
+-	{ echo "$as_me:$LINENO: result: no" >&5
+-echo "${ECHO_T}no" >&6; }
++else $as_nop
++  { printf "%s\n" "$as_me:${as_lineno-$LINENO}: result: no" >&5
++printf "%s\n" "no" >&6; }
+ 
+ fi
+-
+-rm -f core conftest.err conftest.$ac_objext conftest.$ac_ext
++rm -f core conftest.err conftest.$ac_objext conftest.beam conftest.$ac_ext
+     fi
+     if test -n "${btng_cv_stl_sstream_header_filename}"; then break; fi
+   done
+@@ -14583,30 +13128,26 @@ fi
+ STL_SSTREAM_HEADER_FILE="$btng_cv_stl_sstream_header_filename"
+ if test -z "$STL_SSTREAM_HEADER_FILE"; then
+   stl_sstream_header_is_broken=1
+-  { echo "$as_me:$LINENO: WARNING: cannot find a working stl-sstream header file.
++  { printf "%s\n" "$as_me:${as_lineno-$LINENO}: WARNING: cannot find a working stl-sstream header file.
+       Names tried: sstream stringstream strstream sstream.h stringstream.h strstream.h sstream.hxx stringstream.hxx strstream.hxx
+       If you know the correct hame of this header file,
+       use the option --with-stl-sstream-header-file=FILENAME
+       with configure." >&5
+-echo "$as_me: WARNING: cannot find a working stl-sstream header file.
++printf "%s\n" "$as_me: WARNING: cannot find a working stl-sstream header file.
+       Names tried: sstream stringstream strstream sstream.h stringstream.h strstream.h sstream.hxx stringstream.hxx strstream.hxx
+       If you know the correct hame of this header file,
+       use the option --with-stl-sstream-header-file=FILENAME
+       with configure." >&2;}
+ 
+-cat >>confdefs.h <<\_ACEOF
+-#define STL_SSTREAM_IS_BROKEN 1
+-_ACEOF
++printf "%s\n" "#define STL_SSTREAM_IS_BROKEN 1" >>confdefs.h
+ 
+-  echo "configure:14601:" header file stl-sstream is broken >&5
++  echo "configure:13144:" header file stl-sstream is broken >&5
+ else
+   unset stl_sstream_header_is_broken
+ 
+-cat >>confdefs.h <<_ACEOF
+-#define STL_SSTREAM_HEADER_FILE <$STL_SSTREAM_HEADER_FILE>
+-_ACEOF
++printf "%s\n" "#define STL_SSTREAM_HEADER_FILE <$STL_SSTREAM_HEADER_FILE>" >>confdefs.h
+ 
+-  echo "configure:14609:" header file stl-sstream is ok >&5
++  echo "configure:13150:" header file stl-sstream is ok >&5
+ fi
+ # End macro BTNG_TREAT_VARIABLE_HEADER_FILENAME
+ 
+@@ -14622,12 +13163,13 @@ ac_compiler_gnu=$ac_cv_cxx_compiler_gnu
+ 
+ # Start macro BTNG_TYPE_NAMESPACE
+ 
+-{ echo "$as_me:$LINENO: checking whether namespace is broken" >&5
+-echo $ECHO_N "checking whether namespace is broken... $ECHO_C" >&6; }
++{ printf "%s\n" "$as_me:${as_lineno-$LINENO}: checking whether namespace is broken" >&5
++printf %s "checking whether namespace is broken... " >&6; }
+ 
+-if test "${btng_cv_type_namespace_broken+set}" = set; then
+-  echo $ECHO_N "(cached) $ECHO_C" >&6
+-else
++if test ${btng_cv_type_namespace_broken+y}
++then :
++  printf %s "(cached) " >&6
++else $as_nop
+ 
+ 
+       ac_ext=cpp
+@@ -14636,11 +13178,7 @@ ac_compile='$CXX -c $CXXFLAGS $CPPFLAGS conftest.$ac_ext >&5'
+ ac_link='$CXX -o conftest$ac_exeext $CXXFLAGS $CPPFLAGS $LDFLAGS conftest.$ac_ext $LIBS >&5'
+ ac_compiler_gnu=$ac_cv_cxx_compiler_gnu
+ 
+-  cat >conftest.$ac_ext <<_ACEOF
+-/* confdefs.h.  */
+-_ACEOF
+-cat confdefs.h >>conftest.$ac_ext
+-cat >>conftest.$ac_ext <<_ACEOF
++  cat confdefs.h - <<_ACEOF >conftest.$ac_ext
+ /* end confdefs.h.  */
+ namespace test{ int i; }
+ 
+@@ -14653,43 +13191,24 @@ namespace test{ int i; }
+ 
+ #endif
+ int
+-main ()
++main (void)
+ {
+ using namespace test;
+   ;
+   return 0;
+ }
+ _ACEOF
+-rm -f conftest.$ac_objext
+-if { (ac_try="$ac_compile"
+-case "(($ac_try" in
+-  *\"* | *\`* | *\\*) ac_try_echo=\$ac_try;;
+-  *) ac_try_echo=$ac_try;;
+-esac
+-eval "echo \"\$as_me:$LINENO: $ac_try_echo\"") >&5
+-  (eval "$ac_compile") 2>conftest.er1
+-  ac_status=$?
+-  grep -v '^ *+' conftest.er1 >conftest.err
+-  rm -f conftest.er1
+-  cat conftest.err >&5
+-  echo "$as_me:$LINENO: \$? = $ac_status" >&5
+-  (exit $ac_status); } && {
+-	 test -z "$ac_cxx_werror_flag" ||
+-	 test ! -s conftest.err
+-       } && test -s conftest.$ac_objext; then
++if ac_fn_cxx_try_compile "$LINENO"
++then :
+   # namespace is not broken.
+     btng_cv_type_namespace_broken=no
+ 
+-else
+-  echo "$as_me: failed program was:" >&5
+-sed 's/^/| /' conftest.$ac_ext >&5
+-
+-	# namespace is broken.
++else $as_nop
++  # namespace is broken.
+     btng_cv_type_namespace_broken=yes
+ 
+ fi
+-
+-rm -f core conftest.err conftest.$ac_objext conftest.$ac_ext
++rm -f core conftest.err conftest.$ac_objext conftest.beam conftest.$ac_ext
+   ac_ext=cpp
+ ac_cpp='$CXXCPP $CPPFLAGS'
+ ac_compile='$CXX -c $CXXFLAGS $CPPFLAGS conftest.$ac_ext >&5'
+@@ -14700,14 +13219,12 @@ ac_compiler_gnu=$ac_cv_cxx_compiler_gnu
+ 
+ fi
+ 
+-{ echo "$as_me:$LINENO: result: $btng_cv_type_namespace_broken" >&5
+-echo "${ECHO_T}$btng_cv_type_namespace_broken" >&6; }
++{ printf "%s\n" "$as_me:${as_lineno-$LINENO}: result: $btng_cv_type_namespace_broken" >&5
++printf "%s\n" "$btng_cv_type_namespace_broken" >&6; }
+ 
+ if test "$btng_cv_type_namespace_broken" = yes; then
+ 
+-cat >>confdefs.h <<\_ACEOF
+-#define NAMESPACE_IS_BROKEN 1
+-_ACEOF
++printf "%s\n" "#define NAMESPACE_IS_BROKEN 1" >>confdefs.h
+ 
+ fi
+ 
+@@ -14715,13 +13232,9 @@ fi
+ # End macro BTNG_TYPE_NAMESPACE
+ 
+ 
+-{ echo "$as_me:$LINENO: checking type ostringstream" >&5
+-echo $ECHO_N "checking type ostringstream... $ECHO_C" >&6; }
+-cat >conftest.$ac_ext <<_ACEOF
+-/* confdefs.h.  */
+-_ACEOF
+-cat confdefs.h >>conftest.$ac_ext
+-cat >>conftest.$ac_ext <<_ACEOF
++{ printf "%s\n" "$as_me:${as_lineno-$LINENO}: checking type ostringstream" >&5
++printf %s "checking type ostringstream... " >&6; }
++cat confdefs.h - <<_ACEOF >conftest.$ac_ext
+ /* end confdefs.h.  */
+ #include STL_SSTREAM_HEADER_FILE
+ #ifndef NAMESPACE_IS_BROKEN
+@@ -14737,7 +13250,7 @@ using namespace std;
+ 
+ #endif
+ int
+-main ()
++main (void)
+ {
+ ostringstream oss; oss << 10;
+ 
+@@ -14745,47 +13258,22 @@ ostringstream oss; oss << 10;
+   return 0;
+ }
+ _ACEOF
+-rm -f conftest.$ac_objext
+-if { (ac_try="$ac_compile"
+-case "(($ac_try" in
+-  *\"* | *\`* | *\\*) ac_try_echo=\$ac_try;;
+-  *) ac_try_echo=$ac_try;;
+-esac
+-eval "echo \"\$as_me:$LINENO: $ac_try_echo\"") >&5
+-  (eval "$ac_compile") 2>conftest.er1
+-  ac_status=$?
+-  grep -v '^ *+' conftest.er1 >conftest.err
+-  rm -f conftest.er1
+-  cat conftest.err >&5
+-  echo "$as_me:$LINENO: \$? = $ac_status" >&5
+-  (exit $ac_status); } && {
+-	 test -z "$ac_cxx_werror_flag" ||
+-	 test ! -s conftest.err
+-       } && test -s conftest.$ac_objext; then
+-  { echo "$as_me:$LINENO: result: ok" >&5
+-echo "${ECHO_T}ok" >&6; }
+-else
+-  echo "$as_me: failed program was:" >&5
+-sed 's/^/| /' conftest.$ac_ext >&5
+-
+-	{ echo "$as_me:$LINENO: result: broken" >&5
+-echo "${ECHO_T}broken" >&6; }
++if ac_fn_cxx_try_compile "$LINENO"
++then :
++  { printf "%s\n" "$as_me:${as_lineno-$LINENO}: result: ok" >&5
++printf "%s\n" "ok" >&6; }
++else $as_nop
++  { printf "%s\n" "$as_me:${as_lineno-$LINENO}: result: broken" >&5
++printf "%s\n" "broken" >&6; }
+ 
+-cat >>confdefs.h <<\_ACEOF
+-#define OSTRINGSTREAM_TYPE_IS_BROKEN 1
+-_ACEOF
++printf "%s\n" "#define OSTRINGSTREAM_TYPE_IS_BROKEN 1" >>confdefs.h
+ 
+ 
+ fi
+-
+-rm -f core conftest.err conftest.$ac_objext conftest.$ac_ext
+-{ echo "$as_me:$LINENO: checking type ostrstream" >&5
+-echo $ECHO_N "checking type ostrstream... $ECHO_C" >&6; }
+-cat >conftest.$ac_ext <<_ACEOF
+-/* confdefs.h.  */
+-_ACEOF
+-cat confdefs.h >>conftest.$ac_ext
+-cat >>conftest.$ac_ext <<_ACEOF
++rm -f core conftest.err conftest.$ac_objext conftest.beam conftest.$ac_ext
++{ printf "%s\n" "$as_me:${as_lineno-$LINENO}: checking type ostrstream" >&5
++printf %s "checking type ostrstream... " >&6; }
++cat confdefs.h - <<_ACEOF >conftest.$ac_ext
+ /* end confdefs.h.  */
+ #include STL_SSTREAM_HEADER_FILE
+ #ifndef NAMESPACE_IS_BROKEN
+@@ -14801,7 +13289,7 @@ using namespace std;
+ 
+ #endif
+ int
+-main ()
++main (void)
+ {
+ ostrstream oss; oss << 10;
+ 
+@@ -14809,190 +13297,39 @@ ostrstream oss; oss << 10;
+   return 0;
+ }
+ _ACEOF
+-rm -f conftest.$ac_objext
+-if { (ac_try="$ac_compile"
+-case "(($ac_try" in
+-  *\"* | *\`* | *\\*) ac_try_echo=\$ac_try;;
+-  *) ac_try_echo=$ac_try;;
+-esac
+-eval "echo \"\$as_me:$LINENO: $ac_try_echo\"") >&5
+-  (eval "$ac_compile") 2>conftest.er1
+-  ac_status=$?
+-  grep -v '^ *+' conftest.er1 >conftest.err
+-  rm -f conftest.er1
+-  cat conftest.err >&5
+-  echo "$as_me:$LINENO: \$? = $ac_status" >&5
+-  (exit $ac_status); } && {
+-	 test -z "$ac_cxx_werror_flag" ||
+-	 test ! -s conftest.err
+-       } && test -s conftest.$ac_objext; then
+-  { echo "$as_me:$LINENO: result: ok" >&5
+-echo "${ECHO_T}ok" >&6; }
+-else
+-  echo "$as_me: failed program was:" >&5
+-sed 's/^/| /' conftest.$ac_ext >&5
+-
+-	{ echo "$as_me:$LINENO: result: broken" >&5
+-echo "${ECHO_T}broken" >&6; }
+-
+-cat >>confdefs.h <<\_ACEOF
+-#define OSTRSTREAM_TYPE_IS_BROKEN 1
+-_ACEOF
+-
+-
+-fi
+-
+-rm -f core conftest.err conftest.$ac_objext conftest.$ac_ext
+-ac_ext=c
+-ac_cpp='$CPP $CPPFLAGS'
+-ac_compile='$CC -c $CFLAGS $CPPFLAGS conftest.$ac_ext >&5'
+-ac_link='$CC -o conftest$ac_exeext $CFLAGS $CPPFLAGS $LDFLAGS conftest.$ac_ext $LIBS >&5'
+-ac_compiler_gnu=$ac_cv_c_compiler_gnu
+-
+-
+-if test "${ac_cv_header_malloc_h+set}" = set; then
+-  { echo "$as_me:$LINENO: checking for malloc.h" >&5
+-echo $ECHO_N "checking for malloc.h... $ECHO_C" >&6; }
+-if test "${ac_cv_header_malloc_h+set}" = set; then
+-  echo $ECHO_N "(cached) $ECHO_C" >&6
+-fi
+-{ echo "$as_me:$LINENO: result: $ac_cv_header_malloc_h" >&5
+-echo "${ECHO_T}$ac_cv_header_malloc_h" >&6; }
+-else
+-  # Is the header compilable?
+-{ echo "$as_me:$LINENO: checking malloc.h usability" >&5
+-echo $ECHO_N "checking malloc.h usability... $ECHO_C" >&6; }
+-cat >conftest.$ac_ext <<_ACEOF
+-/* confdefs.h.  */
+-_ACEOF
+-cat confdefs.h >>conftest.$ac_ext
+-cat >>conftest.$ac_ext <<_ACEOF
+-/* end confdefs.h.  */
+-$ac_includes_default
+-#include <malloc.h>
+-_ACEOF
+-rm -f conftest.$ac_objext
+-if { (ac_try="$ac_compile"
+-case "(($ac_try" in
+-  *\"* | *\`* | *\\*) ac_try_echo=\$ac_try;;
+-  *) ac_try_echo=$ac_try;;
+-esac
+-eval "echo \"\$as_me:$LINENO: $ac_try_echo\"") >&5
+-  (eval "$ac_compile") 2>conftest.er1
+-  ac_status=$?
+-  grep -v '^ *+' conftest.er1 >conftest.err
+-  rm -f conftest.er1
+-  cat conftest.err >&5
+-  echo "$as_me:$LINENO: \$? = $ac_status" >&5
+-  (exit $ac_status); } && {
+-	 test -z "$ac_c_werror_flag" ||
+-	 test ! -s conftest.err
+-       } && test -s conftest.$ac_objext; then
+-  ac_header_compiler=yes
+-else
+-  echo "$as_me: failed program was:" >&5
+-sed 's/^/| /' conftest.$ac_ext >&5
+-
+-	ac_header_compiler=no
+-fi
+-
+-rm -f core conftest.err conftest.$ac_objext conftest.$ac_ext
+-{ echo "$as_me:$LINENO: result: $ac_header_compiler" >&5
+-echo "${ECHO_T}$ac_header_compiler" >&6; }
+-
+-# Is the header present?
+-{ echo "$as_me:$LINENO: checking malloc.h presence" >&5
+-echo $ECHO_N "checking malloc.h presence... $ECHO_C" >&6; }
+-cat >conftest.$ac_ext <<_ACEOF
+-/* confdefs.h.  */
+-_ACEOF
+-cat confdefs.h >>conftest.$ac_ext
+-cat >>conftest.$ac_ext <<_ACEOF
+-/* end confdefs.h.  */
+-#include <malloc.h>
+-_ACEOF
+-if { (ac_try="$ac_cpp conftest.$ac_ext"
+-case "(($ac_try" in
+-  *\"* | *\`* | *\\*) ac_try_echo=\$ac_try;;
+-  *) ac_try_echo=$ac_try;;
+-esac
+-eval "echo \"\$as_me:$LINENO: $ac_try_echo\"") >&5
+-  (eval "$ac_cpp conftest.$ac_ext") 2>conftest.er1
+-  ac_status=$?
+-  grep -v '^ *+' conftest.er1 >conftest.err
+-  rm -f conftest.er1
+-  cat conftest.err >&5
+-  echo "$as_me:$LINENO: \$? = $ac_status" >&5
+-  (exit $ac_status); } >/dev/null && {
+-	 test -z "$ac_c_preproc_warn_flag$ac_c_werror_flag" ||
+-	 test ! -s conftest.err
+-       }; then
+-  ac_header_preproc=yes
+-else
+-  echo "$as_me: failed program was:" >&5
+-sed 's/^/| /' conftest.$ac_ext >&5
++if ac_fn_cxx_try_compile "$LINENO"
++then :
++  { printf "%s\n" "$as_me:${as_lineno-$LINENO}: result: ok" >&5
++printf "%s\n" "ok" >&6; }
++else $as_nop
++  { printf "%s\n" "$as_me:${as_lineno-$LINENO}: result: broken" >&5
++printf "%s\n" "broken" >&6; }
+ 
+-  ac_header_preproc=no
+-fi
+-
+-rm -f conftest.err conftest.$ac_ext
+-{ echo "$as_me:$LINENO: result: $ac_header_preproc" >&5
+-echo "${ECHO_T}$ac_header_preproc" >&6; }
+-
+-# So?  What about this header?
+-case $ac_header_compiler:$ac_header_preproc:$ac_c_preproc_warn_flag in
+-  yes:no: )
+-    { echo "$as_me:$LINENO: WARNING: malloc.h: accepted by the compiler, rejected by the preprocessor!" >&5
+-echo "$as_me: WARNING: malloc.h: accepted by the compiler, rejected by the preprocessor!" >&2;}
+-    { echo "$as_me:$LINENO: WARNING: malloc.h: proceeding with the compiler's result" >&5
+-echo "$as_me: WARNING: malloc.h: proceeding with the compiler's result" >&2;}
+-    ac_header_preproc=yes
+-    ;;
+-  no:yes:* )
+-    { echo "$as_me:$LINENO: WARNING: malloc.h: present but cannot be compiled" >&5
+-echo "$as_me: WARNING: malloc.h: present but cannot be compiled" >&2;}
+-    { echo "$as_me:$LINENO: WARNING: malloc.h:     check for missing prerequisite headers?" >&5
+-echo "$as_me: WARNING: malloc.h:     check for missing prerequisite headers?" >&2;}
+-    { echo "$as_me:$LINENO: WARNING: malloc.h: see the Autoconf documentation" >&5
+-echo "$as_me: WARNING: malloc.h: see the Autoconf documentation" >&2;}
+-    { echo "$as_me:$LINENO: WARNING: malloc.h:     section \"Present But Cannot Be Compiled\"" >&5
+-echo "$as_me: WARNING: malloc.h:     section \"Present But Cannot Be Compiled\"" >&2;}
+-    { echo "$as_me:$LINENO: WARNING: malloc.h: proceeding with the preprocessor's result" >&5
+-echo "$as_me: WARNING: malloc.h: proceeding with the preprocessor's result" >&2;}
+-    { echo "$as_me:$LINENO: WARNING: malloc.h: in the future, the compiler will take precedence" >&5
+-echo "$as_me: WARNING: malloc.h: in the future, the compiler will take precedence" >&2;}
++printf "%s\n" "#define OSTRSTREAM_TYPE_IS_BROKEN 1" >>confdefs.h
+ 
+-    ;;
+-esac
+-{ echo "$as_me:$LINENO: checking for malloc.h" >&5
+-echo $ECHO_N "checking for malloc.h... $ECHO_C" >&6; }
+-if test "${ac_cv_header_malloc_h+set}" = set; then
+-  echo $ECHO_N "(cached) $ECHO_C" >&6
+-else
+-  ac_cv_header_malloc_h=$ac_header_preproc
+-fi
+-{ echo "$as_me:$LINENO: result: $ac_cv_header_malloc_h" >&5
+-echo "${ECHO_T}$ac_cv_header_malloc_h" >&6; }
+ 
+ fi
+-if test $ac_cv_header_malloc_h = yes; then
++rm -f core conftest.err conftest.$ac_objext conftest.beam conftest.$ac_ext
++ac_ext=c
++ac_cpp='$CPP $CPPFLAGS'
++ac_compile='$CC -c $CFLAGS $CPPFLAGS conftest.$ac_ext >&5'
++ac_link='$CC -o conftest$ac_exeext $CFLAGS $CPPFLAGS $LDFLAGS conftest.$ac_ext $LIBS >&5'
++ac_compiler_gnu=$ac_cv_c_compiler_gnu
+ 
+-cat >>confdefs.h <<\_ACEOF
+-#define HAVE_MALLOC_H 1
+-_ACEOF
+ 
++ac_fn_c_check_header_compile "$LINENO" "malloc.h" "ac_cv_header_malloc_h" "$ac_includes_default"
++if test "x$ac_cv_header_malloc_h" = xyes
++then :
++
++printf "%s\n" "#define HAVE_MALLOC_H 1" >>confdefs.h
+ 
+-fi
+ 
++fi
+ 
+ 
+-{ echo "$as_me:$LINENO: checking for mallinfo" >&5
+-echo $ECHO_N "checking for mallinfo... $ECHO_C" >&6; }
+-cat >conftest.$ac_ext <<_ACEOF
+-/* confdefs.h.  */
+-_ACEOF
+-cat confdefs.h >>conftest.$ac_ext
+-cat >>conftest.$ac_ext <<_ACEOF
++{ printf "%s\n" "$as_me:${as_lineno-$LINENO}: checking for mallinfo" >&5
++printf %s "checking for mallinfo... " >&6; }
++cat confdefs.h - <<_ACEOF >conftest.$ac_ext
+ /* end confdefs.h.  */
+ #include <malloc.h>
+ #ifdef F77_DUMMY_MAIN
+@@ -15004,52 +13341,31 @@ cat >>conftest.$ac_ext <<_ACEOF
+ 
+ #endif
+ int
+-main ()
++main (void)
+ {
+ void *x=mallinfo
+   ;
+   return 0;
+ }
+ _ACEOF
+-rm -f conftest.$ac_objext
+-if { (ac_try="$ac_compile"
+-case "(($ac_try" in
+-  *\"* | *\`* | *\\*) ac_try_echo=\$ac_try;;
+-  *) ac_try_echo=$ac_try;;
+-esac
+-eval "echo \"\$as_me:$LINENO: $ac_try_echo\"") >&5
+-  (eval "$ac_compile") 2>conftest.er1
+-  ac_status=$?
+-  grep -v '^ *+' conftest.er1 >conftest.err
+-  rm -f conftest.er1
+-  cat conftest.err >&5
+-  echo "$as_me:$LINENO: \$? = $ac_status" >&5
+-  (exit $ac_status); } && {
+-	 test -z "$ac_c_werror_flag" ||
+-	 test ! -s conftest.err
+-       } && test -s conftest.$ac_objext; then
+-
+-cat >>confdefs.h <<\_ACEOF
+-#define HAVE_MALLINFO 1
+-_ACEOF
++if ac_fn_c_try_compile "$LINENO"
++then :
+ 
+-  { echo "$as_me:$LINENO: result: yes" >&5
+-echo "${ECHO_T}yes" >&6; }
+-else
+-  echo "$as_me: failed program was:" >&5
+-sed 's/^/| /' conftest.$ac_ext >&5
++printf "%s\n" "#define HAVE_MALLINFO 1" >>confdefs.h
+ 
+-	{ echo "$as_me:$LINENO: result: no" >&5
+-echo "${ECHO_T}no" >&6; }
++  { printf "%s\n" "$as_me:${as_lineno-$LINENO}: result: yes" >&5
++printf "%s\n" "yes" >&6; }
++else $as_nop
++  { printf "%s\n" "$as_me:${as_lineno-$LINENO}: result: no" >&5
++printf "%s\n" "no" >&6; }
+ 
+ fi
+-
+-rm -f core conftest.err conftest.$ac_objext conftest.$ac_ext
++rm -f core conftest.err conftest.$ac_objext conftest.beam conftest.$ac_ext
+ 
+ 
+ 
+-   { echo "$as_me:$LINENO: checking checking for isnan in cmath" >&5
+-echo $ECHO_N "checking checking for isnan in cmath... $ECHO_C" >&6; }
++   { printf "%s\n" "$as_me:${as_lineno-$LINENO}: checking checking for isnan in cmath" >&5
++printf %s "checking checking for isnan in cmath... " >&6; }
+ 
+ 
+    ac_ext=cpp
+@@ -15058,11 +13374,7 @@ ac_compile='$CXX -c $CXXFLAGS $CPPFLAGS conftest.$ac_ext >&5'
+ ac_link='$CXX -o conftest$ac_exeext $CXXFLAGS $CPPFLAGS $LDFLAGS conftest.$ac_ext $LIBS >&5'
+ ac_compiler_gnu=$ac_cv_cxx_compiler_gnu
+ 
+-   cat >conftest.$ac_ext <<_ACEOF
+-/* confdefs.h.  */
+-_ACEOF
+-cat confdefs.h >>conftest.$ac_ext
+-cat >>conftest.$ac_ext <<_ACEOF
++   cat confdefs.h - <<_ACEOF >conftest.$ac_ext
+ /* end confdefs.h.  */
+  #include <cmath>
+ #ifdef F77_DUMMY_MAIN
+@@ -15074,39 +13386,20 @@ cat >>conftest.$ac_ext <<_ACEOF
+ 
+ #endif
+ int
+-main ()
++main (void)
+ {
+  int test = std::isnan(0.0);
+   ;
+   return 0;
+ }
+ _ACEOF
+-rm -f conftest.$ac_objext
+-if { (ac_try="$ac_compile"
+-case "(($ac_try" in
+-  *\"* | *\`* | *\\*) ac_try_echo=\$ac_try;;
+-  *) ac_try_echo=$ac_try;;
+-esac
+-eval "echo \"\$as_me:$LINENO: $ac_try_echo\"") >&5
+-  (eval "$ac_compile") 2>conftest.er1
+-  ac_status=$?
+-  grep -v '^ *+' conftest.er1 >conftest.err
+-  rm -f conftest.er1
+-  cat conftest.err >&5
+-  echo "$as_me:$LINENO: \$? = $ac_status" >&5
+-  (exit $ac_status); } && {
+-	 test -z "$ac_cxx_werror_flag" ||
+-	 test ! -s conftest.err
+-       } && test -s conftest.$ac_objext; then
++if ac_fn_cxx_try_compile "$LINENO"
++then :
+   casc_cv_cxx_have_isnan=yes
+-else
+-  echo "$as_me: failed program was:" >&5
+-sed 's/^/| /' conftest.$ac_ext >&5
+-
+-	casc_cv_cxx_have_isnan=no
++else $as_nop
++  casc_cv_cxx_have_isnan=no
+ fi
+-
+-rm -f core conftest.err conftest.$ac_objext conftest.$ac_ext
++rm -f core conftest.err conftest.$ac_objext conftest.beam conftest.$ac_ext
+    ac_ext=c
+ ac_cpp='$CPP $CPPFLAGS'
+ ac_compile='$CC -c $CFLAGS $CPPFLAGS conftest.$ac_ext >&5'
+@@ -15114,24 +13407,20 @@ ac_link='$CC -o conftest$ac_exeext $CFLAGS $CPPFLAGS $LDFLAGS conftest.$ac_ext $
+ ac_compiler_gnu=$ac_cv_c_compiler_gnu
+ 
+ 
+-   { echo "$as_me:$LINENO: result: $casc_cv_cxx_have_isnan" >&5
+-echo "${ECHO_T}$casc_cv_cxx_have_isnan" >&6; }
++   { printf "%s\n" "$as_me:${as_lineno-$LINENO}: result: $casc_cv_cxx_have_isnan" >&5
++printf "%s\n" "$casc_cv_cxx_have_isnan" >&6; }
+ 
+    if test "$casc_cv_cxx_have_isnan" = yes; then
+ 
+-cat >>confdefs.h <<\_ACEOF
+-#define HAVE_CMATH_ISNAN 1
+-_ACEOF
++printf "%s\n" "#define HAVE_CMATH_ISNAN 1" >>confdefs.h
+ 
+    else
+ 
+-cat >>confdefs.h <<\_ACEOF
+-#define LACKS_CMATH_ISNAN 1
+-_ACEOF
++printf "%s\n" "#define LACKS_CMATH_ISNAN 1" >>confdefs.h
+ 
+ 
+-      { echo "$as_me:$LINENO: checking checking for isnan in math.h" >&5
+-echo $ECHO_N "checking checking for isnan in math.h... $ECHO_C" >&6; }
++      { printf "%s\n" "$as_me:${as_lineno-$LINENO}: checking checking for isnan in math.h" >&5
++printf %s "checking checking for isnan in math.h... " >&6; }
+ 
+ 
+       ac_ext=cpp
+@@ -15140,11 +13429,7 @@ ac_compile='$CXX -c $CXXFLAGS $CPPFLAGS conftest.$ac_ext >&5'
+ ac_link='$CXX -o conftest$ac_exeext $CXXFLAGS $CPPFLAGS $LDFLAGS conftest.$ac_ext $LIBS >&5'
+ ac_compiler_gnu=$ac_cv_cxx_compiler_gnu
+ 
+-      cat >conftest.$ac_ext <<_ACEOF
+-/* confdefs.h.  */
+-_ACEOF
+-cat confdefs.h >>conftest.$ac_ext
+-cat >>conftest.$ac_ext <<_ACEOF
++      cat confdefs.h - <<_ACEOF >conftest.$ac_ext
+ /* end confdefs.h.  */
+ #include <math.h>
+ #ifdef F77_DUMMY_MAIN
+@@ -15156,39 +13441,20 @@ cat >>conftest.$ac_ext <<_ACEOF
+ 
+ #endif
+ int
+-main ()
++main (void)
+ {
+ int test = isnan(0.0);
+   ;
+   return 0;
+ }
+ _ACEOF
+-rm -f conftest.$ac_objext
+-if { (ac_try="$ac_compile"
+-case "(($ac_try" in
+-  *\"* | *\`* | *\\*) ac_try_echo=\$ac_try;;
+-  *) ac_try_echo=$ac_try;;
+-esac
+-eval "echo \"\$as_me:$LINENO: $ac_try_echo\"") >&5
+-  (eval "$ac_compile") 2>conftest.er1
+-  ac_status=$?
+-  grep -v '^ *+' conftest.er1 >conftest.err
+-  rm -f conftest.er1
+-  cat conftest.err >&5
+-  echo "$as_me:$LINENO: \$? = $ac_status" >&5
+-  (exit $ac_status); } && {
+-	 test -z "$ac_cxx_werror_flag" ||
+-	 test ! -s conftest.err
+-       } && test -s conftest.$ac_objext; then
++if ac_fn_cxx_try_compile "$LINENO"
++then :
+   casc_cv_cxx_have_isnan=yes
+-else
+-  echo "$as_me: failed program was:" >&5
+-sed 's/^/| /' conftest.$ac_ext >&5
+-
+-	casc_cv_cxx_have_isnan=no
++else $as_nop
++  casc_cv_cxx_have_isnan=no
+ fi
+-
+-rm -f core conftest.err conftest.$ac_objext conftest.$ac_ext
++rm -f core conftest.err conftest.$ac_objext conftest.beam conftest.$ac_ext
+       ac_ext=c
+ ac_cpp='$CPP $CPPFLAGS'
+ ac_compile='$CC -c $CFLAGS $CPPFLAGS conftest.$ac_ext >&5'
+@@ -15196,24 +13462,20 @@ ac_link='$CC -o conftest$ac_exeext $CFLAGS $CPPFLAGS $LDFLAGS conftest.$ac_ext $
+ ac_compiler_gnu=$ac_cv_c_compiler_gnu
+ 
+ 
+-      { echo "$as_me:$LINENO: result: $casc_cv_cxx_have_isnan" >&5
+-echo "${ECHO_T}$casc_cv_cxx_have_isnan" >&6; }
++      { printf "%s\n" "$as_me:${as_lineno-$LINENO}: result: $casc_cv_cxx_have_isnan" >&5
++printf "%s\n" "$casc_cv_cxx_have_isnan" >&6; }
+ 
+       if test "$casc_cv_cxx_have_isnan" = yes; then
+ 
+-cat >>confdefs.h <<\_ACEOF
+-#define HAVE_ISNAN 1
+-_ACEOF
++printf "%s\n" "#define HAVE_ISNAN 1" >>confdefs.h
+ 
+       else
+ 
+-cat >>confdefs.h <<\_ACEOF
+-#define LACKS_ISNAN 1
+-_ACEOF
++printf "%s\n" "#define LACKS_ISNAN 1" >>confdefs.h
+ 
+ 
+-         { echo "$as_me:$LINENO: checking checking for __isnand" >&5
+-echo $ECHO_N "checking checking for __isnand... $ECHO_C" >&6; }
++         { printf "%s\n" "$as_me:${as_lineno-$LINENO}: checking checking for __isnand" >&5
++printf %s "checking checking for __isnand... " >&6; }
+ 
+ 
+          ac_ext=cpp
+@@ -15222,11 +13484,7 @@ ac_compile='$CXX -c $CXXFLAGS $CPPFLAGS conftest.$ac_ext >&5'
+ ac_link='$CXX -o conftest$ac_exeext $CXXFLAGS $CPPFLAGS $LDFLAGS conftest.$ac_ext $LIBS >&5'
+ ac_compiler_gnu=$ac_cv_cxx_compiler_gnu
+ 
+-         cat >conftest.$ac_ext <<_ACEOF
+-/* confdefs.h.  */
+-_ACEOF
+-cat confdefs.h >>conftest.$ac_ext
+-cat >>conftest.$ac_ext <<_ACEOF
++         cat confdefs.h - <<_ACEOF >conftest.$ac_ext
+ /* end confdefs.h.  */
+ #include <math.h>
+ #ifdef F77_DUMMY_MAIN
+@@ -15238,39 +13496,20 @@ cat >>conftest.$ac_ext <<_ACEOF
+ 
+ #endif
+ int
+-main ()
++main (void)
+ {
+ int test = __isnand(0.0);
+   ;
+   return 0;
+ }
+ _ACEOF
+-rm -f conftest.$ac_objext
+-if { (ac_try="$ac_compile"
+-case "(($ac_try" in
+-  *\"* | *\`* | *\\*) ac_try_echo=\$ac_try;;
+-  *) ac_try_echo=$ac_try;;
+-esac
+-eval "echo \"\$as_me:$LINENO: $ac_try_echo\"") >&5
+-  (eval "$ac_compile") 2>conftest.er1
+-  ac_status=$?
+-  grep -v '^ *+' conftest.er1 >conftest.err
+-  rm -f conftest.er1
+-  cat conftest.err >&5
+-  echo "$as_me:$LINENO: \$? = $ac_status" >&5
+-  (exit $ac_status); } && {
+-	 test -z "$ac_cxx_werror_flag" ||
+-	 test ! -s conftest.err
+-       } && test -s conftest.$ac_objext; then
++if ac_fn_cxx_try_compile "$LINENO"
++then :
+   casc_cv_cxx_have_isnand=yes
+-else
+-  echo "$as_me: failed program was:" >&5
+-sed 's/^/| /' conftest.$ac_ext >&5
+-
+-	casc_cv_cxx_have_isnand=no
++else $as_nop
++  casc_cv_cxx_have_isnand=no
+ fi
+-
+-rm -f core conftest.err conftest.$ac_objext conftest.$ac_ext
++rm -f core conftest.err conftest.$ac_objext conftest.beam conftest.$ac_ext
+          ac_ext=c
+ ac_cpp='$CPP $CPPFLAGS'
+ ac_compile='$CC -c $CFLAGS $CPPFLAGS conftest.$ac_ext >&5'
+@@ -15278,23 +13517,19 @@ ac_link='$CC -o conftest$ac_exeext $CFLAGS $CPPFLAGS $LDFLAGS conftest.$ac_ext $
+ ac_compiler_gnu=$ac_cv_c_compiler_gnu
+ 
+ 
+-         { echo "$as_me:$LINENO: result: $casc_cv_cxx_have_isnand" >&5
+-echo "${ECHO_T}$casc_cv_cxx_have_isnand" >&6; }
++         { printf "%s\n" "$as_me:${as_lineno-$LINENO}: result: $casc_cv_cxx_have_isnand" >&5
++printf "%s\n" "$casc_cv_cxx_have_isnand" >&6; }
+          if test "$casc_cv_cxx_have_isnand" = yes; then
+ 
+-cat >>confdefs.h <<\_ACEOF
+-#define HAVE_ISNAND 1
+-_ACEOF
++printf "%s\n" "#define HAVE_ISNAND 1" >>confdefs.h
+ 
+          else
+ 
+-cat >>confdefs.h <<\_ACEOF
+-#define LACKS_ISNAND 1
+-_ACEOF
++printf "%s\n" "#define LACKS_ISNAND 1" >>confdefs.h
+ 
+ 
+-            { echo "$as_me:$LINENO: checking checking for __inline_isnand" >&5
+-echo $ECHO_N "checking checking for __inline_isnand... $ECHO_C" >&6; }
++            { printf "%s\n" "$as_me:${as_lineno-$LINENO}: checking checking for __inline_isnand" >&5
++printf %s "checking checking for __inline_isnand... " >&6; }
+ 
+ 
+             ac_ext=cpp
+@@ -15303,11 +13538,7 @@ ac_compile='$CXX -c $CXXFLAGS $CPPFLAGS conftest.$ac_ext >&5'
+ ac_link='$CXX -o conftest$ac_exeext $CXXFLAGS $CPPFLAGS $LDFLAGS conftest.$ac_ext $LIBS >&5'
+ ac_compiler_gnu=$ac_cv_cxx_compiler_gnu
+ 
+-            cat >conftest.$ac_ext <<_ACEOF
+-/* confdefs.h.  */
+-_ACEOF
+-cat confdefs.h >>conftest.$ac_ext
+-cat >>conftest.$ac_ext <<_ACEOF
++            cat confdefs.h - <<_ACEOF >conftest.$ac_ext
+ /* end confdefs.h.  */
+ #include <math.h>
+ #ifdef F77_DUMMY_MAIN
+@@ -15319,39 +13550,20 @@ cat >>conftest.$ac_ext <<_ACEOF
+ 
+ #endif
+ int
+-main ()
++main (void)
+ {
+ int test = __inline_isnand(0.0);
+   ;
+   return 0;
+ }
+ _ACEOF
+-rm -f conftest.$ac_objext
+-if { (ac_try="$ac_compile"
+-case "(($ac_try" in
+-  *\"* | *\`* | *\\*) ac_try_echo=\$ac_try;;
+-  *) ac_try_echo=$ac_try;;
+-esac
+-eval "echo \"\$as_me:$LINENO: $ac_try_echo\"") >&5
+-  (eval "$ac_compile") 2>conftest.er1
+-  ac_status=$?
+-  grep -v '^ *+' conftest.er1 >conftest.err
+-  rm -f conftest.er1
+-  cat conftest.err >&5
+-  echo "$as_me:$LINENO: \$? = $ac_status" >&5
+-  (exit $ac_status); } && {
+-	 test -z "$ac_cxx_werror_flag" ||
+-	 test ! -s conftest.err
+-       } && test -s conftest.$ac_objext; then
++if ac_fn_cxx_try_compile "$LINENO"
++then :
+   casc_cv_cxx_have_inline_isnan=yes
+-else
+-  echo "$as_me: failed program was:" >&5
+-sed 's/^/| /' conftest.$ac_ext >&5
+-
+-	casc_cv_cxx_have_inline_isnan=no
++else $as_nop
++  casc_cv_cxx_have_inline_isnan=no
+ fi
+-
+-rm -f core conftest.err conftest.$ac_objext conftest.$ac_ext
++rm -f core conftest.err conftest.$ac_objext conftest.beam conftest.$ac_ext
+               ac_ext=c
+ ac_cpp='$CPP $CPPFLAGS'
+ ac_compile='$CC -c $CFLAGS $CPPFLAGS conftest.$ac_ext >&5'
+@@ -15359,19 +13571,15 @@ ac_link='$CC -o conftest$ac_exeext $CFLAGS $CPPFLAGS $LDFLAGS conftest.$ac_ext $
+ ac_compiler_gnu=$ac_cv_c_compiler_gnu
+ 
+ 
+-            { echo "$as_me:$LINENO: result: $casc_cv_cxx_have_inline_isnan" >&5
+-echo "${ECHO_T}$casc_cv_cxx_have_inline_isnan" >&6; }
++            { printf "%s\n" "$as_me:${as_lineno-$LINENO}: result: $casc_cv_cxx_have_inline_isnan" >&5
++printf "%s\n" "$casc_cv_cxx_have_inline_isnan" >&6; }
+             if test "$casc_cv_cxx_have_inline_isnan" = yes; then
+ 
+-cat >>confdefs.h <<\_ACEOF
+-#define HAVE_INLINE_ISNAND 1
+-_ACEOF
++printf "%s\n" "#define HAVE_INLINE_ISNAND 1" >>confdefs.h
+ 
+             else
+ 
+-cat >>confdefs.h <<\_ACEOF
+-#define LACKS_INLINE_ISNAND 1
+-_ACEOF
++printf "%s\n" "#define LACKS_INLINE_ISNAND 1" >>confdefs.h
+ 
+            fi
+ 	fi
+@@ -15385,15 +13593,17 @@ _ACEOF
+ 
+ 
+ # Start macro BTNG_ARG_WITH_ENV_WRAPPER with args dl and dl_PREFIX
+-{ echo "$as_me:$LINENO: checking for dl" >&5
+-echo $ECHO_N "checking for dl... $ECHO_C" >&6; }
+-if test "${btng_cv_prog_dl+set}" = set; then
+-  echo $ECHO_N "(cached) $ECHO_C" >&6
+-else
++{ printf "%s\n" "$as_me:${as_lineno-$LINENO}: checking for dl" >&5
++printf %s "checking for dl... " >&6; }
++if test ${btng_cv_prog_dl+y}
++then :
++  printf %s "(cached) " >&6
++else $as_nop
+ 
+ 
+ # Check whether --with-dl was given.
+-if test "${with_dl+set}" = set; then
++if test ${with_dl+y}
++then :
+   withval=$with_dl;
+ fi
+ 
+@@ -15433,8 +13643,8 @@ if test "${dl_PREFIX+set}" = set ; then
+ fi
+ 
+ fi
+-{ echo "$as_me:$LINENO: result: $btng_cv_prog_dl" >&5
+-echo "${ECHO_T}$btng_cv_prog_dl" >&6; }
++{ printf "%s\n" "$as_me:${as_lineno-$LINENO}: result: $btng_cv_prog_dl" >&5
++printf "%s\n" "$btng_cv_prog_dl" >&6; }
+ # Set dl_PREFIX from cache.
+ # dl_PREFIX is not yet set if we grabbed it from cache.
+ if test "${btng_cv_prog_dl+set}" = set ; then
+@@ -15449,15 +13659,17 @@ fi
+ # Start macro BTNG_ARG_WITH_PREFIX
+ 
+ # Start macro BTNG_ARG_WITH_ENV_WRAPPER with args dl-includes and dl_INCLUDES
+-{ echo "$as_me:$LINENO: checking for dl-includes" >&5
+-echo $ECHO_N "checking for dl-includes... $ECHO_C" >&6; }
+-if test "${btng_cv_prog_dl_includes+set}" = set; then
+-  echo $ECHO_N "(cached) $ECHO_C" >&6
+-else
++{ printf "%s\n" "$as_me:${as_lineno-$LINENO}: checking for dl-includes" >&5
++printf %s "checking for dl-includes... " >&6; }
++if test ${btng_cv_prog_dl_includes+y}
++then :
++  printf %s "(cached) " >&6
++else $as_nop
+ 
+ 
+ # Check whether --with-dl-includes was given.
+-if test "${with_dl_includes+set}" = set; then
++if test ${with_dl_includes+y}
++then :
+   withval=$with_dl_includes;
+ fi
+ 
+@@ -15479,11 +13691,9 @@ case "$with_dl_includes" in
+       : Nothing to do here actually, because dl_INCLUDES is already in the environment.
+     else
+       if test "${with_dl_includes}" = yes ; then
+-  { { echo "$as_me:$LINENO: error: If you specify --with-dl-includes, you must give it the path as in --with-dl-includes=/installation/path" >&5
+-echo "$as_me: error: If you specify --with-dl-includes, you must give it the path as in --with-dl-includes=/installation/path" >&2;}
+-   { (exit 1); exit 1; }; }
++  as_fn_error $? "If you specify --with-dl-includes, you must give it the path as in --with-dl-includes=/installation/path" "$LINENO" 5
+ fi
+-echo "configure:15486:" environment dl_INCLUDES not defined >&5
++echo "configure:13696:" environment dl_INCLUDES not defined >&5
+ 
+ 
+     fi
+@@ -15504,8 +13714,8 @@ if test "${dl_INCLUDES+set}" = set ; then
+ fi
+ 
+ fi
+-{ echo "$as_me:$LINENO: result: $btng_cv_prog_dl_includes" >&5
+-echo "${ECHO_T}$btng_cv_prog_dl_includes" >&6; }
++{ printf "%s\n" "$as_me:${as_lineno-$LINENO}: result: $btng_cv_prog_dl_includes" >&5
++printf "%s\n" "$btng_cv_prog_dl_includes" >&6; }
+ # Set dl_INCLUDES from cache.
+ # dl_INCLUDES is not yet set if we grabbed it from cache.
+ if test "${btng_cv_prog_dl_includes+set}" = set ; then
+@@ -15520,15 +13730,17 @@ fi
+ # Start macro BTNG_ARG_WITH_PREFIX
+ 
+ # Start macro BTNG_ARG_WITH_ENV_WRAPPER with args dl-libs and dl_LIBS
+-{ echo "$as_me:$LINENO: checking for dl-libs" >&5
+-echo $ECHO_N "checking for dl-libs... $ECHO_C" >&6; }
+-if test "${btng_cv_prog_dl_libs+set}" = set; then
+-  echo $ECHO_N "(cached) $ECHO_C" >&6
+-else
++{ printf "%s\n" "$as_me:${as_lineno-$LINENO}: checking for dl-libs" >&5
++printf %s "checking for dl-libs... " >&6; }
++if test ${btng_cv_prog_dl_libs+y}
++then :
++  printf %s "(cached) " >&6
++else $as_nop
+ 
+ 
+ # Check whether --with-dl-libs was given.
+-if test "${with_dl_libs+set}" = set; then
++if test ${with_dl_libs+y}
++then :
+   withval=$with_dl_libs;
+ fi
+ 
+@@ -15550,11 +13762,9 @@ case "$with_dl_libs" in
+       : Nothing to do here actually, because dl_LIBS is already in the environment.
+     else
+       if test "${with_dl_libs}" = yes ; then
+-  { { echo "$as_me:$LINENO: error: If you specify --with-dl-libs, you must give it the path as in --with-dl-libs=/installation/path" >&5
+-echo "$as_me: error: If you specify --with-dl-libs, you must give it the path as in --with-dl-libs=/installation/path" >&2;}
+-   { (exit 1); exit 1; }; }
++  as_fn_error $? "If you specify --with-dl-libs, you must give it the path as in --with-dl-libs=/installation/path" "$LINENO" 5
+ fi
+-echo "configure:15557:" environment dl_LIBS not defined >&5
++echo "configure:13767:" environment dl_LIBS not defined >&5
+ 
+ 
+     fi
+@@ -15575,8 +13785,8 @@ if test "${dl_LIBS+set}" = set ; then
+ fi
+ 
+ fi
+-{ echo "$as_me:$LINENO: result: $btng_cv_prog_dl_libs" >&5
+-echo "${ECHO_T}$btng_cv_prog_dl_libs" >&6; }
++{ printf "%s\n" "$as_me:${as_lineno-$LINENO}: result: $btng_cv_prog_dl_libs" >&5
++printf "%s\n" "$btng_cv_prog_dl_libs" >&6; }
+ # Set dl_LIBS from cache.
+ # dl_LIBS is not yet set if we grabbed it from cache.
+ if test "${btng_cv_prog_dl_libs+set}" = set ; then
+@@ -15603,25 +13813,19 @@ if test "${dl_PREFIX+set}" = set ; then
+     # If path is given, add path to extra flag for library search.
+     test -n "${dl_PREFIX}" && btng_extra_libs="-L${dl_PREFIX}/lib $btng_extra_libs"
+     # Look for library.
+-    { echo "$as_me:$LINENO: checking for library containing dlopen" >&5
+-echo $ECHO_N "checking for library containing dlopen... $ECHO_C" >&6; }
+-if test "${ac_cv_search_dlopen+set}" = set; then
+-  echo $ECHO_N "(cached) $ECHO_C" >&6
+-else
++    { printf "%s\n" "$as_me:${as_lineno-$LINENO}: checking for library containing dlopen" >&5
++printf %s "checking for library containing dlopen... " >&6; }
++if test ${ac_cv_search_dlopen+y}
++then :
++  printf %s "(cached) " >&6
++else $as_nop
+   ac_func_search_save_LIBS=$LIBS
+-cat >conftest.$ac_ext <<_ACEOF
+-/* confdefs.h.  */
+-_ACEOF
+-cat confdefs.h >>conftest.$ac_ext
+-cat >>conftest.$ac_ext <<_ACEOF
++cat confdefs.h - <<_ACEOF >conftest.$ac_ext
+ /* end confdefs.h.  */
+ 
+ /* Override any GCC internal prototype to avoid an error.
+    Use char because int might match the return type of a GCC
+    builtin and then its argument prototype would still apply.  */
+-#ifdef __cplusplus
+-extern "C"
+-#endif
+ char dlopen ();
+ #ifdef F77_DUMMY_MAIN
+ 
+@@ -15632,64 +13836,46 @@ char dlopen ();
+ 
+ #endif
+ int
+-main ()
++main (void)
+ {
+ return dlopen ();
+   ;
+   return 0;
+ }
+ _ACEOF
+-for ac_lib in '' dl; do
++for ac_lib in '' dl
++do
+   if test -z "$ac_lib"; then
+     ac_res="none required"
+   else
+     ac_res=-l$ac_lib
+     LIBS="-l$ac_lib $btng_extra_libs $ac_func_search_save_LIBS"
+   fi
+-  rm -f conftest.$ac_objext conftest$ac_exeext
+-if { (ac_try="$ac_link"
+-case "(($ac_try" in
+-  *\"* | *\`* | *\\*) ac_try_echo=\$ac_try;;
+-  *) ac_try_echo=$ac_try;;
+-esac
+-eval "echo \"\$as_me:$LINENO: $ac_try_echo\"") >&5
+-  (eval "$ac_link") 2>conftest.er1
+-  ac_status=$?
+-  grep -v '^ *+' conftest.er1 >conftest.err
+-  rm -f conftest.er1
+-  cat conftest.err >&5
+-  echo "$as_me:$LINENO: \$? = $ac_status" >&5
+-  (exit $ac_status); } && {
+-	 test -z "$ac_c_werror_flag" ||
+-	 test ! -s conftest.err
+-       } && test -s conftest$ac_exeext &&
+-       $as_test_x conftest$ac_exeext; then
++  if ac_fn_c_try_link "$LINENO"
++then :
+   ac_cv_search_dlopen=$ac_res
+-else
+-  echo "$as_me: failed program was:" >&5
+-sed 's/^/| /' conftest.$ac_ext >&5
+-
+-
+ fi
+-
+-rm -f core conftest.err conftest.$ac_objext conftest_ipa8_conftest.oo \
+-      conftest$ac_exeext
+-  if test "${ac_cv_search_dlopen+set}" = set; then
++rm -f core conftest.err conftest.$ac_objext conftest.beam \
++    conftest$ac_exeext
++  if test ${ac_cv_search_dlopen+y}
++then :
+   break
+ fi
+ done
+-if test "${ac_cv_search_dlopen+set}" = set; then
+-  :
+-else
++if test ${ac_cv_search_dlopen+y}
++then :
++
++else $as_nop
+   ac_cv_search_dlopen=no
+ fi
+ rm conftest.$ac_ext
+ LIBS=$ac_func_search_save_LIBS
+ fi
+-{ echo "$as_me:$LINENO: result: $ac_cv_search_dlopen" >&5
+-echo "${ECHO_T}$ac_cv_search_dlopen" >&6; }
++{ printf "%s\n" "$as_me:${as_lineno-$LINENO}: result: $ac_cv_search_dlopen" >&5
++printf "%s\n" "$ac_cv_search_dlopen" >&6; }
+ ac_res=$ac_cv_search_dlopen
+-if test "$ac_res" != no; then
++if test "$ac_res" != no
++then :
+   test "$ac_res" = "none required" || LIBS="$ac_res $LIBS"
+ 
+ 
+@@ -15702,7 +13888,7 @@ for btng_log_vars_index in $btng_log_vars ; do
+   else
+     btng_log_vars_value="unset";
+   fi
+-  echo "configure:15705:" "After finding dl flag: $btng_log_vars_index is $btng_log_vars_value" >&5;
++  echo "configure:13891:" "After finding dl flag: $btng_log_vars_index is $btng_log_vars_value" >&5;
+ done
+ 
+ 
+@@ -15720,12 +13906,12 @@ for btng_log_vars_index in $btng_log_vars ; do
+   else
+     btng_log_vars_value="unset";
+   fi
+-  echo "configure:15723:" "Found dl library flag: $btng_log_vars_index is $btng_log_vars_value" >&5;
++  echo "configure:13909:" "Found dl library flag: $btng_log_vars_index is $btng_log_vars_value" >&5;
+ done
+ 
+ 
+ 
+-else
++else $as_nop
+ 
+       # Action if NOT found ...
+ 
+@@ -15738,7 +13924,7 @@ for btng_log_vars_index in $btng_log_vars ; do
+   else
+     btng_log_vars_value="unset";
+   fi
+-  echo "configure:15741:" "Did not find dl library flag: $btng_log_vars_index is $btng_log_vars_value" >&5;
++  echo "configure:13927:" "Did not find dl library flag: $btng_log_vars_index is $btng_log_vars_value" >&5;
+ done
+ 
+ 
+@@ -15749,7 +13935,7 @@ fi
+     unset btng_extra_libs
+     unset btng_save_LIBS
+   else
+-    echo "configure:15752:" Not looking for dl because dl_LIBS is already set >&5
++    echo "configure:13938:" Not looking for dl because dl_LIBS is already set >&5
+   fi
+ fi
+ # End macro BTNG_VAR_SET_DL
+@@ -15759,12 +13945,12 @@ fi
+ if test "${dl_PREFIX+set}" = set; then
+   if echo $target_os | grep '^linux' > /dev/null \
+     && test ! "${dl_LIBS+set}" = set; then
+-    { echo "$as_me:$LINENO: WARNING:
++    { printf "%s\n" "$as_me:${as_lineno-$LINENO}: WARNING:
+ 	The Linux dynamic loading library is not found.
+ 	This may cause problems with some libraries that use it.
+ 	In particular, we have seen that PETSc may use this library.
+     " >&5
+-echo "$as_me: WARNING:
++printf "%s\n" "$as_me: WARNING:
+ 	The Linux dynamic loading library is not found.
+ 	This may cause problems with some libraries that use it.
+ 	In particular, we have seen that PETSc may use this library.
+@@ -15795,37 +13981,23 @@ ac_ext=f
+ ac_compile='$F77 -c $FFLAGS conftest.$ac_ext >&5'
+ ac_link='$F77 -o conftest$ac_exeext $FFLAGS $LDFLAGS conftest.$ac_ext $LIBS >&5'
+ ac_compiler_gnu=$ac_cv_f77_compiler_gnu
+-{ echo "$as_me:$LINENO: checking how to get verbose linking output from $F77" >&5
+-echo $ECHO_N "checking how to get verbose linking output from $F77... $ECHO_C" >&6; }
+-if test "${ac_cv_prog_f77_v+set}" = set; then
+-  echo $ECHO_N "(cached) $ECHO_C" >&6
+-else
+-  cat >conftest.$ac_ext <<_ACEOF
++{ printf "%s\n" "$as_me:${as_lineno-$LINENO}: checking how to get verbose linking output from $F77" >&5
++printf %s "checking how to get verbose linking output from $F77... " >&6; }
++if test ${ac_cv_prog_f77_v+y}
++then :
++  printf %s "(cached) " >&6
++else $as_nop
++  cat > conftest.$ac_ext <<_ACEOF
+       program main
+ 
+       end
+ _ACEOF
+-rm -f conftest.$ac_objext
+-if { (ac_try="$ac_compile"
+-case "(($ac_try" in
+-  *\"* | *\`* | *\\*) ac_try_echo=\$ac_try;;
+-  *) ac_try_echo=$ac_try;;
+-esac
+-eval "echo \"\$as_me:$LINENO: $ac_try_echo\"") >&5
+-  (eval "$ac_compile") 2>conftest.er1
+-  ac_status=$?
+-  grep -v '^ *+' conftest.er1 >conftest.err
+-  rm -f conftest.er1
+-  cat conftest.err >&5
+-  echo "$as_me:$LINENO: \$? = $ac_status" >&5
+-  (exit $ac_status); } && {
+-	 test -z "$ac_f77_werror_flag" ||
+-	 test ! -s conftest.err
+-       } && test -s conftest.$ac_objext; then
++if ac_fn_f77_try_compile "$LINENO"
++then :
+   ac_cv_prog_f77_v=
+ # Try some options frequently used verbose output
+ for ac_verb in -v -verbose --verbose -V -\#\#\#; do
+-  cat >conftest.$ac_ext <<_ACEOF
++  cat > conftest.$ac_ext <<_ACEOF
+       program main
+ 
+       end
+@@ -15839,27 +14011,38 @@ ac_save_FFLAGS=$FFLAGS
+ FFLAGS="$FFLAGS $ac_verb"
+ eval "set x $ac_link"
+ shift
+-echo "$as_me:$LINENO: $*" >&5
+-ac_f77_v_output=`eval $ac_link 5>&1 2>&1 | grep -v 'Driving:'`
+-echo "$ac_f77_v_output" >&5
++printf "%s\n" "$as_me:${as_lineno-$LINENO}: $*" >&5
++# gfortran 4.3 outputs lines setting COLLECT_GCC_OPTIONS, COMPILER_PATH,
++# LIBRARY_PATH; skip all such settings.
++ac_f77_v_output=`eval $ac_link 5>&1 2>&1 |
++  sed '/^Driving:/d; /^Configured with:/d;
++      '"/^[_$as_cr_Letters][_$as_cr_alnum]*=/d"`
++printf "%s\n" "$ac_f77_v_output" >&5
+ FFLAGS=$ac_save_FFLAGS
+ 
+-rm -f conftest*
++rm -rf conftest*
+ 
+ # On HP/UX there is a line like: "LPATH is: /foo:/bar:/baz" where
+ # /foo, /bar, and /baz are search directories for the Fortran linker.
+ # Here, we change these into -L/foo -L/bar -L/baz (and put it first):
+ ac_f77_v_output="`echo $ac_f77_v_output |
+ 	grep 'LPATH is:' |
+-	sed 's,.*LPATH is\(: *[^ ]*\).*,\1,;s,: */, -L/,g'` $ac_f77_v_output"
++	sed 's|.*LPATH is\(: *[^ ]*\).*|\1|;s|: */| -L/|g'` $ac_f77_v_output"
+ 
+ # FIXME: we keep getting bitten by quoted arguments; a more general fix
+ #        that detects unbalanced quotes in FLIBS should be implemented
+ #        and (ugh) tested at some point.
+ case $ac_f77_v_output in
+-  # If we are using xlf then replace all the commas with spaces.
++  # With xlf replace commas with spaces,
++  # and remove "-link" and closing parenthesis.
+   *xlfentry*)
+-    ac_f77_v_output=`echo $ac_f77_v_output | sed 's/,/ /g'` ;;
++    ac_f77_v_output=`echo $ac_f77_v_output |
++      sed '
++        s/,/ /g
++        s/ -link / /g
++        s/) *$//
++      '
++    ` ;;
+ 
+   # With Intel ifc, ignore the quoted -mGLOB_options_string stuff (quoted
+   # $LIBS confuse us, and the libraries appear later in the output anyway).
+@@ -15871,9 +14054,19 @@ case $ac_f77_v_output in
+   # Doubly-quoted arguments were reported for "PGF90/x86 Linux/x86 5.0-2".
+   *-cmdline\ * | *-ignore\ * | *-def\ *)
+     ac_f77_v_output=`echo $ac_f77_v_output | sed "\
+-        s/-cmdline  *'[^']*'/ /g; s/-cmdline  *\"[^\"]*\"/ /g
+-        s/-ignore  *'[^']*'/ /g; s/-ignore  *\"[^\"]*\"/ /g
+-        s/-def  *'[^']*'/ /g; s/-def  *\"[^\"]*\"/ /g"` ;;
++	s/-cmdline  *'[^']*'/ /g; s/-cmdline  *\"[^\"]*\"/ /g
++	s/-ignore  *'[^']*'/ /g; s/-ignore  *\"[^\"]*\"/ /g
++	s/-def  *'[^']*'/ /g; s/-def  *\"[^\"]*\"/ /g"` ;;
++
++  # If we are using fort77 (the f2c wrapper) then filter output and delete quotes.
++  *fort77*f2c*gcc*)
++    ac_f77_v_output=`echo "$ac_f77_v_output" | sed -n '
++        /:[	 ]\+Running[	 ]\{1,\}"gcc"/{
++          /"-c"/d
++          /[.]c"*/d
++          s/^.*"gcc"/"gcc"/
++          s/"//gp
++        }'` ;;
+ 
+   # If we are using Cray Fortran then delete quotes.
+   *cft90*)
+@@ -15884,39 +14077,36 @@ esac
+   # look for -l* and *.a constructs in the output
+   for ac_arg in $ac_f77_v_output; do
+      case $ac_arg in
+-        [\\/]*.a | ?:[\\/]*.a | -[lLRu]*)
+-          ac_cv_prog_f77_v=$ac_verb
+-          break 2 ;;
++	[\\/]*.a | ?:[\\/]*.a | -[lLRu]*)
++	  ac_cv_prog_f77_v=$ac_verb
++	  break 2 ;;
+      esac
+   done
+ done
+ if test -z "$ac_cv_prog_f77_v"; then
+-   { echo "$as_me:$LINENO: WARNING: cannot determine how to obtain linking information from $F77" >&5
+-echo "$as_me: WARNING: cannot determine how to obtain linking information from $F77" >&2;}
++   { printf "%s\n" "$as_me:${as_lineno-$LINENO}: WARNING: cannot determine how to obtain linking information from $F77" >&5
++printf "%s\n" "$as_me: WARNING: cannot determine how to obtain linking information from $F77" >&2;}
+ fi
+-else
+-  echo "$as_me: failed program was:" >&5
+-sed 's/^/| /' conftest.$ac_ext >&5
+-
+-	{ echo "$as_me:$LINENO: WARNING: compilation failed" >&5
+-echo "$as_me: WARNING: compilation failed" >&2;}
++else $as_nop
++  { printf "%s\n" "$as_me:${as_lineno-$LINENO}: WARNING: compilation failed" >&5
++printf "%s\n" "$as_me: WARNING: compilation failed" >&2;}
+ fi
+-
+-rm -f core conftest.err conftest.$ac_objext conftest.$ac_ext
++rm -f core conftest.err conftest.$ac_objext conftest.beam conftest.$ac_ext
+ 
+ fi
+-{ echo "$as_me:$LINENO: result: $ac_cv_prog_f77_v" >&5
+-echo "${ECHO_T}$ac_cv_prog_f77_v" >&6; }
+-{ echo "$as_me:$LINENO: checking for Fortran 77 libraries of $F77" >&5
+-echo $ECHO_N "checking for Fortran 77 libraries of $F77... $ECHO_C" >&6; }
+-if test "${ac_cv_f77_libs+set}" = set; then
+-  echo $ECHO_N "(cached) $ECHO_C" >&6
+-else
++{ printf "%s\n" "$as_me:${as_lineno-$LINENO}: result: $ac_cv_prog_f77_v" >&5
++printf "%s\n" "$ac_cv_prog_f77_v" >&6; }
++{ printf "%s\n" "$as_me:${as_lineno-$LINENO}: checking for Fortran 77 libraries of $F77" >&5
++printf %s "checking for Fortran 77 libraries of $F77... " >&6; }
++if test ${ac_cv_f77_libs+y}
++then :
++  printf %s "(cached) " >&6
++else $as_nop
+   if test "x$FLIBS" != "x"; then
+   ac_cv_f77_libs="$FLIBS" # Let the user override the test.
+ else
+ 
+-cat >conftest.$ac_ext <<_ACEOF
++cat > conftest.$ac_ext <<_ACEOF
+       program main
+ 
+       end
+@@ -15930,27 +14120,38 @@ ac_save_FFLAGS=$FFLAGS
+ FFLAGS="$FFLAGS $ac_cv_prog_f77_v"
+ eval "set x $ac_link"
+ shift
+-echo "$as_me:$LINENO: $*" >&5
+-ac_f77_v_output=`eval $ac_link 5>&1 2>&1 | grep -v 'Driving:'`
+-echo "$ac_f77_v_output" >&5
++printf "%s\n" "$as_me:${as_lineno-$LINENO}: $*" >&5
++# gfortran 4.3 outputs lines setting COLLECT_GCC_OPTIONS, COMPILER_PATH,
++# LIBRARY_PATH; skip all such settings.
++ac_f77_v_output=`eval $ac_link 5>&1 2>&1 |
++  sed '/^Driving:/d; /^Configured with:/d;
++      '"/^[_$as_cr_Letters][_$as_cr_alnum]*=/d"`
++printf "%s\n" "$ac_f77_v_output" >&5
+ FFLAGS=$ac_save_FFLAGS
+ 
+-rm -f conftest*
++rm -rf conftest*
+ 
+ # On HP/UX there is a line like: "LPATH is: /foo:/bar:/baz" where
+ # /foo, /bar, and /baz are search directories for the Fortran linker.
+ # Here, we change these into -L/foo -L/bar -L/baz (and put it first):
+ ac_f77_v_output="`echo $ac_f77_v_output |
+ 	grep 'LPATH is:' |
+-	sed 's,.*LPATH is\(: *[^ ]*\).*,\1,;s,: */, -L/,g'` $ac_f77_v_output"
++	sed 's|.*LPATH is\(: *[^ ]*\).*|\1|;s|: */| -L/|g'` $ac_f77_v_output"
+ 
+ # FIXME: we keep getting bitten by quoted arguments; a more general fix
+ #        that detects unbalanced quotes in FLIBS should be implemented
+ #        and (ugh) tested at some point.
+ case $ac_f77_v_output in
+-  # If we are using xlf then replace all the commas with spaces.
++  # With xlf replace commas with spaces,
++  # and remove "-link" and closing parenthesis.
+   *xlfentry*)
+-    ac_f77_v_output=`echo $ac_f77_v_output | sed 's/,/ /g'` ;;
++    ac_f77_v_output=`echo $ac_f77_v_output |
++      sed '
++        s/,/ /g
++        s/ -link / /g
++        s/) *$//
++      '
++    ` ;;
+ 
+   # With Intel ifc, ignore the quoted -mGLOB_options_string stuff (quoted
+   # $LIBS confuse us, and the libraries appear later in the output anyway).
+@@ -15962,9 +14163,19 @@ case $ac_f77_v_output in
+   # Doubly-quoted arguments were reported for "PGF90/x86 Linux/x86 5.0-2".
+   *-cmdline\ * | *-ignore\ * | *-def\ *)
+     ac_f77_v_output=`echo $ac_f77_v_output | sed "\
+-        s/-cmdline  *'[^']*'/ /g; s/-cmdline  *\"[^\"]*\"/ /g
+-        s/-ignore  *'[^']*'/ /g; s/-ignore  *\"[^\"]*\"/ /g
+-        s/-def  *'[^']*'/ /g; s/-def  *\"[^\"]*\"/ /g"` ;;
++	s/-cmdline  *'[^']*'/ /g; s/-cmdline  *\"[^\"]*\"/ /g
++	s/-ignore  *'[^']*'/ /g; s/-ignore  *\"[^\"]*\"/ /g
++	s/-def  *'[^']*'/ /g; s/-def  *\"[^\"]*\"/ /g"` ;;
++
++  # If we are using fort77 (the f2c wrapper) then filter output and delete quotes.
++  *fort77*f2c*gcc*)
++    ac_f77_v_output=`echo "$ac_f77_v_output" | sed -n '
++        /:[	 ]\+Running[	 ]\{1,\}"gcc"/{
++          /"-c"/d
++          /[.]c"*/d
++          s/^.*"gcc"/"gcc"/
++          s/"//gp
++        }'` ;;
+ 
+   # If we are using Cray Fortran then delete quotes.
+   *cft90*)
+@@ -15983,8 +14194,8 @@ while test $# != 1; do
+   shift
+   ac_arg=$1
+   case $ac_arg in
+-        [\\/]*.a | ?:[\\/]*.a)
+-            ac_exists=false
++	[\\/]*.a | ?:[\\/]*.a)
++	    ac_exists=false
+   for ac_i in $ac_cv_f77_libs; do
+     if test x"$ac_arg" = x"$ac_i"; then
+       ac_exists=true
+@@ -15992,15 +14203,15 @@ while test $# != 1; do
+     fi
+   done
+ 
+-  if test x"$ac_exists" = xtrue; then
+-  :
+-else
++  if test x"$ac_exists" = xtrue
++then :
++
++else $as_nop
+   ac_cv_f77_libs="$ac_cv_f77_libs $ac_arg"
+ fi
+-
+-          ;;
+-        -bI:*)
+-            ac_exists=false
++	  ;;
++	-bI:*)
++	    ac_exists=false
+   for ac_i in $ac_cv_f77_libs; do
+     if test x"$ac_arg" = x"$ac_i"; then
+       ac_exists=true
+@@ -16008,9 +14219,10 @@ fi
+     fi
+   done
+ 
+-  if test x"$ac_exists" = xtrue; then
+-  :
+-else
++  if test x"$ac_exists" = xtrue
++then :
++
++else $as_nop
+   if test "$ac_compiler_gnu" = yes; then
+   for ac_link_opt in $ac_arg; do
+     ac_cv_f77_libs="$ac_cv_f77_libs -Xlinker $ac_link_opt"
+@@ -16019,18 +14231,37 @@ else
+   ac_cv_f77_libs="$ac_cv_f77_libs $ac_arg"
+ fi
+ fi
++	  ;;
++	  # Ignore these flags.
++	-lang* | -lcrt*.o | -lc | -lgcc* | -lSystem | -libmil | -little \
++	  |-LANG:=* | -LIST:* | -LNO:* | -link)
++	  ;;
++	-lkernel32)
++	  # Ignore this library only on Windows-like systems.
++	  case $host_os in
++	  cygwin* | msys* ) ;;
++	  *)
++	    ac_exists=false
++  for ac_i in $ac_cv_f77_libs; do
++    if test x"$ac_arg" = x"$ac_i"; then
++      ac_exists=true
++      break
++    fi
++  done
++
++  if test x"$ac_exists" = xtrue
++then :
+ 
+-          ;;
+-          # Ignore these flags.
+-        -lang* | -lcrt*.o | -lc | -lgcc* | -lSystem | -libmil | -LANG:=* | -LIST:* | -LNO:*)
+-          ;;
+-        -lkernel32)
+-          test x"$CYGWIN" != xyes && ac_cv_f77_libs="$ac_cv_f77_libs $ac_arg"
+-          ;;
+-        -[LRuYz])
+-          # These flags, when seen by themselves, take an argument.
+-          # We remove the space between option and argument and re-iterate
+-          # unless we find an empty arg or a new option (starting with -)
++else $as_nop
++  ac_cv_f77_libs="$ac_cv_f77_libs $ac_arg"
++fi
++	    ;;
++	  esac
++	  ;;
++	-[LRuYz])
++	  # These flags, when seen by themselves, take an argument.
++	  # We remove the space between option and argument and re-iterate
++	  # unless we find an empty arg or a new option (starting with -)
+ 	  case $2 in
+ 	     "" | -*);;
+ 	     *)
+@@ -16039,10 +14270,10 @@ fi
+ 		set X $ac_arg "$@"
+ 		;;
+ 	  esac
+-          ;;
+-        -YP,*)
+-          for ac_j in `echo $ac_arg | sed -e 's/-YP,/-L/;s/:/ -L/g'`; do
+-              ac_exists=false
++	  ;;
++	-YP,*)
++	  for ac_j in `printf "%s\n" "$ac_arg" | sed -e 's/-YP,/-L/;s/:/ -L/g'`; do
++	      ac_exists=false
+   for ac_i in $ac_cv_f77_libs; do
+     if test x"$ac_j" = x"$ac_i"; then
+       ac_exists=true
+@@ -16050,17 +14281,17 @@ fi
+     fi
+   done
+ 
+-  if test x"$ac_exists" = xtrue; then
+-  :
+-else
++  if test x"$ac_exists" = xtrue
++then :
++
++else $as_nop
+   ac_arg="$ac_arg $ac_j"
+-                               ac_cv_f77_libs="$ac_cv_f77_libs $ac_j"
++			       ac_cv_f77_libs="$ac_cv_f77_libs $ac_j"
+ fi
+-
+-          done
+-          ;;
+-        -[lLR]*)
+-            ac_exists=false
++	  done
++	  ;;
++	-[lLR]*)
++	    ac_exists=false
+   for ac_i in $ac_cv_f77_libs; do
+     if test x"$ac_arg" = x"$ac_i"; then
+       ac_exists=true
+@@ -16068,17 +14299,18 @@ fi
+     fi
+   done
+ 
+-  if test x"$ac_exists" = xtrue; then
+-  :
+-else
++  if test x"$ac_exists" = xtrue
++then :
++
++else $as_nop
+   ac_cv_f77_libs="$ac_cv_f77_libs $ac_arg"
+ fi
+-
+-          ;;
++	  ;;
+ 	-zallextract*| -zdefaultextract)
+ 	  ac_cv_f77_libs="$ac_cv_f77_libs $ac_arg"
+ 	  ;;
+-          # Ignore everything else.
++	-mllvm) ${2+shift};; # Defend against 'clang -mllvm -loopopt=0'.
++	  # Ignore everything else.
+   esac
+ done
+ # restore positional arguments
+@@ -16089,10 +14321,10 @@ set X $ac_save_positional; shift
+ # must begin with a "/").
+ case `(uname -sr) 2>/dev/null` in
+    "SunOS 5"*)
+-      ac_ld_run_path=`echo $ac_f77_v_output |
+-                        sed -n 's,^.*LD_RUN_PATH *= *\(/[^ ]*\).*$,-R\1,p'`
++      ac_ld_run_path=`printf "%s\n" "$ac_f77_v_output" |
++			sed -n 's,^.*LD_RUN_PATH *= *\(/[^ ]*\).*$,-R\1,p'`
+       test "x$ac_ld_run_path" != x &&
+-        if test "$ac_compiler_gnu" = yes; then
++	if test "$ac_compiler_gnu" = yes; then
+   for ac_link_opt in $ac_ld_run_path; do
+     ac_cv_f77_libs="$ac_cv_f77_libs -Xlinker $ac_link_opt"
+   done
+@@ -16104,9 +14336,9 @@ esac
+ fi # test "x$[]_AC_LANG_PREFIX[]LIBS" = "x"
+ 
+ fi
+-{ echo "$as_me:$LINENO: result: $ac_cv_f77_libs" >&5
+-echo "${ECHO_T}$ac_cv_f77_libs" >&6; }
+-FLIBS="$ac_cv_f77_libs"
++{ printf "%s\n" "$as_me:${as_lineno-$LINENO}: result: $ac_cv_f77_libs" >&5
++printf "%s\n" "$ac_cv_f77_libs" >&6; }
++FLIBS="" # We never use FLIBS and it sometimes has quotes it in it, so disable it completely
+ 
+ 
+ ac_ext=c
+@@ -16138,7 +14370,7 @@ for btng_log_vars_index in $btng_log_vars ; do
+   else
+     btng_log_vars_value="unset";
+   fi
+-  echo "configure:16141:" "after using ac_f77_library_ldflags: $btng_log_vars_index is $btng_log_vars_value" >&5;
++  echo "configure:14373:" "after using ac_f77_library_ldflags: $btng_log_vars_index is $btng_log_vars_value" >&5;
+ done
+ 
+ 
+@@ -16150,15 +14382,17 @@ done
+ 
+ 
+ # Start macro BTNG_ARG_WITH_ENV_WRAPPER with args nsl and nsl_PREFIX
+-{ echo "$as_me:$LINENO: checking for nsl" >&5
+-echo $ECHO_N "checking for nsl... $ECHO_C" >&6; }
+-if test "${btng_cv_prog_nsl+set}" = set; then
+-  echo $ECHO_N "(cached) $ECHO_C" >&6
+-else
++{ printf "%s\n" "$as_me:${as_lineno-$LINENO}: checking for nsl" >&5
++printf %s "checking for nsl... " >&6; }
++if test ${btng_cv_prog_nsl+y}
++then :
++  printf %s "(cached) " >&6
++else $as_nop
+ 
+ 
+ # Check whether --with-nsl was given.
+-if test "${with_nsl+set}" = set; then
++if test ${with_nsl+y}
++then :
+   withval=$with_nsl;
+ fi
+ 
+@@ -16198,8 +14432,8 @@ if test "${nsl_PREFIX+set}" = set ; then
+ fi
+ 
+ fi
+-{ echo "$as_me:$LINENO: result: $btng_cv_prog_nsl" >&5
+-echo "${ECHO_T}$btng_cv_prog_nsl" >&6; }
++{ printf "%s\n" "$as_me:${as_lineno-$LINENO}: result: $btng_cv_prog_nsl" >&5
++printf "%s\n" "$btng_cv_prog_nsl" >&6; }
+ # Set nsl_PREFIX from cache.
+ # nsl_PREFIX is not yet set if we grabbed it from cache.
+ if test "${btng_cv_prog_nsl+set}" = set ; then
+@@ -16219,7 +14453,7 @@ for btng_log_vars_index in $btng_log_vars ; do
+   else
+     btng_log_vars_value="unset";
+   fi
+-  echo "configure:16222:" "before looking: $btng_log_vars_index is $btng_log_vars_value" >&5;
++  echo "configure:14456:" "before looking: $btng_log_vars_index is $btng_log_vars_value" >&5;
+ done
+ 
+ 
+@@ -16228,15 +14462,17 @@ done
+ # Start macro BTNG_ARG_WITH_PREFIX
+ 
+ # Start macro BTNG_ARG_WITH_ENV_WRAPPER with args nsl-includes and nsl_INCLUDES
+-{ echo "$as_me:$LINENO: checking for nsl-includes" >&5
+-echo $ECHO_N "checking for nsl-includes... $ECHO_C" >&6; }
+-if test "${btng_cv_prog_nsl_includes+set}" = set; then
+-  echo $ECHO_N "(cached) $ECHO_C" >&6
+-else
++{ printf "%s\n" "$as_me:${as_lineno-$LINENO}: checking for nsl-includes" >&5
++printf %s "checking for nsl-includes... " >&6; }
++if test ${btng_cv_prog_nsl_includes+y}
++then :
++  printf %s "(cached) " >&6
++else $as_nop
+ 
+ 
+ # Check whether --with-nsl-includes was given.
+-if test "${with_nsl_includes+set}" = set; then
++if test ${with_nsl_includes+y}
++then :
+   withval=$with_nsl_includes;
+ fi
+ 
+@@ -16258,11 +14494,9 @@ case "$with_nsl_includes" in
+       : Nothing to do here actually, because nsl_INCLUDES is already in the environment.
+     else
+       if test "${with_nsl_includes}" = yes ; then
+-  { { echo "$as_me:$LINENO: error: If you specify --with-nsl-includes, you must give it the path as in --with-nsl-includes=/installation/path" >&5
+-echo "$as_me: error: If you specify --with-nsl-includes, you must give it the path as in --with-nsl-includes=/installation/path" >&2;}
+-   { (exit 1); exit 1; }; }
++  as_fn_error $? "If you specify --with-nsl-includes, you must give it the path as in --with-nsl-includes=/installation/path" "$LINENO" 5
+ fi
+-echo "configure:16265:" environment nsl_INCLUDES not defined >&5
++echo "configure:14499:" environment nsl_INCLUDES not defined >&5
+ 
+ 
+     fi
+@@ -16283,8 +14517,8 @@ if test "${nsl_INCLUDES+set}" = set ; then
+ fi
+ 
+ fi
+-{ echo "$as_me:$LINENO: result: $btng_cv_prog_nsl_includes" >&5
+-echo "${ECHO_T}$btng_cv_prog_nsl_includes" >&6; }
++{ printf "%s\n" "$as_me:${as_lineno-$LINENO}: result: $btng_cv_prog_nsl_includes" >&5
++printf "%s\n" "$btng_cv_prog_nsl_includes" >&6; }
+ # Set nsl_INCLUDES from cache.
+ # nsl_INCLUDES is not yet set if we grabbed it from cache.
+ if test "${btng_cv_prog_nsl_includes+set}" = set ; then
+@@ -16299,15 +14533,17 @@ fi
+ # Start macro BTNG_ARG_WITH_PREFIX
+ 
+ # Start macro BTNG_ARG_WITH_ENV_WRAPPER with args nsl-libs and nsl_LIBS
+-{ echo "$as_me:$LINENO: checking for nsl-libs" >&5
+-echo $ECHO_N "checking for nsl-libs... $ECHO_C" >&6; }
+-if test "${btng_cv_prog_nsl_libs+set}" = set; then
+-  echo $ECHO_N "(cached) $ECHO_C" >&6
+-else
++{ printf "%s\n" "$as_me:${as_lineno-$LINENO}: checking for nsl-libs" >&5
++printf %s "checking for nsl-libs... " >&6; }
++if test ${btng_cv_prog_nsl_libs+y}
++then :
++  printf %s "(cached) " >&6
++else $as_nop
+ 
+ 
+ # Check whether --with-nsl-libs was given.
+-if test "${with_nsl_libs+set}" = set; then
++if test ${with_nsl_libs+y}
++then :
+   withval=$with_nsl_libs;
+ fi
+ 
+@@ -16329,11 +14565,9 @@ case "$with_nsl_libs" in
+       : Nothing to do here actually, because nsl_LIBS is already in the environment.
+     else
+       if test "${with_nsl_libs}" = yes ; then
+-  { { echo "$as_me:$LINENO: error: If you specify --with-nsl-libs, you must give it the path as in --with-nsl-libs=/installation/path" >&5
+-echo "$as_me: error: If you specify --with-nsl-libs, you must give it the path as in --with-nsl-libs=/installation/path" >&2;}
+-   { (exit 1); exit 1; }; }
++  as_fn_error $? "If you specify --with-nsl-libs, you must give it the path as in --with-nsl-libs=/installation/path" "$LINENO" 5
+ fi
+-echo "configure:16336:" environment nsl_LIBS not defined >&5
++echo "configure:14570:" environment nsl_LIBS not defined >&5
+ 
+ 
+     fi
+@@ -16354,8 +14588,8 @@ if test "${nsl_LIBS+set}" = set ; then
+ fi
+ 
+ fi
+-{ echo "$as_me:$LINENO: result: $btng_cv_prog_nsl_libs" >&5
+-echo "${ECHO_T}$btng_cv_prog_nsl_libs" >&6; }
++{ printf "%s\n" "$as_me:${as_lineno-$LINENO}: result: $btng_cv_prog_nsl_libs" >&5
++printf "%s\n" "$btng_cv_prog_nsl_libs" >&6; }
+ # Set nsl_LIBS from cache.
+ # nsl_LIBS is not yet set if we grabbed it from cache.
+ if test "${btng_cv_prog_nsl_libs+set}" = set ; then
+@@ -16381,25 +14615,19 @@ if test "${nsl_PREFIX+set}" = set ; then
+     # If path is given, add path to extra flag for library search.
+     test -n "${nsl_PREFIX}" && btng_extra_libs="-L${nsl_PREFIX}/lib $btng_extra_libs"
+     # Look for library.
+-    { echo "$as_me:$LINENO: checking for library containing getnetname" >&5
+-echo $ECHO_N "checking for library containing getnetname... $ECHO_C" >&6; }
+-if test "${ac_cv_search_getnetname+set}" = set; then
+-  echo $ECHO_N "(cached) $ECHO_C" >&6
+-else
++    { printf "%s\n" "$as_me:${as_lineno-$LINENO}: checking for library containing getnetname" >&5
++printf %s "checking for library containing getnetname... " >&6; }
++if test ${ac_cv_search_getnetname+y}
++then :
++  printf %s "(cached) " >&6
++else $as_nop
+   ac_func_search_save_LIBS=$LIBS
+-cat >conftest.$ac_ext <<_ACEOF
+-/* confdefs.h.  */
+-_ACEOF
+-cat confdefs.h >>conftest.$ac_ext
+-cat >>conftest.$ac_ext <<_ACEOF
++cat confdefs.h - <<_ACEOF >conftest.$ac_ext
+ /* end confdefs.h.  */
+ 
+ /* Override any GCC internal prototype to avoid an error.
+    Use char because int might match the return type of a GCC
+    builtin and then its argument prototype would still apply.  */
+-#ifdef __cplusplus
+-extern "C"
+-#endif
+ char getnetname ();
+ #ifdef F77_DUMMY_MAIN
+ 
+@@ -16410,64 +14638,46 @@ char getnetname ();
+ 
+ #endif
+ int
+-main ()
++main (void)
+ {
+ return getnetname ();
+   ;
+   return 0;
+ }
+ _ACEOF
+-for ac_lib in '' nsl; do
++for ac_lib in '' nsl
++do
+   if test -z "$ac_lib"; then
+     ac_res="none required"
+   else
+     ac_res=-l$ac_lib
+     LIBS="-l$ac_lib $btng_extra_libs $ac_func_search_save_LIBS"
+   fi
+-  rm -f conftest.$ac_objext conftest$ac_exeext
+-if { (ac_try="$ac_link"
+-case "(($ac_try" in
+-  *\"* | *\`* | *\\*) ac_try_echo=\$ac_try;;
+-  *) ac_try_echo=$ac_try;;
+-esac
+-eval "echo \"\$as_me:$LINENO: $ac_try_echo\"") >&5
+-  (eval "$ac_link") 2>conftest.er1
+-  ac_status=$?
+-  grep -v '^ *+' conftest.er1 >conftest.err
+-  rm -f conftest.er1
+-  cat conftest.err >&5
+-  echo "$as_me:$LINENO: \$? = $ac_status" >&5
+-  (exit $ac_status); } && {
+-	 test -z "$ac_c_werror_flag" ||
+-	 test ! -s conftest.err
+-       } && test -s conftest$ac_exeext &&
+-       $as_test_x conftest$ac_exeext; then
++  if ac_fn_c_try_link "$LINENO"
++then :
+   ac_cv_search_getnetname=$ac_res
+-else
+-  echo "$as_me: failed program was:" >&5
+-sed 's/^/| /' conftest.$ac_ext >&5
+-
+-
+ fi
+-
+-rm -f core conftest.err conftest.$ac_objext conftest_ipa8_conftest.oo \
+-      conftest$ac_exeext
+-  if test "${ac_cv_search_getnetname+set}" = set; then
++rm -f core conftest.err conftest.$ac_objext conftest.beam \
++    conftest$ac_exeext
++  if test ${ac_cv_search_getnetname+y}
++then :
+   break
+ fi
+ done
+-if test "${ac_cv_search_getnetname+set}" = set; then
+-  :
+-else
++if test ${ac_cv_search_getnetname+y}
++then :
++
++else $as_nop
+   ac_cv_search_getnetname=no
+ fi
+ rm conftest.$ac_ext
+ LIBS=$ac_func_search_save_LIBS
+ fi
+-{ echo "$as_me:$LINENO: result: $ac_cv_search_getnetname" >&5
+-echo "${ECHO_T}$ac_cv_search_getnetname" >&6; }
++{ printf "%s\n" "$as_me:${as_lineno-$LINENO}: result: $ac_cv_search_getnetname" >&5
++printf "%s\n" "$ac_cv_search_getnetname" >&6; }
+ ac_res=$ac_cv_search_getnetname
+-if test "$ac_res" != no; then
++if test "$ac_res" != no
++then :
+   test "$ac_res" = "none required" || LIBS="$ac_res $LIBS"
+ 
+ 
+@@ -16480,7 +14690,7 @@ for btng_log_vars_index in $btng_log_vars ; do
+   else
+     btng_log_vars_value="unset";
+   fi
+-  echo "configure:16483:" "After finding nsl flag: $btng_log_vars_index is $btng_log_vars_value" >&5;
++  echo "configure:14693:" "After finding nsl flag: $btng_log_vars_index is $btng_log_vars_value" >&5;
+ done
+ 
+ 
+@@ -16498,12 +14708,12 @@ for btng_log_vars_index in $btng_log_vars ; do
+   else
+     btng_log_vars_value="unset";
+   fi
+-  echo "configure:16501:" "Found nsl library flag: $btng_log_vars_index is $btng_log_vars_value" >&5;
++  echo "configure:14711:" "Found nsl library flag: $btng_log_vars_index is $btng_log_vars_value" >&5;
+ done
+ 
+ 
+ 
+-else
++else $as_nop
+ 
+       # Action if NOT found ...
+ 
+@@ -16516,7 +14726,7 @@ for btng_log_vars_index in $btng_log_vars ; do
+   else
+     btng_log_vars_value="unset";
+   fi
+-  echo "configure:16519:" "Did not find nsl library flag: $btng_log_vars_index is $btng_log_vars_value" >&5;
++  echo "configure:14729:" "Did not find nsl library flag: $btng_log_vars_index is $btng_log_vars_value" >&5;
+ done
+ 
+ 
+@@ -16527,7 +14737,7 @@ fi
+     unset btng_extra_libs
+     unset btng_save_LIBS
+   else
+-    echo "configure:16530:" Not looking for nsl because nsl_LIBS is already set >&5
++    echo "configure:14740:" Not looking for nsl because nsl_LIBS is already set >&5
+   fi
+ fi
+ 
+@@ -16558,15 +14768,17 @@ fi
+ 
+ 
+ # Start macro BTNG_ARG_WITH_ENV_WRAPPER with args libz and libz_PREFIX
+-{ echo "$as_me:$LINENO: checking for libz" >&5
+-echo $ECHO_N "checking for libz... $ECHO_C" >&6; }
+-if test "${btng_cv_prog_libz+set}" = set; then
+-  echo $ECHO_N "(cached) $ECHO_C" >&6
+-else
++{ printf "%s\n" "$as_me:${as_lineno-$LINENO}: checking for libz" >&5
++printf %s "checking for libz... " >&6; }
++if test ${btng_cv_prog_libz+y}
++then :
++  printf %s "(cached) " >&6
++else $as_nop
+ 
+ 
+ # Check whether --with-libz was given.
+-if test "${with_libz+set}" = set; then
++if test ${with_libz+y}
++then :
+   withval=$with_libz;
+ fi
+ 
+@@ -16606,8 +14818,8 @@ if test "${libz_PREFIX+set}" = set ; then
+ fi
+ 
+ fi
+-{ echo "$as_me:$LINENO: result: $btng_cv_prog_libz" >&5
+-echo "${ECHO_T}$btng_cv_prog_libz" >&6; }
++{ printf "%s\n" "$as_me:${as_lineno-$LINENO}: result: $btng_cv_prog_libz" >&5
++printf "%s\n" "$btng_cv_prog_libz" >&6; }
+ # Set libz_PREFIX from cache.
+ # libz_PREFIX is not yet set if we grabbed it from cache.
+ if test "${btng_cv_prog_libz+set}" = set ; then
+@@ -16622,15 +14834,17 @@ fi
+ # Start macro BTNG_ARG_WITH_PREFIX
+ 
+ # Start macro BTNG_ARG_WITH_ENV_WRAPPER with args libz-includes and libz_INCLUDES
+-{ echo "$as_me:$LINENO: checking for libz-includes" >&5
+-echo $ECHO_N "checking for libz-includes... $ECHO_C" >&6; }
+-if test "${btng_cv_prog_libz_includes+set}" = set; then
+-  echo $ECHO_N "(cached) $ECHO_C" >&6
+-else
++{ printf "%s\n" "$as_me:${as_lineno-$LINENO}: checking for libz-includes" >&5
++printf %s "checking for libz-includes... " >&6; }
++if test ${btng_cv_prog_libz_includes+y}
++then :
++  printf %s "(cached) " >&6
++else $as_nop
+ 
+ 
+ # Check whether --with-libz-includes was given.
+-if test "${with_libz_includes+set}" = set; then
++if test ${with_libz_includes+y}
++then :
+   withval=$with_libz_includes;
+ fi
+ 
+@@ -16652,11 +14866,9 @@ case "$with_libz_includes" in
+       : Nothing to do here actually, because libz_INCLUDES is already in the environment.
+     else
+       if test "${with_libz_includes}" = yes ; then
+-  { { echo "$as_me:$LINENO: error: If you specify --with-libz-includes, you must give it the path as in --with-libz-includes=/installation/path" >&5
+-echo "$as_me: error: If you specify --with-libz-includes, you must give it the path as in --with-libz-includes=/installation/path" >&2;}
+-   { (exit 1); exit 1; }; }
++  as_fn_error $? "If you specify --with-libz-includes, you must give it the path as in --with-libz-includes=/installation/path" "$LINENO" 5
+ fi
+-echo "configure:16659:" environment libz_INCLUDES not defined >&5
++echo "configure:14871:" environment libz_INCLUDES not defined >&5
+ 
+ 
+     fi
+@@ -16677,8 +14889,8 @@ if test "${libz_INCLUDES+set}" = set ; then
+ fi
+ 
+ fi
+-{ echo "$as_me:$LINENO: result: $btng_cv_prog_libz_includes" >&5
+-echo "${ECHO_T}$btng_cv_prog_libz_includes" >&6; }
++{ printf "%s\n" "$as_me:${as_lineno-$LINENO}: result: $btng_cv_prog_libz_includes" >&5
++printf "%s\n" "$btng_cv_prog_libz_includes" >&6; }
+ # Set libz_INCLUDES from cache.
+ # libz_INCLUDES is not yet set if we grabbed it from cache.
+ if test "${btng_cv_prog_libz_includes+set}" = set ; then
+@@ -16693,15 +14905,17 @@ fi
+ # Start macro BTNG_ARG_WITH_PREFIX
+ 
+ # Start macro BTNG_ARG_WITH_ENV_WRAPPER with args libz-libs and libz_LIBS
+-{ echo "$as_me:$LINENO: checking for libz-libs" >&5
+-echo $ECHO_N "checking for libz-libs... $ECHO_C" >&6; }
+-if test "${btng_cv_prog_libz_libs+set}" = set; then
+-  echo $ECHO_N "(cached) $ECHO_C" >&6
+-else
++{ printf "%s\n" "$as_me:${as_lineno-$LINENO}: checking for libz-libs" >&5
++printf %s "checking for libz-libs... " >&6; }
++if test ${btng_cv_prog_libz_libs+y}
++then :
++  printf %s "(cached) " >&6
++else $as_nop
+ 
+ 
+ # Check whether --with-libz-libs was given.
+-if test "${with_libz_libs+set}" = set; then
++if test ${with_libz_libs+y}
++then :
+   withval=$with_libz_libs;
+ fi
+ 
+@@ -16723,11 +14937,9 @@ case "$with_libz_libs" in
+       : Nothing to do here actually, because libz_LIBS is already in the environment.
+     else
+       if test "${with_libz_libs}" = yes ; then
+-  { { echo "$as_me:$LINENO: error: If you specify --with-libz-libs, you must give it the path as in --with-libz-libs=/installation/path" >&5
+-echo "$as_me: error: If you specify --with-libz-libs, you must give it the path as in --with-libz-libs=/installation/path" >&2;}
+-   { (exit 1); exit 1; }; }
++  as_fn_error $? "If you specify --with-libz-libs, you must give it the path as in --with-libz-libs=/installation/path" "$LINENO" 5
+ fi
+-echo "configure:16730:" environment libz_LIBS not defined >&5
++echo "configure:14942:" environment libz_LIBS not defined >&5
+ 
+ 
+     fi
+@@ -16748,8 +14960,8 @@ if test "${libz_LIBS+set}" = set ; then
+ fi
+ 
+ fi
+-{ echo "$as_me:$LINENO: result: $btng_cv_prog_libz_libs" >&5
+-echo "${ECHO_T}$btng_cv_prog_libz_libs" >&6; }
++{ printf "%s\n" "$as_me:${as_lineno-$LINENO}: result: $btng_cv_prog_libz_libs" >&5
++printf "%s\n" "$btng_cv_prog_libz_libs" >&6; }
+ # Set libz_LIBS from cache.
+ # libz_LIBS is not yet set if we grabbed it from cache.
+ if test "${btng_cv_prog_libz_libs+set}" = set ; then
+@@ -16776,25 +14988,19 @@ if test "${libz_PREFIX+set}" = set ; then
+     # If path is given, add path to extra flag for library search.
+     test -n "${libz_PREFIX}" && btng_extra_libs="-L${libz_PREFIX}/lib $btng_extra_libs"
+     # Look for library.
+-    { echo "$as_me:$LINENO: checking for library containing zlibVersion" >&5
+-echo $ECHO_N "checking for library containing zlibVersion... $ECHO_C" >&6; }
+-if test "${ac_cv_search_zlibVersion+set}" = set; then
+-  echo $ECHO_N "(cached) $ECHO_C" >&6
+-else
++    { printf "%s\n" "$as_me:${as_lineno-$LINENO}: checking for library containing zlibVersion" >&5
++printf %s "checking for library containing zlibVersion... " >&6; }
++if test ${ac_cv_search_zlibVersion+y}
++then :
++  printf %s "(cached) " >&6
++else $as_nop
+   ac_func_search_save_LIBS=$LIBS
+-cat >conftest.$ac_ext <<_ACEOF
+-/* confdefs.h.  */
+-_ACEOF
+-cat confdefs.h >>conftest.$ac_ext
+-cat >>conftest.$ac_ext <<_ACEOF
++cat confdefs.h - <<_ACEOF >conftest.$ac_ext
+ /* end confdefs.h.  */
+ 
+ /* Override any GCC internal prototype to avoid an error.
+    Use char because int might match the return type of a GCC
+    builtin and then its argument prototype would still apply.  */
+-#ifdef __cplusplus
+-extern "C"
+-#endif
+ char zlibVersion ();
+ #ifdef F77_DUMMY_MAIN
+ 
+@@ -16805,64 +15011,46 @@ char zlibVersion ();
+ 
+ #endif
+ int
+-main ()
++main (void)
+ {
+ return zlibVersion ();
+   ;
+   return 0;
+ }
+ _ACEOF
+-for ac_lib in '' z; do
++for ac_lib in '' z
++do
+   if test -z "$ac_lib"; then
+     ac_res="none required"
+   else
+     ac_res=-l$ac_lib
+     LIBS="-l$ac_lib $btng_extra_libs $ac_func_search_save_LIBS"
+   fi
+-  rm -f conftest.$ac_objext conftest$ac_exeext
+-if { (ac_try="$ac_link"
+-case "(($ac_try" in
+-  *\"* | *\`* | *\\*) ac_try_echo=\$ac_try;;
+-  *) ac_try_echo=$ac_try;;
+-esac
+-eval "echo \"\$as_me:$LINENO: $ac_try_echo\"") >&5
+-  (eval "$ac_link") 2>conftest.er1
+-  ac_status=$?
+-  grep -v '^ *+' conftest.er1 >conftest.err
+-  rm -f conftest.er1
+-  cat conftest.err >&5
+-  echo "$as_me:$LINENO: \$? = $ac_status" >&5
+-  (exit $ac_status); } && {
+-	 test -z "$ac_c_werror_flag" ||
+-	 test ! -s conftest.err
+-       } && test -s conftest$ac_exeext &&
+-       $as_test_x conftest$ac_exeext; then
++  if ac_fn_c_try_link "$LINENO"
++then :
+   ac_cv_search_zlibVersion=$ac_res
+-else
+-  echo "$as_me: failed program was:" >&5
+-sed 's/^/| /' conftest.$ac_ext >&5
+-
+-
+ fi
+-
+-rm -f core conftest.err conftest.$ac_objext conftest_ipa8_conftest.oo \
+-      conftest$ac_exeext
+-  if test "${ac_cv_search_zlibVersion+set}" = set; then
++rm -f core conftest.err conftest.$ac_objext conftest.beam \
++    conftest$ac_exeext
++  if test ${ac_cv_search_zlibVersion+y}
++then :
+   break
+ fi
+ done
+-if test "${ac_cv_search_zlibVersion+set}" = set; then
+-  :
+-else
++if test ${ac_cv_search_zlibVersion+y}
++then :
++
++else $as_nop
+   ac_cv_search_zlibVersion=no
+ fi
+ rm conftest.$ac_ext
+ LIBS=$ac_func_search_save_LIBS
+ fi
+-{ echo "$as_me:$LINENO: result: $ac_cv_search_zlibVersion" >&5
+-echo "${ECHO_T}$ac_cv_search_zlibVersion" >&6; }
++{ printf "%s\n" "$as_me:${as_lineno-$LINENO}: result: $ac_cv_search_zlibVersion" >&5
++printf "%s\n" "$ac_cv_search_zlibVersion" >&6; }
+ ac_res=$ac_cv_search_zlibVersion
+-if test "$ac_res" != no; then
++if test "$ac_res" != no
++then :
+   test "$ac_res" = "none required" || LIBS="$ac_res $LIBS"
+ 
+ 
+@@ -16875,7 +15063,7 @@ for btng_log_vars_index in $btng_log_vars ; do
+   else
+     btng_log_vars_value="unset";
+   fi
+-  echo "configure:16878:" "After finding libz flag: $btng_log_vars_index is $btng_log_vars_value" >&5;
++  echo "configure:15066:" "After finding libz flag: $btng_log_vars_index is $btng_log_vars_value" >&5;
+ done
+ 
+ 
+@@ -16893,12 +15081,12 @@ for btng_log_vars_index in $btng_log_vars ; do
+   else
+     btng_log_vars_value="unset";
+   fi
+-  echo "configure:16896:" "Found libz library flag: $btng_log_vars_index is $btng_log_vars_value" >&5;
++  echo "configure:15084:" "Found libz library flag: $btng_log_vars_index is $btng_log_vars_value" >&5;
+ done
+ 
+ 
+ 
+-else
++else $as_nop
+ 
+       # Action if NOT found ...
+ 
+@@ -16911,7 +15099,7 @@ for btng_log_vars_index in $btng_log_vars ; do
+   else
+     btng_log_vars_value="unset";
+   fi
+-  echo "configure:16914:" "Did not find libz library flag: $btng_log_vars_index is $btng_log_vars_value" >&5;
++  echo "configure:15102:" "Did not find libz library flag: $btng_log_vars_index is $btng_log_vars_value" >&5;
+ done
+ 
+ 
+@@ -16922,7 +15110,7 @@ fi
+     unset btng_extra_libs
+     unset btng_save_LIBS
+   else
+-    echo "configure:16925:" Not looking for libz because libz_LIBS is already set >&5
++    echo "configure:15113:" Not looking for libz because libz_LIBS is already set >&5
+   fi
+ fi
+ # End macro BTNG_VAR_SET_LIBZ
+@@ -16954,15 +15142,17 @@ fi
+ 
+ 
+ # Start macro BTNG_ARG_WITH_ENV_WRAPPER with args blaslapack and blaslapack_PREFIX
+-{ echo "$as_me:$LINENO: checking for blaslapack" >&5
+-echo $ECHO_N "checking for blaslapack... $ECHO_C" >&6; }
+-if test "${btng_cv_prog_blaslapack+set}" = set; then
+-  echo $ECHO_N "(cached) $ECHO_C" >&6
+-else
++{ printf "%s\n" "$as_me:${as_lineno-$LINENO}: checking for blaslapack" >&5
++printf %s "checking for blaslapack... " >&6; }
++if test ${btng_cv_prog_blaslapack+y}
++then :
++  printf %s "(cached) " >&6
++else $as_nop
+ 
+ 
+ # Check whether --with-blaslapack was given.
+-if test "${with_blaslapack+set}" = set; then
++if test ${with_blaslapack+y}
++then :
+   withval=$with_blaslapack;
+ fi
+ 
+@@ -17007,8 +15197,8 @@ if test "${blaslapack_PREFIX+set}" = set ; then
+ fi
+ 
+ fi
+-{ echo "$as_me:$LINENO: result: $btng_cv_prog_blaslapack" >&5
+-echo "${ECHO_T}$btng_cv_prog_blaslapack" >&6; }
++{ printf "%s\n" "$as_me:${as_lineno-$LINENO}: result: $btng_cv_prog_blaslapack" >&5
++printf "%s\n" "$btng_cv_prog_blaslapack" >&6; }
+ # Set blaslapack_PREFIX from cache.
+ # blaslapack_PREFIX is not yet set if we grabbed it from cache.
+ if test "${btng_cv_prog_blaslapack+set}" = set ; then
+@@ -17023,15 +15213,17 @@ fi
+ # Start macro BTNG_ARG_WITH_PREFIX
+ 
+ # Start macro BTNG_ARG_WITH_ENV_WRAPPER with args blaslapack-includes and blaslapack_INCLUDES
+-{ echo "$as_me:$LINENO: checking for blaslapack-includes" >&5
+-echo $ECHO_N "checking for blaslapack-includes... $ECHO_C" >&6; }
+-if test "${btng_cv_prog_blaslapack_includes+set}" = set; then
+-  echo $ECHO_N "(cached) $ECHO_C" >&6
+-else
++{ printf "%s\n" "$as_me:${as_lineno-$LINENO}: checking for blaslapack-includes" >&5
++printf %s "checking for blaslapack-includes... " >&6; }
++if test ${btng_cv_prog_blaslapack_includes+y}
++then :
++  printf %s "(cached) " >&6
++else $as_nop
+ 
+ 
+ # Check whether --with-blaslapack-includes was given.
+-if test "${with_blaslapack_includes+set}" = set; then
++if test ${with_blaslapack_includes+y}
++then :
+   withval=$with_blaslapack_includes;
+ fi
+ 
+@@ -17053,11 +15245,9 @@ case "$with_blaslapack_includes" in
+       : Nothing to do here actually, because blaslapack_INCLUDES is already in the environment.
+     else
+       if test "${with_blaslapack_includes}" = yes ; then
+-  { { echo "$as_me:$LINENO: error: If you specify --with-blaslapack-includes, you must give it the path as in --with-blaslapack-includes=/installation/path" >&5
+-echo "$as_me: error: If you specify --with-blaslapack-includes, you must give it the path as in --with-blaslapack-includes=/installation/path" >&2;}
+-   { (exit 1); exit 1; }; }
++  as_fn_error $? "If you specify --with-blaslapack-includes, you must give it the path as in --with-blaslapack-includes=/installation/path" "$LINENO" 5
+ fi
+-echo "configure:17060:" environment blaslapack_INCLUDES not defined >&5
++echo "configure:15250:" environment blaslapack_INCLUDES not defined >&5
+ 
+ 
+     fi
+@@ -17078,8 +15268,8 @@ if test "${blaslapack_INCLUDES+set}" = set ; then
+ fi
+ 
+ fi
+-{ echo "$as_me:$LINENO: result: $btng_cv_prog_blaslapack_includes" >&5
+-echo "${ECHO_T}$btng_cv_prog_blaslapack_includes" >&6; }
++{ printf "%s\n" "$as_me:${as_lineno-$LINENO}: result: $btng_cv_prog_blaslapack_includes" >&5
++printf "%s\n" "$btng_cv_prog_blaslapack_includes" >&6; }
+ # Set blaslapack_INCLUDES from cache.
+ # blaslapack_INCLUDES is not yet set if we grabbed it from cache.
+ if test "${btng_cv_prog_blaslapack_includes+set}" = set ; then
+@@ -17094,15 +15284,17 @@ fi
+ # Start macro BTNG_ARG_WITH_PREFIX
+ 
+ # Start macro BTNG_ARG_WITH_ENV_WRAPPER with args blaslapack-libs and blaslapack_LIBS
+-{ echo "$as_me:$LINENO: checking for blaslapack-libs" >&5
+-echo $ECHO_N "checking for blaslapack-libs... $ECHO_C" >&6; }
+-if test "${btng_cv_prog_blaslapack_libs+set}" = set; then
+-  echo $ECHO_N "(cached) $ECHO_C" >&6
+-else
++{ printf "%s\n" "$as_me:${as_lineno-$LINENO}: checking for blaslapack-libs" >&5
++printf %s "checking for blaslapack-libs... " >&6; }
++if test ${btng_cv_prog_blaslapack_libs+y}
++then :
++  printf %s "(cached) " >&6
++else $as_nop
+ 
+ 
+ # Check whether --with-blaslapack-libs was given.
+-if test "${with_blaslapack_libs+set}" = set; then
++if test ${with_blaslapack_libs+y}
++then :
+   withval=$with_blaslapack_libs;
+ fi
+ 
+@@ -17124,11 +15316,9 @@ case "$with_blaslapack_libs" in
+       : Nothing to do here actually, because blaslapack_LIBS is already in the environment.
+     else
+       if test "${with_blaslapack_libs}" = yes ; then
+-  { { echo "$as_me:$LINENO: error: If you specify --with-blaslapack-libs, you must give it the path as in --with-blaslapack-libs=/installation/path" >&5
+-echo "$as_me: error: If you specify --with-blaslapack-libs, you must give it the path as in --with-blaslapack-libs=/installation/path" >&2;}
+-   { (exit 1); exit 1; }; }
++  as_fn_error $? "If you specify --with-blaslapack-libs, you must give it the path as in --with-blaslapack-libs=/installation/path" "$LINENO" 5
+ fi
+-echo "configure:17131:" environment blaslapack_LIBS not defined >&5
++echo "configure:15321:" environment blaslapack_LIBS not defined >&5
+ 
+ 
+     fi
+@@ -17149,8 +15339,8 @@ if test "${blaslapack_LIBS+set}" = set ; then
+ fi
+ 
+ fi
+-{ echo "$as_me:$LINENO: result: $btng_cv_prog_blaslapack_libs" >&5
+-echo "${ECHO_T}$btng_cv_prog_blaslapack_libs" >&6; }
++{ printf "%s\n" "$as_me:${as_lineno-$LINENO}: result: $btng_cv_prog_blaslapack_libs" >&5
++printf "%s\n" "$btng_cv_prog_blaslapack_libs" >&6; }
+ # Set blaslapack_LIBS from cache.
+ # blaslapack_LIBS is not yet set if we grabbed it from cache.
+ if test "${btng_cv_prog_blaslapack_libs+set}" = set ; then
+@@ -17182,25 +15372,19 @@ if test "${blas_PREFIX+set}" = set ; then
+     # If path is given, add path to extra flag for library search.
+     test -n "${blas_PREFIX}" && btng_extra_libs="-L${blas_PREFIX}/lib $btng_extra_libs"
+     # Look for library.
+-    { echo "$as_me:$LINENO: checking for library containing daxpy_" >&5
+-echo $ECHO_N "checking for library containing daxpy_... $ECHO_C" >&6; }
+-if test "${ac_cv_search_daxpy_+set}" = set; then
+-  echo $ECHO_N "(cached) $ECHO_C" >&6
+-else
++    { printf "%s\n" "$as_me:${as_lineno-$LINENO}: checking for library containing daxpy_" >&5
++printf %s "checking for library containing daxpy_... " >&6; }
++if test ${ac_cv_search_daxpy_+y}
++then :
++  printf %s "(cached) " >&6
++else $as_nop
+   ac_func_search_save_LIBS=$LIBS
+-cat >conftest.$ac_ext <<_ACEOF
+-/* confdefs.h.  */
+-_ACEOF
+-cat confdefs.h >>conftest.$ac_ext
+-cat >>conftest.$ac_ext <<_ACEOF
++cat confdefs.h - <<_ACEOF >conftest.$ac_ext
+ /* end confdefs.h.  */
+ 
+ /* Override any GCC internal prototype to avoid an error.
+    Use char because int might match the return type of a GCC
+    builtin and then its argument prototype would still apply.  */
+-#ifdef __cplusplus
+-extern "C"
+-#endif
+ char daxpy_ ();
+ #ifdef F77_DUMMY_MAIN
+ 
+@@ -17211,64 +15395,46 @@ char daxpy_ ();
+ 
+ #endif
+ int
+-main ()
++main (void)
+ {
+ return daxpy_ ();
+   ;
+   return 0;
+ }
+ _ACEOF
+-for ac_lib in '' blas; do
++for ac_lib in '' blas
++do
+   if test -z "$ac_lib"; then
+     ac_res="none required"
+   else
+     ac_res=-l$ac_lib
+     LIBS="-l$ac_lib $btng_extra_libs $ac_func_search_save_LIBS"
+   fi
+-  rm -f conftest.$ac_objext conftest$ac_exeext
+-if { (ac_try="$ac_link"
+-case "(($ac_try" in
+-  *\"* | *\`* | *\\*) ac_try_echo=\$ac_try;;
+-  *) ac_try_echo=$ac_try;;
+-esac
+-eval "echo \"\$as_me:$LINENO: $ac_try_echo\"") >&5
+-  (eval "$ac_link") 2>conftest.er1
+-  ac_status=$?
+-  grep -v '^ *+' conftest.er1 >conftest.err
+-  rm -f conftest.er1
+-  cat conftest.err >&5
+-  echo "$as_me:$LINENO: \$? = $ac_status" >&5
+-  (exit $ac_status); } && {
+-	 test -z "$ac_c_werror_flag" ||
+-	 test ! -s conftest.err
+-       } && test -s conftest$ac_exeext &&
+-       $as_test_x conftest$ac_exeext; then
++  if ac_fn_c_try_link "$LINENO"
++then :
+   ac_cv_search_daxpy_=$ac_res
+-else
+-  echo "$as_me: failed program was:" >&5
+-sed 's/^/| /' conftest.$ac_ext >&5
+-
+-
+ fi
+-
+-rm -f core conftest.err conftest.$ac_objext conftest_ipa8_conftest.oo \
+-      conftest$ac_exeext
+-  if test "${ac_cv_search_daxpy_+set}" = set; then
++rm -f core conftest.err conftest.$ac_objext conftest.beam \
++    conftest$ac_exeext
++  if test ${ac_cv_search_daxpy_+y}
++then :
+   break
+ fi
+ done
+-if test "${ac_cv_search_daxpy_+set}" = set; then
+-  :
+-else
++if test ${ac_cv_search_daxpy_+y}
++then :
++
++else $as_nop
+   ac_cv_search_daxpy_=no
+ fi
+ rm conftest.$ac_ext
+ LIBS=$ac_func_search_save_LIBS
+ fi
+-{ echo "$as_me:$LINENO: result: $ac_cv_search_daxpy_" >&5
+-echo "${ECHO_T}$ac_cv_search_daxpy_" >&6; }
++{ printf "%s\n" "$as_me:${as_lineno-$LINENO}: result: $ac_cv_search_daxpy_" >&5
++printf "%s\n" "$ac_cv_search_daxpy_" >&6; }
+ ac_res=$ac_cv_search_daxpy_
+-if test "$ac_res" != no; then
++if test "$ac_res" != no
++then :
+   test "$ac_res" = "none required" || LIBS="$ac_res $LIBS"
+ 
+ 
+@@ -17281,7 +15447,7 @@ for btng_log_vars_index in $btng_log_vars ; do
+   else
+     btng_log_vars_value="unset";
+   fi
+-  echo "configure:17284:" "After finding blas flag: $btng_log_vars_index is $btng_log_vars_value" >&5;
++  echo "configure:15450:" "After finding blas flag: $btng_log_vars_index is $btng_log_vars_value" >&5;
+ done
+ 
+ 
+@@ -17299,12 +15465,12 @@ for btng_log_vars_index in $btng_log_vars ; do
+   else
+     btng_log_vars_value="unset";
+   fi
+-  echo "configure:17302:" "Found blas library flag: $btng_log_vars_index is $btng_log_vars_value" >&5;
++  echo "configure:15468:" "Found blas library flag: $btng_log_vars_index is $btng_log_vars_value" >&5;
+ done
+ 
+ 
+ 
+-else
++else $as_nop
+ 
+       # Action if NOT found ...
+ 
+@@ -17317,13 +15483,13 @@ for btng_log_vars_index in $btng_log_vars ; do
+   else
+     btng_log_vars_value="unset";
+   fi
+-  echo "configure:17320:" "Did not find blas library flag: $btng_log_vars_index is $btng_log_vars_value" >&5;
++  echo "configure:15486:" "Did not find blas library flag: $btng_log_vars_index is $btng_log_vars_value" >&5;
+ done
+ 
+ 
+-      { echo "$as_me:$LINENO: WARNING: I could not systematically find the name of
++      { printf "%s\n" "$as_me:${as_lineno-$LINENO}: WARNING: I could not systematically find the name of
+ the blas library so I am using -lblas instead." >&5
+-echo "$as_me: WARNING: I could not systematically find the name of
++printf "%s\n" "$as_me: WARNING: I could not systematically find the name of
+ the blas library so I am using -lblas instead." >&2;}
+       blas_LIBS="-lblas"
+       test -n "${blas_PREFIX}" &&	\
+@@ -17335,7 +15501,7 @@ fi
+     unset btng_extra_libs
+     unset btng_save_LIBS
+   else
+-    echo "configure:17338:" Not looking for blas because blas_LIBS is already set >&5
++    echo "configure:15504:" Not looking for blas because blas_LIBS is already set >&5
+   fi
+ fi
+ 
+@@ -17354,25 +15520,19 @@ if test "${lapack_PREFIX+set}" = set ; then
+     # If path is given, add path to extra flag for library search.
+     test -n "${lapack_PREFIX}" && btng_extra_libs="-L${lapack_PREFIX}/lib $btng_extra_libs"
+     # Look for library.
+-    { echo "$as_me:$LINENO: checking for library containing xerbla_" >&5
+-echo $ECHO_N "checking for library containing xerbla_... $ECHO_C" >&6; }
+-if test "${ac_cv_search_xerbla_+set}" = set; then
+-  echo $ECHO_N "(cached) $ECHO_C" >&6
+-else
++    { printf "%s\n" "$as_me:${as_lineno-$LINENO}: checking for library containing xerbla_" >&5
++printf %s "checking for library containing xerbla_... " >&6; }
++if test ${ac_cv_search_xerbla_+y}
++then :
++  printf %s "(cached) " >&6
++else $as_nop
+   ac_func_search_save_LIBS=$LIBS
+-cat >conftest.$ac_ext <<_ACEOF
+-/* confdefs.h.  */
+-_ACEOF
+-cat confdefs.h >>conftest.$ac_ext
+-cat >>conftest.$ac_ext <<_ACEOF
++cat confdefs.h - <<_ACEOF >conftest.$ac_ext
+ /* end confdefs.h.  */
+ 
+ /* Override any GCC internal prototype to avoid an error.
+    Use char because int might match the return type of a GCC
+    builtin and then its argument prototype would still apply.  */
+-#ifdef __cplusplus
+-extern "C"
+-#endif
+ char xerbla_ ();
+ #ifdef F77_DUMMY_MAIN
+ 
+@@ -17383,64 +15543,46 @@ char xerbla_ ();
+ 
+ #endif
+ int
+-main ()
++main (void)
+ {
+ return xerbla_ ();
+   ;
+   return 0;
+ }
+ _ACEOF
+-for ac_lib in '' lapack; do
++for ac_lib in '' lapack
++do
+   if test -z "$ac_lib"; then
+     ac_res="none required"
+   else
+     ac_res=-l$ac_lib
+     LIBS="-l$ac_lib $btng_extra_libs $ac_func_search_save_LIBS"
+   fi
+-  rm -f conftest.$ac_objext conftest$ac_exeext
+-if { (ac_try="$ac_link"
+-case "(($ac_try" in
+-  *\"* | *\`* | *\\*) ac_try_echo=\$ac_try;;
+-  *) ac_try_echo=$ac_try;;
+-esac
+-eval "echo \"\$as_me:$LINENO: $ac_try_echo\"") >&5
+-  (eval "$ac_link") 2>conftest.er1
+-  ac_status=$?
+-  grep -v '^ *+' conftest.er1 >conftest.err
+-  rm -f conftest.er1
+-  cat conftest.err >&5
+-  echo "$as_me:$LINENO: \$? = $ac_status" >&5
+-  (exit $ac_status); } && {
+-	 test -z "$ac_c_werror_flag" ||
+-	 test ! -s conftest.err
+-       } && test -s conftest$ac_exeext &&
+-       $as_test_x conftest$ac_exeext; then
++  if ac_fn_c_try_link "$LINENO"
++then :
+   ac_cv_search_xerbla_=$ac_res
+-else
+-  echo "$as_me: failed program was:" >&5
+-sed 's/^/| /' conftest.$ac_ext >&5
+-
+-
+ fi
+-
+-rm -f core conftest.err conftest.$ac_objext conftest_ipa8_conftest.oo \
+-      conftest$ac_exeext
+-  if test "${ac_cv_search_xerbla_+set}" = set; then
++rm -f core conftest.err conftest.$ac_objext conftest.beam \
++    conftest$ac_exeext
++  if test ${ac_cv_search_xerbla_+y}
++then :
+   break
+ fi
+ done
+-if test "${ac_cv_search_xerbla_+set}" = set; then
+-  :
+-else
++if test ${ac_cv_search_xerbla_+y}
++then :
++
++else $as_nop
+   ac_cv_search_xerbla_=no
+ fi
+ rm conftest.$ac_ext
+ LIBS=$ac_func_search_save_LIBS
+ fi
+-{ echo "$as_me:$LINENO: result: $ac_cv_search_xerbla_" >&5
+-echo "${ECHO_T}$ac_cv_search_xerbla_" >&6; }
++{ printf "%s\n" "$as_me:${as_lineno-$LINENO}: result: $ac_cv_search_xerbla_" >&5
++printf "%s\n" "$ac_cv_search_xerbla_" >&6; }
+ ac_res=$ac_cv_search_xerbla_
+-if test "$ac_res" != no; then
++if test "$ac_res" != no
++then :
+   test "$ac_res" = "none required" || LIBS="$ac_res $LIBS"
+ 
+ 
+@@ -17453,7 +15595,7 @@ for btng_log_vars_index in $btng_log_vars ; do
+   else
+     btng_log_vars_value="unset";
+   fi
+-  echo "configure:17456:" "After finding lapack flag: $btng_log_vars_index is $btng_log_vars_value" >&5;
++  echo "configure:15598:" "After finding lapack flag: $btng_log_vars_index is $btng_log_vars_value" >&5;
+ done
+ 
+ 
+@@ -17471,12 +15613,12 @@ for btng_log_vars_index in $btng_log_vars ; do
+   else
+     btng_log_vars_value="unset";
+   fi
+-  echo "configure:17474:" "Found lapack library flag: $btng_log_vars_index is $btng_log_vars_value" >&5;
++  echo "configure:15616:" "Found lapack library flag: $btng_log_vars_index is $btng_log_vars_value" >&5;
+ done
+ 
+ 
+ 
+-else
++else $as_nop
+ 
+       # Action if NOT found ...
+ 
+@@ -17489,13 +15631,13 @@ for btng_log_vars_index in $btng_log_vars ; do
+   else
+     btng_log_vars_value="unset";
+   fi
+-  echo "configure:17492:" "Did not find lapack library flag: $btng_log_vars_index is $btng_log_vars_value" >&5;
++  echo "configure:15634:" "Did not find lapack library flag: $btng_log_vars_index is $btng_log_vars_value" >&5;
+ done
+ 
+ 
+-      { echo "$as_me:$LINENO: WARNING: I could not systematically find the name of
++      { printf "%s\n" "$as_me:${as_lineno-$LINENO}: WARNING: I could not systematically find the name of
+ the lapack library so I am using -llapack instead." >&5
+-echo "$as_me: WARNING: I could not systematically find the name of
++printf "%s\n" "$as_me: WARNING: I could not systematically find the name of
+ the lapack library so I am using -llapack instead." >&2;}
+       lapack_LIBS="-llapack"
+       test -n "${lapack_PREFIX}" &&	\
+@@ -17507,7 +15649,7 @@ fi
+     unset btng_extra_libs
+     unset btng_save_LIBS
+   else
+-    echo "configure:17510:" Not looking for lapack because lapack_LIBS is already set >&5
++    echo "configure:15652:" Not looking for lapack because lapack_LIBS is already set >&5
+   fi
+ fi
+ 
+@@ -17556,7 +15698,7 @@ for btng_log_vars_index in $btng_log_vars ; do
+   else
+     btng_log_vars_value="unset";
+   fi
+-  echo "configure:17559:" "$btng_log_vars_index is $btng_log_vars_value" >&5;
++  echo "configure:15701:" "$btng_log_vars_index is $btng_log_vars_value" >&5;
+ done
+ 
+ 
+@@ -17581,9 +15723,7 @@ fi
+   LIB_NAME="$blaslapack_LIB_NAME $LIB_NAME"
+   INC_PATH="$blaslapack_INCLUDES $INC_PATH"
+ 
+-cat >>confdefs.h <<\_ACEOF
+-#define HAVE_BLASLAPACK 1
+-_ACEOF
++printf "%s\n" "#define HAVE_BLASLAPACK 1" >>confdefs.h
+ 
+ fi
+ 
+@@ -17596,7 +15736,7 @@ for btng_log_vars_index in $btng_log_vars ; do
+   else
+     btng_log_vars_value="unset";
+   fi
+-  echo "configure:17599:" "$btng_log_vars_index is $btng_log_vars_value" >&5;
++  echo "configure:15739:" "$btng_log_vars_index is $btng_log_vars_value" >&5;
+ done
+ 
+ 
+@@ -17604,17 +15744,16 @@ done
+ 
+ 
+ # Check whether --with-mpi was given.
+-if test "${with_mpi+set}" = set; then
++if test ${with_mpi+y}
++then :
+   withval=$with_mpi;
+ fi
+ 
+ if test "$with_mpi" = no; then
+-   { echo "$as_me:$LINENO: NOTIFICATION: SAMRAI configured without the MPI library" >&5
+-echo "$as_me: NOTIFICATION: SAMRAI configured without the MPI library" >&6;}
++   { printf "%s\n" "$as_me:${as_lineno-$LINENO}: NOTIFICATION: SAMRAI configured without the MPI library" >&5
++printf "%s\n" "$as_me: NOTIFICATION: SAMRAI configured without the MPI library" >&6;}
+ 
+-cat >>confdefs.h <<\_ACEOF
+-#define LACKS_MPI 1
+-_ACEOF
++printf "%s\n" "#define LACKS_MPI 1" >>confdefs.h
+ 
+ else
+ 
+@@ -17624,55 +15763,59 @@ else
+ 
+    casc_find_mpi_cache_used=yes
+ 
+-   if test "${casc_cv_mpi_include+set}" = set; then
+-  echo $ECHO_N "(cached) $ECHO_C" >&6
+-else
++   if test ${casc_cv_mpi_include+y}
++then :
++  printf %s "(cached) " >&6
++else $as_nop
+   casc_find_mpi_cache_used=no
+ fi
+ 
+-   if test "${casc_cv_mpi_libs+set}" = set; then
+-  echo $ECHO_N "(cached) $ECHO_C" >&6
+-else
++   if test ${casc_cv_mpi_libs+y}
++then :
++  printf %s "(cached) " >&6
++else $as_nop
+   casc_find_mpi_cache_used=no
+ fi
+ 
+-   if test "${casc_cv_mpi_lib_dirs+set}" = set; then
+-  echo $ECHO_N "(cached) $ECHO_C" >&6
+-else
++   if test ${casc_cv_mpi_lib_dirs+y}
++then :
++  printf %s "(cached) " >&6
++else $as_nop
+   casc_find_mpi_cache_used=no
+ fi
+ 
+-   if test "${casc_cv_mpi_flags+set}" = set; then
+-  echo $ECHO_N "(cached) $ECHO_C" >&6
+-else
++   if test ${casc_cv_mpi_flags+y}
++then :
++  printf %s "(cached) " >&6
++else $as_nop
+   casc_find_mpi_cache_used=no
+ fi
+ 
+ 
+    if test "$casc_find_mpi_cache_used" = "yes"; then
+-      { echo "$as_me:$LINENO: checking for location of mpi.h" >&5
+-echo $ECHO_N "checking for location of mpi.h... $ECHO_C" >&6; }
++      { printf "%s\n" "$as_me:${as_lineno-$LINENO}: checking for location of mpi.h" >&5
++printf %s "checking for location of mpi.h... " >&6; }
+       MPIINCLUDE=$casc_cv_mpi_include
+-      { echo "$as_me:$LINENO: result: \"\(cached\) $MPIINCLUDE\"" >&5
+-echo "${ECHO_T}\"\(cached\) $MPIINCLUDE\"" >&6; }
++      { printf "%s\n" "$as_me:${as_lineno-$LINENO}: result: \"\(cached\) $MPIINCLUDE\"" >&5
++printf "%s\n" "\"\(cached\) $MPIINCLUDE\"" >&6; }
+ 
+-      { echo "$as_me:$LINENO: checking for MPI library directories" >&5
+-echo $ECHO_N "checking for MPI library directories... $ECHO_C" >&6; }
++      { printf "%s\n" "$as_me:${as_lineno-$LINENO}: checking for MPI library directories" >&5
++printf %s "checking for MPI library directories... " >&6; }
+       MPILIBDIRS=$casc_cv_mpi_lib_dirs
+-      { echo "$as_me:$LINENO: result: \"\(cached\) $MPILIBDIRS\"" >&5
+-echo "${ECHO_T}\"\(cached\) $MPILIBDIRS\"" >&6; }
++      { printf "%s\n" "$as_me:${as_lineno-$LINENO}: result: \"\(cached\) $MPILIBDIRS\"" >&5
++printf "%s\n" "\"\(cached\) $MPILIBDIRS\"" >&6; }
+ 
+-      { echo "$as_me:$LINENO: checking for MPI libraries" >&5
+-echo $ECHO_N "checking for MPI libraries... $ECHO_C" >&6; }
++      { printf "%s\n" "$as_me:${as_lineno-$LINENO}: checking for MPI libraries" >&5
++printf %s "checking for MPI libraries... " >&6; }
+       MPILIBS=$casc_cv_mpi_libs
+-      { echo "$as_me:$LINENO: result: \"\(cached\) $MPILIBS\"" >&5
+-echo "${ECHO_T}\"\(cached\) $MPILIBS\"" >&6; }
++      { printf "%s\n" "$as_me:${as_lineno-$LINENO}: result: \"\(cached\) $MPILIBS\"" >&5
++printf "%s\n" "\"\(cached\) $MPILIBS\"" >&6; }
+ 
+-      { echo "$as_me:$LINENO: checking for other MPI-related flags" >&5
+-echo $ECHO_N "checking for other MPI-related flags... $ECHO_C" >&6; }
++      { printf "%s\n" "$as_me:${as_lineno-$LINENO}: checking for other MPI-related flags" >&5
++printf %s "checking for other MPI-related flags... " >&6; }
+       MPIFLAGS=$casc_cv_mpi_flags
+-      { echo "$as_me:$LINENO: result: \"\(cached\) $MPIFLAGS\"" >&5
+-echo "${ECHO_T}\"\(cached\) $MPIFLAGS\"" >&6; }
++      { printf "%s\n" "$as_me:${as_lineno-$LINENO}: result: \"\(cached\) $MPIFLAGS\"" >&5
++printf "%s\n" "\"\(cached\) $MPIFLAGS\"" >&6; }
+    else
+ 
+ 
+@@ -17680,7 +15823,8 @@ echo "${ECHO_T}\"\(cached\) $MPIFLAGS\"" >&6; }
+       casc_user_chose_mpi=no
+ 
+ # Check whether --with-mpi-include was given.
+-if test "${with_mpi_include+set}" = set; then
++if test ${with_mpi_include+y}
++then :
+   withval=$with_mpi_include; for mpi_dir in $withval; do
+                      MPIINCLUDE="$MPIINCLUDE -I$withval"
+                   done; casc_user_chose_mpi=yes
+@@ -17689,7 +15833,8 @@ fi
+ 
+ 
+ # Check whether --with-mpi-libs was given.
+-if test "${with_mpi_libs+set}" = set; then
++if test ${with_mpi_libs+y}
++then :
+   withval=$with_mpi_libs; for mpi_lib in $withval; do
+                      MPILIBS="$MPILIBS -l$mpi_lib"
+                   done; casc_user_chose_mpi=yes
+@@ -17699,7 +15844,8 @@ fi
+ 
+ 
+ # Check whether --with-mpi-lib-dirs was given.
+-if test "${with_mpi_lib_dirs+set}" = set; then
++if test ${with_mpi_lib_dirs+y}
++then :
+   withval=$with_mpi_lib_dirs; for mpi_lib_dir in $withval; do
+                      MPILIBDIRS="-L$mpi_lib_dir $MPILIBDIRS"
+                   done; casc_user_chose_mpi=yes
+@@ -17709,7 +15855,8 @@ fi
+ 
+ 
+ # Check whether --with-mpi-flags was given.
+-if test "${with_mpi_flags+set}" = set; then
++if test ${with_mpi_flags+y}
++then :
+   withval=$with_mpi_flags; MPIFLAGS=$withval
+ fi
+ 
+@@ -17734,22 +15881,22 @@ fi
+       fi
+ 
+ 
+-      { echo "$as_me:$LINENO: checking for MPI include directories" >&5
+-echo $ECHO_N "checking for MPI include directories... $ECHO_C" >&6; }
+-      { echo "$as_me:$LINENO: result: $MPIINCLUDE" >&5
+-echo "${ECHO_T}$MPIINCLUDE" >&6; }
+-      { echo "$as_me:$LINENO: checking for MPI library directories" >&5
+-echo $ECHO_N "checking for MPI library directories... $ECHO_C" >&6; }
+-      { echo "$as_me:$LINENO: result: $MPILIBDIRS" >&5
+-echo "${ECHO_T}$MPILIBDIRS" >&6; }
+-      { echo "$as_me:$LINENO: checking for MPI libraries" >&5
+-echo $ECHO_N "checking for MPI libraries... $ECHO_C" >&6; }
+-      { echo "$as_me:$LINENO: result: $MPILIBS" >&5
+-echo "${ECHO_T}$MPILIBS" >&6; }
+-      { echo "$as_me:$LINENO: checking for other MPI-related flags" >&5
+-echo $ECHO_N "checking for other MPI-related flags... $ECHO_C" >&6; }
+-      { echo "$as_me:$LINENO: result: $MPIFLAGS" >&5
+-echo "${ECHO_T}$MPIFLAGS" >&6; }
++      { printf "%s\n" "$as_me:${as_lineno-$LINENO}: checking for MPI include directories" >&5
++printf %s "checking for MPI include directories... " >&6; }
++      { printf "%s\n" "$as_me:${as_lineno-$LINENO}: result: $MPIINCLUDE" >&5
++printf "%s\n" "$MPIINCLUDE" >&6; }
++      { printf "%s\n" "$as_me:${as_lineno-$LINENO}: checking for MPI library directories" >&5
++printf %s "checking for MPI library directories... " >&6; }
++      { printf "%s\n" "$as_me:${as_lineno-$LINENO}: result: $MPILIBDIRS" >&5
++printf "%s\n" "$MPILIBDIRS" >&6; }
++      { printf "%s\n" "$as_me:${as_lineno-$LINENO}: checking for MPI libraries" >&5
++printf %s "checking for MPI libraries... " >&6; }
++      { printf "%s\n" "$as_me:${as_lineno-$LINENO}: result: $MPILIBS" >&5
++printf "%s\n" "$MPILIBS" >&6; }
++      { printf "%s\n" "$as_me:${as_lineno-$LINENO}: checking for other MPI-related flags" >&5
++printf %s "checking for other MPI-related flags... " >&6; }
++      { printf "%s\n" "$as_me:${as_lineno-$LINENO}: result: $MPIFLAGS" >&5
++printf "%s\n" "$MPIFLAGS" >&6; }
+ 
+    fi
+ 
+@@ -17760,55 +15907,59 @@ echo "${ECHO_T}$MPIFLAGS" >&6; }
+ 
+    casc_find_mpi_cache_used=yes
+ 
+-   if test "${casc_cv_mpi_include+set}" = set; then
+-  echo $ECHO_N "(cached) $ECHO_C" >&6
+-else
++   if test ${casc_cv_mpi_include+y}
++then :
++  printf %s "(cached) " >&6
++else $as_nop
+   casc_find_mpi_cache_used=no
+ fi
+ 
+-   if test "${casc_cv_mpi_libs+set}" = set; then
+-  echo $ECHO_N "(cached) $ECHO_C" >&6
+-else
++   if test ${casc_cv_mpi_libs+y}
++then :
++  printf %s "(cached) " >&6
++else $as_nop
+   casc_find_mpi_cache_used=no
+ fi
+ 
+-   if test "${casc_cv_mpi_lib_dirs+set}" = set; then
+-  echo $ECHO_N "(cached) $ECHO_C" >&6
+-else
++   if test ${casc_cv_mpi_lib_dirs+y}
++then :
++  printf %s "(cached) " >&6
++else $as_nop
+   casc_find_mpi_cache_used=no
+ fi
+ 
+-   if test "${casc_cv_mpi_flags+set}" = set; then
+-  echo $ECHO_N "(cached) $ECHO_C" >&6
+-else
++   if test ${casc_cv_mpi_flags+y}
++then :
++  printf %s "(cached) " >&6
++else $as_nop
+   casc_find_mpi_cache_used=no
+ fi
+ 
+ 
+    if test "$casc_find_mpi_cache_used" = "yes"; then
+-      { echo "$as_me:$LINENO: checking for location of mpi.h" >&5
+-echo $ECHO_N "checking for location of mpi.h... $ECHO_C" >&6; }
++      { printf "%s\n" "$as_me:${as_lineno-$LINENO}: checking for location of mpi.h" >&5
++printf %s "checking for location of mpi.h... " >&6; }
+       MPIINCLUDE=$casc_cv_mpi_include
+-      { echo "$as_me:$LINENO: result: \"\(cached\) $MPIINCLUDE\"" >&5
+-echo "${ECHO_T}\"\(cached\) $MPIINCLUDE\"" >&6; }
++      { printf "%s\n" "$as_me:${as_lineno-$LINENO}: result: \"\(cached\) $MPIINCLUDE\"" >&5
++printf "%s\n" "\"\(cached\) $MPIINCLUDE\"" >&6; }
+ 
+-      { echo "$as_me:$LINENO: checking for MPI library directories" >&5
+-echo $ECHO_N "checking for MPI library directories... $ECHO_C" >&6; }
++      { printf "%s\n" "$as_me:${as_lineno-$LINENO}: checking for MPI library directories" >&5
++printf %s "checking for MPI library directories... " >&6; }
+       MPILIBDIRS=$casc_cv_mpi_lib_dirs
+-      { echo "$as_me:$LINENO: result: \"\(cached\) $MPILIBDIRS\"" >&5
+-echo "${ECHO_T}\"\(cached\) $MPILIBDIRS\"" >&6; }
++      { printf "%s\n" "$as_me:${as_lineno-$LINENO}: result: \"\(cached\) $MPILIBDIRS\"" >&5
++printf "%s\n" "\"\(cached\) $MPILIBDIRS\"" >&6; }
+ 
+-      { echo "$as_me:$LINENO: checking for MPI libraries" >&5
+-echo $ECHO_N "checking for MPI libraries... $ECHO_C" >&6; }
++      { printf "%s\n" "$as_me:${as_lineno-$LINENO}: checking for MPI libraries" >&5
++printf %s "checking for MPI libraries... " >&6; }
+       MPILIBS=$casc_cv_mpi_libs
+-      { echo "$as_me:$LINENO: result: \"\(cached\) $MPILIBS\"" >&5
+-echo "${ECHO_T}\"\(cached\) $MPILIBS\"" >&6; }
++      { printf "%s\n" "$as_me:${as_lineno-$LINENO}: result: \"\(cached\) $MPILIBS\"" >&5
++printf "%s\n" "\"\(cached\) $MPILIBS\"" >&6; }
+ 
+-      { echo "$as_me:$LINENO: checking for other MPI-related flags" >&5
+-echo $ECHO_N "checking for other MPI-related flags... $ECHO_C" >&6; }
++      { printf "%s\n" "$as_me:${as_lineno-$LINENO}: checking for other MPI-related flags" >&5
++printf %s "checking for other MPI-related flags... " >&6; }
+       MPIFLAGS=$casc_cv_mpi_flags
+-      { echo "$as_me:$LINENO: result: \"\(cached\) $MPIFLAGS\"" >&5
+-echo "${ECHO_T}\"\(cached\) $MPIFLAGS\"" >&6; }
++      { printf "%s\n" "$as_me:${as_lineno-$LINENO}: result: \"\(cached\) $MPIFLAGS\"" >&5
++printf "%s\n" "\"\(cached\) $MPIFLAGS\"" >&6; }
+    else
+ 
+ 
+@@ -17816,7 +15967,8 @@ echo "${ECHO_T}\"\(cached\) $MPIFLAGS\"" >&6; }
+       casc_user_chose_mpi=no
+ 
+ # Check whether --with-mpi-include was given.
+-if test "${with_mpi_include+set}" = set; then
++if test ${with_mpi_include+y}
++then :
+   withval=$with_mpi_include; for mpi_dir in $withval; do
+                      MPIINCLUDE="$MPIINCLUDE -I$withval"
+                   done; casc_user_chose_mpi=yes
+@@ -17825,7 +15977,8 @@ fi
+ 
+ 
+ # Check whether --with-mpi-libs was given.
+-if test "${with_mpi_libs+set}" = set; then
++if test ${with_mpi_libs+y}
++then :
+   withval=$with_mpi_libs; for mpi_lib in $withval; do
+                      MPILIBS="$MPILIBS -l$mpi_lib"
+                   done; casc_user_chose_mpi=yes
+@@ -17835,7 +15988,8 @@ fi
+ 
+ 
+ # Check whether --with-mpi-lib-dirs was given.
+-if test "${with_mpi_lib_dirs+set}" = set; then
++if test ${with_mpi_lib_dirs+y}
++then :
+   withval=$with_mpi_lib_dirs; for mpi_lib_dir in $withval; do
+                      MPILIBDIRS="-L$mpi_lib_dir $MPILIBDIRS"
+                   done; casc_user_chose_mpi=yes
+@@ -17845,7 +15999,8 @@ fi
+ 
+ 
+ # Check whether --with-mpi-flags was given.
+-if test "${with_mpi_flags+set}" = set; then
++if test ${with_mpi_flags+y}
++then :
+   withval=$with_mpi_flags; MPIFLAGS=$withval
+ fi
+ 
+@@ -17856,18 +16011,20 @@ fi
+ 
+ 
+ # Check whether --with-MPICC was given.
+-if test "${with_MPICC+set}" = set; then
++if test ${with_MPICC+y}
++then :
+   withval=$with_MPICC; MPICC=$withval
+-else
++else $as_nop
+   for ac_prog in mpcc mpicc tmcc hcc
+ do
+   # Extract the first word of "$ac_prog", so it can be a program name with args.
+ set dummy $ac_prog; ac_word=$2
+-{ echo "$as_me:$LINENO: checking for $ac_word" >&5
+-echo $ECHO_N "checking for $ac_word... $ECHO_C" >&6; }
+-if test "${ac_cv_prog_MPICC+set}" = set; then
+-  echo $ECHO_N "(cached) $ECHO_C" >&6
+-else
++{ printf "%s\n" "$as_me:${as_lineno-$LINENO}: checking for $ac_word" >&5
++printf %s "checking for $ac_word... " >&6; }
++if test ${ac_cv_prog_MPICC+y}
++then :
++  printf %s "(cached) " >&6
++else $as_nop
+   if test -n "$MPICC"; then
+   ac_cv_prog_MPICC="$MPICC" # Let the user override the test.
+ else
+@@ -17875,26 +16032,30 @@ as_save_IFS=$IFS; IFS=$PATH_SEPARATOR
+ for as_dir in $PATH
+ do
+   IFS=$as_save_IFS
+-  test -z "$as_dir" && as_dir=.
+-  for ac_exec_ext in '' $ac_executable_extensions; do
+-  if { test -f "$as_dir/$ac_word$ac_exec_ext" && $as_test_x "$as_dir/$ac_word$ac_exec_ext"; }; then
++  case $as_dir in #(((
++    '') as_dir=./ ;;
++    */) ;;
++    *) as_dir=$as_dir/ ;;
++  esac
++    for ac_exec_ext in '' $ac_executable_extensions; do
++  if as_fn_executable_p "$as_dir$ac_word$ac_exec_ext"; then
+     ac_cv_prog_MPICC="$ac_prog"
+-    echo "$as_me:$LINENO: found $as_dir/$ac_word$ac_exec_ext" >&5
++    printf "%s\n" "$as_me:${as_lineno-$LINENO}: found $as_dir$ac_word$ac_exec_ext" >&5
+     break 2
+   fi
+ done
+-done
++  done
+ IFS=$as_save_IFS
+ 
+ fi
+ fi
+ MPICC=$ac_cv_prog_MPICC
+ if test -n "$MPICC"; then
+-  { echo "$as_me:$LINENO: result: $MPICC" >&5
+-echo "${ECHO_T}$MPICC" >&6; }
++  { printf "%s\n" "$as_me:${as_lineno-$LINENO}: result: $MPICC" >&5
++printf "%s\n" "$MPICC" >&6; }
+ else
+-  { echo "$as_me:$LINENO: result: no" >&5
+-echo "${ECHO_T}no" >&6; }
++  { printf "%s\n" "$as_me:${as_lineno-$LINENO}: result: no" >&5
++printf "%s\n" "no" >&6; }
+ fi
+ 
+ 
+@@ -17905,27 +16066,30 @@ fi
+ 
+ 
+          if test -z "$MPICC"; then
+-            { echo "$as_me:$LINENO: WARNING: no acceptable mpicc found in \$PATH" >&5
+-echo "$as_me: WARNING: no acceptable mpicc found in \$PATH" >&2;}
++            { printf "%s\n" "$as_me:${as_lineno-$LINENO}: WARNING: no acceptable mpicc found in \$PATH" >&5
++printf "%s\n" "$as_me: WARNING: no acceptable mpicc found in \$PATH" >&2;}
+ 
+ 
+ 
+ # Check whether --with-mpi-include was given.
+-if test "${with_mpi_include+set}" = set; then
++if test ${with_mpi_include+y}
++then :
+   withval=$with_mpi_include; casc_mpi_include_dir=$withval
+ fi
+ 
+ 
+ 
+ # Check whether --with-mpi-libs was given.
+-if test "${with_mpi_libs+set}" = set; then
++if test ${with_mpi_libs+y}
++then :
+   withval=$with_mpi_libs; casc_mpi_libs=$withval
+ fi
+ 
+ 
+ 
+ # Check whether --with-mpi-lib-dirs was given.
+-if test "${with_mpi_lib_dirs+set}" = set; then
++if test ${with_mpi_lib_dirs+y}
++then :
+   withval=$with_mpi_lib_dirs; casc_mpi_lib_dirs=$withval
+ fi
+ 
+@@ -17965,139 +16129,13 @@ fi
+                esac
+ 
+             if test -z "$MPIINCLUDE"; then
+-               as_ac_Header=`echo "ac_cv_header_$casc_mpi_include_dir/mpi.h" | $as_tr_sh`
+-if { as_var=$as_ac_Header; eval "test \"\${$as_var+set}\" = set"; }; then
+-  { echo "$as_me:$LINENO: checking for $casc_mpi_include_dir/mpi.h" >&5
+-echo $ECHO_N "checking for $casc_mpi_include_dir/mpi.h... $ECHO_C" >&6; }
+-if { as_var=$as_ac_Header; eval "test \"\${$as_var+set}\" = set"; }; then
+-  echo $ECHO_N "(cached) $ECHO_C" >&6
+-fi
+-ac_res=`eval echo '${'$as_ac_Header'}'`
+-	       { echo "$as_me:$LINENO: result: $ac_res" >&5
+-echo "${ECHO_T}$ac_res" >&6; }
+-else
+-  # Is the header compilable?
+-{ echo "$as_me:$LINENO: checking $casc_mpi_include_dir/mpi.h usability" >&5
+-echo $ECHO_N "checking $casc_mpi_include_dir/mpi.h usability... $ECHO_C" >&6; }
+-cat >conftest.$ac_ext <<_ACEOF
+-/* confdefs.h.  */
+-_ACEOF
+-cat confdefs.h >>conftest.$ac_ext
+-cat >>conftest.$ac_ext <<_ACEOF
+-/* end confdefs.h.  */
+-$ac_includes_default
+-#include <$casc_mpi_include_dir/mpi.h>
+-_ACEOF
+-rm -f conftest.$ac_objext
+-if { (ac_try="$ac_compile"
+-case "(($ac_try" in
+-  *\"* | *\`* | *\\*) ac_try_echo=\$ac_try;;
+-  *) ac_try_echo=$ac_try;;
+-esac
+-eval "echo \"\$as_me:$LINENO: $ac_try_echo\"") >&5
+-  (eval "$ac_compile") 2>conftest.er1
+-  ac_status=$?
+-  grep -v '^ *+' conftest.er1 >conftest.err
+-  rm -f conftest.er1
+-  cat conftest.err >&5
+-  echo "$as_me:$LINENO: \$? = $ac_status" >&5
+-  (exit $ac_status); } && {
+-	 test -z "$ac_c_werror_flag" ||
+-	 test ! -s conftest.err
+-       } && test -s conftest.$ac_objext; then
+-  ac_header_compiler=yes
+-else
+-  echo "$as_me: failed program was:" >&5
+-sed 's/^/| /' conftest.$ac_ext >&5
+-
+-	ac_header_compiler=no
+-fi
+-
+-rm -f core conftest.err conftest.$ac_objext conftest.$ac_ext
+-{ echo "$as_me:$LINENO: result: $ac_header_compiler" >&5
+-echo "${ECHO_T}$ac_header_compiler" >&6; }
+-
+-# Is the header present?
+-{ echo "$as_me:$LINENO: checking $casc_mpi_include_dir/mpi.h presence" >&5
+-echo $ECHO_N "checking $casc_mpi_include_dir/mpi.h presence... $ECHO_C" >&6; }
+-cat >conftest.$ac_ext <<_ACEOF
+-/* confdefs.h.  */
+-_ACEOF
+-cat confdefs.h >>conftest.$ac_ext
+-cat >>conftest.$ac_ext <<_ACEOF
+-/* end confdefs.h.  */
+-#include <$casc_mpi_include_dir/mpi.h>
+-_ACEOF
+-if { (ac_try="$ac_cpp conftest.$ac_ext"
+-case "(($ac_try" in
+-  *\"* | *\`* | *\\*) ac_try_echo=\$ac_try;;
+-  *) ac_try_echo=$ac_try;;
+-esac
+-eval "echo \"\$as_me:$LINENO: $ac_try_echo\"") >&5
+-  (eval "$ac_cpp conftest.$ac_ext") 2>conftest.er1
+-  ac_status=$?
+-  grep -v '^ *+' conftest.er1 >conftest.err
+-  rm -f conftest.er1
+-  cat conftest.err >&5
+-  echo "$as_me:$LINENO: \$? = $ac_status" >&5
+-  (exit $ac_status); } >/dev/null && {
+-	 test -z "$ac_c_preproc_warn_flag$ac_c_werror_flag" ||
+-	 test ! -s conftest.err
+-       }; then
+-  ac_header_preproc=yes
+-else
+-  echo "$as_me: failed program was:" >&5
+-sed 's/^/| /' conftest.$ac_ext >&5
+-
+-  ac_header_preproc=no
+-fi
+-
+-rm -f conftest.err conftest.$ac_ext
+-{ echo "$as_me:$LINENO: result: $ac_header_preproc" >&5
+-echo "${ECHO_T}$ac_header_preproc" >&6; }
+-
+-# So?  What about this header?
+-case $ac_header_compiler:$ac_header_preproc:$ac_c_preproc_warn_flag in
+-  yes:no: )
+-    { echo "$as_me:$LINENO: WARNING: $casc_mpi_include_dir/mpi.h: accepted by the compiler, rejected by the preprocessor!" >&5
+-echo "$as_me: WARNING: $casc_mpi_include_dir/mpi.h: accepted by the compiler, rejected by the preprocessor!" >&2;}
+-    { echo "$as_me:$LINENO: WARNING: $casc_mpi_include_dir/mpi.h: proceeding with the compiler's result" >&5
+-echo "$as_me: WARNING: $casc_mpi_include_dir/mpi.h: proceeding with the compiler's result" >&2;}
+-    ac_header_preproc=yes
+-    ;;
+-  no:yes:* )
+-    { echo "$as_me:$LINENO: WARNING: $casc_mpi_include_dir/mpi.h: present but cannot be compiled" >&5
+-echo "$as_me: WARNING: $casc_mpi_include_dir/mpi.h: present but cannot be compiled" >&2;}
+-    { echo "$as_me:$LINENO: WARNING: $casc_mpi_include_dir/mpi.h:     check for missing prerequisite headers?" >&5
+-echo "$as_me: WARNING: $casc_mpi_include_dir/mpi.h:     check for missing prerequisite headers?" >&2;}
+-    { echo "$as_me:$LINENO: WARNING: $casc_mpi_include_dir/mpi.h: see the Autoconf documentation" >&5
+-echo "$as_me: WARNING: $casc_mpi_include_dir/mpi.h: see the Autoconf documentation" >&2;}
+-    { echo "$as_me:$LINENO: WARNING: $casc_mpi_include_dir/mpi.h:     section \"Present But Cannot Be Compiled\"" >&5
+-echo "$as_me: WARNING: $casc_mpi_include_dir/mpi.h:     section \"Present But Cannot Be Compiled\"" >&2;}
+-    { echo "$as_me:$LINENO: WARNING: $casc_mpi_include_dir/mpi.h: proceeding with the preprocessor's result" >&5
+-echo "$as_me: WARNING: $casc_mpi_include_dir/mpi.h: proceeding with the preprocessor's result" >&2;}
+-    { echo "$as_me:$LINENO: WARNING: $casc_mpi_include_dir/mpi.h: in the future, the compiler will take precedence" >&5
+-echo "$as_me: WARNING: $casc_mpi_include_dir/mpi.h: in the future, the compiler will take precedence" >&2;}
+-
+-    ;;
+-esac
+-{ echo "$as_me:$LINENO: checking for $casc_mpi_include_dir/mpi.h" >&5
+-echo $ECHO_N "checking for $casc_mpi_include_dir/mpi.h... $ECHO_C" >&6; }
+-if { as_var=$as_ac_Header; eval "test \"\${$as_var+set}\" = set"; }; then
+-  echo $ECHO_N "(cached) $ECHO_C" >&6
+-else
+-  eval "$as_ac_Header=\$ac_header_preproc"
+-fi
+-ac_res=`eval echo '${'$as_ac_Header'}'`
+-	       { echo "$as_me:$LINENO: result: $ac_res" >&5
+-echo "${ECHO_T}$ac_res" >&6; }
+-
+-fi
+-if test `eval echo '${'$as_ac_Header'}'` = yes; then
++               as_ac_Header=`printf "%s\n" "ac_cv_header_$casc_mpi_include_dir/mpi.h" | $as_tr_sh`
++ac_fn_c_check_header_compile "$LINENO" "$casc_mpi_include_dir/mpi.h" "$as_ac_Header" "$ac_includes_default"
++if eval test \"x\$"$as_ac_Header"\" = x"yes"
++then :
+   MPIINCLUDE="-I$casc_mpi_include_dir"
+ fi
+ 
+-
+             fi
+          ;;
+ 
+@@ -18105,140 +16143,14 @@ fi
+             if test -z "$casc_mpi_include_dir"; then
+                casc_mpi_include_dir=/usr/local/mpi/include
+             fi
+-            as_ac_Header=`echo "ac_cv_header_$casc_mpi_include_dir/mpi.h" | $as_tr_sh`
+-if { as_var=$as_ac_Header; eval "test \"\${$as_var+set}\" = set"; }; then
+-  { echo "$as_me:$LINENO: checking for $casc_mpi_include_dir/mpi.h" >&5
+-echo $ECHO_N "checking for $casc_mpi_include_dir/mpi.h... $ECHO_C" >&6; }
+-if { as_var=$as_ac_Header; eval "test \"\${$as_var+set}\" = set"; }; then
+-  echo $ECHO_N "(cached) $ECHO_C" >&6
+-fi
+-ac_res=`eval echo '${'$as_ac_Header'}'`
+-	       { echo "$as_me:$LINENO: result: $ac_res" >&5
+-echo "${ECHO_T}$ac_res" >&6; }
+-else
+-  # Is the header compilable?
+-{ echo "$as_me:$LINENO: checking $casc_mpi_include_dir/mpi.h usability" >&5
+-echo $ECHO_N "checking $casc_mpi_include_dir/mpi.h usability... $ECHO_C" >&6; }
+-cat >conftest.$ac_ext <<_ACEOF
+-/* confdefs.h.  */
+-_ACEOF
+-cat confdefs.h >>conftest.$ac_ext
+-cat >>conftest.$ac_ext <<_ACEOF
+-/* end confdefs.h.  */
+-$ac_includes_default
+-#include <$casc_mpi_include_dir/mpi.h>
+-_ACEOF
+-rm -f conftest.$ac_objext
+-if { (ac_try="$ac_compile"
+-case "(($ac_try" in
+-  *\"* | *\`* | *\\*) ac_try_echo=\$ac_try;;
+-  *) ac_try_echo=$ac_try;;
+-esac
+-eval "echo \"\$as_me:$LINENO: $ac_try_echo\"") >&5
+-  (eval "$ac_compile") 2>conftest.er1
+-  ac_status=$?
+-  grep -v '^ *+' conftest.er1 >conftest.err
+-  rm -f conftest.er1
+-  cat conftest.err >&5
+-  echo "$as_me:$LINENO: \$? = $ac_status" >&5
+-  (exit $ac_status); } && {
+-	 test -z "$ac_c_werror_flag" ||
+-	 test ! -s conftest.err
+-       } && test -s conftest.$ac_objext; then
+-  ac_header_compiler=yes
+-else
+-  echo "$as_me: failed program was:" >&5
+-sed 's/^/| /' conftest.$ac_ext >&5
+-
+-	ac_header_compiler=no
+-fi
+-
+-rm -f core conftest.err conftest.$ac_objext conftest.$ac_ext
+-{ echo "$as_me:$LINENO: result: $ac_header_compiler" >&5
+-echo "${ECHO_T}$ac_header_compiler" >&6; }
+-
+-# Is the header present?
+-{ echo "$as_me:$LINENO: checking $casc_mpi_include_dir/mpi.h presence" >&5
+-echo $ECHO_N "checking $casc_mpi_include_dir/mpi.h presence... $ECHO_C" >&6; }
+-cat >conftest.$ac_ext <<_ACEOF
+-/* confdefs.h.  */
+-_ACEOF
+-cat confdefs.h >>conftest.$ac_ext
+-cat >>conftest.$ac_ext <<_ACEOF
+-/* end confdefs.h.  */
+-#include <$casc_mpi_include_dir/mpi.h>
+-_ACEOF
+-if { (ac_try="$ac_cpp conftest.$ac_ext"
+-case "(($ac_try" in
+-  *\"* | *\`* | *\\*) ac_try_echo=\$ac_try;;
+-  *) ac_try_echo=$ac_try;;
+-esac
+-eval "echo \"\$as_me:$LINENO: $ac_try_echo\"") >&5
+-  (eval "$ac_cpp conftest.$ac_ext") 2>conftest.er1
+-  ac_status=$?
+-  grep -v '^ *+' conftest.er1 >conftest.err
+-  rm -f conftest.er1
+-  cat conftest.err >&5
+-  echo "$as_me:$LINENO: \$? = $ac_status" >&5
+-  (exit $ac_status); } >/dev/null && {
+-	 test -z "$ac_c_preproc_warn_flag$ac_c_werror_flag" ||
+-	 test ! -s conftest.err
+-       }; then
+-  ac_header_preproc=yes
+-else
+-  echo "$as_me: failed program was:" >&5
+-sed 's/^/| /' conftest.$ac_ext >&5
+-
+-  ac_header_preproc=no
+-fi
+-
+-rm -f conftest.err conftest.$ac_ext
+-{ echo "$as_me:$LINENO: result: $ac_header_preproc" >&5
+-echo "${ECHO_T}$ac_header_preproc" >&6; }
+-
+-# So?  What about this header?
+-case $ac_header_compiler:$ac_header_preproc:$ac_c_preproc_warn_flag in
+-  yes:no: )
+-    { echo "$as_me:$LINENO: WARNING: $casc_mpi_include_dir/mpi.h: accepted by the compiler, rejected by the preprocessor!" >&5
+-echo "$as_me: WARNING: $casc_mpi_include_dir/mpi.h: accepted by the compiler, rejected by the preprocessor!" >&2;}
+-    { echo "$as_me:$LINENO: WARNING: $casc_mpi_include_dir/mpi.h: proceeding with the compiler's result" >&5
+-echo "$as_me: WARNING: $casc_mpi_include_dir/mpi.h: proceeding with the compiler's result" >&2;}
+-    ac_header_preproc=yes
+-    ;;
+-  no:yes:* )
+-    { echo "$as_me:$LINENO: WARNING: $casc_mpi_include_dir/mpi.h: present but cannot be compiled" >&5
+-echo "$as_me: WARNING: $casc_mpi_include_dir/mpi.h: present but cannot be compiled" >&2;}
+-    { echo "$as_me:$LINENO: WARNING: $casc_mpi_include_dir/mpi.h:     check for missing prerequisite headers?" >&5
+-echo "$as_me: WARNING: $casc_mpi_include_dir/mpi.h:     check for missing prerequisite headers?" >&2;}
+-    { echo "$as_me:$LINENO: WARNING: $casc_mpi_include_dir/mpi.h: see the Autoconf documentation" >&5
+-echo "$as_me: WARNING: $casc_mpi_include_dir/mpi.h: see the Autoconf documentation" >&2;}
+-    { echo "$as_me:$LINENO: WARNING: $casc_mpi_include_dir/mpi.h:     section \"Present But Cannot Be Compiled\"" >&5
+-echo "$as_me: WARNING: $casc_mpi_include_dir/mpi.h:     section \"Present But Cannot Be Compiled\"" >&2;}
+-    { echo "$as_me:$LINENO: WARNING: $casc_mpi_include_dir/mpi.h: proceeding with the preprocessor's result" >&5
+-echo "$as_me: WARNING: $casc_mpi_include_dir/mpi.h: proceeding with the preprocessor's result" >&2;}
+-    { echo "$as_me:$LINENO: WARNING: $casc_mpi_include_dir/mpi.h: in the future, the compiler will take precedence" >&5
+-echo "$as_me: WARNING: $casc_mpi_include_dir/mpi.h: in the future, the compiler will take precedence" >&2;}
+-
+-    ;;
+-esac
+-{ echo "$as_me:$LINENO: checking for $casc_mpi_include_dir/mpi.h" >&5
+-echo $ECHO_N "checking for $casc_mpi_include_dir/mpi.h... $ECHO_C" >&6; }
+-if { as_var=$as_ac_Header; eval "test \"\${$as_var+set}\" = set"; }; then
+-  echo $ECHO_N "(cached) $ECHO_C" >&6
+-else
+-  eval "$as_ac_Header=\$ac_header_preproc"
+-fi
+-ac_res=`eval echo '${'$as_ac_Header'}'`
+-	       { echo "$as_me:$LINENO: result: $ac_res" >&5
+-echo "${ECHO_T}$ac_res" >&6; }
+-
+-fi
+-if test `eval echo '${'$as_ac_Header'}'` = yes; then
++            as_ac_Header=`printf "%s\n" "ac_cv_header_$casc_mpi_include_dir/mpi.h" | $as_tr_sh`
++ac_fn_c_check_header_compile "$LINENO" "$casc_mpi_include_dir/mpi.h" "$as_ac_Header" "$ac_includes_default"
++if eval test \"x\$"$as_ac_Header"\" = x"yes"
++then :
+   MPIINCLUDE="-I$casc_mpi_include_dir"
+ fi
+ 
+ 
+-
+             if test -z "$casc_mpi_lib_dirs"; then
+                casc_mpi_lib_dirs="/usr/local/mpi/lib/alpha/ch_shmem \
+                                   /usr/local/lib"
+@@ -18258,140 +16170,14 @@ fi
+             if test -z "$casc_mpi_include_dir"; then
+                casc_mpi_include_dir=/usr/local/mpi/include
+             fi
+-            as_ac_Header=`echo "ac_cv_header_$casc_mpi_include_dir/mpi.h" | $as_tr_sh`
+-if { as_var=$as_ac_Header; eval "test \"\${$as_var+set}\" = set"; }; then
+-  { echo "$as_me:$LINENO: checking for $casc_mpi_include_dir/mpi.h" >&5
+-echo $ECHO_N "checking for $casc_mpi_include_dir/mpi.h... $ECHO_C" >&6; }
+-if { as_var=$as_ac_Header; eval "test \"\${$as_var+set}\" = set"; }; then
+-  echo $ECHO_N "(cached) $ECHO_C" >&6
+-fi
+-ac_res=`eval echo '${'$as_ac_Header'}'`
+-	       { echo "$as_me:$LINENO: result: $ac_res" >&5
+-echo "${ECHO_T}$ac_res" >&6; }
+-else
+-  # Is the header compilable?
+-{ echo "$as_me:$LINENO: checking $casc_mpi_include_dir/mpi.h usability" >&5
+-echo $ECHO_N "checking $casc_mpi_include_dir/mpi.h usability... $ECHO_C" >&6; }
+-cat >conftest.$ac_ext <<_ACEOF
+-/* confdefs.h.  */
+-_ACEOF
+-cat confdefs.h >>conftest.$ac_ext
+-cat >>conftest.$ac_ext <<_ACEOF
+-/* end confdefs.h.  */
+-$ac_includes_default
+-#include <$casc_mpi_include_dir/mpi.h>
+-_ACEOF
+-rm -f conftest.$ac_objext
+-if { (ac_try="$ac_compile"
+-case "(($ac_try" in
+-  *\"* | *\`* | *\\*) ac_try_echo=\$ac_try;;
+-  *) ac_try_echo=$ac_try;;
+-esac
+-eval "echo \"\$as_me:$LINENO: $ac_try_echo\"") >&5
+-  (eval "$ac_compile") 2>conftest.er1
+-  ac_status=$?
+-  grep -v '^ *+' conftest.er1 >conftest.err
+-  rm -f conftest.er1
+-  cat conftest.err >&5
+-  echo "$as_me:$LINENO: \$? = $ac_status" >&5
+-  (exit $ac_status); } && {
+-	 test -z "$ac_c_werror_flag" ||
+-	 test ! -s conftest.err
+-       } && test -s conftest.$ac_objext; then
+-  ac_header_compiler=yes
+-else
+-  echo "$as_me: failed program was:" >&5
+-sed 's/^/| /' conftest.$ac_ext >&5
+-
+-	ac_header_compiler=no
+-fi
+-
+-rm -f core conftest.err conftest.$ac_objext conftest.$ac_ext
+-{ echo "$as_me:$LINENO: result: $ac_header_compiler" >&5
+-echo "${ECHO_T}$ac_header_compiler" >&6; }
+-
+-# Is the header present?
+-{ echo "$as_me:$LINENO: checking $casc_mpi_include_dir/mpi.h presence" >&5
+-echo $ECHO_N "checking $casc_mpi_include_dir/mpi.h presence... $ECHO_C" >&6; }
+-cat >conftest.$ac_ext <<_ACEOF
+-/* confdefs.h.  */
+-_ACEOF
+-cat confdefs.h >>conftest.$ac_ext
+-cat >>conftest.$ac_ext <<_ACEOF
+-/* end confdefs.h.  */
+-#include <$casc_mpi_include_dir/mpi.h>
+-_ACEOF
+-if { (ac_try="$ac_cpp conftest.$ac_ext"
+-case "(($ac_try" in
+-  *\"* | *\`* | *\\*) ac_try_echo=\$ac_try;;
+-  *) ac_try_echo=$ac_try;;
+-esac
+-eval "echo \"\$as_me:$LINENO: $ac_try_echo\"") >&5
+-  (eval "$ac_cpp conftest.$ac_ext") 2>conftest.er1
+-  ac_status=$?
+-  grep -v '^ *+' conftest.er1 >conftest.err
+-  rm -f conftest.er1
+-  cat conftest.err >&5
+-  echo "$as_me:$LINENO: \$? = $ac_status" >&5
+-  (exit $ac_status); } >/dev/null && {
+-	 test -z "$ac_c_preproc_warn_flag$ac_c_werror_flag" ||
+-	 test ! -s conftest.err
+-       }; then
+-  ac_header_preproc=yes
+-else
+-  echo "$as_me: failed program was:" >&5
+-sed 's/^/| /' conftest.$ac_ext >&5
+-
+-  ac_header_preproc=no
+-fi
+-
+-rm -f conftest.err conftest.$ac_ext
+-{ echo "$as_me:$LINENO: result: $ac_header_preproc" >&5
+-echo "${ECHO_T}$ac_header_preproc" >&6; }
+-
+-# So?  What about this header?
+-case $ac_header_compiler:$ac_header_preproc:$ac_c_preproc_warn_flag in
+-  yes:no: )
+-    { echo "$as_me:$LINENO: WARNING: $casc_mpi_include_dir/mpi.h: accepted by the compiler, rejected by the preprocessor!" >&5
+-echo "$as_me: WARNING: $casc_mpi_include_dir/mpi.h: accepted by the compiler, rejected by the preprocessor!" >&2;}
+-    { echo "$as_me:$LINENO: WARNING: $casc_mpi_include_dir/mpi.h: proceeding with the compiler's result" >&5
+-echo "$as_me: WARNING: $casc_mpi_include_dir/mpi.h: proceeding with the compiler's result" >&2;}
+-    ac_header_preproc=yes
+-    ;;
+-  no:yes:* )
+-    { echo "$as_me:$LINENO: WARNING: $casc_mpi_include_dir/mpi.h: present but cannot be compiled" >&5
+-echo "$as_me: WARNING: $casc_mpi_include_dir/mpi.h: present but cannot be compiled" >&2;}
+-    { echo "$as_me:$LINENO: WARNING: $casc_mpi_include_dir/mpi.h:     check for missing prerequisite headers?" >&5
+-echo "$as_me: WARNING: $casc_mpi_include_dir/mpi.h:     check for missing prerequisite headers?" >&2;}
+-    { echo "$as_me:$LINENO: WARNING: $casc_mpi_include_dir/mpi.h: see the Autoconf documentation" >&5
+-echo "$as_me: WARNING: $casc_mpi_include_dir/mpi.h: see the Autoconf documentation" >&2;}
+-    { echo "$as_me:$LINENO: WARNING: $casc_mpi_include_dir/mpi.h:     section \"Present But Cannot Be Compiled\"" >&5
+-echo "$as_me: WARNING: $casc_mpi_include_dir/mpi.h:     section \"Present But Cannot Be Compiled\"" >&2;}
+-    { echo "$as_me:$LINENO: WARNING: $casc_mpi_include_dir/mpi.h: proceeding with the preprocessor's result" >&5
+-echo "$as_me: WARNING: $casc_mpi_include_dir/mpi.h: proceeding with the preprocessor's result" >&2;}
+-    { echo "$as_me:$LINENO: WARNING: $casc_mpi_include_dir/mpi.h: in the future, the compiler will take precedence" >&5
+-echo "$as_me: WARNING: $casc_mpi_include_dir/mpi.h: in the future, the compiler will take precedence" >&2;}
+-
+-    ;;
+-esac
+-{ echo "$as_me:$LINENO: checking for $casc_mpi_include_dir/mpi.h" >&5
+-echo $ECHO_N "checking for $casc_mpi_include_dir/mpi.h... $ECHO_C" >&6; }
+-if { as_var=$as_ac_Header; eval "test \"\${$as_var+set}\" = set"; }; then
+-  echo $ECHO_N "(cached) $ECHO_C" >&6
+-else
+-  eval "$as_ac_Header=\$ac_header_preproc"
+-fi
+-ac_res=`eval echo '${'$as_ac_Header'}'`
+-	       { echo "$as_me:$LINENO: result: $ac_res" >&5
+-echo "${ECHO_T}$ac_res" >&6; }
+-
+-fi
+-if test `eval echo '${'$as_ac_Header'}'` = yes; then
++            as_ac_Header=`printf "%s\n" "ac_cv_header_$casc_mpi_include_dir/mpi.h" | $as_tr_sh`
++ac_fn_c_check_header_compile "$LINENO" "$casc_mpi_include_dir/mpi.h" "$as_ac_Header" "$ac_includes_default"
++if eval test \"x\$"$as_ac_Header"\" = x"yes"
++then :
+   MPIINCLUDE="-I$casc_mpi_include_dir"
+ fi
+ 
+ 
+-
+             if test -z "$casc_mpi_lib_dirs"; then
+                casc_mpi_lib_dirs=/usr/local/mpi/lib/IRIX64/ch_p4
+             fi
+@@ -18399,145 +16185,19 @@ fi
+             casc_mpi_libs=mpi;;
+ 
+          *)
+-{ echo "$as_me:$LINENO: WARNING: trying naive MPI settings - can use --with flags to change" >&5
+-echo "$as_me: WARNING: trying naive MPI settings - can use --with flags to change" >&2;}
++{ printf "%s\n" "$as_me:${as_lineno-$LINENO}: WARNING: trying naive MPI settings - can use --with flags to change" >&5
++printf "%s\n" "$as_me: WARNING: trying naive MPI settings - can use --with flags to change" >&2;}
+             if test -z "$casc_mpi_include_dir"; then
+                casc_mpi_include_dir=/usr/local/mpi/include
+             fi
+-            as_ac_Header=`echo "ac_cv_header_$casc_mpi_include_dir/mpi.h" | $as_tr_sh`
+-if { as_var=$as_ac_Header; eval "test \"\${$as_var+set}\" = set"; }; then
+-  { echo "$as_me:$LINENO: checking for $casc_mpi_include_dir/mpi.h" >&5
+-echo $ECHO_N "checking for $casc_mpi_include_dir/mpi.h... $ECHO_C" >&6; }
+-if { as_var=$as_ac_Header; eval "test \"\${$as_var+set}\" = set"; }; then
+-  echo $ECHO_N "(cached) $ECHO_C" >&6
+-fi
+-ac_res=`eval echo '${'$as_ac_Header'}'`
+-	       { echo "$as_me:$LINENO: result: $ac_res" >&5
+-echo "${ECHO_T}$ac_res" >&6; }
+-else
+-  # Is the header compilable?
+-{ echo "$as_me:$LINENO: checking $casc_mpi_include_dir/mpi.h usability" >&5
+-echo $ECHO_N "checking $casc_mpi_include_dir/mpi.h usability... $ECHO_C" >&6; }
+-cat >conftest.$ac_ext <<_ACEOF
+-/* confdefs.h.  */
+-_ACEOF
+-cat confdefs.h >>conftest.$ac_ext
+-cat >>conftest.$ac_ext <<_ACEOF
+-/* end confdefs.h.  */
+-$ac_includes_default
+-#include <$casc_mpi_include_dir/mpi.h>
+-_ACEOF
+-rm -f conftest.$ac_objext
+-if { (ac_try="$ac_compile"
+-case "(($ac_try" in
+-  *\"* | *\`* | *\\*) ac_try_echo=\$ac_try;;
+-  *) ac_try_echo=$ac_try;;
+-esac
+-eval "echo \"\$as_me:$LINENO: $ac_try_echo\"") >&5
+-  (eval "$ac_compile") 2>conftest.er1
+-  ac_status=$?
+-  grep -v '^ *+' conftest.er1 >conftest.err
+-  rm -f conftest.er1
+-  cat conftest.err >&5
+-  echo "$as_me:$LINENO: \$? = $ac_status" >&5
+-  (exit $ac_status); } && {
+-	 test -z "$ac_c_werror_flag" ||
+-	 test ! -s conftest.err
+-       } && test -s conftest.$ac_objext; then
+-  ac_header_compiler=yes
+-else
+-  echo "$as_me: failed program was:" >&5
+-sed 's/^/| /' conftest.$ac_ext >&5
+-
+-	ac_header_compiler=no
+-fi
+-
+-rm -f core conftest.err conftest.$ac_objext conftest.$ac_ext
+-{ echo "$as_me:$LINENO: result: $ac_header_compiler" >&5
+-echo "${ECHO_T}$ac_header_compiler" >&6; }
+-
+-# Is the header present?
+-{ echo "$as_me:$LINENO: checking $casc_mpi_include_dir/mpi.h presence" >&5
+-echo $ECHO_N "checking $casc_mpi_include_dir/mpi.h presence... $ECHO_C" >&6; }
+-cat >conftest.$ac_ext <<_ACEOF
+-/* confdefs.h.  */
+-_ACEOF
+-cat confdefs.h >>conftest.$ac_ext
+-cat >>conftest.$ac_ext <<_ACEOF
+-/* end confdefs.h.  */
+-#include <$casc_mpi_include_dir/mpi.h>
+-_ACEOF
+-if { (ac_try="$ac_cpp conftest.$ac_ext"
+-case "(($ac_try" in
+-  *\"* | *\`* | *\\*) ac_try_echo=\$ac_try;;
+-  *) ac_try_echo=$ac_try;;
+-esac
+-eval "echo \"\$as_me:$LINENO: $ac_try_echo\"") >&5
+-  (eval "$ac_cpp conftest.$ac_ext") 2>conftest.er1
+-  ac_status=$?
+-  grep -v '^ *+' conftest.er1 >conftest.err
+-  rm -f conftest.er1
+-  cat conftest.err >&5
+-  echo "$as_me:$LINENO: \$? = $ac_status" >&5
+-  (exit $ac_status); } >/dev/null && {
+-	 test -z "$ac_c_preproc_warn_flag$ac_c_werror_flag" ||
+-	 test ! -s conftest.err
+-       }; then
+-  ac_header_preproc=yes
+-else
+-  echo "$as_me: failed program was:" >&5
+-sed 's/^/| /' conftest.$ac_ext >&5
+-
+-  ac_header_preproc=no
+-fi
+-
+-rm -f conftest.err conftest.$ac_ext
+-{ echo "$as_me:$LINENO: result: $ac_header_preproc" >&5
+-echo "${ECHO_T}$ac_header_preproc" >&6; }
+-
+-# So?  What about this header?
+-case $ac_header_compiler:$ac_header_preproc:$ac_c_preproc_warn_flag in
+-  yes:no: )
+-    { echo "$as_me:$LINENO: WARNING: $casc_mpi_include_dir/mpi.h: accepted by the compiler, rejected by the preprocessor!" >&5
+-echo "$as_me: WARNING: $casc_mpi_include_dir/mpi.h: accepted by the compiler, rejected by the preprocessor!" >&2;}
+-    { echo "$as_me:$LINENO: WARNING: $casc_mpi_include_dir/mpi.h: proceeding with the compiler's result" >&5
+-echo "$as_me: WARNING: $casc_mpi_include_dir/mpi.h: proceeding with the compiler's result" >&2;}
+-    ac_header_preproc=yes
+-    ;;
+-  no:yes:* )
+-    { echo "$as_me:$LINENO: WARNING: $casc_mpi_include_dir/mpi.h: present but cannot be compiled" >&5
+-echo "$as_me: WARNING: $casc_mpi_include_dir/mpi.h: present but cannot be compiled" >&2;}
+-    { echo "$as_me:$LINENO: WARNING: $casc_mpi_include_dir/mpi.h:     check for missing prerequisite headers?" >&5
+-echo "$as_me: WARNING: $casc_mpi_include_dir/mpi.h:     check for missing prerequisite headers?" >&2;}
+-    { echo "$as_me:$LINENO: WARNING: $casc_mpi_include_dir/mpi.h: see the Autoconf documentation" >&5
+-echo "$as_me: WARNING: $casc_mpi_include_dir/mpi.h: see the Autoconf documentation" >&2;}
+-    { echo "$as_me:$LINENO: WARNING: $casc_mpi_include_dir/mpi.h:     section \"Present But Cannot Be Compiled\"" >&5
+-echo "$as_me: WARNING: $casc_mpi_include_dir/mpi.h:     section \"Present But Cannot Be Compiled\"" >&2;}
+-    { echo "$as_me:$LINENO: WARNING: $casc_mpi_include_dir/mpi.h: proceeding with the preprocessor's result" >&5
+-echo "$as_me: WARNING: $casc_mpi_include_dir/mpi.h: proceeding with the preprocessor's result" >&2;}
+-    { echo "$as_me:$LINENO: WARNING: $casc_mpi_include_dir/mpi.h: in the future, the compiler will take precedence" >&5
+-echo "$as_me: WARNING: $casc_mpi_include_dir/mpi.h: in the future, the compiler will take precedence" >&2;}
+-
+-    ;;
+-esac
+-{ echo "$as_me:$LINENO: checking for $casc_mpi_include_dir/mpi.h" >&5
+-echo $ECHO_N "checking for $casc_mpi_include_dir/mpi.h... $ECHO_C" >&6; }
+-if { as_var=$as_ac_Header; eval "test \"\${$as_var+set}\" = set"; }; then
+-  echo $ECHO_N "(cached) $ECHO_C" >&6
+-else
+-  eval "$as_ac_Header=\$ac_header_preproc"
+-fi
+-ac_res=`eval echo '${'$as_ac_Header'}'`
+-	       { echo "$as_me:$LINENO: result: $ac_res" >&5
+-echo "${ECHO_T}$ac_res" >&6; }
+-
+-fi
+-if test `eval echo '${'$as_ac_Header'}'` = yes; then
++            as_ac_Header=`printf "%s\n" "ac_cv_header_$casc_mpi_include_dir/mpi.h" | $as_tr_sh`
++ac_fn_c_check_header_compile "$LINENO" "$casc_mpi_include_dir/mpi.h" "$as_ac_Header" "$ac_includes_default"
++if eval test \"x\$"$as_ac_Header"\" = x"yes"
++then :
+   MPIINCLUDE="-I$casc_mpi_include_dir"
+ fi
+ 
+ 
+-
+             if test -z "$casc_mpi_lib_dirs"; then
+                casc_mpi_lib_dirs=/usr/local/mpi/lib
+             fi
+@@ -18552,19 +16212,16 @@ fi
+ 
+    # check for the library from first argument.  If linking is successful
+    # the first time, the job is done, otherwise loop through DIRECTORY-LIST
+-   as_ac_Lib=`echo "ac_cv_lib_$casc_lib''_main" | $as_tr_sh`
+-{ echo "$as_me:$LINENO: checking for main in -l$casc_lib" >&5
+-echo $ECHO_N "checking for main in -l$casc_lib... $ECHO_C" >&6; }
+-if { as_var=$as_ac_Lib; eval "test \"\${$as_var+set}\" = set"; }; then
+-  echo $ECHO_N "(cached) $ECHO_C" >&6
+-else
++   as_ac_Lib=`printf "%s\n" "ac_cv_lib_$casc_lib""_main" | $as_tr_sh`
++{ printf "%s\n" "$as_me:${as_lineno-$LINENO}: checking for main in -l$casc_lib" >&5
++printf %s "checking for main in -l$casc_lib... " >&6; }
++if eval test \${$as_ac_Lib+y}
++then :
++  printf %s "(cached) " >&6
++else $as_nop
+   ac_check_lib_save_LIBS=$LIBS
+ LIBS="-l$casc_lib $MPILIBDIRS $MPILIBS $LIBS"
+-cat >conftest.$ac_ext <<_ACEOF
+-/* confdefs.h.  */
+-_ACEOF
+-cat confdefs.h >>conftest.$ac_ext
+-cat >>conftest.$ac_ext <<_ACEOF
++cat confdefs.h - <<_ACEOF >conftest.$ac_ext
+ /* end confdefs.h.  */
+ 
+ 
+@@ -18577,66 +16234,44 @@ cat >>conftest.$ac_ext <<_ACEOF
+ 
+ #endif
+ int
+-main ()
++main (void)
+ {
+ return main ();
+   ;
+   return 0;
+ }
+ _ACEOF
+-rm -f conftest.$ac_objext conftest$ac_exeext
+-if { (ac_try="$ac_link"
+-case "(($ac_try" in
+-  *\"* | *\`* | *\\*) ac_try_echo=\$ac_try;;
+-  *) ac_try_echo=$ac_try;;
+-esac
+-eval "echo \"\$as_me:$LINENO: $ac_try_echo\"") >&5
+-  (eval "$ac_link") 2>conftest.er1
+-  ac_status=$?
+-  grep -v '^ *+' conftest.er1 >conftest.err
+-  rm -f conftest.er1
+-  cat conftest.err >&5
+-  echo "$as_me:$LINENO: \$? = $ac_status" >&5
+-  (exit $ac_status); } && {
+-	 test -z "$ac_c_werror_flag" ||
+-	 test ! -s conftest.err
+-       } && test -s conftest$ac_exeext &&
+-       $as_test_x conftest$ac_exeext; then
++if ac_fn_c_try_link "$LINENO"
++then :
+   eval "$as_ac_Lib=yes"
+-else
+-  echo "$as_me: failed program was:" >&5
+-sed 's/^/| /' conftest.$ac_ext >&5
+-
+-	eval "$as_ac_Lib=no"
++else $as_nop
++  eval "$as_ac_Lib=no"
+ fi
+-
+-rm -f core conftest.err conftest.$ac_objext conftest_ipa8_conftest.oo \
+-      conftest$ac_exeext conftest.$ac_ext
++rm -f core conftest.err conftest.$ac_objext conftest.beam \
++    conftest$ac_exeext conftest.$ac_ext
+ LIBS=$ac_check_lib_save_LIBS
+ fi
+-ac_res=`eval echo '${'$as_ac_Lib'}'`
+-	       { echo "$as_me:$LINENO: result: $ac_res" >&5
+-echo "${ECHO_T}$ac_res" >&6; }
+-if test `eval echo '${'$as_ac_Lib'}'` = yes; then
++eval ac_res=\$$as_ac_Lib
++	       { printf "%s\n" "$as_me:${as_lineno-$LINENO}: result: $ac_res" >&5
++printf "%s\n" "$ac_res" >&6; }
++if eval test \"x\$"$as_ac_Lib"\" = x"yes"
++then :
+   MPILIBS="$MPILIBS -l$casc_lib"
+                           casc_lib_found=yes
+ 
+-else
++else $as_nop
+         for casc_lib_dir in $casc_mpi_lib_dirs; do
+ 
+-         as_ac_Lib=`echo "ac_cv_lib_$casc_lib''_main" | $as_tr_sh`
+-{ echo "$as_me:$LINENO: checking for main in -l$casc_lib" >&5
+-echo $ECHO_N "checking for main in -l$casc_lib... $ECHO_C" >&6; }
+-if { as_var=$as_ac_Lib; eval "test \"\${$as_var+set}\" = set"; }; then
+-  echo $ECHO_N "(cached) $ECHO_C" >&6
+-else
++         as_ac_Lib=`printf "%s\n" "ac_cv_lib_$casc_lib""_main" | $as_tr_sh`
++{ printf "%s\n" "$as_me:${as_lineno-$LINENO}: checking for main in -l$casc_lib" >&5
++printf %s "checking for main in -l$casc_lib... " >&6; }
++if eval test \${$as_ac_Lib+y}
++then :
++  printf %s "(cached) " >&6
++else $as_nop
+   ac_check_lib_save_LIBS=$LIBS
+ LIBS="-l$casc_lib -L$casc_lib_dir $MPILIBDIRS $MPILIBS -l$casc_lib $LIBS"
+-cat >conftest.$ac_ext <<_ACEOF
+-/* confdefs.h.  */
+-_ACEOF
+-cat confdefs.h >>conftest.$ac_ext
+-cat >>conftest.$ac_ext <<_ACEOF
++cat confdefs.h - <<_ACEOF >conftest.$ac_ext
+ /* end confdefs.h.  */
+ 
+ 
+@@ -18649,47 +16284,28 @@ cat >>conftest.$ac_ext <<_ACEOF
+ 
+ #endif
+ int
+-main ()
++main (void)
+ {
+ return main ();
+   ;
+   return 0;
+ }
+ _ACEOF
+-rm -f conftest.$ac_objext conftest$ac_exeext
+-if { (ac_try="$ac_link"
+-case "(($ac_try" in
+-  *\"* | *\`* | *\\*) ac_try_echo=\$ac_try;;
+-  *) ac_try_echo=$ac_try;;
+-esac
+-eval "echo \"\$as_me:$LINENO: $ac_try_echo\"") >&5
+-  (eval "$ac_link") 2>conftest.er1
+-  ac_status=$?
+-  grep -v '^ *+' conftest.er1 >conftest.err
+-  rm -f conftest.er1
+-  cat conftest.err >&5
+-  echo "$as_me:$LINENO: \$? = $ac_status" >&5
+-  (exit $ac_status); } && {
+-	 test -z "$ac_c_werror_flag" ||
+-	 test ! -s conftest.err
+-       } && test -s conftest$ac_exeext &&
+-       $as_test_x conftest$ac_exeext; then
++if ac_fn_c_try_link "$LINENO"
++then :
+   eval "$as_ac_Lib=yes"
+-else
+-  echo "$as_me: failed program was:" >&5
+-sed 's/^/| /' conftest.$ac_ext >&5
+-
+-	eval "$as_ac_Lib=no"
++else $as_nop
++  eval "$as_ac_Lib=no"
+ fi
+-
+-rm -f core conftest.err conftest.$ac_objext conftest_ipa8_conftest.oo \
+-      conftest$ac_exeext conftest.$ac_ext
++rm -f core conftest.err conftest.$ac_objext conftest.beam \
++    conftest$ac_exeext conftest.$ac_ext
+ LIBS=$ac_check_lib_save_LIBS
+ fi
+-ac_res=`eval echo '${'$as_ac_Lib'}'`
+-	       { echo "$as_me:$LINENO: result: $ac_res" >&5
+-echo "${ECHO_T}$ac_res" >&6; }
+-if test `eval echo '${'$as_ac_Lib'}'` = yes; then
++eval ac_res=\$$as_ac_Lib
++	       { printf "%s\n" "$as_me:${as_lineno-$LINENO}: result: $ac_res" >&5
++printf "%s\n" "$ac_res" >&6; }
++if eval test \"x\$"$as_ac_Lib"\" = x"yes"
++then :
+   MPILIBDIRS="-L$casc_lib_dir $MPILIBDIRS"
+             MPILIBS="$MPILIBS -l$casc_lib"
+             casc_lib_found=yes
+@@ -18734,8 +16350,8 @@ fi
+    fi
+ 
+             if test -z "$MPILIBS"; then
+-             { echo "$as_me:$LINENO: WARNING: MPI not found - must set manually using --with flags" >&5
+-echo "$as_me: WARNING: MPI not found - must set manually using --with flags" >&2;}
++             { printf "%s\n" "$as_me:${as_lineno-$LINENO}: WARNING: MPI not found - must set manually using --with flags" >&5
++printf "%s\n" "$as_me: WARNING: MPI not found - must set manually using --with flags" >&2;}
+             fi
+ 
+ 
+@@ -18905,159 +16521,35 @@ EOF
+                -Y)
+                   casc_arg=`echo $casc_arg | sed -e 's%^P,%%'`
+                   SAVE_IFS=$IFS
+-                  IFS=:
+-                  casc_list=
+-                  for casc_elt in $casc_arg; do
+-                     casc_list="$casc_list -L$casc_elt"
+-                  done
+-                  IFS=$SAVE_IFS
+-                  casc_arg="$casc_list"
+-               ;;
+-               esac
+-
+-                                             if test -n "$casc_arg"; then
+-                  case $casc_arg in
+-                  -I*)
+-
+-                                                               if test -z "$MPIINCLUDE"; then
+-                        casc_cppflags="$casc_cppflags $casc_arg"
+-                        casc_include_dir=`echo "$casc_arg" | sed 's/-I//g'`
+-
+-                        SAVE_CPPFLAGS="$CPPFLAGS"
+-                        CPPFLAGS="$casc_cppflags"
+-
+-                        unset ac_cv_header_mpi_h
+-                        if test "${ac_cv_header_mpi_h+set}" = set; then
+-  { echo "$as_me:$LINENO: checking for mpi.h" >&5
+-echo $ECHO_N "checking for mpi.h... $ECHO_C" >&6; }
+-if test "${ac_cv_header_mpi_h+set}" = set; then
+-  echo $ECHO_N "(cached) $ECHO_C" >&6
+-fi
+-{ echo "$as_me:$LINENO: result: $ac_cv_header_mpi_h" >&5
+-echo "${ECHO_T}$ac_cv_header_mpi_h" >&6; }
+-else
+-  # Is the header compilable?
+-{ echo "$as_me:$LINENO: checking mpi.h usability" >&5
+-echo $ECHO_N "checking mpi.h usability... $ECHO_C" >&6; }
+-cat >conftest.$ac_ext <<_ACEOF
+-/* confdefs.h.  */
+-_ACEOF
+-cat confdefs.h >>conftest.$ac_ext
+-cat >>conftest.$ac_ext <<_ACEOF
+-/* end confdefs.h.  */
+-$ac_includes_default
+-#include <mpi.h>
+-_ACEOF
+-rm -f conftest.$ac_objext
+-if { (ac_try="$ac_compile"
+-case "(($ac_try" in
+-  *\"* | *\`* | *\\*) ac_try_echo=\$ac_try;;
+-  *) ac_try_echo=$ac_try;;
+-esac
+-eval "echo \"\$as_me:$LINENO: $ac_try_echo\"") >&5
+-  (eval "$ac_compile") 2>conftest.er1
+-  ac_status=$?
+-  grep -v '^ *+' conftest.er1 >conftest.err
+-  rm -f conftest.er1
+-  cat conftest.err >&5
+-  echo "$as_me:$LINENO: \$? = $ac_status" >&5
+-  (exit $ac_status); } && {
+-	 test -z "$ac_c_werror_flag" ||
+-	 test ! -s conftest.err
+-       } && test -s conftest.$ac_objext; then
+-  ac_header_compiler=yes
+-else
+-  echo "$as_me: failed program was:" >&5
+-sed 's/^/| /' conftest.$ac_ext >&5
+-
+-	ac_header_compiler=no
+-fi
+-
+-rm -f core conftest.err conftest.$ac_objext conftest.$ac_ext
+-{ echo "$as_me:$LINENO: result: $ac_header_compiler" >&5
+-echo "${ECHO_T}$ac_header_compiler" >&6; }
+-
+-# Is the header present?
+-{ echo "$as_me:$LINENO: checking mpi.h presence" >&5
+-echo $ECHO_N "checking mpi.h presence... $ECHO_C" >&6; }
+-cat >conftest.$ac_ext <<_ACEOF
+-/* confdefs.h.  */
+-_ACEOF
+-cat confdefs.h >>conftest.$ac_ext
+-cat >>conftest.$ac_ext <<_ACEOF
+-/* end confdefs.h.  */
+-#include <mpi.h>
+-_ACEOF
+-if { (ac_try="$ac_cpp conftest.$ac_ext"
+-case "(($ac_try" in
+-  *\"* | *\`* | *\\*) ac_try_echo=\$ac_try;;
+-  *) ac_try_echo=$ac_try;;
+-esac
+-eval "echo \"\$as_me:$LINENO: $ac_try_echo\"") >&5
+-  (eval "$ac_cpp conftest.$ac_ext") 2>conftest.er1
+-  ac_status=$?
+-  grep -v '^ *+' conftest.er1 >conftest.err
+-  rm -f conftest.er1
+-  cat conftest.err >&5
+-  echo "$as_me:$LINENO: \$? = $ac_status" >&5
+-  (exit $ac_status); } >/dev/null && {
+-	 test -z "$ac_c_preproc_warn_flag$ac_c_werror_flag" ||
+-	 test ! -s conftest.err
+-       }; then
+-  ac_header_preproc=yes
+-else
+-  echo "$as_me: failed program was:" >&5
+-sed 's/^/| /' conftest.$ac_ext >&5
+-
+-  ac_header_preproc=no
+-fi
++                  IFS=:
++                  casc_list=
++                  for casc_elt in $casc_arg; do
++                     casc_list="$casc_list -L$casc_elt"
++                  done
++                  IFS=$SAVE_IFS
++                  casc_arg="$casc_list"
++               ;;
++               esac
+ 
+-rm -f conftest.err conftest.$ac_ext
+-{ echo "$as_me:$LINENO: result: $ac_header_preproc" >&5
+-echo "${ECHO_T}$ac_header_preproc" >&6; }
++                                             if test -n "$casc_arg"; then
++                  case $casc_arg in
++                  -I*)
+ 
+-# So?  What about this header?
+-case $ac_header_compiler:$ac_header_preproc:$ac_c_preproc_warn_flag in
+-  yes:no: )
+-    { echo "$as_me:$LINENO: WARNING: mpi.h: accepted by the compiler, rejected by the preprocessor!" >&5
+-echo "$as_me: WARNING: mpi.h: accepted by the compiler, rejected by the preprocessor!" >&2;}
+-    { echo "$as_me:$LINENO: WARNING: mpi.h: proceeding with the compiler's result" >&5
+-echo "$as_me: WARNING: mpi.h: proceeding with the compiler's result" >&2;}
+-    ac_header_preproc=yes
+-    ;;
+-  no:yes:* )
+-    { echo "$as_me:$LINENO: WARNING: mpi.h: present but cannot be compiled" >&5
+-echo "$as_me: WARNING: mpi.h: present but cannot be compiled" >&2;}
+-    { echo "$as_me:$LINENO: WARNING: mpi.h:     check for missing prerequisite headers?" >&5
+-echo "$as_me: WARNING: mpi.h:     check for missing prerequisite headers?" >&2;}
+-    { echo "$as_me:$LINENO: WARNING: mpi.h: see the Autoconf documentation" >&5
+-echo "$as_me: WARNING: mpi.h: see the Autoconf documentation" >&2;}
+-    { echo "$as_me:$LINENO: WARNING: mpi.h:     section \"Present But Cannot Be Compiled\"" >&5
+-echo "$as_me: WARNING: mpi.h:     section \"Present But Cannot Be Compiled\"" >&2;}
+-    { echo "$as_me:$LINENO: WARNING: mpi.h: proceeding with the preprocessor's result" >&5
+-echo "$as_me: WARNING: mpi.h: proceeding with the preprocessor's result" >&2;}
+-    { echo "$as_me:$LINENO: WARNING: mpi.h: in the future, the compiler will take precedence" >&5
+-echo "$as_me: WARNING: mpi.h: in the future, the compiler will take precedence" >&2;}
++                                                               if test -z "$MPIINCLUDE"; then
++                        casc_cppflags="$casc_cppflags $casc_arg"
++                        casc_include_dir=`echo "$casc_arg" | sed 's/-I//g'`
+ 
+-    ;;
+-esac
+-{ echo "$as_me:$LINENO: checking for mpi.h" >&5
+-echo $ECHO_N "checking for mpi.h... $ECHO_C" >&6; }
+-if test "${ac_cv_header_mpi_h+set}" = set; then
+-  echo $ECHO_N "(cached) $ECHO_C" >&6
+-else
+-  ac_cv_header_mpi_h=$ac_header_preproc
+-fi
+-{ echo "$as_me:$LINENO: result: $ac_cv_header_mpi_h" >&5
+-echo "${ECHO_T}$ac_cv_header_mpi_h" >&6; }
++                        SAVE_CPPFLAGS="$CPPFLAGS"
++                        CPPFLAGS="$casc_cppflags"
+ 
+-fi
+-if test $ac_cv_header_mpi_h = yes; then
++                        unset ac_cv_header_mpi_h
++                        ac_fn_c_check_header_compile "$LINENO" "mpi.h" "ac_cv_header_mpi_h" "$ac_includes_default"
++if test "x$ac_cv_header_mpi_h" = xyes
++then :
+   MPIINCLUDE="$casc_cppflags"
+ fi
+ 
+ 
+-
+                                                 CPPFLAGS="$SAVE_CPPFLAGS"
+ 
+                      else
+@@ -19097,11 +16589,7 @@ ac_compile='$CC -c $CFLAGS $CPPFLAGS conftest.$ac_ext >&5'
+ ac_link='$CC -o conftest$ac_exeext $CFLAGS $CPPFLAGS $LDFLAGS conftest.$ac_ext $LIBS >&5'
+ ac_compiler_gnu=$ac_cv_c_compiler_gnu
+ 
+-                  cat >conftest.$ac_ext <<_ACEOF
+-/* confdefs.h.  */
+-_ACEOF
+-cat confdefs.h >>conftest.$ac_ext
+-cat >>conftest.$ac_ext <<_ACEOF
++                  cat confdefs.h - <<_ACEOF >conftest.$ac_ext
+ /* end confdefs.h.  */
+ 
+ #include "mpi.h"
+@@ -19115,7 +16603,7 @@ cat >>conftest.$ac_ext <<_ACEOF
+ 
+ #endif
+ int
+-main ()
++main (void)
+ {
+ int rank, size;
+    int argc;
+@@ -19129,34 +16617,12 @@ int rank, size;
+   return 0;
+ }
+ _ACEOF
+-rm -f conftest.$ac_objext conftest$ac_exeext
+-if { (ac_try="$ac_link"
+-case "(($ac_try" in
+-  *\"* | *\`* | *\\*) ac_try_echo=\$ac_try;;
+-  *) ac_try_echo=$ac_try;;
+-esac
+-eval "echo \"\$as_me:$LINENO: $ac_try_echo\"") >&5
+-  (eval "$ac_link") 2>conftest.er1
+-  ac_status=$?
+-  grep -v '^ *+' conftest.er1 >conftest.err
+-  rm -f conftest.er1
+-  cat conftest.err >&5
+-  echo "$as_me:$LINENO: \$? = $ac_status" >&5
+-  (exit $ac_status); } && {
+-	 test -z "$ac_c_werror_flag" ||
+-	 test ! -s conftest.err
+-       } && test -s conftest$ac_exeext &&
+-       $as_test_x conftest$ac_exeext; then
++if ac_fn_c_try_link "$LINENO"
++then :
+   casc_result=yes
+-else
+-  echo "$as_me: failed program was:" >&5
+-sed 's/^/| /' conftest.$ac_ext >&5
+-
+-
+ fi
+-
+-rm -f core conftest.err conftest.$ac_objext conftest_ipa8_conftest.oo \
+-      conftest$ac_exeext conftest.$ac_ext
++rm -f core conftest.err conftest.$ac_objext conftest.beam \
++    conftest$ac_exeext conftest.$ac_ext
+                   ac_ext=c
+ ac_cpp='$CPP $CPPFLAGS'
+ ac_compile='$CC -c $CFLAGS $CPPFLAGS conftest.$ac_ext >&5'
+@@ -19187,11 +16653,7 @@ ac_compile='$CC -c $CFLAGS $CPPFLAGS conftest.$ac_ext >&5'
+ ac_link='$CC -o conftest$ac_exeext $CFLAGS $CPPFLAGS $LDFLAGS conftest.$ac_ext $LIBS >&5'
+ ac_compiler_gnu=$ac_cv_c_compiler_gnu
+ 
+-                  cat >conftest.$ac_ext <<_ACEOF
+-/* confdefs.h.  */
+-_ACEOF
+-cat confdefs.h >>conftest.$ac_ext
+-cat >>conftest.$ac_ext <<_ACEOF
++                  cat confdefs.h - <<_ACEOF >conftest.$ac_ext
+ /* end confdefs.h.  */
+ 
+ #include "mpi.h"
+@@ -19205,7 +16667,7 @@ cat >>conftest.$ac_ext <<_ACEOF
+ 
+ #endif
+ int
+-main ()
++main (void)
+ {
+ int rank, size;
+    int argc;
+@@ -19219,34 +16681,12 @@ int rank, size;
+   return 0;
+ }
+ _ACEOF
+-rm -f conftest.$ac_objext conftest$ac_exeext
+-if { (ac_try="$ac_link"
+-case "(($ac_try" in
+-  *\"* | *\`* | *\\*) ac_try_echo=\$ac_try;;
+-  *) ac_try_echo=$ac_try;;
+-esac
+-eval "echo \"\$as_me:$LINENO: $ac_try_echo\"") >&5
+-  (eval "$ac_link") 2>conftest.er1
+-  ac_status=$?
+-  grep -v '^ *+' conftest.er1 >conftest.err
+-  rm -f conftest.er1
+-  cat conftest.err >&5
+-  echo "$as_me:$LINENO: \$? = $ac_status" >&5
+-  (exit $ac_status); } && {
+-	 test -z "$ac_c_werror_flag" ||
+-	 test ! -s conftest.err
+-       } && test -s conftest$ac_exeext &&
+-       $as_test_x conftest$ac_exeext; then
++if ac_fn_c_try_link "$LINENO"
++then :
+   MPILIBS="$MPILIBS -lpthread"
+-else
+-  echo "$as_me: failed program was:" >&5
+-sed 's/^/| /' conftest.$ac_ext >&5
+-
+-
+ fi
+-
+-rm -f core conftest.err conftest.$ac_objext conftest_ipa8_conftest.oo \
+-      conftest$ac_exeext conftest.$ac_ext
++rm -f core conftest.err conftest.$ac_objext conftest.beam \
++    conftest$ac_exeext conftest.$ac_ext
+                   ac_ext=c
+ ac_cpp='$CPP $CPPFLAGS'
+ ac_compile='$CC -c $CFLAGS $CPPFLAGS conftest.$ac_ext >&5'
+@@ -19256,46 +16696,50 @@ ac_compiler_gnu=$ac_cv_c_compiler_gnu
+                   LIBS=$LIBS_SAVE
+             fi
+ 
+-            { echo "$as_me:$LINENO: checking for MPI include directories" >&5
+-echo $ECHO_N "checking for MPI include directories... $ECHO_C" >&6; }
+-            { echo "$as_me:$LINENO: result: $MPIINCLUDE" >&5
+-echo "${ECHO_T}$MPIINCLUDE" >&6; }
+-            { echo "$as_me:$LINENO: checking for MPI library directories" >&5
+-echo $ECHO_N "checking for MPI library directories... $ECHO_C" >&6; }
+-            { echo "$as_me:$LINENO: result: $MPILIBDIRS" >&5
+-echo "${ECHO_T}$MPILIBDIRS" >&6; }
+-            { echo "$as_me:$LINENO: checking for MPI libraries" >&5
+-echo $ECHO_N "checking for MPI libraries... $ECHO_C" >&6; }
+-            { echo "$as_me:$LINENO: result: $MPILIBS" >&5
+-echo "${ECHO_T}$MPILIBS" >&6; }
+-            { echo "$as_me:$LINENO: checking for other MPI-related flags" >&5
+-echo $ECHO_N "checking for other MPI-related flags... $ECHO_C" >&6; }
+-            { echo "$as_me:$LINENO: result: $MPIFLAGS" >&5
+-echo "${ECHO_T}$MPIFLAGS" >&6; }
++            { printf "%s\n" "$as_me:${as_lineno-$LINENO}: checking for MPI include directories" >&5
++printf %s "checking for MPI include directories... " >&6; }
++            { printf "%s\n" "$as_me:${as_lineno-$LINENO}: result: $MPIINCLUDE" >&5
++printf "%s\n" "$MPIINCLUDE" >&6; }
++            { printf "%s\n" "$as_me:${as_lineno-$LINENO}: checking for MPI library directories" >&5
++printf %s "checking for MPI library directories... " >&6; }
++            { printf "%s\n" "$as_me:${as_lineno-$LINENO}: result: $MPILIBDIRS" >&5
++printf "%s\n" "$MPILIBDIRS" >&6; }
++            { printf "%s\n" "$as_me:${as_lineno-$LINENO}: checking for MPI libraries" >&5
++printf %s "checking for MPI libraries... " >&6; }
++            { printf "%s\n" "$as_me:${as_lineno-$LINENO}: result: $MPILIBS" >&5
++printf "%s\n" "$MPILIBS" >&6; }
++            { printf "%s\n" "$as_me:${as_lineno-$LINENO}: checking for other MPI-related flags" >&5
++printf %s "checking for other MPI-related flags... " >&6; }
++            { printf "%s\n" "$as_me:${as_lineno-$LINENO}: result: $MPIFLAGS" >&5
++printf "%s\n" "$MPIFLAGS" >&6; }
+          fi
+       fi
+ 
+-      if test "${casc_cv_mpi_include+set}" = set; then
+-  echo $ECHO_N "(cached) $ECHO_C" >&6
+-else
++      if test ${casc_cv_mpi_include+y}
++then :
++  printf %s "(cached) " >&6
++else $as_nop
+   casc_cv_mpi_include=$MPIINCLUDE
+ fi
+ 
+-      if test "${casc_cv_mpi_lib_dirs+set}" = set; then
+-  echo $ECHO_N "(cached) $ECHO_C" >&6
+-else
++      if test ${casc_cv_mpi_lib_dirs+y}
++then :
++  printf %s "(cached) " >&6
++else $as_nop
+   casc_cv_mpi_lib_dirs=$MPILIBDIRS
+ fi
+ 
+-      if test "${casc_cv_mpi_libs+set}" = set; then
+-  echo $ECHO_N "(cached) $ECHO_C" >&6
+-else
++      if test ${casc_cv_mpi_libs+y}
++then :
++  printf %s "(cached) " >&6
++else $as_nop
+   casc_cv_mpi_libs=$MPILIBS
+ fi
+ 
+-      if test "${casc_cv_mpi_flags+set}" = set; then
+-  echo $ECHO_N "(cached) $ECHO_C" >&6
+-else
++      if test ${casc_cv_mpi_flags+y}
++then :
++  printf %s "(cached) " >&6
++else $as_nop
+   casc_cv_mpi_flags=$MPIFLAGS
+ fi
+ 
+@@ -19313,9 +16757,7 @@ fi
+    if test -n "$MPIINCLUDE" -o -n "$MPILIBS" -o -n "$MPILIBDIRS"; then
+       with_mpi=yes
+ 
+-cat >>confdefs.h <<\_ACEOF
+-#define HAVE_MPI 1
+-_ACEOF
++printf "%s\n" "#define HAVE_MPI 1" >>confdefs.h
+ 
+       INC_PATH="$MPIINCLUDE $INC_PATH"
+       LIB_NAME="$MPILIBS $LIB_NAME"
+@@ -19330,7 +16772,7 @@ for btng_log_vars_index in $btng_log_vars ; do
+   else
+     btng_log_vars_value="unset";
+   fi
+-  echo "configure:19333:" "After successfully finding MPI using casc_find_mpi: $btng_log_vars_index is $btng_log_vars_value" >&5;
++  echo "configure:16775:" "After successfully finding MPI using casc_find_mpi: $btng_log_vars_index is $btng_log_vars_value" >&5;
+ done
+ 
+ 
+@@ -19346,7 +16788,7 @@ for btng_log_vars_index in $btng_log_vars ; do
+   else
+     btng_log_vars_value="unset";
+   fi
+-  echo "configure:19349:" "$btng_log_vars_index is $btng_log_vars_value" >&5;
++  echo "configure:16791:" "$btng_log_vars_index is $btng_log_vars_value" >&5;
+ done
+ 
+ 
+@@ -19359,51 +16801,50 @@ done
+ # Defines hdf5_PREFIX hdf5_INCLUDES and hdf5_LIBS if with-hdf5 is specified.
+ 
+ # Check whether --with-hdf5 was given.
+-if test "${with_hdf5+set}" = set; then
++if test ${with_hdf5+y}
++then :
+   withval=$with_hdf5;
+-else
++else $as_nop
+   with_hdf5=no
+ fi
+ 
+ 
+ case "$with_hdf5" in
+   no)
+-    { echo "$as_me:$LINENO: configuring without HDF5 support" >&5
+-echo "$as_me: configuring without HDF5 support" >&6;}
++    { printf "%s\n" "$as_me:${as_lineno-$LINENO}: configuring without HDF5 support" >&5
++printf "%s\n" "$as_me: configuring without HDF5 support" >&6;}
+     : Do nothing
+   ;;
+   yes)
+     # HDF5 install path was not specified.
+     # Look in a couple of standard locations to probe if
+     # HDF5 header files are there.
+-    { echo "$as_me:$LINENO: checking for HDF5 installation" >&5
+-echo $ECHO_N "checking for HDF5 installation... $ECHO_C" >&6; }
++    { printf "%s\n" "$as_me:${as_lineno-$LINENO}: checking for HDF5 installation" >&5
++printf %s "checking for HDF5 installation... " >&6; }
+     for dir in /usr /usr/local; do
+       if test -f ${dir}/include/hdf5.h; then
+         hdf5_PREFIX=${dir}
+         break
+       fi
+     done
+-    { echo "$as_me:$LINENO: result: $hdf5_PREFIX" >&5
+-echo "${ECHO_T}$hdf5_PREFIX" >&6; }
++    { printf "%s\n" "$as_me:${as_lineno-$LINENO}: result: $hdf5_PREFIX" >&5
++printf "%s\n" "$hdf5_PREFIX" >&6; }
+   ;;
+   *)
+     # HDF5 install path was specified.
+-    { echo "$as_me:$LINENO: checking for HDF5 installation" >&5
+-echo $ECHO_N "checking for HDF5 installation... $ECHO_C" >&6; }
++    { printf "%s\n" "$as_me:${as_lineno-$LINENO}: checking for HDF5 installation" >&5
++printf %s "checking for HDF5 installation... " >&6; }
+ 
+     if test -f ${with_hdf5}/include/hdf5.h; then
+         hdf5_PREFIX=$with_hdf5
+         hdf5_INCLUDES="-I${hdf5_PREFIX}/include"
+         hdf5_LIBS="-L${hdf5_PREFIX}/lib -lhdf5"
+-        { echo "$as_me:$LINENO: result: $hdf5_PREFIX" >&5
+-echo "${ECHO_T}$hdf5_PREFIX" >&6; }
++        { printf "%s\n" "$as_me:${as_lineno-$LINENO}: result: $hdf5_PREFIX" >&5
++printf "%s\n" "$hdf5_PREFIX" >&6; }
+     else
+-        { echo "$as_me:$LINENO: result: $hdf5_PREFIX" >&5
+-echo "${ECHO_T}$hdf5_PREFIX" >&6; }
+-        { { echo "$as_me:$LINENO: error: HDF5 not found in $with_hdf5" >&5
+-echo "$as_me: error: HDF5 not found in $with_hdf5" >&2;}
+-   { (exit 1); exit 1; }; }
++        { printf "%s\n" "$as_me:${as_lineno-$LINENO}: result: $hdf5_PREFIX" >&5
++printf "%s\n" "$hdf5_PREFIX" >&6; }
++        as_fn_error $? "HDF5 not found in $with_hdf5" "$LINENO" 5
+     fi
+   ;;
+ esac
+@@ -19418,8 +16859,8 @@ esac
+ if test "${hdf5_PREFIX+set}" = set; then
+ 
+ 
+-   { echo "$as_me:$LINENO: checking whether HDF5 link works" >&5
+-echo $ECHO_N "checking whether HDF5 link works... $ECHO_C" >&6; }
++   { printf "%s\n" "$as_me:${as_lineno-$LINENO}: checking whether HDF5 link works" >&5
++printf %s "checking whether HDF5 link works... " >&6; }
+    ac_ext=cpp
+ ac_cpp='$CXXCPP $CPPFLAGS'
+ ac_compile='$CXX -c $CXXFLAGS $CPPFLAGS conftest.$ac_ext >&5'
+@@ -19433,7 +16874,8 @@ ac_compiler_gnu=$ac_cv_cxx_compiler_gnu
+    # NOTE lib z and m were from BTNG macro.
+    LIBS="${LIBS} ${hdf5_LIBS} $libz_LIBS -lm "
+    CXXFLAGS="${CXXFLAGS} ${hdf5_INCLUDES}"
+-   cat >conftest.$ac_ext <<_ACEOF
++   cat confdefs.h - <<_ACEOF >conftest.$ac_ext
++/* end confdefs.h.  */
+ 
+       #include "hdf5.h"
+       #define FILE "file.h5"
+@@ -19451,34 +16893,14 @@ ac_compiler_gnu=$ac_cv_cxx_compiler_gnu
+      }
+ 
+ _ACEOF
+-rm -f conftest.$ac_objext conftest$ac_exeext
+-if { (ac_try="$ac_link"
+-case "(($ac_try" in
+-  *\"* | *\`* | *\\*) ac_try_echo=\$ac_try;;
+-  *) ac_try_echo=$ac_try;;
+-esac
+-eval "echo \"\$as_me:$LINENO: $ac_try_echo\"") >&5
+-  (eval "$ac_link") 2>conftest.er1
+-  ac_status=$?
+-  grep -v '^ *+' conftest.er1 >conftest.err
+-  rm -f conftest.er1
+-  cat conftest.err >&5
+-  echo "$as_me:$LINENO: \$? = $ac_status" >&5
+-  (exit $ac_status); } && {
+-	 test -z "$ac_cxx_werror_flag" ||
+-	 test ! -s conftest.err
+-       } && test -s conftest$ac_exeext &&
+-       $as_test_x conftest$ac_exeext; then
++if ac_fn_cxx_try_link "$LINENO"
++then :
+   casc_hdf5_compile=yes
+-else
+-  echo "$as_me: failed program was:" >&5
+-sed 's/^/| /' conftest.$ac_ext >&5
+-
+-	casc_hdf5_compile=no
++else $as_nop
++  casc_hdf5_compile=no
+ fi
+-
+-rm -f core conftest.err conftest.$ac_objext conftest_ipa8_conftest.oo \
+-      conftest$ac_exeext conftest.$ac_ext
++rm -f core conftest.err conftest.$ac_objext conftest.beam \
++    conftest$ac_exeext conftest.$ac_ext
+ 
+    LIBS=$casc_save_LIBS
+    unset casc_save_LIBS
+@@ -19491,13 +16913,11 @@ ac_compile='$CC -c $CFLAGS $CPPFLAGS conftest.$ac_ext >&5'
+ ac_link='$CC -o conftest$ac_exeext $CFLAGS $CPPFLAGS $LDFLAGS conftest.$ac_ext $LIBS >&5'
+ ac_compiler_gnu=$ac_cv_c_compiler_gnu
+ 
+-   { echo "$as_me:$LINENO: result: $casc_hdf5_compile" >&5
+-echo "${ECHO_T}$casc_hdf5_compile" >&6; }
++   { printf "%s\n" "$as_me:${as_lineno-$LINENO}: result: $casc_hdf5_compile" >&5
++printf "%s\n" "$casc_hdf5_compile" >&6; }
+ 
+    if test "$casc_hdf5_compile" = no; then
+-      { { echo "$as_me:$LINENO: error: HDF5 compile/link test failed" >&5
+-echo "$as_me: error: HDF5 compile/link test failed" >&2;}
+-   { (exit 1); exit 1; }; }
++      as_fn_error $? "HDF5 compile/link test failed" "$LINENO" 5
+    fi
+ fi
+ 
+@@ -19521,15 +16941,11 @@ fi
+   LIB_NAME="$hdf5_LIB_NAME $LIB_NAME"
+   INC_PATH="$hdf5_INCLUDES $INC_PATH"
+ 
+-cat >>confdefs.h <<\_ACEOF
+-#define HAVE_HDF5 1
+-_ACEOF
++printf "%s\n" "#define HAVE_HDF5 1" >>confdefs.h
+ 
+ else
+   if test ! "$with_hdf5" = no; then
+-   { { echo "$as_me:$LINENO: error: HDF5 not found - either specify a valid location via --with-hdf5=PATH or if you do not have HDF5 use --without-hdf5.  Note: if you do not have HDF5 you will not be able to use SAMRAI's VisIt Data writer and the VisIt visualization package." >&5
+-echo "$as_me: error: HDF5 not found - either specify a valid location via --with-hdf5=PATH or if you do not have HDF5 use --without-hdf5.  Note: if you do not have HDF5 you will not be able to use SAMRAI's VisIt Data writer and the VisIt visualization package." >&2;}
+-   { (exit 1); exit 1; }; }
++   as_fn_error $? "HDF5 not found - either specify a valid location via --with-hdf5=PATH or if you do not have HDF5 use --without-hdf5.  Note: if you do not have HDF5 you will not be able to use SAMRAI's VisIt Data writer and the VisIt visualization package." "$LINENO" 5
+   fi
+ fi
+ 
+@@ -19542,7 +16958,7 @@ for btng_log_vars_index in $btng_log_vars ; do
+   else
+     btng_log_vars_value="unset";
+   fi
+-  echo "configure:19545:" "$btng_log_vars_index is $btng_log_vars_value" >&5;
++  echo "configure:16961:" "$btng_log_vars_index is $btng_log_vars_value" >&5;
+ done
+ 
+ 
+@@ -19553,71 +16969,68 @@ done
+ # Defines silo_PREFIX silo_INCLUDES and silo_LIBS if with-silo is specified.
+ 
+ # Check whether --with-silo was given.
+-if test "${with_silo+set}" = set; then
++if test ${with_silo+y}
++then :
+   withval=$with_silo;
+-else
++else $as_nop
+   with_silo=no
+ fi
+ 
+ 
+ case "$with_silo" in
+   no)
+-    { echo "$as_me:$LINENO: configuring without SILO support" >&5
+-echo "$as_me: configuring without SILO support" >&6;}
++    { printf "%s\n" "$as_me:${as_lineno-$LINENO}: configuring without SILO support" >&5
++printf "%s\n" "$as_me: configuring without SILO support" >&6;}
+     : Do nothing
+   ;;
+   yes)
+     # SILO install path was not specified.
+     # Look in a couple of standard locations to probe if
+     # SILO header files are there.
+-    { echo "$as_me:$LINENO: checking for SILO installation" >&5
+-echo $ECHO_N "checking for SILO installation... $ECHO_C" >&6; }
++    { printf "%s\n" "$as_me:${as_lineno-$LINENO}: checking for SILO installation" >&5
++printf %s "checking for SILO installation... " >&6; }
+     for dir in /usr /usr/local; do
+       if test -f ${dir}/include/silo.h; then
+         silo_PREFIX=${dir}
+         break
+       fi
+     done
+-    { echo "$as_me:$LINENO: result: $silo_PREFIX" >&5
+-echo "${ECHO_T}$silo_PREFIX" >&6; }
++    { printf "%s\n" "$as_me:${as_lineno-$LINENO}: result: $silo_PREFIX" >&5
++printf "%s\n" "$silo_PREFIX" >&6; }
+   ;;
+   *)
+     # SILO install path was specified.
+-    { echo "$as_me:$LINENO: checking for SILO installation" >&5
+-echo $ECHO_N "checking for SILO installation... $ECHO_C" >&6; }
++    { printf "%s\n" "$as_me:${as_lineno-$LINENO}: checking for SILO installation" >&5
++printf %s "checking for SILO installation... " >&6; }
+     silo_PREFIX=$with_silo
+     silo_INCLUDES="-I${silo_PREFIX}/include"
+     if test -f ${silo_PREFIX}/include/silo.h; then
+-        { echo "$as_me:$LINENO: result: $silo_PREFIX" >&5
+-echo "${ECHO_T}$silo_PREFIX" >&6; }
++        { printf "%s\n" "$as_me:${as_lineno-$LINENO}: result: $silo_PREFIX" >&5
++printf "%s\n" "$silo_PREFIX" >&6; }
+     else
+-        { echo "$as_me:$LINENO: result: $silo_PREFIX" >&5
+-echo "${ECHO_T}$silo_PREFIX" >&6; }
+-        { { echo "$as_me:$LINENO: error: SILO not found in $with_silo" >&5
+-echo "$as_me: error: SILO not found in $with_silo" >&2;}
+-   { (exit 1); exit 1; }; }
++        { printf "%s\n" "$as_me:${as_lineno-$LINENO}: result: $silo_PREFIX" >&5
++printf "%s\n" "$silo_PREFIX" >&6; }
++        as_fn_error $? "SILO not found in $with_silo" "$LINENO" 5
+     fi
+   ;;
+ esac
+ 
+ # Determine which SILO library is built
+ if test "${silo_PREFIX+set}" = set; then
+-   { echo "$as_me:$LINENO: checking for SILO library" >&5
+-echo $ECHO_N "checking for SILO library... $ECHO_C" >&6; }
++   { printf "%s\n" "$as_me:${as_lineno-$LINENO}: checking for SILO library" >&5
++printf %s "checking for SILO library... " >&6; }
+    if test -f ${silo_PREFIX}/lib/libsilo.a; then
+       silo_LIBS='-lsilo'
+-      { echo "$as_me:$LINENO: result: using $silo_LIBS" >&5
+-echo "${ECHO_T}using $silo_LIBS" >&6; }
++      { printf "%s\n" "$as_me:${as_lineno-$LINENO}: result: using $silo_LIBS" >&5
++printf "%s\n" "using $silo_LIBS" >&6; }
+    elif test -f ${silo_PREFIX}/lib/libsiloh5.a; then
+       silo_LIBS='-lsiloh5'
+-      { echo "$as_me:$LINENO: result: using $silo_LIBS" >&5
+-echo "${ECHO_T}using $silo_LIBS" >&6; }
++      { printf "%s\n" "$as_me:${as_lineno-$LINENO}: result: using $silo_LIBS" >&5
++printf "%s\n" "using $silo_LIBS" >&6; }
+    else
+-      { echo "$as_me:$LINENO: result: using $silo_LIBS" >&5
+-echo "${ECHO_T}using $silo_LIBS" >&6; }
+-      { { echo "$as_me:$LINENO: error: Could not fine silo library in $silo_PREFIX" >&5
+-echo "$as_me: error: Could not fine silo library in $silo_PREFIX" >&2;}
+-   { (exit 1); exit 1; }; }
++      { printf "%s\n" "$as_me:${as_lineno-$LINENO}: result: using $silo_LIBS" >&5
++printf "%s\n" "using $silo_LIBS" >&6; }
++      as_fn_error $? "Could not fine silo library in $silo_PREFIX" "$LINENO" 5
+    fi
+ 
+    silo_LIBS="-L${silo_PREFIX}/lib ${silo_LIBS}"
+@@ -19643,9 +17056,7 @@ fi
+   LIB_NAME="$silo_LIB_NAME $LIB_NAME"
+   INC_PATH="$silo_INCLUDES $INC_PATH"
+ 
+-cat >>confdefs.h <<\_ACEOF
+-#define HAVE_SILO 1
+-_ACEOF
++printf "%s\n" "#define HAVE_SILO 1" >>confdefs.h
+ 
+ fi
+ 
+@@ -19658,7 +17069,7 @@ for btng_log_vars_index in $btng_log_vars ; do
+   else
+     btng_log_vars_value="unset";
+   fi
+-  echo "configure:19661:" "$btng_log_vars_index is $btng_log_vars_value" >&5;
++  echo "configure:17072:" "$btng_log_vars_index is $btng_log_vars_value" >&5;
+ done
+ 
+ 
+@@ -19667,15 +17078,17 @@ done
+ # Begin macro BTNG_SUPPORT_HYPRE
+ 
+ # Start macro BTNG_ARG_WITH_ENV_WRAPPER with args hypre and hypre_PREFIX
+-{ echo "$as_me:$LINENO: checking for hypre" >&5
+-echo $ECHO_N "checking for hypre... $ECHO_C" >&6; }
+-if test "${btng_cv_prog_hypre+set}" = set; then
+-  echo $ECHO_N "(cached) $ECHO_C" >&6
+-else
++{ printf "%s\n" "$as_me:${as_lineno-$LINENO}: checking for hypre" >&5
++printf %s "checking for hypre... " >&6; }
++if test ${btng_cv_prog_hypre+y}
++then :
++  printf %s "(cached) " >&6
++else $as_nop
+ 
+ 
+ # Check whether --with-hypre was given.
+-if test "${with_hypre+set}" = set; then
++if test ${with_hypre+y}
++then :
+   withval=$with_hypre;
+ fi
+ 
+@@ -19716,8 +17129,8 @@ if test "${hypre_PREFIX+set}" = set ; then
+ fi
+ 
+ fi
+-{ echo "$as_me:$LINENO: result: $btng_cv_prog_hypre" >&5
+-echo "${ECHO_T}$btng_cv_prog_hypre" >&6; }
++{ printf "%s\n" "$as_me:${as_lineno-$LINENO}: result: $btng_cv_prog_hypre" >&5
++printf "%s\n" "$btng_cv_prog_hypre" >&6; }
+ # Set hypre_PREFIX from cache.
+ # hypre_PREFIX is not yet set if we grabbed it from cache.
+ if test "${btng_cv_prog_hypre+set}" = set ; then
+@@ -19740,8 +17153,8 @@ if test "${hypre_PREFIX+set}" = set ; then
+ 	tmp_name=`echo $i | sed 's/^-l//'`
+         if test ! -f "${hypre_PREFIX}/lib/lib${tmp_name}.a" && \
+           test ! -f "${hypre_PREFIX}/lib/lib${tmp_name}.so"; then
+-          { echo "$as_me:$LINENO: WARNING: Library file for ${tmp_name} is missing from ${hypre_PREFIX}/lib." >&5
+-echo "$as_me: WARNING: Library file for ${tmp_name} is missing from ${hypre_PREFIX}/lib." >&2;}
++          { printf "%s\n" "$as_me:${as_lineno-$LINENO}: WARNING: Library file for ${tmp_name} is missing from ${hypre_PREFIX}/lib." >&5
++printf "%s\n" "$as_me: WARNING: Library file for ${tmp_name} is missing from ${hypre_PREFIX}/lib." >&2;}
+         fi
+       done
+       hypre_LIBS="-L${hypre_PREFIX}/lib ${hypre_LIBS}"
+@@ -19760,7 +17173,7 @@ for btng_log_vars_index in $btng_log_vars ; do
+   else
+     btng_log_vars_value="unset";
+   fi
+-  echo "configure:19763:" "$btng_log_vars_index is $btng_log_vars_value" >&5;
++  echo "configure:17176:" "$btng_log_vars_index is $btng_log_vars_value" >&5;
+ done
+ 
+ 
+@@ -19779,155 +17192,25 @@ for btng_log_vars_index in $btng_log_vars ; do
+   else
+     btng_log_vars_value="unset";
+   fi
+-  echo "configure:19782:" "$btng_log_vars_index is $btng_log_vars_value" >&5;
++  echo "configure:17195:" "$btng_log_vars_index is $btng_log_vars_value" >&5;
+ done
+ 
+ 
+ 
+   # Check if HYPRE header is ok.
+-  if test "${ac_cv_header_HYPRE_config_h+set}" = set; then
+-  { echo "$as_me:$LINENO: checking for HYPRE_config.h" >&5
+-echo $ECHO_N "checking for HYPRE_config.h... $ECHO_C" >&6; }
+-if test "${ac_cv_header_HYPRE_config_h+set}" = set; then
+-  echo $ECHO_N "(cached) $ECHO_C" >&6
+-fi
+-{ echo "$as_me:$LINENO: result: $ac_cv_header_HYPRE_config_h" >&5
+-echo "${ECHO_T}$ac_cv_header_HYPRE_config_h" >&6; }
+-else
+-  # Is the header compilable?
+-{ echo "$as_me:$LINENO: checking HYPRE_config.h usability" >&5
+-echo $ECHO_N "checking HYPRE_config.h usability... $ECHO_C" >&6; }
+-cat >conftest.$ac_ext <<_ACEOF
+-/* confdefs.h.  */
+-_ACEOF
+-cat confdefs.h >>conftest.$ac_ext
+-cat >>conftest.$ac_ext <<_ACEOF
+-/* end confdefs.h.  */
+-$ac_includes_default
+-#include <HYPRE_config.h>
+-_ACEOF
+-rm -f conftest.$ac_objext
+-if { (ac_try="$ac_compile"
+-case "(($ac_try" in
+-  *\"* | *\`* | *\\*) ac_try_echo=\$ac_try;;
+-  *) ac_try_echo=$ac_try;;
+-esac
+-eval "echo \"\$as_me:$LINENO: $ac_try_echo\"") >&5
+-  (eval "$ac_compile") 2>conftest.er1
+-  ac_status=$?
+-  grep -v '^ *+' conftest.er1 >conftest.err
+-  rm -f conftest.er1
+-  cat conftest.err >&5
+-  echo "$as_me:$LINENO: \$? = $ac_status" >&5
+-  (exit $ac_status); } && {
+-	 test -z "$ac_c_werror_flag" ||
+-	 test ! -s conftest.err
+-       } && test -s conftest.$ac_objext; then
+-  ac_header_compiler=yes
+-else
+-  echo "$as_me: failed program was:" >&5
+-sed 's/^/| /' conftest.$ac_ext >&5
+-
+-	ac_header_compiler=no
+-fi
+-
+-rm -f core conftest.err conftest.$ac_objext conftest.$ac_ext
+-{ echo "$as_me:$LINENO: result: $ac_header_compiler" >&5
+-echo "${ECHO_T}$ac_header_compiler" >&6; }
+-
+-# Is the header present?
+-{ echo "$as_me:$LINENO: checking HYPRE_config.h presence" >&5
+-echo $ECHO_N "checking HYPRE_config.h presence... $ECHO_C" >&6; }
+-cat >conftest.$ac_ext <<_ACEOF
+-/* confdefs.h.  */
+-_ACEOF
+-cat confdefs.h >>conftest.$ac_ext
+-cat >>conftest.$ac_ext <<_ACEOF
+-/* end confdefs.h.  */
+-#include <HYPRE_config.h>
+-_ACEOF
+-if { (ac_try="$ac_cpp conftest.$ac_ext"
+-case "(($ac_try" in
+-  *\"* | *\`* | *\\*) ac_try_echo=\$ac_try;;
+-  *) ac_try_echo=$ac_try;;
+-esac
+-eval "echo \"\$as_me:$LINENO: $ac_try_echo\"") >&5
+-  (eval "$ac_cpp conftest.$ac_ext") 2>conftest.er1
+-  ac_status=$?
+-  grep -v '^ *+' conftest.er1 >conftest.err
+-  rm -f conftest.er1
+-  cat conftest.err >&5
+-  echo "$as_me:$LINENO: \$? = $ac_status" >&5
+-  (exit $ac_status); } >/dev/null && {
+-	 test -z "$ac_c_preproc_warn_flag$ac_c_werror_flag" ||
+-	 test ! -s conftest.err
+-       }; then
+-  ac_header_preproc=yes
+-else
+-  echo "$as_me: failed program was:" >&5
+-sed 's/^/| /' conftest.$ac_ext >&5
+-
+-  ac_header_preproc=no
+-fi
+-
+-rm -f conftest.err conftest.$ac_ext
+-{ echo "$as_me:$LINENO: result: $ac_header_preproc" >&5
+-echo "${ECHO_T}$ac_header_preproc" >&6; }
+-
+-# So?  What about this header?
+-case $ac_header_compiler:$ac_header_preproc:$ac_c_preproc_warn_flag in
+-  yes:no: )
+-    { echo "$as_me:$LINENO: WARNING: HYPRE_config.h: accepted by the compiler, rejected by the preprocessor!" >&5
+-echo "$as_me: WARNING: HYPRE_config.h: accepted by the compiler, rejected by the preprocessor!" >&2;}
+-    { echo "$as_me:$LINENO: WARNING: HYPRE_config.h: proceeding with the compiler's result" >&5
+-echo "$as_me: WARNING: HYPRE_config.h: proceeding with the compiler's result" >&2;}
+-    ac_header_preproc=yes
+-    ;;
+-  no:yes:* )
+-    { echo "$as_me:$LINENO: WARNING: HYPRE_config.h: present but cannot be compiled" >&5
+-echo "$as_me: WARNING: HYPRE_config.h: present but cannot be compiled" >&2;}
+-    { echo "$as_me:$LINENO: WARNING: HYPRE_config.h:     check for missing prerequisite headers?" >&5
+-echo "$as_me: WARNING: HYPRE_config.h:     check for missing prerequisite headers?" >&2;}
+-    { echo "$as_me:$LINENO: WARNING: HYPRE_config.h: see the Autoconf documentation" >&5
+-echo "$as_me: WARNING: HYPRE_config.h: see the Autoconf documentation" >&2;}
+-    { echo "$as_me:$LINENO: WARNING: HYPRE_config.h:     section \"Present But Cannot Be Compiled\"" >&5
+-echo "$as_me: WARNING: HYPRE_config.h:     section \"Present But Cannot Be Compiled\"" >&2;}
+-    { echo "$as_me:$LINENO: WARNING: HYPRE_config.h: proceeding with the preprocessor's result" >&5
+-echo "$as_me: WARNING: HYPRE_config.h: proceeding with the preprocessor's result" >&2;}
+-    { echo "$as_me:$LINENO: WARNING: HYPRE_config.h: in the future, the compiler will take precedence" >&5
+-echo "$as_me: WARNING: HYPRE_config.h: in the future, the compiler will take precedence" >&2;}
+-
+-    ;;
+-esac
+-{ echo "$as_me:$LINENO: checking for HYPRE_config.h" >&5
+-echo $ECHO_N "checking for HYPRE_config.h... $ECHO_C" >&6; }
+-if test "${ac_cv_header_HYPRE_config_h+set}" = set; then
+-  echo $ECHO_N "(cached) $ECHO_C" >&6
+-else
+-  ac_cv_header_HYPRE_config_h=$ac_header_preproc
+-fi
+-{ echo "$as_me:$LINENO: result: $ac_cv_header_HYPRE_config_h" >&5
+-echo "${ECHO_T}$ac_cv_header_HYPRE_config_h" >&6; }
+-
+-fi
+-if test $ac_cv_header_HYPRE_config_h = yes; then
++  ac_fn_c_check_header_compile "$LINENO" "HYPRE_config.h" "ac_cv_header_HYPRE_config_h" "$ac_includes_default"
++if test "x$ac_cv_header_HYPRE_config_h" = xyes
++then :
+   :
+-else
+-  { { echo "$as_me:$LINENO: error: Problems checking HYPRE_config.h" >&5
+-echo "$as_me: error: Problems checking HYPRE_config.h" >&2;}
+-   { (exit 1); exit 1; }; }
++else $as_nop
++  as_fn_error $? "Problems checking HYPRE_config.h" "$LINENO" 5
+ fi
+ 
+ 
+-
+   # Check if HYPRE was compiled with parallelism.
+-  { echo "$as_me:$LINENO: checking if hypre is serial or parallel" >&5
+-echo $ECHO_N "checking if hypre is serial or parallel... $ECHO_C" >&6; }
+-  cat >conftest.$ac_ext <<_ACEOF
+-/* confdefs.h.  */
+-_ACEOF
+-cat confdefs.h >>conftest.$ac_ext
+-cat >>conftest.$ac_ext <<_ACEOF
++  { printf "%s\n" "$as_me:${as_lineno-$LINENO}: checking if hypre is serial or parallel" >&5
++printf %s "checking if hypre is serial or parallel... " >&6; }
++  cat confdefs.h - <<_ACEOF >conftest.$ac_ext
+ /* end confdefs.h.  */
+ 
+ #include <HYPRE_config.h>
+@@ -19937,15 +17220,16 @@ HYPRE_SEQUENTIAL_IS_DEFINED
+ 
+ _ACEOF
+ if (eval "$ac_cpp conftest.$ac_ext") 2>&5 |
+-  $EGREP "^HYPRE_SEQUENTIAL_IS_DEFINED$" >/dev/null 2>&1; then
++  $EGREP "^HYPRE_SEQUENTIAL_IS_DEFINED$" >/dev/null 2>&1
++then :
+   hypre_PARALLELISM=serial
+-else
++else $as_nop
+   hypre_PARALLELISM=parallel
+ fi
+-rm -f conftest*
++rm -rf conftest*
+ 
+-  { echo "$as_me:$LINENO: result: $hypre_PARALLELISM" >&5
+-echo "${ECHO_T}$hypre_PARALLELISM" >&6; }
++  { printf "%s\n" "$as_me:${as_lineno-$LINENO}: result: $hypre_PARALLELISM" >&5
++printf "%s\n" "$hypre_PARALLELISM" >&6; }
+ 
+   # Reset cpp after checking hypre header file.
+   CPPFLAGS=$btng_save_cppflags
+@@ -19961,7 +17245,7 @@ for btng_log_vars_index in $btng_log_vars ; do
+   else
+     btng_log_vars_value="unset";
+   fi
+-  echo "configure:19964:" "$btng_log_vars_index is $btng_log_vars_value" >&5;
++  echo "configure:17248:" "$btng_log_vars_index is $btng_log_vars_value" >&5;
+ done
+ 
+ 
+@@ -19975,7 +17259,7 @@ for btng_log_vars_index in $btng_log_vars ; do
+   else
+     btng_log_vars_value="unset";
+   fi
+-  echo "configure:19978:" "$btng_log_vars_index is $btng_log_vars_value" >&5;
++  echo "configure:17262:" "$btng_log_vars_index is $btng_log_vars_value" >&5;
+ done
+ 
+ 
+@@ -19999,12 +17283,10 @@ fi
+   LIB_NAME="$hypre_LIB_NAME $LIB_NAME"
+   INC_PATH="$hypre_INCLUDES $INC_PATH"
+ 
+-cat >>confdefs.h <<\_ACEOF
+-#define HAVE_HYPRE 1
+-_ACEOF
++printf "%s\n" "#define HAVE_HYPRE 1" >>confdefs.h
+ 
+-  { echo "$as_me:$LINENO: checking whether HYPRE was compiled with MPI" >&5
+-echo $ECHO_N "checking whether HYPRE was compiled with MPI... $ECHO_C" >&6; }
++  { printf "%s\n" "$as_me:${as_lineno-$LINENO}: checking whether HYPRE was compiled with MPI" >&5
++printf %s "checking whether HYPRE was compiled with MPI... " >&6; }
+   # Check how HYPRe was compiled.
+ 
+ 
+@@ -20016,50 +17298,43 @@ for btng_log_vars_index in $btng_log_vars ; do
+   else
+     btng_log_vars_value="unset";
+   fi
+-  echo "configure:20019:" "$btng_log_vars_index is $btng_log_vars_value" >&5;
++  echo "configure:17301:" "$btng_log_vars_index is $btng_log_vars_value" >&5;
+ done
+ 
+ 
+   if test "$hypre_PARALLELISM" = 'parallel'; then
+-     { echo "$as_me:$LINENO: result: yes" >&5
+-echo "${ECHO_T}yes" >&6; }
++     { printf "%s\n" "$as_me:${as_lineno-$LINENO}: result: yes" >&5
++printf "%s\n" "yes" >&6; }
+      if test "$with_mpi" = no ; then
+-        { { echo "$as_me:$LINENO: error: sequential SAMRAI cannot call parallel HYPRE" >&5
+-echo "$as_me: error: sequential SAMRAI cannot call parallel HYPRE" >&2;}
+-   { (exit 1); exit 1; }; }
++        as_fn_error $? "sequential SAMRAI cannot call parallel HYPRE" "$LINENO" 5
+      fi
+   elif test "$hypre_PARALLELISM" = 'serial'; then
+-     { echo "$as_me:$LINENO: result: no" >&5
+-echo "${ECHO_T}no" >&6; }
++     { printf "%s\n" "$as_me:${as_lineno-$LINENO}: result: no" >&5
++printf "%s\n" "no" >&6; }
+ 
+-cat >>confdefs.h <<\_ACEOF
+-#define HYPRE_SEQUENTIAL 1
+-_ACEOF
++printf "%s\n" "#define HYPRE_SEQUENTIAL 1" >>confdefs.h
+ 
+      if test "$with_mpi" != no ; then
+-        { { echo "$as_me:$LINENO: error: parallel SAMRAI cannot call sequential HYPRE" >&5
+-echo "$as_me: error: parallel SAMRAI cannot call sequential HYPRE" >&2;}
+-   { (exit 1); exit 1; }; }
++        as_fn_error $? "parallel SAMRAI cannot call sequential HYPRE" "$LINENO" 5
+      fi
+   else
+-     { echo "$as_me:$LINENO: WARNING: Cannot determine if hypre was compiled for serial or parallel" >&5
+-echo "$as_me: WARNING: Cannot determine if hypre was compiled for serial or parallel" >&2;}
++     { printf "%s\n" "$as_me:${as_lineno-$LINENO}: WARNING: Cannot determine if hypre was compiled for serial or parallel" >&5
++printf "%s\n" "$as_me: WARNING: Cannot determine if hypre was compiled for serial or parallel" >&2;}
+   fi
+ else
+-  { echo "$as_me:$LINENO: NOTIFICATION: SAMRAI configured without the HYPRE library" >&5
+-echo "$as_me: NOTIFICATION: SAMRAI configured without the HYPRE library" >&6;}
++  { printf "%s\n" "$as_me:${as_lineno-$LINENO}: NOTIFICATION: SAMRAI configured without the HYPRE library" >&5
++printf "%s\n" "$as_me: NOTIFICATION: SAMRAI configured without the HYPRE library" >&6;}
+ 
+-cat >>confdefs.h <<\_ACEOF
+-#define LACKS_HYPRE 1
+-_ACEOF
++printf "%s\n" "#define LACKS_HYPRE 1" >>confdefs.h
+ 
+ fi
+ 
+ 
+ # Check whether --with-superlu-lib was given.
+-if test "${with_superlu_lib+set}" = set; then
++if test ${with_superlu_lib+y}
++then :
+   withval=$with_superlu_lib;
+-else
++else $as_nop
+   with_superlu_lib='no'
+ fi
+ 
+@@ -20080,7 +17355,8 @@ unset spooles_PREFIX
+ 
+ 
+ # Check whether --with-spooles was given.
+-if test "${with_spooles+set}" = set; then
++if test ${with_spooles+y}
++then :
+   withval=$with_spooles; if test "${with_spooles+set}" = yes ; then
+   spooles_PREFIX=
+ elif test "${with_spooles}" = no; then
+@@ -20120,7 +17396,7 @@ for btng_log_vars_index in $btng_log_vars ; do
+   else
+     btng_log_vars_value="unset";
+   fi
+-  echo "configure:20123:" "$btng_log_vars_index is $btng_log_vars_value" >&5;
++  echo "configure:17399:" "$btng_log_vars_index is $btng_log_vars_value" >&5;
+ done
+ 
+ 
+@@ -20155,15 +17431,17 @@ fi
+ # Start macro BTNG_ARG_WITH_PREFIX
+ 
+ # Start macro BTNG_ARG_WITH_ENV_WRAPPER with args petsc and PETSC_DIR
+-{ echo "$as_me:$LINENO: checking for petsc" >&5
+-echo $ECHO_N "checking for petsc... $ECHO_C" >&6; }
+-if test "${btng_cv_prog_petsc+set}" = set; then
+-  echo $ECHO_N "(cached) $ECHO_C" >&6
+-else
++{ printf "%s\n" "$as_me:${as_lineno-$LINENO}: checking for petsc" >&5
++printf %s "checking for petsc... " >&6; }
++if test ${btng_cv_prog_petsc+y}
++then :
++  printf %s "(cached) " >&6
++else $as_nop
+ 
+ 
+ # Check whether --with-petsc was given.
+-if test "${with_petsc+set}" = set; then
++if test ${with_petsc+y}
++then :
+   withval=$with_petsc;
+ fi
+ 
+@@ -20189,9 +17467,7 @@ case "$with_petsc" in
+ # So if user specified --with-petsc, it should include a path or it is an error.
+ if test "${with_petsc+set}" = set ; then
+   # User specified --with-petsc ambiguously.
+-  { { echo "$as_me:$LINENO: error: You must specify a path with --with-petsc=..." >&5
+-echo "$as_me: error: You must specify a path with --with-petsc=..." >&2;}
+-   { (exit 1); exit 1; }; }
++  as_fn_error $? "You must specify a path with --with-petsc=..." "$LINENO" 5
+ else
+   # User did not specify --with-petsc, so turn it off.
+   unset PETSC_DIR;
+@@ -20216,8 +17492,8 @@ if test "${PETSC_DIR+set}" = set ; then
+ fi
+ 
+ fi
+-{ echo "$as_me:$LINENO: result: $btng_cv_prog_petsc" >&5
+-echo "${ECHO_T}$btng_cv_prog_petsc" >&6; }
++{ printf "%s\n" "$as_me:${as_lineno-$LINENO}: result: $btng_cv_prog_petsc" >&5
++printf "%s\n" "$btng_cv_prog_petsc" >&6; }
+ # Set PETSC_DIR from cache.
+ # PETSC_DIR is not yet set if we grabbed it from cache.
+ if test "${btng_cv_prog_petsc+set}" = set ; then
+@@ -20248,7 +17524,7 @@ for btng_log_vars_index in $btng_log_vars ; do
+   else
+     btng_log_vars_value="unset";
+   fi
+-  echo "configure:20251:" "$btng_log_vars_index is $btng_log_vars_value" >&5;
++  echo "configure:17527:" "$btng_log_vars_index is $btng_log_vars_value" >&5;
+ done
+ 
+ 
+@@ -20258,15 +17534,17 @@ done
+ # Start macro BTNG_ARG_WITH_PREFIX
+ 
+ # Start macro BTNG_ARG_WITH_ENV_WRAPPER with args petsc-arch and PETSC_ARCH
+-{ echo "$as_me:$LINENO: checking for petsc-arch" >&5
+-echo $ECHO_N "checking for petsc-arch... $ECHO_C" >&6; }
+-if test "${btng_cv_prog_petsc_arch+set}" = set; then
+-  echo $ECHO_N "(cached) $ECHO_C" >&6
+-else
++{ printf "%s\n" "$as_me:${as_lineno-$LINENO}: checking for petsc-arch" >&5
++printf %s "checking for petsc-arch... " >&6; }
++if test ${btng_cv_prog_petsc_arch+y}
++then :
++  printf %s "(cached) " >&6
++else $as_nop
+ 
+ 
+ # Check whether --with-petsc-arch was given.
+-if test "${with_petsc_arch+set}" = set; then
++if test ${with_petsc_arch+y}
++then :
+   withval=$with_petsc_arch;
+ fi
+ 
+@@ -20288,11 +17566,9 @@ case "$with_petsc_arch" in
+       : Nothing to do here actually, because PETSC_ARCH is already in the environment.
+     else
+       if test "${with_petsc_arch}" = yes ; then
+-  { { echo "$as_me:$LINENO: error: If you specify --with-petsc-arch, you must give it the path as in --with-petsc-arch=/installation/path" >&5
+-echo "$as_me: error: If you specify --with-petsc-arch, you must give it the path as in --with-petsc-arch=/installation/path" >&2;}
+-   { (exit 1); exit 1; }; }
++  as_fn_error $? "If you specify --with-petsc-arch, you must give it the path as in --with-petsc-arch=/installation/path" "$LINENO" 5
+ fi
+-echo "configure:20295:" environment PETSC_ARCH not defined >&5
++echo "configure:17571:" environment PETSC_ARCH not defined >&5
+ 
+ 
+     fi
+@@ -20313,8 +17589,8 @@ if test "${PETSC_ARCH+set}" = set ; then
+ fi
+ 
+ fi
+-{ echo "$as_me:$LINENO: result: $btng_cv_prog_petsc_arch" >&5
+-echo "${ECHO_T}$btng_cv_prog_petsc_arch" >&6; }
++{ printf "%s\n" "$as_me:${as_lineno-$LINENO}: result: $btng_cv_prog_petsc_arch" >&5
++printf "%s\n" "$btng_cv_prog_petsc_arch" >&6; }
+ # Set PETSC_ARCH from cache.
+ # PETSC_ARCH is not yet set if we grabbed it from cache.
+ if test "${btng_cv_prog_petsc_arch+set}" = set ; then
+@@ -20329,15 +17605,17 @@ fi
+ # Set PETSC_OPTIMIZE.
+ 
+ # Start macro BTNG_ARG_WITH_ENV_WRAPPER with args petsc-optimize and PETSC_OPTIMIZE
+-{ echo "$as_me:$LINENO: checking for petsc-optimize" >&5
+-echo $ECHO_N "checking for petsc-optimize... $ECHO_C" >&6; }
+-if test "${btng_cv_prog_petsc_optimize+set}" = set; then
+-  echo $ECHO_N "(cached) $ECHO_C" >&6
+-else
++{ printf "%s\n" "$as_me:${as_lineno-$LINENO}: checking for petsc-optimize" >&5
++printf %s "checking for petsc-optimize... " >&6; }
++if test ${btng_cv_prog_petsc_optimize+y}
++then :
++  printf %s "(cached) " >&6
++else $as_nop
+ 
+ 
+ # Check whether --with-petsc-optimize was given.
+-if test "${with_petsc_optimize+set}" = set; then
++if test ${with_petsc_optimize+y}
++then :
+   withval=$with_petsc_optimize;
+ fi
+ 
+@@ -20370,7 +17648,7 @@ for btng_log_vars_index in $btng_log_vars ; do
+   else
+     btng_log_vars_value="unset";
+   fi
+-  echo "configure:20373:" "$btng_log_vars_index is $btng_log_vars_value" >&5;
++  echo "configure:17651:" "$btng_log_vars_index is $btng_log_vars_value" >&5;
+ done
+ 
+ 
+@@ -20394,8 +17672,8 @@ if test "${PETSC_OPTIMIZE+set}" = set ; then
+ fi
+ 
+ fi
+-{ echo "$as_me:$LINENO: result: $btng_cv_prog_petsc_optimize" >&5
+-echo "${ECHO_T}$btng_cv_prog_petsc_optimize" >&6; }
++{ printf "%s\n" "$as_me:${as_lineno-$LINENO}: result: $btng_cv_prog_petsc_optimize" >&5
++printf "%s\n" "$btng_cv_prog_petsc_optimize" >&6; }
+ # Set PETSC_OPTIMIZE from cache.
+ # PETSC_OPTIMIZE is not yet set if we grabbed it from cache.
+ if test "${btng_cv_prog_petsc_optimize+set}" = set ; then
+@@ -20409,15 +17687,17 @@ fi
+ # Set PETSC_MPIUNI.
+ 
+ # Start macro BTNG_ARG_WITH_ENV_WRAPPER with args petsc-mpiuni and PETSC_MPIUNI
+-{ echo "$as_me:$LINENO: checking for petsc-mpiuni" >&5
+-echo $ECHO_N "checking for petsc-mpiuni... $ECHO_C" >&6; }
+-if test "${btng_cv_prog_petsc_mpiuni+set}" = set; then
+-  echo $ECHO_N "(cached) $ECHO_C" >&6
+-else
++{ printf "%s\n" "$as_me:${as_lineno-$LINENO}: checking for petsc-mpiuni" >&5
++printf %s "checking for petsc-mpiuni... " >&6; }
++if test ${btng_cv_prog_petsc_mpiuni+y}
++then :
++  printf %s "(cached) " >&6
++else $as_nop
+ 
+ 
+ # Check whether --with-petsc-mpiuni was given.
+-if test "${with_petsc_mpiuni+set}" = set; then
++if test ${with_petsc_mpiuni+y}
++then :
+   withval=$with_petsc_mpiuni;
+ fi
+ 
+@@ -20459,8 +17739,8 @@ if test "${PETSC_MPIUNI+set}" = set ; then
+ fi
+ 
+ fi
+-{ echo "$as_me:$LINENO: result: $btng_cv_prog_petsc_mpiuni" >&5
+-echo "${ECHO_T}$btng_cv_prog_petsc_mpiuni" >&6; }
++{ printf "%s\n" "$as_me:${as_lineno-$LINENO}: result: $btng_cv_prog_petsc_mpiuni" >&5
++printf "%s\n" "$btng_cv_prog_petsc_mpiuni" >&6; }
+ # Set PETSC_MPIUNI from cache.
+ # PETSC_MPIUNI is not yet set if we grabbed it from cache.
+ if test "${btng_cv_prog_petsc_mpiuni+set}" = set ; then
+@@ -20475,7 +17755,8 @@ fi
+ unset PETSC_LIBFILES
+ 
+ # Check whether --with-petsc-libfiles was given.
+-if test "${with_petsc_libfiles+set}" = set; then
++if test ${with_petsc_libfiles+y}
++then :
+   withval=$with_petsc_libfiles; test "$with_petsc_libfiles" = yes && PETSC_LIBFILES=yes
+ fi
+ 
+@@ -20485,8 +17766,8 @@ if test "${PETSC_DIR+set}" = set; then
+   # Set up PETSC only if PETSC_DIR is defined.
+ 
+   if test ! -d "$PETSC_DIR"; then
+-    { echo "$as_me:$LINENO: WARNING: PETSC directory ($PETSC_DIR) does not look right" >&5
+-echo "$as_me: WARNING: PETSC directory ($PETSC_DIR) does not look right" >&2;}
++    { printf "%s\n" "$as_me:${as_lineno-$LINENO}: WARNING: PETSC directory ($PETSC_DIR) does not look right" >&5
++printf "%s\n" "$as_me: WARNING: PETSC directory ($PETSC_DIR) does not look right" >&2;}
+   fi
+   export PETSC_DIR
+   if test -z "$PETSC_ARCH"; then
+@@ -20495,8 +17776,8 @@ echo "$as_me: WARNING: PETSC directory ($PETSC_DIR) does not look right" >&2;}
+     elif test -x "$PETSC_DIR/bin/petscarch"; then
+        PETSC_ARCH=`$PETSC_DIR/bin/petscarch`
+     else
+-       { echo "$as_me:$LINENO: WARNING: PETSC could not determine PETSC_ARCH" >&5
+-echo "$as_me: WARNING: PETSC could not determine PETSC_ARCH" >&2;}
++       { printf "%s\n" "$as_me:${as_lineno-$LINENO}: WARNING: PETSC could not determine PETSC_ARCH" >&5
++printf "%s\n" "$as_me: WARNING: PETSC could not determine PETSC_ARCH" >&2;}
+     fi
+     export PETSC_ARCH
+   fi
+@@ -20510,18 +17791,16 @@ for btng_log_vars_index in $btng_log_vars ; do
+   else
+     btng_log_vars_value="unset";
+   fi
+-  echo "configure:20513:" "$btng_log_vars_index is $btng_log_vars_value" >&5;
++  echo "configure:17794:" "$btng_log_vars_index is $btng_log_vars_value" >&5;
+ done
+ 
+ 
+   if test ! -d "$PETSC_DIR/bmake/$PETSC_ARCH"; then
+-    { echo "$as_me:$LINENO: WARNING: PETSC architecture ($PETSC_ARCH) does not look right" >&5
+-echo "$as_me: WARNING: PETSC architecture ($PETSC_ARCH) does not look right" >&2;}
++    { printf "%s\n" "$as_me:${as_lineno-$LINENO}: WARNING: PETSC architecture ($PETSC_ARCH) does not look right" >&5
++printf "%s\n" "$as_me: WARNING: PETSC architecture ($PETSC_ARCH) does not look right" >&2;}
+   fi
+   if test ! "$PETSC_OPTIMIZE" = g && test ! "$PETSC_OPTIMIZE" = O; then
+-    { { echo "$as_me:$LINENO: error: PETSC optimize should be either g or O" >&5
+-echo "$as_me: error: PETSC optimize should be either g or O" >&2;}
+-   { (exit 1); exit 1; }; }
++    as_fn_error $? "PETSC optimize should be either g or O" "$LINENO" 5
+   fi
+ 
+   petsc_INCLUDES="-I$PETSC_DIR/include -I$PETSC_DIR/bmake/$PETSC_ARCH"
+@@ -20537,8 +17816,8 @@ echo "$as_me: error: PETSC optimize should be either g or O" >&2;}
+   elif  test -d "${PETSC_DIR}/lib/lib${PETSC_OPTIMIZE}/${PETSC_ARCH}"; then
+     petsc_LIBDIR="${PETSC_DIR}/lib/lib${PETSC_OPTIMIZE}/${PETSC_ARCH}"
+   else
+-    { echo "$as_me:$LINENO: WARNING: PETSC lib directory does not look as expected" >&5
+-echo "$as_me: WARNING: PETSC lib directory does not look as expected" >&2;}
++    { printf "%s\n" "$as_me:${as_lineno-$LINENO}: WARNING: PETSC lib directory does not look as expected" >&5
++printf "%s\n" "$as_me: WARNING: PETSC lib directory does not look as expected" >&2;}
+   fi
+ 
+ 
+@@ -20578,7 +17857,7 @@ for btng_log_vars_index in $btng_log_vars ; do
+   else
+     btng_log_vars_value="unset";
+   fi
+-  echo "configure:20581:" "$btng_log_vars_index is $btng_log_vars_value" >&5;
++  echo "configure:17860:" "$btng_log_vars_index is $btng_log_vars_value" >&5;
+ done
+ 
+ 
+@@ -20605,7 +17884,7 @@ for btng_log_vars_index in $btng_log_vars ; do
+   else
+     btng_log_vars_value="unset";
+   fi
+-  echo "configure:20608:" "$btng_log_vars_index is $btng_log_vars_value" >&5;
++  echo "configure:17887:" "$btng_log_vars_index is $btng_log_vars_value" >&5;
+ done
+ 
+ 
+@@ -20630,18 +17909,16 @@ fi
+   LIB_NAME="$petsc_LIB_NAME $LIB_NAME"
+   INC_PATH="$petsc_INCLUDES $INC_PATH"
+ 
+-cat >>confdefs.h <<\_ACEOF
+-#define HAVE_PETSC 1
+-_ACEOF
++printf "%s\n" "#define HAVE_PETSC 1" >>confdefs.h
+ 
+   if test $PETSC_VERSION_MAJOR -ne 2 || \
+      test $PETSC_VERSION_MINOR -ne 3 || \
+      test $PETSC_VERSION_SUBMINOR -ne 3 ; then
+-     { echo "$as_me:$LINENO: WARNING:
++     { printf "%s\n" "$as_me:${as_lineno-$LINENO}: WARNING:
+ SAMRAI requires PETSc-2.3.3.  You have specified version $PETSC_VERSION_MAJOR.$PETSC_VERSION_MINOR.$PETSC_VERSION_SUBMINOR
+ which may not work properly!
+ " >&5
+-echo "$as_me: WARNING:
++printf "%s\n" "$as_me: WARNING:
+ SAMRAI requires PETSc-2.3.3.  You have specified version $PETSC_VERSION_MAJOR.$PETSC_VERSION_MINOR.$PETSC_VERSION_SUBMINOR
+ which may not work properly!
+ " >&2;}
+@@ -20656,16 +17933,12 @@ fi
+ case $ARCH in
+    Linux | LINUX | linux | CYGWIN )
+ 
+-cat >>confdefs.h <<\_ACEOF
+-#define LACKS_PROPER_XDR_HEADER 1
+-_ACEOF
++printf "%s\n" "#define LACKS_PROPER_XDR_HEADER 1" >>confdefs.h
+ 
+       ;;
+    rs6000)
+ 
+-cat >>confdefs.h <<\_ACEOF
+-#define _POWER 1
+-_ACEOF
++printf "%s\n" "#define _POWER 1" >>confdefs.h
+ 
+       ;;
+    *)
+@@ -20676,9 +17949,7 @@ esac
+ if test "$enable_xdr" = "yes"; then
+ 
+ 
+-cat >>confdefs.h <<\_ACEOF
+-#define HAVE_XDR 1
+-_ACEOF
++printf "%s\n" "#define HAVE_XDR 1" >>confdefs.h
+ 
+ 
+ 
+@@ -20695,15 +17966,11 @@ fi
+ 
+ if test "$enable_deprecated" = "yes"; then
+ 
+-cat >>confdefs.h <<\_ACEOF
+-#define INCLUDE_DEPRECATED 2
+-_ACEOF
++printf "%s\n" "#define INCLUDE_DEPRECATED 2" >>confdefs.h
+ 
+ else
+ 
+-cat >>confdefs.h <<\_ACEOF
+-#define INCLUDE_DEPRECATED 9999999
+-_ACEOF
++printf "%s\n" "#define INCLUDE_DEPRECATED 9999999" >>confdefs.h
+ 
+ fi
+ 
+@@ -20711,32 +17978,27 @@ fi
+ 
+ 
+ # Check whether --with-sundials was given.
+-if test "${with_sundials+set}" = set; then
++if test ${with_sundials+y}
++then :
+   withval=$with_sundials;
+-else
++else $as_nop
+   with_sundials='no'
+ fi
+ 
+ 
+ if test "$with_sundials" = no; then
+-   { echo "$as_me:$LINENO: NOTIFICATION: SAMRAI configured without the Sundials library" >&5
+-echo "$as_me: NOTIFICATION: SAMRAI configured without the Sundials library" >&6;}
++   { printf "%s\n" "$as_me:${as_lineno-$LINENO}: NOTIFICATION: SAMRAI configured without the Sundials library" >&5
++printf "%s\n" "$as_me: NOTIFICATION: SAMRAI configured without the Sundials library" >&6;}
+ 
+-cat >>confdefs.h <<\_ACEOF
+-#define LACKS_SUNDIALS 1
+-_ACEOF
++printf "%s\n" "#define LACKS_SUNDIALS 1" >>confdefs.h
+ 
+ else
+    sundials_dir="$with_sundials"
+    if test ! -d "$sundials_dir" ; then
+-     { { echo "$as_me:$LINENO: error: You MUST specify an existing path when using --with-sundials=PATH" >&5
+-echo "$as_me: error: You MUST specify an existing path when using --with-sundials=PATH" >&2;}
+-   { (exit 1); exit 1; }; }
++     as_fn_error $? "You MUST specify an existing path when using --with-sundials=PATH" "$LINENO" 5
+    fi
+ 
+-cat >>confdefs.h <<\_ACEOF
+-#define HAVE_SUNDIALS 1
+-_ACEOF
++printf "%s\n" "#define HAVE_SUNDIALS 1" >>confdefs.h
+ 
+    LIB_PATH="$LIB_PATH -L$sundials_dir/lib"
+    LIB_NAME="$LIB_NAME -lsundials_cvode -lsundials_kinsol"
+@@ -20754,7 +18016,7 @@ for btng_log_vars_index in $btng_log_vars ; do
+   else
+     btng_log_vars_value="unset";
+   fi
+-  echo "configure:20757:" "$btng_log_vars_index is $btng_log_vars_value" >&5;
++  echo "configure:18019:" "$btng_log_vars_index is $btng_log_vars_value" >&5;
+ done
+ 
+ 
+@@ -20762,33 +18024,28 @@ done
+ 
+ 
+ # Check whether --with-cubes was given.
+-if test "${with_cubes+set}" = set; then
++if test ${with_cubes+y}
++then :
+   withval=$with_cubes;
+-else
++else $as_nop
+   with_cubes='no'
+ fi
+ 
+ 
+ CUBES_C_FILES="error_in_script.c"
+ if test "$with_cubes" = no; then
+-   { echo "$as_me:$LINENO: NOTIFICATION: SAMRAI configured without the CUBES library" >&5
+-echo "$as_me: NOTIFICATION: SAMRAI configured without the CUBES library" >&6;}
++   { printf "%s\n" "$as_me:${as_lineno-$LINENO}: NOTIFICATION: SAMRAI configured without the CUBES library" >&5
++printf "%s\n" "$as_me: NOTIFICATION: SAMRAI configured without the CUBES library" >&6;}
+ 
+-cat >>confdefs.h <<\_ACEOF
+-#define LACKS_CUBES 1
+-_ACEOF
++printf "%s\n" "#define LACKS_CUBES 1" >>confdefs.h
+ 
+ else
+    cubes_dir="$with_cubes"
+    if test ! -d "$cubes_dir" ; then
+-     { { echo "$as_me:$LINENO: error: You MUST specify an existing path when using --with-cubes=PATH" >&5
+-echo "$as_me: error: You MUST specify an existing path when using --with-cubes=PATH" >&2;}
+-   { (exit 1); exit 1; }; }
++     as_fn_error $? "You MUST specify an existing path when using --with-cubes=PATH" "$LINENO" 5
+    fi
+ 
+-cat >>confdefs.h <<\_ACEOF
+-#define HAVE_CUBES 1
+-_ACEOF
++printf "%s\n" "#define HAVE_CUBES 1" >>confdefs.h
+ 
+    cubes_includes="-I${cubes_dir}/include -I${cubes_dir}/cart3d/include"
+    cubes_lib="-L${cubes_dir} -L${cubes_dir}/cart3d/lib"
+@@ -20806,7 +18063,7 @@ for btng_log_vars_index in $btng_log_vars ; do
+   else
+     btng_log_vars_value="unset";
+   fi
+-  echo "configure:20809:" "$btng_log_vars_index is $btng_log_vars_value" >&5;
++  echo "configure:18066:" "$btng_log_vars_index is $btng_log_vars_value" >&5;
+ done
+ 
+ 
+@@ -20815,33 +18072,28 @@ done
+ 
+ 
+ # Check whether --with-eleven was given.
+-if test "${with_eleven+set}" = set; then
++if test ${with_eleven+y}
++then :
+   withval=$with_eleven;
+-else
++else $as_nop
+   with_eleven='no'
+ fi
+ 
+ 
+ ELEVEN_C_FILES="error_in_script.c"
+ if test "$with_eleven" = no; then
+-   { echo "$as_me:$LINENO: NOTIFICATION: SAMRAI configured without the ELEVEN library" >&5
+-echo "$as_me: NOTIFICATION: SAMRAI configured without the ELEVEN library" >&6;}
++   { printf "%s\n" "$as_me:${as_lineno-$LINENO}: NOTIFICATION: SAMRAI configured without the ELEVEN library" >&5
++printf "%s\n" "$as_me: NOTIFICATION: SAMRAI configured without the ELEVEN library" >&6;}
+ 
+-cat >>confdefs.h <<\_ACEOF
+-#define LACKS_ELEVEN 1
+-_ACEOF
++printf "%s\n" "#define LACKS_ELEVEN 1" >>confdefs.h
+ 
+ else
+    eleven_dir="$with_eleven"
+    if test ! -d "$eleven_dir" ; then
+-     { { echo "$as_me:$LINENO: error: You MUST specify an existing path when using --with-eleven=PATH" >&5
+-echo "$as_me: error: You MUST specify an existing path when using --with-eleven=PATH" >&2;}
+-   { (exit 1); exit 1; }; }
++     as_fn_error $? "You MUST specify an existing path when using --with-eleven=PATH" "$LINENO" 5
+    fi
+ 
+-cat >>confdefs.h <<\_ACEOF
+-#define HAVE_ELEVEN 1
+-_ACEOF
++printf "%s\n" "#define HAVE_ELEVEN 1" >>confdefs.h
+ 
+    eleven_includes="-I${eleven_dir}/common -I${eleven_dir}/mesh -I${eleven_dir}/dbase -I${eleven_dir}/dbase/gzstream -I${eleven_dir}/eleven/src -I${eleven_dir}/geom_util"
+    eleven_lib="-L${eleven_dir}/eleven/lib"
+@@ -20859,7 +18111,7 @@ for btng_log_vars_index in $btng_log_vars ; do
+   else
+     btng_log_vars_value="unset";
+   fi
+-  echo "configure:20862:" "$btng_log_vars_index is $btng_log_vars_value" >&5;
++  echo "configure:18114:" "$btng_log_vars_index is $btng_log_vars_value" >&5;
+ done
+ 
+ 
+@@ -20867,14 +18119,12 @@ done
+ 
+ if test -z "$with_vampir"; then
+ 
+-cat >>confdefs.h <<\_ACEOF
+-#define LACKS_VAMPIR 1
+-_ACEOF
++printf "%s\n" "#define LACKS_VAMPIR 1" >>confdefs.h
+ 
+ else
+    if test "$with_vampir" = yes; then
+-      { echo "$as_me:$LINENO: checking for VAMPIR" >&5
+-echo $ECHO_N "checking for VAMPIR... $ECHO_C" >&6; }
++      { printf "%s\n" "$as_me:${as_lineno-$LINENO}: checking for VAMPIR" >&5
++printf %s "checking for VAMPIR... " >&6; }
+       vampir_dir=
+       for i in /usr/global/tools/kppp/aix_5_ll/default $with_vampir; do
+          if test -d $i -a -f $i/include/VT.h; then
+@@ -20887,12 +18137,10 @@ echo $ECHO_N "checking for VAMPIR... $ECHO_C" >&6; }
+    fi
+ 
+    if test -n "$vampir_dir"; then
+-      { echo "$as_me:$LINENO: result: $vampir_dir" >&5
+-echo "${ECHO_T}$vampir_dir" >&6; }
++      { printf "%s\n" "$as_me:${as_lineno-$LINENO}: result: $vampir_dir" >&5
++printf "%s\n" "$vampir_dir" >&6; }
+ 
+-cat >>confdefs.h <<\_ACEOF
+-#define HAVE_VAMPIR 1
+-_ACEOF
++printf "%s\n" "#define HAVE_VAMPIR 1" >>confdefs.h
+ 
+       with_vampir=yes
+ 
+@@ -20910,12 +18158,10 @@ _ACEOF
+             ;;
+       esac
+    else
+-      { echo "$as_me:$LINENO: result: VAMPIR library not found" >&5
+-echo "${ECHO_T}VAMPIR library not found" >&6; }
++      { printf "%s\n" "$as_me:${as_lineno-$LINENO}: result: VAMPIR library not found" >&5
++printf "%s\n" "VAMPIR library not found" >&6; }
+ 
+-cat >>confdefs.h <<\_ACEOF
+-#define LACKS_VAMPIR 1
+-_ACEOF
++printf "%s\n" "#define LACKS_VAMPIR 1" >>confdefs.h
+ 
+       with_vampir=no
+    fi
+@@ -20930,26 +18176,22 @@ for btng_log_vars_index in $btng_log_vars ; do
+   else
+     btng_log_vars_value="unset";
+   fi
+-  echo "configure:20933:" "$btng_log_vars_index is $btng_log_vars_value" >&5;
++  echo "configure:18179:" "$btng_log_vars_index is $btng_log_vars_value" >&5;
+ done
+ 
+ 
+ 
+ if test -z "$with_tau"; then
+ 
+-cat >>confdefs.h <<\_ACEOF
+-#define LACKS_TAU 1
+-_ACEOF
++printf "%s\n" "#define LACKS_TAU 1" >>confdefs.h
+ 
+ else
+-   { echo "$as_me:$LINENO: checking for TAU" >&5
+-echo $ECHO_N "checking for TAU... $ECHO_C" >&6; }
+-   { echo "$as_me:$LINENO: result: $with_tau" >&5
+-echo "${ECHO_T}$with_tau" >&6; }
++   { printf "%s\n" "$as_me:${as_lineno-$LINENO}: checking for TAU" >&5
++printf %s "checking for TAU... " >&6; }
++   { printf "%s\n" "$as_me:${as_lineno-$LINENO}: result: $with_tau" >&5
++printf "%s\n" "$with_tau" >&6; }
+ 
+-cat >>confdefs.h <<\_ACEOF
+-#define HAVE_TAU 1
+-_ACEOF
++printf "%s\n" "#define HAVE_TAU 1" >>confdefs.h
+ 
+    TAU_INCLUDE="$with_tau"
+    INC_PATH="\$(TAU_INCLUDE) \$(TAU_DEFS) \$(TAU_MPI_INCLUDE) $INC_PATH"
+@@ -20959,8 +18201,8 @@ _ACEOF
+          ;;
+    esac
+    LIB_NAME="\$(TAU_MPI_LIBS) \$(TAU_LIBS) $LIB_NAME"
+-   { echo "$as_me:$LINENO: result: including TAU makefile $TAU_INCLUDE" >&5
+-echo "${ECHO_T}including TAU makefile $TAU_INCLUDE" >&6; }
++   { printf "%s\n" "$as_me:${as_lineno-$LINENO}: result: including TAU makefile $TAU_INCLUDE" >&5
++printf "%s\n" "including TAU makefile $TAU_INCLUDE" >&6; }
+    TAU_INCLUDE="include $TAU_INCLUDE"
+ fi
+ 
+@@ -20975,11 +18217,7 @@ ac_link='$CC -o conftest$ac_exeext $CFLAGS $CPPFLAGS $LDFLAGS conftest.$ac_ext $
+ ac_compiler_gnu=$ac_cv_c_compiler_gnu
+ 
+ 
+-cat >conftest.$ac_ext <<_ACEOF
+-/* confdefs.h.  */
+-_ACEOF
+-cat confdefs.h >>conftest.$ac_ext
+-cat >>conftest.$ac_ext <<_ACEOF
++cat confdefs.h - <<_ACEOF >conftest.$ac_ext
+ /* end confdefs.h.  */
+ #include <float.h>
+ #ifndef NAN
+@@ -20987,25 +18225,20 @@ nan is broken
+ #endif
+ _ACEOF
+ if (eval "$ac_cpp conftest.$ac_ext") 2>&5 |
+-  $EGREP "^nan is broken" >/dev/null 2>&1; then
++  $EGREP "^nan is broken" >/dev/null 2>&1
++then :
+ 
+-cat >>confdefs.h <<\_ACEOF
+-#define NAN_IS_BROKEN 1
+-_ACEOF
++printf "%s\n" "#define NAN_IS_BROKEN 1" >>confdefs.h
+ 
+-echo "configure:20996:" "NAN is broken (not in float.h)" >&5
+-else
+-  echo "configure:20998:" "NAN is ok (in float.h)" >&5
++echo "configure:18233:" "NAN is broken (not in float.h)" >&5
++else $as_nop
++  echo "configure:18235:" "NAN is ok (in float.h)" >&5
+ 
+ fi
+-rm -f conftest*
++rm -rf conftest*
+ 
+ 
+-cat >conftest.$ac_ext <<_ACEOF
+-/* confdefs.h.  */
+-_ACEOF
+-cat confdefs.h >>conftest.$ac_ext
+-cat >>conftest.$ac_ext <<_ACEOF
++cat confdefs.h - <<_ACEOF >conftest.$ac_ext
+ /* end confdefs.h.  */
+ #include <float.h>
+ #ifndef FLT_SNAN
+@@ -21013,25 +18246,20 @@ flt snan is broken
+ #endif
+ _ACEOF
+ if (eval "$ac_cpp conftest.$ac_ext") 2>&5 |
+-  $EGREP "^flt snan is broken" >/dev/null 2>&1; then
++  $EGREP "^flt snan is broken" >/dev/null 2>&1
++then :
+ 
+-cat >>confdefs.h <<\_ACEOF
+-#define FLT_SNAN_IS_BROKEN 1
+-_ACEOF
++printf "%s\n" "#define FLT_SNAN_IS_BROKEN 1" >>confdefs.h
+ 
+-echo "configure:21022:" "FLT_NAN is broken (not in float.h)" >&5
+-else
+-  echo "configure:21024:" "FLT_NAN is ok (in float.h)" >&5
++echo "configure:18254:" "FLT_NAN is broken (not in float.h)" >&5
++else $as_nop
++  echo "configure:18256:" "FLT_NAN is ok (in float.h)" >&5
+ 
+ fi
+-rm -f conftest*
++rm -rf conftest*
+ 
+ 
+-cat >conftest.$ac_ext <<_ACEOF
+-/* confdefs.h.  */
+-_ACEOF
+-cat confdefs.h >>conftest.$ac_ext
+-cat >>conftest.$ac_ext <<_ACEOF
++cat confdefs.h - <<_ACEOF >conftest.$ac_ext
+ /* end confdefs.h.  */
+ #include <float.h>
+ #ifndef DBL_SNAN
+@@ -21039,25 +18267,20 @@ dbl snan is broken
+ #endif
+ _ACEOF
+ if (eval "$ac_cpp conftest.$ac_ext") 2>&5 |
+-  $EGREP "^dbl snan is broken" >/dev/null 2>&1; then
++  $EGREP "^dbl snan is broken" >/dev/null 2>&1
++then :
+ 
+-cat >>confdefs.h <<\_ACEOF
+-#define DBL_SNAN_IS_BROKEN 1
+-_ACEOF
++printf "%s\n" "#define DBL_SNAN_IS_BROKEN 1" >>confdefs.h
+ 
+-echo "configure:21048:" "DBL_NAN is broken (not in float.h)" >&5
+-else
+-  echo "configure:21050:" "DBL_NAN is ok (in float.h)" >&5
++echo "configure:18275:" "DBL_NAN is broken (not in float.h)" >&5
++else $as_nop
++  echo "configure:18277:" "DBL_NAN is ok (in float.h)" >&5
+ 
+ fi
+-rm -f conftest*
++rm -rf conftest*
+ 
+ 
+-cat >conftest.$ac_ext <<_ACEOF
+-/* confdefs.h.  */
+-_ACEOF
+-cat confdefs.h >>conftest.$ac_ext
+-cat >>conftest.$ac_ext <<_ACEOF
++cat confdefs.h - <<_ACEOF >conftest.$ac_ext
+ /* end confdefs.h.  */
+ #include <float.h>
+ #ifndef FLT_MAX
+@@ -21065,25 +18288,20 @@ flt snan is broken
+ #endif
+ _ACEOF
+ if (eval "$ac_cpp conftest.$ac_ext") 2>&5 |
+-  $EGREP "^flt snan is broken" >/dev/null 2>&1; then
++  $EGREP "^flt snan is broken" >/dev/null 2>&1
++then :
+ 
+-cat >>confdefs.h <<\_ACEOF
+-#define FLT_MAX_IS_BROKEN 1
+-_ACEOF
++printf "%s\n" "#define FLT_MAX_IS_BROKEN 1" >>confdefs.h
+ 
+-echo "configure:21074:" "FLT_MAX is broken (not in float.h)" >&5
+-else
+-  echo "configure:21076:" "FLT_MAX is ok (in float.h)" >&5
++echo "configure:18296:" "FLT_MAX is broken (not in float.h)" >&5
++else $as_nop
++  echo "configure:18298:" "FLT_MAX is ok (in float.h)" >&5
+ 
+ fi
+-rm -f conftest*
++rm -rf conftest*
+ 
+ 
+-cat >conftest.$ac_ext <<_ACEOF
+-/* confdefs.h.  */
+-_ACEOF
+-cat confdefs.h >>conftest.$ac_ext
+-cat >>conftest.$ac_ext <<_ACEOF
++cat confdefs.h - <<_ACEOF >conftest.$ac_ext
+ /* end confdefs.h.  */
+ #include <float.h>
+ #ifndef DBL_MAX
+@@ -21091,18 +18309,17 @@ dbl snan is broken
+ #endif
+ _ACEOF
+ if (eval "$ac_cpp conftest.$ac_ext") 2>&5 |
+-  $EGREP "^dbl snan is broken" >/dev/null 2>&1; then
++  $EGREP "^dbl snan is broken" >/dev/null 2>&1
++then :
+ 
+-cat >>confdefs.h <<\_ACEOF
+-#define DBL_MAX_IS_BROKEN 1
+-_ACEOF
++printf "%s\n" "#define DBL_MAX_IS_BROKEN 1" >>confdefs.h
+ 
+-echo "configure:21100:" "DBL_MAX is broken (not in float.h)" >&5
+-else
+-  echo "configure:21102:" "DBL_MAX is ok (in float.h)" >&5
++echo "configure:18317:" "DBL_MAX is broken (not in float.h)" >&5
++else $as_nop
++  echo "configure:18319:" "DBL_MAX is ok (in float.h)" >&5
+ 
+ fi
+-rm -f conftest*
++rm -rf conftest*
+ 
+ 
+ # End macro BTNG_IEEE_FLOAT
+@@ -21152,7 +18369,7 @@ for btng_log_vars_index in $btng_log_vars ; do
+   else
+     btng_log_vars_value="unset";
+   fi
+-  echo "configure:21155:" "before adding rpath syntax: $btng_log_vars_index is $btng_log_vars_value" >&5;
++  echo "configure:18372:" "before adding rpath syntax: $btng_log_vars_index is $btng_log_vars_value" >&5;
+ done
+ 
+ 
+@@ -21164,9 +18381,10 @@ done
+ 
+ 
+ # Check whether --enable-rpath was given.
+-if test "${enable_rpath+set}" = set; then
++if test ${enable_rpath+y}
++then :
+   enableval=$enable_rpath;
+-else
++else $as_nop
+   enable_rpath=yes
+ fi
+ 
+@@ -21203,11 +18421,7 @@ ac_compiler_gnu=$ac_cv_cxx_compiler_gnu
+   btng_save_LIBS="$LIBS";
+   for i in '---bogus-flag-meant-to-cause-error' '-Wl,-rpath ' '-Wl,-R' '-Wl,-R '; do
+     LIBS="${i}/usr/local"
+-    cat >conftest.$ac_ext <<_ACEOF
+-/* confdefs.h.  */
+-_ACEOF
+-cat confdefs.h >>conftest.$ac_ext
+-cat >>conftest.$ac_ext <<_ACEOF
++    cat confdefs.h - <<_ACEOF >conftest.$ac_ext
+ /* end confdefs.h.  */
+ 
+ #ifdef F77_DUMMY_MAIN
+@@ -21219,41 +18433,21 @@ cat >>conftest.$ac_ext <<_ACEOF
+ 
+ #endif
+ int
+-main ()
++main (void)
+ {
+ 
+   ;
+   return 0;
+ }
+ _ACEOF
+-rm -f conftest.$ac_objext conftest$ac_exeext
+-if { (ac_try="$ac_link"
+-case "(($ac_try" in
+-  *\"* | *\`* | *\\*) ac_try_echo=\$ac_try;;
+-  *) ac_try_echo=$ac_try;;
+-esac
+-eval "echo \"\$as_me:$LINENO: $ac_try_echo\"") >&5
+-  (eval "$ac_link") 2>conftest.er1
+-  ac_status=$?
+-  grep -v '^ *+' conftest.er1 >conftest.err
+-  rm -f conftest.er1
+-  cat conftest.err >&5
+-  echo "$as_me:$LINENO: \$? = $ac_status" >&5
+-  (exit $ac_status); } && {
+-	 test -z "$ac_cxx_werror_flag" ||
+-	 test ! -s conftest.err
+-       } && test -s conftest$ac_exeext &&
+-       $as_test_x conftest$ac_exeext; then
++if ac_fn_cxx_try_link "$LINENO"
++then :
+   btng_rpath_beginning="$i"
+-else
+-  echo "$as_me: failed program was:" >&5
+-sed 's/^/| /' conftest.$ac_ext >&5
+-
+-	unset btng_rpath_beginning
++else $as_nop
++  unset btng_rpath_beginning
+ fi
+-
+-rm -f core conftest.err conftest.$ac_objext conftest_ipa8_conftest.oo \
+-      conftest$ac_exeext conftest.$ac_ext
++rm -f core conftest.err conftest.$ac_objext conftest.beam \
++    conftest$ac_exeext conftest.$ac_ext
+     # Intel compiler does not fail on bad args but warning message is
+     # created. If warning is found in the log then continue searching
+     # for syntax as the current one is no good.  If warning is not
+@@ -21281,11 +18475,7 @@ rm -f core conftest.err conftest.$ac_objext conftest_ipa8_conftest.oo \
+   btng_save_LIBS="$LIBS";
+   for i in '---bogus-flag-meant-to-cause-error' '-Wl,-rpath ' '-Wl,-R' '-Wl,-R '; do
+     LIBS="${i}/usr/local"
+-    cat >conftest.$ac_ext <<_ACEOF
+-/* confdefs.h.  */
+-_ACEOF
+-cat confdefs.h >>conftest.$ac_ext
+-cat >>conftest.$ac_ext <<_ACEOF
++    cat confdefs.h - <<_ACEOF >conftest.$ac_ext
+ /* end confdefs.h.  */
+ 
+ #ifdef F77_DUMMY_MAIN
+@@ -21297,41 +18487,21 @@ cat >>conftest.$ac_ext <<_ACEOF
+ 
+ #endif
+ int
+-main ()
++main (void)
+ {
+ 
+   ;
+   return 0;
+ }
+ _ACEOF
+-rm -f conftest.$ac_objext conftest$ac_exeext
+-if { (ac_try="$ac_link"
+-case "(($ac_try" in
+-  *\"* | *\`* | *\\*) ac_try_echo=\$ac_try;;
+-  *) ac_try_echo=$ac_try;;
+-esac
+-eval "echo \"\$as_me:$LINENO: $ac_try_echo\"") >&5
+-  (eval "$ac_link") 2>conftest.er1
+-  ac_status=$?
+-  grep -v '^ *+' conftest.er1 >conftest.err
+-  rm -f conftest.er1
+-  cat conftest.err >&5
+-  echo "$as_me:$LINENO: \$? = $ac_status" >&5
+-  (exit $ac_status); } && {
+-	 test -z "$ac_cxx_werror_flag" ||
+-	 test ! -s conftest.err
+-       } && test -s conftest$ac_exeext &&
+-       $as_test_x conftest$ac_exeext; then
++if ac_fn_cxx_try_link "$LINENO"
++then :
+   btng_rpath_beginning="$i"
+-else
+-  echo "$as_me: failed program was:" >&5
+-sed 's/^/| /' conftest.$ac_ext >&5
+-
+-	unset btng_rpath_beginning
++else $as_nop
++  unset btng_rpath_beginning
+ fi
+-
+-rm -f core conftest.err conftest.$ac_objext conftest_ipa8_conftest.oo \
+-      conftest$ac_exeext conftest.$ac_ext
++rm -f core conftest.err conftest.$ac_objext conftest.beam \
++    conftest$ac_exeext conftest.$ac_ext
+     # Intel compiler does not fail on bad args but warning message is
+     # created. If warning is found in the log then continue searching
+     # for syntax as the current one is no good.  If warning is not
+@@ -21358,12 +18528,12 @@ rm -f core conftest.err conftest.$ac_objext conftest_ipa8_conftest.oo \
+           osf*) btng_rpath_beginning='-rpath ' ;;
+           *) btng_rpath_beginning='' ;;
+         esac
+-        { echo "$as_me:$LINENO: WARNING: Your compiler $CXX returns 0 even when it is
++        { printf "%s\n" "$as_me:${as_lineno-$LINENO}: WARNING: Your compiler $CXX returns 0 even when it is
+   given a bogus flag.  Therefore, I cannot find the proper syntax
+   for the rpath for this compiler.  I have resorted to a guess that
+   may not be correct: '$btng_rpath_beginning'.
+   You can override this by using --enable-rpath=SYNTAX" >&5
+-echo "$as_me: WARNING: Your compiler $CXX returns 0 even when it is
++printf "%s\n" "$as_me: WARNING: Your compiler $CXX returns 0 even when it is
+   given a bogus flag.  Therefore, I cannot find the proper syntax
+   for the rpath for this compiler.  I have resorted to a guess that
+   may not be correct: '$btng_rpath_beginning'.
+@@ -21378,11 +18548,7 @@ echo "$as_me: WARNING: Your compiler $CXX returns 0 even when it is
+   btng_save_LIBS="$LIBS";
+   for i in '---bogus-flag-meant-to-cause-error' '-R' '-R '; do
+     LIBS="${i}/usr/local"
+-    cat >conftest.$ac_ext <<_ACEOF
+-/* confdefs.h.  */
+-_ACEOF
+-cat confdefs.h >>conftest.$ac_ext
+-cat >>conftest.$ac_ext <<_ACEOF
++    cat confdefs.h - <<_ACEOF >conftest.$ac_ext
+ /* end confdefs.h.  */
+ 
+ #ifdef F77_DUMMY_MAIN
+@@ -21394,41 +18560,21 @@ cat >>conftest.$ac_ext <<_ACEOF
+ 
+ #endif
+ int
+-main ()
++main (void)
+ {
+ 
+   ;
+   return 0;
+ }
+ _ACEOF
+-rm -f conftest.$ac_objext conftest$ac_exeext
+-if { (ac_try="$ac_link"
+-case "(($ac_try" in
+-  *\"* | *\`* | *\\*) ac_try_echo=\$ac_try;;
+-  *) ac_try_echo=$ac_try;;
+-esac
+-eval "echo \"\$as_me:$LINENO: $ac_try_echo\"") >&5
+-  (eval "$ac_link") 2>conftest.er1
+-  ac_status=$?
+-  grep -v '^ *+' conftest.er1 >conftest.err
+-  rm -f conftest.er1
+-  cat conftest.err >&5
+-  echo "$as_me:$LINENO: \$? = $ac_status" >&5
+-  (exit $ac_status); } && {
+-	 test -z "$ac_cxx_werror_flag" ||
+-	 test ! -s conftest.err
+-       } && test -s conftest$ac_exeext &&
+-       $as_test_x conftest$ac_exeext; then
++if ac_fn_cxx_try_link "$LINENO"
++then :
+   btng_rpath_beginning="$i"
+-else
+-  echo "$as_me: failed program was:" >&5
+-sed 's/^/| /' conftest.$ac_ext >&5
+-
+-	unset btng_rpath_beginning
++else $as_nop
++  unset btng_rpath_beginning
+ fi
+-
+-rm -f core conftest.err conftest.$ac_objext conftest_ipa8_conftest.oo \
+-      conftest$ac_exeext conftest.$ac_ext
++rm -f core conftest.err conftest.$ac_objext conftest.beam \
++    conftest$ac_exeext conftest.$ac_ext
+     # Intel compiler does not fail on bad args but warning message is
+     # created. If warning is found in the log then continue searching
+     # for syntax as the current one is no good.  If warning is not
+@@ -21463,11 +18609,7 @@ rm -f core conftest.err conftest.$ac_objext conftest_ipa8_conftest.oo \
+   btng_save_LIBS="$LIBS";
+   for i in '---bogus-flag-meant-to-cause-error' '-R' '-R ' '-rpath ' '-Wl,-rpath ' '-Wl,-R' '-Wl,-R '; do
+     LIBS="${i}/usr/local"
+-    cat >conftest.$ac_ext <<_ACEOF
+-/* confdefs.h.  */
+-_ACEOF
+-cat confdefs.h >>conftest.$ac_ext
+-cat >>conftest.$ac_ext <<_ACEOF
++    cat confdefs.h - <<_ACEOF >conftest.$ac_ext
+ /* end confdefs.h.  */
+ 
+ #ifdef F77_DUMMY_MAIN
+@@ -21479,41 +18621,21 @@ cat >>conftest.$ac_ext <<_ACEOF
+ 
+ #endif
+ int
+-main ()
++main (void)
+ {
+ 
+   ;
+   return 0;
+ }
+ _ACEOF
+-rm -f conftest.$ac_objext conftest$ac_exeext
+-if { (ac_try="$ac_link"
+-case "(($ac_try" in
+-  *\"* | *\`* | *\\*) ac_try_echo=\$ac_try;;
+-  *) ac_try_echo=$ac_try;;
+-esac
+-eval "echo \"\$as_me:$LINENO: $ac_try_echo\"") >&5
+-  (eval "$ac_link") 2>conftest.er1
+-  ac_status=$?
+-  grep -v '^ *+' conftest.er1 >conftest.err
+-  rm -f conftest.er1
+-  cat conftest.err >&5
+-  echo "$as_me:$LINENO: \$? = $ac_status" >&5
+-  (exit $ac_status); } && {
+-	 test -z "$ac_cxx_werror_flag" ||
+-	 test ! -s conftest.err
+-       } && test -s conftest$ac_exeext &&
+-       $as_test_x conftest$ac_exeext; then
++if ac_fn_cxx_try_link "$LINENO"
++then :
+   btng_rpath_beginning="$i"
+-else
+-  echo "$as_me: failed program was:" >&5
+-sed 's/^/| /' conftest.$ac_ext >&5
+-
+-	unset btng_rpath_beginning
++else $as_nop
++  unset btng_rpath_beginning
+ fi
+-
+-rm -f core conftest.err conftest.$ac_objext conftest_ipa8_conftest.oo \
+-      conftest$ac_exeext conftest.$ac_ext
++rm -f core conftest.err conftest.$ac_objext conftest.beam \
++    conftest$ac_exeext conftest.$ac_ext
+     # Intel compiler does not fail on bad args but warning message is
+     # created. If warning is found in the log then continue searching
+     # for syntax as the current one is no good.  If warning is not
+@@ -21540,12 +18662,12 @@ rm -f core conftest.err conftest.$ac_objext conftest_ipa8_conftest.oo \
+           osf*) btng_rpath_beginning='-rpath ' ;;
+           *) btng_rpath_beginning='' ;;
+         esac
+-        { echo "$as_me:$LINENO: WARNING: Your compiler $CXX returns 0 even when it is
++        { printf "%s\n" "$as_me:${as_lineno-$LINENO}: WARNING: Your compiler $CXX returns 0 even when it is
+   given a bogus flag.  Therefore, I cannot find the proper syntax
+   for the rpath for this compiler.  I have resorted to a guess that
+   may not be correct: '$btng_rpath_beginning'.
+   You can override this by using --enable-rpath=SYNTAX" >&5
+-echo "$as_me: WARNING: Your compiler $CXX returns 0 even when it is
++printf "%s\n" "$as_me: WARNING: Your compiler $CXX returns 0 even when it is
+   given a bogus flag.  Therefore, I cannot find the proper syntax
+   for the rpath for this compiler.  I have resorted to a guess that
+   may not be correct: '$btng_rpath_beginning'.
+@@ -21559,11 +18681,7 @@ echo "$as_me: WARNING: Your compiler $CXX returns 0 even when it is
+   btng_save_LIBS="$LIBS";
+   for i in '-R ' '-R' '-rpath ' '-Wl,-rpath ' '-Wl,-R ' '-Wl,-R'; do
+     LIBS="${i}/usr/local"
+-    cat >conftest.$ac_ext <<_ACEOF
+-/* confdefs.h.  */
+-_ACEOF
+-cat confdefs.h >>conftest.$ac_ext
+-cat >>conftest.$ac_ext <<_ACEOF
++    cat confdefs.h - <<_ACEOF >conftest.$ac_ext
+ /* end confdefs.h.  */
+ 
+ #ifdef F77_DUMMY_MAIN
+@@ -21575,41 +18693,21 @@ cat >>conftest.$ac_ext <<_ACEOF
+ 
+ #endif
+ int
+-main ()
++main (void)
+ {
+ 
+   ;
+   return 0;
+ }
+ _ACEOF
+-rm -f conftest.$ac_objext conftest$ac_exeext
+-if { (ac_try="$ac_link"
+-case "(($ac_try" in
+-  *\"* | *\`* | *\\*) ac_try_echo=\$ac_try;;
+-  *) ac_try_echo=$ac_try;;
+-esac
+-eval "echo \"\$as_me:$LINENO: $ac_try_echo\"") >&5
+-  (eval "$ac_link") 2>conftest.er1
+-  ac_status=$?
+-  grep -v '^ *+' conftest.er1 >conftest.err
+-  rm -f conftest.er1
+-  cat conftest.err >&5
+-  echo "$as_me:$LINENO: \$? = $ac_status" >&5
+-  (exit $ac_status); } && {
+-	 test -z "$ac_cxx_werror_flag" ||
+-	 test ! -s conftest.err
+-       } && test -s conftest$ac_exeext &&
+-       $as_test_x conftest$ac_exeext; then
++if ac_fn_cxx_try_link "$LINENO"
++then :
+   btng_rpath_beginning="$i"
+-else
+-  echo "$as_me: failed program was:" >&5
+-sed 's/^/| /' conftest.$ac_ext >&5
+-
+-	unset btng_rpath_beginning
++else $as_nop
++  unset btng_rpath_beginning
+ fi
+-
+-rm -f core conftest.err conftest.$ac_objext conftest_ipa8_conftest.oo \
+-      conftest$ac_exeext conftest.$ac_ext
++rm -f core conftest.err conftest.$ac_objext conftest.beam \
++    conftest$ac_exeext conftest.$ac_ext
+     # Intel compiler does not fail on bad args but warning message is
+     # created. If warning is found in the log then continue searching
+     # for syntax as the current one is no good.  If warning is not
+@@ -21639,7 +18737,7 @@ for btng_log_vars_index in $btng_log_vars ; do
+   else
+     btng_log_vars_value="unset";
+   fi
+-  echo "configure:21642:" "forming rpaths: $btng_log_vars_index is $btng_log_vars_value" >&5;
++  echo "configure:18740:" "forming rpaths: $btng_log_vars_index is $btng_log_vars_value" >&5;
+ done
+ 
+ 
+@@ -21654,8 +18752,8 @@ ac_compiler_gnu=$ac_cv_c_compiler_gnu
+   # It is valid to have btng_rpath_beginning be blank.
+   # but if it is unset, we could not find a way to set it.
+   if test ! "${btng_rpath_beginning+set}" = set; then
+-    { echo "$as_me:$LINENO: WARNING: I cannot find a working syntax for setting relocatable paths" >&5
+-echo "$as_me: WARNING: I cannot find a working syntax for setting relocatable paths" >&2;}
++    { printf "%s\n" "$as_me:${as_lineno-$LINENO}: WARNING: I cannot find a working syntax for setting relocatable paths" >&5
++printf "%s\n" "$as_me: WARNING: I cannot find a working syntax for setting relocatable paths" >&2;}
+   fi
+ 
+ elif test ! "${enable_rpath}" = no; then
+@@ -21705,7 +18803,7 @@ for btng_log_vars_index in $btng_log_vars ; do
+   else
+     btng_log_vars_value="unset";
+   fi
+-  echo "configure:21708:" "after adding rpath syntax: $btng_log_vars_index is $btng_log_vars_value" >&5;
++  echo "configure:18806:" "after adding rpath syntax: $btng_log_vars_index is $btng_log_vars_value" >&5;
+ done
+ 
+ 
+@@ -21723,7 +18821,8 @@ done
+ 
+ 
+ # Check whether --with-parallel-run-bin was given.
+-if test "${with_parallel_run_bin+set}" = set; then
++if test ${with_parallel_run_bin+y}
++then :
+   withval=$with_parallel_run_bin;
+ case "$with_parallel_run_bin" in
+   no)
+@@ -21748,13 +18847,13 @@ for btng_log_vars_index in $btng_log_vars ; do
+   else
+     btng_log_vars_value="unset";
+   fi
+-  echo "configure:21751:" "with-parallel-run-bin given: $btng_log_vars_index is $btng_log_vars_value" >&5;
++  echo "configure:18850:" "with-parallel-run-bin given: $btng_log_vars_index is $btng_log_vars_value" >&5;
+ done
+ 
+ 
+ 
+ 
+-else
++else $as_nop
+ 
+ unset PARALLEL_RUN_BIN;
+ 
+@@ -21767,7 +18866,7 @@ for btng_log_vars_index in $btng_log_vars ; do
+   else
+     btng_log_vars_value="unset";
+   fi
+-  echo "configure:21770:" "with-parallel-run-bin NOT given: $btng_log_vars_index is $btng_log_vars_value" >&5;
++  echo "configure:18869:" "with-parallel-run-bin NOT given: $btng_log_vars_index is $btng_log_vars_value" >&5;
+ done
+ 
+ 
+@@ -21792,7 +18891,7 @@ for btng_log_vars_index in $btng_log_vars ; do
+   else
+     btng_log_vars_value="unset";
+   fi
+-  echo "configure:21795:" "after setting PARALLEL_RUN_BIN: $btng_log_vars_index is $btng_log_vars_value" >&5;
++  echo "configure:18894:" "after setting PARALLEL_RUN_BIN: $btng_log_vars_index is $btng_log_vars_value" >&5;
+ done
+ 
+ 
+@@ -21824,7 +18923,7 @@ for btng_log_vars_index in $btng_log_vars ; do
+   else
+     btng_log_vars_value="unset";
+   fi
+-  echo "configure:21827:" "in support-serpa-run: $btng_log_vars_index is $btng_log_vars_value" >&5;
++  echo "configure:18926:" "in support-serpa-run: $btng_log_vars_index is $btng_log_vars_value" >&5;
+ done
+ 
+ 
+@@ -21841,18 +18940,17 @@ ac_config_files="$ac_config_files config/serpa-run"
+ 
+ 
+ # Check whether --enable-test-nprocs was given.
+-if test "${enable_test_nprocs+set}" = set; then
++if test ${enable_test_nprocs+y}
++then :
+   enableval=$enable_test_nprocs;
+ case "$enable_test_nprocs" in
+   yes|no)
+-    { { echo "$as_me:$LINENO: error: You must specify a list of processors for testing." >&5
+-echo "$as_me: error: You must specify a list of processors for testing." >&2;}
+-   { (exit 1); exit 1; }; }
++    as_fn_error $? "You must specify a list of processors for testing." "$LINENO" 5
+   ;;
+   *) TEST_NPROCS=$enable_test_nprocs
+ esac
+ 
+-else
++else $as_nop
+   TEST_NPROCS='0,2'
+ 
+ fi
+@@ -22009,7 +19107,7 @@ for btng_log_vars_index in $btng_log_vars ; do
+   else
+     btng_log_vars_value="unset";
+   fi
+-  echo "configure:22012:" "$btng_log_vars_index is $btng_log_vars_value" >&5;
++  echo "configure:19110:" "$btng_log_vars_index is $btng_log_vars_value" >&5;
+ done
+ 
+ 
+@@ -22023,7 +19121,7 @@ for btng_log_vars_index in $btng_log_vars ; do
+   else
+     btng_log_vars_value="unset";
+   fi
+-  echo "configure:22026:" "$btng_log_vars_index is $btng_log_vars_value" >&5;
++  echo "configure:19124:" "$btng_log_vars_index is $btng_log_vars_value" >&5;
+ done
+ 
+ 
+@@ -22062,12 +19160,13 @@ _ACEOF
+     case $ac_val in #(
+     *${as_nl}*)
+       case $ac_var in #(
+-      *_cv_*) { echo "$as_me:$LINENO: WARNING: Cache variable $ac_var contains a newline." >&5
+-echo "$as_me: WARNING: Cache variable $ac_var contains a newline." >&2;} ;;
++      *_cv_*) { printf "%s\n" "$as_me:${as_lineno-$LINENO}: WARNING: cache variable $ac_var contains a newline" >&5
++printf "%s\n" "$as_me: WARNING: cache variable $ac_var contains a newline" >&2;} ;;
+       esac
+       case $ac_var in #(
+       _ | IFS | as_nl) ;; #(
+-      *) $as_unset $ac_var ;;
++      BASH_ARGV | BASH_SOURCE) eval $ac_var= ;; #(
++      *) { eval $ac_var=; unset $ac_var;} ;;
+       esac ;;
+     esac
+   done
+@@ -22075,8 +19174,8 @@ echo "$as_me: WARNING: Cache variable $ac_var contains a newline." >&2;} ;;
+   (set) 2>&1 |
+     case $as_nl`(ac_space=' '; set) 2>&1` in #(
+     *${as_nl}ac_space=\ *)
+-      # `set' does not quote correctly, so add quotes (double-quote
+-      # substitution turns \\\\ into \\, and sed turns \\ into \).
++      # `set' does not quote correctly, so add quotes: double-quote
++      # substitution turns \\\\ into \\, and sed turns \\ into \.
+       sed -n \
+ 	"s/'/'\\\\''/g;
+ 	  s/^\\([_$as_cr_alnum]*_cv_[_$as_cr_alnum]*\\)=\\(.*\\)/\\1='\\2'/p"
+@@ -22092,19 +19191,30 @@ echo "$as_me: WARNING: Cache variable $ac_var contains a newline." >&2;} ;;
+      /^ac_cv_env_/b end
+      t clear
+      :clear
+-     s/^\([^=]*\)=\(.*[{}].*\)$/test "${\1+set}" = set || &/
++     s/^\([^=]*\)=\(.*[{}].*\)$/test ${\1+y} || &/
+      t end
+      s/^\([^=]*\)=\(.*\)$/\1=${\1=\2}/
+      :end' >>confcache
+ if diff "$cache_file" confcache >/dev/null 2>&1; then :; else
+   if test -w "$cache_file"; then
+-    test "x$cache_file" != "x/dev/null" &&
+-      { echo "$as_me:$LINENO: updating cache $cache_file" >&5
+-echo "$as_me: updating cache $cache_file" >&6;}
+-    cat confcache >$cache_file
++    if test "x$cache_file" != "x/dev/null"; then
++      { printf "%s\n" "$as_me:${as_lineno-$LINENO}: updating cache $cache_file" >&5
++printf "%s\n" "$as_me: updating cache $cache_file" >&6;}
++      if test ! -f "$cache_file" || test -h "$cache_file"; then
++	cat confcache >"$cache_file"
++      else
++        case $cache_file in #(
++        */* | ?:*)
++	  mv -f confcache "$cache_file"$$ &&
++	  mv -f "$cache_file"$$ "$cache_file" ;; #(
++        *)
++	  mv -f confcache "$cache_file" ;;
++	esac
++      fi
++    fi
+   else
+-    { echo "$as_me:$LINENO: not updating unwritable cache $cache_file" >&5
+-echo "$as_me: not updating unwritable cache $cache_file" >&6;}
++    { printf "%s\n" "$as_me:${as_lineno-$LINENO}: not updating unwritable cache $cache_file" >&5
++printf "%s\n" "$as_me: not updating unwritable cache $cache_file" >&6;}
+   fi
+ fi
+ rm -f confcache
+@@ -22117,14 +19227,15 @@ DEFS=-DHAVE_CONFIG_H
+ 
+ ac_libobjs=
+ ac_ltlibobjs=
++U=
+ for ac_i in : $LIBOBJS; do test "x$ac_i" = x: && continue
+   # 1. Remove the extension, and $U if already installed.
+   ac_script='s/\$U\././;s/\.o$//;s/\.obj$//'
+-  ac_i=`echo "$ac_i" | sed "$ac_script"`
++  ac_i=`printf "%s\n" "$ac_i" | sed "$ac_script"`
+   # 2. Prepend LIBOBJDIR.  When used with automake>=1.10 LIBOBJDIR
+   #    will be set to the directory where LIBOBJS objects are built.
+-  ac_libobjs="$ac_libobjs \${LIBOBJDIR}$ac_i\$U.$ac_objext"
+-  ac_ltlibobjs="$ac_ltlibobjs \${LIBOBJDIR}$ac_i"'$U.lo'
++  as_fn_append ac_libobjs " \${LIBOBJDIR}$ac_i\$U.$ac_objext"
++  as_fn_append ac_ltlibobjs " \${LIBOBJDIR}$ac_i"'$U.lo'
+ done
+ LIBOBJS=$ac_libobjs
+ 
+@@ -22132,12 +19243,14 @@ LTLIBOBJS=$ac_ltlibobjs
+ 
+ 
+ 
+-: ${CONFIG_STATUS=./config.status}
++: "${CONFIG_STATUS=./config.status}"
++ac_write_fail=0
+ ac_clean_files_save=$ac_clean_files
+ ac_clean_files="$ac_clean_files $CONFIG_STATUS"
+-{ echo "$as_me:$LINENO: creating $CONFIG_STATUS" >&5
+-echo "$as_me: creating $CONFIG_STATUS" >&6;}
+-cat >$CONFIG_STATUS <<_ACEOF
++{ printf "%s\n" "$as_me:${as_lineno-$LINENO}: creating $CONFIG_STATUS" >&5
++printf "%s\n" "$as_me: creating $CONFIG_STATUS" >&6;}
++as_write_fail=0
++cat >$CONFIG_STATUS <<_ASEOF || as_write_fail=1
+ #! $SHELL
+ # Generated by $as_me.
+ # Run this file to recreate the current configuration.
+@@ -22147,81 +19260,99 @@ cat >$CONFIG_STATUS <<_ACEOF
+ debug=false
+ ac_cs_recheck=false
+ ac_cs_silent=false
+-SHELL=\${CONFIG_SHELL-$SHELL}
+-_ACEOF
+ 
+-cat >>$CONFIG_STATUS <<\_ACEOF
+-## --------------------- ##
+-## M4sh Initialization.  ##
+-## --------------------- ##
++SHELL=\${CONFIG_SHELL-$SHELL}
++export SHELL
++_ASEOF
++cat >>$CONFIG_STATUS <<\_ASEOF || as_write_fail=1
++## -------------------- ##
++## M4sh Initialization. ##
++## -------------------- ##
+ 
+ # Be more Bourne compatible
+ DUALCASE=1; export DUALCASE # for MKS sh
+-if test -n "${ZSH_VERSION+set}" && (emulate sh) >/dev/null 2>&1; then
++as_nop=:
++if test ${ZSH_VERSION+y} && (emulate sh) >/dev/null 2>&1
++then :
+   emulate sh
+   NULLCMD=:
+-  # Zsh 3.x and 4.x performs word splitting on ${1+"$@"}, which
++  # Pre-4.2 versions of Zsh do word splitting on ${1+"$@"}, which
+   # is contrary to our usage.  Disable this feature.
+   alias -g '${1+"$@"}'='"$@"'
+   setopt NO_GLOB_SUBST
+-else
+-  case `(set -o) 2>/dev/null` in
+-  *posix*) set -o posix ;;
++else $as_nop
++  case `(set -o) 2>/dev/null` in #(
++  *posix*) :
++    set -o posix ;; #(
++  *) :
++     ;;
+ esac
+-
+ fi
+ 
+ 
+ 
++# Reset variables that may have inherited troublesome values from
++# the environment.
+ 
+-# PATH needs CR
+-# Avoid depending upon Character Ranges.
+-as_cr_letters='abcdefghijklmnopqrstuvwxyz'
+-as_cr_LETTERS='ABCDEFGHIJKLMNOPQRSTUVWXYZ'
+-as_cr_Letters=$as_cr_letters$as_cr_LETTERS
+-as_cr_digits='0123456789'
+-as_cr_alnum=$as_cr_Letters$as_cr_digits
++# IFS needs to be set, to space, tab, and newline, in precisely that order.
++# (If _AS_PATH_WALK were called with IFS unset, it would have the
++# side effect of setting IFS to empty, thus disabling word splitting.)
++# Quoting is to prevent editors from complaining about space-tab.
++as_nl='
++'
++export as_nl
++IFS=" ""	$as_nl"
++
++PS1='$ '
++PS2='> '
++PS4='+ '
++
++# Ensure predictable behavior from utilities with locale-dependent output.
++LC_ALL=C
++export LC_ALL
++LANGUAGE=C
++export LANGUAGE
++
++# We cannot yet rely on "unset" to work, but we need these variables
++# to be unset--not just set to an empty or harmless value--now, to
++# avoid bugs in old shells (e.g. pre-3.0 UWIN ksh).  This construct
++# also avoids known problems related to "unset" and subshell syntax
++# in other old shells (e.g. bash 2.01 and pdksh 5.2.14).
++for as_var in BASH_ENV ENV MAIL MAILPATH CDPATH
++do eval test \${$as_var+y} \
++  && ( (unset $as_var) || exit 1) >/dev/null 2>&1 && unset $as_var || :
++done
++
++# Ensure that fds 0, 1, and 2 are open.
++if (exec 3>&0) 2>/dev/null; then :; else exec 0</dev/null; fi
++if (exec 3>&1) 2>/dev/null; then :; else exec 1>/dev/null; fi
++if (exec 3>&2)            ; then :; else exec 2>/dev/null; fi
+ 
+ # The user is always right.
+-if test "${PATH_SEPARATOR+set}" != set; then
+-  echo "#! /bin/sh" >conf$$.sh
+-  echo  "exit 0"   >>conf$$.sh
+-  chmod +x conf$$.sh
+-  if (PATH="/nonexistent;."; conf$$.sh) >/dev/null 2>&1; then
+-    PATH_SEPARATOR=';'
+-  else
+-    PATH_SEPARATOR=:
+-  fi
+-  rm -f conf$$.sh
+-fi
+-
+-# Support unset when possible.
+-if ( (MAIL=60; unset MAIL) || exit) >/dev/null 2>&1; then
+-  as_unset=unset
+-else
+-  as_unset=false
++if ${PATH_SEPARATOR+false} :; then
++  PATH_SEPARATOR=:
++  (PATH='/bin;/bin'; FPATH=$PATH; sh -c :) >/dev/null 2>&1 && {
++    (PATH='/bin:/bin'; FPATH=$PATH; sh -c :) >/dev/null 2>&1 ||
++      PATH_SEPARATOR=';'
++  }
+ fi
+ 
+ 
+-# IFS
+-# We need space, tab and new line, in precisely that order.  Quoting is
+-# there to prevent editors from complaining about space-tab.
+-# (If _AS_PATH_WALK were called with IFS unset, it would disable word
+-# splitting by setting IFS to empty value.)
+-as_nl='
+-'
+-IFS=" ""	$as_nl"
+-
+ # Find who we are.  Look in the path if we contain no directory separator.
+-case $0 in
++as_myself=
++case $0 in #((
+   *[\\/]* ) as_myself=$0 ;;
+   *) as_save_IFS=$IFS; IFS=$PATH_SEPARATOR
+ for as_dir in $PATH
+ do
+   IFS=$as_save_IFS
+-  test -z "$as_dir" && as_dir=.
+-  test -r "$as_dir/$0" && as_myself=$as_dir/$0 && break
+-done
++  case $as_dir in #(((
++    '') as_dir=./ ;;
++    */) ;;
++    *) as_dir=$as_dir/ ;;
++  esac
++    test -r "$as_dir$0" && as_myself=$as_dir$0 && break
++  done
+ IFS=$as_save_IFS
+ 
+      ;;
+@@ -22232,32 +19363,95 @@ if test "x$as_myself" = x; then
+   as_myself=$0
+ fi
+ if test ! -f "$as_myself"; then
+-  echo "$as_myself: error: cannot find myself; rerun with an absolute file name" >&2
+-  { (exit 1); exit 1; }
++  printf "%s\n" "$as_myself: error: cannot find myself; rerun with an absolute file name" >&2
++  exit 1
+ fi
+ 
+-# Work around bugs in pre-3.0 UWIN ksh.
+-for as_var in ENV MAIL MAILPATH
+-do ($as_unset $as_var) >/dev/null 2>&1 && $as_unset $as_var
+-done
+-PS1='$ '
+-PS2='> '
+-PS4='+ '
+ 
+-# NLS nuisances.
+-for as_var in \
+-  LANG LANGUAGE LC_ADDRESS LC_ALL LC_COLLATE LC_CTYPE LC_IDENTIFICATION \
+-  LC_MEASUREMENT LC_MESSAGES LC_MONETARY LC_NAME LC_NUMERIC LC_PAPER \
+-  LC_TELEPHONE LC_TIME
+-do
+-  if (set +x; test -z "`(eval $as_var=C; export $as_var) 2>&1`"); then
+-    eval $as_var=C; export $as_var
+-  else
+-    ($as_unset $as_var) >/dev/null 2>&1 && $as_unset $as_var
++
++# as_fn_error STATUS ERROR [LINENO LOG_FD]
++# ----------------------------------------
++# Output "`basename $0`: error: ERROR" to stderr. If LINENO and LOG_FD are
++# provided, also output the error to LOG_FD, referencing LINENO. Then exit the
++# script with STATUS, using 1 if that was 0.
++as_fn_error ()
++{
++  as_status=$1; test $as_status -eq 0 && as_status=1
++  if test "$4"; then
++    as_lineno=${as_lineno-"$3"} as_lineno_stack=as_lineno_stack=$as_lineno_stack
++    printf "%s\n" "$as_me:${as_lineno-$LINENO}: error: $2" >&$4
+   fi
+-done
++  printf "%s\n" "$as_me: error: $2" >&2
++  as_fn_exit $as_status
++} # as_fn_error
++
++
++
++# as_fn_set_status STATUS
++# -----------------------
++# Set $? to STATUS, without forking.
++as_fn_set_status ()
++{
++  return $1
++} # as_fn_set_status
++
++# as_fn_exit STATUS
++# -----------------
++# Exit the shell with STATUS, even in a "trap 0" or "set -e" context.
++as_fn_exit ()
++{
++  set +e
++  as_fn_set_status $1
++  exit $1
++} # as_fn_exit
++
++# as_fn_unset VAR
++# ---------------
++# Portably unset VAR.
++as_fn_unset ()
++{
++  { eval $1=; unset $1;}
++}
++as_unset=as_fn_unset
++
++# as_fn_append VAR VALUE
++# ----------------------
++# Append the text in VALUE to the end of the definition contained in VAR. Take
++# advantage of any shell optimizations that allow amortized linear growth over
++# repeated appends, instead of the typical quadratic growth present in naive
++# implementations.
++if (eval "as_var=1; as_var+=2; test x\$as_var = x12") 2>/dev/null
++then :
++  eval 'as_fn_append ()
++  {
++    eval $1+=\$2
++  }'
++else $as_nop
++  as_fn_append ()
++  {
++    eval $1=\$$1\$2
++  }
++fi # as_fn_append
++
++# as_fn_arith ARG...
++# ------------------
++# Perform arithmetic evaluation on the ARGs, and store the result in the
++# global $as_val. Take advantage of shells that can avoid forks. The arguments
++# must be portable across $(()) and expr.
++if (eval "test \$(( 1 + 1 )) = 2") 2>/dev/null
++then :
++  eval 'as_fn_arith ()
++  {
++    as_val=$(( $* ))
++  }'
++else $as_nop
++  as_fn_arith ()
++  {
++    as_val=`expr "$@" || test $? -eq 1`
++  }
++fi # as_fn_arith
++
+ 
+-# Required to use basename.
+ if expr a : '\(a\)' >/dev/null 2>&1 &&
+    test "X`expr 00001 : '.*\(...\)'`" = X001; then
+   as_expr=expr
+@@ -22271,13 +19465,17 @@ else
+   as_basename=false
+ fi
+ 
++if (as_dir=`dirname -- /` && test "X$as_dir" = X/) >/dev/null 2>&1; then
++  as_dirname=dirname
++else
++  as_dirname=false
++fi
+ 
+-# Name of the executable.
+ as_me=`$as_basename -- "$0" ||
+ $as_expr X/"$0" : '.*/\([^/][^/]*\)/*$' \| \
+ 	 X"$0" : 'X\(//\)$' \| \
+ 	 X"$0" : 'X\(/\)' \| . 2>/dev/null ||
+-echo X/"$0" |
++printf "%s\n" X/"$0" |
+     sed '/^.*\/\([^/][^/]*\)\/*$/{
+ 	    s//\1/
+ 	    q
+@@ -22292,131 +19490,128 @@ echo X/"$0" |
+ 	  }
+ 	  s/.*/./; q'`
+ 
+-# CDPATH.
+-$as_unset CDPATH
+-
+-
+-
+-  as_lineno_1=$LINENO
+-  as_lineno_2=$LINENO
+-  test "x$as_lineno_1" != "x$as_lineno_2" &&
+-  test "x`expr $as_lineno_1 + 1`" = "x$as_lineno_2" || {
+-
+-  # Create $as_me.lineno as a copy of $as_myself, but with $LINENO
+-  # uniformly replaced by the line number.  The first 'sed' inserts a
+-  # line-number line after each line using $LINENO; the second 'sed'
+-  # does the real work.  The second script uses 'N' to pair each
+-  # line-number line with the line containing $LINENO, and appends
+-  # trailing '-' during substitution so that $LINENO is not a special
+-  # case at line end.
+-  # (Raja R Harinath suggested sed '=', and Paul Eggert wrote the
+-  # scripts with optimization help from Paolo Bonzini.  Blame Lee
+-  # E. McMahon (1931-1989) for sed's syntax.  :-)
+-  sed -n '
+-    p
+-    /[$]LINENO/=
+-  ' <$as_myself |
+-    sed '
+-      s/[$]LINENO.*/&-/
+-      t lineno
+-      b
+-      :lineno
+-      N
+-      :loop
+-      s/[$]LINENO\([^'$as_cr_alnum'_].*\n\)\(.*\)/\2\1\2/
+-      t loop
+-      s/-\n.*//
+-    ' >$as_me.lineno &&
+-  chmod +x "$as_me.lineno" ||
+-    { echo "$as_me: error: cannot create $as_me.lineno; rerun with a POSIX shell" >&2
+-   { (exit 1); exit 1; }; }
+-
+-  # Don't try to exec as it changes $[0], causing all sort of problems
+-  # (the dirname of $[0] is not the place where we might find the
+-  # original and so on.  Autoconf is especially sensitive to this).
+-  . "./$as_me.lineno"
+-  # Exit status is that of the last command.
+-  exit
+-}
+-
++# Avoid depending upon Character Ranges.
++as_cr_letters='abcdefghijklmnopqrstuvwxyz'
++as_cr_LETTERS='ABCDEFGHIJKLMNOPQRSTUVWXYZ'
++as_cr_Letters=$as_cr_letters$as_cr_LETTERS
++as_cr_digits='0123456789'
++as_cr_alnum=$as_cr_Letters$as_cr_digits
+ 
+-if (as_dir=`dirname -- /` && test "X$as_dir" = X/) >/dev/null 2>&1; then
+-  as_dirname=dirname
+-else
+-  as_dirname=false
+-fi
+ 
++# Determine whether it's possible to make 'echo' print without a newline.
++# These variables are no longer used directly by Autoconf, but are AC_SUBSTed
++# for compatibility with existing Makefiles.
+ ECHO_C= ECHO_N= ECHO_T=
+-case `echo -n x` in
++case `echo -n x` in #(((((
+ -n*)
+-  case `echo 'x\c'` in
++  case `echo 'xy\c'` in
+   *c*) ECHO_T='	';;	# ECHO_T is single tab character.
+-  *)   ECHO_C='\c';;
++  xy)  ECHO_C='\c';;
++  *)   echo `echo ksh88 bug on AIX 6.1` > /dev/null
++       ECHO_T='	';;
+   esac;;
+ *)
+   ECHO_N='-n';;
+ esac
+ 
+-if expr a : '\(a\)' >/dev/null 2>&1 &&
+-   test "X`expr 00001 : '.*\(...\)'`" = X001; then
+-  as_expr=expr
+-else
+-  as_expr=false
+-fi
++# For backward compatibility with old third-party macros, we provide
++# the shell variables $as_echo and $as_echo_n.  New code should use
++# AS_ECHO(["message"]) and AS_ECHO_N(["message"]), respectively.
++as_echo='printf %s\n'
++as_echo_n='printf %s'
+ 
+ rm -f conf$$ conf$$.exe conf$$.file
+ if test -d conf$$.dir; then
+   rm -f conf$$.dir/conf$$.file
+ else
+   rm -f conf$$.dir
+-  mkdir conf$$.dir
+-fi
+-echo >conf$$.file
+-if ln -s conf$$.file conf$$ 2>/dev/null; then
+-  as_ln_s='ln -s'
+-  # ... but there are two gotchas:
+-  # 1) On MSYS, both `ln -s file dir' and `ln file dir' fail.
+-  # 2) DJGPP < 2.04 has no symlinks; `ln -s' creates a wrapper executable.
+-  # In both cases, we have to default to `cp -p'.
+-  ln -s conf$$.file conf$$.dir 2>/dev/null && test ! -f conf$$.exe ||
+-    as_ln_s='cp -p'
+-elif ln conf$$.file conf$$ 2>/dev/null; then
+-  as_ln_s=ln
++  mkdir conf$$.dir 2>/dev/null
++fi
++if (echo >conf$$.file) 2>/dev/null; then
++  if ln -s conf$$.file conf$$ 2>/dev/null; then
++    as_ln_s='ln -s'
++    # ... but there are two gotchas:
++    # 1) On MSYS, both `ln -s file dir' and `ln file dir' fail.
++    # 2) DJGPP < 2.04 has no symlinks; `ln -s' creates a wrapper executable.
++    # In both cases, we have to default to `cp -pR'.
++    ln -s conf$$.file conf$$.dir 2>/dev/null && test ! -f conf$$.exe ||
++      as_ln_s='cp -pR'
++  elif ln conf$$.file conf$$ 2>/dev/null; then
++    as_ln_s=ln
++  else
++    as_ln_s='cp -pR'
++  fi
+ else
+-  as_ln_s='cp -p'
++  as_ln_s='cp -pR'
+ fi
+ rm -f conf$$ conf$$.exe conf$$.dir/conf$$.file conf$$.file
+ rmdir conf$$.dir 2>/dev/null
+ 
++
++# as_fn_mkdir_p
++# -------------
++# Create "$as_dir" as a directory, including parents if necessary.
++as_fn_mkdir_p ()
++{
++
++  case $as_dir in #(
++  -*) as_dir=./$as_dir;;
++  esac
++  test -d "$as_dir" || eval $as_mkdir_p || {
++    as_dirs=
++    while :; do
++      case $as_dir in #(
++      *\'*) as_qdir=`printf "%s\n" "$as_dir" | sed "s/'/'\\\\\\\\''/g"`;; #'(
++      *) as_qdir=$as_dir;;
++      esac
++      as_dirs="'$as_qdir' $as_dirs"
++      as_dir=`$as_dirname -- "$as_dir" ||
++$as_expr X"$as_dir" : 'X\(.*[^/]\)//*[^/][^/]*/*$' \| \
++	 X"$as_dir" : 'X\(//\)[^/]' \| \
++	 X"$as_dir" : 'X\(//\)$' \| \
++	 X"$as_dir" : 'X\(/\)' \| . 2>/dev/null ||
++printf "%s\n" X"$as_dir" |
++    sed '/^X\(.*[^/]\)\/\/*[^/][^/]*\/*$/{
++	    s//\1/
++	    q
++	  }
++	  /^X\(\/\/\)[^/].*/{
++	    s//\1/
++	    q
++	  }
++	  /^X\(\/\/\)$/{
++	    s//\1/
++	    q
++	  }
++	  /^X\(\/\).*/{
++	    s//\1/
++	    q
++	  }
++	  s/.*/./; q'`
++      test -d "$as_dir" && break
++    done
++    test -z "$as_dirs" || eval "mkdir $as_dirs"
++  } || test -d "$as_dir" || as_fn_error $? "cannot create directory $as_dir"
++
++
++} # as_fn_mkdir_p
+ if mkdir -p . 2>/dev/null; then
+-  as_mkdir_p=:
++  as_mkdir_p='mkdir -p "$as_dir"'
+ else
+   test -d ./-p && rmdir ./-p
+   as_mkdir_p=false
+ fi
+ 
+-if test -x / >/dev/null 2>&1; then
+-  as_test_x='test -x'
+-else
+-  if ls -dL / >/dev/null 2>&1; then
+-    as_ls_L_option=L
+-  else
+-    as_ls_L_option=
+-  fi
+-  as_test_x='
+-    eval sh -c '\''
+-      if test -d "$1"; then
+-        test -d "$1/.";
+-      else
+-	case $1 in
+-        -*)set "./$1";;
+-	esac;
+-	case `ls -ld'$as_ls_L_option' "$1" 2>/dev/null` in
+-	???[sx]*):;;*)false;;esac;fi
+-    '\'' sh
+-  '
+-fi
+-as_executable_p=$as_test_x
++
++# as_fn_executable_p FILE
++# -----------------------
++# Test if FILE is an executable regular file.
++as_fn_executable_p ()
++{
++  test -f "$1" && test -x "$1"
++} # as_fn_executable_p
++as_test_x='test -x'
++as_executable_p=as_fn_executable_p
+ 
+ # Sed expression to map a string onto a valid CPP name.
+ as_tr_cpp="eval sed 'y%*$as_cr_letters%P$as_cr_LETTERS%;s%[^_$as_cr_alnum]%_%g'"
+@@ -22426,13 +19621,19 @@ as_tr_sh="eval sed 'y%*+%pp%;s%[^_$as_cr_alnum]%_%g'"
+ 
+ 
+ exec 6>&1
++## ----------------------------------- ##
++## Main body of $CONFIG_STATUS script. ##
++## ----------------------------------- ##
++_ASEOF
++test $as_write_fail = 0 && chmod +x $CONFIG_STATUS || ac_write_fail=1
+ 
+-# Save the log message, to keep $[0] and so on meaningful, and to
++cat >>$CONFIG_STATUS <<\_ACEOF || ac_write_fail=1
++# Save the log message, to keep $0 and so on meaningful, and to
+ # report actual input values of CONFIG_FILES etc. instead of their
+ # values after options handling.
+ ac_log="
+ This file was extended by $as_me, which was
+-generated by GNU Autoconf 2.61.  Invocation command line was
++generated by GNU Autoconf 2.71.  Invocation command line was
+ 
+   CONFIG_FILES    = $CONFIG_FILES
+   CONFIG_HEADERS  = $CONFIG_HEADERS
+@@ -22445,7 +19646,16 @@ on `(hostname || uname -n) 2>/dev/null | sed 1q`
+ 
+ _ACEOF
+ 
+-cat >>$CONFIG_STATUS <<_ACEOF
++case $ac_config_files in *"
++"*) set x $ac_config_files; shift; ac_config_files=$*;;
++esac
++
++case $ac_config_headers in *"
++"*) set x $ac_config_headers; shift; ac_config_headers=$*;;
++esac
++
++
++cat >>$CONFIG_STATUS <<_ACEOF || ac_write_fail=1
+ # Files that config.status was made for.
+ config_files="$ac_config_files"
+ config_headers="$ac_config_headers"
+@@ -22454,22 +19664,25 @@ config_commands="$ac_config_commands"
+ 
+ _ACEOF
+ 
+-cat >>$CONFIG_STATUS <<\_ACEOF
++cat >>$CONFIG_STATUS <<\_ACEOF || ac_write_fail=1
+ ac_cs_usage="\
+-\`$as_me' instantiates files from templates according to the
+-current configuration.
++\`$as_me' instantiates files and other configuration actions
++from templates according to the current configuration.  Unless the files
++and actions are specified as TAGs, all are instantiated by default.
+ 
+-Usage: $0 [OPTIONS] [FILE]...
++Usage: $0 [OPTION]... [TAG]...
+ 
+   -h, --help       print this help, then exit
+   -V, --version    print version number and configuration settings, then exit
+-  -q, --quiet      do not print progress messages
++      --config     print configuration, then exit
++  -q, --quiet, --silent
++                   do not print progress messages
+   -d, --debug      don't remove temporary files
+       --recheck    update $as_me by reconfiguring in the same conditions
+-  --file=FILE[:TEMPLATE]
+-		   instantiate the configuration file FILE
+-  --header=FILE[:TEMPLATE]
+-		   instantiate the configuration header FILE
++      --file=FILE[:TEMPLATE]
++                   instantiate the configuration file FILE
++      --header=FILE[:TEMPLATE]
++                   instantiate the configuration header FILE
+ 
+ Configuration files:
+ $config_files
+@@ -22483,16 +19696,19 @@ $config_links
+ Configuration commands:
+ $config_commands
+ 
+-Report bugs to <bug-autoconf@gnu.org>."
++Report bugs to the package provider."
+ 
+ _ACEOF
+-cat >>$CONFIG_STATUS <<_ACEOF
++ac_cs_config=`printf "%s\n" "$ac_configure_args" | sed "$ac_safe_unquote"`
++ac_cs_config_escaped=`printf "%s\n" "$ac_cs_config" | sed "s/^ //; s/'/'\\\\\\\\''/g"`
++cat >>$CONFIG_STATUS <<_ACEOF || ac_write_fail=1
++ac_cs_config='$ac_cs_config_escaped'
+ ac_cs_version="\\
+ config.status
+-configured by $0, generated by GNU Autoconf 2.61,
+-  with options \\"`echo "$ac_configure_args" | sed 's/^ //; s/[\\""\`\$]/\\\\&/g'`\\"
++configured by $0, generated by GNU Autoconf 2.71,
++  with options \\"\$ac_cs_config\\"
+ 
+-Copyright (C) 2006 Free Software Foundation, Inc.
++Copyright (C) 2021 Free Software Foundation, Inc.
+ This config.status script is free software; the Free Software Foundation
+ gives unlimited permission to copy, distribute and modify it."
+ 
+@@ -22500,20 +19716,25 @@ ac_pwd='$ac_pwd'
+ srcdir='$srcdir'
+ INSTALL='$INSTALL'
+ MKDIR_P='$MKDIR_P'
++test -n "\$AWK" || AWK=awk
+ _ACEOF
+ 
+-cat >>$CONFIG_STATUS <<\_ACEOF
+-# If no file are specified by the user, then we need to provide default
+-# value.  By we need to know if files were specified by the user.
++cat >>$CONFIG_STATUS <<\_ACEOF || ac_write_fail=1
++# The default lists apply if the user does not specify any file.
+ ac_need_defaults=:
+ while test $# != 0
+ do
+   case $1 in
+-  --*=*)
++  --*=?*)
+     ac_option=`expr "X$1" : 'X\([^=]*\)='`
+     ac_optarg=`expr "X$1" : 'X[^=]*=\(.*\)'`
+     ac_shift=:
+     ;;
++  --*=)
++    ac_option=`expr "X$1" : 'X\([^=]*\)='`
++    ac_optarg=
++    ac_shift=:
++    ;;
+   *)
+     ac_option=$1
+     ac_optarg=$2
+@@ -22526,34 +19747,41 @@ do
+   -recheck | --recheck | --rechec | --reche | --rech | --rec | --re | --r)
+     ac_cs_recheck=: ;;
+   --version | --versio | --versi | --vers | --ver | --ve | --v | -V )
+-    echo "$ac_cs_version"; exit ;;
++    printf "%s\n" "$ac_cs_version"; exit ;;
++  --config | --confi | --conf | --con | --co | --c )
++    printf "%s\n" "$ac_cs_config"; exit ;;
+   --debug | --debu | --deb | --de | --d | -d )
+     debug=: ;;
+   --file | --fil | --fi | --f )
+     $ac_shift
+-    CONFIG_FILES="$CONFIG_FILES $ac_optarg"
++    case $ac_optarg in
++    *\'*) ac_optarg=`printf "%s\n" "$ac_optarg" | sed "s/'/'\\\\\\\\''/g"` ;;
++    '') as_fn_error $? "missing file argument" ;;
++    esac
++    as_fn_append CONFIG_FILES " '$ac_optarg'"
+     ac_need_defaults=false;;
+   --header | --heade | --head | --hea )
+     $ac_shift
+-    CONFIG_HEADERS="$CONFIG_HEADERS $ac_optarg"
++    case $ac_optarg in
++    *\'*) ac_optarg=`printf "%s\n" "$ac_optarg" | sed "s/'/'\\\\\\\\''/g"` ;;
++    esac
++    as_fn_append CONFIG_HEADERS " '$ac_optarg'"
+     ac_need_defaults=false;;
+   --he | --h)
+     # Conflict between --help and --header
+-    { echo "$as_me: error: ambiguous option: $1
+-Try \`$0 --help' for more information." >&2
+-   { (exit 1); exit 1; }; };;
++    as_fn_error $? "ambiguous option: \`$1'
++Try \`$0 --help' for more information.";;
+   --help | --hel | -h )
+-    echo "$ac_cs_usage"; exit ;;
++    printf "%s\n" "$ac_cs_usage"; exit ;;
+   -q | -quiet | --quiet | --quie | --qui | --qu | --q \
+   | -silent | --silent | --silen | --sile | --sil | --si | --s)
+     ac_cs_silent=: ;;
+ 
+   # This is an error.
+-  -*) { echo "$as_me: error: unrecognized option: $1
+-Try \`$0 --help' for more information." >&2
+-   { (exit 1); exit 1; }; } ;;
++  -*) as_fn_error $? "unrecognized option: \`$1'
++Try \`$0 --help' for more information." ;;
+ 
+-  *) ac_config_targets="$ac_config_targets $1"
++  *) as_fn_append ac_config_targets " $1"
+      ac_need_defaults=false ;;
+ 
+   esac
+@@ -22568,27 +19796,29 @@ if $ac_cs_silent; then
+ fi
+ 
+ _ACEOF
+-cat >>$CONFIG_STATUS <<_ACEOF
++cat >>$CONFIG_STATUS <<_ACEOF || ac_write_fail=1
+ if \$ac_cs_recheck; then
+-  echo "running CONFIG_SHELL=$SHELL $SHELL $0 "$ac_configure_args \$ac_configure_extra_args " --no-create --no-recursion" >&6
+-  CONFIG_SHELL=$SHELL
++  set X $SHELL '$0' $ac_configure_args \$ac_configure_extra_args --no-create --no-recursion
++  shift
++  \printf "%s\n" "running CONFIG_SHELL=$SHELL \$*" >&6
++  CONFIG_SHELL='$SHELL'
+   export CONFIG_SHELL
+-  exec $SHELL "$0"$ac_configure_args \$ac_configure_extra_args --no-create --no-recursion
++  exec "\$@"
+ fi
+ 
+ _ACEOF
+-cat >>$CONFIG_STATUS <<\_ACEOF
++cat >>$CONFIG_STATUS <<\_ACEOF || ac_write_fail=1
+ exec 5>>config.log
+ {
+   echo
+   sed 'h;s/./-/g;s/^.../## /;s/...$/ ##/;p;x;p;x' <<_ASBOX
+ ## Running $as_me. ##
+ _ASBOX
+-  echo "$ac_log"
++  printf "%s\n" "$ac_log"
+ } >&5
+ 
+ _ACEOF
+-cat >>$CONFIG_STATUS <<_ACEOF
++cat >>$CONFIG_STATUS <<_ACEOF || ac_write_fail=1
+ #
+ # INIT-COMMANDS
+ #
+@@ -22608,7 +19838,7 @@ fi
+ 
+ _ACEOF
+ 
+-cat >>$CONFIG_STATUS <<\_ACEOF
++cat >>$CONFIG_STATUS <<\_ACEOF || ac_write_fail=1
+ 
+ # Handling of arguments.
+ for ac_config_target in $ac_config_targets
+@@ -23029,9 +20259,7 @@ do
+     "${makefiles}") CONFIG_FILES="$CONFIG_FILES ${makefiles}" ;;
+     "default") CONFIG_COMMANDS="$CONFIG_COMMANDS default" ;;
+ 
+-  *) { { echo "$as_me:$LINENO: error: invalid argument: $ac_config_target" >&5
+-echo "$as_me: error: invalid argument: $ac_config_target" >&2;}
+-   { (exit 1); exit 1; }; };;
++  *) as_fn_error $? "invalid argument: \`$ac_config_target'" "$LINENO" 5;;
+   esac
+ done
+ 
+@@ -23041,10 +20269,10 @@ done
+ # We use the long form for the default assignment because of an extremely
+ # bizarre bug on SunOS 4.1.3.
+ if $ac_need_defaults; then
+-  test "${CONFIG_FILES+set}" = set || CONFIG_FILES=$config_files
+-  test "${CONFIG_HEADERS+set}" = set || CONFIG_HEADERS=$config_headers
+-  test "${CONFIG_LINKS+set}" = set || CONFIG_LINKS=$config_links
+-  test "${CONFIG_COMMANDS+set}" = set || CONFIG_COMMANDS=$config_commands
++  test ${CONFIG_FILES+y} || CONFIG_FILES=$config_files
++  test ${CONFIG_HEADERS+y} || CONFIG_HEADERS=$config_headers
++  test ${CONFIG_LINKS+y} || CONFIG_LINKS=$config_links
++  test ${CONFIG_COMMANDS+y} || CONFIG_COMMANDS=$config_commands
+ fi
+ 
+ # Have a temporary directory for convenience.  Make it in the build tree
+@@ -23055,266 +20283,302 @@ fi
+ # after its creation but before its name has been assigned to `$tmp'.
+ $debug ||
+ {
+-  tmp=
++  tmp= ac_tmp=
+   trap 'exit_status=$?
+-  { test -z "$tmp" || test ! -d "$tmp" || rm -fr "$tmp"; } && exit $exit_status
++  : "${ac_tmp:=$tmp}"
++  { test ! -d "$ac_tmp" || rm -fr "$ac_tmp"; } && exit $exit_status
+ ' 0
+-  trap '{ (exit 1); exit 1; }' 1 2 13 15
++  trap 'as_fn_exit 1' 1 2 13 15
+ }
+ # Create a (secure) tmp directory for tmp files.
+ 
+ {
+   tmp=`(umask 077 && mktemp -d "./confXXXXXX") 2>/dev/null` &&
+-  test -n "$tmp" && test -d "$tmp"
++  test -d "$tmp"
+ }  ||
+ {
+   tmp=./conf$$-$RANDOM
+   (umask 077 && mkdir "$tmp")
+-} ||
+-{
+-   echo "$me: cannot create a temporary directory in ." >&2
+-   { (exit 1); exit 1; }
+-}
+-
+-#
+-# Set up the sed scripts for CONFIG_FILES section.
+-#
++} || as_fn_error $? "cannot create a temporary directory in ." "$LINENO" 5
++ac_tmp=$tmp
+ 
+-# No need to generate the scripts if there are no CONFIG_FILES.
+-# This happens for instance when ./config.status config.h
++# Set up the scripts for CONFIG_FILES section.
++# No need to generate them if there are no CONFIG_FILES.
++# This happens for instance with `./config.status config.h'.
+ if test -n "$CONFIG_FILES"; then
+ 
+-_ACEOF
+-
+-
+-
+-ac_delim='%!_!# '
+-for ac_last_try in false false false false false :; do
+-  cat >conf$$subs.sed <<_ACEOF
+-SHELL!$SHELL$ac_delim
+-PATH_SEPARATOR!$PATH_SEPARATOR$ac_delim
+-PACKAGE_NAME!$PACKAGE_NAME$ac_delim
+-PACKAGE_TARNAME!$PACKAGE_TARNAME$ac_delim
+-PACKAGE_VERSION!$PACKAGE_VERSION$ac_delim
+-PACKAGE_STRING!$PACKAGE_STRING$ac_delim
+-PACKAGE_BUGREPORT!$PACKAGE_BUGREPORT$ac_delim
+-exec_prefix!$exec_prefix$ac_delim
+-prefix!$prefix$ac_delim
+-program_transform_name!$program_transform_name$ac_delim
+-bindir!$bindir$ac_delim
+-sbindir!$sbindir$ac_delim
+-libexecdir!$libexecdir$ac_delim
+-datarootdir!$datarootdir$ac_delim
+-datadir!$datadir$ac_delim
+-sysconfdir!$sysconfdir$ac_delim
+-sharedstatedir!$sharedstatedir$ac_delim
+-localstatedir!$localstatedir$ac_delim
+-includedir!$includedir$ac_delim
+-oldincludedir!$oldincludedir$ac_delim
+-docdir!$docdir$ac_delim
+-infodir!$infodir$ac_delim
+-htmldir!$htmldir$ac_delim
+-dvidir!$dvidir$ac_delim
+-pdfdir!$pdfdir$ac_delim
+-psdir!$psdir$ac_delim
+-libdir!$libdir$ac_delim
+-localedir!$localedir$ac_delim
+-mandir!$mandir$ac_delim
+-DEFS!$DEFS$ac_delim
+-ECHO_C!$ECHO_C$ac_delim
+-ECHO_N!$ECHO_N$ac_delim
+-ECHO_T!$ECHO_T$ac_delim
+-LIBS!$LIBS$ac_delim
+-build_alias!$build_alias$ac_delim
+-host_alias!$host_alias$ac_delim
+-target_alias!$target_alias$ac_delim
+-build!$build$ac_delim
+-build_cpu!$build_cpu$ac_delim
+-build_vendor!$build_vendor$ac_delim
+-build_os!$build_os$ac_delim
+-host!$host$ac_delim
+-host_cpu!$host_cpu$ac_delim
+-host_vendor!$host_vendor$ac_delim
+-host_os!$host_os$ac_delim
+-target!$target$ac_delim
+-target_cpu!$target_cpu$ac_delim
+-target_vendor!$target_vendor$ac_delim
+-target_os!$target_os$ac_delim
+-ARCH!$ARCH$ac_delim
+-CXX!$CXX$ac_delim
+-CXXFLAGS!$CXXFLAGS$ac_delim
+-LDFLAGS!$LDFLAGS$ac_delim
+-CPPFLAGS!$CPPFLAGS$ac_delim
+-ac_ct_CXX!$ac_ct_CXX$ac_delim
+-EXEEXT!$EXEEXT$ac_delim
+-OBJEXT!$OBJEXT$ac_delim
+-CC!$CC$ac_delim
+-CFLAGS!$CFLAGS$ac_delim
+-ac_ct_CC!$ac_ct_CC$ac_delim
+-AR!$AR$ac_delim
+-M4!$M4$ac_delim
+-INSTALL_PROGRAM!$INSTALL_PROGRAM$ac_delim
+-INSTALL_SCRIPT!$INSTALL_SCRIPT$ac_delim
+-INSTALL_DATA!$INSTALL_DATA$ac_delim
+-CPP!$CPP$ac_delim
+-GREP!$GREP$ac_delim
+-EGREP!$EGREP$ac_delim
+-CXXCPP!$CXXCPP$ac_delim
+-CXX_FLAGS_NO_TEMPLATE_INST!$CXX_FLAGS_NO_TEMPLATE_INST$ac_delim
+-IMPLICIT_TEMPLATE_INSTANTIATION!$IMPLICIT_TEMPLATE_INSTANTIATION$ac_delim
+-DEPENDS_ON_TEMPLATE_IMPLEMENTATION!$DEPENDS_ON_TEMPLATE_IMPLEMENTATION$ac_delim
+-DEVELOPER_MAKEFILE!$DEVELOPER_MAKEFILE$ac_delim
+-SAMRAI_OPTIONAL_LIBS!$SAMRAI_OPTIONAL_LIBS$ac_delim
+-SAMRAI_ENABLE_SPECIAL!$SAMRAI_ENABLE_SPECIAL$ac_delim
+-F77!$F77$ac_delim
+-FFLAGS!$FFLAGS$ac_delim
+-F77LIBFLAGS!$F77LIBFLAGS$ac_delim
+-ac_ct_F77!$ac_ct_F77$ac_delim
+-FLIBS!$FLIBS$ac_delim
+-XMKMF!$XMKMF$ac_delim
+-X_CFLAGS!$X_CFLAGS$ac_delim
+-X_PRE_LIBS!$X_PRE_LIBS$ac_delim
+-X_LIBS!$X_LIBS$ac_delim
+-X_EXTRA_LIBS!$X_EXTRA_LIBS$ac_delim
+-DOXYGEN_BIN!$DOXYGEN_BIN$ac_delim
+-HAVE_DOT!$HAVE_DOT$ac_delim
+-DOT_PATH!$DOT_PATH$ac_delim
+-dox_output_dir!$dox_output_dir$ac_delim
+-SAMRAI_PERL!$SAMRAI_PERL$ac_delim
+-MPICC!$MPICC$ac_delim
+-MPIINCLUDE!$MPIINCLUDE$ac_delim
+-MPILIBDIRS!$MPILIBDIRS$ac_delim
+-MPILIBS!$MPILIBS$ac_delim
+-MPIFLAGS!$MPIFLAGS$ac_delim
+-SUNDIALS_C_FILES!$SUNDIALS_C_FILES$ac_delim
+-PARALLEL_RUN_BIN!$PARALLEL_RUN_BIN$ac_delim
+-_ACEOF
+-
+-  if test `sed -n "s/.*$ac_delim\$/X/p" conf$$subs.sed | grep -c X` = 97; then
+-    break
+-  elif $ac_last_try; then
+-    { { echo "$as_me:$LINENO: error: could not make $CONFIG_STATUS" >&5
+-echo "$as_me: error: could not make $CONFIG_STATUS" >&2;}
+-   { (exit 1); exit 1; }; }
+-  else
+-    ac_delim="$ac_delim!$ac_delim _$ac_delim!! "
+-  fi
+-done
+ 
+-ac_eof=`sed -n '/^CEOF[0-9]*$/s/CEOF/0/p' conf$$subs.sed`
+-if test -n "$ac_eof"; then
+-  ac_eof=`echo "$ac_eof" | sort -nru | sed 1q`
+-  ac_eof=`expr $ac_eof + 1`
++ac_cr=`echo X | tr X '\015'`
++# On cygwin, bash can eat \r inside `` if the user requested igncr.
++# But we know of no other shell where ac_cr would be empty at this
++# point, so we can use a bashism as a fallback.
++if test "x$ac_cr" = x; then
++  eval ac_cr=\$\'\\r\'
++fi
++ac_cs_awk_cr=`$AWK 'BEGIN { print "a\rb" }' </dev/null 2>/dev/null`
++if test "$ac_cs_awk_cr" = "a${ac_cr}b"; then
++  ac_cs_awk_cr='\\r'
++else
++  ac_cs_awk_cr=$ac_cr
+ fi
+ 
+-cat >>$CONFIG_STATUS <<_ACEOF
+-cat >"\$tmp/subs-1.sed" <<\CEOF$ac_eof
+-/@[a-zA-Z_][a-zA-Z_0-9]*@/!b
+-_ACEOF
+-sed '
+-s/[,\\&]/\\&/g; s/@/@|#_!!_#|/g
+-s/^/s,@/; s/!/@,|#_!!_#|/
+-:n
+-t n
+-s/'"$ac_delim"'$/,g/; t
+-s/$/\\/; p
+-N; s/^.*\n//; s/[,\\&]/\\&/g; s/@/@|#_!!_#|/g; b n
+-' >>$CONFIG_STATUS <conf$$subs.sed
+-rm -f conf$$subs.sed
+-cat >>$CONFIG_STATUS <<_ACEOF
+-CEOF$ac_eof
++echo 'BEGIN {' >"$ac_tmp/subs1.awk" &&
+ _ACEOF
+ 
+ 
++{
++  echo "cat >conf$$subs.awk <<_ACEOF" &&
++  echo "$ac_subst_vars" | sed 's/.*/&!$&$ac_delim/' &&
++  echo "_ACEOF"
++} >conf$$subs.sh ||
++  as_fn_error $? "could not make $CONFIG_STATUS" "$LINENO" 5
++ac_delim_num=`echo "$ac_subst_vars" | grep -c '^'`
+ ac_delim='%!_!# '
+ for ac_last_try in false false false false false :; do
+-  cat >conf$$subs.sed <<_ACEOF
+-TEST_NPROCS!$TEST_NPROCS$ac_delim
+-INSTDIR!$INSTDIR$ac_delim
+-SAMRAI_TARGET!$SAMRAI_TARGET$ac_delim
+-TAU_INCLUDE!$TAU_INCLUDE$ac_delim
+-XARGS!$XARGS$ac_delim
+-F77_FLAGS!$F77_FLAGS$ac_delim
+-C_FLAGS!$C_FLAGS$ac_delim
+-CXX_FLAGS!$CXX_FLAGS$ac_delim
+-LD_FLAGS!$LD_FLAGS$ac_delim
+-CXXLD_FLAGS!$CXXLD_FLAGS$ac_delim
+-LIB_SUFFIX!$LIB_SUFFIX$ac_delim
+-SRCDIR_COMPILE_PREFIX!$SRCDIR_COMPILE_PREFIX$ac_delim
+-INC_PATH!$INC_PATH$ac_delim
+-LIB_PATH!$LIB_PATH$ac_delim
+-LIB_NAME!$LIB_NAME$ac_delim
+-LIBOBJS!$LIBOBJS$ac_delim
+-LTLIBOBJS!$LTLIBOBJS$ac_delim
+-_ACEOF
++  . ./conf$$subs.sh ||
++    as_fn_error $? "could not make $CONFIG_STATUS" "$LINENO" 5
+ 
+-  if test `sed -n "s/.*$ac_delim\$/X/p" conf$$subs.sed | grep -c X` = 17; then
++  ac_delim_n=`sed -n "s/.*$ac_delim\$/X/p" conf$$subs.awk | grep -c X`
++  if test $ac_delim_n = $ac_delim_num; then
+     break
+   elif $ac_last_try; then
+-    { { echo "$as_me:$LINENO: error: could not make $CONFIG_STATUS" >&5
+-echo "$as_me: error: could not make $CONFIG_STATUS" >&2;}
+-   { (exit 1); exit 1; }; }
++    as_fn_error $? "could not make $CONFIG_STATUS" "$LINENO" 5
+   else
+     ac_delim="$ac_delim!$ac_delim _$ac_delim!! "
+   fi
+ done
++rm -f conf$$subs.sh
++
++cat >>$CONFIG_STATUS <<_ACEOF || ac_write_fail=1
++cat >>"\$ac_tmp/subs1.awk" <<\\_ACAWK &&
++_ACEOF
++sed -n '
++h
++s/^/S["/; s/!.*/"]=/
++p
++g
++s/^[^!]*!//
++:repl
++t repl
++s/'"$ac_delim"'$//
++t delim
++:nl
++h
++s/\(.\{148\}\)..*/\1/
++t more1
++s/["\\]/\\&/g; s/^/"/; s/$/\\n"\\/
++p
++n
++b repl
++:more1
++s/["\\]/\\&/g; s/^/"/; s/$/"\\/
++p
++g
++s/.\{148\}//
++t nl
++:delim
++h
++s/\(.\{148\}\)..*/\1/
++t more2
++s/["\\]/\\&/g; s/^/"/; s/$/"/
++p
++b
++:more2
++s/["\\]/\\&/g; s/^/"/; s/$/"\\/
++p
++g
++s/.\{148\}//
++t delim
++' <conf$$subs.awk | sed '
++/^[^""]/{
++  N
++  s/\n//
++}
++' >>$CONFIG_STATUS || ac_write_fail=1
++rm -f conf$$subs.awk
++cat >>$CONFIG_STATUS <<_ACEOF || ac_write_fail=1
++_ACAWK
++cat >>"\$ac_tmp/subs1.awk" <<_ACAWK &&
++  for (key in S) S_is_set[key] = 1
++  FS = ""
+ 
+-ac_eof=`sed -n '/^CEOF[0-9]*$/s/CEOF/0/p' conf$$subs.sed`
+-if test -n "$ac_eof"; then
+-  ac_eof=`echo "$ac_eof" | sort -nru | sed 1q`
+-  ac_eof=`expr $ac_eof + 1`
+-fi
++}
++{
++  line = $ 0
++  nfields = split(line, field, "@")
++  substed = 0
++  len = length(field[1])
++  for (i = 2; i < nfields; i++) {
++    key = field[i]
++    keylen = length(key)
++    if (S_is_set[key]) {
++      value = S[key]
++      line = substr(line, 1, len) "" value "" substr(line, len + keylen + 3)
++      len += length(value) + length(field[++i])
++      substed = 1
++    } else
++      len += 1 + keylen
++  }
++
++  print line
++}
+ 
+-cat >>$CONFIG_STATUS <<_ACEOF
+-cat >"\$tmp/subs-2.sed" <<\CEOF$ac_eof
+-/@[a-zA-Z_][a-zA-Z_0-9]*@/!b end
++_ACAWK
+ _ACEOF
+-sed '
+-s/[,\\&]/\\&/g; s/@/@|#_!!_#|/g
+-s/^/s,@/; s/!/@,|#_!!_#|/
+-:n
+-t n
+-s/'"$ac_delim"'$/,g/; t
+-s/$/\\/; p
+-N; s/^.*\n//; s/[,\\&]/\\&/g; s/@/@|#_!!_#|/g; b n
+-' >>$CONFIG_STATUS <conf$$subs.sed
+-rm -f conf$$subs.sed
+-cat >>$CONFIG_STATUS <<_ACEOF
+-:end
+-s/|#_!!_#|//g
+-CEOF$ac_eof
++cat >>$CONFIG_STATUS <<\_ACEOF || ac_write_fail=1
++if sed "s/$ac_cr//" < /dev/null > /dev/null 2>&1; then
++  sed "s/$ac_cr\$//; s/$ac_cr/$ac_cs_awk_cr/g"
++else
++  cat
++fi < "$ac_tmp/subs1.awk" > "$ac_tmp/subs.awk" \
++  || as_fn_error $? "could not setup config files machinery" "$LINENO" 5
+ _ACEOF
+ 
+-
+-# VPATH may cause trouble with some makes, so we remove $(srcdir),
+-# ${srcdir} and @srcdir@ from VPATH if srcdir is ".", strip leading and
++# VPATH may cause trouble with some makes, so we remove sole $(srcdir),
++# ${srcdir} and @srcdir@ entries from VPATH if srcdir is ".", strip leading and
+ # trailing colons and then remove the whole line if VPATH becomes empty
+ # (actually we leave an empty line to preserve line numbers).
+ if test "x$srcdir" = x.; then
+-  ac_vpsub='/^[	 ]*VPATH[	 ]*=/{
+-s/:*\$(srcdir):*/:/
+-s/:*\${srcdir}:*/:/
+-s/:*@srcdir@:*/:/
+-s/^\([^=]*=[	 ]*\):*/\1/
++  ac_vpsub='/^[	 ]*VPATH[	 ]*=[	 ]*/{
++h
++s///
++s/^/:/
++s/[	 ]*$/:/
++s/:\$(srcdir):/:/g
++s/:\${srcdir}:/:/g
++s/:@srcdir@:/:/g
++s/^:*//
+ s/:*$//
++x
++s/\(=[	 ]*\).*/\1/
++G
++s/\n//
+ s/^[^=]*=[	 ]*$//
+ }'
+ fi
+ 
+-cat >>$CONFIG_STATUS <<\_ACEOF
++cat >>$CONFIG_STATUS <<\_ACEOF || ac_write_fail=1
+ fi # test -n "$CONFIG_FILES"
+ 
++# Set up the scripts for CONFIG_HEADERS section.
++# No need to generate them if there are no CONFIG_HEADERS.
++# This happens for instance with `./config.status Makefile'.
++if test -n "$CONFIG_HEADERS"; then
++cat >"$ac_tmp/defines.awk" <<\_ACAWK ||
++BEGIN {
++_ACEOF
++
++# Transform confdefs.h into an awk script `defines.awk', embedded as
++# here-document in config.status, that substitutes the proper values into
++# config.h.in to produce config.h.
++
++# Create a delimiter string that does not exist in confdefs.h, to ease
++# handling of long lines.
++ac_delim='%!_!# '
++for ac_last_try in false false :; do
++  ac_tt=`sed -n "/$ac_delim/p" confdefs.h`
++  if test -z "$ac_tt"; then
++    break
++  elif $ac_last_try; then
++    as_fn_error $? "could not make $CONFIG_HEADERS" "$LINENO" 5
++  else
++    ac_delim="$ac_delim!$ac_delim _$ac_delim!! "
++  fi
++done
++
++# For the awk script, D is an array of macro values keyed by name,
++# likewise P contains macro parameters if any.  Preserve backslash
++# newline sequences.
++
++ac_word_re=[_$as_cr_Letters][_$as_cr_alnum]*
++sed -n '
++s/.\{148\}/&'"$ac_delim"'/g
++t rset
++:rset
++s/^[	 ]*#[	 ]*define[	 ][	 ]*/ /
++t def
++d
++:def
++s/\\$//
++t bsnl
++s/["\\]/\\&/g
++s/^ \('"$ac_word_re"'\)\(([^()]*)\)[	 ]*\(.*\)/P["\1"]="\2"\
++D["\1"]=" \3"/p
++s/^ \('"$ac_word_re"'\)[	 ]*\(.*\)/D["\1"]=" \2"/p
++d
++:bsnl
++s/["\\]/\\&/g
++s/^ \('"$ac_word_re"'\)\(([^()]*)\)[	 ]*\(.*\)/P["\1"]="\2"\
++D["\1"]=" \3\\\\\\n"\\/p
++t cont
++s/^ \('"$ac_word_re"'\)[	 ]*\(.*\)/D["\1"]=" \2\\\\\\n"\\/p
++t cont
++d
++:cont
++n
++s/.\{148\}/&'"$ac_delim"'/g
++t clear
++:clear
++s/\\$//
++t bsnlc
++s/["\\]/\\&/g; s/^/"/; s/$/"/p
++d
++:bsnlc
++s/["\\]/\\&/g; s/^/"/; s/$/\\\\\\n"\\/p
++b cont
++' <confdefs.h | sed '
++s/'"$ac_delim"'/"\\\
++"/g' >>$CONFIG_STATUS || ac_write_fail=1
++
++cat >>$CONFIG_STATUS <<_ACEOF || ac_write_fail=1
++  for (key in D) D_is_set[key] = 1
++  FS = ""
++}
++/^[\t ]*#[\t ]*(define|undef)[\t ]+$ac_word_re([\t (]|\$)/ {
++  line = \$ 0
++  split(line, arg, " ")
++  if (arg[1] == "#") {
++    defundef = arg[2]
++    mac1 = arg[3]
++  } else {
++    defundef = substr(arg[1], 2)
++    mac1 = arg[2]
++  }
++  split(mac1, mac2, "(") #)
++  macro = mac2[1]
++  prefix = substr(line, 1, index(line, defundef) - 1)
++  if (D_is_set[macro]) {
++    # Preserve the white space surrounding the "#".
++    print prefix "define", macro P[macro] D[macro]
++    next
++  } else {
++    # Replace #undef with comments.  This is necessary, for example,
++    # in the case of _POSIX_SOURCE, which is predefined and required
++    # on some systems where configure will not decide to define it.
++    if (defundef == "undef") {
++      print "/*", prefix defundef, macro, "*/"
++      next
++    }
++  }
++}
++{ print }
++_ACAWK
++_ACEOF
++cat >>$CONFIG_STATUS <<\_ACEOF || ac_write_fail=1
++  as_fn_error $? "could not setup config headers machinery" "$LINENO" 5
++fi # test -n "$CONFIG_HEADERS"
++
+ 
+-for ac_tag in  :F $CONFIG_FILES  :H $CONFIG_HEADERS  :L $CONFIG_LINKS  :C $CONFIG_COMMANDS
++eval set X "  :F $CONFIG_FILES  :H $CONFIG_HEADERS  :L $CONFIG_LINKS  :C $CONFIG_COMMANDS"
++shift
++for ac_tag
+ do
+   case $ac_tag in
+   :[FHLC]) ac_mode=$ac_tag; continue;;
+   esac
+   case $ac_mode$ac_tag in
+   :[FHL]*:*);;
+-  :L* | :C*:*) { { echo "$as_me:$LINENO: error: Invalid tag $ac_tag." >&5
+-echo "$as_me: error: Invalid tag $ac_tag." >&2;}
+-   { (exit 1); exit 1; }; };;
++  :L* | :C*:*) as_fn_error $? "invalid tag \`$ac_tag'" "$LINENO" 5;;
+   :[FH]-) ac_tag=-:-;;
+   :[FH]*) ac_tag=$ac_tag:$ac_tag.in;;
+   esac
+@@ -23333,7 +20597,7 @@ echo "$as_me: error: Invalid tag $ac_tag." >&2;}
+     for ac_f
+     do
+       case $ac_f in
+-      -) ac_f="$tmp/stdin";;
++      -) ac_f="$ac_tmp/stdin";;
+       *) # Look for the file first in the build tree, then in the source tree
+ 	 # (if the path is not absolute).  The absolute path cannot be DOS-style,
+ 	 # because $ac_f cannot contain `:'.
+@@ -23342,26 +20606,34 @@ echo "$as_me: error: Invalid tag $ac_tag." >&2;}
+ 	   [\\/$]*) false;;
+ 	   *) test -f "$srcdir/$ac_f" && ac_f="$srcdir/$ac_f";;
+ 	   esac ||
+-	   { { echo "$as_me:$LINENO: error: cannot find input file: $ac_f" >&5
+-echo "$as_me: error: cannot find input file: $ac_f" >&2;}
+-   { (exit 1); exit 1; }; };;
++	   as_fn_error 1 "cannot find input file: \`$ac_f'" "$LINENO" 5;;
+       esac
+-      ac_file_inputs="$ac_file_inputs $ac_f"
++      case $ac_f in *\'*) ac_f=`printf "%s\n" "$ac_f" | sed "s/'/'\\\\\\\\''/g"`;; esac
++      as_fn_append ac_file_inputs " '$ac_f'"
+     done
+ 
+     # Let's still pretend it is `configure' which instantiates (i.e., don't
+     # use $as_me), people would be surprised to read:
+     #    /* config.h.  Generated by config.status.  */
+-    configure_input="Generated from "`IFS=:
+-	  echo $* | sed 's|^[^:]*/||;s|:[^:]*/|, |g'`" by configure."
++    configure_input='Generated from '`
++	  printf "%s\n" "$*" | sed 's|^[^:]*/||;s|:[^:]*/|, |g'
++	`' by configure.'
+     if test x"$ac_file" != x-; then
+       configure_input="$ac_file.  $configure_input"
+-      { echo "$as_me:$LINENO: creating $ac_file" >&5
+-echo "$as_me: creating $ac_file" >&6;}
++      { printf "%s\n" "$as_me:${as_lineno-$LINENO}: creating $ac_file" >&5
++printf "%s\n" "$as_me: creating $ac_file" >&6;}
+     fi
++    # Neutralize special characters interpreted by sed in replacement strings.
++    case $configure_input in #(
++    *\&* | *\|* | *\\* )
++       ac_sed_conf_input=`printf "%s\n" "$configure_input" |
++       sed 's/[\\\\&|]/\\\\&/g'`;; #(
++    *) ac_sed_conf_input=$configure_input;;
++    esac
+ 
+     case $ac_tag in
+-    *:-:* | *:-) cat >"$tmp/stdin";;
++    *:-:* | *:-) cat >"$ac_tmp/stdin" \
++      || as_fn_error $? "could not create $ac_file" "$LINENO" 5 ;;
+     esac
+     ;;
+   esac
+@@ -23371,42 +20643,7 @@ $as_expr X"$ac_file" : 'X\(.*[^/]\)//*[^/][^/]*/*$' \| \
+ 	 X"$ac_file" : 'X\(//\)[^/]' \| \
+ 	 X"$ac_file" : 'X\(//\)$' \| \
+ 	 X"$ac_file" : 'X\(/\)' \| . 2>/dev/null ||
+-echo X"$ac_file" |
+-    sed '/^X\(.*[^/]\)\/\/*[^/][^/]*\/*$/{
+-	    s//\1/
+-	    q
+-	  }
+-	  /^X\(\/\/\)[^/].*/{
+-	    s//\1/
+-	    q
+-	  }
+-	  /^X\(\/\/\)$/{
+-	    s//\1/
+-	    q
+-	  }
+-	  /^X\(\/\).*/{
+-	    s//\1/
+-	    q
+-	  }
+-	  s/.*/./; q'`
+-  { as_dir="$ac_dir"
+-  case $as_dir in #(
+-  -*) as_dir=./$as_dir;;
+-  esac
+-  test -d "$as_dir" || { $as_mkdir_p && mkdir -p "$as_dir"; } || {
+-    as_dirs=
+-    while :; do
+-      case $as_dir in #(
+-      *\'*) as_qdir=`echo "$as_dir" | sed "s/'/'\\\\\\\\''/g"`;; #(
+-      *) as_qdir=$as_dir;;
+-      esac
+-      as_dirs="'$as_qdir' $as_dirs"
+-      as_dir=`$as_dirname -- "$as_dir" ||
+-$as_expr X"$as_dir" : 'X\(.*[^/]\)//*[^/][^/]*/*$' \| \
+-	 X"$as_dir" : 'X\(//\)[^/]' \| \
+-	 X"$as_dir" : 'X\(//\)$' \| \
+-	 X"$as_dir" : 'X\(/\)' \| . 2>/dev/null ||
+-echo X"$as_dir" |
++printf "%s\n" X"$ac_file" |
+     sed '/^X\(.*[^/]\)\/\/*[^/][^/]*\/*$/{
+ 	    s//\1/
+ 	    q
+@@ -23424,20 +20661,15 @@ echo X"$as_dir" |
+ 	    q
+ 	  }
+ 	  s/.*/./; q'`
+-      test -d "$as_dir" && break
+-    done
+-    test -z "$as_dirs" || eval "mkdir $as_dirs"
+-  } || test -d "$as_dir" || { { echo "$as_me:$LINENO: error: cannot create directory $as_dir" >&5
+-echo "$as_me: error: cannot create directory $as_dir" >&2;}
+-   { (exit 1); exit 1; }; }; }
++  as_dir="$ac_dir"; as_fn_mkdir_p
+   ac_builddir=.
+ 
+ case "$ac_dir" in
+ .) ac_dir_suffix= ac_top_builddir_sub=. ac_top_build_prefix= ;;
+ *)
+-  ac_dir_suffix=/`echo "$ac_dir" | sed 's,^\.[\\/],,'`
++  ac_dir_suffix=/`printf "%s\n" "$ac_dir" | sed 's|^\.[\\/]||'`
+   # A ".." for each directory in $ac_dir_suffix.
+-  ac_top_builddir_sub=`echo "$ac_dir_suffix" | sed 's,/[^\\/]*,/..,g;s,/,,'`
++  ac_top_builddir_sub=`printf "%s\n" "$ac_dir_suffix" | sed 's|/[^\\/]*|/..|g;s|/||'`
+   case $ac_top_builddir_sub in
+   "") ac_top_builddir_sub=. ac_top_build_prefix= ;;
+   *)  ac_top_build_prefix=$ac_top_builddir_sub/ ;;
+@@ -23482,12 +20714,12 @@ ac_abs_srcdir=$ac_abs_top_srcdir$ac_dir_suffix
+   esac
+ _ACEOF
+ 
+-cat >>$CONFIG_STATUS <<\_ACEOF
++cat >>$CONFIG_STATUS <<\_ACEOF || ac_write_fail=1
+ # If the template does not know about datarootdir, expand it.
+ # FIXME: This hack should be removed a few years after 2.60.
+ ac_datarootdir_hack=; ac_datarootdir_seen=
+-
+-case `sed -n '/datarootdir/ {
++ac_sed_dataroot='
++/datarootdir/ {
+   p
+   q
+ }
+@@ -23495,36 +20727,37 @@ case `sed -n '/datarootdir/ {
+ /@docdir@/p
+ /@infodir@/p
+ /@localedir@/p
+-/@mandir@/p
+-' $ac_file_inputs` in
++/@mandir@/p'
++case `eval "sed -n \"\$ac_sed_dataroot\" $ac_file_inputs"` in
+ *datarootdir*) ac_datarootdir_seen=yes;;
+ *@datadir@*|*@docdir@*|*@infodir@*|*@localedir@*|*@mandir@*)
+-  { echo "$as_me:$LINENO: WARNING: $ac_file_inputs seems to ignore the --datarootdir setting" >&5
+-echo "$as_me: WARNING: $ac_file_inputs seems to ignore the --datarootdir setting" >&2;}
++  { printf "%s\n" "$as_me:${as_lineno-$LINENO}: WARNING: $ac_file_inputs seems to ignore the --datarootdir setting" >&5
++printf "%s\n" "$as_me: WARNING: $ac_file_inputs seems to ignore the --datarootdir setting" >&2;}
+ _ACEOF
+-cat >>$CONFIG_STATUS <<_ACEOF
++cat >>$CONFIG_STATUS <<_ACEOF || ac_write_fail=1
+   ac_datarootdir_hack='
+   s&@datadir@&$datadir&g
+   s&@docdir@&$docdir&g
+   s&@infodir@&$infodir&g
+   s&@localedir@&$localedir&g
+   s&@mandir@&$mandir&g
+-    s&\\\${datarootdir}&$datarootdir&g' ;;
++  s&\\\${datarootdir}&$datarootdir&g' ;;
+ esac
+ _ACEOF
+ 
+ # Neutralize VPATH when `$srcdir' = `.'.
+ # Shell code in configure.ac might set extrasub.
+ # FIXME: do we really want to maintain this feature?
+-cat >>$CONFIG_STATUS <<_ACEOF
+-  sed "$ac_vpsub
++cat >>$CONFIG_STATUS <<_ACEOF || ac_write_fail=1
++ac_sed_extra="$ac_vpsub
+ $extrasub
+ _ACEOF
+-cat >>$CONFIG_STATUS <<\_ACEOF
++cat >>$CONFIG_STATUS <<\_ACEOF || ac_write_fail=1
+ :t
+ /@[a-zA-Z_][a-zA-Z_0-9]*@/!b
+-s&@configure_input@&$configure_input&;t t
++s|@configure_input@|$ac_sed_conf_input|;t t
+ s&@top_builddir@&$ac_top_builddir_sub&;t t
++s&@top_build_prefix@&$ac_top_build_prefix&;t t
+ s&@srcdir@&$ac_srcdir&;t t
+ s&@abs_srcdir@&$ac_abs_srcdir&;t t
+ s&@top_srcdir@&$ac_top_srcdir&;t t
+@@ -23535,149 +20768,84 @@ s&@abs_top_builddir@&$ac_abs_top_builddir&;t t
+ s&@INSTALL@&$ac_INSTALL&;t t
+ s&@MKDIR_P@&$ac_MKDIR_P&;t t
+ $ac_datarootdir_hack
+-" $ac_file_inputs | sed -f "$tmp/subs-1.sed" | sed -f "$tmp/subs-2.sed" >$tmp/out
++"
++eval sed \"\$ac_sed_extra\" "$ac_file_inputs" | $AWK -f "$ac_tmp/subs.awk" \
++  >$ac_tmp/out || as_fn_error $? "could not create $ac_file" "$LINENO" 5
+ 
+ test -z "$ac_datarootdir_hack$ac_datarootdir_seen" &&
+-  { ac_out=`sed -n '/\${datarootdir}/p' "$tmp/out"`; test -n "$ac_out"; } &&
+-  { ac_out=`sed -n '/^[	 ]*datarootdir[	 ]*:*=/p' "$tmp/out"`; test -z "$ac_out"; } &&
+-  { echo "$as_me:$LINENO: WARNING: $ac_file contains a reference to the variable \`datarootdir'
+-which seems to be undefined.  Please make sure it is defined." >&5
+-echo "$as_me: WARNING: $ac_file contains a reference to the variable \`datarootdir'
+-which seems to be undefined.  Please make sure it is defined." >&2;}
+-
+-  rm -f "$tmp/stdin"
++  { ac_out=`sed -n '/\${datarootdir}/p' "$ac_tmp/out"`; test -n "$ac_out"; } &&
++  { ac_out=`sed -n '/^[	 ]*datarootdir[	 ]*:*=/p' \
++      "$ac_tmp/out"`; test -z "$ac_out"; } &&
++  { printf "%s\n" "$as_me:${as_lineno-$LINENO}: WARNING: $ac_file contains a reference to the variable \`datarootdir'
++which seems to be undefined.  Please make sure it is defined" >&5
++printf "%s\n" "$as_me: WARNING: $ac_file contains a reference to the variable \`datarootdir'
++which seems to be undefined.  Please make sure it is defined" >&2;}
++
++  rm -f "$ac_tmp/stdin"
+   case $ac_file in
+-  -) cat "$tmp/out"; rm -f "$tmp/out";;
+-  *) rm -f "$ac_file"; mv "$tmp/out" $ac_file;;
+-  esac
++  -) cat "$ac_tmp/out" && rm -f "$ac_tmp/out";;
++  *) rm -f "$ac_file" && mv "$ac_tmp/out" "$ac_file";;
++  esac \
++  || as_fn_error $? "could not create $ac_file" "$LINENO" 5
+  ;;
+   :H)
+   #
+   # CONFIG_HEADER
+   #
+-_ACEOF
+-
+-# Transform confdefs.h into a sed script `conftest.defines', that
+-# substitutes the proper values into config.h.in to produce config.h.
+-rm -f conftest.defines conftest.tail
+-# First, append a space to every undef/define line, to ease matching.
+-echo 's/$/ /' >conftest.defines
+-# Then, protect against being on the right side of a sed subst, or in
+-# an unquoted here document, in config.status.  If some macros were
+-# called several times there might be several #defines for the same
+-# symbol, which is useless.  But do not sort them, since the last
+-# AC_DEFINE must be honored.
+-ac_word_re=[_$as_cr_Letters][_$as_cr_alnum]*
+-# These sed commands are passed to sed as "A NAME B PARAMS C VALUE D", where
+-# NAME is the cpp macro being defined, VALUE is the value it is being given.
+-# PARAMS is the parameter list in the macro definition--in most cases, it's
+-# just an empty string.
+-ac_dA='s,^\\([	 #]*\\)[^	 ]*\\([	 ]*'
+-ac_dB='\\)[	 (].*,\\1define\\2'
+-ac_dC=' '
+-ac_dD=' ,'
+-
+-uniq confdefs.h |
+-  sed -n '
+-	t rset
+-	:rset
+-	s/^[	 ]*#[	 ]*define[	 ][	 ]*//
+-	t ok
+-	d
+-	:ok
+-	s/[\\&,]/\\&/g
+-	s/^\('"$ac_word_re"'\)\(([^()]*)\)[	 ]*\(.*\)/ '"$ac_dA"'\1'"$ac_dB"'\2'"${ac_dC}"'\3'"$ac_dD"'/p
+-	s/^\('"$ac_word_re"'\)[	 ]*\(.*\)/'"$ac_dA"'\1'"$ac_dB$ac_dC"'\2'"$ac_dD"'/p
+-  ' >>conftest.defines
+-
+-# Remove the space that was appended to ease matching.
+-# Then replace #undef with comments.  This is necessary, for
+-# example, in the case of _POSIX_SOURCE, which is predefined and required
+-# on some systems where configure will not decide to define it.
+-# (The regexp can be short, since the line contains either #define or #undef.)
+-echo 's/ $//
+-s,^[	 #]*u.*,/* & */,' >>conftest.defines
+-
+-# Break up conftest.defines:
+-ac_max_sed_lines=50
+-
+-# First sed command is:	 sed -f defines.sed $ac_file_inputs >"$tmp/out1"
+-# Second one is:	 sed -f defines.sed "$tmp/out1" >"$tmp/out2"
+-# Third one will be:	 sed -f defines.sed "$tmp/out2" >"$tmp/out1"
+-# et cetera.
+-ac_in='$ac_file_inputs'
+-ac_out='"$tmp/out1"'
+-ac_nxt='"$tmp/out2"'
+-
+-while :
+-do
+-  # Write a here document:
+-    cat >>$CONFIG_STATUS <<_ACEOF
+-    # First, check the format of the line:
+-    cat >"\$tmp/defines.sed" <<\\CEOF
+-/^[	 ]*#[	 ]*undef[	 ][	 ]*$ac_word_re[	 ]*\$/b def
+-/^[	 ]*#[	 ]*define[	 ][	 ]*$ac_word_re[(	 ]/b def
+-b
+-:def
+-_ACEOF
+-  sed ${ac_max_sed_lines}q conftest.defines >>$CONFIG_STATUS
+-  echo 'CEOF
+-    sed -f "$tmp/defines.sed"' "$ac_in >$ac_out" >>$CONFIG_STATUS
+-  ac_in=$ac_out; ac_out=$ac_nxt; ac_nxt=$ac_in
+-  sed 1,${ac_max_sed_lines}d conftest.defines >conftest.tail
+-  grep . conftest.tail >/dev/null || break
+-  rm -f conftest.defines
+-  mv conftest.tail conftest.defines
+-done
+-rm -f conftest.defines conftest.tail
+-
+-echo "ac_result=$ac_in" >>$CONFIG_STATUS
+-cat >>$CONFIG_STATUS <<\_ACEOF
+   if test x"$ac_file" != x-; then
+-    echo "/* $configure_input  */" >"$tmp/config.h"
+-    cat "$ac_result" >>"$tmp/config.h"
+-    if diff $ac_file "$tmp/config.h" >/dev/null 2>&1; then
+-      { echo "$as_me:$LINENO: $ac_file is unchanged" >&5
+-echo "$as_me: $ac_file is unchanged" >&6;}
++    {
++      printf "%s\n" "/* $configure_input  */" >&1 \
++      && eval '$AWK -f "$ac_tmp/defines.awk"' "$ac_file_inputs"
++    } >"$ac_tmp/config.h" \
++      || as_fn_error $? "could not create $ac_file" "$LINENO" 5
++    if diff "$ac_file" "$ac_tmp/config.h" >/dev/null 2>&1; then
++      { printf "%s\n" "$as_me:${as_lineno-$LINENO}: $ac_file is unchanged" >&5
++printf "%s\n" "$as_me: $ac_file is unchanged" >&6;}
+     else
+-      rm -f $ac_file
+-      mv "$tmp/config.h" $ac_file
++      rm -f "$ac_file"
++      mv "$ac_tmp/config.h" "$ac_file" \
++	|| as_fn_error $? "could not create $ac_file" "$LINENO" 5
+     fi
+   else
+-    echo "/* $configure_input  */"
+-    cat "$ac_result"
++    printf "%s\n" "/* $configure_input  */" >&1 \
++      && eval '$AWK -f "$ac_tmp/defines.awk"' "$ac_file_inputs" \
++      || as_fn_error $? "could not create -" "$LINENO" 5
+   fi
+-  rm -f "$tmp/out12"
+  ;;
+   :L)
+   #
+   # CONFIG_LINK
+   #
+ 
+-  { echo "$as_me:$LINENO: linking $srcdir/$ac_source to $ac_file" >&5
+-echo "$as_me: linking $srcdir/$ac_source to $ac_file" >&6;}
++  if test "$ac_source" = "$ac_file" && test "$srcdir" = '.'; then
++    :
++  else
++    # Prefer the file from the source tree if names are identical.
++    if test "$ac_source" = "$ac_file" || test ! -r "$ac_source"; then
++      ac_source=$srcdir/$ac_source
++    fi
+ 
+-  if test ! -r "$srcdir/$ac_source"; then
+-    { { echo "$as_me:$LINENO: error: $srcdir/$ac_source: file not found" >&5
+-echo "$as_me: error: $srcdir/$ac_source: file not found" >&2;}
+-   { (exit 1); exit 1; }; }
+-  fi
+-  rm -f "$ac_file"
++    { printf "%s\n" "$as_me:${as_lineno-$LINENO}: linking $ac_source to $ac_file" >&5
++printf "%s\n" "$as_me: linking $ac_source to $ac_file" >&6;}
+ 
+-  # Try a relative symlink, then a hard link, then a copy.
+-  case $srcdir in
+-  [\\/$]* | ?:[\\/]* ) ac_rel_source=$srcdir/$ac_source ;;
+-      *) ac_rel_source=$ac_top_build_prefix$srcdir/$ac_source ;;
+-  esac
+-  ln -s "$ac_rel_source" "$ac_file" 2>/dev/null ||
+-    ln "$srcdir/$ac_source" "$ac_file" 2>/dev/null ||
+-    cp -p "$srcdir/$ac_source" "$ac_file" ||
+-    { { echo "$as_me:$LINENO: error: cannot link or copy $srcdir/$ac_source to $ac_file" >&5
+-echo "$as_me: error: cannot link or copy $srcdir/$ac_source to $ac_file" >&2;}
+-   { (exit 1); exit 1; }; }
++    if test ! -r "$ac_source"; then
++      as_fn_error $? "$ac_source: file not found" "$LINENO" 5
++    fi
++    rm -f "$ac_file"
++
++    # Try a relative symlink, then a hard link, then a copy.
++    case $ac_source in
++    [\\/$]* | ?:[\\/]* ) ac_rel_source=$ac_source ;;
++	*) ac_rel_source=$ac_top_build_prefix$ac_source ;;
++    esac
++    ln -s "$ac_rel_source" "$ac_file" 2>/dev/null ||
++      ln "$ac_source" "$ac_file" 2>/dev/null ||
++      cp -p "$ac_source" "$ac_file" ||
++      as_fn_error $? "cannot link or copy $ac_source to $ac_file" "$LINENO" 5
++  fi
+  ;;
+-  :C)  { echo "$as_me:$LINENO: executing $ac_file commands" >&5
+-echo "$as_me: executing $ac_file commands" >&6;}
++  :C)  { printf "%s\n" "$as_me:${as_lineno-$LINENO}: executing $ac_file commands" >&5
++printf "%s\n" "$as_me: executing $ac_file commands" >&6;}
+  ;;
+   esac
+ 
+@@ -23754,11 +20922,13 @@ done
+ done # for ac_tag
+ 
+ 
+-{ (exit 0); exit 0; }
++as_fn_exit 0
+ _ACEOF
+-chmod +x $CONFIG_STATUS
+ ac_clean_files=$ac_clean_files_save
+ 
++test $ac_write_fail = 0 ||
++  as_fn_error $? "write failure creating $CONFIG_STATUS" "$LINENO" 5
++
+ 
+ # configure is writing to config.log, and then calls config.status.
+ # config.status does its own redirection, appending to config.log.
+@@ -23778,6 +20948,11 @@ if test "$no_create" != yes; then
+   exec 5>>config.log
+   # Use ||, not &&, to avoid exiting from the if with $? = 1, which
+   # would make configure fail if this is the last instruction.
+-  $ac_cs_success || { (exit 1); exit 1; }
++  $ac_cs_success || as_fn_exit 1
+ fi
++if test -n "$ac_unrecognized_opts" && test "$enable_option_checking" != no; then
++  { printf "%s\n" "$as_me:${as_lineno-$LINENO}: WARNING: unrecognized options: $ac_unrecognized_opts" >&5
++printf "%s\n" "$as_me: WARNING: unrecognized options: $ac_unrecognized_opts" >&2;}
++fi
++
+ 
+diff --git a/configure.in b/configure.in
+index 4036565..e198787 100644
+--- a/configure.in
++++ b/configure.in
+@@ -7,8 +7,9 @@ dnl Modified:    $LastChangedDate: 2009-06-18 14:43:43 -0700 (Thu, 18 Jun 2009)
+ dnl Description: autoconfig configuration file
+ dnl
+ 
+-AC_INIT(COPYRIGHT)
+-AC_CONFIG_HEADER(include/SAMRAI_config.h:config/SAMRAI_config.h.in)
++AC_INIT
++AC_CONFIG_SRCDIR([COPYRIGHT])
++AC_CONFIG_HEADERS([include/SAMRAI_config.h:config/SAMRAI_config.h.in])
+ dnl
+ dnl Autoheader stuff
+ AH_TOP([
+@@ -68,7 +69,7 @@ BTNG_AC_LOG_VAR(CONFIG_SHELL)
+ AC_CONFIG_AUX_DIR(config)
+ 
+ # Get system type.
+-AC_CANONICAL_SYSTEM
++AC_CANONICAL_TARGET
+ BTNG_AC_LOG_VAR(target_cpu target_vendor target_os)
+ 
+ dnl SAMRAI has some code specific for the Solaris operating system.
+@@ -197,7 +198,7 @@ BTNG_AC_LOG_VAR(with_CXX CXX CCC, after running compiler search)
+ 
+ dnl
+ dnl Set up the C compiler.  This macro must come first and be followed
+-dnl AC_ISC_POSIX before other compiler tests are run.  See the autoconfig
++dnl AC_SEARCH_LIBS([strerror],[cposix]) before other compiler tests are run.  See the autoconfig
+ dnl manual for details.
+ dnl
+ 
+@@ -207,7 +208,7 @@ else
+    AC_PROG_CC
+ fi
+ 
+-AC_ISC_POSIX
++AC_SEARCH_LIBS([strerror],[cposix])
+ 
+ 
+ dnl
+@@ -620,7 +621,7 @@ your LD_LIBRARY_PATH appropriately and run it.
+ done
+ 
+ 
+-if test "$ac_cv_prog_g77" = "yes"; then
++if test "$ac_cv_f77_compiler_gnu" = "yes"; then
+    F77_FLAGS="-Wall -Wimplicit -Wunused $F77_FLAGS"
+ else
+    case $ARCH in
+@@ -869,27 +870,23 @@ dnl
+ AC_LANG_PUSH([C++])
+ BTNG_TYPE_NAMESPACE
+ AC_MSG_CHECKING(type ostringstream)
+-AC_TRY_COMPILE([#include STL_SSTREAM_HEADER_FILE
++AC_COMPILE_IFELSE([AC_LANG_PROGRAM([[#include STL_SSTREAM_HEADER_FILE
+ #ifndef NAMESPACE_IS_BROKEN
+ using namespace std;
+ #endif
+-], [ostringstream oss; oss << 10;]
+-,
+-AC_MSG_RESULT(ok),
+-AC_MSG_RESULT(broken)
++]], [[ostringstream oss; oss << 10;
++]])],[AC_MSG_RESULT(ok)],[AC_MSG_RESULT(broken)
+ AC_DEFINE(OSTRINGSTREAM_TYPE_IS_BROKEN,1,The type ostringstream is broken)
+-)
++])
+ AC_MSG_CHECKING(type ostrstream)
+-AC_TRY_COMPILE([#include STL_SSTREAM_HEADER_FILE
++AC_COMPILE_IFELSE([AC_LANG_PROGRAM([[#include STL_SSTREAM_HEADER_FILE
+ #ifndef NAMESPACE_IS_BROKEN
+ using namespace std;
+ #endif
+-], [ostrstream oss; oss << 10;]
+-,
+-AC_MSG_RESULT(ok),
+-AC_MSG_RESULT(broken)
++]], [[ostrstream oss; oss << 10;
++]])],[AC_MSG_RESULT(ok)],[AC_MSG_RESULT(broken)
+ AC_DEFINE(OSTRSTREAM_TYPE_IS_BROKEN,1,The type ostrstream is broken)
+-)
++])
+ AC_LANG_POP([C++])
+ 
+ dnl
+@@ -903,11 +900,9 @@ dnl
+ dnl Checking for mallinfo
+ dnl
+ AC_MSG_CHECKING(for mallinfo)
+-AC_TRY_COMPILE([#include <malloc.h>], void *x=mallinfo,
+-  AC_DEFINE(HAVE_MALLINFO, 1, Define if you have the 'mallinfo' function.)
+-  AC_MSG_RESULT(yes),
+-  AC_MSG_RESULT(no)
+-)
++AC_COMPILE_IFELSE([AC_LANG_PROGRAM([[#include <malloc.h>]], [[void *x=mallinfo]])],[AC_DEFINE(HAVE_MALLINFO, 1, Define if you have the 'mallinfo' function.)
++  AC_MSG_RESULT(yes)],[AC_MSG_RESULT(no)
++])
+ 
+ CASC_CXX_ISNAN
+ 
+@@ -1520,37 +1515,37 @@ define(samrai_typical_example_files,['(' \
+ -name '*README*' -o -name '*.C' -o -name '*.h' -o -name '*.depend' -o -name '*.i' -o -name '*.m4' -o -name '*.input' \
+ -o -name '*.tri' -o -name '*.gzxml' ')'])
+ 
+-SAMRAI_LINK_FILES([ esyscmd(find examples/boundary      samrai_find_excludes samrai_typical_example_files | sort | sed 's/.*/\0:\0/') ])
+-SAMRAI_LINK_FILES([ esyscmd(find examples/communication samrai_find_excludes samrai_typical_example_files | sort | sed 's/.*/\0:\0/') ])
+-SAMRAI_LINK_FILES([ esyscmd(find examples/ConvDiff      samrai_find_excludes samrai_typical_example_files | sort | sed 's/.*/\0:\0/') ])
+-SAMRAI_LINK_FILES([ esyscmd(find examples/dataops       samrai_find_excludes samrai_typical_example_files | sort | sed 's/.*/\0:\0/') ])
+-SAMRAI_LINK_FILES([ esyscmd(find examples/Euler         samrai_find_excludes samrai_typical_example_files | sort | sed 's/.*/\0:\0/') ])
+-SAMRAI_LINK_FILES([ esyscmd(find examples/emb_bdry      samrai_find_excludes samrai_typical_example_files | sort | sed 's/.*/\0:\0/') ])
+-SAMRAI_LINK_FILES([ esyscmd(find examples/nonlinear     samrai_find_excludes samrai_typical_example_files | sort | sed 's/.*/\0:\0/') ])
+-SAMRAI_LINK_FILES([ esyscmd(find examples/hypre_poisson samrai_find_excludes samrai_typical_example_files | sort | sed 's/.*/\0:\0/') ])
+-SAMRAI_LINK_FILES([ esyscmd(find examples/FAC           samrai_find_excludes samrai_typical_example_files | sort | sed 's/.*/\0:\0/') ])
+-SAMRAI_LINK_FILES([ esyscmd(find examples/LinAdv        samrai_find_excludes samrai_typical_example_files | sort | sed 's/.*/\0:\0/') ])
+-SAMRAI_LINK_FILES([ esyscmd(find examples/mblkcomm      samrai_find_excludes samrai_typical_example_files | sort | sed 's/.*/\0:\0/') ])
+-SAMRAI_LINK_FILES([ esyscmd(find examples/MblkEuler     samrai_find_excludes samrai_typical_example_files | sort | sed 's/.*/\0:\0/') ])
+-SAMRAI_LINK_FILES([ esyscmd(find examples/MblkLinAdv    samrai_find_excludes samrai_typical_example_files | sort | sed 's/.*/\0:\0/') ])
+-SAMRAI_LINK_FILES([ esyscmd(find examples/memory        samrai_find_excludes samrai_typical_example_files | sort | sed 's/.*/\0:\0/') ])
+-SAMRAI_LINK_FILES([ esyscmd(find examples/sundials      samrai_find_excludes samrai_typical_example_files | sort | sed 's/.*/\0:\0/') ])
+-SAMRAI_LINK_FILES([ esyscmd(find examples/patchbdrysum  samrai_find_excludes samrai_typical_example_files | sort | sed 's/.*/\0:\0/') ])
+-SAMRAI_LINK_FILES([ esyscmd(find examples/timers        samrai_find_excludes samrai_typical_example_files | sort | sed 's/.*/\0:\0/') ])
++SAMRAI_LINK_FILES([ esyscmd(find examples/boundary      samrai_find_excludes samrai_typical_example_files | sort | gsed 's/.*/\0:\0/') ])
++SAMRAI_LINK_FILES([ esyscmd(find examples/communication samrai_find_excludes samrai_typical_example_files | sort | gsed 's/.*/\0:\0/') ])
++SAMRAI_LINK_FILES([ esyscmd(find examples/ConvDiff      samrai_find_excludes samrai_typical_example_files | sort | gsed 's/.*/\0:\0/') ])
++SAMRAI_LINK_FILES([ esyscmd(find examples/dataops       samrai_find_excludes samrai_typical_example_files | sort | gsed 's/.*/\0:\0/') ])
++SAMRAI_LINK_FILES([ esyscmd(find examples/Euler         samrai_find_excludes samrai_typical_example_files | sort | gsed 's/.*/\0:\0/') ])
++SAMRAI_LINK_FILES([ esyscmd(find examples/emb_bdry      samrai_find_excludes samrai_typical_example_files | sort | gsed 's/.*/\0:\0/') ])
++SAMRAI_LINK_FILES([ esyscmd(find examples/nonlinear     samrai_find_excludes samrai_typical_example_files | sort | gsed 's/.*/\0:\0/') ])
++SAMRAI_LINK_FILES([ esyscmd(find examples/hypre_poisson samrai_find_excludes samrai_typical_example_files | sort | gsed 's/.*/\0:\0/') ])
++SAMRAI_LINK_FILES([ esyscmd(find examples/FAC           samrai_find_excludes samrai_typical_example_files | sort | gsed 's/.*/\0:\0/') ])
++SAMRAI_LINK_FILES([ esyscmd(find examples/LinAdv        samrai_find_excludes samrai_typical_example_files | sort | gsed 's/.*/\0:\0/') ])
++SAMRAI_LINK_FILES([ esyscmd(find examples/mblkcomm      samrai_find_excludes samrai_typical_example_files | sort | gsed 's/.*/\0:\0/') ])
++SAMRAI_LINK_FILES([ esyscmd(find examples/MblkEuler     samrai_find_excludes samrai_typical_example_files | sort | gsed 's/.*/\0:\0/') ])
++SAMRAI_LINK_FILES([ esyscmd(find examples/MblkLinAdv    samrai_find_excludes samrai_typical_example_files | sort | gsed 's/.*/\0:\0/') ])
++SAMRAI_LINK_FILES([ esyscmd(find examples/memory        samrai_find_excludes samrai_typical_example_files | sort | gsed 's/.*/\0:\0/') ])
++SAMRAI_LINK_FILES([ esyscmd(find examples/sundials      samrai_find_excludes samrai_typical_example_files | sort | gsed 's/.*/\0:\0/') ])
++SAMRAI_LINK_FILES([ esyscmd(find examples/patchbdrysum  samrai_find_excludes samrai_typical_example_files | sort | gsed 's/.*/\0:\0/') ])
++SAMRAI_LINK_FILES([ esyscmd(find examples/timers        samrai_find_excludes samrai_typical_example_files | sort | gsed 's/.*/\0:\0/') ])
+ 
+ SAMRAI_LINK_FILES([ source/test/async_comm/default.input:source/test/async_comm/default.input ])
+ SAMRAI_LINK_FILES([ source/test/clustering/async_br/front2d.input:source/test/clustering/async_br/front2d.input
+                     source/test/clustering/async_br/front3d.input:source/test/clustering/async_br/front3d.input ])
+ SAMRAI_LINK_FILES([ source/test/dlbg/front2d.input:source/test/dlbg/front2d.input
+                     source/test/dlbg/front3d.input:source/test/dlbg/front3d.input ])
+-SAMRAI_LINK_FILES([ esyscmd(find source/test/hypre -name \*.input | sort | sed 's/.*/\0:\0/') ])
++SAMRAI_LINK_FILES([ esyscmd(find source/test/hypre -name \*.input | sort | gsed 's/.*/\0:\0/') ])
+ SAMRAI_LINK_FILES([ source/test/FAC/inputs:source/test/FAC/inputs ])
+ 
+ dnl Optionally configure with performance directory if it is included.
+ define( [performance_dir_exists], [esyscmd( if test -d performance; then echo -n yes; else echo -n no; fi )])
+ m4_if(performance_dir_exists, [yes],
+ performance_dir=performance
+-SAMRAI_LINK_FILES([ esyscmd(find performance/LinAdv        samrai_find_excludes samrai_typical_example_files 2>/dev/null | sort | sed 's/.*/\0:\0/') ]),
++SAMRAI_LINK_FILES([ esyscmd(find performance/LinAdv        samrai_find_excludes samrai_typical_example_files 2>/dev/null | sort | gsed 's/.*/\0:\0/') ]),
+ unset performance_dir
+ )
+ 
+@@ -1572,12 +1567,13 @@ $MKDIR_P $subdirs
+ 
+ undefine([performance_dir_exists])
+ 
+-AC_OUTPUT([
++AC_CONFIG_FILES([
+ Makefile
+ config/Makefile.config config/Makefile.config.install
+ docs/Makefile docs/Doxyfile docs/devDoxyfile
+ ${makefiles}
+-],[
++])
++AC_CONFIG_COMMANDS([default],[
+ dnl These are the commands that will execute after the file generations.
+ dnl They are run by the generated config.status script.
+ 
+@@ -1630,8 +1626,7 @@ for i in $readme; do
+    $INSTALL  $srcdir/$i $i
+ done
+ 
+-],
+-[
++],[
+ 
+ dnl These commands set the environment for commands executing
+ dnl after file generations.
+@@ -1641,6 +1636,7 @@ sundials_dir=$sundials_dir
+ if test ! `cd $srcdir && pwd -P` = `pwd -P`; then
+   source_tree_is_not_compile_tree=1
+ fi
+-]
+ 
+-)
++
++])
++AC_OUTPUT
+diff --git a/examples/ConvDiff/ConvDiff.C b/examples/ConvDiff/ConvDiff.C
+index 981aca0..888ef16 100644
+--- a/examples/ConvDiff/ConvDiff.C
++++ b/examples/ConvDiff/ConvDiff.C
+@@ -1298,6 +1298,8 @@ void ConvDiff::checkBoundaryData(int btype,
+            << "     " << num_bad_values << " bad VAL values found for\n"
+            << "     boundary type " << btype << " at location " << bloc << endl;
+       }
++#else
++      NULL_USE(num_bad_values);
+ #endif
+ 
+    }
+diff --git a/examples/dataops/node_hierops.C b/examples/dataops/node_hierops.C
+index 0355177..2bf69d6 100644
+--- a/examples/dataops/node_hierops.C
++++ b/examples/dataops/node_hierops.C
+@@ -83,10 +83,10 @@ int main( int argc, char *argv[] ) {
+ 
+       hier::BoxArray<2> coarse_domain(2);
+       hier::BoxArray<2> fine_domain(2);
+-      coarse_domain(0) = coarse0;
+-      coarse_domain(1) = coarse1;
+-      fine_domain(0) = fine0;
+-      fine_domain(1) = fine1;
++      coarse_domain[0] = coarse0;
++      coarse_domain[1] = coarse1;
++      fine_domain[0] = fine0;
++      fine_domain[1] = fine1;
+ 
+       tbox::Pointer<geom::CartesianGridGeometry<2> > geometry = 
+ 	 new geom::CartesianGridGeometry<2>("CartesianGeometry", lo, hi, coarse_domain);
+diff --git a/examples/memory/main.C b/examples/memory/main.C
+index 6018db9..b7d1f6e 100644
+--- a/examples/memory/main.C
++++ b/examples/memory/main.C
+@@ -31,7 +31,7 @@ int main( int argc, char *argv[] )
+ //   TAU_PROFILE_SET_NODE(tbox::SAMRAI_MPI::getRank());
+ #endif
+ 
+-   tbox::pout << "\n\nAllocating memory in 1MB chunks until we run out...\n" << endl;
++   tbox::pout << "\n\nAllocating memory in 1MB chunks until we run out...\n" << std::endl;
+ 
+    for (int chunk = 1; chunk < MAX_TEST; chunk++) {
+       
+@@ -39,7 +39,7 @@ int main( int argc, char *argv[] )
+  
+       double* array = new double[chunk*doubles_in_one_mb];
+       if (!array) {
+-         tbox::pout << "\nRan out of memory!!" << endl;
++         tbox::pout << "\nRan out of memory!!" << std::endl;
+          break;
+       }
+ 
+@@ -53,7 +53,7 @@ int main( int argc, char *argv[] )
+          
+       tbox::pout << "Successfully allocated " << chunk << "MB chunk (" 
+            << doubles_in_one_mb*chunk << " doubles)"
+-           << endl;
++           << std::endl;
+ 
+       tbox::MemoryUtilities::printMemoryInfo(tbox::pout);
+       tbox::MemoryUtilities::recordMemoryInfo();
+diff --git a/include/ArrayDataBasicOps.h b/include/ArrayDataBasicOps.h
+index 4e38c39..1addd9d 100644
+--- a/include/ArrayDataBasicOps.h
++++ b/include/ArrayDataBasicOps.h
+@@ -52,7 +52,7 @@ public:
+     */ 
+    ArrayDataBasicOps();
+ 
+-   ~ArrayDataBasicOps<DIM,TYPE>();
++   ~ArrayDataBasicOps();
+ 
+    /**
+     * Set dst = alpha * src, elementwise.
+diff --git a/include/ArrayDataIterator.h b/include/ArrayDataIterator.h
+index 34b9102..331cf10 100644
+--- a/include/ArrayDataIterator.h
++++ b/include/ArrayDataIterator.h
+@@ -67,7 +67,7 @@ public:
+    /**
+     * Destructor for the array data iterator.
+     */
+-   ~ArrayDataIterator<DIM>();
++   ~ArrayDataIterator();
+ 
+    /**
+     * Extract the index corresponding to the iterator position in the box.
+diff --git a/include/ArrayDataMiscellaneousOpsReal.h b/include/ArrayDataMiscellaneousOpsReal.h
+index 5facf88..1fc76e0 100644
+--- a/include/ArrayDataMiscellaneousOpsReal.h
++++ b/include/ArrayDataMiscellaneousOpsReal.h
+@@ -52,7 +52,7 @@ public:
+     */
+    ArrayDataMiscellaneousOpsReal();
+ 
+-   ~ArrayDataMiscellaneousOpsReal<DIM,TYPE>();
++   ~ArrayDataMiscellaneousOpsReal();
+ 
+    /**
+     * Return 1 if \f$\|data2_i\| > 0\f$ and \f$data1_i * data2_i \leq 0\f$, for
+diff --git a/include/ArrayDataNormOpsComplex.h b/include/ArrayDataNormOpsComplex.h
+index 72d2ba9..f99143d 100644
+--- a/include/ArrayDataNormOpsComplex.h
++++ b/include/ArrayDataNormOpsComplex.h
+@@ -48,7 +48,7 @@ public:
+     */
+    ArrayDataNormOpsComplex();
+ 
+-   ~ArrayDataNormOpsComplex<DIM>();
++   ~ArrayDataNormOpsComplex();
+ 
+    /**
+     * Set destination component to norm of source component.  That is, 
+diff --git a/include/ArrayDataNormOpsInteger.h b/include/ArrayDataNormOpsInteger.h
+index 22dbde4..4543f66 100644
+--- a/include/ArrayDataNormOpsInteger.h
++++ b/include/ArrayDataNormOpsInteger.h
+@@ -41,7 +41,7 @@ public:
+     */
+    ArrayDataNormOpsInteger();
+ 
+-   ~ArrayDataNormOpsInteger<DIM>();
++   ~ArrayDataNormOpsInteger();
+ 
+    /**
+     * Set destination component to absolute value of source component.  
+diff --git a/include/ArrayDataNormOpsReal.h b/include/ArrayDataNormOpsReal.h
+index c5519e4..696024c 100644
+--- a/include/ArrayDataNormOpsReal.h
++++ b/include/ArrayDataNormOpsReal.h
+@@ -52,7 +52,7 @@ public:
+     */
+    ArrayDataNormOpsReal();
+ 
+-   ~ArrayDataNormOpsReal<DIM,TYPE>();
++   ~ArrayDataNormOpsReal();
+ 
+    /**
+     * Return sum of entries in control volume array.
+diff --git a/include/BaseGriddingAlgorithm.h b/include/BaseGriddingAlgorithm.h
+index 404c3e6..7d63550 100644
+--- a/include/BaseGriddingAlgorithm.h
++++ b/include/BaseGriddingAlgorithm.h
+@@ -45,7 +45,7 @@ public:
+    /*!
+     * @brief Virtual destructor for BaseGriddingAlgorithm<DIM>.
+     */
+-   virtual ~BaseGriddingAlgorithm<DIM>();
++   virtual ~BaseGriddingAlgorithm();
+ 
+    /*!
+     * @brief Construct the coarsest level in a hierarchy (i.e., level 0).
+diff --git a/include/BergerRigoutsos.h b/include/BergerRigoutsos.h
+index 80133d7..9393860 100644
+--- a/include/BergerRigoutsos.h
++++ b/include/BergerRigoutsos.h
+@@ -74,7 +74,7 @@ public:
+    /*!
+     * Virtual destructor.
+     */
+-   virtual ~BergerRigoutsos<DIM>();
++   virtual ~BergerRigoutsos();
+ 
+ 
+    /*!
+diff --git a/include/BinaryTree.h b/include/BinaryTree.h
+index a7e17ab..3aaef26 100644
+--- a/include/BinaryTree.h
++++ b/include/BinaryTree.h
+@@ -45,7 +45,7 @@ public:
+    /**
+     * The destructor does nothing of public interest.
+     */
+-   ~BinaryTree<DIM>();
++   ~BinaryTree();
+ 
+    /**
+     * Returns true if "box" intersects a patch that is local 
+diff --git a/include/BlockGridGeometry.h b/include/BlockGridGeometry.h
+index 33488a1..3a58c61 100644
+--- a/include/BlockGridGeometry.h
++++ b/include/BlockGridGeometry.h
+@@ -61,7 +61,7 @@ public:
+     * Destructor for BlockGridGeometry unregisters the object 
+     * with the restart manager if previously registered.
+     */
+-   virtual ~BlockGridGeometry<DIM>();
++   virtual ~BlockGridGeometry();
+    
+    /**
+     * Create and return a pointer to a refined version of this Cartesian grid
+diff --git a/include/BlockPatchGeometry.h b/include/BlockPatchGeometry.h
+index 067cdd1..cf55fcb 100644
+--- a/include/BlockPatchGeometry.h
++++ b/include/BlockPatchGeometry.h
+@@ -52,7 +52,7 @@ public:
+    /**
+     * Destructor for BlockPatchGeometry.
+     */
+-   ~BlockPatchGeometry<DIM>();
++   ~BlockPatchGeometry();
+ 
+    /**
+     * Get the block number for the block on which the patch lies. 
+diff --git a/include/BoundaryBox.h b/include/BoundaryBox.h
+index 909c7d2..10d6f24 100644
+--- a/include/BoundaryBox.h
++++ b/include/BoundaryBox.h
+@@ -59,7 +59,7 @@ public:
+    /**
+     * The destructor for BoundaryBox.
+     */
+-   ~BoundaryBox<DIM>();
++   ~BoundaryBox();
+ 
+    /**
+     * Return a reference to the Box<DIM> member of the boundary box
+diff --git a/include/BoundaryLookupTable.C b/include/BoundaryLookupTable.C
+index 49a502f..396e74e 100644
+--- a/include/BoundaryLookupTable.C
++++ b/include/BoundaryLookupTable.C
+@@ -51,7 +51,7 @@ template<int DIM>  BoundaryLookupTable<DIM>::BoundaryLookupTable()
+       s_lookup_table_instance = NULL;
+    }
+    if(s_registered_callback == false) {
+-      s_lookup_table_instance = false;
++      s_lookup_table_instance = NULL;
+    }
+ 
+    if (d_table[0].isNull()) {
+diff --git a/include/BoundaryLookupTable.h b/include/BoundaryLookupTable.h
+index 91105bf..edb8e0e 100644
+--- a/include/BoundaryLookupTable.h
++++ b/include/BoundaryLookupTable.h
+@@ -186,7 +186,7 @@ protected:
+     *
+     * The destructor deallocates lookup table contents.
+     */
+-   ~BoundaryLookupTable<DIM>();
++   ~BoundaryLookupTable();
+ 
+ private:
+ 
+diff --git a/include/Box.h b/include/Box.h
+index 69ea6b2..71311fa 100644
+--- a/include/Box.h
++++ b/include/Box.h
+@@ -449,7 +449,7 @@ public:
+    /**
+     * Destructor for the box iterator.
+     */
+-   ~BoxIterator<DIM>();
++   ~BoxIterator();
+ 
+    /**
+     * @brief Initializer for the box iterator.
+diff --git a/include/BoxArray.h b/include/BoxArray.h
+index 01d930e..3551385 100644
+--- a/include/BoxArray.h
++++ b/include/BoxArray.h
+@@ -88,7 +88,7 @@ public:
+    /**
+     * The BoxArray destructor releases the box array data.
+     */
+-   ~BoxArray<DIM>();
++   ~BoxArray();
+ 
+    /**
+     * Return the number of boxes in the array.
+diff --git a/include/BoxGeneratorStrategy.h b/include/BoxGeneratorStrategy.h
+index 97168b0..c9a3980 100644
+--- a/include/BoxGeneratorStrategy.h
++++ b/include/BoxGeneratorStrategy.h
+@@ -41,7 +41,7 @@ public:
+    /**
+     * Virtual destructor.
+     */
+-   virtual ~BoxGeneratorStrategy<DIM>();
++   virtual ~BoxGeneratorStrategy();
+ 
+    /**
+     * Create list of boxes whose union covers all integer tags on the patch 
+diff --git a/include/BoxGeometry.h b/include/BoxGeometry.h
+index c777a85..23603de 100644
+--- a/include/BoxGeometry.h
++++ b/include/BoxGeometry.h
+@@ -76,7 +76,7 @@ public:
+    /**
+     * The virtual destructor does nothing interesting.
+     */
+-   virtual ~BoxGeometry<DIM>();
++   virtual ~BoxGeometry();
+ 
+    /**
+     * Calculate the overlap between two box geometry objects given the
+diff --git a/include/BoxGraph.h b/include/BoxGraph.h
+index c8ef118..479845c 100644
+--- a/include/BoxGraph.h
++++ b/include/BoxGraph.h
+@@ -158,7 +158,7 @@ public:
+    /*!
+     * The destructor releases privately held resources.
+     */
+-   ~BoxGraph<DIM>();
++   ~BoxGraph();
+ 
+    /*!
+     * @brief Compute the indices of boxes from the src_box_array
+diff --git a/include/BoxIOUtility.h b/include/BoxIOUtility.h
+index 929e51b..5bf140e 100644
+--- a/include/BoxIOUtility.h
++++ b/include/BoxIOUtility.h
+@@ -60,7 +60,7 @@ public:
+    /**
+     * Virtual destructor.
+     */
+-   virtual ~BoxIOUtility<DIM>();
++   virtual ~BoxIOUtility();
+ 
+    /**
+     * Pulls refinement boxes corresponding to the provided level and 
+diff --git a/include/BoxList.C b/include/BoxList.C
+index 3bb6e02..1695831 100644
+--- a/include/BoxList.C
++++ b/include/BoxList.C
+@@ -39,13 +39,13 @@ namespace SAMRAI {
+ template<int DIM>  BoxList<DIM>::BoxList(const Box<DIM>& box)
+ :  tbox::List< Box<DIM> >()
+ {
+-   addItem(box);
++   this ->addItem(box);
+ }
+ 
+ template<int DIM>  BoxList<DIM>::BoxList(const BoxList<DIM>& list)
+ :  tbox::List< Box<DIM> >()
+ {
+-   copyItems(list);
++   this ->copyItems(list);
+ }
+       
+ template<int DIM>  BoxList<DIM>::BoxList(const BoxArray<DIM>& array)
+@@ -53,7 +53,7 @@ template<int DIM>  BoxList<DIM>::BoxList(const BoxArray<DIM>& array)
+ {
+    const int n = array.getNumberOfBoxes();
+    for (int i = 0; i < n; i++) {
+-      appendItem(array[i]);
++      this ->appendItem(array[i]);
+    }
+ }
+ 
+@@ -61,7 +61,7 @@ template<int DIM> BoxList<DIM>& BoxList<DIM>::operator=(const BoxList<DIM>& list
+ {
+    if (this != &list) {
+       this -> clearItems();
+-      copyItems(list);
++      this ->copyItems(list);
+    }
+    return(*this);
+ }
+@@ -145,10 +145,10 @@ template<int DIM> void BoxList<DIM>::simplifyBoxes()
+          // Otherwise, burst tryMe and andMe and put on noncanonical
+ 
+             if (!combineDaPuppies) {
+-               appendItem(tryMe);
++               this ->appendItem(tryMe);
+             } else {
+                Box<DIM> andMe = l();
+-               removeItem(l);
++               this ->removeItem(l);
+                const Index<DIM>& bl = tryMe.lower();
+                const Index<DIM>& bh = tryMe.upper();
+                Index<DIM> il = andMe.lower();
+@@ -199,13 +199,13 @@ template<int DIM> void BoxList<DIM>::burstBoxes(const Box<DIM>& bursty,
+       if (bursth(d) > solidh(d)) {
+          Index<DIM> newl = burstl;
+          newl(d) = solidh(d) + 1;
+-         appendItem(Box<DIM>(newl, bursth));
++         this ->appendItem(Box<DIM>(newl, bursth));
+          bursth(d) = solidh(d);
+       }
+       if (burstl(d) < solidl(d)) {
+          Index<DIM> newh = bursth;
+          newh(d) = solidl(d) - 1;
+-         appendItem(Box<DIM>(burstl, newh));
++         this ->appendItem(Box<DIM>(burstl, newh));
+          burstl(d) = solidl(d);
+       }
+    }
+@@ -231,7 +231,7 @@ template<int DIM> void BoxList<DIM>::removeIntersections(const Box<DIM>& takeawa
+          fragments.burstBoxes(tryme, takeaway, DIM);
+       }
+    }
+-   catenateItems(fragments);
++   this ->catenateItems(fragments);
+ }
+ 
+ template<int DIM> void BoxList<DIM>::removeIntersections(const Box<DIM>& box,
+@@ -251,7 +251,7 @@ template<int DIM> void BoxList<DIM>::removeIntersections(const Box<DIM>& box,
+    if (!(box * takeaway).empty()) {
+       BoxList<DIM>::burstBoxes(box, takeaway, DIM);
+    } else {
+-      appendItem(box);
++      this ->appendItem(box);
+    }
+ 
+ }
+@@ -284,7 +284,7 @@ template<int DIM> void BoxList<DIM>::intersectBoxes(const Box<DIM>& box)
+          intersection.appendItem(overlap);
+       }
+    }
+-   catenateItems(intersection);
++   this ->catenateItems(intersection);
+ }
+ 
+ template<int DIM> void BoxList<DIM>::intersectBoxes(const BoxList<DIM>& boxes)
+@@ -300,7 +300,7 @@ template<int DIM> void BoxList<DIM>::intersectBoxes(const BoxList<DIM>& boxes)
+          }
+       }
+    }
+-   catenateItems(intersection);
++   this ->catenateItems(intersection);
+ }
+ 
+ /*
+@@ -334,7 +334,7 @@ template<int DIM> void BoxList<DIM>::coalesceBoxes()
+ 
+          if ( tb2().coalesceWith(tb()) ) {
+             found_match = true;
+-            removeItem(tb);
++            this ->removeItem(tb);
+          }
+ 
+          tb2++;
+diff --git a/include/BoxList.I b/include/BoxList.I
+index e751158..b9fe76c 100644
+--- a/include/BoxList.I
++++ b/include/BoxList.I
+@@ -30,14 +30,14 @@ template<int DIM> inline
+ void BoxList<DIM>::unionBoxes(const Box<DIM>& box)
+ {
+    if (!box.empty()) {
+-      appendItem(box);
++      this->appendItem(box);
+    }
+ }
+ 
+ template<int DIM> inline
+ void BoxList<DIM>::unionBoxes(const BoxList<DIM>& boxes)
+ {
+-   copyItems(boxes);
++   this->copyItems(boxes);
+ }
+ 
+ template<int DIM> inline
+diff --git a/include/BoxList.h b/include/BoxList.h
+index f624286..a383c2e 100644
+--- a/include/BoxList.h
++++ b/include/BoxList.h
+@@ -72,7 +72,7 @@ public:
+    /**
+     * The destructor releases all list storage.
+     */
+-   ~BoxList<DIM>();
++   ~BoxList();
+ 
+    /**
+     * Return integer number of boxes in the box list.  Note that this 
+diff --git a/include/BoxOverlap.h b/include/BoxOverlap.h
+index 6aa46c3..c2020bf 100644
+--- a/include/BoxOverlap.h
++++ b/include/BoxOverlap.h
+@@ -49,7 +49,7 @@ public:
+    /**
+     * The virtual destructor does nothing interesting.
+     */
+-   virtual ~BoxOverlap<DIM>();
++   virtual ~BoxOverlap();
+ 
+    /**
+     * Return true if intersecting boxes have no communication dependencies.
+diff --git a/include/BoxTop.h b/include/BoxTop.h
+index a57959b..0ee569d 100644
+--- a/include/BoxTop.h
++++ b/include/BoxTop.h
+@@ -81,7 +81,7 @@ public:
+    /*!
+     * The destructor releases privately held resources.
+     */
+-   ~BoxTop<DIM>();
++   ~BoxTop();
+ 
+    /*!
+     * @brief Compute the set of boxes that overlap with the specified \b box.
+diff --git a/include/BoxTree.h b/include/BoxTree.h
+index 9773977..39adc42 100644
+--- a/include/BoxTree.h
++++ b/include/BoxTree.h
+@@ -124,7 +124,7 @@ public:
+    /*!
+     * The dtor does nothing interesting.
+     */
+-   ~BoxTree<DIM>();
++   ~BoxTree();
+ 
+    //! @{
+    /*!
+diff --git a/include/BoxTreeNode.h b/include/BoxTreeNode.h
+index 5e9325f..82a4c2b 100644
+--- a/include/BoxTreeNode.h
++++ b/include/BoxTreeNode.h
+@@ -78,7 +78,7 @@ public:
+    /*!
+     * The dtor does nothing even slightly interesting.
+     */
+-   ~BoxTreeNode<DIM>();
++   ~BoxTreeNode();
+ 
+    /*!
+     * @brief Compute the box array indices of boxes that overlap the given \b box.
+diff --git a/include/CartesianCellComplexConservativeLinearRefine.h b/include/CartesianCellComplexConservativeLinearRefine.h
+index 1c20f5d..029e4bf 100644
+--- a/include/CartesianCellComplexConservativeLinearRefine.h
++++ b/include/CartesianCellComplexConservativeLinearRefine.h
+@@ -54,7 +54,7 @@ public:
+    /**
+     * Uninteresting virtual destructor.
+     */
+-   virtual ~CartesianCellComplexConservativeLinearRefine<DIM>();
++   virtual ~CartesianCellComplexConservativeLinearRefine();
+ 
+    /**
+     * Return true if the variable and name string match cell-centered 
+diff --git a/include/CartesianCellComplexLinearRefine.h b/include/CartesianCellComplexLinearRefine.h
+index 1b60eea..11e2a36 100644
+--- a/include/CartesianCellComplexLinearRefine.h
++++ b/include/CartesianCellComplexLinearRefine.h
+@@ -49,7 +49,7 @@ public:
+    /**
+     * Uninteresting virtual destructor.
+     */
+-   virtual ~CartesianCellComplexLinearRefine<DIM>();
++   virtual ~CartesianCellComplexLinearRefine();
+ 
+    /**
+     * Return true if the variable and name string match cell-centered 
+diff --git a/include/CartesianCellComplexWeightedAverage.h b/include/CartesianCellComplexWeightedAverage.h
+index 09ce951..eba6985 100644
+--- a/include/CartesianCellComplexWeightedAverage.h
++++ b/include/CartesianCellComplexWeightedAverage.h
+@@ -49,7 +49,7 @@ public:
+    /**
+     * Uninteresting virtual destructor.
+     */
+-   virtual ~CartesianCellComplexWeightedAverage<DIM>();
++   virtual ~CartesianCellComplexWeightedAverage();
+ 
+    /**
+     * Return true if the variable and name string match cell-centered 
+diff --git a/include/CartesianCellDoubleConservativeLinearRefine.h b/include/CartesianCellDoubleConservativeLinearRefine.h
+index 63ccbdb..506dfcd 100644
+--- a/include/CartesianCellDoubleConservativeLinearRefine.h
++++ b/include/CartesianCellDoubleConservativeLinearRefine.h
+@@ -51,7 +51,7 @@ public:
+    /**
+     * Uninteresting virtual destructor.
+     */
+-   virtual ~CartesianCellDoubleConservativeLinearRefine<DIM>();
++   virtual ~CartesianCellDoubleConservativeLinearRefine();
+ 
+    /**
+     * Return true if the variable and name string match cell-centered 
+diff --git a/include/CartesianCellDoubleLinearRefine.h b/include/CartesianCellDoubleLinearRefine.h
+index 791c491..e4174de 100644
+--- a/include/CartesianCellDoubleLinearRefine.h
++++ b/include/CartesianCellDoubleLinearRefine.h
+@@ -49,7 +49,7 @@ public:
+    /**
+     * Uninteresting virtual destructor.
+     */
+-   virtual ~CartesianCellDoubleLinearRefine<DIM>();
++   virtual ~CartesianCellDoubleLinearRefine();
+ 
+    /**
+     * Return true if the variable and name string match cell-centered 
+diff --git a/include/CartesianCellDoubleWeightedAverage.h b/include/CartesianCellDoubleWeightedAverage.h
+index c298283..0e7c4da 100644
+--- a/include/CartesianCellDoubleWeightedAverage.h
++++ b/include/CartesianCellDoubleWeightedAverage.h
+@@ -49,7 +49,7 @@ public:
+    /**
+     * Uninteresting virtual destructor.
+     */
+-   virtual ~CartesianCellDoubleWeightedAverage<DIM>();
++   virtual ~CartesianCellDoubleWeightedAverage();
+ 
+    /**
+     * Return true if the variable and name string match cell-centered 
+diff --git a/include/CartesianCellFloatConservativeLinearRefine.h b/include/CartesianCellFloatConservativeLinearRefine.h
+index cbf27ca..2f31fa6 100644
+--- a/include/CartesianCellFloatConservativeLinearRefine.h
++++ b/include/CartesianCellFloatConservativeLinearRefine.h
+@@ -51,7 +51,7 @@ public:
+    /**
+     * Uninteresting virtual destructor.
+     */
+-   virtual ~CartesianCellFloatConservativeLinearRefine<DIM>();
++   virtual ~CartesianCellFloatConservativeLinearRefine();
+ 
+    /**
+     * Return true if the variable and name string match cell-centered 
+diff --git a/include/CartesianCellFloatLinearRefine.h b/include/CartesianCellFloatLinearRefine.h
+index 08e85a2..c752886 100644
+--- a/include/CartesianCellFloatLinearRefine.h
++++ b/include/CartesianCellFloatLinearRefine.h
+@@ -49,7 +49,7 @@ public:
+    /**
+     * Uninteresting virtual destructor.
+     */
+-   virtual ~CartesianCellFloatLinearRefine<DIM>();
++   virtual ~CartesianCellFloatLinearRefine();
+ 
+    /**
+     * Return true if the variable and name string match cell-centered 
+diff --git a/include/CartesianCellFloatWeightedAverage.h b/include/CartesianCellFloatWeightedAverage.h
+index 8532102..0f0b814 100644
+--- a/include/CartesianCellFloatWeightedAverage.h
++++ b/include/CartesianCellFloatWeightedAverage.h
+@@ -49,7 +49,7 @@ public:
+    /**
+     * Uninteresting virtual destructor.
+     */
+-   virtual ~CartesianCellFloatWeightedAverage<DIM>();
++   virtual ~CartesianCellFloatWeightedAverage();
+ 
+    /**
+     * Return true if the variable and name string match cell-centered 
+diff --git a/include/CartesianEdgeComplexWeightedAverage.h b/include/CartesianEdgeComplexWeightedAverage.h
+index 399ab28..944bf9a 100644
+--- a/include/CartesianEdgeComplexWeightedAverage.h
++++ b/include/CartesianEdgeComplexWeightedAverage.h
+@@ -49,7 +49,7 @@ public:
+    /**
+     * Uninteresting virtual destructor.
+     */
+-   virtual ~CartesianEdgeComplexWeightedAverage<DIM>();
++   virtual ~CartesianEdgeComplexWeightedAverage();
+ 
+    /**
+     * Return true if the variable and name string match the edge-centered 
+diff --git a/include/CartesianEdgeDoubleConservativeLinearRefine.h b/include/CartesianEdgeDoubleConservativeLinearRefine.h
+index 4c77d6f..010ae46 100644
+--- a/include/CartesianEdgeDoubleConservativeLinearRefine.h
++++ b/include/CartesianEdgeDoubleConservativeLinearRefine.h
+@@ -51,7 +51,7 @@ public:
+    /**
+     * Uninteresting virtual destructor.
+     */
+-   virtual ~CartesianEdgeDoubleConservativeLinearRefine<DIM>();
++   virtual ~CartesianEdgeDoubleConservativeLinearRefine();
+ 
+    /**
+     * Return true if the variable and name string match edge-centered 
+diff --git a/include/CartesianEdgeDoubleWeightedAverage.h b/include/CartesianEdgeDoubleWeightedAverage.h
+index 90162e1..b6a4b9d 100644
+--- a/include/CartesianEdgeDoubleWeightedAverage.h
++++ b/include/CartesianEdgeDoubleWeightedAverage.h
+@@ -49,7 +49,7 @@ public:
+    /**
+     * Uninteresting virtual destructor.
+     */
+-   virtual ~CartesianEdgeDoubleWeightedAverage<DIM>();
++   virtual ~CartesianEdgeDoubleWeightedAverage();
+ 
+    /**
+     * Return true if the variable and name string match the edge-centered 
+diff --git a/include/CartesianEdgeFloatConservativeLinearRefine.h b/include/CartesianEdgeFloatConservativeLinearRefine.h
+index 96b18bb..40276c1 100644
+--- a/include/CartesianEdgeFloatConservativeLinearRefine.h
++++ b/include/CartesianEdgeFloatConservativeLinearRefine.h
+@@ -51,7 +51,7 @@ public:
+    /**
+     * Uninteresting virtual destructor.
+     */
+-   virtual ~CartesianEdgeFloatConservativeLinearRefine<DIM>();
++   virtual ~CartesianEdgeFloatConservativeLinearRefine();
+ 
+    /**
+     * Return true if the variable and name string match edge-centered 
+diff --git a/include/CartesianEdgeFloatWeightedAverage.h b/include/CartesianEdgeFloatWeightedAverage.h
+index 88003c6..40dc9c3 100644
+--- a/include/CartesianEdgeFloatWeightedAverage.h
++++ b/include/CartesianEdgeFloatWeightedAverage.h
+@@ -49,7 +49,7 @@ public:
+    /**
+     * Uninteresting virtual destructor.
+     */
+-   virtual ~CartesianEdgeFloatWeightedAverage<DIM>();
++   virtual ~CartesianEdgeFloatWeightedAverage();
+ 
+    /**
+     * Return true if the variable and name string match the edge-centered 
+diff --git a/include/CartesianFaceComplexWeightedAverage.h b/include/CartesianFaceComplexWeightedAverage.h
+index 264796d..cacd9c2 100644
+--- a/include/CartesianFaceComplexWeightedAverage.h
++++ b/include/CartesianFaceComplexWeightedAverage.h
+@@ -48,7 +48,7 @@ public:
+    /**
+     * Uninteresting virtual destructor.
+     */
+-   virtual ~CartesianFaceComplexWeightedAverage<DIM>();
++   virtual ~CartesianFaceComplexWeightedAverage();
+ 
+    /**
+     * Return true if the variable and name string match the face-centered 
+diff --git a/include/CartesianFaceDoubleConservativeLinearRefine.h b/include/CartesianFaceDoubleConservativeLinearRefine.h
+index b846442..6e4ad55 100644
+--- a/include/CartesianFaceDoubleConservativeLinearRefine.h
++++ b/include/CartesianFaceDoubleConservativeLinearRefine.h
+@@ -51,7 +51,7 @@ public:
+    /**
+     * Uninteresting virtual destructor.
+     */
+-   virtual ~CartesianFaceDoubleConservativeLinearRefine<DIM>();
++   virtual ~CartesianFaceDoubleConservativeLinearRefine();
+ 
+    /**
+     * Return true if the variable and name string match face-centered 
+diff --git a/include/CartesianFaceDoubleWeightedAverage.h b/include/CartesianFaceDoubleWeightedAverage.h
+index 39c982b..e28491e 100644
+--- a/include/CartesianFaceDoubleWeightedAverage.h
++++ b/include/CartesianFaceDoubleWeightedAverage.h
+@@ -49,7 +49,7 @@ public:
+    /**
+     * Uninteresting virtual destructor.
+     */
+-   virtual ~CartesianFaceDoubleWeightedAverage<DIM>();
++   virtual ~CartesianFaceDoubleWeightedAverage();
+ 
+    /**
+     * Return true if the variable and name string match the face-centered 
+diff --git a/include/CartesianFaceFloatConservativeLinearRefine.h b/include/CartesianFaceFloatConservativeLinearRefine.h
+index c27096e..dcb257e 100644
+--- a/include/CartesianFaceFloatConservativeLinearRefine.h
++++ b/include/CartesianFaceFloatConservativeLinearRefine.h
+@@ -51,7 +51,7 @@ public:
+    /**
+     * Uninteresting virtual destructor.
+     */
+-   virtual ~CartesianFaceFloatConservativeLinearRefine<DIM>();
++   virtual ~CartesianFaceFloatConservativeLinearRefine();
+ 
+    /**
+     * Return true if the variable and name string match face-centered 
+diff --git a/include/CartesianFaceFloatWeightedAverage.h b/include/CartesianFaceFloatWeightedAverage.h
+index 15bdb67..5c368da 100644
+--- a/include/CartesianFaceFloatWeightedAverage.h
++++ b/include/CartesianFaceFloatWeightedAverage.h
+@@ -49,7 +49,7 @@ public:
+    /**
+     * Uninteresting virtual destructor.
+     */
+-   virtual ~CartesianFaceFloatWeightedAverage<DIM>();
++   virtual ~CartesianFaceFloatWeightedAverage();
+ 
+    /**
+     * Return true if the variable and name string match the face-centered 
+diff --git a/include/CartesianGridGeometry.C b/include/CartesianGridGeometry.C
+index 5bf05f5..21627ca 100644
+--- a/include/CartesianGridGeometry.C
++++ b/include/CartesianGridGeometry.C
+@@ -349,7 +349,7 @@ template<int DIM> void CartesianGridGeometry<DIM>::setGeometryData(
+       d_x_up[id] = x_up[id];
+    }
+ 
+-   setPhysicalDomain(domain);
++   this->setPhysicalDomain(domain);
+ 
+    hier::Box<DIM> bigbox;
+    for (int k =0 ; k < this -> getPhysicalDomain().getNumberOfBoxes(); k++)
+@@ -380,32 +380,32 @@ template<int DIM> void CartesianGridGeometry<DIM>::makeStandardOperators()
+     * Standard spatial coarsening operators.
+     */
+ 
+-   addSpatialCoarsenOperator(new CartesianCellComplexWeightedAverage<DIM>());
+-   addSpatialCoarsenOperator(new CartesianEdgeComplexWeightedAverage<DIM>());
+-   addSpatialCoarsenOperator(new CartesianFaceComplexWeightedAverage<DIM>());
+-   addSpatialCoarsenOperator(new pdat::NodeComplexInjection<DIM>());
+-   addSpatialCoarsenOperator(new CartesianOuterfaceComplexWeightedAverage<DIM>());
+-   addSpatialCoarsenOperator(new CartesianSideComplexWeightedAverage<DIM>());
+-
+-   addSpatialRefineOperator(new pdat::CellComplexConstantRefine<DIM>());
+-   addSpatialRefineOperator(new CartesianCellComplexLinearRefine<DIM>());
+-   addSpatialRefineOperator(new pdat::EdgeComplexConstantRefine<DIM>());
+-   addSpatialRefineOperator(new pdat::FaceComplexConstantRefine<DIM>());
+-   addSpatialRefineOperator(new CartesianNodeComplexLinearRefine<DIM>());
+-   addSpatialRefineOperator(new pdat::OuterfaceComplexConstantRefine<DIM>());
+-   addSpatialRefineOperator(new pdat::SideComplexConstantRefine<DIM>());
++   this->addSpatialCoarsenOperator(new CartesianCellComplexWeightedAverage<DIM>());
++   this->addSpatialCoarsenOperator(new CartesianEdgeComplexWeightedAverage<DIM>());
++   this->addSpatialCoarsenOperator(new CartesianFaceComplexWeightedAverage<DIM>());
++   this->addSpatialCoarsenOperator(new pdat::NodeComplexInjection<DIM>());
++   this->addSpatialCoarsenOperator(new CartesianOuterfaceComplexWeightedAverage<DIM>());
++   this->addSpatialCoarsenOperator(new CartesianSideComplexWeightedAverage<DIM>());
++
++   this->addSpatialRefineOperator(new pdat::CellComplexConstantRefine<DIM>());
++   this->addSpatialRefineOperator(new CartesianCellComplexLinearRefine<DIM>());
++   this->addSpatialRefineOperator(new pdat::EdgeComplexConstantRefine<DIM>());
++   this->addSpatialRefineOperator(new pdat::FaceComplexConstantRefine<DIM>());
++   this->addSpatialRefineOperator(new CartesianNodeComplexLinearRefine<DIM>());
++   this->addSpatialRefineOperator(new pdat::OuterfaceComplexConstantRefine<DIM>());
++   this->addSpatialRefineOperator(new pdat::SideComplexConstantRefine<DIM>());
+ 
+    /*
+     * Standard linear time interpolation operators.
+     */
+ 
+-   addTimeInterpolateOperator(new pdat::CellComplexLinearTimeInterpolateOp<DIM>());
+-   addTimeInterpolateOperator(new pdat::EdgeComplexLinearTimeInterpolateOp<DIM>());
+-   addTimeInterpolateOperator(new pdat::FaceComplexLinearTimeInterpolateOp<DIM>());
+-   addTimeInterpolateOperator(new pdat::NodeComplexLinearTimeInterpolateOp<DIM>());
+-   addTimeInterpolateOperator(new pdat::OuterfaceComplexLinearTimeInterpolateOp<DIM>());
+-   addTimeInterpolateOperator(new pdat::OutersideComplexLinearTimeInterpolateOp<DIM>());
+-   addTimeInterpolateOperator(new pdat::SideComplexLinearTimeInterpolateOp<DIM>());
++   this->addTimeInterpolateOperator(new pdat::CellComplexLinearTimeInterpolateOp<DIM>());
++   this->addTimeInterpolateOperator(new pdat::EdgeComplexLinearTimeInterpolateOp<DIM>());
++   this->addTimeInterpolateOperator(new pdat::FaceComplexLinearTimeInterpolateOp<DIM>());
++   this->addTimeInterpolateOperator(new pdat::NodeComplexLinearTimeInterpolateOp<DIM>());
++   this->addTimeInterpolateOperator(new pdat::OuterfaceComplexLinearTimeInterpolateOp<DIM>());
++   this->addTimeInterpolateOperator(new pdat::OutersideComplexLinearTimeInterpolateOp<DIM>());
++   this->addTimeInterpolateOperator(new pdat::SideComplexLinearTimeInterpolateOp<DIM>());
+ #endif
+ 
+ #ifdef HAVE_FLOAT
+@@ -413,85 +413,85 @@ template<int DIM> void CartesianGridGeometry<DIM>::makeStandardOperators()
+     * Standard spatial coarsening operators.
+     */
+ 
+-   addSpatialCoarsenOperator(new CartesianCellFloatWeightedAverage<DIM>());
+-   addSpatialCoarsenOperator(new CartesianEdgeFloatWeightedAverage<DIM>());
+-   addSpatialCoarsenOperator(new CartesianFaceFloatWeightedAverage<DIM>());
+-   addSpatialCoarsenOperator(new pdat::NodeFloatInjection<DIM>());
+-   addSpatialCoarsenOperator(new CartesianOuterfaceFloatWeightedAverage<DIM>());
+-   addSpatialCoarsenOperator(new CartesianSideFloatWeightedAverage<DIM>());
++   this->addSpatialCoarsenOperator(new CartesianCellFloatWeightedAverage<DIM>());
++   this->addSpatialCoarsenOperator(new CartesianEdgeFloatWeightedAverage<DIM>());
++   this->addSpatialCoarsenOperator(new CartesianFaceFloatWeightedAverage<DIM>());
++   this->addSpatialCoarsenOperator(new pdat::NodeFloatInjection<DIM>());
++   this->addSpatialCoarsenOperator(new CartesianOuterfaceFloatWeightedAverage<DIM>());
++   this->addSpatialCoarsenOperator(new CartesianSideFloatWeightedAverage<DIM>());
+ 
+    /*
+     * Standard spatial refining operators.
+     */
+ 
+-   addSpatialRefineOperator(new CartesianCellFloatConservativeLinearRefine<DIM>());
+-   addSpatialRefineOperator(new CartesianEdgeFloatConservativeLinearRefine<DIM>());
+-   addSpatialRefineOperator(new pdat::EdgeFloatConstantRefine<DIM>());
+-   addSpatialRefineOperator(new pdat::CellFloatConstantRefine<DIM>());
+-   addSpatialRefineOperator(new CartesianCellFloatLinearRefine<DIM>());
+-   addSpatialRefineOperator(new CartesianFaceFloatConservativeLinearRefine<DIM>());
+-   addSpatialRefineOperator(new CartesianNodeFloatLinearRefine<DIM>());
+-   addSpatialRefineOperator(new pdat::FaceFloatConstantRefine<DIM>());
+-   addSpatialRefineOperator(new pdat::OuterfaceFloatConstantRefine<DIM>());
+-   addSpatialRefineOperator(new pdat::OuterfaceIntegerConstantRefine<DIM>());
+-   addSpatialRefineOperator(new CartesianSideFloatConservativeLinearRefine<DIM>());
+-   addSpatialRefineOperator(new pdat::SideFloatConstantRefine<DIM>());
++   this->addSpatialRefineOperator(new CartesianCellFloatConservativeLinearRefine<DIM>());
++   this->addSpatialRefineOperator(new CartesianEdgeFloatConservativeLinearRefine<DIM>());
++   this->addSpatialRefineOperator(new pdat::EdgeFloatConstantRefine<DIM>());
++   this->addSpatialRefineOperator(new pdat::CellFloatConstantRefine<DIM>());
++   this->addSpatialRefineOperator(new CartesianCellFloatLinearRefine<DIM>());
++   this->addSpatialRefineOperator(new CartesianFaceFloatConservativeLinearRefine<DIM>());
++   this->addSpatialRefineOperator(new CartesianNodeFloatLinearRefine<DIM>());
++   this->addSpatialRefineOperator(new pdat::FaceFloatConstantRefine<DIM>());
++   this->addSpatialRefineOperator(new pdat::OuterfaceFloatConstantRefine<DIM>());
++   this->addSpatialRefineOperator(new pdat::OuterfaceIntegerConstantRefine<DIM>());
++   this->addSpatialRefineOperator(new CartesianSideFloatConservativeLinearRefine<DIM>());
++   this->addSpatialRefineOperator(new pdat::SideFloatConstantRefine<DIM>());
+ 
+    /*
+     * Standard linear time interpolation operators.
+     */
+ 
+-   addTimeInterpolateOperator(new pdat::CellFloatLinearTimeInterpolateOp<DIM>());
+-   addTimeInterpolateOperator(new pdat::EdgeFloatLinearTimeInterpolateOp<DIM>());
+-   addTimeInterpolateOperator(new pdat::FaceFloatLinearTimeInterpolateOp<DIM>());
+-   addTimeInterpolateOperator(new pdat::NodeFloatLinearTimeInterpolateOp<DIM>());
+-   addTimeInterpolateOperator(new pdat::OuterfaceFloatLinearTimeInterpolateOp<DIM>());
+-   addTimeInterpolateOperator(new pdat::OutersideFloatLinearTimeInterpolateOp<DIM>());
+-   addTimeInterpolateOperator(new pdat::SideFloatLinearTimeInterpolateOp<DIM>());
++   this->addTimeInterpolateOperator(new pdat::CellFloatLinearTimeInterpolateOp<DIM>());
++   this->addTimeInterpolateOperator(new pdat::EdgeFloatLinearTimeInterpolateOp<DIM>());
++   this->addTimeInterpolateOperator(new pdat::FaceFloatLinearTimeInterpolateOp<DIM>());
++   this->addTimeInterpolateOperator(new pdat::NodeFloatLinearTimeInterpolateOp<DIM>());
++   this->addTimeInterpolateOperator(new pdat::OuterfaceFloatLinearTimeInterpolateOp<DIM>());
++   this->addTimeInterpolateOperator(new pdat::OutersideFloatLinearTimeInterpolateOp<DIM>());
++   this->addTimeInterpolateOperator(new pdat::SideFloatLinearTimeInterpolateOp<DIM>());
+ #endif
+ 
+    /*
+     * Standard spatial coarsening operators.
+     */
+-   addSpatialCoarsenOperator(new CartesianCellDoubleWeightedAverage<DIM>());
+-   addSpatialCoarsenOperator(new CartesianEdgeDoubleWeightedAverage<DIM>());
+-   addSpatialCoarsenOperator(new CartesianFaceDoubleWeightedAverage<DIM>());
+-   addSpatialCoarsenOperator(new pdat::NodeDoubleInjection<DIM>());
+-   addSpatialCoarsenOperator(new pdat::NodeIntegerInjection<DIM>());
+-   addSpatialCoarsenOperator(new CartesianOuterfaceDoubleWeightedAverage<DIM>());
+-   addSpatialCoarsenOperator(new pdat::OuternodeDoubleConstantCoarsen<DIM>());
+-   addSpatialCoarsenOperator(new CartesianOutersideDoubleWeightedAverage<DIM>());
+-   addSpatialCoarsenOperator(new CartesianSideDoubleWeightedAverage<DIM>());
++   this->addSpatialCoarsenOperator(new CartesianCellDoubleWeightedAverage<DIM>());
++   this->addSpatialCoarsenOperator(new CartesianEdgeDoubleWeightedAverage<DIM>());
++   this->addSpatialCoarsenOperator(new CartesianFaceDoubleWeightedAverage<DIM>());
++   this->addSpatialCoarsenOperator(new pdat::NodeDoubleInjection<DIM>());
++   this->addSpatialCoarsenOperator(new pdat::NodeIntegerInjection<DIM>());
++   this->addSpatialCoarsenOperator(new CartesianOuterfaceDoubleWeightedAverage<DIM>());
++   this->addSpatialCoarsenOperator(new pdat::OuternodeDoubleConstantCoarsen<DIM>());
++   this->addSpatialCoarsenOperator(new CartesianOutersideDoubleWeightedAverage<DIM>());
++   this->addSpatialCoarsenOperator(new CartesianSideDoubleWeightedAverage<DIM>());
+ 
+    /*
+     * Standard spatial refining operators.
+     */
+-   addSpatialRefineOperator(new CartesianCellDoubleConservativeLinearRefine<DIM>());
+-   addSpatialRefineOperator(new pdat::CellDoubleConstantRefine<DIM>());
+-   addSpatialRefineOperator(new CartesianCellDoubleLinearRefine<DIM>());
+-   addSpatialRefineOperator(new CartesianEdgeDoubleConservativeLinearRefine<DIM>());
+-   addSpatialRefineOperator(new pdat::EdgeDoubleConstantRefine<DIM>());
+-   addSpatialRefineOperator(new pdat::EdgeIntegerConstantRefine<DIM>());
+-   addSpatialRefineOperator(new pdat::CellIntegerConstantRefine<DIM>());
+-   addSpatialRefineOperator(new CartesianFaceDoubleConservativeLinearRefine<DIM>());
+-   addSpatialRefineOperator(new pdat::FaceDoubleConstantRefine<DIM>());
+-   addSpatialRefineOperator(new pdat::FaceIntegerConstantRefine<DIM>());
+-   addSpatialRefineOperator(new CartesianNodeDoubleLinearRefine<DIM>());
+-   addSpatialRefineOperator(new pdat::OuterfaceDoubleConstantRefine<DIM>());
+-   addSpatialRefineOperator(new CartesianSideDoubleConservativeLinearRefine<DIM>());
+-   addSpatialRefineOperator(new pdat::SideDoubleConstantRefine<DIM>());
+-   addSpatialRefineOperator(new pdat::SideIntegerConstantRefine<DIM>());
++   this->addSpatialRefineOperator(new CartesianCellDoubleConservativeLinearRefine<DIM>());
++   this->addSpatialRefineOperator(new pdat::CellDoubleConstantRefine<DIM>());
++   this->addSpatialRefineOperator(new CartesianCellDoubleLinearRefine<DIM>());
++   this->addSpatialRefineOperator(new CartesianEdgeDoubleConservativeLinearRefine<DIM>());
++   this->addSpatialRefineOperator(new pdat::EdgeDoubleConstantRefine<DIM>());
++   this->addSpatialRefineOperator(new pdat::EdgeIntegerConstantRefine<DIM>());
++   this->addSpatialRefineOperator(new pdat::CellIntegerConstantRefine<DIM>());
++   this->addSpatialRefineOperator(new CartesianFaceDoubleConservativeLinearRefine<DIM>());
++   this->addSpatialRefineOperator(new pdat::FaceDoubleConstantRefine<DIM>());
++   this->addSpatialRefineOperator(new pdat::FaceIntegerConstantRefine<DIM>());
++   this->addSpatialRefineOperator(new CartesianNodeDoubleLinearRefine<DIM>());
++   this->addSpatialRefineOperator(new pdat::OuterfaceDoubleConstantRefine<DIM>());
++   this->addSpatialRefineOperator(new CartesianSideDoubleConservativeLinearRefine<DIM>());
++   this->addSpatialRefineOperator(new pdat::SideDoubleConstantRefine<DIM>());
++   this->addSpatialRefineOperator(new pdat::SideIntegerConstantRefine<DIM>());
+ 
+    /*
+     * Standard linear time interpolation operators.
+     */
+-   addTimeInterpolateOperator(new pdat::CellDoubleLinearTimeInterpolateOp<DIM>());
+-   addTimeInterpolateOperator(new pdat::EdgeDoubleLinearTimeInterpolateOp<DIM>());
+-   addTimeInterpolateOperator(new pdat::FaceDoubleLinearTimeInterpolateOp<DIM>());
+-   addTimeInterpolateOperator(new pdat::NodeDoubleLinearTimeInterpolateOp<DIM>());
+-   addTimeInterpolateOperator(new pdat::OuterfaceDoubleLinearTimeInterpolateOp<DIM>());
+-   addTimeInterpolateOperator(new pdat::OutersideDoubleLinearTimeInterpolateOp<DIM>());
+-   addTimeInterpolateOperator(new pdat::SideDoubleLinearTimeInterpolateOp<DIM>());
++   this->addTimeInterpolateOperator(new pdat::CellDoubleLinearTimeInterpolateOp<DIM>());
++   this->addTimeInterpolateOperator(new pdat::EdgeDoubleLinearTimeInterpolateOp<DIM>());
++   this->addTimeInterpolateOperator(new pdat::FaceDoubleLinearTimeInterpolateOp<DIM>());
++   this->addTimeInterpolateOperator(new pdat::NodeDoubleLinearTimeInterpolateOp<DIM>());
++   this->addTimeInterpolateOperator(new pdat::OuterfaceDoubleLinearTimeInterpolateOp<DIM>());
++   this->addTimeInterpolateOperator(new pdat::OutersideDoubleLinearTimeInterpolateOp<DIM>());
++   this->addTimeInterpolateOperator(new pdat::SideDoubleLinearTimeInterpolateOp<DIM>());
+ 
+ }
+ 
+@@ -628,7 +628,7 @@ template<int DIM> void CartesianGridGeometry<DIM>::putToDatabase(
+    db->putDoubleArray("d_x_lo", d_x_lo, DIM);
+    db->putDoubleArray("d_x_up", d_x_up, DIM);
+ 
+-   hier::IntVector<DIM> level0_shift = getPeriodicShift(hier::IntVector<DIM>(1));
++   hier::IntVector<DIM> level0_shift = this->getPeriodicShift(hier::IntVector<DIM>(1));
+    int* temp_shift = level0_shift;
+    db->putIntegerArray("d_periodic_shift", temp_shift, DIM);
+ 
+@@ -710,7 +710,7 @@ template<int DIM> void CartesianGridGeometry<DIM>::getFromInput(
+ 
+       setGeometryData(x_lo, x_up, domain);
+ 
+-      initializePeriodicShift(per_bc);
++      this->initializePeriodicShift(per_bc);
+ 
+    }
+ }
+@@ -752,12 +752,12 @@ template<int DIM> void CartesianGridGeometry<DIM>::getFromRestart()
+    db->getDoubleArray("d_x_lo", x_lo, DIM);
+    db->getDoubleArray("d_x_up", x_up, DIM);
+ 
+-   setGeometryData(x_lo, x_up, domain);
++   this->setGeometryData(x_lo, x_up, domain);
+ 
+    hier::IntVector<DIM> periodic_shift;
+    int* temp_shift = periodic_shift;
+    db->getIntegerArray("d_periodic_shift", temp_shift, DIM);
+-   initializePeriodicShift(periodic_shift);
++   this->initializePeriodicShift(periodic_shift);
+ 
+    d_using_original_locations = db->getBool("d_using_original_locations");
+ }
+diff --git a/include/CartesianGridGeometry.h b/include/CartesianGridGeometry.h
+index 83f2664..1772c43 100644
+--- a/include/CartesianGridGeometry.h
++++ b/include/CartesianGridGeometry.h
+@@ -153,7 +153,7 @@ public:
+     * data describing grid geometry and unregisters the object with
+     * the restart manager if previously registered.
+     */
+-   virtual ~CartesianGridGeometry<DIM>();
++   virtual ~CartesianGridGeometry();
+ 
+    
+    /**
+diff --git a/include/CartesianNodeComplexLinearRefine.h b/include/CartesianNodeComplexLinearRefine.h
+index c33ad95..8864a7b 100644
+--- a/include/CartesianNodeComplexLinearRefine.h
++++ b/include/CartesianNodeComplexLinearRefine.h
+@@ -49,7 +49,7 @@ public:
+    /**
+     * Uninteresting virtual destructor.
+     */
+-   virtual ~CartesianNodeComplexLinearRefine<DIM>();
++   virtual ~CartesianNodeComplexLinearRefine();
+ 
+    /**
+     * Return true if the variable and name string match node-centered 
+diff --git a/include/CartesianNodeDoubleLinearRefine.h b/include/CartesianNodeDoubleLinearRefine.h
+index b237203..ee61c0e 100644
+--- a/include/CartesianNodeDoubleLinearRefine.h
++++ b/include/CartesianNodeDoubleLinearRefine.h
+@@ -49,7 +49,7 @@ public:
+    /**
+     * Uninteresting virtual destructor.
+     */
+-   virtual ~CartesianNodeDoubleLinearRefine<DIM>();
++   virtual ~CartesianNodeDoubleLinearRefine();
+ 
+    /**
+     * Return true if the variable and name string match node-centered 
+diff --git a/include/CartesianNodeFloatLinearRefine.h b/include/CartesianNodeFloatLinearRefine.h
+index bfb9bc7..93bf126 100644
+--- a/include/CartesianNodeFloatLinearRefine.h
++++ b/include/CartesianNodeFloatLinearRefine.h
+@@ -49,7 +49,7 @@ public:
+    /**
+     * Uninteresting virtual destructor.
+     */
+-   virtual ~CartesianNodeFloatLinearRefine<DIM>();
++   virtual ~CartesianNodeFloatLinearRefine();
+ 
+    /**
+     * Return true if the variable and name string match node-centered 
+diff --git a/include/CartesianOuterfaceComplexWeightedAverage.h b/include/CartesianOuterfaceComplexWeightedAverage.h
+index c8e0cee..fe90c38 100644
+--- a/include/CartesianOuterfaceComplexWeightedAverage.h
++++ b/include/CartesianOuterfaceComplexWeightedAverage.h
+@@ -49,7 +49,7 @@ public:
+    /**
+     * Uninteresting virtual destructor.
+     */
+-   virtual ~CartesianOuterfaceComplexWeightedAverage<DIM>();
++   virtual ~CartesianOuterfaceComplexWeightedAverage();
+ 
+    /**
+     * Return true if the variable and name string match the outerface
+diff --git a/include/CartesianOuterfaceDoubleWeightedAverage.h b/include/CartesianOuterfaceDoubleWeightedAverage.h
+index 1d32c7c..9108094 100644
+--- a/include/CartesianOuterfaceDoubleWeightedAverage.h
++++ b/include/CartesianOuterfaceDoubleWeightedAverage.h
+@@ -49,7 +49,7 @@ public:
+    /**
+     * Uninteresting virtual destructor.
+     */
+-   virtual ~CartesianOuterfaceDoubleWeightedAverage<DIM>();
++   virtual ~CartesianOuterfaceDoubleWeightedAverage();
+ 
+    /**
+     * Return true if the variable and name string match the outerface
+diff --git a/include/CartesianOuterfaceFloatWeightedAverage.h b/include/CartesianOuterfaceFloatWeightedAverage.h
+index 56e7971..8e3ebee 100644
+--- a/include/CartesianOuterfaceFloatWeightedAverage.h
++++ b/include/CartesianOuterfaceFloatWeightedAverage.h
+@@ -49,7 +49,7 @@ public:
+    /**
+     * Uninteresting virtual destructor.
+     */
+-   virtual ~CartesianOuterfaceFloatWeightedAverage<DIM>();
++   virtual ~CartesianOuterfaceFloatWeightedAverage();
+ 
+    /**
+     * Return true if the variable and name string match the outerface
+diff --git a/include/CartesianOutersideDoubleWeightedAverage.h b/include/CartesianOutersideDoubleWeightedAverage.h
+index 6df073c..b3819b0 100644
+--- a/include/CartesianOutersideDoubleWeightedAverage.h
++++ b/include/CartesianOutersideDoubleWeightedAverage.h
+@@ -49,7 +49,7 @@ public:
+    /**
+     * Uninteresting virtual destructor.
+     */
+-   virtual ~CartesianOutersideDoubleWeightedAverage<DIM>();
++   virtual ~CartesianOutersideDoubleWeightedAverage();
+ 
+    /**
+     * Return true if the variable and name string match the outerside
+diff --git a/include/CartesianPatchGeometry.h b/include/CartesianPatchGeometry.h
+index 4bc4732..deb953b 100644
+--- a/include/CartesianPatchGeometry.h
++++ b/include/CartesianPatchGeometry.h
+@@ -43,7 +43,7 @@ public:
+     * patch boundary information to hier::PatchGeometry base class constructor
+     * and allocates storage for spatial coordinates on patch.
+     */
+-   CartesianPatchGeometry<DIM>(
++   CartesianPatchGeometry(
+       const hier::IntVector<DIM>& ratio_to_level_zero,
+       const tbox::Array< tbox::Array<bool> >& touches_regular_bdry,
+       const tbox::Array< tbox::Array<bool> >& touches_periodic_bdry,
+@@ -55,7 +55,7 @@ public:
+     * Destructor for CartesianPatchGeometry deallocates the
+     * storage for spatial coordinates on patch.
+     */
+-   ~CartesianPatchGeometry<DIM>();
++   ~CartesianPatchGeometry();
+ 
+    /**
+     * Return const pointer to dx array for patch. 
+diff --git a/include/CartesianRobinBcHelper.h b/include/CartesianRobinBcHelper.h
+index 8f3ebc8..49599d6 100644
+--- a/include/CartesianRobinBcHelper.h
++++ b/include/CartesianRobinBcHelper.h
+@@ -93,7 +93,7 @@ public:
+    /*!
+     * @brief Destructor.
+     */
+-   virtual ~CartesianRobinBcHelper<DIM>(void);
++   virtual ~CartesianRobinBcHelper();
+ 
+ 
+ 
+diff --git a/include/CartesianSideComplexWeightedAverage.h b/include/CartesianSideComplexWeightedAverage.h
+index 5ae0649..a4d5fd5 100644
+--- a/include/CartesianSideComplexWeightedAverage.h
++++ b/include/CartesianSideComplexWeightedAverage.h
+@@ -49,7 +49,7 @@ public:
+    /**
+     * Uninteresting virtual destructor.
+     */
+-   virtual ~CartesianSideComplexWeightedAverage<DIM>();
++   virtual ~CartesianSideComplexWeightedAverage();
+ 
+    /**
+     * Return true if the variable and name string match the side-centered 
+diff --git a/include/CartesianSideDoubleConservativeLinearRefine.h b/include/CartesianSideDoubleConservativeLinearRefine.h
+index e6e9f01..530421c 100644
+--- a/include/CartesianSideDoubleConservativeLinearRefine.h
++++ b/include/CartesianSideDoubleConservativeLinearRefine.h
+@@ -51,7 +51,7 @@ public:
+    /**
+     * Uninteresting virtual destructor.
+     */
+-   virtual ~CartesianSideDoubleConservativeLinearRefine<DIM>();
++   virtual ~CartesianSideDoubleConservativeLinearRefine();
+ 
+    /**
+     * Return true if the variable and name string match side-centered 
+diff --git a/include/CartesianSideDoubleWeightedAverage.h b/include/CartesianSideDoubleWeightedAverage.h
+index 1abac78..92cf15e 100644
+--- a/include/CartesianSideDoubleWeightedAverage.h
++++ b/include/CartesianSideDoubleWeightedAverage.h
+@@ -49,7 +49,7 @@ public:
+    /**
+     * Uninteresting virtual destructor.
+     */
+-   virtual ~CartesianSideDoubleWeightedAverage<DIM>();
++   virtual ~CartesianSideDoubleWeightedAverage();
+ 
+    /**
+     * Return true if the variable and name string match the side-centered 
+diff --git a/include/CartesianSideFloatConservativeLinearRefine.h b/include/CartesianSideFloatConservativeLinearRefine.h
+index 95bc99f..294eae8 100644
+--- a/include/CartesianSideFloatConservativeLinearRefine.h
++++ b/include/CartesianSideFloatConservativeLinearRefine.h
+@@ -51,7 +51,7 @@ public:
+    /**
+     * Uninteresting virtual destructor.
+     */
+-   virtual ~CartesianSideFloatConservativeLinearRefine<DIM>();
++   virtual ~CartesianSideFloatConservativeLinearRefine();
+ 
+    /**
+     * Return true if the variable and name string match side-centered 
+diff --git a/include/CartesianSideFloatWeightedAverage.h b/include/CartesianSideFloatWeightedAverage.h
+index 6d0aed0..ca553a8 100644
+--- a/include/CartesianSideFloatWeightedAverage.h
++++ b/include/CartesianSideFloatWeightedAverage.h
+@@ -49,7 +49,7 @@ public:
+    /**
+     * Uninteresting virtual destructor.
+     */
+-   virtual ~CartesianSideFloatWeightedAverage<DIM>();
++   virtual ~CartesianSideFloatWeightedAverage();
+ 
+    /**
+     * Return true if the variable and name string match the side-centered 
+diff --git a/include/CartesianVizamraiDataWriter.h b/include/CartesianVizamraiDataWriter.h
+index 61dc830..2c29ab1 100644
+--- a/include/CartesianVizamraiDataWriter.h
++++ b/include/CartesianVizamraiDataWriter.h
+@@ -143,7 +143,7 @@ public:
+    /*!
+     * The destructor for the writer does nothing interesting.
+     */
+-   virtual ~CartesianVizamraiDataWriter<DIM>();
++   virtual ~CartesianVizamraiDataWriter();
+ 
+    /*!
+     * Set the finest hierarchy level to write to a Vizamrai file. 
+diff --git a/include/CellComplexConstantRefine.h b/include/CellComplexConstantRefine.h
+index 9732f31..9963522 100644
+--- a/include/CellComplexConstantRefine.h
++++ b/include/CellComplexConstantRefine.h
+@@ -49,7 +49,7 @@ public:
+    /**
+     * Uninteresting virtual destructor.
+     */
+-   virtual ~CellComplexConstantRefine<DIM>();
++   virtual ~CellComplexConstantRefine();
+ 
+    /**
+     * Return true if the variable and name string match cell-centered 
+diff --git a/include/CellComplexLinearTimeInterpolateOp.h b/include/CellComplexLinearTimeInterpolateOp.h
+index 3e09cce..669ccd7 100644
+--- a/include/CellComplexLinearTimeInterpolateOp.h
++++ b/include/CellComplexLinearTimeInterpolateOp.h
+@@ -46,7 +46,7 @@ public:
+    /**
+     * Uninteresting virtual destructor.
+     */
+-   virtual ~CellComplexLinearTimeInterpolateOp<DIM>();
++   virtual ~CellComplexLinearTimeInterpolateOp();
+ 
+    /**
+     * Return true if the variable and name string match the standard
+diff --git a/include/CellData.h b/include/CellData.h
+index 968e5b2..8b42bf0 100644
+--- a/include/CellData.h
++++ b/include/CellData.h
+@@ -110,7 +110,7 @@ public:
+    /*!
+     * @brief The virtual destructor for a cell data object.
+     */
+-   virtual ~CellData<DIM,TYPE>();
++   virtual ~CellData();
+ 
+    /*!
+     * @brief Return the depth (e.g., the number of components in each spatial
+diff --git a/include/CellDataFactory.h b/include/CellDataFactory.h
+index 421991d..5001725 100644
+--- a/include/CellDataFactory.h
++++ b/include/CellDataFactory.h
+@@ -54,7 +54,7 @@ public:
+    /**
+     * Virtual destructor for the cell data factory class.
+     */
+-   virtual ~CellDataFactory<DIM,TYPE>();
++   virtual ~CellDataFactory();
+ 
+    /**
+     * @brief Abstract virtual function to clone a patch data factory.
+diff --git a/include/CellDoubleConstantRefine.h b/include/CellDoubleConstantRefine.h
+index 59d959f..8f2cb34 100644
+--- a/include/CellDoubleConstantRefine.h
++++ b/include/CellDoubleConstantRefine.h
+@@ -49,7 +49,7 @@ public:
+    /**
+     * Uninteresting virtual destructor.
+     */
+-   virtual ~CellDoubleConstantRefine<DIM>();
++   virtual ~CellDoubleConstantRefine();
+ 
+    /**
+     * Return true if the variable and name string match cell-centered 
+diff --git a/include/CellDoubleLinearTimeInterpolateOp.h b/include/CellDoubleLinearTimeInterpolateOp.h
+index fd80efc..883d22f 100644
+--- a/include/CellDoubleLinearTimeInterpolateOp.h
++++ b/include/CellDoubleLinearTimeInterpolateOp.h
+@@ -46,7 +46,7 @@ public:
+    /**
+     * Uninteresting virtual destructor.
+     */
+-   virtual ~CellDoubleLinearTimeInterpolateOp<DIM>();
++   virtual ~CellDoubleLinearTimeInterpolateOp();
+ 
+    /**
+     * Return true if the variable and name string match the standard
+diff --git a/include/CellFloatConstantRefine.h b/include/CellFloatConstantRefine.h
+index a446b49..74907d6 100644
+--- a/include/CellFloatConstantRefine.h
++++ b/include/CellFloatConstantRefine.h
+@@ -49,7 +49,7 @@ public:
+    /**
+     * Uninteresting virtual destructor.
+     */
+-   virtual ~CellFloatConstantRefine<DIM>();
++   virtual ~CellFloatConstantRefine();
+ 
+    /**
+     * Return true if the variable and name string match cell-centered 
+diff --git a/include/CellFloatLinearTimeInterpolateOp.h b/include/CellFloatLinearTimeInterpolateOp.h
+index e7a16bc..bd52fb8 100644
+--- a/include/CellFloatLinearTimeInterpolateOp.h
++++ b/include/CellFloatLinearTimeInterpolateOp.h
+@@ -46,7 +46,7 @@ public:
+    /**
+     * Uninteresting virtual destructor.
+     */
+-   virtual ~CellFloatLinearTimeInterpolateOp<DIM>();
++   virtual ~CellFloatLinearTimeInterpolateOp();
+ 
+    /**
+     * Return true if the variable and name string match the standard
+diff --git a/include/CellGeometry.h b/include/CellGeometry.h
+index e4aa7bd..10d1c16 100644
+--- a/include/CellGeometry.h
++++ b/include/CellGeometry.h
+@@ -59,7 +59,7 @@ public:
+    /*!
+     * @brief The virtual destructor does nothing interesting.
+     */
+-   virtual ~CellGeometry<DIM>();
++   virtual ~CellGeometry();
+ 
+    /*!
+     * @brief Compute the overlap in cell-centered index space between 
+diff --git a/include/CellIndex.h b/include/CellIndex.h
+index 7455900..c37d994 100644
+--- a/include/CellIndex.h
++++ b/include/CellIndex.h
+@@ -54,7 +54,7 @@ public:
+    /**
+     * The cell index destructor does nothing interesting.
+     */
+-   ~CellIndex<DIM>();
++   ~CellIndex();
+ 
+    /**
+     * Plus-equals operator for a cell index and an integer vector.
+diff --git a/include/CellIntegerConstantRefine.h b/include/CellIntegerConstantRefine.h
+index 8740908..16c8b6a 100644
+--- a/include/CellIntegerConstantRefine.h
++++ b/include/CellIntegerConstantRefine.h
+@@ -49,7 +49,7 @@ public:
+    /**
+     * Uninteresting virtual destructor.
+     */
+-   virtual ~CellIntegerConstantRefine<DIM>();
++   virtual ~CellIntegerConstantRefine();
+ 
+    /**
+     * Return true if the variable and name string match cell-centered 
+diff --git a/include/CellIterator.h b/include/CellIterator.h
+index 6859915..5451254 100644
+--- a/include/CellIterator.h
++++ b/include/CellIterator.h
+@@ -67,7 +67,7 @@ public:
+    /**
+     * Destructor for the cell iterator.
+     */
+-   ~CellIterator<DIM>();
++   ~CellIterator();
+ 
+    /**
+     * Extract the cell index corresponding to the iterator position in the box.
+diff --git a/include/CellOverlap.h b/include/CellOverlap.h
+index 32103af..84d8625 100644
+--- a/include/CellOverlap.h
++++ b/include/CellOverlap.h
+@@ -48,7 +48,7 @@ public:
+     * The virtual destructor does nothing interesting except deallocate
+     * box data.
+     */
+-   virtual ~CellOverlap<DIM>();
++   virtual ~CellOverlap();
+ 
+    /**
+     * Return whether there is an empty intersection between the two
+diff --git a/include/CellPoissonFACOps.h b/include/CellPoissonFACOps.h
+index 531969d..42e0a27 100644
+--- a/include/CellPoissonFACOps.h
++++ b/include/CellPoissonFACOps.h
+@@ -170,7 +170,7 @@ public:
+     *
+     * Deallocate internal data.
+     */
+-   ~CellPoissonFACOps<DIM>(void);
++   ~CellPoissonFACOps();
+ 
+ 
+ 
+diff --git a/include/CellPoissonFACSolver.h b/include/CellPoissonFACSolver.h
+index ed5b883..17a637b 100644
+--- a/include/CellPoissonFACSolver.h
++++ b/include/CellPoissonFACSolver.h
+@@ -138,7 +138,7 @@ public:
+    /*!
+     * @brief Destructor.
+     */
+-   ~CellPoissonFACSolver<DIM>(void);
++   ~CellPoissonFACSolver();
+ 
+ 
+ 
+diff --git a/include/CellPoissonHypreSolver.h b/include/CellPoissonHypreSolver.h
+index 4029f69..4cf87ae 100644
+--- a/include/CellPoissonHypreSolver.h
++++ b/include/CellPoissonHypreSolver.h
+@@ -115,7 +115,7 @@ public:
+    /*!
+     * The Poisson destructor releases all internally managed data.
+     */
+-   ~CellPoissonHypreSolver<DIM>();
++   ~CellPoissonHypreSolver();
+ 
+    /*!
+     * @brief Initialize to a given hierarchy.
+diff --git a/include/CellVariable.h b/include/CellVariable.h
+index b09a30c..3a7ff35 100644
+--- a/include/CellVariable.h
++++ b/include/CellVariable.h
+@@ -50,7 +50,7 @@ public:
+    /*!
+     * @brief Virtual destructor for cell variable objects.
+     */
+-   virtual ~CellVariable<DIM,TYPE>();
++   virtual ~CellVariable();
+ 
+    /*!
+     * @brief Return true indicating that cell data quantities will always 
+diff --git a/include/CoarseFineBoundary.h b/include/CoarseFineBoundary.h
+index 6a3bf2d..e7318d0 100644
+--- a/include/CoarseFineBoundary.h
++++ b/include/CoarseFineBoundary.h
+@@ -102,7 +102,7 @@ public:
+       int ln,
+       const IntVector<DIM>& max_ghost_width);
+ 
+-   ~CoarseFineBoundary<DIM>();
++   ~CoarseFineBoundary();
+ 
+    /*!
+     * @brief Construct a CoarseFineBoundary<DIM> object for the specified
+diff --git a/include/CoarsenAlgorithm.h b/include/CoarsenAlgorithm.h
+index b3f10db..f5b3d00 100644
+--- a/include/CoarsenAlgorithm.h
++++ b/include/CoarsenAlgorithm.h
+@@ -117,7 +117,7 @@ public:
+    /*!
+     * The virtual destructor for the algorithm releases all internal storage.
+     */
+-   virtual ~CoarsenAlgorithm<DIM>();
++   virtual ~CoarsenAlgorithm();
+ 
+    /*!
+     * Register a coarsening operation with the coarsening algorithm.  Data
+diff --git a/include/CoarsenClasses.h b/include/CoarsenClasses.h
+index a0a2781..2a84665 100644
+--- a/include/CoarsenClasses.h
++++ b/include/CoarsenClasses.h
+@@ -64,7 +64,7 @@ public:
+     * The virtual destructor destroys the coarsen data items owned
+     * by this object (and the associated CoarsenAlgorithm<DIM> object).
+     */
+-   virtual ~CoarsenClasses<DIM>();
++   virtual ~CoarsenClasses();
+ 
+    /**
+     * Return number of equivalence classes maintained by this object
+diff --git a/include/CoarsenCopyTransaction.h b/include/CoarsenCopyTransaction.h
+index eb74ca3..8b975ef 100644
+--- a/include/CoarsenCopyTransaction.h
++++ b/include/CoarsenCopyTransaction.h
+@@ -93,7 +93,7 @@ public:
+     * The virtual destructor for the copy transaction releases all
+     * memory associated with the transaction.
+     */
+-   virtual ~CoarsenCopyTransaction<DIM>();
++   virtual ~CoarsenCopyTransaction();
+ 
+    /*!
+     * Return a boolean indicating whether this transaction can estimate
+diff --git a/include/CoarsenOperator.h b/include/CoarsenOperator.h
+index 5d17745..fbbea89 100644
+--- a/include/CoarsenOperator.h
++++ b/include/CoarsenOperator.h
+@@ -75,7 +75,7 @@ public:
+     * The virtual destructor for the coarsening operator does
+     * nothing interesting.
+     */
+-   virtual ~CoarsenOperator<DIM>();
++   virtual ~CoarsenOperator();
+ 
+    /**
+     * Return true if the coarsening operation matches the variable and
+diff --git a/include/CoarsenPatchStrategy.h b/include/CoarsenPatchStrategy.h
+index 896f144..651435b 100644
+--- a/include/CoarsenPatchStrategy.h
++++ b/include/CoarsenPatchStrategy.h
+@@ -51,7 +51,7 @@ public:
+    /*!
+     * The virtual destructor for coarsen strategy does nothing interesting.
+     */
+-   virtual ~CoarsenPatchStrategy<DIM>();
++   virtual ~CoarsenPatchStrategy();
+ 
+    /*!
+     * Return maximum stencil width needed over all user-defined
+diff --git a/include/CoarsenSchedule.h b/include/CoarsenSchedule.h
+index 1f13eb5..b5d8dcf 100644
+--- a/include/CoarsenSchedule.h
++++ b/include/CoarsenSchedule.h
+@@ -122,7 +122,7 @@ public:
+    /*!
+     * The virtual destructor for the schedule releases all internal storage.
+     */
+-   virtual ~CoarsenSchedule<DIM>();
++   virtual ~CoarsenSchedule();
+ 
+    /*!
+     * Reset this coarsen schedule to perform data transfers asssociated with
+diff --git a/include/EdgeComplexConstantRefine.h b/include/EdgeComplexConstantRefine.h
+index 1c3956e..9982558 100644
+--- a/include/EdgeComplexConstantRefine.h
++++ b/include/EdgeComplexConstantRefine.h
+@@ -49,7 +49,7 @@ public:
+    /**
+     * Uninteresting virtual destructor.
+     */
+-   virtual ~EdgeComplexConstantRefine<DIM>();
++   virtual ~EdgeComplexConstantRefine();
+ 
+    /**
+     * Return true if the variable and name string match edge-centered 
+diff --git a/include/EdgeComplexLinearTimeInterpolateOp.h b/include/EdgeComplexLinearTimeInterpolateOp.h
+index 39495f0..916038e 100644
+--- a/include/EdgeComplexLinearTimeInterpolateOp.h
++++ b/include/EdgeComplexLinearTimeInterpolateOp.h
+@@ -46,7 +46,7 @@ public:
+    /**
+     * Uninteresting virtual destructor.
+     */
+-   virtual ~EdgeComplexLinearTimeInterpolateOp<DIM>();
++   virtual ~EdgeComplexLinearTimeInterpolateOp();
+ 
+    /**
+     * Return true if the variable and name string match the standard
+diff --git a/include/EdgeData.h b/include/EdgeData.h
+index 755aaa6..89bdb0c 100644
+--- a/include/EdgeData.h
++++ b/include/EdgeData.h
+@@ -129,7 +129,7 @@ public:
+    /*!
+     * @brief The virtual destructor for an edge data object.
+     */
+-   virtual ~EdgeData<DIM,TYPE>();
++   virtual ~EdgeData();
+ 
+    /*!
+     * @brief Return the depth (e.g., the number of components in each spatial
+diff --git a/include/EdgeDataFactory.h b/include/EdgeDataFactory.h
+index 7aa5540..0acbbf3 100644
+--- a/include/EdgeDataFactory.h
++++ b/include/EdgeDataFactory.h
+@@ -55,7 +55,7 @@ public:
+    /**
+     * Virtual destructor for the edge data factory class.
+     */
+-   virtual ~EdgeDataFactory<DIM,TYPE>();
++   virtual ~EdgeDataFactory();
+ 
+    /**
+     * @brief Abstract virtual function to clone a patch data factory.
+diff --git a/include/EdgeDoubleConstantRefine.h b/include/EdgeDoubleConstantRefine.h
+index a3e536b..a7584ec 100644
+--- a/include/EdgeDoubleConstantRefine.h
++++ b/include/EdgeDoubleConstantRefine.h
+@@ -49,7 +49,7 @@ public:
+    /**
+     * Uninteresting virtual destructor.
+     */
+-   virtual ~EdgeDoubleConstantRefine<DIM>();
++   virtual ~EdgeDoubleConstantRefine();
+ 
+    /**
+     * Return true if the variable and name string match edge-centered 
+diff --git a/include/EdgeDoubleLinearTimeInterpolateOp.h b/include/EdgeDoubleLinearTimeInterpolateOp.h
+index f371c3d..1fd80e1 100644
+--- a/include/EdgeDoubleLinearTimeInterpolateOp.h
++++ b/include/EdgeDoubleLinearTimeInterpolateOp.h
+@@ -46,7 +46,7 @@ public:
+    /**
+     * Uninteresting virtual destructor.
+     */
+-   virtual ~EdgeDoubleLinearTimeInterpolateOp<DIM>();
++   virtual ~EdgeDoubleLinearTimeInterpolateOp();
+ 
+    /**
+     * Return true if the variable and name string match the standard
+diff --git a/include/EdgeFloatConstantRefine.h b/include/EdgeFloatConstantRefine.h
+index 0256125..14c75d0 100644
+--- a/include/EdgeFloatConstantRefine.h
++++ b/include/EdgeFloatConstantRefine.h
+@@ -49,7 +49,7 @@ public:
+    /**
+     * Uninteresting virtual destructor.
+     */
+-   virtual ~EdgeFloatConstantRefine<DIM>();
++   virtual ~EdgeFloatConstantRefine();
+ 
+    /**
+     * Return true if the variable and name string match edge-centered 
+diff --git a/include/EdgeFloatLinearTimeInterpolateOp.h b/include/EdgeFloatLinearTimeInterpolateOp.h
+index 91efde8..3e86b56 100644
+--- a/include/EdgeFloatLinearTimeInterpolateOp.h
++++ b/include/EdgeFloatLinearTimeInterpolateOp.h
+@@ -46,7 +46,7 @@ public:
+    /**
+     * Uninteresting virtual destructor.
+     */
+-   virtual ~EdgeFloatLinearTimeInterpolateOp<DIM>();
++   virtual ~EdgeFloatLinearTimeInterpolateOp();
+ 
+    /**
+     * Return true if the variable and name string match the standard
+diff --git a/include/EdgeGeometry.h b/include/EdgeGeometry.h
+index cf376e7..485cea9 100644
+--- a/include/EdgeGeometry.h
++++ b/include/EdgeGeometry.h
+@@ -62,7 +62,7 @@ public:
+    /*!
+     * @brief The virtual destructor does nothing interesting.
+     */
+-   virtual ~EdgeGeometry<DIM>();
++   virtual ~EdgeGeometry();
+ 
+    /*!
+     * @brief Compute the overlap in edge-centered index space between
+diff --git a/include/EdgeIndex.h b/include/EdgeIndex.h
+index a567946..5907dc7 100644
+--- a/include/EdgeIndex.h
++++ b/include/EdgeIndex.h
+@@ -60,7 +60,7 @@ public:
+    /**
+     * The edge index destructor does nothing interesting.
+     */
+-   ~EdgeIndex<DIM>();
++   ~EdgeIndex();
+ 
+    /**
+     * Get the axis for which this edge index is defined (X=0, Y=1, Z=2).
+diff --git a/include/EdgeIntegerConstantRefine.h b/include/EdgeIntegerConstantRefine.h
+index ab365e9..bdf124f 100644
+--- a/include/EdgeIntegerConstantRefine.h
++++ b/include/EdgeIntegerConstantRefine.h
+@@ -49,7 +49,7 @@ public:
+    /**
+     * Uninteresting virtual destructor.
+     */
+-   virtual ~EdgeIntegerConstantRefine<DIM>();
++   virtual ~EdgeIntegerConstantRefine();
+ 
+    /**
+     * Return true if the variable and name string match edge-centered 
+diff --git a/include/EdgeIterator.h b/include/EdgeIterator.h
+index a748544..fcee9ec 100644
+--- a/include/EdgeIterator.h
++++ b/include/EdgeIterator.h
+@@ -67,7 +67,7 @@ public:
+    /**
+     * Destructor for the edge iterator.
+     */
+-   ~EdgeIterator<DIM>();
++   ~EdgeIterator();
+ 
+    /**
+     * Extract the edge index corresponding to the iterator position in the box.
+diff --git a/include/EdgeOverlap.h b/include/EdgeOverlap.h
+index 51f1a7c..046ce51 100644
+--- a/include/EdgeOverlap.h
++++ b/include/EdgeOverlap.h
+@@ -45,7 +45,7 @@ public:
+     * The virtual destructor does nothing interesting except deallocate
+     * box data.
+     */
+-   virtual ~EdgeOverlap<DIM>();
++   virtual ~EdgeOverlap();
+ 
+    /**
+     * Return whether there is an empty intersection between the two
+diff --git a/include/EdgeVariable.h b/include/EdgeVariable.h
+index fda956e..fa2031c 100644
+--- a/include/EdgeVariable.h
++++ b/include/EdgeVariable.h
+@@ -55,7 +55,7 @@ public:
+    /*!
+     * @brief Virtual destructor for edge variable objects.
+     */
+-   virtual ~EdgeVariable<DIM,TYPE>();
++   virtual ~EdgeVariable();
+ 
+    /*!
+     * @brief Return boolean indicating which edge data values (coarse
+diff --git a/include/EmbeddedBoundaryShapeSphere.h b/include/EmbeddedBoundaryShapeSphere.h
+index 0f9664c..f2c0b62 100644
+--- a/include/EmbeddedBoundaryShapeSphere.h
++++ b/include/EmbeddedBoundaryShapeSphere.h
+@@ -62,7 +62,7 @@ public:
+    /*!
+     * The destructor does nothing.
+     */
+-   ~EmbeddedBoundaryShapeSphere<DIM>();
++   ~EmbeddedBoundaryShapeSphere();
+ 
+    /*!
+     * Concrete implementation of the isInside() method defined by the
+diff --git a/include/EmptyAlgorithmX.C b/include/EmptyAlgorithmX.C
+index 9b9795d..98e1e1a 100644
+--- a/include/EmptyAlgorithmX.C
++++ b/include/EmptyAlgorithmX.C
+@@ -14,6 +14,12 @@
+ namespace SAMRAI {
+    namespace algs {
+       template<int DIM> class Empty {
++	 Empty() :
++	    something(0) 
++	 {
++	 }
++
++	 int something;
+       };
+ 
+       template class Empty< NDIM >;
+diff --git a/include/EmptyAppUtilsX.C b/include/EmptyAppUtilsX.C
+index 93fd14d..995382a 100644
+--- a/include/EmptyAppUtilsX.C
++++ b/include/EmptyAppUtilsX.C
+@@ -14,6 +14,12 @@
+ namespace SAMRAI {
+    namespace appu {
+       template<int DIM> class Empty {
++	 Empty() :
++	    something(0) 
++	 {
++	 }
++
++	 int something;
+       };
+ 
+       template class Empty< NDIM >;
+diff --git a/include/EmptyGeometryX.C b/include/EmptyGeometryX.C
+index 9165e43..601487c 100644
+--- a/include/EmptyGeometryX.C
++++ b/include/EmptyGeometryX.C
+@@ -14,6 +14,12 @@
+ namespace SAMRAI {
+    namespace geom {
+       template<int DIM> class Empty {
++	 Empty() :
++	    something(0) 
++	 {
++	 }
++
++	 int something;
+       };
+ 
+       template class Empty< NDIM >;
+diff --git a/include/EmptyHierarchyX.C b/include/EmptyHierarchyX.C
+index d8f8a22..85b1857 100644
+--- a/include/EmptyHierarchyX.C
++++ b/include/EmptyHierarchyX.C
+@@ -14,6 +14,12 @@
+ namespace SAMRAI {
+    namespace hier {
+       template<int DIM> class Empty {
++	 Empty() :
++	    something(0) 
++	 {
++	 }
++
++	 int something;
+       };
+ 
+       template class Empty< NDIM >;
+diff --git a/include/EmptyMathOpsX.C b/include/EmptyMathOpsX.C
+index 4d14944..40a8801 100644
+--- a/include/EmptyMathOpsX.C
++++ b/include/EmptyMathOpsX.C
+@@ -14,6 +14,12 @@
+ namespace SAMRAI {
+    namespace math {
+       template<int DIM> class Empty {
++	 Empty() :
++	    something(0) 
++	 {
++	 }
++
++	 int something;
+       };
+ 
+       template class Empty< NDIM >;
+diff --git a/include/EmptyMeshX.C b/include/EmptyMeshX.C
+index f9f513c..d065dff 100644
+--- a/include/EmptyMeshX.C
++++ b/include/EmptyMeshX.C
+@@ -14,6 +14,12 @@
+ namespace SAMRAI {
+    namespace mesh {
+       template<int DIM> class Empty {
++	 Empty() :
++	    something(0) 
++	 {
++	 }
++
++	 int something;
+       };
+ 
+       template class Empty< NDIM >;
+diff --git a/include/EmptyPatchDataX.C b/include/EmptyPatchDataX.C
+index d696aee..5d9f665 100644
+--- a/include/EmptyPatchDataX.C
++++ b/include/EmptyPatchDataX.C
+@@ -14,6 +14,12 @@
+ namespace SAMRAI {
+    namespace pdat {
+       template<int DIM> class Empty {
++	 Empty() :
++	    something(0) 
++	 {
++	 }
++
++	 int something;
+       };
+ 
+       template class Empty< NDIM >;
+diff --git a/include/EmptySolversX.C b/include/EmptySolversX.C
+index c0abd23..9190fe7 100644
+--- a/include/EmptySolversX.C
++++ b/include/EmptySolversX.C
+@@ -14,6 +14,12 @@
+ namespace SAMRAI {
+    namespace solv {
+       template<int DIM> class Empty {
++	 Empty() :
++	    something(0) 
++	 {
++	 }
++
++	 int something;
+       };
+ 
+       template class Empty< NDIM >;
+diff --git a/include/EmptyTransferX.C b/include/EmptyTransferX.C
+index 955f3fb..fed18f1 100644
+--- a/include/EmptyTransferX.C
++++ b/include/EmptyTransferX.C
+@@ -14,6 +14,12 @@
+ namespace SAMRAI {
+    namespace xfer {
+       template<int DIM> class Empty {
++	 Empty() :
++	    something(0) 
++	 {
++	 }
++
++	 int something;
+       };
+ 
+       template class Empty< NDIM >;
+diff --git a/include/FACOperatorStrategy.h b/include/FACOperatorStrategy.h
+index 09f1d08..29aac61 100644
+--- a/include/FACOperatorStrategy.h
++++ b/include/FACOperatorStrategy.h
+@@ -49,7 +49,7 @@ public:
+    /*!
+     * @brief Virtual destructor.
+     */
+-   virtual ~FACOperatorStrategy<DIM>();
++   virtual ~FACOperatorStrategy();
+ 
+    //@{
+    /*!
+diff --git a/include/FACPreconditioner.C b/include/FACPreconditioner.C
+index af374cd..5843f17 100644
+--- a/include/FACPreconditioner.C
++++ b/include/FACPreconditioner.C
+@@ -152,18 +152,22 @@ template<int DIM> void FACPreconditioner<DIM>::deallocateSolverState( )
+       d_patch_hierarchy.setNull();
+ 
+       if ( d_error_vector ) {
++         d_error_vector->resetLevels(d_error_vector->getCoarsestLevelNumber(), std::min(d_error_vector->getFinestLevelNumber(),d_error_vector->getPatchHierarchy()->getFinestLevelNumber()));
+          d_error_vector->freeVectorComponents();
+          d_error_vector.setNull();
+       }
+       if ( d_tmp_error ) {
++         d_tmp_error->resetLevels(d_tmp_error->getCoarsestLevelNumber(), std::min(d_tmp_error->getFinestLevelNumber(),d_tmp_error->getPatchHierarchy()->getFinestLevelNumber()));
+          d_tmp_error->freeVectorComponents();
+          d_tmp_error.setNull();
+       }
+       if ( d_residual_vector ) {
++         d_residual_vector->resetLevels(d_residual_vector->getCoarsestLevelNumber(), std::min(d_residual_vector->getFinestLevelNumber(),d_residual_vector->getPatchHierarchy()->getFinestLevelNumber()));
+          d_residual_vector->freeVectorComponents();
+          d_residual_vector.setNull();
+       }
+       if ( d_tmp_residual ) {
++         d_tmp_residual->resetLevels(d_tmp_residual->getCoarsestLevelNumber(), std::min(d_tmp_residual->getFinestLevelNumber(),d_tmp_residual->getPatchHierarchy()->getFinestLevelNumber()));
+          d_tmp_residual->freeVectorComponents();
+          d_tmp_residual.setNull();
+       }
+diff --git a/include/FACPreconditioner.h b/include/FACPreconditioner.h
+index b0de597..877f56e 100644
+--- a/include/FACPreconditioner.h
++++ b/include/FACPreconditioner.h
+@@ -71,7 +71,7 @@ public:
+    /*!
+     * Virtual destructor.
+     */
+-   virtual ~FACPreconditioner<DIM>();
++   virtual ~FACPreconditioner();
+ 
+    /*!
+     * @brief Solve linear system Au=f using the FAC algorithm.
+diff --git a/include/FaceComplexConstantRefine.h b/include/FaceComplexConstantRefine.h
+index 1e69208..f020972 100644
+--- a/include/FaceComplexConstantRefine.h
++++ b/include/FaceComplexConstantRefine.h
+@@ -49,7 +49,7 @@ public:
+    /**
+     * Uninteresting virtual destructor.
+     */
+-   virtual ~FaceComplexConstantRefine<DIM>();
++   virtual ~FaceComplexConstantRefine();
+ 
+    /**
+     * Return true if the variable and name string match face-centered 
+diff --git a/include/FaceComplexLinearTimeInterpolateOp.h b/include/FaceComplexLinearTimeInterpolateOp.h
+index f0edcb3..eeff61c 100644
+--- a/include/FaceComplexLinearTimeInterpolateOp.h
++++ b/include/FaceComplexLinearTimeInterpolateOp.h
+@@ -46,7 +46,7 @@ public:
+    /**
+     * Uninteresting virtual destructor.
+     */
+-   virtual ~FaceComplexLinearTimeInterpolateOp<DIM>();
++   virtual ~FaceComplexLinearTimeInterpolateOp();
+ 
+    /**
+     * Return true if the variable and name string match the standard
+diff --git a/include/FaceData.h b/include/FaceData.h
+index 39043df..d5b1916 100644
+--- a/include/FaceData.h
++++ b/include/FaceData.h
+@@ -131,7 +131,7 @@ public:
+    /*!
+     * @brief The virtual destructor for a face data object.
+     */
+-   virtual ~FaceData<DIM,TYPE>();
++   virtual ~FaceData();
+ 
+    /*!
+     * @brief Return the depth (e.g., the number of components in each spatial
+diff --git a/include/FaceDataFactory.h b/include/FaceDataFactory.h
+index fb56484..0f0dcd3 100644
+--- a/include/FaceDataFactory.h
++++ b/include/FaceDataFactory.h
+@@ -55,7 +55,7 @@ public:
+    /**
+     * Virtual destructor for the face data factory class.
+     */
+-   virtual ~FaceDataFactory<DIM,TYPE>();
++   virtual ~FaceDataFactory();
+ 
+    /**
+     * @brief Abstract virtual function to clone a patch data factory.
+diff --git a/include/FaceDoubleConstantRefine.h b/include/FaceDoubleConstantRefine.h
+index e6c1b68..275fd78 100644
+--- a/include/FaceDoubleConstantRefine.h
++++ b/include/FaceDoubleConstantRefine.h
+@@ -49,7 +49,7 @@ public:
+    /**
+     * Uninteresting virtual destructor.
+     */
+-   virtual ~FaceDoubleConstantRefine<DIM>();
++   virtual ~FaceDoubleConstantRefine();
+ 
+    /**
+     * Return true if the variable and name string match face-centered 
+diff --git a/include/FaceDoubleLinearTimeInterpolateOp.h b/include/FaceDoubleLinearTimeInterpolateOp.h
+index 1653e2a..d5e9da2 100644
+--- a/include/FaceDoubleLinearTimeInterpolateOp.h
++++ b/include/FaceDoubleLinearTimeInterpolateOp.h
+@@ -46,7 +46,7 @@ public:
+    /**
+     * Uninteresting virtual destructor.
+     */
+-   virtual ~FaceDoubleLinearTimeInterpolateOp<DIM>();
++   virtual ~FaceDoubleLinearTimeInterpolateOp();
+ 
+    /**
+     * Return true if the variable and name string match the standard
+diff --git a/include/FaceFloatConstantRefine.h b/include/FaceFloatConstantRefine.h
+index b0296ff..8465a67 100644
+--- a/include/FaceFloatConstantRefine.h
++++ b/include/FaceFloatConstantRefine.h
+@@ -49,7 +49,7 @@ public:
+    /**
+     * Uninteresting virtual destructor.
+     */
+-   virtual ~FaceFloatConstantRefine<DIM>();
++   virtual ~FaceFloatConstantRefine();
+ 
+    /**
+     * Return true if the variable and name string match face-centered 
+diff --git a/include/FaceFloatLinearTimeInterpolateOp.h b/include/FaceFloatLinearTimeInterpolateOp.h
+index bd18aff..ca07533 100644
+--- a/include/FaceFloatLinearTimeInterpolateOp.h
++++ b/include/FaceFloatLinearTimeInterpolateOp.h
+@@ -46,7 +46,7 @@ public:
+    /**
+     * Uninteresting virtual destructor.
+     */
+-   virtual ~FaceFloatLinearTimeInterpolateOp<DIM>();
++   virtual ~FaceFloatLinearTimeInterpolateOp();
+ 
+    /**
+     * Return true if the variable and name string match the standard
+diff --git a/include/FaceGeometry.h b/include/FaceGeometry.h
+index 9e3202f..9719f00 100644
+--- a/include/FaceGeometry.h
++++ b/include/FaceGeometry.h
+@@ -64,7 +64,7 @@ public:
+    /*!
+     * @brief The virtual destructor does nothing interesting.
+     */
+-   virtual ~FaceGeometry<DIM>();
++   virtual ~FaceGeometry();
+ 
+    /*!
+     * @brief Compute the overlap in face-centered index space between
+diff --git a/include/FaceIndex.h b/include/FaceIndex.h
+index d2a3af6..a43e47d 100644
+--- a/include/FaceIndex.h
++++ b/include/FaceIndex.h
+@@ -59,7 +59,7 @@ public:
+    /**
+     * The face index destructor does nothing interesting.
+     */
+-   ~FaceIndex<DIM>();
++   ~FaceIndex();
+ 
+    /**
+     * Get the axis for which this face index is defined (X=0, Y=1, Z=2).
+diff --git a/include/FaceIntegerConstantRefine.h b/include/FaceIntegerConstantRefine.h
+index 4a4d05e..8d203f2 100644
+--- a/include/FaceIntegerConstantRefine.h
++++ b/include/FaceIntegerConstantRefine.h
+@@ -49,7 +49,7 @@ public:
+    /**
+     * Uninteresting virtual destructor.
+     */
+-   virtual ~FaceIntegerConstantRefine<DIM>();
++   virtual ~FaceIntegerConstantRefine();
+ 
+    /**
+     * Return true if the variable and name string match face-centered 
+diff --git a/include/FaceIterator.h b/include/FaceIterator.h
+index e9e5d5f..6d5110d 100644
+--- a/include/FaceIterator.h
++++ b/include/FaceIterator.h
+@@ -67,7 +67,7 @@ public:
+    /**
+     * Destructor for the face iterator.
+     */
+-   ~FaceIterator<DIM>();
++   ~FaceIterator();
+ 
+    /**
+     * Extract the face index corresponding to the iterator position in the box.
+diff --git a/include/FaceOverlap.h b/include/FaceOverlap.h
+index a696176..eb47bd3 100644
+--- a/include/FaceOverlap.h
++++ b/include/FaceOverlap.h
+@@ -45,7 +45,7 @@ public:
+     * The virtual destructor does nothing interesting except deallocate
+     * box data.
+     */
+-   virtual ~FaceOverlap<DIM>();
++   virtual ~FaceOverlap();
+ 
+    /**
+     * Return whether there is an empty intersection between the two
+diff --git a/include/FaceVariable.h b/include/FaceVariable.h
+index ebe1480..5f7ef54 100644
+--- a/include/FaceVariable.h
++++ b/include/FaceVariable.h
+@@ -62,7 +62,7 @@ public:
+    /*!
+     * @brief Virtual destructor for face variable objects.
+     */
+-   virtual ~FaceVariable<DIM,TYPE>();
++   virtual ~FaceVariable();
+ 
+    /*!
+     * @brief Return boolean indicating which face data values (coarse
+diff --git a/include/Geometry.h b/include/Geometry.h
+index 01597bd..7101c8b 100644
+--- a/include/Geometry.h
++++ b/include/Geometry.h
+@@ -67,7 +67,7 @@ public:
+     * The virtual destructor for the geometry base class does
+     * nothing interesting.
+     */
+-   virtual ~Geometry<DIM>();
++   virtual ~Geometry();
+ 
+    /**
+     * Add concrete spatial coarsening operator instance to appropriate
+diff --git a/include/GhostCellRobinBcCoefs.h b/include/GhostCellRobinBcCoefs.h
+index ab8bdc6..a9f32b0 100644
+--- a/include/GhostCellRobinBcCoefs.h
++++ b/include/GhostCellRobinBcCoefs.h
+@@ -83,7 +83,7 @@ public:
+    /*!
+     * @brief Destructor.
+     */
+-   virtual ~GhostCellRobinBcCoefs<DIM>(void);
++   virtual ~GhostCellRobinBcCoefs();
+ 
+ 
+    /*!
+diff --git a/include/GriddingAlgorithm.C b/include/GriddingAlgorithm.C
+index 18cc32f..792d323 100644
+--- a/include/GriddingAlgorithm.C
++++ b/include/GriddingAlgorithm.C
+@@ -1215,6 +1215,10 @@ template<int DIM> void GriddingAlgorithm<DIM>::regridFinerLevel(
+          hierarchy->makeNewPatchLevel(fine_level_number, ratio,
+                                       fine_boxes, mapping);
+ 
++         if (d_check_overlapping_patches != 'i') {
++            checkOverlappingPatches( hierarchy->getPatchLevel(fine_level_number) );
++         }
++
+          // "false" argument": const bool initial_time = false;
+          d_tag_init_strategy->initializeLevelData(hierarchy,
+                                                   fine_level_number,
+@@ -2624,7 +2628,7 @@ template<int DIM> void GriddingAlgorithm<DIM>::getFromInput(
+    }
+ 
+    d_check_overlapping_patches =
+-      db->getCharWithDefault( "check_overplapping_patches",
++      db->getCharWithDefault( "check_overlapping_patches",
+                               d_check_overlapping_patches );
+    if ( d_check_overlapping_patches != 'i' &&
+         d_check_overlapping_patches != 'w' &&
+diff --git a/include/GriddingAlgorithm.h b/include/GriddingAlgorithm.h
+index 5c87e21..2862a4c 100644
+--- a/include/GriddingAlgorithm.h
++++ b/include/GriddingAlgorithm.h
+@@ -335,7 +335,7 @@ public:
+    /*!
+     * Virtual destructor for GriddingAlgorithm<DIM>.
+     */
+-   virtual ~GriddingAlgorithm<DIM>();
++   virtual ~GriddingAlgorithm();
+ 
+    /*!
+     * This routine will attempt to construct the coarsest level in an AMR
+diff --git a/include/HierarchyCellDataOpsComplex.h b/include/HierarchyCellDataOpsComplex.h
+index 79a6afe..0bfaf72 100644
+--- a/include/HierarchyCellDataOpsComplex.h
++++ b/include/HierarchyCellDataOpsComplex.h
+@@ -78,7 +78,7 @@ public:
+    /**
+     * Virtual destructor for the HierarchyCellDataOpsComplex<DIM> class.
+     */
+-   virtual ~HierarchyCellDataOpsComplex<DIM>();
++   virtual ~HierarchyCellDataOpsComplex();
+ 
+    /**
+     * Reset patch hierarchy over which operations occur.
+diff --git a/include/HierarchyCellDataOpsInteger.h b/include/HierarchyCellDataOpsInteger.h
+index 9f5b883..d021eb0 100644
+--- a/include/HierarchyCellDataOpsInteger.h
++++ b/include/HierarchyCellDataOpsInteger.h
+@@ -77,7 +77,7 @@ public:
+    /**
+     * Virtual destructor for the HierarchyCellDataOpsInteger<DIM> class.
+     */
+-   virtual ~HierarchyCellDataOpsInteger<DIM>();
++   virtual ~HierarchyCellDataOpsInteger();
+ 
+    /**
+     * Reset patch hierarchy over which operations occur.
+diff --git a/include/HierarchyCellDataOpsReal.h b/include/HierarchyCellDataOpsReal.h
+index 5998f9f..f8893ff 100644
+--- a/include/HierarchyCellDataOpsReal.h
++++ b/include/HierarchyCellDataOpsReal.h
+@@ -77,7 +77,7 @@ public:
+    /**
+     * Virtual destructor for the HierarchyCellDataOpsReal<DIM> class.
+     */
+-   virtual ~HierarchyCellDataOpsReal<DIM,TYPE>();
++   virtual ~HierarchyCellDataOpsReal();
+ 
+    /**
+     * Reset patch hierarchy over which operations occur.
+diff --git a/include/HierarchyDataOpsComplex.h b/include/HierarchyDataOpsComplex.h
+index f4643a3..9ddb1d5 100644
+--- a/include/HierarchyDataOpsComplex.h
++++ b/include/HierarchyDataOpsComplex.h
+@@ -55,7 +55,7 @@ public:
+    /**
+     * Virtual destructor for the HierarchyDataOpsComplex<DIM> class.
+     */
+-   virtual ~HierarchyDataOpsComplex<DIM>();
++   virtual ~HierarchyDataOpsComplex();
+ 
+    /**
+     * Reset patch hierarchy over which operations occur.
+diff --git a/include/HierarchyDataOpsInteger.h b/include/HierarchyDataOpsInteger.h
+index 2b1eec6..6a18a98 100644
+--- a/include/HierarchyDataOpsInteger.h
++++ b/include/HierarchyDataOpsInteger.h
+@@ -55,7 +55,7 @@ public:
+    /**
+     * Virtual destructor for the HierarchyDataOpsInteger<DIM> class.
+     */
+-   virtual ~HierarchyDataOpsInteger<DIM>();
++   virtual ~HierarchyDataOpsInteger();
+ 
+    /**
+     * Reset patch hierarchy over which operations occur.
+diff --git a/include/HierarchyDataOpsManager.h b/include/HierarchyDataOpsManager.h
+index 596799e..832435e 100644
+--- a/include/HierarchyDataOpsManager.h
++++ b/include/HierarchyDataOpsManager.h
+@@ -173,7 +173,7 @@ protected:
+     * The destructor for HierarchyDataOpsManager<DIM> is protected.  
+     * See the comments for the constructor.
+     */
+-   virtual ~HierarchyDataOpsManager<DIM>();
++   virtual ~HierarchyDataOpsManager();
+ 
+    /**
+     * Initialize Singleton instance with instance of subclass.  This function
+diff --git a/include/HierarchyDataOpsReal.h b/include/HierarchyDataOpsReal.h
+index 6b62f1b..a6e687b 100644
+--- a/include/HierarchyDataOpsReal.h
++++ b/include/HierarchyDataOpsReal.h
+@@ -56,7 +56,7 @@ public:
+    /**
+     * Virtual destructor for the HierarchyDataOpsReal<DIM> class.
+     */
+-   virtual ~HierarchyDataOpsReal<DIM,TYPE>();
++   virtual ~HierarchyDataOpsReal();
+ 
+    /**
+     * Reset patch hierarchy over which operations occur.
+@@ -329,6 +329,13 @@ public:
+                     const int vol_id = -1,
+ 		    bool local_only=false) const = 0;
+ 
++   /**
++    * Return the integral of the function represented by the data array.
++    * The return value is the sum \f$\sum_i ( data_i * vol_i )\f$.
++    */
++   virtual TYPE integral(const int data_id,
++                         const int vol_id) const = 0;
++
+    /**
+     * Return 1 if \f$\|data2_i\| > 0\f$ and \f$data1_i * data2_i \leq 0\f$, for
+     * any \f$i\f$ in the set of patch data indices, where \f$cvol_i > 0\f$.  Otherwise,
+diff --git a/include/HierarchyEdgeDataOpsComplex.h b/include/HierarchyEdgeDataOpsComplex.h
+index 5b7d5aa..ceb42a2 100644
+--- a/include/HierarchyEdgeDataOpsComplex.h
++++ b/include/HierarchyEdgeDataOpsComplex.h
+@@ -78,7 +78,7 @@ public:
+    /**
+     * Virtual destructor for the HierarchyEdgeDataOpsComplex<DIM> class.
+     */
+-   virtual ~HierarchyEdgeDataOpsComplex<DIM>();
++   virtual ~HierarchyEdgeDataOpsComplex();
+ 
+    /**
+     * Reset patch hierarchy over which operations occur.
+diff --git a/include/HierarchyEdgeDataOpsInteger.h b/include/HierarchyEdgeDataOpsInteger.h
+index 74e7b1e..6ec6838 100644
+--- a/include/HierarchyEdgeDataOpsInteger.h
++++ b/include/HierarchyEdgeDataOpsInteger.h
+@@ -77,7 +77,7 @@ public:
+    /**
+     * Virtual destructor for the HierarchyEdgeDataOpsInteger<DIM> class.
+     */
+-   virtual ~HierarchyEdgeDataOpsInteger<DIM>();
++   virtual ~HierarchyEdgeDataOpsInteger();
+ 
+    /**
+     * Reset patch hierarchy over which operations occur.
+diff --git a/include/HierarchyEdgeDataOpsReal.h b/include/HierarchyEdgeDataOpsReal.h
+index dc375ca..fb3f05f 100644
+--- a/include/HierarchyEdgeDataOpsReal.h
++++ b/include/HierarchyEdgeDataOpsReal.h
+@@ -78,7 +78,7 @@ public:
+    /**
+     * Virtual destructor for the HierarchyEdgeDataOpsReal<DIM> class.
+     */
+-   virtual ~HierarchyEdgeDataOpsReal<DIM,TYPE>();
++   virtual ~HierarchyEdgeDataOpsReal();
+ 
+    /**
+     * Reset patch hierarchy over which operations occur.
+diff --git a/include/HierarchyFaceDataOpsComplex.h b/include/HierarchyFaceDataOpsComplex.h
+index 3b7a445..ef3696f 100644
+--- a/include/HierarchyFaceDataOpsComplex.h
++++ b/include/HierarchyFaceDataOpsComplex.h
+@@ -78,7 +78,7 @@ public:
+    /**
+     * Virtual destructor for the HierarchyFaceDataOpsComplex<DIM> class.
+     */
+-   virtual ~HierarchyFaceDataOpsComplex<DIM>();
++   virtual ~HierarchyFaceDataOpsComplex();
+ 
+    /**
+     * Reset patch hierarchy over which operations occur.
+diff --git a/include/HierarchyFaceDataOpsInteger.h b/include/HierarchyFaceDataOpsInteger.h
+index 0d5cdcc..fc910b6 100644
+--- a/include/HierarchyFaceDataOpsInteger.h
++++ b/include/HierarchyFaceDataOpsInteger.h
+@@ -77,7 +77,7 @@ public:
+    /**
+     * Virtual destructor for the HierarchyFaceDataOpsInteger<DIM> class.
+     */
+-   virtual ~HierarchyFaceDataOpsInteger<DIM>();
++   virtual ~HierarchyFaceDataOpsInteger();
+ 
+    /**
+     * Reset patch hierarchy over which operations occur.
+diff --git a/include/HierarchyFaceDataOpsReal.h b/include/HierarchyFaceDataOpsReal.h
+index 1a4c9d6..e0b3a95 100644
+--- a/include/HierarchyFaceDataOpsReal.h
++++ b/include/HierarchyFaceDataOpsReal.h
+@@ -78,7 +78,7 @@ public:
+    /**
+     * Virtual destructor for the HierarchyFaceDataOpsReal<DIM> class.
+     */
+-   virtual ~HierarchyFaceDataOpsReal<DIM,TYPE>();
++   virtual ~HierarchyFaceDataOpsReal();
+ 
+    /**
+     * Reset patch hierarchy over which operations occur.
+diff --git a/include/HierarchyNodeDataOpsComplex.h b/include/HierarchyNodeDataOpsComplex.h
+index 2f52b80..1baf1a2 100644
+--- a/include/HierarchyNodeDataOpsComplex.h
++++ b/include/HierarchyNodeDataOpsComplex.h
+@@ -77,7 +77,7 @@ public:
+    /**
+     * Virtual destructor for the HierarchyNodeDataOpsComplex<DIM> class.
+     */
+-   virtual ~HierarchyNodeDataOpsComplex<DIM>();
++   virtual ~HierarchyNodeDataOpsComplex();
+ 
+    /**
+     * Reset patch hierarchy over which operations occur.
+diff --git a/include/HierarchyNodeDataOpsInteger.h b/include/HierarchyNodeDataOpsInteger.h
+index 6ef3b31..06c36d4 100644
+--- a/include/HierarchyNodeDataOpsInteger.h
++++ b/include/HierarchyNodeDataOpsInteger.h
+@@ -76,7 +76,7 @@ public:
+    /**
+     * Virtual destructor for the HierarchyNodeDataOpsInteger<DIM> class.
+     */
+-   virtual ~HierarchyNodeDataOpsInteger<DIM>();
++   virtual ~HierarchyNodeDataOpsInteger();
+ 
+    /**
+     * Reset patch hierarchy over which operations occur.
+diff --git a/include/HierarchyNodeDataOpsReal.h b/include/HierarchyNodeDataOpsReal.h
+index 2723e5e..1d335f5 100644
+--- a/include/HierarchyNodeDataOpsReal.h
++++ b/include/HierarchyNodeDataOpsReal.h
+@@ -80,7 +80,7 @@ public:
+    /**
+     * Virtual destructor for the HierarchyNodeDataOpsReal<DIM> class.
+     */
+-   virtual ~HierarchyNodeDataOpsReal<DIM,TYPE>();
++   virtual ~HierarchyNodeDataOpsReal();
+ 
+    /**
+     * Reset patch hierarchy over which operations occur.
+diff --git a/include/HierarchySideDataOpsComplex.h b/include/HierarchySideDataOpsComplex.h
+index fa1c9bc..8259df1 100644
+--- a/include/HierarchySideDataOpsComplex.h
++++ b/include/HierarchySideDataOpsComplex.h
+@@ -78,7 +78,7 @@ public:
+    /**
+     * Virtual destructor for the HierarchySideDataOpsComplex<DIM> class.
+     */
+-   virtual ~HierarchySideDataOpsComplex<DIM>();
++   virtual ~HierarchySideDataOpsComplex();
+ 
+    /**
+     * Reset patch hierarchy over which operations occur.
+diff --git a/include/HierarchySideDataOpsInteger.h b/include/HierarchySideDataOpsInteger.h
+index 438f44e..4e36ade 100644
+--- a/include/HierarchySideDataOpsInteger.h
++++ b/include/HierarchySideDataOpsInteger.h
+@@ -77,7 +77,7 @@ public:
+    /**
+     * Virtual destructor for the HierarchySideDataOpsInteger<DIM> class.
+     */
+-   virtual ~HierarchySideDataOpsInteger<DIM>();
++   virtual ~HierarchySideDataOpsInteger();
+ 
+    /**
+     * Reset patch hierarchy over which operations occur.
+diff --git a/include/HierarchySideDataOpsReal.h b/include/HierarchySideDataOpsReal.h
+index 7b23294..6c5ba04 100644
+--- a/include/HierarchySideDataOpsReal.h
++++ b/include/HierarchySideDataOpsReal.h
+@@ -76,7 +76,7 @@ public:
+    /**
+     * Virtual destructor for the HierarchySideDataOpsReal<DIM> class.
+     */
+-   virtual ~HierarchySideDataOpsReal<DIM,TYPE>();
++   virtual ~HierarchySideDataOpsReal();
+ 
+    /**
+     * Reset patch hierarchy over which operations occur.
+diff --git a/include/HistogramBox.h b/include/HistogramBox.h
+index c99ce5e..48e47a3 100644
+--- a/include/HistogramBox.h
++++ b/include/HistogramBox.h
+@@ -69,7 +69,7 @@ public:
+    /**
+     * Destructor for the HistogramBox.
+     */
+-   ~HistogramBox<DIM>();
++   ~HistogramBox();
+ 
+    /*!
+     * Given histogram information in a box region, determine smallest
+diff --git a/include/HyperbolicLevelIntegrator.h b/include/HyperbolicLevelIntegrator.h
+index 1d6f2f3..8652595 100644
+--- a/include/HyperbolicLevelIntegrator.h
++++ b/include/HyperbolicLevelIntegrator.h
+@@ -218,7 +218,7 @@ public:
+     * The destructor for HyperbolicLevelIntegrator<DIM> unregisters 
+     * the integrator object with the restart manager when so registered.
+     */
+-   virtual ~HyperbolicLevelIntegrator<DIM>();
++   virtual ~HyperbolicLevelIntegrator();
+ 
+    /**
+     * Initialize level integrator by by setting the number of time levels 
+diff --git a/include/HyperbolicPatchStrategy.h b/include/HyperbolicPatchStrategy.h
+index 99b20d4..bdbaf54 100644
+--- a/include/HyperbolicPatchStrategy.h
++++ b/include/HyperbolicPatchStrategy.h
+@@ -71,7 +71,7 @@ public:
+    /**
+     * Virtual destructor for HyperbolicPatchStrategy<DIM>.
+     */
+-   virtual ~HyperbolicPatchStrategy<DIM>();
++   virtual ~HyperbolicPatchStrategy();
+ 
+    /**
+     * Register specific variables needed in the numerical routines with the 
+diff --git a/include/ImplicitEquationStrategy.h b/include/ImplicitEquationStrategy.h
+index baf518e..a0a7a6d 100644
+--- a/include/ImplicitEquationStrategy.h
++++ b/include/ImplicitEquationStrategy.h
+@@ -47,7 +47,7 @@ public:
+    /**
+     * Empty destructor for ImplicitEquationStrategy<DIM>
+     */
+-   virtual ~ImplicitEquationStrategy<DIM>();
++   virtual ~ImplicitEquationStrategy();
+ 
+    /**
+     * Add components to the solution vector to define the state of the 
+diff --git a/include/ImplicitIntegrator.h b/include/ImplicitIntegrator.h
+index 1a63b69..a1e60f2 100644
+--- a/include/ImplicitIntegrator.h
++++ b/include/ImplicitIntegrator.h
+@@ -93,7 +93,7 @@ public:
+    /**
+     * Empty destructor for ImplicitIntegrator<DIM>
+     */
+-   virtual ~ImplicitIntegrator<DIM>();
++   virtual ~ImplicitIntegrator();
+ 
+    /**
+     * Initialize state of time integrator.  This includes creating
+diff --git a/include/IndexData.I b/include/IndexData.I
+index 572a46e..e914729 100644
+--- a/include/IndexData.I
++++ b/include/IndexData.I
+@@ -117,6 +117,20 @@ const TYPE& IndexIterator<DIM,TYPE,BOX_GEOMETRY>::operator()() const
+    return(*d_node->d_item);
+ }
+ 
++template<int DIM, class TYPE, class BOX_GEOMETRY>
++inline
++TYPE& IndexIterator<DIM,TYPE,BOX_GEOMETRY>::getItem()
++{
++   return(*d_node->d_item);
++}
++
++template<int DIM, class TYPE, class BOX_GEOMETRY>
++inline
++const hier::Index<DIM>& IndexIterator<DIM,TYPE,BOX_GEOMETRY>::getIndex() const
++{
++    return(d_node->d_index);
++}
++
+ template<int DIM, class TYPE, class BOX_GEOMETRY>
+ inline
+ IndexIterator<DIM,TYPE,BOX_GEOMETRY>::operator bool() const
+diff --git a/include/IndexData.h b/include/IndexData.h
+index 37b62fe..76b2d40 100644
+--- a/include/IndexData.h
++++ b/include/IndexData.h
+@@ -120,7 +120,7 @@ public:
+    /**
+     * The virtual destructor for an IndexData object.
+     */
+-   virtual ~IndexData<DIM,TYPE,BOX_GEOMETRY>();
++   virtual ~IndexData();
+ 
+    /**
+     * A fast copy between the source and destination.  All data is copied
+@@ -390,7 +390,7 @@ public:
+       IndexDataNode<DIM,TYPE,BOX_GEOMETRY> *n,
+       IndexDataNode<DIM,TYPE,BOX_GEOMETRY> *p);
+ 
+-   virtual ~IndexDataNode<DIM,TYPE,BOX_GEOMETRY>();
++   virtual ~IndexDataNode();
+ 
+ private:
+    hier::Index<DIM> d_index;
+@@ -451,7 +451,7 @@ public:
+    /**
+     * Destructor for the index list iterator.
+     */
+-   ~IndexIterator<DIM,TYPE,BOX_GEOMETRY>();
++   ~IndexIterator();
+ 
+    /**
+     * Return the current item in the irregular index set.
+@@ -577,7 +577,7 @@ public:
+    /**
+     * Destructor for the index list iterator.
+     */
+-   ~ConstIndexIterator<DIM,TYPE,BOX_GEOMETRY>();
++   ~ConstIndexIterator();
+ 
+    /**
+     * Return the current item in the irregular index set.
+diff --git a/include/IndexDataFactory.h b/include/IndexDataFactory.h
+index 151208f..9fdb4d4 100644
+--- a/include/IndexDataFactory.h
++++ b/include/IndexDataFactory.h
+@@ -51,7 +51,7 @@ public:
+    /**
+     * Virtual destructor for the irregular data factory class.
+     */
+-   virtual ~IndexDataFactory<DIM,TYPE,BOX_GEOMETRY>();
++   virtual ~IndexDataFactory();
+ 
+    /**
+     * @brief Abstract virtual function to clone a patch data factory.
+diff --git a/include/IndexVariable.h b/include/IndexVariable.h
+index 81098bf..c89a911 100644
+--- a/include/IndexVariable.h
++++ b/include/IndexVariable.h
+@@ -54,7 +54,7 @@ public:
+    /**
+     * Virtual destructor for index variable objects.
+     */
+-   virtual ~IndexVariable<DIM,TYPE,BOX_GEOMETRY>();
++   virtual ~IndexVariable();
+ 
+    /**
+     * Return true so that the index data quantities will always be treated as cell-
+diff --git a/include/KINSOL_SAMRAIContext.h b/include/KINSOL_SAMRAIContext.h
+index 41ccb83..31c7d7f 100644
+--- a/include/KINSOL_SAMRAIContext.h
++++ b/include/KINSOL_SAMRAIContext.h
+@@ -175,7 +175,7 @@ public:
+     * Destructor for algs::KINSOL_SAMRAIContext destroys the KINSOL 
+     * C++ wrapper object and the KINSOL solution vector wrapper.
+     */
+-   ~KINSOL_SAMRAIContext<DIM>();
++   ~KINSOL_SAMRAIContext();
+ 
+    /**
+     * Initialize the state of KINSOL based on vector argument representing 
+diff --git a/include/LoadBalanceStrategy.h b/include/LoadBalanceStrategy.h
+index 80c4c7d..4cbeaf0 100644
+--- a/include/LoadBalanceStrategy.h
++++ b/include/LoadBalanceStrategy.h
+@@ -46,7 +46,7 @@ public:
+    /*!
+     * This virtual destructor does nothing interesting.
+     */
+-   virtual ~LoadBalanceStrategy<DIM>();
++   virtual ~LoadBalanceStrategy();
+ 
+    /*!
+     * Indicate whether load balancing procedure for given level depends on
+diff --git a/include/LoadBalancer.h b/include/LoadBalancer.h
+index 5251fb2..81ddcd1 100644
+--- a/include/LoadBalancer.h
++++ b/include/LoadBalancer.h
+@@ -178,7 +178,7 @@ public:
+    /*!
+     * The virtual destructor releases all internal storage.
+     */
+-   virtual ~LoadBalancer<DIM>();
++   virtual ~LoadBalancer();
+ 
+    /*!
+     * Set the max workload factor for either the specified level or all
+diff --git a/include/LocallyActiveDataCoarsenAlgorithm.h b/include/LocallyActiveDataCoarsenAlgorithm.h
+index ae15fb7..b67435c 100644
+--- a/include/LocallyActiveDataCoarsenAlgorithm.h
++++ b/include/LocallyActiveDataCoarsenAlgorithm.h
+@@ -123,7 +123,7 @@ public:
+    /*!
+     * The virtual destructor for the algorithm releases all internal storage.
+     */
+-   virtual ~LocallyActiveDataCoarsenAlgorithm<DIM>();
++   virtual ~LocallyActiveDataCoarsenAlgorithm();
+ 
+    /*!
+     * Register a coarsening operation with the coarsening algorithm.  Data
+diff --git a/include/LocallyActiveDataCoarsenSchedule.h b/include/LocallyActiveDataCoarsenSchedule.h
+index 56a5998..c04f5ab 100644
+--- a/include/LocallyActiveDataCoarsenSchedule.h
++++ b/include/LocallyActiveDataCoarsenSchedule.h
+@@ -127,7 +127,7 @@ public:
+    /*!
+     * The virtual destructor for the schedule releases all internal storage.
+     */
+-   virtual ~LocallyActiveDataCoarsenSchedule<DIM>();
++   virtual ~LocallyActiveDataCoarsenSchedule();
+ 
+    /*!
+     * Execute the stored communication schedule and perform the data movement.
+diff --git a/include/LocallyActiveDataFillBox.h b/include/LocallyActiveDataFillBox.h
+index 17f868b..435c620 100644
+--- a/include/LocallyActiveDataFillBox.h
++++ b/include/LocallyActiveDataFillBox.h
+@@ -79,7 +79,7 @@ public:
+    /*!
+     * The destructor releases all box and locally-active data storage.
+     */
+-   virtual ~LocallyActiveDataFillBox<DIM>();
++   virtual ~LocallyActiveDataFillBox();
+ 
+    /*!
+     * Return constant reference to box maintained by this object.
+diff --git a/include/LocallyActiveDataFillBoxSet.h b/include/LocallyActiveDataFillBoxSet.h
+index 9201448..d0738c7 100644
+--- a/include/LocallyActiveDataFillBoxSet.h
++++ b/include/LocallyActiveDataFillBoxSet.h
+@@ -63,7 +63,7 @@ public:
+    /*!
+     * The destructor releases all box and locally-active data storage.
+     */
+-   virtual ~LocallyActiveDataFillBoxSet<DIM>();
++   virtual ~LocallyActiveDataFillBoxSet();
+ 
+    /*!
+     * Clears all existing box and locally-active data information for calling object 
+diff --git a/include/LocallyActiveDataPatchBoundaryEdgeSum.h b/include/LocallyActiveDataPatchBoundaryEdgeSum.h
+index de3a5d9..270842c 100644
+--- a/include/LocallyActiveDataPatchBoundaryEdgeSum.h
++++ b/include/LocallyActiveDataPatchBoundaryEdgeSum.h
+@@ -109,7 +109,7 @@ public:
+    /*!
+     *  @brief Destructor for the schedule releases all internal storage.
+     */
+-   ~LocallyActiveDataPatchBoundaryEdgeSum<DIM>();
++   ~LocallyActiveDataPatchBoundaryEdgeSum();
+ 
+    /*!
+     *  @brief Register edge data with given patch data identifier for summing.
+diff --git a/include/LocallyActiveDataPatchBoundaryNodeSum.h b/include/LocallyActiveDataPatchBoundaryNodeSum.h
+index 86a14b0..ffd5942 100644
+--- a/include/LocallyActiveDataPatchBoundaryNodeSum.h
++++ b/include/LocallyActiveDataPatchBoundaryNodeSum.h
+@@ -115,7 +115,7 @@ public:
+    /*!
+     *  @brief Destructor for the schedule releases all internal storage.
+     */
+-   ~LocallyActiveDataPatchBoundaryNodeSum<DIM>();
++   ~LocallyActiveDataPatchBoundaryNodeSum();
+ 
+    /*!
+     *  @brief Register node data with given patch data identifier for summing.
+diff --git a/include/LocallyActiveDataPatchLevelManager.h b/include/LocallyActiveDataPatchLevelManager.h
+index c424ae7..39677b5 100644
+--- a/include/LocallyActiveDataPatchLevelManager.h
++++ b/include/LocallyActiveDataPatchLevelManager.h
+@@ -560,7 +560,7 @@ public:
+    /*!
+     * Destructor for the iterator releases all internal storage.
+     */
+-   ~LocallyActiveDataPatchLevelIterator<DIM>();
++   ~LocallyActiveDataPatchLevelIterator();
+ 
+    /*!
+     * Extract the integer patch index corresponding to the current patch in 
+diff --git a/include/LocallyActiveDataRefineAlgorithm.h b/include/LocallyActiveDataRefineAlgorithm.h
+index 7bd6c30..aa69d47 100644
+--- a/include/LocallyActiveDataRefineAlgorithm.h
++++ b/include/LocallyActiveDataRefineAlgorithm.h
+@@ -120,7 +120,7 @@ public:
+    /*!
+     * The virtual destructor for the algorithm releases all internal storage.
+     */
+-   virtual ~LocallyActiveDataRefineAlgorithm<DIM>();
++   virtual ~LocallyActiveDataRefineAlgorithm();
+ 
+    /*!
+     * Register a refine operation with the refine algorithm object.  This 
+diff --git a/include/LocallyActiveDataRefineSchedule.h b/include/LocallyActiveDataRefineSchedule.h
+index 5f42b82..ef6aaa3 100644
+--- a/include/LocallyActiveDataRefineSchedule.h
++++ b/include/LocallyActiveDataRefineSchedule.h
+@@ -203,7 +203,7 @@ public:
+    /*!
+     * Virtual destructor for the schedule releases all internal storage.
+     */
+-   virtual ~LocallyActiveDataRefineSchedule<DIM>();
++   virtual ~LocallyActiveDataRefineSchedule();
+ 
+    /*!
+     * @brief Execute the stored communication schedule and perform
+diff --git a/include/LocationIndexRobinBcCoefs.h b/include/LocationIndexRobinBcCoefs.h
+index 9b5e28e..f98f49b 100644
+--- a/include/LocationIndexRobinBcCoefs.h
++++ b/include/LocationIndexRobinBcCoefs.h
+@@ -92,7 +92,7 @@ public:
+    /*!
+     * @brief Destructor.
+     */
+-   virtual ~LocationIndexRobinBcCoefs<DIM>(void);
++   virtual ~LocationIndexRobinBcCoefs();
+ 
+ 
+    /*!
+diff --git a/include/MBDataUtilities.h b/include/MBDataUtilities.h
+index 9887ec4..1685e77 100644
+--- a/include/MBDataUtilities.h
++++ b/include/MBDataUtilities.h
+@@ -45,7 +45,7 @@ public:
+     */
+    MBDataUtilities();
+ 
+-   virtual ~MBDataUtilities<DIM,TYPE>();
++   virtual ~MBDataUtilities();
+ 
+    /*!
+     * @brief Translate and copy cell data from src to dst according the shift
+diff --git a/include/MBUtilities.h b/include/MBUtilities.h
+index 780476a..7d20a74 100644
+--- a/include/MBUtilities.h
++++ b/include/MBUtilities.h
+@@ -36,7 +36,7 @@ public:
+    /*!
+     * Virtual destructor does nothing
+     */
+-   virtual ~MBUtilities<DIM>();
++   virtual ~MBUtilities();
+ 
+    /*!
+     * @brief Copy patch data from src to dst using the shift and rotate
+diff --git a/include/MblkPatchBoundaryNodeSum.h b/include/MblkPatchBoundaryNodeSum.h
+index f8fe91d..009ebae 100644
+--- a/include/MblkPatchBoundaryNodeSum.h
++++ b/include/MblkPatchBoundaryNodeSum.h
+@@ -89,7 +89,7 @@ public:
+    /*!
+     *  @brief Destructor for the schedule releases all internal storage.
+     */
+-   ~MblkPatchBoundaryNodeSum<DIM>();
++   ~MblkPatchBoundaryNodeSum();
+ 
+    /*!
+     *  @brief Register node data with given patch data identifier for summing.
+diff --git a/include/MethodOfLinesIntegrator.h b/include/MethodOfLinesIntegrator.h
+index d0cc31b..21d741d 100644
+--- a/include/MethodOfLinesIntegrator.h
++++ b/include/MethodOfLinesIntegrator.h
+@@ -152,7 +152,7 @@ public:
+     * The destructor for MethodOfLinesIntegrator<DIM> unregisters
+     * the integrator object with the restart manager when so registered.
+     */
+-   virtual ~MethodOfLinesIntegrator<DIM>();
++   virtual ~MethodOfLinesIntegrator();
+ 
+    /*!
+     * Initialize integrator by setting the number of time levels
+diff --git a/include/MultiblockCellDataTranslator.h b/include/MultiblockCellDataTranslator.h
+index 0d389da..61e9669 100644
+--- a/include/MultiblockCellDataTranslator.h
++++ b/include/MultiblockCellDataTranslator.h
+@@ -33,7 +33,7 @@ public:
+    /*!
+     * @brief The virtual destructor does nothing interesting.
+     */
+-   virtual ~MultiblockCellDataTranslator<DIM,TYPE>();
++   virtual ~MultiblockCellDataTranslator();
+ 
+    virtual void translateAndCopyData(
+       hier::Patch<DIM>& dst_patch,
+diff --git a/include/MultiblockCoarsenAlgorithm.h b/include/MultiblockCoarsenAlgorithm.h
+index 592822f..219d31f 100644
+--- a/include/MultiblockCoarsenAlgorithm.h
++++ b/include/MultiblockCoarsenAlgorithm.h
+@@ -108,7 +108,7 @@ public:
+    /*!
+     * The virtual destructor for the algorithm releases all internal storage.
+     */
+-   virtual ~MultiblockCoarsenAlgorithm<DIM>();
++   virtual ~MultiblockCoarsenAlgorithm();
+ 
+    /*!
+     * Register a coarsening operation with the coarsening algorithm.  Data
+diff --git a/include/MultiblockCoarsenPatchStrategy.h b/include/MultiblockCoarsenPatchStrategy.h
+index b165777..679e122 100644
+--- a/include/MultiblockCoarsenPatchStrategy.h
++++ b/include/MultiblockCoarsenPatchStrategy.h
+@@ -50,7 +50,7 @@ public:
+    /*!
+     * The virtual destructor for coarsen strategy does nothing interesting.
+     */
+-   virtual ~MultiblockCoarsenPatchStrategy<DIM>();
++   virtual ~MultiblockCoarsenPatchStrategy();
+ 
+    /*!
+     * Return maximum stencil width needed over all user-defined
+diff --git a/include/MultiblockCoarsenSchedule.h b/include/MultiblockCoarsenSchedule.h
+index 5f352ef..61d733d 100644
+--- a/include/MultiblockCoarsenSchedule.h
++++ b/include/MultiblockCoarsenSchedule.h
+@@ -109,7 +109,7 @@ public:
+     * @brief The virtual destructor for the schedule releases all internal
+     *        storage.
+     */
+-   virtual ~MultiblockCoarsenSchedule<DIM>();
++   virtual ~MultiblockCoarsenSchedule();
+ 
+    /*!
+     * @brief Execute the stored communication schedule and perform the data
+diff --git a/include/MultiblockDataTranslator.h b/include/MultiblockDataTranslator.h
+index 5af9dc9..5513ae0 100644
+--- a/include/MultiblockDataTranslator.h
++++ b/include/MultiblockDataTranslator.h
+@@ -38,7 +38,7 @@ public:
+    /*!
+     * @brief The virtual destructor does nothing interesting.
+     */
+-   virtual ~MultiblockDataTranslator<DIM>();
++   virtual ~MultiblockDataTranslator();
+ 
+    virtual void translateAndCopyData(
+       Patch<DIM>& dst_patch,
+diff --git a/include/MultiblockEdgeDataTranslator.h b/include/MultiblockEdgeDataTranslator.h
+index 38a1abe..25ac43a 100644
+--- a/include/MultiblockEdgeDataTranslator.h
++++ b/include/MultiblockEdgeDataTranslator.h
+@@ -34,7 +34,7 @@ public:
+    /*!
+     * @brief The virtual destructor does nothing interesting.
+     */
+-   virtual ~MultiblockEdgeDataTranslator<DIM,TYPE>();
++   virtual ~MultiblockEdgeDataTranslator();
+ 
+    virtual void translateAndCopyData(
+       hier::Patch<DIM>& dst_patch,
+diff --git a/include/MultiblockFaceDataTranslator.h b/include/MultiblockFaceDataTranslator.h
+index 289b20c..be67671 100644
+--- a/include/MultiblockFaceDataTranslator.h
++++ b/include/MultiblockFaceDataTranslator.h
+@@ -34,7 +34,7 @@ public:
+    /*!
+     * @brief The virtual destructor does nothing interesting.
+     */
+-   virtual ~MultiblockFaceDataTranslator<DIM,TYPE>();
++   virtual ~MultiblockFaceDataTranslator();
+ 
+    virtual void translateAndCopyData(
+       hier::Patch<DIM>& dst_patch,
+diff --git a/include/MultiblockGridGeometry.h b/include/MultiblockGridGeometry.h
+index d6d0a56..557e8ba 100644
+--- a/include/MultiblockGridGeometry.h
++++ b/include/MultiblockGridGeometry.h
+@@ -38,7 +38,7 @@ public:
+    /*!
+     * @brief The virtual destructor does nothing interesting.
+     */
+-   virtual ~MultiblockGridGeometry<DIM>();
++   virtual ~MultiblockGridGeometry();
+ 
+    tbox::Pointer< hier::GridGeometry<DIM> >& getBlockGeometry(const int block)
+    {
+diff --git a/include/MultiblockGriddingAlgorithm.h b/include/MultiblockGriddingAlgorithm.h
+index 8efc731..b779f36 100644
+--- a/include/MultiblockGriddingAlgorithm.h
++++ b/include/MultiblockGriddingAlgorithm.h
+@@ -297,7 +297,7 @@ public:
+    /*!
+     * Virtual destructor for MultiblockGriddingAlgorithm<DIM>.
+     */
+-   virtual ~MultiblockGriddingAlgorithm<DIM>();
++   virtual ~MultiblockGriddingAlgorithm();
+ 
+    /*!
+     * @brief Create level 0 for a hierarchy
+diff --git a/include/MultiblockGriddingTagger.h b/include/MultiblockGriddingTagger.h
+index 2789156..8f9da14 100644
+--- a/include/MultiblockGriddingTagger.h
++++ b/include/MultiblockGriddingTagger.h
+@@ -54,7 +54,7 @@ public:
+    /*!
+     * @brief The virtual destructor does nothing interesting.
+     */
+-   virtual ~MultiblockGriddingTagger<DIM>();
++   virtual ~MultiblockGriddingTagger();
+ 
+    /*!
+     * @brief Set the patch data index for tag data.  This routine
+diff --git a/include/MultiblockNodeDataTranslator.h b/include/MultiblockNodeDataTranslator.h
+index 0a6f2f6..7093e86 100644
+--- a/include/MultiblockNodeDataTranslator.h
++++ b/include/MultiblockNodeDataTranslator.h
+@@ -33,7 +33,7 @@ public:
+    /*!
+     * @brief The virtual destructor does nothing interesting.
+     */
+-   virtual ~MultiblockNodeDataTranslator<DIM,TYPE>();
++   virtual ~MultiblockNodeDataTranslator();
+ 
+    virtual void translateAndCopyData(
+       hier::Patch<DIM>& dst_patch,
+diff --git a/include/MultiblockPatchHierarchy.h b/include/MultiblockPatchHierarchy.h
+index fc57d45..69d2722 100644
+--- a/include/MultiblockPatchHierarchy.h
++++ b/include/MultiblockPatchHierarchy.h
+@@ -69,7 +69,7 @@ public:
+    /*!
+     * @brief Destructor for multiblock
+     */
+-   ~MultiblockPatchHierarchy<DIM>();
++   ~MultiblockPatchHierarchy();
+ 
+    /*!
+     * @brief Get a pointer to a single patch hierarchy represented by
+diff --git a/include/MultiblockPatchLevel.h b/include/MultiblockPatchLevel.h
+index b0f68ef..4111f40 100644
+--- a/include/MultiblockPatchLevel.h
++++ b/include/MultiblockPatchLevel.h
+@@ -51,7 +51,7 @@ public:
+    /*!
+     * Destructor is uninteresting
+     */
+-   ~MultiblockPatchLevel<DIM>();
++   ~MultiblockPatchLevel();
+ 
+    /*!
+     * @brief Return a pointer to the hier::PatchLevel<DIM> associated with the
+diff --git a/include/MultiblockRefineAlgorithm.h b/include/MultiblockRefineAlgorithm.h
+index 608111e..47978a4 100644
+--- a/include/MultiblockRefineAlgorithm.h
++++ b/include/MultiblockRefineAlgorithm.h
+@@ -64,7 +64,7 @@ public:
+    /*!
+     * @brief Destructor
+     */
+-   ~MultiblockRefineAlgorithm<DIM>();
++   ~MultiblockRefineAlgorithm();
+ 
+    /*!
+     * Register a refine operation with the refine algorithm object.  This
+diff --git a/include/MultiblockRefinePatchStrategy.h b/include/MultiblockRefinePatchStrategy.h
+index a81bf3e..47773f5 100644
+--- a/include/MultiblockRefinePatchStrategy.h
++++ b/include/MultiblockRefinePatchStrategy.h
+@@ -46,7 +46,7 @@ public:
+    /*!
+     * The virtual destructor for refine strategy does nothing interesting.
+     */
+-   virtual ~MultiblockRefinePatchStrategy<DIM>();
++   virtual ~MultiblockRefinePatchStrategy();
+ 
+    /*!
+     * @brief Set the physical boundary conditions.
+diff --git a/include/MultiblockRefineSchedule.h b/include/MultiblockRefineSchedule.h
+index 07e0f26..00bcaa9 100644
+--- a/include/MultiblockRefineSchedule.h
++++ b/include/MultiblockRefineSchedule.h
+@@ -159,7 +159,7 @@ public:
+    /*!
+     * Virtual destructor
+     */
+-   virtual ~MultiblockRefineSchedule<DIM>();
++   virtual ~MultiblockRefineSchedule();
+ 
+    /*!
+     * @brief Execute the stored communication schedule and perform the
+diff --git a/include/MultiblockSideDataTranslator.h b/include/MultiblockSideDataTranslator.h
+index e44f3c3..7852b24 100644
+--- a/include/MultiblockSideDataTranslator.h
++++ b/include/MultiblockSideDataTranslator.h
+@@ -34,7 +34,7 @@ public:
+    /*!
+     * @brief The virtual destructor does nothing interesting.
+     */
+-   virtual ~MultiblockSideDataTranslator<DIM,TYPE>();
++   virtual ~MultiblockSideDataTranslator();
+ 
+    virtual void translateAndCopyData(
+       hier::Patch<DIM>& dst_patch,
+diff --git a/include/NodeComplexInjection.h b/include/NodeComplexInjection.h
+index 32df1a0..e2f4221 100644
+--- a/include/NodeComplexInjection.h
++++ b/include/NodeComplexInjection.h
+@@ -50,7 +50,7 @@ public:
+    /**
+     * Uninteresting virtual destructor.
+     */
+-   virtual ~NodeComplexInjection<DIM>();
++   virtual ~NodeComplexInjection();
+ 
+    /**
+     * Return true if the variable and name string match the node-centered
+diff --git a/include/NodeComplexLinearTimeInterpolateOp.h b/include/NodeComplexLinearTimeInterpolateOp.h
+index 2540031..f1b41f7 100644
+--- a/include/NodeComplexLinearTimeInterpolateOp.h
++++ b/include/NodeComplexLinearTimeInterpolateOp.h
+@@ -46,7 +46,7 @@ public:
+    /**
+     * Uninteresting virtual destructor.
+     */
+-   virtual ~NodeComplexLinearTimeInterpolateOp<DIM>();
++   virtual ~NodeComplexLinearTimeInterpolateOp();
+ 
+    /**
+     * Return true if the variable and name string match the standard
+diff --git a/include/NodeData.h b/include/NodeData.h
+index 8a11e83..ef49c89 100644
+--- a/include/NodeData.h
++++ b/include/NodeData.h
+@@ -111,7 +111,7 @@ public:
+    /*!
+     * @brief The virtual destructor for a node data object.
+     */
+-   virtual ~NodeData<DIM,TYPE>();
++   virtual ~NodeData();
+ 
+    /*!
+     * @brief Return the depth (e.g., the number of components in each spatial
+diff --git a/include/NodeDataFactory.h b/include/NodeDataFactory.h
+index f625f71..2dd9185 100644
+--- a/include/NodeDataFactory.h
++++ b/include/NodeDataFactory.h
+@@ -55,7 +55,7 @@ public:
+    /**
+     * Virtual destructor for the node data factory class.
+     */
+-   virtual ~NodeDataFactory<DIM,TYPE>();
++   virtual ~NodeDataFactory();
+ 
+    /**
+     * @brief Abstract virtual function to clone a patch data factory.
+diff --git a/include/NodeDoubleInjection.h b/include/NodeDoubleInjection.h
+index d170c4d..c4039d1 100644
+--- a/include/NodeDoubleInjection.h
++++ b/include/NodeDoubleInjection.h
+@@ -50,7 +50,7 @@ public:
+    /**
+     * Uninteresting virtual destructor.
+     */
+-   virtual ~NodeDoubleInjection<DIM>();
++   virtual ~NodeDoubleInjection();
+ 
+    /**
+     * Return true if the variable and name string match the node-centered
+diff --git a/include/NodeDoubleLinearTimeInterpolateOp.h b/include/NodeDoubleLinearTimeInterpolateOp.h
+index 4e26af2..6ac6df9 100644
+--- a/include/NodeDoubleLinearTimeInterpolateOp.h
++++ b/include/NodeDoubleLinearTimeInterpolateOp.h
+@@ -46,7 +46,7 @@ public:
+    /**
+     * Uninteresting virtual destructor.
+     */
+-   virtual ~NodeDoubleLinearTimeInterpolateOp<DIM>();
++   virtual ~NodeDoubleLinearTimeInterpolateOp();
+ 
+    /**
+     * Return true if the variable and name string match the standard
+diff --git a/include/NodeFloatInjection.h b/include/NodeFloatInjection.h
+index 2e4f76f..315860f 100644
+--- a/include/NodeFloatInjection.h
++++ b/include/NodeFloatInjection.h
+@@ -50,7 +50,7 @@ public:
+    /**
+     * Uninteresting virtual destructor.
+     */
+-   virtual ~NodeFloatInjection<DIM>();
++   virtual ~NodeFloatInjection();
+ 
+    /**
+     * Return true if the variable and name string match the node-centered
+diff --git a/include/NodeFloatLinearTimeInterpolateOp.h b/include/NodeFloatLinearTimeInterpolateOp.h
+index bb5341e..1e1d66f 100644
+--- a/include/NodeFloatLinearTimeInterpolateOp.h
++++ b/include/NodeFloatLinearTimeInterpolateOp.h
+@@ -46,7 +46,7 @@ public:
+    /**
+     * Uninteresting virtual destructor.
+     */
+-   virtual ~NodeFloatLinearTimeInterpolateOp<DIM>();
++   virtual ~NodeFloatLinearTimeInterpolateOp();
+ 
+    /**
+     * Return true if the variable and name string match the standard
+diff --git a/include/NodeGeometry.h b/include/NodeGeometry.h
+index 860bbce..a125000 100644
+--- a/include/NodeGeometry.h
++++ b/include/NodeGeometry.h
+@@ -60,7 +60,7 @@ public:
+    /*!
+     * @brief The virtual destructor does nothing interesting.
+     */
+-   virtual ~NodeGeometry<DIM>();
++   virtual ~NodeGeometry();
+ 
+    /*!
+     * @brief Compute the overlap in node-centered index space between
+diff --git a/include/NodeIndex.h b/include/NodeIndex.h
+index 4dceb6d..b35ed6b 100644
+--- a/include/NodeIndex.h
++++ b/include/NodeIndex.h
+@@ -85,7 +85,7 @@ public:
+    /**
+     * The node index destructor does nothing interesting.
+     */
+-   ~NodeIndex<DIM>();
++   ~NodeIndex();
+ 
+    /**
+     * Plus-equals operator for a node index and an integer vector.
+diff --git a/include/NodeIntegerInjection.h b/include/NodeIntegerInjection.h
+index f868b12..a48e561 100644
+--- a/include/NodeIntegerInjection.h
++++ b/include/NodeIntegerInjection.h
+@@ -50,7 +50,7 @@ public:
+    /**
+     * Uninteresting virtual destructor.
+     */
+-   virtual ~NodeIntegerInjection<DIM>();
++   virtual ~NodeIntegerInjection();
+ 
+    /**
+     * Return true if the variable and name string match the node-centered
+diff --git a/include/NodeIterator.h b/include/NodeIterator.h
+index 040a2fd..2aad1fd 100644
+--- a/include/NodeIterator.h
++++ b/include/NodeIterator.h
+@@ -67,7 +67,7 @@ public:
+    /**
+     * Destructor for the node iterator.
+     */
+-   ~NodeIterator<DIM>();
++   ~NodeIterator();
+ 
+    /**
+     * Extract the node index corresponding to the iterator position in the box.
+diff --git a/include/NodeOverlap.h b/include/NodeOverlap.h
+index 56df09f..fabef2f 100644
+--- a/include/NodeOverlap.h
++++ b/include/NodeOverlap.h
+@@ -45,7 +45,7 @@ public:
+     * The virtual destructor does nothing interesting except deallocate
+     * box data.
+     */
+-   virtual ~NodeOverlap<DIM>();
++   virtual ~NodeOverlap();
+ 
+    /**
+     * Return whether there is an empty intersection between the two
+diff --git a/include/NodeVariable.h b/include/NodeVariable.h
+index b92a50d..0d4a3a9 100644
+--- a/include/NodeVariable.h
++++ b/include/NodeVariable.h
+@@ -55,7 +55,7 @@ public:
+    /*!
+     * @brief Virtual destructor for node variable objects.
+     */
+-   virtual ~NodeVariable<DIM,TYPE>();
++   virtual ~NodeVariable();
+ 
+    /*!
+     * @brief Return boolean indicating which node data values (coarse
+diff --git a/include/NonlinearSolverStrategy.h b/include/NonlinearSolverStrategy.h
+index 4dcae63..23938bf 100644
+--- a/include/NonlinearSolverStrategy.h
++++ b/include/NonlinearSolverStrategy.h
+@@ -42,7 +42,7 @@ public:
+    /**
+     * Empty constructor for algs::NonlinearSolverStrategy.
+     */
+-   virtual ~NonlinearSolverStrategy<DIM>();
++   virtual ~NonlinearSolverStrategy();
+ 
+    /**
+     * Initialize the solver state.  The vector argument represents the
+diff --git a/include/OuteredgeData.h b/include/OuteredgeData.h
+index dc7d84d..adcd222 100644
+--- a/include/OuteredgeData.h
++++ b/include/OuteredgeData.h
+@@ -168,7 +168,7 @@ public:
+    /*!
+     * @brief Virtual destructor for a outeredge data object.
+     */
+-   virtual ~OuteredgeData<DIM,TYPE>();
++   virtual ~OuteredgeData();
+ 
+    /*!
+     * @brief Return the depth (i.e., the number of data values for 
+diff --git a/include/OuteredgeDataFactory.h b/include/OuteredgeDataFactory.h
+index ee36797..64747b8 100644
+--- a/include/OuteredgeDataFactory.h
++++ b/include/OuteredgeDataFactory.h
+@@ -55,7 +55,7 @@ public:
+     * @brief
+     * Virtual destructor for the outeredge data factory class.
+     */
+-   virtual ~OuteredgeDataFactory<DIM,TYPE>();
++   virtual ~OuteredgeDataFactory();
+ 
+    /**
+     * @brief Abstract virtual function to clone a patch data factory.
+diff --git a/include/OuteredgeGeometry.h b/include/OuteredgeGeometry.h
+index e069d03..1f51116 100644
+--- a/include/OuteredgeGeometry.h
++++ b/include/OuteredgeGeometry.h
+@@ -70,7 +70,7 @@ public:
+    /*!
+     * @brief The virtual destructor does nothing interesting.
+     */
+-   virtual ~OuteredgeGeometry<DIM>();
++   virtual ~OuteredgeGeometry();
+ 
+    /*!
+     * @brief Compute the overlap in edge-centered index space on the
+diff --git a/include/OuteredgeSumTransaction.h b/include/OuteredgeSumTransaction.h
+index 2d2eac6..a0ee98e 100644
+--- a/include/OuteredgeSumTransaction.h
++++ b/include/OuteredgeSumTransaction.h
+@@ -99,7 +99,7 @@ public:
+     * The virtual destructor for the copy transaction releases all
+     * memory associated with the transaction.
+     */
+-   virtual ~OuteredgeSumTransaction<DIM>();
++   virtual ~OuteredgeSumTransaction();
+ 
+    /*!
+     * Return a boolean indicating whether this transaction can estimate
+diff --git a/include/OuteredgeVariable.h b/include/OuteredgeVariable.h
+index e01b58d..681c5a2 100644
+--- a/include/OuteredgeVariable.h
++++ b/include/OuteredgeVariable.h
+@@ -51,7 +51,7 @@ public:
+    /*!
+     * @brief Virtual destructor for outeredge variable objects.
+     */
+-   virtual ~OuteredgeVariable<DIM,TYPE>();
++   virtual ~OuteredgeVariable();
+ 
+    /*!
+     * @brief Return a boolean true value indicating that fine patch 
+diff --git a/include/OuterfaceComplexConstantRefine.h b/include/OuterfaceComplexConstantRefine.h
+index d5a0a24..d8ab1be 100644
+--- a/include/OuterfaceComplexConstantRefine.h
++++ b/include/OuterfaceComplexConstantRefine.h
+@@ -49,7 +49,7 @@ public:
+    /**
+     * Uninteresting virtual destructor.
+     */
+-   virtual ~OuterfaceComplexConstantRefine<DIM>();
++   virtual ~OuterfaceComplexConstantRefine();
+ 
+    /**
+     * Return true if the variable and name string match outerface 
+diff --git a/include/OuterfaceComplexLinearTimeInterpolateOp.h b/include/OuterfaceComplexLinearTimeInterpolateOp.h
+index 5cdc9b6..a23da5c 100644
+--- a/include/OuterfaceComplexLinearTimeInterpolateOp.h
++++ b/include/OuterfaceComplexLinearTimeInterpolateOp.h
+@@ -48,7 +48,7 @@ public:
+    /**
+     * Uninteresting virtual destructor.
+     */
+-   virtual ~OuterfaceComplexLinearTimeInterpolateOp<DIM>();
++   virtual ~OuterfaceComplexLinearTimeInterpolateOp();
+ 
+    /**
+     * Return true if the variable and name string match the standard
+diff --git a/include/OuterfaceData.h b/include/OuterfaceData.h
+index 7ad2335..3dd9d82 100644
+--- a/include/OuterfaceData.h
++++ b/include/OuterfaceData.h
+@@ -127,7 +127,7 @@ public:
+    /*!
+     * @brief Virtual destructor for a outerface data object.
+     */
+-   virtual ~OuterfaceData<DIM,TYPE>();
++   virtual ~OuterfaceData();
+ 
+    /*!
+     * @brief Return the depth (i.e., the number of data values for
+diff --git a/include/OuterfaceDataFactory.h b/include/OuterfaceDataFactory.h
+index 56705f7..1ff67b7 100644
+--- a/include/OuterfaceDataFactory.h
++++ b/include/OuterfaceDataFactory.h
+@@ -51,7 +51,7 @@ public:
+    /**
+     * Virtual destructor for the outerface data factory class.
+     */
+-   virtual ~OuterfaceDataFactory<DIM,TYPE>();
++   virtual ~OuterfaceDataFactory();
+ 
+    /**
+     * @brief Abstract virtual function to clone a patch data factory.
+diff --git a/include/OuterfaceDoubleConstantRefine.h b/include/OuterfaceDoubleConstantRefine.h
+index 97853f7..a68d671 100644
+--- a/include/OuterfaceDoubleConstantRefine.h
++++ b/include/OuterfaceDoubleConstantRefine.h
+@@ -49,7 +49,7 @@ public:
+    /**
+     * Uninteresting virtual destructor.
+     */
+-   virtual ~OuterfaceDoubleConstantRefine<DIM>();
++   virtual ~OuterfaceDoubleConstantRefine();
+ 
+    /**
+     * Return true if the variable and name string match outerface 
+diff --git a/include/OuterfaceDoubleLinearTimeInterpolateOp.h b/include/OuterfaceDoubleLinearTimeInterpolateOp.h
+index 5c96f5d..62634de 100644
+--- a/include/OuterfaceDoubleLinearTimeInterpolateOp.h
++++ b/include/OuterfaceDoubleLinearTimeInterpolateOp.h
+@@ -48,7 +48,7 @@ public:
+    /**
+     * Uninteresting virtual destructor.
+     */
+-   virtual ~OuterfaceDoubleLinearTimeInterpolateOp<DIM>();
++   virtual ~OuterfaceDoubleLinearTimeInterpolateOp();
+ 
+    /**
+     * Return true if the variable and name string match the standard
+diff --git a/include/OuterfaceFloatConstantRefine.h b/include/OuterfaceFloatConstantRefine.h
+index ea7af34..63d8746 100644
+--- a/include/OuterfaceFloatConstantRefine.h
++++ b/include/OuterfaceFloatConstantRefine.h
+@@ -49,7 +49,7 @@ public:
+    /**
+     * Uninteresting virtual destructor.
+     */
+-   virtual ~OuterfaceFloatConstantRefine<DIM>();
++   virtual ~OuterfaceFloatConstantRefine();
+ 
+    /**
+     * Return true if the variable and name string match outerface 
+diff --git a/include/OuterfaceFloatLinearTimeInterpolateOp.h b/include/OuterfaceFloatLinearTimeInterpolateOp.h
+index c587869..63f63a2 100644
+--- a/include/OuterfaceFloatLinearTimeInterpolateOp.h
++++ b/include/OuterfaceFloatLinearTimeInterpolateOp.h
+@@ -48,7 +48,7 @@ public:
+    /**
+     * Uninteresting virtual destructor.
+     */
+-   virtual ~OuterfaceFloatLinearTimeInterpolateOp<DIM>();
++   virtual ~OuterfaceFloatLinearTimeInterpolateOp();
+ 
+    /**
+     * Return true if the variable and name string match the standard
+diff --git a/include/OuterfaceGeometry.h b/include/OuterfaceGeometry.h
+index 3720052..f8a05d5 100644
+--- a/include/OuterfaceGeometry.h
++++ b/include/OuterfaceGeometry.h
+@@ -58,7 +58,7 @@ public:
+    /*!
+     * @brief The virtual destructor does nothing interesting.
+     */
+-   virtual ~OuterfaceGeometry<DIM>();
++   virtual ~OuterfaceGeometry();
+  
+    /*!
+     * @brief Compute the overlap in face-centered index space on the
+diff --git a/include/OuterfaceIntegerConstantRefine.h b/include/OuterfaceIntegerConstantRefine.h
+index 449dc90..78902e9 100644
+--- a/include/OuterfaceIntegerConstantRefine.h
++++ b/include/OuterfaceIntegerConstantRefine.h
+@@ -49,7 +49,7 @@ public:
+    /**
+     * Uninteresting virtual destructor.
+     */
+-   virtual ~OuterfaceIntegerConstantRefine<DIM>();
++   virtual ~OuterfaceIntegerConstantRefine();
+ 
+    /**
+     * Return true if the variable and name string match outerface 
+diff --git a/include/OuterfaceVariable.h b/include/OuterfaceVariable.h
+index d55cbbd..4c07d2d 100644
+--- a/include/OuterfaceVariable.h
++++ b/include/OuterfaceVariable.h
+@@ -60,7 +60,7 @@ public:
+    /*!
+     * @brief Virtual destructor for outerface variable objects.
+     */
+-   virtual ~OuterfaceVariable<DIM,TYPE>();
++   virtual ~OuterfaceVariable();
+  
+    /*!
+     * @brief Return a boolean true value indicating that fine patch
+diff --git a/include/OuternodeData.h b/include/OuternodeData.h
+index 209a347..e1f5497 100644
+--- a/include/OuternodeData.h
++++ b/include/OuternodeData.h
+@@ -143,7 +143,7 @@ public:
+    /*!
+     * @brief Virtual destructor for a outernode data object.
+     */
+-   virtual ~OuternodeData<DIM,TYPE>();
++   virtual ~OuternodeData();
+ 
+    /*!
+     * @brief Return the depth (e.g., the number of components at each spatial
+diff --git a/include/OuternodeDataFactory.h b/include/OuternodeDataFactory.h
+index e70b76d..666ae99 100644
+--- a/include/OuternodeDataFactory.h
++++ b/include/OuternodeDataFactory.h
+@@ -55,7 +55,7 @@ public:
+     * @brief
+     * Virtual destructor for the outernode data factory class.
+     */
+-   virtual ~OuternodeDataFactory<DIM,TYPE>();
++   virtual ~OuternodeDataFactory();
+ 
+    /**
+     * @brief Abstract virtual function to clone a patch data factory.
+diff --git a/include/OuternodeDoubleConstantCoarsen.h b/include/OuternodeDoubleConstantCoarsen.h
+index 6fc08d6..5c002a7 100644
+--- a/include/OuternodeDoubleConstantCoarsen.h
++++ b/include/OuternodeDoubleConstantCoarsen.h
+@@ -54,7 +54,7 @@ public:
+    /*!
+     * @brief Uninteresting virtual destructor.
+     */
+-   virtual ~OuternodeDoubleConstantCoarsen<DIM>();
++   virtual ~OuternodeDoubleConstantCoarsen();
+ 
+    /*!
+     * @brief Determine if object is for coarsening the specified
+diff --git a/include/OuternodeGeometry.h b/include/OuternodeGeometry.h
+index 2c3630c..6b8affb 100644
+--- a/include/OuternodeGeometry.h
++++ b/include/OuternodeGeometry.h
+@@ -58,7 +58,7 @@ public:
+    /*!
+     * @brief The virtual destructor does nothing interesting.
+     */
+-   virtual ~OuternodeGeometry<DIM>();
++   virtual ~OuternodeGeometry();
+  
+    /*!
+     * @brief Compute the overlap in node-centered index space on the
+diff --git a/include/OuternodeSumTransaction.h b/include/OuternodeSumTransaction.h
+index 6f5d523..5a0fa10 100644
+--- a/include/OuternodeSumTransaction.h
++++ b/include/OuternodeSumTransaction.h
+@@ -95,7 +95,7 @@ public:
+     * The virtual destructor for the copy transaction releases all
+     * memory associated with the transaction.
+     */
+-   virtual ~OuternodeSumTransaction<DIM>();
++   virtual ~OuternodeSumTransaction();
+ 
+    /*!
+     * Return a boolean indicating whether this transaction can estimate
+diff --git a/include/OuternodeVariable.h b/include/OuternodeVariable.h
+index b0824f1..3a8b90b 100644
+--- a/include/OuternodeVariable.h
++++ b/include/OuternodeVariable.h
+@@ -55,7 +55,7 @@ public:
+    /*!
+     * @brief Virtual destructor for outernode variable objects.
+     */
+-   virtual ~OuternodeVariable<DIM,TYPE>();
++   virtual ~OuternodeVariable();
+  
+    /*!
+     * @brief Return a boolean true value indicating that fine patch
+diff --git a/include/OutersideComplexLinearTimeInterpolateOp.h b/include/OutersideComplexLinearTimeInterpolateOp.h
+index 9de037d..99c401a 100644
+--- a/include/OutersideComplexLinearTimeInterpolateOp.h
++++ b/include/OutersideComplexLinearTimeInterpolateOp.h
+@@ -48,7 +48,7 @@ public:
+    /**
+     * Uninteresting virtual destructor.
+     */
+-   virtual ~OutersideComplexLinearTimeInterpolateOp<DIM>();
++   virtual ~OutersideComplexLinearTimeInterpolateOp();
+ 
+    /**
+     * Return true if the variable and name string match the standard
+diff --git a/include/OutersideData.h b/include/OutersideData.h
+index cc6096f..fe413ae 100644
+--- a/include/OutersideData.h
++++ b/include/OutersideData.h
+@@ -128,7 +128,7 @@ public:
+    /*!
+     * @brief Virtual destructor for a outerside data object.
+     */
+-   virtual ~OutersideData<DIM,TYPE>();
++   virtual ~OutersideData();
+ 
+    /*!
+     * @brief Return the depth (i.e., the number of data values for
+diff --git a/include/OutersideDataFactory.h b/include/OutersideDataFactory.h
+index f4cb8d5..17ca380 100644
+--- a/include/OutersideDataFactory.h
++++ b/include/OutersideDataFactory.h
+@@ -51,7 +51,7 @@ public:
+    /**
+     * Virtual destructor for the outerside data factory class.
+     */
+-   virtual ~OutersideDataFactory<DIM,TYPE>();
++   virtual ~OutersideDataFactory();
+ 
+    /**
+     * @brief Abstract virtual function to clone a patch data factory.
+diff --git a/include/OutersideDoubleLinearTimeInterpolateOp.h b/include/OutersideDoubleLinearTimeInterpolateOp.h
+index 2ba17e7..9864bac 100644
+--- a/include/OutersideDoubleLinearTimeInterpolateOp.h
++++ b/include/OutersideDoubleLinearTimeInterpolateOp.h
+@@ -48,7 +48,7 @@ public:
+    /**
+     * Uninteresting virtual destructor.
+     */
+-   virtual ~OutersideDoubleLinearTimeInterpolateOp<DIM>();
++   virtual ~OutersideDoubleLinearTimeInterpolateOp();
+ 
+    /**
+     * Return true if the variable and name string match the standard
+diff --git a/include/OutersideFloatLinearTimeInterpolateOp.h b/include/OutersideFloatLinearTimeInterpolateOp.h
+index fb1f521..41bebe7 100644
+--- a/include/OutersideFloatLinearTimeInterpolateOp.h
++++ b/include/OutersideFloatLinearTimeInterpolateOp.h
+@@ -48,7 +48,7 @@ public:
+    /**
+     * Uninteresting virtual destructor.
+     */
+-   virtual ~OutersideFloatLinearTimeInterpolateOp<DIM>();
++   virtual ~OutersideFloatLinearTimeInterpolateOp();
+ 
+    /**
+     * Return true if the variable and name string match the standard
+diff --git a/include/OutersideGeometry.h b/include/OutersideGeometry.h
+index ae6df2a..d5f9d42 100644
+--- a/include/OutersideGeometry.h
++++ b/include/OutersideGeometry.h
+@@ -58,7 +58,7 @@ public:
+    /*!
+     * @brief The virtual destructor does nothing interesting.
+     */
+-   virtual ~OutersideGeometry<DIM>();
++   virtual ~OutersideGeometry();
+ 
+    /*!
+     * @brief Compute the overlap in side-centered index space on the
+diff --git a/include/OutersideVariable.h b/include/OutersideVariable.h
+index 05ad5d4..fd297f9 100644
+--- a/include/OutersideVariable.h
++++ b/include/OutersideVariable.h
+@@ -60,7 +60,7 @@ public:
+    /*!
+     * @brief Virtual destructor for outerside variable objects.
+     */
+-   virtual ~OutersideVariable<DIM,TYPE>();
++   virtual ~OutersideVariable();
+ 
+    /*!
+     * @brief Return a boolean true value indicating that fine patch
+diff --git a/include/PETSc_SAMRAIVectorReal.h b/include/PETSc_SAMRAIVectorReal.h
+index c1b9af5..44657da 100644
+--- a/include/PETSc_SAMRAIVectorReal.h
++++ b/include/PETSc_SAMRAIVectorReal.h
+@@ -127,7 +127,7 @@ protected:
+     * member function destroyPETScVector, which is used to destroy the PETSc
+     * vector and associated "wrapper".
+     */
+-   virtual ~PETSc_SAMRAIVectorReal<DIM,TYPE>();
++   virtual ~PETSc_SAMRAIVectorReal();
+ 
+ private:
+    /*
+diff --git a/include/Patch.h b/include/Patch.h
+index cefa6e9..8f58d8a 100644
+--- a/include/Patch.h
++++ b/include/Patch.h
+@@ -74,7 +74,7 @@ public:
+    /**
+     * Virtual destructor for patch objects.
+     */
+-   virtual ~Patch<DIM>();
++   virtual ~Patch();
+ 
+    /**
+     * Return the box over which this patch is defined.  The components on a
+diff --git a/include/PatchBoundaryEdgeSum.h b/include/PatchBoundaryEdgeSum.h
+index b7de597..493e69b 100644
+--- a/include/PatchBoundaryEdgeSum.h
++++ b/include/PatchBoundaryEdgeSum.h
+@@ -106,7 +106,7 @@ public:
+    /*!
+     *  @brief Destructor for the schedule releases all internal storage.
+     */
+-   ~PatchBoundaryEdgeSum<DIM>();
++   ~PatchBoundaryEdgeSum();
+ 
+    /*!
+     *  @brief Register edge data with given patch data identifier for summing.
+diff --git a/include/PatchBoundaryNodeSum.h b/include/PatchBoundaryNodeSum.h
+index 626d82f..9ba9d27 100644
+--- a/include/PatchBoundaryNodeSum.h
++++ b/include/PatchBoundaryNodeSum.h
+@@ -113,7 +113,7 @@ public:
+    /*!
+     *  @brief Destructor for the schedule releases all internal storage.
+     */
+-   ~PatchBoundaryNodeSum<DIM>();
++   ~PatchBoundaryNodeSum();
+ 
+    /*!
+     *  @brief Register node data with given patch data identifier for summing.
+diff --git a/include/PatchCellDataBasicOps.h b/include/PatchCellDataBasicOps.h
+index bfd22f3..bb7aefe 100644
+--- a/include/PatchCellDataBasicOps.h
++++ b/include/PatchCellDataBasicOps.h
+@@ -56,7 +56,7 @@ public:
+     */
+    PatchCellDataBasicOps();
+ 
+-   virtual ~PatchCellDataBasicOps<DIM,TYPE>();
++   virtual ~PatchCellDataBasicOps();
+ 
+    /**
+     * Set dst = alpha * src, elementwise.
+diff --git a/include/PatchCellDataMiscellaneousOpsReal.h b/include/PatchCellDataMiscellaneousOpsReal.h
+index bb01cd0..e05165e 100644
+--- a/include/PatchCellDataMiscellaneousOpsReal.h
++++ b/include/PatchCellDataMiscellaneousOpsReal.h
+@@ -68,7 +68,7 @@ public:
+     */
+    PatchCellDataMiscellaneousOpsReal();
+ 
+-   virtual ~PatchCellDataMiscellaneousOpsReal<DIM,TYPE>();
++   virtual ~PatchCellDataMiscellaneousOpsReal();
+ 
+    /**
+     * Return 1 if \f$\|data2_i\| > 0\f$ and \f$data1_i * data2_i \leq 0\f$, for
+diff --git a/include/PatchCellDataNormOpsComplex.h b/include/PatchCellDataNormOpsComplex.h
+index 36f612f..be9f859 100644
+--- a/include/PatchCellDataNormOpsComplex.h
++++ b/include/PatchCellDataNormOpsComplex.h
+@@ -64,7 +64,7 @@ public:
+     */
+    PatchCellDataNormOpsComplex();
+ 
+-   virtual ~PatchCellDataNormOpsComplex<DIM>();
++   virtual ~PatchCellDataNormOpsComplex();
+ 
+    /**
+     * Return the number of data values for the cell-centered data object
+diff --git a/include/PatchCellDataNormOpsReal.h b/include/PatchCellDataNormOpsReal.h
+index 1ac194c..56448ff 100644
+--- a/include/PatchCellDataNormOpsReal.h
++++ b/include/PatchCellDataNormOpsReal.h
+@@ -68,7 +68,7 @@ public:
+     */
+    PatchCellDataNormOpsReal();
+ 
+-   virtual ~PatchCellDataNormOpsReal<DIM,TYPE>();
++   virtual ~PatchCellDataNormOpsReal();
+ 
+    /**
+     * Return the number of data values for the cell-centered data object
+diff --git a/include/PatchCellDataOpsComplex.h b/include/PatchCellDataOpsComplex.h
+index 53c9d82..65f7721 100644
+--- a/include/PatchCellDataOpsComplex.h
++++ b/include/PatchCellDataOpsComplex.h
+@@ -57,7 +57,7 @@ public:
+     */
+    PatchCellDataOpsComplex();
+ 
+-   virtual ~PatchCellDataOpsComplex<DIM>();
++   virtual ~PatchCellDataOpsComplex();
+ 
+    /**
+     * Copy dst data to src data over given box.
+diff --git a/include/PatchCellDataOpsInteger.h b/include/PatchCellDataOpsInteger.h
+index d9ab15e..93bdfc4 100644
+--- a/include/PatchCellDataOpsInteger.h
++++ b/include/PatchCellDataOpsInteger.h
+@@ -53,7 +53,7 @@ public:
+     */
+    PatchCellDataOpsInteger();
+ 
+-   virtual ~PatchCellDataOpsInteger<DIM>();
++   virtual ~PatchCellDataOpsInteger();
+ 
+    /**
+     * Return the number of data values for the cell-centered data object
+diff --git a/include/PatchCellDataOpsReal.h b/include/PatchCellDataOpsReal.h
+index b654db3..f323aa9 100644
+--- a/include/PatchCellDataOpsReal.h
++++ b/include/PatchCellDataOpsReal.h
+@@ -62,7 +62,7 @@ public:
+     */
+    PatchCellDataOpsReal();
+ 
+-   virtual ~PatchCellDataOpsReal<DIM,TYPE>();
++   virtual ~PatchCellDataOpsReal();
+ 
+    /**
+     * Copy dst data to src data over given box.
+diff --git a/include/PatchConfigurationUtilities.h b/include/PatchConfigurationUtilities.h
+index 1dc861f..f4d256c 100644
+--- a/include/PatchConfigurationUtilities.h
++++ b/include/PatchConfigurationUtilities.h
+@@ -98,7 +98,7 @@ public:
+    /*!
+     * Virtual destructor for utilities objects.
+     */
+-   virtual ~PatchConfigurationUtilities<DIM>();
++   virtual ~PatchConfigurationUtilities();
+ 
+    /*!
+     * Check whether information is set for given level number. 
+diff --git a/include/PatchData.h b/include/PatchData.h
+index 242e834..45a74ef 100644
+--- a/include/PatchData.h
++++ b/include/PatchData.h
+@@ -67,7 +67,7 @@ public:
+    /**
+     * The virtual destructor for a patch data object.
+     */
+-   virtual ~PatchData<DIM>();
++   virtual ~PatchData();
+ 
+    /**
+     * Return the box over which this patch data object is defined.  All
+diff --git a/include/PatchDataFactory.h b/include/PatchDataFactory.h
+index 8ce4fe5..6d66dfb 100644
+--- a/include/PatchDataFactory.h
++++ b/include/PatchDataFactory.h
+@@ -83,7 +83,7 @@ public:
+     * @brief Virtual destructor for the patch data factory class.
+     *
+     */
+-   virtual ~PatchDataFactory<DIM>();
++   virtual ~PatchDataFactory();
+ 
+    /**
+     * @brief Abstract virtual function to clone a patch data factory.
+diff --git a/include/PatchDescriptor.h b/include/PatchDescriptor.h
+index a8f816d..617aa07 100644
+--- a/include/PatchDescriptor.h
++++ b/include/PatchDescriptor.h
+@@ -74,7 +74,7 @@ public:
+     * The virtual destructor for a patch descriptor deallocates the
+     * internal data structures.
+     */
+-   virtual ~PatchDescriptor<DIM>();
++   virtual ~PatchDescriptor();
+ 
+    /*!
+     * Add a new patch data factory and name string identifier to the patch 
+diff --git a/include/PatchEdgeDataBasicOps.h b/include/PatchEdgeDataBasicOps.h
+index 303f6b0..d4b52c3 100644
+--- a/include/PatchEdgeDataBasicOps.h
++++ b/include/PatchEdgeDataBasicOps.h
+@@ -56,7 +56,7 @@ public:
+     */
+    PatchEdgeDataBasicOps();
+ 
+-   virtual ~PatchEdgeDataBasicOps<DIM,TYPE>();
++   virtual ~PatchEdgeDataBasicOps();
+ 
+    /**
+     * Set dst = alpha * src, elementwise.
+diff --git a/include/PatchEdgeDataMiscellaneousOpsReal.h b/include/PatchEdgeDataMiscellaneousOpsReal.h
+index b9b7868..6dc0a8b 100644
+--- a/include/PatchEdgeDataMiscellaneousOpsReal.h
++++ b/include/PatchEdgeDataMiscellaneousOpsReal.h
+@@ -68,7 +68,7 @@ public:
+     */
+    PatchEdgeDataMiscellaneousOpsReal();
+ 
+-   virtual ~PatchEdgeDataMiscellaneousOpsReal<DIM,TYPE>();
++   virtual ~PatchEdgeDataMiscellaneousOpsReal();
+ 
+    /**
+     * Return 1 if \f$\|data2_i\| > 0\f$ and \f$data1_i * data2_i \leq 0\f$, for
+diff --git a/include/PatchEdgeDataNormOpsComplex.h b/include/PatchEdgeDataNormOpsComplex.h
+index 0701999..69b2fe7 100644
+--- a/include/PatchEdgeDataNormOpsComplex.h
++++ b/include/PatchEdgeDataNormOpsComplex.h
+@@ -64,7 +64,7 @@ public:
+     */
+    PatchEdgeDataNormOpsComplex();
+ 
+-   virtual ~PatchEdgeDataNormOpsComplex<DIM>();
++   virtual ~PatchEdgeDataNormOpsComplex();
+ 
+    /**
+     * Return the number of data values for the edge-centered data object
+diff --git a/include/PatchEdgeDataNormOpsReal.h b/include/PatchEdgeDataNormOpsReal.h
+index 5b0a172..de67b22 100644
+--- a/include/PatchEdgeDataNormOpsReal.h
++++ b/include/PatchEdgeDataNormOpsReal.h
+@@ -68,7 +68,7 @@ public:
+     */
+    PatchEdgeDataNormOpsReal();
+ 
+-   virtual ~PatchEdgeDataNormOpsReal<DIM,TYPE>();
++   virtual ~PatchEdgeDataNormOpsReal();
+ 
+    /**
+     * Return the number of data values for the edge-centered data object
+diff --git a/include/PatchEdgeDataOpsComplex.h b/include/PatchEdgeDataOpsComplex.h
+index d065173..21c7de0 100644
+--- a/include/PatchEdgeDataOpsComplex.h
++++ b/include/PatchEdgeDataOpsComplex.h
+@@ -57,7 +57,7 @@ public:
+     */
+    PatchEdgeDataOpsComplex();
+ 
+-   virtual ~PatchEdgeDataOpsComplex<DIM>();
++   virtual ~PatchEdgeDataOpsComplex();
+ 
+    /**
+     * Copy dst data to src data over given box.
+diff --git a/include/PatchEdgeDataOpsInteger.h b/include/PatchEdgeDataOpsInteger.h
+index 3104013..c622643 100644
+--- a/include/PatchEdgeDataOpsInteger.h
++++ b/include/PatchEdgeDataOpsInteger.h
+@@ -52,7 +52,7 @@ public:
+     */
+    PatchEdgeDataOpsInteger();
+ 
+-   virtual ~PatchEdgeDataOpsInteger<DIM>();
++   virtual ~PatchEdgeDataOpsInteger();
+ 
+    /**
+     * Return the number of data values for the edge-centered data object
+diff --git a/include/PatchEdgeDataOpsReal.h b/include/PatchEdgeDataOpsReal.h
+index d806898..21d815c 100644
+--- a/include/PatchEdgeDataOpsReal.h
++++ b/include/PatchEdgeDataOpsReal.h
+@@ -62,7 +62,7 @@ public:
+     */
+    PatchEdgeDataOpsReal();
+ 
+-   virtual ~PatchEdgeDataOpsReal<DIM,TYPE>();
++   virtual ~PatchEdgeDataOpsReal();
+ 
+    /**
+     * Copy dst data to src data over given box.
+diff --git a/include/PatchFaceDataBasicOps.h b/include/PatchFaceDataBasicOps.h
+index 3f018a4..8de8098 100644
+--- a/include/PatchFaceDataBasicOps.h
++++ b/include/PatchFaceDataBasicOps.h
+@@ -56,7 +56,7 @@ public:
+     */
+    PatchFaceDataBasicOps();
+ 
+-   virtual ~PatchFaceDataBasicOps<DIM,TYPE>();
++   virtual ~PatchFaceDataBasicOps();
+ 
+    /**
+     * Set dst = alpha * src, elementwise.
+diff --git a/include/PatchFaceDataMiscellaneousOpsReal.h b/include/PatchFaceDataMiscellaneousOpsReal.h
+index 4df4689..7983223 100644
+--- a/include/PatchFaceDataMiscellaneousOpsReal.h
++++ b/include/PatchFaceDataMiscellaneousOpsReal.h
+@@ -68,7 +68,7 @@ public:
+     */
+    PatchFaceDataMiscellaneousOpsReal();
+ 
+-   virtual ~PatchFaceDataMiscellaneousOpsReal<DIM,TYPE>();
++   virtual ~PatchFaceDataMiscellaneousOpsReal();
+ 
+    /**
+     * Return 1 if \f$\|data2_i\| > 0\f$ and \f$data1_i * data2_i \leq 0\f$, for
+diff --git a/include/PatchFaceDataNormOpsComplex.h b/include/PatchFaceDataNormOpsComplex.h
+index 0e2c2e4..1469ce6 100644
+--- a/include/PatchFaceDataNormOpsComplex.h
++++ b/include/PatchFaceDataNormOpsComplex.h
+@@ -64,7 +64,7 @@ public:
+     */
+    PatchFaceDataNormOpsComplex();
+ 
+-   virtual ~PatchFaceDataNormOpsComplex<DIM>();
++   virtual ~PatchFaceDataNormOpsComplex();
+ 
+    /**
+     * Return the number of data values for the face-centered data object
+diff --git a/include/PatchFaceDataNormOpsReal.h b/include/PatchFaceDataNormOpsReal.h
+index 400376a..f30fcdf 100644
+--- a/include/PatchFaceDataNormOpsReal.h
++++ b/include/PatchFaceDataNormOpsReal.h
+@@ -68,7 +68,7 @@ public:
+     */
+    PatchFaceDataNormOpsReal();
+ 
+-   virtual ~PatchFaceDataNormOpsReal<DIM,TYPE>();
++   virtual ~PatchFaceDataNormOpsReal();
+ 
+    /**
+     * Return the number of data values for the face-centered data object
+diff --git a/include/PatchFaceDataOpsComplex.h b/include/PatchFaceDataOpsComplex.h
+index 1603e37..9ecc992 100644
+--- a/include/PatchFaceDataOpsComplex.h
++++ b/include/PatchFaceDataOpsComplex.h
+@@ -56,7 +56,7 @@ public:
+     */
+    PatchFaceDataOpsComplex();
+ 
+-   virtual ~PatchFaceDataOpsComplex<DIM>();
++   virtual ~PatchFaceDataOpsComplex();
+ 
+    /**
+     * Copy dst data to src data over given box.
+diff --git a/include/PatchFaceDataOpsInteger.h b/include/PatchFaceDataOpsInteger.h
+index f287f54..21b01ec 100644
+--- a/include/PatchFaceDataOpsInteger.h
++++ b/include/PatchFaceDataOpsInteger.h
+@@ -52,7 +52,7 @@ public:
+     */
+    PatchFaceDataOpsInteger();
+ 
+-   virtual ~PatchFaceDataOpsInteger<DIM>();
++   virtual ~PatchFaceDataOpsInteger();
+ 
+    /**
+     * Return the number of data values for the face-centered data object
+diff --git a/include/PatchFaceDataOpsReal.h b/include/PatchFaceDataOpsReal.h
+index 59a8867..a546a56 100644
+--- a/include/PatchFaceDataOpsReal.h
++++ b/include/PatchFaceDataOpsReal.h
+@@ -62,7 +62,7 @@ public:
+     */
+    PatchFaceDataOpsReal();
+ 
+-   virtual ~PatchFaceDataOpsReal<DIM,TYPE>();
++   virtual ~PatchFaceDataOpsReal();
+ 
+    /**
+     * Copy dst data to src data over given box.
+diff --git a/include/PatchFactory.h b/include/PatchFactory.h
+index 9a09425..60333d4 100644
+--- a/include/PatchFactory.h
++++ b/include/PatchFactory.h
+@@ -43,7 +43,7 @@ public:
+    /**
+     * Virtual destructor for patch factory objects.
+     */
+-   virtual ~PatchFactory<DIM>();
++   virtual ~PatchFactory();
+ 
+    /**
+     * Allocate a patch with the specified domain and patch descriptor.
+diff --git a/include/PatchGeometry.h b/include/PatchGeometry.h
+index c564e0b..d58d312 100644
+--- a/include/PatchGeometry.h
++++ b/include/PatchGeometry.h
+@@ -46,7 +46,7 @@ public:
+    /**
+     * The default constructor for the patch geometry base class.
+     */
+-   PatchGeometry<DIM>(
++   PatchGeometry(
+       const IntVector<DIM>& ratio_to_level_zero,
+       const tbox::Array< tbox::Array<bool> >& touches_regular_bdry,
+       const tbox::Array< tbox::Array<bool> >& touches_periodic_bdry);
+@@ -54,7 +54,7 @@ public:
+    /**
+     * The virtual destructor for the patch geometry base class.
+     */
+-   virtual ~PatchGeometry<DIM>();
++   virtual ~PatchGeometry();
+ 
+    /**
+     * Return const reference to patch boundary information.
+diff --git a/include/PatchHierarchy.h b/include/PatchHierarchy.h
+index 126066e..10855b9 100644
+--- a/include/PatchHierarchy.h
++++ b/include/PatchHierarchy.h
+@@ -69,7 +69,7 @@ public:
+    /**
+     * Destructor for patch hierarchy objects.
+     */
+-   ~PatchHierarchy<DIM>();
++   ~PatchHierarchy();
+ 
+ 
+   /**
+diff --git a/include/PatchLevel.C b/include/PatchLevel.C
+index 15150cb..42f781a 100644
+--- a/include/PatchLevel.C
++++ b/include/PatchLevel.C
+@@ -27,7 +27,15 @@
+ namespace SAMRAI {
+     namespace hier {
+ 
+-static tbox::Pointer<tbox::Timer> t_level_constructor;
++/*
++*************************************************************************
++*                                                                       *
++* Initialization for static data members.                               *
++*                                                                       *
++*************************************************************************
++*/
++template<int DIM> tbox::Pointer<tbox::Timer>
++   PatchLevel<DIM>::t_level_constructor;
+ 
+ /*
+  *************************************************************************
+@@ -1007,8 +1015,8 @@ template<int DIM> void PatchLevel<DIM>::initializeTimers()
+    if ( t_level_constructor.isNull() ) {
+       t_level_constructor = tbox::TimerManager::getManager() ->
+          getTimer("mesh::PatchLevel::level_constructor");
+-   }
+    tbox::ShutdownRegistry::registerShutdownRoutine(freeTimers, 254);
++   }
+ }
+ 
+ 
+diff --git a/include/PatchLevel.h b/include/PatchLevel.h
+index d5d651b..ebbb23d 100644
+--- a/include/PatchLevel.h
++++ b/include/PatchLevel.h
+@@ -127,7 +127,7 @@ public:
+    /**
+     * The virtual destructor for patch level deallocates all patches.
+     */
+-   virtual ~PatchLevel<DIM>();
++   virtual ~PatchLevel();
+ 
+    /**
+     * Return the number of this level in a hierarchy, or the number of
+@@ -479,7 +479,10 @@ private:
+     */
+    void setPatchTouchesBoundaryArrays();
+ 
+-   void initializeTimers();
++   /*!
++    * Allocate static timers.
++    */
++   static void initializeTimers();
+ 
+    /*!
+     * Free static timers.
+@@ -565,6 +568,11 @@ private:
+     * Manages communications in clustering algorithms
+     */
+    tbox::Pointer< BinaryTree<DIM> > d_binary_tree;
++
++   /*
++    * Timer objects for performance measurement.
++    */
++   static tbox::Pointer<tbox::Timer> t_level_constructor;
+ };
+ 
+ /**
+@@ -625,7 +633,7 @@ public:
+    /**
+     * Destructor for the patch level iterator.
+     */
+-   ~PatchLevelIterator<DIM>();
++   ~PatchLevelIterator();
+ 
+    /**
+     * Extract the integer patch index corresponding to the current patch 
+diff --git a/include/PatchLevelFactory.h b/include/PatchLevelFactory.h
+index 8f2fece..bbda81d 100644
+--- a/include/PatchLevelFactory.h
++++ b/include/PatchLevelFactory.h
+@@ -42,7 +42,7 @@ public:
+    /**
+     * Virtual destructor for patch level factory objects.
+     */
+-   virtual ~PatchLevelFactory<DIM>();
++   virtual ~PatchLevelFactory();
+ 
+    /**
+     * Allocate a patch level with the specified boxes and processor mappings.
+diff --git a/include/PatchNodeDataBasicOps.h b/include/PatchNodeDataBasicOps.h
+index d60d987..db56d8c 100644
+--- a/include/PatchNodeDataBasicOps.h
++++ b/include/PatchNodeDataBasicOps.h
+@@ -56,7 +56,7 @@ public:
+     */
+    PatchNodeDataBasicOps();
+ 
+-   virtual ~PatchNodeDataBasicOps<DIM,TYPE>();
++   virtual ~PatchNodeDataBasicOps();
+ 
+    /**
+     * Set dst = alpha * src, elementwise.
+diff --git a/include/PatchNodeDataMiscellaneousOpsReal.h b/include/PatchNodeDataMiscellaneousOpsReal.h
+index 05cc25d..31f81ae 100644
+--- a/include/PatchNodeDataMiscellaneousOpsReal.h
++++ b/include/PatchNodeDataMiscellaneousOpsReal.h
+@@ -68,7 +68,7 @@ public:
+     */
+    PatchNodeDataMiscellaneousOpsReal();
+ 
+-   virtual ~PatchNodeDataMiscellaneousOpsReal<DIM,TYPE>();
++   virtual ~PatchNodeDataMiscellaneousOpsReal();
+ 
+    /**
+     * Return 1 if \f$\|data2_i\| > 0\f$ and \f$data1_i * data2_i \leq 0\f$, for
+diff --git a/include/PatchNodeDataNormOpsComplex.h b/include/PatchNodeDataNormOpsComplex.h
+index afb014c..f82507e 100644
+--- a/include/PatchNodeDataNormOpsComplex.h
++++ b/include/PatchNodeDataNormOpsComplex.h
+@@ -64,7 +64,7 @@ public:
+     */
+    PatchNodeDataNormOpsComplex();
+ 
+-   virtual ~PatchNodeDataNormOpsComplex<DIM>();
++   virtual ~PatchNodeDataNormOpsComplex();
+ 
+    /**
+     * Return the number of data values for the node-centered data object
+diff --git a/include/PatchNodeDataNormOpsReal.h b/include/PatchNodeDataNormOpsReal.h
+index 14d450e..8d50780 100644
+--- a/include/PatchNodeDataNormOpsReal.h
++++ b/include/PatchNodeDataNormOpsReal.h
+@@ -68,7 +68,7 @@ public:
+     */
+    PatchNodeDataNormOpsReal();
+ 
+-   virtual ~PatchNodeDataNormOpsReal<DIM,TYPE>();
++   virtual ~PatchNodeDataNormOpsReal();
+ 
+    /**
+     * Return the number of data values for the node-centered data object
+diff --git a/include/PatchNodeDataOpsComplex.h b/include/PatchNodeDataOpsComplex.h
+index 1258ee1..7a0f8d1 100644
+--- a/include/PatchNodeDataOpsComplex.h
++++ b/include/PatchNodeDataOpsComplex.h
+@@ -57,7 +57,7 @@ public:
+     */
+    PatchNodeDataOpsComplex();
+ 
+-   virtual ~PatchNodeDataOpsComplex<DIM>();
++   virtual ~PatchNodeDataOpsComplex();
+ 
+    /**
+     * Copy dst data to src data over given box.
+diff --git a/include/PatchNodeDataOpsInteger.h b/include/PatchNodeDataOpsInteger.h
+index c1f4822..283d69d 100644
+--- a/include/PatchNodeDataOpsInteger.h
++++ b/include/PatchNodeDataOpsInteger.h
+@@ -52,7 +52,7 @@ public:
+     */
+    PatchNodeDataOpsInteger();
+ 
+-   virtual ~PatchNodeDataOpsInteger<DIM>();
++   virtual ~PatchNodeDataOpsInteger();
+ 
+    /**
+     * Return the number of data values for the node-centered data object
+diff --git a/include/PatchNodeDataOpsReal.h b/include/PatchNodeDataOpsReal.h
+index a31d46f..411e738 100644
+--- a/include/PatchNodeDataOpsReal.h
++++ b/include/PatchNodeDataOpsReal.h
+@@ -62,7 +62,7 @@ public:
+     */
+    PatchNodeDataOpsReal();
+ 
+-   virtual ~PatchNodeDataOpsReal<DIM,TYPE>();
++   virtual ~PatchNodeDataOpsReal();
+ 
+    /**
+     * Copy dst data to src data over given box.
+diff --git a/include/PatchSideDataBasicOps.h b/include/PatchSideDataBasicOps.h
+index 4850ac1..4e19fb4 100644
+--- a/include/PatchSideDataBasicOps.h
++++ b/include/PatchSideDataBasicOps.h
+@@ -56,7 +56,7 @@ public:
+     */
+    PatchSideDataBasicOps();
+ 
+-   virtual ~PatchSideDataBasicOps<DIM,TYPE>();
++   virtual ~PatchSideDataBasicOps();
+ 
+    /**
+     * Set dst = alpha * src, elementwise.
+diff --git a/include/PatchSideDataMiscellaneousOpsReal.h b/include/PatchSideDataMiscellaneousOpsReal.h
+index 8a8c8b6..6ba736c 100644
+--- a/include/PatchSideDataMiscellaneousOpsReal.h
++++ b/include/PatchSideDataMiscellaneousOpsReal.h
+@@ -68,7 +68,7 @@ public:
+     */
+    PatchSideDataMiscellaneousOpsReal();
+ 
+-   virtual ~PatchSideDataMiscellaneousOpsReal<DIM,TYPE>();
++   virtual ~PatchSideDataMiscellaneousOpsReal();
+ 
+    /**
+     * Return 1 if \f$\|data2_i\| > 0\f$ and \f$data1_i * data2_i \leq 0\f$, for
+diff --git a/include/PatchSideDataNormOpsComplex.h b/include/PatchSideDataNormOpsComplex.h
+index 416071c..d83c2e6 100644
+--- a/include/PatchSideDataNormOpsComplex.h
++++ b/include/PatchSideDataNormOpsComplex.h
+@@ -64,7 +64,7 @@ public:
+     */
+    PatchSideDataNormOpsComplex();
+ 
+-   virtual ~PatchSideDataNormOpsComplex<DIM>();
++   virtual ~PatchSideDataNormOpsComplex();
+ 
+    /**
+     * Return the number of data values for the side-centered data object
+diff --git a/include/PatchSideDataNormOpsReal.h b/include/PatchSideDataNormOpsReal.h
+index 0c9dc26..20a4c36 100644
+--- a/include/PatchSideDataNormOpsReal.h
++++ b/include/PatchSideDataNormOpsReal.h
+@@ -68,7 +68,7 @@ public:
+     */
+    PatchSideDataNormOpsReal();
+ 
+-   virtual ~PatchSideDataNormOpsReal<DIM,TYPE>();
++   virtual ~PatchSideDataNormOpsReal();
+ 
+    /**
+     * Return the number of data values for the side-centered data object
+diff --git a/include/PatchSideDataOpsComplex.h b/include/PatchSideDataOpsComplex.h
+index 67b02ca..8faba0c 100644
+--- a/include/PatchSideDataOpsComplex.h
++++ b/include/PatchSideDataOpsComplex.h
+@@ -57,7 +57,7 @@ public:
+     */
+    PatchSideDataOpsComplex();
+ 
+-   virtual ~PatchSideDataOpsComplex<DIM>();
++   virtual ~PatchSideDataOpsComplex();
+ 
+    /**
+     * Copy dst data to src data over given box.
+diff --git a/include/PatchSideDataOpsInteger.h b/include/PatchSideDataOpsInteger.h
+index fbb3c87..3205972 100644
+--- a/include/PatchSideDataOpsInteger.h
++++ b/include/PatchSideDataOpsInteger.h
+@@ -52,7 +52,7 @@ public:
+     */
+    PatchSideDataOpsInteger();
+ 
+-   virtual ~PatchSideDataOpsInteger<DIM>();
++   virtual ~PatchSideDataOpsInteger();
+ 
+    /**
+     * Return the number of data values for the side-centered data object
+diff --git a/include/PatchSideDataOpsReal.h b/include/PatchSideDataOpsReal.h
+index 3c44b26..0793f81 100644
+--- a/include/PatchSideDataOpsReal.h
++++ b/include/PatchSideDataOpsReal.h
+@@ -62,7 +62,7 @@ public:
+     */
+    PatchSideDataOpsReal();
+ 
+-   virtual ~PatchSideDataOpsReal<DIM,TYPE>();
++   virtual ~PatchSideDataOpsReal();
+ 
+    /**
+     * Copy dst data to src data over given box.
+diff --git a/include/RefineAlgorithm.h b/include/RefineAlgorithm.h
+index 5323ebe..81a7f52 100644
+--- a/include/RefineAlgorithm.h
++++ b/include/RefineAlgorithm.h
+@@ -120,7 +120,7 @@ public:
+    /*!
+     * The virtual destructor for the algorithm releases all internal storage.
+     */
+-   virtual ~RefineAlgorithm<DIM>();
++   virtual ~RefineAlgorithm();
+ 
+    /*!
+     * Register a refine operation with the refine algorithm object.  This 
+diff --git a/include/RefineClasses.h b/include/RefineClasses.h
+index 6eb5c50..1c26721 100644
+--- a/include/RefineClasses.h
++++ b/include/RefineClasses.h
+@@ -66,7 +66,7 @@ public:
+     * The virtual destructor destroys the refinement data items owned 
+     * by this object (and the associated RefineAlgorithm<DIM> object).
+     */
+-   virtual ~RefineClasses<DIM>();
++   virtual ~RefineClasses();
+ 
+    /**
+     * Return number of equivalence classes maintained by this object
+diff --git a/include/RefineCopyTransaction.h b/include/RefineCopyTransaction.h
+index 58bf391..3b6dc44 100644
+--- a/include/RefineCopyTransaction.h
++++ b/include/RefineCopyTransaction.h
+@@ -93,7 +93,7 @@ public:
+     * The virtual destructor for the copy transaction releases all
+     * memory associated with the transaction.
+     */
+-   virtual ~RefineCopyTransaction<DIM>();
++   virtual ~RefineCopyTransaction();
+ 
+    /*!
+     * Return a boolean indicating whether this transaction can estimate
+diff --git a/include/RefineOperator.h b/include/RefineOperator.h
+index 5984f5b..580098c 100644
+--- a/include/RefineOperator.h
++++ b/include/RefineOperator.h
+@@ -75,7 +75,7 @@ public:
+     * The virtual destructor for the refinement operator does
+     * nothing interesting.
+     */
+-   virtual ~RefineOperator<DIM>();
++   virtual ~RefineOperator();
+ 
+    /**
+     * Return true if the refinement operation matches the variable and
+diff --git a/include/RefineSchedule.C b/include/RefineSchedule.C
+index d4e6a90..d19fb4a 100644
+--- a/include/RefineSchedule.C
++++ b/include/RefineSchedule.C
+@@ -41,18 +41,6 @@ namespace SAMRAI {
+ #define BIG_GHOST_CELL_WIDTH  (10)
+ 
+ 
+-/*!
+- * Timer objects for performance measurement.
+- */
+-static tbox::Pointer<tbox::Timer> t_fill_data;
+-static tbox::Pointer<tbox::Timer> t_recursive_fill;
+-static tbox::Pointer<tbox::Timer> t_refine_scratch_data;
+-static tbox::Pointer<tbox::Timer> t_gen_sched_n_squared;
+-static tbox::Pointer<tbox::Timer> t_gen_sched_box_graph;
+-static tbox::Pointer<tbox::Timer> t_gen_sched_box_tree; 
+-static tbox::Pointer<tbox::Timer> t_gen_comm_sched;
+-static tbox::Pointer<tbox::Timer> t_finish_sched_const;
+-
+ /*
+ *************************************************************************
+ *                                                                       *
+@@ -67,6 +55,22 @@ template<int DIM> const hier::IntVector<DIM>
+    RefineSchedule<DIM>::s_constant_one_intvector = hier::IntVector<DIM>(1);
+ template<int DIM> std::string
+    RefineSchedule<DIM>::s_schedule_generation_method = "BOX_TREE";
++template<int DIM> tbox::Pointer<tbox::Timer>
++   RefineSchedule<DIM>::t_fill_data;
++template<int DIM> tbox::Pointer<tbox::Timer>
++   RefineSchedule<DIM>::t_recursive_fill;
++template<int DIM> tbox::Pointer<tbox::Timer>
++   RefineSchedule<DIM>::t_refine_scratch_data;
++template<int DIM> tbox::Pointer<tbox::Timer>
++   RefineSchedule<DIM>::t_gen_sched_n_squared;
++template<int DIM> tbox::Pointer<tbox::Timer>
++   RefineSchedule<DIM>::t_gen_sched_box_graph;
++template<int DIM> tbox::Pointer<tbox::Timer>
++   RefineSchedule<DIM>::t_gen_sched_box_tree;
++template<int DIM> tbox::Pointer<tbox::Timer>
++   RefineSchedule<DIM>::t_gen_comm_sched;
++template<int DIM> tbox::Pointer<tbox::Timer>
++   RefineSchedule<DIM>::t_finish_sched_const;
+ 
+ /*
+  * ************************************************************************
+@@ -809,6 +813,19 @@ template<int DIM> void RefineSchedule<DIM>::fillData(
+    d_transaction_factory->setTransactionTime(fill_time);
+    d_transaction_factory->setRefineItems(d_refine_items, d_number_refine_items);
+ 
++   /*
++    * Set the destination level number for the variable fill pattern
++    * objects.
++    */
++   const int num_equiv_classes =
++      d_refine_classes->getNumberOfEquivalenceClasses();
++   for (int nc = 0; nc < num_equiv_classes; nc++) {
++      const typename xfer::RefineClasses<DIM>::Data& rep_item =
++         d_refine_classes->getClassRepresentative(nc);
++      rep_item.d_var_fill_pattern->setTargetPatchLevelNumber(
++         d_dst_level->getLevelNumber());
++   }
++
+    /*
+     * Check whether scratch data needs to be allocated on the destination
+     * level.  Keep track of those allocated components so that they may be
+@@ -840,6 +857,16 @@ template<int DIM> void RefineSchedule<DIM>::fillData(
+ 
+    d_dst_level->deallocatePatchData(allocate_vector);
+ 
++   /*
++    * Reset the destination level number for the variable fill pattern
++    * objects.
++    */
++   for (int nc = 0; nc < num_equiv_classes; nc++) {
++      const typename xfer::RefineClasses<DIM>::Data& rep_item =
++         d_refine_classes->getClassRepresentative(nc);
++      rep_item.d_var_fill_pattern->setTargetPatchLevelNumber(-1);
++   }
++
+    /*
+     * Unset the refine items for all transactions.  These items are
+     * shared by all transaction objects in the communication schedule.
+@@ -1887,12 +1914,14 @@ template<int DIM> void RefineSchedule<DIM>::constructScheduleTransactions(
+             hier::Box<DIM> src_mask( hier::Box<DIM>::shift( test_mask,-shift) );
+ 
+             tbox::Pointer< hier::BoxOverlap<DIM> > overlap =
+-               rep_item.d_var_fill_pattern->calculateOverlap(
++               rep_item.d_var_fill_pattern->calculateOverlapOnLevel(
+                   *dst_pdf->getBoxGeometry(dst_box),
+                   *src_pdf->getBoxGeometry(src_box),
+                   dst_box,
+                   src_mask,
+-                  true, shift);
++                  true, shift,
++                  dst_level->getLevelNumber(),
++                  src_level->getLevelNumber());
+ /*	    tbox::Pointer< hier::BoxOverlap<DIM> > overlap =
+ 	       dst_pdf->getBoxGeometry(dst_box)
+ 		      ->calculateOverlap(
+@@ -2230,6 +2259,8 @@ template<int DIM> void RefineSchedule<DIM>::printClassData(std::ostream& stream)
+ 
+ /*
+ ***********************************************************************
++Allocate static timers and register freeTimers with the shutdown
++registry.
+ ***********************************************************************
+ */
+ template<int DIM>
+diff --git a/include/RefineSchedule.h b/include/RefineSchedule.h
+index ed4ecb0..bf2f1b8 100644
+--- a/include/RefineSchedule.h
++++ b/include/RefineSchedule.h
+@@ -197,7 +197,7 @@ public:
+    /*!
+     * Virtual destructor for the schedule releases all internal storage.
+     */
+-   virtual ~RefineSchedule<DIM>();
++   virtual ~RefineSchedule();
+ 
+    /*!
+     * @brief Reset this refine schedule to perform data transfers
+@@ -542,14 +542,16 @@ private:
+     */
+    void initialCheckRefineClassItems() const;
+ 
+-   void initializeTimers();
+-
+-
+    /*!
+     * @brief Set up things for the entire class.
+     */
+    void firstConstructorTasks();
+ 
++   /*!
++    * Allocate static timers.
++    */
++   static void initializeTimers();
++
+    /*!
+     * Free static timers.
+     *
+@@ -723,7 +725,17 @@ private:
+    int d_max_fill_boxes;
+    hier::BoxArray<DIM> d_src_masks;
+ 
+-
++   /*!
++    * Timer objects for performance measurement.
++    */
++   static tbox::Pointer<tbox::Timer> t_fill_data;
++   static tbox::Pointer<tbox::Timer> t_recursive_fill;
++   static tbox::Pointer<tbox::Timer> t_refine_scratch_data;
++   static tbox::Pointer<tbox::Timer> t_gen_sched_n_squared;
++   static tbox::Pointer<tbox::Timer> t_gen_sched_box_graph;
++   static tbox::Pointer<tbox::Timer> t_gen_sched_box_tree;
++   static tbox::Pointer<tbox::Timer> t_gen_comm_sched;
++   static tbox::Pointer<tbox::Timer> t_finish_sched_const;
+ };
+ 
+ }
+diff --git a/include/RefineTimeTransaction.h b/include/RefineTimeTransaction.h
+index ac87a24..c852398 100644
+--- a/include/RefineTimeTransaction.h
++++ b/include/RefineTimeTransaction.h
+@@ -109,7 +109,7 @@ public:
+     * The virtual destructor for time transaction releases all
+     * memory associated with the transaction.
+     */
+-   virtual ~RefineTimeTransaction<DIM>();
++   virtual ~RefineTimeTransaction();
+ 
+    /*!
+     * Return a boolean indicating whether this transaction can estimate
+diff --git a/include/RobinBcCoefStrategy.h b/include/RobinBcCoefStrategy.h
+index 21dd969..017ea86 100644
+--- a/include/RobinBcCoefStrategy.h
++++ b/include/RobinBcCoefStrategy.h
+@@ -57,7 +57,7 @@ public:
+    /*!
+     * @brief Destructor.
+     */
+-   virtual ~RobinBcCoefStrategy<DIM>(void);
++   virtual ~RobinBcCoefStrategy();
+ 
+ 
+    //@{
+diff --git a/include/SAMRAIVectorReal.h b/include/SAMRAIVectorReal.h
+index b50fc0d..fd73a49 100644
+--- a/include/SAMRAIVectorReal.h
++++ b/include/SAMRAIVectorReal.h
+@@ -151,7 +151,7 @@ public:
+     * some pre-existing patch data objects that must live beyond the 
+     * destruction of the vector object.
+     */
+-   virtual ~SAMRAIVectorReal<DIM,TYPE>();
++   virtual ~SAMRAIVectorReal();
+ 
+    /**
+     * Set string identifier for this vector object.
+diff --git a/include/SNES_SAMRAIContext.h b/include/SNES_SAMRAIContext.h
+index 6db0ea5..6a1765d 100644
+--- a/include/SNES_SAMRAIContext.h
++++ b/include/SNES_SAMRAIContext.h
+@@ -229,7 +229,7 @@ public:
+     * Destructor for solve_SNES_SAMRAIContext destroys the SNES 
+     * and the PETSc solution vector wrapper.
+     */
+-   ~SNES_SAMRAIContext<DIM>();
++   ~SNES_SAMRAIContext();
+ 
+    /*!
+     * Return the PETSc nonlinear solver object.
+diff --git a/include/SideComplexConstantRefine.h b/include/SideComplexConstantRefine.h
+index 5397ec7..6332eaf 100644
+--- a/include/SideComplexConstantRefine.h
++++ b/include/SideComplexConstantRefine.h
+@@ -49,7 +49,7 @@ public:
+    /**
+     * Uninteresting virtual destructor.
+     */
+-   virtual ~SideComplexConstantRefine<DIM>();
++   virtual ~SideComplexConstantRefine();
+ 
+    /**
+     * Return true if the variable and name string match side-centered 
+diff --git a/include/SideComplexLinearTimeInterpolateOp.h b/include/SideComplexLinearTimeInterpolateOp.h
+index 93dc0d5..ddc9ad7 100644
+--- a/include/SideComplexLinearTimeInterpolateOp.h
++++ b/include/SideComplexLinearTimeInterpolateOp.h
+@@ -46,7 +46,7 @@ public:
+    /**
+     * Uninteresting virtual destructor.
+     */
+-   virtual ~SideComplexLinearTimeInterpolateOp<DIM>();
++   virtual ~SideComplexLinearTimeInterpolateOp();
+ 
+    /**
+     * Return true if the variable and name string match the standard
+diff --git a/include/SideData.h b/include/SideData.h
+index 608eac6..2a59d2b 100644
+--- a/include/SideData.h
++++ b/include/SideData.h
+@@ -143,7 +143,7 @@ public:
+    /*!
+     * @brief The virtual destructor for a side data object.
+     */
+-   virtual ~SideData<DIM,TYPE>();
++   virtual ~SideData();
+ 
+    /*!
+     * @brief Return constant reference to vector describing which coordinate
+diff --git a/include/SideDataFactory.h b/include/SideDataFactory.h
+index dba3eda..5d1a46f 100644
+--- a/include/SideDataFactory.h
++++ b/include/SideDataFactory.h
+@@ -67,7 +67,7 @@ public:
+    /**
+     * Virtual destructor for the side data factory class.
+     */
+-   virtual ~SideDataFactory<DIM,TYPE>();
++   virtual ~SideDataFactory();
+ 
+    /**
+     * @brief Abstract virtual function to clone a patch data factory.
+diff --git a/include/SideDoubleConstantRefine.h b/include/SideDoubleConstantRefine.h
+index 921560b..a578638 100644
+--- a/include/SideDoubleConstantRefine.h
++++ b/include/SideDoubleConstantRefine.h
+@@ -49,7 +49,7 @@ public:
+    /**
+     * Uninteresting virtual destructor.
+     */
+-   virtual ~SideDoubleConstantRefine<DIM>();
++   virtual ~SideDoubleConstantRefine();
+ 
+    /**
+     * Return true if the variable and name string match side-centered 
+diff --git a/include/SideDoubleLinearTimeInterpolateOp.h b/include/SideDoubleLinearTimeInterpolateOp.h
+index 5d8a4a5..ce9a7be 100644
+--- a/include/SideDoubleLinearTimeInterpolateOp.h
++++ b/include/SideDoubleLinearTimeInterpolateOp.h
+@@ -46,7 +46,7 @@ public:
+    /**
+     * Uninteresting virtual destructor.
+     */
+-   virtual ~SideDoubleLinearTimeInterpolateOp<DIM>();
++   virtual ~SideDoubleLinearTimeInterpolateOp();
+ 
+    /**
+     * Return true if the variable and name string match the standard
+diff --git a/include/SideFloatConstantRefine.h b/include/SideFloatConstantRefine.h
+index 8a48fce..0d64001 100644
+--- a/include/SideFloatConstantRefine.h
++++ b/include/SideFloatConstantRefine.h
+@@ -49,7 +49,7 @@ public:
+    /**
+     * Uninteresting virtual destructor.
+     */
+-   virtual ~SideFloatConstantRefine<DIM>();
++   virtual ~SideFloatConstantRefine();
+ 
+    /**
+     * Return true if the variable and name string match side-centered 
+diff --git a/include/SideFloatLinearTimeInterpolateOp.h b/include/SideFloatLinearTimeInterpolateOp.h
+index 2119801..a033d4a 100644
+--- a/include/SideFloatLinearTimeInterpolateOp.h
++++ b/include/SideFloatLinearTimeInterpolateOp.h
+@@ -46,7 +46,7 @@ public:
+    /**
+     * Uninteresting virtual destructor.
+     */
+-   virtual ~SideFloatLinearTimeInterpolateOp<DIM>();
++   virtual ~SideFloatLinearTimeInterpolateOp();
+ 
+    /**
+     * Return true if the variable and name string match the standard
+diff --git a/include/SideGeometry.h b/include/SideGeometry.h
+index 85e4ccd..ceba9e8 100644
+--- a/include/SideGeometry.h
++++ b/include/SideGeometry.h
+@@ -64,7 +64,7 @@ public:
+    /*!
+     * @brief The virtual destructor does nothing interesting.
+     */
+-   virtual ~SideGeometry<DIM>();
++   virtual ~SideGeometry();
+ 
+    /*!
+     * @brief Compute the overlap in side-centered index space between
+diff --git a/include/SideIndex.h b/include/SideIndex.h
+index 74c7ac2..3cb152c 100644
+--- a/include/SideIndex.h
++++ b/include/SideIndex.h
+@@ -59,7 +59,7 @@ public:
+    /**
+     * The side index destructor does nothing interesting.
+     */
+-   ~SideIndex<DIM>();
++   ~SideIndex();
+ 
+    /**
+     * Get the axis for which this side index is defined (X=0, Y=1, Z=2).
+diff --git a/include/SideIntegerConstantRefine.h b/include/SideIntegerConstantRefine.h
+index 507de57..977d6bd 100644
+--- a/include/SideIntegerConstantRefine.h
++++ b/include/SideIntegerConstantRefine.h
+@@ -49,7 +49,7 @@ public:
+    /**
+     * Uninteresting virtual destructor.
+     */
+-   virtual ~SideIntegerConstantRefine<DIM>();
++   virtual ~SideIntegerConstantRefine();
+ 
+    /**
+     * Return true if the variable and name string match side-centered 
+diff --git a/include/SideIterator.h b/include/SideIterator.h
+index b2c13df..ac0dcd2 100644
+--- a/include/SideIterator.h
++++ b/include/SideIterator.h
+@@ -67,7 +67,7 @@ public:
+    /**
+     * Destructor for the side iterator.
+     */
+-   ~SideIterator<DIM>();
++   ~SideIterator();
+ 
+    /**
+     * Extract the side index corresponding to the iterator position in the box.
+diff --git a/include/SideOverlap.h b/include/SideOverlap.h
+index f129dc5..57854d3 100644
+--- a/include/SideOverlap.h
++++ b/include/SideOverlap.h
+@@ -45,7 +45,7 @@ public:
+     * The virtual destructor does nothing interesting except deallocate
+     * box data.
+     */
+-   virtual ~SideOverlap<DIM>();
++   virtual ~SideOverlap();
+ 
+    /**
+     * Return whether there is an empty intersection between the two
+diff --git a/include/SideVariable.C b/include/SideVariable.C
+index 190dfd9..c92215c 100644
+--- a/include/SideVariable.C
++++ b/include/SideVariable.C
+@@ -54,7 +54,7 @@ SideVariable<DIM,TYPE>::SideVariable(
+       for (int id = 0; id < DIM; id++) {
+          d_directions(id) = ( (direction == id) ? 1 : 0 );  
+       }  
+-      setPatchDataFactory(new SideDataFactory<DIM,TYPE>(
++      this->setPatchDataFactory(new SideDataFactory<DIM,TYPE>(
+                              depth,
+                              hier::IntVector<DIM>(0),
+                              fine_boundary_represents_var,
+diff --git a/include/SideVariable.h b/include/SideVariable.h
+index 99bd694..2ead01f 100644
+--- a/include/SideVariable.h
++++ b/include/SideVariable.h
+@@ -70,7 +70,7 @@ public:
+    /*!
+     * @brief Virtual destructor for side variable objects.
+     */
+-   virtual ~SideVariable<DIM,TYPE>();
++   virtual ~SideVariable();
+ 
+    /*!
+     * @brief Return constant reference to vector describing which coordinate
+diff --git a/include/SimpleCellRobinBcCoefs.h b/include/SimpleCellRobinBcCoefs.h
+index d06c1a7..073bd8d 100644
+--- a/include/SimpleCellRobinBcCoefs.h
++++ b/include/SimpleCellRobinBcCoefs.h
+@@ -69,7 +69,7 @@ public:
+    /*!
+     * @brief Destructor.
+     */
+-   virtual ~SimpleCellRobinBcCoefs<DIM>(void);
++   virtual ~SimpleCellRobinBcCoefs();
+ 
+ 
+ 
+diff --git a/include/SkeletonCoarsen.h b/include/SkeletonCoarsen.h
+index 1f4b79a..3a4c77b 100644
+--- a/include/SkeletonCoarsen.h
++++ b/include/SkeletonCoarsen.h
+@@ -47,7 +47,7 @@ public:
+    /**
+     * Uninteresting virtual destructor.
+     */
+-   virtual ~SkeletonCoarsen<DIM>();
++   virtual ~SkeletonCoarsen();
+ 
+    /**
+     * Return true if the variable and name string match cell-centered 
+diff --git a/include/SkeletonGridGeometry.h b/include/SkeletonGridGeometry.h
+index 8511514..79cfe73 100644
+--- a/include/SkeletonGridGeometry.h
++++ b/include/SkeletonGridGeometry.h
+@@ -120,7 +120,7 @@ public:
+     * Destructor for SkeletonGridGeometry unregisters the object 
+     * with the restart manager if previously registered.
+     */
+-   virtual ~SkeletonGridGeometry<DIM>();
++   virtual ~SkeletonGridGeometry();
+    
+    /**
+     * Create and return a pointer to a refined version of this Cartesian grid
+diff --git a/include/SkeletonPatchGeometry.h b/include/SkeletonPatchGeometry.h
+index 672bce1..c1bad61 100644
+--- a/include/SkeletonPatchGeometry.h
++++ b/include/SkeletonPatchGeometry.h
+@@ -51,7 +51,7 @@ public:
+    /**
+     * Destructor for SkeletonPatchGeometry.
+     */
+-   ~SkeletonPatchGeometry<DIM>();
++   ~SkeletonPatchGeometry();
+ 
+    /**
+     * Print SkeletonPatchGeometry class data.
+diff --git a/include/SkeletonRefine.h b/include/SkeletonRefine.h
+index cc3d3d9..e860a27 100644
+--- a/include/SkeletonRefine.h
++++ b/include/SkeletonRefine.h
+@@ -47,7 +47,7 @@ public:
+    /**
+     * Uninteresting virtual destructor.
+     */
+-   virtual ~SkeletonRefine<DIM>();
++   virtual ~SkeletonRefine();
+ 
+    /**
+     * Return true if the variable and name string match cell-centered 
+diff --git a/include/StandardCoarsenTransactionFactory.h b/include/StandardCoarsenTransactionFactory.h
+index 37277a6..61d0fb2 100644
+--- a/include/StandardCoarsenTransactionFactory.h
++++ b/include/StandardCoarsenTransactionFactory.h
+@@ -44,7 +44,7 @@ public:
+    /*!
+     * @brief Virtual destructor.
+     */
+-   virtual ~StandardCoarsenTransactionFactory<DIM>();
++   virtual ~StandardCoarsenTransactionFactory();
+ 
+    /*!
+     * @brief Set the array of CoarsenClass::Data items used by the transactions.
+diff --git a/include/StandardLocallyActiveDataCoarsenTransactionFactory.h b/include/StandardLocallyActiveDataCoarsenTransactionFactory.h
+index 7868ce2..4dbecd9 100644
+--- a/include/StandardLocallyActiveDataCoarsenTransactionFactory.h
++++ b/include/StandardLocallyActiveDataCoarsenTransactionFactory.h
+@@ -47,7 +47,7 @@ public:
+    /*!
+     * @brief Virtual destructor.
+     */
+-   virtual ~StandardLocallyActiveDataCoarsenTransactionFactory<DIM>();
++   virtual ~StandardLocallyActiveDataCoarsenTransactionFactory();
+ 
+    /*!
+     * @brief Set the array of CoarsenClass::Data items used by the transactions.
+diff --git a/include/StandardLocallyActiveDataRefineTransactionFactory.h b/include/StandardLocallyActiveDataRefineTransactionFactory.h
+index 79935df..20fed02 100644
+--- a/include/StandardLocallyActiveDataRefineTransactionFactory.h
++++ b/include/StandardLocallyActiveDataRefineTransactionFactory.h
+@@ -48,7 +48,7 @@ public:
+    /*!
+     * @brief Virtual destructor.
+     */
+-   virtual ~StandardLocallyActiveDataRefineTransactionFactory<DIM>();
++   virtual ~StandardLocallyActiveDataRefineTransactionFactory();
+ 
+    /*!
+     * @brief Set the array of RefineClass::Data items used by the transactions.
+diff --git a/include/StandardRefineTransactionFactory.h b/include/StandardRefineTransactionFactory.h
+index 8438976..40d9393 100644
+--- a/include/StandardRefineTransactionFactory.h
++++ b/include/StandardRefineTransactionFactory.h
+@@ -47,7 +47,7 @@ public:
+    /*!
+     * @brief Virtual destructor.
+     */
+-   virtual ~StandardRefineTransactionFactory<DIM>();
++   virtual ~StandardRefineTransactionFactory();
+ 
+    /*!
+     * @brief Set the array of RefineClass::Data items used by the transactions.
+diff --git a/include/StandardTagAndInitStrategy.h b/include/StandardTagAndInitStrategy.h
+index 2870650..0b56f26 100644
+--- a/include/StandardTagAndInitStrategy.h
++++ b/include/StandardTagAndInitStrategy.h
+@@ -69,7 +69,7 @@ public:
+     * Empty destructor for 
+     * StandardTagAndInitStrategy<DIM>.
+     */
+-   virtual ~StandardTagAndInitStrategy<DIM>();
++   virtual ~StandardTagAndInitStrategy();
+ 
+    /**
+     * Determine time increment to advance data on level. The 
+diff --git a/include/StandardTagAndInitialize.C b/include/StandardTagAndInitialize.C
+index 66d7b1d..34b0824 100644
+--- a/include/StandardTagAndInitialize.C
++++ b/include/StandardTagAndInitialize.C
+@@ -287,7 +287,7 @@ template<int DIM> void StandardTagAndInitialize<DIM>::tagCellsForRefinement(
+    if (d_use_refine_boxes) {
+ 
+       hier::BoxArray<DIM> refine_boxes;
+-      getUserSuppliedRefineBoxes(refine_boxes, level_number, regrid_time); 
++      this->getUserSuppliedRefineBoxes(refine_boxes, level_number, regrid_time); 
+ 
+       tbox::Pointer< hier::PatchLevel<DIM> > level = 
+          hierarchy->getPatchLevel(level_number);
+diff --git a/include/StandardTagAndInitialize.h b/include/StandardTagAndInitialize.h
+index c5f5077..2e9a3e9 100644
+--- a/include/StandardTagAndInitialize.h
++++ b/include/StandardTagAndInitialize.h
+@@ -100,7 +100,7 @@ public:
+    /*!
+     * Virtual destructor for StandardTagAndInitialize<DIM>.
+     */
+-   virtual ~StandardTagAndInitialize<DIM>();
++   virtual ~StandardTagAndInitialize();
+ 
+    /*!
+     * Specifies whether the chosen method advances the solution data 
+diff --git a/include/Sundials_SAMRAIVector.h b/include/Sundials_SAMRAIVector.h
+index d29c4a6..91b2116 100644
+--- a/include/Sundials_SAMRAIVector.h
++++ b/include/Sundials_SAMRAIVector.h
+@@ -106,7 +106,7 @@ protected:
+    /*
+     * Virtual destructor for Sundials_SAMRAIVector<DIM>.
+     */
+-   virtual ~Sundials_SAMRAIVector<DIM>();
++   virtual ~Sundials_SAMRAIVector();
+ 
+ private:
+    /*
+diff --git a/include/TagAndInitializeStrategy.h b/include/TagAndInitializeStrategy.h
+index e11b909..5872cbb 100644
+--- a/include/TagAndInitializeStrategy.h
++++ b/include/TagAndInitializeStrategy.h
+@@ -123,7 +123,7 @@ public:
+    /*!
+     * Empty destructor for TagAndInitializeStrategy<DIM>.
+     */
+-   virtual ~TagAndInitializeStrategy<DIM>();
++   virtual ~TagAndInitializeStrategy();
+ 
+    /*!
+     * Return user supplied set of refine boxes for specified level number
+diff --git a/include/TimeInterpolateOperator.h b/include/TimeInterpolateOperator.h
+index 39f2423..b587a47 100644
+--- a/include/TimeInterpolateOperator.h
++++ b/include/TimeInterpolateOperator.h
+@@ -70,7 +70,7 @@ public:
+     * The virtual destructor for the coarsening operator does
+     * nothing interesting.
+     */
+-   virtual ~TimeInterpolateOperator<DIM>();
++   virtual ~TimeInterpolateOperator();
+ 
+    /**
+     * Return true if the time interpolation operation matches the
+diff --git a/include/TimeRefinementIntegrator.h b/include/TimeRefinementIntegrator.h
+index 64a3a97..eb6bab0 100644
+--- a/include/TimeRefinementIntegrator.h
++++ b/include/TimeRefinementIntegrator.h
+@@ -183,7 +183,7 @@ public:
+     * The destructor for TimeRefinementIntegrator<DIM> unregisters 
+     * the integrator object with the restart manager when so registered.
+     */
+-   ~TimeRefinementIntegrator<DIM>();
++   ~TimeRefinementIntegrator();
+ 
+    /*!
+     * Set AMR patch hierarchy configuration and data at start of simulation.
+diff --git a/include/TimeRefinementLevelStrategy.h b/include/TimeRefinementLevelStrategy.h
+index a829869..38b6215 100644
+--- a/include/TimeRefinementLevelStrategy.h
++++ b/include/TimeRefinementLevelStrategy.h
+@@ -65,7 +65,7 @@ public:
+    /**
+     * Virtual destructor for TimeRefinementLevelStrategy<DIM>.
+     */
+-   virtual ~TimeRefinementLevelStrategy<DIM>();
++   virtual ~TimeRefinementLevelStrategy();
+ 
+    /**
+     * Initialize the state of the integrator that performs time 
+diff --git a/include/Variable.h b/include/Variable.h
+index 934d268..070d837 100644
+--- a/include/Variable.h
++++ b/include/Variable.h
+@@ -87,7 +87,7 @@ public:
+    /**
+     * Virtual destructor for variable objects.
+     */
+-   virtual ~Variable<DIM>();
++   virtual ~Variable();
+ 
+    /**
+     * Return the instance identifier for this particular variable object.
+diff --git a/include/VariableFillPattern.C b/include/VariableFillPattern.C
+index cd00635..16caf7c 100644
+--- a/include/VariableFillPattern.C
++++ b/include/VariableFillPattern.C
+@@ -39,7 +39,33 @@ VariableFillPattern<DIM>::~VariableFillPattern()
+ {
+ }
+ 
++template<int DIM>
++tbox::Pointer< hier::BoxOverlap<DIM> >
++VariableFillPattern<DIM>::calculateOverlapOnLevel(const hier::BoxGeometry<DIM>& dst_geometry,
++                                                  const hier::BoxGeometry<DIM>& src_geometry,
++                                                  const hier::Box<DIM>& dst_patch_box,
++                                                  const hier::Box<DIM>& src_mask,
++                                                  const bool overwrite_interior,
++                                                  const hier::IntVector<DIM>& src_offset,
++                                                  const int dst_level_num,
++                                                  const int src_level_num) const
++{
++   NULL_USE(dst_level_num);
++   NULL_USE(src_level_num);
++   return calculateOverlap(dst_geometry,
++                           src_geometry,
++                           dst_patch_box,
++                           src_mask,
++                           overwrite_interior,
++                           src_offset);
++}
+ 
++template<int DIM>
++void VariableFillPattern<DIM>::setTargetPatchLevelNumber(const int level_num)
++{
++   NULL_USE(level_num);
++   return;
++}
+ 
+ }
+ }
+diff --git a/include/VariableFillPattern.h b/include/VariableFillPattern.h
+index 35c8377..9100093 100644
+--- a/include/VariableFillPattern.h
++++ b/include/VariableFillPattern.h
+@@ -67,6 +67,47 @@ public:
+                     const bool overwrite_interior,
+                     const hier::IntVector<DIM>& src_offset) const = 0;
+ 
++   /*!
++    * This virtual method provides an interface to calculate overlaps between
++    * the destination and source geometries on a specified level of the patch
++    * hierarchy.
++    *
++    * @note A default implementation is provided that simply calls the pure
++    * virtual method calculateOverlap() for implementations that are level
++    * independent.
++    *
++    * @param dst_geometry    geometry object for destination box
++    * @param src_geometry    geometry object for source box
++    * @param dst_patch_box   box for the destination patch
++    * @param src_mask        the source mask, the box resulting from shifting
++    *                        the source box
++    * @param overwrite_interior  controls whether or not to include the
++    *                            destination box interior in the overlap
++    * @param src_offset      the offset between source and destination
++    *                        index space.  src + src_offset = dst
++    * @param dst_level_num   the level of the patch hierarchy on which the
++    *                        dst boxes are located
++    * @param src_level_num   the level of the patch hierarchy on which the
++    *                        src boxes are located
++    *
++    * @return                Pointer to the calculated overlap object
++    */
++   virtual tbox::Pointer< hier::BoxOverlap<DIM> >
++   calculateOverlapOnLevel(const hier::BoxGeometry<DIM>& dst_geometry,
++                           const hier::BoxGeometry<DIM>& src_geometry,
++                           const hier::Box<DIM>& dst_patch_box,
++                           const hier::Box<DIM>& src_mask,
++                           const bool overwrite_interior,
++                           const hier::IntVector<DIM>& src_offset,
++                           const int dst_level_num,
++                           const int src_level_num) const;
++
++   /*!
++    * Set the target patch level number for the variable fill pattern.  The
++    * default implementation is empty.
++    */
++   virtual void setTargetPatchLevelNumber(const int level_num);
++
+    /*!
+     * Return the maximum ghost width of the boundary stencil.  The default
+     * implementation throws an error.
+diff --git a/include/VisDerivedDataStrategy.h b/include/VisDerivedDataStrategy.h
+index 668b391..418e505 100644
+--- a/include/VisDerivedDataStrategy.h
++++ b/include/VisDerivedDataStrategy.h
+@@ -67,7 +67,7 @@ public:
+    /*!
+     * @brief Destructor for VisDerivedDataStrategy<DIM>.
+     */
+-   virtual ~VisDerivedDataStrategy<DIM>();
++   virtual ~VisDerivedDataStrategy();
+ 
+    /*!
+     * @brief This function calculates and packs derived
+diff --git a/include/VisItDataWriter.C b/include/VisItDataWriter.C
+index edf7d77..b050436 100644
+--- a/include/VisItDataWriter.C
++++ b/include/VisItDataWriter.C
+@@ -4481,7 +4481,7 @@ template<int DIM> void VisItDataWriter<DIM>::HDFputIntegerArray2D(
+ #endif
+    herr_t errf;
+    if ((nelements0 > 0) && (nelements1 > 0)) {
+-      hsize_t dim[] = {nelements0, nelements1};
++      hsize_t dim[] = {static_cast<hsize_t>(nelements0), static_cast<hsize_t>(nelements1)};
+       hid_t space = H5Screate_simple(2, dim, NULL);
+ #ifdef DEBUG_CHECK_ASSERTIONS
+       TBOX_ASSERT(space >= 0);
+@@ -4555,7 +4555,7 @@ template<int DIM> void VisItDataWriter<DIM>::HDFputDoubleArray2D(
+ #endif
+    herr_t errf;
+    if ((nelements0 > 0) && (nelements1 > 0)) {
+-      hsize_t dim[] = {nelements0, nelements1};
++      hsize_t dim[] = {static_cast<hsize_t>(nelements0), static_cast<hsize_t>(nelements1)};
+       hid_t space = H5Screate_simple(2, dim, NULL);
+ #ifdef DEBUG_CHECK_ASSERTIONS
+       TBOX_ASSERT(space >= 0);
+diff --git a/include/VisItDataWriter.h b/include/VisItDataWriter.h
+index 78c37a2..4de1a5d 100644
+--- a/include/VisItDataWriter.h
++++ b/include/VisItDataWriter.h
+@@ -218,7 +218,7 @@ public:
+     *
+     * The destructor for the writer does nothing interesting.
+     */
+-   virtual ~VisItDataWriter<DIM>();
++   virtual ~VisItDataWriter();
+ 
+    /*!
+     * @brief This method sets the default data writer to use for derived
+diff --git a/include/VisMaterialsDataStrategy.h b/include/VisMaterialsDataStrategy.h
+index c8b3d3e..917f408 100644
+--- a/include/VisMaterialsDataStrategy.h
++++ b/include/VisMaterialsDataStrategy.h
+@@ -63,7 +63,7 @@ public:
+    /*!
+     * @brief Destructor for VisMaterialsDataStrategy<DIM>.
+     */
+-   virtual ~VisMaterialsDataStrategy<DIM>();
++   virtual ~VisMaterialsDataStrategy();
+ 
+    /*!
+     * @brief Enumerated type for the allowable return values
+diff --git a/include/tbox/SAMRAI_MPI.h b/include/tbox/SAMRAI_MPI.h
+index 016e684..d31a2cc 100644
+--- a/include/tbox/SAMRAI_MPI.h
++++ b/include/tbox/SAMRAI_MPI.h
+@@ -11,29 +11,9 @@
+ #define included_tbox_SAMRAI_MPI
+ 
+ #include "SAMRAI_config.h"
+-#ifdef HAVE_MPI
+-#ifndef included_mpi
+-#define included_mpi
+-
+-/*
+- * Prevent inclusion of mpi C++ bindings in mpi.h includes
+- */
+-#ifndef MPI_NO_CPPBIND
+-#define MPI_NO_CPPBIND
+-#endif
+-
+-#ifndef MPICH_SKIP_MPICXX
+-#define MPICH_SKIP_MPICXX
+-#endif
+-
+-#ifndef OMPI_SKIP_MPICXX
+-#define OMPI_SKIP_MPICXX
+-#endif
+ 
+-#include "mpi.h"
++#include <mpi.h>
+ 
+-#endif
+-#endif
+ #include "tbox/Complex.h"
+ 
+ #include "tbox/Utilities.h"
+diff --git a/source/algorithm/femutils/locally_active/LocallyActiveDataPatchBoundaryEdgeSum.h b/source/algorithm/femutils/locally_active/LocallyActiveDataPatchBoundaryEdgeSum.h
+index de3a5d9..270842c 100644
+--- a/source/algorithm/femutils/locally_active/LocallyActiveDataPatchBoundaryEdgeSum.h
++++ b/source/algorithm/femutils/locally_active/LocallyActiveDataPatchBoundaryEdgeSum.h
+@@ -109,7 +109,7 @@ public:
+    /*!
+     *  @brief Destructor for the schedule releases all internal storage.
+     */
+-   ~LocallyActiveDataPatchBoundaryEdgeSum<DIM>();
++   ~LocallyActiveDataPatchBoundaryEdgeSum();
+ 
+    /*!
+     *  @brief Register edge data with given patch data identifier for summing.
+diff --git a/source/algorithm/femutils/locally_active/LocallyActiveDataPatchBoundaryNodeSum.h b/source/algorithm/femutils/locally_active/LocallyActiveDataPatchBoundaryNodeSum.h
+index 86a14b0..ffd5942 100644
+--- a/source/algorithm/femutils/locally_active/LocallyActiveDataPatchBoundaryNodeSum.h
++++ b/source/algorithm/femutils/locally_active/LocallyActiveDataPatchBoundaryNodeSum.h
+@@ -115,7 +115,7 @@ public:
+    /*!
+     *  @brief Destructor for the schedule releases all internal storage.
+     */
+-   ~LocallyActiveDataPatchBoundaryNodeSum<DIM>();
++   ~LocallyActiveDataPatchBoundaryNodeSum();
+ 
+    /*!
+     *  @brief Register node data with given patch data identifier for summing.
+diff --git a/source/algorithm/femutils/standard/MblkPatchBoundaryNodeSum.h b/source/algorithm/femutils/standard/MblkPatchBoundaryNodeSum.h
+index f8fe91d..009ebae 100644
+--- a/source/algorithm/femutils/standard/MblkPatchBoundaryNodeSum.h
++++ b/source/algorithm/femutils/standard/MblkPatchBoundaryNodeSum.h
+@@ -89,7 +89,7 @@ public:
+    /*!
+     *  @brief Destructor for the schedule releases all internal storage.
+     */
+-   ~MblkPatchBoundaryNodeSum<DIM>();
++   ~MblkPatchBoundaryNodeSum();
+ 
+    /*!
+     *  @brief Register node data with given patch data identifier for summing.
+diff --git a/source/algorithm/femutils/standard/OuteredgeSumTransaction.h b/source/algorithm/femutils/standard/OuteredgeSumTransaction.h
+index 2d2eac6..a0ee98e 100644
+--- a/source/algorithm/femutils/standard/OuteredgeSumTransaction.h
++++ b/source/algorithm/femutils/standard/OuteredgeSumTransaction.h
+@@ -99,7 +99,7 @@ public:
+     * The virtual destructor for the copy transaction releases all
+     * memory associated with the transaction.
+     */
+-   virtual ~OuteredgeSumTransaction<DIM>();
++   virtual ~OuteredgeSumTransaction();
+ 
+    /*!
+     * Return a boolean indicating whether this transaction can estimate
+diff --git a/source/algorithm/femutils/standard/OuternodeSumTransaction.h b/source/algorithm/femutils/standard/OuternodeSumTransaction.h
+index 6f5d523..5a0fa10 100644
+--- a/source/algorithm/femutils/standard/OuternodeSumTransaction.h
++++ b/source/algorithm/femutils/standard/OuternodeSumTransaction.h
+@@ -95,7 +95,7 @@ public:
+     * The virtual destructor for the copy transaction releases all
+     * memory associated with the transaction.
+     */
+-   virtual ~OuternodeSumTransaction<DIM>();
++   virtual ~OuternodeSumTransaction();
+ 
+    /*!
+     * Return a boolean indicating whether this transaction can estimate
+diff --git a/source/algorithm/femutils/standard/PatchBoundaryEdgeSum.h b/source/algorithm/femutils/standard/PatchBoundaryEdgeSum.h
+index b7de597..493e69b 100644
+--- a/source/algorithm/femutils/standard/PatchBoundaryEdgeSum.h
++++ b/source/algorithm/femutils/standard/PatchBoundaryEdgeSum.h
+@@ -106,7 +106,7 @@ public:
+    /*!
+     *  @brief Destructor for the schedule releases all internal storage.
+     */
+-   ~PatchBoundaryEdgeSum<DIM>();
++   ~PatchBoundaryEdgeSum();
+ 
+    /*!
+     *  @brief Register edge data with given patch data identifier for summing.
+diff --git a/source/algorithm/femutils/standard/PatchBoundaryNodeSum.h b/source/algorithm/femutils/standard/PatchBoundaryNodeSum.h
+index 626d82f..9ba9d27 100644
+--- a/source/algorithm/femutils/standard/PatchBoundaryNodeSum.h
++++ b/source/algorithm/femutils/standard/PatchBoundaryNodeSum.h
+@@ -113,7 +113,7 @@ public:
+    /*!
+     *  @brief Destructor for the schedule releases all internal storage.
+     */
+-   ~PatchBoundaryNodeSum<DIM>();
++   ~PatchBoundaryNodeSum();
+ 
+    /*!
+     *  @brief Register node data with given patch data identifier for summing.
+diff --git a/source/algorithm/hyperbolic/HyperbolicLevelIntegrator.h b/source/algorithm/hyperbolic/HyperbolicLevelIntegrator.h
+index 1d6f2f3..8652595 100644
+--- a/source/algorithm/hyperbolic/HyperbolicLevelIntegrator.h
++++ b/source/algorithm/hyperbolic/HyperbolicLevelIntegrator.h
+@@ -218,7 +218,7 @@ public:
+     * The destructor for HyperbolicLevelIntegrator<DIM> unregisters 
+     * the integrator object with the restart manager when so registered.
+     */
+-   virtual ~HyperbolicLevelIntegrator<DIM>();
++   virtual ~HyperbolicLevelIntegrator();
+ 
+    /**
+     * Initialize level integrator by by setting the number of time levels 
+diff --git a/source/algorithm/hyperbolic/HyperbolicPatchStrategy.h b/source/algorithm/hyperbolic/HyperbolicPatchStrategy.h
+index 99b20d4..bdbaf54 100644
+--- a/source/algorithm/hyperbolic/HyperbolicPatchStrategy.h
++++ b/source/algorithm/hyperbolic/HyperbolicPatchStrategy.h
+@@ -71,7 +71,7 @@ public:
+    /**
+     * Virtual destructor for HyperbolicPatchStrategy<DIM>.
+     */
+-   virtual ~HyperbolicPatchStrategy<DIM>();
++   virtual ~HyperbolicPatchStrategy();
+ 
+    /**
+     * Register specific variables needed in the numerical routines with the 
+diff --git a/source/algorithm/implicit/ImplicitEquationStrategy.h b/source/algorithm/implicit/ImplicitEquationStrategy.h
+index baf518e..a0a7a6d 100644
+--- a/source/algorithm/implicit/ImplicitEquationStrategy.h
++++ b/source/algorithm/implicit/ImplicitEquationStrategy.h
+@@ -47,7 +47,7 @@ public:
+    /**
+     * Empty destructor for ImplicitEquationStrategy<DIM>
+     */
+-   virtual ~ImplicitEquationStrategy<DIM>();
++   virtual ~ImplicitEquationStrategy();
+ 
+    /**
+     * Add components to the solution vector to define the state of the 
+diff --git a/source/algorithm/implicit/ImplicitIntegrator.h b/source/algorithm/implicit/ImplicitIntegrator.h
+index 1a63b69..a1e60f2 100644
+--- a/source/algorithm/implicit/ImplicitIntegrator.h
++++ b/source/algorithm/implicit/ImplicitIntegrator.h
+@@ -93,7 +93,7 @@ public:
+    /**
+     * Empty destructor for ImplicitIntegrator<DIM>
+     */
+-   virtual ~ImplicitIntegrator<DIM>();
++   virtual ~ImplicitIntegrator();
+ 
+    /**
+     * Initialize state of time integrator.  This includes creating
+diff --git a/source/algorithm/method_of_lines/MethodOfLinesIntegrator.h b/source/algorithm/method_of_lines/MethodOfLinesIntegrator.h
+index d0cc31b..21d741d 100644
+--- a/source/algorithm/method_of_lines/MethodOfLinesIntegrator.h
++++ b/source/algorithm/method_of_lines/MethodOfLinesIntegrator.h
+@@ -152,7 +152,7 @@ public:
+     * The destructor for MethodOfLinesIntegrator<DIM> unregisters
+     * the integrator object with the restart manager when so registered.
+     */
+-   virtual ~MethodOfLinesIntegrator<DIM>();
++   virtual ~MethodOfLinesIntegrator();
+ 
+    /*!
+     * Initialize integrator by setting the number of time levels
+diff --git a/source/algorithm/method_of_lines/MethodOfLinesPatchStrategy.h b/source/algorithm/method_of_lines/MethodOfLinesPatchStrategy.h
+index d121ec1..e9ea5dd 100644
+--- a/source/algorithm/method_of_lines/MethodOfLinesPatchStrategy.h
++++ b/source/algorithm/method_of_lines/MethodOfLinesPatchStrategy.h
+@@ -61,7 +61,7 @@ public:
+    /*!
+     * Virtual destructor for MethodOfLinesPatchStrategy<DIM>.
+     */
+-   virtual ~MethodOfLinesPatchStrategy<DIM>() = 0;
++   virtual ~MethodOfLinesPatchStrategy() = 0;
+ 
+    /*!
+     * Register variables specific to the problem to be solved with the 
+diff --git a/source/algorithm/templates/EmptyAlgorithmX.C b/source/algorithm/templates/EmptyAlgorithmX.C
+index 9b9795d..98e1e1a 100644
+--- a/source/algorithm/templates/EmptyAlgorithmX.C
++++ b/source/algorithm/templates/EmptyAlgorithmX.C
+@@ -14,6 +14,12 @@
+ namespace SAMRAI {
+    namespace algs {
+       template<int DIM> class Empty {
++	 Empty() :
++	    something(0) 
++	 {
++	 }
++
++	 int something;
+       };
+ 
+       template class Empty< NDIM >;
+diff --git a/source/algorithm/time_refinement/TimeRefinementIntegrator.h b/source/algorithm/time_refinement/TimeRefinementIntegrator.h
+index 64a3a97..eb6bab0 100644
+--- a/source/algorithm/time_refinement/TimeRefinementIntegrator.h
++++ b/source/algorithm/time_refinement/TimeRefinementIntegrator.h
+@@ -183,7 +183,7 @@ public:
+     * The destructor for TimeRefinementIntegrator<DIM> unregisters 
+     * the integrator object with the restart manager when so registered.
+     */
+-   ~TimeRefinementIntegrator<DIM>();
++   ~TimeRefinementIntegrator();
+ 
+    /*!
+     * Set AMR patch hierarchy configuration and data at start of simulation.
+diff --git a/source/algorithm/time_refinement/TimeRefinementLevelStrategy.h b/source/algorithm/time_refinement/TimeRefinementLevelStrategy.h
+index a829869..38b6215 100644
+--- a/source/algorithm/time_refinement/TimeRefinementLevelStrategy.h
++++ b/source/algorithm/time_refinement/TimeRefinementLevelStrategy.h
+@@ -65,7 +65,7 @@ public:
+    /**
+     * Virtual destructor for TimeRefinementLevelStrategy<DIM>.
+     */
+-   virtual ~TimeRefinementLevelStrategy<DIM>();
++   virtual ~TimeRefinementLevelStrategy();
+ 
+    /**
+     * Initialize the state of the integrator that performs time 
+diff --git a/source/apputils/embedded_boundary/CubesPatchInterface.C b/source/apputils/embedded_boundary/CubesPatchInterface.C
+index 874be27..1d4d9bc 100644
+--- a/source/apputils/embedded_boundary/CubesPatchInterface.C
++++ b/source/apputils/embedded_boundary/CubesPatchInterface.C
+@@ -64,7 +64,7 @@ CubesPatchInterface<DIM>::CubesPatchInterface(
+ *******************************************************************
+ */
+ template<int DIM> 
+-CubesPatchInterface<DIM>::~CubesPatchInterface<DIM>()
++CubesPatchInterface<DIM>::~CubesPatchInterface()
+ {
+ 
+ }
+diff --git a/source/apputils/embedded_boundary/ElevenPatchInterface.C b/source/apputils/embedded_boundary/ElevenPatchInterface.C
+index ff62834..8433dd4 100644
+--- a/source/apputils/embedded_boundary/ElevenPatchInterface.C
++++ b/source/apputils/embedded_boundary/ElevenPatchInterface.C
+@@ -56,7 +56,7 @@ ElevenPatchInterface<DIM>::ElevenPatchInterface(
+ *******************************************************************
+ */
+ template<int DIM> 
+-ElevenPatchInterface<DIM>::~ElevenPatchInterface<DIM>()
++ElevenPatchInterface<DIM>::~ElevenPatchInterface()
+ {
+   
+ }
+diff --git a/source/apputils/embedded_boundary/EmbeddedBoundaryGeometry.C b/source/apputils/embedded_boundary/EmbeddedBoundaryGeometry.C
+index cd81f85..f48513d 100755
+--- a/source/apputils/embedded_boundary/EmbeddedBoundaryGeometry.C
++++ b/source/apputils/embedded_boundary/EmbeddedBoundaryGeometry.C
+@@ -324,7 +324,7 @@ EmbeddedBoundaryGeometry<DIM>::EmbeddedBoundaryGeometry(
+ */
+ 
+ template<int DIM> 
+-EmbeddedBoundaryGeometry<DIM>::~EmbeddedBoundaryGeometry<DIM>()
++EmbeddedBoundaryGeometry<DIM>::~EmbeddedBoundaryGeometry()
+ {
+ }
+ 
+diff --git a/source/apputils/embedded_boundary/EmbeddedBoundaryShape.C b/source/apputils/embedded_boundary/EmbeddedBoundaryShape.C
+index 92a0670..2135bca 100644
+--- a/source/apputils/embedded_boundary/EmbeddedBoundaryShape.C
++++ b/source/apputils/embedded_boundary/EmbeddedBoundaryShape.C
+@@ -33,7 +33,7 @@ template<int DIM> EmbeddedBoundaryShape<DIM>::EmbeddedBoundaryShape()
+ {
+ }
+ 
+-template<int DIM> EmbeddedBoundaryShape<DIM>::~EmbeddedBoundaryShape<DIM>()
++template<int DIM> EmbeddedBoundaryShape<DIM>::~EmbeddedBoundaryShape()
+ {   
+ }
+ 
+diff --git a/source/apputils/embedded_boundary/EmbeddedBoundaryShapePolygon.C b/source/apputils/embedded_boundary/EmbeddedBoundaryShapePolygon.C
+index 2e94042..e18aad2 100644
+--- a/source/apputils/embedded_boundary/EmbeddedBoundaryShapePolygon.C
++++ b/source/apputils/embedded_boundary/EmbeddedBoundaryShapePolygon.C
+@@ -39,7 +39,7 @@ EmbeddedBoundaryShapePolygon<DIM>::EmbeddedBoundaryShapePolygon(
+ }
+ 
+ template<int DIM>      
+-EmbeddedBoundaryShapePolygon<DIM>::~EmbeddedBoundaryShapePolygon<DIM>()
++EmbeddedBoundaryShapePolygon<DIM>::~EmbeddedBoundaryShapePolygon()
+ {  
+ }
+ 
+diff --git a/source/apputils/embedded_boundary/EmbeddedBoundaryShapeSphere.h b/source/apputils/embedded_boundary/EmbeddedBoundaryShapeSphere.h
+index 0f9664c..f2c0b62 100644
+--- a/source/apputils/embedded_boundary/EmbeddedBoundaryShapeSphere.h
++++ b/source/apputils/embedded_boundary/EmbeddedBoundaryShapeSphere.h
+@@ -62,7 +62,7 @@ public:
+    /*!
+     * The destructor does nothing.
+     */
+-   ~EmbeddedBoundaryShapeSphere<DIM>();
++   ~EmbeddedBoundaryShapeSphere();
+ 
+    /*!
+     * Concrete implementation of the isInside() method defined by the
+diff --git a/source/apputils/plotting/CartesianVizamraiDataWriter.h b/source/apputils/plotting/CartesianVizamraiDataWriter.h
+index 61dc830..2c29ab1 100644
+--- a/source/apputils/plotting/CartesianVizamraiDataWriter.h
++++ b/source/apputils/plotting/CartesianVizamraiDataWriter.h
+@@ -143,7 +143,7 @@ public:
+    /*!
+     * The destructor for the writer does nothing interesting.
+     */
+-   virtual ~CartesianVizamraiDataWriter<DIM>();
++   virtual ~CartesianVizamraiDataWriter();
+ 
+    /*!
+     * Set the finest hierarchy level to write to a Vizamrai file. 
+diff --git a/source/apputils/plotting/VisDerivedDataStrategy.h b/source/apputils/plotting/VisDerivedDataStrategy.h
+index 668b391..418e505 100644
+--- a/source/apputils/plotting/VisDerivedDataStrategy.h
++++ b/source/apputils/plotting/VisDerivedDataStrategy.h
+@@ -67,7 +67,7 @@ public:
+    /*!
+     * @brief Destructor for VisDerivedDataStrategy<DIM>.
+     */
+-   virtual ~VisDerivedDataStrategy<DIM>();
++   virtual ~VisDerivedDataStrategy();
+ 
+    /*!
+     * @brief This function calculates and packs derived
+diff --git a/source/apputils/plotting/VisItDataWriter.C b/source/apputils/plotting/VisItDataWriter.C
+index edf7d77..b050436 100644
+--- a/source/apputils/plotting/VisItDataWriter.C
++++ b/source/apputils/plotting/VisItDataWriter.C
+@@ -4481,7 +4481,7 @@ template<int DIM> void VisItDataWriter<DIM>::HDFputIntegerArray2D(
+ #endif
+    herr_t errf;
+    if ((nelements0 > 0) && (nelements1 > 0)) {
+-      hsize_t dim[] = {nelements0, nelements1};
++      hsize_t dim[] = {static_cast<hsize_t>(nelements0), static_cast<hsize_t>(nelements1)};
+       hid_t space = H5Screate_simple(2, dim, NULL);
+ #ifdef DEBUG_CHECK_ASSERTIONS
+       TBOX_ASSERT(space >= 0);
+@@ -4555,7 +4555,7 @@ template<int DIM> void VisItDataWriter<DIM>::HDFputDoubleArray2D(
+ #endif
+    herr_t errf;
+    if ((nelements0 > 0) && (nelements1 > 0)) {
+-      hsize_t dim[] = {nelements0, nelements1};
++      hsize_t dim[] = {static_cast<hsize_t>(nelements0), static_cast<hsize_t>(nelements1)};
+       hid_t space = H5Screate_simple(2, dim, NULL);
+ #ifdef DEBUG_CHECK_ASSERTIONS
+       TBOX_ASSERT(space >= 0);
+diff --git a/source/apputils/plotting/VisItDataWriter.h b/source/apputils/plotting/VisItDataWriter.h
+index 78c37a2..4de1a5d 100644
+--- a/source/apputils/plotting/VisItDataWriter.h
++++ b/source/apputils/plotting/VisItDataWriter.h
+@@ -218,7 +218,7 @@ public:
+     *
+     * The destructor for the writer does nothing interesting.
+     */
+-   virtual ~VisItDataWriter<DIM>();
++   virtual ~VisItDataWriter();
+ 
+    /*!
+     * @brief This method sets the default data writer to use for derived
+diff --git a/source/apputils/plotting/VisMaterialsDataStrategy.h b/source/apputils/plotting/VisMaterialsDataStrategy.h
+index c8b3d3e..917f408 100644
+--- a/source/apputils/plotting/VisMaterialsDataStrategy.h
++++ b/source/apputils/plotting/VisMaterialsDataStrategy.h
+@@ -63,7 +63,7 @@ public:
+    /*!
+     * @brief Destructor for VisMaterialsDataStrategy<DIM>.
+     */
+-   virtual ~VisMaterialsDataStrategy<DIM>();
++   virtual ~VisMaterialsDataStrategy();
+ 
+    /*!
+     * @brief Enumerated type for the allowable return values
+diff --git a/source/apputils/templates/EmptyAppUtilsX.C b/source/apputils/templates/EmptyAppUtilsX.C
+index 93fd14d..995382a 100644
+--- a/source/apputils/templates/EmptyAppUtilsX.C
++++ b/source/apputils/templates/EmptyAppUtilsX.C
+@@ -14,6 +14,12 @@
+ namespace SAMRAI {
+    namespace appu {
+       template<int DIM> class Empty {
++	 Empty() :
++	    something(0) 
++	 {
++	 }
++
++	 int something;
+       };
+ 
+       template class Empty< NDIM >;
+diff --git a/source/geometry/cartesian/grid_geom/CartesianGridGeometry.C b/source/geometry/cartesian/grid_geom/CartesianGridGeometry.C
+index 5bf05f5..21627ca 100644
+--- a/source/geometry/cartesian/grid_geom/CartesianGridGeometry.C
++++ b/source/geometry/cartesian/grid_geom/CartesianGridGeometry.C
+@@ -349,7 +349,7 @@ template<int DIM> void CartesianGridGeometry<DIM>::setGeometryData(
+       d_x_up[id] = x_up[id];
+    }
+ 
+-   setPhysicalDomain(domain);
++   this->setPhysicalDomain(domain);
+ 
+    hier::Box<DIM> bigbox;
+    for (int k =0 ; k < this -> getPhysicalDomain().getNumberOfBoxes(); k++)
+@@ -380,32 +380,32 @@ template<int DIM> void CartesianGridGeometry<DIM>::makeStandardOperators()
+     * Standard spatial coarsening operators.
+     */
+ 
+-   addSpatialCoarsenOperator(new CartesianCellComplexWeightedAverage<DIM>());
+-   addSpatialCoarsenOperator(new CartesianEdgeComplexWeightedAverage<DIM>());
+-   addSpatialCoarsenOperator(new CartesianFaceComplexWeightedAverage<DIM>());
+-   addSpatialCoarsenOperator(new pdat::NodeComplexInjection<DIM>());
+-   addSpatialCoarsenOperator(new CartesianOuterfaceComplexWeightedAverage<DIM>());
+-   addSpatialCoarsenOperator(new CartesianSideComplexWeightedAverage<DIM>());
+-
+-   addSpatialRefineOperator(new pdat::CellComplexConstantRefine<DIM>());
+-   addSpatialRefineOperator(new CartesianCellComplexLinearRefine<DIM>());
+-   addSpatialRefineOperator(new pdat::EdgeComplexConstantRefine<DIM>());
+-   addSpatialRefineOperator(new pdat::FaceComplexConstantRefine<DIM>());
+-   addSpatialRefineOperator(new CartesianNodeComplexLinearRefine<DIM>());
+-   addSpatialRefineOperator(new pdat::OuterfaceComplexConstantRefine<DIM>());
+-   addSpatialRefineOperator(new pdat::SideComplexConstantRefine<DIM>());
++   this->addSpatialCoarsenOperator(new CartesianCellComplexWeightedAverage<DIM>());
++   this->addSpatialCoarsenOperator(new CartesianEdgeComplexWeightedAverage<DIM>());
++   this->addSpatialCoarsenOperator(new CartesianFaceComplexWeightedAverage<DIM>());
++   this->addSpatialCoarsenOperator(new pdat::NodeComplexInjection<DIM>());
++   this->addSpatialCoarsenOperator(new CartesianOuterfaceComplexWeightedAverage<DIM>());
++   this->addSpatialCoarsenOperator(new CartesianSideComplexWeightedAverage<DIM>());
++
++   this->addSpatialRefineOperator(new pdat::CellComplexConstantRefine<DIM>());
++   this->addSpatialRefineOperator(new CartesianCellComplexLinearRefine<DIM>());
++   this->addSpatialRefineOperator(new pdat::EdgeComplexConstantRefine<DIM>());
++   this->addSpatialRefineOperator(new pdat::FaceComplexConstantRefine<DIM>());
++   this->addSpatialRefineOperator(new CartesianNodeComplexLinearRefine<DIM>());
++   this->addSpatialRefineOperator(new pdat::OuterfaceComplexConstantRefine<DIM>());
++   this->addSpatialRefineOperator(new pdat::SideComplexConstantRefine<DIM>());
+ 
+    /*
+     * Standard linear time interpolation operators.
+     */
+ 
+-   addTimeInterpolateOperator(new pdat::CellComplexLinearTimeInterpolateOp<DIM>());
+-   addTimeInterpolateOperator(new pdat::EdgeComplexLinearTimeInterpolateOp<DIM>());
+-   addTimeInterpolateOperator(new pdat::FaceComplexLinearTimeInterpolateOp<DIM>());
+-   addTimeInterpolateOperator(new pdat::NodeComplexLinearTimeInterpolateOp<DIM>());
+-   addTimeInterpolateOperator(new pdat::OuterfaceComplexLinearTimeInterpolateOp<DIM>());
+-   addTimeInterpolateOperator(new pdat::OutersideComplexLinearTimeInterpolateOp<DIM>());
+-   addTimeInterpolateOperator(new pdat::SideComplexLinearTimeInterpolateOp<DIM>());
++   this->addTimeInterpolateOperator(new pdat::CellComplexLinearTimeInterpolateOp<DIM>());
++   this->addTimeInterpolateOperator(new pdat::EdgeComplexLinearTimeInterpolateOp<DIM>());
++   this->addTimeInterpolateOperator(new pdat::FaceComplexLinearTimeInterpolateOp<DIM>());
++   this->addTimeInterpolateOperator(new pdat::NodeComplexLinearTimeInterpolateOp<DIM>());
++   this->addTimeInterpolateOperator(new pdat::OuterfaceComplexLinearTimeInterpolateOp<DIM>());
++   this->addTimeInterpolateOperator(new pdat::OutersideComplexLinearTimeInterpolateOp<DIM>());
++   this->addTimeInterpolateOperator(new pdat::SideComplexLinearTimeInterpolateOp<DIM>());
+ #endif
+ 
+ #ifdef HAVE_FLOAT
+@@ -413,85 +413,85 @@ template<int DIM> void CartesianGridGeometry<DIM>::makeStandardOperators()
+     * Standard spatial coarsening operators.
+     */
+ 
+-   addSpatialCoarsenOperator(new CartesianCellFloatWeightedAverage<DIM>());
+-   addSpatialCoarsenOperator(new CartesianEdgeFloatWeightedAverage<DIM>());
+-   addSpatialCoarsenOperator(new CartesianFaceFloatWeightedAverage<DIM>());
+-   addSpatialCoarsenOperator(new pdat::NodeFloatInjection<DIM>());
+-   addSpatialCoarsenOperator(new CartesianOuterfaceFloatWeightedAverage<DIM>());
+-   addSpatialCoarsenOperator(new CartesianSideFloatWeightedAverage<DIM>());
++   this->addSpatialCoarsenOperator(new CartesianCellFloatWeightedAverage<DIM>());
++   this->addSpatialCoarsenOperator(new CartesianEdgeFloatWeightedAverage<DIM>());
++   this->addSpatialCoarsenOperator(new CartesianFaceFloatWeightedAverage<DIM>());
++   this->addSpatialCoarsenOperator(new pdat::NodeFloatInjection<DIM>());
++   this->addSpatialCoarsenOperator(new CartesianOuterfaceFloatWeightedAverage<DIM>());
++   this->addSpatialCoarsenOperator(new CartesianSideFloatWeightedAverage<DIM>());
+ 
+    /*
+     * Standard spatial refining operators.
+     */
+ 
+-   addSpatialRefineOperator(new CartesianCellFloatConservativeLinearRefine<DIM>());
+-   addSpatialRefineOperator(new CartesianEdgeFloatConservativeLinearRefine<DIM>());
+-   addSpatialRefineOperator(new pdat::EdgeFloatConstantRefine<DIM>());
+-   addSpatialRefineOperator(new pdat::CellFloatConstantRefine<DIM>());
+-   addSpatialRefineOperator(new CartesianCellFloatLinearRefine<DIM>());
+-   addSpatialRefineOperator(new CartesianFaceFloatConservativeLinearRefine<DIM>());
+-   addSpatialRefineOperator(new CartesianNodeFloatLinearRefine<DIM>());
+-   addSpatialRefineOperator(new pdat::FaceFloatConstantRefine<DIM>());
+-   addSpatialRefineOperator(new pdat::OuterfaceFloatConstantRefine<DIM>());
+-   addSpatialRefineOperator(new pdat::OuterfaceIntegerConstantRefine<DIM>());
+-   addSpatialRefineOperator(new CartesianSideFloatConservativeLinearRefine<DIM>());
+-   addSpatialRefineOperator(new pdat::SideFloatConstantRefine<DIM>());
++   this->addSpatialRefineOperator(new CartesianCellFloatConservativeLinearRefine<DIM>());
++   this->addSpatialRefineOperator(new CartesianEdgeFloatConservativeLinearRefine<DIM>());
++   this->addSpatialRefineOperator(new pdat::EdgeFloatConstantRefine<DIM>());
++   this->addSpatialRefineOperator(new pdat::CellFloatConstantRefine<DIM>());
++   this->addSpatialRefineOperator(new CartesianCellFloatLinearRefine<DIM>());
++   this->addSpatialRefineOperator(new CartesianFaceFloatConservativeLinearRefine<DIM>());
++   this->addSpatialRefineOperator(new CartesianNodeFloatLinearRefine<DIM>());
++   this->addSpatialRefineOperator(new pdat::FaceFloatConstantRefine<DIM>());
++   this->addSpatialRefineOperator(new pdat::OuterfaceFloatConstantRefine<DIM>());
++   this->addSpatialRefineOperator(new pdat::OuterfaceIntegerConstantRefine<DIM>());
++   this->addSpatialRefineOperator(new CartesianSideFloatConservativeLinearRefine<DIM>());
++   this->addSpatialRefineOperator(new pdat::SideFloatConstantRefine<DIM>());
+ 
+    /*
+     * Standard linear time interpolation operators.
+     */
+ 
+-   addTimeInterpolateOperator(new pdat::CellFloatLinearTimeInterpolateOp<DIM>());
+-   addTimeInterpolateOperator(new pdat::EdgeFloatLinearTimeInterpolateOp<DIM>());
+-   addTimeInterpolateOperator(new pdat::FaceFloatLinearTimeInterpolateOp<DIM>());
+-   addTimeInterpolateOperator(new pdat::NodeFloatLinearTimeInterpolateOp<DIM>());
+-   addTimeInterpolateOperator(new pdat::OuterfaceFloatLinearTimeInterpolateOp<DIM>());
+-   addTimeInterpolateOperator(new pdat::OutersideFloatLinearTimeInterpolateOp<DIM>());
+-   addTimeInterpolateOperator(new pdat::SideFloatLinearTimeInterpolateOp<DIM>());
++   this->addTimeInterpolateOperator(new pdat::CellFloatLinearTimeInterpolateOp<DIM>());
++   this->addTimeInterpolateOperator(new pdat::EdgeFloatLinearTimeInterpolateOp<DIM>());
++   this->addTimeInterpolateOperator(new pdat::FaceFloatLinearTimeInterpolateOp<DIM>());
++   this->addTimeInterpolateOperator(new pdat::NodeFloatLinearTimeInterpolateOp<DIM>());
++   this->addTimeInterpolateOperator(new pdat::OuterfaceFloatLinearTimeInterpolateOp<DIM>());
++   this->addTimeInterpolateOperator(new pdat::OutersideFloatLinearTimeInterpolateOp<DIM>());
++   this->addTimeInterpolateOperator(new pdat::SideFloatLinearTimeInterpolateOp<DIM>());
+ #endif
+ 
+    /*
+     * Standard spatial coarsening operators.
+     */
+-   addSpatialCoarsenOperator(new CartesianCellDoubleWeightedAverage<DIM>());
+-   addSpatialCoarsenOperator(new CartesianEdgeDoubleWeightedAverage<DIM>());
+-   addSpatialCoarsenOperator(new CartesianFaceDoubleWeightedAverage<DIM>());
+-   addSpatialCoarsenOperator(new pdat::NodeDoubleInjection<DIM>());
+-   addSpatialCoarsenOperator(new pdat::NodeIntegerInjection<DIM>());
+-   addSpatialCoarsenOperator(new CartesianOuterfaceDoubleWeightedAverage<DIM>());
+-   addSpatialCoarsenOperator(new pdat::OuternodeDoubleConstantCoarsen<DIM>());
+-   addSpatialCoarsenOperator(new CartesianOutersideDoubleWeightedAverage<DIM>());
+-   addSpatialCoarsenOperator(new CartesianSideDoubleWeightedAverage<DIM>());
++   this->addSpatialCoarsenOperator(new CartesianCellDoubleWeightedAverage<DIM>());
++   this->addSpatialCoarsenOperator(new CartesianEdgeDoubleWeightedAverage<DIM>());
++   this->addSpatialCoarsenOperator(new CartesianFaceDoubleWeightedAverage<DIM>());
++   this->addSpatialCoarsenOperator(new pdat::NodeDoubleInjection<DIM>());
++   this->addSpatialCoarsenOperator(new pdat::NodeIntegerInjection<DIM>());
++   this->addSpatialCoarsenOperator(new CartesianOuterfaceDoubleWeightedAverage<DIM>());
++   this->addSpatialCoarsenOperator(new pdat::OuternodeDoubleConstantCoarsen<DIM>());
++   this->addSpatialCoarsenOperator(new CartesianOutersideDoubleWeightedAverage<DIM>());
++   this->addSpatialCoarsenOperator(new CartesianSideDoubleWeightedAverage<DIM>());
+ 
+    /*
+     * Standard spatial refining operators.
+     */
+-   addSpatialRefineOperator(new CartesianCellDoubleConservativeLinearRefine<DIM>());
+-   addSpatialRefineOperator(new pdat::CellDoubleConstantRefine<DIM>());
+-   addSpatialRefineOperator(new CartesianCellDoubleLinearRefine<DIM>());
+-   addSpatialRefineOperator(new CartesianEdgeDoubleConservativeLinearRefine<DIM>());
+-   addSpatialRefineOperator(new pdat::EdgeDoubleConstantRefine<DIM>());
+-   addSpatialRefineOperator(new pdat::EdgeIntegerConstantRefine<DIM>());
+-   addSpatialRefineOperator(new pdat::CellIntegerConstantRefine<DIM>());
+-   addSpatialRefineOperator(new CartesianFaceDoubleConservativeLinearRefine<DIM>());
+-   addSpatialRefineOperator(new pdat::FaceDoubleConstantRefine<DIM>());
+-   addSpatialRefineOperator(new pdat::FaceIntegerConstantRefine<DIM>());
+-   addSpatialRefineOperator(new CartesianNodeDoubleLinearRefine<DIM>());
+-   addSpatialRefineOperator(new pdat::OuterfaceDoubleConstantRefine<DIM>());
+-   addSpatialRefineOperator(new CartesianSideDoubleConservativeLinearRefine<DIM>());
+-   addSpatialRefineOperator(new pdat::SideDoubleConstantRefine<DIM>());
+-   addSpatialRefineOperator(new pdat::SideIntegerConstantRefine<DIM>());
++   this->addSpatialRefineOperator(new CartesianCellDoubleConservativeLinearRefine<DIM>());
++   this->addSpatialRefineOperator(new pdat::CellDoubleConstantRefine<DIM>());
++   this->addSpatialRefineOperator(new CartesianCellDoubleLinearRefine<DIM>());
++   this->addSpatialRefineOperator(new CartesianEdgeDoubleConservativeLinearRefine<DIM>());
++   this->addSpatialRefineOperator(new pdat::EdgeDoubleConstantRefine<DIM>());
++   this->addSpatialRefineOperator(new pdat::EdgeIntegerConstantRefine<DIM>());
++   this->addSpatialRefineOperator(new pdat::CellIntegerConstantRefine<DIM>());
++   this->addSpatialRefineOperator(new CartesianFaceDoubleConservativeLinearRefine<DIM>());
++   this->addSpatialRefineOperator(new pdat::FaceDoubleConstantRefine<DIM>());
++   this->addSpatialRefineOperator(new pdat::FaceIntegerConstantRefine<DIM>());
++   this->addSpatialRefineOperator(new CartesianNodeDoubleLinearRefine<DIM>());
++   this->addSpatialRefineOperator(new pdat::OuterfaceDoubleConstantRefine<DIM>());
++   this->addSpatialRefineOperator(new CartesianSideDoubleConservativeLinearRefine<DIM>());
++   this->addSpatialRefineOperator(new pdat::SideDoubleConstantRefine<DIM>());
++   this->addSpatialRefineOperator(new pdat::SideIntegerConstantRefine<DIM>());
+ 
+    /*
+     * Standard linear time interpolation operators.
+     */
+-   addTimeInterpolateOperator(new pdat::CellDoubleLinearTimeInterpolateOp<DIM>());
+-   addTimeInterpolateOperator(new pdat::EdgeDoubleLinearTimeInterpolateOp<DIM>());
+-   addTimeInterpolateOperator(new pdat::FaceDoubleLinearTimeInterpolateOp<DIM>());
+-   addTimeInterpolateOperator(new pdat::NodeDoubleLinearTimeInterpolateOp<DIM>());
+-   addTimeInterpolateOperator(new pdat::OuterfaceDoubleLinearTimeInterpolateOp<DIM>());
+-   addTimeInterpolateOperator(new pdat::OutersideDoubleLinearTimeInterpolateOp<DIM>());
+-   addTimeInterpolateOperator(new pdat::SideDoubleLinearTimeInterpolateOp<DIM>());
++   this->addTimeInterpolateOperator(new pdat::CellDoubleLinearTimeInterpolateOp<DIM>());
++   this->addTimeInterpolateOperator(new pdat::EdgeDoubleLinearTimeInterpolateOp<DIM>());
++   this->addTimeInterpolateOperator(new pdat::FaceDoubleLinearTimeInterpolateOp<DIM>());
++   this->addTimeInterpolateOperator(new pdat::NodeDoubleLinearTimeInterpolateOp<DIM>());
++   this->addTimeInterpolateOperator(new pdat::OuterfaceDoubleLinearTimeInterpolateOp<DIM>());
++   this->addTimeInterpolateOperator(new pdat::OutersideDoubleLinearTimeInterpolateOp<DIM>());
++   this->addTimeInterpolateOperator(new pdat::SideDoubleLinearTimeInterpolateOp<DIM>());
+ 
+ }
+ 
+@@ -628,7 +628,7 @@ template<int DIM> void CartesianGridGeometry<DIM>::putToDatabase(
+    db->putDoubleArray("d_x_lo", d_x_lo, DIM);
+    db->putDoubleArray("d_x_up", d_x_up, DIM);
+ 
+-   hier::IntVector<DIM> level0_shift = getPeriodicShift(hier::IntVector<DIM>(1));
++   hier::IntVector<DIM> level0_shift = this->getPeriodicShift(hier::IntVector<DIM>(1));
+    int* temp_shift = level0_shift;
+    db->putIntegerArray("d_periodic_shift", temp_shift, DIM);
+ 
+@@ -710,7 +710,7 @@ template<int DIM> void CartesianGridGeometry<DIM>::getFromInput(
+ 
+       setGeometryData(x_lo, x_up, domain);
+ 
+-      initializePeriodicShift(per_bc);
++      this->initializePeriodicShift(per_bc);
+ 
+    }
+ }
+@@ -752,12 +752,12 @@ template<int DIM> void CartesianGridGeometry<DIM>::getFromRestart()
+    db->getDoubleArray("d_x_lo", x_lo, DIM);
+    db->getDoubleArray("d_x_up", x_up, DIM);
+ 
+-   setGeometryData(x_lo, x_up, domain);
++   this->setGeometryData(x_lo, x_up, domain);
+ 
+    hier::IntVector<DIM> periodic_shift;
+    int* temp_shift = periodic_shift;
+    db->getIntegerArray("d_periodic_shift", temp_shift, DIM);
+-   initializePeriodicShift(periodic_shift);
++   this->initializePeriodicShift(periodic_shift);
+ 
+    d_using_original_locations = db->getBool("d_using_original_locations");
+ }
+diff --git a/source/geometry/cartesian/grid_geom/CartesianGridGeometry.h b/source/geometry/cartesian/grid_geom/CartesianGridGeometry.h
+index 83f2664..1772c43 100644
+--- a/source/geometry/cartesian/grid_geom/CartesianGridGeometry.h
++++ b/source/geometry/cartesian/grid_geom/CartesianGridGeometry.h
+@@ -153,7 +153,7 @@ public:
+     * data describing grid geometry and unregisters the object with
+     * the restart manager if previously registered.
+     */
+-   virtual ~CartesianGridGeometry<DIM>();
++   virtual ~CartesianGridGeometry();
+ 
+    
+    /**
+diff --git a/source/geometry/cartesian/operators/cell/CartesianCellComplexConservativeLinearRefine.h b/source/geometry/cartesian/operators/cell/CartesianCellComplexConservativeLinearRefine.h
+index 1c20f5d..029e4bf 100644
+--- a/source/geometry/cartesian/operators/cell/CartesianCellComplexConservativeLinearRefine.h
++++ b/source/geometry/cartesian/operators/cell/CartesianCellComplexConservativeLinearRefine.h
+@@ -54,7 +54,7 @@ public:
+    /**
+     * Uninteresting virtual destructor.
+     */
+-   virtual ~CartesianCellComplexConservativeLinearRefine<DIM>();
++   virtual ~CartesianCellComplexConservativeLinearRefine();
+ 
+    /**
+     * Return true if the variable and name string match cell-centered 
+diff --git a/source/geometry/cartesian/operators/cell/CartesianCellComplexLinearRefine.h b/source/geometry/cartesian/operators/cell/CartesianCellComplexLinearRefine.h
+index 1b60eea..11e2a36 100644
+--- a/source/geometry/cartesian/operators/cell/CartesianCellComplexLinearRefine.h
++++ b/source/geometry/cartesian/operators/cell/CartesianCellComplexLinearRefine.h
+@@ -49,7 +49,7 @@ public:
+    /**
+     * Uninteresting virtual destructor.
+     */
+-   virtual ~CartesianCellComplexLinearRefine<DIM>();
++   virtual ~CartesianCellComplexLinearRefine();
+ 
+    /**
+     * Return true if the variable and name string match cell-centered 
+diff --git a/source/geometry/cartesian/operators/cell/CartesianCellComplexWeightedAverage.h b/source/geometry/cartesian/operators/cell/CartesianCellComplexWeightedAverage.h
+index 09ce951..eba6985 100644
+--- a/source/geometry/cartesian/operators/cell/CartesianCellComplexWeightedAverage.h
++++ b/source/geometry/cartesian/operators/cell/CartesianCellComplexWeightedAverage.h
+@@ -49,7 +49,7 @@ public:
+    /**
+     * Uninteresting virtual destructor.
+     */
+-   virtual ~CartesianCellComplexWeightedAverage<DIM>();
++   virtual ~CartesianCellComplexWeightedAverage();
+ 
+    /**
+     * Return true if the variable and name string match cell-centered 
+diff --git a/source/geometry/cartesian/operators/cell/CartesianCellDoubleConservativeLinearRefine.h b/source/geometry/cartesian/operators/cell/CartesianCellDoubleConservativeLinearRefine.h
+index 63ccbdb..506dfcd 100644
+--- a/source/geometry/cartesian/operators/cell/CartesianCellDoubleConservativeLinearRefine.h
++++ b/source/geometry/cartesian/operators/cell/CartesianCellDoubleConservativeLinearRefine.h
+@@ -51,7 +51,7 @@ public:
+    /**
+     * Uninteresting virtual destructor.
+     */
+-   virtual ~CartesianCellDoubleConservativeLinearRefine<DIM>();
++   virtual ~CartesianCellDoubleConservativeLinearRefine();
+ 
+    /**
+     * Return true if the variable and name string match cell-centered 
+diff --git a/source/geometry/cartesian/operators/cell/CartesianCellDoubleLinearRefine.h b/source/geometry/cartesian/operators/cell/CartesianCellDoubleLinearRefine.h
+index 791c491..e4174de 100644
+--- a/source/geometry/cartesian/operators/cell/CartesianCellDoubleLinearRefine.h
++++ b/source/geometry/cartesian/operators/cell/CartesianCellDoubleLinearRefine.h
+@@ -49,7 +49,7 @@ public:
+    /**
+     * Uninteresting virtual destructor.
+     */
+-   virtual ~CartesianCellDoubleLinearRefine<DIM>();
++   virtual ~CartesianCellDoubleLinearRefine();
+ 
+    /**
+     * Return true if the variable and name string match cell-centered 
+diff --git a/source/geometry/cartesian/operators/cell/CartesianCellDoubleWeightedAverage.h b/source/geometry/cartesian/operators/cell/CartesianCellDoubleWeightedAverage.h
+index c298283..0e7c4da 100644
+--- a/source/geometry/cartesian/operators/cell/CartesianCellDoubleWeightedAverage.h
++++ b/source/geometry/cartesian/operators/cell/CartesianCellDoubleWeightedAverage.h
+@@ -49,7 +49,7 @@ public:
+    /**
+     * Uninteresting virtual destructor.
+     */
+-   virtual ~CartesianCellDoubleWeightedAverage<DIM>();
++   virtual ~CartesianCellDoubleWeightedAverage();
+ 
+    /**
+     * Return true if the variable and name string match cell-centered 
+diff --git a/source/geometry/cartesian/operators/cell/CartesianCellFloatConservativeLinearRefine.h b/source/geometry/cartesian/operators/cell/CartesianCellFloatConservativeLinearRefine.h
+index cbf27ca..2f31fa6 100644
+--- a/source/geometry/cartesian/operators/cell/CartesianCellFloatConservativeLinearRefine.h
++++ b/source/geometry/cartesian/operators/cell/CartesianCellFloatConservativeLinearRefine.h
+@@ -51,7 +51,7 @@ public:
+    /**
+     * Uninteresting virtual destructor.
+     */
+-   virtual ~CartesianCellFloatConservativeLinearRefine<DIM>();
++   virtual ~CartesianCellFloatConservativeLinearRefine();
+ 
+    /**
+     * Return true if the variable and name string match cell-centered 
+diff --git a/source/geometry/cartesian/operators/cell/CartesianCellFloatLinearRefine.h b/source/geometry/cartesian/operators/cell/CartesianCellFloatLinearRefine.h
+index 08e85a2..c752886 100644
+--- a/source/geometry/cartesian/operators/cell/CartesianCellFloatLinearRefine.h
++++ b/source/geometry/cartesian/operators/cell/CartesianCellFloatLinearRefine.h
+@@ -49,7 +49,7 @@ public:
+    /**
+     * Uninteresting virtual destructor.
+     */
+-   virtual ~CartesianCellFloatLinearRefine<DIM>();
++   virtual ~CartesianCellFloatLinearRefine();
+ 
+    /**
+     * Return true if the variable and name string match cell-centered 
+diff --git a/source/geometry/cartesian/operators/cell/CartesianCellFloatWeightedAverage.h b/source/geometry/cartesian/operators/cell/CartesianCellFloatWeightedAverage.h
+index 8532102..0f0b814 100644
+--- a/source/geometry/cartesian/operators/cell/CartesianCellFloatWeightedAverage.h
++++ b/source/geometry/cartesian/operators/cell/CartesianCellFloatWeightedAverage.h
+@@ -49,7 +49,7 @@ public:
+    /**
+     * Uninteresting virtual destructor.
+     */
+-   virtual ~CartesianCellFloatWeightedAverage<DIM>();
++   virtual ~CartesianCellFloatWeightedAverage();
+ 
+    /**
+     * Return true if the variable and name string match cell-centered 
+diff --git a/source/geometry/cartesian/operators/edge/CartesianEdgeComplexWeightedAverage.h b/source/geometry/cartesian/operators/edge/CartesianEdgeComplexWeightedAverage.h
+index 399ab28..944bf9a 100644
+--- a/source/geometry/cartesian/operators/edge/CartesianEdgeComplexWeightedAverage.h
++++ b/source/geometry/cartesian/operators/edge/CartesianEdgeComplexWeightedAverage.h
+@@ -49,7 +49,7 @@ public:
+    /**
+     * Uninteresting virtual destructor.
+     */
+-   virtual ~CartesianEdgeComplexWeightedAverage<DIM>();
++   virtual ~CartesianEdgeComplexWeightedAverage();
+ 
+    /**
+     * Return true if the variable and name string match the edge-centered 
+diff --git a/source/geometry/cartesian/operators/edge/CartesianEdgeDoubleConservativeLinearRefine.h b/source/geometry/cartesian/operators/edge/CartesianEdgeDoubleConservativeLinearRefine.h
+index 4c77d6f..010ae46 100644
+--- a/source/geometry/cartesian/operators/edge/CartesianEdgeDoubleConservativeLinearRefine.h
++++ b/source/geometry/cartesian/operators/edge/CartesianEdgeDoubleConservativeLinearRefine.h
+@@ -51,7 +51,7 @@ public:
+    /**
+     * Uninteresting virtual destructor.
+     */
+-   virtual ~CartesianEdgeDoubleConservativeLinearRefine<DIM>();
++   virtual ~CartesianEdgeDoubleConservativeLinearRefine();
+ 
+    /**
+     * Return true if the variable and name string match edge-centered 
+diff --git a/source/geometry/cartesian/operators/edge/CartesianEdgeDoubleWeightedAverage.h b/source/geometry/cartesian/operators/edge/CartesianEdgeDoubleWeightedAverage.h
+index 90162e1..b6a4b9d 100644
+--- a/source/geometry/cartesian/operators/edge/CartesianEdgeDoubleWeightedAverage.h
++++ b/source/geometry/cartesian/operators/edge/CartesianEdgeDoubleWeightedAverage.h
+@@ -49,7 +49,7 @@ public:
+    /**
+     * Uninteresting virtual destructor.
+     */
+-   virtual ~CartesianEdgeDoubleWeightedAverage<DIM>();
++   virtual ~CartesianEdgeDoubleWeightedAverage();
+ 
+    /**
+     * Return true if the variable and name string match the edge-centered 
+diff --git a/source/geometry/cartesian/operators/edge/CartesianEdgeFloatConservativeLinearRefine.h b/source/geometry/cartesian/operators/edge/CartesianEdgeFloatConservativeLinearRefine.h
+index 96b18bb..40276c1 100644
+--- a/source/geometry/cartesian/operators/edge/CartesianEdgeFloatConservativeLinearRefine.h
++++ b/source/geometry/cartesian/operators/edge/CartesianEdgeFloatConservativeLinearRefine.h
+@@ -51,7 +51,7 @@ public:
+    /**
+     * Uninteresting virtual destructor.
+     */
+-   virtual ~CartesianEdgeFloatConservativeLinearRefine<DIM>();
++   virtual ~CartesianEdgeFloatConservativeLinearRefine();
+ 
+    /**
+     * Return true if the variable and name string match edge-centered 
+diff --git a/source/geometry/cartesian/operators/edge/CartesianEdgeFloatWeightedAverage.h b/source/geometry/cartesian/operators/edge/CartesianEdgeFloatWeightedAverage.h
+index 88003c6..40dc9c3 100644
+--- a/source/geometry/cartesian/operators/edge/CartesianEdgeFloatWeightedAverage.h
++++ b/source/geometry/cartesian/operators/edge/CartesianEdgeFloatWeightedAverage.h
+@@ -49,7 +49,7 @@ public:
+    /**
+     * Uninteresting virtual destructor.
+     */
+-   virtual ~CartesianEdgeFloatWeightedAverage<DIM>();
++   virtual ~CartesianEdgeFloatWeightedAverage();
+ 
+    /**
+     * Return true if the variable and name string match the edge-centered 
+diff --git a/source/geometry/cartesian/operators/face/CartesianFaceComplexWeightedAverage.h b/source/geometry/cartesian/operators/face/CartesianFaceComplexWeightedAverage.h
+index 264796d..cacd9c2 100644
+--- a/source/geometry/cartesian/operators/face/CartesianFaceComplexWeightedAverage.h
++++ b/source/geometry/cartesian/operators/face/CartesianFaceComplexWeightedAverage.h
+@@ -48,7 +48,7 @@ public:
+    /**
+     * Uninteresting virtual destructor.
+     */
+-   virtual ~CartesianFaceComplexWeightedAverage<DIM>();
++   virtual ~CartesianFaceComplexWeightedAverage();
+ 
+    /**
+     * Return true if the variable and name string match the face-centered 
+diff --git a/source/geometry/cartesian/operators/face/CartesianFaceDoubleConservativeLinearRefine.h b/source/geometry/cartesian/operators/face/CartesianFaceDoubleConservativeLinearRefine.h
+index b846442..6e4ad55 100644
+--- a/source/geometry/cartesian/operators/face/CartesianFaceDoubleConservativeLinearRefine.h
++++ b/source/geometry/cartesian/operators/face/CartesianFaceDoubleConservativeLinearRefine.h
+@@ -51,7 +51,7 @@ public:
+    /**
+     * Uninteresting virtual destructor.
+     */
+-   virtual ~CartesianFaceDoubleConservativeLinearRefine<DIM>();
++   virtual ~CartesianFaceDoubleConservativeLinearRefine();
+ 
+    /**
+     * Return true if the variable and name string match face-centered 
+diff --git a/source/geometry/cartesian/operators/face/CartesianFaceDoubleWeightedAverage.h b/source/geometry/cartesian/operators/face/CartesianFaceDoubleWeightedAverage.h
+index 39c982b..e28491e 100644
+--- a/source/geometry/cartesian/operators/face/CartesianFaceDoubleWeightedAverage.h
++++ b/source/geometry/cartesian/operators/face/CartesianFaceDoubleWeightedAverage.h
+@@ -49,7 +49,7 @@ public:
+    /**
+     * Uninteresting virtual destructor.
+     */
+-   virtual ~CartesianFaceDoubleWeightedAverage<DIM>();
++   virtual ~CartesianFaceDoubleWeightedAverage();
+ 
+    /**
+     * Return true if the variable and name string match the face-centered 
+diff --git a/source/geometry/cartesian/operators/face/CartesianFaceFloatConservativeLinearRefine.h b/source/geometry/cartesian/operators/face/CartesianFaceFloatConservativeLinearRefine.h
+index c27096e..dcb257e 100644
+--- a/source/geometry/cartesian/operators/face/CartesianFaceFloatConservativeLinearRefine.h
++++ b/source/geometry/cartesian/operators/face/CartesianFaceFloatConservativeLinearRefine.h
+@@ -51,7 +51,7 @@ public:
+    /**
+     * Uninteresting virtual destructor.
+     */
+-   virtual ~CartesianFaceFloatConservativeLinearRefine<DIM>();
++   virtual ~CartesianFaceFloatConservativeLinearRefine();
+ 
+    /**
+     * Return true if the variable and name string match face-centered 
+diff --git a/source/geometry/cartesian/operators/face/CartesianFaceFloatWeightedAverage.h b/source/geometry/cartesian/operators/face/CartesianFaceFloatWeightedAverage.h
+index 15bdb67..5c368da 100644
+--- a/source/geometry/cartesian/operators/face/CartesianFaceFloatWeightedAverage.h
++++ b/source/geometry/cartesian/operators/face/CartesianFaceFloatWeightedAverage.h
+@@ -49,7 +49,7 @@ public:
+    /**
+     * Uninteresting virtual destructor.
+     */
+-   virtual ~CartesianFaceFloatWeightedAverage<DIM>();
++   virtual ~CartesianFaceFloatWeightedAverage();
+ 
+    /**
+     * Return true if the variable and name string match the face-centered 
+diff --git a/source/geometry/cartesian/operators/node/CartesianNodeComplexLinearRefine.h b/source/geometry/cartesian/operators/node/CartesianNodeComplexLinearRefine.h
+index c33ad95..8864a7b 100644
+--- a/source/geometry/cartesian/operators/node/CartesianNodeComplexLinearRefine.h
++++ b/source/geometry/cartesian/operators/node/CartesianNodeComplexLinearRefine.h
+@@ -49,7 +49,7 @@ public:
+    /**
+     * Uninteresting virtual destructor.
+     */
+-   virtual ~CartesianNodeComplexLinearRefine<DIM>();
++   virtual ~CartesianNodeComplexLinearRefine();
+ 
+    /**
+     * Return true if the variable and name string match node-centered 
+diff --git a/source/geometry/cartesian/operators/node/CartesianNodeDoubleLinearRefine.h b/source/geometry/cartesian/operators/node/CartesianNodeDoubleLinearRefine.h
+index b237203..ee61c0e 100644
+--- a/source/geometry/cartesian/operators/node/CartesianNodeDoubleLinearRefine.h
++++ b/source/geometry/cartesian/operators/node/CartesianNodeDoubleLinearRefine.h
+@@ -49,7 +49,7 @@ public:
+    /**
+     * Uninteresting virtual destructor.
+     */
+-   virtual ~CartesianNodeDoubleLinearRefine<DIM>();
++   virtual ~CartesianNodeDoubleLinearRefine();
+ 
+    /**
+     * Return true if the variable and name string match node-centered 
+diff --git a/source/geometry/cartesian/operators/node/CartesianNodeFloatLinearRefine.h b/source/geometry/cartesian/operators/node/CartesianNodeFloatLinearRefine.h
+index bfb9bc7..93bf126 100644
+--- a/source/geometry/cartesian/operators/node/CartesianNodeFloatLinearRefine.h
++++ b/source/geometry/cartesian/operators/node/CartesianNodeFloatLinearRefine.h
+@@ -49,7 +49,7 @@ public:
+    /**
+     * Uninteresting virtual destructor.
+     */
+-   virtual ~CartesianNodeFloatLinearRefine<DIM>();
++   virtual ~CartesianNodeFloatLinearRefine();
+ 
+    /**
+     * Return true if the variable and name string match node-centered 
+diff --git a/source/geometry/cartesian/operators/outerface/CartesianOuterfaceComplexWeightedAverage.h b/source/geometry/cartesian/operators/outerface/CartesianOuterfaceComplexWeightedAverage.h
+index c8e0cee..fe90c38 100644
+--- a/source/geometry/cartesian/operators/outerface/CartesianOuterfaceComplexWeightedAverage.h
++++ b/source/geometry/cartesian/operators/outerface/CartesianOuterfaceComplexWeightedAverage.h
+@@ -49,7 +49,7 @@ public:
+    /**
+     * Uninteresting virtual destructor.
+     */
+-   virtual ~CartesianOuterfaceComplexWeightedAverage<DIM>();
++   virtual ~CartesianOuterfaceComplexWeightedAverage();
+ 
+    /**
+     * Return true if the variable and name string match the outerface
+diff --git a/source/geometry/cartesian/operators/outerface/CartesianOuterfaceDoubleWeightedAverage.h b/source/geometry/cartesian/operators/outerface/CartesianOuterfaceDoubleWeightedAverage.h
+index 1d32c7c..9108094 100644
+--- a/source/geometry/cartesian/operators/outerface/CartesianOuterfaceDoubleWeightedAverage.h
++++ b/source/geometry/cartesian/operators/outerface/CartesianOuterfaceDoubleWeightedAverage.h
+@@ -49,7 +49,7 @@ public:
+    /**
+     * Uninteresting virtual destructor.
+     */
+-   virtual ~CartesianOuterfaceDoubleWeightedAverage<DIM>();
++   virtual ~CartesianOuterfaceDoubleWeightedAverage();
+ 
+    /**
+     * Return true if the variable and name string match the outerface
+diff --git a/source/geometry/cartesian/operators/outerface/CartesianOuterfaceFloatWeightedAverage.h b/source/geometry/cartesian/operators/outerface/CartesianOuterfaceFloatWeightedAverage.h
+index 56e7971..8e3ebee 100644
+--- a/source/geometry/cartesian/operators/outerface/CartesianOuterfaceFloatWeightedAverage.h
++++ b/source/geometry/cartesian/operators/outerface/CartesianOuterfaceFloatWeightedAverage.h
+@@ -49,7 +49,7 @@ public:
+    /**
+     * Uninteresting virtual destructor.
+     */
+-   virtual ~CartesianOuterfaceFloatWeightedAverage<DIM>();
++   virtual ~CartesianOuterfaceFloatWeightedAverage();
+ 
+    /**
+     * Return true if the variable and name string match the outerface
+diff --git a/source/geometry/cartesian/operators/outerside/CartesianOutersideDoubleWeightedAverage.h b/source/geometry/cartesian/operators/outerside/CartesianOutersideDoubleWeightedAverage.h
+index 6df073c..b3819b0 100644
+--- a/source/geometry/cartesian/operators/outerside/CartesianOutersideDoubleWeightedAverage.h
++++ b/source/geometry/cartesian/operators/outerside/CartesianOutersideDoubleWeightedAverage.h
+@@ -49,7 +49,7 @@ public:
+    /**
+     * Uninteresting virtual destructor.
+     */
+-   virtual ~CartesianOutersideDoubleWeightedAverage<DIM>();
++   virtual ~CartesianOutersideDoubleWeightedAverage();
+ 
+    /**
+     * Return true if the variable and name string match the outerside
+diff --git a/source/geometry/cartesian/operators/side/CartesianSideComplexWeightedAverage.h b/source/geometry/cartesian/operators/side/CartesianSideComplexWeightedAverage.h
+index 5ae0649..a4d5fd5 100644
+--- a/source/geometry/cartesian/operators/side/CartesianSideComplexWeightedAverage.h
++++ b/source/geometry/cartesian/operators/side/CartesianSideComplexWeightedAverage.h
+@@ -49,7 +49,7 @@ public:
+    /**
+     * Uninteresting virtual destructor.
+     */
+-   virtual ~CartesianSideComplexWeightedAverage<DIM>();
++   virtual ~CartesianSideComplexWeightedAverage();
+ 
+    /**
+     * Return true if the variable and name string match the side-centered 
+diff --git a/source/geometry/cartesian/operators/side/CartesianSideDoubleConservativeLinearRefine.h b/source/geometry/cartesian/operators/side/CartesianSideDoubleConservativeLinearRefine.h
+index e6e9f01..530421c 100644
+--- a/source/geometry/cartesian/operators/side/CartesianSideDoubleConservativeLinearRefine.h
++++ b/source/geometry/cartesian/operators/side/CartesianSideDoubleConservativeLinearRefine.h
+@@ -51,7 +51,7 @@ public:
+    /**
+     * Uninteresting virtual destructor.
+     */
+-   virtual ~CartesianSideDoubleConservativeLinearRefine<DIM>();
++   virtual ~CartesianSideDoubleConservativeLinearRefine();
+ 
+    /**
+     * Return true if the variable and name string match side-centered 
+diff --git a/source/geometry/cartesian/operators/side/CartesianSideDoubleWeightedAverage.h b/source/geometry/cartesian/operators/side/CartesianSideDoubleWeightedAverage.h
+index 1abac78..92cf15e 100644
+--- a/source/geometry/cartesian/operators/side/CartesianSideDoubleWeightedAverage.h
++++ b/source/geometry/cartesian/operators/side/CartesianSideDoubleWeightedAverage.h
+@@ -49,7 +49,7 @@ public:
+    /**
+     * Uninteresting virtual destructor.
+     */
+-   virtual ~CartesianSideDoubleWeightedAverage<DIM>();
++   virtual ~CartesianSideDoubleWeightedAverage();
+ 
+    /**
+     * Return true if the variable and name string match the side-centered 
+diff --git a/source/geometry/cartesian/operators/side/CartesianSideFloatConservativeLinearRefine.h b/source/geometry/cartesian/operators/side/CartesianSideFloatConservativeLinearRefine.h
+index 95bc99f..294eae8 100644
+--- a/source/geometry/cartesian/operators/side/CartesianSideFloatConservativeLinearRefine.h
++++ b/source/geometry/cartesian/operators/side/CartesianSideFloatConservativeLinearRefine.h
+@@ -51,7 +51,7 @@ public:
+    /**
+     * Uninteresting virtual destructor.
+     */
+-   virtual ~CartesianSideFloatConservativeLinearRefine<DIM>();
++   virtual ~CartesianSideFloatConservativeLinearRefine();
+ 
+    /**
+     * Return true if the variable and name string match side-centered 
+diff --git a/source/geometry/cartesian/operators/side/CartesianSideFloatWeightedAverage.h b/source/geometry/cartesian/operators/side/CartesianSideFloatWeightedAverage.h
+index 6d0aed0..ca553a8 100644
+--- a/source/geometry/cartesian/operators/side/CartesianSideFloatWeightedAverage.h
++++ b/source/geometry/cartesian/operators/side/CartesianSideFloatWeightedAverage.h
+@@ -49,7 +49,7 @@ public:
+    /**
+     * Uninteresting virtual destructor.
+     */
+-   virtual ~CartesianSideFloatWeightedAverage<DIM>();
++   virtual ~CartesianSideFloatWeightedAverage();
+ 
+    /**
+     * Return true if the variable and name string match the side-centered 
+diff --git a/source/geometry/cartesian/patch_geom/CartesianPatchGeometry.h b/source/geometry/cartesian/patch_geom/CartesianPatchGeometry.h
+index 4bc4732..0b7ea47 100644
+--- a/source/geometry/cartesian/patch_geom/CartesianPatchGeometry.h
++++ b/source/geometry/cartesian/patch_geom/CartesianPatchGeometry.h
+@@ -55,7 +55,7 @@ public:
+     * Destructor for CartesianPatchGeometry deallocates the
+     * storage for spatial coordinates on patch.
+     */
+-   ~CartesianPatchGeometry<DIM>();
++   ~CartesianPatchGeometry();
+ 
+    /**
+     * Return const pointer to dx array for patch. 
+diff --git a/source/geometry/multiblock/grid_geom/BlockGridGeometry.h b/source/geometry/multiblock/grid_geom/BlockGridGeometry.h
+index 33488a1..3a58c61 100644
+--- a/source/geometry/multiblock/grid_geom/BlockGridGeometry.h
++++ b/source/geometry/multiblock/grid_geom/BlockGridGeometry.h
+@@ -61,7 +61,7 @@ public:
+     * Destructor for BlockGridGeometry unregisters the object 
+     * with the restart manager if previously registered.
+     */
+-   virtual ~BlockGridGeometry<DIM>();
++   virtual ~BlockGridGeometry();
+    
+    /**
+     * Create and return a pointer to a refined version of this Cartesian grid
+diff --git a/source/geometry/multiblock/patch_geom/BlockPatchGeometry.h b/source/geometry/multiblock/patch_geom/BlockPatchGeometry.h
+index 067cdd1..cf55fcb 100644
+--- a/source/geometry/multiblock/patch_geom/BlockPatchGeometry.h
++++ b/source/geometry/multiblock/patch_geom/BlockPatchGeometry.h
+@@ -52,7 +52,7 @@ public:
+    /**
+     * Destructor for BlockPatchGeometry.
+     */
+-   ~BlockPatchGeometry<DIM>();
++   ~BlockPatchGeometry();
+ 
+    /**
+     * Get the block number for the block on which the patch lies. 
+diff --git a/source/geometry/skeleton/grid_geom/SkeletonGridGeometry.h b/source/geometry/skeleton/grid_geom/SkeletonGridGeometry.h
+index 8511514..79cfe73 100644
+--- a/source/geometry/skeleton/grid_geom/SkeletonGridGeometry.h
++++ b/source/geometry/skeleton/grid_geom/SkeletonGridGeometry.h
+@@ -120,7 +120,7 @@ public:
+     * Destructor for SkeletonGridGeometry unregisters the object 
+     * with the restart manager if previously registered.
+     */
+-   virtual ~SkeletonGridGeometry<DIM>();
++   virtual ~SkeletonGridGeometry();
+    
+    /**
+     * Create and return a pointer to a refined version of this Cartesian grid
+diff --git a/source/geometry/skeleton/operators/SkeletonCoarsen.h b/source/geometry/skeleton/operators/SkeletonCoarsen.h
+index 1f4b79a..3a4c77b 100644
+--- a/source/geometry/skeleton/operators/SkeletonCoarsen.h
++++ b/source/geometry/skeleton/operators/SkeletonCoarsen.h
+@@ -47,7 +47,7 @@ public:
+    /**
+     * Uninteresting virtual destructor.
+     */
+-   virtual ~SkeletonCoarsen<DIM>();
++   virtual ~SkeletonCoarsen();
+ 
+    /**
+     * Return true if the variable and name string match cell-centered 
+diff --git a/source/geometry/skeleton/operators/SkeletonRefine.h b/source/geometry/skeleton/operators/SkeletonRefine.h
+index cc3d3d9..e860a27 100644
+--- a/source/geometry/skeleton/operators/SkeletonRefine.h
++++ b/source/geometry/skeleton/operators/SkeletonRefine.h
+@@ -47,7 +47,7 @@ public:
+    /**
+     * Uninteresting virtual destructor.
+     */
+-   virtual ~SkeletonRefine<DIM>();
++   virtual ~SkeletonRefine();
+ 
+    /**
+     * Return true if the variable and name string match cell-centered 
+diff --git a/source/geometry/skeleton/patch_geom/SkeletonPatchGeometry.h b/source/geometry/skeleton/patch_geom/SkeletonPatchGeometry.h
+index 672bce1..c1bad61 100644
+--- a/source/geometry/skeleton/patch_geom/SkeletonPatchGeometry.h
++++ b/source/geometry/skeleton/patch_geom/SkeletonPatchGeometry.h
+@@ -51,7 +51,7 @@ public:
+    /**
+     * Destructor for SkeletonPatchGeometry.
+     */
+-   ~SkeletonPatchGeometry<DIM>();
++   ~SkeletonPatchGeometry();
+ 
+    /**
+     * Print SkeletonPatchGeometry class data.
+diff --git a/source/geometry/templates/EmptyGeometryX.C b/source/geometry/templates/EmptyGeometryX.C
+index 9165e43..601487c 100644
+--- a/source/geometry/templates/EmptyGeometryX.C
++++ b/source/geometry/templates/EmptyGeometryX.C
+@@ -14,6 +14,12 @@
+ namespace SAMRAI {
+    namespace geom {
+       template<int DIM> class Empty {
++	 Empty() :
++	    something(0) 
++	 {
++	 }
++
++	 int something;
+       };
+ 
+       template class Empty< NDIM >;
+diff --git a/source/hierarchy/boxes/BinaryTree.h b/source/hierarchy/boxes/BinaryTree.h
+index a7e17ab..3aaef26 100644
+--- a/source/hierarchy/boxes/BinaryTree.h
++++ b/source/hierarchy/boxes/BinaryTree.h
+@@ -45,7 +45,7 @@ public:
+    /**
+     * The destructor does nothing of public interest.
+     */
+-   ~BinaryTree<DIM>();
++   ~BinaryTree();
+ 
+    /**
+     * Returns true if "box" intersects a patch that is local 
+diff --git a/source/hierarchy/boxes/Box.h b/source/hierarchy/boxes/Box.h
+index 69ea6b2..71311fa 100644
+--- a/source/hierarchy/boxes/Box.h
++++ b/source/hierarchy/boxes/Box.h
+@@ -449,7 +449,7 @@ public:
+    /**
+     * Destructor for the box iterator.
+     */
+-   ~BoxIterator<DIM>();
++   ~BoxIterator();
+ 
+    /**
+     * @brief Initializer for the box iterator.
+diff --git a/source/hierarchy/boxes/BoxArray.h b/source/hierarchy/boxes/BoxArray.h
+index 01d930e..3551385 100644
+--- a/source/hierarchy/boxes/BoxArray.h
++++ b/source/hierarchy/boxes/BoxArray.h
+@@ -88,7 +88,7 @@ public:
+    /**
+     * The BoxArray destructor releases the box array data.
+     */
+-   ~BoxArray<DIM>();
++   ~BoxArray();
+ 
+    /**
+     * Return the number of boxes in the array.
+diff --git a/source/hierarchy/boxes/BoxGraph.h b/source/hierarchy/boxes/BoxGraph.h
+index c8ef118..479845c 100644
+--- a/source/hierarchy/boxes/BoxGraph.h
++++ b/source/hierarchy/boxes/BoxGraph.h
+@@ -158,7 +158,7 @@ public:
+    /*!
+     * The destructor releases privately held resources.
+     */
+-   ~BoxGraph<DIM>();
++   ~BoxGraph();
+ 
+    /*!
+     * @brief Compute the indices of boxes from the src_box_array
+diff --git a/source/hierarchy/boxes/BoxIOUtility.h b/source/hierarchy/boxes/BoxIOUtility.h
+index 929e51b..5bf140e 100644
+--- a/source/hierarchy/boxes/BoxIOUtility.h
++++ b/source/hierarchy/boxes/BoxIOUtility.h
+@@ -60,7 +60,7 @@ public:
+    /**
+     * Virtual destructor.
+     */
+-   virtual ~BoxIOUtility<DIM>();
++   virtual ~BoxIOUtility();
+ 
+    /**
+     * Pulls refinement boxes corresponding to the provided level and 
+diff --git a/source/hierarchy/boxes/BoxList.C b/source/hierarchy/boxes/BoxList.C
+index 3bb6e02..1695831 100644
+--- a/source/hierarchy/boxes/BoxList.C
++++ b/source/hierarchy/boxes/BoxList.C
+@@ -39,13 +39,13 @@ namespace SAMRAI {
+ template<int DIM>  BoxList<DIM>::BoxList(const Box<DIM>& box)
+ :  tbox::List< Box<DIM> >()
+ {
+-   addItem(box);
++   this ->addItem(box);
+ }
+ 
+ template<int DIM>  BoxList<DIM>::BoxList(const BoxList<DIM>& list)
+ :  tbox::List< Box<DIM> >()
+ {
+-   copyItems(list);
++   this ->copyItems(list);
+ }
+       
+ template<int DIM>  BoxList<DIM>::BoxList(const BoxArray<DIM>& array)
+@@ -53,7 +53,7 @@ template<int DIM>  BoxList<DIM>::BoxList(const BoxArray<DIM>& array)
+ {
+    const int n = array.getNumberOfBoxes();
+    for (int i = 0; i < n; i++) {
+-      appendItem(array[i]);
++      this ->appendItem(array[i]);
+    }
+ }
+ 
+@@ -61,7 +61,7 @@ template<int DIM> BoxList<DIM>& BoxList<DIM>::operator=(const BoxList<DIM>& list
+ {
+    if (this != &list) {
+       this -> clearItems();
+-      copyItems(list);
++      this ->copyItems(list);
+    }
+    return(*this);
+ }
+@@ -145,10 +145,10 @@ template<int DIM> void BoxList<DIM>::simplifyBoxes()
+          // Otherwise, burst tryMe and andMe and put on noncanonical
+ 
+             if (!combineDaPuppies) {
+-               appendItem(tryMe);
++               this ->appendItem(tryMe);
+             } else {
+                Box<DIM> andMe = l();
+-               removeItem(l);
++               this ->removeItem(l);
+                const Index<DIM>& bl = tryMe.lower();
+                const Index<DIM>& bh = tryMe.upper();
+                Index<DIM> il = andMe.lower();
+@@ -199,13 +199,13 @@ template<int DIM> void BoxList<DIM>::burstBoxes(const Box<DIM>& bursty,
+       if (bursth(d) > solidh(d)) {
+          Index<DIM> newl = burstl;
+          newl(d) = solidh(d) + 1;
+-         appendItem(Box<DIM>(newl, bursth));
++         this ->appendItem(Box<DIM>(newl, bursth));
+          bursth(d) = solidh(d);
+       }
+       if (burstl(d) < solidl(d)) {
+          Index<DIM> newh = bursth;
+          newh(d) = solidl(d) - 1;
+-         appendItem(Box<DIM>(burstl, newh));
++         this ->appendItem(Box<DIM>(burstl, newh));
+          burstl(d) = solidl(d);
+       }
+    }
+@@ -231,7 +231,7 @@ template<int DIM> void BoxList<DIM>::removeIntersections(const Box<DIM>& takeawa
+          fragments.burstBoxes(tryme, takeaway, DIM);
+       }
+    }
+-   catenateItems(fragments);
++   this ->catenateItems(fragments);
+ }
+ 
+ template<int DIM> void BoxList<DIM>::removeIntersections(const Box<DIM>& box,
+@@ -251,7 +251,7 @@ template<int DIM> void BoxList<DIM>::removeIntersections(const Box<DIM>& box,
+    if (!(box * takeaway).empty()) {
+       BoxList<DIM>::burstBoxes(box, takeaway, DIM);
+    } else {
+-      appendItem(box);
++      this ->appendItem(box);
+    }
+ 
+ }
+@@ -284,7 +284,7 @@ template<int DIM> void BoxList<DIM>::intersectBoxes(const Box<DIM>& box)
+          intersection.appendItem(overlap);
+       }
+    }
+-   catenateItems(intersection);
++   this ->catenateItems(intersection);
+ }
+ 
+ template<int DIM> void BoxList<DIM>::intersectBoxes(const BoxList<DIM>& boxes)
+@@ -300,7 +300,7 @@ template<int DIM> void BoxList<DIM>::intersectBoxes(const BoxList<DIM>& boxes)
+          }
+       }
+    }
+-   catenateItems(intersection);
++   this ->catenateItems(intersection);
+ }
+ 
+ /*
+@@ -334,7 +334,7 @@ template<int DIM> void BoxList<DIM>::coalesceBoxes()
+ 
+          if ( tb2().coalesceWith(tb()) ) {
+             found_match = true;
+-            removeItem(tb);
++            this ->removeItem(tb);
+          }
+ 
+          tb2++;
+diff --git a/source/hierarchy/boxes/BoxList.I b/source/hierarchy/boxes/BoxList.I
+index e751158..b9fe76c 100644
+--- a/source/hierarchy/boxes/BoxList.I
++++ b/source/hierarchy/boxes/BoxList.I
+@@ -30,14 +30,14 @@ template<int DIM> inline
+ void BoxList<DIM>::unionBoxes(const Box<DIM>& box)
+ {
+    if (!box.empty()) {
+-      appendItem(box);
++      this->appendItem(box);
+    }
+ }
+ 
+ template<int DIM> inline
+ void BoxList<DIM>::unionBoxes(const BoxList<DIM>& boxes)
+ {
+-   copyItems(boxes);
++   this->copyItems(boxes);
+ }
+ 
+ template<int DIM> inline
+diff --git a/source/hierarchy/boxes/BoxList.h b/source/hierarchy/boxes/BoxList.h
+index f624286..a383c2e 100644
+--- a/source/hierarchy/boxes/BoxList.h
++++ b/source/hierarchy/boxes/BoxList.h
+@@ -72,7 +72,7 @@ public:
+    /**
+     * The destructor releases all list storage.
+     */
+-   ~BoxList<DIM>();
++   ~BoxList();
+ 
+    /**
+     * Return integer number of boxes in the box list.  Note that this 
+diff --git a/source/hierarchy/boxes/BoxTop.h b/source/hierarchy/boxes/BoxTop.h
+index a57959b..0ee569d 100644
+--- a/source/hierarchy/boxes/BoxTop.h
++++ b/source/hierarchy/boxes/BoxTop.h
+@@ -81,7 +81,7 @@ public:
+    /*!
+     * The destructor releases privately held resources.
+     */
+-   ~BoxTop<DIM>();
++   ~BoxTop();
+ 
+    /*!
+     * @brief Compute the set of boxes that overlap with the specified \b box.
+diff --git a/source/hierarchy/boxes/BoxTree.h b/source/hierarchy/boxes/BoxTree.h
+index 9773977..39adc42 100644
+--- a/source/hierarchy/boxes/BoxTree.h
++++ b/source/hierarchy/boxes/BoxTree.h
+@@ -124,7 +124,7 @@ public:
+    /*!
+     * The dtor does nothing interesting.
+     */
+-   ~BoxTree<DIM>();
++   ~BoxTree();
+ 
+    //! @{
+    /*!
+diff --git a/source/hierarchy/boxes/BoxTreeNode.h b/source/hierarchy/boxes/BoxTreeNode.h
+index 5e9325f..82a4c2b 100644
+--- a/source/hierarchy/boxes/BoxTreeNode.h
++++ b/source/hierarchy/boxes/BoxTreeNode.h
+@@ -78,7 +78,7 @@ public:
+    /*!
+     * The dtor does nothing even slightly interesting.
+     */
+-   ~BoxTreeNode<DIM>();
++   ~BoxTreeNode();
+ 
+    /*!
+     * @brief Compute the box array indices of boxes that overlap the given \b box.
+diff --git a/source/hierarchy/multiblock/MBUtilities.h b/source/hierarchy/multiblock/MBUtilities.h
+index 780476a..7d20a74 100644
+--- a/source/hierarchy/multiblock/MBUtilities.h
++++ b/source/hierarchy/multiblock/MBUtilities.h
+@@ -36,7 +36,7 @@ public:
+    /*!
+     * Virtual destructor does nothing
+     */
+-   virtual ~MBUtilities<DIM>();
++   virtual ~MBUtilities();
+ 
+    /*!
+     * @brief Copy patch data from src to dst using the shift and rotate
+diff --git a/source/hierarchy/multiblock/MultiblockDataTranslator.h b/source/hierarchy/multiblock/MultiblockDataTranslator.h
+index 5af9dc9..5513ae0 100644
+--- a/source/hierarchy/multiblock/MultiblockDataTranslator.h
++++ b/source/hierarchy/multiblock/MultiblockDataTranslator.h
+@@ -38,7 +38,7 @@ public:
+    /*!
+     * @brief The virtual destructor does nothing interesting.
+     */
+-   virtual ~MultiblockDataTranslator<DIM>();
++   virtual ~MultiblockDataTranslator();
+ 
+    virtual void translateAndCopyData(
+       Patch<DIM>& dst_patch,
+diff --git a/source/hierarchy/multiblock/MultiblockGridGeometry.h b/source/hierarchy/multiblock/MultiblockGridGeometry.h
+index d6d0a56..557e8ba 100644
+--- a/source/hierarchy/multiblock/MultiblockGridGeometry.h
++++ b/source/hierarchy/multiblock/MultiblockGridGeometry.h
+@@ -38,7 +38,7 @@ public:
+    /*!
+     * @brief The virtual destructor does nothing interesting.
+     */
+-   virtual ~MultiblockGridGeometry<DIM>();
++   virtual ~MultiblockGridGeometry();
+ 
+    tbox::Pointer< hier::GridGeometry<DIM> >& getBlockGeometry(const int block)
+    {
+diff --git a/source/hierarchy/multiblock/MultiblockPatchHierarchy.h b/source/hierarchy/multiblock/MultiblockPatchHierarchy.h
+index fc57d45..69d2722 100644
+--- a/source/hierarchy/multiblock/MultiblockPatchHierarchy.h
++++ b/source/hierarchy/multiblock/MultiblockPatchHierarchy.h
+@@ -69,7 +69,7 @@ public:
+    /*!
+     * @brief Destructor for multiblock
+     */
+-   ~MultiblockPatchHierarchy<DIM>();
++   ~MultiblockPatchHierarchy();
+ 
+    /*!
+     * @brief Get a pointer to a single patch hierarchy represented by
+diff --git a/source/hierarchy/multiblock/MultiblockPatchLevel.h b/source/hierarchy/multiblock/MultiblockPatchLevel.h
+index b0f68ef..4111f40 100644
+--- a/source/hierarchy/multiblock/MultiblockPatchLevel.h
++++ b/source/hierarchy/multiblock/MultiblockPatchLevel.h
+@@ -51,7 +51,7 @@ public:
+    /*!
+     * Destructor is uninteresting
+     */
+-   ~MultiblockPatchLevel<DIM>();
++   ~MultiblockPatchLevel();
+ 
+    /*!
+     * @brief Return a pointer to the hier::PatchLevel<DIM> associated with the
+diff --git a/source/hierarchy/patches/BoundaryBox.h b/source/hierarchy/patches/BoundaryBox.h
+index 909c7d2..10d6f24 100644
+--- a/source/hierarchy/patches/BoundaryBox.h
++++ b/source/hierarchy/patches/BoundaryBox.h
+@@ -59,7 +59,7 @@ public:
+    /**
+     * The destructor for BoundaryBox.
+     */
+-   ~BoundaryBox<DIM>();
++   ~BoundaryBox();
+ 
+    /**
+     * Return a reference to the Box<DIM> member of the boundary box
+diff --git a/source/hierarchy/patches/BoundaryLookupTable.C b/source/hierarchy/patches/BoundaryLookupTable.C
+index 49a502f..396e74e 100644
+--- a/source/hierarchy/patches/BoundaryLookupTable.C
++++ b/source/hierarchy/patches/BoundaryLookupTable.C
+@@ -51,7 +51,7 @@ template<int DIM>  BoundaryLookupTable<DIM>::BoundaryLookupTable()
+       s_lookup_table_instance = NULL;
+    }
+    if(s_registered_callback == false) {
+-      s_lookup_table_instance = false;
++      s_lookup_table_instance = NULL;
+    }
+ 
+    if (d_table[0].isNull()) {
+diff --git a/source/hierarchy/patches/BoundaryLookupTable.h b/source/hierarchy/patches/BoundaryLookupTable.h
+index 91105bf..edb8e0e 100644
+--- a/source/hierarchy/patches/BoundaryLookupTable.h
++++ b/source/hierarchy/patches/BoundaryLookupTable.h
+@@ -186,7 +186,7 @@ protected:
+     *
+     * The destructor deallocates lookup table contents.
+     */
+-   ~BoundaryLookupTable<DIM>();
++   ~BoundaryLookupTable();
+ 
+ private:
+ 
+diff --git a/source/hierarchy/patches/CoarseFineBoundary.h b/source/hierarchy/patches/CoarseFineBoundary.h
+index 6a3bf2d..e7318d0 100644
+--- a/source/hierarchy/patches/CoarseFineBoundary.h
++++ b/source/hierarchy/patches/CoarseFineBoundary.h
+@@ -102,7 +102,7 @@ public:
+       int ln,
+       const IntVector<DIM>& max_ghost_width);
+ 
+-   ~CoarseFineBoundary<DIM>();
++   ~CoarseFineBoundary();
+ 
+    /*!
+     * @brief Construct a CoarseFineBoundary<DIM> object for the specified
+diff --git a/source/hierarchy/patches/Patch.h b/source/hierarchy/patches/Patch.h
+index cefa6e9..8f58d8a 100644
+--- a/source/hierarchy/patches/Patch.h
++++ b/source/hierarchy/patches/Patch.h
+@@ -74,7 +74,7 @@ public:
+    /**
+     * Virtual destructor for patch objects.
+     */
+-   virtual ~Patch<DIM>();
++   virtual ~Patch();
+ 
+    /**
+     * Return the box over which this patch is defined.  The components on a
+diff --git a/source/hierarchy/patches/PatchConfigurationUtilities.h b/source/hierarchy/patches/PatchConfigurationUtilities.h
+index 1dc861f..f4d256c 100644
+--- a/source/hierarchy/patches/PatchConfigurationUtilities.h
++++ b/source/hierarchy/patches/PatchConfigurationUtilities.h
+@@ -98,7 +98,7 @@ public:
+    /*!
+     * Virtual destructor for utilities objects.
+     */
+-   virtual ~PatchConfigurationUtilities<DIM>();
++   virtual ~PatchConfigurationUtilities();
+ 
+    /*!
+     * Check whether information is set for given level number. 
+diff --git a/source/hierarchy/patches/PatchFactory.h b/source/hierarchy/patches/PatchFactory.h
+index 9a09425..60333d4 100644
+--- a/source/hierarchy/patches/PatchFactory.h
++++ b/source/hierarchy/patches/PatchFactory.h
+@@ -43,7 +43,7 @@ public:
+    /**
+     * Virtual destructor for patch factory objects.
+     */
+-   virtual ~PatchFactory<DIM>();
++   virtual ~PatchFactory();
+ 
+    /**
+     * Allocate a patch with the specified domain and patch descriptor.
+diff --git a/source/hierarchy/patches/PatchGeometry.h b/source/hierarchy/patches/PatchGeometry.h
+index c564e0b..c65cf63 100644
+--- a/source/hierarchy/patches/PatchGeometry.h
++++ b/source/hierarchy/patches/PatchGeometry.h
+@@ -54,7 +54,7 @@ public:
+    /**
+     * The virtual destructor for the patch geometry base class.
+     */
+-   virtual ~PatchGeometry<DIM>();
++   virtual ~PatchGeometry();
+ 
+    /**
+     * Return const reference to patch boundary information.
+diff --git a/source/hierarchy/patches/PatchHierarchy.h b/source/hierarchy/patches/PatchHierarchy.h
+index 126066e..10855b9 100644
+--- a/source/hierarchy/patches/PatchHierarchy.h
++++ b/source/hierarchy/patches/PatchHierarchy.h
+@@ -69,7 +69,7 @@ public:
+    /**
+     * Destructor for patch hierarchy objects.
+     */
+-   ~PatchHierarchy<DIM>();
++   ~PatchHierarchy();
+ 
+ 
+   /**
+diff --git a/source/hierarchy/patches/PatchLevel.C b/source/hierarchy/patches/PatchLevel.C
+index 15150cb..42f781a 100644
+--- a/source/hierarchy/patches/PatchLevel.C
++++ b/source/hierarchy/patches/PatchLevel.C
+@@ -27,7 +27,15 @@
+ namespace SAMRAI {
+     namespace hier {
+ 
+-static tbox::Pointer<tbox::Timer> t_level_constructor;
++/*
++*************************************************************************
++*                                                                       *
++* Initialization for static data members.                               *
++*                                                                       *
++*************************************************************************
++*/
++template<int DIM> tbox::Pointer<tbox::Timer>
++   PatchLevel<DIM>::t_level_constructor;
+ 
+ /*
+  *************************************************************************
+@@ -1007,8 +1015,8 @@ template<int DIM> void PatchLevel<DIM>::initializeTimers()
+    if ( t_level_constructor.isNull() ) {
+       t_level_constructor = tbox::TimerManager::getManager() ->
+          getTimer("mesh::PatchLevel::level_constructor");
+-   }
+    tbox::ShutdownRegistry::registerShutdownRoutine(freeTimers, 254);
++   }
+ }
+ 
+ 
+diff --git a/source/hierarchy/patches/PatchLevel.h b/source/hierarchy/patches/PatchLevel.h
+index d5d651b..ebbb23d 100644
+--- a/source/hierarchy/patches/PatchLevel.h
++++ b/source/hierarchy/patches/PatchLevel.h
+@@ -127,7 +127,7 @@ public:
+    /**
+     * The virtual destructor for patch level deallocates all patches.
+     */
+-   virtual ~PatchLevel<DIM>();
++   virtual ~PatchLevel();
+ 
+    /**
+     * Return the number of this level in a hierarchy, or the number of
+@@ -479,7 +479,10 @@ private:
+     */
+    void setPatchTouchesBoundaryArrays();
+ 
+-   void initializeTimers();
++   /*!
++    * Allocate static timers.
++    */
++   static void initializeTimers();
+ 
+    /*!
+     * Free static timers.
+@@ -565,6 +568,11 @@ private:
+     * Manages communications in clustering algorithms
+     */
+    tbox::Pointer< BinaryTree<DIM> > d_binary_tree;
++
++   /*
++    * Timer objects for performance measurement.
++    */
++   static tbox::Pointer<tbox::Timer> t_level_constructor;
+ };
+ 
+ /**
+@@ -625,7 +633,7 @@ public:
+    /**
+     * Destructor for the patch level iterator.
+     */
+-   ~PatchLevelIterator<DIM>();
++   ~PatchLevelIterator();
+ 
+    /**
+     * Extract the integer patch index corresponding to the current patch 
+diff --git a/source/hierarchy/patches/PatchLevelFactory.h b/source/hierarchy/patches/PatchLevelFactory.h
+index 8f2fece..bbda81d 100644
+--- a/source/hierarchy/patches/PatchLevelFactory.h
++++ b/source/hierarchy/patches/PatchLevelFactory.h
+@@ -42,7 +42,7 @@ public:
+    /**
+     * Virtual destructor for patch level factory objects.
+     */
+-   virtual ~PatchLevelFactory<DIM>();
++   virtual ~PatchLevelFactory();
+ 
+    /**
+     * Allocate a patch level with the specified boxes and processor mappings.
+diff --git a/source/hierarchy/templates/EmptyHierarchyX.C b/source/hierarchy/templates/EmptyHierarchyX.C
+index d8f8a22..85b1857 100644
+--- a/source/hierarchy/templates/EmptyHierarchyX.C
++++ b/source/hierarchy/templates/EmptyHierarchyX.C
+@@ -14,6 +14,12 @@
+ namespace SAMRAI {
+    namespace hier {
+       template<int DIM> class Empty {
++	 Empty() :
++	    something(0) 
++	 {
++	 }
++
++	 int something;
+       };
+ 
+       template class Empty< NDIM >;
+diff --git a/source/hierarchy/variables/BoxGeometry.h b/source/hierarchy/variables/BoxGeometry.h
+index c777a85..23603de 100644
+--- a/source/hierarchy/variables/BoxGeometry.h
++++ b/source/hierarchy/variables/BoxGeometry.h
+@@ -76,7 +76,7 @@ public:
+    /**
+     * The virtual destructor does nothing interesting.
+     */
+-   virtual ~BoxGeometry<DIM>();
++   virtual ~BoxGeometry();
+ 
+    /**
+     * Calculate the overlap between two box geometry objects given the
+diff --git a/source/hierarchy/variables/BoxOverlap.h b/source/hierarchy/variables/BoxOverlap.h
+index 6aa46c3..c2020bf 100644
+--- a/source/hierarchy/variables/BoxOverlap.h
++++ b/source/hierarchy/variables/BoxOverlap.h
+@@ -49,7 +49,7 @@ public:
+    /**
+     * The virtual destructor does nothing interesting.
+     */
+-   virtual ~BoxOverlap<DIM>();
++   virtual ~BoxOverlap();
+ 
+    /**
+     * Return true if intersecting boxes have no communication dependencies.
+diff --git a/source/hierarchy/variables/LocallyActiveDataPatchLevelManager.h b/source/hierarchy/variables/LocallyActiveDataPatchLevelManager.h
+index c424ae7..39677b5 100644
+--- a/source/hierarchy/variables/LocallyActiveDataPatchLevelManager.h
++++ b/source/hierarchy/variables/LocallyActiveDataPatchLevelManager.h
+@@ -560,7 +560,7 @@ public:
+    /*!
+     * Destructor for the iterator releases all internal storage.
+     */
+-   ~LocallyActiveDataPatchLevelIterator<DIM>();
++   ~LocallyActiveDataPatchLevelIterator();
+ 
+    /*!
+     * Extract the integer patch index corresponding to the current patch in 
+diff --git a/source/hierarchy/variables/PatchData.h b/source/hierarchy/variables/PatchData.h
+index 242e834..45a74ef 100644
+--- a/source/hierarchy/variables/PatchData.h
++++ b/source/hierarchy/variables/PatchData.h
+@@ -67,7 +67,7 @@ public:
+    /**
+     * The virtual destructor for a patch data object.
+     */
+-   virtual ~PatchData<DIM>();
++   virtual ~PatchData();
+ 
+    /**
+     * Return the box over which this patch data object is defined.  All
+diff --git a/source/hierarchy/variables/PatchDataFactory.h b/source/hierarchy/variables/PatchDataFactory.h
+index 8ce4fe5..6d66dfb 100644
+--- a/source/hierarchy/variables/PatchDataFactory.h
++++ b/source/hierarchy/variables/PatchDataFactory.h
+@@ -83,7 +83,7 @@ public:
+     * @brief Virtual destructor for the patch data factory class.
+     *
+     */
+-   virtual ~PatchDataFactory<DIM>();
++   virtual ~PatchDataFactory();
+ 
+    /**
+     * @brief Abstract virtual function to clone a patch data factory.
+diff --git a/source/hierarchy/variables/PatchDescriptor.h b/source/hierarchy/variables/PatchDescriptor.h
+index a8f816d..617aa07 100644
+--- a/source/hierarchy/variables/PatchDescriptor.h
++++ b/source/hierarchy/variables/PatchDescriptor.h
+@@ -74,7 +74,7 @@ public:
+     * The virtual destructor for a patch descriptor deallocates the
+     * internal data structures.
+     */
+-   virtual ~PatchDescriptor<DIM>();
++   virtual ~PatchDescriptor();
+ 
+    /*!
+     * Add a new patch data factory and name string identifier to the patch 
+diff --git a/source/hierarchy/variables/Variable.h b/source/hierarchy/variables/Variable.h
+index 934d268..070d837 100644
+--- a/source/hierarchy/variables/Variable.h
++++ b/source/hierarchy/variables/Variable.h
+@@ -87,7 +87,7 @@ public:
+    /**
+     * Virtual destructor for variable objects.
+     */
+-   virtual ~Variable<DIM>();
++   virtual ~Variable();
+ 
+    /**
+     * Return the instance identifier for this particular variable object.
+diff --git a/source/mathops/array/ArrayDataBasicOps.h b/source/mathops/array/ArrayDataBasicOps.h
+index 4e38c39..1addd9d 100644
+--- a/source/mathops/array/ArrayDataBasicOps.h
++++ b/source/mathops/array/ArrayDataBasicOps.h
+@@ -52,7 +52,7 @@ public:
+     */ 
+    ArrayDataBasicOps();
+ 
+-   ~ArrayDataBasicOps<DIM,TYPE>();
++   ~ArrayDataBasicOps();
+ 
+    /**
+     * Set dst = alpha * src, elementwise.
+diff --git a/source/mathops/array/ArrayDataMiscellaneousOpsReal.h b/source/mathops/array/ArrayDataMiscellaneousOpsReal.h
+index 5facf88..1fc76e0 100644
+--- a/source/mathops/array/ArrayDataMiscellaneousOpsReal.h
++++ b/source/mathops/array/ArrayDataMiscellaneousOpsReal.h
+@@ -52,7 +52,7 @@ public:
+     */
+    ArrayDataMiscellaneousOpsReal();
+ 
+-   ~ArrayDataMiscellaneousOpsReal<DIM,TYPE>();
++   ~ArrayDataMiscellaneousOpsReal();
+ 
+    /**
+     * Return 1 if \f$\|data2_i\| > 0\f$ and \f$data1_i * data2_i \leq 0\f$, for
+diff --git a/source/mathops/array/ArrayDataNormOpsComplex.h b/source/mathops/array/ArrayDataNormOpsComplex.h
+index 72d2ba9..f99143d 100644
+--- a/source/mathops/array/ArrayDataNormOpsComplex.h
++++ b/source/mathops/array/ArrayDataNormOpsComplex.h
+@@ -48,7 +48,7 @@ public:
+     */
+    ArrayDataNormOpsComplex();
+ 
+-   ~ArrayDataNormOpsComplex<DIM>();
++   ~ArrayDataNormOpsComplex();
+ 
+    /**
+     * Set destination component to norm of source component.  That is, 
+diff --git a/source/mathops/array/ArrayDataNormOpsInteger.h b/source/mathops/array/ArrayDataNormOpsInteger.h
+index 22dbde4..4543f66 100644
+--- a/source/mathops/array/ArrayDataNormOpsInteger.h
++++ b/source/mathops/array/ArrayDataNormOpsInteger.h
+@@ -41,7 +41,7 @@ public:
+     */
+    ArrayDataNormOpsInteger();
+ 
+-   ~ArrayDataNormOpsInteger<DIM>();
++   ~ArrayDataNormOpsInteger();
+ 
+    /**
+     * Set destination component to absolute value of source component.  
+diff --git a/source/mathops/array/ArrayDataNormOpsReal.h b/source/mathops/array/ArrayDataNormOpsReal.h
+index c5519e4..696024c 100644
+--- a/source/mathops/array/ArrayDataNormOpsReal.h
++++ b/source/mathops/array/ArrayDataNormOpsReal.h
+@@ -52,7 +52,7 @@ public:
+     */
+    ArrayDataNormOpsReal();
+ 
+-   ~ArrayDataNormOpsReal<DIM,TYPE>();
++   ~ArrayDataNormOpsReal();
+ 
+    /**
+     * Return sum of entries in control volume array.
+diff --git a/source/mathops/cell/HierarchyCellDataOpsComplex.h b/source/mathops/cell/HierarchyCellDataOpsComplex.h
+index 79a6afe..0bfaf72 100644
+--- a/source/mathops/cell/HierarchyCellDataOpsComplex.h
++++ b/source/mathops/cell/HierarchyCellDataOpsComplex.h
+@@ -78,7 +78,7 @@ public:
+    /**
+     * Virtual destructor for the HierarchyCellDataOpsComplex<DIM> class.
+     */
+-   virtual ~HierarchyCellDataOpsComplex<DIM>();
++   virtual ~HierarchyCellDataOpsComplex();
+ 
+    /**
+     * Reset patch hierarchy over which operations occur.
+diff --git a/source/mathops/cell/HierarchyCellDataOpsInteger.h b/source/mathops/cell/HierarchyCellDataOpsInteger.h
+index 9f5b883..d021eb0 100644
+--- a/source/mathops/cell/HierarchyCellDataOpsInteger.h
++++ b/source/mathops/cell/HierarchyCellDataOpsInteger.h
+@@ -77,7 +77,7 @@ public:
+    /**
+     * Virtual destructor for the HierarchyCellDataOpsInteger<DIM> class.
+     */
+-   virtual ~HierarchyCellDataOpsInteger<DIM>();
++   virtual ~HierarchyCellDataOpsInteger();
+ 
+    /**
+     * Reset patch hierarchy over which operations occur.
+diff --git a/source/mathops/cell/HierarchyCellDataOpsReal.h b/source/mathops/cell/HierarchyCellDataOpsReal.h
+index 5998f9f..f8893ff 100644
+--- a/source/mathops/cell/HierarchyCellDataOpsReal.h
++++ b/source/mathops/cell/HierarchyCellDataOpsReal.h
+@@ -77,7 +77,7 @@ public:
+    /**
+     * Virtual destructor for the HierarchyCellDataOpsReal<DIM> class.
+     */
+-   virtual ~HierarchyCellDataOpsReal<DIM,TYPE>();
++   virtual ~HierarchyCellDataOpsReal();
+ 
+    /**
+     * Reset patch hierarchy over which operations occur.
+diff --git a/source/mathops/cell/PatchCellDataBasicOps.h b/source/mathops/cell/PatchCellDataBasicOps.h
+index bfd22f3..bb7aefe 100644
+--- a/source/mathops/cell/PatchCellDataBasicOps.h
++++ b/source/mathops/cell/PatchCellDataBasicOps.h
+@@ -56,7 +56,7 @@ public:
+     */
+    PatchCellDataBasicOps();
+ 
+-   virtual ~PatchCellDataBasicOps<DIM,TYPE>();
++   virtual ~PatchCellDataBasicOps();
+ 
+    /**
+     * Set dst = alpha * src, elementwise.
+diff --git a/source/mathops/cell/PatchCellDataMiscellaneousOpsReal.h b/source/mathops/cell/PatchCellDataMiscellaneousOpsReal.h
+index bb01cd0..e05165e 100644
+--- a/source/mathops/cell/PatchCellDataMiscellaneousOpsReal.h
++++ b/source/mathops/cell/PatchCellDataMiscellaneousOpsReal.h
+@@ -68,7 +68,7 @@ public:
+     */
+    PatchCellDataMiscellaneousOpsReal();
+ 
+-   virtual ~PatchCellDataMiscellaneousOpsReal<DIM,TYPE>();
++   virtual ~PatchCellDataMiscellaneousOpsReal();
+ 
+    /**
+     * Return 1 if \f$\|data2_i\| > 0\f$ and \f$data1_i * data2_i \leq 0\f$, for
+diff --git a/source/mathops/cell/PatchCellDataNormOpsComplex.h b/source/mathops/cell/PatchCellDataNormOpsComplex.h
+index 36f612f..be9f859 100644
+--- a/source/mathops/cell/PatchCellDataNormOpsComplex.h
++++ b/source/mathops/cell/PatchCellDataNormOpsComplex.h
+@@ -64,7 +64,7 @@ public:
+     */
+    PatchCellDataNormOpsComplex();
+ 
+-   virtual ~PatchCellDataNormOpsComplex<DIM>();
++   virtual ~PatchCellDataNormOpsComplex();
+ 
+    /**
+     * Return the number of data values for the cell-centered data object
+diff --git a/source/mathops/cell/PatchCellDataNormOpsReal.h b/source/mathops/cell/PatchCellDataNormOpsReal.h
+index 1ac194c..56448ff 100644
+--- a/source/mathops/cell/PatchCellDataNormOpsReal.h
++++ b/source/mathops/cell/PatchCellDataNormOpsReal.h
+@@ -68,7 +68,7 @@ public:
+     */
+    PatchCellDataNormOpsReal();
+ 
+-   virtual ~PatchCellDataNormOpsReal<DIM,TYPE>();
++   virtual ~PatchCellDataNormOpsReal();
+ 
+    /**
+     * Return the number of data values for the cell-centered data object
+diff --git a/source/mathops/cell/PatchCellDataOpsComplex.h b/source/mathops/cell/PatchCellDataOpsComplex.h
+index 53c9d82..65f7721 100644
+--- a/source/mathops/cell/PatchCellDataOpsComplex.h
++++ b/source/mathops/cell/PatchCellDataOpsComplex.h
+@@ -57,7 +57,7 @@ public:
+     */
+    PatchCellDataOpsComplex();
+ 
+-   virtual ~PatchCellDataOpsComplex<DIM>();
++   virtual ~PatchCellDataOpsComplex();
+ 
+    /**
+     * Copy dst data to src data over given box.
+diff --git a/source/mathops/cell/PatchCellDataOpsInteger.h b/source/mathops/cell/PatchCellDataOpsInteger.h
+index d9ab15e..93bdfc4 100644
+--- a/source/mathops/cell/PatchCellDataOpsInteger.h
++++ b/source/mathops/cell/PatchCellDataOpsInteger.h
+@@ -53,7 +53,7 @@ public:
+     */
+    PatchCellDataOpsInteger();
+ 
+-   virtual ~PatchCellDataOpsInteger<DIM>();
++   virtual ~PatchCellDataOpsInteger();
+ 
+    /**
+     * Return the number of data values for the cell-centered data object
+diff --git a/source/mathops/cell/PatchCellDataOpsReal.h b/source/mathops/cell/PatchCellDataOpsReal.h
+index b654db3..f323aa9 100644
+--- a/source/mathops/cell/PatchCellDataOpsReal.h
++++ b/source/mathops/cell/PatchCellDataOpsReal.h
+@@ -62,7 +62,7 @@ public:
+     */
+    PatchCellDataOpsReal();
+ 
+-   virtual ~PatchCellDataOpsReal<DIM,TYPE>();
++   virtual ~PatchCellDataOpsReal();
+ 
+    /**
+     * Copy dst data to src data over given box.
+diff --git a/source/mathops/edge/HierarchyEdgeDataOpsComplex.h b/source/mathops/edge/HierarchyEdgeDataOpsComplex.h
+index 5b7d5aa..ceb42a2 100644
+--- a/source/mathops/edge/HierarchyEdgeDataOpsComplex.h
++++ b/source/mathops/edge/HierarchyEdgeDataOpsComplex.h
+@@ -78,7 +78,7 @@ public:
+    /**
+     * Virtual destructor for the HierarchyEdgeDataOpsComplex<DIM> class.
+     */
+-   virtual ~HierarchyEdgeDataOpsComplex<DIM>();
++   virtual ~HierarchyEdgeDataOpsComplex();
+ 
+    /**
+     * Reset patch hierarchy over which operations occur.
+diff --git a/source/mathops/edge/HierarchyEdgeDataOpsInteger.h b/source/mathops/edge/HierarchyEdgeDataOpsInteger.h
+index 74e7b1e..6ec6838 100644
+--- a/source/mathops/edge/HierarchyEdgeDataOpsInteger.h
++++ b/source/mathops/edge/HierarchyEdgeDataOpsInteger.h
+@@ -77,7 +77,7 @@ public:
+    /**
+     * Virtual destructor for the HierarchyEdgeDataOpsInteger<DIM> class.
+     */
+-   virtual ~HierarchyEdgeDataOpsInteger<DIM>();
++   virtual ~HierarchyEdgeDataOpsInteger();
+ 
+    /**
+     * Reset patch hierarchy over which operations occur.
+diff --git a/source/mathops/edge/HierarchyEdgeDataOpsReal.h b/source/mathops/edge/HierarchyEdgeDataOpsReal.h
+index dc375ca..fb3f05f 100644
+--- a/source/mathops/edge/HierarchyEdgeDataOpsReal.h
++++ b/source/mathops/edge/HierarchyEdgeDataOpsReal.h
+@@ -78,7 +78,7 @@ public:
+    /**
+     * Virtual destructor for the HierarchyEdgeDataOpsReal<DIM> class.
+     */
+-   virtual ~HierarchyEdgeDataOpsReal<DIM,TYPE>();
++   virtual ~HierarchyEdgeDataOpsReal();
+ 
+    /**
+     * Reset patch hierarchy over which operations occur.
+diff --git a/source/mathops/edge/PatchEdgeDataBasicOps.h b/source/mathops/edge/PatchEdgeDataBasicOps.h
+index 303f6b0..d4b52c3 100644
+--- a/source/mathops/edge/PatchEdgeDataBasicOps.h
++++ b/source/mathops/edge/PatchEdgeDataBasicOps.h
+@@ -56,7 +56,7 @@ public:
+     */
+    PatchEdgeDataBasicOps();
+ 
+-   virtual ~PatchEdgeDataBasicOps<DIM,TYPE>();
++   virtual ~PatchEdgeDataBasicOps();
+ 
+    /**
+     * Set dst = alpha * src, elementwise.
+diff --git a/source/mathops/edge/PatchEdgeDataMiscellaneousOpsReal.h b/source/mathops/edge/PatchEdgeDataMiscellaneousOpsReal.h
+index b9b7868..6dc0a8b 100644
+--- a/source/mathops/edge/PatchEdgeDataMiscellaneousOpsReal.h
++++ b/source/mathops/edge/PatchEdgeDataMiscellaneousOpsReal.h
+@@ -68,7 +68,7 @@ public:
+     */
+    PatchEdgeDataMiscellaneousOpsReal();
+ 
+-   virtual ~PatchEdgeDataMiscellaneousOpsReal<DIM,TYPE>();
++   virtual ~PatchEdgeDataMiscellaneousOpsReal();
+ 
+    /**
+     * Return 1 if \f$\|data2_i\| > 0\f$ and \f$data1_i * data2_i \leq 0\f$, for
+diff --git a/source/mathops/edge/PatchEdgeDataNormOpsComplex.h b/source/mathops/edge/PatchEdgeDataNormOpsComplex.h
+index 0701999..69b2fe7 100644
+--- a/source/mathops/edge/PatchEdgeDataNormOpsComplex.h
++++ b/source/mathops/edge/PatchEdgeDataNormOpsComplex.h
+@@ -64,7 +64,7 @@ public:
+     */
+    PatchEdgeDataNormOpsComplex();
+ 
+-   virtual ~PatchEdgeDataNormOpsComplex<DIM>();
++   virtual ~PatchEdgeDataNormOpsComplex();
+ 
+    /**
+     * Return the number of data values for the edge-centered data object
+diff --git a/source/mathops/edge/PatchEdgeDataNormOpsReal.h b/source/mathops/edge/PatchEdgeDataNormOpsReal.h
+index 5b0a172..de67b22 100644
+--- a/source/mathops/edge/PatchEdgeDataNormOpsReal.h
++++ b/source/mathops/edge/PatchEdgeDataNormOpsReal.h
+@@ -68,7 +68,7 @@ public:
+     */
+    PatchEdgeDataNormOpsReal();
+ 
+-   virtual ~PatchEdgeDataNormOpsReal<DIM,TYPE>();
++   virtual ~PatchEdgeDataNormOpsReal();
+ 
+    /**
+     * Return the number of data values for the edge-centered data object
+diff --git a/source/mathops/edge/PatchEdgeDataOpsComplex.h b/source/mathops/edge/PatchEdgeDataOpsComplex.h
+index d065173..21c7de0 100644
+--- a/source/mathops/edge/PatchEdgeDataOpsComplex.h
++++ b/source/mathops/edge/PatchEdgeDataOpsComplex.h
+@@ -57,7 +57,7 @@ public:
+     */
+    PatchEdgeDataOpsComplex();
+ 
+-   virtual ~PatchEdgeDataOpsComplex<DIM>();
++   virtual ~PatchEdgeDataOpsComplex();
+ 
+    /**
+     * Copy dst data to src data over given box.
+diff --git a/source/mathops/edge/PatchEdgeDataOpsInteger.h b/source/mathops/edge/PatchEdgeDataOpsInteger.h
+index 3104013..c622643 100644
+--- a/source/mathops/edge/PatchEdgeDataOpsInteger.h
++++ b/source/mathops/edge/PatchEdgeDataOpsInteger.h
+@@ -52,7 +52,7 @@ public:
+     */
+    PatchEdgeDataOpsInteger();
+ 
+-   virtual ~PatchEdgeDataOpsInteger<DIM>();
++   virtual ~PatchEdgeDataOpsInteger();
+ 
+    /**
+     * Return the number of data values for the edge-centered data object
+diff --git a/source/mathops/edge/PatchEdgeDataOpsReal.h b/source/mathops/edge/PatchEdgeDataOpsReal.h
+index d806898..21d815c 100644
+--- a/source/mathops/edge/PatchEdgeDataOpsReal.h
++++ b/source/mathops/edge/PatchEdgeDataOpsReal.h
+@@ -62,7 +62,7 @@ public:
+     */
+    PatchEdgeDataOpsReal();
+ 
+-   virtual ~PatchEdgeDataOpsReal<DIM,TYPE>();
++   virtual ~PatchEdgeDataOpsReal();
+ 
+    /**
+     * Copy dst data to src data over given box.
+diff --git a/source/mathops/face/HierarchyFaceDataOpsComplex.h b/source/mathops/face/HierarchyFaceDataOpsComplex.h
+index 3b7a445..ef3696f 100644
+--- a/source/mathops/face/HierarchyFaceDataOpsComplex.h
++++ b/source/mathops/face/HierarchyFaceDataOpsComplex.h
+@@ -78,7 +78,7 @@ public:
+    /**
+     * Virtual destructor for the HierarchyFaceDataOpsComplex<DIM> class.
+     */
+-   virtual ~HierarchyFaceDataOpsComplex<DIM>();
++   virtual ~HierarchyFaceDataOpsComplex();
+ 
+    /**
+     * Reset patch hierarchy over which operations occur.
+diff --git a/source/mathops/face/HierarchyFaceDataOpsInteger.h b/source/mathops/face/HierarchyFaceDataOpsInteger.h
+index 0d5cdcc..fc910b6 100644
+--- a/source/mathops/face/HierarchyFaceDataOpsInteger.h
++++ b/source/mathops/face/HierarchyFaceDataOpsInteger.h
+@@ -77,7 +77,7 @@ public:
+    /**
+     * Virtual destructor for the HierarchyFaceDataOpsInteger<DIM> class.
+     */
+-   virtual ~HierarchyFaceDataOpsInteger<DIM>();
++   virtual ~HierarchyFaceDataOpsInteger();
+ 
+    /**
+     * Reset patch hierarchy over which operations occur.
+diff --git a/source/mathops/face/HierarchyFaceDataOpsReal.h b/source/mathops/face/HierarchyFaceDataOpsReal.h
+index 1a4c9d6..e0b3a95 100644
+--- a/source/mathops/face/HierarchyFaceDataOpsReal.h
++++ b/source/mathops/face/HierarchyFaceDataOpsReal.h
+@@ -78,7 +78,7 @@ public:
+    /**
+     * Virtual destructor for the HierarchyFaceDataOpsReal<DIM> class.
+     */
+-   virtual ~HierarchyFaceDataOpsReal<DIM,TYPE>();
++   virtual ~HierarchyFaceDataOpsReal();
+ 
+    /**
+     * Reset patch hierarchy over which operations occur.
+diff --git a/source/mathops/face/PatchFaceDataBasicOps.h b/source/mathops/face/PatchFaceDataBasicOps.h
+index 3f018a4..8de8098 100644
+--- a/source/mathops/face/PatchFaceDataBasicOps.h
++++ b/source/mathops/face/PatchFaceDataBasicOps.h
+@@ -56,7 +56,7 @@ public:
+     */
+    PatchFaceDataBasicOps();
+ 
+-   virtual ~PatchFaceDataBasicOps<DIM,TYPE>();
++   virtual ~PatchFaceDataBasicOps();
+ 
+    /**
+     * Set dst = alpha * src, elementwise.
+diff --git a/source/mathops/face/PatchFaceDataMiscellaneousOpsReal.h b/source/mathops/face/PatchFaceDataMiscellaneousOpsReal.h
+index 4df4689..7983223 100644
+--- a/source/mathops/face/PatchFaceDataMiscellaneousOpsReal.h
++++ b/source/mathops/face/PatchFaceDataMiscellaneousOpsReal.h
+@@ -68,7 +68,7 @@ public:
+     */
+    PatchFaceDataMiscellaneousOpsReal();
+ 
+-   virtual ~PatchFaceDataMiscellaneousOpsReal<DIM,TYPE>();
++   virtual ~PatchFaceDataMiscellaneousOpsReal();
+ 
+    /**
+     * Return 1 if \f$\|data2_i\| > 0\f$ and \f$data1_i * data2_i \leq 0\f$, for
+diff --git a/source/mathops/face/PatchFaceDataNormOpsComplex.h b/source/mathops/face/PatchFaceDataNormOpsComplex.h
+index 0e2c2e4..1469ce6 100644
+--- a/source/mathops/face/PatchFaceDataNormOpsComplex.h
++++ b/source/mathops/face/PatchFaceDataNormOpsComplex.h
+@@ -64,7 +64,7 @@ public:
+     */
+    PatchFaceDataNormOpsComplex();
+ 
+-   virtual ~PatchFaceDataNormOpsComplex<DIM>();
++   virtual ~PatchFaceDataNormOpsComplex();
+ 
+    /**
+     * Return the number of data values for the face-centered data object
+diff --git a/source/mathops/face/PatchFaceDataNormOpsReal.h b/source/mathops/face/PatchFaceDataNormOpsReal.h
+index 400376a..f30fcdf 100644
+--- a/source/mathops/face/PatchFaceDataNormOpsReal.h
++++ b/source/mathops/face/PatchFaceDataNormOpsReal.h
+@@ -68,7 +68,7 @@ public:
+     */
+    PatchFaceDataNormOpsReal();
+ 
+-   virtual ~PatchFaceDataNormOpsReal<DIM,TYPE>();
++   virtual ~PatchFaceDataNormOpsReal();
+ 
+    /**
+     * Return the number of data values for the face-centered data object
+diff --git a/source/mathops/face/PatchFaceDataOpsComplex.h b/source/mathops/face/PatchFaceDataOpsComplex.h
+index 1603e37..9ecc992 100644
+--- a/source/mathops/face/PatchFaceDataOpsComplex.h
++++ b/source/mathops/face/PatchFaceDataOpsComplex.h
+@@ -56,7 +56,7 @@ public:
+     */
+    PatchFaceDataOpsComplex();
+ 
+-   virtual ~PatchFaceDataOpsComplex<DIM>();
++   virtual ~PatchFaceDataOpsComplex();
+ 
+    /**
+     * Copy dst data to src data over given box.
+diff --git a/source/mathops/face/PatchFaceDataOpsInteger.h b/source/mathops/face/PatchFaceDataOpsInteger.h
+index f287f54..21b01ec 100644
+--- a/source/mathops/face/PatchFaceDataOpsInteger.h
++++ b/source/mathops/face/PatchFaceDataOpsInteger.h
+@@ -52,7 +52,7 @@ public:
+     */
+    PatchFaceDataOpsInteger();
+ 
+-   virtual ~PatchFaceDataOpsInteger<DIM>();
++   virtual ~PatchFaceDataOpsInteger();
+ 
+    /**
+     * Return the number of data values for the face-centered data object
+diff --git a/source/mathops/face/PatchFaceDataOpsReal.h b/source/mathops/face/PatchFaceDataOpsReal.h
+index 59a8867..a546a56 100644
+--- a/source/mathops/face/PatchFaceDataOpsReal.h
++++ b/source/mathops/face/PatchFaceDataOpsReal.h
+@@ -62,7 +62,7 @@ public:
+     */
+    PatchFaceDataOpsReal();
+ 
+-   virtual ~PatchFaceDataOpsReal<DIM,TYPE>();
++   virtual ~PatchFaceDataOpsReal();
+ 
+    /**
+     * Copy dst data to src data over given box.
+diff --git a/source/mathops/hierarchy/HierarchyDataOpsComplex.h b/source/mathops/hierarchy/HierarchyDataOpsComplex.h
+index f4643a3..9ddb1d5 100644
+--- a/source/mathops/hierarchy/HierarchyDataOpsComplex.h
++++ b/source/mathops/hierarchy/HierarchyDataOpsComplex.h
+@@ -55,7 +55,7 @@ public:
+    /**
+     * Virtual destructor for the HierarchyDataOpsComplex<DIM> class.
+     */
+-   virtual ~HierarchyDataOpsComplex<DIM>();
++   virtual ~HierarchyDataOpsComplex();
+ 
+    /**
+     * Reset patch hierarchy over which operations occur.
+diff --git a/source/mathops/hierarchy/HierarchyDataOpsInteger.h b/source/mathops/hierarchy/HierarchyDataOpsInteger.h
+index 2b1eec6..6a18a98 100644
+--- a/source/mathops/hierarchy/HierarchyDataOpsInteger.h
++++ b/source/mathops/hierarchy/HierarchyDataOpsInteger.h
+@@ -55,7 +55,7 @@ public:
+    /**
+     * Virtual destructor for the HierarchyDataOpsInteger<DIM> class.
+     */
+-   virtual ~HierarchyDataOpsInteger<DIM>();
++   virtual ~HierarchyDataOpsInteger();
+ 
+    /**
+     * Reset patch hierarchy over which operations occur.
+diff --git a/source/mathops/hierarchy/HierarchyDataOpsManager.h b/source/mathops/hierarchy/HierarchyDataOpsManager.h
+index 596799e..832435e 100644
+--- a/source/mathops/hierarchy/HierarchyDataOpsManager.h
++++ b/source/mathops/hierarchy/HierarchyDataOpsManager.h
+@@ -173,7 +173,7 @@ protected:
+     * The destructor for HierarchyDataOpsManager<DIM> is protected.  
+     * See the comments for the constructor.
+     */
+-   virtual ~HierarchyDataOpsManager<DIM>();
++   virtual ~HierarchyDataOpsManager();
+ 
+    /**
+     * Initialize Singleton instance with instance of subclass.  This function
+diff --git a/source/mathops/hierarchy/HierarchyDataOpsReal.h b/source/mathops/hierarchy/HierarchyDataOpsReal.h
+index 6b62f1b..a6e687b 100644
+--- a/source/mathops/hierarchy/HierarchyDataOpsReal.h
++++ b/source/mathops/hierarchy/HierarchyDataOpsReal.h
+@@ -56,7 +56,7 @@ public:
+    /**
+     * Virtual destructor for the HierarchyDataOpsReal<DIM> class.
+     */
+-   virtual ~HierarchyDataOpsReal<DIM,TYPE>();
++   virtual ~HierarchyDataOpsReal();
+ 
+    /**
+     * Reset patch hierarchy over which operations occur.
+@@ -329,6 +329,13 @@ public:
+                     const int vol_id = -1,
+ 		    bool local_only=false) const = 0;
+ 
++   /**
++    * Return the integral of the function represented by the data array.
++    * The return value is the sum \f$\sum_i ( data_i * vol_i )\f$.
++    */
++   virtual TYPE integral(const int data_id,
++                         const int vol_id) const = 0;
++
+    /**
+     * Return 1 if \f$\|data2_i\| > 0\f$ and \f$data1_i * data2_i \leq 0\f$, for
+     * any \f$i\f$ in the set of patch data indices, where \f$cvol_i > 0\f$.  Otherwise,
+diff --git a/source/mathops/node/HierarchyNodeDataOpsComplex.h b/source/mathops/node/HierarchyNodeDataOpsComplex.h
+index 2f52b80..1baf1a2 100644
+--- a/source/mathops/node/HierarchyNodeDataOpsComplex.h
++++ b/source/mathops/node/HierarchyNodeDataOpsComplex.h
+@@ -77,7 +77,7 @@ public:
+    /**
+     * Virtual destructor for the HierarchyNodeDataOpsComplex<DIM> class.
+     */
+-   virtual ~HierarchyNodeDataOpsComplex<DIM>();
++   virtual ~HierarchyNodeDataOpsComplex();
+ 
+    /**
+     * Reset patch hierarchy over which operations occur.
+diff --git a/source/mathops/node/HierarchyNodeDataOpsInteger.h b/source/mathops/node/HierarchyNodeDataOpsInteger.h
+index 6ef3b31..06c36d4 100644
+--- a/source/mathops/node/HierarchyNodeDataOpsInteger.h
++++ b/source/mathops/node/HierarchyNodeDataOpsInteger.h
+@@ -76,7 +76,7 @@ public:
+    /**
+     * Virtual destructor for the HierarchyNodeDataOpsInteger<DIM> class.
+     */
+-   virtual ~HierarchyNodeDataOpsInteger<DIM>();
++   virtual ~HierarchyNodeDataOpsInteger();
+ 
+    /**
+     * Reset patch hierarchy over which operations occur.
+diff --git a/source/mathops/node/HierarchyNodeDataOpsReal.h b/source/mathops/node/HierarchyNodeDataOpsReal.h
+index 2723e5e..1d335f5 100644
+--- a/source/mathops/node/HierarchyNodeDataOpsReal.h
++++ b/source/mathops/node/HierarchyNodeDataOpsReal.h
+@@ -80,7 +80,7 @@ public:
+    /**
+     * Virtual destructor for the HierarchyNodeDataOpsReal<DIM> class.
+     */
+-   virtual ~HierarchyNodeDataOpsReal<DIM,TYPE>();
++   virtual ~HierarchyNodeDataOpsReal();
+ 
+    /**
+     * Reset patch hierarchy over which operations occur.
+diff --git a/source/mathops/node/PatchNodeDataBasicOps.h b/source/mathops/node/PatchNodeDataBasicOps.h
+index d60d987..db56d8c 100644
+--- a/source/mathops/node/PatchNodeDataBasicOps.h
++++ b/source/mathops/node/PatchNodeDataBasicOps.h
+@@ -56,7 +56,7 @@ public:
+     */
+    PatchNodeDataBasicOps();
+ 
+-   virtual ~PatchNodeDataBasicOps<DIM,TYPE>();
++   virtual ~PatchNodeDataBasicOps();
+ 
+    /**
+     * Set dst = alpha * src, elementwise.
+diff --git a/source/mathops/node/PatchNodeDataMiscellaneousOpsReal.h b/source/mathops/node/PatchNodeDataMiscellaneousOpsReal.h
+index 05cc25d..31f81ae 100644
+--- a/source/mathops/node/PatchNodeDataMiscellaneousOpsReal.h
++++ b/source/mathops/node/PatchNodeDataMiscellaneousOpsReal.h
+@@ -68,7 +68,7 @@ public:
+     */
+    PatchNodeDataMiscellaneousOpsReal();
+ 
+-   virtual ~PatchNodeDataMiscellaneousOpsReal<DIM,TYPE>();
++   virtual ~PatchNodeDataMiscellaneousOpsReal();
+ 
+    /**
+     * Return 1 if \f$\|data2_i\| > 0\f$ and \f$data1_i * data2_i \leq 0\f$, for
+diff --git a/source/mathops/node/PatchNodeDataNormOpsComplex.h b/source/mathops/node/PatchNodeDataNormOpsComplex.h
+index afb014c..f82507e 100644
+--- a/source/mathops/node/PatchNodeDataNormOpsComplex.h
++++ b/source/mathops/node/PatchNodeDataNormOpsComplex.h
+@@ -64,7 +64,7 @@ public:
+     */
+    PatchNodeDataNormOpsComplex();
+ 
+-   virtual ~PatchNodeDataNormOpsComplex<DIM>();
++   virtual ~PatchNodeDataNormOpsComplex();
+ 
+    /**
+     * Return the number of data values for the node-centered data object
+diff --git a/source/mathops/node/PatchNodeDataNormOpsReal.h b/source/mathops/node/PatchNodeDataNormOpsReal.h
+index 14d450e..8d50780 100644
+--- a/source/mathops/node/PatchNodeDataNormOpsReal.h
++++ b/source/mathops/node/PatchNodeDataNormOpsReal.h
+@@ -68,7 +68,7 @@ public:
+     */
+    PatchNodeDataNormOpsReal();
+ 
+-   virtual ~PatchNodeDataNormOpsReal<DIM,TYPE>();
++   virtual ~PatchNodeDataNormOpsReal();
+ 
+    /**
+     * Return the number of data values for the node-centered data object
+diff --git a/source/mathops/node/PatchNodeDataOpsComplex.h b/source/mathops/node/PatchNodeDataOpsComplex.h
+index 1258ee1..7a0f8d1 100644
+--- a/source/mathops/node/PatchNodeDataOpsComplex.h
++++ b/source/mathops/node/PatchNodeDataOpsComplex.h
+@@ -57,7 +57,7 @@ public:
+     */
+    PatchNodeDataOpsComplex();
+ 
+-   virtual ~PatchNodeDataOpsComplex<DIM>();
++   virtual ~PatchNodeDataOpsComplex();
+ 
+    /**
+     * Copy dst data to src data over given box.
+diff --git a/source/mathops/node/PatchNodeDataOpsInteger.h b/source/mathops/node/PatchNodeDataOpsInteger.h
+index c1f4822..283d69d 100644
+--- a/source/mathops/node/PatchNodeDataOpsInteger.h
++++ b/source/mathops/node/PatchNodeDataOpsInteger.h
+@@ -52,7 +52,7 @@ public:
+     */
+    PatchNodeDataOpsInteger();
+ 
+-   virtual ~PatchNodeDataOpsInteger<DIM>();
++   virtual ~PatchNodeDataOpsInteger();
+ 
+    /**
+     * Return the number of data values for the node-centered data object
+diff --git a/source/mathops/node/PatchNodeDataOpsReal.h b/source/mathops/node/PatchNodeDataOpsReal.h
+index a31d46f..411e738 100644
+--- a/source/mathops/node/PatchNodeDataOpsReal.h
++++ b/source/mathops/node/PatchNodeDataOpsReal.h
+@@ -62,7 +62,7 @@ public:
+     */
+    PatchNodeDataOpsReal();
+ 
+-   virtual ~PatchNodeDataOpsReal<DIM,TYPE>();
++   virtual ~PatchNodeDataOpsReal();
+ 
+    /**
+     * Copy dst data to src data over given box.
+diff --git a/source/mathops/side/HierarchySideDataOpsComplex.h b/source/mathops/side/HierarchySideDataOpsComplex.h
+index fa1c9bc..8259df1 100644
+--- a/source/mathops/side/HierarchySideDataOpsComplex.h
++++ b/source/mathops/side/HierarchySideDataOpsComplex.h
+@@ -78,7 +78,7 @@ public:
+    /**
+     * Virtual destructor for the HierarchySideDataOpsComplex<DIM> class.
+     */
+-   virtual ~HierarchySideDataOpsComplex<DIM>();
++   virtual ~HierarchySideDataOpsComplex();
+ 
+    /**
+     * Reset patch hierarchy over which operations occur.
+diff --git a/source/mathops/side/HierarchySideDataOpsInteger.h b/source/mathops/side/HierarchySideDataOpsInteger.h
+index 438f44e..4e36ade 100644
+--- a/source/mathops/side/HierarchySideDataOpsInteger.h
++++ b/source/mathops/side/HierarchySideDataOpsInteger.h
+@@ -77,7 +77,7 @@ public:
+    /**
+     * Virtual destructor for the HierarchySideDataOpsInteger<DIM> class.
+     */
+-   virtual ~HierarchySideDataOpsInteger<DIM>();
++   virtual ~HierarchySideDataOpsInteger();
+ 
+    /**
+     * Reset patch hierarchy over which operations occur.
+diff --git a/source/mathops/side/HierarchySideDataOpsReal.h b/source/mathops/side/HierarchySideDataOpsReal.h
+index 7b23294..6c5ba04 100644
+--- a/source/mathops/side/HierarchySideDataOpsReal.h
++++ b/source/mathops/side/HierarchySideDataOpsReal.h
+@@ -76,7 +76,7 @@ public:
+    /**
+     * Virtual destructor for the HierarchySideDataOpsReal<DIM> class.
+     */
+-   virtual ~HierarchySideDataOpsReal<DIM,TYPE>();
++   virtual ~HierarchySideDataOpsReal();
+ 
+    /**
+     * Reset patch hierarchy over which operations occur.
+diff --git a/source/mathops/side/PatchSideDataBasicOps.h b/source/mathops/side/PatchSideDataBasicOps.h
+index 4850ac1..4e19fb4 100644
+--- a/source/mathops/side/PatchSideDataBasicOps.h
++++ b/source/mathops/side/PatchSideDataBasicOps.h
+@@ -56,7 +56,7 @@ public:
+     */
+    PatchSideDataBasicOps();
+ 
+-   virtual ~PatchSideDataBasicOps<DIM,TYPE>();
++   virtual ~PatchSideDataBasicOps();
+ 
+    /**
+     * Set dst = alpha * src, elementwise.
+diff --git a/source/mathops/side/PatchSideDataMiscellaneousOpsReal.h b/source/mathops/side/PatchSideDataMiscellaneousOpsReal.h
+index 8a8c8b6..6ba736c 100644
+--- a/source/mathops/side/PatchSideDataMiscellaneousOpsReal.h
++++ b/source/mathops/side/PatchSideDataMiscellaneousOpsReal.h
+@@ -68,7 +68,7 @@ public:
+     */
+    PatchSideDataMiscellaneousOpsReal();
+ 
+-   virtual ~PatchSideDataMiscellaneousOpsReal<DIM,TYPE>();
++   virtual ~PatchSideDataMiscellaneousOpsReal();
+ 
+    /**
+     * Return 1 if \f$\|data2_i\| > 0\f$ and \f$data1_i * data2_i \leq 0\f$, for
+diff --git a/source/mathops/side/PatchSideDataNormOpsComplex.h b/source/mathops/side/PatchSideDataNormOpsComplex.h
+index 416071c..d83c2e6 100644
+--- a/source/mathops/side/PatchSideDataNormOpsComplex.h
++++ b/source/mathops/side/PatchSideDataNormOpsComplex.h
+@@ -64,7 +64,7 @@ public:
+     */
+    PatchSideDataNormOpsComplex();
+ 
+-   virtual ~PatchSideDataNormOpsComplex<DIM>();
++   virtual ~PatchSideDataNormOpsComplex();
+ 
+    /**
+     * Return the number of data values for the side-centered data object
+diff --git a/source/mathops/side/PatchSideDataNormOpsReal.h b/source/mathops/side/PatchSideDataNormOpsReal.h
+index 0c9dc26..20a4c36 100644
+--- a/source/mathops/side/PatchSideDataNormOpsReal.h
++++ b/source/mathops/side/PatchSideDataNormOpsReal.h
+@@ -68,7 +68,7 @@ public:
+     */
+    PatchSideDataNormOpsReal();
+ 
+-   virtual ~PatchSideDataNormOpsReal<DIM,TYPE>();
++   virtual ~PatchSideDataNormOpsReal();
+ 
+    /**
+     * Return the number of data values for the side-centered data object
+diff --git a/source/mathops/side/PatchSideDataOpsComplex.h b/source/mathops/side/PatchSideDataOpsComplex.h
+index 67b02ca..8faba0c 100644
+--- a/source/mathops/side/PatchSideDataOpsComplex.h
++++ b/source/mathops/side/PatchSideDataOpsComplex.h
+@@ -57,7 +57,7 @@ public:
+     */
+    PatchSideDataOpsComplex();
+ 
+-   virtual ~PatchSideDataOpsComplex<DIM>();
++   virtual ~PatchSideDataOpsComplex();
+ 
+    /**
+     * Copy dst data to src data over given box.
+diff --git a/source/mathops/side/PatchSideDataOpsInteger.h b/source/mathops/side/PatchSideDataOpsInteger.h
+index fbb3c87..3205972 100644
+--- a/source/mathops/side/PatchSideDataOpsInteger.h
++++ b/source/mathops/side/PatchSideDataOpsInteger.h
+@@ -52,7 +52,7 @@ public:
+     */
+    PatchSideDataOpsInteger();
+ 
+-   virtual ~PatchSideDataOpsInteger<DIM>();
++   virtual ~PatchSideDataOpsInteger();
+ 
+    /**
+     * Return the number of data values for the side-centered data object
+diff --git a/source/mathops/side/PatchSideDataOpsReal.h b/source/mathops/side/PatchSideDataOpsReal.h
+index 3c44b26..0793f81 100644
+--- a/source/mathops/side/PatchSideDataOpsReal.h
++++ b/source/mathops/side/PatchSideDataOpsReal.h
+@@ -62,7 +62,7 @@ public:
+     */
+    PatchSideDataOpsReal();
+ 
+-   virtual ~PatchSideDataOpsReal<DIM,TYPE>();
++   virtual ~PatchSideDataOpsReal();
+ 
+    /**
+     * Copy dst data to src data over given box.
+diff --git a/source/mathops/templates/EmptyMathOpsX.C b/source/mathops/templates/EmptyMathOpsX.C
+index 4d14944..40a8801 100644
+--- a/source/mathops/templates/EmptyMathOpsX.C
++++ b/source/mathops/templates/EmptyMathOpsX.C
+@@ -14,6 +14,12 @@
+ namespace SAMRAI {
+    namespace math {
+       template<int DIM> class Empty {
++	 Empty() :
++	    something(0) 
++	 {
++	 }
++
++	 int something;
+       };
+ 
+       template class Empty< NDIM >;
+diff --git a/source/mesh/clustering/BergerRigoutsos.h b/source/mesh/clustering/BergerRigoutsos.h
+index 80133d7..9393860 100644
+--- a/source/mesh/clustering/BergerRigoutsos.h
++++ b/source/mesh/clustering/BergerRigoutsos.h
+@@ -74,7 +74,7 @@ public:
+    /*!
+     * Virtual destructor.
+     */
+-   virtual ~BergerRigoutsos<DIM>();
++   virtual ~BergerRigoutsos();
+ 
+ 
+    /*!
+diff --git a/source/mesh/clustering/BoxGeneratorStrategy.h b/source/mesh/clustering/BoxGeneratorStrategy.h
+index 97168b0..c9a3980 100644
+--- a/source/mesh/clustering/BoxGeneratorStrategy.h
++++ b/source/mesh/clustering/BoxGeneratorStrategy.h
+@@ -41,7 +41,7 @@ public:
+    /**
+     * Virtual destructor.
+     */
+-   virtual ~BoxGeneratorStrategy<DIM>();
++   virtual ~BoxGeneratorStrategy();
+ 
+    /**
+     * Create list of boxes whose union covers all integer tags on the patch 
+diff --git a/source/mesh/clustering/HistogramBox.h b/source/mesh/clustering/HistogramBox.h
+index c99ce5e..48e47a3 100644
+--- a/source/mesh/clustering/HistogramBox.h
++++ b/source/mesh/clustering/HistogramBox.h
+@@ -69,7 +69,7 @@ public:
+    /**
+     * Destructor for the HistogramBox.
+     */
+-   ~HistogramBox<DIM>();
++   ~HistogramBox();
+ 
+    /*!
+     * Given histogram information in a box region, determine smallest
+diff --git a/source/mesh/gridding/BaseGriddingAlgorithm.h b/source/mesh/gridding/BaseGriddingAlgorithm.h
+index 404c3e6..7d63550 100644
+--- a/source/mesh/gridding/BaseGriddingAlgorithm.h
++++ b/source/mesh/gridding/BaseGriddingAlgorithm.h
+@@ -45,7 +45,7 @@ public:
+    /*!
+     * @brief Virtual destructor for BaseGriddingAlgorithm<DIM>.
+     */
+-   virtual ~BaseGriddingAlgorithm<DIM>();
++   virtual ~BaseGriddingAlgorithm();
+ 
+    /*!
+     * @brief Construct the coarsest level in a hierarchy (i.e., level 0).
+diff --git a/source/mesh/gridding/GriddingAlgorithm.C b/source/mesh/gridding/GriddingAlgorithm.C
+index 18cc32f..792d323 100644
+--- a/source/mesh/gridding/GriddingAlgorithm.C
++++ b/source/mesh/gridding/GriddingAlgorithm.C
+@@ -1215,6 +1215,10 @@ template<int DIM> void GriddingAlgorithm<DIM>::regridFinerLevel(
+          hierarchy->makeNewPatchLevel(fine_level_number, ratio,
+                                       fine_boxes, mapping);
+ 
++         if (d_check_overlapping_patches != 'i') {
++            checkOverlappingPatches( hierarchy->getPatchLevel(fine_level_number) );
++         }
++
+          // "false" argument": const bool initial_time = false;
+          d_tag_init_strategy->initializeLevelData(hierarchy,
+                                                   fine_level_number,
+@@ -2624,7 +2628,7 @@ template<int DIM> void GriddingAlgorithm<DIM>::getFromInput(
+    }
+ 
+    d_check_overlapping_patches =
+-      db->getCharWithDefault( "check_overplapping_patches",
++      db->getCharWithDefault( "check_overlapping_patches",
+                               d_check_overlapping_patches );
+    if ( d_check_overlapping_patches != 'i' &&
+         d_check_overlapping_patches != 'w' &&
+diff --git a/source/mesh/gridding/GriddingAlgorithm.h b/source/mesh/gridding/GriddingAlgorithm.h
+index 5c87e21..2862a4c 100644
+--- a/source/mesh/gridding/GriddingAlgorithm.h
++++ b/source/mesh/gridding/GriddingAlgorithm.h
+@@ -335,7 +335,7 @@ public:
+    /*!
+     * Virtual destructor for GriddingAlgorithm<DIM>.
+     */
+-   virtual ~GriddingAlgorithm<DIM>();
++   virtual ~GriddingAlgorithm();
+ 
+    /*!
+     * This routine will attempt to construct the coarsest level in an AMR
+diff --git a/source/mesh/gridding/StandardTagAndInitStrategy.h b/source/mesh/gridding/StandardTagAndInitStrategy.h
+index 2870650..0b56f26 100644
+--- a/source/mesh/gridding/StandardTagAndInitStrategy.h
++++ b/source/mesh/gridding/StandardTagAndInitStrategy.h
+@@ -69,7 +69,7 @@ public:
+     * Empty destructor for 
+     * StandardTagAndInitStrategy<DIM>.
+     */
+-   virtual ~StandardTagAndInitStrategy<DIM>();
++   virtual ~StandardTagAndInitStrategy();
+ 
+    /**
+     * Determine time increment to advance data on level. The 
+diff --git a/source/mesh/gridding/StandardTagAndInitialize.C b/source/mesh/gridding/StandardTagAndInitialize.C
+index 66d7b1d..34b0824 100644
+--- a/source/mesh/gridding/StandardTagAndInitialize.C
++++ b/source/mesh/gridding/StandardTagAndInitialize.C
+@@ -287,7 +287,7 @@ template<int DIM> void StandardTagAndInitialize<DIM>::tagCellsForRefinement(
+    if (d_use_refine_boxes) {
+ 
+       hier::BoxArray<DIM> refine_boxes;
+-      getUserSuppliedRefineBoxes(refine_boxes, level_number, regrid_time); 
++      this->getUserSuppliedRefineBoxes(refine_boxes, level_number, regrid_time); 
+ 
+       tbox::Pointer< hier::PatchLevel<DIM> > level = 
+          hierarchy->getPatchLevel(level_number);
+diff --git a/source/mesh/gridding/StandardTagAndInitialize.h b/source/mesh/gridding/StandardTagAndInitialize.h
+index c5f5077..2e9a3e9 100644
+--- a/source/mesh/gridding/StandardTagAndInitialize.h
++++ b/source/mesh/gridding/StandardTagAndInitialize.h
+@@ -100,7 +100,7 @@ public:
+    /*!
+     * Virtual destructor for StandardTagAndInitialize<DIM>.
+     */
+-   virtual ~StandardTagAndInitialize<DIM>();
++   virtual ~StandardTagAndInitialize();
+ 
+    /*!
+     * Specifies whether the chosen method advances the solution data 
+diff --git a/source/mesh/gridding/TagAndInitializeStrategy.h b/source/mesh/gridding/TagAndInitializeStrategy.h
+index e11b909..5872cbb 100644
+--- a/source/mesh/gridding/TagAndInitializeStrategy.h
++++ b/source/mesh/gridding/TagAndInitializeStrategy.h
+@@ -123,7 +123,7 @@ public:
+    /*!
+     * Empty destructor for TagAndInitializeStrategy<DIM>.
+     */
+-   virtual ~TagAndInitializeStrategy<DIM>();
++   virtual ~TagAndInitializeStrategy();
+ 
+    /*!
+     * Return user supplied set of refine boxes for specified level number
+diff --git a/source/mesh/load_balance/LoadBalanceStrategy.h b/source/mesh/load_balance/LoadBalanceStrategy.h
+index 80c4c7d..4cbeaf0 100644
+--- a/source/mesh/load_balance/LoadBalanceStrategy.h
++++ b/source/mesh/load_balance/LoadBalanceStrategy.h
+@@ -46,7 +46,7 @@ public:
+    /*!
+     * This virtual destructor does nothing interesting.
+     */
+-   virtual ~LoadBalanceStrategy<DIM>();
++   virtual ~LoadBalanceStrategy();
+ 
+    /*!
+     * Indicate whether load balancing procedure for given level depends on
+diff --git a/source/mesh/load_balance/LoadBalancer.h b/source/mesh/load_balance/LoadBalancer.h
+index 5251fb2..81ddcd1 100644
+--- a/source/mesh/load_balance/LoadBalancer.h
++++ b/source/mesh/load_balance/LoadBalancer.h
+@@ -178,7 +178,7 @@ public:
+    /*!
+     * The virtual destructor releases all internal storage.
+     */
+-   virtual ~LoadBalancer<DIM>();
++   virtual ~LoadBalancer();
+ 
+    /*!
+     * Set the max workload factor for either the specified level or all
+diff --git a/source/mesh/multiblock/MultiblockGriddingAlgorithm.h b/source/mesh/multiblock/MultiblockGriddingAlgorithm.h
+index 8efc731..b779f36 100644
+--- a/source/mesh/multiblock/MultiblockGriddingAlgorithm.h
++++ b/source/mesh/multiblock/MultiblockGriddingAlgorithm.h
+@@ -297,7 +297,7 @@ public:
+    /*!
+     * Virtual destructor for MultiblockGriddingAlgorithm<DIM>.
+     */
+-   virtual ~MultiblockGriddingAlgorithm<DIM>();
++   virtual ~MultiblockGriddingAlgorithm();
+ 
+    /*!
+     * @brief Create level 0 for a hierarchy
+diff --git a/source/mesh/multiblock/MultiblockGriddingTagger.h b/source/mesh/multiblock/MultiblockGriddingTagger.h
+index 2789156..8f9da14 100644
+--- a/source/mesh/multiblock/MultiblockGriddingTagger.h
++++ b/source/mesh/multiblock/MultiblockGriddingTagger.h
+@@ -54,7 +54,7 @@ public:
+    /*!
+     * @brief The virtual destructor does nothing interesting.
+     */
+-   virtual ~MultiblockGriddingTagger<DIM>();
++   virtual ~MultiblockGriddingTagger();
+ 
+    /*!
+     * @brief Set the patch data index for tag data.  This routine
+diff --git a/source/mesh/templates/EmptyMeshX.C b/source/mesh/templates/EmptyMeshX.C
+index f9f513c..d065dff 100644
+--- a/source/mesh/templates/EmptyMeshX.C
++++ b/source/mesh/templates/EmptyMeshX.C
+@@ -14,6 +14,12 @@
+ namespace SAMRAI {
+    namespace mesh {
+       template<int DIM> class Empty {
++	 Empty() :
++	    something(0) 
++	 {
++	 }
++
++	 int something;
+       };
+ 
+       template class Empty< NDIM >;
+diff --git a/source/patchdata/array/ArrayDataIterator.h b/source/patchdata/array/ArrayDataIterator.h
+index 34b9102..331cf10 100644
+--- a/source/patchdata/array/ArrayDataIterator.h
++++ b/source/patchdata/array/ArrayDataIterator.h
+@@ -67,7 +67,7 @@ public:
+    /**
+     * Destructor for the array data iterator.
+     */
+-   ~ArrayDataIterator<DIM>();
++   ~ArrayDataIterator();
+ 
+    /**
+     * Extract the index corresponding to the iterator position in the box.
+diff --git a/source/patchdata/boxgeometry/CellGeometry.h b/source/patchdata/boxgeometry/CellGeometry.h
+index e4aa7bd..10d1c16 100644
+--- a/source/patchdata/boxgeometry/CellGeometry.h
++++ b/source/patchdata/boxgeometry/CellGeometry.h
+@@ -59,7 +59,7 @@ public:
+    /*!
+     * @brief The virtual destructor does nothing interesting.
+     */
+-   virtual ~CellGeometry<DIM>();
++   virtual ~CellGeometry();
+ 
+    /*!
+     * @brief Compute the overlap in cell-centered index space between 
+diff --git a/source/patchdata/boxgeometry/CellOverlap.h b/source/patchdata/boxgeometry/CellOverlap.h
+index 32103af..84d8625 100644
+--- a/source/patchdata/boxgeometry/CellOverlap.h
++++ b/source/patchdata/boxgeometry/CellOverlap.h
+@@ -48,7 +48,7 @@ public:
+     * The virtual destructor does nothing interesting except deallocate
+     * box data.
+     */
+-   virtual ~CellOverlap<DIM>();
++   virtual ~CellOverlap();
+ 
+    /**
+     * Return whether there is an empty intersection between the two
+diff --git a/source/patchdata/boxgeometry/EdgeGeometry.h b/source/patchdata/boxgeometry/EdgeGeometry.h
+index cf376e7..485cea9 100644
+--- a/source/patchdata/boxgeometry/EdgeGeometry.h
++++ b/source/patchdata/boxgeometry/EdgeGeometry.h
+@@ -62,7 +62,7 @@ public:
+    /*!
+     * @brief The virtual destructor does nothing interesting.
+     */
+-   virtual ~EdgeGeometry<DIM>();
++   virtual ~EdgeGeometry();
+ 
+    /*!
+     * @brief Compute the overlap in edge-centered index space between
+diff --git a/source/patchdata/boxgeometry/EdgeOverlap.h b/source/patchdata/boxgeometry/EdgeOverlap.h
+index 51f1a7c..046ce51 100644
+--- a/source/patchdata/boxgeometry/EdgeOverlap.h
++++ b/source/patchdata/boxgeometry/EdgeOverlap.h
+@@ -45,7 +45,7 @@ public:
+     * The virtual destructor does nothing interesting except deallocate
+     * box data.
+     */
+-   virtual ~EdgeOverlap<DIM>();
++   virtual ~EdgeOverlap();
+ 
+    /**
+     * Return whether there is an empty intersection between the two
+diff --git a/source/patchdata/boxgeometry/FaceGeometry.h b/source/patchdata/boxgeometry/FaceGeometry.h
+index 9e3202f..9719f00 100644
+--- a/source/patchdata/boxgeometry/FaceGeometry.h
++++ b/source/patchdata/boxgeometry/FaceGeometry.h
+@@ -64,7 +64,7 @@ public:
+    /*!
+     * @brief The virtual destructor does nothing interesting.
+     */
+-   virtual ~FaceGeometry<DIM>();
++   virtual ~FaceGeometry();
+ 
+    /*!
+     * @brief Compute the overlap in face-centered index space between
+diff --git a/source/patchdata/boxgeometry/FaceOverlap.h b/source/patchdata/boxgeometry/FaceOverlap.h
+index a696176..eb47bd3 100644
+--- a/source/patchdata/boxgeometry/FaceOverlap.h
++++ b/source/patchdata/boxgeometry/FaceOverlap.h
+@@ -45,7 +45,7 @@ public:
+     * The virtual destructor does nothing interesting except deallocate
+     * box data.
+     */
+-   virtual ~FaceOverlap<DIM>();
++   virtual ~FaceOverlap();
+ 
+    /**
+     * Return whether there is an empty intersection between the two
+diff --git a/source/patchdata/boxgeometry/NodeGeometry.h b/source/patchdata/boxgeometry/NodeGeometry.h
+index 860bbce..a125000 100644
+--- a/source/patchdata/boxgeometry/NodeGeometry.h
++++ b/source/patchdata/boxgeometry/NodeGeometry.h
+@@ -60,7 +60,7 @@ public:
+    /*!
+     * @brief The virtual destructor does nothing interesting.
+     */
+-   virtual ~NodeGeometry<DIM>();
++   virtual ~NodeGeometry();
+ 
+    /*!
+     * @brief Compute the overlap in node-centered index space between
+diff --git a/source/patchdata/boxgeometry/NodeOverlap.h b/source/patchdata/boxgeometry/NodeOverlap.h
+index 56df09f..fabef2f 100644
+--- a/source/patchdata/boxgeometry/NodeOverlap.h
++++ b/source/patchdata/boxgeometry/NodeOverlap.h
+@@ -45,7 +45,7 @@ public:
+     * The virtual destructor does nothing interesting except deallocate
+     * box data.
+     */
+-   virtual ~NodeOverlap<DIM>();
++   virtual ~NodeOverlap();
+ 
+    /**
+     * Return whether there is an empty intersection between the two
+diff --git a/source/patchdata/boxgeometry/OuteredgeGeometry.h b/source/patchdata/boxgeometry/OuteredgeGeometry.h
+index e069d03..1f51116 100644
+--- a/source/patchdata/boxgeometry/OuteredgeGeometry.h
++++ b/source/patchdata/boxgeometry/OuteredgeGeometry.h
+@@ -70,7 +70,7 @@ public:
+    /*!
+     * @brief The virtual destructor does nothing interesting.
+     */
+-   virtual ~OuteredgeGeometry<DIM>();
++   virtual ~OuteredgeGeometry();
+ 
+    /*!
+     * @brief Compute the overlap in edge-centered index space on the
+diff --git a/source/patchdata/boxgeometry/OuterfaceGeometry.h b/source/patchdata/boxgeometry/OuterfaceGeometry.h
+index 3720052..f8a05d5 100644
+--- a/source/patchdata/boxgeometry/OuterfaceGeometry.h
++++ b/source/patchdata/boxgeometry/OuterfaceGeometry.h
+@@ -58,7 +58,7 @@ public:
+    /*!
+     * @brief The virtual destructor does nothing interesting.
+     */
+-   virtual ~OuterfaceGeometry<DIM>();
++   virtual ~OuterfaceGeometry();
+  
+    /*!
+     * @brief Compute the overlap in face-centered index space on the
+diff --git a/source/patchdata/boxgeometry/OuternodeGeometry.h b/source/patchdata/boxgeometry/OuternodeGeometry.h
+index 2c3630c..6b8affb 100644
+--- a/source/patchdata/boxgeometry/OuternodeGeometry.h
++++ b/source/patchdata/boxgeometry/OuternodeGeometry.h
+@@ -58,7 +58,7 @@ public:
+    /*!
+     * @brief The virtual destructor does nothing interesting.
+     */
+-   virtual ~OuternodeGeometry<DIM>();
++   virtual ~OuternodeGeometry();
+  
+    /*!
+     * @brief Compute the overlap in node-centered index space on the
+diff --git a/source/patchdata/boxgeometry/OutersideGeometry.h b/source/patchdata/boxgeometry/OutersideGeometry.h
+index ae6df2a..d5f9d42 100644
+--- a/source/patchdata/boxgeometry/OutersideGeometry.h
++++ b/source/patchdata/boxgeometry/OutersideGeometry.h
+@@ -58,7 +58,7 @@ public:
+    /*!
+     * @brief The virtual destructor does nothing interesting.
+     */
+-   virtual ~OutersideGeometry<DIM>();
++   virtual ~OutersideGeometry();
+ 
+    /*!
+     * @brief Compute the overlap in side-centered index space on the
+diff --git a/source/patchdata/boxgeometry/SideGeometry.h b/source/patchdata/boxgeometry/SideGeometry.h
+index 85e4ccd..ceba9e8 100644
+--- a/source/patchdata/boxgeometry/SideGeometry.h
++++ b/source/patchdata/boxgeometry/SideGeometry.h
+@@ -64,7 +64,7 @@ public:
+    /*!
+     * @brief The virtual destructor does nothing interesting.
+     */
+-   virtual ~SideGeometry<DIM>();
++   virtual ~SideGeometry();
+ 
+    /*!
+     * @brief Compute the overlap in side-centered index space between
+diff --git a/source/patchdata/boxgeometry/SideOverlap.h b/source/patchdata/boxgeometry/SideOverlap.h
+index f129dc5..57854d3 100644
+--- a/source/patchdata/boxgeometry/SideOverlap.h
++++ b/source/patchdata/boxgeometry/SideOverlap.h
+@@ -45,7 +45,7 @@ public:
+     * The virtual destructor does nothing interesting except deallocate
+     * box data.
+     */
+-   virtual ~SideOverlap<DIM>();
++   virtual ~SideOverlap();
+ 
+    /**
+     * Return whether there is an empty intersection between the two
+diff --git a/source/patchdata/cell/CellData.h b/source/patchdata/cell/CellData.h
+index 968e5b2..8b42bf0 100644
+--- a/source/patchdata/cell/CellData.h
++++ b/source/patchdata/cell/CellData.h
+@@ -110,7 +110,7 @@ public:
+    /*!
+     * @brief The virtual destructor for a cell data object.
+     */
+-   virtual ~CellData<DIM,TYPE>();
++   virtual ~CellData();
+ 
+    /*!
+     * @brief Return the depth (e.g., the number of components in each spatial
+diff --git a/source/patchdata/cell/CellDataFactory.h b/source/patchdata/cell/CellDataFactory.h
+index 421991d..5001725 100644
+--- a/source/patchdata/cell/CellDataFactory.h
++++ b/source/patchdata/cell/CellDataFactory.h
+@@ -54,7 +54,7 @@ public:
+    /**
+     * Virtual destructor for the cell data factory class.
+     */
+-   virtual ~CellDataFactory<DIM,TYPE>();
++   virtual ~CellDataFactory();
+ 
+    /**
+     * @brief Abstract virtual function to clone a patch data factory.
+diff --git a/source/patchdata/cell/CellIndex.h b/source/patchdata/cell/CellIndex.h
+index 7455900..c37d994 100644
+--- a/source/patchdata/cell/CellIndex.h
++++ b/source/patchdata/cell/CellIndex.h
+@@ -54,7 +54,7 @@ public:
+    /**
+     * The cell index destructor does nothing interesting.
+     */
+-   ~CellIndex<DIM>();
++   ~CellIndex();
+ 
+    /**
+     * Plus-equals operator for a cell index and an integer vector.
+diff --git a/source/patchdata/cell/CellIterator.h b/source/patchdata/cell/CellIterator.h
+index 6859915..5451254 100644
+--- a/source/patchdata/cell/CellIterator.h
++++ b/source/patchdata/cell/CellIterator.h
+@@ -67,7 +67,7 @@ public:
+    /**
+     * Destructor for the cell iterator.
+     */
+-   ~CellIterator<DIM>();
++   ~CellIterator();
+ 
+    /**
+     * Extract the cell index corresponding to the iterator position in the box.
+diff --git a/source/patchdata/cell/CellVariable.h b/source/patchdata/cell/CellVariable.h
+index b09a30c..3a7ff35 100644
+--- a/source/patchdata/cell/CellVariable.h
++++ b/source/patchdata/cell/CellVariable.h
+@@ -50,7 +50,7 @@ public:
+    /*!
+     * @brief Virtual destructor for cell variable objects.
+     */
+-   virtual ~CellVariable<DIM,TYPE>();
++   virtual ~CellVariable();
+ 
+    /*!
+     * @brief Return true indicating that cell data quantities will always 
+diff --git a/source/patchdata/edge/EdgeData.h b/source/patchdata/edge/EdgeData.h
+index 755aaa6..89bdb0c 100644
+--- a/source/patchdata/edge/EdgeData.h
++++ b/source/patchdata/edge/EdgeData.h
+@@ -129,7 +129,7 @@ public:
+    /*!
+     * @brief The virtual destructor for an edge data object.
+     */
+-   virtual ~EdgeData<DIM,TYPE>();
++   virtual ~EdgeData();
+ 
+    /*!
+     * @brief Return the depth (e.g., the number of components in each spatial
+diff --git a/source/patchdata/edge/EdgeDataFactory.h b/source/patchdata/edge/EdgeDataFactory.h
+index 7aa5540..0acbbf3 100644
+--- a/source/patchdata/edge/EdgeDataFactory.h
++++ b/source/patchdata/edge/EdgeDataFactory.h
+@@ -55,7 +55,7 @@ public:
+    /**
+     * Virtual destructor for the edge data factory class.
+     */
+-   virtual ~EdgeDataFactory<DIM,TYPE>();
++   virtual ~EdgeDataFactory();
+ 
+    /**
+     * @brief Abstract virtual function to clone a patch data factory.
+diff --git a/source/patchdata/edge/EdgeIndex.h b/source/patchdata/edge/EdgeIndex.h
+index a567946..5907dc7 100644
+--- a/source/patchdata/edge/EdgeIndex.h
++++ b/source/patchdata/edge/EdgeIndex.h
+@@ -60,7 +60,7 @@ public:
+    /**
+     * The edge index destructor does nothing interesting.
+     */
+-   ~EdgeIndex<DIM>();
++   ~EdgeIndex();
+ 
+    /**
+     * Get the axis for which this edge index is defined (X=0, Y=1, Z=2).
+diff --git a/source/patchdata/edge/EdgeIterator.h b/source/patchdata/edge/EdgeIterator.h
+index a748544..fcee9ec 100644
+--- a/source/patchdata/edge/EdgeIterator.h
++++ b/source/patchdata/edge/EdgeIterator.h
+@@ -67,7 +67,7 @@ public:
+    /**
+     * Destructor for the edge iterator.
+     */
+-   ~EdgeIterator<DIM>();
++   ~EdgeIterator();
+ 
+    /**
+     * Extract the edge index corresponding to the iterator position in the box.
+diff --git a/source/patchdata/edge/EdgeVariable.h b/source/patchdata/edge/EdgeVariable.h
+index fda956e..fa2031c 100644
+--- a/source/patchdata/edge/EdgeVariable.h
++++ b/source/patchdata/edge/EdgeVariable.h
+@@ -55,7 +55,7 @@ public:
+    /*!
+     * @brief Virtual destructor for edge variable objects.
+     */
+-   virtual ~EdgeVariable<DIM,TYPE>();
++   virtual ~EdgeVariable();
+ 
+    /*!
+     * @brief Return boolean indicating which edge data values (coarse
+diff --git a/source/patchdata/face/FaceData.h b/source/patchdata/face/FaceData.h
+index 39043df..d5b1916 100644
+--- a/source/patchdata/face/FaceData.h
++++ b/source/patchdata/face/FaceData.h
+@@ -131,7 +131,7 @@ public:
+    /*!
+     * @brief The virtual destructor for a face data object.
+     */
+-   virtual ~FaceData<DIM,TYPE>();
++   virtual ~FaceData();
+ 
+    /*!
+     * @brief Return the depth (e.g., the number of components in each spatial
+diff --git a/source/patchdata/face/FaceDataFactory.h b/source/patchdata/face/FaceDataFactory.h
+index fb56484..0f0dcd3 100644
+--- a/source/patchdata/face/FaceDataFactory.h
++++ b/source/patchdata/face/FaceDataFactory.h
+@@ -55,7 +55,7 @@ public:
+    /**
+     * Virtual destructor for the face data factory class.
+     */
+-   virtual ~FaceDataFactory<DIM,TYPE>();
++   virtual ~FaceDataFactory();
+ 
+    /**
+     * @brief Abstract virtual function to clone a patch data factory.
+diff --git a/source/patchdata/face/FaceIndex.h b/source/patchdata/face/FaceIndex.h
+index d2a3af6..a43e47d 100644
+--- a/source/patchdata/face/FaceIndex.h
++++ b/source/patchdata/face/FaceIndex.h
+@@ -59,7 +59,7 @@ public:
+    /**
+     * The face index destructor does nothing interesting.
+     */
+-   ~FaceIndex<DIM>();
++   ~FaceIndex();
+ 
+    /**
+     * Get the axis for which this face index is defined (X=0, Y=1, Z=2).
+diff --git a/source/patchdata/face/FaceIterator.h b/source/patchdata/face/FaceIterator.h
+index e9e5d5f..6d5110d 100644
+--- a/source/patchdata/face/FaceIterator.h
++++ b/source/patchdata/face/FaceIterator.h
+@@ -67,7 +67,7 @@ public:
+    /**
+     * Destructor for the face iterator.
+     */
+-   ~FaceIterator<DIM>();
++   ~FaceIterator();
+ 
+    /**
+     * Extract the face index corresponding to the iterator position in the box.
+diff --git a/source/patchdata/face/FaceVariable.h b/source/patchdata/face/FaceVariable.h
+index ebe1480..5f7ef54 100644
+--- a/source/patchdata/face/FaceVariable.h
++++ b/source/patchdata/face/FaceVariable.h
+@@ -62,7 +62,7 @@ public:
+    /*!
+     * @brief Virtual destructor for face variable objects.
+     */
+-   virtual ~FaceVariable<DIM,TYPE>();
++   virtual ~FaceVariable();
+ 
+    /*!
+     * @brief Return boolean indicating which face data values (coarse
+diff --git a/source/patchdata/index/IndexData.I b/source/patchdata/index/IndexData.I
+index 572a46e..e914729 100644
+--- a/source/patchdata/index/IndexData.I
++++ b/source/patchdata/index/IndexData.I
+@@ -117,6 +117,20 @@ const TYPE& IndexIterator<DIM,TYPE,BOX_GEOMETRY>::operator()() const
+    return(*d_node->d_item);
+ }
+ 
++template<int DIM, class TYPE, class BOX_GEOMETRY>
++inline
++TYPE& IndexIterator<DIM,TYPE,BOX_GEOMETRY>::getItem()
++{
++   return(*d_node->d_item);
++}
++
++template<int DIM, class TYPE, class BOX_GEOMETRY>
++inline
++const hier::Index<DIM>& IndexIterator<DIM,TYPE,BOX_GEOMETRY>::getIndex() const
++{
++    return(d_node->d_index);
++}
++
+ template<int DIM, class TYPE, class BOX_GEOMETRY>
+ inline
+ IndexIterator<DIM,TYPE,BOX_GEOMETRY>::operator bool() const
+diff --git a/source/patchdata/index/IndexData.h b/source/patchdata/index/IndexData.h
+index 37b62fe..76b2d40 100644
+--- a/source/patchdata/index/IndexData.h
++++ b/source/patchdata/index/IndexData.h
+@@ -120,7 +120,7 @@ public:
+    /**
+     * The virtual destructor for an IndexData object.
+     */
+-   virtual ~IndexData<DIM,TYPE,BOX_GEOMETRY>();
++   virtual ~IndexData();
+ 
+    /**
+     * A fast copy between the source and destination.  All data is copied
+@@ -390,7 +390,7 @@ public:
+       IndexDataNode<DIM,TYPE,BOX_GEOMETRY> *n,
+       IndexDataNode<DIM,TYPE,BOX_GEOMETRY> *p);
+ 
+-   virtual ~IndexDataNode<DIM,TYPE,BOX_GEOMETRY>();
++   virtual ~IndexDataNode();
+ 
+ private:
+    hier::Index<DIM> d_index;
+@@ -451,7 +451,7 @@ public:
+    /**
+     * Destructor for the index list iterator.
+     */
+-   ~IndexIterator<DIM,TYPE,BOX_GEOMETRY>();
++   ~IndexIterator();
+ 
+    /**
+     * Return the current item in the irregular index set.
+@@ -577,7 +577,7 @@ public:
+    /**
+     * Destructor for the index list iterator.
+     */
+-   ~ConstIndexIterator<DIM,TYPE,BOX_GEOMETRY>();
++   ~ConstIndexIterator();
+ 
+    /**
+     * Return the current item in the irregular index set.
+diff --git a/source/patchdata/index/IndexDataFactory.h b/source/patchdata/index/IndexDataFactory.h
+index 151208f..9fdb4d4 100644
+--- a/source/patchdata/index/IndexDataFactory.h
++++ b/source/patchdata/index/IndexDataFactory.h
+@@ -51,7 +51,7 @@ public:
+    /**
+     * Virtual destructor for the irregular data factory class.
+     */
+-   virtual ~IndexDataFactory<DIM,TYPE,BOX_GEOMETRY>();
++   virtual ~IndexDataFactory();
+ 
+    /**
+     * @brief Abstract virtual function to clone a patch data factory.
+diff --git a/source/patchdata/index/IndexVariable.h b/source/patchdata/index/IndexVariable.h
+index 81098bf..c89a911 100644
+--- a/source/patchdata/index/IndexVariable.h
++++ b/source/patchdata/index/IndexVariable.h
+@@ -54,7 +54,7 @@ public:
+    /**
+     * Virtual destructor for index variable objects.
+     */
+-   virtual ~IndexVariable<DIM,TYPE,BOX_GEOMETRY>();
++   virtual ~IndexVariable();
+ 
+    /**
+     * Return true so that the index data quantities will always be treated as cell-
+diff --git a/source/patchdata/multiblock/MBDataUtilities.h b/source/patchdata/multiblock/MBDataUtilities.h
+index 9887ec4..1685e77 100644
+--- a/source/patchdata/multiblock/MBDataUtilities.h
++++ b/source/patchdata/multiblock/MBDataUtilities.h
+@@ -45,7 +45,7 @@ public:
+     */
+    MBDataUtilities();
+ 
+-   virtual ~MBDataUtilities<DIM,TYPE>();
++   virtual ~MBDataUtilities();
+ 
+    /*!
+     * @brief Translate and copy cell data from src to dst according the shift
+diff --git a/source/patchdata/multiblock/MultiblockCellDataTranslator.h b/source/patchdata/multiblock/MultiblockCellDataTranslator.h
+index 0d389da..61e9669 100644
+--- a/source/patchdata/multiblock/MultiblockCellDataTranslator.h
++++ b/source/patchdata/multiblock/MultiblockCellDataTranslator.h
+@@ -33,7 +33,7 @@ public:
+    /*!
+     * @brief The virtual destructor does nothing interesting.
+     */
+-   virtual ~MultiblockCellDataTranslator<DIM,TYPE>();
++   virtual ~MultiblockCellDataTranslator();
+ 
+    virtual void translateAndCopyData(
+       hier::Patch<DIM>& dst_patch,
+diff --git a/source/patchdata/multiblock/MultiblockEdgeDataTranslator.h b/source/patchdata/multiblock/MultiblockEdgeDataTranslator.h
+index 38a1abe..25ac43a 100644
+--- a/source/patchdata/multiblock/MultiblockEdgeDataTranslator.h
++++ b/source/patchdata/multiblock/MultiblockEdgeDataTranslator.h
+@@ -34,7 +34,7 @@ public:
+    /*!
+     * @brief The virtual destructor does nothing interesting.
+     */
+-   virtual ~MultiblockEdgeDataTranslator<DIM,TYPE>();
++   virtual ~MultiblockEdgeDataTranslator();
+ 
+    virtual void translateAndCopyData(
+       hier::Patch<DIM>& dst_patch,
+diff --git a/source/patchdata/multiblock/MultiblockFaceDataTranslator.h b/source/patchdata/multiblock/MultiblockFaceDataTranslator.h
+index 289b20c..be67671 100644
+--- a/source/patchdata/multiblock/MultiblockFaceDataTranslator.h
++++ b/source/patchdata/multiblock/MultiblockFaceDataTranslator.h
+@@ -34,7 +34,7 @@ public:
+    /*!
+     * @brief The virtual destructor does nothing interesting.
+     */
+-   virtual ~MultiblockFaceDataTranslator<DIM,TYPE>();
++   virtual ~MultiblockFaceDataTranslator();
+ 
+    virtual void translateAndCopyData(
+       hier::Patch<DIM>& dst_patch,
+diff --git a/source/patchdata/multiblock/MultiblockNodeDataTranslator.h b/source/patchdata/multiblock/MultiblockNodeDataTranslator.h
+index 0a6f2f6..7093e86 100644
+--- a/source/patchdata/multiblock/MultiblockNodeDataTranslator.h
++++ b/source/patchdata/multiblock/MultiblockNodeDataTranslator.h
+@@ -33,7 +33,7 @@ public:
+    /*!
+     * @brief The virtual destructor does nothing interesting.
+     */
+-   virtual ~MultiblockNodeDataTranslator<DIM,TYPE>();
++   virtual ~MultiblockNodeDataTranslator();
+ 
+    virtual void translateAndCopyData(
+       hier::Patch<DIM>& dst_patch,
+diff --git a/source/patchdata/multiblock/MultiblockSideDataTranslator.h b/source/patchdata/multiblock/MultiblockSideDataTranslator.h
+index e44f3c3..7852b24 100644
+--- a/source/patchdata/multiblock/MultiblockSideDataTranslator.h
++++ b/source/patchdata/multiblock/MultiblockSideDataTranslator.h
+@@ -34,7 +34,7 @@ public:
+    /*!
+     * @brief The virtual destructor does nothing interesting.
+     */
+-   virtual ~MultiblockSideDataTranslator<DIM,TYPE>();
++   virtual ~MultiblockSideDataTranslator();
+ 
+    virtual void translateAndCopyData(
+       hier::Patch<DIM>& dst_patch,
+diff --git a/source/patchdata/node/NodeData.h b/source/patchdata/node/NodeData.h
+index 8a11e83..ef49c89 100644
+--- a/source/patchdata/node/NodeData.h
++++ b/source/patchdata/node/NodeData.h
+@@ -111,7 +111,7 @@ public:
+    /*!
+     * @brief The virtual destructor for a node data object.
+     */
+-   virtual ~NodeData<DIM,TYPE>();
++   virtual ~NodeData();
+ 
+    /*!
+     * @brief Return the depth (e.g., the number of components in each spatial
+diff --git a/source/patchdata/node/NodeDataFactory.h b/source/patchdata/node/NodeDataFactory.h
+index f625f71..2dd9185 100644
+--- a/source/patchdata/node/NodeDataFactory.h
++++ b/source/patchdata/node/NodeDataFactory.h
+@@ -55,7 +55,7 @@ public:
+    /**
+     * Virtual destructor for the node data factory class.
+     */
+-   virtual ~NodeDataFactory<DIM,TYPE>();
++   virtual ~NodeDataFactory();
+ 
+    /**
+     * @brief Abstract virtual function to clone a patch data factory.
+diff --git a/source/patchdata/node/NodeIndex.h b/source/patchdata/node/NodeIndex.h
+index 4dceb6d..b35ed6b 100644
+--- a/source/patchdata/node/NodeIndex.h
++++ b/source/patchdata/node/NodeIndex.h
+@@ -85,7 +85,7 @@ public:
+    /**
+     * The node index destructor does nothing interesting.
+     */
+-   ~NodeIndex<DIM>();
++   ~NodeIndex();
+ 
+    /**
+     * Plus-equals operator for a node index and an integer vector.
+diff --git a/source/patchdata/node/NodeIterator.h b/source/patchdata/node/NodeIterator.h
+index 040a2fd..2aad1fd 100644
+--- a/source/patchdata/node/NodeIterator.h
++++ b/source/patchdata/node/NodeIterator.h
+@@ -67,7 +67,7 @@ public:
+    /**
+     * Destructor for the node iterator.
+     */
+-   ~NodeIterator<DIM>();
++   ~NodeIterator();
+ 
+    /**
+     * Extract the node index corresponding to the iterator position in the box.
+diff --git a/source/patchdata/node/NodeVariable.h b/source/patchdata/node/NodeVariable.h
+index b92a50d..0d4a3a9 100644
+--- a/source/patchdata/node/NodeVariable.h
++++ b/source/patchdata/node/NodeVariable.h
+@@ -55,7 +55,7 @@ public:
+    /*!
+     * @brief Virtual destructor for node variable objects.
+     */
+-   virtual ~NodeVariable<DIM,TYPE>();
++   virtual ~NodeVariable();
+ 
+    /*!
+     * @brief Return boolean indicating which node data values (coarse
+diff --git a/source/patchdata/operators/constant/cell/CellComplexConstantRefine.h b/source/patchdata/operators/constant/cell/CellComplexConstantRefine.h
+index 9732f31..9963522 100644
+--- a/source/patchdata/operators/constant/cell/CellComplexConstantRefine.h
++++ b/source/patchdata/operators/constant/cell/CellComplexConstantRefine.h
+@@ -49,7 +49,7 @@ public:
+    /**
+     * Uninteresting virtual destructor.
+     */
+-   virtual ~CellComplexConstantRefine<DIM>();
++   virtual ~CellComplexConstantRefine();
+ 
+    /**
+     * Return true if the variable and name string match cell-centered 
+diff --git a/source/patchdata/operators/constant/cell/CellDoubleConstantRefine.h b/source/patchdata/operators/constant/cell/CellDoubleConstantRefine.h
+index 59d959f..8f2cb34 100644
+--- a/source/patchdata/operators/constant/cell/CellDoubleConstantRefine.h
++++ b/source/patchdata/operators/constant/cell/CellDoubleConstantRefine.h
+@@ -49,7 +49,7 @@ public:
+    /**
+     * Uninteresting virtual destructor.
+     */
+-   virtual ~CellDoubleConstantRefine<DIM>();
++   virtual ~CellDoubleConstantRefine();
+ 
+    /**
+     * Return true if the variable and name string match cell-centered 
+diff --git a/source/patchdata/operators/constant/cell/CellFloatConstantRefine.h b/source/patchdata/operators/constant/cell/CellFloatConstantRefine.h
+index a446b49..74907d6 100644
+--- a/source/patchdata/operators/constant/cell/CellFloatConstantRefine.h
++++ b/source/patchdata/operators/constant/cell/CellFloatConstantRefine.h
+@@ -49,7 +49,7 @@ public:
+    /**
+     * Uninteresting virtual destructor.
+     */
+-   virtual ~CellFloatConstantRefine<DIM>();
++   virtual ~CellFloatConstantRefine();
+ 
+    /**
+     * Return true if the variable and name string match cell-centered 
+diff --git a/source/patchdata/operators/constant/cell/CellIntegerConstantRefine.h b/source/patchdata/operators/constant/cell/CellIntegerConstantRefine.h
+index 8740908..16c8b6a 100644
+--- a/source/patchdata/operators/constant/cell/CellIntegerConstantRefine.h
++++ b/source/patchdata/operators/constant/cell/CellIntegerConstantRefine.h
+@@ -49,7 +49,7 @@ public:
+    /**
+     * Uninteresting virtual destructor.
+     */
+-   virtual ~CellIntegerConstantRefine<DIM>();
++   virtual ~CellIntegerConstantRefine();
+ 
+    /**
+     * Return true if the variable and name string match cell-centered 
+diff --git a/source/patchdata/operators/constant/edge/EdgeComplexConstantRefine.h b/source/patchdata/operators/constant/edge/EdgeComplexConstantRefine.h
+index 1c3956e..9982558 100644
+--- a/source/patchdata/operators/constant/edge/EdgeComplexConstantRefine.h
++++ b/source/patchdata/operators/constant/edge/EdgeComplexConstantRefine.h
+@@ -49,7 +49,7 @@ public:
+    /**
+     * Uninteresting virtual destructor.
+     */
+-   virtual ~EdgeComplexConstantRefine<DIM>();
++   virtual ~EdgeComplexConstantRefine();
+ 
+    /**
+     * Return true if the variable and name string match edge-centered 
+diff --git a/source/patchdata/operators/constant/edge/EdgeDoubleConstantRefine.h b/source/patchdata/operators/constant/edge/EdgeDoubleConstantRefine.h
+index a3e536b..a7584ec 100644
+--- a/source/patchdata/operators/constant/edge/EdgeDoubleConstantRefine.h
++++ b/source/patchdata/operators/constant/edge/EdgeDoubleConstantRefine.h
+@@ -49,7 +49,7 @@ public:
+    /**
+     * Uninteresting virtual destructor.
+     */
+-   virtual ~EdgeDoubleConstantRefine<DIM>();
++   virtual ~EdgeDoubleConstantRefine();
+ 
+    /**
+     * Return true if the variable and name string match edge-centered 
+diff --git a/source/patchdata/operators/constant/edge/EdgeFloatConstantRefine.h b/source/patchdata/operators/constant/edge/EdgeFloatConstantRefine.h
+index 0256125..14c75d0 100644
+--- a/source/patchdata/operators/constant/edge/EdgeFloatConstantRefine.h
++++ b/source/patchdata/operators/constant/edge/EdgeFloatConstantRefine.h
+@@ -49,7 +49,7 @@ public:
+    /**
+     * Uninteresting virtual destructor.
+     */
+-   virtual ~EdgeFloatConstantRefine<DIM>();
++   virtual ~EdgeFloatConstantRefine();
+ 
+    /**
+     * Return true if the variable and name string match edge-centered 
+diff --git a/source/patchdata/operators/constant/edge/EdgeIntegerConstantRefine.h b/source/patchdata/operators/constant/edge/EdgeIntegerConstantRefine.h
+index ab365e9..bdf124f 100644
+--- a/source/patchdata/operators/constant/edge/EdgeIntegerConstantRefine.h
++++ b/source/patchdata/operators/constant/edge/EdgeIntegerConstantRefine.h
+@@ -49,7 +49,7 @@ public:
+    /**
+     * Uninteresting virtual destructor.
+     */
+-   virtual ~EdgeIntegerConstantRefine<DIM>();
++   virtual ~EdgeIntegerConstantRefine();
+ 
+    /**
+     * Return true if the variable and name string match edge-centered 
+diff --git a/source/patchdata/operators/constant/face/FaceComplexConstantRefine.h b/source/patchdata/operators/constant/face/FaceComplexConstantRefine.h
+index 1e69208..f020972 100644
+--- a/source/patchdata/operators/constant/face/FaceComplexConstantRefine.h
++++ b/source/patchdata/operators/constant/face/FaceComplexConstantRefine.h
+@@ -49,7 +49,7 @@ public:
+    /**
+     * Uninteresting virtual destructor.
+     */
+-   virtual ~FaceComplexConstantRefine<DIM>();
++   virtual ~FaceComplexConstantRefine();
+ 
+    /**
+     * Return true if the variable and name string match face-centered 
+diff --git a/source/patchdata/operators/constant/face/FaceDoubleConstantRefine.h b/source/patchdata/operators/constant/face/FaceDoubleConstantRefine.h
+index e6c1b68..275fd78 100644
+--- a/source/patchdata/operators/constant/face/FaceDoubleConstantRefine.h
++++ b/source/patchdata/operators/constant/face/FaceDoubleConstantRefine.h
+@@ -49,7 +49,7 @@ public:
+    /**
+     * Uninteresting virtual destructor.
+     */
+-   virtual ~FaceDoubleConstantRefine<DIM>();
++   virtual ~FaceDoubleConstantRefine();
+ 
+    /**
+     * Return true if the variable and name string match face-centered 
+diff --git a/source/patchdata/operators/constant/face/FaceFloatConstantRefine.h b/source/patchdata/operators/constant/face/FaceFloatConstantRefine.h
+index b0296ff..8465a67 100644
+--- a/source/patchdata/operators/constant/face/FaceFloatConstantRefine.h
++++ b/source/patchdata/operators/constant/face/FaceFloatConstantRefine.h
+@@ -49,7 +49,7 @@ public:
+    /**
+     * Uninteresting virtual destructor.
+     */
+-   virtual ~FaceFloatConstantRefine<DIM>();
++   virtual ~FaceFloatConstantRefine();
+ 
+    /**
+     * Return true if the variable and name string match face-centered 
+diff --git a/source/patchdata/operators/constant/face/FaceIntegerConstantRefine.h b/source/patchdata/operators/constant/face/FaceIntegerConstantRefine.h
+index 4a4d05e..8d203f2 100644
+--- a/source/patchdata/operators/constant/face/FaceIntegerConstantRefine.h
++++ b/source/patchdata/operators/constant/face/FaceIntegerConstantRefine.h
+@@ -49,7 +49,7 @@ public:
+    /**
+     * Uninteresting virtual destructor.
+     */
+-   virtual ~FaceIntegerConstantRefine<DIM>();
++   virtual ~FaceIntegerConstantRefine();
+ 
+    /**
+     * Return true if the variable and name string match face-centered 
+diff --git a/source/patchdata/operators/constant/node/NodeComplexInjection.h b/source/patchdata/operators/constant/node/NodeComplexInjection.h
+index 32df1a0..e2f4221 100644
+--- a/source/patchdata/operators/constant/node/NodeComplexInjection.h
++++ b/source/patchdata/operators/constant/node/NodeComplexInjection.h
+@@ -50,7 +50,7 @@ public:
+    /**
+     * Uninteresting virtual destructor.
+     */
+-   virtual ~NodeComplexInjection<DIM>();
++   virtual ~NodeComplexInjection();
+ 
+    /**
+     * Return true if the variable and name string match the node-centered
+diff --git a/source/patchdata/operators/constant/node/NodeDoubleInjection.h b/source/patchdata/operators/constant/node/NodeDoubleInjection.h
+index d170c4d..c4039d1 100644
+--- a/source/patchdata/operators/constant/node/NodeDoubleInjection.h
++++ b/source/patchdata/operators/constant/node/NodeDoubleInjection.h
+@@ -50,7 +50,7 @@ public:
+    /**
+     * Uninteresting virtual destructor.
+     */
+-   virtual ~NodeDoubleInjection<DIM>();
++   virtual ~NodeDoubleInjection();
+ 
+    /**
+     * Return true if the variable and name string match the node-centered
+diff --git a/source/patchdata/operators/constant/node/NodeFloatInjection.h b/source/patchdata/operators/constant/node/NodeFloatInjection.h
+index 2e4f76f..315860f 100644
+--- a/source/patchdata/operators/constant/node/NodeFloatInjection.h
++++ b/source/patchdata/operators/constant/node/NodeFloatInjection.h
+@@ -50,7 +50,7 @@ public:
+    /**
+     * Uninteresting virtual destructor.
+     */
+-   virtual ~NodeFloatInjection<DIM>();
++   virtual ~NodeFloatInjection();
+ 
+    /**
+     * Return true if the variable and name string match the node-centered
+diff --git a/source/patchdata/operators/constant/node/NodeIntegerInjection.h b/source/patchdata/operators/constant/node/NodeIntegerInjection.h
+index f868b12..a48e561 100644
+--- a/source/patchdata/operators/constant/node/NodeIntegerInjection.h
++++ b/source/patchdata/operators/constant/node/NodeIntegerInjection.h
+@@ -50,7 +50,7 @@ public:
+    /**
+     * Uninteresting virtual destructor.
+     */
+-   virtual ~NodeIntegerInjection<DIM>();
++   virtual ~NodeIntegerInjection();
+ 
+    /**
+     * Return true if the variable and name string match the node-centered
+diff --git a/source/patchdata/operators/constant/outerface/OuterfaceComplexConstantRefine.h b/source/patchdata/operators/constant/outerface/OuterfaceComplexConstantRefine.h
+index d5a0a24..d8ab1be 100644
+--- a/source/patchdata/operators/constant/outerface/OuterfaceComplexConstantRefine.h
++++ b/source/patchdata/operators/constant/outerface/OuterfaceComplexConstantRefine.h
+@@ -49,7 +49,7 @@ public:
+    /**
+     * Uninteresting virtual destructor.
+     */
+-   virtual ~OuterfaceComplexConstantRefine<DIM>();
++   virtual ~OuterfaceComplexConstantRefine();
+ 
+    /**
+     * Return true if the variable and name string match outerface 
+diff --git a/source/patchdata/operators/constant/outerface/OuterfaceDoubleConstantRefine.h b/source/patchdata/operators/constant/outerface/OuterfaceDoubleConstantRefine.h
+index 97853f7..a68d671 100644
+--- a/source/patchdata/operators/constant/outerface/OuterfaceDoubleConstantRefine.h
++++ b/source/patchdata/operators/constant/outerface/OuterfaceDoubleConstantRefine.h
+@@ -49,7 +49,7 @@ public:
+    /**
+     * Uninteresting virtual destructor.
+     */
+-   virtual ~OuterfaceDoubleConstantRefine<DIM>();
++   virtual ~OuterfaceDoubleConstantRefine();
+ 
+    /**
+     * Return true if the variable and name string match outerface 
+diff --git a/source/patchdata/operators/constant/outerface/OuterfaceFloatConstantRefine.h b/source/patchdata/operators/constant/outerface/OuterfaceFloatConstantRefine.h
+index ea7af34..63d8746 100644
+--- a/source/patchdata/operators/constant/outerface/OuterfaceFloatConstantRefine.h
++++ b/source/patchdata/operators/constant/outerface/OuterfaceFloatConstantRefine.h
+@@ -49,7 +49,7 @@ public:
+    /**
+     * Uninteresting virtual destructor.
+     */
+-   virtual ~OuterfaceFloatConstantRefine<DIM>();
++   virtual ~OuterfaceFloatConstantRefine();
+ 
+    /**
+     * Return true if the variable and name string match outerface 
+diff --git a/source/patchdata/operators/constant/outerface/OuterfaceIntegerConstantRefine.h b/source/patchdata/operators/constant/outerface/OuterfaceIntegerConstantRefine.h
+index 449dc90..78902e9 100644
+--- a/source/patchdata/operators/constant/outerface/OuterfaceIntegerConstantRefine.h
++++ b/source/patchdata/operators/constant/outerface/OuterfaceIntegerConstantRefine.h
+@@ -49,7 +49,7 @@ public:
+    /**
+     * Uninteresting virtual destructor.
+     */
+-   virtual ~OuterfaceIntegerConstantRefine<DIM>();
++   virtual ~OuterfaceIntegerConstantRefine();
+ 
+    /**
+     * Return true if the variable and name string match outerface 
+diff --git a/source/patchdata/operators/constant/outernode/OuternodeDoubleConstantCoarsen.h b/source/patchdata/operators/constant/outernode/OuternodeDoubleConstantCoarsen.h
+index 6fc08d6..5c002a7 100644
+--- a/source/patchdata/operators/constant/outernode/OuternodeDoubleConstantCoarsen.h
++++ b/source/patchdata/operators/constant/outernode/OuternodeDoubleConstantCoarsen.h
+@@ -54,7 +54,7 @@ public:
+    /*!
+     * @brief Uninteresting virtual destructor.
+     */
+-   virtual ~OuternodeDoubleConstantCoarsen<DIM>();
++   virtual ~OuternodeDoubleConstantCoarsen();
+ 
+    /*!
+     * @brief Determine if object is for coarsening the specified
+diff --git a/source/patchdata/operators/constant/side/SideComplexConstantRefine.h b/source/patchdata/operators/constant/side/SideComplexConstantRefine.h
+index 5397ec7..6332eaf 100644
+--- a/source/patchdata/operators/constant/side/SideComplexConstantRefine.h
++++ b/source/patchdata/operators/constant/side/SideComplexConstantRefine.h
+@@ -49,7 +49,7 @@ public:
+    /**
+     * Uninteresting virtual destructor.
+     */
+-   virtual ~SideComplexConstantRefine<DIM>();
++   virtual ~SideComplexConstantRefine();
+ 
+    /**
+     * Return true if the variable and name string match side-centered 
+diff --git a/source/patchdata/operators/constant/side/SideDoubleConstantRefine.h b/source/patchdata/operators/constant/side/SideDoubleConstantRefine.h
+index 921560b..a578638 100644
+--- a/source/patchdata/operators/constant/side/SideDoubleConstantRefine.h
++++ b/source/patchdata/operators/constant/side/SideDoubleConstantRefine.h
+@@ -49,7 +49,7 @@ public:
+    /**
+     * Uninteresting virtual destructor.
+     */
+-   virtual ~SideDoubleConstantRefine<DIM>();
++   virtual ~SideDoubleConstantRefine();
+ 
+    /**
+     * Return true if the variable and name string match side-centered 
+diff --git a/source/patchdata/operators/constant/side/SideFloatConstantRefine.h b/source/patchdata/operators/constant/side/SideFloatConstantRefine.h
+index 8a48fce..0d64001 100644
+--- a/source/patchdata/operators/constant/side/SideFloatConstantRefine.h
++++ b/source/patchdata/operators/constant/side/SideFloatConstantRefine.h
+@@ -49,7 +49,7 @@ public:
+    /**
+     * Uninteresting virtual destructor.
+     */
+-   virtual ~SideFloatConstantRefine<DIM>();
++   virtual ~SideFloatConstantRefine();
+ 
+    /**
+     * Return true if the variable and name string match side-centered 
+diff --git a/source/patchdata/operators/constant/side/SideIntegerConstantRefine.h b/source/patchdata/operators/constant/side/SideIntegerConstantRefine.h
+index 507de57..977d6bd 100644
+--- a/source/patchdata/operators/constant/side/SideIntegerConstantRefine.h
++++ b/source/patchdata/operators/constant/side/SideIntegerConstantRefine.h
+@@ -49,7 +49,7 @@ public:
+    /**
+     * Uninteresting virtual destructor.
+     */
+-   virtual ~SideIntegerConstantRefine<DIM>();
++   virtual ~SideIntegerConstantRefine();
+ 
+    /**
+     * Return true if the variable and name string match side-centered 
+diff --git a/source/patchdata/operators/time_interpolate/cell/CellComplexLinearTimeInterpolateOp.h b/source/patchdata/operators/time_interpolate/cell/CellComplexLinearTimeInterpolateOp.h
+index 3e09cce..669ccd7 100644
+--- a/source/patchdata/operators/time_interpolate/cell/CellComplexLinearTimeInterpolateOp.h
++++ b/source/patchdata/operators/time_interpolate/cell/CellComplexLinearTimeInterpolateOp.h
+@@ -46,7 +46,7 @@ public:
+    /**
+     * Uninteresting virtual destructor.
+     */
+-   virtual ~CellComplexLinearTimeInterpolateOp<DIM>();
++   virtual ~CellComplexLinearTimeInterpolateOp();
+ 
+    /**
+     * Return true if the variable and name string match the standard
+diff --git a/source/patchdata/operators/time_interpolate/cell/CellDoubleLinearTimeInterpolateOp.h b/source/patchdata/operators/time_interpolate/cell/CellDoubleLinearTimeInterpolateOp.h
+index fd80efc..883d22f 100644
+--- a/source/patchdata/operators/time_interpolate/cell/CellDoubleLinearTimeInterpolateOp.h
++++ b/source/patchdata/operators/time_interpolate/cell/CellDoubleLinearTimeInterpolateOp.h
+@@ -46,7 +46,7 @@ public:
+    /**
+     * Uninteresting virtual destructor.
+     */
+-   virtual ~CellDoubleLinearTimeInterpolateOp<DIM>();
++   virtual ~CellDoubleLinearTimeInterpolateOp();
+ 
+    /**
+     * Return true if the variable and name string match the standard
+diff --git a/source/patchdata/operators/time_interpolate/cell/CellFloatLinearTimeInterpolateOp.h b/source/patchdata/operators/time_interpolate/cell/CellFloatLinearTimeInterpolateOp.h
+index e7a16bc..bd52fb8 100644
+--- a/source/patchdata/operators/time_interpolate/cell/CellFloatLinearTimeInterpolateOp.h
++++ b/source/patchdata/operators/time_interpolate/cell/CellFloatLinearTimeInterpolateOp.h
+@@ -46,7 +46,7 @@ public:
+    /**
+     * Uninteresting virtual destructor.
+     */
+-   virtual ~CellFloatLinearTimeInterpolateOp<DIM>();
++   virtual ~CellFloatLinearTimeInterpolateOp();
+ 
+    /**
+     * Return true if the variable and name string match the standard
+diff --git a/source/patchdata/operators/time_interpolate/edge/EdgeComplexLinearTimeInterpolateOp.h b/source/patchdata/operators/time_interpolate/edge/EdgeComplexLinearTimeInterpolateOp.h
+index 39495f0..916038e 100644
+--- a/source/patchdata/operators/time_interpolate/edge/EdgeComplexLinearTimeInterpolateOp.h
++++ b/source/patchdata/operators/time_interpolate/edge/EdgeComplexLinearTimeInterpolateOp.h
+@@ -46,7 +46,7 @@ public:
+    /**
+     * Uninteresting virtual destructor.
+     */
+-   virtual ~EdgeComplexLinearTimeInterpolateOp<DIM>();
++   virtual ~EdgeComplexLinearTimeInterpolateOp();
+ 
+    /**
+     * Return true if the variable and name string match the standard
+diff --git a/source/patchdata/operators/time_interpolate/edge/EdgeDoubleLinearTimeInterpolateOp.h b/source/patchdata/operators/time_interpolate/edge/EdgeDoubleLinearTimeInterpolateOp.h
+index f371c3d..1fd80e1 100644
+--- a/source/patchdata/operators/time_interpolate/edge/EdgeDoubleLinearTimeInterpolateOp.h
++++ b/source/patchdata/operators/time_interpolate/edge/EdgeDoubleLinearTimeInterpolateOp.h
+@@ -46,7 +46,7 @@ public:
+    /**
+     * Uninteresting virtual destructor.
+     */
+-   virtual ~EdgeDoubleLinearTimeInterpolateOp<DIM>();
++   virtual ~EdgeDoubleLinearTimeInterpolateOp();
+ 
+    /**
+     * Return true if the variable and name string match the standard
+diff --git a/source/patchdata/operators/time_interpolate/edge/EdgeFloatLinearTimeInterpolateOp.h b/source/patchdata/operators/time_interpolate/edge/EdgeFloatLinearTimeInterpolateOp.h
+index 91efde8..3e86b56 100644
+--- a/source/patchdata/operators/time_interpolate/edge/EdgeFloatLinearTimeInterpolateOp.h
++++ b/source/patchdata/operators/time_interpolate/edge/EdgeFloatLinearTimeInterpolateOp.h
+@@ -46,7 +46,7 @@ public:
+    /**
+     * Uninteresting virtual destructor.
+     */
+-   virtual ~EdgeFloatLinearTimeInterpolateOp<DIM>();
++   virtual ~EdgeFloatLinearTimeInterpolateOp();
+ 
+    /**
+     * Return true if the variable and name string match the standard
+diff --git a/source/patchdata/operators/time_interpolate/face/FaceComplexLinearTimeInterpolateOp.h b/source/patchdata/operators/time_interpolate/face/FaceComplexLinearTimeInterpolateOp.h
+index f0edcb3..eeff61c 100644
+--- a/source/patchdata/operators/time_interpolate/face/FaceComplexLinearTimeInterpolateOp.h
++++ b/source/patchdata/operators/time_interpolate/face/FaceComplexLinearTimeInterpolateOp.h
+@@ -46,7 +46,7 @@ public:
+    /**
+     * Uninteresting virtual destructor.
+     */
+-   virtual ~FaceComplexLinearTimeInterpolateOp<DIM>();
++   virtual ~FaceComplexLinearTimeInterpolateOp();
+ 
+    /**
+     * Return true if the variable and name string match the standard
+diff --git a/source/patchdata/operators/time_interpolate/face/FaceDoubleLinearTimeInterpolateOp.h b/source/patchdata/operators/time_interpolate/face/FaceDoubleLinearTimeInterpolateOp.h
+index 1653e2a..d5e9da2 100644
+--- a/source/patchdata/operators/time_interpolate/face/FaceDoubleLinearTimeInterpolateOp.h
++++ b/source/patchdata/operators/time_interpolate/face/FaceDoubleLinearTimeInterpolateOp.h
+@@ -46,7 +46,7 @@ public:
+    /**
+     * Uninteresting virtual destructor.
+     */
+-   virtual ~FaceDoubleLinearTimeInterpolateOp<DIM>();
++   virtual ~FaceDoubleLinearTimeInterpolateOp();
+ 
+    /**
+     * Return true if the variable and name string match the standard
+diff --git a/source/patchdata/operators/time_interpolate/face/FaceFloatLinearTimeInterpolateOp.h b/source/patchdata/operators/time_interpolate/face/FaceFloatLinearTimeInterpolateOp.h
+index bd18aff..ca07533 100644
+--- a/source/patchdata/operators/time_interpolate/face/FaceFloatLinearTimeInterpolateOp.h
++++ b/source/patchdata/operators/time_interpolate/face/FaceFloatLinearTimeInterpolateOp.h
+@@ -46,7 +46,7 @@ public:
+    /**
+     * Uninteresting virtual destructor.
+     */
+-   virtual ~FaceFloatLinearTimeInterpolateOp<DIM>();
++   virtual ~FaceFloatLinearTimeInterpolateOp();
+ 
+    /**
+     * Return true if the variable and name string match the standard
+diff --git a/source/patchdata/operators/time_interpolate/node/NodeComplexLinearTimeInterpolateOp.h b/source/patchdata/operators/time_interpolate/node/NodeComplexLinearTimeInterpolateOp.h
+index 2540031..f1b41f7 100644
+--- a/source/patchdata/operators/time_interpolate/node/NodeComplexLinearTimeInterpolateOp.h
++++ b/source/patchdata/operators/time_interpolate/node/NodeComplexLinearTimeInterpolateOp.h
+@@ -46,7 +46,7 @@ public:
+    /**
+     * Uninteresting virtual destructor.
+     */
+-   virtual ~NodeComplexLinearTimeInterpolateOp<DIM>();
++   virtual ~NodeComplexLinearTimeInterpolateOp();
+ 
+    /**
+     * Return true if the variable and name string match the standard
+diff --git a/source/patchdata/operators/time_interpolate/node/NodeDoubleLinearTimeInterpolateOp.h b/source/patchdata/operators/time_interpolate/node/NodeDoubleLinearTimeInterpolateOp.h
+index 4e26af2..6ac6df9 100644
+--- a/source/patchdata/operators/time_interpolate/node/NodeDoubleLinearTimeInterpolateOp.h
++++ b/source/patchdata/operators/time_interpolate/node/NodeDoubleLinearTimeInterpolateOp.h
+@@ -46,7 +46,7 @@ public:
+    /**
+     * Uninteresting virtual destructor.
+     */
+-   virtual ~NodeDoubleLinearTimeInterpolateOp<DIM>();
++   virtual ~NodeDoubleLinearTimeInterpolateOp();
+ 
+    /**
+     * Return true if the variable and name string match the standard
+diff --git a/source/patchdata/operators/time_interpolate/node/NodeFloatLinearTimeInterpolateOp.h b/source/patchdata/operators/time_interpolate/node/NodeFloatLinearTimeInterpolateOp.h
+index bb5341e..1e1d66f 100644
+--- a/source/patchdata/operators/time_interpolate/node/NodeFloatLinearTimeInterpolateOp.h
++++ b/source/patchdata/operators/time_interpolate/node/NodeFloatLinearTimeInterpolateOp.h
+@@ -46,7 +46,7 @@ public:
+    /**
+     * Uninteresting virtual destructor.
+     */
+-   virtual ~NodeFloatLinearTimeInterpolateOp<DIM>();
++   virtual ~NodeFloatLinearTimeInterpolateOp();
+ 
+    /**
+     * Return true if the variable and name string match the standard
+diff --git a/source/patchdata/operators/time_interpolate/outerface/OuterfaceComplexLinearTimeInterpolateOp.h b/source/patchdata/operators/time_interpolate/outerface/OuterfaceComplexLinearTimeInterpolateOp.h
+index 5cdc9b6..a23da5c 100644
+--- a/source/patchdata/operators/time_interpolate/outerface/OuterfaceComplexLinearTimeInterpolateOp.h
++++ b/source/patchdata/operators/time_interpolate/outerface/OuterfaceComplexLinearTimeInterpolateOp.h
+@@ -48,7 +48,7 @@ public:
+    /**
+     * Uninteresting virtual destructor.
+     */
+-   virtual ~OuterfaceComplexLinearTimeInterpolateOp<DIM>();
++   virtual ~OuterfaceComplexLinearTimeInterpolateOp();
+ 
+    /**
+     * Return true if the variable and name string match the standard
+diff --git a/source/patchdata/operators/time_interpolate/outerface/OuterfaceDoubleLinearTimeInterpolateOp.h b/source/patchdata/operators/time_interpolate/outerface/OuterfaceDoubleLinearTimeInterpolateOp.h
+index 5c96f5d..62634de 100644
+--- a/source/patchdata/operators/time_interpolate/outerface/OuterfaceDoubleLinearTimeInterpolateOp.h
++++ b/source/patchdata/operators/time_interpolate/outerface/OuterfaceDoubleLinearTimeInterpolateOp.h
+@@ -48,7 +48,7 @@ public:
+    /**
+     * Uninteresting virtual destructor.
+     */
+-   virtual ~OuterfaceDoubleLinearTimeInterpolateOp<DIM>();
++   virtual ~OuterfaceDoubleLinearTimeInterpolateOp();
+ 
+    /**
+     * Return true if the variable and name string match the standard
+diff --git a/source/patchdata/operators/time_interpolate/outerface/OuterfaceFloatLinearTimeInterpolateOp.h b/source/patchdata/operators/time_interpolate/outerface/OuterfaceFloatLinearTimeInterpolateOp.h
+index c587869..63f63a2 100644
+--- a/source/patchdata/operators/time_interpolate/outerface/OuterfaceFloatLinearTimeInterpolateOp.h
++++ b/source/patchdata/operators/time_interpolate/outerface/OuterfaceFloatLinearTimeInterpolateOp.h
+@@ -48,7 +48,7 @@ public:
+    /**
+     * Uninteresting virtual destructor.
+     */
+-   virtual ~OuterfaceFloatLinearTimeInterpolateOp<DIM>();
++   virtual ~OuterfaceFloatLinearTimeInterpolateOp();
+ 
+    /**
+     * Return true if the variable and name string match the standard
+diff --git a/source/patchdata/operators/time_interpolate/outerside/OutersideComplexLinearTimeInterpolateOp.h b/source/patchdata/operators/time_interpolate/outerside/OutersideComplexLinearTimeInterpolateOp.h
+index 9de037d..99c401a 100644
+--- a/source/patchdata/operators/time_interpolate/outerside/OutersideComplexLinearTimeInterpolateOp.h
++++ b/source/patchdata/operators/time_interpolate/outerside/OutersideComplexLinearTimeInterpolateOp.h
+@@ -48,7 +48,7 @@ public:
+    /**
+     * Uninteresting virtual destructor.
+     */
+-   virtual ~OutersideComplexLinearTimeInterpolateOp<DIM>();
++   virtual ~OutersideComplexLinearTimeInterpolateOp();
+ 
+    /**
+     * Return true if the variable and name string match the standard
+diff --git a/source/patchdata/operators/time_interpolate/outerside/OutersideDoubleLinearTimeInterpolateOp.h b/source/patchdata/operators/time_interpolate/outerside/OutersideDoubleLinearTimeInterpolateOp.h
+index 2ba17e7..9864bac 100644
+--- a/source/patchdata/operators/time_interpolate/outerside/OutersideDoubleLinearTimeInterpolateOp.h
++++ b/source/patchdata/operators/time_interpolate/outerside/OutersideDoubleLinearTimeInterpolateOp.h
+@@ -48,7 +48,7 @@ public:
+    /**
+     * Uninteresting virtual destructor.
+     */
+-   virtual ~OutersideDoubleLinearTimeInterpolateOp<DIM>();
++   virtual ~OutersideDoubleLinearTimeInterpolateOp();
+ 
+    /**
+     * Return true if the variable and name string match the standard
+diff --git a/source/patchdata/operators/time_interpolate/outerside/OutersideFloatLinearTimeInterpolateOp.h b/source/patchdata/operators/time_interpolate/outerside/OutersideFloatLinearTimeInterpolateOp.h
+index fb1f521..41bebe7 100644
+--- a/source/patchdata/operators/time_interpolate/outerside/OutersideFloatLinearTimeInterpolateOp.h
++++ b/source/patchdata/operators/time_interpolate/outerside/OutersideFloatLinearTimeInterpolateOp.h
+@@ -48,7 +48,7 @@ public:
+    /**
+     * Uninteresting virtual destructor.
+     */
+-   virtual ~OutersideFloatLinearTimeInterpolateOp<DIM>();
++   virtual ~OutersideFloatLinearTimeInterpolateOp();
+ 
+    /**
+     * Return true if the variable and name string match the standard
+diff --git a/source/patchdata/operators/time_interpolate/side/SideComplexLinearTimeInterpolateOp.h b/source/patchdata/operators/time_interpolate/side/SideComplexLinearTimeInterpolateOp.h
+index 93dc0d5..ddc9ad7 100644
+--- a/source/patchdata/operators/time_interpolate/side/SideComplexLinearTimeInterpolateOp.h
++++ b/source/patchdata/operators/time_interpolate/side/SideComplexLinearTimeInterpolateOp.h
+@@ -46,7 +46,7 @@ public:
+    /**
+     * Uninteresting virtual destructor.
+     */
+-   virtual ~SideComplexLinearTimeInterpolateOp<DIM>();
++   virtual ~SideComplexLinearTimeInterpolateOp();
+ 
+    /**
+     * Return true if the variable and name string match the standard
+diff --git a/source/patchdata/operators/time_interpolate/side/SideDoubleLinearTimeInterpolateOp.h b/source/patchdata/operators/time_interpolate/side/SideDoubleLinearTimeInterpolateOp.h
+index 5d8a4a5..ce9a7be 100644
+--- a/source/patchdata/operators/time_interpolate/side/SideDoubleLinearTimeInterpolateOp.h
++++ b/source/patchdata/operators/time_interpolate/side/SideDoubleLinearTimeInterpolateOp.h
+@@ -46,7 +46,7 @@ public:
+    /**
+     * Uninteresting virtual destructor.
+     */
+-   virtual ~SideDoubleLinearTimeInterpolateOp<DIM>();
++   virtual ~SideDoubleLinearTimeInterpolateOp();
+ 
+    /**
+     * Return true if the variable and name string match the standard
+diff --git a/source/patchdata/operators/time_interpolate/side/SideFloatLinearTimeInterpolateOp.h b/source/patchdata/operators/time_interpolate/side/SideFloatLinearTimeInterpolateOp.h
+index 2119801..a033d4a 100644
+--- a/source/patchdata/operators/time_interpolate/side/SideFloatLinearTimeInterpolateOp.h
++++ b/source/patchdata/operators/time_interpolate/side/SideFloatLinearTimeInterpolateOp.h
+@@ -46,7 +46,7 @@ public:
+    /**
+     * Uninteresting virtual destructor.
+     */
+-   virtual ~SideFloatLinearTimeInterpolateOp<DIM>();
++   virtual ~SideFloatLinearTimeInterpolateOp();
+ 
+    /**
+     * Return true if the variable and name string match the standard
+diff --git a/source/patchdata/outeredge/OuteredgeData.h b/source/patchdata/outeredge/OuteredgeData.h
+index dc7d84d..adcd222 100644
+--- a/source/patchdata/outeredge/OuteredgeData.h
++++ b/source/patchdata/outeredge/OuteredgeData.h
+@@ -168,7 +168,7 @@ public:
+    /*!
+     * @brief Virtual destructor for a outeredge data object.
+     */
+-   virtual ~OuteredgeData<DIM,TYPE>();
++   virtual ~OuteredgeData();
+ 
+    /*!
+     * @brief Return the depth (i.e., the number of data values for 
+diff --git a/source/patchdata/outeredge/OuteredgeDataFactory.h b/source/patchdata/outeredge/OuteredgeDataFactory.h
+index ee36797..64747b8 100644
+--- a/source/patchdata/outeredge/OuteredgeDataFactory.h
++++ b/source/patchdata/outeredge/OuteredgeDataFactory.h
+@@ -55,7 +55,7 @@ public:
+     * @brief
+     * Virtual destructor for the outeredge data factory class.
+     */
+-   virtual ~OuteredgeDataFactory<DIM,TYPE>();
++   virtual ~OuteredgeDataFactory();
+ 
+    /**
+     * @brief Abstract virtual function to clone a patch data factory.
+diff --git a/source/patchdata/outeredge/OuteredgeVariable.h b/source/patchdata/outeredge/OuteredgeVariable.h
+index e01b58d..681c5a2 100644
+--- a/source/patchdata/outeredge/OuteredgeVariable.h
++++ b/source/patchdata/outeredge/OuteredgeVariable.h
+@@ -51,7 +51,7 @@ public:
+    /*!
+     * @brief Virtual destructor for outeredge variable objects.
+     */
+-   virtual ~OuteredgeVariable<DIM,TYPE>();
++   virtual ~OuteredgeVariable();
+ 
+    /*!
+     * @brief Return a boolean true value indicating that fine patch 
+diff --git a/source/patchdata/outerface/OuterfaceData.h b/source/patchdata/outerface/OuterfaceData.h
+index 7ad2335..3dd9d82 100644
+--- a/source/patchdata/outerface/OuterfaceData.h
++++ b/source/patchdata/outerface/OuterfaceData.h
+@@ -127,7 +127,7 @@ public:
+    /*!
+     * @brief Virtual destructor for a outerface data object.
+     */
+-   virtual ~OuterfaceData<DIM,TYPE>();
++   virtual ~OuterfaceData();
+ 
+    /*!
+     * @brief Return the depth (i.e., the number of data values for
+diff --git a/source/patchdata/outerface/OuterfaceDataFactory.h b/source/patchdata/outerface/OuterfaceDataFactory.h
+index 56705f7..1ff67b7 100644
+--- a/source/patchdata/outerface/OuterfaceDataFactory.h
++++ b/source/patchdata/outerface/OuterfaceDataFactory.h
+@@ -51,7 +51,7 @@ public:
+    /**
+     * Virtual destructor for the outerface data factory class.
+     */
+-   virtual ~OuterfaceDataFactory<DIM,TYPE>();
++   virtual ~OuterfaceDataFactory();
+ 
+    /**
+     * @brief Abstract virtual function to clone a patch data factory.
+diff --git a/source/patchdata/outerface/OuterfaceVariable.h b/source/patchdata/outerface/OuterfaceVariable.h
+index d55cbbd..4c07d2d 100644
+--- a/source/patchdata/outerface/OuterfaceVariable.h
++++ b/source/patchdata/outerface/OuterfaceVariable.h
+@@ -60,7 +60,7 @@ public:
+    /*!
+     * @brief Virtual destructor for outerface variable objects.
+     */
+-   virtual ~OuterfaceVariable<DIM,TYPE>();
++   virtual ~OuterfaceVariable();
+  
+    /*!
+     * @brief Return a boolean true value indicating that fine patch
+diff --git a/source/patchdata/outernode/OuternodeData.h b/source/patchdata/outernode/OuternodeData.h
+index 209a347..e1f5497 100644
+--- a/source/patchdata/outernode/OuternodeData.h
++++ b/source/patchdata/outernode/OuternodeData.h
+@@ -143,7 +143,7 @@ public:
+    /*!
+     * @brief Virtual destructor for a outernode data object.
+     */
+-   virtual ~OuternodeData<DIM,TYPE>();
++   virtual ~OuternodeData();
+ 
+    /*!
+     * @brief Return the depth (e.g., the number of components at each spatial
+diff --git a/source/patchdata/outernode/OuternodeDataFactory.h b/source/patchdata/outernode/OuternodeDataFactory.h
+index e70b76d..666ae99 100644
+--- a/source/patchdata/outernode/OuternodeDataFactory.h
++++ b/source/patchdata/outernode/OuternodeDataFactory.h
+@@ -55,7 +55,7 @@ public:
+     * @brief
+     * Virtual destructor for the outernode data factory class.
+     */
+-   virtual ~OuternodeDataFactory<DIM,TYPE>();
++   virtual ~OuternodeDataFactory();
+ 
+    /**
+     * @brief Abstract virtual function to clone a patch data factory.
+diff --git a/source/patchdata/outernode/OuternodeVariable.h b/source/patchdata/outernode/OuternodeVariable.h
+index b0824f1..3a8b90b 100644
+--- a/source/patchdata/outernode/OuternodeVariable.h
++++ b/source/patchdata/outernode/OuternodeVariable.h
+@@ -55,7 +55,7 @@ public:
+    /*!
+     * @brief Virtual destructor for outernode variable objects.
+     */
+-   virtual ~OuternodeVariable<DIM,TYPE>();
++   virtual ~OuternodeVariable();
+  
+    /*!
+     * @brief Return a boolean true value indicating that fine patch
+diff --git a/source/patchdata/outerside/OutersideData.h b/source/patchdata/outerside/OutersideData.h
+index cc6096f..fe413ae 100644
+--- a/source/patchdata/outerside/OutersideData.h
++++ b/source/patchdata/outerside/OutersideData.h
+@@ -128,7 +128,7 @@ public:
+    /*!
+     * @brief Virtual destructor for a outerside data object.
+     */
+-   virtual ~OutersideData<DIM,TYPE>();
++   virtual ~OutersideData();
+ 
+    /*!
+     * @brief Return the depth (i.e., the number of data values for
+diff --git a/source/patchdata/outerside/OutersideDataFactory.h b/source/patchdata/outerside/OutersideDataFactory.h
+index f4cb8d5..17ca380 100644
+--- a/source/patchdata/outerside/OutersideDataFactory.h
++++ b/source/patchdata/outerside/OutersideDataFactory.h
+@@ -51,7 +51,7 @@ public:
+    /**
+     * Virtual destructor for the outerside data factory class.
+     */
+-   virtual ~OutersideDataFactory<DIM,TYPE>();
++   virtual ~OutersideDataFactory();
+ 
+    /**
+     * @brief Abstract virtual function to clone a patch data factory.
+diff --git a/source/patchdata/outerside/OutersideVariable.h b/source/patchdata/outerside/OutersideVariable.h
+index 05ad5d4..fd297f9 100644
+--- a/source/patchdata/outerside/OutersideVariable.h
++++ b/source/patchdata/outerside/OutersideVariable.h
+@@ -60,7 +60,7 @@ public:
+    /*!
+     * @brief Virtual destructor for outerside variable objects.
+     */
+-   virtual ~OutersideVariable<DIM,TYPE>();
++   virtual ~OutersideVariable();
+ 
+    /*!
+     * @brief Return a boolean true value indicating that fine patch
+diff --git a/source/patchdata/side/SideData.h b/source/patchdata/side/SideData.h
+index 608eac6..2a59d2b 100644
+--- a/source/patchdata/side/SideData.h
++++ b/source/patchdata/side/SideData.h
+@@ -143,7 +143,7 @@ public:
+    /*!
+     * @brief The virtual destructor for a side data object.
+     */
+-   virtual ~SideData<DIM,TYPE>();
++   virtual ~SideData();
+ 
+    /*!
+     * @brief Return constant reference to vector describing which coordinate
+diff --git a/source/patchdata/side/SideDataFactory.h b/source/patchdata/side/SideDataFactory.h
+index dba3eda..5d1a46f 100644
+--- a/source/patchdata/side/SideDataFactory.h
++++ b/source/patchdata/side/SideDataFactory.h
+@@ -67,7 +67,7 @@ public:
+    /**
+     * Virtual destructor for the side data factory class.
+     */
+-   virtual ~SideDataFactory<DIM,TYPE>();
++   virtual ~SideDataFactory();
+ 
+    /**
+     * @brief Abstract virtual function to clone a patch data factory.
+diff --git a/source/patchdata/side/SideIndex.h b/source/patchdata/side/SideIndex.h
+index 74c7ac2..3cb152c 100644
+--- a/source/patchdata/side/SideIndex.h
++++ b/source/patchdata/side/SideIndex.h
+@@ -59,7 +59,7 @@ public:
+    /**
+     * The side index destructor does nothing interesting.
+     */
+-   ~SideIndex<DIM>();
++   ~SideIndex();
+ 
+    /**
+     * Get the axis for which this side index is defined (X=0, Y=1, Z=2).
+diff --git a/source/patchdata/side/SideIterator.h b/source/patchdata/side/SideIterator.h
+index b2c13df..ac0dcd2 100644
+--- a/source/patchdata/side/SideIterator.h
++++ b/source/patchdata/side/SideIterator.h
+@@ -67,7 +67,7 @@ public:
+    /**
+     * Destructor for the side iterator.
+     */
+-   ~SideIterator<DIM>();
++   ~SideIterator();
+ 
+    /**
+     * Extract the side index corresponding to the iterator position in the box.
+diff --git a/source/patchdata/side/SideVariable.C b/source/patchdata/side/SideVariable.C
+index 190dfd9..c92215c 100644
+--- a/source/patchdata/side/SideVariable.C
++++ b/source/patchdata/side/SideVariable.C
+@@ -54,7 +54,7 @@ SideVariable<DIM,TYPE>::SideVariable(
+       for (int id = 0; id < DIM; id++) {
+          d_directions(id) = ( (direction == id) ? 1 : 0 );  
+       }  
+-      setPatchDataFactory(new SideDataFactory<DIM,TYPE>(
++      this->setPatchDataFactory(new SideDataFactory<DIM,TYPE>(
+                              depth,
+                              hier::IntVector<DIM>(0),
+                              fine_boundary_represents_var,
+diff --git a/source/patchdata/side/SideVariable.h b/source/patchdata/side/SideVariable.h
+index 99bd694..2ead01f 100644
+--- a/source/patchdata/side/SideVariable.h
++++ b/source/patchdata/side/SideVariable.h
+@@ -70,7 +70,7 @@ public:
+    /*!
+     * @brief Virtual destructor for side variable objects.
+     */
+-   virtual ~SideVariable<DIM,TYPE>();
++   virtual ~SideVariable();
+ 
+    /*!
+     * @brief Return constant reference to vector describing which coordinate
+diff --git a/source/patchdata/templates/EmptyPatchDataX.C b/source/patchdata/templates/EmptyPatchDataX.C
+index d696aee..5d9f665 100644
+--- a/source/patchdata/templates/EmptyPatchDataX.C
++++ b/source/patchdata/templates/EmptyPatchDataX.C
+@@ -14,6 +14,12 @@
+ namespace SAMRAI {
+    namespace pdat {
+       template<int DIM> class Empty {
++	 Empty() :
++	    something(0) 
++	 {
++	 }
++
++	 int something;
+       };
+ 
+       template class Empty< NDIM >;
+diff --git a/source/solvers/FAC/FACOperatorStrategy.h b/source/solvers/FAC/FACOperatorStrategy.h
+index 09f1d08..29aac61 100644
+--- a/source/solvers/FAC/FACOperatorStrategy.h
++++ b/source/solvers/FAC/FACOperatorStrategy.h
+@@ -49,7 +49,7 @@ public:
+    /*!
+     * @brief Virtual destructor.
+     */
+-   virtual ~FACOperatorStrategy<DIM>();
++   virtual ~FACOperatorStrategy();
+ 
+    //@{
+    /*!
+diff --git a/source/solvers/FAC/FACPreconditioner.C b/source/solvers/FAC/FACPreconditioner.C
+index af374cd..5843f17 100644
+--- a/source/solvers/FAC/FACPreconditioner.C
++++ b/source/solvers/FAC/FACPreconditioner.C
+@@ -152,18 +152,22 @@ template<int DIM> void FACPreconditioner<DIM>::deallocateSolverState( )
+       d_patch_hierarchy.setNull();
+ 
+       if ( d_error_vector ) {
++         d_error_vector->resetLevels(d_error_vector->getCoarsestLevelNumber(), std::min(d_error_vector->getFinestLevelNumber(),d_error_vector->getPatchHierarchy()->getFinestLevelNumber()));
+          d_error_vector->freeVectorComponents();
+          d_error_vector.setNull();
+       }
+       if ( d_tmp_error ) {
++         d_tmp_error->resetLevels(d_tmp_error->getCoarsestLevelNumber(), std::min(d_tmp_error->getFinestLevelNumber(),d_tmp_error->getPatchHierarchy()->getFinestLevelNumber()));
+          d_tmp_error->freeVectorComponents();
+          d_tmp_error.setNull();
+       }
+       if ( d_residual_vector ) {
++         d_residual_vector->resetLevels(d_residual_vector->getCoarsestLevelNumber(), std::min(d_residual_vector->getFinestLevelNumber(),d_residual_vector->getPatchHierarchy()->getFinestLevelNumber()));
+          d_residual_vector->freeVectorComponents();
+          d_residual_vector.setNull();
+       }
+       if ( d_tmp_residual ) {
++         d_tmp_residual->resetLevels(d_tmp_residual->getCoarsestLevelNumber(), std::min(d_tmp_residual->getFinestLevelNumber(),d_tmp_residual->getPatchHierarchy()->getFinestLevelNumber()));
+          d_tmp_residual->freeVectorComponents();
+          d_tmp_residual.setNull();
+       }
+diff --git a/source/solvers/FAC/FACPreconditioner.h b/source/solvers/FAC/FACPreconditioner.h
+index b0de597..877f56e 100644
+--- a/source/solvers/FAC/FACPreconditioner.h
++++ b/source/solvers/FAC/FACPreconditioner.h
+@@ -71,7 +71,7 @@ public:
+    /*!
+     * Virtual destructor.
+     */
+-   virtual ~FACPreconditioner<DIM>();
++   virtual ~FACPreconditioner();
+ 
+    /*!
+     * @brief Solve linear system Au=f using the FAC algorithm.
+diff --git a/source/solvers/nonlinear/NonlinearSolverStrategy.h b/source/solvers/nonlinear/NonlinearSolverStrategy.h
+index 4dcae63..23938bf 100644
+--- a/source/solvers/nonlinear/NonlinearSolverStrategy.h
++++ b/source/solvers/nonlinear/NonlinearSolverStrategy.h
+@@ -42,7 +42,7 @@ public:
+    /**
+     * Empty constructor for algs::NonlinearSolverStrategy.
+     */
+-   virtual ~NonlinearSolverStrategy<DIM>();
++   virtual ~NonlinearSolverStrategy();
+ 
+    /**
+     * Initialize the solver state.  The vector argument represents the
+diff --git a/source/solvers/packages/petsc/SNES_SAMRAIContext.h b/source/solvers/packages/petsc/SNES_SAMRAIContext.h
+index 6db0ea5..6a1765d 100644
+--- a/source/solvers/packages/petsc/SNES_SAMRAIContext.h
++++ b/source/solvers/packages/petsc/SNES_SAMRAIContext.h
+@@ -229,7 +229,7 @@ public:
+     * Destructor for solve_SNES_SAMRAIContext destroys the SNES 
+     * and the PETSc solution vector wrapper.
+     */
+-   ~SNES_SAMRAIContext<DIM>();
++   ~SNES_SAMRAIContext();
+ 
+    /*!
+     * Return the PETSc nonlinear solver object.
+diff --git a/source/solvers/packages/sundials/kinsol/KINSOL_SAMRAIContext.h b/source/solvers/packages/sundials/kinsol/KINSOL_SAMRAIContext.h
+index 41ccb83..31c7d7f 100644
+--- a/source/solvers/packages/sundials/kinsol/KINSOL_SAMRAIContext.h
++++ b/source/solvers/packages/sundials/kinsol/KINSOL_SAMRAIContext.h
+@@ -175,7 +175,7 @@ public:
+     * Destructor for algs::KINSOL_SAMRAIContext destroys the KINSOL 
+     * C++ wrapper object and the KINSOL solution vector wrapper.
+     */
+-   ~KINSOL_SAMRAIContext<DIM>();
++   ~KINSOL_SAMRAIContext();
+ 
+    /**
+     * Initialize the state of KINSOL based on vector argument representing 
+diff --git a/source/solvers/poisson/CartesianRobinBcHelper.h b/source/solvers/poisson/CartesianRobinBcHelper.h
+index 8f3ebc8..49599d6 100644
+--- a/source/solvers/poisson/CartesianRobinBcHelper.h
++++ b/source/solvers/poisson/CartesianRobinBcHelper.h
+@@ -93,7 +93,7 @@ public:
+    /*!
+     * @brief Destructor.
+     */
+-   virtual ~CartesianRobinBcHelper<DIM>(void);
++   virtual ~CartesianRobinBcHelper();
+ 
+ 
+ 
+diff --git a/source/solvers/poisson/CellPoissonFACOps.h b/source/solvers/poisson/CellPoissonFACOps.h
+index 531969d..42e0a27 100644
+--- a/source/solvers/poisson/CellPoissonFACOps.h
++++ b/source/solvers/poisson/CellPoissonFACOps.h
+@@ -170,7 +170,7 @@ public:
+     *
+     * Deallocate internal data.
+     */
+-   ~CellPoissonFACOps<DIM>(void);
++   ~CellPoissonFACOps();
+ 
+ 
+ 
+diff --git a/source/solvers/poisson/CellPoissonFACSolver.h b/source/solvers/poisson/CellPoissonFACSolver.h
+index ed5b883..17a637b 100644
+--- a/source/solvers/poisson/CellPoissonFACSolver.h
++++ b/source/solvers/poisson/CellPoissonFACSolver.h
+@@ -138,7 +138,7 @@ public:
+    /*!
+     * @brief Destructor.
+     */
+-   ~CellPoissonFACSolver<DIM>(void);
++   ~CellPoissonFACSolver();
+ 
+ 
+ 
+diff --git a/source/solvers/poisson/CellPoissonHypreSolver.h b/source/solvers/poisson/CellPoissonHypreSolver.h
+index 4029f69..4cf87ae 100644
+--- a/source/solvers/poisson/CellPoissonHypreSolver.h
++++ b/source/solvers/poisson/CellPoissonHypreSolver.h
+@@ -115,7 +115,7 @@ public:
+    /*!
+     * The Poisson destructor releases all internally managed data.
+     */
+-   ~CellPoissonHypreSolver<DIM>();
++   ~CellPoissonHypreSolver();
+ 
+    /*!
+     * @brief Initialize to a given hierarchy.
+diff --git a/source/solvers/poisson/GhostCellRobinBcCoefs.h b/source/solvers/poisson/GhostCellRobinBcCoefs.h
+index ab8bdc6..a9f32b0 100644
+--- a/source/solvers/poisson/GhostCellRobinBcCoefs.h
++++ b/source/solvers/poisson/GhostCellRobinBcCoefs.h
+@@ -83,7 +83,7 @@ public:
+    /*!
+     * @brief Destructor.
+     */
+-   virtual ~GhostCellRobinBcCoefs<DIM>(void);
++   virtual ~GhostCellRobinBcCoefs();
+ 
+ 
+    /*!
+diff --git a/source/solvers/poisson/LocationIndexRobinBcCoefs.h b/source/solvers/poisson/LocationIndexRobinBcCoefs.h
+index 9b5e28e..f98f49b 100644
+--- a/source/solvers/poisson/LocationIndexRobinBcCoefs.h
++++ b/source/solvers/poisson/LocationIndexRobinBcCoefs.h
+@@ -92,7 +92,7 @@ public:
+    /*!
+     * @brief Destructor.
+     */
+-   virtual ~LocationIndexRobinBcCoefs<DIM>(void);
++   virtual ~LocationIndexRobinBcCoefs();
+ 
+ 
+    /*!
+diff --git a/source/solvers/poisson/RobinBcCoefStrategy.h b/source/solvers/poisson/RobinBcCoefStrategy.h
+index 21dd969..017ea86 100644
+--- a/source/solvers/poisson/RobinBcCoefStrategy.h
++++ b/source/solvers/poisson/RobinBcCoefStrategy.h
+@@ -57,7 +57,7 @@ public:
+    /*!
+     * @brief Destructor.
+     */
+-   virtual ~RobinBcCoefStrategy<DIM>(void);
++   virtual ~RobinBcCoefStrategy();
+ 
+ 
+    //@{
+diff --git a/source/solvers/poisson/SimpleCellRobinBcCoefs.h b/source/solvers/poisson/SimpleCellRobinBcCoefs.h
+index d06c1a7..073bd8d 100644
+--- a/source/solvers/poisson/SimpleCellRobinBcCoefs.h
++++ b/source/solvers/poisson/SimpleCellRobinBcCoefs.h
+@@ -69,7 +69,7 @@ public:
+    /*!
+     * @brief Destructor.
+     */
+-   virtual ~SimpleCellRobinBcCoefs<DIM>(void);
++   virtual ~SimpleCellRobinBcCoefs();
+ 
+ 
+ 
+diff --git a/source/solvers/templates/EmptySolversX.C b/source/solvers/templates/EmptySolversX.C
+index c0abd23..9190fe7 100644
+--- a/source/solvers/templates/EmptySolversX.C
++++ b/source/solvers/templates/EmptySolversX.C
+@@ -14,6 +14,12 @@
+ namespace SAMRAI {
+    namespace solv {
+       template<int DIM> class Empty {
++	 Empty() :
++	    something(0) 
++	 {
++	 }
++
++	 int something;
+       };
+ 
+       template class Empty< NDIM >;
+diff --git a/source/solvers/vectors/PETSc_SAMRAIVectorReal.h b/source/solvers/vectors/PETSc_SAMRAIVectorReal.h
+index c1b9af5..44657da 100644
+--- a/source/solvers/vectors/PETSc_SAMRAIVectorReal.h
++++ b/source/solvers/vectors/PETSc_SAMRAIVectorReal.h
+@@ -127,7 +127,7 @@ protected:
+     * member function destroyPETScVector, which is used to destroy the PETSc
+     * vector and associated "wrapper".
+     */
+-   virtual ~PETSc_SAMRAIVectorReal<DIM,TYPE>();
++   virtual ~PETSc_SAMRAIVectorReal();
+ 
+ private:
+    /*
+diff --git a/source/solvers/vectors/SAMRAIVectorReal.h b/source/solvers/vectors/SAMRAIVectorReal.h
+index b50fc0d..fd73a49 100644
+--- a/source/solvers/vectors/SAMRAIVectorReal.h
++++ b/source/solvers/vectors/SAMRAIVectorReal.h
+@@ -151,7 +151,7 @@ public:
+     * some pre-existing patch data objects that must live beyond the 
+     * destruction of the vector object.
+     */
+-   virtual ~SAMRAIVectorReal<DIM,TYPE>();
++   virtual ~SAMRAIVectorReal();
+ 
+    /**
+     * Set string identifier for this vector object.
+diff --git a/source/solvers/vectors/Sundials_SAMRAIVector.h b/source/solvers/vectors/Sundials_SAMRAIVector.h
+index d29c4a6..91b2116 100644
+--- a/source/solvers/vectors/Sundials_SAMRAIVector.h
++++ b/source/solvers/vectors/Sundials_SAMRAIVector.h
+@@ -106,7 +106,7 @@ protected:
+    /*
+     * Virtual destructor for Sundials_SAMRAIVector<DIM>.
+     */
+-   virtual ~Sundials_SAMRAIVector<DIM>();
++   virtual ~Sundials_SAMRAIVector();
+ 
+ private:
+    /*
+diff --git a/source/toolbox/inputdb/Grammar.C b/source/toolbox/inputdb/Grammar.C
+index 870343a..b2f7761 100644
+--- a/source/toolbox/inputdb/Grammar.C
++++ b/source/toolbox/inputdb/Grammar.C
+@@ -321,7 +321,7 @@ union yyalloc
+ #   define YYCOPY(To, From, Count)		\
+       do					\
+ 	{					\
+-	  register YYSIZE_T yyi;		\
++	  YYSIZE_T yyi;		\
+ 	  for (yyi = 0; yyi < (Count); yyi++)	\
+ 	    (To)[yyi] = (From)[yyi];		\
+ 	}					\
+@@ -836,7 +836,7 @@ yystrlen (yystr)
+      const char *yystr;
+ #   endif
+ {
+-  register const char *yys = yystr;
++  const char *yys = yystr;
+ 
+   while (*yys++ != '\0')
+     continue;
+@@ -861,8 +861,8 @@ yystpcpy (yydest, yysrc)
+      const char *yysrc;
+ #   endif
+ {
+-  register char *yyd = yydest;
+-  register const char *yys = yysrc;
++  char *yyd = yydest;
++  const char *yys = yysrc;
+ 
+   while ((*yyd++ = *yys++) != '\0')
+     continue;
+@@ -992,8 +992,8 @@ yyparse ()
+ #endif
+ {
+   
+-  register int yystate;
+-  register int yyn;
++  int yystate;
++  int yyn;
+   int yyresult;
+   /* Number of tokens to shift before error messages enabled.  */
+   int yyerrstatus;
+@@ -1011,12 +1011,12 @@ yyparse ()
+   /* The state stack.  */
+   short	yyssa[YYINITDEPTH];
+   short *yyss = yyssa;
+-  register short *yyssp;
++  short *yyssp;
+ 
+   /* The semantic value stack.  */
+   YYSTYPE yyvsa[YYINITDEPTH];
+   YYSTYPE *yyvs = yyvsa;
+-  register YYSTYPE *yyvsp;
++  YYSTYPE *yyvsp;
+ 
+ 
+ 
+diff --git a/source/toolbox/inputdb/Scanner.C b/source/toolbox/inputdb/Scanner.C
+index 25a6892..e7e895f 100644
+--- a/source/toolbox/inputdb/Scanner.C
++++ b/source/toolbox/inputdb/Scanner.C
+@@ -634,9 +634,9 @@ YY_MALLOC_DECL
+ 
+ YY_DECL
+ 	{
+-	register yy_state_type yy_current_state;
+-	register char *yy_cp = NULL, *yy_bp = NULL;
+-	register int yy_act;
++	yy_state_type yy_current_state;
++	char *yy_cp = NULL, *yy_bp = NULL;
++	int yy_act;
+ 
+ 
+ 
+@@ -683,7 +683,7 @@ YY_DECL
+ yy_match:
+ 		do
+ 			{
+-			register YY_CHAR yy_c = yy_ec[YY_SC_TO_UI(*yy_cp)];
++			YY_CHAR yy_c = yy_ec[YY_SC_TO_UI(*yy_cp)];
+ 			if ( yy_accept[yy_current_state] )
+ 				{
+ 				yy_last_accepting_state = yy_current_state;
+@@ -1164,9 +1164,9 @@ ECHO;
+ 
+ static int yy_get_next_buffer()
+ 	{
+-	register char *dest = yy_current_buffer->yy_ch_buf;
+-	register char *source = yytext_ptr;
+-	register int number_to_move, i;
++	char *dest = yy_current_buffer->yy_ch_buf;
++	char *source = yytext_ptr;
++	int number_to_move, i;
+ 	int ret_val;
+ 
+ 	if ( yy_c_buf_p > &yy_current_buffer->yy_ch_buf[yy_n_chars + 1] )
+@@ -1296,14 +1296,14 @@ static int yy_get_next_buffer()
+ 
+ static yy_state_type yy_get_previous_state()
+ 	{
+-	register yy_state_type yy_current_state;
+-	register char *yy_cp;
++	yy_state_type yy_current_state;
++	char *yy_cp;
+ 
+ 	yy_current_state = yy_start;
+ 
+ 	for ( yy_cp = yytext_ptr + YY_MORE_ADJ; yy_cp < yy_c_buf_p; ++yy_cp )
+ 		{
+-		register YY_CHAR yy_c = (*yy_cp ? yy_ec[YY_SC_TO_UI(*yy_cp)] : 1);
++		YY_CHAR yy_c = (*yy_cp ? yy_ec[YY_SC_TO_UI(*yy_cp)] : 1);
+ 		if ( yy_accept[yy_current_state] )
+ 			{
+ 			yy_last_accepting_state = yy_current_state;
+@@ -1335,10 +1335,10 @@ static yy_state_type yy_try_NUL_trans( yy_current_state )
+ yy_state_type yy_current_state;
+ #endif
+ 	{
+-	register int yy_is_jam;
+-	register char *yy_cp = yy_c_buf_p;
++	int yy_is_jam;
++	char *yy_cp = yy_c_buf_p;
+ 
+-	register YY_CHAR yy_c = 1;
++	YY_CHAR yy_c = 1;
+ 	if ( yy_accept[yy_current_state] )
+ 		{
+ 		yy_last_accepting_state = yy_current_state;
+@@ -1359,14 +1359,14 @@ yy_state_type yy_current_state;
+ 
+ #ifndef YY_NO_UNPUT
+ #ifdef YY_USE_PROTOS
+-static void yyunput( int c, register char *yy_bp )
++static void yyunput( int c, char *yy_bp )
+ #else
+ static void yyunput( c, yy_bp )
+ int c;
+-register char *yy_bp;
++char *yy_bp;
+ #endif
+ 	{
+-	register char *yy_cp = yy_c_buf_p;
++	char *yy_cp = yy_c_buf_p;
+ 
+ 	/* undo effects of setting up yytext */
+ 	*yy_cp = yy_hold_char;
+@@ -1374,10 +1374,10 @@ register char *yy_bp;
+ 	if ( yy_cp < yy_current_buffer->yy_ch_buf + 2 )
+ 		{ /* need to shift things up to make room */
+ 		/* +2 for EOB chars. */
+-		register int number_to_move = yy_n_chars + 2;
+-		register char *dest = &yy_current_buffer->yy_ch_buf[
++		int number_to_move = yy_n_chars + 2;
++		char *dest = &yy_current_buffer->yy_ch_buf[
+ 					yy_current_buffer->yy_buf_size + 2];
+-		register char *source =
++		char *source =
+ 				&yy_current_buffer->yy_ch_buf[number_to_move];
+ 
+ 		while ( source > yy_current_buffer->yy_ch_buf )
+@@ -1834,7 +1834,7 @@ yyconst char *s2;
+ int n;
+ #endif
+ 	{
+-	register int i;
++	int i;
+ 	for ( i = 0; i < n; ++i )
+ 		s1[i] = s2[i];
+ 	}
+@@ -1848,7 +1848,7 @@ static int yy_flex_strlen( s )
+ yyconst char *s;
+ #endif
+ 	{
+-	register int n;
++	int n;
+ 	for ( n = 0; s[n]; ++n )
+ 	do {} while(0);
+ 
+diff --git a/source/toolbox/memory/MemoryUtilities.C b/source/toolbox/memory/MemoryUtilities.C
+index 6b8d185..c22f272 100644
+--- a/source/toolbox/memory/MemoryUtilities.C
++++ b/source/toolbox/memory/MemoryUtilities.C
+@@ -84,7 +84,8 @@ void MemoryUtilities::printMemoryInfo(std::ostream& os)
+       << number_allocated << " allocs, "
+       << reserved_mem/(1024.0*1024.0) << "MB reserved ("
+       << free_mem << " unused)" << std::endl;
+-
++#else
++   NULL_USE(os);
+ #endif
+ }
+ 
+diff --git a/source/toolbox/restartdb/HDFDatabase.C b/source/toolbox/restartdb/HDFDatabase.C
+index 057fdd5..fe28930 100644
+--- a/source/toolbox/restartdb/HDFDatabase.C
++++ b/source/toolbox/restartdb/HDFDatabase.C
+@@ -752,7 +752,7 @@ void HDFDatabase::putBoolArray(
+    herr_t errf;
+    if (nelements > 0) {
+ 
+-      hsize_t dim[1] = {nelements};
++      hsize_t dim[1] = {static_cast<hsize_t>(nelements)};
+       hid_t space = H5Screate_simple(1, dim, NULL);
+ #ifdef ASSERT_HDF5_RETURN_VALUES
+       TBOX_ASSERT( space >= 0 );
+@@ -1367,7 +1367,7 @@ void HDFDatabase::putComplexArray(
+       // Storage type
+       hid_t stype = createCompoundComplex('s');
+ 
+-      hsize_t dim[] = {nelements};
++      hsize_t dim[] = {static_cast<hsize_t>(nelements)};
+       space = H5Screate_simple(1, dim, NULL);
+ #ifdef ASSERT_HDF5_RETURN_VALUES
+       TBOX_ASSERT( space >= 0 );
+@@ -1579,7 +1579,7 @@ void HDFDatabase::putDoubleArray(
+    herr_t errf;
+    if (nelements > 0) {
+ 
+-      hsize_t dim[] = {nelements};
++      hsize_t dim[] = {static_cast<hsize_t>(nelements)};
+       hid_t space = H5Screate_simple(1, dim, NULL);
+ #ifdef ASSERT_HDF5_RETURN_VALUES
+       TBOX_ASSERT( space >= 0 );
+@@ -1745,7 +1745,7 @@ void HDFDatabase::putFloatArray(
+    herr_t errf;
+    if (nelements > 0) {
+ 
+-      hsize_t dim[] = {nelements};
++      hsize_t dim[] = {static_cast<hsize_t>(nelements)};
+       hid_t space = H5Screate_simple(1, dim, NULL);
+ #ifdef ASSERT_HDF5_RETURN_VALUES
+       TBOX_ASSERT( space >= 0 );
+@@ -1913,7 +1913,7 @@ void HDFDatabase::putIntegerArray(
+    herr_t errf;
+    if (nelements > 0) {
+ 
+-      hsize_t dim[] = {nelements};
++      hsize_t dim[] = {static_cast<hsize_t>(nelements)};
+       hid_t space = H5Screate_simple(1, dim, NULL);
+ #ifdef ASSERT_HDF5_RETURN_VALUES
+       TBOX_ASSERT(space >= 0);
+@@ -2111,7 +2111,7 @@ void HDFDatabase::putStringArray(
+       TBOX_ASSERT( errf >= 0 );
+ #endif
+ 
+-      hsize_t dim[] = {nelements};
++      hsize_t dim[] = {static_cast<hsize_t>(nelements)};
+       hid_t space = H5Screate_simple(1, dim, NULL);
+ #ifdef ASSERT_HDF5_RETURN_VALUES
+       TBOX_ASSERT( space >= 0 );
+@@ -2492,6 +2492,7 @@ void HDFDatabase::insertArray(
+ 
+ #if (H5_VERS_MAJOR>1) || ((H5_VERS_MAJOR==1)&&(H5_VERS_MINOR > 6))
+    hid_t array = H5Tarray_create(member_id, ndims, dim);
++   NULL_USE(perm);
+ #else	
+    /*
+     * Note that perm is NOT used by HDF, see HDF documentation.
+diff --git a/source/toolbox/restartdb/SiloDatabase.C b/source/toolbox/restartdb/SiloDatabase.C
+index 35aefc5..89b4c2b 100644
+--- a/source/toolbox/restartdb/SiloDatabase.C
++++ b/source/toolbox/restartdb/SiloDatabase.C
+@@ -22,13 +22,13 @@
+  * Implementation notes.
+  *
+  * Silo can't have spaces in directory names.  SAMRAI key names are
+- * mangled to remove spaces from keynames when put into the Silo 
++ * mangled to remove spaces from keynames when put into the Silo
+  * database.
+  *
+  * Compound types in Silo have several listings in the directory
+  * structure.  Rather than unscramble the different entries the
+- * compound array types are stored in a subdirectory with that 
+- * key name and the actual compound type is a variable in 
++ * compound array types are stored in a subdirectory with that
++ * key name and the actual compound type is a variable in
+  * that subdirectory.
+  *
+  */
+@@ -45,12 +45,12 @@ std::string nameMangle(std::string name) {
+    std::string::size_type pos = 0;
+    std::string searchString(" ");
+    std::string replaceString("___");
+-   
++
+    while ( (pos = str.find(searchString, pos)) != std::string::npos ) {
+       str.replace( pos, searchString.size(), replaceString );
+       pos++;
+    }
+-   
++
+    return str;
+ }
+ 
+@@ -60,19 +60,19 @@ std::string nameDemangle(std::string name) {
+    std::string::size_type pos = 0;
+    std::string searchString("___ ");
+    std::string replaceString(" ");
+-   
++
+    while ( (pos = str.find(searchString, pos)) != std::string::npos ) {
+       str.replace( pos, searchString.size(), replaceString );
+       pos++;
+    }
+-   
++
+    return str;
+ }
+-      
++
+ /*
+- * Public Silo database constructor creates an empty database with the 
+- * specified name.  It sets the group_ID to a default value of -1.     
+- * This data is used by member functions to track parent databases.     
++ * Public Silo database constructor creates an empty database with the
++ * specified name.  It sets the group_ID to a default value of -1.
++ * This data is used by member functions to track parent databases.
+ */
+ SiloDatabase::SiloDatabase(const std::string& name) :
+    d_is_file(false),
+@@ -87,8 +87,8 @@ SiloDatabase::SiloDatabase(const std::string& name) :
+ }
+ 
+ /*
+- * Private Silo database constructor creates an empty database with the 
+- * specified name.  
++ * Private Silo database constructor creates an empty database with the
++ * specified name.
+  */
+ SiloDatabase::SiloDatabase(
+    const std::string& name,
+@@ -124,7 +124,7 @@ SiloDatabase::~SiloDatabase()
+ {
+    if (d_is_file) {
+       close();
+-   } 
++   }
+ }
+ 
+ /*
+@@ -142,12 +142,12 @@ bool SiloDatabase::create(const std::string& name) {
+ 
+    bool status = false;
+ 
+-   if(d_file) {	
++   if(d_file) {
+       close();
+    }
+ 
+    d_file = DBCreate(name.c_str(), DB_CLOBBER, DB_LOCAL, NULL, DB_PDB);
+-   
++
+    if (d_file == NULL) {
+ 
+       TBOX_ERROR("Unable to open Silo file " << name << "\n");
+@@ -178,12 +178,12 @@ bool SiloDatabase::open(const std::string& name) {
+ 
+    bool status = false;
+ 
+-   if(d_file) {	
++   if(d_file) {
+       close();
+    }
+ 
+    d_file = DBOpen(name.c_str(), DB_UNKNOWN, DB_READ);
+-   
++
+    if (d_file == NULL) {
+ 
+       TBOX_ERROR("Unable to open Silo file " << name << "\n");
+@@ -241,16 +241,16 @@ bool SiloDatabase::attachToFile(DBfile *file, const std::string &directory)
+       d_file = file;
+       d_directory = directory;
+ 
+-      std::string path = nameMangle(d_directory);      
++      std::string path = nameMangle(d_directory);
+       if(!DBInqVarType(d_file, path.c_str()) == DB_DIR) {
+ 	 int err = DBMkdir(d_file, path.c_str());
+ 	 if(err < 0) {
+ 	    TBOX_ERROR("SiloDatabase: MkDir failed " << d_directory << std::endl );
+ 	 }
+       }
+-      
+-   } else {      
+-      TBOX_ERROR("SiloDatabase: Invalid file supplied to attachToFile" 
++
++   } else {
++      TBOX_ERROR("SiloDatabase: Invalid file supplied to attachToFile"
+ 		 << std::endl);
+       status = false;
+    }
+@@ -314,7 +314,7 @@ Array<std::string> SiloDatabase::getAllKeys()
+       DBtoc *toc = DBGetToc(d_file);
+ 
+       tmp_keys.resizeArray(toc -> nvar + toc -> ndir);
+-     
++
+       for(int i = 0; i < toc -> nvar; i++) {
+ 	 tmp_keys[i] = toc -> var_names[i];
+       }
+@@ -327,7 +327,7 @@ Array<std::string> SiloDatabase::getAllKeys()
+    } else {
+       TBOX_ERROR("Not a database " << d_directory << std::endl );
+    }
+-   
++
+    return(tmp_keys);
+ }
+ 
+@@ -345,13 +345,13 @@ enum Database::DataType SiloDatabase::getArrayType(const std::string& key)
+ #endif
+ 
+    enum Database::DataType type = Database::SAMRAI_INVALID;
+-   
++
+    std::string path = d_directory + "/" + key;
+    path = nameMangle(path);
+ 
+    DBObjectType var_type = DBInqVarType(d_file, path.c_str());
+-   
+-   if( var_type == DB_VARIABLE) { 
++
++   if( var_type == DB_VARIABLE) {
+       int obj_type = DBGetVarType(d_file, path.c_str());
+ 
+       switch (obj_type) {
+@@ -372,8 +372,8 @@ enum Database::DataType SiloDatabase::getArrayType(const std::string& key)
+ 	    break;
+       }
+    } else if (var_type == DB_DIR) {
+-      
+-      // Note that some of the types are stored in subdirectories 
++
++      // Note that some of the types are stored in subdirectories
+       // so check to see if this dir is one of the compound array types.
+       std::string sub_path = path + COMPLEX_ARRAY_NAME;
+       if(DBInqVarExists(d_file, sub_path.c_str())) {
+@@ -382,21 +382,21 @@ enum Database::DataType SiloDatabase::getArrayType(const std::string& key)
+ 	 DBFreeCompoundarray(ca);
+       } else {
+ 	 sub_path = path + STRING_ARRAY_NAME;
+-	 if(DBInqVarExists(d_file, sub_path.c_str())) { 
++	 if(DBInqVarExists(d_file, sub_path.c_str())) {
+ 	    DBcompoundarray *ca = DBGetCompoundarray(d_file, sub_path.c_str());
+ 	    type = Database::SAMRAI_STRING;
+ 	    DBFreeCompoundarray(ca);
+ 	 } else {
+ 	    sub_path = path + DATABASE_BOX_NAME;
+-	    if(DBInqVarExists(d_file, sub_path.c_str())) { 
+-	       DBcompoundarray *ca = DBGetCompoundarray(d_file, 
++	    if(DBInqVarExists(d_file, sub_path.c_str())) {
++	       DBcompoundarray *ca = DBGetCompoundarray(d_file,
+ 							sub_path.c_str());
+ 	       type = Database::SAMRAI_BOX;
+ 	       DBFreeCompoundarray(ca);
+ 	    } else {
+ 	       type = Database::SAMRAI_DATABASE;
+ 	    }
+-	 } 
++	 }
+       }
+    } else {
+       // Unrecognized type return INVALID
+@@ -422,19 +422,19 @@ int SiloDatabase::getArraySize(const std::string& key)
+ #ifdef DEBUG_CHECK_ASSERTIONS
+    TBOX_ASSERT(!key.empty());
+ #endif
+-   
++
+    int array_size = 0;
+ 
+    std::string path = d_directory + "/" + key;
+    path = nameMangle(path);
+ 
+    DBObjectType var_type = DBInqVarType(d_file, path.c_str());
+-   
+-   if( var_type == DB_VARIABLE) { 
++
++   if( var_type == DB_VARIABLE) {
+       array_size = getSiloSimpleTypeLength(key);
+    } else if (var_type == DB_DIR) {
+-      
+-      // Note that some of the types are stored in subdirectories 
++
++      // Note that some of the types are stored in subdirectories
+       // so check to see if this dir is one of the compound array types.
+ 
+       std::string sub_path = path + COMPLEX_ARRAY_NAME;
+@@ -444,21 +444,21 @@ int SiloDatabase::getArraySize(const std::string& key)
+ 	 DBFreeCompoundarray(ca);
+       } else {
+ 	 sub_path = path + STRING_ARRAY_NAME;
+-	 if(DBInqVarExists(d_file, sub_path.c_str())) { 
++	 if(DBInqVarExists(d_file, sub_path.c_str())) {
+ 	    DBcompoundarray *ca = DBGetCompoundarray(d_file, sub_path.c_str());
+ 	    array_size = ca -> nelems;
+ 	    DBFreeCompoundarray(ca);
+ 	 } else {
+ 	    sub_path = path + DATABASE_BOX_NAME;
+-	    if(DBInqVarExists(d_file, sub_path.c_str())) { 
+-	       DBcompoundarray *ca = DBGetCompoundarray(d_file, 
++	    if(DBInqVarExists(d_file, sub_path.c_str())) {
++	       DBcompoundarray *ca = DBGetCompoundarray(d_file,
+ 							sub_path.c_str());
+ 	       array_size = ca -> elemlengths[0];
+ 	       DBFreeCompoundarray(ca);
+ 	    } else {
+ 	       // Directory or some other unrecognized structure return 0
+ 	    }
+-	 } 
++	 }
+       }
+    } else {
+       // Unrecognized type return 0
+@@ -493,7 +493,7 @@ bool SiloDatabase::isDatabase(const std::string& key)
+ *************************************************************************
+ */
+ 
+-Pointer<Database> 
++Pointer<Database>
+ SiloDatabase::putDatabase(const std::string& key)
+ {
+ #ifdef DEBUG_CHECK_ASSERTIONS
+@@ -520,7 +520,7 @@ SiloDatabase::putDatabase(const std::string& key)
+ ************************************************************************
+ */
+ 
+-Pointer<Database> 
++Pointer<Database>
+ SiloDatabase::getDatabase(const std::string& key)
+ {
+ #ifdef DEBUG_CHECK_ASSERTIONS
+@@ -566,8 +566,8 @@ bool SiloDatabase::isBool(const std::string& key)
+ */
+ 
+ void SiloDatabase::putBoolArray(
+-   const std::string& key, 
+-   const bool* const data, 
++   const std::string& key,
++   const bool* const data,
+    const int nelements)
+ {
+ #ifdef DEBUG_CHECK_ASSERTIONS
+@@ -577,7 +577,7 @@ void SiloDatabase::putBoolArray(
+ 
+    short temp_array[nelements];
+ 
+-   for(int i = 0; i < nelements; i++) { 	
++   for(int i = 0; i < nelements; i++) {
+       temp_array[i] = data[i];
+    }
+ 
+@@ -602,17 +602,17 @@ Array<bool> SiloDatabase::getBoolArray(const std::string& key)
+ #endif
+    if (!isBool(key)) {
+       TBOX_ERROR("SiloDatabase::getBoolArray() error in database "
+-		 << d_database_name << std::endl 
++		 << d_database_name << std::endl
+ 		 << "    Key = " << key << " is not a bool array." << std::endl);
+    }
+- 
++
+    Array<bool> boolArray(getSiloSimpleTypeLength(key));
+ 
+    short temp_array[getSiloSimpleTypeLength(key)];
+ 
+    getSiloSimpleType(key, temp_array);
+ 
+-   for(int i = 0; i < getSiloSimpleTypeLength(key); i++) { 	
++   for(int i = 0; i < getSiloSimpleTypeLength(key); i++) {
+       boolArray[i] = temp_array[i];
+    }
+ 
+@@ -646,12 +646,12 @@ bool SiloDatabase::isDatabaseBox(const std::string& key)
+       path += DATABASE_BOX_NAME;
+ 
+       DBcompoundarray *ca = DBGetCompoundarray(d_file, path.c_str());
+-      
++
+       if(ca != NULL) {
+ 	 if( ca -> datatype == DB_INT) {
+ 	    is_type = true;
+ 	 }
+-      } 
++      }
+ 
+       DBFreeCompoundarray(ca);
+    }
+@@ -668,7 +668,7 @@ bool SiloDatabase::isDatabaseBox(const std::string& key)
+ */
+ void SiloDatabase::putDatabaseBoxArray(
+    const std::string& key,
+-   const DatabaseBox* const data, 
++   const DatabaseBox* const data,
+    const int nelements)
+ {
+ #ifdef DEBUG_CHECK_ASSERTIONS
+@@ -684,7 +684,7 @@ void SiloDatabase::putDatabaseBoxArray(
+    elemnames[2] = "lo";
+ 
+    int size = 0;
+-   for(int i = 0; i < nelements; i++) {	
++   for(int i = 0; i < nelements; i++) {
+       size += data[i].d_data.d_dimension;
+    }
+ 
+@@ -712,13 +712,13 @@ void SiloDatabase::putDatabaseBoxArray(
+       TBOX_ERROR("SiloDatabase: MkDir failed " << d_directory << std::endl );
+    }
+ 
+-   
++
+    path = d_directory + "/" + key + DATABASE_BOX_NAME;
+    path = nameMangle(path);
+ 
+-   err = DBPutCompoundarray(d_file, path.c_str(), 
+-		      const_cast<char **>(elemnames), elemlengths, 
+-		      3, values.getPointer(), values.size(), 
++   err = DBPutCompoundarray(d_file, path.c_str(),
++		      const_cast<char **>(elemnames), elemlengths,
++		      3, values.getPointer(), values.size(),
+ 		      DB_INT, NULL);
+    if(err < 0) {
+       TBOX_ERROR("SiloDatabase: DBPutCompoundarray failed " << d_directory << std::endl );
+@@ -762,7 +762,7 @@ Array<DatabaseBox> SiloDatabase::getDatabaseBoxArray(const std::string& key)
+    }
+ 
+    DBFreeCompoundarray(ca);
+-   
++
+    return boxArray;
+ }
+ 
+@@ -792,7 +792,7 @@ bool SiloDatabase::isChar(const std::string& key)
+ 
+ void SiloDatabase::putCharArray(
+    const std::string& key,
+-   const char* const data, 
++   const char* const data,
+    const int nelements)
+ {
+ #ifdef DEBUG_CHECK_ASSERTIONS
+@@ -822,10 +822,10 @@ Array<char> SiloDatabase::getCharArray(const std::string& key)
+ 
+    if (!isChar(key)) {
+       TBOX_ERROR("SiloDatabase::getCharArray() error in database "
+-		 << d_database_name << std::endl 
++		 << d_database_name << std::endl
+ 		 << "    Key = " << key << " is not a char array." << std::endl);
+    }
+- 
++
+ 
+    Array<char> charArray(getSiloSimpleTypeLength(key));
+ 
+@@ -861,12 +861,12 @@ bool SiloDatabase::isComplex(const std::string& key)
+       path += COMPLEX_ARRAY_NAME;
+ 
+       DBcompoundarray *ca = DBGetCompoundarray(d_file, path.c_str());
+-      
++
+       if(ca != NULL) {
+ 	 if( ca -> datatype == DB_DOUBLE) {
+ 	    is_type = true;
+ 	 }
+-      } 
++      }
+ 
+       DBFreeCompoundarray(ca);
+    }
+@@ -919,9 +919,9 @@ void SiloDatabase::putComplexArray(
+    path = d_directory + "/" + key + COMPLEX_ARRAY_NAME;
+    path = nameMangle(path);
+ 
+-   err = DBPutCompoundarray(d_file, path.c_str(), 
+-		      const_cast<char **>(elemnames), elemlengths, 2, 
+-		      values.getPointer(), values.size(), 
++   err = DBPutCompoundarray(d_file, path.c_str(),
++		      const_cast<char **>(elemnames), elemlengths, 2,
++		      values.getPointer(), values.size(),
+ 		      DB_DOUBLE, NULL);
+    if(err < 0) {
+       TBOX_ERROR("SiloDatabase DBPutCompoundarray failed " << d_directory << std::endl );
+@@ -957,10 +957,9 @@ Array<dcomplex> SiloDatabase::getComplexArray(const std::string& key)
+ 
+    Array<dcomplex> complexArray(ca -> elemlengths[0]);
+ 
+-   for(int i = 0; i < ca -> elemlengths[0]; i++) {
+-      complexArray[i].real() = static_cast<double *>(ca -> values)[i];
+-      complexArray[i].imag() = 
+-	 static_cast<double *>(ca -> values)[i + ca -> elemlengths[0]];
++   for(int i = 0; i < ca->elemlengths[0]; i++) {
++     complexArray[i] = dcomplex(reinterpret_cast<double *>(ca->values)[i],
++                                reinterpret_cast<double *>(ca->values)[i + ca->elemlengths[0]]);
+    }
+ 
+    DBFreeCompoundarray(ca);
+@@ -1087,10 +1086,10 @@ Array<float> SiloDatabase::getFloatArray(const std::string& key)
+ #endif
+    if (!isFloat(key)) {
+       TBOX_ERROR("SiloDatabase::getFloatArray() error in database "
+-		 << d_database_name << std::endl 
++		 << d_database_name << std::endl
+ 		 << "    Key = " << key << " is not a float array." << std::endl);
+    }
+- 
++
+    Array<float> floatArray(getSiloSimpleTypeLength(key));
+ 
+    getSiloSimpleType(key, floatArray.getPointer());
+@@ -1124,15 +1123,15 @@ bool SiloDatabase::isInteger(const std::string& key)
+ */
+ 
+ void SiloDatabase::putIntegerArray(
+-   const std::string& key, 
+-   const int* const data, 
++   const std::string& key,
++   const int* const data,
+    const int nelements)
+ {
+ #ifdef DEBUG_CHECK_ASSERTIONS
+    TBOX_ASSERT(!key.empty());
+    TBOX_ASSERT(data != (int*)NULL);
+ #endif
+-   putSiloSimpleType(key, data, nelements, DB_INT);   
++   putSiloSimpleType(key, data, nelements, DB_INT);
+ }
+ 
+ /*
+@@ -1154,7 +1153,7 @@ Array<int> SiloDatabase::getIntegerArray(const std::string& key)
+ 
+    if (!isInteger(key)) {
+       TBOX_ERROR("SiloDatabase::getIntegerArray() error in database "
+-		 << d_database_name << std::endl 
++		 << d_database_name << std::endl
+ 		 << "    Key = " << key << " is not a integer array." << std::endl);
+    }
+ 
+@@ -1192,12 +1191,12 @@ bool SiloDatabase::isString(const std::string& key)
+       path += STRING_ARRAY_NAME;
+ 
+       DBcompoundarray *ca = DBGetCompoundarray(d_file, path.c_str());
+-      
++
+       if(ca != NULL) {
+ 	 if( ca -> datatype == DB_CHAR) {
+ 	    is_type = true;
+ 	 }
+-      } 
++      }
+ 
+       DBFreeCompoundarray(ca);
+    }
+@@ -1215,8 +1214,8 @@ bool SiloDatabase::isString(const std::string& key)
+ */
+ 
+ void SiloDatabase::putStringArray(
+-   const std::string& key, 
+-   const std::string* const data, 
++   const std::string& key,
++   const std::string* const data,
+    const int nelements)
+ {
+ #ifdef DEBUG_CHECK_ASSERTIONS
+@@ -1249,9 +1248,9 @@ void SiloDatabase::putStringArray(
+    path = d_directory + "/" + key + STRING_ARRAY_NAME;
+    path = nameMangle(path);
+ 
+-   DBPutCompoundarray(d_file, path.c_str(), 
+-		      const_cast<char **>(elemnames), elemlengths, 
+-		      nelements, const_cast<char *>(values.c_str()), values.size() + 1, 
++   DBPutCompoundarray(d_file, path.c_str(),
++		      const_cast<char **>(elemnames), elemlengths,
++		      nelements, const_cast<char *>(values.c_str()), values.size() + 1,
+ 		      DB_CHAR, NULL);
+    if(err < 0) {
+       TBOX_ERROR("SiloDatabase DBPutCompoundarray failed " << d_directory << std::endl );
+@@ -1279,7 +1278,7 @@ Array<std::string> SiloDatabase::getStringArray(const std::string& key)
+ 
+    if (!isString(key)) {
+       TBOX_ERROR("SiloDatabase::getStringArray() error in database "
+-		 << d_database_name << std::endl 
++		 << d_database_name << std::endl
+ 		 << "    Key = " << key << " is not a string array." << std::endl);
+    }
+ 
+@@ -1309,7 +1308,7 @@ Array<std::string> SiloDatabase::getStringArray(const std::string& key)
+ *                                                                       *
+ * Print contents of current database to the specified output stream.    *
+ * Note that contents of subdatabases will not be printed.  This must    *
+-* be done by iterating through all the subdatabases individually.       * 
++* be done by iterating through all the subdatabases individually.       *
+ *                                                                       *
+ *************************************************************************
+ */
+@@ -1320,10 +1319,10 @@ void SiloDatabase::printClassData(std::ostream& os)
+    Array<std::string>  keys = getAllKeys();
+ 
+    if (keys.getSize() == 0) {
+-      os << "Database named `"<< d_database_name 
++      os << "Database named `"<< d_database_name
+          << "' has zero keys..." << std::endl;
+    } else {
+-      os << "Printing contents of database named `" 
++      os << "Printing contents of database named `"
+          << d_database_name << "'..." << std::endl;
+    }
+ 
+@@ -1331,59 +1330,59 @@ void SiloDatabase::printClassData(std::ostream& os)
+       switch ( getArrayType(keys[i] ) ) {
+ 	 case Database::SAMRAI_INVALID: {
+ 	       os << "   Data entry `"<< keys[i] << "' is"
+-		  << " invalid" << std::endl;   
++		  << " invalid" << std::endl;
+ 	       break;
+ 	    }
+ 	    case Database::SAMRAI_DATABASE: {
+ 	       os << "   Data entry `"<< keys[i] << "' is"
+-		  << " a database" << std::endl;   
++		  << " a database" << std::endl;
+ 	       break;
+ 	    }
+ 	    case Database::SAMRAI_BOOL: {
+ 	       os << "   Data entry `"<< keys[i] << "' is"
+-		  << " a boolean array" << std::endl;   
++		  << " a boolean array" << std::endl;
+ 	       break;
+ 	    }
+ 	    case Database::SAMRAI_CHAR: {
+ 	       os << "   Data entry `"<< keys[i] << "' is"
+-		  << " a char array" << std::endl;   
++		  << " a char array" << std::endl;
+ 	       break;
+ 	    }
+ 	    case Database::SAMRAI_INT: {
+ 	       os << "   Data entry `"<< keys[i] << "' is"
+-		  << " a integer array" << std::endl;   
++		  << " a integer array" << std::endl;
+ 	       break;
+ 	    }
+ 	    case Database::SAMRAI_COMPLEX: {
+ 	       os << "   Data entry `"<< keys[i] << "' is"
+-		  << " a complex array" << std::endl;   
++		  << " a complex array" << std::endl;
+ 	       break;
+ 	    }
+ 	    case Database::SAMRAI_DOUBLE: {
+ 	       os << "   Data entry `"<< keys[i] << "' is"
+-		  << " a complex array" << std::endl;   
++		  << " a complex array" << std::endl;
+ 	       break;
+ 	    }
+ 	    case Database::SAMRAI_FLOAT: {
+ 	       os << "   Data entry `"<< keys[i] << "' is"
+-		  << " a float array" << std::endl;   
++		  << " a float array" << std::endl;
+ 	       break;
+ 	    }
+ 	    case Database::SAMRAI_STRING: {
+ 	       os << "   Data entry `"<< keys[i] << "' is"
+-		  << " a string array" << std::endl;   
++		  << " a string array" << std::endl;
+ 	       break;
+ 	    }
+ 	    case Database::SAMRAI_BOX: {
+ 	       os << "   Data entry `"<< keys[i] << "' is"
+-		  << " a datbase box array" << std::endl;   
++		  << " a datbase box array" << std::endl;
+ 	       break;
+ 	    }
+ 
+       }
+    }
+ 
+-   
++
+ }
+ 
+ 
+@@ -1414,7 +1413,7 @@ bool SiloDatabase::isSiloSimpleType(const std::string& key, const int simple_typ
+ 
+    bool is_type = false;
+ 
+-   // First check to see if it is a variable, if so then check to 
++   // First check to see if it is a variable, if so then check to
+    // see if it is the correct type of variable
+    if(isSiloType(key, DB_VARIABLE)) {
+       std::string path = d_directory + "/" + key;
+@@ -1446,7 +1445,7 @@ bool SiloDatabase::putSiloSimpleType(const std::string& key, const void *data, c
+       err = DBWrite(d_file, path.c_str(), const_cast<void *>(data), dims, 1, simple_type);
+       if(err < 0) {
+ 	 TBOX_ERROR("SiloDatabase DBWrite failed " << key << std::endl);
+-      } 
++      }
+ 
+    return err < 0;
+ }
+@@ -1466,7 +1465,7 @@ bool SiloDatabase::getSiloSimpleType(const std::string& key, void *data)
+    err = DBReadVar(d_file, path.c_str(), data);
+    if(err < 0) {
+       TBOX_ERROR("SiloDatabase DBRead failed " << key << std::endl);
+-   } 
++   }
+ 
+    return err < 0;
+ }
+diff --git a/source/toolbox/templates/special/stl-FundamentalTypes.C b/source/toolbox/templates/special/stl-FundamentalTypes.C
+index 8e37615..1d6b783 100644
+--- a/source/toolbox/templates/special/stl-FundamentalTypes.C
++++ b/source/toolbox/templates/special/stl-FundamentalTypes.C
+@@ -66,6 +66,8 @@
+  * functions and member functions must be instantiated individually.
+  */
+ 
++#if 0 // some of these don't make sense; get rid of it
++
+ 
+ template class std::set<int>;
+ 
+@@ -102,4 +104,4 @@ template void std::vector<double>::insert<const double *>(std::vector<double>::i
+ 
+ 
+ 
+-
++#endif
+diff --git a/source/transfer/datamovers/locally_active/LocallyActiveDataCoarsenAlgorithm.h b/source/transfer/datamovers/locally_active/LocallyActiveDataCoarsenAlgorithm.h
+index ae15fb7..b67435c 100644
+--- a/source/transfer/datamovers/locally_active/LocallyActiveDataCoarsenAlgorithm.h
++++ b/source/transfer/datamovers/locally_active/LocallyActiveDataCoarsenAlgorithm.h
+@@ -123,7 +123,7 @@ public:
+    /*!
+     * The virtual destructor for the algorithm releases all internal storage.
+     */
+-   virtual ~LocallyActiveDataCoarsenAlgorithm<DIM>();
++   virtual ~LocallyActiveDataCoarsenAlgorithm();
+ 
+    /*!
+     * Register a coarsening operation with the coarsening algorithm.  Data
+diff --git a/source/transfer/datamovers/locally_active/LocallyActiveDataCoarsenSchedule.h b/source/transfer/datamovers/locally_active/LocallyActiveDataCoarsenSchedule.h
+index 56a5998..c04f5ab 100644
+--- a/source/transfer/datamovers/locally_active/LocallyActiveDataCoarsenSchedule.h
++++ b/source/transfer/datamovers/locally_active/LocallyActiveDataCoarsenSchedule.h
+@@ -127,7 +127,7 @@ public:
+    /*!
+     * The virtual destructor for the schedule releases all internal storage.
+     */
+-   virtual ~LocallyActiveDataCoarsenSchedule<DIM>();
++   virtual ~LocallyActiveDataCoarsenSchedule();
+ 
+    /*!
+     * Execute the stored communication schedule and perform the data movement.
+diff --git a/source/transfer/datamovers/locally_active/LocallyActiveDataFillBox.h b/source/transfer/datamovers/locally_active/LocallyActiveDataFillBox.h
+index 17f868b..435c620 100644
+--- a/source/transfer/datamovers/locally_active/LocallyActiveDataFillBox.h
++++ b/source/transfer/datamovers/locally_active/LocallyActiveDataFillBox.h
+@@ -79,7 +79,7 @@ public:
+    /*!
+     * The destructor releases all box and locally-active data storage.
+     */
+-   virtual ~LocallyActiveDataFillBox<DIM>();
++   virtual ~LocallyActiveDataFillBox();
+ 
+    /*!
+     * Return constant reference to box maintained by this object.
+diff --git a/source/transfer/datamovers/locally_active/LocallyActiveDataFillBoxSet.h b/source/transfer/datamovers/locally_active/LocallyActiveDataFillBoxSet.h
+index 9201448..d0738c7 100644
+--- a/source/transfer/datamovers/locally_active/LocallyActiveDataFillBoxSet.h
++++ b/source/transfer/datamovers/locally_active/LocallyActiveDataFillBoxSet.h
+@@ -63,7 +63,7 @@ public:
+    /*!
+     * The destructor releases all box and locally-active data storage.
+     */
+-   virtual ~LocallyActiveDataFillBoxSet<DIM>();
++   virtual ~LocallyActiveDataFillBoxSet();
+ 
+    /*!
+     * Clears all existing box and locally-active data information for calling object 
+diff --git a/source/transfer/datamovers/locally_active/LocallyActiveDataRefineAlgorithm.h b/source/transfer/datamovers/locally_active/LocallyActiveDataRefineAlgorithm.h
+index 7bd6c30..aa69d47 100644
+--- a/source/transfer/datamovers/locally_active/LocallyActiveDataRefineAlgorithm.h
++++ b/source/transfer/datamovers/locally_active/LocallyActiveDataRefineAlgorithm.h
+@@ -120,7 +120,7 @@ public:
+    /*!
+     * The virtual destructor for the algorithm releases all internal storage.
+     */
+-   virtual ~LocallyActiveDataRefineAlgorithm<DIM>();
++   virtual ~LocallyActiveDataRefineAlgorithm();
+ 
+    /*!
+     * Register a refine operation with the refine algorithm object.  This 
+diff --git a/source/transfer/datamovers/locally_active/LocallyActiveDataRefineSchedule.h b/source/transfer/datamovers/locally_active/LocallyActiveDataRefineSchedule.h
+index 5f42b82..ef6aaa3 100644
+--- a/source/transfer/datamovers/locally_active/LocallyActiveDataRefineSchedule.h
++++ b/source/transfer/datamovers/locally_active/LocallyActiveDataRefineSchedule.h
+@@ -203,7 +203,7 @@ public:
+    /*!
+     * Virtual destructor for the schedule releases all internal storage.
+     */
+-   virtual ~LocallyActiveDataRefineSchedule<DIM>();
++   virtual ~LocallyActiveDataRefineSchedule();
+ 
+    /*!
+     * @brief Execute the stored communication schedule and perform
+diff --git a/source/transfer/datamovers/locally_active/StandardLocallyActiveDataCoarsenTransactionFactory.h b/source/transfer/datamovers/locally_active/StandardLocallyActiveDataCoarsenTransactionFactory.h
+index 7868ce2..4dbecd9 100644
+--- a/source/transfer/datamovers/locally_active/StandardLocallyActiveDataCoarsenTransactionFactory.h
++++ b/source/transfer/datamovers/locally_active/StandardLocallyActiveDataCoarsenTransactionFactory.h
+@@ -47,7 +47,7 @@ public:
+    /*!
+     * @brief Virtual destructor.
+     */
+-   virtual ~StandardLocallyActiveDataCoarsenTransactionFactory<DIM>();
++   virtual ~StandardLocallyActiveDataCoarsenTransactionFactory();
+ 
+    /*!
+     * @brief Set the array of CoarsenClass::Data items used by the transactions.
+diff --git a/source/transfer/datamovers/locally_active/StandardLocallyActiveDataRefineTransactionFactory.h b/source/transfer/datamovers/locally_active/StandardLocallyActiveDataRefineTransactionFactory.h
+index 79935df..20fed02 100644
+--- a/source/transfer/datamovers/locally_active/StandardLocallyActiveDataRefineTransactionFactory.h
++++ b/source/transfer/datamovers/locally_active/StandardLocallyActiveDataRefineTransactionFactory.h
+@@ -48,7 +48,7 @@ public:
+    /*!
+     * @brief Virtual destructor.
+     */
+-   virtual ~StandardLocallyActiveDataRefineTransactionFactory<DIM>();
++   virtual ~StandardLocallyActiveDataRefineTransactionFactory();
+ 
+    /*!
+     * @brief Set the array of RefineClass::Data items used by the transactions.
+diff --git a/source/transfer/datamovers/standard/CoarsenAlgorithm.h b/source/transfer/datamovers/standard/CoarsenAlgorithm.h
+index b3f10db..f5b3d00 100644
+--- a/source/transfer/datamovers/standard/CoarsenAlgorithm.h
++++ b/source/transfer/datamovers/standard/CoarsenAlgorithm.h
+@@ -117,7 +117,7 @@ public:
+    /*!
+     * The virtual destructor for the algorithm releases all internal storage.
+     */
+-   virtual ~CoarsenAlgorithm<DIM>();
++   virtual ~CoarsenAlgorithm();
+ 
+    /*!
+     * Register a coarsening operation with the coarsening algorithm.  Data
+diff --git a/source/transfer/datamovers/standard/CoarsenClasses.h b/source/transfer/datamovers/standard/CoarsenClasses.h
+index a0a2781..2a84665 100644
+--- a/source/transfer/datamovers/standard/CoarsenClasses.h
++++ b/source/transfer/datamovers/standard/CoarsenClasses.h
+@@ -64,7 +64,7 @@ public:
+     * The virtual destructor destroys the coarsen data items owned
+     * by this object (and the associated CoarsenAlgorithm<DIM> object).
+     */
+-   virtual ~CoarsenClasses<DIM>();
++   virtual ~CoarsenClasses();
+ 
+    /**
+     * Return number of equivalence classes maintained by this object
+diff --git a/source/transfer/datamovers/standard/CoarsenCopyTransaction.h b/source/transfer/datamovers/standard/CoarsenCopyTransaction.h
+index eb74ca3..8b975ef 100644
+--- a/source/transfer/datamovers/standard/CoarsenCopyTransaction.h
++++ b/source/transfer/datamovers/standard/CoarsenCopyTransaction.h
+@@ -93,7 +93,7 @@ public:
+     * The virtual destructor for the copy transaction releases all
+     * memory associated with the transaction.
+     */
+-   virtual ~CoarsenCopyTransaction<DIM>();
++   virtual ~CoarsenCopyTransaction();
+ 
+    /*!
+     * Return a boolean indicating whether this transaction can estimate
+diff --git a/source/transfer/datamovers/standard/CoarsenPatchStrategy.h b/source/transfer/datamovers/standard/CoarsenPatchStrategy.h
+index 896f144..651435b 100644
+--- a/source/transfer/datamovers/standard/CoarsenPatchStrategy.h
++++ b/source/transfer/datamovers/standard/CoarsenPatchStrategy.h
+@@ -51,7 +51,7 @@ public:
+    /*!
+     * The virtual destructor for coarsen strategy does nothing interesting.
+     */
+-   virtual ~CoarsenPatchStrategy<DIM>();
++   virtual ~CoarsenPatchStrategy();
+ 
+    /*!
+     * Return maximum stencil width needed over all user-defined
+diff --git a/source/transfer/datamovers/standard/CoarsenSchedule.h b/source/transfer/datamovers/standard/CoarsenSchedule.h
+index 1f13eb5..b5d8dcf 100644
+--- a/source/transfer/datamovers/standard/CoarsenSchedule.h
++++ b/source/transfer/datamovers/standard/CoarsenSchedule.h
+@@ -122,7 +122,7 @@ public:
+    /*!
+     * The virtual destructor for the schedule releases all internal storage.
+     */
+-   virtual ~CoarsenSchedule<DIM>();
++   virtual ~CoarsenSchedule();
+ 
+    /*!
+     * Reset this coarsen schedule to perform data transfers asssociated with
+diff --git a/source/transfer/datamovers/standard/RefineAlgorithm.h b/source/transfer/datamovers/standard/RefineAlgorithm.h
+index 5323ebe..81a7f52 100644
+--- a/source/transfer/datamovers/standard/RefineAlgorithm.h
++++ b/source/transfer/datamovers/standard/RefineAlgorithm.h
+@@ -120,7 +120,7 @@ public:
+    /*!
+     * The virtual destructor for the algorithm releases all internal storage.
+     */
+-   virtual ~RefineAlgorithm<DIM>();
++   virtual ~RefineAlgorithm();
+ 
+    /*!
+     * Register a refine operation with the refine algorithm object.  This 
+diff --git a/source/transfer/datamovers/standard/RefineClasses.h b/source/transfer/datamovers/standard/RefineClasses.h
+index 6eb5c50..1c26721 100644
+--- a/source/transfer/datamovers/standard/RefineClasses.h
++++ b/source/transfer/datamovers/standard/RefineClasses.h
+@@ -66,7 +66,7 @@ public:
+     * The virtual destructor destroys the refinement data items owned 
+     * by this object (and the associated RefineAlgorithm<DIM> object).
+     */
+-   virtual ~RefineClasses<DIM>();
++   virtual ~RefineClasses();
+ 
+    /**
+     * Return number of equivalence classes maintained by this object
+diff --git a/source/transfer/datamovers/standard/RefineCopyTransaction.h b/source/transfer/datamovers/standard/RefineCopyTransaction.h
+index 58bf391..3b6dc44 100644
+--- a/source/transfer/datamovers/standard/RefineCopyTransaction.h
++++ b/source/transfer/datamovers/standard/RefineCopyTransaction.h
+@@ -93,7 +93,7 @@ public:
+     * The virtual destructor for the copy transaction releases all
+     * memory associated with the transaction.
+     */
+-   virtual ~RefineCopyTransaction<DIM>();
++   virtual ~RefineCopyTransaction();
+ 
+    /*!
+     * Return a boolean indicating whether this transaction can estimate
+diff --git a/source/transfer/datamovers/standard/RefineSchedule.C b/source/transfer/datamovers/standard/RefineSchedule.C
+index d4e6a90..d19fb4a 100644
+--- a/source/transfer/datamovers/standard/RefineSchedule.C
++++ b/source/transfer/datamovers/standard/RefineSchedule.C
+@@ -41,18 +41,6 @@ namespace SAMRAI {
+ #define BIG_GHOST_CELL_WIDTH  (10)
+ 
+ 
+-/*!
+- * Timer objects for performance measurement.
+- */
+-static tbox::Pointer<tbox::Timer> t_fill_data;
+-static tbox::Pointer<tbox::Timer> t_recursive_fill;
+-static tbox::Pointer<tbox::Timer> t_refine_scratch_data;
+-static tbox::Pointer<tbox::Timer> t_gen_sched_n_squared;
+-static tbox::Pointer<tbox::Timer> t_gen_sched_box_graph;
+-static tbox::Pointer<tbox::Timer> t_gen_sched_box_tree; 
+-static tbox::Pointer<tbox::Timer> t_gen_comm_sched;
+-static tbox::Pointer<tbox::Timer> t_finish_sched_const;
+-
+ /*
+ *************************************************************************
+ *                                                                       *
+@@ -67,6 +55,22 @@ template<int DIM> const hier::IntVector<DIM>
+    RefineSchedule<DIM>::s_constant_one_intvector = hier::IntVector<DIM>(1);
+ template<int DIM> std::string
+    RefineSchedule<DIM>::s_schedule_generation_method = "BOX_TREE";
++template<int DIM> tbox::Pointer<tbox::Timer>
++   RefineSchedule<DIM>::t_fill_data;
++template<int DIM> tbox::Pointer<tbox::Timer>
++   RefineSchedule<DIM>::t_recursive_fill;
++template<int DIM> tbox::Pointer<tbox::Timer>
++   RefineSchedule<DIM>::t_refine_scratch_data;
++template<int DIM> tbox::Pointer<tbox::Timer>
++   RefineSchedule<DIM>::t_gen_sched_n_squared;
++template<int DIM> tbox::Pointer<tbox::Timer>
++   RefineSchedule<DIM>::t_gen_sched_box_graph;
++template<int DIM> tbox::Pointer<tbox::Timer>
++   RefineSchedule<DIM>::t_gen_sched_box_tree;
++template<int DIM> tbox::Pointer<tbox::Timer>
++   RefineSchedule<DIM>::t_gen_comm_sched;
++template<int DIM> tbox::Pointer<tbox::Timer>
++   RefineSchedule<DIM>::t_finish_sched_const;
+ 
+ /*
+  * ************************************************************************
+@@ -809,6 +813,19 @@ template<int DIM> void RefineSchedule<DIM>::fillData(
+    d_transaction_factory->setTransactionTime(fill_time);
+    d_transaction_factory->setRefineItems(d_refine_items, d_number_refine_items);
+ 
++   /*
++    * Set the destination level number for the variable fill pattern
++    * objects.
++    */
++   const int num_equiv_classes =
++      d_refine_classes->getNumberOfEquivalenceClasses();
++   for (int nc = 0; nc < num_equiv_classes; nc++) {
++      const typename xfer::RefineClasses<DIM>::Data& rep_item =
++         d_refine_classes->getClassRepresentative(nc);
++      rep_item.d_var_fill_pattern->setTargetPatchLevelNumber(
++         d_dst_level->getLevelNumber());
++   }
++
+    /*
+     * Check whether scratch data needs to be allocated on the destination
+     * level.  Keep track of those allocated components so that they may be
+@@ -840,6 +857,16 @@ template<int DIM> void RefineSchedule<DIM>::fillData(
+ 
+    d_dst_level->deallocatePatchData(allocate_vector);
+ 
++   /*
++    * Reset the destination level number for the variable fill pattern
++    * objects.
++    */
++   for (int nc = 0; nc < num_equiv_classes; nc++) {
++      const typename xfer::RefineClasses<DIM>::Data& rep_item =
++         d_refine_classes->getClassRepresentative(nc);
++      rep_item.d_var_fill_pattern->setTargetPatchLevelNumber(-1);
++   }
++
+    /*
+     * Unset the refine items for all transactions.  These items are
+     * shared by all transaction objects in the communication schedule.
+@@ -1887,12 +1914,14 @@ template<int DIM> void RefineSchedule<DIM>::constructScheduleTransactions(
+             hier::Box<DIM> src_mask( hier::Box<DIM>::shift( test_mask,-shift) );
+ 
+             tbox::Pointer< hier::BoxOverlap<DIM> > overlap =
+-               rep_item.d_var_fill_pattern->calculateOverlap(
++               rep_item.d_var_fill_pattern->calculateOverlapOnLevel(
+                   *dst_pdf->getBoxGeometry(dst_box),
+                   *src_pdf->getBoxGeometry(src_box),
+                   dst_box,
+                   src_mask,
+-                  true, shift);
++                  true, shift,
++                  dst_level->getLevelNumber(),
++                  src_level->getLevelNumber());
+ /*	    tbox::Pointer< hier::BoxOverlap<DIM> > overlap =
+ 	       dst_pdf->getBoxGeometry(dst_box)
+ 		      ->calculateOverlap(
+@@ -2230,6 +2259,8 @@ template<int DIM> void RefineSchedule<DIM>::printClassData(std::ostream& stream)
+ 
+ /*
+ ***********************************************************************
++Allocate static timers and register freeTimers with the shutdown
++registry.
+ ***********************************************************************
+ */
+ template<int DIM>
+diff --git a/source/transfer/datamovers/standard/RefineSchedule.h b/source/transfer/datamovers/standard/RefineSchedule.h
+index ed4ecb0..bf2f1b8 100644
+--- a/source/transfer/datamovers/standard/RefineSchedule.h
++++ b/source/transfer/datamovers/standard/RefineSchedule.h
+@@ -197,7 +197,7 @@ public:
+    /*!
+     * Virtual destructor for the schedule releases all internal storage.
+     */
+-   virtual ~RefineSchedule<DIM>();
++   virtual ~RefineSchedule();
+ 
+    /*!
+     * @brief Reset this refine schedule to perform data transfers
+@@ -542,14 +542,16 @@ private:
+     */
+    void initialCheckRefineClassItems() const;
+ 
+-   void initializeTimers();
+-
+-
+    /*!
+     * @brief Set up things for the entire class.
+     */
+    void firstConstructorTasks();
+ 
++   /*!
++    * Allocate static timers.
++    */
++   static void initializeTimers();
++
+    /*!
+     * Free static timers.
+     *
+@@ -723,7 +725,17 @@ private:
+    int d_max_fill_boxes;
+    hier::BoxArray<DIM> d_src_masks;
+ 
+-
++   /*!
++    * Timer objects for performance measurement.
++    */
++   static tbox::Pointer<tbox::Timer> t_fill_data;
++   static tbox::Pointer<tbox::Timer> t_recursive_fill;
++   static tbox::Pointer<tbox::Timer> t_refine_scratch_data;
++   static tbox::Pointer<tbox::Timer> t_gen_sched_n_squared;
++   static tbox::Pointer<tbox::Timer> t_gen_sched_box_graph;
++   static tbox::Pointer<tbox::Timer> t_gen_sched_box_tree;
++   static tbox::Pointer<tbox::Timer> t_gen_comm_sched;
++   static tbox::Pointer<tbox::Timer> t_finish_sched_const;
+ };
+ 
+ }
+diff --git a/source/transfer/datamovers/standard/RefineTimeTransaction.h b/source/transfer/datamovers/standard/RefineTimeTransaction.h
+index ac87a24..c852398 100644
+--- a/source/transfer/datamovers/standard/RefineTimeTransaction.h
++++ b/source/transfer/datamovers/standard/RefineTimeTransaction.h
+@@ -109,7 +109,7 @@ public:
+     * The virtual destructor for time transaction releases all
+     * memory associated with the transaction.
+     */
+-   virtual ~RefineTimeTransaction<DIM>();
++   virtual ~RefineTimeTransaction();
+ 
+    /*!
+     * Return a boolean indicating whether this transaction can estimate
+diff --git a/source/transfer/datamovers/standard/StandardCoarsenTransactionFactory.h b/source/transfer/datamovers/standard/StandardCoarsenTransactionFactory.h
+index 37277a6..61d0fb2 100644
+--- a/source/transfer/datamovers/standard/StandardCoarsenTransactionFactory.h
++++ b/source/transfer/datamovers/standard/StandardCoarsenTransactionFactory.h
+@@ -44,7 +44,7 @@ public:
+    /*!
+     * @brief Virtual destructor.
+     */
+-   virtual ~StandardCoarsenTransactionFactory<DIM>();
++   virtual ~StandardCoarsenTransactionFactory();
+ 
+    /*!
+     * @brief Set the array of CoarsenClass::Data items used by the transactions.
+diff --git a/source/transfer/datamovers/standard/StandardRefineTransactionFactory.h b/source/transfer/datamovers/standard/StandardRefineTransactionFactory.h
+index 8438976..40d9393 100644
+--- a/source/transfer/datamovers/standard/StandardRefineTransactionFactory.h
++++ b/source/transfer/datamovers/standard/StandardRefineTransactionFactory.h
+@@ -47,7 +47,7 @@ public:
+    /*!
+     * @brief Virtual destructor.
+     */
+-   virtual ~StandardRefineTransactionFactory<DIM>();
++   virtual ~StandardRefineTransactionFactory();
+ 
+    /*!
+     * @brief Set the array of RefineClass::Data items used by the transactions.
+diff --git a/source/transfer/multiblock/MultiblockCoarsenAlgorithm.h b/source/transfer/multiblock/MultiblockCoarsenAlgorithm.h
+index 592822f..219d31f 100644
+--- a/source/transfer/multiblock/MultiblockCoarsenAlgorithm.h
++++ b/source/transfer/multiblock/MultiblockCoarsenAlgorithm.h
+@@ -108,7 +108,7 @@ public:
+    /*!
+     * The virtual destructor for the algorithm releases all internal storage.
+     */
+-   virtual ~MultiblockCoarsenAlgorithm<DIM>();
++   virtual ~MultiblockCoarsenAlgorithm();
+ 
+    /*!
+     * Register a coarsening operation with the coarsening algorithm.  Data
+diff --git a/source/transfer/multiblock/MultiblockCoarsenPatchStrategy.h b/source/transfer/multiblock/MultiblockCoarsenPatchStrategy.h
+index b165777..679e122 100644
+--- a/source/transfer/multiblock/MultiblockCoarsenPatchStrategy.h
++++ b/source/transfer/multiblock/MultiblockCoarsenPatchStrategy.h
+@@ -50,7 +50,7 @@ public:
+    /*!
+     * The virtual destructor for coarsen strategy does nothing interesting.
+     */
+-   virtual ~MultiblockCoarsenPatchStrategy<DIM>();
++   virtual ~MultiblockCoarsenPatchStrategy();
+ 
+    /*!
+     * Return maximum stencil width needed over all user-defined
+diff --git a/source/transfer/multiblock/MultiblockCoarsenSchedule.h b/source/transfer/multiblock/MultiblockCoarsenSchedule.h
+index 5f352ef..61d733d 100644
+--- a/source/transfer/multiblock/MultiblockCoarsenSchedule.h
++++ b/source/transfer/multiblock/MultiblockCoarsenSchedule.h
+@@ -109,7 +109,7 @@ public:
+     * @brief The virtual destructor for the schedule releases all internal
+     *        storage.
+     */
+-   virtual ~MultiblockCoarsenSchedule<DIM>();
++   virtual ~MultiblockCoarsenSchedule();
+ 
+    /*!
+     * @brief Execute the stored communication schedule and perform the data
+diff --git a/source/transfer/multiblock/MultiblockRefineAlgorithm.h b/source/transfer/multiblock/MultiblockRefineAlgorithm.h
+index 608111e..47978a4 100644
+--- a/source/transfer/multiblock/MultiblockRefineAlgorithm.h
++++ b/source/transfer/multiblock/MultiblockRefineAlgorithm.h
+@@ -64,7 +64,7 @@ public:
+    /*!
+     * @brief Destructor
+     */
+-   ~MultiblockRefineAlgorithm<DIM>();
++   ~MultiblockRefineAlgorithm();
+ 
+    /*!
+     * Register a refine operation with the refine algorithm object.  This
+diff --git a/source/transfer/multiblock/MultiblockRefinePatchStrategy.h b/source/transfer/multiblock/MultiblockRefinePatchStrategy.h
+index a81bf3e..47773f5 100644
+--- a/source/transfer/multiblock/MultiblockRefinePatchStrategy.h
++++ b/source/transfer/multiblock/MultiblockRefinePatchStrategy.h
+@@ -46,7 +46,7 @@ public:
+    /*!
+     * The virtual destructor for refine strategy does nothing interesting.
+     */
+-   virtual ~MultiblockRefinePatchStrategy<DIM>();
++   virtual ~MultiblockRefinePatchStrategy();
+ 
+    /*!
+     * @brief Set the physical boundary conditions.
+diff --git a/source/transfer/multiblock/MultiblockRefineSchedule.h b/source/transfer/multiblock/MultiblockRefineSchedule.h
+index 07e0f26..00bcaa9 100644
+--- a/source/transfer/multiblock/MultiblockRefineSchedule.h
++++ b/source/transfer/multiblock/MultiblockRefineSchedule.h
+@@ -159,7 +159,7 @@ public:
+    /*!
+     * Virtual destructor
+     */
+-   virtual ~MultiblockRefineSchedule<DIM>();
++   virtual ~MultiblockRefineSchedule();
+ 
+    /*!
+     * @brief Execute the stored communication schedule and perform the
+diff --git a/source/transfer/operators/CoarsenOperator.h b/source/transfer/operators/CoarsenOperator.h
+index 5d17745..fbbea89 100644
+--- a/source/transfer/operators/CoarsenOperator.h
++++ b/source/transfer/operators/CoarsenOperator.h
+@@ -75,7 +75,7 @@ public:
+     * The virtual destructor for the coarsening operator does
+     * nothing interesting.
+     */
+-   virtual ~CoarsenOperator<DIM>();
++   virtual ~CoarsenOperator();
+ 
+    /**
+     * Return true if the coarsening operation matches the variable and
+diff --git a/source/transfer/operators/Geometry.h b/source/transfer/operators/Geometry.h
+index 01597bd..7101c8b 100644
+--- a/source/transfer/operators/Geometry.h
++++ b/source/transfer/operators/Geometry.h
+@@ -67,7 +67,7 @@ public:
+     * The virtual destructor for the geometry base class does
+     * nothing interesting.
+     */
+-   virtual ~Geometry<DIM>();
++   virtual ~Geometry();
+ 
+    /**
+     * Add concrete spatial coarsening operator instance to appropriate
+diff --git a/source/transfer/operators/RefineOperator.h b/source/transfer/operators/RefineOperator.h
+index 5984f5b..580098c 100644
+--- a/source/transfer/operators/RefineOperator.h
++++ b/source/transfer/operators/RefineOperator.h
+@@ -75,7 +75,7 @@ public:
+     * The virtual destructor for the refinement operator does
+     * nothing interesting.
+     */
+-   virtual ~RefineOperator<DIM>();
++   virtual ~RefineOperator();
+ 
+    /**
+     * Return true if the refinement operation matches the variable and
+diff --git a/source/transfer/operators/TimeInterpolateOperator.h b/source/transfer/operators/TimeInterpolateOperator.h
+index 39f2423..b587a47 100644
+--- a/source/transfer/operators/TimeInterpolateOperator.h
++++ b/source/transfer/operators/TimeInterpolateOperator.h
+@@ -70,7 +70,7 @@ public:
+     * The virtual destructor for the coarsening operator does
+     * nothing interesting.
+     */
+-   virtual ~TimeInterpolateOperator<DIM>();
++   virtual ~TimeInterpolateOperator();
+ 
+    /**
+     * Return true if the time interpolation operation matches the
+diff --git a/source/transfer/operators/VariableFillPattern.C b/source/transfer/operators/VariableFillPattern.C
+index cd00635..16caf7c 100644
+--- a/source/transfer/operators/VariableFillPattern.C
++++ b/source/transfer/operators/VariableFillPattern.C
+@@ -39,7 +39,33 @@ VariableFillPattern<DIM>::~VariableFillPattern()
+ {
+ }
+ 
++template<int DIM>
++tbox::Pointer< hier::BoxOverlap<DIM> >
++VariableFillPattern<DIM>::calculateOverlapOnLevel(const hier::BoxGeometry<DIM>& dst_geometry,
++                                                  const hier::BoxGeometry<DIM>& src_geometry,
++                                                  const hier::Box<DIM>& dst_patch_box,
++                                                  const hier::Box<DIM>& src_mask,
++                                                  const bool overwrite_interior,
++                                                  const hier::IntVector<DIM>& src_offset,
++                                                  const int dst_level_num,
++                                                  const int src_level_num) const
++{
++   NULL_USE(dst_level_num);
++   NULL_USE(src_level_num);
++   return calculateOverlap(dst_geometry,
++                           src_geometry,
++                           dst_patch_box,
++                           src_mask,
++                           overwrite_interior,
++                           src_offset);
++}
+ 
++template<int DIM>
++void VariableFillPattern<DIM>::setTargetPatchLevelNumber(const int level_num)
++{
++   NULL_USE(level_num);
++   return;
++}
+ 
+ }
+ }
+diff --git a/source/transfer/operators/VariableFillPattern.h b/source/transfer/operators/VariableFillPattern.h
+index 35c8377..9100093 100644
+--- a/source/transfer/operators/VariableFillPattern.h
++++ b/source/transfer/operators/VariableFillPattern.h
+@@ -67,6 +67,47 @@ public:
+                     const bool overwrite_interior,
+                     const hier::IntVector<DIM>& src_offset) const = 0;
+ 
++   /*!
++    * This virtual method provides an interface to calculate overlaps between
++    * the destination and source geometries on a specified level of the patch
++    * hierarchy.
++    *
++    * @note A default implementation is provided that simply calls the pure
++    * virtual method calculateOverlap() for implementations that are level
++    * independent.
++    *
++    * @param dst_geometry    geometry object for destination box
++    * @param src_geometry    geometry object for source box
++    * @param dst_patch_box   box for the destination patch
++    * @param src_mask        the source mask, the box resulting from shifting
++    *                        the source box
++    * @param overwrite_interior  controls whether or not to include the
++    *                            destination box interior in the overlap
++    * @param src_offset      the offset between source and destination
++    *                        index space.  src + src_offset = dst
++    * @param dst_level_num   the level of the patch hierarchy on which the
++    *                        dst boxes are located
++    * @param src_level_num   the level of the patch hierarchy on which the
++    *                        src boxes are located
++    *
++    * @return                Pointer to the calculated overlap object
++    */
++   virtual tbox::Pointer< hier::BoxOverlap<DIM> >
++   calculateOverlapOnLevel(const hier::BoxGeometry<DIM>& dst_geometry,
++                           const hier::BoxGeometry<DIM>& src_geometry,
++                           const hier::Box<DIM>& dst_patch_box,
++                           const hier::Box<DIM>& src_mask,
++                           const bool overwrite_interior,
++                           const hier::IntVector<DIM>& src_offset,
++                           const int dst_level_num,
++                           const int src_level_num) const;
++
++   /*!
++    * Set the target patch level number for the variable fill pattern.  The
++    * default implementation is empty.
++    */
++   virtual void setTargetPatchLevelNumber(const int level_num);
++
+    /*!
+     * Return the maximum ghost width of the boundary stencil.  The default
+     * implementation throws an error.
+diff --git a/source/transfer/templates/EmptyTransferX.C b/source/transfer/templates/EmptyTransferX.C
+index 955f3fb..fed18f1 100644
+--- a/source/transfer/templates/EmptyTransferX.C
++++ b/source/transfer/templates/EmptyTransferX.C
+@@ -14,6 +14,12 @@
+ namespace SAMRAI {
+    namespace xfer {
+       template<int DIM> class Empty {
++	 Empty() :
++	    something(0) 
++	 {
++	 }
++
++	 int something;
+       };
+ 
+       template class Empty< NDIM >;
diff --git a/source/algorithm/femutils/locally_active/LocallyActiveDataPatchBoundaryEdgeSum.h b/source/algorithm/femutils/locally_active/LocallyActiveDataPatchBoundaryEdgeSum.h
index de3a5d9..270842c 100644
--- a/source/algorithm/femutils/locally_active/LocallyActiveDataPatchBoundaryEdgeSum.h
+++ b/source/algorithm/femutils/locally_active/LocallyActiveDataPatchBoundaryEdgeSum.h
@@ -109,7 +109,7 @@ public:
    /*!
     *  @brief Destructor for the schedule releases all internal storage.
     */
-   ~LocallyActiveDataPatchBoundaryEdgeSum<DIM>();
+   ~LocallyActiveDataPatchBoundaryEdgeSum();
 
    /*!
     *  @brief Register edge data with given patch data identifier for summing.
diff --git a/source/algorithm/femutils/locally_active/LocallyActiveDataPatchBoundaryNodeSum.h b/source/algorithm/femutils/locally_active/LocallyActiveDataPatchBoundaryNodeSum.h
index 86a14b0..ffd5942 100644
--- a/source/algorithm/femutils/locally_active/LocallyActiveDataPatchBoundaryNodeSum.h
+++ b/source/algorithm/femutils/locally_active/LocallyActiveDataPatchBoundaryNodeSum.h
@@ -115,7 +115,7 @@ public:
    /*!
     *  @brief Destructor for the schedule releases all internal storage.
     */
-   ~LocallyActiveDataPatchBoundaryNodeSum<DIM>();
+   ~LocallyActiveDataPatchBoundaryNodeSum();
 
    /*!
     *  @brief Register node data with given patch data identifier for summing.
diff --git a/source/algorithm/femutils/standard/MblkPatchBoundaryNodeSum.h b/source/algorithm/femutils/standard/MblkPatchBoundaryNodeSum.h
index f8fe91d..009ebae 100644
--- a/source/algorithm/femutils/standard/MblkPatchBoundaryNodeSum.h
+++ b/source/algorithm/femutils/standard/MblkPatchBoundaryNodeSum.h
@@ -89,7 +89,7 @@ public:
    /*!
     *  @brief Destructor for the schedule releases all internal storage.
     */
-   ~MblkPatchBoundaryNodeSum<DIM>();
+   ~MblkPatchBoundaryNodeSum();
 
    /*!
     *  @brief Register node data with given patch data identifier for summing.
diff --git a/source/algorithm/femutils/standard/OuteredgeSumTransaction.h b/source/algorithm/femutils/standard/OuteredgeSumTransaction.h
index 2d2eac6..a0ee98e 100644
--- a/source/algorithm/femutils/standard/OuteredgeSumTransaction.h
+++ b/source/algorithm/femutils/standard/OuteredgeSumTransaction.h
@@ -99,7 +99,7 @@ public:
     * The virtual destructor for the copy transaction releases all
     * memory associated with the transaction.
     */
-   virtual ~OuteredgeSumTransaction<DIM>();
+   virtual ~OuteredgeSumTransaction();
 
    /*!
     * Return a boolean indicating whether this transaction can estimate
diff --git a/source/algorithm/femutils/standard/OuternodeSumTransaction.h b/source/algorithm/femutils/standard/OuternodeSumTransaction.h
index 6f5d523..5a0fa10 100644
--- a/source/algorithm/femutils/standard/OuternodeSumTransaction.h
+++ b/source/algorithm/femutils/standard/OuternodeSumTransaction.h
@@ -95,7 +95,7 @@ public:
     * The virtual destructor for the copy transaction releases all
     * memory associated with the transaction.
     */
-   virtual ~OuternodeSumTransaction<DIM>();
+   virtual ~OuternodeSumTransaction();
 
    /*!
     * Return a boolean indicating whether this transaction can estimate
diff --git a/source/algorithm/femutils/standard/PatchBoundaryEdgeSum.h b/source/algorithm/femutils/standard/PatchBoundaryEdgeSum.h
index b7de597..493e69b 100644
--- a/source/algorithm/femutils/standard/PatchBoundaryEdgeSum.h
+++ b/source/algorithm/femutils/standard/PatchBoundaryEdgeSum.h
@@ -106,7 +106,7 @@ public:
    /*!
     *  @brief Destructor for the schedule releases all internal storage.
     */
-   ~PatchBoundaryEdgeSum<DIM>();
+   ~PatchBoundaryEdgeSum();
 
    /*!
     *  @brief Register edge data with given patch data identifier for summing.
diff --git a/source/algorithm/femutils/standard/PatchBoundaryNodeSum.h b/source/algorithm/femutils/standard/PatchBoundaryNodeSum.h
index 626d82f..9ba9d27 100644
--- a/source/algorithm/femutils/standard/PatchBoundaryNodeSum.h
+++ b/source/algorithm/femutils/standard/PatchBoundaryNodeSum.h
@@ -113,7 +113,7 @@ public:
    /*!
     *  @brief Destructor for the schedule releases all internal storage.
     */
-   ~PatchBoundaryNodeSum<DIM>();
+   ~PatchBoundaryNodeSum();
 
    /*!
     *  @brief Register node data with given patch data identifier for summing.
diff --git a/source/algorithm/hyperbolic/HyperbolicLevelIntegrator.h b/source/algorithm/hyperbolic/HyperbolicLevelIntegrator.h
index 1d6f2f3..8652595 100644
--- a/source/algorithm/hyperbolic/HyperbolicLevelIntegrator.h
+++ b/source/algorithm/hyperbolic/HyperbolicLevelIntegrator.h
@@ -218,7 +218,7 @@ public:
     * The destructor for HyperbolicLevelIntegrator<DIM> unregisters 
     * the integrator object with the restart manager when so registered.
     */
-   virtual ~HyperbolicLevelIntegrator<DIM>();
+   virtual ~HyperbolicLevelIntegrator();
 
    /**
     * Initialize level integrator by by setting the number of time levels 
diff --git a/source/algorithm/hyperbolic/HyperbolicPatchStrategy.h b/source/algorithm/hyperbolic/HyperbolicPatchStrategy.h
index 99b20d4..bdbaf54 100644
--- a/source/algorithm/hyperbolic/HyperbolicPatchStrategy.h
+++ b/source/algorithm/hyperbolic/HyperbolicPatchStrategy.h
@@ -71,7 +71,7 @@ public:
    /**
     * Virtual destructor for HyperbolicPatchStrategy<DIM>.
     */
-   virtual ~HyperbolicPatchStrategy<DIM>();
+   virtual ~HyperbolicPatchStrategy();
 
    /**
     * Register specific variables needed in the numerical routines with the 
diff --git a/source/algorithm/implicit/ImplicitEquationStrategy.h b/source/algorithm/implicit/ImplicitEquationStrategy.h
index baf518e..a0a7a6d 100644
--- a/source/algorithm/implicit/ImplicitEquationStrategy.h
+++ b/source/algorithm/implicit/ImplicitEquationStrategy.h
@@ -47,7 +47,7 @@ public:
    /**
     * Empty destructor for ImplicitEquationStrategy<DIM>
     */
-   virtual ~ImplicitEquationStrategy<DIM>();
+   virtual ~ImplicitEquationStrategy();
 
    /**
     * Add components to the solution vector to define the state of the 
diff --git a/source/algorithm/implicit/ImplicitIntegrator.h b/source/algorithm/implicit/ImplicitIntegrator.h
index 1a63b69..a1e60f2 100644
--- a/source/algorithm/implicit/ImplicitIntegrator.h
+++ b/source/algorithm/implicit/ImplicitIntegrator.h
@@ -93,7 +93,7 @@ public:
    /**
     * Empty destructor for ImplicitIntegrator<DIM>
     */
-   virtual ~ImplicitIntegrator<DIM>();
+   virtual ~ImplicitIntegrator();
 
    /**
     * Initialize state of time integrator.  This includes creating
diff --git a/source/algorithm/method_of_lines/MethodOfLinesIntegrator.h b/source/algorithm/method_of_lines/MethodOfLinesIntegrator.h
index d0cc31b..21d741d 100644
--- a/source/algorithm/method_of_lines/MethodOfLinesIntegrator.h
+++ b/source/algorithm/method_of_lines/MethodOfLinesIntegrator.h
@@ -152,7 +152,7 @@ public:
     * The destructor for MethodOfLinesIntegrator<DIM> unregisters
     * the integrator object with the restart manager when so registered.
     */
-   virtual ~MethodOfLinesIntegrator<DIM>();
+   virtual ~MethodOfLinesIntegrator();
 
    /*!
     * Initialize integrator by setting the number of time levels
diff --git a/source/algorithm/method_of_lines/MethodOfLinesPatchStrategy.h b/source/algorithm/method_of_lines/MethodOfLinesPatchStrategy.h
index d121ec1..e9ea5dd 100644
--- a/source/algorithm/method_of_lines/MethodOfLinesPatchStrategy.h
+++ b/source/algorithm/method_of_lines/MethodOfLinesPatchStrategy.h
@@ -61,7 +61,7 @@ public:
    /*!
     * Virtual destructor for MethodOfLinesPatchStrategy<DIM>.
     */
-   virtual ~MethodOfLinesPatchStrategy<DIM>() = 0;
+   virtual ~MethodOfLinesPatchStrategy() = 0;
 
    /*!
     * Register variables specific to the problem to be solved with the 
diff --git a/source/algorithm/templates/EmptyAlgorithmX.C b/source/algorithm/templates/EmptyAlgorithmX.C
index 9b9795d..98e1e1a 100644
--- a/source/algorithm/templates/EmptyAlgorithmX.C
+++ b/source/algorithm/templates/EmptyAlgorithmX.C
@@ -14,6 +14,12 @@
 namespace SAMRAI {
    namespace algs {
       template<int DIM> class Empty {
+	 Empty() :
+	    something(0) 
+	 {
+	 }
+
+	 int something;
       };
 
       template class Empty< NDIM >;
diff --git a/source/algorithm/time_refinement/TimeRefinementIntegrator.h b/source/algorithm/time_refinement/TimeRefinementIntegrator.h
index 64a3a97..eb6bab0 100644
--- a/source/algorithm/time_refinement/TimeRefinementIntegrator.h
+++ b/source/algorithm/time_refinement/TimeRefinementIntegrator.h
@@ -183,7 +183,7 @@ public:
     * The destructor for TimeRefinementIntegrator<DIM> unregisters 
     * the integrator object with the restart manager when so registered.
     */
-   ~TimeRefinementIntegrator<DIM>();
+   ~TimeRefinementIntegrator();
 
    /*!
     * Set AMR patch hierarchy configuration and data at start of simulation.
diff --git a/source/algorithm/time_refinement/TimeRefinementLevelStrategy.h b/source/algorithm/time_refinement/TimeRefinementLevelStrategy.h
index a829869..38b6215 100644
--- a/source/algorithm/time_refinement/TimeRefinementLevelStrategy.h
+++ b/source/algorithm/time_refinement/TimeRefinementLevelStrategy.h
@@ -65,7 +65,7 @@ public:
    /**
     * Virtual destructor for TimeRefinementLevelStrategy<DIM>.
     */
-   virtual ~TimeRefinementLevelStrategy<DIM>();
+   virtual ~TimeRefinementLevelStrategy();
 
    /**
     * Initialize the state of the integrator that performs time 
diff --git a/source/apputils/embedded_boundary/CubesPatchInterface.C b/source/apputils/embedded_boundary/CubesPatchInterface.C
index 874be27..1d4d9bc 100644
--- a/source/apputils/embedded_boundary/CubesPatchInterface.C
+++ b/source/apputils/embedded_boundary/CubesPatchInterface.C
@@ -64,7 +64,7 @@ CubesPatchInterface<DIM>::CubesPatchInterface(
 *******************************************************************
 */
 template<int DIM> 
-CubesPatchInterface<DIM>::~CubesPatchInterface<DIM>()
+CubesPatchInterface<DIM>::~CubesPatchInterface()
 {
 
 }
diff --git a/source/apputils/embedded_boundary/ElevenPatchInterface.C b/source/apputils/embedded_boundary/ElevenPatchInterface.C
index ff62834..8433dd4 100644
--- a/source/apputils/embedded_boundary/ElevenPatchInterface.C
+++ b/source/apputils/embedded_boundary/ElevenPatchInterface.C
@@ -56,7 +56,7 @@ ElevenPatchInterface<DIM>::ElevenPatchInterface(
 *******************************************************************
 */
 template<int DIM> 
-ElevenPatchInterface<DIM>::~ElevenPatchInterface<DIM>()
+ElevenPatchInterface<DIM>::~ElevenPatchInterface()
 {
   
 }
diff --git a/source/apputils/embedded_boundary/EmbeddedBoundaryGeometry.C b/source/apputils/embedded_boundary/EmbeddedBoundaryGeometry.C
index cd81f85..f48513d 100755
--- a/source/apputils/embedded_boundary/EmbeddedBoundaryGeometry.C
+++ b/source/apputils/embedded_boundary/EmbeddedBoundaryGeometry.C
@@ -324,7 +324,7 @@ EmbeddedBoundaryGeometry<DIM>::EmbeddedBoundaryGeometry(
 */
 
 template<int DIM> 
-EmbeddedBoundaryGeometry<DIM>::~EmbeddedBoundaryGeometry<DIM>()
+EmbeddedBoundaryGeometry<DIM>::~EmbeddedBoundaryGeometry()
 {
 }
 
diff --git a/source/apputils/embedded_boundary/EmbeddedBoundaryShape.C b/source/apputils/embedded_boundary/EmbeddedBoundaryShape.C
index 92a0670..2135bca 100644
--- a/source/apputils/embedded_boundary/EmbeddedBoundaryShape.C
+++ b/source/apputils/embedded_boundary/EmbeddedBoundaryShape.C
@@ -33,7 +33,7 @@ template<int DIM> EmbeddedBoundaryShape<DIM>::EmbeddedBoundaryShape()
 {
 }
 
-template<int DIM> EmbeddedBoundaryShape<DIM>::~EmbeddedBoundaryShape<DIM>()
+template<int DIM> EmbeddedBoundaryShape<DIM>::~EmbeddedBoundaryShape()
 {   
 }
 
diff --git a/source/apputils/embedded_boundary/EmbeddedBoundaryShapePolygon.C b/source/apputils/embedded_boundary/EmbeddedBoundaryShapePolygon.C
index 2e94042..e18aad2 100644
--- a/source/apputils/embedded_boundary/EmbeddedBoundaryShapePolygon.C
+++ b/source/apputils/embedded_boundary/EmbeddedBoundaryShapePolygon.C
@@ -39,7 +39,7 @@ EmbeddedBoundaryShapePolygon<DIM>::EmbeddedBoundaryShapePolygon(
 }
 
 template<int DIM>      
-EmbeddedBoundaryShapePolygon<DIM>::~EmbeddedBoundaryShapePolygon<DIM>()
+EmbeddedBoundaryShapePolygon<DIM>::~EmbeddedBoundaryShapePolygon()
 {  
 }
 
diff --git a/source/apputils/embedded_boundary/EmbeddedBoundaryShapeSphere.h b/source/apputils/embedded_boundary/EmbeddedBoundaryShapeSphere.h
index 0f9664c..f2c0b62 100644
--- a/source/apputils/embedded_boundary/EmbeddedBoundaryShapeSphere.h
+++ b/source/apputils/embedded_boundary/EmbeddedBoundaryShapeSphere.h
@@ -62,7 +62,7 @@ public:
    /*!
     * The destructor does nothing.
     */
-   ~EmbeddedBoundaryShapeSphere<DIM>();
+   ~EmbeddedBoundaryShapeSphere();
 
    /*!
     * Concrete implementation of the isInside() method defined by the
diff --git a/source/apputils/plotting/CartesianVizamraiDataWriter.h b/source/apputils/plotting/CartesianVizamraiDataWriter.h
index 61dc830..2c29ab1 100644
--- a/source/apputils/plotting/CartesianVizamraiDataWriter.h
+++ b/source/apputils/plotting/CartesianVizamraiDataWriter.h
@@ -143,7 +143,7 @@ public:
    /*!
     * The destructor for the writer does nothing interesting.
     */
-   virtual ~CartesianVizamraiDataWriter<DIM>();
+   virtual ~CartesianVizamraiDataWriter();
 
    /*!
     * Set the finest hierarchy level to write to a Vizamrai file. 
diff --git a/source/apputils/plotting/VisDerivedDataStrategy.h b/source/apputils/plotting/VisDerivedDataStrategy.h
index 668b391..418e505 100644
--- a/source/apputils/plotting/VisDerivedDataStrategy.h
+++ b/source/apputils/plotting/VisDerivedDataStrategy.h
@@ -67,7 +67,7 @@ public:
    /*!
     * @brief Destructor for VisDerivedDataStrategy<DIM>.
     */
-   virtual ~VisDerivedDataStrategy<DIM>();
+   virtual ~VisDerivedDataStrategy();
 
    /*!
     * @brief This function calculates and packs derived
diff --git a/source/apputils/plotting/VisItDataWriter.C b/source/apputils/plotting/VisItDataWriter.C
index edf7d77..b050436 100644
--- a/source/apputils/plotting/VisItDataWriter.C
+++ b/source/apputils/plotting/VisItDataWriter.C
@@ -4481,7 +4481,7 @@ template<int DIM> void VisItDataWriter<DIM>::HDFputIntegerArray2D(
 #endif
    herr_t errf;
    if ((nelements0 > 0) && (nelements1 > 0)) {
-      hsize_t dim[] = {nelements0, nelements1};
+      hsize_t dim[] = {static_cast<hsize_t>(nelements0), static_cast<hsize_t>(nelements1)};
       hid_t space = H5Screate_simple(2, dim, NULL);
 #ifdef DEBUG_CHECK_ASSERTIONS
       TBOX_ASSERT(space >= 0);
@@ -4555,7 +4555,7 @@ template<int DIM> void VisItDataWriter<DIM>::HDFputDoubleArray2D(
 #endif
    herr_t errf;
    if ((nelements0 > 0) && (nelements1 > 0)) {
-      hsize_t dim[] = {nelements0, nelements1};
+      hsize_t dim[] = {static_cast<hsize_t>(nelements0), static_cast<hsize_t>(nelements1)};
       hid_t space = H5Screate_simple(2, dim, NULL);
 #ifdef DEBUG_CHECK_ASSERTIONS
       TBOX_ASSERT(space >= 0);
diff --git a/source/apputils/plotting/VisItDataWriter.h b/source/apputils/plotting/VisItDataWriter.h
index 78c37a2..4de1a5d 100644
--- a/source/apputils/plotting/VisItDataWriter.h
+++ b/source/apputils/plotting/VisItDataWriter.h
@@ -218,7 +218,7 @@ public:
     *
     * The destructor for the writer does nothing interesting.
     */
-   virtual ~VisItDataWriter<DIM>();
+   virtual ~VisItDataWriter();
 
    /*!
     * @brief This method sets the default data writer to use for derived
diff --git a/source/apputils/plotting/VisMaterialsDataStrategy.h b/source/apputils/plotting/VisMaterialsDataStrategy.h
index c8b3d3e..917f408 100644
--- a/source/apputils/plotting/VisMaterialsDataStrategy.h
+++ b/source/apputils/plotting/VisMaterialsDataStrategy.h
@@ -63,7 +63,7 @@ public:
    /*!
     * @brief Destructor for VisMaterialsDataStrategy<DIM>.
     */
-   virtual ~VisMaterialsDataStrategy<DIM>();
+   virtual ~VisMaterialsDataStrategy();
 
    /*!
     * @brief Enumerated type for the allowable return values
diff --git a/source/apputils/templates/EmptyAppUtilsX.C b/source/apputils/templates/EmptyAppUtilsX.C
index 93fd14d..995382a 100644
--- a/source/apputils/templates/EmptyAppUtilsX.C
+++ b/source/apputils/templates/EmptyAppUtilsX.C
@@ -14,6 +14,12 @@
 namespace SAMRAI {
    namespace appu {
       template<int DIM> class Empty {
+	 Empty() :
+	    something(0) 
+	 {
+	 }
+
+	 int something;
       };
 
       template class Empty< NDIM >;
diff --git a/source/geometry/cartesian/grid_geom/CartesianGridGeometry.C b/source/geometry/cartesian/grid_geom/CartesianGridGeometry.C
index 5bf05f5..21627ca 100644
--- a/source/geometry/cartesian/grid_geom/CartesianGridGeometry.C
+++ b/source/geometry/cartesian/grid_geom/CartesianGridGeometry.C
@@ -349,7 +349,7 @@ template<int DIM> void CartesianGridGeometry<DIM>::setGeometryData(
       d_x_up[id] = x_up[id];
    }
 
-   setPhysicalDomain(domain);
+   this->setPhysicalDomain(domain);
 
    hier::Box<DIM> bigbox;
    for (int k =0 ; k < this -> getPhysicalDomain().getNumberOfBoxes(); k++)
@@ -380,32 +380,32 @@ template<int DIM> void CartesianGridGeometry<DIM>::makeStandardOperators()
     * Standard spatial coarsening operators.
     */
 
-   addSpatialCoarsenOperator(new CartesianCellComplexWeightedAverage<DIM>());
-   addSpatialCoarsenOperator(new CartesianEdgeComplexWeightedAverage<DIM>());
-   addSpatialCoarsenOperator(new CartesianFaceComplexWeightedAverage<DIM>());
-   addSpatialCoarsenOperator(new pdat::NodeComplexInjection<DIM>());
-   addSpatialCoarsenOperator(new CartesianOuterfaceComplexWeightedAverage<DIM>());
-   addSpatialCoarsenOperator(new CartesianSideComplexWeightedAverage<DIM>());
+   this->addSpatialCoarsenOperator(new CartesianCellComplexWeightedAverage<DIM>());
+   this->addSpatialCoarsenOperator(new CartesianEdgeComplexWeightedAverage<DIM>());
+   this->addSpatialCoarsenOperator(new CartesianFaceComplexWeightedAverage<DIM>());
+   this->addSpatialCoarsenOperator(new pdat::NodeComplexInjection<DIM>());
+   this->addSpatialCoarsenOperator(new CartesianOuterfaceComplexWeightedAverage<DIM>());
+   this->addSpatialCoarsenOperator(new CartesianSideComplexWeightedAverage<DIM>());
 
-   addSpatialRefineOperator(new pdat::CellComplexConstantRefine<DIM>());
-   addSpatialRefineOperator(new CartesianCellComplexLinearRefine<DIM>());
-   addSpatialRefineOperator(new pdat::EdgeComplexConstantRefine<DIM>());
-   addSpatialRefineOperator(new pdat::FaceComplexConstantRefine<DIM>());
-   addSpatialRefineOperator(new CartesianNodeComplexLinearRefine<DIM>());
-   addSpatialRefineOperator(new pdat::OuterfaceComplexConstantRefine<DIM>());
-   addSpatialRefineOperator(new pdat::SideComplexConstantRefine<DIM>());
+   this->addSpatialRefineOperator(new pdat::CellComplexConstantRefine<DIM>());
+   this->addSpatialRefineOperator(new CartesianCellComplexLinearRefine<DIM>());
+   this->addSpatialRefineOperator(new pdat::EdgeComplexConstantRefine<DIM>());
+   this->addSpatialRefineOperator(new pdat::FaceComplexConstantRefine<DIM>());
+   this->addSpatialRefineOperator(new CartesianNodeComplexLinearRefine<DIM>());
+   this->addSpatialRefineOperator(new pdat::OuterfaceComplexConstantRefine<DIM>());
+   this->addSpatialRefineOperator(new pdat::SideComplexConstantRefine<DIM>());
 
    /*
     * Standard linear time interpolation operators.
     */
 
-   addTimeInterpolateOperator(new pdat::CellComplexLinearTimeInterpolateOp<DIM>());
-   addTimeInterpolateOperator(new pdat::EdgeComplexLinearTimeInterpolateOp<DIM>());
-   addTimeInterpolateOperator(new pdat::FaceComplexLinearTimeInterpolateOp<DIM>());
-   addTimeInterpolateOperator(new pdat::NodeComplexLinearTimeInterpolateOp<DIM>());
-   addTimeInterpolateOperator(new pdat::OuterfaceComplexLinearTimeInterpolateOp<DIM>());
-   addTimeInterpolateOperator(new pdat::OutersideComplexLinearTimeInterpolateOp<DIM>());
-   addTimeInterpolateOperator(new pdat::SideComplexLinearTimeInterpolateOp<DIM>());
+   this->addTimeInterpolateOperator(new pdat::CellComplexLinearTimeInterpolateOp<DIM>());
+   this->addTimeInterpolateOperator(new pdat::EdgeComplexLinearTimeInterpolateOp<DIM>());
+   this->addTimeInterpolateOperator(new pdat::FaceComplexLinearTimeInterpolateOp<DIM>());
+   this->addTimeInterpolateOperator(new pdat::NodeComplexLinearTimeInterpolateOp<DIM>());
+   this->addTimeInterpolateOperator(new pdat::OuterfaceComplexLinearTimeInterpolateOp<DIM>());
+   this->addTimeInterpolateOperator(new pdat::OutersideComplexLinearTimeInterpolateOp<DIM>());
+   this->addTimeInterpolateOperator(new pdat::SideComplexLinearTimeInterpolateOp<DIM>());
 #endif
 
 #ifdef HAVE_FLOAT
@@ -413,85 +413,85 @@ template<int DIM> void CartesianGridGeometry<DIM>::makeStandardOperators()
     * Standard spatial coarsening operators.
     */
 
-   addSpatialCoarsenOperator(new CartesianCellFloatWeightedAverage<DIM>());
-   addSpatialCoarsenOperator(new CartesianEdgeFloatWeightedAverage<DIM>());
-   addSpatialCoarsenOperator(new CartesianFaceFloatWeightedAverage<DIM>());
-   addSpatialCoarsenOperator(new pdat::NodeFloatInjection<DIM>());
-   addSpatialCoarsenOperator(new CartesianOuterfaceFloatWeightedAverage<DIM>());
-   addSpatialCoarsenOperator(new CartesianSideFloatWeightedAverage<DIM>());
+   this->addSpatialCoarsenOperator(new CartesianCellFloatWeightedAverage<DIM>());
+   this->addSpatialCoarsenOperator(new CartesianEdgeFloatWeightedAverage<DIM>());
+   this->addSpatialCoarsenOperator(new CartesianFaceFloatWeightedAverage<DIM>());
+   this->addSpatialCoarsenOperator(new pdat::NodeFloatInjection<DIM>());
+   this->addSpatialCoarsenOperator(new CartesianOuterfaceFloatWeightedAverage<DIM>());
+   this->addSpatialCoarsenOperator(new CartesianSideFloatWeightedAverage<DIM>());
 
    /*
     * Standard spatial refining operators.
     */
 
-   addSpatialRefineOperator(new CartesianCellFloatConservativeLinearRefine<DIM>());
-   addSpatialRefineOperator(new CartesianEdgeFloatConservativeLinearRefine<DIM>());
-   addSpatialRefineOperator(new pdat::EdgeFloatConstantRefine<DIM>());
-   addSpatialRefineOperator(new pdat::CellFloatConstantRefine<DIM>());
-   addSpatialRefineOperator(new CartesianCellFloatLinearRefine<DIM>());
-   addSpatialRefineOperator(new CartesianFaceFloatConservativeLinearRefine<DIM>());
-   addSpatialRefineOperator(new CartesianNodeFloatLinearRefine<DIM>());
-   addSpatialRefineOperator(new pdat::FaceFloatConstantRefine<DIM>());
-   addSpatialRefineOperator(new pdat::OuterfaceFloatConstantRefine<DIM>());
-   addSpatialRefineOperator(new pdat::OuterfaceIntegerConstantRefine<DIM>());
-   addSpatialRefineOperator(new CartesianSideFloatConservativeLinearRefine<DIM>());
-   addSpatialRefineOperator(new pdat::SideFloatConstantRefine<DIM>());
+   this->addSpatialRefineOperator(new CartesianCellFloatConservativeLinearRefine<DIM>());
+   this->addSpatialRefineOperator(new CartesianEdgeFloatConservativeLinearRefine<DIM>());
+   this->addSpatialRefineOperator(new pdat::EdgeFloatConstantRefine<DIM>());
+   this->addSpatialRefineOperator(new pdat::CellFloatConstantRefine<DIM>());
+   this->addSpatialRefineOperator(new CartesianCellFloatLinearRefine<DIM>());
+   this->addSpatialRefineOperator(new CartesianFaceFloatConservativeLinearRefine<DIM>());
+   this->addSpatialRefineOperator(new CartesianNodeFloatLinearRefine<DIM>());
+   this->addSpatialRefineOperator(new pdat::FaceFloatConstantRefine<DIM>());
+   this->addSpatialRefineOperator(new pdat::OuterfaceFloatConstantRefine<DIM>());
+   this->addSpatialRefineOperator(new pdat::OuterfaceIntegerConstantRefine<DIM>());
+   this->addSpatialRefineOperator(new CartesianSideFloatConservativeLinearRefine<DIM>());
+   this->addSpatialRefineOperator(new pdat::SideFloatConstantRefine<DIM>());
 
    /*
     * Standard linear time interpolation operators.
     */
 
-   addTimeInterpolateOperator(new pdat::CellFloatLinearTimeInterpolateOp<DIM>());
-   addTimeInterpolateOperator(new pdat::EdgeFloatLinearTimeInterpolateOp<DIM>());
-   addTimeInterpolateOperator(new pdat::FaceFloatLinearTimeInterpolateOp<DIM>());
-   addTimeInterpolateOperator(new pdat::NodeFloatLinearTimeInterpolateOp<DIM>());
-   addTimeInterpolateOperator(new pdat::OuterfaceFloatLinearTimeInterpolateOp<DIM>());
-   addTimeInterpolateOperator(new pdat::OutersideFloatLinearTimeInterpolateOp<DIM>());
-   addTimeInterpolateOperator(new pdat::SideFloatLinearTimeInterpolateOp<DIM>());
+   this->addTimeInterpolateOperator(new pdat::CellFloatLinearTimeInterpolateOp<DIM>());
+   this->addTimeInterpolateOperator(new pdat::EdgeFloatLinearTimeInterpolateOp<DIM>());
+   this->addTimeInterpolateOperator(new pdat::FaceFloatLinearTimeInterpolateOp<DIM>());
+   this->addTimeInterpolateOperator(new pdat::NodeFloatLinearTimeInterpolateOp<DIM>());
+   this->addTimeInterpolateOperator(new pdat::OuterfaceFloatLinearTimeInterpolateOp<DIM>());
+   this->addTimeInterpolateOperator(new pdat::OutersideFloatLinearTimeInterpolateOp<DIM>());
+   this->addTimeInterpolateOperator(new pdat::SideFloatLinearTimeInterpolateOp<DIM>());
 #endif
 
    /*
     * Standard spatial coarsening operators.
     */
-   addSpatialCoarsenOperator(new CartesianCellDoubleWeightedAverage<DIM>());
-   addSpatialCoarsenOperator(new CartesianEdgeDoubleWeightedAverage<DIM>());
-   addSpatialCoarsenOperator(new CartesianFaceDoubleWeightedAverage<DIM>());
-   addSpatialCoarsenOperator(new pdat::NodeDoubleInjection<DIM>());
-   addSpatialCoarsenOperator(new pdat::NodeIntegerInjection<DIM>());
-   addSpatialCoarsenOperator(new CartesianOuterfaceDoubleWeightedAverage<DIM>());
-   addSpatialCoarsenOperator(new pdat::OuternodeDoubleConstantCoarsen<DIM>());
-   addSpatialCoarsenOperator(new CartesianOutersideDoubleWeightedAverage<DIM>());
-   addSpatialCoarsenOperator(new CartesianSideDoubleWeightedAverage<DIM>());
+   this->addSpatialCoarsenOperator(new CartesianCellDoubleWeightedAverage<DIM>());
+   this->addSpatialCoarsenOperator(new CartesianEdgeDoubleWeightedAverage<DIM>());
+   this->addSpatialCoarsenOperator(new CartesianFaceDoubleWeightedAverage<DIM>());
+   this->addSpatialCoarsenOperator(new pdat::NodeDoubleInjection<DIM>());
+   this->addSpatialCoarsenOperator(new pdat::NodeIntegerInjection<DIM>());
+   this->addSpatialCoarsenOperator(new CartesianOuterfaceDoubleWeightedAverage<DIM>());
+   this->addSpatialCoarsenOperator(new pdat::OuternodeDoubleConstantCoarsen<DIM>());
+   this->addSpatialCoarsenOperator(new CartesianOutersideDoubleWeightedAverage<DIM>());
+   this->addSpatialCoarsenOperator(new CartesianSideDoubleWeightedAverage<DIM>());
 
    /*
     * Standard spatial refining operators.
     */
-   addSpatialRefineOperator(new CartesianCellDoubleConservativeLinearRefine<DIM>());
-   addSpatialRefineOperator(new pdat::CellDoubleConstantRefine<DIM>());
-   addSpatialRefineOperator(new CartesianCellDoubleLinearRefine<DIM>());
-   addSpatialRefineOperator(new CartesianEdgeDoubleConservativeLinearRefine<DIM>());
-   addSpatialRefineOperator(new pdat::EdgeDoubleConstantRefine<DIM>());
-   addSpatialRefineOperator(new pdat::EdgeIntegerConstantRefine<DIM>());
-   addSpatialRefineOperator(new pdat::CellIntegerConstantRefine<DIM>());
-   addSpatialRefineOperator(new CartesianFaceDoubleConservativeLinearRefine<DIM>());
-   addSpatialRefineOperator(new pdat::FaceDoubleConstantRefine<DIM>());
-   addSpatialRefineOperator(new pdat::FaceIntegerConstantRefine<DIM>());
-   addSpatialRefineOperator(new CartesianNodeDoubleLinearRefine<DIM>());
-   addSpatialRefineOperator(new pdat::OuterfaceDoubleConstantRefine<DIM>());
-   addSpatialRefineOperator(new CartesianSideDoubleConservativeLinearRefine<DIM>());
-   addSpatialRefineOperator(new pdat::SideDoubleConstantRefine<DIM>());
-   addSpatialRefineOperator(new pdat::SideIntegerConstantRefine<DIM>());
+   this->addSpatialRefineOperator(new CartesianCellDoubleConservativeLinearRefine<DIM>());
+   this->addSpatialRefineOperator(new pdat::CellDoubleConstantRefine<DIM>());
+   this->addSpatialRefineOperator(new CartesianCellDoubleLinearRefine<DIM>());
+   this->addSpatialRefineOperator(new CartesianEdgeDoubleConservativeLinearRefine<DIM>());
+   this->addSpatialRefineOperator(new pdat::EdgeDoubleConstantRefine<DIM>());
+   this->addSpatialRefineOperator(new pdat::EdgeIntegerConstantRefine<DIM>());
+   this->addSpatialRefineOperator(new pdat::CellIntegerConstantRefine<DIM>());
+   this->addSpatialRefineOperator(new CartesianFaceDoubleConservativeLinearRefine<DIM>());
+   this->addSpatialRefineOperator(new pdat::FaceDoubleConstantRefine<DIM>());
+   this->addSpatialRefineOperator(new pdat::FaceIntegerConstantRefine<DIM>());
+   this->addSpatialRefineOperator(new CartesianNodeDoubleLinearRefine<DIM>());
+   this->addSpatialRefineOperator(new pdat::OuterfaceDoubleConstantRefine<DIM>());
+   this->addSpatialRefineOperator(new CartesianSideDoubleConservativeLinearRefine<DIM>());
+   this->addSpatialRefineOperator(new pdat::SideDoubleConstantRefine<DIM>());
+   this->addSpatialRefineOperator(new pdat::SideIntegerConstantRefine<DIM>());
 
    /*
     * Standard linear time interpolation operators.
     */
-   addTimeInterpolateOperator(new pdat::CellDoubleLinearTimeInterpolateOp<DIM>());
-   addTimeInterpolateOperator(new pdat::EdgeDoubleLinearTimeInterpolateOp<DIM>());
-   addTimeInterpolateOperator(new pdat::FaceDoubleLinearTimeInterpolateOp<DIM>());
-   addTimeInterpolateOperator(new pdat::NodeDoubleLinearTimeInterpolateOp<DIM>());
-   addTimeInterpolateOperator(new pdat::OuterfaceDoubleLinearTimeInterpolateOp<DIM>());
-   addTimeInterpolateOperator(new pdat::OutersideDoubleLinearTimeInterpolateOp<DIM>());
-   addTimeInterpolateOperator(new pdat::SideDoubleLinearTimeInterpolateOp<DIM>());
+   this->addTimeInterpolateOperator(new pdat::CellDoubleLinearTimeInterpolateOp<DIM>());
+   this->addTimeInterpolateOperator(new pdat::EdgeDoubleLinearTimeInterpolateOp<DIM>());
+   this->addTimeInterpolateOperator(new pdat::FaceDoubleLinearTimeInterpolateOp<DIM>());
+   this->addTimeInterpolateOperator(new pdat::NodeDoubleLinearTimeInterpolateOp<DIM>());
+   this->addTimeInterpolateOperator(new pdat::OuterfaceDoubleLinearTimeInterpolateOp<DIM>());
+   this->addTimeInterpolateOperator(new pdat::OutersideDoubleLinearTimeInterpolateOp<DIM>());
+   this->addTimeInterpolateOperator(new pdat::SideDoubleLinearTimeInterpolateOp<DIM>());
 
 }
 
@@ -628,7 +628,7 @@ template<int DIM> void CartesianGridGeometry<DIM>::putToDatabase(
    db->putDoubleArray("d_x_lo", d_x_lo, DIM);
    db->putDoubleArray("d_x_up", d_x_up, DIM);
 
-   hier::IntVector<DIM> level0_shift = getPeriodicShift(hier::IntVector<DIM>(1));
+   hier::IntVector<DIM> level0_shift = this->getPeriodicShift(hier::IntVector<DIM>(1));
    int* temp_shift = level0_shift;
    db->putIntegerArray("d_periodic_shift", temp_shift, DIM);
 
@@ -710,7 +710,7 @@ template<int DIM> void CartesianGridGeometry<DIM>::getFromInput(
 
       setGeometryData(x_lo, x_up, domain);
 
-      initializePeriodicShift(per_bc);
+      this->initializePeriodicShift(per_bc);
 
    }
 }
@@ -752,12 +752,12 @@ template<int DIM> void CartesianGridGeometry<DIM>::getFromRestart()
    db->getDoubleArray("d_x_lo", x_lo, DIM);
    db->getDoubleArray("d_x_up", x_up, DIM);
 
-   setGeometryData(x_lo, x_up, domain);
+   this->setGeometryData(x_lo, x_up, domain);
 
    hier::IntVector<DIM> periodic_shift;
    int* temp_shift = periodic_shift;
    db->getIntegerArray("d_periodic_shift", temp_shift, DIM);
-   initializePeriodicShift(periodic_shift);
+   this->initializePeriodicShift(periodic_shift);
 
    d_using_original_locations = db->getBool("d_using_original_locations");
 }
diff --git a/source/geometry/cartesian/grid_geom/CartesianGridGeometry.h b/source/geometry/cartesian/grid_geom/CartesianGridGeometry.h
index 83f2664..1772c43 100644
--- a/source/geometry/cartesian/grid_geom/CartesianGridGeometry.h
+++ b/source/geometry/cartesian/grid_geom/CartesianGridGeometry.h
@@ -153,7 +153,7 @@ public:
     * data describing grid geometry and unregisters the object with
     * the restart manager if previously registered.
     */
-   virtual ~CartesianGridGeometry<DIM>();
+   virtual ~CartesianGridGeometry();
 
    
    /**
diff --git a/source/geometry/cartesian/operators/cell/CartesianCellComplexConservativeLinearRefine.h b/source/geometry/cartesian/operators/cell/CartesianCellComplexConservativeLinearRefine.h
index 1c20f5d..029e4bf 100644
--- a/source/geometry/cartesian/operators/cell/CartesianCellComplexConservativeLinearRefine.h
+++ b/source/geometry/cartesian/operators/cell/CartesianCellComplexConservativeLinearRefine.h
@@ -54,7 +54,7 @@ public:
    /**
     * Uninteresting virtual destructor.
     */
-   virtual ~CartesianCellComplexConservativeLinearRefine<DIM>();
+   virtual ~CartesianCellComplexConservativeLinearRefine();
 
    /**
     * Return true if the variable and name string match cell-centered 
diff --git a/source/geometry/cartesian/operators/cell/CartesianCellComplexLinearRefine.h b/source/geometry/cartesian/operators/cell/CartesianCellComplexLinearRefine.h
index 1b60eea..11e2a36 100644
--- a/source/geometry/cartesian/operators/cell/CartesianCellComplexLinearRefine.h
+++ b/source/geometry/cartesian/operators/cell/CartesianCellComplexLinearRefine.h
@@ -49,7 +49,7 @@ public:
    /**
     * Uninteresting virtual destructor.
     */
-   virtual ~CartesianCellComplexLinearRefine<DIM>();
+   virtual ~CartesianCellComplexLinearRefine();
 
    /**
     * Return true if the variable and name string match cell-centered 
diff --git a/source/geometry/cartesian/operators/cell/CartesianCellComplexWeightedAverage.h b/source/geometry/cartesian/operators/cell/CartesianCellComplexWeightedAverage.h
index 09ce951..eba6985 100644
--- a/source/geometry/cartesian/operators/cell/CartesianCellComplexWeightedAverage.h
+++ b/source/geometry/cartesian/operators/cell/CartesianCellComplexWeightedAverage.h
@@ -49,7 +49,7 @@ public:
    /**
     * Uninteresting virtual destructor.
     */
-   virtual ~CartesianCellComplexWeightedAverage<DIM>();
+   virtual ~CartesianCellComplexWeightedAverage();
 
    /**
     * Return true if the variable and name string match cell-centered 
diff --git a/source/geometry/cartesian/operators/cell/CartesianCellDoubleConservativeLinearRefine.h b/source/geometry/cartesian/operators/cell/CartesianCellDoubleConservativeLinearRefine.h
index 63ccbdb..506dfcd 100644
--- a/source/geometry/cartesian/operators/cell/CartesianCellDoubleConservativeLinearRefine.h
+++ b/source/geometry/cartesian/operators/cell/CartesianCellDoubleConservativeLinearRefine.h
@@ -51,7 +51,7 @@ public:
    /**
     * Uninteresting virtual destructor.
     */
-   virtual ~CartesianCellDoubleConservativeLinearRefine<DIM>();
+   virtual ~CartesianCellDoubleConservativeLinearRefine();
 
    /**
     * Return true if the variable and name string match cell-centered 
diff --git a/source/geometry/cartesian/operators/cell/CartesianCellDoubleLinearRefine.h b/source/geometry/cartesian/operators/cell/CartesianCellDoubleLinearRefine.h
index 791c491..e4174de 100644
--- a/source/geometry/cartesian/operators/cell/CartesianCellDoubleLinearRefine.h
+++ b/source/geometry/cartesian/operators/cell/CartesianCellDoubleLinearRefine.h
@@ -49,7 +49,7 @@ public:
    /**
     * Uninteresting virtual destructor.
     */
-   virtual ~CartesianCellDoubleLinearRefine<DIM>();
+   virtual ~CartesianCellDoubleLinearRefine();
 
    /**
     * Return true if the variable and name string match cell-centered 
diff --git a/source/geometry/cartesian/operators/cell/CartesianCellDoubleWeightedAverage.h b/source/geometry/cartesian/operators/cell/CartesianCellDoubleWeightedAverage.h
index c298283..0e7c4da 100644
--- a/source/geometry/cartesian/operators/cell/CartesianCellDoubleWeightedAverage.h
+++ b/source/geometry/cartesian/operators/cell/CartesianCellDoubleWeightedAverage.h
@@ -49,7 +49,7 @@ public:
    /**
     * Uninteresting virtual destructor.
     */
-   virtual ~CartesianCellDoubleWeightedAverage<DIM>();
+   virtual ~CartesianCellDoubleWeightedAverage();
 
    /**
     * Return true if the variable and name string match cell-centered 
diff --git a/source/geometry/cartesian/operators/cell/CartesianCellFloatConservativeLinearRefine.h b/source/geometry/cartesian/operators/cell/CartesianCellFloatConservativeLinearRefine.h
index cbf27ca..2f31fa6 100644
--- a/source/geometry/cartesian/operators/cell/CartesianCellFloatConservativeLinearRefine.h
+++ b/source/geometry/cartesian/operators/cell/CartesianCellFloatConservativeLinearRefine.h
@@ -51,7 +51,7 @@ public:
    /**
     * Uninteresting virtual destructor.
     */
-   virtual ~CartesianCellFloatConservativeLinearRefine<DIM>();
+   virtual ~CartesianCellFloatConservativeLinearRefine();
 
    /**
     * Return true if the variable and name string match cell-centered 
diff --git a/source/geometry/cartesian/operators/cell/CartesianCellFloatLinearRefine.h b/source/geometry/cartesian/operators/cell/CartesianCellFloatLinearRefine.h
index 08e85a2..c752886 100644
--- a/source/geometry/cartesian/operators/cell/CartesianCellFloatLinearRefine.h
+++ b/source/geometry/cartesian/operators/cell/CartesianCellFloatLinearRefine.h
@@ -49,7 +49,7 @@ public:
    /**
     * Uninteresting virtual destructor.
     */
-   virtual ~CartesianCellFloatLinearRefine<DIM>();
+   virtual ~CartesianCellFloatLinearRefine();
 
    /**
     * Return true if the variable and name string match cell-centered 
diff --git a/source/geometry/cartesian/operators/cell/CartesianCellFloatWeightedAverage.h b/source/geometry/cartesian/operators/cell/CartesianCellFloatWeightedAverage.h
index 8532102..0f0b814 100644
--- a/source/geometry/cartesian/operators/cell/CartesianCellFloatWeightedAverage.h
+++ b/source/geometry/cartesian/operators/cell/CartesianCellFloatWeightedAverage.h
@@ -49,7 +49,7 @@ public:
    /**
     * Uninteresting virtual destructor.
     */
-   virtual ~CartesianCellFloatWeightedAverage<DIM>();
+   virtual ~CartesianCellFloatWeightedAverage();
 
    /**
     * Return true if the variable and name string match cell-centered 
diff --git a/source/geometry/cartesian/operators/edge/CartesianEdgeComplexWeightedAverage.h b/source/geometry/cartesian/operators/edge/CartesianEdgeComplexWeightedAverage.h
index 399ab28..944bf9a 100644
--- a/source/geometry/cartesian/operators/edge/CartesianEdgeComplexWeightedAverage.h
+++ b/source/geometry/cartesian/operators/edge/CartesianEdgeComplexWeightedAverage.h
@@ -49,7 +49,7 @@ public:
    /**
     * Uninteresting virtual destructor.
     */
-   virtual ~CartesianEdgeComplexWeightedAverage<DIM>();
+   virtual ~CartesianEdgeComplexWeightedAverage();
 
    /**
     * Return true if the variable and name string match the edge-centered 
diff --git a/source/geometry/cartesian/operators/edge/CartesianEdgeDoubleConservativeLinearRefine.h b/source/geometry/cartesian/operators/edge/CartesianEdgeDoubleConservativeLinearRefine.h
index 4c77d6f..010ae46 100644
--- a/source/geometry/cartesian/operators/edge/CartesianEdgeDoubleConservativeLinearRefine.h
+++ b/source/geometry/cartesian/operators/edge/CartesianEdgeDoubleConservativeLinearRefine.h
@@ -51,7 +51,7 @@ public:
    /**
     * Uninteresting virtual destructor.
     */
-   virtual ~CartesianEdgeDoubleConservativeLinearRefine<DIM>();
+   virtual ~CartesianEdgeDoubleConservativeLinearRefine();
 
    /**
     * Return true if the variable and name string match edge-centered 
diff --git a/source/geometry/cartesian/operators/edge/CartesianEdgeDoubleWeightedAverage.h b/source/geometry/cartesian/operators/edge/CartesianEdgeDoubleWeightedAverage.h
index 90162e1..b6a4b9d 100644
--- a/source/geometry/cartesian/operators/edge/CartesianEdgeDoubleWeightedAverage.h
+++ b/source/geometry/cartesian/operators/edge/CartesianEdgeDoubleWeightedAverage.h
@@ -49,7 +49,7 @@ public:
    /**
     * Uninteresting virtual destructor.
     */
-   virtual ~CartesianEdgeDoubleWeightedAverage<DIM>();
+   virtual ~CartesianEdgeDoubleWeightedAverage();
 
    /**
     * Return true if the variable and name string match the edge-centered 
diff --git a/source/geometry/cartesian/operators/edge/CartesianEdgeFloatConservativeLinearRefine.h b/source/geometry/cartesian/operators/edge/CartesianEdgeFloatConservativeLinearRefine.h
index 96b18bb..40276c1 100644
--- a/source/geometry/cartesian/operators/edge/CartesianEdgeFloatConservativeLinearRefine.h
+++ b/source/geometry/cartesian/operators/edge/CartesianEdgeFloatConservativeLinearRefine.h
@@ -51,7 +51,7 @@ public:
    /**
     * Uninteresting virtual destructor.
     */
-   virtual ~CartesianEdgeFloatConservativeLinearRefine<DIM>();
+   virtual ~CartesianEdgeFloatConservativeLinearRefine();
 
    /**
     * Return true if the variable and name string match edge-centered 
diff --git a/source/geometry/cartesian/operators/edge/CartesianEdgeFloatWeightedAverage.h b/source/geometry/cartesian/operators/edge/CartesianEdgeFloatWeightedAverage.h
index 88003c6..40dc9c3 100644
--- a/source/geometry/cartesian/operators/edge/CartesianEdgeFloatWeightedAverage.h
+++ b/source/geometry/cartesian/operators/edge/CartesianEdgeFloatWeightedAverage.h
@@ -49,7 +49,7 @@ public:
    /**
     * Uninteresting virtual destructor.
     */
-   virtual ~CartesianEdgeFloatWeightedAverage<DIM>();
+   virtual ~CartesianEdgeFloatWeightedAverage();
 
    /**
     * Return true if the variable and name string match the edge-centered 
diff --git a/source/geometry/cartesian/operators/face/CartesianFaceComplexWeightedAverage.h b/source/geometry/cartesian/operators/face/CartesianFaceComplexWeightedAverage.h
index 264796d..cacd9c2 100644
--- a/source/geometry/cartesian/operators/face/CartesianFaceComplexWeightedAverage.h
+++ b/source/geometry/cartesian/operators/face/CartesianFaceComplexWeightedAverage.h
@@ -48,7 +48,7 @@ public:
    /**
     * Uninteresting virtual destructor.
     */
-   virtual ~CartesianFaceComplexWeightedAverage<DIM>();
+   virtual ~CartesianFaceComplexWeightedAverage();
 
    /**
     * Return true if the variable and name string match the face-centered 
diff --git a/source/geometry/cartesian/operators/face/CartesianFaceDoubleConservativeLinearRefine.h b/source/geometry/cartesian/operators/face/CartesianFaceDoubleConservativeLinearRefine.h
index b846442..6e4ad55 100644
--- a/source/geometry/cartesian/operators/face/CartesianFaceDoubleConservativeLinearRefine.h
+++ b/source/geometry/cartesian/operators/face/CartesianFaceDoubleConservativeLinearRefine.h
@@ -51,7 +51,7 @@ public:
    /**
     * Uninteresting virtual destructor.
     */
-   virtual ~CartesianFaceDoubleConservativeLinearRefine<DIM>();
+   virtual ~CartesianFaceDoubleConservativeLinearRefine();
 
    /**
     * Return true if the variable and name string match face-centered 
diff --git a/source/geometry/cartesian/operators/face/CartesianFaceDoubleWeightedAverage.h b/source/geometry/cartesian/operators/face/CartesianFaceDoubleWeightedAverage.h
index 39c982b..e28491e 100644
--- a/source/geometry/cartesian/operators/face/CartesianFaceDoubleWeightedAverage.h
+++ b/source/geometry/cartesian/operators/face/CartesianFaceDoubleWeightedAverage.h
@@ -49,7 +49,7 @@ public:
    /**
     * Uninteresting virtual destructor.
     */
-   virtual ~CartesianFaceDoubleWeightedAverage<DIM>();
+   virtual ~CartesianFaceDoubleWeightedAverage();
 
    /**
     * Return true if the variable and name string match the face-centered 
diff --git a/source/geometry/cartesian/operators/face/CartesianFaceFloatConservativeLinearRefine.h b/source/geometry/cartesian/operators/face/CartesianFaceFloatConservativeLinearRefine.h
index c27096e..dcb257e 100644
--- a/source/geometry/cartesian/operators/face/CartesianFaceFloatConservativeLinearRefine.h
+++ b/source/geometry/cartesian/operators/face/CartesianFaceFloatConservativeLinearRefine.h
@@ -51,7 +51,7 @@ public:
    /**
     * Uninteresting virtual destructor.
     */
-   virtual ~CartesianFaceFloatConservativeLinearRefine<DIM>();
+   virtual ~CartesianFaceFloatConservativeLinearRefine();
 
    /**
     * Return true if the variable and name string match face-centered 
diff --git a/source/geometry/cartesian/operators/face/CartesianFaceFloatWeightedAverage.h b/source/geometry/cartesian/operators/face/CartesianFaceFloatWeightedAverage.h
index 15bdb67..5c368da 100644
--- a/source/geometry/cartesian/operators/face/CartesianFaceFloatWeightedAverage.h
+++ b/source/geometry/cartesian/operators/face/CartesianFaceFloatWeightedAverage.h
@@ -49,7 +49,7 @@ public:
    /**
     * Uninteresting virtual destructor.
     */
-   virtual ~CartesianFaceFloatWeightedAverage<DIM>();
+   virtual ~CartesianFaceFloatWeightedAverage();
 
    /**
     * Return true if the variable and name string match the face-centered 
diff --git a/source/geometry/cartesian/operators/node/CartesianNodeComplexLinearRefine.h b/source/geometry/cartesian/operators/node/CartesianNodeComplexLinearRefine.h
index c33ad95..8864a7b 100644
--- a/source/geometry/cartesian/operators/node/CartesianNodeComplexLinearRefine.h
+++ b/source/geometry/cartesian/operators/node/CartesianNodeComplexLinearRefine.h
@@ -49,7 +49,7 @@ public:
    /**
     * Uninteresting virtual destructor.
     */
-   virtual ~CartesianNodeComplexLinearRefine<DIM>();
+   virtual ~CartesianNodeComplexLinearRefine();
 
    /**
     * Return true if the variable and name string match node-centered 
diff --git a/source/geometry/cartesian/operators/node/CartesianNodeDoubleLinearRefine.h b/source/geometry/cartesian/operators/node/CartesianNodeDoubleLinearRefine.h
index b237203..ee61c0e 100644
--- a/source/geometry/cartesian/operators/node/CartesianNodeDoubleLinearRefine.h
+++ b/source/geometry/cartesian/operators/node/CartesianNodeDoubleLinearRefine.h
@@ -49,7 +49,7 @@ public:
    /**
     * Uninteresting virtual destructor.
     */
-   virtual ~CartesianNodeDoubleLinearRefine<DIM>();
+   virtual ~CartesianNodeDoubleLinearRefine();
 
    /**
     * Return true if the variable and name string match node-centered 
diff --git a/source/geometry/cartesian/operators/node/CartesianNodeFloatLinearRefine.h b/source/geometry/cartesian/operators/node/CartesianNodeFloatLinearRefine.h
index bfb9bc7..93bf126 100644
--- a/source/geometry/cartesian/operators/node/CartesianNodeFloatLinearRefine.h
+++ b/source/geometry/cartesian/operators/node/CartesianNodeFloatLinearRefine.h
@@ -49,7 +49,7 @@ public:
    /**
     * Uninteresting virtual destructor.
     */
-   virtual ~CartesianNodeFloatLinearRefine<DIM>();
+   virtual ~CartesianNodeFloatLinearRefine();
 
    /**
     * Return true if the variable and name string match node-centered 
diff --git a/source/geometry/cartesian/operators/outerface/CartesianOuterfaceComplexWeightedAverage.h b/source/geometry/cartesian/operators/outerface/CartesianOuterfaceComplexWeightedAverage.h
index c8e0cee..fe90c38 100644
--- a/source/geometry/cartesian/operators/outerface/CartesianOuterfaceComplexWeightedAverage.h
+++ b/source/geometry/cartesian/operators/outerface/CartesianOuterfaceComplexWeightedAverage.h
@@ -49,7 +49,7 @@ public:
    /**
     * Uninteresting virtual destructor.
     */
-   virtual ~CartesianOuterfaceComplexWeightedAverage<DIM>();
+   virtual ~CartesianOuterfaceComplexWeightedAverage();
 
    /**
     * Return true if the variable and name string match the outerface
diff --git a/source/geometry/cartesian/operators/outerface/CartesianOuterfaceDoubleWeightedAverage.h b/source/geometry/cartesian/operators/outerface/CartesianOuterfaceDoubleWeightedAverage.h
index 1d32c7c..9108094 100644
--- a/source/geometry/cartesian/operators/outerface/CartesianOuterfaceDoubleWeightedAverage.h
+++ b/source/geometry/cartesian/operators/outerface/CartesianOuterfaceDoubleWeightedAverage.h
@@ -49,7 +49,7 @@ public:
    /**
     * Uninteresting virtual destructor.
     */
-   virtual ~CartesianOuterfaceDoubleWeightedAverage<DIM>();
+   virtual ~CartesianOuterfaceDoubleWeightedAverage();
 
    /**
     * Return true if the variable and name string match the outerface
diff --git a/source/geometry/cartesian/operators/outerface/CartesianOuterfaceFloatWeightedAverage.h b/source/geometry/cartesian/operators/outerface/CartesianOuterfaceFloatWeightedAverage.h
index 56e7971..8e3ebee 100644
--- a/source/geometry/cartesian/operators/outerface/CartesianOuterfaceFloatWeightedAverage.h
+++ b/source/geometry/cartesian/operators/outerface/CartesianOuterfaceFloatWeightedAverage.h
@@ -49,7 +49,7 @@ public:
    /**
     * Uninteresting virtual destructor.
     */
-   virtual ~CartesianOuterfaceFloatWeightedAverage<DIM>();
+   virtual ~CartesianOuterfaceFloatWeightedAverage();
 
    /**
     * Return true if the variable and name string match the outerface
diff --git a/source/geometry/cartesian/operators/outerside/CartesianOutersideDoubleWeightedAverage.h b/source/geometry/cartesian/operators/outerside/CartesianOutersideDoubleWeightedAverage.h
index 6df073c..b3819b0 100644
--- a/source/geometry/cartesian/operators/outerside/CartesianOutersideDoubleWeightedAverage.h
+++ b/source/geometry/cartesian/operators/outerside/CartesianOutersideDoubleWeightedAverage.h
@@ -49,7 +49,7 @@ public:
    /**
     * Uninteresting virtual destructor.
     */
-   virtual ~CartesianOutersideDoubleWeightedAverage<DIM>();
+   virtual ~CartesianOutersideDoubleWeightedAverage();
 
    /**
     * Return true if the variable and name string match the outerside
diff --git a/source/geometry/cartesian/operators/side/CartesianSideComplexWeightedAverage.h b/source/geometry/cartesian/operators/side/CartesianSideComplexWeightedAverage.h
index 5ae0649..a4d5fd5 100644
--- a/source/geometry/cartesian/operators/side/CartesianSideComplexWeightedAverage.h
+++ b/source/geometry/cartesian/operators/side/CartesianSideComplexWeightedAverage.h
@@ -49,7 +49,7 @@ public:
    /**
     * Uninteresting virtual destructor.
     */
-   virtual ~CartesianSideComplexWeightedAverage<DIM>();
+   virtual ~CartesianSideComplexWeightedAverage();
 
    /**
     * Return true if the variable and name string match the side-centered 
diff --git a/source/geometry/cartesian/operators/side/CartesianSideDoubleConservativeLinearRefine.h b/source/geometry/cartesian/operators/side/CartesianSideDoubleConservativeLinearRefine.h
index e6e9f01..530421c 100644
--- a/source/geometry/cartesian/operators/side/CartesianSideDoubleConservativeLinearRefine.h
+++ b/source/geometry/cartesian/operators/side/CartesianSideDoubleConservativeLinearRefine.h
@@ -51,7 +51,7 @@ public:
    /**
     * Uninteresting virtual destructor.
     */
-   virtual ~CartesianSideDoubleConservativeLinearRefine<DIM>();
+   virtual ~CartesianSideDoubleConservativeLinearRefine();
 
    /**
     * Return true if the variable and name string match side-centered 
diff --git a/source/geometry/cartesian/operators/side/CartesianSideDoubleWeightedAverage.h b/source/geometry/cartesian/operators/side/CartesianSideDoubleWeightedAverage.h
index 1abac78..92cf15e 100644
--- a/source/geometry/cartesian/operators/side/CartesianSideDoubleWeightedAverage.h
+++ b/source/geometry/cartesian/operators/side/CartesianSideDoubleWeightedAverage.h
@@ -49,7 +49,7 @@ public:
    /**
     * Uninteresting virtual destructor.
     */
-   virtual ~CartesianSideDoubleWeightedAverage<DIM>();
+   virtual ~CartesianSideDoubleWeightedAverage();
 
    /**
     * Return true if the variable and name string match the side-centered 
diff --git a/source/geometry/cartesian/operators/side/CartesianSideFloatConservativeLinearRefine.h b/source/geometry/cartesian/operators/side/CartesianSideFloatConservativeLinearRefine.h
index 95bc99f..294eae8 100644
--- a/source/geometry/cartesian/operators/side/CartesianSideFloatConservativeLinearRefine.h
+++ b/source/geometry/cartesian/operators/side/CartesianSideFloatConservativeLinearRefine.h
@@ -51,7 +51,7 @@ public:
    /**
     * Uninteresting virtual destructor.
     */
-   virtual ~CartesianSideFloatConservativeLinearRefine<DIM>();
+   virtual ~CartesianSideFloatConservativeLinearRefine();
 
    /**
     * Return true if the variable and name string match side-centered 
diff --git a/source/geometry/cartesian/operators/side/CartesianSideFloatWeightedAverage.h b/source/geometry/cartesian/operators/side/CartesianSideFloatWeightedAverage.h
index 6d0aed0..ca553a8 100644
--- a/source/geometry/cartesian/operators/side/CartesianSideFloatWeightedAverage.h
+++ b/source/geometry/cartesian/operators/side/CartesianSideFloatWeightedAverage.h
@@ -49,7 +49,7 @@ public:
    /**
     * Uninteresting virtual destructor.
     */
-   virtual ~CartesianSideFloatWeightedAverage<DIM>();
+   virtual ~CartesianSideFloatWeightedAverage();
 
    /**
     * Return true if the variable and name string match the side-centered 
diff --git a/source/geometry/cartesian/patch_geom/CartesianPatchGeometry.h b/source/geometry/cartesian/patch_geom/CartesianPatchGeometry.h
index 4bc4732..deb953b 100644
--- a/source/geometry/cartesian/patch_geom/CartesianPatchGeometry.h
+++ b/source/geometry/cartesian/patch_geom/CartesianPatchGeometry.h
@@ -43,7 +43,7 @@ public:
     * patch boundary information to hier::PatchGeometry base class constructor
     * and allocates storage for spatial coordinates on patch.
     */
-   CartesianPatchGeometry<DIM>(
+   CartesianPatchGeometry(
       const hier::IntVector<DIM>& ratio_to_level_zero,
       const tbox::Array< tbox::Array<bool> >& touches_regular_bdry,
       const tbox::Array< tbox::Array<bool> >& touches_periodic_bdry,
@@ -55,7 +55,7 @@ public:
     * Destructor for CartesianPatchGeometry deallocates the
     * storage for spatial coordinates on patch.
     */
-   ~CartesianPatchGeometry<DIM>();
+   ~CartesianPatchGeometry();
 
    /**
     * Return const pointer to dx array for patch. 
diff --git a/source/geometry/multiblock/grid_geom/BlockGridGeometry.h b/source/geometry/multiblock/grid_geom/BlockGridGeometry.h
index 33488a1..3a58c61 100644
--- a/source/geometry/multiblock/grid_geom/BlockGridGeometry.h
+++ b/source/geometry/multiblock/grid_geom/BlockGridGeometry.h
@@ -61,7 +61,7 @@ public:
     * Destructor for BlockGridGeometry unregisters the object 
     * with the restart manager if previously registered.
     */
-   virtual ~BlockGridGeometry<DIM>();
+   virtual ~BlockGridGeometry();
    
    /**
     * Create and return a pointer to a refined version of this Cartesian grid
diff --git a/source/geometry/multiblock/patch_geom/BlockPatchGeometry.h b/source/geometry/multiblock/patch_geom/BlockPatchGeometry.h
index 067cdd1..cf55fcb 100644
--- a/source/geometry/multiblock/patch_geom/BlockPatchGeometry.h
+++ b/source/geometry/multiblock/patch_geom/BlockPatchGeometry.h
@@ -52,7 +52,7 @@ public:
    /**
     * Destructor for BlockPatchGeometry.
     */
-   ~BlockPatchGeometry<DIM>();
+   ~BlockPatchGeometry();
 
    /**
     * Get the block number for the block on which the patch lies. 
diff --git a/source/geometry/skeleton/grid_geom/SkeletonGridGeometry.h b/source/geometry/skeleton/grid_geom/SkeletonGridGeometry.h
index 8511514..79cfe73 100644
--- a/source/geometry/skeleton/grid_geom/SkeletonGridGeometry.h
+++ b/source/geometry/skeleton/grid_geom/SkeletonGridGeometry.h
@@ -120,7 +120,7 @@ public:
     * Destructor for SkeletonGridGeometry unregisters the object 
     * with the restart manager if previously registered.
     */
-   virtual ~SkeletonGridGeometry<DIM>();
+   virtual ~SkeletonGridGeometry();
    
    /**
     * Create and return a pointer to a refined version of this Cartesian grid
diff --git a/source/geometry/skeleton/operators/SkeletonCoarsen.h b/source/geometry/skeleton/operators/SkeletonCoarsen.h
index 1f4b79a..3a4c77b 100644
--- a/source/geometry/skeleton/operators/SkeletonCoarsen.h
+++ b/source/geometry/skeleton/operators/SkeletonCoarsen.h
@@ -47,7 +47,7 @@ public:
    /**
     * Uninteresting virtual destructor.
     */
-   virtual ~SkeletonCoarsen<DIM>();
+   virtual ~SkeletonCoarsen();
 
    /**
     * Return true if the variable and name string match cell-centered 
diff --git a/source/geometry/skeleton/operators/SkeletonRefine.h b/source/geometry/skeleton/operators/SkeletonRefine.h
index cc3d3d9..e860a27 100644
--- a/source/geometry/skeleton/operators/SkeletonRefine.h
+++ b/source/geometry/skeleton/operators/SkeletonRefine.h
@@ -47,7 +47,7 @@ public:
    /**
     * Uninteresting virtual destructor.
     */
-   virtual ~SkeletonRefine<DIM>();
+   virtual ~SkeletonRefine();
 
    /**
     * Return true if the variable and name string match cell-centered 
diff --git a/source/geometry/skeleton/patch_geom/SkeletonPatchGeometry.h b/source/geometry/skeleton/patch_geom/SkeletonPatchGeometry.h
index 672bce1..c1bad61 100644
--- a/source/geometry/skeleton/patch_geom/SkeletonPatchGeometry.h
+++ b/source/geometry/skeleton/patch_geom/SkeletonPatchGeometry.h
@@ -51,7 +51,7 @@ public:
    /**
     * Destructor for SkeletonPatchGeometry.
     */
-   ~SkeletonPatchGeometry<DIM>();
+   ~SkeletonPatchGeometry();
 
    /**
     * Print SkeletonPatchGeometry class data.
diff --git a/source/geometry/templates/EmptyGeometryX.C b/source/geometry/templates/EmptyGeometryX.C
index 9165e43..601487c 100644
--- a/source/geometry/templates/EmptyGeometryX.C
+++ b/source/geometry/templates/EmptyGeometryX.C
@@ -14,6 +14,12 @@
 namespace SAMRAI {
    namespace geom {
       template<int DIM> class Empty {
+	 Empty() :
+	    something(0) 
+	 {
+	 }
+
+	 int something;
       };
 
       template class Empty< NDIM >;
diff --git a/source/hierarchy/boxes/BinaryTree.h b/source/hierarchy/boxes/BinaryTree.h
index a7e17ab..3aaef26 100644
--- a/source/hierarchy/boxes/BinaryTree.h
+++ b/source/hierarchy/boxes/BinaryTree.h
@@ -45,7 +45,7 @@ public:
    /**
     * The destructor does nothing of public interest.
     */
-   ~BinaryTree<DIM>();
+   ~BinaryTree();
 
    /**
     * Returns true if "box" intersects a patch that is local 
diff --git a/source/hierarchy/boxes/Box.h b/source/hierarchy/boxes/Box.h
index 69ea6b2..71311fa 100644
--- a/source/hierarchy/boxes/Box.h
+++ b/source/hierarchy/boxes/Box.h
@@ -449,7 +449,7 @@ public:
    /**
     * Destructor for the box iterator.
     */
-   ~BoxIterator<DIM>();
+   ~BoxIterator();
 
    /**
     * @brief Initializer for the box iterator.
diff --git a/source/hierarchy/boxes/BoxArray.h b/source/hierarchy/boxes/BoxArray.h
index 01d930e..3551385 100644
--- a/source/hierarchy/boxes/BoxArray.h
+++ b/source/hierarchy/boxes/BoxArray.h
@@ -88,7 +88,7 @@ public:
    /**
     * The BoxArray destructor releases the box array data.
     */
-   ~BoxArray<DIM>();
+   ~BoxArray();
 
    /**
     * Return the number of boxes in the array.
diff --git a/source/hierarchy/boxes/BoxGraph.h b/source/hierarchy/boxes/BoxGraph.h
index c8ef118..479845c 100644
--- a/source/hierarchy/boxes/BoxGraph.h
+++ b/source/hierarchy/boxes/BoxGraph.h
@@ -158,7 +158,7 @@ public:
    /*!
     * The destructor releases privately held resources.
     */
-   ~BoxGraph<DIM>();
+   ~BoxGraph();
 
    /*!
     * @brief Compute the indices of boxes from the src_box_array
diff --git a/source/hierarchy/boxes/BoxIOUtility.h b/source/hierarchy/boxes/BoxIOUtility.h
index 929e51b..5bf140e 100644
--- a/source/hierarchy/boxes/BoxIOUtility.h
+++ b/source/hierarchy/boxes/BoxIOUtility.h
@@ -60,7 +60,7 @@ public:
    /**
     * Virtual destructor.
     */
-   virtual ~BoxIOUtility<DIM>();
+   virtual ~BoxIOUtility();
 
    /**
     * Pulls refinement boxes corresponding to the provided level and 
diff --git a/source/hierarchy/boxes/BoxList.C b/source/hierarchy/boxes/BoxList.C
index 3bb6e02..1695831 100644
--- a/source/hierarchy/boxes/BoxList.C
+++ b/source/hierarchy/boxes/BoxList.C
@@ -39,13 +39,13 @@ namespace SAMRAI {
 template<int DIM>  BoxList<DIM>::BoxList(const Box<DIM>& box)
 :  tbox::List< Box<DIM> >()
 {
-   addItem(box);
+   this ->addItem(box);
 }
 
 template<int DIM>  BoxList<DIM>::BoxList(const BoxList<DIM>& list)
 :  tbox::List< Box<DIM> >()
 {
-   copyItems(list);
+   this ->copyItems(list);
 }
       
 template<int DIM>  BoxList<DIM>::BoxList(const BoxArray<DIM>& array)
@@ -53,7 +53,7 @@ template<int DIM>  BoxList<DIM>::BoxList(const BoxArray<DIM>& array)
 {
    const int n = array.getNumberOfBoxes();
    for (int i = 0; i < n; i++) {
-      appendItem(array[i]);
+      this ->appendItem(array[i]);
    }
 }
 
@@ -61,7 +61,7 @@ template<int DIM> BoxList<DIM>& BoxList<DIM>::operator=(const BoxList<DIM>& list
 {
    if (this != &list) {
       this -> clearItems();
-      copyItems(list);
+      this ->copyItems(list);
    }
    return(*this);
 }
@@ -145,10 +145,10 @@ template<int DIM> void BoxList<DIM>::simplifyBoxes()
          // Otherwise, burst tryMe and andMe and put on noncanonical
 
             if (!combineDaPuppies) {
-               appendItem(tryMe);
+               this ->appendItem(tryMe);
             } else {
                Box<DIM> andMe = l();
-               removeItem(l);
+               this ->removeItem(l);
                const Index<DIM>& bl = tryMe.lower();
                const Index<DIM>& bh = tryMe.upper();
                Index<DIM> il = andMe.lower();
@@ -199,13 +199,13 @@ template<int DIM> void BoxList<DIM>::burstBoxes(const Box<DIM>& bursty,
       if (bursth(d) > solidh(d)) {
          Index<DIM> newl = burstl;
          newl(d) = solidh(d) + 1;
-         appendItem(Box<DIM>(newl, bursth));
+         this ->appendItem(Box<DIM>(newl, bursth));
          bursth(d) = solidh(d);
       }
       if (burstl(d) < solidl(d)) {
          Index<DIM> newh = bursth;
          newh(d) = solidl(d) - 1;
-         appendItem(Box<DIM>(burstl, newh));
+         this ->appendItem(Box<DIM>(burstl, newh));
          burstl(d) = solidl(d);
       }
    }
@@ -231,7 +231,7 @@ template<int DIM> void BoxList<DIM>::removeIntersections(const Box<DIM>& takeawa
          fragments.burstBoxes(tryme, takeaway, DIM);
       }
    }
-   catenateItems(fragments);
+   this ->catenateItems(fragments);
 }
 
 template<int DIM> void BoxList<DIM>::removeIntersections(const Box<DIM>& box,
@@ -251,7 +251,7 @@ template<int DIM> void BoxList<DIM>::removeIntersections(const Box<DIM>& box,
    if (!(box * takeaway).empty()) {
       BoxList<DIM>::burstBoxes(box, takeaway, DIM);
    } else {
-      appendItem(box);
+      this ->appendItem(box);
    }
 
 }
@@ -284,7 +284,7 @@ template<int DIM> void BoxList<DIM>::intersectBoxes(const Box<DIM>& box)
          intersection.appendItem(overlap);
       }
    }
-   catenateItems(intersection);
+   this ->catenateItems(intersection);
 }
 
 template<int DIM> void BoxList<DIM>::intersectBoxes(const BoxList<DIM>& boxes)
@@ -300,7 +300,7 @@ template<int DIM> void BoxList<DIM>::intersectBoxes(const BoxList<DIM>& boxes)
          }
       }
    }
-   catenateItems(intersection);
+   this ->catenateItems(intersection);
 }
 
 /*
@@ -334,7 +334,7 @@ template<int DIM> void BoxList<DIM>::coalesceBoxes()
 
          if ( tb2().coalesceWith(tb()) ) {
             found_match = true;
-            removeItem(tb);
+            this ->removeItem(tb);
          }
 
          tb2++;
diff --git a/source/hierarchy/boxes/BoxList.I b/source/hierarchy/boxes/BoxList.I
index e751158..b9fe76c 100644
--- a/source/hierarchy/boxes/BoxList.I
+++ b/source/hierarchy/boxes/BoxList.I
@@ -30,14 +30,14 @@ template<int DIM> inline
 void BoxList<DIM>::unionBoxes(const Box<DIM>& box)
 {
    if (!box.empty()) {
-      appendItem(box);
+      this->appendItem(box);
    }
 }
 
 template<int DIM> inline
 void BoxList<DIM>::unionBoxes(const BoxList<DIM>& boxes)
 {
-   copyItems(boxes);
+   this->copyItems(boxes);
 }
 
 template<int DIM> inline
diff --git a/source/hierarchy/boxes/BoxList.h b/source/hierarchy/boxes/BoxList.h
index f624286..a383c2e 100644
--- a/source/hierarchy/boxes/BoxList.h
+++ b/source/hierarchy/boxes/BoxList.h
@@ -72,7 +72,7 @@ public:
    /**
     * The destructor releases all list storage.
     */
-   ~BoxList<DIM>();
+   ~BoxList();
 
    /**
     * Return integer number of boxes in the box list.  Note that this 
diff --git a/source/hierarchy/boxes/BoxTop.h b/source/hierarchy/boxes/BoxTop.h
index a57959b..0ee569d 100644
--- a/source/hierarchy/boxes/BoxTop.h
+++ b/source/hierarchy/boxes/BoxTop.h
@@ -81,7 +81,7 @@ public:
    /*!
     * The destructor releases privately held resources.
     */
-   ~BoxTop<DIM>();
+   ~BoxTop();
 
    /*!
     * @brief Compute the set of boxes that overlap with the specified \b box.
diff --git a/source/hierarchy/boxes/BoxTree.h b/source/hierarchy/boxes/BoxTree.h
index 9773977..39adc42 100644
--- a/source/hierarchy/boxes/BoxTree.h
+++ b/source/hierarchy/boxes/BoxTree.h
@@ -124,7 +124,7 @@ public:
    /*!
     * The dtor does nothing interesting.
     */
-   ~BoxTree<DIM>();
+   ~BoxTree();
 
    //! @{
    /*!
diff --git a/source/hierarchy/boxes/BoxTreeNode.h b/source/hierarchy/boxes/BoxTreeNode.h
index 5e9325f..82a4c2b 100644
--- a/source/hierarchy/boxes/BoxTreeNode.h
+++ b/source/hierarchy/boxes/BoxTreeNode.h
@@ -78,7 +78,7 @@ public:
    /*!
     * The dtor does nothing even slightly interesting.
     */
-   ~BoxTreeNode<DIM>();
+   ~BoxTreeNode();
 
    /*!
     * @brief Compute the box array indices of boxes that overlap the given \b box.
diff --git a/source/hierarchy/multiblock/MBUtilities.h b/source/hierarchy/multiblock/MBUtilities.h
index 780476a..7d20a74 100644
--- a/source/hierarchy/multiblock/MBUtilities.h
+++ b/source/hierarchy/multiblock/MBUtilities.h
@@ -36,7 +36,7 @@ public:
    /*!
     * Virtual destructor does nothing
     */
-   virtual ~MBUtilities<DIM>();
+   virtual ~MBUtilities();
 
    /*!
     * @brief Copy patch data from src to dst using the shift and rotate
diff --git a/source/hierarchy/multiblock/MultiblockDataTranslator.h b/source/hierarchy/multiblock/MultiblockDataTranslator.h
index 5af9dc9..5513ae0 100644
--- a/source/hierarchy/multiblock/MultiblockDataTranslator.h
+++ b/source/hierarchy/multiblock/MultiblockDataTranslator.h
@@ -38,7 +38,7 @@ public:
    /*!
     * @brief The virtual destructor does nothing interesting.
     */
-   virtual ~MultiblockDataTranslator<DIM>();
+   virtual ~MultiblockDataTranslator();
 
    virtual void translateAndCopyData(
       Patch<DIM>& dst_patch,
diff --git a/source/hierarchy/multiblock/MultiblockGridGeometry.h b/source/hierarchy/multiblock/MultiblockGridGeometry.h
index d6d0a56..557e8ba 100644
--- a/source/hierarchy/multiblock/MultiblockGridGeometry.h
+++ b/source/hierarchy/multiblock/MultiblockGridGeometry.h
@@ -38,7 +38,7 @@ public:
    /*!
     * @brief The virtual destructor does nothing interesting.
     */
-   virtual ~MultiblockGridGeometry<DIM>();
+   virtual ~MultiblockGridGeometry();
 
    tbox::Pointer< hier::GridGeometry<DIM> >& getBlockGeometry(const int block)
    {
diff --git a/source/hierarchy/multiblock/MultiblockPatchHierarchy.h b/source/hierarchy/multiblock/MultiblockPatchHierarchy.h
index fc57d45..69d2722 100644
--- a/source/hierarchy/multiblock/MultiblockPatchHierarchy.h
+++ b/source/hierarchy/multiblock/MultiblockPatchHierarchy.h
@@ -69,7 +69,7 @@ public:
    /*!
     * @brief Destructor for multiblock
     */
-   ~MultiblockPatchHierarchy<DIM>();
+   ~MultiblockPatchHierarchy();
 
    /*!
     * @brief Get a pointer to a single patch hierarchy represented by
diff --git a/source/hierarchy/multiblock/MultiblockPatchLevel.h b/source/hierarchy/multiblock/MultiblockPatchLevel.h
index b0f68ef..4111f40 100644
--- a/source/hierarchy/multiblock/MultiblockPatchLevel.h
+++ b/source/hierarchy/multiblock/MultiblockPatchLevel.h
@@ -51,7 +51,7 @@ public:
    /*!
     * Destructor is uninteresting
     */
-   ~MultiblockPatchLevel<DIM>();
+   ~MultiblockPatchLevel();
 
    /*!
     * @brief Return a pointer to the hier::PatchLevel<DIM> associated with the
diff --git a/source/hierarchy/patches/BoundaryBox.h b/source/hierarchy/patches/BoundaryBox.h
index 909c7d2..10d6f24 100644
--- a/source/hierarchy/patches/BoundaryBox.h
+++ b/source/hierarchy/patches/BoundaryBox.h
@@ -59,7 +59,7 @@ public:
    /**
     * The destructor for BoundaryBox.
     */
-   ~BoundaryBox<DIM>();
+   ~BoundaryBox();
 
    /**
     * Return a reference to the Box<DIM> member of the boundary box
diff --git a/source/hierarchy/patches/BoundaryLookupTable.C b/source/hierarchy/patches/BoundaryLookupTable.C
index 49a502f..396e74e 100644
--- a/source/hierarchy/patches/BoundaryLookupTable.C
+++ b/source/hierarchy/patches/BoundaryLookupTable.C
@@ -51,7 +51,7 @@ template<int DIM>  BoundaryLookupTable<DIM>::BoundaryLookupTable()
       s_lookup_table_instance = NULL;
    }
    if(s_registered_callback == false) {
-      s_lookup_table_instance = false;
+      s_lookup_table_instance = NULL;
    }
 
    if (d_table[0].isNull()) {
diff --git a/source/hierarchy/patches/BoundaryLookupTable.h b/source/hierarchy/patches/BoundaryLookupTable.h
index 91105bf..edb8e0e 100644
--- a/source/hierarchy/patches/BoundaryLookupTable.h
+++ b/source/hierarchy/patches/BoundaryLookupTable.h
@@ -186,7 +186,7 @@ protected:
     *
     * The destructor deallocates lookup table contents.
     */
-   ~BoundaryLookupTable<DIM>();
+   ~BoundaryLookupTable();
 
 private:
 
diff --git a/source/hierarchy/patches/CoarseFineBoundary.h b/source/hierarchy/patches/CoarseFineBoundary.h
index 6a3bf2d..e7318d0 100644
--- a/source/hierarchy/patches/CoarseFineBoundary.h
+++ b/source/hierarchy/patches/CoarseFineBoundary.h
@@ -102,7 +102,7 @@ public:
       int ln,
       const IntVector<DIM>& max_ghost_width);
 
-   ~CoarseFineBoundary<DIM>();
+   ~CoarseFineBoundary();
 
    /*!
     * @brief Construct a CoarseFineBoundary<DIM> object for the specified
diff --git a/source/hierarchy/patches/Patch.h b/source/hierarchy/patches/Patch.h
index cefa6e9..8f58d8a 100644
--- a/source/hierarchy/patches/Patch.h
+++ b/source/hierarchy/patches/Patch.h
@@ -74,7 +74,7 @@ public:
    /**
     * Virtual destructor for patch objects.
     */
-   virtual ~Patch<DIM>();
+   virtual ~Patch();
 
    /**
     * Return the box over which this patch is defined.  The components on a
diff --git a/source/hierarchy/patches/PatchConfigurationUtilities.h b/source/hierarchy/patches/PatchConfigurationUtilities.h
index 1dc861f..f4d256c 100644
--- a/source/hierarchy/patches/PatchConfigurationUtilities.h
+++ b/source/hierarchy/patches/PatchConfigurationUtilities.h
@@ -98,7 +98,7 @@ public:
    /*!
     * Virtual destructor for utilities objects.
     */
-   virtual ~PatchConfigurationUtilities<DIM>();
+   virtual ~PatchConfigurationUtilities();
 
    /*!
     * Check whether information is set for given level number. 
diff --git a/source/hierarchy/patches/PatchFactory.h b/source/hierarchy/patches/PatchFactory.h
index 9a09425..60333d4 100644
--- a/source/hierarchy/patches/PatchFactory.h
+++ b/source/hierarchy/patches/PatchFactory.h
@@ -43,7 +43,7 @@ public:
    /**
     * Virtual destructor for patch factory objects.
     */
-   virtual ~PatchFactory<DIM>();
+   virtual ~PatchFactory();
 
    /**
     * Allocate a patch with the specified domain and patch descriptor.
diff --git a/source/hierarchy/patches/PatchGeometry.h b/source/hierarchy/patches/PatchGeometry.h
index c564e0b..d58d312 100644
--- a/source/hierarchy/patches/PatchGeometry.h
+++ b/source/hierarchy/patches/PatchGeometry.h
@@ -46,7 +46,7 @@ public:
    /**
     * The default constructor for the patch geometry base class.
     */
-   PatchGeometry<DIM>(
+   PatchGeometry(
       const IntVector<DIM>& ratio_to_level_zero,
       const tbox::Array< tbox::Array<bool> >& touches_regular_bdry,
       const tbox::Array< tbox::Array<bool> >& touches_periodic_bdry);
@@ -54,7 +54,7 @@ public:
    /**
     * The virtual destructor for the patch geometry base class.
     */
-   virtual ~PatchGeometry<DIM>();
+   virtual ~PatchGeometry();
 
    /**
     * Return const reference to patch boundary information.
diff --git a/source/hierarchy/patches/PatchHierarchy.h b/source/hierarchy/patches/PatchHierarchy.h
index 126066e..10855b9 100644
--- a/source/hierarchy/patches/PatchHierarchy.h
+++ b/source/hierarchy/patches/PatchHierarchy.h
@@ -69,7 +69,7 @@ public:
    /**
     * Destructor for patch hierarchy objects.
     */
-   ~PatchHierarchy<DIM>();
+   ~PatchHierarchy();
 
 
   /**
diff --git a/source/hierarchy/patches/PatchLevel.C b/source/hierarchy/patches/PatchLevel.C
index 15150cb..42f781a 100644
--- a/source/hierarchy/patches/PatchLevel.C
+++ b/source/hierarchy/patches/PatchLevel.C
@@ -27,7 +27,15 @@
 namespace SAMRAI {
     namespace hier {
 
-static tbox::Pointer<tbox::Timer> t_level_constructor;
+/*
+*************************************************************************
+*                                                                       *
+* Initialization for static data members.                               *
+*                                                                       *
+*************************************************************************
+*/
+template<int DIM> tbox::Pointer<tbox::Timer>
+   PatchLevel<DIM>::t_level_constructor;
 
 /*
  *************************************************************************
@@ -1007,8 +1015,8 @@ template<int DIM> void PatchLevel<DIM>::initializeTimers()
    if ( t_level_constructor.isNull() ) {
       t_level_constructor = tbox::TimerManager::getManager() ->
          getTimer("mesh::PatchLevel::level_constructor");
-   }
    tbox::ShutdownRegistry::registerShutdownRoutine(freeTimers, 254);
+   }
 }
 
 
diff --git a/source/hierarchy/patches/PatchLevel.h b/source/hierarchy/patches/PatchLevel.h
index d5d651b..ebbb23d 100644
--- a/source/hierarchy/patches/PatchLevel.h
+++ b/source/hierarchy/patches/PatchLevel.h
@@ -127,7 +127,7 @@ public:
    /**
     * The virtual destructor for patch level deallocates all patches.
     */
-   virtual ~PatchLevel<DIM>();
+   virtual ~PatchLevel();
 
    /**
     * Return the number of this level in a hierarchy, or the number of
@@ -479,7 +479,10 @@ private:
     */
    void setPatchTouchesBoundaryArrays();
 
-   void initializeTimers();
+   /*!
+    * Allocate static timers.
+    */
+   static void initializeTimers();
 
    /*!
     * Free static timers.
@@ -565,6 +568,11 @@ private:
     * Manages communications in clustering algorithms
     */
    tbox::Pointer< BinaryTree<DIM> > d_binary_tree;
+
+   /*
+    * Timer objects for performance measurement.
+    */
+   static tbox::Pointer<tbox::Timer> t_level_constructor;
 };
 
 /**
@@ -625,7 +633,7 @@ public:
    /**
     * Destructor for the patch level iterator.
     */
-   ~PatchLevelIterator<DIM>();
+   ~PatchLevelIterator();
 
    /**
     * Extract the integer patch index corresponding to the current patch 
diff --git a/source/hierarchy/patches/PatchLevelFactory.h b/source/hierarchy/patches/PatchLevelFactory.h
index 8f2fece..bbda81d 100644
--- a/source/hierarchy/patches/PatchLevelFactory.h
+++ b/source/hierarchy/patches/PatchLevelFactory.h
@@ -42,7 +42,7 @@ public:
    /**
     * Virtual destructor for patch level factory objects.
     */
-   virtual ~PatchLevelFactory<DIM>();
+   virtual ~PatchLevelFactory();
 
    /**
     * Allocate a patch level with the specified boxes and processor mappings.
diff --git a/source/hierarchy/templates/EmptyHierarchyX.C b/source/hierarchy/templates/EmptyHierarchyX.C
index d8f8a22..85b1857 100644
--- a/source/hierarchy/templates/EmptyHierarchyX.C
+++ b/source/hierarchy/templates/EmptyHierarchyX.C
@@ -14,6 +14,12 @@
 namespace SAMRAI {
    namespace hier {
       template<int DIM> class Empty {
+	 Empty() :
+	    something(0) 
+	 {
+	 }
+
+	 int something;
       };
 
       template class Empty< NDIM >;
diff --git a/source/hierarchy/variables/BoxGeometry.h b/source/hierarchy/variables/BoxGeometry.h
index c777a85..23603de 100644
--- a/source/hierarchy/variables/BoxGeometry.h
+++ b/source/hierarchy/variables/BoxGeometry.h
@@ -76,7 +76,7 @@ public:
    /**
     * The virtual destructor does nothing interesting.
     */
-   virtual ~BoxGeometry<DIM>();
+   virtual ~BoxGeometry();
 
    /**
     * Calculate the overlap between two box geometry objects given the
diff --git a/source/hierarchy/variables/BoxOverlap.h b/source/hierarchy/variables/BoxOverlap.h
index 6aa46c3..c2020bf 100644
--- a/source/hierarchy/variables/BoxOverlap.h
+++ b/source/hierarchy/variables/BoxOverlap.h
@@ -49,7 +49,7 @@ public:
    /**
     * The virtual destructor does nothing interesting.
     */
-   virtual ~BoxOverlap<DIM>();
+   virtual ~BoxOverlap();
 
    /**
     * Return true if intersecting boxes have no communication dependencies.
diff --git a/source/hierarchy/variables/LocallyActiveDataPatchLevelManager.h b/source/hierarchy/variables/LocallyActiveDataPatchLevelManager.h
index c424ae7..39677b5 100644
--- a/source/hierarchy/variables/LocallyActiveDataPatchLevelManager.h
+++ b/source/hierarchy/variables/LocallyActiveDataPatchLevelManager.h
@@ -560,7 +560,7 @@ public:
    /*!
     * Destructor for the iterator releases all internal storage.
     */
-   ~LocallyActiveDataPatchLevelIterator<DIM>();
+   ~LocallyActiveDataPatchLevelIterator();
 
    /*!
     * Extract the integer patch index corresponding to the current patch in 
diff --git a/source/hierarchy/variables/PatchData.h b/source/hierarchy/variables/PatchData.h
index 242e834..45a74ef 100644
--- a/source/hierarchy/variables/PatchData.h
+++ b/source/hierarchy/variables/PatchData.h
@@ -67,7 +67,7 @@ public:
    /**
     * The virtual destructor for a patch data object.
     */
-   virtual ~PatchData<DIM>();
+   virtual ~PatchData();
 
    /**
     * Return the box over which this patch data object is defined.  All
diff --git a/source/hierarchy/variables/PatchDataFactory.h b/source/hierarchy/variables/PatchDataFactory.h
index 8ce4fe5..6d66dfb 100644
--- a/source/hierarchy/variables/PatchDataFactory.h
+++ b/source/hierarchy/variables/PatchDataFactory.h
@@ -83,7 +83,7 @@ public:
     * @brief Virtual destructor for the patch data factory class.
     *
     */
-   virtual ~PatchDataFactory<DIM>();
+   virtual ~PatchDataFactory();
 
    /**
     * @brief Abstract virtual function to clone a patch data factory.
diff --git a/source/hierarchy/variables/PatchDescriptor.h b/source/hierarchy/variables/PatchDescriptor.h
index a8f816d..617aa07 100644
--- a/source/hierarchy/variables/PatchDescriptor.h
+++ b/source/hierarchy/variables/PatchDescriptor.h
@@ -74,7 +74,7 @@ public:
     * The virtual destructor for a patch descriptor deallocates the
     * internal data structures.
     */
-   virtual ~PatchDescriptor<DIM>();
+   virtual ~PatchDescriptor();
 
    /*!
     * Add a new patch data factory and name string identifier to the patch 
diff --git a/source/hierarchy/variables/Variable.h b/source/hierarchy/variables/Variable.h
index 934d268..070d837 100644
--- a/source/hierarchy/variables/Variable.h
+++ b/source/hierarchy/variables/Variable.h
@@ -87,7 +87,7 @@ public:
    /**
     * Virtual destructor for variable objects.
     */
-   virtual ~Variable<DIM>();
+   virtual ~Variable();
 
    /**
     * Return the instance identifier for this particular variable object.
diff --git a/source/mathops/array/ArrayDataBasicOps.h b/source/mathops/array/ArrayDataBasicOps.h
index 4e38c39..1addd9d 100644
--- a/source/mathops/array/ArrayDataBasicOps.h
+++ b/source/mathops/array/ArrayDataBasicOps.h
@@ -52,7 +52,7 @@ public:
     */ 
    ArrayDataBasicOps();
 
-   ~ArrayDataBasicOps<DIM,TYPE>();
+   ~ArrayDataBasicOps();
 
    /**
     * Set dst = alpha * src, elementwise.
diff --git a/source/mathops/array/ArrayDataMiscellaneousOpsReal.h b/source/mathops/array/ArrayDataMiscellaneousOpsReal.h
index 5facf88..1fc76e0 100644
--- a/source/mathops/array/ArrayDataMiscellaneousOpsReal.h
+++ b/source/mathops/array/ArrayDataMiscellaneousOpsReal.h
@@ -52,7 +52,7 @@ public:
     */
    ArrayDataMiscellaneousOpsReal();
 
-   ~ArrayDataMiscellaneousOpsReal<DIM,TYPE>();
+   ~ArrayDataMiscellaneousOpsReal();
 
    /**
     * Return 1 if \f$\|data2_i\| > 0\f$ and \f$data1_i * data2_i \leq 0\f$, for
diff --git a/source/mathops/array/ArrayDataNormOpsComplex.h b/source/mathops/array/ArrayDataNormOpsComplex.h
index 72d2ba9..f99143d 100644
--- a/source/mathops/array/ArrayDataNormOpsComplex.h
+++ b/source/mathops/array/ArrayDataNormOpsComplex.h
@@ -48,7 +48,7 @@ public:
     */
    ArrayDataNormOpsComplex();
 
-   ~ArrayDataNormOpsComplex<DIM>();
+   ~ArrayDataNormOpsComplex();
 
    /**
     * Set destination component to norm of source component.  That is, 
diff --git a/source/mathops/array/ArrayDataNormOpsInteger.h b/source/mathops/array/ArrayDataNormOpsInteger.h
index 22dbde4..4543f66 100644
--- a/source/mathops/array/ArrayDataNormOpsInteger.h
+++ b/source/mathops/array/ArrayDataNormOpsInteger.h
@@ -41,7 +41,7 @@ public:
     */
    ArrayDataNormOpsInteger();
 
-   ~ArrayDataNormOpsInteger<DIM>();
+   ~ArrayDataNormOpsInteger();
 
    /**
     * Set destination component to absolute value of source component.  
diff --git a/source/mathops/array/ArrayDataNormOpsReal.h b/source/mathops/array/ArrayDataNormOpsReal.h
index c5519e4..696024c 100644
--- a/source/mathops/array/ArrayDataNormOpsReal.h
+++ b/source/mathops/array/ArrayDataNormOpsReal.h
@@ -52,7 +52,7 @@ public:
     */
    ArrayDataNormOpsReal();
 
-   ~ArrayDataNormOpsReal<DIM,TYPE>();
+   ~ArrayDataNormOpsReal();
 
    /**
     * Return sum of entries in control volume array.
diff --git a/source/mathops/cell/HierarchyCellDataOpsComplex.h b/source/mathops/cell/HierarchyCellDataOpsComplex.h
index 79a6afe..0bfaf72 100644
--- a/source/mathops/cell/HierarchyCellDataOpsComplex.h
+++ b/source/mathops/cell/HierarchyCellDataOpsComplex.h
@@ -78,7 +78,7 @@ public:
    /**
     * Virtual destructor for the HierarchyCellDataOpsComplex<DIM> class.
     */
-   virtual ~HierarchyCellDataOpsComplex<DIM>();
+   virtual ~HierarchyCellDataOpsComplex();
 
    /**
     * Reset patch hierarchy over which operations occur.
diff --git a/source/mathops/cell/HierarchyCellDataOpsInteger.h b/source/mathops/cell/HierarchyCellDataOpsInteger.h
index 9f5b883..d021eb0 100644
--- a/source/mathops/cell/HierarchyCellDataOpsInteger.h
+++ b/source/mathops/cell/HierarchyCellDataOpsInteger.h
@@ -77,7 +77,7 @@ public:
    /**
     * Virtual destructor for the HierarchyCellDataOpsInteger<DIM> class.
     */
-   virtual ~HierarchyCellDataOpsInteger<DIM>();
+   virtual ~HierarchyCellDataOpsInteger();
 
    /**
     * Reset patch hierarchy over which operations occur.
diff --git a/source/mathops/cell/HierarchyCellDataOpsReal.h b/source/mathops/cell/HierarchyCellDataOpsReal.h
index 5998f9f..f8893ff 100644
--- a/source/mathops/cell/HierarchyCellDataOpsReal.h
+++ b/source/mathops/cell/HierarchyCellDataOpsReal.h
@@ -77,7 +77,7 @@ public:
    /**
     * Virtual destructor for the HierarchyCellDataOpsReal<DIM> class.
     */
-   virtual ~HierarchyCellDataOpsReal<DIM,TYPE>();
+   virtual ~HierarchyCellDataOpsReal();
 
    /**
     * Reset patch hierarchy over which operations occur.
diff --git a/source/mathops/cell/PatchCellDataBasicOps.h b/source/mathops/cell/PatchCellDataBasicOps.h
index bfd22f3..bb7aefe 100644
--- a/source/mathops/cell/PatchCellDataBasicOps.h
+++ b/source/mathops/cell/PatchCellDataBasicOps.h
@@ -56,7 +56,7 @@ public:
     */
    PatchCellDataBasicOps();
 
-   virtual ~PatchCellDataBasicOps<DIM,TYPE>();
+   virtual ~PatchCellDataBasicOps();
 
    /**
     * Set dst = alpha * src, elementwise.
diff --git a/source/mathops/cell/PatchCellDataMiscellaneousOpsReal.h b/source/mathops/cell/PatchCellDataMiscellaneousOpsReal.h
index bb01cd0..e05165e 100644
--- a/source/mathops/cell/PatchCellDataMiscellaneousOpsReal.h
+++ b/source/mathops/cell/PatchCellDataMiscellaneousOpsReal.h
@@ -68,7 +68,7 @@ public:
     */
    PatchCellDataMiscellaneousOpsReal();
 
-   virtual ~PatchCellDataMiscellaneousOpsReal<DIM,TYPE>();
+   virtual ~PatchCellDataMiscellaneousOpsReal();
 
    /**
     * Return 1 if \f$\|data2_i\| > 0\f$ and \f$data1_i * data2_i \leq 0\f$, for
diff --git a/source/mathops/cell/PatchCellDataNormOpsComplex.h b/source/mathops/cell/PatchCellDataNormOpsComplex.h
index 36f612f..be9f859 100644
--- a/source/mathops/cell/PatchCellDataNormOpsComplex.h
+++ b/source/mathops/cell/PatchCellDataNormOpsComplex.h
@@ -64,7 +64,7 @@ public:
     */
    PatchCellDataNormOpsComplex();
 
-   virtual ~PatchCellDataNormOpsComplex<DIM>();
+   virtual ~PatchCellDataNormOpsComplex();
 
    /**
     * Return the number of data values for the cell-centered data object
diff --git a/source/mathops/cell/PatchCellDataNormOpsReal.h b/source/mathops/cell/PatchCellDataNormOpsReal.h
index 1ac194c..56448ff 100644
--- a/source/mathops/cell/PatchCellDataNormOpsReal.h
+++ b/source/mathops/cell/PatchCellDataNormOpsReal.h
@@ -68,7 +68,7 @@ public:
     */
    PatchCellDataNormOpsReal();
 
-   virtual ~PatchCellDataNormOpsReal<DIM,TYPE>();
+   virtual ~PatchCellDataNormOpsReal();
 
    /**
     * Return the number of data values for the cell-centered data object
diff --git a/source/mathops/cell/PatchCellDataOpsComplex.h b/source/mathops/cell/PatchCellDataOpsComplex.h
index 53c9d82..65f7721 100644
--- a/source/mathops/cell/PatchCellDataOpsComplex.h
+++ b/source/mathops/cell/PatchCellDataOpsComplex.h
@@ -57,7 +57,7 @@ public:
     */
    PatchCellDataOpsComplex();
 
-   virtual ~PatchCellDataOpsComplex<DIM>();
+   virtual ~PatchCellDataOpsComplex();
 
    /**
     * Copy dst data to src data over given box.
diff --git a/source/mathops/cell/PatchCellDataOpsInteger.h b/source/mathops/cell/PatchCellDataOpsInteger.h
index d9ab15e..93bdfc4 100644
--- a/source/mathops/cell/PatchCellDataOpsInteger.h
+++ b/source/mathops/cell/PatchCellDataOpsInteger.h
@@ -53,7 +53,7 @@ public:
     */
    PatchCellDataOpsInteger();
 
-   virtual ~PatchCellDataOpsInteger<DIM>();
+   virtual ~PatchCellDataOpsInteger();
 
    /**
     * Return the number of data values for the cell-centered data object
diff --git a/source/mathops/cell/PatchCellDataOpsReal.h b/source/mathops/cell/PatchCellDataOpsReal.h
index b654db3..f323aa9 100644
--- a/source/mathops/cell/PatchCellDataOpsReal.h
+++ b/source/mathops/cell/PatchCellDataOpsReal.h
@@ -62,7 +62,7 @@ public:
     */
    PatchCellDataOpsReal();
 
-   virtual ~PatchCellDataOpsReal<DIM,TYPE>();
+   virtual ~PatchCellDataOpsReal();
 
    /**
     * Copy dst data to src data over given box.
diff --git a/source/mathops/edge/HierarchyEdgeDataOpsComplex.C b/source/mathops/edge/HierarchyEdgeDataOpsComplex.C
index 6ac0432..30b1a86 100644
--- a/source/mathops/edge/HierarchyEdgeDataOpsComplex.C
+++ b/source/mathops/edge/HierarchyEdgeDataOpsComplex.C
@@ -67,11 +67,11 @@ template<int DIM> void HierarchyEdgeDataOpsComplex<DIM>::setPatchHierarchy(
    d_hierarchy = hierarchy;
 }
 
-template<int DIM> void HierarchyEdgeDataOpsComplex<DIM>::resetLevels(
+template<int DIM>
+void HierarchyEdgeDataOpsComplex<DIM>::resetLevels(
    const int coarsest_level,
    const int finest_level)
 {
-   int i;
 #ifdef DEBUG_CHECK_ASSERTIONS
    TBOX_ASSERT(!d_hierarchy.isNull());
    TBOX_ASSERT(   (coarsest_level >= 0)
@@ -82,6 +82,16 @@ template<int DIM> void HierarchyEdgeDataOpsComplex<DIM>::resetLevels(
    d_coarsest_level = coarsest_level;
    d_finest_level = finest_level;
 
+   for (int d = 0; d < DIM; d++) {
+      d_nonoverlapping_edge_boxes[d].resizeArray(0);
+   }
+}
+
+template<int DIM>
+void HierarchyEdgeDataOpsComplex<DIM>::maybeResetOverlappingBoxLists() const
+{
+   if (d_nonoverlapping_edge_boxes[0].size() > 0)
+      return;
    for (int d = 0; d < DIM; d++) {
       d_nonoverlapping_edge_boxes[d].resizeArray(d_finest_level+1);
    }
@@ -93,7 +103,7 @@ template<int DIM> void HierarchyEdgeDataOpsComplex<DIM>::resetLevels(
       for (int nd = 0; nd < DIM; nd++ ) {
          edge_boxes = level->getBoxes();
          const int n = edge_boxes.getNumberOfBoxes();
-         for (i = 0; i < n; i++) {
+         for (int i = 0; i < n; i++) {
             edge_boxes[i] =
                pdat::EdgeGeometry<DIM>::toEdgeBox(edge_boxes[i], nd);
          }
@@ -633,6 +643,7 @@ template<int DIM> int HierarchyEdgeDataOpsComplex<DIM>::numberOfEntries(
           && (d_finest_level >= d_coarsest_level)
           && (d_finest_level <= d_hierarchy->getFinestLevelNumber()) );
 #endif
+   maybeResetOverlappingBoxLists();
 
    int entries = 0;
 
diff --git a/source/mathops/edge/HierarchyEdgeDataOpsComplex.h b/source/mathops/edge/HierarchyEdgeDataOpsComplex.h
index 5b7d5aa..74bf886 100644
--- a/source/mathops/edge/HierarchyEdgeDataOpsComplex.h
+++ b/source/mathops/edge/HierarchyEdgeDataOpsComplex.h
@@ -78,7 +78,7 @@ public:
    /**
     * Virtual destructor for the HierarchyEdgeDataOpsComplex<DIM> class.
     */
-   virtual ~HierarchyEdgeDataOpsComplex<DIM>();
+   virtual ~HierarchyEdgeDataOpsComplex();
 
    /**
     * Reset patch hierarchy over which operations occur.
@@ -346,10 +346,20 @@ private:
    tbox::Pointer< hier::PatchHierarchy<DIM> > d_hierarchy;
    int  d_coarsest_level;
    int  d_finest_level; 
-   tbox::Array< tbox::Array< hier::BoxList<DIM> > > d_nonoverlapping_edge_boxes[DIM];
+   mutable tbox::Array< tbox::Array< hier::BoxList<DIM> > > d_nonoverlapping_edge_boxes[DIM];
 
    PatchEdgeDataOpsComplex<DIM> d_patch_ops;
 
+   /*!
+    * Set d_nonoverlapping_side_boxes to the correct value.
+    *
+    * d_nonoverlapping_side_boxes is extremely expensive to compute, and for
+    * whatever reason SAMRAI calls resetLevels() in most linear algebra
+    * functions: this results in, for problems with lots of patches, the
+    * majority of runtime being spent recomputing overlap repeatedly in
+    * solvers when we never actually need the information.
+    */
+   void maybeResetOverlappingBoxLists() const;
 };
 
 }
diff --git a/source/mathops/edge/HierarchyEdgeDataOpsInteger.C b/source/mathops/edge/HierarchyEdgeDataOpsInteger.C
index e9dfc15..a5af80e 100644
--- a/source/mathops/edge/HierarchyEdgeDataOpsInteger.C
+++ b/source/mathops/edge/HierarchyEdgeDataOpsInteger.C
@@ -72,7 +72,6 @@ template<int DIM> void HierarchyEdgeDataOpsInteger<DIM>::resetLevels(
    const int coarsest_level,
    const int finest_level)
 {
-   int i;
 #ifdef DEBUG_CHECK_ASSERTIONS
    TBOX_ASSERT(!d_hierarchy.isNull());
    TBOX_ASSERT(   (coarsest_level >= 0)
@@ -83,6 +82,16 @@ template<int DIM> void HierarchyEdgeDataOpsInteger<DIM>::resetLevels(
    d_coarsest_level = coarsest_level;
    d_finest_level = finest_level;
 
+   for (int d = 0; d < DIM; d++) {
+      d_nonoverlapping_edge_boxes[d].resizeArray(0);
+   }
+}
+
+template<int DIM>
+void HierarchyEdgeDataOpsInteger<DIM>::maybeResetOverlappingBoxLists() const
+{
+   if (d_nonoverlapping_edge_boxes[0].size() > 0)
+      return;
    for (int d = 0; d < DIM; d++) {
       d_nonoverlapping_edge_boxes[d].resizeArray(d_finest_level+1);
    }
@@ -94,7 +103,7 @@ template<int DIM> void HierarchyEdgeDataOpsInteger<DIM>::resetLevels(
 
       for (int nd = 0; nd < DIM; nd++ ) {
          edge_boxes = level->getBoxes();
-         for (i = 0; i < n; i++) {
+         for (int i = 0; i < n; i++) {
             edge_boxes[i] =
                pdat::EdgeGeometry<DIM>::toEdgeBox(edge_boxes[i], nd);
          }
@@ -129,6 +138,7 @@ template<int DIM> int HierarchyEdgeDataOpsInteger<DIM>::numberOfEntries(
           && (d_finest_level >= d_coarsest_level)
           && (d_finest_level <= d_hierarchy->getFinestLevelNumber()) );
 #endif
+   maybeResetOverlappingBoxLists();
 
    int entries = 0;
 
diff --git a/source/mathops/edge/HierarchyEdgeDataOpsInteger.h b/source/mathops/edge/HierarchyEdgeDataOpsInteger.h
index 74e7b1e..db9b32f 100644
--- a/source/mathops/edge/HierarchyEdgeDataOpsInteger.h
+++ b/source/mathops/edge/HierarchyEdgeDataOpsInteger.h
@@ -77,7 +77,7 @@ public:
    /**
     * Virtual destructor for the HierarchyEdgeDataOpsInteger<DIM> class.
     */
-   virtual ~HierarchyEdgeDataOpsInteger<DIM>();
+   virtual ~HierarchyEdgeDataOpsInteger();
 
    /**
     * Reset patch hierarchy over which operations occur.
@@ -263,10 +263,20 @@ private:
    tbox::Pointer< hier::PatchHierarchy<DIM> > d_hierarchy;
    int  d_coarsest_level;
    int  d_finest_level; 
-   tbox::Array< tbox::Array< hier::BoxList<DIM> > > d_nonoverlapping_edge_boxes[DIM];
+   mutable tbox::Array< tbox::Array< hier::BoxList<DIM> > > d_nonoverlapping_edge_boxes[DIM];
 
    PatchEdgeDataOpsInteger<DIM> d_patch_ops;
 
+   /*!
+    * Set d_nonoverlapping_side_boxes to the correct value.
+    *
+    * d_nonoverlapping_side_boxes is extremely expensive to compute, and for
+    * whatever reason SAMRAI calls resetLevels() in most linear algebra
+    * functions: this results in, for problems with lots of patches, the
+    * majority of runtime being spent recomputing overlap repeatedly in
+    * solvers when we never actually need the information.
+    */
+   void maybeResetOverlappingBoxLists() const;
 };
 
 }
diff --git a/source/mathops/edge/HierarchyEdgeDataOpsReal.C b/source/mathops/edge/HierarchyEdgeDataOpsReal.C
index 1eab323..2287d8f 100644
--- a/source/mathops/edge/HierarchyEdgeDataOpsReal.C
+++ b/source/mathops/edge/HierarchyEdgeDataOpsReal.C
@@ -75,7 +75,6 @@ void HierarchyEdgeDataOpsReal<DIM,TYPE>::resetLevels(
    const int coarsest_level,
    const int finest_level)
 {
-   int i;
 #ifdef DEBUG_CHECK_ASSERTIONS
    TBOX_ASSERT(!d_hierarchy.isNull());
    TBOX_ASSERT(   (coarsest_level >= 0)
@@ -86,6 +85,16 @@ void HierarchyEdgeDataOpsReal<DIM,TYPE>::resetLevels(
    d_coarsest_level = coarsest_level;
    d_finest_level = finest_level;
 
+   for (int d = 0; d < DIM; d++) {
+      d_nonoverlapping_edge_boxes[d].resizeArray(0);
+   }
+}
+
+template<int DIM, class TYPE>
+void HierarchyEdgeDataOpsReal<DIM,TYPE>::maybeResetOverlappingBoxLists() const
+{
+   if (d_nonoverlapping_edge_boxes[0].size() > 0)
+      return;
    for (int d = 0; d < DIM; d++) {
       d_nonoverlapping_edge_boxes[d].resizeArray(d_finest_level+1);
    }
@@ -97,7 +106,7 @@ void HierarchyEdgeDataOpsReal<DIM,TYPE>::resetLevels(
 
       for (int nd = 0; nd < DIM; nd++ ) {
          edge_boxes = level->getBoxes();
-         for (i = 0; i < n; i++) {
+         for (int i = 0; i < n; i++) {
             edge_boxes[i] =
                pdat::EdgeGeometry<DIM>::toEdgeBox(edge_boxes[i], nd);
          }
@@ -680,6 +689,7 @@ int HierarchyEdgeDataOpsReal<DIM,TYPE>::numberOfEntries(
           && (d_finest_level >= d_coarsest_level)
           && (d_finest_level <= d_hierarchy->getFinestLevelNumber()) );
 #endif
+   maybeResetOverlappingBoxLists();
 
    int entries = 0;
 
diff --git a/source/mathops/edge/HierarchyEdgeDataOpsReal.h b/source/mathops/edge/HierarchyEdgeDataOpsReal.h
index dc375ca..e0deaf6 100644
--- a/source/mathops/edge/HierarchyEdgeDataOpsReal.h
+++ b/source/mathops/edge/HierarchyEdgeDataOpsReal.h
@@ -78,7 +78,7 @@ public:
    /**
     * Virtual destructor for the HierarchyEdgeDataOpsReal<DIM> class.
     */
-   virtual ~HierarchyEdgeDataOpsReal<DIM,TYPE>();
+   virtual ~HierarchyEdgeDataOpsReal();
 
    /**
     * Reset patch hierarchy over which operations occur.
@@ -433,10 +433,20 @@ private:
    tbox::Pointer< hier::PatchHierarchy<DIM> > d_hierarchy;
    int  d_coarsest_level;
    int  d_finest_level; 
-   tbox::Array< tbox::Array< hier::BoxList<DIM> > > d_nonoverlapping_edge_boxes[DIM];
+   mutable tbox::Array< tbox::Array< hier::BoxList<DIM> > > d_nonoverlapping_edge_boxes[DIM];
 
    PatchEdgeDataOpsReal<DIM,TYPE> d_patch_ops;
 
+   /*!
+    * Set d_nonoverlapping_side_boxes to the correct value.
+    *
+    * d_nonoverlapping_side_boxes is extremely expensive to compute, and for
+    * whatever reason SAMRAI calls resetLevels() in most linear algebra
+    * functions: this results in, for problems with lots of patches, the
+    * majority of runtime being spent recomputing overlap repeatedly in
+    * solvers when we never actually need the information.
+    */
+   void maybeResetOverlappingBoxLists() const;
 };
 
 }
diff --git a/source/mathops/edge/PatchEdgeDataBasicOps.h b/source/mathops/edge/PatchEdgeDataBasicOps.h
index 303f6b0..d4b52c3 100644
--- a/source/mathops/edge/PatchEdgeDataBasicOps.h
+++ b/source/mathops/edge/PatchEdgeDataBasicOps.h
@@ -56,7 +56,7 @@ public:
     */
    PatchEdgeDataBasicOps();
 
-   virtual ~PatchEdgeDataBasicOps<DIM,TYPE>();
+   virtual ~PatchEdgeDataBasicOps();
 
    /**
     * Set dst = alpha * src, elementwise.
diff --git a/source/mathops/edge/PatchEdgeDataMiscellaneousOpsReal.h b/source/mathops/edge/PatchEdgeDataMiscellaneousOpsReal.h
index b9b7868..6dc0a8b 100644
--- a/source/mathops/edge/PatchEdgeDataMiscellaneousOpsReal.h
+++ b/source/mathops/edge/PatchEdgeDataMiscellaneousOpsReal.h
@@ -68,7 +68,7 @@ public:
     */
    PatchEdgeDataMiscellaneousOpsReal();
 
-   virtual ~PatchEdgeDataMiscellaneousOpsReal<DIM,TYPE>();
+   virtual ~PatchEdgeDataMiscellaneousOpsReal();
 
    /**
     * Return 1 if \f$\|data2_i\| > 0\f$ and \f$data1_i * data2_i \leq 0\f$, for
diff --git a/source/mathops/edge/PatchEdgeDataNormOpsComplex.h b/source/mathops/edge/PatchEdgeDataNormOpsComplex.h
index 0701999..69b2fe7 100644
--- a/source/mathops/edge/PatchEdgeDataNormOpsComplex.h
+++ b/source/mathops/edge/PatchEdgeDataNormOpsComplex.h
@@ -64,7 +64,7 @@ public:
     */
    PatchEdgeDataNormOpsComplex();
 
-   virtual ~PatchEdgeDataNormOpsComplex<DIM>();
+   virtual ~PatchEdgeDataNormOpsComplex();
 
    /**
     * Return the number of data values for the edge-centered data object
diff --git a/source/mathops/edge/PatchEdgeDataNormOpsReal.h b/source/mathops/edge/PatchEdgeDataNormOpsReal.h
index 5b0a172..de67b22 100644
--- a/source/mathops/edge/PatchEdgeDataNormOpsReal.h
+++ b/source/mathops/edge/PatchEdgeDataNormOpsReal.h
@@ -68,7 +68,7 @@ public:
     */
    PatchEdgeDataNormOpsReal();
 
-   virtual ~PatchEdgeDataNormOpsReal<DIM,TYPE>();
+   virtual ~PatchEdgeDataNormOpsReal();
 
    /**
     * Return the number of data values for the edge-centered data object
diff --git a/source/mathops/edge/PatchEdgeDataOpsComplex.h b/source/mathops/edge/PatchEdgeDataOpsComplex.h
index d065173..21c7de0 100644
--- a/source/mathops/edge/PatchEdgeDataOpsComplex.h
+++ b/source/mathops/edge/PatchEdgeDataOpsComplex.h
@@ -57,7 +57,7 @@ public:
     */
    PatchEdgeDataOpsComplex();
 
-   virtual ~PatchEdgeDataOpsComplex<DIM>();
+   virtual ~PatchEdgeDataOpsComplex();
 
    /**
     * Copy dst data to src data over given box.
diff --git a/source/mathops/edge/PatchEdgeDataOpsInteger.h b/source/mathops/edge/PatchEdgeDataOpsInteger.h
index 3104013..c622643 100644
--- a/source/mathops/edge/PatchEdgeDataOpsInteger.h
+++ b/source/mathops/edge/PatchEdgeDataOpsInteger.h
@@ -52,7 +52,7 @@ public:
     */
    PatchEdgeDataOpsInteger();
 
-   virtual ~PatchEdgeDataOpsInteger<DIM>();
+   virtual ~PatchEdgeDataOpsInteger();
 
    /**
     * Return the number of data values for the edge-centered data object
diff --git a/source/mathops/edge/PatchEdgeDataOpsReal.h b/source/mathops/edge/PatchEdgeDataOpsReal.h
index d806898..21d815c 100644
--- a/source/mathops/edge/PatchEdgeDataOpsReal.h
+++ b/source/mathops/edge/PatchEdgeDataOpsReal.h
@@ -62,7 +62,7 @@ public:
     */
    PatchEdgeDataOpsReal();
 
-   virtual ~PatchEdgeDataOpsReal<DIM,TYPE>();
+   virtual ~PatchEdgeDataOpsReal();
 
    /**
     * Copy dst data to src data over given box.
diff --git a/source/mathops/face/HierarchyFaceDataOpsComplex.h b/source/mathops/face/HierarchyFaceDataOpsComplex.h
index 3b7a445..ef3696f 100644
--- a/source/mathops/face/HierarchyFaceDataOpsComplex.h
+++ b/source/mathops/face/HierarchyFaceDataOpsComplex.h
@@ -78,7 +78,7 @@ public:
    /**
     * Virtual destructor for the HierarchyFaceDataOpsComplex<DIM> class.
     */
-   virtual ~HierarchyFaceDataOpsComplex<DIM>();
+   virtual ~HierarchyFaceDataOpsComplex();
 
    /**
     * Reset patch hierarchy over which operations occur.
diff --git a/source/mathops/face/HierarchyFaceDataOpsInteger.h b/source/mathops/face/HierarchyFaceDataOpsInteger.h
index 0d5cdcc..fc910b6 100644
--- a/source/mathops/face/HierarchyFaceDataOpsInteger.h
+++ b/source/mathops/face/HierarchyFaceDataOpsInteger.h
@@ -77,7 +77,7 @@ public:
    /**
     * Virtual destructor for the HierarchyFaceDataOpsInteger<DIM> class.
     */
-   virtual ~HierarchyFaceDataOpsInteger<DIM>();
+   virtual ~HierarchyFaceDataOpsInteger();
 
    /**
     * Reset patch hierarchy over which operations occur.
diff --git a/source/mathops/face/HierarchyFaceDataOpsReal.h b/source/mathops/face/HierarchyFaceDataOpsReal.h
index 1a4c9d6..e0b3a95 100644
--- a/source/mathops/face/HierarchyFaceDataOpsReal.h
+++ b/source/mathops/face/HierarchyFaceDataOpsReal.h
@@ -78,7 +78,7 @@ public:
    /**
     * Virtual destructor for the HierarchyFaceDataOpsReal<DIM> class.
     */
-   virtual ~HierarchyFaceDataOpsReal<DIM,TYPE>();
+   virtual ~HierarchyFaceDataOpsReal();
 
    /**
     * Reset patch hierarchy over which operations occur.
diff --git a/source/mathops/face/PatchFaceDataBasicOps.h b/source/mathops/face/PatchFaceDataBasicOps.h
index 3f018a4..8de8098 100644
--- a/source/mathops/face/PatchFaceDataBasicOps.h
+++ b/source/mathops/face/PatchFaceDataBasicOps.h
@@ -56,7 +56,7 @@ public:
     */
    PatchFaceDataBasicOps();
 
-   virtual ~PatchFaceDataBasicOps<DIM,TYPE>();
+   virtual ~PatchFaceDataBasicOps();
 
    /**
     * Set dst = alpha * src, elementwise.
diff --git a/source/mathops/face/PatchFaceDataMiscellaneousOpsReal.h b/source/mathops/face/PatchFaceDataMiscellaneousOpsReal.h
index 4df4689..7983223 100644
--- a/source/mathops/face/PatchFaceDataMiscellaneousOpsReal.h
+++ b/source/mathops/face/PatchFaceDataMiscellaneousOpsReal.h
@@ -68,7 +68,7 @@ public:
     */
    PatchFaceDataMiscellaneousOpsReal();
 
-   virtual ~PatchFaceDataMiscellaneousOpsReal<DIM,TYPE>();
+   virtual ~PatchFaceDataMiscellaneousOpsReal();
 
    /**
     * Return 1 if \f$\|data2_i\| > 0\f$ and \f$data1_i * data2_i \leq 0\f$, for
diff --git a/source/mathops/face/PatchFaceDataNormOpsComplex.h b/source/mathops/face/PatchFaceDataNormOpsComplex.h
index 0e2c2e4..1469ce6 100644
--- a/source/mathops/face/PatchFaceDataNormOpsComplex.h
+++ b/source/mathops/face/PatchFaceDataNormOpsComplex.h
@@ -64,7 +64,7 @@ public:
     */
    PatchFaceDataNormOpsComplex();
 
-   virtual ~PatchFaceDataNormOpsComplex<DIM>();
+   virtual ~PatchFaceDataNormOpsComplex();
 
    /**
     * Return the number of data values for the face-centered data object
diff --git a/source/mathops/face/PatchFaceDataNormOpsReal.h b/source/mathops/face/PatchFaceDataNormOpsReal.h
index 400376a..f30fcdf 100644
--- a/source/mathops/face/PatchFaceDataNormOpsReal.h
+++ b/source/mathops/face/PatchFaceDataNormOpsReal.h
@@ -68,7 +68,7 @@ public:
     */
    PatchFaceDataNormOpsReal();
 
-   virtual ~PatchFaceDataNormOpsReal<DIM,TYPE>();
+   virtual ~PatchFaceDataNormOpsReal();
 
    /**
     * Return the number of data values for the face-centered data object
diff --git a/source/mathops/face/PatchFaceDataOpsComplex.h b/source/mathops/face/PatchFaceDataOpsComplex.h
index 1603e37..9ecc992 100644
--- a/source/mathops/face/PatchFaceDataOpsComplex.h
+++ b/source/mathops/face/PatchFaceDataOpsComplex.h
@@ -56,7 +56,7 @@ public:
     */
    PatchFaceDataOpsComplex();
 
-   virtual ~PatchFaceDataOpsComplex<DIM>();
+   virtual ~PatchFaceDataOpsComplex();
 
    /**
     * Copy dst data to src data over given box.
diff --git a/source/mathops/face/PatchFaceDataOpsInteger.h b/source/mathops/face/PatchFaceDataOpsInteger.h
index f287f54..21b01ec 100644
--- a/source/mathops/face/PatchFaceDataOpsInteger.h
+++ b/source/mathops/face/PatchFaceDataOpsInteger.h
@@ -52,7 +52,7 @@ public:
     */
    PatchFaceDataOpsInteger();
 
-   virtual ~PatchFaceDataOpsInteger<DIM>();
+   virtual ~PatchFaceDataOpsInteger();
 
    /**
     * Return the number of data values for the face-centered data object
diff --git a/source/mathops/face/PatchFaceDataOpsReal.h b/source/mathops/face/PatchFaceDataOpsReal.h
index 59a8867..a546a56 100644
--- a/source/mathops/face/PatchFaceDataOpsReal.h
+++ b/source/mathops/face/PatchFaceDataOpsReal.h
@@ -62,7 +62,7 @@ public:
     */
    PatchFaceDataOpsReal();
 
-   virtual ~PatchFaceDataOpsReal<DIM,TYPE>();
+   virtual ~PatchFaceDataOpsReal();
 
    /**
     * Copy dst data to src data over given box.
diff --git a/source/mathops/hierarchy/HierarchyDataOpsComplex.h b/source/mathops/hierarchy/HierarchyDataOpsComplex.h
index f4643a3..9ddb1d5 100644
--- a/source/mathops/hierarchy/HierarchyDataOpsComplex.h
+++ b/source/mathops/hierarchy/HierarchyDataOpsComplex.h
@@ -55,7 +55,7 @@ public:
    /**
     * Virtual destructor for the HierarchyDataOpsComplex<DIM> class.
     */
-   virtual ~HierarchyDataOpsComplex<DIM>();
+   virtual ~HierarchyDataOpsComplex();
 
    /**
     * Reset patch hierarchy over which operations occur.
diff --git a/source/mathops/hierarchy/HierarchyDataOpsInteger.h b/source/mathops/hierarchy/HierarchyDataOpsInteger.h
index 2b1eec6..6a18a98 100644
--- a/source/mathops/hierarchy/HierarchyDataOpsInteger.h
+++ b/source/mathops/hierarchy/HierarchyDataOpsInteger.h
@@ -55,7 +55,7 @@ public:
    /**
     * Virtual destructor for the HierarchyDataOpsInteger<DIM> class.
     */
-   virtual ~HierarchyDataOpsInteger<DIM>();
+   virtual ~HierarchyDataOpsInteger();
 
    /**
     * Reset patch hierarchy over which operations occur.
diff --git a/source/mathops/hierarchy/HierarchyDataOpsManager.h b/source/mathops/hierarchy/HierarchyDataOpsManager.h
index 596799e..832435e 100644
--- a/source/mathops/hierarchy/HierarchyDataOpsManager.h
+++ b/source/mathops/hierarchy/HierarchyDataOpsManager.h
@@ -173,7 +173,7 @@ protected:
     * The destructor for HierarchyDataOpsManager<DIM> is protected.  
     * See the comments for the constructor.
     */
-   virtual ~HierarchyDataOpsManager<DIM>();
+   virtual ~HierarchyDataOpsManager();
 
    /**
     * Initialize Singleton instance with instance of subclass.  This function
diff --git a/source/mathops/hierarchy/HierarchyDataOpsReal.h b/source/mathops/hierarchy/HierarchyDataOpsReal.h
index 6b62f1b..a6e687b 100644
--- a/source/mathops/hierarchy/HierarchyDataOpsReal.h
+++ b/source/mathops/hierarchy/HierarchyDataOpsReal.h
@@ -56,7 +56,7 @@ public:
    /**
     * Virtual destructor for the HierarchyDataOpsReal<DIM> class.
     */
-   virtual ~HierarchyDataOpsReal<DIM,TYPE>();
+   virtual ~HierarchyDataOpsReal();
 
    /**
     * Reset patch hierarchy over which operations occur.
@@ -329,6 +329,13 @@ public:
                     const int vol_id = -1,
 		    bool local_only=false) const = 0;
 
+   /**
+    * Return the integral of the function represented by the data array.
+    * The return value is the sum \f$\sum_i ( data_i * vol_i )\f$.
+    */
+   virtual TYPE integral(const int data_id,
+                         const int vol_id) const = 0;
+
    /**
     * Return 1 if \f$\|data2_i\| > 0\f$ and \f$data1_i * data2_i \leq 0\f$, for
     * any \f$i\f$ in the set of patch data indices, where \f$cvol_i > 0\f$.  Otherwise,
diff --git a/source/mathops/node/HierarchyNodeDataOpsComplex.C b/source/mathops/node/HierarchyNodeDataOpsComplex.C
index 6a5f38b..cdf36be 100644
--- a/source/mathops/node/HierarchyNodeDataOpsComplex.C
+++ b/source/mathops/node/HierarchyNodeDataOpsComplex.C
@@ -81,6 +81,14 @@ template<int DIM> void HierarchyNodeDataOpsComplex<DIM>::resetLevels(
    d_coarsest_level = coarsest_level;
    d_finest_level = finest_level;
 
+   d_nonoverlapping_node_boxes.resizeArray(0);
+}
+
+template<int DIM>
+void HierarchyNodeDataOpsComplex<DIM>::maybeResetOverlappingBoxLists() const
+{
+   if (d_nonoverlapping_node_boxes.size() > 0)
+      return;
    d_nonoverlapping_node_boxes.resizeArray(d_finest_level+1);
 
    for (int ln = d_coarsest_level; ln <= d_finest_level; ln++) {
@@ -627,6 +635,7 @@ template<int DIM> int HierarchyNodeDataOpsComplex<DIM>::numberOfEntries(
           && (d_finest_level >= d_coarsest_level)
           && (d_finest_level <= d_hierarchy->getFinestLevelNumber()) );
 #endif
+   maybeResetOverlappingBoxLists();
 
    int entries = 0;
 
diff --git a/source/mathops/node/HierarchyNodeDataOpsComplex.h b/source/mathops/node/HierarchyNodeDataOpsComplex.h
index 2f52b80..1534cb6 100644
--- a/source/mathops/node/HierarchyNodeDataOpsComplex.h
+++ b/source/mathops/node/HierarchyNodeDataOpsComplex.h
@@ -77,7 +77,7 @@ public:
    /**
     * Virtual destructor for the HierarchyNodeDataOpsComplex<DIM> class.
     */
-   virtual ~HierarchyNodeDataOpsComplex<DIM>();
+   virtual ~HierarchyNodeDataOpsComplex();
 
    /**
     * Reset patch hierarchy over which operations occur.
@@ -345,10 +345,20 @@ private:
    tbox::Pointer< hier::PatchHierarchy<DIM> > d_hierarchy;
    int  d_coarsest_level;
    int  d_finest_level; 
-   tbox::Array< tbox::Array< hier::BoxList<DIM> > > d_nonoverlapping_node_boxes;
+   mutable tbox::Array< tbox::Array< hier::BoxList<DIM> > > d_nonoverlapping_node_boxes;
 
    PatchNodeDataOpsComplex<DIM> d_patch_ops;
 
+   /*!
+    * Set d_nonoverlapping_side_boxes to the correct value.
+    *
+    * d_nonoverlapping_side_boxes is extremely expensive to compute, and for
+    * whatever reason SAMRAI calls resetLevels() in most linear algebra
+    * functions: this results in, for problems with lots of patches, the
+    * majority of runtime being spent recomputing overlap repeatedly in
+    * solvers when we never actually need the information.
+    */
+   void maybeResetOverlappingBoxLists() const;
 };
 
 }
diff --git a/source/mathops/node/HierarchyNodeDataOpsInteger.C b/source/mathops/node/HierarchyNodeDataOpsInteger.C
index 667c482..42f3a38 100644
--- a/source/mathops/node/HierarchyNodeDataOpsInteger.C
+++ b/source/mathops/node/HierarchyNodeDataOpsInteger.C
@@ -82,6 +82,14 @@ template<int DIM> void HierarchyNodeDataOpsInteger<DIM>::resetLevels(
    d_coarsest_level = coarsest_level;
    d_finest_level = finest_level;
 
+   d_nonoverlapping_node_boxes.resizeArray(0);
+}
+
+template<int DIM>
+void HierarchyNodeDataOpsInteger<DIM>::maybeResetOverlappingBoxLists() const
+{
+   if (d_nonoverlapping_node_boxes.size() > 0)
+      return;
    d_nonoverlapping_node_boxes.resizeArray(d_finest_level+1);
 
    for (int ln = d_coarsest_level; ln <= d_finest_level; ln++) {
@@ -123,6 +131,7 @@ template<int DIM> int HierarchyNodeDataOpsInteger<DIM>::numberOfEntries(
           && (d_finest_level >= d_coarsest_level)
           && (d_finest_level <= d_hierarchy->getFinestLevelNumber()) );
 #endif
+   maybeResetOverlappingBoxLists();
 
    int entries = 0;
 
diff --git a/source/mathops/node/HierarchyNodeDataOpsInteger.h b/source/mathops/node/HierarchyNodeDataOpsInteger.h
index 6ef3b31..5ffb592 100644
--- a/source/mathops/node/HierarchyNodeDataOpsInteger.h
+++ b/source/mathops/node/HierarchyNodeDataOpsInteger.h
@@ -76,7 +76,7 @@ public:
    /**
     * Virtual destructor for the HierarchyNodeDataOpsInteger<DIM> class.
     */
-   virtual ~HierarchyNodeDataOpsInteger<DIM>();
+   virtual ~HierarchyNodeDataOpsInteger();
 
    /**
     * Reset patch hierarchy over which operations occur.
@@ -262,10 +262,20 @@ private:
    tbox::Pointer< hier::PatchHierarchy<DIM> > d_hierarchy;
    int  d_coarsest_level;
    int  d_finest_level; 
-   tbox::Array< tbox::Array< hier::BoxList<DIM> > > d_nonoverlapping_node_boxes;
+   mutable tbox::Array< tbox::Array< hier::BoxList<DIM> > > d_nonoverlapping_node_boxes;
 
    PatchNodeDataOpsInteger<DIM> d_patch_ops;
 
+   /*!
+    * Set d_nonoverlapping_side_boxes to the correct value.
+    *
+    * d_nonoverlapping_side_boxes is extremely expensive to compute, and for
+    * whatever reason SAMRAI calls resetLevels() in most linear algebra
+    * functions: this results in, for problems with lots of patches, the
+    * majority of runtime being spent recomputing overlap repeatedly in
+    * solvers when we never actually need the information.
+    */
+   void maybeResetOverlappingBoxLists() const;
 };
 
 }
diff --git a/source/mathops/node/HierarchyNodeDataOpsReal.C b/source/mathops/node/HierarchyNodeDataOpsReal.C
index 2cc867c..89a2caa 100644
--- a/source/mathops/node/HierarchyNodeDataOpsReal.C
+++ b/source/mathops/node/HierarchyNodeDataOpsReal.C
@@ -87,6 +87,14 @@ void HierarchyNodeDataOpsReal<DIM,TYPE>::resetLevels(
    d_coarsest_level = coarsest_level;
    d_finest_level = finest_level;
 
+   d_nonoverlapping_node_boxes.resizeArray(0);
+}
+
+template<int DIM, class TYPE>
+void HierarchyNodeDataOpsReal<DIM,TYPE>::maybeResetOverlappingBoxLists() const
+{
+   if (d_nonoverlapping_node_boxes.size() > 0)
+      return;
    d_nonoverlapping_node_boxes.resizeArray(d_finest_level+1);
 
    for (int ln = d_coarsest_level; ln <= d_finest_level; ln++) {
@@ -675,6 +683,7 @@ int HierarchyNodeDataOpsReal<DIM,TYPE>::numberOfEntries(
           && (d_finest_level >= d_coarsest_level)
           && (d_finest_level <= d_hierarchy->getFinestLevelNumber()) );
 #endif
+   maybeResetOverlappingBoxLists();
 
    int entries = 0;
 
diff --git a/source/mathops/node/HierarchyNodeDataOpsReal.h b/source/mathops/node/HierarchyNodeDataOpsReal.h
index 2723e5e..a72698f 100644
--- a/source/mathops/node/HierarchyNodeDataOpsReal.h
+++ b/source/mathops/node/HierarchyNodeDataOpsReal.h
@@ -80,7 +80,7 @@ public:
    /**
     * Virtual destructor for the HierarchyNodeDataOpsReal<DIM> class.
     */
-   virtual ~HierarchyNodeDataOpsReal<DIM,TYPE>();
+   virtual ~HierarchyNodeDataOpsReal();
 
    /**
     * Reset patch hierarchy over which operations occur.
@@ -435,10 +435,20 @@ private:
    tbox::Pointer< hier::PatchHierarchy<DIM> > d_hierarchy;
    int  d_coarsest_level;
    int  d_finest_level; 
-   tbox::Array< tbox::Array< hier::BoxList<DIM> > > d_nonoverlapping_node_boxes;
+   mutable tbox::Array< tbox::Array< hier::BoxList<DIM> > > d_nonoverlapping_node_boxes;
 
    PatchNodeDataOpsReal<DIM,TYPE> d_patch_ops;
 
+   /*!
+    * Set d_nonoverlapping_side_boxes to the correct value.
+    *
+    * d_nonoverlapping_side_boxes is extremely expensive to compute, and for
+    * whatever reason SAMRAI calls resetLevels() in most linear algebra
+    * functions: this results in, for problems with lots of patches, the
+    * majority of runtime being spent recomputing overlap repeatedly in
+    * solvers when we never actually need the information.
+    */
+   void maybeResetOverlappingBoxLists() const;
 };
 
 }
diff --git a/source/mathops/node/PatchNodeDataBasicOps.h b/source/mathops/node/PatchNodeDataBasicOps.h
index d60d987..db56d8c 100644
--- a/source/mathops/node/PatchNodeDataBasicOps.h
+++ b/source/mathops/node/PatchNodeDataBasicOps.h
@@ -56,7 +56,7 @@ public:
     */
    PatchNodeDataBasicOps();
 
-   virtual ~PatchNodeDataBasicOps<DIM,TYPE>();
+   virtual ~PatchNodeDataBasicOps();
 
    /**
     * Set dst = alpha * src, elementwise.
diff --git a/source/mathops/node/PatchNodeDataMiscellaneousOpsReal.h b/source/mathops/node/PatchNodeDataMiscellaneousOpsReal.h
index 05cc25d..31f81ae 100644
--- a/source/mathops/node/PatchNodeDataMiscellaneousOpsReal.h
+++ b/source/mathops/node/PatchNodeDataMiscellaneousOpsReal.h
@@ -68,7 +68,7 @@ public:
     */
    PatchNodeDataMiscellaneousOpsReal();
 
-   virtual ~PatchNodeDataMiscellaneousOpsReal<DIM,TYPE>();
+   virtual ~PatchNodeDataMiscellaneousOpsReal();
 
    /**
     * Return 1 if \f$\|data2_i\| > 0\f$ and \f$data1_i * data2_i \leq 0\f$, for
diff --git a/source/mathops/node/PatchNodeDataNormOpsComplex.h b/source/mathops/node/PatchNodeDataNormOpsComplex.h
index afb014c..f82507e 100644
--- a/source/mathops/node/PatchNodeDataNormOpsComplex.h
+++ b/source/mathops/node/PatchNodeDataNormOpsComplex.h
@@ -64,7 +64,7 @@ public:
     */
    PatchNodeDataNormOpsComplex();
 
-   virtual ~PatchNodeDataNormOpsComplex<DIM>();
+   virtual ~PatchNodeDataNormOpsComplex();
 
    /**
     * Return the number of data values for the node-centered data object
diff --git a/source/mathops/node/PatchNodeDataNormOpsReal.h b/source/mathops/node/PatchNodeDataNormOpsReal.h
index 14d450e..8d50780 100644
--- a/source/mathops/node/PatchNodeDataNormOpsReal.h
+++ b/source/mathops/node/PatchNodeDataNormOpsReal.h
@@ -68,7 +68,7 @@ public:
     */
    PatchNodeDataNormOpsReal();
 
-   virtual ~PatchNodeDataNormOpsReal<DIM,TYPE>();
+   virtual ~PatchNodeDataNormOpsReal();
 
    /**
     * Return the number of data values for the node-centered data object
diff --git a/source/mathops/node/PatchNodeDataOpsComplex.h b/source/mathops/node/PatchNodeDataOpsComplex.h
index 1258ee1..7a0f8d1 100644
--- a/source/mathops/node/PatchNodeDataOpsComplex.h
+++ b/source/mathops/node/PatchNodeDataOpsComplex.h
@@ -57,7 +57,7 @@ public:
     */
    PatchNodeDataOpsComplex();
 
-   virtual ~PatchNodeDataOpsComplex<DIM>();
+   virtual ~PatchNodeDataOpsComplex();
 
    /**
     * Copy dst data to src data over given box.
diff --git a/source/mathops/node/PatchNodeDataOpsInteger.h b/source/mathops/node/PatchNodeDataOpsInteger.h
index c1f4822..283d69d 100644
--- a/source/mathops/node/PatchNodeDataOpsInteger.h
+++ b/source/mathops/node/PatchNodeDataOpsInteger.h
@@ -52,7 +52,7 @@ public:
     */
    PatchNodeDataOpsInteger();
 
-   virtual ~PatchNodeDataOpsInteger<DIM>();
+   virtual ~PatchNodeDataOpsInteger();
 
    /**
     * Return the number of data values for the node-centered data object
diff --git a/source/mathops/node/PatchNodeDataOpsReal.h b/source/mathops/node/PatchNodeDataOpsReal.h
index a31d46f..411e738 100644
--- a/source/mathops/node/PatchNodeDataOpsReal.h
+++ b/source/mathops/node/PatchNodeDataOpsReal.h
@@ -62,7 +62,7 @@ public:
     */
    PatchNodeDataOpsReal();
 
-   virtual ~PatchNodeDataOpsReal<DIM,TYPE>();
+   virtual ~PatchNodeDataOpsReal();
 
    /**
     * Copy dst data to src data over given box.
diff --git a/source/mathops/side/HierarchySideDataOpsComplex.C b/source/mathops/side/HierarchySideDataOpsComplex.C
index 0d7e1da..77750e1 100644
--- a/source/mathops/side/HierarchySideDataOpsComplex.C
+++ b/source/mathops/side/HierarchySideDataOpsComplex.C
@@ -71,7 +71,6 @@ template<int DIM> void HierarchySideDataOpsComplex<DIM>::resetLevels(
    const int coarsest_level,
    const int finest_level)
 {
-   int i;
 #ifdef DEBUG_CHECK_ASSERTIONS
    TBOX_ASSERT(!d_hierarchy.isNull());
    TBOX_ASSERT(   (coarsest_level >= 0)
@@ -82,6 +81,16 @@ template<int DIM> void HierarchySideDataOpsComplex<DIM>::resetLevels(
    d_coarsest_level = coarsest_level;
    d_finest_level = finest_level;
 
+   for (int d = 0; d < DIM; d++) {
+      d_nonoverlapping_side_boxes[d].resizeArray(0);
+   }
+}
+
+template<int DIM>
+void HierarchySideDataOpsComplex<DIM>::maybeResetOverlappingBoxLists() const
+{
+   if (d_nonoverlapping_side_boxes[0].size() > 0)
+      return;
    for (int d = 0; d < DIM; d++) {
       d_nonoverlapping_side_boxes[d].resizeArray(d_finest_level+1);
    }
@@ -93,7 +102,7 @@ template<int DIM> void HierarchySideDataOpsComplex<DIM>::resetLevels(
 
       for (int nd = 0; nd < DIM; nd++) {
          side_boxes = level->getBoxes();
-         for (i = 0; i < n; i++) {
+         for (int i = 0; i < n; i++) {
             side_boxes[i] =
                pdat::SideGeometry<DIM>::toSideBox(side_boxes[i], nd);
          }
@@ -635,6 +644,7 @@ template<int DIM> int HierarchySideDataOpsComplex<DIM>::numberOfEntries(
           && (d_finest_level >= d_coarsest_level)
           && (d_finest_level <= d_hierarchy->getFinestLevelNumber()) );
 #endif
+   maybeResetOverlappingBoxLists();
 
    int entries = 0;
 
diff --git a/source/mathops/side/HierarchySideDataOpsComplex.h b/source/mathops/side/HierarchySideDataOpsComplex.h
index fa1c9bc..799317b 100644
--- a/source/mathops/side/HierarchySideDataOpsComplex.h
+++ b/source/mathops/side/HierarchySideDataOpsComplex.h
@@ -78,7 +78,7 @@ public:
    /**
     * Virtual destructor for the HierarchySideDataOpsComplex<DIM> class.
     */
-   virtual ~HierarchySideDataOpsComplex<DIM>();
+   virtual ~HierarchySideDataOpsComplex();
 
    /**
     * Reset patch hierarchy over which operations occur.
@@ -346,10 +346,20 @@ private:
    tbox::Pointer< hier::PatchHierarchy<DIM> > d_hierarchy;
    int  d_coarsest_level;
    int  d_finest_level; 
-   tbox::Array< tbox::Array< hier::BoxList<DIM> > > d_nonoverlapping_side_boxes[DIM];
+   mutable tbox::Array< tbox::Array< hier::BoxList<DIM> > > d_nonoverlapping_side_boxes[DIM];
 
    PatchSideDataOpsComplex<DIM> d_patch_ops;
 
+   /*!
+    * Set d_nonoverlapping_side_boxes to the correct value.
+    *
+    * d_nonoverlapping_side_boxes is extremely expensive to compute, and for
+    * whatever reason SAMRAI calls resetLevels() in most linear algebra
+    * functions: this results in, for problems with lots of patches, the
+    * majority of runtime being spent recomputing overlap repeatedly in
+    * solvers when we never actually need the information.
+    */
+   void maybeResetOverlappingBoxLists() const;
 };
 
 }
diff --git a/source/mathops/side/HierarchySideDataOpsInteger.C b/source/mathops/side/HierarchySideDataOpsInteger.C
index e344a68..b42e08d 100644
--- a/source/mathops/side/HierarchySideDataOpsInteger.C
+++ b/source/mathops/side/HierarchySideDataOpsInteger.C
@@ -72,7 +72,6 @@ template<int DIM> void HierarchySideDataOpsInteger<DIM>::resetLevels(
    const int coarsest_level,
    const int finest_level)
 {
-   int i;
 #ifdef DEBUG_CHECK_ASSERTIONS
    TBOX_ASSERT(!d_hierarchy.isNull());
    TBOX_ASSERT(   (coarsest_level >= 0)
@@ -83,6 +82,16 @@ template<int DIM> void HierarchySideDataOpsInteger<DIM>::resetLevels(
    d_coarsest_level = coarsest_level;
    d_finest_level = finest_level;
 
+   for (int d = 0; d < DIM; d++) {
+      d_nonoverlapping_side_boxes[d].resizeArray(0);
+   }
+}
+
+template<int DIM>
+void HierarchySideDataOpsInteger<DIM>::maybeResetOverlappingBoxLists() const
+{
+   if (d_nonoverlapping_side_boxes[0].size() > 0)
+      return;
    for (int d = 0; d < DIM; d++) {
       d_nonoverlapping_side_boxes[d].resizeArray(d_finest_level+1);
    }
@@ -94,7 +103,7 @@ template<int DIM> void HierarchySideDataOpsInteger<DIM>::resetLevels(
 
       for (int nd = 0; nd < DIM; nd++) {
          side_boxes = level->getBoxes();
-         for (i = 0; i < n; i++) {
+         for (int i = 0; i < n; i++) {
             side_boxes[i] =
                pdat::SideGeometry<DIM>::toSideBox(side_boxes[i], nd);
          }
@@ -129,6 +138,7 @@ template<int DIM> int HierarchySideDataOpsInteger<DIM>::numberOfEntries(
           && (d_finest_level >= d_coarsest_level)
           && (d_finest_level <= d_hierarchy->getFinestLevelNumber()) );
 #endif
+   maybeResetOverlappingBoxLists();
 
    int entries = 0;
 
diff --git a/source/mathops/side/HierarchySideDataOpsInteger.h b/source/mathops/side/HierarchySideDataOpsInteger.h
index 438f44e..be73919 100644
--- a/source/mathops/side/HierarchySideDataOpsInteger.h
+++ b/source/mathops/side/HierarchySideDataOpsInteger.h
@@ -77,7 +77,7 @@ public:
    /**
     * Virtual destructor for the HierarchySideDataOpsInteger<DIM> class.
     */
-   virtual ~HierarchySideDataOpsInteger<DIM>();
+   virtual ~HierarchySideDataOpsInteger();
 
    /**
     * Reset patch hierarchy over which operations occur.
@@ -263,10 +263,20 @@ private:
    tbox::Pointer< hier::PatchHierarchy<DIM> > d_hierarchy;
    int  d_coarsest_level;
    int  d_finest_level; 
-   tbox::Array< tbox::Array< hier::BoxList<DIM> > > d_nonoverlapping_side_boxes[DIM];
+   mutable tbox::Array< tbox::Array< hier::BoxList<DIM> > > d_nonoverlapping_side_boxes[DIM];
 
    PatchSideDataOpsInteger<DIM> d_patch_ops;
 
+   /*!
+    * Set d_nonoverlapping_side_boxes to the correct value.
+    *
+    * d_nonoverlapping_side_boxes is extremely expensive to compute, and for
+    * whatever reason SAMRAI calls resetLevels() in most linear algebra
+    * functions: this results in, for problems with lots of patches, the
+    * majority of runtime being spent recomputing overlap repeatedly in
+    * solvers when we never actually need the information.
+    */
+   void maybeResetOverlappingBoxLists() const;
 };
 
 }
diff --git a/source/mathops/side/HierarchySideDataOpsReal.C b/source/mathops/side/HierarchySideDataOpsReal.C
index 7385ae9..68a4940 100644
--- a/source/mathops/side/HierarchySideDataOpsReal.C
+++ b/source/mathops/side/HierarchySideDataOpsReal.C
@@ -75,7 +75,6 @@ void HierarchySideDataOpsReal<DIM,TYPE>::resetLevels(
    const int coarsest_level,
    const int finest_level)
 {
-   int i;
 #ifdef DEBUG_CHECK_ASSERTIONS
    TBOX_ASSERT(!d_hierarchy.isNull());
    TBOX_ASSERT(   (coarsest_level >= 0)
@@ -86,6 +85,16 @@ void HierarchySideDataOpsReal<DIM,TYPE>::resetLevels(
    d_coarsest_level = coarsest_level;
    d_finest_level = finest_level;
 
+   for (int d = 0; d < DIM; d++) {
+      d_nonoverlapping_side_boxes[d].resizeArray(0);
+   }
+}
+
+template<int DIM, class TYPE>
+void HierarchySideDataOpsReal<DIM,TYPE>::maybeResetOverlappingBoxLists() const
+{
+   if (d_nonoverlapping_side_boxes[0].size() > 0)
+      return;
    for (int d = 0; d < DIM; d++) {
       d_nonoverlapping_side_boxes[d].resizeArray(d_finest_level+1);
    }
@@ -97,7 +106,7 @@ void HierarchySideDataOpsReal<DIM,TYPE>::resetLevels(
 
       for (int nd = 0; nd < DIM; nd++) {
          side_boxes = level->getBoxes();
-         for (i = 0; i < n; i++) {
+         for (int i = 0; i < n; i++) {
             side_boxes[i] =
                pdat::SideGeometry<DIM>::toSideBox(side_boxes[i], nd);
          }
@@ -682,6 +691,7 @@ int HierarchySideDataOpsReal<DIM,TYPE>::numberOfEntries(
           && (d_finest_level >= d_coarsest_level)
           && (d_finest_level <= d_hierarchy->getFinestLevelNumber()) );
 #endif
+   maybeResetOverlappingBoxLists();
 
    int entries = 0;
 
diff --git a/source/mathops/side/HierarchySideDataOpsReal.h b/source/mathops/side/HierarchySideDataOpsReal.h
index 7b23294..6695589 100644
--- a/source/mathops/side/HierarchySideDataOpsReal.h
+++ b/source/mathops/side/HierarchySideDataOpsReal.h
@@ -76,7 +76,7 @@ public:
    /**
     * Virtual destructor for the HierarchySideDataOpsReal<DIM> class.
     */
-   virtual ~HierarchySideDataOpsReal<DIM,TYPE>();
+   virtual ~HierarchySideDataOpsReal();
 
    /**
     * Reset patch hierarchy over which operations occur.
@@ -433,10 +433,20 @@ private:
    tbox::Pointer< hier::PatchHierarchy<DIM> > d_hierarchy;
    int  d_coarsest_level;
    int  d_finest_level; 
-   tbox::Array< tbox::Array< hier::BoxList<DIM> > > d_nonoverlapping_side_boxes[DIM];
+   mutable tbox::Array< tbox::Array< hier::BoxList<DIM> > > d_nonoverlapping_side_boxes[DIM];
 
    PatchSideDataOpsReal<DIM,TYPE> d_patch_ops;
 
+   /*!
+    * Set d_nonoverlapping_side_boxes to the correct value.
+    *
+    * d_nonoverlapping_side_boxes is extremely expensive to compute, and for
+    * whatever reason SAMRAI calls resetLevels() in most linear algebra
+    * functions: this results in, for problems with lots of patches, the
+    * majority of runtime being spent recomputing overlap repeatedly in
+    * solvers when we never actually need the information.
+    */
+   void maybeResetOverlappingBoxLists() const;
 };
 
 }
diff --git a/source/mathops/side/PatchSideDataBasicOps.h b/source/mathops/side/PatchSideDataBasicOps.h
index 4850ac1..4e19fb4 100644
--- a/source/mathops/side/PatchSideDataBasicOps.h
+++ b/source/mathops/side/PatchSideDataBasicOps.h
@@ -56,7 +56,7 @@ public:
     */
    PatchSideDataBasicOps();
 
-   virtual ~PatchSideDataBasicOps<DIM,TYPE>();
+   virtual ~PatchSideDataBasicOps();
 
    /**
     * Set dst = alpha * src, elementwise.
diff --git a/source/mathops/side/PatchSideDataMiscellaneousOpsReal.h b/source/mathops/side/PatchSideDataMiscellaneousOpsReal.h
index 8a8c8b6..6ba736c 100644
--- a/source/mathops/side/PatchSideDataMiscellaneousOpsReal.h
+++ b/source/mathops/side/PatchSideDataMiscellaneousOpsReal.h
@@ -68,7 +68,7 @@ public:
     */
    PatchSideDataMiscellaneousOpsReal();
 
-   virtual ~PatchSideDataMiscellaneousOpsReal<DIM,TYPE>();
+   virtual ~PatchSideDataMiscellaneousOpsReal();
 
    /**
     * Return 1 if \f$\|data2_i\| > 0\f$ and \f$data1_i * data2_i \leq 0\f$, for
diff --git a/source/mathops/side/PatchSideDataNormOpsComplex.h b/source/mathops/side/PatchSideDataNormOpsComplex.h
index 416071c..d83c2e6 100644
--- a/source/mathops/side/PatchSideDataNormOpsComplex.h
+++ b/source/mathops/side/PatchSideDataNormOpsComplex.h
@@ -64,7 +64,7 @@ public:
     */
    PatchSideDataNormOpsComplex();
 
-   virtual ~PatchSideDataNormOpsComplex<DIM>();
+   virtual ~PatchSideDataNormOpsComplex();
 
    /**
     * Return the number of data values for the side-centered data object
diff --git a/source/mathops/side/PatchSideDataNormOpsReal.h b/source/mathops/side/PatchSideDataNormOpsReal.h
index 0c9dc26..20a4c36 100644
--- a/source/mathops/side/PatchSideDataNormOpsReal.h
+++ b/source/mathops/side/PatchSideDataNormOpsReal.h
@@ -68,7 +68,7 @@ public:
     */
    PatchSideDataNormOpsReal();
 
-   virtual ~PatchSideDataNormOpsReal<DIM,TYPE>();
+   virtual ~PatchSideDataNormOpsReal();
 
    /**
     * Return the number of data values for the side-centered data object
diff --git a/source/mathops/side/PatchSideDataOpsComplex.h b/source/mathops/side/PatchSideDataOpsComplex.h
index 67b02ca..8faba0c 100644
--- a/source/mathops/side/PatchSideDataOpsComplex.h
+++ b/source/mathops/side/PatchSideDataOpsComplex.h
@@ -57,7 +57,7 @@ public:
     */
    PatchSideDataOpsComplex();
 
-   virtual ~PatchSideDataOpsComplex<DIM>();
+   virtual ~PatchSideDataOpsComplex();
 
    /**
     * Copy dst data to src data over given box.
diff --git a/source/mathops/side/PatchSideDataOpsInteger.h b/source/mathops/side/PatchSideDataOpsInteger.h
index fbb3c87..3205972 100644
--- a/source/mathops/side/PatchSideDataOpsInteger.h
+++ b/source/mathops/side/PatchSideDataOpsInteger.h
@@ -52,7 +52,7 @@ public:
     */
    PatchSideDataOpsInteger();
 
-   virtual ~PatchSideDataOpsInteger<DIM>();
+   virtual ~PatchSideDataOpsInteger();
 
    /**
     * Return the number of data values for the side-centered data object
diff --git a/source/mathops/side/PatchSideDataOpsReal.h b/source/mathops/side/PatchSideDataOpsReal.h
index 3c44b26..0793f81 100644
--- a/source/mathops/side/PatchSideDataOpsReal.h
+++ b/source/mathops/side/PatchSideDataOpsReal.h
@@ -62,7 +62,7 @@ public:
     */
    PatchSideDataOpsReal();
 
-   virtual ~PatchSideDataOpsReal<DIM,TYPE>();
+   virtual ~PatchSideDataOpsReal();
 
    /**
     * Copy dst data to src data over given box.
diff --git a/source/mathops/templates/EmptyMathOpsX.C b/source/mathops/templates/EmptyMathOpsX.C
index 4d14944..40a8801 100644
--- a/source/mathops/templates/EmptyMathOpsX.C
+++ b/source/mathops/templates/EmptyMathOpsX.C
@@ -14,6 +14,12 @@
 namespace SAMRAI {
    namespace math {
       template<int DIM> class Empty {
+	 Empty() :
+	    something(0) 
+	 {
+	 }
+
+	 int something;
       };
 
       template class Empty< NDIM >;
diff --git a/source/mesh/clustering/BergerRigoutsos.h b/source/mesh/clustering/BergerRigoutsos.h
index 80133d7..9393860 100644
--- a/source/mesh/clustering/BergerRigoutsos.h
+++ b/source/mesh/clustering/BergerRigoutsos.h
@@ -74,7 +74,7 @@ public:
    /*!
     * Virtual destructor.
     */
-   virtual ~BergerRigoutsos<DIM>();
+   virtual ~BergerRigoutsos();
 
 
    /*!
diff --git a/source/mesh/clustering/BoxGeneratorStrategy.h b/source/mesh/clustering/BoxGeneratorStrategy.h
index 97168b0..c9a3980 100644
--- a/source/mesh/clustering/BoxGeneratorStrategy.h
+++ b/source/mesh/clustering/BoxGeneratorStrategy.h
@@ -41,7 +41,7 @@ public:
    /**
     * Virtual destructor.
     */
-   virtual ~BoxGeneratorStrategy<DIM>();
+   virtual ~BoxGeneratorStrategy();
 
    /**
     * Create list of boxes whose union covers all integer tags on the patch 
diff --git a/source/mesh/clustering/HistogramBox.h b/source/mesh/clustering/HistogramBox.h
index c99ce5e..48e47a3 100644
--- a/source/mesh/clustering/HistogramBox.h
+++ b/source/mesh/clustering/HistogramBox.h
@@ -69,7 +69,7 @@ public:
    /**
     * Destructor for the HistogramBox.
     */
-   ~HistogramBox<DIM>();
+   ~HistogramBox();
 
    /*!
     * Given histogram information in a box region, determine smallest
diff --git a/source/mesh/gridding/BaseGriddingAlgorithm.h b/source/mesh/gridding/BaseGriddingAlgorithm.h
index 404c3e6..7d63550 100644
--- a/source/mesh/gridding/BaseGriddingAlgorithm.h
+++ b/source/mesh/gridding/BaseGriddingAlgorithm.h
@@ -45,7 +45,7 @@ public:
    /*!
     * @brief Virtual destructor for BaseGriddingAlgorithm<DIM>.
     */
-   virtual ~BaseGriddingAlgorithm<DIM>();
+   virtual ~BaseGriddingAlgorithm();
 
    /*!
     * @brief Construct the coarsest level in a hierarchy (i.e., level 0).
diff --git a/source/mesh/gridding/GriddingAlgorithm.C b/source/mesh/gridding/GriddingAlgorithm.C
index 18cc32f..792d323 100644
--- a/source/mesh/gridding/GriddingAlgorithm.C
+++ b/source/mesh/gridding/GriddingAlgorithm.C
@@ -1215,6 +1215,10 @@ template<int DIM> void GriddingAlgorithm<DIM>::regridFinerLevel(
          hierarchy->makeNewPatchLevel(fine_level_number, ratio,
                                       fine_boxes, mapping);
 
+         if (d_check_overlapping_patches != 'i') {
+            checkOverlappingPatches( hierarchy->getPatchLevel(fine_level_number) );
+         }
+
          // "false" argument": const bool initial_time = false;
          d_tag_init_strategy->initializeLevelData(hierarchy,
                                                   fine_level_number,
@@ -2624,7 +2628,7 @@ template<int DIM> void GriddingAlgorithm<DIM>::getFromInput(
    }
 
    d_check_overlapping_patches =
-      db->getCharWithDefault( "check_overplapping_patches",
+      db->getCharWithDefault( "check_overlapping_patches",
                               d_check_overlapping_patches );
    if ( d_check_overlapping_patches != 'i' &&
         d_check_overlapping_patches != 'w' &&
diff --git a/source/mesh/gridding/GriddingAlgorithm.h b/source/mesh/gridding/GriddingAlgorithm.h
index 5c87e21..2862a4c 100644
--- a/source/mesh/gridding/GriddingAlgorithm.h
+++ b/source/mesh/gridding/GriddingAlgorithm.h
@@ -335,7 +335,7 @@ public:
    /*!
     * Virtual destructor for GriddingAlgorithm<DIM>.
     */
-   virtual ~GriddingAlgorithm<DIM>();
+   virtual ~GriddingAlgorithm();
 
    /*!
     * This routine will attempt to construct the coarsest level in an AMR
diff --git a/source/mesh/gridding/StandardTagAndInitStrategy.h b/source/mesh/gridding/StandardTagAndInitStrategy.h
index 2870650..0b56f26 100644
--- a/source/mesh/gridding/StandardTagAndInitStrategy.h
+++ b/source/mesh/gridding/StandardTagAndInitStrategy.h
@@ -69,7 +69,7 @@ public:
     * Empty destructor for 
     * StandardTagAndInitStrategy<DIM>.
     */
-   virtual ~StandardTagAndInitStrategy<DIM>();
+   virtual ~StandardTagAndInitStrategy();
 
    /**
     * Determine time increment to advance data on level. The 
diff --git a/source/mesh/gridding/StandardTagAndInitialize.C b/source/mesh/gridding/StandardTagAndInitialize.C
index 66d7b1d..34b0824 100644
--- a/source/mesh/gridding/StandardTagAndInitialize.C
+++ b/source/mesh/gridding/StandardTagAndInitialize.C
@@ -287,7 +287,7 @@ template<int DIM> void StandardTagAndInitialize<DIM>::tagCellsForRefinement(
    if (d_use_refine_boxes) {
 
       hier::BoxArray<DIM> refine_boxes;
-      getUserSuppliedRefineBoxes(refine_boxes, level_number, regrid_time); 
+      this->getUserSuppliedRefineBoxes(refine_boxes, level_number, regrid_time); 
 
       tbox::Pointer< hier::PatchLevel<DIM> > level = 
          hierarchy->getPatchLevel(level_number);
diff --git a/source/mesh/gridding/StandardTagAndInitialize.h b/source/mesh/gridding/StandardTagAndInitialize.h
index c5f5077..2e9a3e9 100644
--- a/source/mesh/gridding/StandardTagAndInitialize.h
+++ b/source/mesh/gridding/StandardTagAndInitialize.h
@@ -100,7 +100,7 @@ public:
    /*!
     * Virtual destructor for StandardTagAndInitialize<DIM>.
     */
-   virtual ~StandardTagAndInitialize<DIM>();
+   virtual ~StandardTagAndInitialize();
 
    /*!
     * Specifies whether the chosen method advances the solution data 
diff --git a/source/mesh/gridding/TagAndInitializeStrategy.h b/source/mesh/gridding/TagAndInitializeStrategy.h
index e11b909..5872cbb 100644
--- a/source/mesh/gridding/TagAndInitializeStrategy.h
+++ b/source/mesh/gridding/TagAndInitializeStrategy.h
@@ -123,7 +123,7 @@ public:
    /*!
     * Empty destructor for TagAndInitializeStrategy<DIM>.
     */
-   virtual ~TagAndInitializeStrategy<DIM>();
+   virtual ~TagAndInitializeStrategy();
 
    /*!
     * Return user supplied set of refine boxes for specified level number
diff --git a/source/mesh/load_balance/LoadBalanceStrategy.h b/source/mesh/load_balance/LoadBalanceStrategy.h
index 80c4c7d..4cbeaf0 100644
--- a/source/mesh/load_balance/LoadBalanceStrategy.h
+++ b/source/mesh/load_balance/LoadBalanceStrategy.h
@@ -46,7 +46,7 @@ public:
    /*!
     * This virtual destructor does nothing interesting.
     */
-   virtual ~LoadBalanceStrategy<DIM>();
+   virtual ~LoadBalanceStrategy();
 
    /*!
     * Indicate whether load balancing procedure for given level depends on
diff --git a/source/mesh/load_balance/LoadBalancer.h b/source/mesh/load_balance/LoadBalancer.h
index 5251fb2..81ddcd1 100644
--- a/source/mesh/load_balance/LoadBalancer.h
+++ b/source/mesh/load_balance/LoadBalancer.h
@@ -178,7 +178,7 @@ public:
    /*!
     * The virtual destructor releases all internal storage.
     */
-   virtual ~LoadBalancer<DIM>();
+   virtual ~LoadBalancer();
 
    /*!
     * Set the max workload factor for either the specified level or all
diff --git a/source/mesh/multiblock/MultiblockGriddingAlgorithm.h b/source/mesh/multiblock/MultiblockGriddingAlgorithm.h
index 8efc731..b779f36 100644
--- a/source/mesh/multiblock/MultiblockGriddingAlgorithm.h
+++ b/source/mesh/multiblock/MultiblockGriddingAlgorithm.h
@@ -297,7 +297,7 @@ public:
    /*!
     * Virtual destructor for MultiblockGriddingAlgorithm<DIM>.
     */
-   virtual ~MultiblockGriddingAlgorithm<DIM>();
+   virtual ~MultiblockGriddingAlgorithm();
 
    /*!
     * @brief Create level 0 for a hierarchy
diff --git a/source/mesh/multiblock/MultiblockGriddingTagger.h b/source/mesh/multiblock/MultiblockGriddingTagger.h
index 2789156..8f9da14 100644
--- a/source/mesh/multiblock/MultiblockGriddingTagger.h
+++ b/source/mesh/multiblock/MultiblockGriddingTagger.h
@@ -54,7 +54,7 @@ public:
    /*!
     * @brief The virtual destructor does nothing interesting.
     */
-   virtual ~MultiblockGriddingTagger<DIM>();
+   virtual ~MultiblockGriddingTagger();
 
    /*!
     * @brief Set the patch data index for tag data.  This routine
diff --git a/source/mesh/templates/EmptyMeshX.C b/source/mesh/templates/EmptyMeshX.C
index f9f513c..d065dff 100644
--- a/source/mesh/templates/EmptyMeshX.C
+++ b/source/mesh/templates/EmptyMeshX.C
@@ -14,6 +14,12 @@
 namespace SAMRAI {
    namespace mesh {
       template<int DIM> class Empty {
+	 Empty() :
+	    something(0) 
+	 {
+	 }
+
+	 int something;
       };
 
       template class Empty< NDIM >;
diff --git a/source/patchdata/array/ArrayData.C b/source/patchdata/array/ArrayData.C
index ebcbb2a..c6625fd 100644
--- a/source/patchdata/array/ArrayData.C
+++ b/source/patchdata/array/ArrayData.C
@@ -167,11 +167,7 @@ void ArrayData<DIM,TYPE>::copy(const ArrayData<DIM,TYPE>& src,
 
       TYPE* const dst_ptr = d_array.getPointer();
       const TYPE* const src_ptr = src.d_array.getPointer();
-      const int n = d_offset * d_depth;
-      for (int i = 0; i < n; i++) {
-         copyop(dst_ptr[i], src_ptr[i]);
-      }
-
+      copyop(dst_ptr, src_ptr, d_offset * d_depth);
    } else {
 
       const hier::Box<DIM> copybox = box * d_box * src.d_box;
@@ -303,9 +299,7 @@ void ArrayData<DIM,TYPE>::copyDepth(int dst_depth,
 
      TYPE* const dst_ptr_d = dst_ptr + dst_depth*d_offset;
      const TYPE* const src_ptr_d = src_ptr + src_depth*d_offset;
-      for (int i = 0; i < d_offset; i++) {
-         copyop(dst_ptr_d[i], src_ptr_d[i]);
-      }
+     copyop(dst_ptr_d, src_ptr_d, d_offset);
 
    } else {
 
@@ -364,11 +358,7 @@ void ArrayData<DIM,TYPE>::sum(const ArrayData<DIM,TYPE>& src,
 
       TYPE* const dst_ptr = d_array.getPointer();
       const TYPE* const src_ptr = src.d_array.getPointer();
-      const int n = d_offset * d_depth;
-      for (int i = 0; i < n; i++) {
-         sumop(dst_ptr[i], src_ptr[i]);
-      }
-
+      sumop(dst_ptr, src_ptr, d_offset * d_depth);
    } else {
 
       const hier::Box<DIM> copybox = box * d_box * src.d_box;
diff --git a/source/patchdata/array/ArrayData.I b/source/patchdata/array/ArrayData.I
index eac5c18..d421672 100644
--- a/source/patchdata/array/ArrayData.I
+++ b/source/patchdata/array/ArrayData.I
@@ -124,11 +124,11 @@ int ArrayData<DIM,TYPE>::getDataStreamSize(
 template<int DIM, class TYPE> inline
 bool ArrayData<DIM,TYPE>::canEstimateStreamSizeFromBox()
 {
-  if ( ( typeid(TYPE) == typeid(bool) ) |
-       ( typeid(TYPE) == typeid(char) ) |
-       ( typeid(TYPE) == typeid(double) ) |
-       ( typeid(TYPE) == typeid(float) ) |
-       ( typeid(TYPE) == typeid(int) ) |
+  if ( ( typeid(TYPE) == typeid(bool) ) ||
+       ( typeid(TYPE) == typeid(char) ) ||
+       ( typeid(TYPE) == typeid(double) ) ||
+       ( typeid(TYPE) == typeid(float) ) ||
+       ( typeid(TYPE) == typeid(int) ) ||
        ( typeid(TYPE) == typeid(dcomplex) ) ) {
       return true;
    } else {
diff --git a/source/patchdata/array/ArrayDataIterator.h b/source/patchdata/array/ArrayDataIterator.h
index 34b9102..331cf10 100644
--- a/source/patchdata/array/ArrayDataIterator.h
+++ b/source/patchdata/array/ArrayDataIterator.h
@@ -67,7 +67,7 @@ public:
    /**
     * Destructor for the array data iterator.
     */
-   ~ArrayDataIterator<DIM>();
+   ~ArrayDataIterator();
 
    /**
     * Extract the index corresponding to the iterator position in the box.
diff --git a/source/patchdata/array/ArrayDataOperationUtilities.C b/source/patchdata/array/ArrayDataOperationUtilities.C
index 63f3178..a780177 100644
--- a/source/patchdata/array/ArrayDataOperationUtilities.C
+++ b/source/patchdata/array/ArrayDataOperationUtilities.C
@@ -104,10 +104,7 @@ void ArrayDataOperationUtilities<DIM, TYPE, OP>::doArrayDataOperationOnBox(
        */
 
       for (int nb = 0; nb < num_d0_blocks; nb++) {
-
-         for (int i0 = 0; i0 < box_w[0]; i0++) {
-            op(dst_ptr[dst_counter+i0], src_ptr[src_counter+i0]); 
-         }
+         op(dst_ptr + dst_counter, src_ptr + src_counter, box_w[0]);
          int dim_jump = 0;
 
          /*
@@ -238,10 +235,7 @@ void ArrayDataOperationUtilities<DIM, TYPE, OP>::doArrayDataBufferOperationOnBox
        */
 
       for (int nb = 0; nb < num_d0_blocks; nb++) {
-
-         for (int i0 = 0; i0 < box_w[0]; i0++) {
-            op(dst_ptr[dst_counter+i0], src_ptr[src_counter+i0]); 
-         }
+         op(dst_ptr + dst_counter, src_ptr + src_counter, box_w[0]);
          int dim_jump = 0;
 
          /*
diff --git a/source/patchdata/array/CopyOperation.I b/source/patchdata/array/CopyOperation.I
index 482004a..224cb5f 100644
--- a/source/patchdata/array/CopyOperation.I
+++ b/source/patchdata/array/CopyOperation.I
@@ -7,6 +7,8 @@
 // Description:	Copy operation on single array data elements templated on data type
 //
 
+#include <algorithm>
+
 #ifdef DEBUG_NO_INLINE
 #define inline
 #endif
@@ -29,9 +31,13 @@ CopyOperation<TYPE>::~CopyOperation()
 }
 
 template <class TYPE> inline
-void CopyOperation<TYPE>::operator()(TYPE& vdst, const TYPE& vsrc) const
+void CopyOperation<TYPE>::operator()(TYPE* vdst, const TYPE* vsrc, const int size) const
 {
-   vdst = vsrc;
+   // This assumes vdst and vsrc do not overlap, which is reasonable for SAMRAI: there's
+   // no situation in which we would copy data from one part of a patch into another
+   // overlapping part of the same patch.
+   if (vsrc != vdst)
+      std::copy(vsrc, vsrc + size, vdst);
 }
 
 #ifdef DEBUG_NO_INLINE
diff --git a/source/patchdata/array/CopyOperation.h b/source/patchdata/array/CopyOperation.h
index 7f3c073..b2fa4b7 100644
--- a/source/patchdata/array/CopyOperation.h
+++ b/source/patchdata/array/CopyOperation.h
@@ -37,7 +37,7 @@ public:
    /*!
     * The operator copies the source value to the destination.
     */
-   void operator()(TYPE& vdst, const TYPE& vsrc) const;
+   void operator()(TYPE* vdst, const TYPE* vsrc, const int size) const;
 
 private:
    CopyOperation(const CopyOperation<TYPE>&);	// not implemented
diff --git a/source/patchdata/array/SumOperation.I b/source/patchdata/array/SumOperation.I
index 76c77ab..6240c07 100644
--- a/source/patchdata/array/SumOperation.I
+++ b/source/patchdata/array/SumOperation.I
@@ -29,13 +29,10 @@ SumOperation<TYPE>::~SumOperation()
 }
 
 template <class TYPE> inline
-void SumOperation<TYPE>::operator()(TYPE& vdst, const TYPE& vsrc) const
+void SumOperation<TYPE>::operator()(TYPE* vdst, const TYPE* vsrc, const int size) const
 {
-// Disable Intel warning about conversions
-#ifdef __INTEL_COMPILER
-#pragma warning (disable:810)
-#endif
-   vdst += vsrc;
+   for (int i = 0; i < size; ++i)
+      vdst[i] += vsrc[i];
 }
 
 #ifdef DEBUG_NO_INLINE
diff --git a/source/patchdata/array/SumOperation.h b/source/patchdata/array/SumOperation.h
index 182ad66..7497ea5 100644
--- a/source/patchdata/array/SumOperation.h
+++ b/source/patchdata/array/SumOperation.h
@@ -37,7 +37,7 @@ public:
    /*!
     * The operator adds the source value to the destination.
     */
-   void operator()(TYPE& vdst, const TYPE& vsrc) const;
+   void operator()(TYPE* vdst, const TYPE* vsrc, const int size) const;
 
 private:
    SumOperation(const SumOperation<TYPE>&);   // not implemented
diff --git a/source/patchdata/boxgeometry/CellGeometry.h b/source/patchdata/boxgeometry/CellGeometry.h
index e4aa7bd..10d1c16 100644
--- a/source/patchdata/boxgeometry/CellGeometry.h
+++ b/source/patchdata/boxgeometry/CellGeometry.h
@@ -59,7 +59,7 @@ public:
    /*!
     * @brief The virtual destructor does nothing interesting.
     */
-   virtual ~CellGeometry<DIM>();
+   virtual ~CellGeometry();
 
    /*!
     * @brief Compute the overlap in cell-centered index space between 
diff --git a/source/patchdata/boxgeometry/CellOverlap.h b/source/patchdata/boxgeometry/CellOverlap.h
index 32103af..84d8625 100644
--- a/source/patchdata/boxgeometry/CellOverlap.h
+++ b/source/patchdata/boxgeometry/CellOverlap.h
@@ -48,7 +48,7 @@ public:
     * The virtual destructor does nothing interesting except deallocate
     * box data.
     */
-   virtual ~CellOverlap<DIM>();
+   virtual ~CellOverlap();
 
    /**
     * Return whether there is an empty intersection between the two
diff --git a/source/patchdata/boxgeometry/EdgeGeometry.h b/source/patchdata/boxgeometry/EdgeGeometry.h
index cf376e7..485cea9 100644
--- a/source/patchdata/boxgeometry/EdgeGeometry.h
+++ b/source/patchdata/boxgeometry/EdgeGeometry.h
@@ -62,7 +62,7 @@ public:
    /*!
     * @brief The virtual destructor does nothing interesting.
     */
-   virtual ~EdgeGeometry<DIM>();
+   virtual ~EdgeGeometry();
 
    /*!
     * @brief Compute the overlap in edge-centered index space between
diff --git a/source/patchdata/boxgeometry/EdgeOverlap.h b/source/patchdata/boxgeometry/EdgeOverlap.h
index 51f1a7c..046ce51 100644
--- a/source/patchdata/boxgeometry/EdgeOverlap.h
+++ b/source/patchdata/boxgeometry/EdgeOverlap.h
@@ -45,7 +45,7 @@ public:
     * The virtual destructor does nothing interesting except deallocate
     * box data.
     */
-   virtual ~EdgeOverlap<DIM>();
+   virtual ~EdgeOverlap();
 
    /**
     * Return whether there is an empty intersection between the two
diff --git a/source/patchdata/boxgeometry/FaceGeometry.h b/source/patchdata/boxgeometry/FaceGeometry.h
index 9e3202f..9719f00 100644
--- a/source/patchdata/boxgeometry/FaceGeometry.h
+++ b/source/patchdata/boxgeometry/FaceGeometry.h
@@ -64,7 +64,7 @@ public:
    /*!
     * @brief The virtual destructor does nothing interesting.
     */
-   virtual ~FaceGeometry<DIM>();
+   virtual ~FaceGeometry();
 
    /*!
     * @brief Compute the overlap in face-centered index space between
diff --git a/source/patchdata/boxgeometry/FaceOverlap.h b/source/patchdata/boxgeometry/FaceOverlap.h
index a696176..eb47bd3 100644
--- a/source/patchdata/boxgeometry/FaceOverlap.h
+++ b/source/patchdata/boxgeometry/FaceOverlap.h
@@ -45,7 +45,7 @@ public:
     * The virtual destructor does nothing interesting except deallocate
     * box data.
     */
-   virtual ~FaceOverlap<DIM>();
+   virtual ~FaceOverlap();
 
    /**
     * Return whether there is an empty intersection between the two
diff --git a/source/patchdata/boxgeometry/NodeGeometry.h b/source/patchdata/boxgeometry/NodeGeometry.h
index 860bbce..a125000 100644
--- a/source/patchdata/boxgeometry/NodeGeometry.h
+++ b/source/patchdata/boxgeometry/NodeGeometry.h
@@ -60,7 +60,7 @@ public:
    /*!
     * @brief The virtual destructor does nothing interesting.
     */
-   virtual ~NodeGeometry<DIM>();
+   virtual ~NodeGeometry();
 
    /*!
     * @brief Compute the overlap in node-centered index space between
diff --git a/source/patchdata/boxgeometry/NodeOverlap.h b/source/patchdata/boxgeometry/NodeOverlap.h
index 56df09f..fabef2f 100644
--- a/source/patchdata/boxgeometry/NodeOverlap.h
+++ b/source/patchdata/boxgeometry/NodeOverlap.h
@@ -45,7 +45,7 @@ public:
     * The virtual destructor does nothing interesting except deallocate
     * box data.
     */
-   virtual ~NodeOverlap<DIM>();
+   virtual ~NodeOverlap();
 
    /**
     * Return whether there is an empty intersection between the two
diff --git a/source/patchdata/boxgeometry/OuteredgeGeometry.h b/source/patchdata/boxgeometry/OuteredgeGeometry.h
index e069d03..1f51116 100644
--- a/source/patchdata/boxgeometry/OuteredgeGeometry.h
+++ b/source/patchdata/boxgeometry/OuteredgeGeometry.h
@@ -70,7 +70,7 @@ public:
    /*!
     * @brief The virtual destructor does nothing interesting.
     */
-   virtual ~OuteredgeGeometry<DIM>();
+   virtual ~OuteredgeGeometry();
 
    /*!
     * @brief Compute the overlap in edge-centered index space on the
diff --git a/source/patchdata/boxgeometry/OuterfaceGeometry.h b/source/patchdata/boxgeometry/OuterfaceGeometry.h
index 3720052..f8a05d5 100644
--- a/source/patchdata/boxgeometry/OuterfaceGeometry.h
+++ b/source/patchdata/boxgeometry/OuterfaceGeometry.h
@@ -58,7 +58,7 @@ public:
    /*!
     * @brief The virtual destructor does nothing interesting.
     */
-   virtual ~OuterfaceGeometry<DIM>();
+   virtual ~OuterfaceGeometry();
  
    /*!
     * @brief Compute the overlap in face-centered index space on the
diff --git a/source/patchdata/boxgeometry/OuternodeGeometry.h b/source/patchdata/boxgeometry/OuternodeGeometry.h
index 2c3630c..6b8affb 100644
--- a/source/patchdata/boxgeometry/OuternodeGeometry.h
+++ b/source/patchdata/boxgeometry/OuternodeGeometry.h
@@ -58,7 +58,7 @@ public:
    /*!
     * @brief The virtual destructor does nothing interesting.
     */
-   virtual ~OuternodeGeometry<DIM>();
+   virtual ~OuternodeGeometry();
  
    /*!
     * @brief Compute the overlap in node-centered index space on the
diff --git a/source/patchdata/boxgeometry/OutersideGeometry.h b/source/patchdata/boxgeometry/OutersideGeometry.h
index ae6df2a..d5f9d42 100644
--- a/source/patchdata/boxgeometry/OutersideGeometry.h
+++ b/source/patchdata/boxgeometry/OutersideGeometry.h
@@ -58,7 +58,7 @@ public:
    /*!
     * @brief The virtual destructor does nothing interesting.
     */
-   virtual ~OutersideGeometry<DIM>();
+   virtual ~OutersideGeometry();
 
    /*!
     * @brief Compute the overlap in side-centered index space on the
diff --git a/source/patchdata/boxgeometry/SideGeometry.h b/source/patchdata/boxgeometry/SideGeometry.h
index 85e4ccd..ceba9e8 100644
--- a/source/patchdata/boxgeometry/SideGeometry.h
+++ b/source/patchdata/boxgeometry/SideGeometry.h
@@ -64,7 +64,7 @@ public:
    /*!
     * @brief The virtual destructor does nothing interesting.
     */
-   virtual ~SideGeometry<DIM>();
+   virtual ~SideGeometry();
 
    /*!
     * @brief Compute the overlap in side-centered index space between
diff --git a/source/patchdata/boxgeometry/SideOverlap.h b/source/patchdata/boxgeometry/SideOverlap.h
index f129dc5..57854d3 100644
--- a/source/patchdata/boxgeometry/SideOverlap.h
+++ b/source/patchdata/boxgeometry/SideOverlap.h
@@ -45,7 +45,7 @@ public:
     * The virtual destructor does nothing interesting except deallocate
     * box data.
     */
-   virtual ~SideOverlap<DIM>();
+   virtual ~SideOverlap();
 
    /**
     * Return whether there is an empty intersection between the two
diff --git a/source/patchdata/cell/CellData.h b/source/patchdata/cell/CellData.h
index 968e5b2..8b42bf0 100644
--- a/source/patchdata/cell/CellData.h
+++ b/source/patchdata/cell/CellData.h
@@ -110,7 +110,7 @@ public:
    /*!
     * @brief The virtual destructor for a cell data object.
     */
-   virtual ~CellData<DIM,TYPE>();
+   virtual ~CellData();
 
    /*!
     * @brief Return the depth (e.g., the number of components in each spatial
diff --git a/source/patchdata/cell/CellDataFactory.h b/source/patchdata/cell/CellDataFactory.h
index 421991d..5001725 100644
--- a/source/patchdata/cell/CellDataFactory.h
+++ b/source/patchdata/cell/CellDataFactory.h
@@ -54,7 +54,7 @@ public:
    /**
     * Virtual destructor for the cell data factory class.
     */
-   virtual ~CellDataFactory<DIM,TYPE>();
+   virtual ~CellDataFactory();
 
    /**
     * @brief Abstract virtual function to clone a patch data factory.
diff --git a/source/patchdata/cell/CellIndex.h b/source/patchdata/cell/CellIndex.h
index 7455900..c37d994 100644
--- a/source/patchdata/cell/CellIndex.h
+++ b/source/patchdata/cell/CellIndex.h
@@ -54,7 +54,7 @@ public:
    /**
     * The cell index destructor does nothing interesting.
     */
-   ~CellIndex<DIM>();
+   ~CellIndex();
 
    /**
     * Plus-equals operator for a cell index and an integer vector.
diff --git a/source/patchdata/cell/CellIterator.h b/source/patchdata/cell/CellIterator.h
index 6859915..5451254 100644
--- a/source/patchdata/cell/CellIterator.h
+++ b/source/patchdata/cell/CellIterator.h
@@ -67,7 +67,7 @@ public:
    /**
     * Destructor for the cell iterator.
     */
-   ~CellIterator<DIM>();
+   ~CellIterator();
 
    /**
     * Extract the cell index corresponding to the iterator position in the box.
diff --git a/source/patchdata/cell/CellVariable.h b/source/patchdata/cell/CellVariable.h
index b09a30c..3a7ff35 100644
--- a/source/patchdata/cell/CellVariable.h
+++ b/source/patchdata/cell/CellVariable.h
@@ -50,7 +50,7 @@ public:
    /*!
     * @brief Virtual destructor for cell variable objects.
     */
-   virtual ~CellVariable<DIM,TYPE>();
+   virtual ~CellVariable();
 
    /*!
     * @brief Return true indicating that cell data quantities will always 
diff --git a/source/patchdata/edge/EdgeData.h b/source/patchdata/edge/EdgeData.h
index 755aaa6..89bdb0c 100644
--- a/source/patchdata/edge/EdgeData.h
+++ b/source/patchdata/edge/EdgeData.h
@@ -129,7 +129,7 @@ public:
    /*!
     * @brief The virtual destructor for an edge data object.
     */
-   virtual ~EdgeData<DIM,TYPE>();
+   virtual ~EdgeData();
 
    /*!
     * @brief Return the depth (e.g., the number of components in each spatial
diff --git a/source/patchdata/edge/EdgeDataFactory.h b/source/patchdata/edge/EdgeDataFactory.h
index 7aa5540..0acbbf3 100644
--- a/source/patchdata/edge/EdgeDataFactory.h
+++ b/source/patchdata/edge/EdgeDataFactory.h
@@ -55,7 +55,7 @@ public:
    /**
     * Virtual destructor for the edge data factory class.
     */
-   virtual ~EdgeDataFactory<DIM,TYPE>();
+   virtual ~EdgeDataFactory();
 
    /**
     * @brief Abstract virtual function to clone a patch data factory.
diff --git a/source/patchdata/edge/EdgeIndex.h b/source/patchdata/edge/EdgeIndex.h
index a567946..5907dc7 100644
--- a/source/patchdata/edge/EdgeIndex.h
+++ b/source/patchdata/edge/EdgeIndex.h
@@ -60,7 +60,7 @@ public:
    /**
     * The edge index destructor does nothing interesting.
     */
-   ~EdgeIndex<DIM>();
+   ~EdgeIndex();
 
    /**
     * Get the axis for which this edge index is defined (X=0, Y=1, Z=2).
diff --git a/source/patchdata/edge/EdgeIterator.h b/source/patchdata/edge/EdgeIterator.h
index a748544..fcee9ec 100644
--- a/source/patchdata/edge/EdgeIterator.h
+++ b/source/patchdata/edge/EdgeIterator.h
@@ -67,7 +67,7 @@ public:
    /**
     * Destructor for the edge iterator.
     */
-   ~EdgeIterator<DIM>();
+   ~EdgeIterator();
 
    /**
     * Extract the edge index corresponding to the iterator position in the box.
diff --git a/source/patchdata/edge/EdgeVariable.h b/source/patchdata/edge/EdgeVariable.h
index fda956e..fa2031c 100644
--- a/source/patchdata/edge/EdgeVariable.h
+++ b/source/patchdata/edge/EdgeVariable.h
@@ -55,7 +55,7 @@ public:
    /*!
     * @brief Virtual destructor for edge variable objects.
     */
-   virtual ~EdgeVariable<DIM,TYPE>();
+   virtual ~EdgeVariable();
 
    /*!
     * @brief Return boolean indicating which edge data values (coarse
diff --git a/source/patchdata/face/FaceData.h b/source/patchdata/face/FaceData.h
index 39043df..d5b1916 100644
--- a/source/patchdata/face/FaceData.h
+++ b/source/patchdata/face/FaceData.h
@@ -131,7 +131,7 @@ public:
    /*!
     * @brief The virtual destructor for a face data object.
     */
-   virtual ~FaceData<DIM,TYPE>();
+   virtual ~FaceData();
 
    /*!
     * @brief Return the depth (e.g., the number of components in each spatial
diff --git a/source/patchdata/face/FaceDataFactory.h b/source/patchdata/face/FaceDataFactory.h
index fb56484..0f0dcd3 100644
--- a/source/patchdata/face/FaceDataFactory.h
+++ b/source/patchdata/face/FaceDataFactory.h
@@ -55,7 +55,7 @@ public:
    /**
     * Virtual destructor for the face data factory class.
     */
-   virtual ~FaceDataFactory<DIM,TYPE>();
+   virtual ~FaceDataFactory();
 
    /**
     * @brief Abstract virtual function to clone a patch data factory.
diff --git a/source/patchdata/face/FaceIndex.h b/source/patchdata/face/FaceIndex.h
index d2a3af6..a43e47d 100644
--- a/source/patchdata/face/FaceIndex.h
+++ b/source/patchdata/face/FaceIndex.h
@@ -59,7 +59,7 @@ public:
    /**
     * The face index destructor does nothing interesting.
     */
-   ~FaceIndex<DIM>();
+   ~FaceIndex();
 
    /**
     * Get the axis for which this face index is defined (X=0, Y=1, Z=2).
diff --git a/source/patchdata/face/FaceIterator.h b/source/patchdata/face/FaceIterator.h
index e9e5d5f..6d5110d 100644
--- a/source/patchdata/face/FaceIterator.h
+++ b/source/patchdata/face/FaceIterator.h
@@ -67,7 +67,7 @@ public:
    /**
     * Destructor for the face iterator.
     */
-   ~FaceIterator<DIM>();
+   ~FaceIterator();
 
    /**
     * Extract the face index corresponding to the iterator position in the box.
diff --git a/source/patchdata/face/FaceVariable.h b/source/patchdata/face/FaceVariable.h
index ebe1480..5f7ef54 100644
--- a/source/patchdata/face/FaceVariable.h
+++ b/source/patchdata/face/FaceVariable.h
@@ -62,7 +62,7 @@ public:
    /*!
     * @brief Virtual destructor for face variable objects.
     */
-   virtual ~FaceVariable<DIM,TYPE>();
+   virtual ~FaceVariable();
 
    /*!
     * @brief Return boolean indicating which face data values (coarse
diff --git a/source/patchdata/index/IndexData.I b/source/patchdata/index/IndexData.I
index 572a46e..e914729 100644
--- a/source/patchdata/index/IndexData.I
+++ b/source/patchdata/index/IndexData.I
@@ -117,6 +117,20 @@ const TYPE& IndexIterator<DIM,TYPE,BOX_GEOMETRY>::operator()() const
    return(*d_node->d_item);
 }
 
+template<int DIM, class TYPE, class BOX_GEOMETRY>
+inline
+TYPE& IndexIterator<DIM,TYPE,BOX_GEOMETRY>::getItem()
+{
+   return(*d_node->d_item);
+}
+
+template<int DIM, class TYPE, class BOX_GEOMETRY>
+inline
+const hier::Index<DIM>& IndexIterator<DIM,TYPE,BOX_GEOMETRY>::getIndex() const
+{
+    return(d_node->d_index);
+}
+
 template<int DIM, class TYPE, class BOX_GEOMETRY>
 inline
 IndexIterator<DIM,TYPE,BOX_GEOMETRY>::operator bool() const
diff --git a/source/patchdata/index/IndexData.h b/source/patchdata/index/IndexData.h
index 37b62fe..76b2d40 100644
--- a/source/patchdata/index/IndexData.h
+++ b/source/patchdata/index/IndexData.h
@@ -120,7 +120,7 @@ public:
    /**
     * The virtual destructor for an IndexData object.
     */
-   virtual ~IndexData<DIM,TYPE,BOX_GEOMETRY>();
+   virtual ~IndexData();
 
    /**
     * A fast copy between the source and destination.  All data is copied
@@ -390,7 +390,7 @@ public:
       IndexDataNode<DIM,TYPE,BOX_GEOMETRY> *n,
       IndexDataNode<DIM,TYPE,BOX_GEOMETRY> *p);
 
-   virtual ~IndexDataNode<DIM,TYPE,BOX_GEOMETRY>();
+   virtual ~IndexDataNode();
 
 private:
    hier::Index<DIM> d_index;
@@ -451,7 +451,7 @@ public:
    /**
     * Destructor for the index list iterator.
     */
-   ~IndexIterator<DIM,TYPE,BOX_GEOMETRY>();
+   ~IndexIterator();
 
    /**
     * Return the current item in the irregular index set.
@@ -577,7 +577,7 @@ public:
    /**
     * Destructor for the index list iterator.
     */
-   ~ConstIndexIterator<DIM,TYPE,BOX_GEOMETRY>();
+   ~ConstIndexIterator();
 
    /**
     * Return the current item in the irregular index set.
diff --git a/source/patchdata/index/IndexDataFactory.h b/source/patchdata/index/IndexDataFactory.h
index 151208f..9fdb4d4 100644
--- a/source/patchdata/index/IndexDataFactory.h
+++ b/source/patchdata/index/IndexDataFactory.h
@@ -51,7 +51,7 @@ public:
    /**
     * Virtual destructor for the irregular data factory class.
     */
-   virtual ~IndexDataFactory<DIM,TYPE,BOX_GEOMETRY>();
+   virtual ~IndexDataFactory();
 
    /**
     * @brief Abstract virtual function to clone a patch data factory.
diff --git a/source/patchdata/index/IndexVariable.h b/source/patchdata/index/IndexVariable.h
index 81098bf..c89a911 100644
--- a/source/patchdata/index/IndexVariable.h
+++ b/source/patchdata/index/IndexVariable.h
@@ -54,7 +54,7 @@ public:
    /**
     * Virtual destructor for index variable objects.
     */
-   virtual ~IndexVariable<DIM,TYPE,BOX_GEOMETRY>();
+   virtual ~IndexVariable();
 
    /**
     * Return true so that the index data quantities will always be treated as cell-
diff --git a/source/patchdata/multiblock/MBDataUtilities.h b/source/patchdata/multiblock/MBDataUtilities.h
index 9887ec4..1685e77 100644
--- a/source/patchdata/multiblock/MBDataUtilities.h
+++ b/source/patchdata/multiblock/MBDataUtilities.h
@@ -45,7 +45,7 @@ public:
     */
    MBDataUtilities();
 
-   virtual ~MBDataUtilities<DIM,TYPE>();
+   virtual ~MBDataUtilities();
 
    /*!
     * @brief Translate and copy cell data from src to dst according the shift
diff --git a/source/patchdata/multiblock/MultiblockCellDataTranslator.h b/source/patchdata/multiblock/MultiblockCellDataTranslator.h
index 0d389da..61e9669 100644
--- a/source/patchdata/multiblock/MultiblockCellDataTranslator.h
+++ b/source/patchdata/multiblock/MultiblockCellDataTranslator.h
@@ -33,7 +33,7 @@ public:
    /*!
     * @brief The virtual destructor does nothing interesting.
     */
-   virtual ~MultiblockCellDataTranslator<DIM,TYPE>();
+   virtual ~MultiblockCellDataTranslator();
 
    virtual void translateAndCopyData(
       hier::Patch<DIM>& dst_patch,
diff --git a/source/patchdata/multiblock/MultiblockEdgeDataTranslator.h b/source/patchdata/multiblock/MultiblockEdgeDataTranslator.h
index 38a1abe..25ac43a 100644
--- a/source/patchdata/multiblock/MultiblockEdgeDataTranslator.h
+++ b/source/patchdata/multiblock/MultiblockEdgeDataTranslator.h
@@ -34,7 +34,7 @@ public:
    /*!
     * @brief The virtual destructor does nothing interesting.
     */
-   virtual ~MultiblockEdgeDataTranslator<DIM,TYPE>();
+   virtual ~MultiblockEdgeDataTranslator();
 
    virtual void translateAndCopyData(
       hier::Patch<DIM>& dst_patch,
diff --git a/source/patchdata/multiblock/MultiblockFaceDataTranslator.h b/source/patchdata/multiblock/MultiblockFaceDataTranslator.h
index 289b20c..be67671 100644
--- a/source/patchdata/multiblock/MultiblockFaceDataTranslator.h
+++ b/source/patchdata/multiblock/MultiblockFaceDataTranslator.h
@@ -34,7 +34,7 @@ public:
    /*!
     * @brief The virtual destructor does nothing interesting.
     */
-   virtual ~MultiblockFaceDataTranslator<DIM,TYPE>();
+   virtual ~MultiblockFaceDataTranslator();
 
    virtual void translateAndCopyData(
       hier::Patch<DIM>& dst_patch,
diff --git a/source/patchdata/multiblock/MultiblockNodeDataTranslator.h b/source/patchdata/multiblock/MultiblockNodeDataTranslator.h
index 0a6f2f6..7093e86 100644
--- a/source/patchdata/multiblock/MultiblockNodeDataTranslator.h
+++ b/source/patchdata/multiblock/MultiblockNodeDataTranslator.h
@@ -33,7 +33,7 @@ public:
    /*!
     * @brief The virtual destructor does nothing interesting.
     */
-   virtual ~MultiblockNodeDataTranslator<DIM,TYPE>();
+   virtual ~MultiblockNodeDataTranslator();
 
    virtual void translateAndCopyData(
       hier::Patch<DIM>& dst_patch,
diff --git a/source/patchdata/multiblock/MultiblockSideDataTranslator.h b/source/patchdata/multiblock/MultiblockSideDataTranslator.h
index e44f3c3..7852b24 100644
--- a/source/patchdata/multiblock/MultiblockSideDataTranslator.h
+++ b/source/patchdata/multiblock/MultiblockSideDataTranslator.h
@@ -34,7 +34,7 @@ public:
    /*!
     * @brief The virtual destructor does nothing interesting.
     */
-   virtual ~MultiblockSideDataTranslator<DIM,TYPE>();
+   virtual ~MultiblockSideDataTranslator();
 
    virtual void translateAndCopyData(
       hier::Patch<DIM>& dst_patch,
diff --git a/source/patchdata/node/NodeData.h b/source/patchdata/node/NodeData.h
index 8a11e83..ef49c89 100644
--- a/source/patchdata/node/NodeData.h
+++ b/source/patchdata/node/NodeData.h
@@ -111,7 +111,7 @@ public:
    /*!
     * @brief The virtual destructor for a node data object.
     */
-   virtual ~NodeData<DIM,TYPE>();
+   virtual ~NodeData();
 
    /*!
     * @brief Return the depth (e.g., the number of components in each spatial
diff --git a/source/patchdata/node/NodeDataFactory.h b/source/patchdata/node/NodeDataFactory.h
index f625f71..2dd9185 100644
--- a/source/patchdata/node/NodeDataFactory.h
+++ b/source/patchdata/node/NodeDataFactory.h
@@ -55,7 +55,7 @@ public:
    /**
     * Virtual destructor for the node data factory class.
     */
-   virtual ~NodeDataFactory<DIM,TYPE>();
+   virtual ~NodeDataFactory();
 
    /**
     * @brief Abstract virtual function to clone a patch data factory.
diff --git a/source/patchdata/node/NodeIndex.h b/source/patchdata/node/NodeIndex.h
index 4dceb6d..b35ed6b 100644
--- a/source/patchdata/node/NodeIndex.h
+++ b/source/patchdata/node/NodeIndex.h
@@ -85,7 +85,7 @@ public:
    /**
     * The node index destructor does nothing interesting.
     */
-   ~NodeIndex<DIM>();
+   ~NodeIndex();
 
    /**
     * Plus-equals operator for a node index and an integer vector.
diff --git a/source/patchdata/node/NodeIterator.h b/source/patchdata/node/NodeIterator.h
index 040a2fd..2aad1fd 100644
--- a/source/patchdata/node/NodeIterator.h
+++ b/source/patchdata/node/NodeIterator.h
@@ -67,7 +67,7 @@ public:
    /**
     * Destructor for the node iterator.
     */
-   ~NodeIterator<DIM>();
+   ~NodeIterator();
 
    /**
     * Extract the node index corresponding to the iterator position in the box.
diff --git a/source/patchdata/node/NodeVariable.h b/source/patchdata/node/NodeVariable.h
index b92a50d..0d4a3a9 100644
--- a/source/patchdata/node/NodeVariable.h
+++ b/source/patchdata/node/NodeVariable.h
@@ -55,7 +55,7 @@ public:
    /*!
     * @brief Virtual destructor for node variable objects.
     */
-   virtual ~NodeVariable<DIM,TYPE>();
+   virtual ~NodeVariable();
 
    /*!
     * @brief Return boolean indicating which node data values (coarse
diff --git a/source/patchdata/operators/constant/cell/CellComplexConstantRefine.h b/source/patchdata/operators/constant/cell/CellComplexConstantRefine.h
index 9732f31..9963522 100644
--- a/source/patchdata/operators/constant/cell/CellComplexConstantRefine.h
+++ b/source/patchdata/operators/constant/cell/CellComplexConstantRefine.h
@@ -49,7 +49,7 @@ public:
    /**
     * Uninteresting virtual destructor.
     */
-   virtual ~CellComplexConstantRefine<DIM>();
+   virtual ~CellComplexConstantRefine();
 
    /**
     * Return true if the variable and name string match cell-centered 
diff --git a/source/patchdata/operators/constant/cell/CellDoubleConstantRefine.h b/source/patchdata/operators/constant/cell/CellDoubleConstantRefine.h
index 59d959f..8f2cb34 100644
--- a/source/patchdata/operators/constant/cell/CellDoubleConstantRefine.h
+++ b/source/patchdata/operators/constant/cell/CellDoubleConstantRefine.h
@@ -49,7 +49,7 @@ public:
    /**
     * Uninteresting virtual destructor.
     */
-   virtual ~CellDoubleConstantRefine<DIM>();
+   virtual ~CellDoubleConstantRefine();
 
    /**
     * Return true if the variable and name string match cell-centered 
diff --git a/source/patchdata/operators/constant/cell/CellFloatConstantRefine.h b/source/patchdata/operators/constant/cell/CellFloatConstantRefine.h
index a446b49..74907d6 100644
--- a/source/patchdata/operators/constant/cell/CellFloatConstantRefine.h
+++ b/source/patchdata/operators/constant/cell/CellFloatConstantRefine.h
@@ -49,7 +49,7 @@ public:
    /**
     * Uninteresting virtual destructor.
     */
-   virtual ~CellFloatConstantRefine<DIM>();
+   virtual ~CellFloatConstantRefine();
 
    /**
     * Return true if the variable and name string match cell-centered 
diff --git a/source/patchdata/operators/constant/cell/CellIntegerConstantRefine.h b/source/patchdata/operators/constant/cell/CellIntegerConstantRefine.h
index 8740908..16c8b6a 100644
--- a/source/patchdata/operators/constant/cell/CellIntegerConstantRefine.h
+++ b/source/patchdata/operators/constant/cell/CellIntegerConstantRefine.h
@@ -49,7 +49,7 @@ public:
    /**
     * Uninteresting virtual destructor.
     */
-   virtual ~CellIntegerConstantRefine<DIM>();
+   virtual ~CellIntegerConstantRefine();
 
    /**
     * Return true if the variable and name string match cell-centered 
diff --git a/source/patchdata/operators/constant/edge/EdgeComplexConstantRefine.h b/source/patchdata/operators/constant/edge/EdgeComplexConstantRefine.h
index 1c3956e..9982558 100644
--- a/source/patchdata/operators/constant/edge/EdgeComplexConstantRefine.h
+++ b/source/patchdata/operators/constant/edge/EdgeComplexConstantRefine.h
@@ -49,7 +49,7 @@ public:
    /**
     * Uninteresting virtual destructor.
     */
-   virtual ~EdgeComplexConstantRefine<DIM>();
+   virtual ~EdgeComplexConstantRefine();
 
    /**
     * Return true if the variable and name string match edge-centered 
diff --git a/source/patchdata/operators/constant/edge/EdgeDoubleConstantRefine.h b/source/patchdata/operators/constant/edge/EdgeDoubleConstantRefine.h
index a3e536b..a7584ec 100644
--- a/source/patchdata/operators/constant/edge/EdgeDoubleConstantRefine.h
+++ b/source/patchdata/operators/constant/edge/EdgeDoubleConstantRefine.h
@@ -49,7 +49,7 @@ public:
    /**
     * Uninteresting virtual destructor.
     */
-   virtual ~EdgeDoubleConstantRefine<DIM>();
+   virtual ~EdgeDoubleConstantRefine();
 
    /**
     * Return true if the variable and name string match edge-centered 
diff --git a/source/patchdata/operators/constant/edge/EdgeFloatConstantRefine.h b/source/patchdata/operators/constant/edge/EdgeFloatConstantRefine.h
index 0256125..14c75d0 100644
--- a/source/patchdata/operators/constant/edge/EdgeFloatConstantRefine.h
+++ b/source/patchdata/operators/constant/edge/EdgeFloatConstantRefine.h
@@ -49,7 +49,7 @@ public:
    /**
     * Uninteresting virtual destructor.
     */
-   virtual ~EdgeFloatConstantRefine<DIM>();
+   virtual ~EdgeFloatConstantRefine();
 
    /**
     * Return true if the variable and name string match edge-centered 
diff --git a/source/patchdata/operators/constant/edge/EdgeIntegerConstantRefine.h b/source/patchdata/operators/constant/edge/EdgeIntegerConstantRefine.h
index ab365e9..bdf124f 100644
--- a/source/patchdata/operators/constant/edge/EdgeIntegerConstantRefine.h
+++ b/source/patchdata/operators/constant/edge/EdgeIntegerConstantRefine.h
@@ -49,7 +49,7 @@ public:
    /**
     * Uninteresting virtual destructor.
     */
-   virtual ~EdgeIntegerConstantRefine<DIM>();
+   virtual ~EdgeIntegerConstantRefine();
 
    /**
     * Return true if the variable and name string match edge-centered 
diff --git a/source/patchdata/operators/constant/face/FaceComplexConstantRefine.h b/source/patchdata/operators/constant/face/FaceComplexConstantRefine.h
index 1e69208..f020972 100644
--- a/source/patchdata/operators/constant/face/FaceComplexConstantRefine.h
+++ b/source/patchdata/operators/constant/face/FaceComplexConstantRefine.h
@@ -49,7 +49,7 @@ public:
    /**
     * Uninteresting virtual destructor.
     */
-   virtual ~FaceComplexConstantRefine<DIM>();
+   virtual ~FaceComplexConstantRefine();
 
    /**
     * Return true if the variable and name string match face-centered 
diff --git a/source/patchdata/operators/constant/face/FaceDoubleConstantRefine.h b/source/patchdata/operators/constant/face/FaceDoubleConstantRefine.h
index e6c1b68..275fd78 100644
--- a/source/patchdata/operators/constant/face/FaceDoubleConstantRefine.h
+++ b/source/patchdata/operators/constant/face/FaceDoubleConstantRefine.h
@@ -49,7 +49,7 @@ public:
    /**
     * Uninteresting virtual destructor.
     */
-   virtual ~FaceDoubleConstantRefine<DIM>();
+   virtual ~FaceDoubleConstantRefine();
 
    /**
     * Return true if the variable and name string match face-centered 
diff --git a/source/patchdata/operators/constant/face/FaceFloatConstantRefine.h b/source/patchdata/operators/constant/face/FaceFloatConstantRefine.h
index b0296ff..8465a67 100644
--- a/source/patchdata/operators/constant/face/FaceFloatConstantRefine.h
+++ b/source/patchdata/operators/constant/face/FaceFloatConstantRefine.h
@@ -49,7 +49,7 @@ public:
    /**
     * Uninteresting virtual destructor.
     */
-   virtual ~FaceFloatConstantRefine<DIM>();
+   virtual ~FaceFloatConstantRefine();
 
    /**
     * Return true if the variable and name string match face-centered 
diff --git a/source/patchdata/operators/constant/face/FaceIntegerConstantRefine.h b/source/patchdata/operators/constant/face/FaceIntegerConstantRefine.h
index 4a4d05e..8d203f2 100644
--- a/source/patchdata/operators/constant/face/FaceIntegerConstantRefine.h
+++ b/source/patchdata/operators/constant/face/FaceIntegerConstantRefine.h
@@ -49,7 +49,7 @@ public:
    /**
     * Uninteresting virtual destructor.
     */
-   virtual ~FaceIntegerConstantRefine<DIM>();
+   virtual ~FaceIntegerConstantRefine();
 
    /**
     * Return true if the variable and name string match face-centered 
diff --git a/source/patchdata/operators/constant/node/NodeComplexInjection.h b/source/patchdata/operators/constant/node/NodeComplexInjection.h
index 32df1a0..e2f4221 100644
--- a/source/patchdata/operators/constant/node/NodeComplexInjection.h
+++ b/source/patchdata/operators/constant/node/NodeComplexInjection.h
@@ -50,7 +50,7 @@ public:
    /**
     * Uninteresting virtual destructor.
     */
-   virtual ~NodeComplexInjection<DIM>();
+   virtual ~NodeComplexInjection();
 
    /**
     * Return true if the variable and name string match the node-centered
diff --git a/source/patchdata/operators/constant/node/NodeDoubleInjection.h b/source/patchdata/operators/constant/node/NodeDoubleInjection.h
index d170c4d..c4039d1 100644
--- a/source/patchdata/operators/constant/node/NodeDoubleInjection.h
+++ b/source/patchdata/operators/constant/node/NodeDoubleInjection.h
@@ -50,7 +50,7 @@ public:
    /**
     * Uninteresting virtual destructor.
     */
-   virtual ~NodeDoubleInjection<DIM>();
+   virtual ~NodeDoubleInjection();
 
    /**
     * Return true if the variable and name string match the node-centered
diff --git a/source/patchdata/operators/constant/node/NodeFloatInjection.h b/source/patchdata/operators/constant/node/NodeFloatInjection.h
index 2e4f76f..315860f 100644
--- a/source/patchdata/operators/constant/node/NodeFloatInjection.h
+++ b/source/patchdata/operators/constant/node/NodeFloatInjection.h
@@ -50,7 +50,7 @@ public:
    /**
     * Uninteresting virtual destructor.
     */
-   virtual ~NodeFloatInjection<DIM>();
+   virtual ~NodeFloatInjection();
 
    /**
     * Return true if the variable and name string match the node-centered
diff --git a/source/patchdata/operators/constant/node/NodeIntegerInjection.h b/source/patchdata/operators/constant/node/NodeIntegerInjection.h
index f868b12..a48e561 100644
--- a/source/patchdata/operators/constant/node/NodeIntegerInjection.h
+++ b/source/patchdata/operators/constant/node/NodeIntegerInjection.h
@@ -50,7 +50,7 @@ public:
    /**
     * Uninteresting virtual destructor.
     */
-   virtual ~NodeIntegerInjection<DIM>();
+   virtual ~NodeIntegerInjection();
 
    /**
     * Return true if the variable and name string match the node-centered
diff --git a/source/patchdata/operators/constant/outerface/OuterfaceComplexConstantRefine.h b/source/patchdata/operators/constant/outerface/OuterfaceComplexConstantRefine.h
index d5a0a24..d8ab1be 100644
--- a/source/patchdata/operators/constant/outerface/OuterfaceComplexConstantRefine.h
+++ b/source/patchdata/operators/constant/outerface/OuterfaceComplexConstantRefine.h
@@ -49,7 +49,7 @@ public:
    /**
     * Uninteresting virtual destructor.
     */
-   virtual ~OuterfaceComplexConstantRefine<DIM>();
+   virtual ~OuterfaceComplexConstantRefine();
 
    /**
     * Return true if the variable and name string match outerface 
diff --git a/source/patchdata/operators/constant/outerface/OuterfaceDoubleConstantRefine.h b/source/patchdata/operators/constant/outerface/OuterfaceDoubleConstantRefine.h
index 97853f7..a68d671 100644
--- a/source/patchdata/operators/constant/outerface/OuterfaceDoubleConstantRefine.h
+++ b/source/patchdata/operators/constant/outerface/OuterfaceDoubleConstantRefine.h
@@ -49,7 +49,7 @@ public:
    /**
     * Uninteresting virtual destructor.
     */
-   virtual ~OuterfaceDoubleConstantRefine<DIM>();
+   virtual ~OuterfaceDoubleConstantRefine();
 
    /**
     * Return true if the variable and name string match outerface 
diff --git a/source/patchdata/operators/constant/outerface/OuterfaceFloatConstantRefine.h b/source/patchdata/operators/constant/outerface/OuterfaceFloatConstantRefine.h
index ea7af34..63d8746 100644
--- a/source/patchdata/operators/constant/outerface/OuterfaceFloatConstantRefine.h
+++ b/source/patchdata/operators/constant/outerface/OuterfaceFloatConstantRefine.h
@@ -49,7 +49,7 @@ public:
    /**
     * Uninteresting virtual destructor.
     */
-   virtual ~OuterfaceFloatConstantRefine<DIM>();
+   virtual ~OuterfaceFloatConstantRefine();
 
    /**
     * Return true if the variable and name string match outerface 
diff --git a/source/patchdata/operators/constant/outerface/OuterfaceIntegerConstantRefine.h b/source/patchdata/operators/constant/outerface/OuterfaceIntegerConstantRefine.h
index 449dc90..78902e9 100644
--- a/source/patchdata/operators/constant/outerface/OuterfaceIntegerConstantRefine.h
+++ b/source/patchdata/operators/constant/outerface/OuterfaceIntegerConstantRefine.h
@@ -49,7 +49,7 @@ public:
    /**
     * Uninteresting virtual destructor.
     */
-   virtual ~OuterfaceIntegerConstantRefine<DIM>();
+   virtual ~OuterfaceIntegerConstantRefine();
 
    /**
     * Return true if the variable and name string match outerface 
diff --git a/source/patchdata/operators/constant/outernode/OuternodeDoubleConstantCoarsen.h b/source/patchdata/operators/constant/outernode/OuternodeDoubleConstantCoarsen.h
index 6fc08d6..5c002a7 100644
--- a/source/patchdata/operators/constant/outernode/OuternodeDoubleConstantCoarsen.h
+++ b/source/patchdata/operators/constant/outernode/OuternodeDoubleConstantCoarsen.h
@@ -54,7 +54,7 @@ public:
    /*!
     * @brief Uninteresting virtual destructor.
     */
-   virtual ~OuternodeDoubleConstantCoarsen<DIM>();
+   virtual ~OuternodeDoubleConstantCoarsen();
 
    /*!
     * @brief Determine if object is for coarsening the specified
diff --git a/source/patchdata/operators/constant/side/SideComplexConstantRefine.h b/source/patchdata/operators/constant/side/SideComplexConstantRefine.h
index 5397ec7..6332eaf 100644
--- a/source/patchdata/operators/constant/side/SideComplexConstantRefine.h
+++ b/source/patchdata/operators/constant/side/SideComplexConstantRefine.h
@@ -49,7 +49,7 @@ public:
    /**
     * Uninteresting virtual destructor.
     */
-   virtual ~SideComplexConstantRefine<DIM>();
+   virtual ~SideComplexConstantRefine();
 
    /**
     * Return true if the variable and name string match side-centered 
diff --git a/source/patchdata/operators/constant/side/SideDoubleConstantRefine.h b/source/patchdata/operators/constant/side/SideDoubleConstantRefine.h
index 921560b..a578638 100644
--- a/source/patchdata/operators/constant/side/SideDoubleConstantRefine.h
+++ b/source/patchdata/operators/constant/side/SideDoubleConstantRefine.h
@@ -49,7 +49,7 @@ public:
    /**
     * Uninteresting virtual destructor.
     */
-   virtual ~SideDoubleConstantRefine<DIM>();
+   virtual ~SideDoubleConstantRefine();
 
    /**
     * Return true if the variable and name string match side-centered 
diff --git a/source/patchdata/operators/constant/side/SideFloatConstantRefine.h b/source/patchdata/operators/constant/side/SideFloatConstantRefine.h
index 8a48fce..0d64001 100644
--- a/source/patchdata/operators/constant/side/SideFloatConstantRefine.h
+++ b/source/patchdata/operators/constant/side/SideFloatConstantRefine.h
@@ -49,7 +49,7 @@ public:
    /**
     * Uninteresting virtual destructor.
     */
-   virtual ~SideFloatConstantRefine<DIM>();
+   virtual ~SideFloatConstantRefine();
 
    /**
     * Return true if the variable and name string match side-centered 
diff --git a/source/patchdata/operators/constant/side/SideIntegerConstantRefine.h b/source/patchdata/operators/constant/side/SideIntegerConstantRefine.h
index 507de57..977d6bd 100644
--- a/source/patchdata/operators/constant/side/SideIntegerConstantRefine.h
+++ b/source/patchdata/operators/constant/side/SideIntegerConstantRefine.h
@@ -49,7 +49,7 @@ public:
    /**
     * Uninteresting virtual destructor.
     */
-   virtual ~SideIntegerConstantRefine<DIM>();
+   virtual ~SideIntegerConstantRefine();
 
    /**
     * Return true if the variable and name string match side-centered 
diff --git a/source/patchdata/operators/time_interpolate/cell/CellComplexLinearTimeInterpolateOp.h b/source/patchdata/operators/time_interpolate/cell/CellComplexLinearTimeInterpolateOp.h
index 3e09cce..669ccd7 100644
--- a/source/patchdata/operators/time_interpolate/cell/CellComplexLinearTimeInterpolateOp.h
+++ b/source/patchdata/operators/time_interpolate/cell/CellComplexLinearTimeInterpolateOp.h
@@ -46,7 +46,7 @@ public:
    /**
     * Uninteresting virtual destructor.
     */
-   virtual ~CellComplexLinearTimeInterpolateOp<DIM>();
+   virtual ~CellComplexLinearTimeInterpolateOp();
 
    /**
     * Return true if the variable and name string match the standard
diff --git a/source/patchdata/operators/time_interpolate/cell/CellDoubleLinearTimeInterpolateOp.h b/source/patchdata/operators/time_interpolate/cell/CellDoubleLinearTimeInterpolateOp.h
index fd80efc..883d22f 100644
--- a/source/patchdata/operators/time_interpolate/cell/CellDoubleLinearTimeInterpolateOp.h
+++ b/source/patchdata/operators/time_interpolate/cell/CellDoubleLinearTimeInterpolateOp.h
@@ -46,7 +46,7 @@ public:
    /**
     * Uninteresting virtual destructor.
     */
-   virtual ~CellDoubleLinearTimeInterpolateOp<DIM>();
+   virtual ~CellDoubleLinearTimeInterpolateOp();
 
    /**
     * Return true if the variable and name string match the standard
diff --git a/source/patchdata/operators/time_interpolate/cell/CellFloatLinearTimeInterpolateOp.h b/source/patchdata/operators/time_interpolate/cell/CellFloatLinearTimeInterpolateOp.h
index e7a16bc..bd52fb8 100644
--- a/source/patchdata/operators/time_interpolate/cell/CellFloatLinearTimeInterpolateOp.h
+++ b/source/patchdata/operators/time_interpolate/cell/CellFloatLinearTimeInterpolateOp.h
@@ -46,7 +46,7 @@ public:
    /**
     * Uninteresting virtual destructor.
     */
-   virtual ~CellFloatLinearTimeInterpolateOp<DIM>();
+   virtual ~CellFloatLinearTimeInterpolateOp();
 
    /**
     * Return true if the variable and name string match the standard
diff --git a/source/patchdata/operators/time_interpolate/edge/EdgeComplexLinearTimeInterpolateOp.h b/source/patchdata/operators/time_interpolate/edge/EdgeComplexLinearTimeInterpolateOp.h
index 39495f0..916038e 100644
--- a/source/patchdata/operators/time_interpolate/edge/EdgeComplexLinearTimeInterpolateOp.h
+++ b/source/patchdata/operators/time_interpolate/edge/EdgeComplexLinearTimeInterpolateOp.h
@@ -46,7 +46,7 @@ public:
    /**
     * Uninteresting virtual destructor.
     */
-   virtual ~EdgeComplexLinearTimeInterpolateOp<DIM>();
+   virtual ~EdgeComplexLinearTimeInterpolateOp();
 
    /**
     * Return true if the variable and name string match the standard
diff --git a/source/patchdata/operators/time_interpolate/edge/EdgeDoubleLinearTimeInterpolateOp.h b/source/patchdata/operators/time_interpolate/edge/EdgeDoubleLinearTimeInterpolateOp.h
index f371c3d..1fd80e1 100644
--- a/source/patchdata/operators/time_interpolate/edge/EdgeDoubleLinearTimeInterpolateOp.h
+++ b/source/patchdata/operators/time_interpolate/edge/EdgeDoubleLinearTimeInterpolateOp.h
@@ -46,7 +46,7 @@ public:
    /**
     * Uninteresting virtual destructor.
     */
-   virtual ~EdgeDoubleLinearTimeInterpolateOp<DIM>();
+   virtual ~EdgeDoubleLinearTimeInterpolateOp();
 
    /**
     * Return true if the variable and name string match the standard
diff --git a/source/patchdata/operators/time_interpolate/edge/EdgeFloatLinearTimeInterpolateOp.h b/source/patchdata/operators/time_interpolate/edge/EdgeFloatLinearTimeInterpolateOp.h
index 91efde8..3e86b56 100644
--- a/source/patchdata/operators/time_interpolate/edge/EdgeFloatLinearTimeInterpolateOp.h
+++ b/source/patchdata/operators/time_interpolate/edge/EdgeFloatLinearTimeInterpolateOp.h
@@ -46,7 +46,7 @@ public:
    /**
     * Uninteresting virtual destructor.
     */
-   virtual ~EdgeFloatLinearTimeInterpolateOp<DIM>();
+   virtual ~EdgeFloatLinearTimeInterpolateOp();
 
    /**
     * Return true if the variable and name string match the standard
diff --git a/source/patchdata/operators/time_interpolate/face/FaceComplexLinearTimeInterpolateOp.h b/source/patchdata/operators/time_interpolate/face/FaceComplexLinearTimeInterpolateOp.h
index f0edcb3..eeff61c 100644
--- a/source/patchdata/operators/time_interpolate/face/FaceComplexLinearTimeInterpolateOp.h
+++ b/source/patchdata/operators/time_interpolate/face/FaceComplexLinearTimeInterpolateOp.h
@@ -46,7 +46,7 @@ public:
    /**
     * Uninteresting virtual destructor.
     */
-   virtual ~FaceComplexLinearTimeInterpolateOp<DIM>();
+   virtual ~FaceComplexLinearTimeInterpolateOp();
 
    /**
     * Return true if the variable and name string match the standard
diff --git a/source/patchdata/operators/time_interpolate/face/FaceDoubleLinearTimeInterpolateOp.h b/source/patchdata/operators/time_interpolate/face/FaceDoubleLinearTimeInterpolateOp.h
index 1653e2a..d5e9da2 100644
--- a/source/patchdata/operators/time_interpolate/face/FaceDoubleLinearTimeInterpolateOp.h
+++ b/source/patchdata/operators/time_interpolate/face/FaceDoubleLinearTimeInterpolateOp.h
@@ -46,7 +46,7 @@ public:
    /**
     * Uninteresting virtual destructor.
     */
-   virtual ~FaceDoubleLinearTimeInterpolateOp<DIM>();
+   virtual ~FaceDoubleLinearTimeInterpolateOp();
 
    /**
     * Return true if the variable and name string match the standard
diff --git a/source/patchdata/operators/time_interpolate/face/FaceFloatLinearTimeInterpolateOp.h b/source/patchdata/operators/time_interpolate/face/FaceFloatLinearTimeInterpolateOp.h
index bd18aff..ca07533 100644
--- a/source/patchdata/operators/time_interpolate/face/FaceFloatLinearTimeInterpolateOp.h
+++ b/source/patchdata/operators/time_interpolate/face/FaceFloatLinearTimeInterpolateOp.h
@@ -46,7 +46,7 @@ public:
    /**
     * Uninteresting virtual destructor.
     */
-   virtual ~FaceFloatLinearTimeInterpolateOp<DIM>();
+   virtual ~FaceFloatLinearTimeInterpolateOp();
 
    /**
     * Return true if the variable and name string match the standard
diff --git a/source/patchdata/operators/time_interpolate/node/NodeComplexLinearTimeInterpolateOp.h b/source/patchdata/operators/time_interpolate/node/NodeComplexLinearTimeInterpolateOp.h
index 2540031..f1b41f7 100644
--- a/source/patchdata/operators/time_interpolate/node/NodeComplexLinearTimeInterpolateOp.h
+++ b/source/patchdata/operators/time_interpolate/node/NodeComplexLinearTimeInterpolateOp.h
@@ -46,7 +46,7 @@ public:
    /**
     * Uninteresting virtual destructor.
     */
-   virtual ~NodeComplexLinearTimeInterpolateOp<DIM>();
+   virtual ~NodeComplexLinearTimeInterpolateOp();
 
    /**
     * Return true if the variable and name string match the standard
diff --git a/source/patchdata/operators/time_interpolate/node/NodeDoubleLinearTimeInterpolateOp.h b/source/patchdata/operators/time_interpolate/node/NodeDoubleLinearTimeInterpolateOp.h
index 4e26af2..6ac6df9 100644
--- a/source/patchdata/operators/time_interpolate/node/NodeDoubleLinearTimeInterpolateOp.h
+++ b/source/patchdata/operators/time_interpolate/node/NodeDoubleLinearTimeInterpolateOp.h
@@ -46,7 +46,7 @@ public:
    /**
     * Uninteresting virtual destructor.
     */
-   virtual ~NodeDoubleLinearTimeInterpolateOp<DIM>();
+   virtual ~NodeDoubleLinearTimeInterpolateOp();
 
    /**
     * Return true if the variable and name string match the standard
diff --git a/source/patchdata/operators/time_interpolate/node/NodeFloatLinearTimeInterpolateOp.h b/source/patchdata/operators/time_interpolate/node/NodeFloatLinearTimeInterpolateOp.h
index bb5341e..1e1d66f 100644
--- a/source/patchdata/operators/time_interpolate/node/NodeFloatLinearTimeInterpolateOp.h
+++ b/source/patchdata/operators/time_interpolate/node/NodeFloatLinearTimeInterpolateOp.h
@@ -46,7 +46,7 @@ public:
    /**
     * Uninteresting virtual destructor.
     */
-   virtual ~NodeFloatLinearTimeInterpolateOp<DIM>();
+   virtual ~NodeFloatLinearTimeInterpolateOp();
 
    /**
     * Return true if the variable and name string match the standard
diff --git a/source/patchdata/operators/time_interpolate/outerface/OuterfaceComplexLinearTimeInterpolateOp.h b/source/patchdata/operators/time_interpolate/outerface/OuterfaceComplexLinearTimeInterpolateOp.h
index 5cdc9b6..a23da5c 100644
--- a/source/patchdata/operators/time_interpolate/outerface/OuterfaceComplexLinearTimeInterpolateOp.h
+++ b/source/patchdata/operators/time_interpolate/outerface/OuterfaceComplexLinearTimeInterpolateOp.h
@@ -48,7 +48,7 @@ public:
    /**
     * Uninteresting virtual destructor.
     */
-   virtual ~OuterfaceComplexLinearTimeInterpolateOp<DIM>();
+   virtual ~OuterfaceComplexLinearTimeInterpolateOp();
 
    /**
     * Return true if the variable and name string match the standard
diff --git a/source/patchdata/operators/time_interpolate/outerface/OuterfaceDoubleLinearTimeInterpolateOp.h b/source/patchdata/operators/time_interpolate/outerface/OuterfaceDoubleLinearTimeInterpolateOp.h
index 5c96f5d..62634de 100644
--- a/source/patchdata/operators/time_interpolate/outerface/OuterfaceDoubleLinearTimeInterpolateOp.h
+++ b/source/patchdata/operators/time_interpolate/outerface/OuterfaceDoubleLinearTimeInterpolateOp.h
@@ -48,7 +48,7 @@ public:
    /**
     * Uninteresting virtual destructor.
     */
-   virtual ~OuterfaceDoubleLinearTimeInterpolateOp<DIM>();
+   virtual ~OuterfaceDoubleLinearTimeInterpolateOp();
 
    /**
     * Return true if the variable and name string match the standard
diff --git a/source/patchdata/operators/time_interpolate/outerface/OuterfaceFloatLinearTimeInterpolateOp.h b/source/patchdata/operators/time_interpolate/outerface/OuterfaceFloatLinearTimeInterpolateOp.h
index c587869..63f63a2 100644
--- a/source/patchdata/operators/time_interpolate/outerface/OuterfaceFloatLinearTimeInterpolateOp.h
+++ b/source/patchdata/operators/time_interpolate/outerface/OuterfaceFloatLinearTimeInterpolateOp.h
@@ -48,7 +48,7 @@ public:
    /**
     * Uninteresting virtual destructor.
     */
-   virtual ~OuterfaceFloatLinearTimeInterpolateOp<DIM>();
+   virtual ~OuterfaceFloatLinearTimeInterpolateOp();
 
    /**
     * Return true if the variable and name string match the standard
diff --git a/source/patchdata/operators/time_interpolate/outerside/OutersideComplexLinearTimeInterpolateOp.h b/source/patchdata/operators/time_interpolate/outerside/OutersideComplexLinearTimeInterpolateOp.h
index 9de037d..99c401a 100644
--- a/source/patchdata/operators/time_interpolate/outerside/OutersideComplexLinearTimeInterpolateOp.h
+++ b/source/patchdata/operators/time_interpolate/outerside/OutersideComplexLinearTimeInterpolateOp.h
@@ -48,7 +48,7 @@ public:
    /**
     * Uninteresting virtual destructor.
     */
-   virtual ~OutersideComplexLinearTimeInterpolateOp<DIM>();
+   virtual ~OutersideComplexLinearTimeInterpolateOp();
 
    /**
     * Return true if the variable and name string match the standard
diff --git a/source/patchdata/operators/time_interpolate/outerside/OutersideDoubleLinearTimeInterpolateOp.h b/source/patchdata/operators/time_interpolate/outerside/OutersideDoubleLinearTimeInterpolateOp.h
index 2ba17e7..9864bac 100644
--- a/source/patchdata/operators/time_interpolate/outerside/OutersideDoubleLinearTimeInterpolateOp.h
+++ b/source/patchdata/operators/time_interpolate/outerside/OutersideDoubleLinearTimeInterpolateOp.h
@@ -48,7 +48,7 @@ public:
    /**
     * Uninteresting virtual destructor.
     */
-   virtual ~OutersideDoubleLinearTimeInterpolateOp<DIM>();
+   virtual ~OutersideDoubleLinearTimeInterpolateOp();
 
    /**
     * Return true if the variable and name string match the standard
diff --git a/source/patchdata/operators/time_interpolate/outerside/OutersideFloatLinearTimeInterpolateOp.h b/source/patchdata/operators/time_interpolate/outerside/OutersideFloatLinearTimeInterpolateOp.h
index fb1f521..41bebe7 100644
--- a/source/patchdata/operators/time_interpolate/outerside/OutersideFloatLinearTimeInterpolateOp.h
+++ b/source/patchdata/operators/time_interpolate/outerside/OutersideFloatLinearTimeInterpolateOp.h
@@ -48,7 +48,7 @@ public:
    /**
     * Uninteresting virtual destructor.
     */
-   virtual ~OutersideFloatLinearTimeInterpolateOp<DIM>();
+   virtual ~OutersideFloatLinearTimeInterpolateOp();
 
    /**
     * Return true if the variable and name string match the standard
diff --git a/source/patchdata/operators/time_interpolate/side/SideComplexLinearTimeInterpolateOp.h b/source/patchdata/operators/time_interpolate/side/SideComplexLinearTimeInterpolateOp.h
index 93dc0d5..ddc9ad7 100644
--- a/source/patchdata/operators/time_interpolate/side/SideComplexLinearTimeInterpolateOp.h
+++ b/source/patchdata/operators/time_interpolate/side/SideComplexLinearTimeInterpolateOp.h
@@ -46,7 +46,7 @@ public:
    /**
     * Uninteresting virtual destructor.
     */
-   virtual ~SideComplexLinearTimeInterpolateOp<DIM>();
+   virtual ~SideComplexLinearTimeInterpolateOp();
 
    /**
     * Return true if the variable and name string match the standard
diff --git a/source/patchdata/operators/time_interpolate/side/SideDoubleLinearTimeInterpolateOp.h b/source/patchdata/operators/time_interpolate/side/SideDoubleLinearTimeInterpolateOp.h
index 5d8a4a5..ce9a7be 100644
--- a/source/patchdata/operators/time_interpolate/side/SideDoubleLinearTimeInterpolateOp.h
+++ b/source/patchdata/operators/time_interpolate/side/SideDoubleLinearTimeInterpolateOp.h
@@ -46,7 +46,7 @@ public:
    /**
     * Uninteresting virtual destructor.
     */
-   virtual ~SideDoubleLinearTimeInterpolateOp<DIM>();
+   virtual ~SideDoubleLinearTimeInterpolateOp();
 
    /**
     * Return true if the variable and name string match the standard
diff --git a/source/patchdata/operators/time_interpolate/side/SideFloatLinearTimeInterpolateOp.h b/source/patchdata/operators/time_interpolate/side/SideFloatLinearTimeInterpolateOp.h
index 2119801..a033d4a 100644
--- a/source/patchdata/operators/time_interpolate/side/SideFloatLinearTimeInterpolateOp.h
+++ b/source/patchdata/operators/time_interpolate/side/SideFloatLinearTimeInterpolateOp.h
@@ -46,7 +46,7 @@ public:
    /**
     * Uninteresting virtual destructor.
     */
-   virtual ~SideFloatLinearTimeInterpolateOp<DIM>();
+   virtual ~SideFloatLinearTimeInterpolateOp();
 
    /**
     * Return true if the variable and name string match the standard
diff --git a/source/patchdata/outeredge/OuteredgeData.h b/source/patchdata/outeredge/OuteredgeData.h
index dc7d84d..adcd222 100644
--- a/source/patchdata/outeredge/OuteredgeData.h
+++ b/source/patchdata/outeredge/OuteredgeData.h
@@ -168,7 +168,7 @@ public:
    /*!
     * @brief Virtual destructor for a outeredge data object.
     */
-   virtual ~OuteredgeData<DIM,TYPE>();
+   virtual ~OuteredgeData();
 
    /*!
     * @brief Return the depth (i.e., the number of data values for 
diff --git a/source/patchdata/outeredge/OuteredgeDataFactory.h b/source/patchdata/outeredge/OuteredgeDataFactory.h
index ee36797..64747b8 100644
--- a/source/patchdata/outeredge/OuteredgeDataFactory.h
+++ b/source/patchdata/outeredge/OuteredgeDataFactory.h
@@ -55,7 +55,7 @@ public:
     * @brief
     * Virtual destructor for the outeredge data factory class.
     */
-   virtual ~OuteredgeDataFactory<DIM,TYPE>();
+   virtual ~OuteredgeDataFactory();
 
    /**
     * @brief Abstract virtual function to clone a patch data factory.
diff --git a/source/patchdata/outeredge/OuteredgeVariable.h b/source/patchdata/outeredge/OuteredgeVariable.h
index e01b58d..681c5a2 100644
--- a/source/patchdata/outeredge/OuteredgeVariable.h
+++ b/source/patchdata/outeredge/OuteredgeVariable.h
@@ -51,7 +51,7 @@ public:
    /*!
     * @brief Virtual destructor for outeredge variable objects.
     */
-   virtual ~OuteredgeVariable<DIM,TYPE>();
+   virtual ~OuteredgeVariable();
 
    /*!
     * @brief Return a boolean true value indicating that fine patch 
diff --git a/source/patchdata/outerface/OuterfaceData.h b/source/patchdata/outerface/OuterfaceData.h
index 7ad2335..3dd9d82 100644
--- a/source/patchdata/outerface/OuterfaceData.h
+++ b/source/patchdata/outerface/OuterfaceData.h
@@ -127,7 +127,7 @@ public:
    /*!
     * @brief Virtual destructor for a outerface data object.
     */
-   virtual ~OuterfaceData<DIM,TYPE>();
+   virtual ~OuterfaceData();
 
    /*!
     * @brief Return the depth (i.e., the number of data values for
diff --git a/source/patchdata/outerface/OuterfaceDataFactory.h b/source/patchdata/outerface/OuterfaceDataFactory.h
index 56705f7..1ff67b7 100644
--- a/source/patchdata/outerface/OuterfaceDataFactory.h
+++ b/source/patchdata/outerface/OuterfaceDataFactory.h
@@ -51,7 +51,7 @@ public:
    /**
     * Virtual destructor for the outerface data factory class.
     */
-   virtual ~OuterfaceDataFactory<DIM,TYPE>();
+   virtual ~OuterfaceDataFactory();
 
    /**
     * @brief Abstract virtual function to clone a patch data factory.
diff --git a/source/patchdata/outerface/OuterfaceVariable.h b/source/patchdata/outerface/OuterfaceVariable.h
index d55cbbd..4c07d2d 100644
--- a/source/patchdata/outerface/OuterfaceVariable.h
+++ b/source/patchdata/outerface/OuterfaceVariable.h
@@ -60,7 +60,7 @@ public:
    /*!
     * @brief Virtual destructor for outerface variable objects.
     */
-   virtual ~OuterfaceVariable<DIM,TYPE>();
+   virtual ~OuterfaceVariable();
  
    /*!
     * @brief Return a boolean true value indicating that fine patch
diff --git a/source/patchdata/outernode/OuternodeData.h b/source/patchdata/outernode/OuternodeData.h
index 209a347..e1f5497 100644
--- a/source/patchdata/outernode/OuternodeData.h
+++ b/source/patchdata/outernode/OuternodeData.h
@@ -143,7 +143,7 @@ public:
    /*!
     * @brief Virtual destructor for a outernode data object.
     */
-   virtual ~OuternodeData<DIM,TYPE>();
+   virtual ~OuternodeData();
 
    /*!
     * @brief Return the depth (e.g., the number of components at each spatial
diff --git a/source/patchdata/outernode/OuternodeDataFactory.h b/source/patchdata/outernode/OuternodeDataFactory.h
index e70b76d..666ae99 100644
--- a/source/patchdata/outernode/OuternodeDataFactory.h
+++ b/source/patchdata/outernode/OuternodeDataFactory.h
@@ -55,7 +55,7 @@ public:
     * @brief
     * Virtual destructor for the outernode data factory class.
     */
-   virtual ~OuternodeDataFactory<DIM,TYPE>();
+   virtual ~OuternodeDataFactory();
 
    /**
     * @brief Abstract virtual function to clone a patch data factory.
diff --git a/source/patchdata/outernode/OuternodeVariable.h b/source/patchdata/outernode/OuternodeVariable.h
index b0824f1..3a8b90b 100644
--- a/source/patchdata/outernode/OuternodeVariable.h
+++ b/source/patchdata/outernode/OuternodeVariable.h
@@ -55,7 +55,7 @@ public:
    /*!
     * @brief Virtual destructor for outernode variable objects.
     */
-   virtual ~OuternodeVariable<DIM,TYPE>();
+   virtual ~OuternodeVariable();
  
    /*!
     * @brief Return a boolean true value indicating that fine patch
diff --git a/source/patchdata/outerside/OutersideData.h b/source/patchdata/outerside/OutersideData.h
index cc6096f..fe413ae 100644
--- a/source/patchdata/outerside/OutersideData.h
+++ b/source/patchdata/outerside/OutersideData.h
@@ -128,7 +128,7 @@ public:
    /*!
     * @brief Virtual destructor for a outerside data object.
     */
-   virtual ~OutersideData<DIM,TYPE>();
+   virtual ~OutersideData();
 
    /*!
     * @brief Return the depth (i.e., the number of data values for
diff --git a/source/patchdata/outerside/OutersideDataFactory.h b/source/patchdata/outerside/OutersideDataFactory.h
index f4cb8d5..17ca380 100644
--- a/source/patchdata/outerside/OutersideDataFactory.h
+++ b/source/patchdata/outerside/OutersideDataFactory.h
@@ -51,7 +51,7 @@ public:
    /**
     * Virtual destructor for the outerside data factory class.
     */
-   virtual ~OutersideDataFactory<DIM,TYPE>();
+   virtual ~OutersideDataFactory();
 
    /**
     * @brief Abstract virtual function to clone a patch data factory.
diff --git a/source/patchdata/outerside/OutersideVariable.h b/source/patchdata/outerside/OutersideVariable.h
index 05ad5d4..fd297f9 100644
--- a/source/patchdata/outerside/OutersideVariable.h
+++ b/source/patchdata/outerside/OutersideVariable.h
@@ -60,7 +60,7 @@ public:
    /*!
     * @brief Virtual destructor for outerside variable objects.
     */
-   virtual ~OutersideVariable<DIM,TYPE>();
+   virtual ~OutersideVariable();
 
    /*!
     * @brief Return a boolean true value indicating that fine patch
diff --git a/source/patchdata/side/SideData.h b/source/patchdata/side/SideData.h
index 608eac6..2a59d2b 100644
--- a/source/patchdata/side/SideData.h
+++ b/source/patchdata/side/SideData.h
@@ -143,7 +143,7 @@ public:
    /*!
     * @brief The virtual destructor for a side data object.
     */
-   virtual ~SideData<DIM,TYPE>();
+   virtual ~SideData();
 
    /*!
     * @brief Return constant reference to vector describing which coordinate
diff --git a/source/patchdata/side/SideDataFactory.h b/source/patchdata/side/SideDataFactory.h
index dba3eda..5d1a46f 100644
--- a/source/patchdata/side/SideDataFactory.h
+++ b/source/patchdata/side/SideDataFactory.h
@@ -67,7 +67,7 @@ public:
    /**
     * Virtual destructor for the side data factory class.
     */
-   virtual ~SideDataFactory<DIM,TYPE>();
+   virtual ~SideDataFactory();
 
    /**
     * @brief Abstract virtual function to clone a patch data factory.
diff --git a/source/patchdata/side/SideIndex.h b/source/patchdata/side/SideIndex.h
index 74c7ac2..3cb152c 100644
--- a/source/patchdata/side/SideIndex.h
+++ b/source/patchdata/side/SideIndex.h
@@ -59,7 +59,7 @@ public:
    /**
     * The side index destructor does nothing interesting.
     */
-   ~SideIndex<DIM>();
+   ~SideIndex();
 
    /**
     * Get the axis for which this side index is defined (X=0, Y=1, Z=2).
diff --git a/source/patchdata/side/SideIterator.h b/source/patchdata/side/SideIterator.h
index b2c13df..ac0dcd2 100644
--- a/source/patchdata/side/SideIterator.h
+++ b/source/patchdata/side/SideIterator.h
@@ -67,7 +67,7 @@ public:
    /**
     * Destructor for the side iterator.
     */
-   ~SideIterator<DIM>();
+   ~SideIterator();
 
    /**
     * Extract the side index corresponding to the iterator position in the box.
diff --git a/source/patchdata/side/SideVariable.C b/source/patchdata/side/SideVariable.C
index 190dfd9..c92215c 100644
--- a/source/patchdata/side/SideVariable.C
+++ b/source/patchdata/side/SideVariable.C
@@ -54,7 +54,7 @@ SideVariable<DIM,TYPE>::SideVariable(
       for (int id = 0; id < DIM; id++) {
          d_directions(id) = ( (direction == id) ? 1 : 0 );  
       }  
-      setPatchDataFactory(new SideDataFactory<DIM,TYPE>(
+      this->setPatchDataFactory(new SideDataFactory<DIM,TYPE>(
                              depth,
                              hier::IntVector<DIM>(0),
                              fine_boundary_represents_var,
diff --git a/source/patchdata/side/SideVariable.h b/source/patchdata/side/SideVariable.h
index 99bd694..2ead01f 100644
--- a/source/patchdata/side/SideVariable.h
+++ b/source/patchdata/side/SideVariable.h
@@ -70,7 +70,7 @@ public:
    /*!
     * @brief Virtual destructor for side variable objects.
     */
-   virtual ~SideVariable<DIM,TYPE>();
+   virtual ~SideVariable();
 
    /*!
     * @brief Return constant reference to vector describing which coordinate
diff --git a/source/patchdata/templates/EmptyPatchDataX.C b/source/patchdata/templates/EmptyPatchDataX.C
index d696aee..5d9f665 100644
--- a/source/patchdata/templates/EmptyPatchDataX.C
+++ b/source/patchdata/templates/EmptyPatchDataX.C
@@ -14,6 +14,12 @@
 namespace SAMRAI {
    namespace pdat {
       template<int DIM> class Empty {
+	 Empty() :
+	    something(0) 
+	 {
+	 }
+
+	 int something;
       };
 
       template class Empty< NDIM >;
diff --git a/source/solvers/FAC/FACOperatorStrategy.h b/source/solvers/FAC/FACOperatorStrategy.h
index 09f1d08..29aac61 100644
--- a/source/solvers/FAC/FACOperatorStrategy.h
+++ b/source/solvers/FAC/FACOperatorStrategy.h
@@ -49,7 +49,7 @@ public:
    /*!
     * @brief Virtual destructor.
     */
-   virtual ~FACOperatorStrategy<DIM>();
+   virtual ~FACOperatorStrategy();
 
    //@{
    /*!
diff --git a/source/solvers/FAC/FACPreconditioner.C b/source/solvers/FAC/FACPreconditioner.C
index af374cd..5843f17 100644
--- a/source/solvers/FAC/FACPreconditioner.C
+++ b/source/solvers/FAC/FACPreconditioner.C
@@ -152,18 +152,22 @@ template<int DIM> void FACPreconditioner<DIM>::deallocateSolverState( )
       d_patch_hierarchy.setNull();
 
       if ( d_error_vector ) {
+         d_error_vector->resetLevels(d_error_vector->getCoarsestLevelNumber(), std::min(d_error_vector->getFinestLevelNumber(),d_error_vector->getPatchHierarchy()->getFinestLevelNumber()));
          d_error_vector->freeVectorComponents();
          d_error_vector.setNull();
       }
       if ( d_tmp_error ) {
+         d_tmp_error->resetLevels(d_tmp_error->getCoarsestLevelNumber(), std::min(d_tmp_error->getFinestLevelNumber(),d_tmp_error->getPatchHierarchy()->getFinestLevelNumber()));
          d_tmp_error->freeVectorComponents();
          d_tmp_error.setNull();
       }
       if ( d_residual_vector ) {
+         d_residual_vector->resetLevels(d_residual_vector->getCoarsestLevelNumber(), std::min(d_residual_vector->getFinestLevelNumber(),d_residual_vector->getPatchHierarchy()->getFinestLevelNumber()));
          d_residual_vector->freeVectorComponents();
          d_residual_vector.setNull();
       }
       if ( d_tmp_residual ) {
+         d_tmp_residual->resetLevels(d_tmp_residual->getCoarsestLevelNumber(), std::min(d_tmp_residual->getFinestLevelNumber(),d_tmp_residual->getPatchHierarchy()->getFinestLevelNumber()));
          d_tmp_residual->freeVectorComponents();
          d_tmp_residual.setNull();
       }
diff --git a/source/solvers/FAC/FACPreconditioner.h b/source/solvers/FAC/FACPreconditioner.h
index b0de597..877f56e 100644
--- a/source/solvers/FAC/FACPreconditioner.h
+++ b/source/solvers/FAC/FACPreconditioner.h
@@ -71,7 +71,7 @@ public:
    /*!
     * Virtual destructor.
     */
-   virtual ~FACPreconditioner<DIM>();
+   virtual ~FACPreconditioner();
 
    /*!
     * @brief Solve linear system Au=f using the FAC algorithm.
diff --git a/source/solvers/nonlinear/NonlinearSolverStrategy.h b/source/solvers/nonlinear/NonlinearSolverStrategy.h
index 4dcae63..23938bf 100644
--- a/source/solvers/nonlinear/NonlinearSolverStrategy.h
+++ b/source/solvers/nonlinear/NonlinearSolverStrategy.h
@@ -42,7 +42,7 @@ public:
    /**
     * Empty constructor for algs::NonlinearSolverStrategy.
     */
-   virtual ~NonlinearSolverStrategy<DIM>();
+   virtual ~NonlinearSolverStrategy();
 
    /**
     * Initialize the solver state.  The vector argument represents the
diff --git a/source/solvers/packages/petsc/SNES_SAMRAIContext.h b/source/solvers/packages/petsc/SNES_SAMRAIContext.h
index 6db0ea5..6a1765d 100644
--- a/source/solvers/packages/petsc/SNES_SAMRAIContext.h
+++ b/source/solvers/packages/petsc/SNES_SAMRAIContext.h
@@ -229,7 +229,7 @@ public:
     * Destructor for solve_SNES_SAMRAIContext destroys the SNES 
     * and the PETSc solution vector wrapper.
     */
-   ~SNES_SAMRAIContext<DIM>();
+   ~SNES_SAMRAIContext();
 
    /*!
     * Return the PETSc nonlinear solver object.
diff --git a/source/solvers/packages/sundials/kinsol/KINSOL_SAMRAIContext.h b/source/solvers/packages/sundials/kinsol/KINSOL_SAMRAIContext.h
index 41ccb83..31c7d7f 100644
--- a/source/solvers/packages/sundials/kinsol/KINSOL_SAMRAIContext.h
+++ b/source/solvers/packages/sundials/kinsol/KINSOL_SAMRAIContext.h
@@ -175,7 +175,7 @@ public:
     * Destructor for algs::KINSOL_SAMRAIContext destroys the KINSOL 
     * C++ wrapper object and the KINSOL solution vector wrapper.
     */
-   ~KINSOL_SAMRAIContext<DIM>();
+   ~KINSOL_SAMRAIContext();
 
    /**
     * Initialize the state of KINSOL based on vector argument representing 
diff --git a/source/solvers/poisson/CartesianRobinBcHelper.h b/source/solvers/poisson/CartesianRobinBcHelper.h
index 8f3ebc8..49599d6 100644
--- a/source/solvers/poisson/CartesianRobinBcHelper.h
+++ b/source/solvers/poisson/CartesianRobinBcHelper.h
@@ -93,7 +93,7 @@ public:
    /*!
     * @brief Destructor.
     */
-   virtual ~CartesianRobinBcHelper<DIM>(void);
+   virtual ~CartesianRobinBcHelper();
 
 
 
diff --git a/source/solvers/poisson/CellPoissonFACOps.h b/source/solvers/poisson/CellPoissonFACOps.h
index 531969d..42e0a27 100644
--- a/source/solvers/poisson/CellPoissonFACOps.h
+++ b/source/solvers/poisson/CellPoissonFACOps.h
@@ -170,7 +170,7 @@ public:
     *
     * Deallocate internal data.
     */
-   ~CellPoissonFACOps<DIM>(void);
+   ~CellPoissonFACOps();
 
 
 
diff --git a/source/solvers/poisson/CellPoissonFACSolver.h b/source/solvers/poisson/CellPoissonFACSolver.h
index ed5b883..17a637b 100644
--- a/source/solvers/poisson/CellPoissonFACSolver.h
+++ b/source/solvers/poisson/CellPoissonFACSolver.h
@@ -138,7 +138,7 @@ public:
    /*!
     * @brief Destructor.
     */
-   ~CellPoissonFACSolver<DIM>(void);
+   ~CellPoissonFACSolver();
 
 
 
diff --git a/source/solvers/poisson/CellPoissonHypreSolver.h b/source/solvers/poisson/CellPoissonHypreSolver.h
index 4029f69..4cf87ae 100644
--- a/source/solvers/poisson/CellPoissonHypreSolver.h
+++ b/source/solvers/poisson/CellPoissonHypreSolver.h
@@ -115,7 +115,7 @@ public:
    /*!
     * The Poisson destructor releases all internally managed data.
     */
-   ~CellPoissonHypreSolver<DIM>();
+   ~CellPoissonHypreSolver();
 
    /*!
     * @brief Initialize to a given hierarchy.
diff --git a/source/solvers/poisson/GhostCellRobinBcCoefs.h b/source/solvers/poisson/GhostCellRobinBcCoefs.h
index ab8bdc6..a9f32b0 100644
--- a/source/solvers/poisson/GhostCellRobinBcCoefs.h
+++ b/source/solvers/poisson/GhostCellRobinBcCoefs.h
@@ -83,7 +83,7 @@ public:
    /*!
     * @brief Destructor.
     */
-   virtual ~GhostCellRobinBcCoefs<DIM>(void);
+   virtual ~GhostCellRobinBcCoefs();
 
 
    /*!
diff --git a/source/solvers/poisson/LocationIndexRobinBcCoefs.h b/source/solvers/poisson/LocationIndexRobinBcCoefs.h
index 9b5e28e..f98f49b 100644
--- a/source/solvers/poisson/LocationIndexRobinBcCoefs.h
+++ b/source/solvers/poisson/LocationIndexRobinBcCoefs.h
@@ -92,7 +92,7 @@ public:
    /*!
     * @brief Destructor.
     */
-   virtual ~LocationIndexRobinBcCoefs<DIM>(void);
+   virtual ~LocationIndexRobinBcCoefs();
 
 
    /*!
diff --git a/source/solvers/poisson/RobinBcCoefStrategy.h b/source/solvers/poisson/RobinBcCoefStrategy.h
index 21dd969..017ea86 100644
--- a/source/solvers/poisson/RobinBcCoefStrategy.h
+++ b/source/solvers/poisson/RobinBcCoefStrategy.h
@@ -57,7 +57,7 @@ public:
    /*!
     * @brief Destructor.
     */
-   virtual ~RobinBcCoefStrategy<DIM>(void);
+   virtual ~RobinBcCoefStrategy();
 
 
    //@{
diff --git a/source/solvers/poisson/SimpleCellRobinBcCoefs.h b/source/solvers/poisson/SimpleCellRobinBcCoefs.h
index d06c1a7..073bd8d 100644
--- a/source/solvers/poisson/SimpleCellRobinBcCoefs.h
+++ b/source/solvers/poisson/SimpleCellRobinBcCoefs.h
@@ -69,7 +69,7 @@ public:
    /*!
     * @brief Destructor.
     */
-   virtual ~SimpleCellRobinBcCoefs<DIM>(void);
+   virtual ~SimpleCellRobinBcCoefs();
 
 
 
diff --git a/source/solvers/templates/EmptySolversX.C b/source/solvers/templates/EmptySolversX.C
index c0abd23..9190fe7 100644
--- a/source/solvers/templates/EmptySolversX.C
+++ b/source/solvers/templates/EmptySolversX.C
@@ -14,6 +14,12 @@
 namespace SAMRAI {
    namespace solv {
       template<int DIM> class Empty {
+	 Empty() :
+	    something(0) 
+	 {
+	 }
+
+	 int something;
       };
 
       template class Empty< NDIM >;
diff --git a/source/solvers/vectors/PETSc_SAMRAIVectorReal.h b/source/solvers/vectors/PETSc_SAMRAIVectorReal.h
index c1b9af5..44657da 100644
--- a/source/solvers/vectors/PETSc_SAMRAIVectorReal.h
+++ b/source/solvers/vectors/PETSc_SAMRAIVectorReal.h
@@ -127,7 +127,7 @@ protected:
     * member function destroyPETScVector, which is used to destroy the PETSc
     * vector and associated "wrapper".
     */
-   virtual ~PETSc_SAMRAIVectorReal<DIM,TYPE>();
+   virtual ~PETSc_SAMRAIVectorReal();
 
 private:
    /*
diff --git a/source/solvers/vectors/SAMRAIVectorReal.h b/source/solvers/vectors/SAMRAIVectorReal.h
index b50fc0d..fd73a49 100644
--- a/source/solvers/vectors/SAMRAIVectorReal.h
+++ b/source/solvers/vectors/SAMRAIVectorReal.h
@@ -151,7 +151,7 @@ public:
     * some pre-existing patch data objects that must live beyond the 
     * destruction of the vector object.
     */
-   virtual ~SAMRAIVectorReal<DIM,TYPE>();
+   virtual ~SAMRAIVectorReal();
 
    /**
     * Set string identifier for this vector object.
diff --git a/source/solvers/vectors/Sundials_SAMRAIVector.h b/source/solvers/vectors/Sundials_SAMRAIVector.h
index d29c4a6..91b2116 100644
--- a/source/solvers/vectors/Sundials_SAMRAIVector.h
+++ b/source/solvers/vectors/Sundials_SAMRAIVector.h
@@ -106,7 +106,7 @@ protected:
    /*
     * Virtual destructor for Sundials_SAMRAIVector<DIM>.
     */
-   virtual ~Sundials_SAMRAIVector<DIM>();
+   virtual ~Sundials_SAMRAIVector();
 
 private:
    /*
diff --git a/source/toolbox/base/Utilities.h b/source/toolbox/base/Utilities.h
index 8b2bded..47cea96 100644
--- a/source/toolbox/base/Utilities.h
+++ b/source/toolbox/base/Utilities.h
@@ -121,9 +121,7 @@ struct Utilities
  * A null use of a variable, use to avoid GNU compiler 
  * warnings about unused variables.
  */
-#define NULL_USE(variable) do { \
-       if(0) {char *temp = (char *)&variable; temp++;} \
-    } while (0)
+#define NULL_USE(variable) (void)(variable)
 
 /*!
  * Throw an error exception from within any C++ source code.  The 
diff --git a/source/toolbox/inputdb/Grammar.C b/source/toolbox/inputdb/Grammar.C
index 870343a..b2f7761 100644
--- a/source/toolbox/inputdb/Grammar.C
+++ b/source/toolbox/inputdb/Grammar.C
@@ -321,7 +321,7 @@ union yyalloc
 #   define YYCOPY(To, From, Count)		\
       do					\
 	{					\
-	  register YYSIZE_T yyi;		\
+	  YYSIZE_T yyi;		\
 	  for (yyi = 0; yyi < (Count); yyi++)	\
 	    (To)[yyi] = (From)[yyi];		\
 	}					\
@@ -836,7 +836,7 @@ yystrlen (yystr)
      const char *yystr;
 #   endif
 {
-  register const char *yys = yystr;
+  const char *yys = yystr;
 
   while (*yys++ != '\0')
     continue;
@@ -861,8 +861,8 @@ yystpcpy (yydest, yysrc)
      const char *yysrc;
 #   endif
 {
-  register char *yyd = yydest;
-  register const char *yys = yysrc;
+  char *yyd = yydest;
+  const char *yys = yysrc;
 
   while ((*yyd++ = *yys++) != '\0')
     continue;
@@ -992,8 +992,8 @@ yyparse ()
 #endif
 {
   
-  register int yystate;
-  register int yyn;
+  int yystate;
+  int yyn;
   int yyresult;
   /* Number of tokens to shift before error messages enabled.  */
   int yyerrstatus;
@@ -1011,12 +1011,12 @@ yyparse ()
   /* The state stack.  */
   short	yyssa[YYINITDEPTH];
   short *yyss = yyssa;
-  register short *yyssp;
+  short *yyssp;
 
   /* The semantic value stack.  */
   YYSTYPE yyvsa[YYINITDEPTH];
   YYSTYPE *yyvs = yyvsa;
-  register YYSTYPE *yyvsp;
+  YYSTYPE *yyvsp;
 
 
 
diff --git a/source/toolbox/inputdb/Scanner.C b/source/toolbox/inputdb/Scanner.C
index 25a6892..e7e895f 100644
--- a/source/toolbox/inputdb/Scanner.C
+++ b/source/toolbox/inputdb/Scanner.C
@@ -634,9 +634,9 @@ YY_MALLOC_DECL
 
 YY_DECL
 	{
-	register yy_state_type yy_current_state;
-	register char *yy_cp = NULL, *yy_bp = NULL;
-	register int yy_act;
+	yy_state_type yy_current_state;
+	char *yy_cp = NULL, *yy_bp = NULL;
+	int yy_act;
 
 
 
@@ -683,7 +683,7 @@ YY_DECL
 yy_match:
 		do
 			{
-			register YY_CHAR yy_c = yy_ec[YY_SC_TO_UI(*yy_cp)];
+			YY_CHAR yy_c = yy_ec[YY_SC_TO_UI(*yy_cp)];
 			if ( yy_accept[yy_current_state] )
 				{
 				yy_last_accepting_state = yy_current_state;
@@ -1164,9 +1164,9 @@ ECHO;
 
 static int yy_get_next_buffer()
 	{
-	register char *dest = yy_current_buffer->yy_ch_buf;
-	register char *source = yytext_ptr;
-	register int number_to_move, i;
+	char *dest = yy_current_buffer->yy_ch_buf;
+	char *source = yytext_ptr;
+	int number_to_move, i;
 	int ret_val;
 
 	if ( yy_c_buf_p > &yy_current_buffer->yy_ch_buf[yy_n_chars + 1] )
@@ -1296,14 +1296,14 @@ static int yy_get_next_buffer()
 
 static yy_state_type yy_get_previous_state()
 	{
-	register yy_state_type yy_current_state;
-	register char *yy_cp;
+	yy_state_type yy_current_state;
+	char *yy_cp;
 
 	yy_current_state = yy_start;
 
 	for ( yy_cp = yytext_ptr + YY_MORE_ADJ; yy_cp < yy_c_buf_p; ++yy_cp )
 		{
-		register YY_CHAR yy_c = (*yy_cp ? yy_ec[YY_SC_TO_UI(*yy_cp)] : 1);
+		YY_CHAR yy_c = (*yy_cp ? yy_ec[YY_SC_TO_UI(*yy_cp)] : 1);
 		if ( yy_accept[yy_current_state] )
 			{
 			yy_last_accepting_state = yy_current_state;
@@ -1335,10 +1335,10 @@ static yy_state_type yy_try_NUL_trans( yy_current_state )
 yy_state_type yy_current_state;
 #endif
 	{
-	register int yy_is_jam;
-	register char *yy_cp = yy_c_buf_p;
+	int yy_is_jam;
+	char *yy_cp = yy_c_buf_p;
 
-	register YY_CHAR yy_c = 1;
+	YY_CHAR yy_c = 1;
 	if ( yy_accept[yy_current_state] )
 		{
 		yy_last_accepting_state = yy_current_state;
@@ -1359,14 +1359,14 @@ yy_state_type yy_current_state;
 
 #ifndef YY_NO_UNPUT
 #ifdef YY_USE_PROTOS
-static void yyunput( int c, register char *yy_bp )
+static void yyunput( int c, char *yy_bp )
 #else
 static void yyunput( c, yy_bp )
 int c;
-register char *yy_bp;
+char *yy_bp;
 #endif
 	{
-	register char *yy_cp = yy_c_buf_p;
+	char *yy_cp = yy_c_buf_p;
 
 	/* undo effects of setting up yytext */
 	*yy_cp = yy_hold_char;
@@ -1374,10 +1374,10 @@ register char *yy_bp;
 	if ( yy_cp < yy_current_buffer->yy_ch_buf + 2 )
 		{ /* need to shift things up to make room */
 		/* +2 for EOB chars. */
-		register int number_to_move = yy_n_chars + 2;
-		register char *dest = &yy_current_buffer->yy_ch_buf[
+		int number_to_move = yy_n_chars + 2;
+		char *dest = &yy_current_buffer->yy_ch_buf[
 					yy_current_buffer->yy_buf_size + 2];
-		register char *source =
+		char *source =
 				&yy_current_buffer->yy_ch_buf[number_to_move];
 
 		while ( source > yy_current_buffer->yy_ch_buf )
@@ -1834,7 +1834,7 @@ yyconst char *s2;
 int n;
 #endif
 	{
-	register int i;
+	int i;
 	for ( i = 0; i < n; ++i )
 		s1[i] = s2[i];
 	}
@@ -1848,7 +1848,7 @@ static int yy_flex_strlen( s )
 yyconst char *s;
 #endif
 	{
-	register int n;
+	int n;
 	for ( n = 0; s[n]; ++n )
 	do {} while(0);
 
diff --git a/source/toolbox/memory/MemoryUtilities.C b/source/toolbox/memory/MemoryUtilities.C
index 6b8d185..c22f272 100644
--- a/source/toolbox/memory/MemoryUtilities.C
+++ b/source/toolbox/memory/MemoryUtilities.C
@@ -84,7 +84,8 @@ void MemoryUtilities::printMemoryInfo(std::ostream& os)
       << number_allocated << " allocs, "
       << reserved_mem/(1024.0*1024.0) << "MB reserved ("
       << free_mem << " unused)" << std::endl;
-
+#else
+   NULL_USE(os);
 #endif
 }
 
diff --git a/source/toolbox/parallel/Schedule.C b/source/toolbox/parallel/Schedule.C
index 386c2b9..f68d970 100644
--- a/source/toolbox/parallel/Schedule.C
+++ b/source/toolbox/parallel/Schedule.C
@@ -12,6 +12,8 @@
 #include "tbox/TimerManager.h"
 #include "tbox/Timer.h"
 
+#include <vector>
+
 namespace SAMRAI {
    namespace tbox {
 
@@ -163,6 +165,24 @@ void Schedule::beginCommunication()
 void Schedule::finalizeCommunication()
 {
    performLocalCopies();
+
+#ifdef HAVE_MPI
+   std::vector<MPI_Request> requests;
+   // Wait for both sends and recvs to complete
+   for (int p = 0; p < d_nnodes; p++) {
+      if (d_incoming[p].d_stream_in_use) {
+         requests.push_back(d_incoming[p].d_request_id);
+         d_incoming[p].d_request_id = MPI_REQUEST_NULL;
+      }
+      if (d_outgoing[p].d_stream_in_use) {
+         requests.push_back(d_outgoing[p].d_request_id);
+         d_outgoing[p].d_request_id = MPI_REQUEST_NULL;
+      }
+   }
+   int ierr = MPI_Waitall(requests.size(), requests.data(), MPI_STATUSES_IGNORE);
+   TBOX_ASSERT(ierr == 0);
+#endif
+
    processIncomingMessages();
    deallocateSendBuffers();
 }
@@ -220,7 +240,10 @@ void Schedule::calculateReceiveSizes()
     * If the size of the receive message cannot be determined from local
     * information, then post a message receive from the sending processor.
     */
-
+#ifdef HAVE_MPI
+   int ierr = 0;
+   std::vector<MPI_Request> requests;
+#endif
    for (int p = 0; p < d_nnodes; p++) {
       int bytes = 0;
       bool needs_bytes = false;
@@ -241,13 +264,15 @@ void Schedule::calculateReceiveSizes()
          d_incoming[p].d_stream_in_use              = true;
 #ifdef HAVE_MPI
          SAMRAI_MPI::updateIncomingStatistics(1, sizeof(int));
-         (void) MPI_Irecv(&d_incoming[p].d_bytes_in_stream,
+         ierr = MPI_Irecv(&d_incoming[p].d_bytes_in_stream,
                           1,
                           MPI_INT,
                           p,
                           SCHEDULE_SIZE_TAG,
                           SAMRAI_MPI::getCommunicator(),
                           &d_incoming[p].d_request_id);
+         TBOX_ASSERT(ierr == 0);
+         requests.push_back(d_incoming[p].d_request_id);
 #endif
       }
    }
@@ -261,28 +286,33 @@ void Schedule::calculateReceiveSizes()
       if (d_outgoing[q].d_must_communicate_byte_size) {
 #ifdef HAVE_MPI
          SAMRAI_MPI::updateOutgoingStatistics(1, sizeof(int));
-         (void) MPI_Send(&d_outgoing[q].d_bytes_in_stream,
-                         1,
-                         MPI_INT,
-                         q,
-                         SCHEDULE_SIZE_TAG,
-                         SAMRAI_MPI::getCommunicator());
+         ierr = MPI_Isend(&d_outgoing[q].d_bytes_in_stream,
+                          1,
+                          MPI_INT,
+                          q,
+                          SCHEDULE_SIZE_TAG,
+                          SAMRAI_MPI::getCommunicator(),
+                          &d_outgoing[q].d_request_id);
+         TBOX_ASSERT(ierr == 0);
+         requests.push_back(d_outgoing[q].d_request_id);
 #endif
       }
    }
 
-   /*
-    * Wait for all message receives to complete
-    */
+#ifdef HAVE_MPI
+   ierr = MPI_Waitall(static_cast<int>(requests.size()),
+                      requests.data(),
+                      MPI_STATUSES_IGNORE);
+   TBOX_ASSERT(ierr == 0);
+#endif
 
    for (int w = 0; w < d_nnodes; w++) {
       if (d_incoming[w].d_stream_in_use) {
-#ifdef HAVE_MPI
-         MPI_Status status;
-         (void) MPI_Wait(&d_incoming[w].d_request_id, &status);
-#endif
          d_incoming[w].d_stream_in_use = false;
       }
+      if (d_outgoing[w].d_stream_in_use) {
+         d_outgoing[w].d_stream_in_use = false;
+      }
    }
 }
 
@@ -306,13 +336,14 @@ void Schedule::postMessageReceives()
             new MessageStream(bytes, MessageStream::Read);
 #ifdef HAVE_MPI
          SAMRAI_MPI::updateIncomingStatistics(1, bytes);
-         (void) MPI_Irecv(d_incoming[p].d_stream->getBufferStart(),
-                          bytes,
-                          MPI_BYTE,
-                          p,
-                          SCHEDULE_DATA_TAG,
-                          SAMRAI_MPI::getCommunicator(),
-                          &d_incoming[p].d_request_id);
+         int ierr = MPI_Irecv(d_incoming[p].d_stream->getBufferStart(),
+                              bytes,
+                              MPI_BYTE,
+                              p,
+                              SCHEDULE_DATA_TAG,
+                              SAMRAI_MPI::getCommunicator(),
+                              &d_incoming[p].d_request_id);
+         TBOX_ASSERT(ierr == 0);
 #endif
       }
    }
@@ -342,13 +373,14 @@ void Schedule::sendMessages()
          }
 #ifdef HAVE_MPI
          SAMRAI_MPI::updateOutgoingStatistics(1, bytes);
-         (void) MPI_Isend(d_outgoing[p].d_stream->getBufferStart(),
-                          d_outgoing[p].d_stream->getCurrentSize(),
-                          MPI_BYTE,
-                          p,
-                          SCHEDULE_DATA_TAG,
-                          SAMRAI_MPI::getCommunicator(),
-                          &d_outgoing[p].d_request_id);
+         int ierr = MPI_Isend(d_outgoing[p].d_stream->getBufferStart(),
+                              d_outgoing[p].d_stream->getCurrentSize(),
+                              MPI_BYTE,
+                              p,
+                              SCHEDULE_DATA_TAG,
+                              SAMRAI_MPI::getCommunicator(),
+                              &d_outgoing[p].d_request_id);
+         TBOX_ASSERT(ierr == 0);
 #endif
       }
    }
@@ -380,32 +412,15 @@ void Schedule::performLocalCopies()
 
 void Schedule::processIncomingMessages()
 {
-   int nwait = 0;
    for (int p = 0; p < d_nnodes; p++) {
-      if (d_incoming[p].d_stream_in_use) nwait++;
-   }
-
-   int index = -1;
-   while (nwait > 0) {
-
-      int gotit = 0;
-      while (!gotit) {
-         index = (index + 1) % d_nnodes;
-         if (d_incoming[index].d_stream_in_use) {
-#ifdef HAVE_MPI
-            MPI_Status status;
-            (void) MPI_Test(&d_incoming[index].d_request_id, &gotit, &status);
-#endif
+      if (d_incoming[p].d_stream_in_use) {
+         for (ITERATOR recv(d_recv_set[p]); recv; recv++) {
+            recv()->unpackStream(*d_incoming[p].d_stream);
          }
-      }
 
-      for (ITERATOR recv(d_recv_set[index]); recv; recv++) {
-         recv()->unpackStream(*d_incoming[index].d_stream);
+         d_incoming[p].d_stream_in_use = false;
+         d_incoming[p].d_stream.setNull();
       }
-
-      d_incoming[index].d_stream_in_use = false;
-      d_incoming[index].d_stream.setNull();
-      nwait--;
    }
 }
 
@@ -421,10 +436,6 @@ void Schedule::deallocateSendBuffers()
 {
    for (int p = 0; p < d_nnodes; p++) {
       if (d_outgoing[p].d_stream_in_use) {
-#ifdef HAVE_MPI
-         MPI_Status status;
-         (void) MPI_Wait(&d_outgoing[p].d_request_id, &status);
-#endif
          d_outgoing[p].d_stream_in_use = false;
          d_outgoing[p].d_stream.setNull();
       }
diff --git a/source/toolbox/restartdb/HDFDatabase.C b/source/toolbox/restartdb/HDFDatabase.C
index 057fdd5..fe28930 100644
--- a/source/toolbox/restartdb/HDFDatabase.C
+++ b/source/toolbox/restartdb/HDFDatabase.C
@@ -752,7 +752,7 @@ void HDFDatabase::putBoolArray(
    herr_t errf;
    if (nelements > 0) {
 
-      hsize_t dim[1] = {nelements};
+      hsize_t dim[1] = {static_cast<hsize_t>(nelements)};
       hid_t space = H5Screate_simple(1, dim, NULL);
 #ifdef ASSERT_HDF5_RETURN_VALUES
       TBOX_ASSERT( space >= 0 );
@@ -1367,7 +1367,7 @@ void HDFDatabase::putComplexArray(
       // Storage type
       hid_t stype = createCompoundComplex('s');
 
-      hsize_t dim[] = {nelements};
+      hsize_t dim[] = {static_cast<hsize_t>(nelements)};
       space = H5Screate_simple(1, dim, NULL);
 #ifdef ASSERT_HDF5_RETURN_VALUES
       TBOX_ASSERT( space >= 0 );
@@ -1579,7 +1579,7 @@ void HDFDatabase::putDoubleArray(
    herr_t errf;
    if (nelements > 0) {
 
-      hsize_t dim[] = {nelements};
+      hsize_t dim[] = {static_cast<hsize_t>(nelements)};
       hid_t space = H5Screate_simple(1, dim, NULL);
 #ifdef ASSERT_HDF5_RETURN_VALUES
       TBOX_ASSERT( space >= 0 );
@@ -1745,7 +1745,7 @@ void HDFDatabase::putFloatArray(
    herr_t errf;
    if (nelements > 0) {
 
-      hsize_t dim[] = {nelements};
+      hsize_t dim[] = {static_cast<hsize_t>(nelements)};
       hid_t space = H5Screate_simple(1, dim, NULL);
 #ifdef ASSERT_HDF5_RETURN_VALUES
       TBOX_ASSERT( space >= 0 );
@@ -1913,7 +1913,7 @@ void HDFDatabase::putIntegerArray(
    herr_t errf;
    if (nelements > 0) {
 
-      hsize_t dim[] = {nelements};
+      hsize_t dim[] = {static_cast<hsize_t>(nelements)};
       hid_t space = H5Screate_simple(1, dim, NULL);
 #ifdef ASSERT_HDF5_RETURN_VALUES
       TBOX_ASSERT(space >= 0);
@@ -2111,7 +2111,7 @@ void HDFDatabase::putStringArray(
       TBOX_ASSERT( errf >= 0 );
 #endif
 
-      hsize_t dim[] = {nelements};
+      hsize_t dim[] = {static_cast<hsize_t>(nelements)};
       hid_t space = H5Screate_simple(1, dim, NULL);
 #ifdef ASSERT_HDF5_RETURN_VALUES
       TBOX_ASSERT( space >= 0 );
@@ -2492,6 +2492,7 @@ void HDFDatabase::insertArray(
 
 #if (H5_VERS_MAJOR>1) || ((H5_VERS_MAJOR==1)&&(H5_VERS_MINOR > 6))
    hid_t array = H5Tarray_create(member_id, ndims, dim);
+   NULL_USE(perm);
 #else	
    /*
     * Note that perm is NOT used by HDF, see HDF documentation.
diff --git a/source/toolbox/restartdb/SiloDatabase.C b/source/toolbox/restartdb/SiloDatabase.C
index 35aefc5..89b4c2b 100644
--- a/source/toolbox/restartdb/SiloDatabase.C
+++ b/source/toolbox/restartdb/SiloDatabase.C
@@ -22,13 +22,13 @@
  * Implementation notes.
  *
  * Silo can't have spaces in directory names.  SAMRAI key names are
- * mangled to remove spaces from keynames when put into the Silo 
+ * mangled to remove spaces from keynames when put into the Silo
  * database.
  *
  * Compound types in Silo have several listings in the directory
  * structure.  Rather than unscramble the different entries the
- * compound array types are stored in a subdirectory with that 
- * key name and the actual compound type is a variable in 
+ * compound array types are stored in a subdirectory with that
+ * key name and the actual compound type is a variable in
  * that subdirectory.
  *
  */
@@ -45,12 +45,12 @@ std::string nameMangle(std::string name) {
    std::string::size_type pos = 0;
    std::string searchString(" ");
    std::string replaceString("___");
-   
+
    while ( (pos = str.find(searchString, pos)) != std::string::npos ) {
       str.replace( pos, searchString.size(), replaceString );
       pos++;
    }
-   
+
    return str;
 }
 
@@ -60,19 +60,19 @@ std::string nameDemangle(std::string name) {
    std::string::size_type pos = 0;
    std::string searchString("___ ");
    std::string replaceString(" ");
-   
+
    while ( (pos = str.find(searchString, pos)) != std::string::npos ) {
       str.replace( pos, searchString.size(), replaceString );
       pos++;
    }
-   
+
    return str;
 }
-      
+
 /*
- * Public Silo database constructor creates an empty database with the 
- * specified name.  It sets the group_ID to a default value of -1.     
- * This data is used by member functions to track parent databases.     
+ * Public Silo database constructor creates an empty database with the
+ * specified name.  It sets the group_ID to a default value of -1.
+ * This data is used by member functions to track parent databases.
 */
 SiloDatabase::SiloDatabase(const std::string& name) :
    d_is_file(false),
@@ -87,8 +87,8 @@ SiloDatabase::SiloDatabase(const std::string& name) :
 }
 
 /*
- * Private Silo database constructor creates an empty database with the 
- * specified name.  
+ * Private Silo database constructor creates an empty database with the
+ * specified name.
  */
 SiloDatabase::SiloDatabase(
    const std::string& name,
@@ -124,7 +124,7 @@ SiloDatabase::~SiloDatabase()
 {
    if (d_is_file) {
       close();
-   } 
+   }
 }
 
 /*
@@ -142,12 +142,12 @@ bool SiloDatabase::create(const std::string& name) {
 
    bool status = false;
 
-   if(d_file) {	
+   if(d_file) {
       close();
    }
 
    d_file = DBCreate(name.c_str(), DB_CLOBBER, DB_LOCAL, NULL, DB_PDB);
-   
+
    if (d_file == NULL) {
 
       TBOX_ERROR("Unable to open Silo file " << name << "\n");
@@ -178,12 +178,12 @@ bool SiloDatabase::open(const std::string& name) {
 
    bool status = false;
 
-   if(d_file) {	
+   if(d_file) {
       close();
    }
 
    d_file = DBOpen(name.c_str(), DB_UNKNOWN, DB_READ);
-   
+
    if (d_file == NULL) {
 
       TBOX_ERROR("Unable to open Silo file " << name << "\n");
@@ -241,16 +241,16 @@ bool SiloDatabase::attachToFile(DBfile *file, const std::string &directory)
       d_file = file;
       d_directory = directory;
 
-      std::string path = nameMangle(d_directory);      
+      std::string path = nameMangle(d_directory);
       if(!DBInqVarType(d_file, path.c_str()) == DB_DIR) {
 	 int err = DBMkdir(d_file, path.c_str());
 	 if(err < 0) {
 	    TBOX_ERROR("SiloDatabase: MkDir failed " << d_directory << std::endl );
 	 }
       }
-      
-   } else {      
-      TBOX_ERROR("SiloDatabase: Invalid file supplied to attachToFile" 
+
+   } else {
+      TBOX_ERROR("SiloDatabase: Invalid file supplied to attachToFile"
 		 << std::endl);
       status = false;
    }
@@ -314,7 +314,7 @@ Array<std::string> SiloDatabase::getAllKeys()
       DBtoc *toc = DBGetToc(d_file);
 
       tmp_keys.resizeArray(toc -> nvar + toc -> ndir);
-     
+
       for(int i = 0; i < toc -> nvar; i++) {
 	 tmp_keys[i] = toc -> var_names[i];
       }
@@ -327,7 +327,7 @@ Array<std::string> SiloDatabase::getAllKeys()
    } else {
       TBOX_ERROR("Not a database " << d_directory << std::endl );
    }
-   
+
    return(tmp_keys);
 }
 
@@ -345,13 +345,13 @@ enum Database::DataType SiloDatabase::getArrayType(const std::string& key)
 #endif
 
    enum Database::DataType type = Database::SAMRAI_INVALID;
-   
+
    std::string path = d_directory + "/" + key;
    path = nameMangle(path);
 
    DBObjectType var_type = DBInqVarType(d_file, path.c_str());
-   
-   if( var_type == DB_VARIABLE) { 
+
+   if( var_type == DB_VARIABLE) {
       int obj_type = DBGetVarType(d_file, path.c_str());
 
       switch (obj_type) {
@@ -372,8 +372,8 @@ enum Database::DataType SiloDatabase::getArrayType(const std::string& key)
 	    break;
       }
    } else if (var_type == DB_DIR) {
-      
-      // Note that some of the types are stored in subdirectories 
+
+      // Note that some of the types are stored in subdirectories
       // so check to see if this dir is one of the compound array types.
       std::string sub_path = path + COMPLEX_ARRAY_NAME;
       if(DBInqVarExists(d_file, sub_path.c_str())) {
@@ -382,21 +382,21 @@ enum Database::DataType SiloDatabase::getArrayType(const std::string& key)
 	 DBFreeCompoundarray(ca);
       } else {
 	 sub_path = path + STRING_ARRAY_NAME;
-	 if(DBInqVarExists(d_file, sub_path.c_str())) { 
+	 if(DBInqVarExists(d_file, sub_path.c_str())) {
 	    DBcompoundarray *ca = DBGetCompoundarray(d_file, sub_path.c_str());
 	    type = Database::SAMRAI_STRING;
 	    DBFreeCompoundarray(ca);
 	 } else {
 	    sub_path = path + DATABASE_BOX_NAME;
-	    if(DBInqVarExists(d_file, sub_path.c_str())) { 
-	       DBcompoundarray *ca = DBGetCompoundarray(d_file, 
+	    if(DBInqVarExists(d_file, sub_path.c_str())) {
+	       DBcompoundarray *ca = DBGetCompoundarray(d_file,
 							sub_path.c_str());
 	       type = Database::SAMRAI_BOX;
 	       DBFreeCompoundarray(ca);
 	    } else {
 	       type = Database::SAMRAI_DATABASE;
 	    }
-	 } 
+	 }
       }
    } else {
       // Unrecognized type return INVALID
@@ -422,19 +422,19 @@ int SiloDatabase::getArraySize(const std::string& key)
 #ifdef DEBUG_CHECK_ASSERTIONS
    TBOX_ASSERT(!key.empty());
 #endif
-   
+
    int array_size = 0;
 
    std::string path = d_directory + "/" + key;
    path = nameMangle(path);
 
    DBObjectType var_type = DBInqVarType(d_file, path.c_str());
-   
-   if( var_type == DB_VARIABLE) { 
+
+   if( var_type == DB_VARIABLE) {
       array_size = getSiloSimpleTypeLength(key);
    } else if (var_type == DB_DIR) {
-      
-      // Note that some of the types are stored in subdirectories 
+
+      // Note that some of the types are stored in subdirectories
       // so check to see if this dir is one of the compound array types.
 
       std::string sub_path = path + COMPLEX_ARRAY_NAME;
@@ -444,21 +444,21 @@ int SiloDatabase::getArraySize(const std::string& key)
 	 DBFreeCompoundarray(ca);
       } else {
 	 sub_path = path + STRING_ARRAY_NAME;
-	 if(DBInqVarExists(d_file, sub_path.c_str())) { 
+	 if(DBInqVarExists(d_file, sub_path.c_str())) {
 	    DBcompoundarray *ca = DBGetCompoundarray(d_file, sub_path.c_str());
 	    array_size = ca -> nelems;
 	    DBFreeCompoundarray(ca);
 	 } else {
 	    sub_path = path + DATABASE_BOX_NAME;
-	    if(DBInqVarExists(d_file, sub_path.c_str())) { 
-	       DBcompoundarray *ca = DBGetCompoundarray(d_file, 
+	    if(DBInqVarExists(d_file, sub_path.c_str())) {
+	       DBcompoundarray *ca = DBGetCompoundarray(d_file,
 							sub_path.c_str());
 	       array_size = ca -> elemlengths[0];
 	       DBFreeCompoundarray(ca);
 	    } else {
 	       // Directory or some other unrecognized structure return 0
 	    }
-	 } 
+	 }
       }
    } else {
       // Unrecognized type return 0
@@ -493,7 +493,7 @@ bool SiloDatabase::isDatabase(const std::string& key)
 *************************************************************************
 */
 
-Pointer<Database> 
+Pointer<Database>
 SiloDatabase::putDatabase(const std::string& key)
 {
 #ifdef DEBUG_CHECK_ASSERTIONS
@@ -520,7 +520,7 @@ SiloDatabase::putDatabase(const std::string& key)
 ************************************************************************
 */
 
-Pointer<Database> 
+Pointer<Database>
 SiloDatabase::getDatabase(const std::string& key)
 {
 #ifdef DEBUG_CHECK_ASSERTIONS
@@ -566,8 +566,8 @@ bool SiloDatabase::isBool(const std::string& key)
 */
 
 void SiloDatabase::putBoolArray(
-   const std::string& key, 
-   const bool* const data, 
+   const std::string& key,
+   const bool* const data,
    const int nelements)
 {
 #ifdef DEBUG_CHECK_ASSERTIONS
@@ -577,7 +577,7 @@ void SiloDatabase::putBoolArray(
 
    short temp_array[nelements];
 
-   for(int i = 0; i < nelements; i++) { 	
+   for(int i = 0; i < nelements; i++) {
       temp_array[i] = data[i];
    }
 
@@ -602,17 +602,17 @@ Array<bool> SiloDatabase::getBoolArray(const std::string& key)
 #endif
    if (!isBool(key)) {
       TBOX_ERROR("SiloDatabase::getBoolArray() error in database "
-		 << d_database_name << std::endl 
+		 << d_database_name << std::endl
 		 << "    Key = " << key << " is not a bool array." << std::endl);
    }
- 
+
    Array<bool> boolArray(getSiloSimpleTypeLength(key));
 
    short temp_array[getSiloSimpleTypeLength(key)];
 
    getSiloSimpleType(key, temp_array);
 
-   for(int i = 0; i < getSiloSimpleTypeLength(key); i++) { 	
+   for(int i = 0; i < getSiloSimpleTypeLength(key); i++) {
       boolArray[i] = temp_array[i];
    }
 
@@ -646,12 +646,12 @@ bool SiloDatabase::isDatabaseBox(const std::string& key)
       path += DATABASE_BOX_NAME;
 
       DBcompoundarray *ca = DBGetCompoundarray(d_file, path.c_str());
-      
+
       if(ca != NULL) {
 	 if( ca -> datatype == DB_INT) {
 	    is_type = true;
 	 }
-      } 
+      }
 
       DBFreeCompoundarray(ca);
    }
@@ -668,7 +668,7 @@ bool SiloDatabase::isDatabaseBox(const std::string& key)
 */
 void SiloDatabase::putDatabaseBoxArray(
    const std::string& key,
-   const DatabaseBox* const data, 
+   const DatabaseBox* const data,
    const int nelements)
 {
 #ifdef DEBUG_CHECK_ASSERTIONS
@@ -684,7 +684,7 @@ void SiloDatabase::putDatabaseBoxArray(
    elemnames[2] = "lo";
 
    int size = 0;
-   for(int i = 0; i < nelements; i++) {	
+   for(int i = 0; i < nelements; i++) {
       size += data[i].d_data.d_dimension;
    }
 
@@ -712,13 +712,13 @@ void SiloDatabase::putDatabaseBoxArray(
       TBOX_ERROR("SiloDatabase: MkDir failed " << d_directory << std::endl );
    }
 
-   
+
    path = d_directory + "/" + key + DATABASE_BOX_NAME;
    path = nameMangle(path);
 
-   err = DBPutCompoundarray(d_file, path.c_str(), 
-		      const_cast<char **>(elemnames), elemlengths, 
-		      3, values.getPointer(), values.size(), 
+   err = DBPutCompoundarray(d_file, path.c_str(),
+		      const_cast<char **>(elemnames), elemlengths,
+		      3, values.getPointer(), values.size(),
 		      DB_INT, NULL);
    if(err < 0) {
       TBOX_ERROR("SiloDatabase: DBPutCompoundarray failed " << d_directory << std::endl );
@@ -762,7 +762,7 @@ Array<DatabaseBox> SiloDatabase::getDatabaseBoxArray(const std::string& key)
    }
 
    DBFreeCompoundarray(ca);
-   
+
    return boxArray;
 }
 
@@ -792,7 +792,7 @@ bool SiloDatabase::isChar(const std::string& key)
 
 void SiloDatabase::putCharArray(
    const std::string& key,
-   const char* const data, 
+   const char* const data,
    const int nelements)
 {
 #ifdef DEBUG_CHECK_ASSERTIONS
@@ -822,10 +822,10 @@ Array<char> SiloDatabase::getCharArray(const std::string& key)
 
    if (!isChar(key)) {
       TBOX_ERROR("SiloDatabase::getCharArray() error in database "
-		 << d_database_name << std::endl 
+		 << d_database_name << std::endl
 		 << "    Key = " << key << " is not a char array." << std::endl);
    }
- 
+
 
    Array<char> charArray(getSiloSimpleTypeLength(key));
 
@@ -861,12 +861,12 @@ bool SiloDatabase::isComplex(const std::string& key)
       path += COMPLEX_ARRAY_NAME;
 
       DBcompoundarray *ca = DBGetCompoundarray(d_file, path.c_str());
-      
+
       if(ca != NULL) {
 	 if( ca -> datatype == DB_DOUBLE) {
 	    is_type = true;
 	 }
-      } 
+      }
 
       DBFreeCompoundarray(ca);
    }
@@ -919,9 +919,9 @@ void SiloDatabase::putComplexArray(
    path = d_directory + "/" + key + COMPLEX_ARRAY_NAME;
    path = nameMangle(path);
 
-   err = DBPutCompoundarray(d_file, path.c_str(), 
-		      const_cast<char **>(elemnames), elemlengths, 2, 
-		      values.getPointer(), values.size(), 
+   err = DBPutCompoundarray(d_file, path.c_str(),
+		      const_cast<char **>(elemnames), elemlengths, 2,
+		      values.getPointer(), values.size(),
 		      DB_DOUBLE, NULL);
    if(err < 0) {
       TBOX_ERROR("SiloDatabase DBPutCompoundarray failed " << d_directory << std::endl );
@@ -957,10 +957,9 @@ Array<dcomplex> SiloDatabase::getComplexArray(const std::string& key)
 
    Array<dcomplex> complexArray(ca -> elemlengths[0]);
 
-   for(int i = 0; i < ca -> elemlengths[0]; i++) {
-      complexArray[i].real() = static_cast<double *>(ca -> values)[i];
-      complexArray[i].imag() = 
-	 static_cast<double *>(ca -> values)[i + ca -> elemlengths[0]];
+   for(int i = 0; i < ca->elemlengths[0]; i++) {
+     complexArray[i] = dcomplex(reinterpret_cast<double *>(ca->values)[i],
+                                reinterpret_cast<double *>(ca->values)[i + ca->elemlengths[0]]);
    }
 
    DBFreeCompoundarray(ca);
@@ -1087,10 +1086,10 @@ Array<float> SiloDatabase::getFloatArray(const std::string& key)
 #endif
    if (!isFloat(key)) {
       TBOX_ERROR("SiloDatabase::getFloatArray() error in database "
-		 << d_database_name << std::endl 
+		 << d_database_name << std::endl
 		 << "    Key = " << key << " is not a float array." << std::endl);
    }
- 
+
    Array<float> floatArray(getSiloSimpleTypeLength(key));
 
    getSiloSimpleType(key, floatArray.getPointer());
@@ -1124,15 +1123,15 @@ bool SiloDatabase::isInteger(const std::string& key)
 */
 
 void SiloDatabase::putIntegerArray(
-   const std::string& key, 
-   const int* const data, 
+   const std::string& key,
+   const int* const data,
    const int nelements)
 {
 #ifdef DEBUG_CHECK_ASSERTIONS
    TBOX_ASSERT(!key.empty());
    TBOX_ASSERT(data != (int*)NULL);
 #endif
-   putSiloSimpleType(key, data, nelements, DB_INT);   
+   putSiloSimpleType(key, data, nelements, DB_INT);
 }
 
 /*
@@ -1154,7 +1153,7 @@ Array<int> SiloDatabase::getIntegerArray(const std::string& key)
 
    if (!isInteger(key)) {
       TBOX_ERROR("SiloDatabase::getIntegerArray() error in database "
-		 << d_database_name << std::endl 
+		 << d_database_name << std::endl
 		 << "    Key = " << key << " is not a integer array." << std::endl);
    }
 
@@ -1192,12 +1191,12 @@ bool SiloDatabase::isString(const std::string& key)
       path += STRING_ARRAY_NAME;
 
       DBcompoundarray *ca = DBGetCompoundarray(d_file, path.c_str());
-      
+
       if(ca != NULL) {
 	 if( ca -> datatype == DB_CHAR) {
 	    is_type = true;
 	 }
-      } 
+      }
 
       DBFreeCompoundarray(ca);
    }
@@ -1215,8 +1214,8 @@ bool SiloDatabase::isString(const std::string& key)
 */
 
 void SiloDatabase::putStringArray(
-   const std::string& key, 
-   const std::string* const data, 
+   const std::string& key,
+   const std::string* const data,
    const int nelements)
 {
 #ifdef DEBUG_CHECK_ASSERTIONS
@@ -1249,9 +1248,9 @@ void SiloDatabase::putStringArray(
    path = d_directory + "/" + key + STRING_ARRAY_NAME;
    path = nameMangle(path);
 
-   DBPutCompoundarray(d_file, path.c_str(), 
-		      const_cast<char **>(elemnames), elemlengths, 
-		      nelements, const_cast<char *>(values.c_str()), values.size() + 1, 
+   DBPutCompoundarray(d_file, path.c_str(),
+		      const_cast<char **>(elemnames), elemlengths,
+		      nelements, const_cast<char *>(values.c_str()), values.size() + 1,
 		      DB_CHAR, NULL);
    if(err < 0) {
       TBOX_ERROR("SiloDatabase DBPutCompoundarray failed " << d_directory << std::endl );
@@ -1279,7 +1278,7 @@ Array<std::string> SiloDatabase::getStringArray(const std::string& key)
 
    if (!isString(key)) {
       TBOX_ERROR("SiloDatabase::getStringArray() error in database "
-		 << d_database_name << std::endl 
+		 << d_database_name << std::endl
 		 << "    Key = " << key << " is not a string array." << std::endl);
    }
 
@@ -1309,7 +1308,7 @@ Array<std::string> SiloDatabase::getStringArray(const std::string& key)
 *                                                                       *
 * Print contents of current database to the specified output stream.    *
 * Note that contents of subdatabases will not be printed.  This must    *
-* be done by iterating through all the subdatabases individually.       * 
+* be done by iterating through all the subdatabases individually.       *
 *                                                                       *
 *************************************************************************
 */
@@ -1320,10 +1319,10 @@ void SiloDatabase::printClassData(std::ostream& os)
    Array<std::string>  keys = getAllKeys();
 
    if (keys.getSize() == 0) {
-      os << "Database named `"<< d_database_name 
+      os << "Database named `"<< d_database_name
          << "' has zero keys..." << std::endl;
    } else {
-      os << "Printing contents of database named `" 
+      os << "Printing contents of database named `"
          << d_database_name << "'..." << std::endl;
    }
 
@@ -1331,59 +1330,59 @@ void SiloDatabase::printClassData(std::ostream& os)
       switch ( getArrayType(keys[i] ) ) {
 	 case Database::SAMRAI_INVALID: {
 	       os << "   Data entry `"<< keys[i] << "' is"
-		  << " invalid" << std::endl;   
+		  << " invalid" << std::endl;
 	       break;
 	    }
 	    case Database::SAMRAI_DATABASE: {
 	       os << "   Data entry `"<< keys[i] << "' is"
-		  << " a database" << std::endl;   
+		  << " a database" << std::endl;
 	       break;
 	    }
 	    case Database::SAMRAI_BOOL: {
 	       os << "   Data entry `"<< keys[i] << "' is"
-		  << " a boolean array" << std::endl;   
+		  << " a boolean array" << std::endl;
 	       break;
 	    }
 	    case Database::SAMRAI_CHAR: {
 	       os << "   Data entry `"<< keys[i] << "' is"
-		  << " a char array" << std::endl;   
+		  << " a char array" << std::endl;
 	       break;
 	    }
 	    case Database::SAMRAI_INT: {
 	       os << "   Data entry `"<< keys[i] << "' is"
-		  << " a integer array" << std::endl;   
+		  << " a integer array" << std::endl;
 	       break;
 	    }
 	    case Database::SAMRAI_COMPLEX: {
 	       os << "   Data entry `"<< keys[i] << "' is"
-		  << " a complex array" << std::endl;   
+		  << " a complex array" << std::endl;
 	       break;
 	    }
 	    case Database::SAMRAI_DOUBLE: {
 	       os << "   Data entry `"<< keys[i] << "' is"
-		  << " a complex array" << std::endl;   
+		  << " a complex array" << std::endl;
 	       break;
 	    }
 	    case Database::SAMRAI_FLOAT: {
 	       os << "   Data entry `"<< keys[i] << "' is"
-		  << " a float array" << std::endl;   
+		  << " a float array" << std::endl;
 	       break;
 	    }
 	    case Database::SAMRAI_STRING: {
 	       os << "   Data entry `"<< keys[i] << "' is"
-		  << " a string array" << std::endl;   
+		  << " a string array" << std::endl;
 	       break;
 	    }
 	    case Database::SAMRAI_BOX: {
 	       os << "   Data entry `"<< keys[i] << "' is"
-		  << " a datbase box array" << std::endl;   
+		  << " a datbase box array" << std::endl;
 	       break;
 	    }
 
       }
    }
 
-   
+
 }
 
 
@@ -1414,7 +1413,7 @@ bool SiloDatabase::isSiloSimpleType(const std::string& key, const int simple_typ
 
    bool is_type = false;
 
-   // First check to see if it is a variable, if so then check to 
+   // First check to see if it is a variable, if so then check to
    // see if it is the correct type of variable
    if(isSiloType(key, DB_VARIABLE)) {
       std::string path = d_directory + "/" + key;
@@ -1446,7 +1445,7 @@ bool SiloDatabase::putSiloSimpleType(const std::string& key, const void *data, c
       err = DBWrite(d_file, path.c_str(), const_cast<void *>(data), dims, 1, simple_type);
       if(err < 0) {
 	 TBOX_ERROR("SiloDatabase DBWrite failed " << key << std::endl);
-      } 
+      }
 
    return err < 0;
 }
@@ -1466,7 +1465,7 @@ bool SiloDatabase::getSiloSimpleType(const std::string& key, void *data)
    err = DBReadVar(d_file, path.c_str(), data);
    if(err < 0) {
       TBOX_ERROR("SiloDatabase DBRead failed " << key << std::endl);
-   } 
+   }
 
    return err < 0;
 }
diff --git a/source/toolbox/templates/special/stl-FundamentalTypes.C b/source/toolbox/templates/special/stl-FundamentalTypes.C
index 8e37615..1d6b783 100644
--- a/source/toolbox/templates/special/stl-FundamentalTypes.C
+++ b/source/toolbox/templates/special/stl-FundamentalTypes.C
@@ -66,6 +66,8 @@
  * functions and member functions must be instantiated individually.
  */
 
+#if 0 // some of these don't make sense; get rid of it
+
 
 template class std::set<int>;
 
@@ -102,4 +104,4 @@ template void std::vector<double>::insert<const double *>(std::vector<double>::i
 
 
 
-
+#endif
diff --git a/source/transfer/datamovers/locally_active/LocallyActiveDataCoarsenAlgorithm.h b/source/transfer/datamovers/locally_active/LocallyActiveDataCoarsenAlgorithm.h
index ae15fb7..b67435c 100644
--- a/source/transfer/datamovers/locally_active/LocallyActiveDataCoarsenAlgorithm.h
+++ b/source/transfer/datamovers/locally_active/LocallyActiveDataCoarsenAlgorithm.h
@@ -123,7 +123,7 @@ public:
    /*!
     * The virtual destructor for the algorithm releases all internal storage.
     */
-   virtual ~LocallyActiveDataCoarsenAlgorithm<DIM>();
+   virtual ~LocallyActiveDataCoarsenAlgorithm();
 
    /*!
     * Register a coarsening operation with the coarsening algorithm.  Data
diff --git a/source/transfer/datamovers/locally_active/LocallyActiveDataCoarsenSchedule.h b/source/transfer/datamovers/locally_active/LocallyActiveDataCoarsenSchedule.h
index 56a5998..c04f5ab 100644
--- a/source/transfer/datamovers/locally_active/LocallyActiveDataCoarsenSchedule.h
+++ b/source/transfer/datamovers/locally_active/LocallyActiveDataCoarsenSchedule.h
@@ -127,7 +127,7 @@ public:
    /*!
     * The virtual destructor for the schedule releases all internal storage.
     */
-   virtual ~LocallyActiveDataCoarsenSchedule<DIM>();
+   virtual ~LocallyActiveDataCoarsenSchedule();
 
    /*!
     * Execute the stored communication schedule and perform the data movement.
diff --git a/source/transfer/datamovers/locally_active/LocallyActiveDataFillBox.h b/source/transfer/datamovers/locally_active/LocallyActiveDataFillBox.h
index 17f868b..435c620 100644
--- a/source/transfer/datamovers/locally_active/LocallyActiveDataFillBox.h
+++ b/source/transfer/datamovers/locally_active/LocallyActiveDataFillBox.h
@@ -79,7 +79,7 @@ public:
    /*!
     * The destructor releases all box and locally-active data storage.
     */
-   virtual ~LocallyActiveDataFillBox<DIM>();
+   virtual ~LocallyActiveDataFillBox();
 
    /*!
     * Return constant reference to box maintained by this object.
diff --git a/source/transfer/datamovers/locally_active/LocallyActiveDataFillBoxSet.h b/source/transfer/datamovers/locally_active/LocallyActiveDataFillBoxSet.h
index 9201448..d0738c7 100644
--- a/source/transfer/datamovers/locally_active/LocallyActiveDataFillBoxSet.h
+++ b/source/transfer/datamovers/locally_active/LocallyActiveDataFillBoxSet.h
@@ -63,7 +63,7 @@ public:
    /*!
     * The destructor releases all box and locally-active data storage.
     */
-   virtual ~LocallyActiveDataFillBoxSet<DIM>();
+   virtual ~LocallyActiveDataFillBoxSet();
 
    /*!
     * Clears all existing box and locally-active data information for calling object 
diff --git a/source/transfer/datamovers/locally_active/LocallyActiveDataRefineAlgorithm.h b/source/transfer/datamovers/locally_active/LocallyActiveDataRefineAlgorithm.h
index 7bd6c30..aa69d47 100644
--- a/source/transfer/datamovers/locally_active/LocallyActiveDataRefineAlgorithm.h
+++ b/source/transfer/datamovers/locally_active/LocallyActiveDataRefineAlgorithm.h
@@ -120,7 +120,7 @@ public:
    /*!
     * The virtual destructor for the algorithm releases all internal storage.
     */
-   virtual ~LocallyActiveDataRefineAlgorithm<DIM>();
+   virtual ~LocallyActiveDataRefineAlgorithm();
 
    /*!
     * Register a refine operation with the refine algorithm object.  This 
diff --git a/source/transfer/datamovers/locally_active/LocallyActiveDataRefineSchedule.h b/source/transfer/datamovers/locally_active/LocallyActiveDataRefineSchedule.h
index 5f42b82..ef6aaa3 100644
--- a/source/transfer/datamovers/locally_active/LocallyActiveDataRefineSchedule.h
+++ b/source/transfer/datamovers/locally_active/LocallyActiveDataRefineSchedule.h
@@ -203,7 +203,7 @@ public:
    /*!
     * Virtual destructor for the schedule releases all internal storage.
     */
-   virtual ~LocallyActiveDataRefineSchedule<DIM>();
+   virtual ~LocallyActiveDataRefineSchedule();
 
    /*!
     * @brief Execute the stored communication schedule and perform
diff --git a/source/transfer/datamovers/locally_active/StandardLocallyActiveDataCoarsenTransactionFactory.h b/source/transfer/datamovers/locally_active/StandardLocallyActiveDataCoarsenTransactionFactory.h
index 7868ce2..4dbecd9 100644
--- a/source/transfer/datamovers/locally_active/StandardLocallyActiveDataCoarsenTransactionFactory.h
+++ b/source/transfer/datamovers/locally_active/StandardLocallyActiveDataCoarsenTransactionFactory.h
@@ -47,7 +47,7 @@ public:
    /*!
     * @brief Virtual destructor.
     */
-   virtual ~StandardLocallyActiveDataCoarsenTransactionFactory<DIM>();
+   virtual ~StandardLocallyActiveDataCoarsenTransactionFactory();
 
    /*!
     * @brief Set the array of CoarsenClass::Data items used by the transactions.
diff --git a/source/transfer/datamovers/locally_active/StandardLocallyActiveDataRefineTransactionFactory.h b/source/transfer/datamovers/locally_active/StandardLocallyActiveDataRefineTransactionFactory.h
index 79935df..20fed02 100644
--- a/source/transfer/datamovers/locally_active/StandardLocallyActiveDataRefineTransactionFactory.h
+++ b/source/transfer/datamovers/locally_active/StandardLocallyActiveDataRefineTransactionFactory.h
@@ -48,7 +48,7 @@ public:
    /*!
     * @brief Virtual destructor.
     */
-   virtual ~StandardLocallyActiveDataRefineTransactionFactory<DIM>();
+   virtual ~StandardLocallyActiveDataRefineTransactionFactory();
 
    /*!
     * @brief Set the array of RefineClass::Data items used by the transactions.
diff --git a/source/transfer/datamovers/standard/CoarsenAlgorithm.h b/source/transfer/datamovers/standard/CoarsenAlgorithm.h
index b3f10db..f5b3d00 100644
--- a/source/transfer/datamovers/standard/CoarsenAlgorithm.h
+++ b/source/transfer/datamovers/standard/CoarsenAlgorithm.h
@@ -117,7 +117,7 @@ public:
    /*!
     * The virtual destructor for the algorithm releases all internal storage.
     */
-   virtual ~CoarsenAlgorithm<DIM>();
+   virtual ~CoarsenAlgorithm();
 
    /*!
     * Register a coarsening operation with the coarsening algorithm.  Data
diff --git a/source/transfer/datamovers/standard/CoarsenClasses.h b/source/transfer/datamovers/standard/CoarsenClasses.h
index a0a2781..2a84665 100644
--- a/source/transfer/datamovers/standard/CoarsenClasses.h
+++ b/source/transfer/datamovers/standard/CoarsenClasses.h
@@ -64,7 +64,7 @@ public:
     * The virtual destructor destroys the coarsen data items owned
     * by this object (and the associated CoarsenAlgorithm<DIM> object).
     */
-   virtual ~CoarsenClasses<DIM>();
+   virtual ~CoarsenClasses();
 
    /**
     * Return number of equivalence classes maintained by this object
diff --git a/source/transfer/datamovers/standard/CoarsenCopyTransaction.h b/source/transfer/datamovers/standard/CoarsenCopyTransaction.h
index eb74ca3..8b975ef 100644
--- a/source/transfer/datamovers/standard/CoarsenCopyTransaction.h
+++ b/source/transfer/datamovers/standard/CoarsenCopyTransaction.h
@@ -93,7 +93,7 @@ public:
     * The virtual destructor for the copy transaction releases all
     * memory associated with the transaction.
     */
-   virtual ~CoarsenCopyTransaction<DIM>();
+   virtual ~CoarsenCopyTransaction();
 
    /*!
     * Return a boolean indicating whether this transaction can estimate
diff --git a/source/transfer/datamovers/standard/CoarsenPatchStrategy.h b/source/transfer/datamovers/standard/CoarsenPatchStrategy.h
index 896f144..651435b 100644
--- a/source/transfer/datamovers/standard/CoarsenPatchStrategy.h
+++ b/source/transfer/datamovers/standard/CoarsenPatchStrategy.h
@@ -51,7 +51,7 @@ public:
    /*!
     * The virtual destructor for coarsen strategy does nothing interesting.
     */
-   virtual ~CoarsenPatchStrategy<DIM>();
+   virtual ~CoarsenPatchStrategy();
 
    /*!
     * Return maximum stencil width needed over all user-defined
diff --git a/source/transfer/datamovers/standard/CoarsenSchedule.h b/source/transfer/datamovers/standard/CoarsenSchedule.h
index 1f13eb5..b5d8dcf 100644
--- a/source/transfer/datamovers/standard/CoarsenSchedule.h
+++ b/source/transfer/datamovers/standard/CoarsenSchedule.h
@@ -122,7 +122,7 @@ public:
    /*!
     * The virtual destructor for the schedule releases all internal storage.
     */
-   virtual ~CoarsenSchedule<DIM>();
+   virtual ~CoarsenSchedule();
 
    /*!
     * Reset this coarsen schedule to perform data transfers asssociated with
diff --git a/source/transfer/datamovers/standard/RefineAlgorithm.h b/source/transfer/datamovers/standard/RefineAlgorithm.h
index 5323ebe..81a7f52 100644
--- a/source/transfer/datamovers/standard/RefineAlgorithm.h
+++ b/source/transfer/datamovers/standard/RefineAlgorithm.h
@@ -120,7 +120,7 @@ public:
    /*!
     * The virtual destructor for the algorithm releases all internal storage.
     */
-   virtual ~RefineAlgorithm<DIM>();
+   virtual ~RefineAlgorithm();
 
    /*!
     * Register a refine operation with the refine algorithm object.  This 
diff --git a/source/transfer/datamovers/standard/RefineClasses.h b/source/transfer/datamovers/standard/RefineClasses.h
index 6eb5c50..1c26721 100644
--- a/source/transfer/datamovers/standard/RefineClasses.h
+++ b/source/transfer/datamovers/standard/RefineClasses.h
@@ -66,7 +66,7 @@ public:
     * The virtual destructor destroys the refinement data items owned 
     * by this object (and the associated RefineAlgorithm<DIM> object).
     */
-   virtual ~RefineClasses<DIM>();
+   virtual ~RefineClasses();
 
    /**
     * Return number of equivalence classes maintained by this object
diff --git a/source/transfer/datamovers/standard/RefineCopyTransaction.h b/source/transfer/datamovers/standard/RefineCopyTransaction.h
index 58bf391..3b6dc44 100644
--- a/source/transfer/datamovers/standard/RefineCopyTransaction.h
+++ b/source/transfer/datamovers/standard/RefineCopyTransaction.h
@@ -93,7 +93,7 @@ public:
     * The virtual destructor for the copy transaction releases all
     * memory associated with the transaction.
     */
-   virtual ~RefineCopyTransaction<DIM>();
+   virtual ~RefineCopyTransaction();
 
    /*!
     * Return a boolean indicating whether this transaction can estimate
diff --git a/source/transfer/datamovers/standard/RefineSchedule.C b/source/transfer/datamovers/standard/RefineSchedule.C
index d4e6a90..d19fb4a 100644
--- a/source/transfer/datamovers/standard/RefineSchedule.C
+++ b/source/transfer/datamovers/standard/RefineSchedule.C
@@ -41,18 +41,6 @@ namespace SAMRAI {
 #define BIG_GHOST_CELL_WIDTH  (10)
 
 
-/*!
- * Timer objects for performance measurement.
- */
-static tbox::Pointer<tbox::Timer> t_fill_data;
-static tbox::Pointer<tbox::Timer> t_recursive_fill;
-static tbox::Pointer<tbox::Timer> t_refine_scratch_data;
-static tbox::Pointer<tbox::Timer> t_gen_sched_n_squared;
-static tbox::Pointer<tbox::Timer> t_gen_sched_box_graph;
-static tbox::Pointer<tbox::Timer> t_gen_sched_box_tree; 
-static tbox::Pointer<tbox::Timer> t_gen_comm_sched;
-static tbox::Pointer<tbox::Timer> t_finish_sched_const;
-
 /*
 *************************************************************************
 *                                                                       *
@@ -67,6 +55,22 @@ template<int DIM> const hier::IntVector<DIM>
    RefineSchedule<DIM>::s_constant_one_intvector = hier::IntVector<DIM>(1);
 template<int DIM> std::string
    RefineSchedule<DIM>::s_schedule_generation_method = "BOX_TREE";
+template<int DIM> tbox::Pointer<tbox::Timer>
+   RefineSchedule<DIM>::t_fill_data;
+template<int DIM> tbox::Pointer<tbox::Timer>
+   RefineSchedule<DIM>::t_recursive_fill;
+template<int DIM> tbox::Pointer<tbox::Timer>
+   RefineSchedule<DIM>::t_refine_scratch_data;
+template<int DIM> tbox::Pointer<tbox::Timer>
+   RefineSchedule<DIM>::t_gen_sched_n_squared;
+template<int DIM> tbox::Pointer<tbox::Timer>
+   RefineSchedule<DIM>::t_gen_sched_box_graph;
+template<int DIM> tbox::Pointer<tbox::Timer>
+   RefineSchedule<DIM>::t_gen_sched_box_tree;
+template<int DIM> tbox::Pointer<tbox::Timer>
+   RefineSchedule<DIM>::t_gen_comm_sched;
+template<int DIM> tbox::Pointer<tbox::Timer>
+   RefineSchedule<DIM>::t_finish_sched_const;
 
 /*
  * ************************************************************************
@@ -809,6 +813,19 @@ template<int DIM> void RefineSchedule<DIM>::fillData(
    d_transaction_factory->setTransactionTime(fill_time);
    d_transaction_factory->setRefineItems(d_refine_items, d_number_refine_items);
 
+   /*
+    * Set the destination level number for the variable fill pattern
+    * objects.
+    */
+   const int num_equiv_classes =
+      d_refine_classes->getNumberOfEquivalenceClasses();
+   for (int nc = 0; nc < num_equiv_classes; nc++) {
+      const typename xfer::RefineClasses<DIM>::Data& rep_item =
+         d_refine_classes->getClassRepresentative(nc);
+      rep_item.d_var_fill_pattern->setTargetPatchLevelNumber(
+         d_dst_level->getLevelNumber());
+   }
+
    /*
     * Check whether scratch data needs to be allocated on the destination
     * level.  Keep track of those allocated components so that they may be
@@ -840,6 +857,16 @@ template<int DIM> void RefineSchedule<DIM>::fillData(
 
    d_dst_level->deallocatePatchData(allocate_vector);
 
+   /*
+    * Reset the destination level number for the variable fill pattern
+    * objects.
+    */
+   for (int nc = 0; nc < num_equiv_classes; nc++) {
+      const typename xfer::RefineClasses<DIM>::Data& rep_item =
+         d_refine_classes->getClassRepresentative(nc);
+      rep_item.d_var_fill_pattern->setTargetPatchLevelNumber(-1);
+   }
+
    /*
     * Unset the refine items for all transactions.  These items are
     * shared by all transaction objects in the communication schedule.
@@ -1887,12 +1914,14 @@ template<int DIM> void RefineSchedule<DIM>::constructScheduleTransactions(
             hier::Box<DIM> src_mask( hier::Box<DIM>::shift( test_mask,-shift) );
 
             tbox::Pointer< hier::BoxOverlap<DIM> > overlap =
-               rep_item.d_var_fill_pattern->calculateOverlap(
+               rep_item.d_var_fill_pattern->calculateOverlapOnLevel(
                   *dst_pdf->getBoxGeometry(dst_box),
                   *src_pdf->getBoxGeometry(src_box),
                   dst_box,
                   src_mask,
-                  true, shift);
+                  true, shift,
+                  dst_level->getLevelNumber(),
+                  src_level->getLevelNumber());
 /*	    tbox::Pointer< hier::BoxOverlap<DIM> > overlap =
 	       dst_pdf->getBoxGeometry(dst_box)
 		      ->calculateOverlap(
@@ -2230,6 +2259,8 @@ template<int DIM> void RefineSchedule<DIM>::printClassData(std::ostream& stream)
 
 /*
 ***********************************************************************
+Allocate static timers and register freeTimers with the shutdown
+registry.
 ***********************************************************************
 */
 template<int DIM>
diff --git a/source/transfer/datamovers/standard/RefineSchedule.h b/source/transfer/datamovers/standard/RefineSchedule.h
index ed4ecb0..bf2f1b8 100644
--- a/source/transfer/datamovers/standard/RefineSchedule.h
+++ b/source/transfer/datamovers/standard/RefineSchedule.h
@@ -197,7 +197,7 @@ public:
    /*!
     * Virtual destructor for the schedule releases all internal storage.
     */
-   virtual ~RefineSchedule<DIM>();
+   virtual ~RefineSchedule();
 
    /*!
     * @brief Reset this refine schedule to perform data transfers
@@ -542,14 +542,16 @@ private:
     */
    void initialCheckRefineClassItems() const;
 
-   void initializeTimers();
-
-
    /*!
     * @brief Set up things for the entire class.
     */
    void firstConstructorTasks();
 
+   /*!
+    * Allocate static timers.
+    */
+   static void initializeTimers();
+
    /*!
     * Free static timers.
     *
@@ -723,7 +725,17 @@ private:
    int d_max_fill_boxes;
    hier::BoxArray<DIM> d_src_masks;
 
-
+   /*!
+    * Timer objects for performance measurement.
+    */
+   static tbox::Pointer<tbox::Timer> t_fill_data;
+   static tbox::Pointer<tbox::Timer> t_recursive_fill;
+   static tbox::Pointer<tbox::Timer> t_refine_scratch_data;
+   static tbox::Pointer<tbox::Timer> t_gen_sched_n_squared;
+   static tbox::Pointer<tbox::Timer> t_gen_sched_box_graph;
+   static tbox::Pointer<tbox::Timer> t_gen_sched_box_tree;
+   static tbox::Pointer<tbox::Timer> t_gen_comm_sched;
+   static tbox::Pointer<tbox::Timer> t_finish_sched_const;
 };
 
 }
diff --git a/source/transfer/datamovers/standard/RefineTimeTransaction.h b/source/transfer/datamovers/standard/RefineTimeTransaction.h
index ac87a24..c852398 100644
--- a/source/transfer/datamovers/standard/RefineTimeTransaction.h
+++ b/source/transfer/datamovers/standard/RefineTimeTransaction.h
@@ -109,7 +109,7 @@ public:
     * The virtual destructor for time transaction releases all
     * memory associated with the transaction.
     */
-   virtual ~RefineTimeTransaction<DIM>();
+   virtual ~RefineTimeTransaction();
 
    /*!
     * Return a boolean indicating whether this transaction can estimate
diff --git a/source/transfer/datamovers/standard/StandardCoarsenTransactionFactory.h b/source/transfer/datamovers/standard/StandardCoarsenTransactionFactory.h
index 37277a6..61d0fb2 100644
--- a/source/transfer/datamovers/standard/StandardCoarsenTransactionFactory.h
+++ b/source/transfer/datamovers/standard/StandardCoarsenTransactionFactory.h
@@ -44,7 +44,7 @@ public:
    /*!
     * @brief Virtual destructor.
     */
-   virtual ~StandardCoarsenTransactionFactory<DIM>();
+   virtual ~StandardCoarsenTransactionFactory();
 
    /*!
     * @brief Set the array of CoarsenClass::Data items used by the transactions.
diff --git a/source/transfer/datamovers/standard/StandardRefineTransactionFactory.h b/source/transfer/datamovers/standard/StandardRefineTransactionFactory.h
index 8438976..40d9393 100644
--- a/source/transfer/datamovers/standard/StandardRefineTransactionFactory.h
+++ b/source/transfer/datamovers/standard/StandardRefineTransactionFactory.h
@@ -47,7 +47,7 @@ public:
    /*!
     * @brief Virtual destructor.
     */
-   virtual ~StandardRefineTransactionFactory<DIM>();
+   virtual ~StandardRefineTransactionFactory();
 
    /*!
     * @brief Set the array of RefineClass::Data items used by the transactions.
diff --git a/source/transfer/multiblock/MultiblockCoarsenAlgorithm.h b/source/transfer/multiblock/MultiblockCoarsenAlgorithm.h
index 592822f..219d31f 100644
--- a/source/transfer/multiblock/MultiblockCoarsenAlgorithm.h
+++ b/source/transfer/multiblock/MultiblockCoarsenAlgorithm.h
@@ -108,7 +108,7 @@ public:
    /*!
     * The virtual destructor for the algorithm releases all internal storage.
     */
-   virtual ~MultiblockCoarsenAlgorithm<DIM>();
+   virtual ~MultiblockCoarsenAlgorithm();
 
    /*!
     * Register a coarsening operation with the coarsening algorithm.  Data
diff --git a/source/transfer/multiblock/MultiblockCoarsenPatchStrategy.h b/source/transfer/multiblock/MultiblockCoarsenPatchStrategy.h
index b165777..679e122 100644
--- a/source/transfer/multiblock/MultiblockCoarsenPatchStrategy.h
+++ b/source/transfer/multiblock/MultiblockCoarsenPatchStrategy.h
@@ -50,7 +50,7 @@ public:
    /*!
     * The virtual destructor for coarsen strategy does nothing interesting.
     */
-   virtual ~MultiblockCoarsenPatchStrategy<DIM>();
+   virtual ~MultiblockCoarsenPatchStrategy();
 
    /*!
     * Return maximum stencil width needed over all user-defined
diff --git a/source/transfer/multiblock/MultiblockCoarsenSchedule.h b/source/transfer/multiblock/MultiblockCoarsenSchedule.h
index 5f352ef..61d733d 100644
--- a/source/transfer/multiblock/MultiblockCoarsenSchedule.h
+++ b/source/transfer/multiblock/MultiblockCoarsenSchedule.h
@@ -109,7 +109,7 @@ public:
     * @brief The virtual destructor for the schedule releases all internal
     *        storage.
     */
-   virtual ~MultiblockCoarsenSchedule<DIM>();
+   virtual ~MultiblockCoarsenSchedule();
 
    /*!
     * @brief Execute the stored communication schedule and perform the data
diff --git a/source/transfer/multiblock/MultiblockRefineAlgorithm.h b/source/transfer/multiblock/MultiblockRefineAlgorithm.h
index 608111e..47978a4 100644
--- a/source/transfer/multiblock/MultiblockRefineAlgorithm.h
+++ b/source/transfer/multiblock/MultiblockRefineAlgorithm.h
@@ -64,7 +64,7 @@ public:
    /*!
     * @brief Destructor
     */
-   ~MultiblockRefineAlgorithm<DIM>();
+   ~MultiblockRefineAlgorithm();
 
    /*!
     * Register a refine operation with the refine algorithm object.  This
diff --git a/source/transfer/multiblock/MultiblockRefinePatchStrategy.h b/source/transfer/multiblock/MultiblockRefinePatchStrategy.h
index a81bf3e..47773f5 100644
--- a/source/transfer/multiblock/MultiblockRefinePatchStrategy.h
+++ b/source/transfer/multiblock/MultiblockRefinePatchStrategy.h
@@ -46,7 +46,7 @@ public:
    /*!
     * The virtual destructor for refine strategy does nothing interesting.
     */
-   virtual ~MultiblockRefinePatchStrategy<DIM>();
+   virtual ~MultiblockRefinePatchStrategy();
 
    /*!
     * @brief Set the physical boundary conditions.
diff --git a/source/transfer/multiblock/MultiblockRefineSchedule.h b/source/transfer/multiblock/MultiblockRefineSchedule.h
index 07e0f26..00bcaa9 100644
--- a/source/transfer/multiblock/MultiblockRefineSchedule.h
+++ b/source/transfer/multiblock/MultiblockRefineSchedule.h
@@ -159,7 +159,7 @@ public:
    /*!
     * Virtual destructor
     */
-   virtual ~MultiblockRefineSchedule<DIM>();
+   virtual ~MultiblockRefineSchedule();
 
    /*!
     * @brief Execute the stored communication schedule and perform the
diff --git a/source/transfer/operators/CoarsenOperator.h b/source/transfer/operators/CoarsenOperator.h
index 5d17745..fbbea89 100644
--- a/source/transfer/operators/CoarsenOperator.h
+++ b/source/transfer/operators/CoarsenOperator.h
@@ -75,7 +75,7 @@ public:
     * The virtual destructor for the coarsening operator does
     * nothing interesting.
     */
-   virtual ~CoarsenOperator<DIM>();
+   virtual ~CoarsenOperator();
 
    /**
     * Return true if the coarsening operation matches the variable and
diff --git a/source/transfer/operators/Geometry.h b/source/transfer/operators/Geometry.h
index 01597bd..7101c8b 100644
--- a/source/transfer/operators/Geometry.h
+++ b/source/transfer/operators/Geometry.h
@@ -67,7 +67,7 @@ public:
     * The virtual destructor for the geometry base class does
     * nothing interesting.
     */
-   virtual ~Geometry<DIM>();
+   virtual ~Geometry();
 
    /**
     * Add concrete spatial coarsening operator instance to appropriate
diff --git a/source/transfer/operators/RefineOperator.h b/source/transfer/operators/RefineOperator.h
index 5984f5b..580098c 100644
--- a/source/transfer/operators/RefineOperator.h
+++ b/source/transfer/operators/RefineOperator.h
@@ -75,7 +75,7 @@ public:
     * The virtual destructor for the refinement operator does
     * nothing interesting.
     */
-   virtual ~RefineOperator<DIM>();
+   virtual ~RefineOperator();
 
    /**
     * Return true if the refinement operation matches the variable and
diff --git a/source/transfer/operators/TimeInterpolateOperator.h b/source/transfer/operators/TimeInterpolateOperator.h
index 39f2423..b587a47 100644
--- a/source/transfer/operators/TimeInterpolateOperator.h
+++ b/source/transfer/operators/TimeInterpolateOperator.h
@@ -70,7 +70,7 @@ public:
     * The virtual destructor for the coarsening operator does
     * nothing interesting.
     */
-   virtual ~TimeInterpolateOperator<DIM>();
+   virtual ~TimeInterpolateOperator();
 
    /**
     * Return true if the time interpolation operation matches the
diff --git a/source/transfer/operators/VariableFillPattern.C b/source/transfer/operators/VariableFillPattern.C
index cd00635..16caf7c 100644
--- a/source/transfer/operators/VariableFillPattern.C
+++ b/source/transfer/operators/VariableFillPattern.C
@@ -39,7 +39,33 @@ VariableFillPattern<DIM>::~VariableFillPattern()
 {
 }
 
+template<int DIM>
+tbox::Pointer< hier::BoxOverlap<DIM> >
+VariableFillPattern<DIM>::calculateOverlapOnLevel(const hier::BoxGeometry<DIM>& dst_geometry,
+                                                  const hier::BoxGeometry<DIM>& src_geometry,
+                                                  const hier::Box<DIM>& dst_patch_box,
+                                                  const hier::Box<DIM>& src_mask,
+                                                  const bool overwrite_interior,
+                                                  const hier::IntVector<DIM>& src_offset,
+                                                  const int dst_level_num,
+                                                  const int src_level_num) const
+{
+   NULL_USE(dst_level_num);
+   NULL_USE(src_level_num);
+   return calculateOverlap(dst_geometry,
+                           src_geometry,
+                           dst_patch_box,
+                           src_mask,
+                           overwrite_interior,
+                           src_offset);
+}
 
+template<int DIM>
+void VariableFillPattern<DIM>::setTargetPatchLevelNumber(const int level_num)
+{
+   NULL_USE(level_num);
+   return;
+}
 
 }
 }
diff --git a/source/transfer/operators/VariableFillPattern.h b/source/transfer/operators/VariableFillPattern.h
index 35c8377..9100093 100644
--- a/source/transfer/operators/VariableFillPattern.h
+++ b/source/transfer/operators/VariableFillPattern.h
@@ -67,6 +67,47 @@ public:
                     const bool overwrite_interior,
                     const hier::IntVector<DIM>& src_offset) const = 0;
 
+   /*!
+    * This virtual method provides an interface to calculate overlaps between
+    * the destination and source geometries on a specified level of the patch
+    * hierarchy.
+    *
+    * @note A default implementation is provided that simply calls the pure
+    * virtual method calculateOverlap() for implementations that are level
+    * independent.
+    *
+    * @param dst_geometry    geometry object for destination box
+    * @param src_geometry    geometry object for source box
+    * @param dst_patch_box   box for the destination patch
+    * @param src_mask        the source mask, the box resulting from shifting
+    *                        the source box
+    * @param overwrite_interior  controls whether or not to include the
+    *                            destination box interior in the overlap
+    * @param src_offset      the offset between source and destination
+    *                        index space.  src + src_offset = dst
+    * @param dst_level_num   the level of the patch hierarchy on which the
+    *                        dst boxes are located
+    * @param src_level_num   the level of the patch hierarchy on which the
+    *                        src boxes are located
+    *
+    * @return                Pointer to the calculated overlap object
+    */
+   virtual tbox::Pointer< hier::BoxOverlap<DIM> >
+   calculateOverlapOnLevel(const hier::BoxGeometry<DIM>& dst_geometry,
+                           const hier::BoxGeometry<DIM>& src_geometry,
+                           const hier::Box<DIM>& dst_patch_box,
+                           const hier::Box<DIM>& src_mask,
+                           const bool overwrite_interior,
+                           const hier::IntVector<DIM>& src_offset,
+                           const int dst_level_num,
+                           const int src_level_num) const;
+
+   /*!
+    * Set the target patch level number for the variable fill pattern.  The
+    * default implementation is empty.
+    */
+   virtual void setTargetPatchLevelNumber(const int level_num);
+
    /*!
     * Return the maximum ghost width of the boundary stencil.  The default
     * implementation throws an error.
diff --git a/source/transfer/templates/EmptyTransferX.C b/source/transfer/templates/EmptyTransferX.C
index 955f3fb..fed18f1 100644
--- a/source/transfer/templates/EmptyTransferX.C
+++ b/source/transfer/templates/EmptyTransferX.C
@@ -14,6 +14,12 @@
 namespace SAMRAI {
    namespace xfer {
       template<int DIM> class Empty {
+	 Empty() :
+	    something(0) 
+	 {
+	 }
+
+	 int something;
       };
 
       template class Empty< NDIM >;
